(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i2={exports:{}},Sp={},o2={exports:{}},Mn={};var r6;function RB(){if(r6)return Mn;r6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function g(W,O,z){this.props=W,this.context=O,this.refs=v,this.updater=z||m}g.prototype.isReactComponent={},g.prototype.setState=function(W,O){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,O,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function y(){}y.prototype=g.prototype;function w(W,O,z){this.props=W,this.context=O,this.refs=v,this.updater=z||m}var j=w.prototype=new y;j.constructor=w,b(j,g.prototype),j.isPureReactComponent=!0;var N=Array.isArray,S=Object.prototype.hasOwnProperty,A={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function P(W,O,z){var V,U={},K=null,se=null;if(O!=null)for(V in O.ref!==void 0&&(se=O.ref),O.key!==void 0&&(K=""+O.key),O)S.call(O,V)&&!_.hasOwnProperty(V)&&(U[V]=O[V]);var xe=arguments.length-2;if(xe===1)U.children=z;else if(1<xe){for(var ie=Array(xe),ue=0;ue<xe;ue++)ie[ue]=arguments[ue+2];U.children=ie}if(W&&W.defaultProps)for(V in xe=W.defaultProps,xe)U[V]===void 0&&(U[V]=xe[V]);return{$$typeof:e,type:W,key:K,ref:se,props:U,_owner:A.current}}function I(W,O){return{$$typeof:e,type:W.type,key:O,ref:W.ref,props:W.props,_owner:W._owner}}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function T(W){var O={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(z){return O[z]})}var E=/\/+/g;function F(W,O){return typeof W=="object"&&W!==null&&W.key!=null?T(""+W.key):O.toString(36)}function q(W,O,z,V,U){var K=typeof W;(K==="undefined"||K==="boolean")&&(W=null);var se=!1;if(W===null)se=!0;else switch(K){case"string":case"number":se=!0;break;case"object":switch(W.$$typeof){case e:case t:se=!0}}if(se)return se=W,U=U(se),W=V===""?"."+F(se,0):V,N(U)?(z="",W!=null&&(z=W.replace(E,"$&/")+"/"),q(U,O,z,"",function(ue){return ue})):U!=null&&(B(U)&&(U=I(U,z+(!U.key||se&&se.key===U.key?"":(""+U.key).replace(E,"$&/")+"/")+W)),O.push(U)),1;if(se=0,V=V===""?".":V+":",N(W))for(var xe=0;xe<W.length;xe++){K=W[xe];var ie=V+F(K,xe);se+=q(K,O,z,ie,U)}else if(ie=p(W),typeof ie=="function")for(W=ie.call(W),xe=0;!(K=W.next()).done;)K=K.value,ie=V+F(K,xe++),se+=q(K,O,z,ie,U);else if(K==="object")throw O=String(W),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return se}function H(W,O,z){if(W==null)return W;var V=[],U=0;return q(W,V,"","",function(K){return O.call(z,K,U++)}),V}function Q(W){if(W._status===-1){var O=W._result;O=O(),O.then(function(z){(W._status===0||W._status===-1)&&(W._status=1,W._result=z)},function(z){(W._status===0||W._status===-1)&&(W._status=2,W._result=z)}),W._status===-1&&(W._status=0,W._result=O)}if(W._status===1)return W._result.default;throw W._result}var J={current:null},re={transition:null},X={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:re,ReactCurrentOwner:A};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Mn.Children={map:H,forEach:function(W,O,z){H(W,function(){O.apply(this,arguments)},z)},count:function(W){var O=0;return H(W,function(){O++}),O},toArray:function(W){return H(W,function(O){return O})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Mn.Component=g,Mn.Fragment=r,Mn.Profiler=s,Mn.PureComponent=w,Mn.StrictMode=a,Mn.Suspense=c,Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Mn.act=ee,Mn.cloneElement=function(W,O,z){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var V=b({},W.props),U=W.key,K=W.ref,se=W._owner;if(O!=null){if(O.ref!==void 0&&(K=O.ref,se=A.current),O.key!==void 0&&(U=""+O.key),W.type&&W.type.defaultProps)var xe=W.type.defaultProps;for(ie in O)S.call(O,ie)&&!_.hasOwnProperty(ie)&&(V[ie]=O[ie]===void 0&&xe!==void 0?xe[ie]:O[ie])}var ie=arguments.length-2;if(ie===1)V.children=z;else if(1<ie){xe=Array(ie);for(var ue=0;ue<ie;ue++)xe[ue]=arguments[ue+2];V.children=xe}return{$$typeof:e,type:W.type,key:U,ref:K,props:V,_owner:se}},Mn.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},Mn.createElement=P,Mn.createFactory=function(W){var O=P.bind(null,W);return O.type=W,O},Mn.createRef=function(){return{current:null}},Mn.forwardRef=function(W){return{$$typeof:l,render:W}},Mn.isValidElement=B,Mn.lazy=function(W){return{$$typeof:u,_payload:{_status:-1,_result:W},_init:Q}},Mn.memo=function(W,O){return{$$typeof:d,type:W,compare:O===void 0?null:O}},Mn.startTransition=function(W){var O=re.transition;re.transition={};try{W()}finally{re.transition=O}},Mn.unstable_act=ee,Mn.useCallback=function(W,O){return J.current.useCallback(W,O)},Mn.useContext=function(W){return J.current.useContext(W)},Mn.useDebugValue=function(){},Mn.useDeferredValue=function(W){return J.current.useDeferredValue(W)},Mn.useEffect=function(W,O){return J.current.useEffect(W,O)},Mn.useId=function(){return J.current.useId()},Mn.useImperativeHandle=function(W,O,z){return J.current.useImperativeHandle(W,O,z)},Mn.useInsertionEffect=function(W,O){return J.current.useInsertionEffect(W,O)},Mn.useLayoutEffect=function(W,O){return J.current.useLayoutEffect(W,O)},Mn.useMemo=function(W,O){return J.current.useMemo(W,O)},Mn.useReducer=function(W,O,z){return J.current.useReducer(W,O,z)},Mn.useRef=function(W){return J.current.useRef(W)},Mn.useState=function(W){return J.current.useState(W)},Mn.useSyncExternalStore=function(W,O,z){return J.current.useSyncExternalStore(W,O,z)},Mn.useTransition=function(){return J.current.useTransition()},Mn.version="18.3.1",Mn}var n6;function Eb(){return n6||(n6=1,o2.exports=RB()),o2.exports}var a6;function BB(){if(a6)return Sp;a6=1;var e=Eb(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,f={},p=null,m=null;d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(u in c)a.call(c,u)&&!i.hasOwnProperty(u)&&(f[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)f[u]===void 0&&(f[u]=c[u]);return{$$typeof:t,type:l,key:p,ref:m,props:f,_owner:s.current}}return Sp.Fragment=r,Sp.jsx=o,Sp.jsxs=o,Sp}var s6;function UB(){return s6||(s6=1,i2.exports=BB()),i2.exports}var n=UB(),D=Eb();const ut=Pa(D);var nv={},l2={exports:{}},Gl={},c2={exports:{}},d2={};var i6;function qB(){return i6||(i6=1,(function(e){function t(re,X){var ee=re.length;re.push(X);e:for(;0<ee;){var W=ee-1>>>1,O=re[W];if(0<s(O,X))re[W]=X,re[ee]=O,ee=W;else break e}}function r(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var X=re[0],ee=re.pop();if(ee!==X){re[0]=ee;e:for(var W=0,O=re.length,z=O>>>1;W<z;){var V=2*(W+1)-1,U=re[V],K=V+1,se=re[K];if(0>s(U,ee))K<O&&0>s(se,U)?(re[W]=se,re[K]=ee,W=K):(re[W]=U,re[V]=ee,W=V);else if(K<O&&0>s(se,ee))re[W]=se,re[K]=ee,W=K;else break e}}return X}function s(re,X){var ee=re.sortIndex-X.sortIndex;return ee!==0?ee:re.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,m=!1,b=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(re){for(var X=r(d);X!==null;){if(X.callback===null)a(d);else if(X.startTime<=re)a(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(d)}}function N(re){if(v=!1,j(re),!b)if(r(c)!==null)b=!0,Q(S);else{var X=r(d);X!==null&&J(N,X.startTime-re)}}function S(re,X){b=!1,v&&(v=!1,y(P),P=-1),m=!0;var ee=p;try{for(j(X),f=r(c);f!==null&&(!(f.expirationTime>X)||re&&!T());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var O=W(f.expirationTime<=X);X=e.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&a(c),j(X)}else a(c);f=r(c)}if(f!==null)var z=!0;else{var V=r(d);V!==null&&J(N,V.startTime-X),z=!1}return z}finally{f=null,p=ee,m=!1}}var A=!1,_=null,P=-1,I=5,B=-1;function T(){return!(e.unstable_now()-B<I)}function E(){if(_!==null){var re=e.unstable_now();B=re;var X=!0;try{X=_(!0,re)}finally{X?F():(A=!1,_=null)}}else A=!1}var F;if(typeof w=="function")F=function(){w(E)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=E,F=function(){H.postMessage(null)}}else F=function(){g(E,0)};function Q(re){_=re,A||(A=!0,F())}function J(re,X){P=g(function(){re(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,Q(S))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(re){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var ee=p;p=X;try{return re()}finally{p=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,X){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ee=p;p=re;try{return X()}finally{p=ee}},e.unstable_scheduleCallback=function(re,X,ee){var W=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?W+ee:W):ee=W,re){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,re={id:u++,callback:X,priorityLevel:re,startTime:ee,expirationTime:O,sortIndex:-1},ee>W?(re.sortIndex=ee,t(d,re),r(c)===null&&re===r(d)&&(v?(y(P),P=-1):v=!0,J(N,ee-W))):(re.sortIndex=O,t(c,re),b||m||(b=!0,Q(S))),re},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(re){var X=p;return function(){var ee=p;p=X;try{return re.apply(this,arguments)}finally{p=ee}}}})(d2)),d2}var o6;function $B(){return o6||(o6=1,c2.exports=qB()),c2.exports}var l6;function zB(){if(l6)return Gl;l6=1;var e=Eb(),t=$B();function r(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(h,x){o(h,x),o(h+"Capture",x)}function o(h,x){for(s[h]=x,h=0;h<x.length;h++)a.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function p(h){return c.call(f,h)?!0:c.call(u,h)?!1:d.test(h)?f[h]=!0:(u[h]=!0,!1)}function m(h,x,k,M){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return M?!1:k!==null?!k.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function b(h,x,k,M){if(x===null||typeof x>"u"||m(h,x,k,M))return!0;if(M)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(h,x,k,M,Y,ae,Pe){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=M,this.attributeNamespace=Y,this.mustUseProperty=k,this.propertyName=h,this.type=x,this.sanitizeURL=ae,this.removeEmptyString=Pe}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){g[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];g[x]=new v(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){g[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){g[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){g[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){g[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){g[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){g[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){g[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(y,w);g[x]=new v(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(y,w);g[x]=new v(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(y,w);g[x]=new v(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,k,M){var Y=g.hasOwnProperty(x)?g[x]:null;(Y!==null?Y.type!==0:M||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(b(x,k,Y,M)&&(k=null),M||Y===null?p(x)&&(k===null?h.removeAttribute(x):h.setAttribute(x,""+k)):Y.mustUseProperty?h[Y.propertyName]=k===null?Y.type===3?!1:"":k:(x=Y.attributeName,M=Y.attributeNamespace,k===null?h.removeAttribute(x):(Y=Y.type,k=Y===3||Y===4&&k===!0?"":""+k,M?h.setAttributeNS(M,x,k):h.setAttribute(x,k))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),A=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),re=Symbol.iterator;function X(h){return h===null||typeof h!="object"?null:(h=re&&h[re]||h["@@iterator"],typeof h=="function"?h:null)}var ee=Object.assign,W;function O(h){if(W===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+h}var z=!1;function V(h,x){if(!h||z)return"";z=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(kt){var M=kt}Reflect.construct(h,[],x)}else{try{x.call()}catch(kt){M=kt}h.call(x.prototype)}else{try{throw Error()}catch(kt){M=kt}h()}}catch(kt){if(kt&&M&&typeof kt.stack=="string"){for(var Y=kt.stack.split(`
`),ae=M.stack.split(`
`),Pe=Y.length-1,Ze=ae.length-1;1<=Pe&&0<=Ze&&Y[Pe]!==ae[Ze];)Ze--;for(;1<=Pe&&0<=Ze;Pe--,Ze--)if(Y[Pe]!==ae[Ze]){if(Pe!==1||Ze!==1)do if(Pe--,Ze--,0>Ze||Y[Pe]!==ae[Ze]){var ct=`
`+Y[Pe].replace(" at new "," at ");return h.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",h.displayName)),ct}while(1<=Pe&&0<=Ze);break}}}finally{z=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?O(h):""}function U(h){switch(h.tag){case 5:return O(h.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return h=V(h.type,!1),h;case 11:return h=V(h.type.render,!1),h;case 1:return h=V(h.type,!0),h;default:return""}}function K(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case _:return"Fragment";case A:return"Portal";case I:return"Profiler";case P:return"StrictMode";case F:return"Suspense";case q:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case T:return(h.displayName||"Context")+".Consumer";case B:return(h._context.displayName||"Context")+".Provider";case E:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case H:return x=h.displayName||null,x!==null?x:K(h.type)||"Memo";case Q:x=h._payload,h=h._init;try{return K(h(x))}catch{}}return null}function se(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(x);case 8:return x===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function xe(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ie(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ue(h){var x=ie(h)?"checked":"value",k=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),M=""+h[x];if(!h.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var Y=k.get,ae=k.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return Y.call(this)},set:function(Pe){M=""+Pe,ae.call(this,Pe)}}),Object.defineProperty(h,x,{enumerable:k.enumerable}),{getValue:function(){return M},setValue:function(Pe){M=""+Pe},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function Be(h){h._valueTracker||(h._valueTracker=ue(h))}function me(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var k=x.getValue(),M="";return h&&(M=ie(h)?h.checked?"true":"false":h.value),h=M,h!==k?(x.setValue(h),!0):!1}function $e(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Oe(h,x){var k=x.checked;return ee({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??h._wrapperState.initialChecked})}function le(h,x){var k=x.defaultValue==null?"":x.defaultValue,M=x.checked!=null?x.checked:x.defaultChecked;k=xe(x.value!=null?x.value:k),h._wrapperState={initialChecked:M,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function te(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function Te(h,x){te(h,x);var k=xe(x.value),M=x.type;if(k!=null)M==="number"?(k===0&&h.value===""||h.value!=k)&&(h.value=""+k):h.value!==""+k&&(h.value=""+k);else if(M==="submit"||M==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?Ie(h,x.type,k):x.hasOwnProperty("defaultValue")&&Ie(h,x.type,xe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function we(h,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var M=x.type;if(!(M!=="submit"&&M!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,k||x===h.value||(h.value=x),h.defaultValue=x}k=h.name,k!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,k!==""&&(h.name=k)}function Ie(h,x,k){(x!=="number"||$e(h.ownerDocument)!==h)&&(k==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+k&&(h.defaultValue=""+k))}var he=Array.isArray;function de(h,x,k,M){if(h=h.options,x){x={};for(var Y=0;Y<k.length;Y++)x["$"+k[Y]]=!0;for(k=0;k<h.length;k++)Y=x.hasOwnProperty("$"+h[k].value),h[k].selected!==Y&&(h[k].selected=Y),Y&&M&&(h[k].defaultSelected=!0)}else{for(k=""+xe(k),x=null,Y=0;Y<h.length;Y++){if(h[Y].value===k){h[Y].selected=!0,M&&(h[Y].defaultSelected=!0);return}x!==null||h[Y].disabled||(x=h[Y])}x!==null&&(x.selected=!0)}}function Ce(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ve(h,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(r(92));if(he(k)){if(1<k.length)throw Error(r(93));k=k[0]}x=k}x==null&&(x=""),k=x}h._wrapperState={initialValue:xe(k)}}function ge(h,x){var k=xe(x.value),M=xe(x.defaultValue);k!=null&&(k=""+k,k!==h.value&&(h.value=k),x.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)),M!=null&&(h.defaultValue=""+M)}function fe(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function _e(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?_e(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var ke,Fe=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,M,Y){MSApp.execUnsafeLocalFunction(function(){return h(x,k,M,Y)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(ke=ke||document.createElement("div"),ke.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=ke.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function qe(h,x){if(x){var k=h.firstChild;if(k&&k===h.lastChild&&k.nodeType===3){k.nodeValue=x;return}}h.textContent=x}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kt=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(h){Kt.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),et[x]=et[h]})});function qt(h,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||et.hasOwnProperty(h)&&et[h]?(""+x).trim():x+"px"}function vr(h,x){h=h.style;for(var k in x)if(x.hasOwnProperty(k)){var M=k.indexOf("--")===0,Y=qt(k,x[k],M);k==="float"&&(k="cssFloat"),M?h.setProperty(k,Y):h[k]=Y}}var er=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(h,x){if(x){if(er[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function Ge(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=null;function br(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Qt=null,Fr=null,Mr=null;function rt(h){if(h=Ml(h)){if(typeof Qt!="function")throw Error(r(280));var x=h.stateNode;x&&(x=Zu(x),Qt(h.stateNode,h.type,x))}}function At(h){Fr?Mr?Mr.push(h):Mr=[h]:Fr=h}function cr(){if(Fr){var h=Fr,x=Mr;if(Mr=Fr=null,rt(h),x)for(h=0;h<x.length;h++)rt(x[h])}}function wr(h,x){return h(x)}function Gr(){}var jr=!1;function qr(h,x,k){if(jr)return h(x,k);jr=!0;try{return wr(h,x,k)}finally{jr=!1,(Fr!==null||Mr!==null)&&(Gr(),cr())}}function tr(h,x){var k=h.stateNode;if(k===null)return null;var M=Zu(k);if(M===null)return null;k=M[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(h=h.type,M=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!M;break e;default:h=!1}if(h)return null;if(k&&typeof k!="function")throw Error(r(231,x,typeof k));return k}var Xr=!1;if(l)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Xr=!1}function pn(h,x,k,M,Y,ae,Pe,Ze,ct){var kt=Array.prototype.slice.call(arguments,3);try{x.apply(k,kt)}catch(Gt){this.onError(Gt)}}var Nr=!1,Or=null,ne=!1,je=null,Se={onError:function(h){Nr=!0,Or=h}};function oe(h,x,k,M,Y,ae,Pe,Ze,ct){Nr=!1,Or=null,pn.apply(Se,arguments)}function ve(h,x,k,M,Y,ae,Pe,Ze,ct){if(oe.apply(this,arguments),Nr){if(Nr){var kt=Or;Nr=!1,Or=null}else throw Error(r(198));ne||(ne=!0,je=kt)}}function Ae(h){var x=h,k=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(k=x.return),h=x.return;while(h)}return x.tag===3?k:null}function Ke(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function nt(h){if(Ae(h)!==h)throw Error(r(188))}function Qe(h){var x=h.alternate;if(!x){if(x=Ae(h),x===null)throw Error(r(188));return x!==h?null:h}for(var k=h,M=x;;){var Y=k.return;if(Y===null)break;var ae=Y.alternate;if(ae===null){if(M=Y.return,M!==null){k=M;continue}break}if(Y.child===ae.child){for(ae=Y.child;ae;){if(ae===k)return nt(Y),h;if(ae===M)return nt(Y),x;ae=ae.sibling}throw Error(r(188))}if(k.return!==M.return)k=Y,M=ae;else{for(var Pe=!1,Ze=Y.child;Ze;){if(Ze===k){Pe=!0,k=Y,M=ae;break}if(Ze===M){Pe=!0,M=Y,k=ae;break}Ze=Ze.sibling}if(!Pe){for(Ze=ae.child;Ze;){if(Ze===k){Pe=!0,k=ae,M=Y;break}if(Ze===M){Pe=!0,M=ae,k=Y;break}Ze=Ze.sibling}if(!Pe)throw Error(r(189))}}if(k.alternate!==M)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?h:x}function tt(h){return h=Qe(h),h!==null?Xe(h):null}function Xe(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=Xe(h);if(x!==null)return x;h=h.sibling}return null}var Me=t.unstable_scheduleCallback,it=t.unstable_cancelCallback,bt=t.unstable_shouldYield,It=t.unstable_requestPaint,Dt=t.unstable_now,xr=t.unstable_getCurrentPriorityLevel,Rr=t.unstable_ImmediatePriority,Yr=t.unstable_UserBlockingPriority,Nn=t.unstable_NormalPriority,Ps=t.unstable_LowPriority,Sn=t.unstable_IdlePriority,ts=null,Wn=null;function za(h){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(ts,h,void 0,(h.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:ba,Pn=Math.log,Do=Math.LN2;function ba(h){return h>>>=0,h===0?32:31-(Pn(h)/Do|0)|0}var We=64,Tt=4194304;function _t(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function nr(h,x){var k=h.pendingLanes;if(k===0)return 0;var M=0,Y=h.suspendedLanes,ae=h.pingedLanes,Pe=k&268435455;if(Pe!==0){var Ze=Pe&~Y;Ze!==0?M=_t(Ze):(ae&=Pe,ae!==0&&(M=_t(ae)))}else Pe=k&~Y,Pe!==0?M=_t(Pe):ae!==0&&(M=_t(ae));if(M===0)return 0;if(x!==0&&x!==M&&(x&Y)===0&&(Y=M&-M,ae=x&-x,Y>=ae||Y===16&&(ae&4194240)!==0))return x;if((M&4)!==0&&(M|=k&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=M;0<x;)k=31-Vn(x),Y=1<<k,M|=h[k],x&=~Y;return M}function yr(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(h,x){for(var k=h.suspendedLanes,M=h.pingedLanes,Y=h.expirationTimes,ae=h.pendingLanes;0<ae;){var Pe=31-Vn(ae),Ze=1<<Pe,ct=Y[Pe];ct===-1?((Ze&k)===0||(Ze&M)!==0)&&(Y[Pe]=yr(Ze,x)):ct<=x&&(h.expiredLanes|=Ze),ae&=~Ze}}function Pr(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ra(){var h=We;return We<<=1,(We&4194240)===0&&(We=64),h}function _n(h){for(var x=[],k=0;31>k;k++)x.push(h);return x}function Yt(h,x,k){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-Vn(x),h[x]=k}function ur(h,x){var k=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var M=h.eventTimes;for(h=h.expirationTimes;0<k;){var Y=31-Vn(k),ae=1<<Y;x[Y]=0,M[Y]=-1,h[Y]=-1,k&=~ae}}function Lt(h,x){var k=h.entangledLanes|=x;for(h=h.entanglements;k;){var M=31-Vn(k),Y=1<<M;Y&x|h[M]&x&&(h[M]|=x),k&=~Y}}var kr=0;function zt(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Da,ka,Sa,Zt,Zr,La=!1,Xn=[],bn=null,Sr=null,en=null,sr=new Map,Dn=new Map,Ar=[],Fa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ho(h,x){switch(h){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":sr.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(x.pointerId)}}function gs(h,x,k,M,Y,ae){return h===null||h.nativeEvent!==ae?(h={blockedOn:x,domEventName:k,eventSystemFlags:M,nativeEvent:ae,targetContainers:[Y]},x!==null&&(x=Ml(x),x!==null&&ka(x)),h):(h.eventSystemFlags|=M,x=h.targetContainers,Y!==null&&x.indexOf(Y)===-1&&x.push(Y),h)}function vs(h,x,k,M,Y){switch(x){case"focusin":return bn=gs(bn,h,x,k,M,Y),!0;case"dragenter":return Sr=gs(Sr,h,x,k,M,Y),!0;case"mouseover":return en=gs(en,h,x,k,M,Y),!0;case"pointerover":var ae=Y.pointerId;return sr.set(ae,gs(sr.get(ae)||null,h,x,k,M,Y)),!0;case"gotpointercapture":return ae=Y.pointerId,Dn.set(ae,gs(Dn.get(ae)||null,h,x,k,M,Y)),!0}return!1}function bs(h){var x=Fc(h.target);if(x!==null){var k=Ae(x);if(k!==null){if(x=k.tag,x===13){if(x=Ke(k),x!==null){h.blockedOn=x,Zr(h.priority,function(){Sa(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){h.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}h.blockedOn=null}function mo(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var k=hn(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(k===null){k=h.nativeEvent;var M=new k.constructor(k.type,k);jt=M,k.target.dispatchEvent(M),jt=null}else return x=Ml(k),x!==null&&ka(x),h.blockedOn=k,!1;x.shift()}return!0}function ml(h,x,k){mo(h)&&k.delete(x)}function zu(){La=!1,bn!==null&&mo(bn)&&(bn=null),Sr!==null&&mo(Sr)&&(Sr=null),en!==null&&mo(en)&&(en=null),sr.forEach(ml),Dn.forEach(ml)}function po(h,x){h.blockedOn===x&&(h.blockedOn=null,La||(La=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zu)))}function Hi(h){function x(Y){return po(Y,h)}if(0<Xn.length){po(Xn[0],h);for(var k=1;k<Xn.length;k++){var M=Xn[k];M.blockedOn===h&&(M.blockedOn=null)}}for(bn!==null&&po(bn,h),Sr!==null&&po(Sr,h),en!==null&&po(en,h),sr.forEach(x),Dn.forEach(x),k=0;k<Ar.length;k++)M=Ar[k],M.blockedOn===h&&(M.blockedOn=null);for(;0<Ar.length&&(k=Ar[0],k.blockedOn===null);)bs(k),k.blockedOn===null&&Ar.shift()}var hi=N.ReactCurrentBatchConfig,rc=!0;function He(h,x,k,M){var Y=kr,ae=hi.transition;hi.transition=null;try{kr=1,Br(h,x,k,M)}finally{kr=Y,hi.transition=ae}}function pr(h,x,k,M){var Y=kr,ae=hi.transition;hi.transition=null;try{kr=4,Br(h,x,k,M)}finally{kr=Y,hi.transition=ae}}function Br(h,x,k,M){if(rc){var Y=hn(h,x,k,M);if(Y===null)Ku(h,x,M,$r,k),ho(h,M);else if(vs(Y,h,x,k,M))M.stopPropagation();else if(ho(h,M),x&4&&-1<Fa.indexOf(h)){for(;Y!==null;){var ae=Ml(Y);if(ae!==null&&Da(ae),ae=hn(h,x,k,M),ae===null&&Ku(h,x,M,$r,k),ae===Y)break;Y=ae}Y!==null&&M.stopPropagation()}else Ku(h,x,M,null,k)}}var $r=null;function hn(h,x,k,M){if($r=null,h=br(M),h=Fc(h),h!==null)if(x=Ae(h),x===null)h=null;else if(k=x.tag,k===13){if(h=Ke(x),h!==null)return h;h=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return $r=h,null}function qn(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xr()){case Rr:return 1;case Yr:return 4;case Nn:case Ps:return 16;case Sn:return 536870912;default:return 16}default:return 16}}var ua=null,Ma=null,ys=null;function Mf(){if(ys)return ys;var h,x=Ma,k=x.length,M,Y="value"in ua?ua.value:ua.textContent,ae=Y.length;for(h=0;h<k&&x[h]===Y[h];h++);var Pe=k-h;for(M=1;M<=Pe&&x[k-M]===Y[ae-M];M++);return ys=Y.slice(h,1<M?1-M:void 0)}function Wi(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function Ai(){return!0}function Ol(){return!1}function ws(h){function x(k,M,Y,ae,Pe){this._reactName=k,this._targetInst=Y,this.type=M,this.nativeEvent=ae,this.target=Pe,this.currentTarget=null;for(var Ze in h)h.hasOwnProperty(Ze)&&(k=h[Ze],this[Ze]=k?k(ae):ae[Ze]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?Ai:Ol,this.isPropagationStopped=Ol,this}return ee(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),x}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=ws(xo),pd=ee({},xo,{view:0,detail:0}),Ac=ws(pd),xd,pl,Ei,Fo=ee({},pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ei&&(Ei&&h.type==="mousemove"?(xd=h.screenX-Ei.screenX,pl=h.screenY-Ei.screenY):pl=xd=0,Ei=h),xd)},movementY:function(h){return"movementY"in h?h.movementY:pl}}),gd=ws(Fo),Hu=ee({},Fo,{dataTransfer:0}),nu=ws(Hu),Ec=ee({},pd,{relatedTarget:0}),ya=ws(Ec),Wu=ee({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),nc=ws(Wu),au=ee({},xo,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),G=ws(au),Ne=ee({},xo,{data:0}),Ye=ws(Ne),at={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ot={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wt(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=Ot[h])?!!x[h]:!1}function gr(){return Wt}var Hr=ee({},pd,{key:function(h){if(h.key){var x=at[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=Wi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?xt[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(h){return h.type==="keypress"?Wi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Wi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),on=ws(Hr),tn=ee({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cn=ws(tn),Ha=ee({},pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),Wa=ws(Ha),Ns=ee({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zs=ws(Ns),Us=ee({},Fo,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Mo=ws(Us),ei=[9,13,27,32],go=l&&"CompositionEvent"in window,vo=null;l&&"documentMode"in document&&(vo=document.documentMode);var su=l&&"TextEvent"in window&&!vo,iu=l&&(!go||vo&&8<vo&&11>=vo),Tc=" ",vd=!1;function bd(h,x){switch(h){case"keyup":return ei.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yd(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var _a=!1;function bo(h,x){switch(h){case"compositionend":return yd(x);case"keypress":return x.which!==32?null:(vd=!0,Tc);case"textInput":return h=x.data,h===Tc&&vd?null:h;default:return null}}function xl(h,x){if(_a)return h==="compositionend"||!go&&bd(h,x)?(h=Mf(),ys=Ma=ua=null,_a=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return iu&&x.locale!=="ko"?null:x.data;default:return null}}var rs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oc(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!rs[h.type]:x==="textarea"}function ln(h,x,k,M){At(M),x=Xu(x,"onChange"),0<x.length&&(k=new Lo("onChange","change",null,k,M),h.push({event:k,listeners:x}))}var ss=null,xa=null;function mi(h){Gu(h,0)}function $n(h){var x=Mc(h);if(me(x))return h}function qs(h,x){if(h==="change")return x}var Va=!1;if(l){var Vi;if(l){var Ga="oninput"in document;if(!Ga){var js=document.createElement("div");js.setAttribute("oninput","return;"),Ga=typeof js.oninput=="function"}Vi=Ga}else Vi=!1;Va=Vi&&(!document.documentMode||9<document.documentMode)}function wa(){ss&&(ss.detachEvent("onpropertychange",is),xa=ss=null)}function is(h){if(h.propertyName==="value"&&$n(xa)){var x=[];ln(x,xa,h,br(h)),qr(mi,x)}}function Gi(h,x,k){h==="focusin"?(wa(),ss=x,xa=k,ss.attachEvent("onpropertychange",is)):h==="focusout"&&wa()}function Pl(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return $n(xa)}function Ro(h,x){if(h==="click")return $n(x)}function ou(h,x){if(h==="input"||h==="change")return $n(x)}function gl(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var Gn=typeof Object.is=="function"?Object.is:gl;function Il(h,x){if(Gn(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var k=Object.keys(h),M=Object.keys(x);if(k.length!==M.length)return!1;for(M=0;M<k.length;M++){var Y=k[M];if(!c.call(x,Y)||!Gn(h[Y],x[Y]))return!1}return!0}function ti(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ti(h,x){var k=ti(h);h=0;for(var M;k;){if(k.nodeType===3){if(M=h+k.textContent.length,h<=x&&M>=x)return{node:k,offset:x-h};h=M}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=ti(k)}}function Dl(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?Dl(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function wd(){for(var h=window,x=$e();x instanceof h.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)h=x.contentWindow;else break;x=$e(h.document)}return x}function Ll(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function Bo(h){var x=wd(),k=h.focusedElem,M=h.selectionRange;if(x!==k&&k&&k.ownerDocument&&Dl(k.ownerDocument.documentElement,k)){if(M!==null&&Ll(k)){if(x=M.start,h=M.end,h===void 0&&(h=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(h,k.value.length);else if(h=(x=k.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var Y=k.textContent.length,ae=Math.min(M.start,Y);M=M.end===void 0?ae:Math.min(M.end,Y),!h.extend&&ae>M&&(Y=M,M=ae,ae=Y),Y=Ti(k,ae);var Pe=Ti(k,M);Y&&Pe&&(h.rangeCount!==1||h.anchorNode!==Y.node||h.anchorOffset!==Y.offset||h.focusNode!==Pe.node||h.focusOffset!==Pe.offset)&&(x=x.createRange(),x.setStart(Y.node,Y.offset),h.removeAllRanges(),ae>M?(h.addRange(x),h.extend(Pe.node,Pe.offset)):(x.setEnd(Pe.node,Pe.offset),h.addRange(x)))}}for(x=[],h=k;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)h=x[k],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Ki=l&&"documentMode"in document&&11>=document.documentMode,$s=null,Xi=null,Oi=null,Yi=!1;function yo(h,x,k){var M=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Yi||$s==null||$s!==$e(M)||(M=$s,"selectionStart"in M&&Ll(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Oi&&Il(Oi,M)||(Oi=M,M=Xu(Xi,"onSelect"),0<M.length&&(x=new Lo("onSelect","select",null,x,k),h.push({event:x,listeners:M}),x.target=$s)))}function Pc(h,x){var k={};return k[h.toLowerCase()]=x.toLowerCase(),k["Webkit"+h]="webkit"+x,k["Moz"+h]="moz"+x,k}var ks={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},Ss={},na={};l&&(na=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Yn(h){if(Ss[h])return Ss[h];if(!ks[h])return h;var x=ks[h],k;for(k in x)if(x.hasOwnProperty(k)&&k in na)return Ss[h]=x[k];return h}var An=Yn("animationend"),Ca=Yn("animationiteration"),Uo=Yn("animationstart"),lu=Yn("transitionend"),qo=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(h,x){qo.set(h,x),i(x,[h])}for(var Fl=0;Fl<Nd.length;Fl++){var pi=Nd[Fl],xi=pi.toLowerCase(),Vu=pi[0].toUpperCase()+pi.slice(1);$o(xi,"on"+Vu)}$o(An,"onAnimationEnd"),$o(Ca,"onAnimationIteration"),$o(Uo,"onAnimationStart"),$o("dblclick","onDoubleClick"),$o("focusin","onFocus"),$o("focusout","onBlur"),$o(lu,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function cu(h,x,k){var M=h.type||"unknown-event";h.currentTarget=k,ve(M,x,void 0,h),h.currentTarget=null}function Gu(h,x){x=(x&4)!==0;for(var k=0;k<h.length;k++){var M=h[k],Y=M.event;M=M.listeners;e:{var ae=void 0;if(x)for(var Pe=M.length-1;0<=Pe;Pe--){var Ze=M[Pe],ct=Ze.instance,kt=Ze.currentTarget;if(Ze=Ze.listener,ct!==ae&&Y.isPropagationStopped())break e;cu(Y,Ze,kt),ae=ct}else for(Pe=0;Pe<M.length;Pe++){if(Ze=M[Pe],ct=Ze.instance,kt=Ze.currentTarget,Ze=Ze.listener,ct!==ae&&Y.isPropagationStopped())break e;cu(Y,Ze,kt),ae=ct}}}if(ne)throw h=je,ne=!1,je=null,h}function fa(h,x){var k=x[Qi];k===void 0&&(k=x[Qi]=new Set);var M=h+"__bubble";k.has(M)||(du(x,h,2,!1),k.add(M))}function Rf(h,x,k){var M=0;x&&(M|=4),du(k,h,M,x)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function jd(h){if(!h[Ic]){h[Ic]=!0,a.forEach(function(k){k!=="selectionchange"&&(Vh.has(k)||Rf(k,!1,h),Rf(k,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[Ic]||(x[Ic]=!0,Rf("selectionchange",!1,x))}}function du(h,x,k,M){switch(qn(x)){case 1:var Y=He;break;case 4:Y=pr;break;default:Y=Br}k=Y.bind(null,x,k,h),Y=void 0,!Xr||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Y=!0),M?Y!==void 0?h.addEventListener(x,k,{capture:!0,passive:Y}):h.addEventListener(x,k,!0):Y!==void 0?h.addEventListener(x,k,{passive:Y}):h.addEventListener(x,k,!1)}function Ku(h,x,k,M,Y){var ae=M;if((x&1)===0&&(x&2)===0&&M!==null)e:for(;;){if(M===null)return;var Pe=M.tag;if(Pe===3||Pe===4){var Ze=M.stateNode.containerInfo;if(Ze===Y||Ze.nodeType===8&&Ze.parentNode===Y)break;if(Pe===4)for(Pe=M.return;Pe!==null;){var ct=Pe.tag;if((ct===3||ct===4)&&(ct=Pe.stateNode.containerInfo,ct===Y||ct.nodeType===8&&ct.parentNode===Y))return;Pe=Pe.return}for(;Ze!==null;){if(Pe=Fc(Ze),Pe===null)return;if(ct=Pe.tag,ct===5||ct===6){M=ae=Pe;continue e}Ze=Ze.parentNode}}M=M.return}qr(function(){var kt=ae,Gt=br(k),Jt=[];e:{var Vt=qo.get(h);if(Vt!==void 0){var _r=Lo,Ir=h;switch(h){case"keypress":if(Wi(k)===0)break e;case"keydown":case"keyup":_r=on;break;case"focusin":Ir="focus",_r=ya;break;case"focusout":Ir="blur",_r=ya;break;case"beforeblur":case"afterblur":_r=ya;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_r=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_r=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_r=Wa;break;case An:case Ca:case Uo:_r=nc;break;case lu:_r=Zs;break;case"scroll":_r=Ac;break;case"wheel":_r=Mo;break;case"copy":case"cut":case"paste":_r=G;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_r=Cn}var Ur=(x&4)!==0,ai=!Ur&&h==="scroll",yt=Ur?Vt!==null?Vt+"Capture":null:Vt;Ur=[];for(var ht=kt,Nt;ht!==null;){Nt=ht;var ar=Nt.stateNode;if(Nt.tag===5&&ar!==null&&(Nt=ar,yt!==null&&(ar=tr(ht,yt),ar!=null&&Ur.push(Dc(ht,ar,Nt)))),ai)break;ht=ht.return}0<Ur.length&&(Vt=new _r(Vt,Ir,null,k,Gt),Jt.push({event:Vt,listeners:Ur}))}}if((x&7)===0){e:{if(Vt=h==="mouseover"||h==="pointerover",_r=h==="mouseout"||h==="pointerout",Vt&&k!==jt&&(Ir=k.relatedTarget||k.fromElement)&&(Fc(Ir)||Ir[ls]))break e;if((_r||Vt)&&(Vt=Gt.window===Gt?Gt:(Vt=Gt.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,_r?(Ir=k.relatedTarget||k.toElement,_r=kt,Ir=Ir?Fc(Ir):null,Ir!==null&&(ai=Ae(Ir),Ir!==ai||Ir.tag!==5&&Ir.tag!==6)&&(Ir=null)):(_r=null,Ir=kt),_r!==Ir)){if(Ur=gd,ar="onMouseLeave",yt="onMouseEnter",ht="mouse",(h==="pointerout"||h==="pointerover")&&(Ur=Cn,ar="onPointerLeave",yt="onPointerEnter",ht="pointer"),ai=_r==null?Vt:Mc(_r),Nt=Ir==null?Vt:Mc(Ir),Vt=new Ur(ar,ht+"leave",_r,k,Gt),Vt.target=ai,Vt.relatedTarget=Nt,ar=null,Fc(Gt)===kt&&(Ur=new Ur(yt,ht+"enter",Ir,k,Gt),Ur.target=Nt,Ur.relatedTarget=ai,ar=Ur),ai=ar,_r&&Ir)t:{for(Ur=_r,yt=Ir,ht=0,Nt=Ur;Nt;Nt=kd(Nt))ht++;for(Nt=0,ar=yt;ar;ar=kd(ar))Nt++;for(;0<ht-Nt;)Ur=kd(Ur),ht--;for(;0<Nt-ht;)yt=kd(yt),Nt--;for(;ht--;){if(Ur===yt||yt!==null&&Ur===yt.alternate)break t;Ur=kd(Ur),yt=kd(yt)}Ur=null}else Ur=null;_r!==null&&M0(Jt,Vt,_r,Ur,!1),Ir!==null&&ai!==null&&M0(Jt,ai,Ir,Ur,!0)}}e:{if(Vt=kt?Mc(kt):window,_r=Vt.nodeName&&Vt.nodeName.toLowerCase(),_r==="select"||_r==="input"&&Vt.type==="file")var zr=qs;else if(Oc(Vt))if(Va)zr=ou;else{zr=Pl;var Qr=Gi}else(_r=Vt.nodeName)&&_r.toLowerCase()==="input"&&(Vt.type==="checkbox"||Vt.type==="radio")&&(zr=Ro);if(zr&&(zr=zr(h,kt))){ln(Jt,zr,k,Gt);break e}Qr&&Qr(h,Vt,kt),h==="focusout"&&(Qr=Vt._wrapperState)&&Qr.controlled&&Vt.type==="number"&&Ie(Vt,"number",Vt.value)}switch(Qr=kt?Mc(kt):window,h){case"focusin":(Oc(Qr)||Qr.contentEditable==="true")&&($s=Qr,Xi=kt,Oi=null);break;case"focusout":Oi=Xi=$s=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":Yi=!1,yo(Jt,k,Gt);break;case"selectionchange":if(Ki)break;case"keydown":case"keyup":yo(Jt,k,Gt)}var Jr;if(go)e:{switch(h){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else _a?bd(h,k)&&(xn="onCompositionEnd"):h==="keydown"&&k.keyCode===229&&(xn="onCompositionStart");xn&&(iu&&k.locale!=="ko"&&(_a||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&_a&&(Jr=Mf()):(ua=Gt,Ma="value"in ua?ua.value:ua.textContent,_a=!0)),Qr=Xu(kt,xn),0<Qr.length&&(xn=new Ye(xn,h,null,k,Gt),Jt.push({event:xn,listeners:Qr}),Jr?xn.data=Jr:(Jr=yd(k),Jr!==null&&(xn.data=Jr)))),(Jr=su?bo(h,k):xl(h,k))&&(kt=Xu(kt,"onBeforeInput"),0<kt.length&&(Gt=new Ye("onBeforeInput","beforeinput",null,k,Gt),Jt.push({event:Gt,listeners:kt}),Gt.data=Jr))}Gu(Jt,x)})}function Dc(h,x,k){return{instance:h,listener:x,currentTarget:k}}function Xu(h,x){for(var k=x+"Capture",M=[];h!==null;){var Y=h,ae=Y.stateNode;Y.tag===5&&ae!==null&&(Y=ae,ae=tr(h,k),ae!=null&&M.unshift(Dc(h,ae,Y)),ae=tr(h,x),ae!=null&&M.push(Dc(h,ae,Y))),h=h.return}return M}function kd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function M0(h,x,k,M,Y){for(var ae=x._reactName,Pe=[];k!==null&&k!==M;){var Ze=k,ct=Ze.alternate,kt=Ze.stateNode;if(ct!==null&&ct===M)break;Ze.tag===5&&kt!==null&&(Ze=kt,Y?(ct=tr(k,ae),ct!=null&&Pe.unshift(Dc(k,ct,Ze))):Y||(ct=tr(k,ae),ct!=null&&Pe.push(Dc(k,ct,Ze)))),k=k.return}Pe.length!==0&&h.push({event:x,listeners:Pe})}var Bf=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function Yu(h){return(typeof h=="string"?h:""+h).replace(Bf,`
`).replace(Gh,"")}function Qu(h,x,k){if(x=Yu(x),Yu(h)!==x&&k)throw Error(r(425))}function sc(){}var uu=null,fu=null;function Uf(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var R0=typeof setTimeout=="function"?setTimeout:void 0,Lc=typeof clearTimeout=="function"?clearTimeout:void 0,ic=typeof Promise=="function"?Promise:void 0,Sd=typeof queueMicrotask=="function"?queueMicrotask:typeof ic<"u"?function(h){return ic.resolve(null).then(h).catch(gp)}:R0;function gp(h){setTimeout(function(){throw h})}function Ju(h,x){var k=x,M=0;do{var Y=k.nextSibling;if(h.removeChild(k),Y&&Y.nodeType===8)if(k=Y.data,k==="/$"){if(M===0){h.removeChild(Y),Hi(x);return}M--}else k!=="$"&&k!=="$?"&&k!=="$!"||M++;k=Y}while(k);Hi(x)}function os(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function wo(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return h;x--}else k==="/$"&&x++}h=h.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),No="__reactFiber$"+Pi,hu="__reactProps$"+Pi,ls="__reactContainer$"+Pi,Qi="__reactEvents$"+Pi,vp="__reactListeners$"+Pi,qf="__reactHandles$"+Pi;function Fc(h){var x=h[No];if(x)return x;for(var k=h.parentNode;k;){if(x=k[ls]||k[No]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(h=wo(h);h!==null;){if(k=h[No])return k;h=wo(h)}return x}h=k,k=h.parentNode}return null}function Ml(h){return h=h[No]||h[ls],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Mc(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function Zu(h){return h[hu]||null}var $f=[],zo=-1;function vl(h){return{current:h}}function Qn(h){0>zo||(h.current=$f[zo],$f[zo]=null,zo--)}function aa(h,x){zo++,$f[zo]=h.current,h.current=x}var Rc={},_s=vl(Rc),gi=vl(!1),Rl=Rc;function _d(h,x){var k=h.type.contextTypes;if(!k)return Rc;var M=h.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===x)return M.__reactInternalMemoizedMaskedChildContext;var Y={},ae;for(ae in k)Y[ae]=x[ae];return M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=Y),Y}function Ji(h){return h=h.childContextTypes,h!=null}function ef(){Qn(gi),Qn(_s)}function zf(h,x,k){if(_s.current!==Rc)throw Error(r(168));aa(_s,x),aa(gi,k)}function B0(h,x,k){var M=h.stateNode;if(x=x.childContextTypes,typeof M.getChildContext!="function")return k;M=M.getChildContext();for(var Y in M)if(!(Y in x))throw Error(r(108,se(h)||"Unknown",Y));return ee({},k,M)}function Bc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Rc,Rl=_s.current,aa(_s,h),aa(gi,gi.current),!0}function Kh(h,x,k){var M=h.stateNode;if(!M)throw Error(r(169));k?(h=B0(h,x,Rl),M.__reactInternalMemoizedMergedChildContext=h,Qn(gi),Qn(_s),aa(_s,h)):Qn(gi),aa(gi,k)}var Ho=null,Ra=!1,C=!1;function R(h){Ho===null?Ho=[h]:Ho.push(h)}function Z(h){Ra=!0,R(h)}function ce(){if(!C&&Ho!==null){C=!0;var h=0,x=kr;try{var k=Ho;for(kr=1;h<k.length;h++){var M=k[h];do M=M(!0);while(M!==null)}Ho=null,Ra=!1}catch(Y){throw Ho!==null&&(Ho=Ho.slice(h+1)),Me(Rr,ce),Y}finally{kr=x,C=!1}}return null}var be=[],Ee=0,De=null,Le=0,Re=[],ze=0,st=null,gt=1,vt="";function mt(h,x){be[Ee++]=Le,be[Ee++]=De,De=h,Le=x}function Ut(h,x,k){Re[ze++]=gt,Re[ze++]=vt,Re[ze++]=st,st=h;var M=gt;h=vt;var Y=32-Vn(M)-1;M&=~(1<<Y),k+=1;var ae=32-Vn(x)+Y;if(30<ae){var Pe=Y-Y%5;ae=(M&(1<<Pe)-1).toString(32),M>>=Pe,Y-=Pe,gt=1<<32-Vn(x)+Y|k<<Y|M,vt=ae+h}else gt=1<<ae|k<<Y|M,vt=h}function St(h){h.return!==null&&(mt(h,1),Ut(h,1,0))}function dt(h){for(;h===De;)De=be[--Ee],be[Ee]=null,Le=be[--Ee],be[Ee]=null;for(;h===st;)st=Re[--ze],Re[ze]=null,vt=Re[--ze],Re[ze]=null,gt=Re[--ze],Re[ze]=null}var ot=null,Et=null,Ct=!1,Ft=null;function or(h,x){var k=Hc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=h,x=h.deletions,x===null?(h.deletions=[k],h.flags|=16):x.push(k)}function rr(h,x){switch(h.tag){case 5:var k=h.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,ot=h,Et=os(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,ot=h,Et=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=st!==null?{id:gt,overflow:vt}:null,h.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Hc(18,null,null,0),k.stateNode=x,k.return=h,h.child=k,ot=h,Et=null,!0):!1;default:return!1}}function Wr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function fr(h){if(Ct){var x=Et;if(x){var k=x;if(!rr(h,x)){if(Wr(h))throw Error(r(418));x=os(k.nextSibling);var M=ot;x&&rr(h,x)?or(M,k):(h.flags=h.flags&-4097|2,Ct=!1,ot=h)}}else{if(Wr(h))throw Error(r(418));h.flags=h.flags&-4097|2,Ct=!1,ot=h}}}function yn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ot=h}function In(h){if(h!==ot)return!1;if(!Ct)return yn(h),Ct=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!Uf(h.type,h.memoizedProps)),x&&(x=Et)){if(Wr(h))throw En(),Error(r(418));for(;x;)or(h,x),x=os(x.nextSibling)}if(yn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="/$"){if(x===0){Et=os(h.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}h=h.nextSibling}Et=null}}else Et=ot?os(h.stateNode.nextSibling):null;return!0}function En(){for(var h=Et;h;)h=os(h.nextSibling)}function cn(){Et=ot=null,Ct=!1}function Jn(h){Ft===null?Ft=[h]:Ft.push(h)}var Fn=N.ReactCurrentBatchConfig;function rn(h,x,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var M=k.stateNode}if(!M)throw Error(r(147,h));var Y=M,ae=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ae?x.ref:(x=function(Pe){var Ze=Y.refs;Pe===null?delete Ze[ae]:Ze[ae]=Pe},x._stringRef=ae,x)}if(typeof h!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,h))}return h}function Ka(h,x){throw h=Object.prototype.toString.call(x),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function Ii(h){var x=h._init;return x(h._payload)}function Xa(h){function x(yt,ht){if(h){var Nt=yt.deletions;Nt===null?(yt.deletions=[ht],yt.flags|=16):Nt.push(ht)}}function k(yt,ht){if(!h)return null;for(;ht!==null;)x(yt,ht),ht=ht.sibling;return null}function M(yt,ht){for(yt=new Map;ht!==null;)ht.key!==null?yt.set(ht.key,ht):yt.set(ht.index,ht),ht=ht.sibling;return yt}function Y(yt,ht){return yt=Zf(yt,ht),yt.index=0,yt.sibling=null,yt}function ae(yt,ht,Nt){return yt.index=Nt,h?(Nt=yt.alternate,Nt!==null?(Nt=Nt.index,Nt<ht?(yt.flags|=2,ht):Nt):(yt.flags|=2,ht)):(yt.flags|=1048576,ht)}function Pe(yt){return h&&yt.alternate===null&&(yt.flags|=2),yt}function Ze(yt,ht,Nt,ar){return ht===null||ht.tag!==6?(ht=e2(Nt,yt.mode,ar),ht.return=yt,ht):(ht=Y(ht,Nt),ht.return=yt,ht)}function ct(yt,ht,Nt,ar){var zr=Nt.type;return zr===_?Gt(yt,ht,Nt.props.children,ar,Nt.key):ht!==null&&(ht.elementType===zr||typeof zr=="object"&&zr!==null&&zr.$$typeof===Q&&Ii(zr)===ht.type)?(ar=Y(ht,Nt.props),ar.ref=rn(yt,ht,Nt),ar.return=yt,ar):(ar=Kg(Nt.type,Nt.key,Nt.props,null,yt.mode,ar),ar.ref=rn(yt,ht,Nt),ar.return=yt,ar)}function kt(yt,ht,Nt,ar){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Nt.containerInfo||ht.stateNode.implementation!==Nt.implementation?(ht=t2(Nt,yt.mode,ar),ht.return=yt,ht):(ht=Y(ht,Nt.children||[]),ht.return=yt,ht)}function Gt(yt,ht,Nt,ar,zr){return ht===null||ht.tag!==7?(ht=K0(Nt,yt.mode,ar,zr),ht.return=yt,ht):(ht=Y(ht,Nt),ht.return=yt,ht)}function Jt(yt,ht,Nt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=e2(""+ht,yt.mode,Nt),ht.return=yt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case S:return Nt=Kg(ht.type,ht.key,ht.props,null,yt.mode,Nt),Nt.ref=rn(yt,null,ht),Nt.return=yt,Nt;case A:return ht=t2(ht,yt.mode,Nt),ht.return=yt,ht;case Q:var ar=ht._init;return Jt(yt,ar(ht._payload),Nt)}if(he(ht)||X(ht))return ht=K0(ht,yt.mode,Nt,null),ht.return=yt,ht;Ka(yt,ht)}return null}function Vt(yt,ht,Nt,ar){var zr=ht!==null?ht.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return zr!==null?null:Ze(yt,ht,""+Nt,ar);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case S:return Nt.key===zr?ct(yt,ht,Nt,ar):null;case A:return Nt.key===zr?kt(yt,ht,Nt,ar):null;case Q:return zr=Nt._init,Vt(yt,ht,zr(Nt._payload),ar)}if(he(Nt)||X(Nt))return zr!==null?null:Gt(yt,ht,Nt,ar,null);Ka(yt,Nt)}return null}function _r(yt,ht,Nt,ar,zr){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return yt=yt.get(Nt)||null,Ze(ht,yt,""+ar,zr);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case S:return yt=yt.get(ar.key===null?Nt:ar.key)||null,ct(ht,yt,ar,zr);case A:return yt=yt.get(ar.key===null?Nt:ar.key)||null,kt(ht,yt,ar,zr);case Q:var Qr=ar._init;return _r(yt,ht,Nt,Qr(ar._payload),zr)}if(he(ar)||X(ar))return yt=yt.get(Nt)||null,Gt(ht,yt,ar,zr,null);Ka(ht,ar)}return null}function Ir(yt,ht,Nt,ar){for(var zr=null,Qr=null,Jr=ht,xn=ht=0,no=null;Jr!==null&&xn<Nt.length;xn++){Jr.index>xn?(no=Jr,Jr=null):no=Jr.sibling;var ha=Vt(yt,Jr,Nt[xn],ar);if(ha===null){Jr===null&&(Jr=no);break}h&&Jr&&ha.alternate===null&&x(yt,Jr),ht=ae(ha,ht,xn),Qr===null?zr=ha:Qr.sibling=ha,Qr=ha,Jr=no}if(xn===Nt.length)return k(yt,Jr),Ct&&mt(yt,xn),zr;if(Jr===null){for(;xn<Nt.length;xn++)Jr=Jt(yt,Nt[xn],ar),Jr!==null&&(ht=ae(Jr,ht,xn),Qr===null?zr=Jr:Qr.sibling=Jr,Qr=Jr);return Ct&&mt(yt,xn),zr}for(Jr=M(yt,Jr);xn<Nt.length;xn++)no=_r(Jr,yt,xn,Nt[xn],ar),no!==null&&(h&&no.alternate!==null&&Jr.delete(no.key===null?xn:no.key),ht=ae(no,ht,xn),Qr===null?zr=no:Qr.sibling=no,Qr=no);return h&&Jr.forEach(function(e0){return x(yt,e0)}),Ct&&mt(yt,xn),zr}function Ur(yt,ht,Nt,ar){var zr=X(Nt);if(typeof zr!="function")throw Error(r(150));if(Nt=zr.call(Nt),Nt==null)throw Error(r(151));for(var Qr=zr=null,Jr=ht,xn=ht=0,no=null,ha=Nt.next();Jr!==null&&!ha.done;xn++,ha=Nt.next()){Jr.index>xn?(no=Jr,Jr=null):no=Jr.sibling;var e0=Vt(yt,Jr,ha.value,ar);if(e0===null){Jr===null&&(Jr=no);break}h&&Jr&&e0.alternate===null&&x(yt,Jr),ht=ae(e0,ht,xn),Qr===null?zr=e0:Qr.sibling=e0,Qr=e0,Jr=no}if(ha.done)return k(yt,Jr),Ct&&mt(yt,xn),zr;if(Jr===null){for(;!ha.done;xn++,ha=Nt.next())ha=Jt(yt,ha.value,ar),ha!==null&&(ht=ae(ha,ht,xn),Qr===null?zr=ha:Qr.sibling=ha,Qr=ha);return Ct&&mt(yt,xn),zr}for(Jr=M(yt,Jr);!ha.done;xn++,ha=Nt.next())ha=_r(Jr,yt,xn,ha.value,ar),ha!==null&&(h&&ha.alternate!==null&&Jr.delete(ha.key===null?xn:ha.key),ht=ae(ha,ht,xn),Qr===null?zr=ha:Qr.sibling=ha,Qr=ha);return h&&Jr.forEach(function(MB){return x(yt,MB)}),Ct&&mt(yt,xn),zr}function ai(yt,ht,Nt,ar){if(typeof Nt=="object"&&Nt!==null&&Nt.type===_&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case S:e:{for(var zr=Nt.key,Qr=ht;Qr!==null;){if(Qr.key===zr){if(zr=Nt.type,zr===_){if(Qr.tag===7){k(yt,Qr.sibling),ht=Y(Qr,Nt.props.children),ht.return=yt,yt=ht;break e}}else if(Qr.elementType===zr||typeof zr=="object"&&zr!==null&&zr.$$typeof===Q&&Ii(zr)===Qr.type){k(yt,Qr.sibling),ht=Y(Qr,Nt.props),ht.ref=rn(yt,Qr,Nt),ht.return=yt,yt=ht;break e}k(yt,Qr);break}else x(yt,Qr);Qr=Qr.sibling}Nt.type===_?(ht=K0(Nt.props.children,yt.mode,ar,Nt.key),ht.return=yt,yt=ht):(ar=Kg(Nt.type,Nt.key,Nt.props,null,yt.mode,ar),ar.ref=rn(yt,ht,Nt),ar.return=yt,yt=ar)}return Pe(yt);case A:e:{for(Qr=Nt.key;ht!==null;){if(ht.key===Qr)if(ht.tag===4&&ht.stateNode.containerInfo===Nt.containerInfo&&ht.stateNode.implementation===Nt.implementation){k(yt,ht.sibling),ht=Y(ht,Nt.children||[]),ht.return=yt,yt=ht;break e}else{k(yt,ht);break}else x(yt,ht);ht=ht.sibling}ht=t2(Nt,yt.mode,ar),ht.return=yt,yt=ht}return Pe(yt);case Q:return Qr=Nt._init,ai(yt,ht,Qr(Nt._payload),ar)}if(he(Nt))return Ir(yt,ht,Nt,ar);if(X(Nt))return Ur(yt,ht,Nt,ar);Ka(yt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"?(Nt=""+Nt,ht!==null&&ht.tag===6?(k(yt,ht.sibling),ht=Y(ht,Nt),ht.return=yt,yt=ht):(k(yt,ht),ht=e2(Nt,yt.mode,ar),ht.return=yt,yt=ht),Pe(yt)):k(yt,ht)}return ai}var Cs=Xa(!0),Zn=Xa(!1),Is=vl(null),vi=null,Ya=null,Ba=null;function zs(){Ba=Ya=vi=null}function Di(h){var x=Is.current;Qn(Is),h._currentValue=x}function Wo(h,x,k){for(;h!==null;){var M=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,M!==null&&(M.childLanes|=x)):M!==null&&(M.childLanes&x)!==x&&(M.childLanes|=x),h===k)break;h=h.return}}function Qa(h,x){vi=h,Ba=Ya=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&(Hl=!0),h.firstContext=null)}function ns(h){var x=h._currentValue;if(Ba!==h)if(h={context:h,memoizedValue:x,next:null},Ya===null){if(vi===null)throw Error(r(308));Ya=h,vi.dependencies={lanes:0,firstContext:h}}else Ya=Ya.next=h;return x}var Ds=null;function Uc(h){Ds===null?Ds=[h]:Ds.push(h)}function Zi(h,x,k,M){var Y=x.interleaved;return Y===null?(k.next=k,Uc(x)):(k.next=Y.next,Y.next=k),x.interleaved=k,Kn(h,M)}function Kn(h,x){h.lanes|=x;var k=h.alternate;for(k!==null&&(k.lanes|=x),k=h,h=h.return;h!==null;)h.childLanes|=x,k=h.alternate,k!==null&&(k.childLanes|=x),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Bl=!1;function Cd(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mu(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Vo(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function jo(h,x,k){var M=h.updateQueue;if(M===null)return null;if(M=M.shared,(oa&2)!==0){var Y=M.pending;return Y===null?x.next=x:(x.next=Y.next,Y.next=x),M.pending=x,Kn(h,k)}return Y=M.interleaved,Y===null?(x.next=x,Uc(M)):(x.next=Y.next,Y.next=x),M.interleaved=x,Kn(h,k)}function oc(h,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var M=x.lanes;M&=h.pendingLanes,k|=M,x.lanes=k,Lt(h,k)}}function ko(h,x){var k=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,k===M)){var Y=null,ae=null;if(k=k.firstBaseUpdate,k!==null){do{var Pe={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};ae===null?Y=ae=Pe:ae=ae.next=Pe,k=k.next}while(k!==null);ae===null?Y=ae=x:ae=ae.next=x}else Y=ae=x;k={baseState:M.baseState,firstBaseUpdate:Y,lastBaseUpdate:ae,shared:M.shared,effects:M.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=x:h.next=x,k.lastBaseUpdate=x}function Ul(h,x,k,M){var Y=h.updateQueue;Bl=!1;var ae=Y.firstBaseUpdate,Pe=Y.lastBaseUpdate,Ze=Y.shared.pending;if(Ze!==null){Y.shared.pending=null;var ct=Ze,kt=ct.next;ct.next=null,Pe===null?ae=kt:Pe.next=kt,Pe=ct;var Gt=h.alternate;Gt!==null&&(Gt=Gt.updateQueue,Ze=Gt.lastBaseUpdate,Ze!==Pe&&(Ze===null?Gt.firstBaseUpdate=kt:Ze.next=kt,Gt.lastBaseUpdate=ct))}if(ae!==null){var Jt=Y.baseState;Pe=0,Gt=kt=ct=null,Ze=ae;do{var Vt=Ze.lane,_r=Ze.eventTime;if((M&Vt)===Vt){Gt!==null&&(Gt=Gt.next={eventTime:_r,lane:0,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null});e:{var Ir=h,Ur=Ze;switch(Vt=x,_r=k,Ur.tag){case 1:if(Ir=Ur.payload,typeof Ir=="function"){Jt=Ir.call(_r,Jt,Vt);break e}Jt=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=Ur.payload,Vt=typeof Ir=="function"?Ir.call(_r,Jt,Vt):Ir,Vt==null)break e;Jt=ee({},Jt,Vt);break e;case 2:Bl=!0}}Ze.callback!==null&&Ze.lane!==0&&(h.flags|=64,Vt=Y.effects,Vt===null?Y.effects=[Ze]:Vt.push(Ze))}else _r={eventTime:_r,lane:Vt,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null},Gt===null?(kt=Gt=_r,ct=Jt):Gt=Gt.next=_r,Pe|=Vt;if(Ze=Ze.next,Ze===null){if(Ze=Y.shared.pending,Ze===null)break;Vt=Ze,Ze=Vt.next,Vt.next=null,Y.lastBaseUpdate=Vt,Y.shared.pending=null}}while(!0);if(Gt===null&&(ct=Jt),Y.baseState=ct,Y.firstBaseUpdate=kt,Y.lastBaseUpdate=Gt,x=Y.shared.interleaved,x!==null){Y=x;do Pe|=Y.lane,Y=Y.next;while(Y!==x)}else ae===null&&(Y.shared.lanes=0);H0|=Pe,h.lanes=Pe,h.memoizedState=Jt}}function Ad(h,x,k){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var M=h[x],Y=M.callback;if(Y!==null){if(M.callback=null,M=k,typeof Y!="function")throw Error(r(191,Y));Y.call(M)}}}var pu={},So=vl(pu),xu=vl(pu),qc=vl(pu);function lc(h){if(h===pu)throw Error(r(174));return h}function gu(h,x){switch(aa(qc,x),aa(xu,h),aa(So,pu),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Ue(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=Ue(x,h)}Qn(So),aa(So,x)}function ql(){Qn(So),Qn(xu),Qn(qc)}function Xh(h){lc(qc.current);var x=lc(So.current),k=Ue(x,h.type);x!==k&&(aa(xu,h),aa(So,k))}function tf(h){xu.current===h&&(Qn(So),Qn(xu))}var ga=vl(0);function ri(h){for(var x=h;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var cc=[];function U0(){for(var h=0;h<cc.length;h++)cc[h]._workInProgressVersionPrimary=null;cc.length=0}var Ed=N.ReactCurrentDispatcher,Hf=N.ReactCurrentBatchConfig,$l=0,Ua=null,As=null,cs=null,vu=!1,dc=!1,$c=0,q0=0;function Ls(){throw Error(r(321))}function Wf(h,x){if(x===null)return!1;for(var k=0;k<x.length&&k<h.length;k++)if(!Gn(h[k],x[k]))return!1;return!0}function rf(h,x,k,M,Y,ae){if($l=ae,Ua=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Ed.current=h===null||h.memoizedState===null?cB:dB,h=k(M,Y),dc){ae=0;do{if(dc=!1,$c=0,25<=ae)throw Error(r(301));ae+=1,cs=As=null,x.updateQueue=null,Ed.current=uB,h=k(M,Y)}while(dc)}if(Ed.current=Dg,x=As!==null&&As.next!==null,$l=0,cs=As=Ua=null,vu=!1,x)throw Error(r(300));return h}function zl(){var h=$c!==0;return $c=0,h}function Go(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cs===null?Ua.memoizedState=cs=h:cs=cs.next=h,cs}function eo(){if(As===null){var h=Ua.alternate;h=h!==null?h.memoizedState:null}else h=As.next;var x=cs===null?Ua.memoizedState:cs.next;if(x!==null)cs=x,As=h;else{if(h===null)throw Error(r(310));As=h,h={memoizedState:As.memoizedState,baseState:As.baseState,baseQueue:As.baseQueue,queue:As.queue,next:null},cs===null?Ua.memoizedState=cs=h:cs=cs.next=h}return cs}function nf(h,x){return typeof x=="function"?x(h):x}function Vf(h){var x=eo(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var M=As,Y=M.baseQueue,ae=k.pending;if(ae!==null){if(Y!==null){var Pe=Y.next;Y.next=ae.next,ae.next=Pe}M.baseQueue=Y=ae,k.pending=null}if(Y!==null){ae=Y.next,M=M.baseState;var Ze=Pe=null,ct=null,kt=ae;do{var Gt=kt.lane;if(($l&Gt)===Gt)ct!==null&&(ct=ct.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),M=kt.hasEagerState?kt.eagerState:h(M,kt.action);else{var Jt={lane:Gt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};ct===null?(Ze=ct=Jt,Pe=M):ct=ct.next=Jt,Ua.lanes|=Gt,H0|=Gt}kt=kt.next}while(kt!==null&&kt!==ae);ct===null?Pe=M:ct.next=Ze,Gn(M,x.memoizedState)||(Hl=!0),x.memoizedState=M,x.baseState=Pe,x.baseQueue=ct,k.lastRenderedState=M}if(h=k.interleaved,h!==null){Y=h;do ae=Y.lane,Ua.lanes|=ae,H0|=ae,Y=Y.next;while(Y!==h)}else Y===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function uc(h){var x=eo(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var M=k.dispatch,Y=k.pending,ae=x.memoizedState;if(Y!==null){k.pending=null;var Pe=Y=Y.next;do ae=h(ae,Pe.action),Pe=Pe.next;while(Pe!==Y);Gn(ae,x.memoizedState)||(Hl=!0),x.memoizedState=ae,x.baseQueue===null&&(x.baseState=ae),k.lastRenderedState=ae}return[ae,M]}function Td(){}function af(h,x){var k=Ua,M=eo(),Y=x(),ae=!Gn(M.memoizedState,Y);if(ae&&(M.memoizedState=Y,Hl=!0),M=M.queue,wt(z0.bind(null,k,M,h),[h]),M.getSnapshot!==x||ae||cs!==null&&cs.memoizedState.tag&1){if(k.flags|=2048,pe(9,$0.bind(null,k,M,Y,x),void 0,null),ro===null)throw Error(r(349));($l&30)!==0||to(k,x,Y)}return Y}function to(h,x,k){h.flags|=16384,h={getSnapshot:x,value:k},x=Ua.updateQueue,x===null?(x={lastEffect:null,stores:null},Ua.updateQueue=x,x.stores=[h]):(k=x.stores,k===null?x.stores=[h]:k.push(h))}function $0(h,x,k,M){x.value=k,x.getSnapshot=M,fc(x)&&sf(h)}function z0(h,x,k){return k(function(){fc(x)&&sf(h)})}function fc(h){var x=h.getSnapshot;h=h.value;try{var k=x();return!Gn(h,k)}catch{return!0}}function sf(h){var x=Kn(h,1);x!==null&&Dd(x,h,1,-1)}function L(h){var x=Go();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:h},x.queue=h,h=h.dispatch=lB.bind(null,Ua,h),[x.memoizedState,h]}function pe(h,x,k,M){return h={tag:h,create:x,destroy:k,deps:M,next:null},x=Ua.updateQueue,x===null?(x={lastEffect:null,stores:null},Ua.updateQueue=x,x.lastEffect=h.next=h):(k=x.lastEffect,k===null?x.lastEffect=h.next=h:(M=k.next,k.next=h,h.next=M,x.lastEffect=h)),h}function ye(){return eo().memoizedState}function Je(h,x,k,M){var Y=Go();Ua.flags|=h,Y.memoizedState=pe(1|x,k,void 0,M===void 0?null:M)}function lt(h,x,k,M){var Y=eo();M=M===void 0?null:M;var ae=void 0;if(As!==null){var Pe=As.memoizedState;if(ae=Pe.destroy,M!==null&&Wf(M,Pe.deps)){Y.memoizedState=pe(x,k,ae,M);return}}Ua.flags|=h,Y.memoizedState=pe(1|x,k,ae,M)}function Pt(h,x){return Je(8390656,8,h,x)}function wt(h,x){return lt(2048,8,h,x)}function $t(h,x){return lt(4,2,h,x)}function Cr(h,x){return lt(4,4,h,x)}function vn(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function sa(h,x,k){return k=k!=null?k.concat([h]):null,lt(4,4,vn.bind(null,x,h),k)}function ia(){}function ni(h,x){var k=eo();x=x===void 0?null:x;var M=k.memoizedState;return M!==null&&x!==null&&Wf(x,M[1])?M[0]:(k.memoizedState=[h,x],h)}function Gf(h,x){var k=eo();x=x===void 0?null:x;var M=k.memoizedState;return M!==null&&x!==null&&Wf(x,M[1])?M[0]:(h=h(),k.memoizedState=[h,x],h)}function Cy(h,x,k){return($l&21)===0?(h.baseState&&(h.baseState=!1,Hl=!0),h.memoizedState=k):(Gn(k,x)||(k=ra(),Ua.lanes|=k,H0|=k,h.baseState=!0),x)}function iB(h,x){var k=kr;kr=k!==0&&4>k?k:4,h(!0);var M=Hf.transition;Hf.transition={};try{h(!1),x()}finally{kr=k,Hf.transition=M}}function a_(){return eo().memoizedState}function oB(h,x,k){var M=Qf(h);if(k={lane:M,action:k,hasEagerState:!1,eagerState:null,next:null},s_(h))i_(x,k);else if(k=Zi(h,x,k,M),k!==null){var Y=yl();Dd(k,h,M,Y),o_(k,x,M)}}function lB(h,x,k){var M=Qf(h),Y={lane:M,action:k,hasEagerState:!1,eagerState:null,next:null};if(s_(h))i_(x,Y);else{var ae=h.alternate;if(h.lanes===0&&(ae===null||ae.lanes===0)&&(ae=x.lastRenderedReducer,ae!==null))try{var Pe=x.lastRenderedState,Ze=ae(Pe,k);if(Y.hasEagerState=!0,Y.eagerState=Ze,Gn(Ze,Pe)){var ct=x.interleaved;ct===null?(Y.next=Y,Uc(x)):(Y.next=ct.next,ct.next=Y),x.interleaved=Y;return}}catch{}k=Zi(h,x,Y,M),k!==null&&(Y=yl(),Dd(k,h,M,Y),o_(k,x,M))}}function s_(h){var x=h.alternate;return h===Ua||x!==null&&x===Ua}function i_(h,x){dc=vu=!0;var k=h.pending;k===null?x.next=x:(x.next=k.next,k.next=x),h.pending=x}function o_(h,x,k){if((k&4194240)!==0){var M=x.lanes;M&=h.pendingLanes,k|=M,x.lanes=k,Lt(h,k)}}var Dg={readContext:ns,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},cB={readContext:ns,useCallback:function(h,x){return Go().memoizedState=[h,x===void 0?null:x],h},useContext:ns,useEffect:Pt,useImperativeHandle:function(h,x,k){return k=k!=null?k.concat([h]):null,Je(4194308,4,vn.bind(null,x,h),k)},useLayoutEffect:function(h,x){return Je(4194308,4,h,x)},useInsertionEffect:function(h,x){return Je(4,2,h,x)},useMemo:function(h,x){var k=Go();return x=x===void 0?null:x,h=h(),k.memoizedState=[h,x],h},useReducer:function(h,x,k){var M=Go();return x=k!==void 0?k(x):x,M.memoizedState=M.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},M.queue=h,h=h.dispatch=oB.bind(null,Ua,h),[M.memoizedState,h]},useRef:function(h){var x=Go();return h={current:h},x.memoizedState=h},useState:L,useDebugValue:ia,useDeferredValue:function(h){return Go().memoizedState=h},useTransition:function(){var h=L(!1),x=h[0];return h=iB.bind(null,h[1]),Go().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,k){var M=Ua,Y=Go();if(Ct){if(k===void 0)throw Error(r(407));k=k()}else{if(k=x(),ro===null)throw Error(r(349));($l&30)!==0||to(M,x,k)}Y.memoizedState=k;var ae={value:k,getSnapshot:x};return Y.queue=ae,Pt(z0.bind(null,M,ae,h),[h]),M.flags|=2048,pe(9,$0.bind(null,M,ae,k,x),void 0,null),k},useId:function(){var h=Go(),x=ro.identifierPrefix;if(Ct){var k=vt,M=gt;k=(M&~(1<<32-Vn(M)-1)).toString(32)+k,x=":"+x+"R"+k,k=$c++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=q0++,x=":"+x+"r"+k.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},dB={readContext:ns,useCallback:ni,useContext:ns,useEffect:wt,useImperativeHandle:sa,useInsertionEffect:$t,useLayoutEffect:Cr,useMemo:Gf,useReducer:Vf,useRef:ye,useState:function(){return Vf(nf)},useDebugValue:ia,useDeferredValue:function(h){var x=eo();return Cy(x,As.memoizedState,h)},useTransition:function(){var h=Vf(nf)[0],x=eo().memoizedState;return[h,x]},useMutableSource:Td,useSyncExternalStore:af,useId:a_,unstable_isNewReconciler:!1},uB={readContext:ns,useCallback:ni,useContext:ns,useEffect:wt,useImperativeHandle:sa,useInsertionEffect:$t,useLayoutEffect:Cr,useMemo:Gf,useReducer:uc,useRef:ye,useState:function(){return uc(nf)},useDebugValue:ia,useDeferredValue:function(h){var x=eo();return As===null?x.memoizedState=h:Cy(x,As.memoizedState,h)},useTransition:function(){var h=uc(nf)[0],x=eo().memoizedState;return[h,x]},useMutableSource:Td,useSyncExternalStore:af,useId:a_,unstable_isNewReconciler:!1};function Od(h,x){if(h&&h.defaultProps){x=ee({},x),h=h.defaultProps;for(var k in h)x[k]===void 0&&(x[k]=h[k]);return x}return x}function Ay(h,x,k,M){x=h.memoizedState,k=k(M,x),k=k==null?x:ee({},x,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var Lg={isMounted:function(h){return(h=h._reactInternals)?Ae(h)===h:!1},enqueueSetState:function(h,x,k){h=h._reactInternals;var M=yl(),Y=Qf(h),ae=Vo(M,Y);ae.payload=x,k!=null&&(ae.callback=k),x=jo(h,ae,Y),x!==null&&(Dd(x,h,Y,M),oc(x,h,Y))},enqueueReplaceState:function(h,x,k){h=h._reactInternals;var M=yl(),Y=Qf(h),ae=Vo(M,Y);ae.tag=1,ae.payload=x,k!=null&&(ae.callback=k),x=jo(h,ae,Y),x!==null&&(Dd(x,h,Y,M),oc(x,h,Y))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var k=yl(),M=Qf(h),Y=Vo(k,M);Y.tag=2,x!=null&&(Y.callback=x),x=jo(h,Y,M),x!==null&&(Dd(x,h,M,k),oc(x,h,M))}};function l_(h,x,k,M,Y,ae,Pe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,ae,Pe):x.prototype&&x.prototype.isPureReactComponent?!Il(k,M)||!Il(Y,ae):!0}function c_(h,x,k){var M=!1,Y=Rc,ae=x.contextType;return typeof ae=="object"&&ae!==null?ae=ns(ae):(Y=Ji(x)?Rl:_s.current,M=x.contextTypes,ae=(M=M!=null)?_d(h,Y):Rc),x=new x(k,ae),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Lg,h.stateNode=x,x._reactInternals=h,M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=Y,h.__reactInternalMemoizedMaskedChildContext=ae),x}function d_(h,x,k,M){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,M),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,M),x.state!==h&&Lg.enqueueReplaceState(x,x.state,null)}function Ey(h,x,k,M){var Y=h.stateNode;Y.props=k,Y.state=h.memoizedState,Y.refs={},Cd(h);var ae=x.contextType;typeof ae=="object"&&ae!==null?Y.context=ns(ae):(ae=Ji(x)?Rl:_s.current,Y.context=_d(h,ae)),Y.state=h.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(Ay(h,x,ae,k),Y.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(x=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),x!==Y.state&&Lg.enqueueReplaceState(Y,Y.state,null),Ul(h,k,Y,M),Y.state=h.memoizedState),typeof Y.componentDidMount=="function"&&(h.flags|=4194308)}function Yh(h,x){try{var k="",M=x;do k+=U(M),M=M.return;while(M);var Y=k}catch(ae){Y=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:h,source:x,stack:Y,digest:null}}function Ty(h,x,k){return{value:h,source:null,stack:k??null,digest:x??null}}function Oy(h,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var fB=typeof WeakMap=="function"?WeakMap:Map;function u_(h,x,k){k=Vo(-1,k),k.tag=3,k.payload={element:null};var M=x.value;return k.callback=function(){$g||($g=!0,Vy=M),Oy(h,x)},k}function f_(h,x,k){k=Vo(-1,k),k.tag=3;var M=h.type.getDerivedStateFromError;if(typeof M=="function"){var Y=x.value;k.payload=function(){return M(Y)},k.callback=function(){Oy(h,x)}}var ae=h.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(k.callback=function(){Oy(h,x),typeof M!="function"&&(Xf===null?Xf=new Set([this]):Xf.add(this));var Pe=x.stack;this.componentDidCatch(x.value,{componentStack:Pe!==null?Pe:""})}),k}function h_(h,x,k){var M=h.pingCache;if(M===null){M=h.pingCache=new fB;var Y=new Set;M.set(x,Y)}else Y=M.get(x),Y===void 0&&(Y=new Set,M.set(x,Y));Y.has(k)||(Y.add(k),h=_B.bind(null,h,x,k),x.then(h,h))}function m_(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function p_(h,x,k,M,Y){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Vo(-1,1),x.tag=2,jo(k,x,1))),k.lanes|=1),h):(h.flags|=65536,h.lanes=Y,h)}var hB=N.ReactCurrentOwner,Hl=!1;function bl(h,x,k,M){x.child=h===null?Zn(x,null,k,M):Cs(x,h.child,k,M)}function x_(h,x,k,M,Y){k=k.render;var ae=x.ref;return Qa(x,Y),M=rf(h,x,k,M,ae,Y),k=zl(),h!==null&&!Hl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Y,of(h,x,Y)):(Ct&&k&&St(x),x.flags|=1,bl(h,x,M,Y),x.child)}function g_(h,x,k,M,Y){if(h===null){var ae=k.type;return typeof ae=="function"&&!Zy(ae)&&ae.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=ae,v_(h,x,ae,M,Y)):(h=Kg(k.type,null,M,x,x.mode,Y),h.ref=x.ref,h.return=x,x.child=h)}if(ae=h.child,(h.lanes&Y)===0){var Pe=ae.memoizedProps;if(k=k.compare,k=k!==null?k:Il,k(Pe,M)&&h.ref===x.ref)return of(h,x,Y)}return x.flags|=1,h=Zf(ae,M),h.ref=x.ref,h.return=x,x.child=h}function v_(h,x,k,M,Y){if(h!==null){var ae=h.memoizedProps;if(Il(ae,M)&&h.ref===x.ref)if(Hl=!1,x.pendingProps=M=ae,(h.lanes&Y)!==0)(h.flags&131072)!==0&&(Hl=!0);else return x.lanes=h.lanes,of(h,x,Y)}return Py(h,x,k,M,Y)}function b_(h,x,k){var M=x.pendingProps,Y=M.children,ae=h!==null?h.memoizedState:null;if(M.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},aa(Jh,hc),hc|=k;else{if((k&1073741824)===0)return h=ae!==null?ae.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,aa(Jh,hc),hc|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=ae!==null?ae.baseLanes:k,aa(Jh,hc),hc|=M}else ae!==null?(M=ae.baseLanes|k,x.memoizedState=null):M=k,aa(Jh,hc),hc|=M;return bl(h,x,Y,k),x.child}function y_(h,x){var k=x.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function Py(h,x,k,M,Y){var ae=Ji(k)?Rl:_s.current;return ae=_d(x,ae),Qa(x,Y),k=rf(h,x,k,M,ae,Y),M=zl(),h!==null&&!Hl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Y,of(h,x,Y)):(Ct&&M&&St(x),x.flags|=1,bl(h,x,k,Y),x.child)}function w_(h,x,k,M,Y){if(Ji(k)){var ae=!0;Bc(x)}else ae=!1;if(Qa(x,Y),x.stateNode===null)Mg(h,x),c_(x,k,M),Ey(x,k,M,Y),M=!0;else if(h===null){var Pe=x.stateNode,Ze=x.memoizedProps;Pe.props=Ze;var ct=Pe.context,kt=k.contextType;typeof kt=="object"&&kt!==null?kt=ns(kt):(kt=Ji(k)?Rl:_s.current,kt=_d(x,kt));var Gt=k.getDerivedStateFromProps,Jt=typeof Gt=="function"||typeof Pe.getSnapshotBeforeUpdate=="function";Jt||typeof Pe.UNSAFE_componentWillReceiveProps!="function"&&typeof Pe.componentWillReceiveProps!="function"||(Ze!==M||ct!==kt)&&d_(x,Pe,M,kt),Bl=!1;var Vt=x.memoizedState;Pe.state=Vt,Ul(x,M,Pe,Y),ct=x.memoizedState,Ze!==M||Vt!==ct||gi.current||Bl?(typeof Gt=="function"&&(Ay(x,k,Gt,M),ct=x.memoizedState),(Ze=Bl||l_(x,k,Ze,M,Vt,ct,kt))?(Jt||typeof Pe.UNSAFE_componentWillMount!="function"&&typeof Pe.componentWillMount!="function"||(typeof Pe.componentWillMount=="function"&&Pe.componentWillMount(),typeof Pe.UNSAFE_componentWillMount=="function"&&Pe.UNSAFE_componentWillMount()),typeof Pe.componentDidMount=="function"&&(x.flags|=4194308)):(typeof Pe.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=M,x.memoizedState=ct),Pe.props=M,Pe.state=ct,Pe.context=kt,M=Ze):(typeof Pe.componentDidMount=="function"&&(x.flags|=4194308),M=!1)}else{Pe=x.stateNode,mu(h,x),Ze=x.memoizedProps,kt=x.type===x.elementType?Ze:Od(x.type,Ze),Pe.props=kt,Jt=x.pendingProps,Vt=Pe.context,ct=k.contextType,typeof ct=="object"&&ct!==null?ct=ns(ct):(ct=Ji(k)?Rl:_s.current,ct=_d(x,ct));var _r=k.getDerivedStateFromProps;(Gt=typeof _r=="function"||typeof Pe.getSnapshotBeforeUpdate=="function")||typeof Pe.UNSAFE_componentWillReceiveProps!="function"&&typeof Pe.componentWillReceiveProps!="function"||(Ze!==Jt||Vt!==ct)&&d_(x,Pe,M,ct),Bl=!1,Vt=x.memoizedState,Pe.state=Vt,Ul(x,M,Pe,Y);var Ir=x.memoizedState;Ze!==Jt||Vt!==Ir||gi.current||Bl?(typeof _r=="function"&&(Ay(x,k,_r,M),Ir=x.memoizedState),(kt=Bl||l_(x,k,kt,M,Vt,Ir,ct)||!1)?(Gt||typeof Pe.UNSAFE_componentWillUpdate!="function"&&typeof Pe.componentWillUpdate!="function"||(typeof Pe.componentWillUpdate=="function"&&Pe.componentWillUpdate(M,Ir,ct),typeof Pe.UNSAFE_componentWillUpdate=="function"&&Pe.UNSAFE_componentWillUpdate(M,Ir,ct)),typeof Pe.componentDidUpdate=="function"&&(x.flags|=4),typeof Pe.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof Pe.componentDidUpdate!="function"||Ze===h.memoizedProps&&Vt===h.memoizedState||(x.flags|=4),typeof Pe.getSnapshotBeforeUpdate!="function"||Ze===h.memoizedProps&&Vt===h.memoizedState||(x.flags|=1024),x.memoizedProps=M,x.memoizedState=Ir),Pe.props=M,Pe.state=Ir,Pe.context=ct,M=kt):(typeof Pe.componentDidUpdate!="function"||Ze===h.memoizedProps&&Vt===h.memoizedState||(x.flags|=4),typeof Pe.getSnapshotBeforeUpdate!="function"||Ze===h.memoizedProps&&Vt===h.memoizedState||(x.flags|=1024),M=!1)}return Iy(h,x,k,M,ae,Y)}function Iy(h,x,k,M,Y,ae){y_(h,x);var Pe=(x.flags&128)!==0;if(!M&&!Pe)return Y&&Kh(x,k,!1),of(h,x,ae);M=x.stateNode,hB.current=x;var Ze=Pe&&typeof k.getDerivedStateFromError!="function"?null:M.render();return x.flags|=1,h!==null&&Pe?(x.child=Cs(x,h.child,null,ae),x.child=Cs(x,null,Ze,ae)):bl(h,x,Ze,ae),x.memoizedState=M.state,Y&&Kh(x,k,!0),x.child}function N_(h){var x=h.stateNode;x.pendingContext?zf(h,x.pendingContext,x.pendingContext!==x.context):x.context&&zf(h,x.context,!1),gu(h,x.containerInfo)}function j_(h,x,k,M,Y){return cn(),Jn(Y),x.flags|=256,bl(h,x,k,M),x.child}var Dy={dehydrated:null,treeContext:null,retryLane:0};function Ly(h){return{baseLanes:h,cachePool:null,transitions:null}}function k_(h,x,k){var M=x.pendingProps,Y=ga.current,ae=!1,Pe=(x.flags&128)!==0,Ze;if((Ze=Pe)||(Ze=h!==null&&h.memoizedState===null?!1:(Y&2)!==0),Ze?(ae=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(Y|=1),aa(ga,Y&1),h===null)return fr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(Pe=M.children,h=M.fallback,ae?(M=x.mode,ae=x.child,Pe={mode:"hidden",children:Pe},(M&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=Pe):ae=Xg(Pe,M,0,null),h=K0(h,M,k,null),ae.return=x,h.return=x,ae.sibling=h,x.child=ae,x.child.memoizedState=Ly(k),x.memoizedState=Dy,h):Fy(x,Pe));if(Y=h.memoizedState,Y!==null&&(Ze=Y.dehydrated,Ze!==null))return mB(h,x,Pe,M,Ze,Y,k);if(ae){ae=M.fallback,Pe=x.mode,Y=h.child,Ze=Y.sibling;var ct={mode:"hidden",children:M.children};return(Pe&1)===0&&x.child!==Y?(M=x.child,M.childLanes=0,M.pendingProps=ct,x.deletions=null):(M=Zf(Y,ct),M.subtreeFlags=Y.subtreeFlags&14680064),Ze!==null?ae=Zf(Ze,ae):(ae=K0(ae,Pe,k,null),ae.flags|=2),ae.return=x,M.return=x,M.sibling=ae,x.child=M,M=ae,ae=x.child,Pe=h.child.memoizedState,Pe=Pe===null?Ly(k):{baseLanes:Pe.baseLanes|k,cachePool:null,transitions:Pe.transitions},ae.memoizedState=Pe,ae.childLanes=h.childLanes&~k,x.memoizedState=Dy,M}return ae=h.child,h=ae.sibling,M=Zf(ae,{mode:"visible",children:M.children}),(x.mode&1)===0&&(M.lanes=k),M.return=x,M.sibling=null,h!==null&&(k=x.deletions,k===null?(x.deletions=[h],x.flags|=16):k.push(h)),x.child=M,x.memoizedState=null,M}function Fy(h,x){return x=Xg({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function Fg(h,x,k,M){return M!==null&&Jn(M),Cs(x,h.child,null,k),h=Fy(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function mB(h,x,k,M,Y,ae,Pe){if(k)return x.flags&256?(x.flags&=-257,M=Ty(Error(r(422))),Fg(h,x,Pe,M)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(ae=M.fallback,Y=x.mode,M=Xg({mode:"visible",children:M.children},Y,0,null),ae=K0(ae,Y,Pe,null),ae.flags|=2,M.return=x,ae.return=x,M.sibling=ae,x.child=M,(x.mode&1)!==0&&Cs(x,h.child,null,Pe),x.child.memoizedState=Ly(Pe),x.memoizedState=Dy,ae);if((x.mode&1)===0)return Fg(h,x,Pe,null);if(Y.data==="$!"){if(M=Y.nextSibling&&Y.nextSibling.dataset,M)var Ze=M.dgst;return M=Ze,ae=Error(r(419)),M=Ty(ae,M,void 0),Fg(h,x,Pe,M)}if(Ze=(Pe&h.childLanes)!==0,Hl||Ze){if(M=ro,M!==null){switch(Pe&-Pe){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=(Y&(M.suspendedLanes|Pe))!==0?0:Y,Y!==0&&Y!==ae.retryLane&&(ae.retryLane=Y,Kn(h,Y),Dd(M,h,Y,-1))}return Jy(),M=Ty(Error(r(421))),Fg(h,x,Pe,M)}return Y.data==="$?"?(x.flags|=128,x.child=h.child,x=CB.bind(null,h),Y._reactRetry=x,null):(h=ae.treeContext,Et=os(Y.nextSibling),ot=x,Ct=!0,Ft=null,h!==null&&(Re[ze++]=gt,Re[ze++]=vt,Re[ze++]=st,gt=h.id,vt=h.overflow,st=x),x=Fy(x,M.children),x.flags|=4096,x)}function S_(h,x,k){h.lanes|=x;var M=h.alternate;M!==null&&(M.lanes|=x),Wo(h.return,x,k)}function My(h,x,k,M,Y){var ae=h.memoizedState;ae===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:M,tail:k,tailMode:Y}:(ae.isBackwards=x,ae.rendering=null,ae.renderingStartTime=0,ae.last=M,ae.tail=k,ae.tailMode=Y)}function __(h,x,k){var M=x.pendingProps,Y=M.revealOrder,ae=M.tail;if(bl(h,x,M.children,k),M=ga.current,(M&2)!==0)M=M&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&S_(h,k,x);else if(h.tag===19)S_(h,k,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}if(aa(ga,M),(x.mode&1)===0)x.memoizedState=null;else switch(Y){case"forwards":for(k=x.child,Y=null;k!==null;)h=k.alternate,h!==null&&ri(h)===null&&(Y=k),k=k.sibling;k=Y,k===null?(Y=x.child,x.child=null):(Y=k.sibling,k.sibling=null),My(x,!1,Y,k,ae);break;case"backwards":for(k=null,Y=x.child,x.child=null;Y!==null;){if(h=Y.alternate,h!==null&&ri(h)===null){x.child=Y;break}h=Y.sibling,Y.sibling=k,k=Y,Y=h}My(x,!0,k,null,ae);break;case"together":My(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Mg(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function of(h,x,k){if(h!==null&&(x.dependencies=h.dependencies),H0|=x.lanes,(k&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(r(153));if(x.child!==null){for(h=x.child,k=Zf(h,h.pendingProps),x.child=k,k.return=x;h.sibling!==null;)h=h.sibling,k=k.sibling=Zf(h,h.pendingProps),k.return=x;k.sibling=null}return x.child}function pB(h,x,k){switch(x.tag){case 3:N_(x),cn();break;case 5:Xh(x);break;case 1:Ji(x.type)&&Bc(x);break;case 4:gu(x,x.stateNode.containerInfo);break;case 10:var M=x.type._context,Y=x.memoizedProps.value;aa(Is,M._currentValue),M._currentValue=Y;break;case 13:if(M=x.memoizedState,M!==null)return M.dehydrated!==null?(aa(ga,ga.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?k_(h,x,k):(aa(ga,ga.current&1),h=of(h,x,k),h!==null?h.sibling:null);aa(ga,ga.current&1);break;case 19:if(M=(k&x.childLanes)!==0,(h.flags&128)!==0){if(M)return __(h,x,k);x.flags|=128}if(Y=x.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),aa(ga,ga.current),M)break;return null;case 22:case 23:return x.lanes=0,b_(h,x,k)}return of(h,x,k)}var C_,Ry,A_,E_;C_=function(h,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Ry=function(){},A_=function(h,x,k,M){var Y=h.memoizedProps;if(Y!==M){h=x.stateNode,lc(So.current);var ae=null;switch(k){case"input":Y=Oe(h,Y),M=Oe(h,M),ae=[];break;case"select":Y=ee({},Y,{value:void 0}),M=ee({},M,{value:void 0}),ae=[];break;case"textarea":Y=Ce(h,Y),M=Ce(h,M),ae=[];break;default:typeof Y.onClick!="function"&&typeof M.onClick=="function"&&(h.onclick=sc)}mr(k,M);var Pe;k=null;for(kt in Y)if(!M.hasOwnProperty(kt)&&Y.hasOwnProperty(kt)&&Y[kt]!=null)if(kt==="style"){var Ze=Y[kt];for(Pe in Ze)Ze.hasOwnProperty(Pe)&&(k||(k={}),k[Pe]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(s.hasOwnProperty(kt)?ae||(ae=[]):(ae=ae||[]).push(kt,null));for(kt in M){var ct=M[kt];if(Ze=Y?.[kt],M.hasOwnProperty(kt)&&ct!==Ze&&(ct!=null||Ze!=null))if(kt==="style")if(Ze){for(Pe in Ze)!Ze.hasOwnProperty(Pe)||ct&&ct.hasOwnProperty(Pe)||(k||(k={}),k[Pe]="");for(Pe in ct)ct.hasOwnProperty(Pe)&&Ze[Pe]!==ct[Pe]&&(k||(k={}),k[Pe]=ct[Pe])}else k||(ae||(ae=[]),ae.push(kt,k)),k=ct;else kt==="dangerouslySetInnerHTML"?(ct=ct?ct.__html:void 0,Ze=Ze?Ze.__html:void 0,ct!=null&&Ze!==ct&&(ae=ae||[]).push(kt,ct)):kt==="children"?typeof ct!="string"&&typeof ct!="number"||(ae=ae||[]).push(kt,""+ct):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(s.hasOwnProperty(kt)?(ct!=null&&kt==="onScroll"&&fa("scroll",h),ae||Ze===ct||(ae=[])):(ae=ae||[]).push(kt,ct))}k&&(ae=ae||[]).push("style",k);var kt=ae;(x.updateQueue=kt)&&(x.flags|=4)}},E_=function(h,x,k,M){k!==M&&(x.flags|=4)};function bp(h,x){if(!Ct)switch(h.tailMode){case"hidden":x=h.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var M=null;k!==null;)k.alternate!==null&&(M=k),k=k.sibling;M===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function Ko(h){var x=h.alternate!==null&&h.alternate.child===h.child,k=0,M=0;if(x)for(var Y=h.child;Y!==null;)k|=Y.lanes|Y.childLanes,M|=Y.subtreeFlags&14680064,M|=Y.flags&14680064,Y.return=h,Y=Y.sibling;else for(Y=h.child;Y!==null;)k|=Y.lanes|Y.childLanes,M|=Y.subtreeFlags,M|=Y.flags,Y.return=h,Y=Y.sibling;return h.subtreeFlags|=M,h.childLanes=k,x}function xB(h,x,k){var M=x.pendingProps;switch(dt(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(x),null;case 1:return Ji(x.type)&&ef(),Ko(x),null;case 3:return M=x.stateNode,ql(),Qn(gi),Qn(_s),U0(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(h===null||h.child===null)&&(In(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Ft!==null&&(Xy(Ft),Ft=null))),Ry(h,x),Ko(x),null;case 5:tf(x);var Y=lc(qc.current);if(k=x.type,h!==null&&x.stateNode!=null)A_(h,x,k,M,Y),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!M){if(x.stateNode===null)throw Error(r(166));return Ko(x),null}if(h=lc(So.current),In(x)){M=x.stateNode,k=x.type;var ae=x.memoizedProps;switch(M[No]=x,M[hu]=ae,h=(x.mode&1)!==0,k){case"dialog":fa("cancel",M),fa("close",M);break;case"iframe":case"object":case"embed":fa("load",M);break;case"video":case"audio":for(Y=0;Y<ac.length;Y++)fa(ac[Y],M);break;case"source":fa("error",M);break;case"img":case"image":case"link":fa("error",M),fa("load",M);break;case"details":fa("toggle",M);break;case"input":le(M,ae),fa("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!ae.multiple},fa("invalid",M);break;case"textarea":Ve(M,ae),fa("invalid",M)}mr(k,ae),Y=null;for(var Pe in ae)if(ae.hasOwnProperty(Pe)){var Ze=ae[Pe];Pe==="children"?typeof Ze=="string"?M.textContent!==Ze&&(ae.suppressHydrationWarning!==!0&&Qu(M.textContent,Ze,h),Y=["children",Ze]):typeof Ze=="number"&&M.textContent!==""+Ze&&(ae.suppressHydrationWarning!==!0&&Qu(M.textContent,Ze,h),Y=["children",""+Ze]):s.hasOwnProperty(Pe)&&Ze!=null&&Pe==="onScroll"&&fa("scroll",M)}switch(k){case"input":Be(M),we(M,ae,!0);break;case"textarea":Be(M),fe(M);break;case"select":case"option":break;default:typeof ae.onClick=="function"&&(M.onclick=sc)}M=Y,x.updateQueue=M,M!==null&&(x.flags|=4)}else{Pe=Y.nodeType===9?Y:Y.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=_e(k)),h==="http://www.w3.org/1999/xhtml"?k==="script"?(h=Pe.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof M.is=="string"?h=Pe.createElement(k,{is:M.is}):(h=Pe.createElement(k),k==="select"&&(Pe=h,M.multiple?Pe.multiple=!0:M.size&&(Pe.size=M.size))):h=Pe.createElementNS(h,k),h[No]=x,h[hu]=M,C_(h,x,!1,!1),x.stateNode=h;e:{switch(Pe=Ge(k,M),k){case"dialog":fa("cancel",h),fa("close",h),Y=M;break;case"iframe":case"object":case"embed":fa("load",h),Y=M;break;case"video":case"audio":for(Y=0;Y<ac.length;Y++)fa(ac[Y],h);Y=M;break;case"source":fa("error",h),Y=M;break;case"img":case"image":case"link":fa("error",h),fa("load",h),Y=M;break;case"details":fa("toggle",h),Y=M;break;case"input":le(h,M),Y=Oe(h,M),fa("invalid",h);break;case"option":Y=M;break;case"select":h._wrapperState={wasMultiple:!!M.multiple},Y=ee({},M,{value:void 0}),fa("invalid",h);break;case"textarea":Ve(h,M),Y=Ce(h,M),fa("invalid",h);break;default:Y=M}mr(k,Y),Ze=Y;for(ae in Ze)if(Ze.hasOwnProperty(ae)){var ct=Ze[ae];ae==="style"?vr(h,ct):ae==="dangerouslySetInnerHTML"?(ct=ct?ct.__html:void 0,ct!=null&&Fe(h,ct)):ae==="children"?typeof ct=="string"?(k!=="textarea"||ct!=="")&&qe(h,ct):typeof ct=="number"&&qe(h,""+ct):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?ct!=null&&ae==="onScroll"&&fa("scroll",h):ct!=null&&j(h,ae,ct,Pe))}switch(k){case"input":Be(h),we(h,M,!1);break;case"textarea":Be(h),fe(h);break;case"option":M.value!=null&&h.setAttribute("value",""+xe(M.value));break;case"select":h.multiple=!!M.multiple,ae=M.value,ae!=null?de(h,!!M.multiple,ae,!1):M.defaultValue!=null&&de(h,!!M.multiple,M.defaultValue,!0);break;default:typeof Y.onClick=="function"&&(h.onclick=sc)}switch(k){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Ko(x),null;case 6:if(h&&x.stateNode!=null)E_(h,x,h.memoizedProps,M);else{if(typeof M!="string"&&x.stateNode===null)throw Error(r(166));if(k=lc(qc.current),lc(So.current),In(x)){if(M=x.stateNode,k=x.memoizedProps,M[No]=x,(ae=M.nodeValue!==k)&&(h=ot,h!==null))switch(h.tag){case 3:Qu(M.nodeValue,k,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Qu(M.nodeValue,k,(h.mode&1)!==0)}ae&&(x.flags|=4)}else M=(k.nodeType===9?k:k.ownerDocument).createTextNode(M),M[No]=x,x.stateNode=M}return Ko(x),null;case 13:if(Qn(ga),M=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Ct&&Et!==null&&(x.mode&1)!==0&&(x.flags&128)===0)En(),cn(),x.flags|=98560,ae=!1;else if(ae=In(x),M!==null&&M.dehydrated!==null){if(h===null){if(!ae)throw Error(r(318));if(ae=x.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(r(317));ae[No]=x}else cn(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Ko(x),ae=!1}else Ft!==null&&(Xy(Ft),Ft=null),ae=!0;if(!ae)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(M=M!==null,M!==(h!==null&&h.memoizedState!==null)&&M&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(ga.current&1)!==0?Li===0&&(Li=3):Jy())),x.updateQueue!==null&&(x.flags|=4),Ko(x),null);case 4:return ql(),Ry(h,x),h===null&&jd(x.stateNode.containerInfo),Ko(x),null;case 10:return Di(x.type._context),Ko(x),null;case 17:return Ji(x.type)&&ef(),Ko(x),null;case 19:if(Qn(ga),ae=x.memoizedState,ae===null)return Ko(x),null;if(M=(x.flags&128)!==0,Pe=ae.rendering,Pe===null)if(M)bp(ae,!1);else{if(Li!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(Pe=ri(h),Pe!==null){for(x.flags|=128,bp(ae,!1),M=Pe.updateQueue,M!==null&&(x.updateQueue=M,x.flags|=4),x.subtreeFlags=0,M=k,k=x.child;k!==null;)ae=k,h=M,ae.flags&=14680066,Pe=ae.alternate,Pe===null?(ae.childLanes=0,ae.lanes=h,ae.child=null,ae.subtreeFlags=0,ae.memoizedProps=null,ae.memoizedState=null,ae.updateQueue=null,ae.dependencies=null,ae.stateNode=null):(ae.childLanes=Pe.childLanes,ae.lanes=Pe.lanes,ae.child=Pe.child,ae.subtreeFlags=0,ae.deletions=null,ae.memoizedProps=Pe.memoizedProps,ae.memoizedState=Pe.memoizedState,ae.updateQueue=Pe.updateQueue,ae.type=Pe.type,h=Pe.dependencies,ae.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),k=k.sibling;return aa(ga,ga.current&1|2),x.child}h=h.sibling}ae.tail!==null&&Dt()>Zh&&(x.flags|=128,M=!0,bp(ae,!1),x.lanes=4194304)}else{if(!M)if(h=ri(Pe),h!==null){if(x.flags|=128,M=!0,k=h.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),bp(ae,!0),ae.tail===null&&ae.tailMode==="hidden"&&!Pe.alternate&&!Ct)return Ko(x),null}else 2*Dt()-ae.renderingStartTime>Zh&&k!==1073741824&&(x.flags|=128,M=!0,bp(ae,!1),x.lanes=4194304);ae.isBackwards?(Pe.sibling=x.child,x.child=Pe):(k=ae.last,k!==null?k.sibling=Pe:x.child=Pe,ae.last=Pe)}return ae.tail!==null?(x=ae.tail,ae.rendering=x,ae.tail=x.sibling,ae.renderingStartTime=Dt(),x.sibling=null,k=ga.current,aa(ga,M?k&1|2:k&1),x):(Ko(x),null);case 22:case 23:return Qy(),M=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==M&&(x.flags|=8192),M&&(x.mode&1)!==0?(hc&1073741824)!==0&&(Ko(x),x.subtreeFlags&6&&(x.flags|=8192)):Ko(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function gB(h,x){switch(dt(x),x.tag){case 1:return Ji(x.type)&&ef(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return ql(),Qn(gi),Qn(_s),U0(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return tf(x),null;case 13:if(Qn(ga),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(r(340));cn()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return Qn(ga),null;case 4:return ql(),null;case 10:return Di(x.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var Rg=!1,Xo=!1,vB=typeof WeakSet=="function"?WeakSet:Set,Er=null;function Qh(h,x){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(M){Hs(h,x,M)}else k.current=null}function By(h,x,k){try{k()}catch(M){Hs(h,x,M)}}var T_=!1;function bB(h,x){if(uu=rc,h=wd(),Ll(h)){if("selectionStart"in h)var k={start:h.selectionStart,end:h.selectionEnd};else e:{k=(k=h.ownerDocument)&&k.defaultView||window;var M=k.getSelection&&k.getSelection();if(M&&M.rangeCount!==0){k=M.anchorNode;var Y=M.anchorOffset,ae=M.focusNode;M=M.focusOffset;try{k.nodeType,ae.nodeType}catch{k=null;break e}var Pe=0,Ze=-1,ct=-1,kt=0,Gt=0,Jt=h,Vt=null;t:for(;;){for(var _r;Jt!==k||Y!==0&&Jt.nodeType!==3||(Ze=Pe+Y),Jt!==ae||M!==0&&Jt.nodeType!==3||(ct=Pe+M),Jt.nodeType===3&&(Pe+=Jt.nodeValue.length),(_r=Jt.firstChild)!==null;)Vt=Jt,Jt=_r;for(;;){if(Jt===h)break t;if(Vt===k&&++kt===Y&&(Ze=Pe),Vt===ae&&++Gt===M&&(ct=Pe),(_r=Jt.nextSibling)!==null)break;Jt=Vt,Vt=Jt.parentNode}Jt=_r}k=Ze===-1||ct===-1?null:{start:Ze,end:ct}}else k=null}k=k||{start:0,end:0}}else k=null;for(fu={focusedElem:h,selectionRange:k},rc=!1,Er=x;Er!==null;)if(x=Er,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,Er=h;else for(;Er!==null;){x=Er;try{var Ir=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Ir!==null){var Ur=Ir.memoizedProps,ai=Ir.memoizedState,yt=x.stateNode,ht=yt.getSnapshotBeforeUpdate(x.elementType===x.type?Ur:Od(x.type,Ur),ai);yt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var Nt=x.stateNode.containerInfo;Nt.nodeType===1?Nt.textContent="":Nt.nodeType===9&&Nt.documentElement&&Nt.removeChild(Nt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ar){Hs(x,x.return,ar)}if(h=x.sibling,h!==null){h.return=x.return,Er=h;break}Er=x.return}return Ir=T_,T_=!1,Ir}function yp(h,x,k){var M=x.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var Y=M=M.next;do{if((Y.tag&h)===h){var ae=Y.destroy;Y.destroy=void 0,ae!==void 0&&By(x,k,ae)}Y=Y.next}while(Y!==M)}}function Bg(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&h)===h){var M=k.create;k.destroy=M()}k=k.next}while(k!==x)}}function Uy(h){var x=h.ref;if(x!==null){var k=h.stateNode;h.tag,h=k,typeof x=="function"?x(h):x.current=h}}function O_(h){var x=h.alternate;x!==null&&(h.alternate=null,O_(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[No],delete x[hu],delete x[Qi],delete x[vp],delete x[qf])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function P_(h){return h.tag===5||h.tag===3||h.tag===4}function I_(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||P_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function qy(h,x,k){var M=h.tag;if(M===5||M===6)h=h.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(h,x):k.insertBefore(h,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(h,k)):(x=k,x.appendChild(h)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=sc));else if(M!==4&&(h=h.child,h!==null))for(qy(h,x,k),h=h.sibling;h!==null;)qy(h,x,k),h=h.sibling}function $y(h,x,k){var M=h.tag;if(M===5||M===6)h=h.stateNode,x?k.insertBefore(h,x):k.appendChild(h);else if(M!==4&&(h=h.child,h!==null))for($y(h,x,k),h=h.sibling;h!==null;)$y(h,x,k),h=h.sibling}var _o=null,Pd=!1;function Kf(h,x,k){for(k=k.child;k!==null;)D_(h,x,k),k=k.sibling}function D_(h,x,k){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(ts,k)}catch{}switch(k.tag){case 5:Xo||Qh(k,x);case 6:var M=_o,Y=Pd;_o=null,Kf(h,x,k),_o=M,Pd=Y,_o!==null&&(Pd?(h=_o,k=k.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)):_o.removeChild(k.stateNode));break;case 18:_o!==null&&(Pd?(h=_o,k=k.stateNode,h.nodeType===8?Ju(h.parentNode,k):h.nodeType===1&&Ju(h,k),Hi(h)):Ju(_o,k.stateNode));break;case 4:M=_o,Y=Pd,_o=k.stateNode.containerInfo,Pd=!0,Kf(h,x,k),_o=M,Pd=Y;break;case 0:case 11:case 14:case 15:if(!Xo&&(M=k.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){Y=M=M.next;do{var ae=Y,Pe=ae.destroy;ae=ae.tag,Pe!==void 0&&((ae&2)!==0||(ae&4)!==0)&&By(k,x,Pe),Y=Y.next}while(Y!==M)}Kf(h,x,k);break;case 1:if(!Xo&&(Qh(k,x),M=k.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=k.memoizedProps,M.state=k.memoizedState,M.componentWillUnmount()}catch(Ze){Hs(k,x,Ze)}Kf(h,x,k);break;case 21:Kf(h,x,k);break;case 22:k.mode&1?(Xo=(M=Xo)||k.memoizedState!==null,Kf(h,x,k),Xo=M):Kf(h,x,k);break;default:Kf(h,x,k)}}function L_(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new vB),x.forEach(function(M){var Y=AB.bind(null,h,M);k.has(M)||(k.add(M),M.then(Y,Y))})}}function Id(h,x){var k=x.deletions;if(k!==null)for(var M=0;M<k.length;M++){var Y=k[M];try{var ae=h,Pe=x,Ze=Pe;e:for(;Ze!==null;){switch(Ze.tag){case 5:_o=Ze.stateNode,Pd=!1;break e;case 3:_o=Ze.stateNode.containerInfo,Pd=!0;break e;case 4:_o=Ze.stateNode.containerInfo,Pd=!0;break e}Ze=Ze.return}if(_o===null)throw Error(r(160));D_(ae,Pe,Y),_o=null,Pd=!1;var ct=Y.alternate;ct!==null&&(ct.return=null),Y.return=null}catch(kt){Hs(Y,x,kt)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)F_(x,h),x=x.sibling}function F_(h,x){var k=h.alternate,M=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Id(x,h),bu(h),M&4){try{yp(3,h,h.return),Bg(3,h)}catch(Ur){Hs(h,h.return,Ur)}try{yp(5,h,h.return)}catch(Ur){Hs(h,h.return,Ur)}}break;case 1:Id(x,h),bu(h),M&512&&k!==null&&Qh(k,k.return);break;case 5:if(Id(x,h),bu(h),M&512&&k!==null&&Qh(k,k.return),h.flags&32){var Y=h.stateNode;try{qe(Y,"")}catch(Ur){Hs(h,h.return,Ur)}}if(M&4&&(Y=h.stateNode,Y!=null)){var ae=h.memoizedProps,Pe=k!==null?k.memoizedProps:ae,Ze=h.type,ct=h.updateQueue;if(h.updateQueue=null,ct!==null)try{Ze==="input"&&ae.type==="radio"&&ae.name!=null&&te(Y,ae),Ge(Ze,Pe);var kt=Ge(Ze,ae);for(Pe=0;Pe<ct.length;Pe+=2){var Gt=ct[Pe],Jt=ct[Pe+1];Gt==="style"?vr(Y,Jt):Gt==="dangerouslySetInnerHTML"?Fe(Y,Jt):Gt==="children"?qe(Y,Jt):j(Y,Gt,Jt,kt)}switch(Ze){case"input":Te(Y,ae);break;case"textarea":ge(Y,ae);break;case"select":var Vt=Y._wrapperState.wasMultiple;Y._wrapperState.wasMultiple=!!ae.multiple;var _r=ae.value;_r!=null?de(Y,!!ae.multiple,_r,!1):Vt!==!!ae.multiple&&(ae.defaultValue!=null?de(Y,!!ae.multiple,ae.defaultValue,!0):de(Y,!!ae.multiple,ae.multiple?[]:"",!1))}Y[hu]=ae}catch(Ur){Hs(h,h.return,Ur)}}break;case 6:if(Id(x,h),bu(h),M&4){if(h.stateNode===null)throw Error(r(162));Y=h.stateNode,ae=h.memoizedProps;try{Y.nodeValue=ae}catch(Ur){Hs(h,h.return,Ur)}}break;case 3:if(Id(x,h),bu(h),M&4&&k!==null&&k.memoizedState.isDehydrated)try{Hi(x.containerInfo)}catch(Ur){Hs(h,h.return,Ur)}break;case 4:Id(x,h),bu(h);break;case 13:Id(x,h),bu(h),Y=h.child,Y.flags&8192&&(ae=Y.memoizedState!==null,Y.stateNode.isHidden=ae,!ae||Y.alternate!==null&&Y.alternate.memoizedState!==null||(Wy=Dt())),M&4&&L_(h);break;case 22:if(Gt=k!==null&&k.memoizedState!==null,h.mode&1?(Xo=(kt=Xo)||Gt,Id(x,h),Xo=kt):Id(x,h),bu(h),M&8192){if(kt=h.memoizedState!==null,(h.stateNode.isHidden=kt)&&!Gt&&(h.mode&1)!==0)for(Er=h,Gt=h.child;Gt!==null;){for(Jt=Er=Gt;Er!==null;){switch(Vt=Er,_r=Vt.child,Vt.tag){case 0:case 11:case 14:case 15:yp(4,Vt,Vt.return);break;case 1:Qh(Vt,Vt.return);var Ir=Vt.stateNode;if(typeof Ir.componentWillUnmount=="function"){M=Vt,k=Vt.return;try{x=M,Ir.props=x.memoizedProps,Ir.state=x.memoizedState,Ir.componentWillUnmount()}catch(Ur){Hs(M,k,Ur)}}break;case 5:Qh(Vt,Vt.return);break;case 22:if(Vt.memoizedState!==null){B_(Jt);continue}}_r!==null?(_r.return=Vt,Er=_r):B_(Jt)}Gt=Gt.sibling}e:for(Gt=null,Jt=h;;){if(Jt.tag===5){if(Gt===null){Gt=Jt;try{Y=Jt.stateNode,kt?(ae=Y.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none"):(Ze=Jt.stateNode,ct=Jt.memoizedProps.style,Pe=ct!=null&&ct.hasOwnProperty("display")?ct.display:null,Ze.style.display=qt("display",Pe))}catch(Ur){Hs(h,h.return,Ur)}}}else if(Jt.tag===6){if(Gt===null)try{Jt.stateNode.nodeValue=kt?"":Jt.memoizedProps}catch(Ur){Hs(h,h.return,Ur)}}else if((Jt.tag!==22&&Jt.tag!==23||Jt.memoizedState===null||Jt===h)&&Jt.child!==null){Jt.child.return=Jt,Jt=Jt.child;continue}if(Jt===h)break e;for(;Jt.sibling===null;){if(Jt.return===null||Jt.return===h)break e;Gt===Jt&&(Gt=null),Jt=Jt.return}Gt===Jt&&(Gt=null),Jt.sibling.return=Jt.return,Jt=Jt.sibling}}break;case 19:Id(x,h),bu(h),M&4&&L_(h);break;case 21:break;default:Id(x,h),bu(h)}}function bu(h){var x=h.flags;if(x&2){try{e:{for(var k=h.return;k!==null;){if(P_(k)){var M=k;break e}k=k.return}throw Error(r(160))}switch(M.tag){case 5:var Y=M.stateNode;M.flags&32&&(qe(Y,""),M.flags&=-33);var ae=I_(h);$y(h,ae,Y);break;case 3:case 4:var Pe=M.stateNode.containerInfo,Ze=I_(h);qy(h,Ze,Pe);break;default:throw Error(r(161))}}catch(ct){Hs(h,h.return,ct)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function yB(h,x,k){Er=h,M_(h)}function M_(h,x,k){for(var M=(h.mode&1)!==0;Er!==null;){var Y=Er,ae=Y.child;if(Y.tag===22&&M){var Pe=Y.memoizedState!==null||Rg;if(!Pe){var Ze=Y.alternate,ct=Ze!==null&&Ze.memoizedState!==null||Xo;Ze=Rg;var kt=Xo;if(Rg=Pe,(Xo=ct)&&!kt)for(Er=Y;Er!==null;)Pe=Er,ct=Pe.child,Pe.tag===22&&Pe.memoizedState!==null?U_(Y):ct!==null?(ct.return=Pe,Er=ct):U_(Y);for(;ae!==null;)Er=ae,M_(ae),ae=ae.sibling;Er=Y,Rg=Ze,Xo=kt}R_(h)}else(Y.subtreeFlags&8772)!==0&&ae!==null?(ae.return=Y,Er=ae):R_(h)}}function R_(h){for(;Er!==null;){var x=Er;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Xo||Bg(5,x);break;case 1:var M=x.stateNode;if(x.flags&4&&!Xo)if(k===null)M.componentDidMount();else{var Y=x.elementType===x.type?k.memoizedProps:Od(x.type,k.memoizedProps);M.componentDidUpdate(Y,k.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var ae=x.updateQueue;ae!==null&&Ad(x,ae,M);break;case 3:var Pe=x.updateQueue;if(Pe!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}Ad(x,Pe,k)}break;case 5:var Ze=x.stateNode;if(k===null&&x.flags&4){k=Ze;var ct=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":ct.autoFocus&&k.focus();break;case"img":ct.src&&(k.src=ct.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var kt=x.alternate;if(kt!==null){var Gt=kt.memoizedState;if(Gt!==null){var Jt=Gt.dehydrated;Jt!==null&&Hi(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Xo||x.flags&512&&Uy(x)}catch(Vt){Hs(x,x.return,Vt)}}if(x===h){Er=null;break}if(k=x.sibling,k!==null){k.return=x.return,Er=k;break}Er=x.return}}function B_(h){for(;Er!==null;){var x=Er;if(x===h){Er=null;break}var k=x.sibling;if(k!==null){k.return=x.return,Er=k;break}Er=x.return}}function U_(h){for(;Er!==null;){var x=Er;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{Bg(4,x)}catch(ct){Hs(x,k,ct)}break;case 1:var M=x.stateNode;if(typeof M.componentDidMount=="function"){var Y=x.return;try{M.componentDidMount()}catch(ct){Hs(x,Y,ct)}}var ae=x.return;try{Uy(x)}catch(ct){Hs(x,ae,ct)}break;case 5:var Pe=x.return;try{Uy(x)}catch(ct){Hs(x,Pe,ct)}}}catch(ct){Hs(x,x.return,ct)}if(x===h){Er=null;break}var Ze=x.sibling;if(Ze!==null){Ze.return=x.return,Er=Ze;break}Er=x.return}}var wB=Math.ceil,Ug=N.ReactCurrentDispatcher,zy=N.ReactCurrentOwner,zc=N.ReactCurrentBatchConfig,oa=0,ro=null,bi=null,Co=0,hc=0,Jh=vl(0),Li=0,wp=null,H0=0,qg=0,Hy=0,Np=null,Wl=null,Wy=0,Zh=1/0,lf=null,$g=!1,Vy=null,Xf=null,zg=!1,Yf=null,Hg=0,jp=0,Gy=null,Wg=-1,Vg=0;function yl(){return(oa&6)!==0?Dt():Wg!==-1?Wg:Wg=Dt()}function Qf(h){return(h.mode&1)===0?1:(oa&2)!==0&&Co!==0?Co&-Co:Fn.transition!==null?(Vg===0&&(Vg=ra()),Vg):(h=kr,h!==0||(h=window.event,h=h===void 0?16:qn(h.type)),h)}function Dd(h,x,k,M){if(50<jp)throw jp=0,Gy=null,Error(r(185));Yt(h,k,M),((oa&2)===0||h!==ro)&&(h===ro&&((oa&2)===0&&(qg|=k),Li===4&&Jf(h,Co)),Vl(h,M),k===1&&oa===0&&(x.mode&1)===0&&(Zh=Dt()+500,Ra&&ce()))}function Vl(h,x){var k=h.callbackNode;dr(h,x);var M=nr(h,h===ro?Co:0);if(M===0)k!==null&&it(k),h.callbackNode=null,h.callbackPriority=0;else if(x=M&-M,h.callbackPriority!==x){if(k!=null&&it(k),x===1)h.tag===0?Z($_.bind(null,h)):R($_.bind(null,h)),Sd(function(){(oa&6)===0&&ce()}),k=null;else{switch(zt(M)){case 1:k=Rr;break;case 4:k=Yr;break;case 16:k=Nn;break;case 536870912:k=Sn;break;default:k=Nn}k=Y_(k,q_.bind(null,h))}h.callbackPriority=x,h.callbackNode=k}}function q_(h,x){if(Wg=-1,Vg=0,(oa&6)!==0)throw Error(r(327));var k=h.callbackNode;if(em()&&h.callbackNode!==k)return null;var M=nr(h,h===ro?Co:0);if(M===0)return null;if((M&30)!==0||(M&h.expiredLanes)!==0||x)x=Gg(h,M);else{x=M;var Y=oa;oa|=2;var ae=H_();(ro!==h||Co!==x)&&(lf=null,Zh=Dt()+500,V0(h,x));do try{kB();break}catch(Ze){z_(h,Ze)}while(!0);zs(),Ug.current=ae,oa=Y,bi!==null?x=0:(ro=null,Co=0,x=Li)}if(x!==0){if(x===2&&(Y=Pr(h),Y!==0&&(M=Y,x=Ky(h,Y))),x===1)throw k=wp,V0(h,0),Jf(h,M),Vl(h,Dt()),k;if(x===6)Jf(h,M);else{if(Y=h.current.alternate,(M&30)===0&&!NB(Y)&&(x=Gg(h,M),x===2&&(ae=Pr(h),ae!==0&&(M=ae,x=Ky(h,ae))),x===1))throw k=wp,V0(h,0),Jf(h,M),Vl(h,Dt()),k;switch(h.finishedWork=Y,h.finishedLanes=M,x){case 0:case 1:throw Error(r(345));case 2:G0(h,Wl,lf);break;case 3:if(Jf(h,M),(M&130023424)===M&&(x=Wy+500-Dt(),10<x)){if(nr(h,0)!==0)break;if(Y=h.suspendedLanes,(Y&M)!==M){yl(),h.pingedLanes|=h.suspendedLanes&Y;break}h.timeoutHandle=R0(G0.bind(null,h,Wl,lf),x);break}G0(h,Wl,lf);break;case 4:if(Jf(h,M),(M&4194240)===M)break;for(x=h.eventTimes,Y=-1;0<M;){var Pe=31-Vn(M);ae=1<<Pe,Pe=x[Pe],Pe>Y&&(Y=Pe),M&=~ae}if(M=Y,M=Dt()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*wB(M/1960))-M,10<M){h.timeoutHandle=R0(G0.bind(null,h,Wl,lf),M);break}G0(h,Wl,lf);break;case 5:G0(h,Wl,lf);break;default:throw Error(r(329))}}}return Vl(h,Dt()),h.callbackNode===k?q_.bind(null,h):null}function Ky(h,x){var k=Np;return h.current.memoizedState.isDehydrated&&(V0(h,x).flags|=256),h=Gg(h,x),h!==2&&(x=Wl,Wl=k,x!==null&&Xy(x)),h}function Xy(h){Wl===null?Wl=h:Wl.push.apply(Wl,h)}function NB(h){for(var x=h;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var M=0;M<k.length;M++){var Y=k[M],ae=Y.getSnapshot;Y=Y.value;try{if(!Gn(ae(),Y))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Jf(h,x){for(x&=~Hy,x&=~qg,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var k=31-Vn(x),M=1<<k;h[k]=-1,x&=~M}}function $_(h){if((oa&6)!==0)throw Error(r(327));em();var x=nr(h,0);if((x&1)===0)return Vl(h,Dt()),null;var k=Gg(h,x);if(h.tag!==0&&k===2){var M=Pr(h);M!==0&&(x=M,k=Ky(h,M))}if(k===1)throw k=wp,V0(h,0),Jf(h,x),Vl(h,Dt()),k;if(k===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,G0(h,Wl,lf),Vl(h,Dt()),null}function Yy(h,x){var k=oa;oa|=1;try{return h(x)}finally{oa=k,oa===0&&(Zh=Dt()+500,Ra&&ce())}}function W0(h){Yf!==null&&Yf.tag===0&&(oa&6)===0&&em();var x=oa;oa|=1;var k=zc.transition,M=kr;try{if(zc.transition=null,kr=1,h)return h()}finally{kr=M,zc.transition=k,oa=x,(oa&6)===0&&ce()}}function Qy(){hc=Jh.current,Qn(Jh)}function V0(h,x){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==-1&&(h.timeoutHandle=-1,Lc(k)),bi!==null)for(k=bi.return;k!==null;){var M=k;switch(dt(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&ef();break;case 3:ql(),Qn(gi),Qn(_s),U0();break;case 5:tf(M);break;case 4:ql();break;case 13:Qn(ga);break;case 19:Qn(ga);break;case 10:Di(M.type._context);break;case 22:case 23:Qy()}k=k.return}if(ro=h,bi=h=Zf(h.current,null),Co=hc=x,Li=0,wp=null,Hy=qg=H0=0,Wl=Np=null,Ds!==null){for(x=0;x<Ds.length;x++)if(k=Ds[x],M=k.interleaved,M!==null){k.interleaved=null;var Y=M.next,ae=k.pending;if(ae!==null){var Pe=ae.next;ae.next=Y,M.next=Pe}k.pending=M}Ds=null}return h}function z_(h,x){do{var k=bi;try{if(zs(),Ed.current=Dg,vu){for(var M=Ua.memoizedState;M!==null;){var Y=M.queue;Y!==null&&(Y.pending=null),M=M.next}vu=!1}if($l=0,cs=As=Ua=null,dc=!1,$c=0,zy.current=null,k===null||k.return===null){Li=1,wp=x,bi=null;break}e:{var ae=h,Pe=k.return,Ze=k,ct=x;if(x=Co,Ze.flags|=32768,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var kt=ct,Gt=Ze,Jt=Gt.tag;if((Gt.mode&1)===0&&(Jt===0||Jt===11||Jt===15)){var Vt=Gt.alternate;Vt?(Gt.updateQueue=Vt.updateQueue,Gt.memoizedState=Vt.memoizedState,Gt.lanes=Vt.lanes):(Gt.updateQueue=null,Gt.memoizedState=null)}var _r=m_(Pe);if(_r!==null){_r.flags&=-257,p_(_r,Pe,Ze,ae,x),_r.mode&1&&h_(ae,kt,x),x=_r,ct=kt;var Ir=x.updateQueue;if(Ir===null){var Ur=new Set;Ur.add(ct),x.updateQueue=Ur}else Ir.add(ct);break e}else{if((x&1)===0){h_(ae,kt,x),Jy();break e}ct=Error(r(426))}}else if(Ct&&Ze.mode&1){var ai=m_(Pe);if(ai!==null){(ai.flags&65536)===0&&(ai.flags|=256),p_(ai,Pe,Ze,ae,x),Jn(Yh(ct,Ze));break e}}ae=ct=Yh(ct,Ze),Li!==4&&(Li=2),Np===null?Np=[ae]:Np.push(ae),ae=Pe;do{switch(ae.tag){case 3:ae.flags|=65536,x&=-x,ae.lanes|=x;var yt=u_(ae,ct,x);ko(ae,yt);break e;case 1:Ze=ct;var ht=ae.type,Nt=ae.stateNode;if((ae.flags&128)===0&&(typeof ht.getDerivedStateFromError=="function"||Nt!==null&&typeof Nt.componentDidCatch=="function"&&(Xf===null||!Xf.has(Nt)))){ae.flags|=65536,x&=-x,ae.lanes|=x;var ar=f_(ae,Ze,x);ko(ae,ar);break e}}ae=ae.return}while(ae!==null)}V_(k)}catch(zr){x=zr,bi===k&&k!==null&&(bi=k=k.return);continue}break}while(!0)}function H_(){var h=Ug.current;return Ug.current=Dg,h===null?Dg:h}function Jy(){(Li===0||Li===3||Li===2)&&(Li=4),ro===null||(H0&268435455)===0&&(qg&268435455)===0||Jf(ro,Co)}function Gg(h,x){var k=oa;oa|=2;var M=H_();(ro!==h||Co!==x)&&(lf=null,V0(h,x));do try{jB();break}catch(Y){z_(h,Y)}while(!0);if(zs(),oa=k,Ug.current=M,bi!==null)throw Error(r(261));return ro=null,Co=0,Li}function jB(){for(;bi!==null;)W_(bi)}function kB(){for(;bi!==null&&!bt();)W_(bi)}function W_(h){var x=X_(h.alternate,h,hc);h.memoizedProps=h.pendingProps,x===null?V_(h):bi=x,zy.current=null}function V_(h){var x=h;do{var k=x.alternate;if(h=x.return,(x.flags&32768)===0){if(k=xB(k,x,hc),k!==null){bi=k;return}}else{if(k=gB(k,x),k!==null){k.flags&=32767,bi=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Li=6,bi=null;return}}if(x=x.sibling,x!==null){bi=x;return}bi=x=h}while(x!==null);Li===0&&(Li=5)}function G0(h,x,k){var M=kr,Y=zc.transition;try{zc.transition=null,kr=1,SB(h,x,k,M)}finally{zc.transition=Y,kr=M}return null}function SB(h,x,k,M){do em();while(Yf!==null);if((oa&6)!==0)throw Error(r(327));k=h.finishedWork;var Y=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var ae=k.lanes|k.childLanes;if(ur(h,ae),h===ro&&(bi=ro=null,Co=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||zg||(zg=!0,Y_(Nn,function(){return em(),null})),ae=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||ae){ae=zc.transition,zc.transition=null;var Pe=kr;kr=1;var Ze=oa;oa|=4,zy.current=null,bB(h,k),F_(k,h),Bo(fu),rc=!!uu,fu=uu=null,h.current=k,yB(k),It(),oa=Ze,kr=Pe,zc.transition=ae}else h.current=k;if(zg&&(zg=!1,Yf=h,Hg=Y),ae=h.pendingLanes,ae===0&&(Xf=null),za(k.stateNode),Vl(h,Dt()),x!==null)for(M=h.onRecoverableError,k=0;k<x.length;k++)Y=x[k],M(Y.value,{componentStack:Y.stack,digest:Y.digest});if($g)throw $g=!1,h=Vy,Vy=null,h;return(Hg&1)!==0&&h.tag!==0&&em(),ae=h.pendingLanes,(ae&1)!==0?h===Gy?jp++:(jp=0,Gy=h):jp=0,ce(),null}function em(){if(Yf!==null){var h=zt(Hg),x=zc.transition,k=kr;try{if(zc.transition=null,kr=16>h?16:h,Yf===null)var M=!1;else{if(h=Yf,Yf=null,Hg=0,(oa&6)!==0)throw Error(r(331));var Y=oa;for(oa|=4,Er=h.current;Er!==null;){var ae=Er,Pe=ae.child;if((Er.flags&16)!==0){var Ze=ae.deletions;if(Ze!==null){for(var ct=0;ct<Ze.length;ct++){var kt=Ze[ct];for(Er=kt;Er!==null;){var Gt=Er;switch(Gt.tag){case 0:case 11:case 15:yp(8,Gt,ae)}var Jt=Gt.child;if(Jt!==null)Jt.return=Gt,Er=Jt;else for(;Er!==null;){Gt=Er;var Vt=Gt.sibling,_r=Gt.return;if(O_(Gt),Gt===kt){Er=null;break}if(Vt!==null){Vt.return=_r,Er=Vt;break}Er=_r}}}var Ir=ae.alternate;if(Ir!==null){var Ur=Ir.child;if(Ur!==null){Ir.child=null;do{var ai=Ur.sibling;Ur.sibling=null,Ur=ai}while(Ur!==null)}}Er=ae}}if((ae.subtreeFlags&2064)!==0&&Pe!==null)Pe.return=ae,Er=Pe;else e:for(;Er!==null;){if(ae=Er,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:yp(9,ae,ae.return)}var yt=ae.sibling;if(yt!==null){yt.return=ae.return,Er=yt;break e}Er=ae.return}}var ht=h.current;for(Er=ht;Er!==null;){Pe=Er;var Nt=Pe.child;if((Pe.subtreeFlags&2064)!==0&&Nt!==null)Nt.return=Pe,Er=Nt;else e:for(Pe=ht;Er!==null;){if(Ze=Er,(Ze.flags&2048)!==0)try{switch(Ze.tag){case 0:case 11:case 15:Bg(9,Ze)}}catch(zr){Hs(Ze,Ze.return,zr)}if(Ze===Pe){Er=null;break e}var ar=Ze.sibling;if(ar!==null){ar.return=Ze.return,Er=ar;break e}Er=Ze.return}}if(oa=Y,ce(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(ts,h)}catch{}M=!0}return M}finally{kr=k,zc.transition=x}}return!1}function G_(h,x,k){x=Yh(k,x),x=u_(h,x,1),h=jo(h,x,1),x=yl(),h!==null&&(Yt(h,1,x),Vl(h,x))}function Hs(h,x,k){if(h.tag===3)G_(h,h,k);else for(;x!==null;){if(x.tag===3){G_(x,h,k);break}else if(x.tag===1){var M=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Xf===null||!Xf.has(M))){h=Yh(k,h),h=f_(x,h,1),x=jo(x,h,1),h=yl(),x!==null&&(Yt(x,1,h),Vl(x,h));break}}x=x.return}}function _B(h,x,k){var M=h.pingCache;M!==null&&M.delete(x),x=yl(),h.pingedLanes|=h.suspendedLanes&k,ro===h&&(Co&k)===k&&(Li===4||Li===3&&(Co&130023424)===Co&&500>Dt()-Wy?V0(h,0):Hy|=k),Vl(h,x)}function K_(h,x){x===0&&((h.mode&1)===0?x=1:(x=Tt,Tt<<=1,(Tt&130023424)===0&&(Tt=4194304)));var k=yl();h=Kn(h,x),h!==null&&(Yt(h,x,k),Vl(h,k))}function CB(h){var x=h.memoizedState,k=0;x!==null&&(k=x.retryLane),K_(h,k)}function AB(h,x){var k=0;switch(h.tag){case 13:var M=h.stateNode,Y=h.memoizedState;Y!==null&&(k=Y.retryLane);break;case 19:M=h.stateNode;break;default:throw Error(r(314))}M!==null&&M.delete(x),K_(h,k)}var X_;X_=function(h,x,k){if(h!==null)if(h.memoizedProps!==x.pendingProps||gi.current)Hl=!0;else{if((h.lanes&k)===0&&(x.flags&128)===0)return Hl=!1,pB(h,x,k);Hl=(h.flags&131072)!==0}else Hl=!1,Ct&&(x.flags&1048576)!==0&&Ut(x,Le,x.index);switch(x.lanes=0,x.tag){case 2:var M=x.type;Mg(h,x),h=x.pendingProps;var Y=_d(x,_s.current);Qa(x,k),Y=rf(null,x,M,h,Y,k);var ae=zl();return x.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Ji(M)?(ae=!0,Bc(x)):ae=!1,x.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Cd(x),Y.updater=Lg,x.stateNode=Y,Y._reactInternals=x,Ey(x,M,h,k),x=Iy(null,x,M,!0,ae,k)):(x.tag=0,Ct&&ae&&St(x),bl(null,x,Y,k),x=x.child),x;case 16:M=x.elementType;e:{switch(Mg(h,x),h=x.pendingProps,Y=M._init,M=Y(M._payload),x.type=M,Y=x.tag=TB(M),h=Od(M,h),Y){case 0:x=Py(null,x,M,h,k);break e;case 1:x=w_(null,x,M,h,k);break e;case 11:x=x_(null,x,M,h,k);break e;case 14:x=g_(null,x,M,Od(M.type,h),k);break e}throw Error(r(306,M,""))}return x;case 0:return M=x.type,Y=x.pendingProps,Y=x.elementType===M?Y:Od(M,Y),Py(h,x,M,Y,k);case 1:return M=x.type,Y=x.pendingProps,Y=x.elementType===M?Y:Od(M,Y),w_(h,x,M,Y,k);case 3:e:{if(N_(x),h===null)throw Error(r(387));M=x.pendingProps,ae=x.memoizedState,Y=ae.element,mu(h,x),Ul(x,M,null,k);var Pe=x.memoizedState;if(M=Pe.element,ae.isDehydrated)if(ae={element:M,isDehydrated:!1,cache:Pe.cache,pendingSuspenseBoundaries:Pe.pendingSuspenseBoundaries,transitions:Pe.transitions},x.updateQueue.baseState=ae,x.memoizedState=ae,x.flags&256){Y=Yh(Error(r(423)),x),x=j_(h,x,M,k,Y);break e}else if(M!==Y){Y=Yh(Error(r(424)),x),x=j_(h,x,M,k,Y);break e}else for(Et=os(x.stateNode.containerInfo.firstChild),ot=x,Ct=!0,Ft=null,k=Zn(x,null,M,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(cn(),M===Y){x=of(h,x,k);break e}bl(h,x,M,k)}x=x.child}return x;case 5:return Xh(x),h===null&&fr(x),M=x.type,Y=x.pendingProps,ae=h!==null?h.memoizedProps:null,Pe=Y.children,Uf(M,Y)?Pe=null:ae!==null&&Uf(M,ae)&&(x.flags|=32),y_(h,x),bl(h,x,Pe,k),x.child;case 6:return h===null&&fr(x),null;case 13:return k_(h,x,k);case 4:return gu(x,x.stateNode.containerInfo),M=x.pendingProps,h===null?x.child=Cs(x,null,M,k):bl(h,x,M,k),x.child;case 11:return M=x.type,Y=x.pendingProps,Y=x.elementType===M?Y:Od(M,Y),x_(h,x,M,Y,k);case 7:return bl(h,x,x.pendingProps,k),x.child;case 8:return bl(h,x,x.pendingProps.children,k),x.child;case 12:return bl(h,x,x.pendingProps.children,k),x.child;case 10:e:{if(M=x.type._context,Y=x.pendingProps,ae=x.memoizedProps,Pe=Y.value,aa(Is,M._currentValue),M._currentValue=Pe,ae!==null)if(Gn(ae.value,Pe)){if(ae.children===Y.children&&!gi.current){x=of(h,x,k);break e}}else for(ae=x.child,ae!==null&&(ae.return=x);ae!==null;){var Ze=ae.dependencies;if(Ze!==null){Pe=ae.child;for(var ct=Ze.firstContext;ct!==null;){if(ct.context===M){if(ae.tag===1){ct=Vo(-1,k&-k),ct.tag=2;var kt=ae.updateQueue;if(kt!==null){kt=kt.shared;var Gt=kt.pending;Gt===null?ct.next=ct:(ct.next=Gt.next,Gt.next=ct),kt.pending=ct}}ae.lanes|=k,ct=ae.alternate,ct!==null&&(ct.lanes|=k),Wo(ae.return,k,x),Ze.lanes|=k;break}ct=ct.next}}else if(ae.tag===10)Pe=ae.type===x.type?null:ae.child;else if(ae.tag===18){if(Pe=ae.return,Pe===null)throw Error(r(341));Pe.lanes|=k,Ze=Pe.alternate,Ze!==null&&(Ze.lanes|=k),Wo(Pe,k,x),Pe=ae.sibling}else Pe=ae.child;if(Pe!==null)Pe.return=ae;else for(Pe=ae;Pe!==null;){if(Pe===x){Pe=null;break}if(ae=Pe.sibling,ae!==null){ae.return=Pe.return,Pe=ae;break}Pe=Pe.return}ae=Pe}bl(h,x,Y.children,k),x=x.child}return x;case 9:return Y=x.type,M=x.pendingProps.children,Qa(x,k),Y=ns(Y),M=M(Y),x.flags|=1,bl(h,x,M,k),x.child;case 14:return M=x.type,Y=Od(M,x.pendingProps),Y=Od(M.type,Y),g_(h,x,M,Y,k);case 15:return v_(h,x,x.type,x.pendingProps,k);case 17:return M=x.type,Y=x.pendingProps,Y=x.elementType===M?Y:Od(M,Y),Mg(h,x),x.tag=1,Ji(M)?(h=!0,Bc(x)):h=!1,Qa(x,k),c_(x,M,Y),Ey(x,M,Y,k),Iy(null,x,M,!0,h,k);case 19:return __(h,x,k);case 22:return b_(h,x,k)}throw Error(r(156,x.tag))};function Y_(h,x){return Me(h,x)}function EB(h,x,k,M){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hc(h,x,k,M){return new EB(h,x,k,M)}function Zy(h){return h=h.prototype,!(!h||!h.isReactComponent)}function TB(h){if(typeof h=="function")return Zy(h)?1:0;if(h!=null){if(h=h.$$typeof,h===E)return 11;if(h===H)return 14}return 2}function Zf(h,x){var k=h.alternate;return k===null?(k=Hc(h.tag,x,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=x,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,x=h.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function Kg(h,x,k,M,Y,ae){var Pe=2;if(M=h,typeof h=="function")Zy(h)&&(Pe=1);else if(typeof h=="string")Pe=5;else e:switch(h){case _:return K0(k.children,Y,ae,x);case P:Pe=8,Y|=8;break;case I:return h=Hc(12,k,x,Y|2),h.elementType=I,h.lanes=ae,h;case F:return h=Hc(13,k,x,Y),h.elementType=F,h.lanes=ae,h;case q:return h=Hc(19,k,x,Y),h.elementType=q,h.lanes=ae,h;case J:return Xg(k,Y,ae,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case B:Pe=10;break e;case T:Pe=9;break e;case E:Pe=11;break e;case H:Pe=14;break e;case Q:Pe=16,M=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return x=Hc(Pe,k,x,Y),x.elementType=h,x.type=M,x.lanes=ae,x}function K0(h,x,k,M){return h=Hc(7,h,M,x),h.lanes=k,h}function Xg(h,x,k,M){return h=Hc(22,h,M,x),h.elementType=J,h.lanes=k,h.stateNode={isHidden:!1},h}function e2(h,x,k){return h=Hc(6,h,null,x),h.lanes=k,h}function t2(h,x,k){return x=Hc(4,h.children!==null?h.children:[],h.key,x),x.lanes=k,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function OB(h,x,k,M,Y){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_n(0),this.expirationTimes=_n(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.identifierPrefix=M,this.onRecoverableError=Y,this.mutableSourceEagerHydrationData=null}function r2(h,x,k,M,Y,ae,Pe,Ze,ct){return h=new OB(h,x,k,Ze,ct),x===1?(x=1,ae===!0&&(x|=8)):x=0,ae=Hc(3,null,null,x),h.current=ae,ae.stateNode=h,ae.memoizedState={element:M,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cd(ae),h}function PB(h,x,k){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:M==null?null:""+M,children:h,containerInfo:x,implementation:k}}function Q_(h){if(!h)return Rc;h=h._reactInternals;e:{if(Ae(h)!==h||h.tag!==1)throw Error(r(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Ji(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(h.tag===1){var k=h.type;if(Ji(k))return B0(h,k,x)}return x}function J_(h,x,k,M,Y,ae,Pe,Ze,ct){return h=r2(k,M,!0,h,Y,ae,Pe,Ze,ct),h.context=Q_(null),k=h.current,M=yl(),Y=Qf(k),ae=Vo(M,Y),ae.callback=x??null,jo(k,ae,Y),h.current.lanes=Y,Yt(h,Y,M),Vl(h,M),h}function Yg(h,x,k,M){var Y=x.current,ae=yl(),Pe=Qf(Y);return k=Q_(k),x.context===null?x.context=k:x.pendingContext=k,x=Vo(ae,Pe),x.payload={element:h},M=M===void 0?null:M,M!==null&&(x.callback=M),h=jo(Y,x,Pe),h!==null&&(Dd(h,Y,Pe,ae),oc(h,Y,Pe)),Pe}function Qg(h){return h=h.current,h.child?(h.child.tag===5,h.child.stateNode):null}function Z_(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<x?k:x}}function n2(h,x){Z_(h,x),(h=h.alternate)&&Z_(h,x)}function IB(){return null}var e6=typeof reportError=="function"?reportError:function(h){console.error(h)};function a2(h){this._internalRoot=h}Jg.prototype.render=a2.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(r(409));Yg(h,x,null,null)},Jg.prototype.unmount=a2.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;W0(function(){Yg(null,h,null,null)}),x[ls]=null}};function Jg(h){this._internalRoot=h}Jg.prototype.unstable_scheduleHydration=function(h){if(h){var x=Zt();h={blockedOn:null,target:h,priority:x};for(var k=0;k<Ar.length&&x!==0&&x<Ar[k].priority;k++);Ar.splice(k,0,h),k===0&&bs(h)}};function s2(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Zg(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function t6(){}function DB(h,x,k,M,Y){if(Y){if(typeof M=="function"){var ae=M;M=function(){var kt=Qg(Pe);ae.call(kt)}}var Pe=J_(x,M,h,0,null,!1,!1,"",t6);return h._reactRootContainer=Pe,h[ls]=Pe.current,jd(h.nodeType===8?h.parentNode:h),W0(),Pe}for(;Y=h.lastChild;)h.removeChild(Y);if(typeof M=="function"){var Ze=M;M=function(){var kt=Qg(ct);Ze.call(kt)}}var ct=r2(h,0,!1,null,null,!1,!1,"",t6);return h._reactRootContainer=ct,h[ls]=ct.current,jd(h.nodeType===8?h.parentNode:h),W0(function(){Yg(x,ct,k,M)}),ct}function ev(h,x,k,M,Y){var ae=k._reactRootContainer;if(ae){var Pe=ae;if(typeof Y=="function"){var Ze=Y;Y=function(){var ct=Qg(Pe);Ze.call(ct)}}Yg(x,Pe,h,Y)}else Pe=DB(k,x,h,Y,M);return Qg(Pe)}Da=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var k=_t(x.pendingLanes);k!==0&&(Lt(x,k|1),Vl(x,Dt()),(oa&6)===0&&(Zh=Dt()+500,ce()))}break;case 13:W0(function(){var M=Kn(h,1);if(M!==null){var Y=yl();Dd(M,h,1,Y)}}),n2(h,1)}},ka=function(h){if(h.tag===13){var x=Kn(h,134217728);if(x!==null){var k=yl();Dd(x,h,134217728,k)}n2(h,134217728)}},Sa=function(h){if(h.tag===13){var x=Qf(h),k=Kn(h,x);if(k!==null){var M=yl();Dd(k,h,x,M)}n2(h,x)}},Zt=function(){return kr},Zr=function(h,x){var k=kr;try{return kr=h,x()}finally{kr=k}},Qt=function(h,x,k){switch(x){case"input":if(Te(h,k),x=k.name,k.type==="radio"&&x!=null){for(k=h;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var M=k[x];if(M!==h&&M.form===h.form){var Y=Zu(M);if(!Y)throw Error(r(90));me(M),Te(M,Y)}}}break;case"textarea":ge(h,k);break;case"select":x=k.value,x!=null&&de(h,!!k.multiple,x,!1)}},wr=Yy,Gr=W0;var LB={usingClientEntryPoint:!1,Events:[Ml,Mc,Zu,At,cr,Yy]},kp={findFiberByHostInstance:Fc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FB={bundleType:kp.bundleType,version:kp.version,rendererPackageName:kp.rendererPackageName,rendererConfig:kp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=tt(h),h===null?null:h.stateNode},findFiberByHostInstance:kp.findFiberByHostInstance||IB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tv.isDisabled&&tv.supportsFiber)try{ts=tv.inject(FB),Wn=tv}catch{}}return Gl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LB,Gl.createPortal=function(h,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s2(x))throw Error(r(200));return PB(h,x,null,k)},Gl.createRoot=function(h,x){if(!s2(h))throw Error(r(299));var k=!1,M="",Y=e6;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onRecoverableError!==void 0&&(Y=x.onRecoverableError)),x=r2(h,1,!1,null,null,k,!1,M,Y),h[ls]=x.current,jd(h.nodeType===8?h.parentNode:h),new a2(x)},Gl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=tt(x),h=h===null?null:h.stateNode,h},Gl.flushSync=function(h){return W0(h)},Gl.hydrate=function(h,x,k){if(!Zg(x))throw Error(r(200));return ev(null,h,x,!0,k)},Gl.hydrateRoot=function(h,x,k){if(!s2(h))throw Error(r(405));var M=k!=null&&k.hydratedSources||null,Y=!1,ae="",Pe=e6;if(k!=null&&(k.unstable_strictMode===!0&&(Y=!0),k.identifierPrefix!==void 0&&(ae=k.identifierPrefix),k.onRecoverableError!==void 0&&(Pe=k.onRecoverableError)),x=J_(x,null,h,1,k??null,Y,!1,ae,Pe),h[ls]=x.current,jd(h),M)for(h=0;h<M.length;h++)k=M[h],Y=k._getVersion,Y=Y(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,Y]:x.mutableSourceEagerHydrationData.push(k,Y);return new Jg(x)},Gl.render=function(h,x,k){if(!Zg(x))throw Error(r(200));return ev(null,h,x,!1,k)},Gl.unmountComponentAtNode=function(h){if(!Zg(h))throw Error(r(40));return h._reactRootContainer?(W0(function(){ev(null,null,h,!1,function(){h._reactRootContainer=null,h[ls]=null})}),!0):!1},Gl.unstable_batchedUpdates=Yy,Gl.unstable_renderSubtreeIntoContainer=function(h,x,k,M){if(!Zg(k))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return ev(h,x,k,!1,M)},Gl.version="18.3.1-next-f1338f8080-20240426",Gl}var c6;function bD(){if(c6)return l2.exports;c6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),l2.exports=zB(),l2.exports}var d6;function HB(){if(d6)return nv;d6=1;var e=bD();return nv.createRoot=e.createRoot,nv.hydrateRoot=e.hydrateRoot,nv}var WB=HB();const VB=Pa(WB),GB="modulepreload",KB=function(e){return"/"+e},u6={},a1=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=KB(d),d in u6)return;u6[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":GB,u||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,b)=>{p.addEventListener("load",m),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};const XB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yD=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();var YB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const QB=D.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},c)=>D.createElement("svg",{ref:c,...YB,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:yD("lucide",s),...l},[...o.map(([d,u])=>D.createElement(d,u)),...Array.isArray(i)?i:[i]]));const Bt=(e,t)=>{const r=D.forwardRef(({className:a,...s},i)=>D.createElement(QB,{ref:i,iconNode:t,className:yD(`lucide-${XB(e)}`,a),...s}));return r.displayName=`${e}`,r};const f6=Bt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const JB=Bt("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);const _u=Bt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const Gk=Bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const To=Bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const ZB=Bt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const bh=Bt("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const av=Bt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const Tb=Bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const ci=Bt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const h6=Bt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const s1=Bt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Cl=Bt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Wv=Bt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const cl=Bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const ta=Bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const m6=Bt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const wD=Bt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Zp=Bt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const Fu=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Vs=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const qj=Bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const va=Bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const $j=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Bn=Bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const gn=Bt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const eU=Bt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const tU=Bt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const Kk=Bt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Ou=Bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const ms=Bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const o0=Bt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const rU=Bt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ND=Bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const jD=Bt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Mu=Bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Pu=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const p6=Bt("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Xk=Bt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Ts=Bt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const nU=Bt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Kd=Bt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const aU=Bt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Vv=Bt("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const sU=Bt("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const px=Bt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const ea=Bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const x6=Bt("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const iU=Bt("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);const oU=Bt("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const mc=Bt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const vf=Bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Xd=Bt("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const dh=Bt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const lU=Bt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const pc=Bt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const cU=Bt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const ad=Bt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const dU=Bt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Sl=Bt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const sv=Bt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const b0=Bt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const zj=Bt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Hj=Bt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const l0=Bt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const uh=Bt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const Ob=Bt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const uU=Bt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const pt=Bt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const fU=Bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const kD=Bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const es=Bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const SD=Bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Gv=Bt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const hU=Bt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const mU=Bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Kv=Bt("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);const pU=Bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const lo=Bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const xU=Bt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const gU=Bt("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const Yk=Bt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Wj=Bt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Q0=Bt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const vU=Bt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Vj=Bt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const dl=Bt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Gj=Bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const bU=Bt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const nn=Bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Kj=Bt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const sd=Bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const _D=Bt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const i1=Bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Si=Bt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const yU=Bt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const Jl=Bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Xl=Bt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const g6=Bt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const Xj=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const o1=Bt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const wU=Bt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Pb=Bt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const xx=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ri=Bt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const _i=Bt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const NU=Bt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const jU=Bt("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const bf=Bt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Fs=Bt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const _p=Bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Lr=Bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const kU=Bt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const SU=Bt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Yd=Bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const y0=Bt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const kc=Bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const iv=Bt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const id=Bt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const co=Bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const p0=Bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const fm=Bt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const _U=Bt("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const Xt=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const l1=Bt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),CD=[{id:"dashboard",label:"Dashboard",icon:n.jsx(dU,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:n.jsx(_i,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:n.jsx(ta,{className:"w-5 h-5"})}],Xv=[{id:"sales-crm",label:"Sales & CRM",icon:n.jsx(Cl,{className:"w-5 h-5"}),items:[{id:"crm",label:"CRM",icon:n.jsx(p0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:n.jsx(Cl,{className:"w-5 h-5"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(ci,{className:"w-5 h-5"})},{id:"products-services",label:"Products & Services",icon:n.jsx(Yk,{className:"w-5 h-5"})}]},{id:"client-management",label:"Client Management",icon:n.jsx(es,{className:"w-5 h-5"}),items:[{id:"inbox",label:"Shared Inbox",icon:n.jsx(es,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:n.jsx(bf,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:n.jsx(Vv,{className:"w-5 h-5"})}]},{id:"finance",label:"Finance",icon:n.jsx(Mu,{className:"w-5 h-5"}),items:[{id:"invoices",label:"Billing & Invoicing",icon:n.jsx(Mu,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:n.jsx(Kj,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:n.jsx(Zp,{className:"w-5 h-5"})}]},{id:"projects",label:"Projects",icon:n.jsx(ea,{className:"w-5 h-5"}),items:[{id:"projects",label:"Projects",icon:n.jsx(ea,{className:"w-5 h-5"})}]}],AD={id:"system",label:"System",icon:n.jsx(Xj,{className:"w-5 h-5"}),items:[{id:"integrations",label:"Integrations",icon:n.jsx(o1,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:n.jsx(Gv,{className:"w-5 h-5"})},{id:"settings",label:"Settings",icon:n.jsx(Xj,{className:"w-5 h-5"})},{id:"data-hygiene",label:"Data Hygiene",icon:n.jsx(Pb,{className:"w-5 h-5"})},{id:"import-history",label:"Import History",icon:n.jsx(ad,{className:"w-5 h-5"})}]},CU=AD.items;[...CD,...Xv.flatMap(e=>e.items),...CU];const Yv=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],ov=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"task-comment",label:"Task Comment/Note Added",description:"Alerts when someone posts in the Notes & Comments section of a task you're assigned to or involved in",inApp:!0,email:!1},{id:"task-mention",label:"Task @Mention",description:"Alerts when someone uses @ to mention you in a task comment",inApp:!0,email:!0},{id:"task-status-changed",label:"Task Status Changed",description:"Alerts when a task you're assigned to or created moves between statuses",inApp:!0,email:!1},{id:"task-due-date-reminder",label:"Task Due Date Reminder",description:"Alert before a task is due",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],AU=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,a=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(a+s/60)},ex=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],Cp=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(ex.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),d=`UTC${t>=0?"+":"-"}${o}:${l}`;if(ex.find(u=>u.value===d))return d}const a=t;let s="UTC+0",i=1/0;return ex.forEach(o=>{const l=AU(o.value),c=Math.abs(l-a);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},v6=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function ED(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=ED(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ca(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=ED(e))&&(a&&(a+=" "),a+=t);return a}var u2,b6;function ec(){if(b6)return u2;b6=1;var e=Array.isArray;return u2=e,u2}var f2,y6;function TD(){if(y6)return f2;y6=1;var e=typeof rv=="object"&&rv&&rv.Object===Object&&rv;return f2=e,f2}var h2,w6;function Bu(){if(w6)return h2;w6=1;var e=TD(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return h2=r,h2}var m2,N6;function xg(){if(N6)return m2;N6=1;var e=Bu(),t=e.Symbol;return m2=t,m2}var p2,j6;function EU(){if(j6)return p2;j6=1;var e=xg(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var d=!0}catch{}var u=a.call(o);return d&&(l?o[s]=c:delete o[s]),u}return p2=i,p2}var x2,k6;function TU(){if(k6)return x2;k6=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return x2=r,x2}var g2,S6;function Of(){if(S6)return g2;S6=1;var e=xg(),t=EU(),r=TU(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return g2=o,g2}var v2,_6;function Pf(){if(_6)return v2;_6=1;function e(t){return t!=null&&typeof t=="object"}return v2=e,v2}var b2,C6;function np(){if(C6)return b2;C6=1;var e=Of(),t=Pf(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return b2=a,b2}var y2,A6;function Qk(){if(A6)return y2;A6=1;var e=ec(),t=np(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return y2=s,y2}var w2,E6;function C0(){if(E6)return w2;E6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return w2=e,w2}var N2,T6;function Jk(){if(T6)return N2;T6=1;var e=Of(),t=C0(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==a||c==s||c==r||c==i}return N2=o,N2}var j2,O6;function OU(){if(O6)return j2;O6=1;var e=Bu(),t=e["__core-js_shared__"];return j2=t,j2}var k2,P6;function PU(){if(P6)return k2;P6=1;var e=OU(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return k2=r,k2}var S2,I6;function OD(){if(I6)return S2;I6=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return S2=r,S2}var _2,D6;function IU(){if(D6)return _2;D6=1;var e=Jk(),t=PU(),r=C0(),a=OD(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!r(p)||t(p))return!1;var m=e(p)?u:i;return m.test(a(p))}return _2=f,_2}var C2,L6;function DU(){if(L6)return C2;L6=1;function e(t,r){return t?.[r]}return C2=e,C2}var A2,F6;function Dh(){if(F6)return A2;F6=1;var e=IU(),t=DU();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return A2=r,A2}var E2,M6;function Ib(){if(M6)return E2;M6=1;var e=Dh(),t=e(Object,"create");return E2=t,E2}var T2,R6;function LU(){if(R6)return T2;R6=1;var e=Ib();function t(){this.__data__=e?e(null):{},this.size=0}return T2=t,T2}var O2,B6;function FU(){if(B6)return O2;B6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return O2=e,O2}var P2,U6;function MU(){if(U6)return P2;U6=1;var e=Ib(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return P2=s,P2}var I2,q6;function RU(){if(q6)return I2;q6=1;var e=Ib(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return I2=a,I2}var D2,$6;function BU(){if($6)return D2;$6=1;var e=Ib(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return D2=r,D2}var L2,z6;function UU(){if(z6)return L2;z6=1;var e=LU(),t=FU(),r=MU(),a=RU(),s=BU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,L2=i,L2}var F2,H6;function qU(){if(H6)return F2;H6=1;function e(){this.__data__=[],this.size=0}return F2=e,F2}var M2,W6;function Zk(){if(W6)return M2;W6=1;function e(t,r){return t===r||t!==t&&r!==r}return M2=e,M2}var R2,V6;function Db(){if(V6)return R2;V6=1;var e=Zk();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return R2=t,R2}var B2,G6;function $U(){if(G6)return B2;G6=1;var e=Db(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return B2=a,B2}var U2,K6;function zU(){if(K6)return U2;K6=1;var e=Db();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return U2=t,U2}var q2,X6;function HU(){if(X6)return q2;X6=1;var e=Db();function t(r){return e(this.__data__,r)>-1}return q2=t,q2}var $2,Y6;function WU(){if(Y6)return $2;Y6=1;var e=Db();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return $2=t,$2}var z2,Q6;function Lb(){if(Q6)return z2;Q6=1;var e=qU(),t=$U(),r=zU(),a=HU(),s=WU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,z2=i,z2}var H2,J6;function eS(){if(J6)return H2;J6=1;var e=Dh(),t=Bu(),r=e(t,"Map");return H2=r,H2}var W2,Z6;function VU(){if(Z6)return W2;Z6=1;var e=UU(),t=Lb(),r=eS();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return W2=a,W2}var V2,eC;function GU(){if(eC)return V2;eC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return V2=e,V2}var G2,tC;function Fb(){if(tC)return G2;tC=1;var e=GU();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return G2=t,G2}var K2,rC;function KU(){if(rC)return K2;rC=1;var e=Fb();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return K2=t,K2}var X2,nC;function XU(){if(nC)return X2;nC=1;var e=Fb();function t(r){return e(this,r).get(r)}return X2=t,X2}var Y2,aC;function YU(){if(aC)return Y2;aC=1;var e=Fb();function t(r){return e(this,r).has(r)}return Y2=t,Y2}var Q2,sC;function QU(){if(sC)return Q2;sC=1;var e=Fb();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return Q2=t,Q2}var J2,iC;function tS(){if(iC)return J2;iC=1;var e=VU(),t=KU(),r=XU(),a=YU(),s=QU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,J2=i,J2}var Z2,oC;function PD(){if(oC)return Z2;oC=1;var e=tS(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,Z2=r,Z2}var ew,lC;function JU(){if(lC)return ew;lC=1;var e=PD(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return ew=r,ew}var tw,cC;function ZU(){if(cC)return tw;cC=1;var e=JU(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,d){i.push(c?d.replace(r,"$1"):l||o)}),i});return tw=a,tw}var rw,dC;function rS(){if(dC)return rw;dC=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return rw=e,rw}var nw,uC;function eq(){if(uC)return nw;uC=1;var e=xg(),t=rS(),r=ec(),a=np(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return nw=o,nw}var aw,fC;function ID(){if(fC)return aw;fC=1;var e=eq();function t(r){return r==null?"":e(r)}return aw=t,aw}var sw,hC;function DD(){if(hC)return sw;hC=1;var e=ec(),t=Qk(),r=ZU(),a=ID();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return sw=s,sw}var iw,mC;function Mb(){if(mC)return iw;mC=1;var e=np();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return iw=t,iw}var ow,pC;function nS(){if(pC)return ow;pC=1;var e=DD(),t=Mb();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return ow=r,ow}var lw,xC;function LD(){if(xC)return lw;xC=1;var e=nS();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return lw=t,lw}var tq=LD();const od=Pa(tq);var cw,gC;function rq(){if(gC)return cw;gC=1;function e(t){return t==null}return cw=e,cw}var nq=rq();const Hn=Pa(nq);var dw,vC;function aq(){if(vC)return dw;vC=1;var e=Of(),t=ec(),r=Pf(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return dw=s,dw}var sq=aq();const yh=Pa(sq);var iq=Jk();const On=Pa(iq);var oq=C0();const ap=Pa(oq);var uw={exports:{}},Na={};var bC;function lq(){if(bC)return Na;bC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var y=g.$$typeof;switch(y){case e:switch(g=g.type,g){case r:case s:case a:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case p:case f:case i:return g;default:return y}}case t:return y}}}return Na.ContextConsumer=o,Na.ContextProvider=i,Na.Element=e,Na.ForwardRef=c,Na.Fragment=r,Na.Lazy=p,Na.Memo=f,Na.Portal=t,Na.Profiler=s,Na.StrictMode=a,Na.Suspense=d,Na.SuspenseList=u,Na.isAsyncMode=function(){return!1},Na.isConcurrentMode=function(){return!1},Na.isContextConsumer=function(g){return v(g)===o},Na.isContextProvider=function(g){return v(g)===i},Na.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},Na.isForwardRef=function(g){return v(g)===c},Na.isFragment=function(g){return v(g)===r},Na.isLazy=function(g){return v(g)===p},Na.isMemo=function(g){return v(g)===f},Na.isPortal=function(g){return v(g)===t},Na.isProfiler=function(g){return v(g)===s},Na.isStrictMode=function(g){return v(g)===a},Na.isSuspense=function(g){return v(g)===d},Na.isSuspenseList=function(g){return v(g)===u},Na.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===a||g===d||g===u||g===m||typeof g=="object"&&g!==null&&(g.$$typeof===p||g.$$typeof===f||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===b||g.getModuleId!==void 0)},Na.typeOf=v,Na}var yC;function cq(){return yC||(yC=1,uw.exports=lq()),uw.exports}var dq=cq(),fw,wC;function FD(){if(wC)return fw;wC=1;var e=Of(),t=Pf(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return fw=a,fw}var hw,NC;function uq(){if(NC)return hw;NC=1;var e=FD();function t(r){return e(r)&&r!=+r}return hw=t,hw}var fq=uq();const sp=Pa(fq);var hq=FD();const mq=Pa(hq);var Wd=function(t){return t===0?0:t>0?1:-1},nh=function(t){return yh(t)&&t.indexOf("%")===t.length-1},ir=function(t){return mq(t)&&!sp(t)},pq=function(t){return Hn(t)},qi=function(t){return ir(t)||yh(t)},xq=0,gg=function(t){var r=++xq;return"".concat(t||"").concat(r)},wh=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ir(t)&&!yh(t))return a;var i;if(nh(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return sp(i)&&(i=a),s&&i>r&&(i=r),i},c0=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},gq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},rd=function(t,r){return ir(t)&&ir(r)?function(a){return t+a*(r-t)}:function(){return r}};function c1(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):od(a,t))===r})}var vq=function(t,r){return ir(t)&&ir(r)?t-r:yh(t)&&yh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function vm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Yj(e){"@babel/helpers - typeof";return Yj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yj(e)}var bq=["viewBox","children"],yq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],jC=["points","pathLength"],mw={svg:bq,polygon:jC,polyline:jC},aS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],d1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(D.isValidElement(t)&&(a=t.props),!ap(a))return null;var s={};return Object.keys(a).forEach(function(i){aS.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},wq=function(t,r,a){return function(s){return t(r,a,s),null}},u1=function(t,r,a){if(!ap(t)||Yj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];aS.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=wq(o,r,a))}),s},Nq=["children"],jq=["children"];function kC(e,t){if(e==null)return{};var r=kq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Qj(e){"@babel/helpers - typeof";return Qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qj(e)}var SC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},yf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},_C=null,pw=null,sS=function e(t){if(t===_C&&Array.isArray(pw))return pw;var r=[];return D.Children.forEach(t,function(a){Hn(a)||(dq.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),pw=r,_C=t,r};function Qd(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return yf(s)}):a=[yf(t)],sS(e).forEach(function(s){var i=od(s,"type.displayName")||od(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function gc(e,t){var r=Qd(e,t);return r&&r[0]}var CC=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!ir(a)||a<=0||!ir(s)||s<=0)},Sq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_q=function(t){return t&&t.type&&yh(t.type)&&Sq.indexOf(t.type)>=0},Cq=function(t){return t&&Qj(t)==="object"&&"clipDot"in t},Aq=function(t,r,a,s){var i,o=(i=mw?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!On(t)&&(s&&o.includes(r)||yq.includes(r))||a&&aS.includes(r)},zn=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(D.isValidElement(t)&&(s=t.props),!ap(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Aq((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},Jj=function e(t,r){if(t===r)return!0;var a=D.Children.count(t);if(a!==D.Children.count(r))return!1;if(a===0)return!0;if(a===1)return AC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!AC(i,o))return!1}return!0},AC=function(t,r){if(Hn(t)&&Hn(r))return!0;if(!Hn(t)&&!Hn(r)){var a=t.props||{},s=a.children,i=kC(a,Nq),o=r.props||{},l=o.children,c=kC(o,jq);return s&&l?vm(i,c)&&Jj(s,l):!s&&!l?vm(i,c):!1}return!1},EC=function(t,r){var a=[],s={};return sS(t).forEach(function(i,o){if(_q(i))a.push(i);else if(i){var l=yf(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var f=d(i,l,o);a.push(f),s[l]=!0}}}),a},Eq=function(t){var r=t&&t.type;return r&&SC[r]?SC[r]:null},Tq=function(t,r){return sS(r).indexOf(t)},Oq=["children","width","height","viewBox","className","style","title","desc"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zj.apply(this,arguments)}function Pq(e,t){if(e==null)return{};var r=Iq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Iq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function e4(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=Pq(e,Oq),u=s||{width:r,height:a,x:0,y:0},f=ca("recharts-surface",i);return ut.createElement("svg",Zj({},zn(d,!0,"svg"),{className:f,width:r,height:a,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ut.createElement("title",null,l),ut.createElement("desc",null,c),t)}var Dq=["children","className"];function t4(){return t4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t4.apply(this,arguments)}function Lq(e,t){if(e==null)return{};var r=Fq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Fq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Ms=ut.forwardRef(function(e,t){var r=e.children,a=e.className,s=Lq(e,Dq),i=ca("recharts-layer",a);return ut.createElement("g",t4({className:i},zn(s,!0),{ref:t}),r)}),wf=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},xw,TC;function Mq(){if(TC)return xw;TC=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return xw=e,xw}var gw,OC;function Rq(){if(OC)return gw;OC=1;var e=Mq();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return gw=t,gw}var vw,PC;function MD(){if(PC)return vw;PC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(d){return l.test(d)}return vw=c,vw}var bw,IC;function Bq(){if(IC)return bw;IC=1;function e(t){return t.split("")}return bw=e,bw}var yw,DC;function Uq(){if(DC)return yw;DC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",b=d+"?",v="["+i+"]?",g="(?:"+m+"(?:"+[u,f,p].join("|")+")"+v+b+")*",y=v+b+g,w="(?:"+[u+l+"?",l,f,p,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+w+y,"g");function N(S){return S.match(j)||[]}return yw=N,yw}var ww,LC;function qq(){if(LC)return ww;LC=1;var e=Bq(),t=MD(),r=Uq();function a(s){return t(s)?r(s):e(s)}return ww=a,ww}var Nw,FC;function $q(){if(FC)return Nw;FC=1;var e=Rq(),t=MD(),r=qq(),a=ID();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return Nw=s,Nw}var jw,MC;function zq(){if(MC)return jw;MC=1;var e=$q(),t=e("toUpperCase");return jw=t,jw}var Hq=zq();const Rb=Pa(Hq);function as(e){return function(){return e}}const RD=Math.cos,f1=Math.sin,eu=Math.sqrt,h1=Math.PI,Bb=2*h1,r4=Math.PI,n4=2*r4,J0=1e-6,Wq=n4-J0;function BD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Vq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BD;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class Gq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BD:Vq(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-r,u=o-t,f=l-r,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>J0)if(!(Math.abs(f*c-d*u)>J0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=a-o,b=s-l,v=c*c+d*d,g=m*m+b*b,y=Math.sqrt(v),w=Math.sqrt(p),j=i*Math.tan((r4-Math.acos((v+p-g)/(2*y*w)))/2),N=j/w,S=j/y;Math.abs(N-1)>J0&&this._append`L${t+N*u},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*m>u*b)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=r+c,f=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>J0||Math.abs(this._y1-u)>J0)&&this._append`L${d},${u}`,a&&(p<0&&(p=p%n4+n4),p>Wq?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=u}`:p>J0&&this._append`A${a},${a},0,${+(p>=r4)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function iS(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Gq(t)}function oS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UD(e){this._context=e}UD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ub(e){return new UD(e)}function qD(e){return e[0]}function $D(e){return e[1]}function zD(e,t){var r=as(!0),a=null,s=Ub,i=null,o=iS(l);e=typeof e=="function"?e:e===void 0?qD:as(e),t=typeof t=="function"?t:t===void 0?$D:as(t);function l(c){var d,u=(c=oS(c)).length,f,p=!1,m;for(a==null&&(i=s(m=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:as(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:as(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:as(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function lv(e,t,r){var a=null,s=as(!0),i=null,o=Ub,l=null,c=iS(d);e=typeof e=="function"?e:e===void 0?qD:as(+e),t=typeof t=="function"?t:as(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?$D:as(+r);function d(f){var p,m,b,v=(f=oS(f)).length,g,y=!1,w,j=new Array(v),N=new Array(v);for(i==null&&(l=o(w=c())),p=0;p<=v;++p){if(!(p<v&&s(g=f[p],p,f))===y)if(y=!y)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=m;--b)l.point(j[b],N[b]);l.lineEnd(),l.areaEnd()}y&&(j[p]=+e(g,p,f),N[p]=+t(g,p,f),l.point(a?+a(g,p,f):j[p],r?+r(g,p,f):N[p]))}if(w)return l=null,w+""||null}function u(){return zD().defined(s).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:as(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:as(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:as(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:as(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:as(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:as(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(f){return arguments.length?(s=typeof f=="function"?f:as(!!f),d):s},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class HD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Kq(e){return new HD(e,!0)}function Xq(e){return new HD(e,!1)}const lS={draw(e,t){const r=eu(t/h1);e.moveTo(r,0),e.arc(0,0,r,0,Bb)}},Yq={draw(e,t){const r=eu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},WD=eu(1/3),Qq=WD*2,Jq={draw(e,t){const r=eu(t/Qq),a=r*WD;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},Zq={draw(e,t){const r=eu(t),a=-r/2;e.rect(a,a,r,r)}},e$=.8908130915292852,VD=f1(h1/10)/f1(7*h1/10),t$=f1(Bb/10)*VD,r$=-RD(Bb/10)*VD,n$={draw(e,t){const r=eu(t*e$),a=t$*r,s=r$*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Bb*i/5,l=RD(o),c=f1(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},kw=eu(3),a$={draw(e,t){const r=-eu(t/(kw*3));e.moveTo(0,r*2),e.lineTo(-kw*r,-r),e.lineTo(kw*r,-r),e.closePath()}},Wc=-.5,Vc=eu(3)/2,a4=1/eu(12),s$=(a4/2+1)*3,i$={draw(e,t){const r=eu(t/s$),a=r/2,s=r*a4,i=a,o=r*a4+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Wc*a-Vc*s,Vc*a+Wc*s),e.lineTo(Wc*i-Vc*o,Vc*i+Wc*o),e.lineTo(Wc*l-Vc*c,Vc*l+Wc*c),e.lineTo(Wc*a+Vc*s,Wc*s-Vc*a),e.lineTo(Wc*i+Vc*o,Wc*o-Vc*i),e.lineTo(Wc*l+Vc*c,Wc*c-Vc*l),e.closePath()}};function o$(e,t){let r=null,a=iS(s);e=typeof e=="function"?e:as(e||lS),t=typeof t=="function"?t:as(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:as(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:as(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function m1(){}function p1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GD(e){this._context=e}GD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l$(e){return new GD(e)}function KD(e){this._context=e}KD.prototype={areaStart:m1,areaEnd:m1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c$(e){return new KD(e)}function XD(e){this._context=e}XD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d$(e){return new XD(e)}function YD(e){this._context=e}YD.prototype={areaStart:m1,areaEnd:m1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function u$(e){return new YD(e)}function RC(e){return e<0?-1:1}function BC(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(RC(i)+RC(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function UC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Sw(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function x1(e){this._context=e}x1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sw(this,this._t0,UC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sw(this,UC(this,r=BC(this,e,t)),r);break;default:Sw(this,this._t0,r=BC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function QD(e){this._context=new JD(e)}(QD.prototype=Object.create(x1.prototype)).point=function(e,t){x1.prototype.point.call(this,t,e)};function JD(e){this._context=e}JD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function f$(e){return new x1(e)}function h$(e){return new QD(e)}function ZD(e){this._context=e}ZD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=qC(e),s=qC(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function qC(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function m$(e){return new ZD(e)}function qb(e,t){this._context=e,this._t=t}qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function p$(e){return new qb(e,.5)}function x$(e){return new qb(e,0)}function g$(e){return new qb(e,1)}function Tm(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function s4(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function v$(e,t){return e[t]}function b$(e){const t=[];return t.key=e,t}function y$(){var e=as([]),t=s4,r=Tm,a=v$;function s(i){var o=Array.from(e.apply(this,arguments),b$),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(f,o[l].key,d,i)]).data=f;for(l=0,u=oS(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:as(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:as(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?s4:typeof i=="function"?i:as(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Tm,s):r},s}function w$(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Tm(e,t)}}function N$(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Tm(e,t)}}function j$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[a][1]||0,p=u[a-1][1]||0,m=(f-p)/2,b=0;b<l;++b){var v=e[t[b]],g=v[a][1]||0,y=v[a-1][1]||0;m+=g-y}c+=f,d+=m*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=d/c)}s[a-1][1]+=s[a-1][0]=r,Tm(e,t)}}function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}var k$=["type","size","sizeType"];function i4(){return i4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i4.apply(this,arguments)}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(a){S$(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function S$(e,t,r){return t=_$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _$(e){var t=C$(e,"string");return gx(t)=="symbol"?t:t+""}function C$(e,t){if(gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(gx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A$(e,t){if(e==null)return{};var r=E$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function E$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var eL={symbolCircle:lS,symbolCross:Yq,symbolDiamond:Jq,symbolSquare:Zq,symbolStar:n$,symbolTriangle:a$,symbolWye:i$},T$=Math.PI/180,O$=function(t){var r="symbol".concat(Rb(t));return eL[r]||lS},P$=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*T$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},I$=function(t,r){eL["symbol".concat(Rb(t))]=r},cS=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=A$(t,k$),d=zC(zC({},c),{},{type:a,size:i,sizeType:l}),u=function(){var g=O$(a),y=o$().type(g).size(P$(i,l,a));return y()},f=d.className,p=d.cx,m=d.cy,b=zn(d,!0);return p===+p&&m===+m&&i===+i?ut.createElement("path",i4({},b,{className:ca("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:u()})):null};cS.registerSymbol=I$;function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function o4(){return o4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o4.apply(this,arguments)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function D$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(a){vx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function L$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F$(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,rL(a.key),a)}}function M$(e,t,r){return t&&F$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R$(e,t,r){return t=g1(t),B$(e,tL()?Reflect.construct(t,r||[],g1(e).constructor):t.apply(e,r))}function B$(e,t){if(t&&(Om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U$(e)}function U$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tL=function(){return!!e})()}function g1(e){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g1(e)}function q$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l4(e,t)}function l4(e,t){return l4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},l4(e,t)}function vx(e,t,r){return t=rL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e){var t=$$(e,"string");return Om(t)=="symbol"?t:t+""}function $$(e,t){if(Om(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Om(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gc=32,dS=(function(e){function t(){return L$(this,t),R$(this,t,arguments)}return q$(t,e),M$(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Gc/2,o=Gc/6,l=Gc/3,c=a.inactive?s:a.color;if(a.type==="plainline")return ut.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Gc,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return ut.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Gc,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return ut.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gc/8,"h").concat(Gc,"v").concat(Gc*3/4,"h").concat(-Gc,"z"),className:"recharts-legend-icon"});if(ut.isValidElement(a.legendIcon)){var d=D$({},a);return delete d.legendIcon,ut.cloneElement(a.legendIcon,d)}return ut.createElement(cS,{fill:c,cx:i,cy:i,size:Gc,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:Gc,height:Gc},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,b){var v=m.formatter||c,g=ca(vx(vx({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=On(m.value)?null:m.value;wf(!On(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?d:m.color;return ut.createElement("li",o4({className:g,style:f,key:"legend-item-".concat(b)},u1(a.props,m,b)),ut.createElement(e4,{width:o,height:o,viewBox:u,style:p},a.renderIcon(m)),ut.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},v?v(y,m,b):y))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ut.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(D.PureComponent);vx(dS,"displayName","Legend");vx(dS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _w,WC;function z$(){if(WC)return _w;WC=1;var e=Lb();function t(){this.__data__=new e,this.size=0}return _w=t,_w}var Cw,VC;function H$(){if(VC)return Cw;VC=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return Cw=e,Cw}var Aw,GC;function W$(){if(GC)return Aw;GC=1;function e(t){return this.__data__.get(t)}return Aw=e,Aw}var Ew,KC;function V$(){if(KC)return Ew;KC=1;function e(t){return this.__data__.has(t)}return Ew=e,Ew}var Tw,XC;function G$(){if(XC)return Tw;XC=1;var e=Lb(),t=eS(),r=tS(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<a-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return Tw=s,Tw}var Ow,YC;function nL(){if(YC)return Ow;YC=1;var e=Lb(),t=z$(),r=H$(),a=W$(),s=V$(),i=G$();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,Ow=o,Ow}var Pw,QC;function K$(){if(QC)return Pw;QC=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Pw=t,Pw}var Iw,JC;function X$(){if(JC)return Iw;JC=1;function e(t){return this.__data__.has(t)}return Iw=e,Iw}var Dw,ZC;function aL(){if(ZC)return Dw;ZC=1;var e=tS(),t=K$(),r=X$();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,Dw=a,Dw}var Lw,eA;function sL(){if(eA)return Lw;eA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return Lw=e,Lw}var Fw,tA;function iL(){if(tA)return Fw;tA=1;function e(t,r){return t.has(r)}return Fw=e,Fw}var Mw,rA;function oL(){if(rA)return Mw;rA=1;var e=aL(),t=sL(),r=iL(),a=1,s=2;function i(o,l,c,d,u,f){var p=c&a,m=o.length,b=l.length;if(m!=b&&!(p&&b>m))return!1;var v=f.get(o),g=f.get(l);if(v&&g)return v==l&&g==o;var y=-1,w=!0,j=c&s?new e:void 0;for(f.set(o,l),f.set(l,o);++y<m;){var N=o[y],S=l[y];if(d)var A=p?d(S,N,y,l,o,f):d(N,S,y,o,l,f);if(A!==void 0){if(A)continue;w=!1;break}if(j){if(!t(l,function(_,P){if(!r(j,P)&&(N===_||u(N,_,c,d,f)))return j.push(P)})){w=!1;break}}else if(!(N===S||u(N,S,c,d,f))){w=!1;break}}return f.delete(o),f.delete(l),w}return Mw=i,Mw}var Rw,nA;function Y$(){if(nA)return Rw;nA=1;var e=Bu(),t=e.Uint8Array;return Rw=t,Rw}var Bw,aA;function Q$(){if(aA)return Bw;aA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return Bw=e,Bw}var Uw,sA;function uS(){if(sA)return Uw;sA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return Uw=e,Uw}var qw,iA;function J$(){if(iA)return qw;iA=1;var e=xg(),t=Y$(),r=Zk(),a=oL(),s=Q$(),i=uS(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",f="[object Map]",p="[object Number]",m="[object RegExp]",b="[object Set]",v="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",w="[object DataView]",j=e?e.prototype:void 0,N=j?j.valueOf:void 0;function S(A,_,P,I,B,T,E){switch(P){case w:if(A.byteLength!=_.byteLength||A.byteOffset!=_.byteOffset)return!1;A=A.buffer,_=_.buffer;case y:return!(A.byteLength!=_.byteLength||!T(new t(A),new t(_)));case c:case d:case p:return r(+A,+_);case u:return A.name==_.name&&A.message==_.message;case m:case v:return A==_+"";case f:var F=s;case b:var q=I&o;if(F||(F=i),A.size!=_.size&&!q)return!1;var H=E.get(A);if(H)return H==_;I|=l,E.set(A,_);var Q=a(F(A),F(_),I,B,T,E);return E.delete(A),Q;case g:if(N)return N.call(A)==N.call(_)}return!1}return qw=S,qw}var $w,oA;function lL(){if(oA)return $w;oA=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return $w=e,$w}var zw,lA;function Z$(){if(lA)return zw;lA=1;var e=lL(),t=ec();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return zw=r,zw}var Hw,cA;function ez(){if(cA)return Hw;cA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return Hw=e,Hw}var Ww,dA;function tz(){if(dA)return Ww;dA=1;function e(){return[]}return Ww=e,Ww}var Vw,uA;function rz(){if(uA)return Vw;uA=1;var e=ez(),t=tz(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return Vw=i,Vw}var Gw,fA;function nz(){if(fA)return Gw;fA=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return Gw=e,Gw}var Kw,hA;function az(){if(hA)return Kw;hA=1;var e=Of(),t=Pf(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return Kw=a,Kw}var Xw,mA;function fS(){if(mA)return Xw;mA=1;var e=az(),t=Pf(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return Xw=i,Xw}var Wp={exports:{}},Yw,pA;function sz(){if(pA)return Yw;pA=1;function e(){return!1}return Yw=e,Yw}Wp.exports;var xA;function cL(){return xA||(xA=1,(function(e,t){var r=Bu(),a=sz(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Wp,Wp.exports)),Wp.exports}var Qw,gA;function hS(){if(gA)return Qw;gA=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return Qw=r,Qw}var Jw,vA;function mS(){if(vA)return Jw;vA=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Jw=t,Jw}var Zw,bA;function iz(){if(bA)return Zw;bA=1;var e=Of(),t=mS(),r=Pf(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",f="[object Object]",p="[object RegExp]",m="[object Set]",b="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",w="[object Float32Array]",j="[object Float64Array]",N="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",_="[object Uint8Array]",P="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",T={};T[w]=T[j]=T[N]=T[S]=T[A]=T[_]=T[P]=T[I]=T[B]=!0,T[a]=T[s]=T[g]=T[i]=T[y]=T[o]=T[l]=T[c]=T[d]=T[u]=T[f]=T[p]=T[m]=T[b]=T[v]=!1;function E(F){return r(F)&&t(F.length)&&!!T[e(F)]}return Zw=E,Zw}var eN,yA;function dL(){if(yA)return eN;yA=1;function e(t){return function(r){return t(r)}}return eN=e,eN}var Vp={exports:{}};Vp.exports;var wA;function oz(){return wA||(wA=1,(function(e,t){var r=TD(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Vp,Vp.exports)),Vp.exports}var tN,NA;function uL(){if(NA)return tN;NA=1;var e=iz(),t=dL(),r=oz(),a=r&&r.isTypedArray,s=a?t(a):e;return tN=s,tN}var rN,jA;function lz(){if(jA)return rN;jA=1;var e=nz(),t=fS(),r=ec(),a=cL(),s=hS(),i=uL(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var f=r(d),p=!f&&t(d),m=!f&&!p&&a(d),b=!f&&!p&&!m&&i(d),v=f||p||m||b,g=v?e(d.length,String):[],y=g.length;for(var w in d)(u||l.call(d,w))&&!(v&&(w=="length"||m&&(w=="offset"||w=="parent")||b&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||s(w,y)))&&g.push(w);return g}return rN=c,rN}var nN,kA;function cz(){if(kA)return nN;kA=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return nN=t,nN}var aN,SA;function fL(){if(SA)return aN;SA=1;function e(t,r){return function(a){return t(r(a))}}return aN=e,aN}var sN,_A;function dz(){if(_A)return sN;_A=1;var e=fL(),t=e(Object.keys,Object);return sN=t,sN}var iN,CA;function uz(){if(CA)return iN;CA=1;var e=cz(),t=dz(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return iN=s,iN}var oN,AA;function vg(){if(AA)return oN;AA=1;var e=Jk(),t=mS();function r(a){return a!=null&&t(a.length)&&!e(a)}return oN=r,oN}var lN,EA;function $b(){if(EA)return lN;EA=1;var e=lz(),t=uz(),r=vg();function a(s){return r(s)?e(s):t(s)}return lN=a,lN}var cN,TA;function fz(){if(TA)return cN;TA=1;var e=Z$(),t=rz(),r=$b();function a(s){return e(s,r,t)}return cN=a,cN}var dN,OA;function hz(){if(OA)return dN;OA=1;var e=fz(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,c,d,u){var f=l&t,p=e(i),m=p.length,b=e(o),v=b.length;if(m!=v&&!f)return!1;for(var g=m;g--;){var y=p[g];if(!(f?y in o:a.call(o,y)))return!1}var w=u.get(i),j=u.get(o);if(w&&j)return w==o&&j==i;var N=!0;u.set(i,o),u.set(o,i);for(var S=f;++g<m;){y=p[g];var A=i[y],_=o[y];if(c)var P=f?c(_,A,y,o,i,u):c(A,_,y,i,o,u);if(!(P===void 0?A===_||d(A,_,l,c,u):P)){N=!1;break}S||(S=y=="constructor")}if(N&&!S){var I=i.constructor,B=o.constructor;I!=B&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(N=!1)}return u.delete(i),u.delete(o),N}return dN=s,dN}var uN,PA;function mz(){if(PA)return uN;PA=1;var e=Dh(),t=Bu(),r=e(t,"DataView");return uN=r,uN}var fN,IA;function pz(){if(IA)return fN;IA=1;var e=Dh(),t=Bu(),r=e(t,"Promise");return fN=r,fN}var hN,DA;function hL(){if(DA)return hN;DA=1;var e=Dh(),t=Bu(),r=e(t,"Set");return hN=r,hN}var mN,LA;function xz(){if(LA)return mN;LA=1;var e=Dh(),t=Bu(),r=e(t,"WeakMap");return mN=r,mN}var pN,FA;function gz(){if(FA)return pN;FA=1;var e=mz(),t=eS(),r=pz(),a=hL(),s=xz(),i=Of(),o=OD(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",f="[object WeakMap]",p="[object DataView]",m=o(e),b=o(t),v=o(r),g=o(a),y=o(s),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=p||t&&w(new t)!=l||r&&w(r.resolve())!=d||a&&w(new a)!=u||s&&w(new s)!=f)&&(w=function(j){var N=i(j),S=N==c?j.constructor:void 0,A=S?o(S):"";if(A)switch(A){case m:return p;case b:return l;case v:return d;case g:return u;case y:return f}return N}),pN=w,pN}var xN,MA;function vz(){if(MA)return xN;MA=1;var e=nL(),t=oL(),r=J$(),a=hz(),s=gz(),i=ec(),o=cL(),l=uL(),c=1,d="[object Arguments]",u="[object Array]",f="[object Object]",p=Object.prototype,m=p.hasOwnProperty;function b(v,g,y,w,j,N){var S=i(v),A=i(g),_=S?u:s(v),P=A?u:s(g);_=_==d?f:_,P=P==d?f:P;var I=_==f,B=P==f,T=_==P;if(T&&o(v)){if(!o(g))return!1;S=!0,I=!1}if(T&&!I)return N||(N=new e),S||l(v)?t(v,g,y,w,j,N):r(v,g,_,y,w,j,N);if(!(y&c)){var E=I&&m.call(v,"__wrapped__"),F=B&&m.call(g,"__wrapped__");if(E||F){var q=E?v.value():v,H=F?g.value():g;return N||(N=new e),j(q,H,y,w,N)}}return T?(N||(N=new e),a(v,g,y,w,j,N)):!1}return xN=b,xN}var gN,RA;function pS(){if(RA)return gN;RA=1;var e=vz(),t=Pf();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return gN=r,gN}var vN,BA;function bz(){if(BA)return vN;BA=1;var e=nL(),t=pS(),r=1,a=2;function s(i,o,l,c){var d=l.length,u=d,f=!c;if(i==null)return!u;for(i=Object(i);d--;){var p=l[d];if(f&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++d<u;){p=l[d];var m=p[0],b=i[m],v=p[1];if(f&&p[2]){if(b===void 0&&!(m in i))return!1}else{var g=new e;if(c)var y=c(b,v,m,i,o,g);if(!(y===void 0?t(v,b,r|a,c,g):y))return!1}}return!0}return vN=s,vN}var bN,UA;function mL(){if(UA)return bN;UA=1;var e=C0();function t(r){return r===r&&!e(r)}return bN=t,bN}var yN,qA;function yz(){if(qA)return yN;qA=1;var e=mL(),t=$b();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return yN=r,yN}var wN,$A;function pL(){if($A)return wN;$A=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return wN=e,wN}var NN,zA;function wz(){if(zA)return NN;zA=1;var e=bz(),t=yz(),r=pL();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return NN=a,NN}var jN,HA;function Nz(){if(HA)return jN;HA=1;function e(t,r){return t!=null&&r in Object(t)}return jN=e,jN}var kN,WA;function jz(){if(WA)return kN;WA=1;var e=DD(),t=fS(),r=ec(),a=hS(),s=mS(),i=Mb();function o(l,c,d){c=e(c,l);for(var u=-1,f=c.length,p=!1;++u<f;){var m=i(c[u]);if(!(p=l!=null&&d(l,m)))break;l=l[m]}return p||++u!=f?p:(f=l==null?0:l.length,!!f&&s(f)&&a(m,f)&&(r(l)||t(l)))}return kN=o,kN}var SN,VA;function kz(){if(VA)return SN;VA=1;var e=Nz(),t=jz();function r(a,s){return a!=null&&t(a,s,e)}return SN=r,SN}var _N,GA;function Sz(){if(GA)return _N;GA=1;var e=pS(),t=LD(),r=kz(),a=Qk(),s=mL(),i=pL(),o=Mb(),l=1,c=2;function d(u,f){return a(u)&&s(f)?i(o(u),f):function(p){var m=t(p,u);return m===void 0&&m===f?r(p,u):e(f,m,l|c)}}return _N=d,_N}var CN,KA;function ip(){if(KA)return CN;KA=1;function e(t){return t}return CN=e,CN}var AN,XA;function _z(){if(XA)return AN;XA=1;function e(t){return function(r){return r?.[t]}}return AN=e,AN}var EN,YA;function Cz(){if(YA)return EN;YA=1;var e=nS();function t(r){return function(a){return e(a,r)}}return EN=t,EN}var TN,QA;function Az(){if(QA)return TN;QA=1;var e=_z(),t=Cz(),r=Qk(),a=Mb();function s(i){return r(i)?e(a(i)):t(i)}return TN=s,TN}var ON,JA;function A0(){if(JA)return ON;JA=1;var e=wz(),t=Sz(),r=ip(),a=ec(),s=Az();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return ON=i,ON}var PN,ZA;function xL(){if(ZA)return PN;ZA=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return PN=e,PN}var IN,eE;function Ez(){if(eE)return IN;eE=1;function e(t){return t!==t}return IN=e,IN}var DN,tE;function Tz(){if(tE)return DN;tE=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return DN=e,DN}var LN,rE;function Oz(){if(rE)return LN;rE=1;var e=xL(),t=Ez(),r=Tz();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return LN=a,LN}var FN,nE;function Pz(){if(nE)return FN;nE=1;var e=Oz();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return FN=t,FN}var MN,aE;function Iz(){if(aE)return MN;aE=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return MN=e,MN}var RN,sE;function Dz(){if(sE)return RN;sE=1;function e(){}return RN=e,RN}var BN,iE;function Lz(){if(iE)return BN;iE=1;var e=hL(),t=Dz(),r=uS(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return BN=s,BN}var UN,oE;function Fz(){if(oE)return UN;oE=1;var e=aL(),t=Pz(),r=Iz(),a=iL(),s=Lz(),i=uS(),o=200;function l(c,d,u){var f=-1,p=t,m=c.length,b=!0,v=[],g=v;if(u)b=!1,p=r;else if(m>=o){var y=d?null:s(c);if(y)return i(y);b=!1,p=a,g=new e}else g=d?[]:v;e:for(;++f<m;){var w=c[f],j=d?d(w):w;if(w=u||w!==0?w:0,b&&j===j){for(var N=g.length;N--;)if(g[N]===j)continue e;d&&g.push(j),v.push(w)}else p(g,j,u)||(g!==v&&g.push(j),v.push(w))}return v}return UN=l,UN}var qN,lE;function Mz(){if(lE)return qN;lE=1;var e=A0(),t=Fz();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return qN=r,qN}var Rz=Mz();const cE=Pa(Rz);function gL(e,t,r){return t===!0?cE(e,r):On(t)?cE(e,t):e}function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}var Bz=["ref"];function dE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(r),!0).forEach(function(a){zb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Uz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uE(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bL(a.key),a)}}function qz(e,t,r){return t&&uE(e.prototype,t),r&&uE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $z(e,t,r){return t=v1(t),zz(e,vL()?Reflect.construct(t,r||[],v1(e).constructor):t.apply(e,r))}function zz(e,t){if(t&&(Pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hz(e)}function Hz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vL=function(){return!!e})()}function v1(e){return v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v1(e)}function Wz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c4(e,t)}function c4(e,t){return c4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},c4(e,t)}function zb(e,t,r){return t=bL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bL(e){var t=Vz(e,"string");return Pm(t)=="symbol"?t:t+""}function Vz(e,t){if(Pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Pm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gz(e,t){if(e==null)return{};var r=Kz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Kz(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Xz(e){return e.value}function Yz(e,t){if(ut.isValidElement(e))return ut.cloneElement(e,t);if(typeof e=="function")return ut.createElement(e,t);t.ref;var r=Gz(t,Bz);return ut.createElement(dS,r)}var fE=1,bm=(function(e){function t(){var r;Uz(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=$z(this,t,[].concat(s)),zb(r,"lastBoundingBox",{width:-1,height:-1}),r}return Wz(t,e),qz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>fE||Math.abs(s.height-this.lastBoundingBox.height)>fE)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?cf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,f,p;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((d||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();p={top:((u||0)-b.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return cf(cf({},f),p)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,f=cf(cf({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ut.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){a.wrapperNode=m}},Yz(i,cf(cf({},this.props),{},{payload:gL(u,d,Xz)})))}}],[{key:"getWithHeight",value:function(a,s){var i=cf(cf({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&ir(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(D.PureComponent);zb(bm,"displayName","Legend");zb(bm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $N,hE;function Qz(){if(hE)return $N;hE=1;var e=xg(),t=fS(),r=ec(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return $N=s,$N}var zN,mE;function yL(){if(mE)return zN;mE=1;var e=lL(),t=Qz();function r(a,s,i,o,l){var c=-1,d=a.length;for(i||(i=t),l||(l=[]);++c<d;){var u=a[c];s>0&&i(u)?s>1?r(u,s-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return zN=r,zN}var HN,pE;function Jz(){if(pE)return HN;pE=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var d=l[t?c:++i];if(a(o[d],d,o)===!1)break}return r}}return HN=e,HN}var WN,xE;function Zz(){if(xE)return WN;xE=1;var e=Jz(),t=e();return WN=t,WN}var VN,gE;function wL(){if(gE)return VN;gE=1;var e=Zz(),t=$b();function r(a,s){return a&&e(a,s,t)}return VN=r,VN}var GN,vE;function eH(){if(vE)return GN;vE=1;var e=vg();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,c=Object(s);(a?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return GN=t,GN}var KN,bE;function xS(){if(bE)return KN;bE=1;var e=wL(),t=eH(),r=t(e);return KN=r,KN}var XN,yE;function NL(){if(yE)return XN;yE=1;var e=xS(),t=vg();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,c,d){o[++i]=s(l,c,d)}),o}return XN=r,XN}var YN,wE;function tH(){if(wE)return YN;wE=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return YN=e,YN}var QN,NE;function rH(){if(NE)return QN;NE=1;var e=np();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=a!==void 0,d=a===null,u=a===a,f=e(a);if(!d&&!f&&!l&&r>a||l&&c&&u&&!d&&!f||i&&c&&u||!s&&u||!o)return 1;if(!i&&!l&&!f&&r<a||f&&s&&o&&!i&&!l||d&&s&&o||!c&&o||!u)return-1}return 0}return QN=t,QN}var JN,jE;function nH(){if(jE)return JN;jE=1;var e=rH();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,c=o.length,d=s.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var f=s[i];return u*(f=="desc"?-1:1)}}return r.index-a.index}return JN=t,JN}var ZN,kE;function aH(){if(kE)return ZN;kE=1;var e=rS(),t=nS(),r=A0(),a=NL(),s=tH(),i=dL(),o=nH(),l=ip(),c=ec();function d(u,f,p){f.length?f=e(f,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):f=[l];var m=-1;f=e(f,i(r));var b=a(u,function(v,g,y){var w=e(f,function(j){return j(v)});return{criteria:w,index:++m,value:v}});return s(b,function(v,g){return o(v,g,p)})}return ZN=d,ZN}var e5,SE;function sH(){if(SE)return e5;SE=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return e5=e,e5}var t5,_E;function iH(){if(_E)return t5;_E=1;var e=sH(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),d=Array(c);++l<c;)d[l]=o[s+l];l=-1;for(var u=Array(s+1);++l<s;)u[l]=o[l];return u[s]=i(d),e(a,this,u)}}return t5=r,t5}var r5,CE;function oH(){if(CE)return r5;CE=1;function e(t){return function(){return t}}return r5=e,r5}var n5,AE;function jL(){if(AE)return n5;AE=1;var e=Dh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return n5=t,n5}var a5,EE;function lH(){if(EE)return a5;EE=1;var e=oH(),t=jL(),r=ip(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return a5=a,a5}var s5,TE;function cH(){if(TE)return s5;TE=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return s5=a,s5}var i5,OE;function dH(){if(OE)return i5;OE=1;var e=lH(),t=cH(),r=t(e);return i5=r,i5}var o5,PE;function uH(){if(PE)return o5;PE=1;var e=ip(),t=iH(),r=dH();function a(s,i){return r(t(s,i,e),s+"")}return o5=a,o5}var l5,IE;function Hb(){if(IE)return l5;IE=1;var e=Zk(),t=vg(),r=hS(),a=C0();function s(i,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return l5=s,l5}var c5,DE;function fH(){if(DE)return c5;DE=1;var e=yL(),t=aH(),r=uH(),a=Hb(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return c5=s,c5}var hH=fH();const gS=Pa(hH);function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function d4(){return d4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d4.apply(this,arguments)}function mH(e,t){return vH(e)||gH(e,t)||xH(e,t)||pH()}function pH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xH(e,t){if(e){if(typeof e=="string")return LE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LE(e,t)}}function LE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function gH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function vH(e){if(Array.isArray(e))return e}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function d5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(a){bH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bH(e,t,r){return t=yH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yH(e){var t=wH(e,"string");return bx(t)=="symbol"?t:t+""}function wH(e,t){if(bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(bx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NH(e){return Array.isArray(e)&&qi(e[0])&&qi(e[1])?e.join(" ~ "):e}var jH=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,p=t.itemSorter,m=t.wrapperClassName,b=t.labelClassName,v=t.label,g=t.labelFormatter,y=t.accessibilityLayer,w=y===void 0?!1:y,j=function(){if(u&&u.length){var E={padding:0,margin:0},F=(p?gS(u,p):u).map(function(q,H){if(q.type==="none")return null;var Q=d5({display:"block",paddingTop:4,paddingBottom:4,color:q.color||"#000"},l),J=q.formatter||f||NH,re=q.value,X=q.name,ee=re,W=X;if(J&&ee!=null&&W!=null){var O=J(re,X,q,H,u);if(Array.isArray(O)){var z=mH(O,2);ee=z[0],W=z[1]}else ee=O}return ut.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:Q},qi(W)?ut.createElement("span",{className:"recharts-tooltip-item-name"},W):null,qi(W)?ut.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,ut.createElement("span",{className:"recharts-tooltip-item-value"},ee),ut.createElement("span",{className:"recharts-tooltip-item-unit"},q.unit||""))});return ut.createElement("ul",{className:"recharts-tooltip-item-list",style:E},F)}return null},N=d5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=d5({margin:0},d),A=!Hn(v),_=A?v:"",P=ca("recharts-default-tooltip",m),I=ca("recharts-tooltip-label",b);A&&g&&u!==void 0&&u!==null&&(_=g(v,u));var B=w?{role:"status","aria-live":"assertive"}:{};return ut.createElement("div",d4({className:P,style:N},B),ut.createElement("p",{className:I,style:S},ut.isValidElement(_)?_:"".concat(_)),j())};function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function cv(e,t,r){return t=kH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=SH(e,"string");return yx(t)=="symbol"?t:t+""}function SH(e,t){if(yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(yx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ap="recharts-tooltip-wrapper",_H={visibility:"hidden"};function CH(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return ca(Ap,cv(cv(cv(cv({},"".concat(Ap,"-right"),ir(r)&&t&&ir(t.x)&&r>=t.x),"".concat(Ap,"-left"),ir(r)&&t&&ir(t.x)&&r<t.x),"".concat(Ap,"-bottom"),ir(a)&&t&&ir(t.y)&&a>=t.y),"".concat(Ap,"-top"),ir(a)&&t&&ir(t.y)&&a<t.y))}function ME(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&ir(i[a]))return i[a];var u=r[a]-l-s,f=r[a]+s;if(t[a])return o[a]?u:f;if(o[a]){var p=u,m=c[a];return p<m?Math.max(f,c[a]):Math.max(u,c[a])}var b=f+l,v=c[a]+d;return b>v?Math.max(u,c[a]):Math.max(f,c[a])}function AH(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function EH(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=ME({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=ME({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=AH({translateX:u,translateY:f,useTranslate3d:l})):d=_H,{cssProperties:d,cssClasses:CH({translateX:u,translateY:f,coordinate:r})}}function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function BE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(a){f4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,SL(a.key),a)}}function PH(e,t,r){return t&&OH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IH(e,t,r){return t=b1(t),DH(e,kL()?Reflect.construct(t,r||[],b1(e).constructor):t.apply(e,r))}function DH(e,t){if(t&&(Im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LH(e)}function LH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kL=function(){return!!e})()}function b1(e){return b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b1(e)}function FH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u4(e,t)}function u4(e,t){return u4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},u4(e,t)}function f4(e,t,r){return t=SL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SL(e){var t=MH(e,"string");return Im(t)=="symbol"?t:t+""}function MH(e,t){if(Im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Im(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var UE=1,RH=(function(e){function t(){var r;TH(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=IH(this,t,[].concat(s)),f4(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),f4(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return FH(t,e),PH(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>UE||Math.abs(a.height-this.state.lastBoundingBox.height)>UE)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,f=s.hasPayload,p=s.isAnimationActive,m=s.offset,b=s.position,v=s.reverseDirection,g=s.useTranslate3d,y=s.viewBox,w=s.wrapperStyle,j=EH({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),N=j.cssClasses,S=j.cssProperties,A=BE(BE({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return ut.createElement("div",{tabIndex:-1,className:N,style:A,ref:function(P){a.wrapperNode=P}},d)}}])})(D.PureComponent),BH=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},op={isSsr:BH()};function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $E(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(a){vS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,CL(a.key),a)}}function $H(e,t,r){return t&&qH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zH(e,t,r){return t=y1(t),HH(e,_L()?Reflect.construct(t,r||[],y1(e).constructor):t.apply(e,r))}function HH(e,t){if(t&&(Dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WH(e)}function WH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_L=function(){return!!e})()}function y1(e){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y1(e)}function VH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h4(e,t)}function h4(e,t){return h4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},h4(e,t)}function vS(e,t,r){return t=CL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CL(e){var t=GH(e,"string");return Dm(t)=="symbol"?t:t+""}function GH(e,t){if(Dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function KH(e){return e.dataKey}function XH(e,t){return ut.isValidElement(e)?ut.cloneElement(e,t):typeof e=="function"?ut.createElement(e,t):ut.createElement(jH,t)}var Su=(function(e){function t(){return UH(this,t),zH(this,t,arguments)}return VH(t,e),$H(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,f=s.filterNull,p=s.isAnimationActive,m=s.offset,b=s.payload,v=s.payloadUniqBy,g=s.position,y=s.reverseDirection,w=s.useTranslate3d,j=s.viewBox,N=s.wrapperStyle,S=b??[];f&&S.length&&(S=gL(b.filter(function(_){return _.value!=null&&(_.hide!==!0||a.props.includeHidden)}),v,KH));var A=S.length>0;return ut.createElement(RH,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:u,hasPayload:A,offset:m,position:g,reverseDirection:y,useTranslate3d:w,viewBox:j,wrapperStyle:N},XH(d,$E($E({},this.props),{},{payload:S})))}}])})(D.PureComponent);vS(Su,"displayName","Tooltip");vS(Su,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!op.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var u5,zE;function YH(){if(zE)return u5;zE=1;var e=Bu(),t=function(){return e.Date.now()};return u5=t,u5}var f5,HE;function QH(){if(HE)return f5;HE=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return f5=t,f5}var h5,WE;function JH(){if(WE)return h5;WE=1;var e=QH(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return h5=r,h5}var m5,VE;function AL(){if(VE)return m5;VE=1;var e=JH(),t=C0(),r=np(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return a;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=i.test(d);return f||o.test(d)?l(d.slice(2),f?2:8):s.test(d)?a:+d}return m5=c,m5}var p5,GE;function ZH(){if(GE)return p5;GE=1;var e=C0(),t=YH(),r=AL(),a="Expected a function",s=Math.max,i=Math.min;function o(l,c,d){var u,f,p,m,b,v,g=0,y=!1,w=!1,j=!0;if(typeof l!="function")throw new TypeError(a);c=r(c)||0,e(d)&&(y=!!d.leading,w="maxWait"in d,p=w?s(r(d.maxWait)||0,c):p,j="trailing"in d?!!d.trailing:j);function N(F){var q=u,H=f;return u=f=void 0,g=F,m=l.apply(H,q),m}function S(F){return g=F,b=setTimeout(P,c),y?N(F):m}function A(F){var q=F-v,H=F-g,Q=c-q;return w?i(Q,p-H):Q}function _(F){var q=F-v,H=F-g;return v===void 0||q>=c||q<0||w&&H>=p}function P(){var F=t();if(_(F))return I(F);b=setTimeout(P,A(F))}function I(F){return b=void 0,j&&u?N(F):(u=f=void 0,m)}function B(){b!==void 0&&clearTimeout(b),g=0,u=v=f=b=void 0}function T(){return b===void 0?m:I(t())}function E(){var F=t(),q=_(F);if(u=arguments,f=this,v=F,q){if(b===void 0)return S(v);if(w)return clearTimeout(b),b=setTimeout(P,c),N(v)}return b===void 0&&(b=setTimeout(P,c)),m}return E.cancel=B,E.flush=T,E}return p5=o,p5}var x5,KE;function eW(){if(KE)return x5;KE=1;var e=ZH(),t=C0(),r="Expected a function";function a(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return x5=a,x5}var tW=eW();const EL=Pa(tW);function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function XE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(r),!0).forEach(function(a){rW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rW(e,t,r){return t=nW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nW(e){var t=aW(e,"string");return wx(t)=="symbol"?t:t+""}function aW(e,t){if(wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(wx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sW(e,t){return cW(e)||lW(e,t)||oW(e,t)||iW()}function iW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oW(e,t){if(e){if(typeof e=="string")return YE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YE(e,t)}}function YE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function lW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function cW(e){if(Array.isArray(e))return e}var dW=D.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,p=e.maxHeight,m=e.children,b=e.debounce,v=b===void 0?0:b,g=e.id,y=e.className,w=e.onResize,j=e.style,N=j===void 0?{}:j,S=D.useRef(null),A=D.useRef();A.current=w,D.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var _=D.useState({containerWidth:s.width,containerHeight:s.height}),P=sW(_,2),I=P[0],B=P[1],T=D.useCallback(function(F,q){B(function(H){var Q=Math.round(F),J=Math.round(q);return H.containerWidth===Q&&H.containerHeight===J?H:{containerWidth:Q,containerHeight:J}})},[]);D.useEffect(function(){var F=function(X){var ee,W=X[0].contentRect,O=W.width,z=W.height;T(O,z),(ee=A.current)===null||ee===void 0||ee.call(A,O,z)};v>0&&(F=EL(F,v,{trailing:!0,leading:!1}));var q=new ResizeObserver(F),H=S.current.getBoundingClientRect(),Q=H.width,J=H.height;return T(Q,J),q.observe(S.current),function(){q.disconnect()}},[T,v]);var E=D.useMemo(function(){var F=I.containerWidth,q=I.containerHeight;if(F<0||q<0)return null;wf(nh(o)||nh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),wf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var H=nh(o)?F:o,Q=nh(c)?q:c;r&&r>0&&(H?Q=H/r:Q&&(H=Q*r),p&&Q>p&&(Q=p)),wf(H>0||Q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,Q,o,c,u,f,r);var J=!Array.isArray(m)&&yf(m.type).endsWith("Chart");return ut.Children.map(m,function(re){return ut.isValidElement(re)?D.cloneElement(re,dv({width:H,height:Q},J?{style:dv({height:"100%",width:"100%",maxHeight:Q,maxWidth:H},re.props.style)}:{})):re})},[r,m,c,p,f,u,I,o]);return ut.createElement("div",{id:g?"".concat(g):void 0,className:ca("recharts-responsive-container",y),style:dv(dv({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:p}),ref:S},E)}),TL=function(t){return null};TL.displayName="Cell";function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function QE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function m4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(r),!0).forEach(function(a){uW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uW(e,t,r){return t=fW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fW(e){var t=hW(e,"string");return Nx(t)=="symbol"?t:t+""}function hW(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Nx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tm={widthCache:{},cacheCount:0},mW=2e3,pW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},JE="recharts_measurement_span";function xW(e){var t=m4({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var tx=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||op.isSsr)return{width:0,height:0};var a=xW(r),s=JSON.stringify({text:t,copyStyle:a});if(tm.widthCache[s])return tm.widthCache[s];try{var i=document.getElementById(JE);i||(i=document.createElement("span"),i.setAttribute("id",JE),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=m4(m4({},pW),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return tm.widthCache[s]=c,++tm.cacheCount>mW&&(tm.cacheCount=0,tm.widthCache={}),c}catch{return{width:0,height:0}}},gW=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function w1(e,t){return wW(e)||yW(e,t)||bW(e,t)||vW()}function vW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bW(e,t){if(e){if(typeof e=="string")return ZE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZE(e,t)}}function ZE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function yW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function wW(e){if(Array.isArray(e))return e}function NW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eT(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,kW(a.key),a)}}function jW(e,t,r){return t&&eT(e.prototype,t),r&&eT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kW(e){var t=SW(e,"string");return jx(t)=="symbol"?t:t+""}function SW(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(jx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_W=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,CW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},AW=Object.keys(OL),hm="NaN";function EW(e,t){return e*OL[t]}var uv=(function(){function e(t,r){NW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!_W.test(r)&&(this.num=NaN,this.unit=""),AW.includes(r)&&(this.num=EW(t,r),this.unit="px")}return jW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=CW.exec(r))!==null&&a!==void 0?a:[],i=w1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function PL(e){if(e.includes(hm))return hm;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=tT.exec(t))!==null&&r!==void 0?r:[],s=w1(a,4),i=s[1],o=s[2],l=s[3],c=uv.parse(i??""),d=uv.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return hm;t=t.replace(tT,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=rT.exec(t))!==null&&f!==void 0?f:[],m=w1(p,4),b=m[1],v=m[2],g=m[3],y=uv.parse(b??""),w=uv.parse(g??""),j=v==="+"?y.add(w):y.subtract(w);if(j.isNaN())return hm;t=t.replace(rT,j.toString())}return t}var nT=/\(([^()]*)\)/;function TW(e){for(var t=e;t.includes("(");){var r=nT.exec(t),a=w1(r,2),s=a[1];t=t.replace(nT,PL(s))}return t}function OW(e){var t=e.replace(/\s+/g,"");return t=TW(t),t=PL(t),t}function PW(e){try{return OW(e)}catch{return hm}}function g5(e){var t=PW(e.slice(5,-1));return t===hm?"":t}var IW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],DW=["dx","dy","angle","className","breakAll"];function p4(){return p4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p4.apply(this,arguments)}function aT(e,t){if(e==null)return{};var r=LW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function sT(e,t){return BW(e)||RW(e,t)||MW(e,t)||FW()}function FW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MW(e,t){if(e){if(typeof e=="string")return iT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iT(e,t)}}function iT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function RW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function BW(e){if(Array.isArray(e))return e}var IL=/[ \f\n\r\t\v\u2028\u2029]+/,DL=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];Hn(r)||(a?i=r.toString().split(""):i=r.toString().split(IL));var o=i.map(function(c){return{word:c,width:tx(c,s).width}}),l=a?0:tx("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},UW=function(t,r,a,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=ir(o),f=l,p=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(Q,J){var re=J.word,X=J.width,ee=Q[Q.length-1];if(ee&&(s==null||i||ee.width+X+a<Number(s)))ee.words.push(re),ee.width+=X+a;else{var W={words:[re],width:X};Q.push(W)}return Q},[])},m=p(r),b=function(H){return H.reduce(function(Q,J){return Q.width>J.width?Q:J})};if(!u)return m;for(var v="",g=function(H){var Q=f.slice(0,H),J=DL({breakAll:d,style:c,children:Q+v}).wordsWithComputedWidth,re=p(J),X=re.length>o||b(re).width>Number(s);return[X,re]},y=0,w=f.length-1,j=0,N;y<=w&&j<=f.length-1;){var S=Math.floor((y+w)/2),A=S-1,_=g(A),P=sT(_,2),I=P[0],B=P[1],T=g(S),E=sT(T,1),F=E[0];if(!I&&!F&&(y=S+1),I&&F&&(w=S-1),!I&&F){N=B;break}j++}return N||m},oT=function(t){var r=Hn(t)?[]:t.toString().split(IL);return[{words:r}]},qW=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!op.isSsr){var c,d,u=DL({breakAll:o,children:s,style:i});if(u){var f=u.wordsWithComputedWidth,p=u.spaceWidth;c=f,d=p}else return oT(s);return UW({breakAll:o,children:s,maxLines:l,style:i},c,d,r,a)}return oT(s)},lT="#808080",N1=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,p=t.textAnchor,m=p===void 0?"start":p,b=t.verticalAnchor,v=b===void 0?"end":b,g=t.fill,y=g===void 0?lT:g,w=aT(t,IW),j=D.useMemo(function(){return qW({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),N=w.dx,S=w.dy,A=w.angle,_=w.className,P=w.breakAll,I=aT(w,DW);if(!qi(a)||!qi(i))return null;var B=a+(ir(N)?N:0),T=i+(ir(S)?S:0),E;switch(v){case"start":E=g5("calc(".concat(d,")"));break;case"middle":E=g5("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:E=g5("calc(".concat(j.length-1," * -").concat(l,")"));break}var F=[];if(f){var q=j[0].width,H=w.width;F.push("scale(".concat((ir(H)?H/q:1)/q,")"))}return A&&F.push("rotate(".concat(A,", ").concat(B,", ").concat(T,")")),F.length&&(I.transform=F.join(" ")),ut.createElement("text",p4({},zn(I,!0),{x:B,y:T,className:ca("recharts-text",_),textAnchor:m,fill:y.includes("url")?lT:y}),j.map(function(Q,J){var re=Q.words.join(P?"":" ");return ut.createElement("tspan",{x:B,dy:J===0?E:l,key:"".concat(re,"-").concat(J)},re)}))};function x0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $W(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bS(e){let t,r,a;e.length!==2?(t=x0,r=(l,c)=>x0(e(l),c),a=(l,c)=>e(l)-c):(t=e===x0||e===$W?e:zW,r=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=s(l,c,d,u-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function zW(){return 0}function LL(e){return e===null?NaN:+e}function*HW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const WW=bS(x0),bg=WW.right;bS(LL).center;class cT extends Map{constructor(t,r=KW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(dT(this,t))}has(t){return super.has(dT(this,t))}set(t,r){return super.set(VW(this,t),r)}delete(t){return super.delete(GW(this,t))}}function dT({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function VW({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function GW({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function KW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XW(e=x0){if(e===x0)return FL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function FL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YW=Math.sqrt(50),QW=Math.sqrt(10),JW=Math.sqrt(2);function j1(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=YW?10:i>=QW?5:i>=JW?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?j1(e,t,r*2):[l,c,d]}function x4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?j1(t,e,r):j1(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function g4(e,t,r){return t=+t,e=+e,r=+r,j1(e,t,r)[2]}function v4(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?g4(t,e,r):g4(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function uT(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function fT(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function ML(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?FL:XW(s);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*f/c+p)),b=Math.min(a,Math.floor(t+(c-d)*f/c+p));ML(e,t,m,b,s)}const i=e[t];let o=r,l=a;for(Ep(e,r,t),s(e[a],i)>0&&Ep(e,r,a);o<l;){for(Ep(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Ep(e,r,l):(++l,Ep(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Ep(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function ZW(e,t,r){if(e=Float64Array.from(HW(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return fT(e);if(t>=1)return uT(e);var a,s=(a-1)*t,i=Math.floor(s),o=uT(ML(e,i).subarray(0,i+1)),l=fT(e.subarray(i+1));return o+(l-o)*(s-i)}}function eV(e,t,r=LL){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function tV(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function fd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function If(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const b4=Symbol("implicit");function yS(){var e=new cT,t=[],r=[],a=b4;function s(i){let o=e.get(i);if(o===void 0){if(a!==b4)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new cT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return yS(t,r).unknown(a)},fd.apply(s,arguments),s}function kx(){var e=yS().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,m=s<a,b=m?s:a,v=m?a:s;i=(v-b)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),b+=(v-b-i*(p-c))*u,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var g=tV(p).map(function(y){return b+i*y});return r(m?g.reverse():g)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return kx(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},fd.apply(f(),arguments)}function RL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return RL(t())},e}function rx(){return RL(kx.apply(null,arguments).paddingInner(1))}function wS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function BL(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function yg(){}var Sx=.7,k1=1/Sx,ym="\\s*([+-]?\\d+)\\s*",_x="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rV=/^#([0-9a-f]{3,8})$/,nV=new RegExp(`^rgb\\(${ym},${ym},${ym}\\)$`),aV=new RegExp(`^rgb\\(${Iu},${Iu},${Iu}\\)$`),sV=new RegExp(`^rgba\\(${ym},${ym},${ym},${_x}\\)$`),iV=new RegExp(`^rgba\\(${Iu},${Iu},${Iu},${_x}\\)$`),oV=new RegExp(`^hsl\\(${_x},${Iu},${Iu}\\)$`),lV=new RegExp(`^hsla\\(${_x},${Iu},${Iu},${_x}\\)$`),hT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wS(yg,Cx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mT,formatHex:mT,formatHex8:cV,formatHsl:dV,formatRgb:pT,toString:pT});function mT(){return this.rgb().formatHex()}function cV(){return this.rgb().formatHex8()}function dV(){return UL(this).formatHsl()}function pT(){return this.rgb().formatRgb()}function Cx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=rV.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xT(t):r===3?new Yl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nV.exec(e))?new Yl(t[1],t[2],t[3],1):(t=aV.exec(e))?new Yl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sV.exec(e))?fv(t[1],t[2],t[3],t[4]):(t=iV.exec(e))?fv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oV.exec(e))?bT(t[1],t[2]/100,t[3]/100,1):(t=lV.exec(e))?bT(t[1],t[2]/100,t[3]/100,t[4]):hT.hasOwnProperty(e)?xT(hT[e]):e==="transparent"?new Yl(NaN,NaN,NaN,0):null}function xT(e){return new Yl(e>>16&255,e>>8&255,e&255,1)}function fv(e,t,r,a){return a<=0&&(e=t=r=NaN),new Yl(e,t,r,a)}function uV(e){return e instanceof yg||(e=Cx(e)),e?(e=e.rgb(),new Yl(e.r,e.g,e.b,e.opacity)):new Yl}function y4(e,t,r,a){return arguments.length===1?uV(e):new Yl(e,t,r,a??1)}function Yl(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}wS(Yl,y4,BL(yg,{brighter(e){return e=e==null?k1:Math.pow(k1,e),new Yl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sx:Math.pow(Sx,e),new Yl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yl(fh(this.r),fh(this.g),fh(this.b),S1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gT,formatHex:gT,formatHex8:fV,formatRgb:vT,toString:vT}));function gT(){return`#${ah(this.r)}${ah(this.g)}${ah(this.b)}`}function fV(){return`#${ah(this.r)}${ah(this.g)}${ah(this.b)}${ah((isNaN(this.opacity)?1:this.opacity)*255)}`}function vT(){const e=S1(this.opacity);return`${e===1?"rgb(":"rgba("}${fh(this.r)}, ${fh(this.g)}, ${fh(this.b)}${e===1?")":`, ${e})`}`}function S1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ah(e){return e=fh(e),(e<16?"0":"")+e.toString(16)}function bT(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hd(e,t,r,a)}function UL(e){if(e instanceof Hd)return new Hd(e.h,e.s,e.l,e.opacity);if(e instanceof yg||(e=Cx(e)),!e)return new Hd;if(e instanceof Hd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Hd(o,l,c,e.opacity)}function hV(e,t,r,a){return arguments.length===1?UL(e):new Hd(e,t,r,a??1)}function Hd(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}wS(Hd,hV,BL(yg,{brighter(e){return e=e==null?k1:Math.pow(k1,e),new Hd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sx:Math.pow(Sx,e),new Hd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Yl(v5(e>=240?e-240:e+120,s,a),v5(e,s,a),v5(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Hd(yT(this.h),hv(this.s),hv(this.l),S1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=S1(this.opacity);return`${e===1?"hsl(":"hsla("}${yT(this.h)}, ${hv(this.s)*100}%, ${hv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yT(e){return e=(e||0)%360,e<0?e+360:e}function hv(e){return Math.max(0,Math.min(1,e||0))}function v5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const NS=e=>()=>e;function mV(e,t){return function(r){return e+r*t}}function pV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function xV(e){return(e=+e)==1?qL:function(t,r){return r-t?pV(t,r,e):NS(isNaN(t)?r:t)}}function qL(e,t){var r=t-e;return r?mV(e,r):NS(isNaN(e)?t:e)}const wT=(function e(t){var r=xV(t);function a(s,i){var o=r((s=y4(s)).r,(i=y4(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=qL(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a})(1);function gV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function vV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bV(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=lp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function yV(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function _1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function wV(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=lp(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var w4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b5=new RegExp(w4.source,"g");function NV(e){return function(){return e}}function jV(e){return function(t){return e(t)+""}}function kV(e,t){var r=w4.lastIndex=b5.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=w4.exec(e))&&(s=b5.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:_1(a,s)})),r=b5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?jV(c[0].x):NV(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function lp(e,t){var r=typeof t,a;return t==null||r==="boolean"?NS(t):(r==="number"?_1:r==="string"?(a=Cx(t))?(t=a,wT):kV:t instanceof Cx?wT:t instanceof Date?yV:vV(t)?gV:Array.isArray(t)?bV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wV:_1)(e,t)}function jS(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function SV(e,t){t===void 0&&(t=e,e=lp);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function _V(e){return function(){return e}}function C1(e){return+e}var NT=[0,1];function _l(e){return e}function N4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:_V(isNaN(t)?NaN:.5)}function CV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function AV(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=N4(s,a),i=r(o,i)):(a=N4(a,s),i=r(i,o)),function(l){return i(a(l))}}function EV(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=N4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=bg(e,l,1,a)-1;return i[c](s[c](l))}}function wg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wb(){var e=NT,t=NT,r=lp,a,s,i,o=_l,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==_l&&(o=CV(e[0],e[p-1])),l=p>2?EV:AV,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(a),t,r)))(a(o(p)))}return f.invert=function(p){return o(s((d||(d=l(t,e.map(a),_1)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,C1),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=jS,u()},f.clamp=function(p){return arguments.length?(o=p?!0:_l,u()):o!==_l},f.interpolate=function(p){return arguments.length?(r=p,u()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,m){return a=p,s=m,u()}}function kS(){return Wb()(_l,_l)}function TV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function A1(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Lm(e){return e=A1(Math.abs(e)),e?e[1]:NaN}function OV(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function PV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var IV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ax(e){if(!(t=IV.exec(e)))throw new Error("invalid format: "+e);var t;return new SS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ax.prototype=SS.prototype;function SS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DV(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var E1;function LV(e,t){var r=A1(e,t);if(!r)return E1=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(E1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+A1(e,Math.max(0,t+i-1))[0]}function jT(e,t){var r=A1(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const kT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jT(e*100,t),r:jT,s:LV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ST(e){return e}var _T=Array.prototype.map,CT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FV(e){var t=e.grouping===void 0||e.thousands===void 0?ST:OV(_T.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ST:PV(_T.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f,p){f=Ax(f);var m=f.fill,b=f.align,v=f.sign,g=f.symbol,y=f.zero,w=f.width,j=f.comma,N=f.precision,S=f.trim,A=f.type;A==="n"?(j=!0,A="g"):kT[A]||(N===void 0&&(N=12),S=!0,A="g"),(y||m==="0"&&b==="=")&&(y=!0,m="0",b="=");var _=(p&&p.prefix!==void 0?p.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():""),P=(g==="$"?a:/[%p]/.test(A)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),I=kT[A],B=/[defgprs%]/.test(A);N=N===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(E){var F=_,q=P,H,Q,J;if(A==="c")q=I(E)+q,E="";else{E=+E;var re=E<0||1/E<0;if(E=isNaN(E)?c:I(Math.abs(E),N),S&&(E=DV(E)),re&&+E==0&&v!=="+"&&(re=!1),F=(re?v==="("?v:l:v==="-"||v==="("?"":v)+F,q=(A==="s"&&!isNaN(E)&&E1!==void 0?CT[8+E1/3]:"")+q+(re&&v==="("?")":""),B){for(H=-1,Q=E.length;++H<Q;)if(J=E.charCodeAt(H),48>J||J>57){q=(J===46?s+E.slice(H+1):E.slice(H))+q,E=E.slice(0,H);break}}}j&&!y&&(E=t(E,1/0));var X=F.length+E.length+q.length,ee=X<w?new Array(w-X+1).join(m):"";switch(j&&y&&(E=t(ee+E,ee.length?w-q.length:1/0),ee=""),b){case"<":E=F+E+q+ee;break;case"=":E=F+ee+E+q;break;case"^":E=ee.slice(0,X=ee.length>>1)+F+E+q+ee.slice(X);break;default:E=ee+F+E+q;break}return i(E)}return T.toString=function(){return f+""},T}function u(f,p){var m=Math.max(-8,Math.min(8,Math.floor(Lm(p)/3)))*3,b=Math.pow(10,-m),v=d((f=Ax(f),f.type="f",f),{suffix:CT[8+m/3]});return function(g){return v(b*g)}}return{format:d,formatPrefix:u}}var mv,_S,$L;MV({thousands:",",grouping:[3],currency:["$",""]});function MV(e){return mv=FV(e),_S=mv.format,$L=mv.formatPrefix,mv}function RV(e){return Math.max(0,-Lm(Math.abs(e)))}function BV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lm(t)/3)))*3-Lm(Math.abs(e)))}function UV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lm(t)-Lm(e))+1}function zL(e,t,r,a){var s=v4(e,t,r),i;switch(a=Ax(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=BV(s,o))&&(a.precision=i),$L(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=UV(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=RV(s))&&(a.precision=i-(a.type==="%")*2);break}}return _S(a)}function E0(e){var t=e.domain;return e.ticks=function(r){var a=t();return x4(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return zL(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=g4(o,l,r),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function T1(){var e=kS();return e.copy=function(){return wg(e,T1())},fd.apply(e,arguments),E0(e)}function HL(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,C1),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return HL(e).unknown(t)},e=arguments.length?Array.from(e,C1):[0,1],E0(r)}function WL(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function AT(e){return Math.log(e)}function ET(e){return Math.exp(e)}function qV(e){return-Math.log(-e)}function $V(e){return-Math.exp(-e)}function zV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HV(e){return e===10?zV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function WV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function TT(e){return(t,r)=>-e(-t,r)}function CS(e){const t=e(AT,ET),r=t.domain;let a=10,s,i;function o(){return s=WV(a),i=HV(a),r()[0]<0?(s=TT(s),i=TT(i),e(qV,$V)):e(AT,ET),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=s(d),m=s(u),b,v;const g=l==null?10:+l;let y=[];if(!(a%1)&&m-p<g){if(p=Math.floor(p),m=Math.ceil(m),d>0){for(;p<=m;++p)for(b=1;b<a;++b)if(v=p<0?b/i(-p):b*i(p),!(v<d)){if(v>u)break;y.push(v)}}else for(;p<=m;++p)for(b=a-1;b>=1;--b)if(v=p>0?b/i(-p):b*i(p),!(v<d)){if(v>u)break;y.push(v)}y.length*2<g&&(y=x4(d,u,g))}else y=x4(p,m,Math.min(m-p,g)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Ax(c)).precision==null&&(c.trim=!0),c=_S(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let f=u/i(Math.round(s(u)));return f*a<a-.5&&(f*=a),f<=d?c(u):""}},t.nice=()=>r(WL(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function VL(){const e=CS(Wb()).domain([1,10]);return e.copy=()=>wg(e,VL()).base(e.base()),fd.apply(e,arguments),e}function OT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function AS(e){var t=1,r=e(OT(t),PT(t));return r.constant=function(a){return arguments.length?e(OT(t=+a),PT(t)):t},E0(r)}function GL(){var e=AS(Wb());return e.copy=function(){return wg(e,GL()).constant(e.constant())},fd.apply(e,arguments)}function IT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function VV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function GV(e){return e<0?-e*e:e*e}function ES(e){var t=e(_l,_l),r=1;function a(){return r===1?e(_l,_l):r===.5?e(VV,GV):e(IT(r),IT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},E0(t)}function TS(){var e=ES(Wb());return e.copy=function(){return wg(e,TS()).exponent(e.exponent())},fd.apply(e,arguments),e}function KV(){return TS.apply(null,arguments).exponent(.5)}function DT(e){return Math.sign(e)*e*e}function XV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function KL(){var e=kS(),t=[0,1],r=!1,a;function s(i){var o=XV(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(DT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,C1)).map(DT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return KL(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},fd.apply(s,arguments),E0(s)}function XL(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=eV(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[bg(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(x0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return XL().domain(e).range(t).unknown(a)},fd.apply(i,arguments)}function YL(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[bg(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return YL().domain([e,t]).range(s).unknown(i)},fd.apply(E0(o),arguments)}function QL(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[bg(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return QL().domain(e).range(t).unknown(r)},fd.apply(s,arguments)}const y5=new Date,w5=new Date;function zi(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>zi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(y5.setTime(+i),w5.setTime(+o),e(y5),e(w5),Math.floor(r(y5,w5))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const O1=zi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);O1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):O1);O1.range;const ff=1e3,nd=ff*60,hf=nd*60,_f=hf*24,OS=_f*7,LT=_f*30,N5=_f*365,sh=zi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ff)},(e,t)=>(t-e)/ff,e=>e.getUTCSeconds());sh.range;const PS=zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ff)},(e,t)=>{e.setTime(+e+t*nd)},(e,t)=>(t-e)/nd,e=>e.getMinutes());PS.range;const IS=zi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*nd)},(e,t)=>(t-e)/nd,e=>e.getUTCMinutes());IS.range;const DS=zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ff-e.getMinutes()*nd)},(e,t)=>{e.setTime(+e+t*hf)},(e,t)=>(t-e)/hf,e=>e.getHours());DS.range;const LS=zi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hf)},(e,t)=>(t-e)/hf,e=>e.getUTCHours());LS.range;const Ng=zi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nd)/_f,e=>e.getDate()-1);Ng.range;const Vb=zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_f,e=>e.getUTCDate()-1);Vb.range;const JL=zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_f,e=>Math.floor(e/_f));JL.range;function Lh(e){return zi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*nd)/OS)}const Gb=Lh(0),P1=Lh(1),YV=Lh(2),QV=Lh(3),Fm=Lh(4),JV=Lh(5),ZV=Lh(6);Gb.range;P1.range;YV.range;QV.range;Fm.range;JV.range;ZV.range;function Fh(e){return zi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/OS)}const Kb=Fh(0),I1=Fh(1),eG=Fh(2),tG=Fh(3),Mm=Fh(4),rG=Fh(5),nG=Fh(6);Kb.range;I1.range;eG.range;tG.range;Mm.range;rG.range;nG.range;const FS=zi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());FS.range;const MS=zi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());MS.range;const Cf=zi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Cf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Cf.range;const Af=zi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Af.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Af.range;function ZL(e,t,r,a,s,i){const o=[[sh,1,ff],[sh,5,5*ff],[sh,15,15*ff],[sh,30,30*ff],[i,1,nd],[i,5,5*nd],[i,15,15*nd],[i,30,30*nd],[s,1,hf],[s,3,3*hf],[s,6,6*hf],[s,12,12*hf],[a,1,_f],[a,2,2*_f],[r,1,OS],[t,1,LT],[t,3,3*LT],[e,1,N5]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const m=f&&typeof f.range=="function"?f:c(d,u,f),b=m?m.range(d,+u+1):[];return p?b.reverse():b}function c(d,u,f){const p=Math.abs(u-d)/f,m=bS(([,,g])=>g).right(o,p);if(m===o.length)return e.every(v4(d/N5,u/N5,f));if(m===0)return O1.every(Math.max(v4(d,u,f),1));const[b,v]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return b.every(v)}return[l,c]}const[aG,sG]=ZL(Af,MS,Kb,JL,LS,IS),[iG,oG]=ZL(Cf,FS,Gb,Ng,DS,PS);function j5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function k5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Tp(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function lG(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Op(s),u=Pp(s),f=Op(i),p=Pp(i),m=Op(o),b=Pp(o),v=Op(l),g=Pp(l),y=Op(c),w=Pp(c),j={a:J,A:re,b:X,B:ee,c:null,d:qT,e:qT,f:OG,g:qG,G:zG,H:AG,I:EG,j:TG,L:eF,m:PG,M:IG,p:W,q:O,Q:HT,s:WT,S:DG,u:LG,U:FG,V:MG,w:RG,W:BG,x:null,X:null,y:UG,Y:$G,Z:HG,"%":zT},N={a:z,A:V,b:U,B:K,c:null,d:$T,e:$T,f:KG,g:aK,G:iK,H:WG,I:VG,j:GG,L:rF,m:XG,M:YG,p:se,q:xe,Q:HT,s:WT,S:QG,u:JG,U:ZG,V:eK,w:tK,W:rK,x:null,X:null,y:nK,Y:sK,Z:oK,"%":zT},S={a:B,A:T,b:E,B:F,c:q,d:BT,e:BT,f:kG,g:RT,G:MT,H:UT,I:UT,j:yG,L:jG,m:bG,M:wG,p:I,q:vG,Q:_G,s:CG,S:NG,u:hG,U:mG,V:pG,w:fG,W:xG,x:H,X:Q,y:RT,Y:MT,Z:gG,"%":SG};j.x=A(r,j),j.X=A(a,j),j.c=A(t,j),N.x=A(r,N),N.X=A(a,N),N.c=A(t,N);function A(ie,ue){return function(Be){var me=[],$e=-1,Oe=0,le=ie.length,te,Te,we;for(Be instanceof Date||(Be=new Date(+Be));++$e<le;)ie.charCodeAt($e)===37&&(me.push(ie.slice(Oe,$e)),(Te=FT[te=ie.charAt(++$e)])!=null?te=ie.charAt(++$e):Te=te==="e"?" ":"0",(we=ue[te])&&(te=we(Be,Te)),me.push(te),Oe=$e+1);return me.push(ie.slice(Oe,$e)),me.join("")}}function _(ie,ue){return function(Be){var me=Tp(1900,void 0,1),$e=P(me,ie,Be+="",0),Oe,le;if($e!=Be.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(ue&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Oe=k5(Tp(me.y,0,1)),le=Oe.getUTCDay(),Oe=le>4||le===0?I1.ceil(Oe):I1(Oe),Oe=Vb.offset(Oe,(me.V-1)*7),me.y=Oe.getUTCFullYear(),me.m=Oe.getUTCMonth(),me.d=Oe.getUTCDate()+(me.w+6)%7):(Oe=j5(Tp(me.y,0,1)),le=Oe.getDay(),Oe=le>4||le===0?P1.ceil(Oe):P1(Oe),Oe=Ng.offset(Oe,(me.V-1)*7),me.y=Oe.getFullYear(),me.m=Oe.getMonth(),me.d=Oe.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),le="Z"in me?k5(Tp(me.y,0,1)).getUTCDay():j5(Tp(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(le+5)%7:me.w+me.U*7-(le+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,k5(me)):j5(me)}}function P(ie,ue,Be,me){for(var $e=0,Oe=ue.length,le=Be.length,te,Te;$e<Oe;){if(me>=le)return-1;if(te=ue.charCodeAt($e++),te===37){if(te=ue.charAt($e++),Te=S[te in FT?ue.charAt($e++):te],!Te||(me=Te(ie,Be,me))<0)return-1}else if(te!=Be.charCodeAt(me++))return-1}return me}function I(ie,ue,Be){var me=d.exec(ue.slice(Be));return me?(ie.p=u.get(me[0].toLowerCase()),Be+me[0].length):-1}function B(ie,ue,Be){var me=m.exec(ue.slice(Be));return me?(ie.w=b.get(me[0].toLowerCase()),Be+me[0].length):-1}function T(ie,ue,Be){var me=f.exec(ue.slice(Be));return me?(ie.w=p.get(me[0].toLowerCase()),Be+me[0].length):-1}function E(ie,ue,Be){var me=y.exec(ue.slice(Be));return me?(ie.m=w.get(me[0].toLowerCase()),Be+me[0].length):-1}function F(ie,ue,Be){var me=v.exec(ue.slice(Be));return me?(ie.m=g.get(me[0].toLowerCase()),Be+me[0].length):-1}function q(ie,ue,Be){return P(ie,t,ue,Be)}function H(ie,ue,Be){return P(ie,r,ue,Be)}function Q(ie,ue,Be){return P(ie,a,ue,Be)}function J(ie){return o[ie.getDay()]}function re(ie){return i[ie.getDay()]}function X(ie){return c[ie.getMonth()]}function ee(ie){return l[ie.getMonth()]}function W(ie){return s[+(ie.getHours()>=12)]}function O(ie){return 1+~~(ie.getMonth()/3)}function z(ie){return o[ie.getUTCDay()]}function V(ie){return i[ie.getUTCDay()]}function U(ie){return c[ie.getUTCMonth()]}function K(ie){return l[ie.getUTCMonth()]}function se(ie){return s[+(ie.getUTCHours()>=12)]}function xe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ue=A(ie+="",j);return ue.toString=function(){return ie},ue},parse:function(ie){var ue=_(ie+="",!1);return ue.toString=function(){return ie},ue},utcFormat:function(ie){var ue=A(ie+="",N);return ue.toString=function(){return ie},ue},utcParse:function(ie){var ue=_(ie+="",!0);return ue.toString=function(){return ie},ue}}}var FT={"-":"",_:" ",0:"0"},fo=/^\s*\d+/,cG=/^%/,dG=/[\\^$*+?|[\]().{}]/g;function pa(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function uG(e){return e.replace(dG,"\\$&")}function Op(e){return new RegExp("^(?:"+e.map(uG).join("|")+")","i")}function Pp(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function fG(e,t,r){var a=fo.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function hG(e,t,r){var a=fo.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function mG(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function pG(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function xG(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function MT(e,t,r){var a=fo.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function RT(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function gG(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function vG(e,t,r){var a=fo.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function bG(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function BT(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function yG(e,t,r){var a=fo.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function UT(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function wG(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function NG(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function jG(e,t,r){var a=fo.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function kG(e,t,r){var a=fo.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function SG(e,t,r){var a=cG.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function _G(e,t,r){var a=fo.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function CG(e,t,r){var a=fo.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function qT(e,t){return pa(e.getDate(),t,2)}function AG(e,t){return pa(e.getHours(),t,2)}function EG(e,t){return pa(e.getHours()%12||12,t,2)}function TG(e,t){return pa(1+Ng.count(Cf(e),e),t,3)}function eF(e,t){return pa(e.getMilliseconds(),t,3)}function OG(e,t){return eF(e,t)+"000"}function PG(e,t){return pa(e.getMonth()+1,t,2)}function IG(e,t){return pa(e.getMinutes(),t,2)}function DG(e,t){return pa(e.getSeconds(),t,2)}function LG(e){var t=e.getDay();return t===0?7:t}function FG(e,t){return pa(Gb.count(Cf(e)-1,e),t,2)}function tF(e){var t=e.getDay();return t>=4||t===0?Fm(e):Fm.ceil(e)}function MG(e,t){return e=tF(e),pa(Fm.count(Cf(e),e)+(Cf(e).getDay()===4),t,2)}function RG(e){return e.getDay()}function BG(e,t){return pa(P1.count(Cf(e)-1,e),t,2)}function UG(e,t){return pa(e.getFullYear()%100,t,2)}function qG(e,t){return e=tF(e),pa(e.getFullYear()%100,t,2)}function $G(e,t){return pa(e.getFullYear()%1e4,t,4)}function zG(e,t){var r=e.getDay();return e=r>=4||r===0?Fm(e):Fm.ceil(e),pa(e.getFullYear()%1e4,t,4)}function HG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pa(t/60|0,"0",2)+pa(t%60,"0",2)}function $T(e,t){return pa(e.getUTCDate(),t,2)}function WG(e,t){return pa(e.getUTCHours(),t,2)}function VG(e,t){return pa(e.getUTCHours()%12||12,t,2)}function GG(e,t){return pa(1+Vb.count(Af(e),e),t,3)}function rF(e,t){return pa(e.getUTCMilliseconds(),t,3)}function KG(e,t){return rF(e,t)+"000"}function XG(e,t){return pa(e.getUTCMonth()+1,t,2)}function YG(e,t){return pa(e.getUTCMinutes(),t,2)}function QG(e,t){return pa(e.getUTCSeconds(),t,2)}function JG(e){var t=e.getUTCDay();return t===0?7:t}function ZG(e,t){return pa(Kb.count(Af(e)-1,e),t,2)}function nF(e){var t=e.getUTCDay();return t>=4||t===0?Mm(e):Mm.ceil(e)}function eK(e,t){return e=nF(e),pa(Mm.count(Af(e),e)+(Af(e).getUTCDay()===4),t,2)}function tK(e){return e.getUTCDay()}function rK(e,t){return pa(I1.count(Af(e)-1,e),t,2)}function nK(e,t){return pa(e.getUTCFullYear()%100,t,2)}function aK(e,t){return e=nF(e),pa(e.getUTCFullYear()%100,t,2)}function sK(e,t){return pa(e.getUTCFullYear()%1e4,t,4)}function iK(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Mm(e):Mm.ceil(e),pa(e.getUTCFullYear()%1e4,t,4)}function oK(){return"+0000"}function zT(){return"%"}function HT(e){return+e}function WT(e){return Math.floor(+e/1e3)}var rm,aF,sF;lK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lK(e){return rm=lG(e),aF=rm.format,rm.parse,sF=rm.utcFormat,rm.utcParse,rm}function cK(e){return new Date(e)}function dK(e){return e instanceof Date?+e:+new Date(+e)}function RS(e,t,r,a,s,i,o,l,c,d){var u=kS(),f=u.invert,p=u.domain,m=d(".%L"),b=d(":%S"),v=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),w=d("%b %d"),j=d("%B"),N=d("%Y");function S(A){return(c(A)<A?m:l(A)<A?b:o(A)<A?v:i(A)<A?g:a(A)<A?s(A)<A?y:w:r(A)<A?j:N)(A)}return u.invert=function(A){return new Date(f(A))},u.domain=function(A){return arguments.length?p(Array.from(A,dK)):p().map(cK)},u.ticks=function(A){var _=p();return e(_[0],_[_.length-1],A??10)},u.tickFormat=function(A,_){return _==null?S:d(_)},u.nice=function(A){var _=p();return(!A||typeof A.range!="function")&&(A=t(_[0],_[_.length-1],A??10)),A?p(WL(_,A)):u},u.copy=function(){return wg(u,RS(e,t,r,a,s,i,o,l,c,d))},u}function uK(){return fd.apply(RS(iG,oG,Cf,FS,Gb,Ng,DS,PS,sh,aF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fK(){return fd.apply(RS(aG,sG,Af,MS,Kb,Vb,LS,IS,sh,sF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xb(){var e=0,t=1,r,a,s,i,o=_l,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var m,b;return arguments.length?([m,b]=p,o=f(m,b),d):[o(0),o(1)]}}return d.range=u(lp),d.rangeRound=u(jS),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),d}}function T0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iF(){var e=E0(Xb()(_l));return e.copy=function(){return T0(e,iF())},If.apply(e,arguments)}function oF(){var e=CS(Xb()).domain([1,10]);return e.copy=function(){return T0(e,oF()).base(e.base())},If.apply(e,arguments)}function lF(){var e=AS(Xb());return e.copy=function(){return T0(e,lF()).constant(e.constant())},If.apply(e,arguments)}function BS(){var e=ES(Xb());return e.copy=function(){return T0(e,BS()).exponent(e.exponent())},If.apply(e,arguments)}function hK(){return BS.apply(null,arguments).exponent(.5)}function cF(){var e=[],t=_l;function r(a){if(a!=null&&!isNaN(a=+a))return t((bg(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(x0),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>ZW(e,i/a))},r.copy=function(){return cF(t).domain(e)},If.apply(r,arguments)}function Yb(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,d=_l,u,f=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+u(v))-i)*(a*v<a*i?l:c),d(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,r]=v,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m):[e,t,r]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(d=v,m):d};function b(v){return function(g){var y,w,j;return arguments.length?([y,w,j]=g,d=SV(v,[y,w,j]),m):[d(0),d(.5),d(1)]}}return m.range=b(lp),m.rangeRound=b(jS),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return u=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m}}function dF(){var e=E0(Yb()(_l));return e.copy=function(){return T0(e,dF())},If.apply(e,arguments)}function uF(){var e=CS(Yb()).domain([.1,1,10]);return e.copy=function(){return T0(e,uF()).base(e.base())},If.apply(e,arguments)}function fF(){var e=AS(Yb());return e.copy=function(){return T0(e,fF()).constant(e.constant())},If.apply(e,arguments)}function US(){var e=ES(Yb());return e.copy=function(){return T0(e,US()).exponent(e.exponent())},If.apply(e,arguments)}function mK(){return US.apply(null,arguments).exponent(.5)}const VT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kx,scaleDiverging:dF,scaleDivergingLog:uF,scaleDivergingPow:US,scaleDivergingSqrt:mK,scaleDivergingSymlog:fF,scaleIdentity:HL,scaleImplicit:b4,scaleLinear:T1,scaleLog:VL,scaleOrdinal:yS,scalePoint:rx,scalePow:TS,scaleQuantile:XL,scaleQuantize:YL,scaleRadial:KL,scaleSequential:iF,scaleSequentialLog:oF,scaleSequentialPow:BS,scaleSequentialQuantile:cF,scaleSequentialSqrt:hK,scaleSequentialSymlog:lF,scaleSqrt:KV,scaleSymlog:GL,scaleThreshold:QL,scaleTime:uK,scaleUtc:fK,tickFormat:zL},Symbol.toStringTag,{value:"Module"}));var S5,GT;function hF(){if(GT)return S5;GT=1;var e=np();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a(l);if(c!=null&&(d===void 0?c===c&&!e(c):s(c,d)))var d=c,u=l}return u}return S5=t,S5}var _5,KT;function pK(){if(KT)return _5;KT=1;function e(t,r){return t>r}return _5=e,_5}var C5,XT;function xK(){if(XT)return C5;XT=1;var e=hF(),t=pK(),r=ip();function a(s){return s&&s.length?e(s,r,t):void 0}return C5=a,C5}var gK=xK();const d0=Pa(gK);var A5,YT;function vK(){if(YT)return A5;YT=1;function e(t,r){return t<r}return A5=e,A5}var E5,QT;function bK(){if(QT)return E5;QT=1;var e=hF(),t=vK(),r=ip();function a(s){return s&&s.length?e(s,r,t):void 0}return E5=a,E5}var yK=bK();const Qb=Pa(yK);var T5,JT;function wK(){if(JT)return T5;JT=1;var e=rS(),t=A0(),r=NL(),a=ec();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return T5=s,T5}var O5,ZT;function NK(){if(ZT)return O5;ZT=1;var e=yL(),t=wK();function r(a,s){return e(t(a,s),1)}return O5=r,O5}var jK=NK();const kK=Pa(jK);var P5,eO;function mF(){if(eO)return P5;eO=1;var e=pS();function t(r,a){return e(r,a)}return P5=t,P5}var SK=mF();const Ex=Pa(SK);var cp=1e9,_K={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$S,Os=!0,cd="[DecimalError] ",hh=cd+"Invalid argument: ",qS=cd+"Exponent out of range: ",dp=Math.floor,Z0=Math.pow,CK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yc,ao=1e7,us=7,pF=9007199254740991,D1=dp(pF/us),Tr={};Tr.absoluteValue=Tr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Tr.comparedTo=Tr.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Tr.decimalPlaces=Tr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*us;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Tr.dividedBy=Tr.div=function(e){return Nf(this,new this.constructor(e))};Tr.dividedToIntegerBy=Tr.idiv=function(e){var t=this,r=t.constructor;return Za(Nf(t,new r(e),0,1),r.precision)};Tr.equals=Tr.eq=function(e){return!this.cmp(e)};Tr.exponent=function(){return Ci(this)};Tr.greaterThan=Tr.gt=function(e){return this.cmp(e)>0};Tr.greaterThanOrEqualTo=Tr.gte=function(e){return this.cmp(e)>=0};Tr.isInteger=Tr.isint=function(){return this.e>this.d.length-2};Tr.isNegative=Tr.isneg=function(){return this.s<0};Tr.isPositive=Tr.ispos=function(){return this.s>0};Tr.isZero=function(){return this.s===0};Tr.lessThan=Tr.lt=function(e){return this.cmp(e)<0};Tr.lessThanOrEqualTo=Tr.lte=function(e){return this.cmp(e)<1};Tr.logarithm=Tr.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(yc))throw Error(cd+"NaN");if(r.s<1)throw Error(cd+(r.s?"NaN":"-Infinity"));return r.eq(yc)?new a(0):(Os=!1,t=Nf(Tx(r,i),Tx(e,i),i),Os=!0,Za(t,s))};Tr.minus=Tr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vF(t,e):xF(t,(e.s=-e.s,e))};Tr.modulo=Tr.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(cd+"NaN");return r.s?(Os=!1,t=Nf(r,e,0,1).times(e),Os=!0,r.minus(t)):Za(new a(r),s)};Tr.naturalExponential=Tr.exp=function(){return gF(this)};Tr.naturalLogarithm=Tr.ln=function(){return Tx(this)};Tr.negated=Tr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Tr.plus=Tr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xF(t,e):vF(t,(e.s=-e.s,e))};Tr.precision=Tr.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(hh+e);if(t=Ci(s)+1,a=s.d.length-1,r=a*us+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Tr.squareRoot=Tr.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(cd+"NaN")}for(e=Ci(l),Os=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Cu(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=dp((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus(Nf(l,i,o+2)).times(.5),Cu(i.d).slice(0,o)===(t=Cu(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Za(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return Os=!0,Za(a,r)};Tr.times=Tr.mul=function(e){var t,r,a,s,i,o,l,c,d,u=this,f=u.constructor,p=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=p.length,d=m.length,c<d&&(i=p,p=m,m=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+m[a]*p[s-a-1]+t,i[s--]=l%ao|0,t=l/ao|0;i[s]=(i[s]+t)%ao|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Os?Za(e,f.precision):e};Tr.toDecimalPlaces=Tr.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Ru(e,0,cp),t===void 0?t=a.rounding:Ru(t,0,8),Za(r,e+Ci(r)+1,t))};Tr.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Nh(a,!0):(Ru(e,0,cp),t===void 0?t=s.rounding:Ru(t,0,8),a=Za(new s(a),e+1,t),r=Nh(a,!0,e+1)),r};Tr.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Nh(s):(Ru(e,0,cp),t===void 0?t=i.rounding:Ru(t,0,8),a=Za(new i(s),e+Ci(s)+1,t),r=Nh(a.abs(),!1,e+Ci(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Tr.toInteger=Tr.toint=function(){var e=this,t=e.constructor;return Za(new t(e),Ci(e)+1,t.rounding)};Tr.toNumber=function(){return+this};Tr.toPower=Tr.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(yc);if(l=new c(l),!l.s){if(e.s<1)throw Error(cd+"Infinity");return l}if(l.eq(yc))return l;if(a=c.precision,e.eq(yc))return Za(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=pF){for(s=new c(yc),t=Math.ceil(a/us+4),Os=!1;r%2&&(s=s.times(l),rO(s.d,t)),r=dp(r/2),r!==0;)l=l.times(l),rO(l.d,t);return Os=!0,e.s<0?new c(yc).div(s):Za(s,a)}}else if(i<0)throw Error(cd+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Os=!1,s=e.times(Tx(l,a+d)),Os=!0,s=gF(s),s.s=i,s};Tr.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Ci(s),a=Nh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Ru(e,1,cp),t===void 0?t=i.rounding:Ru(t,0,8),s=Za(new i(s),e,t),r=Ci(s),a=Nh(s,e<=r||r<=i.toExpNeg,e)),a};Tr.toSignificantDigits=Tr.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ru(e,1,cp),t===void 0?t=a.rounding:Ru(t,0,8)),Za(new a(r),e,t)};Tr.toString=Tr.valueOf=Tr.val=Tr.toJSON=Tr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ci(e),r=e.constructor;return Nh(e,t<=r.toExpNeg||t>=r.toExpPos)};function xF(e,t){var r,a,s,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Os?Za(t,f):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(f/us),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/ao|0,c[i]%=ao;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Os?Za(t,f):t}function Ru(e,t,r){if(e!==~~e||e<t||e>r)throw Error(hh+e)}function Cu(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=us-a.length,r&&(i+=i0(r)),i+=a;o=e[t],a=o+"",r=us-a.length,r&&(i+=i0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Nf=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%ao|0,o=i/ao|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*ao+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,f,p,m,b,v,g,y,w,j,N,S,A,_,P,I=a.constructor,B=a.s==s.s?1:-1,T=a.d,E=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(cd+"Division by zero");for(c=a.e-s.e,_=E.length,S=T.length,m=new I(B),b=m.d=[],d=0;E[d]==(T[d]||0);)++d;if(E[d]>(T[d]||0)&&--c,i==null?w=i=I.precision:o?w=i+(Ci(a)-Ci(s))+1:w=i,w<0)return new I(0);if(w=w/us+2|0,d=0,_==1)for(u=0,E=E[0],w++;(d<S||u)&&w--;d++)j=u*ao+(T[d]||0),b[d]=j/E|0,u=j%E|0;else{for(u=ao/(E[0]+1)|0,u>1&&(E=e(E,u),T=e(T,u),_=E.length,S=T.length),N=_,v=T.slice(0,_),g=v.length;g<_;)v[g++]=0;P=E.slice(),P.unshift(0),A=E[0],E[1]>=ao/2&&++A;do u=0,l=t(E,v,_,g),l<0?(y=v[0],_!=g&&(y=y*ao+(v[1]||0)),u=y/A|0,u>1?(u>=ao&&(u=ao-1),f=e(E,u),p=f.length,g=v.length,l=t(f,v,p,g),l==1&&(u--,r(f,_<p?P:E,p))):(u==0&&(l=u=1),f=E.slice()),p=f.length,p<g&&f.unshift(0),r(v,f,g),l==-1&&(g=v.length,l=t(E,v,_,g),l<1&&(u++,r(v,_<g?P:E,g))),g=v.length):l===0&&(u++,v=[0]),b[d++]=u,l&&v[0]?v[g++]=T[N]||0:(v=[T[N]],g=1);while((N++<S||v[0]!==void 0)&&w--)}return b[0]||b.shift(),m.e=c,Za(m,o?i+Ci(m)+1:i)}})();function gF(e,t){var r,a,s,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Ci(e)>16)throw Error(qS+Ci(e));if(!e.s)return new u(yc);for(Os=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(Z0(2,d))/Math.LN10*2+5|0,l+=a,r=s=i=new u(yc),u.precision=l;;){if(s=Za(s.times(e),l),r=r.times(++c),o=i.plus(Nf(s,r,l)),Cu(o.d).slice(0,l)===Cu(i.d).slice(0,l)){for(;d--;)i=Za(i.times(i),l);return u.precision=f,t==null?(Os=!0,Za(i,f)):i}i=o}}function Ci(e){for(var t=e.e*us,r=e.d[0];r>=10;r/=10)t++;return t}function I5(e,t,r){if(t>e.LN10.sd())throw Os=!0,r&&(e.precision=r),Error(cd+"LN10 precision limit exceeded");return Za(new e(e.LN10),t)}function i0(e){for(var t="";e--;)t+="0";return t}function Tx(e,t){var r,a,s,i,o,l,c,d,u,f=1,p=10,m=e,b=m.d,v=m.constructor,g=v.precision;if(m.s<1)throw Error(cd+(m.s?"NaN":"-Infinity"));if(m.eq(yc))return new v(0);if(t==null?(Os=!1,d=g):d=t,m.eq(10))return t==null&&(Os=!0),I5(v,d);if(d+=p,v.precision=d,r=Cu(b),a=r.charAt(0),i=Ci(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)m=m.times(e),r=Cu(m.d),a=r.charAt(0),f++;i=Ci(m),a>1?(m=new v("0."+r),i++):m=new v(a+"."+r.slice(1))}else return c=I5(v,d+2,g).times(i+""),m=Tx(new v(a+"."+r.slice(1)),d-p).plus(c),v.precision=g,t==null?(Os=!0,Za(m,g)):m;for(l=o=m=Nf(m.minus(yc),m.plus(yc),d),u=Za(m.times(m),d),s=3;;){if(o=Za(o.times(u),d),c=l.plus(Nf(o,new v(s),d)),Cu(c.d).slice(0,d)===Cu(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(I5(v,d+2,g).times(i+""))),l=Nf(l,new v(f),d),v.precision=g,t==null?(Os=!0,Za(l,g)):l;l=c,s+=2}}function tO(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=dp(r/us),e.d=[],a=(r+1)%us,r<0&&(a+=us),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=us;a<s;)e.d.push(+t.slice(a,a+=us));t=t.slice(a),a=us-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),Os&&(e.e>D1||e.e<-D1))throw Error(qS+r)}else e.s=0,e.e=0,e.d=[0];return e}function Za(e,t,r){var a,s,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=us,s=t,d=f[u=0];else{if(u=Math.ceil((a+1)/us),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;a%=us,s=a-us+o}if(r!==void 0&&(i=Z0(10,o-s-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?d/Z0(10,o-s):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ci(e),f.length=1,t=t-i-1,f[0]=Z0(10,(us-t%us)%us),e.e=dp(-t/us)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=u,i=1,u--):(f.length=u+1,i=Z0(10,us-a),f[u]=s>0?(d/Z0(10,o-s)%Z0(10,s)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==ao&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=ao)break;f[u--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(Os&&(e.e>D1||e.e<-D1))throw Error(qS+Ci(e));return e}function vF(e,t){var r,a,s,i,o,l,c,d,u,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Os?Za(t,m):t;if(c=e.d,f=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,a=d,l=c.length),s=Math.max(Math.ceil(m/us),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){u=c[s]<f[s];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=ao-1;--c[i],c[s]+=ao}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Os?Za(t,m):t):new p(0)}function Nh(e,t,r){var a,s=Ci(e),i=Cu(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+i0(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+i0(-s-1)+i,r&&(a=r-o)>0&&(i+=i0(a))):s>=o?(i+=i0(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+i0(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=i0(a))),e.s<0?"-"+i:i}function rO(e,t){if(e.length>t)return e.length=t,!0}function bF(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(hh+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return tO(o,i.toString())}else if(typeof i!="string")throw Error(hh+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,CK.test(i))tO(o,i);else throw Error(hh+i)}if(s.prototype=Tr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=bF,s.config=s.set=AK,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function AK(e){if(!e||typeof e!="object")throw Error(cd+"Object expected");var t,r,a,s=["precision",1,cp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(dp(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(hh+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(hh+r+": "+a);return this}var $S=bF(_K);yc=new $S(1);const qa=$S;function EK(e){return IK(e)||PK(e)||OK(e)||TK()}function TK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OK(e,t){if(e){if(typeof e=="string")return j4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j4(e,t)}}function PK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function IK(e){if(Array.isArray(e))return j4(e)}function j4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var DK=function(t){return t},yF={},wF=function(t){return t===yF},nO=function(t){return function r(){return arguments.length===0||arguments.length===1&&wF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},LK=function e(t,r){return t===1?r:nO(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==yF}).length;return o>=t?r.apply(void 0,s):e(t-o,nO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(f){return wF(f)?c.shift():f});return r.apply(void 0,EK(u).concat(c))}))})},Jb=function(t){return LK(t.length,t)},k4=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},FK=Jb(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),MK=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return DK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},S4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},NF=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function RK(e){var t;return e===0?t=1:t=Math.floor(new qa(e).abs().log(10).toNumber())+1,t}function BK(e,t,r){for(var a=new qa(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var UK=Jb(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),qK=Jb(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),$K=Jb(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Zb={rangeStep:BK,getDigitCount:RK,interpolateNumber:UK,uninterpolateNumber:qK,uninterpolateTruncation:$K};function _4(e){return WK(e)||HK(e)||jF(e)||zK()}function zK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function WK(e){if(Array.isArray(e))return C4(e)}function Ox(e,t){return KK(e)||GK(e,t)||jF(e,t)||VK()}function VK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jF(e,t){if(e){if(typeof e=="string")return C4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,t)}}function C4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function GK(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function KK(e){if(Array.isArray(e))return e}function kF(e){var t=Ox(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function SF(e,t,r){if(e.lte(0))return new qa(0);var a=Zb.getDigitCount(e.toNumber()),s=new qa(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new qa(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new qa(Math.ceil(c))}function XK(e,t,r){var a=1,s=new qa(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new qa(10).pow(Zb.getDigitCount(e)-1),s=new qa(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new qa(Math.floor(e)))}else e===0?s=new qa(Math.floor((t-1)/2)):r||(s=new qa(Math.floor(e)));var o=Math.floor((t-1)/2),l=MK(FK(function(c){return s.add(new qa(c-o).mul(a)).toNumber()}),k4);return l(0,t)}function _F(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new qa(0),tickMin:new qa(0),tickMax:new qa(0)};var i=SF(new qa(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new qa(0):(o=new qa(e).add(t).div(2),o=o.sub(new qa(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new qa(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?_F(e,t,r,a,s+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new qa(l).mul(i)),tickMax:o.add(new qa(c).mul(i))})}function YK(e){var t=Ox(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=kF([r,a]),c=Ox(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(_4(k4(0,s-1).map(function(){return 1/0}))):[].concat(_4(k4(0,s-1).map(function(){return-1/0})),[u]);return r>a?S4(f):f}if(d===u)return XK(d,s,i);var p=_F(d,u,o,i),m=p.step,b=p.tickMin,v=p.tickMax,g=Zb.rangeStep(b,v.add(new qa(.1).mul(m)),m);return r>a?S4(g):g}function QK(e,t){var r=Ox(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=kF([a,s]),l=Ox(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,s];if(c===d)return[c];var u=Math.max(t,2),f=SF(new qa(d).sub(c).div(u-1),i,0),p=[].concat(_4(Zb.rangeStep(new qa(c),new qa(d).sub(new qa(.99).mul(f)),f)),[d]);return a>s?S4(p):p}var JK=NF(YK),ZK=NF(QK),eX="Invariant failed";function jh(e,t){throw new Error(eX)}var tX=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function L1(){return L1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},L1.apply(this,arguments)}function rX(e,t){return iX(e)||sX(e,t)||aX(e,t)||nX()}function nX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aX(e,t){if(e){if(typeof e=="string")return aO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aO(e,t)}}function aO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function iX(e){if(Array.isArray(e))return e}function oX(e,t){if(e==null)return{};var r=lX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dX(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EF(a.key),a)}}function uX(e,t,r){return t&&dX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fX(e,t,r){return t=F1(t),hX(e,CF()?Reflect.construct(t,r||[],F1(e).constructor):t.apply(e,r))}function hX(e,t){if(t&&(Rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mX(e)}function mX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CF=function(){return!!e})()}function F1(e){return F1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},F1(e)}function pX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A4(e,t)}function A4(e,t){return A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},A4(e,t)}function AF(e,t,r){return t=EF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EF(e){var t=xX(e,"string");return Rm(t)=="symbol"?t:t+""}function xX(e,t){if(Rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ey=(function(e){function t(){return cX(this,t),fX(this,t,arguments)}return pX(t,e),uX(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,u=a.xAxis,f=a.yAxis,p=oX(a,tX),m=zn(p,!1);this.props.direction==="x"&&u.type!=="number"&&jh();var b=c.map(function(v){var g=d(v,l),y=g.x,w=g.y,j=g.value,N=g.errorVal;if(!N)return null;var S=[],A,_;if(Array.isArray(N)){var P=rX(N,2);A=P[0],_=P[1]}else A=_=N;if(i==="vertical"){var I=u.scale,B=w+s,T=B+o,E=B-o,F=I(j-A),q=I(j+_);S.push({x1:q,y1:T,x2:q,y2:E}),S.push({x1:F,y1:B,x2:q,y2:B}),S.push({x1:F,y1:T,x2:F,y2:E})}else if(i==="horizontal"){var H=f.scale,Q=y+s,J=Q-o,re=Q+o,X=H(j-A),ee=H(j+_);S.push({x1:J,y1:ee,x2:re,y2:ee}),S.push({x1:Q,y1:X,x2:Q,y2:ee}),S.push({x1:J,y1:X,x2:re,y2:X})}return ut.createElement(Ms,L1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},m),S.map(function(W){return ut.createElement("line",L1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return ut.createElement(Ms,{className:"recharts-errorBars"},b)}}])})(ut.Component);AF(ey,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});AF(ey,"displayName","ErrorBar");function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function sO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function X0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(r),!0).forEach(function(a){gX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gX(e,t,r){return t=vX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vX(e){var t=bX(e,"string");return Px(t)=="symbol"?t:t+""}function bX(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Px(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TF=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=gc(r,bm);if(!o)return null;var l=bm.defaultProps,c=l!==void 0?X0(X0({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(a||[]).reduce(function(u,f){var p=f.item,m=f.props,b=m.sectors||m.data||[];return u.concat(b.map(function(v){return{type:o.props.iconType||p.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(a||[]).map(function(u){var f=u.item,p=f.type.defaultProps,m=p!==void 0?X0(X0({},p),f.props):{},b=m.dataKey,v=m.name,g=m.legendType,y=m.hide;return{inactive:y,dataKey:b,type:c.iconType||g||"square",color:zS(f),value:v||b,payload:m}}),X0(X0(X0({},c),bm.getWithHeight(o,s)),{},{payload:d,item:o})};function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function iO(e){return jX(e)||NX(e)||wX(e)||yX()}function yX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wX(e,t){if(e){if(typeof e=="string")return E4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E4(e,t)}}function NX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jX(e){if(Array.isArray(e))return E4(e)}function E4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function oO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Gs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(r),!0).forEach(function(a){wm(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wm(e,t,r){return t=kX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=SX(e,"string");return Ix(t)=="symbol"?t:t+""}function SX(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ix(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sc(e,t,r){return Hn(e)||Hn(t)?r:qi(t)?od(e,t,r):On(t)?t(e):r}function nx(e,t,r,a){var s=kK(e,function(l){return Sc(l,t)});if(r==="number"){var i=s.filter(function(l){return ir(l)||parseFloat(l)});return i.length?[Qb(i),d0(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!Hn(l)}):s;return o.map(function(l){return qi(l)||l instanceof Date?l:""})}var _X=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,f=s[d].coordinate,p=d>=l-1?s[0].coordinate:s[d+1].coordinate,m=void 0;if(Wd(f-u)!==Wd(p-f)){var b=[];if(Wd(p-f)===Wd(c[1]-c[0])){m=p;var v=f+c[1]-c[0];b[0]=Math.min(v,(v+u)/2),b[1]=Math.max(v,(v+u)/2)}else{m=u;var g=p+c[1]-c[0];b[0]=Math.min(f,(g+f)/2),b[1]=Math.max(f,(g+f)/2)}var y=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>y[0]&&t<=y[1]||t>=b[0]&&t<=b[1]){o=s[d].index;break}}else{var w=Math.min(u,p),j=Math.max(u,p);if(t>(w+f)/2&&t<=(j+f)/2){o=s[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N>0&&N<l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N===l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2){o=a[N].index;break}return o},zS=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Gs(Gs({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},CX=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,f=Object.keys(u),p=0,m=f.length;p<m;p++){var b=u[f[p]],v=b.items,g=b.cateAxisId,y=v.filter(function(_){return yf(_.type).indexOf("Bar")>=0});if(y&&y.length){var w=y[0].type.defaultProps,j=w!==void 0?Gs(Gs({},w),y[0].props):y[0].props,N=j.barSize,S=j[g];o[S]||(o[S]=[]);var A=Hn(N)?r:N;o[S].push({item:y[0],stackList:y.slice(1),barSize:Hn(A)?void 0:wh(A,a,0)})}}return o},AX=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=wh(r,s,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=s/c,b=o.reduce(function(N,S){return N+S.barSize||0},0);b+=(c-1)*d,b>=s&&(b-=(c-1)*d,d=0),b>=s&&m>0&&(p=!0,m*=.9,b=c*m);var v=(s-b)/2>>0,g={offset:v-d,size:0};u=o.reduce(function(N,S){var A={item:S.item,position:{offset:g.offset+g.size+d,size:p?m:S.barSize}},_=[].concat(iO(N),[A]);return g=_[_.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){_.push({item:P,position:g})}),_},f)}else{var y=wh(a,s,0,!0);s-2*y-(c-1)*d<=0&&(d=0);var w=(s-2*y-(c-1)*d)/c;w>1&&(w>>=0);var j=l===+l?Math.min(w,l):w;u=o.reduce(function(N,S,A){var _=[].concat(iO(N),[{item:S.item,position:{offset:y+(w+d)*A+(w-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){_.push({item:P,position:_[_.length-1].position})}),_},f)}return u},EX=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=TF({children:i,legendWidth:c});if(d){var u=s||{},f=u.width,p=u.height,m=d.align,b=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&m!=="center"&&ir(t[m]))return Gs(Gs({},t),{},wm({},m,t[m]+(f||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&b!=="middle"&&ir(t[b]))return Gs(Gs({},t),{},wm({},b,t[b]+(p||0)))}return t},TX=function(t,r,a){return Hn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},OF=function(t,r,a,s,i){var o=r.props.children,l=Qd(o,ey).filter(function(d){return TX(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Sc(u,a);if(Hn(f))return d;var p=Array.isArray(f)?[Qb(f),d0(f)]:[f,f],m=c.reduce(function(b,v){var g=Sc(u,v,0),y=p[0]-Math.abs(Array.isArray(g)?g[0]:g),w=p[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,b[0]),Math.max(w,b[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},OX=function(t,r,a,s,i){var o=r.map(function(l){return OF(t,l,a,i,s)}).filter(function(l){return!Hn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},PF=function(t,r,a,s,i){var o=r.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&OF(t,c,d,s)||nx(t,d,a,i)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},IF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},DF=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(a),l},mf=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?Wd(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var p=i?i.indexOf(f):f;return{coordinate:s(p)+d,value:f,offset:d}});return u.filter(function(f){return!sp(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:s(f)+d,value:f,index:p,offset:d}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+d,value:f,offset:d}}):s.domain().map(function(f,p){return{coordinate:s(f)+d,value:i?i[f]:f,index:p,offset:d}})},D5=new WeakMap,pv=function(t,r){if(typeof r!="function")return t;D5.has(t)||D5.set(t,new WeakMap);var a=D5.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},PX=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:kx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:T1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:rx(),realScaleType:"point"}:i==="category"?{scale:kx(),realScaleType:"band"}:{scale:T1(),realScaleType:"linear"};if(yh(s)){var c="scale".concat(Rb(s));return{scale:(VT[c]||rx)(),realScaleType:VT[c]?c:"point"}}return On(s)?{scale:s}:{scale:rx(),realScaleType:"point"}},lO=1e-4,IX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-lO,o=Math.max(s[0],s[1])+lO,l=t(r[0]),c=t(r[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[a-1]])}},DX=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},LX=function(t,r){if(!r||r.length!==2||!ir(r[0])||!ir(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ir(t[0])||t[0]<a)&&(i[0]=a),(!ir(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},FX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var c=sp(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},MX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=sp(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},RX={sign:FX,expand:w$,none:Tm,silhouette:N$,wiggle:j$,positive:MX},BX=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=RX[a],o=y$().keys(s).value(function(l,c){return+Sc(l,c,0)}).order(s4).offset(i);return o(t)},UX=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,p){var m,b=(m=p.type)!==null&&m!==void 0&&m.defaultProps?Gs(Gs({},p.type.defaultProps),p.props):p.props,v=b.stackId,g=b.hide;if(g)return f;var y=b[a],w=f[y]||{hasStack:!1,stackGroups:{}};if(qi(v)){var j=w.stackGroups[v]||{numericAxisId:a,cateAxisId:s,items:[]};j.items.push(p),w.hasStack=!0,w.stackGroups[v]=j}else w.stackGroups[gg("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[p]};return Gs(Gs({},f),{},wm({},y,w))},c),u={};return Object.keys(d).reduce(function(f,p){var m=d[p];if(m.hasStack){var b={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,g){var y=m.stackGroups[g];return Gs(Gs({},v),{},wm({},g,{numericAxisId:a,cateAxisId:s,items:y.items,stackedData:BX(t,y.items,i)}))},b)}return Gs(Gs({},f),{},wm({},p,m))},u)},qX=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=JK(d,i,l);return t.domain([Qb(u),d0(u)]),{niceTicks:u}}if(i&&s==="number"){var f=t.domain(),p=ZK(f,i,l);return{niceTicks:p}}return null};function cO(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Hn(s[t.dataKey])){var l=c1(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=Sc(s,Hn(o)?t.dataKey:o);return Hn(c)?null:t.scale(c)}var dO=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var c=Sc(o,r.dataKey,r.domain[l]);return Hn(c)?null:r.scale(c)-i/2+s},$X=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},zX=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Gs(Gs({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(qi(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},HX=function(t){return t.reduce(function(r,a){return[Qb(a.concat([r[0]]).filter(ir)),d0(a.concat([r[1]]).filter(ir))]},[1/0,-1/0])},LF=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var f=HX(u.slice(r,a+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},uO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,T4=function(t,r,a){if(On(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(ir(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(uO.test(t[0])){var i=+uO.exec(t[0])[1];s[0]=r[0]-i}else On(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(ir(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(fO.test(t[1])){var o=+fO.exec(t[1])[1];s[1]=r[1]+o}else On(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},M1=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=gS(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},hO=function(t,r,a){return!t||!t.length||Ex(t,od(a,"type.defaultProps.domain"))?r:t},FF=function(t,r){var a=t.type.defaultProps?Gs(Gs({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,u=a.hide;return Gs(Gs({},zn(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:zS(t),value:Sc(r,s),type:c,payload:r,chartType:d,hide:u})};function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function pO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(a){WX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WX(e,t,r){return t=VX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VX(e){var t=GX(e,"string");return Dx(t)=="symbol"?t:t+""}function GX(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R1=Math.PI/180,KX=function(t){return t*180/Math.PI},Io=function(t,r,a,s){return{x:t+Math.cos(-R1*s)*a,y:r+Math.sin(-R1*s)*a}},XX=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},YX=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=XX({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:KX(d),angleInRadian:d}},QX=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},JX=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},xO=function(t,r){var a=t.x,s=t.y,i=YX({x:a,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=QX(r),f=u.startAngle,p=u.endAngle,m=l,b;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;b=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;b=m>=p&&m<=f}return b?pO(pO({},r),{},{radius:o,angle:JX(m,r)}):null};function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}var ZX=["offset"];function eY(e){return aY(e)||nY(e)||rY(e)||tY()}function tY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rY(e,t){if(e){if(typeof e=="string")return O4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O4(e,t)}}function nY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aY(e){if(Array.isArray(e))return O4(e)}function O4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sY(e,t){if(e==null)return{};var r=iY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function iY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function gO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gO(Object(r),!0).forEach(function(a){oY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oY(e,t,r){return t=lY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return Lx(t)=="symbol"?t:t+""}function cY(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fx.apply(this,arguments)}var dY=function(t){var r=t.value,a=t.formatter,s=Hn(t.children)?r:t.children;return On(a)?a(s):s},uY=function(t,r){var a=Wd(r-t),s=Math.min(Math.abs(r-t),360);return a*s},fY=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,p=c.outerRadius,m=c.startAngle,b=c.endAngle,v=c.clockWise,g=(f+p)/2,y=uY(m,b),w=y>=0?1:-1,j,N;s==="insideStart"?(j=m+w*o,N=v):s==="insideEnd"?(j=b-w*o,N=!v):s==="end"&&(j=b+w*o,N=v),N=y<=0?N:!N;var S=Io(d,u,g,j),A=Io(d,u,g,j+(N?1:-1)*359),_="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(A.x,",").concat(A.y),P=Hn(t.id)?gg("recharts-radial-line-"):t.id;return ut.createElement("text",Fx({},a,{dominantBaseline:"central",className:ca("recharts-radial-bar-label",l)}),ut.createElement("defs",null,ut.createElement("path",{id:P,d:_})),ut.createElement("textPath",{xlinkHref:"#".concat(P)},r))},hY=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,p=(u+f)/2;if(s==="outside"){var m=Io(o,l,d+a,p),b=m.x,v=m.y;return{x:b,y:v,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,y=Io(o,l,g,p),w=y.x,j=y.y;return{x:w,y:j,textAnchor:"middle",verticalAnchor:"middle"}},mY=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,p=f*s,m=f>0?"end":"start",b=f>0?"start":"end",v=d>=0?1:-1,g=v*s,y=v>0?"end":"start",w=v>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:c-f*s,textAnchor:"middle",verticalAnchor:m};return Mi(Mi({},j),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var N={x:l+d/2,y:c+u+p,textAnchor:"middle",verticalAnchor:b};return Mi(Mi({},N),a?{height:Math.max(a.y+a.height-(c+u),0),width:d}:{})}if(i==="left"){var S={x:l-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Mi(Mi({},S),a?{width:Math.max(S.x-a.x,0),height:u}:{})}if(i==="right"){var A={x:l+d+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Mi(Mi({},A),a?{width:Math.max(a.x+a.width-A.x,0),height:u}:{})}var _=a?{width:d,height:u}:{};return i==="insideLeft"?Mi({x:l+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},_):i==="insideRight"?Mi({x:l+d-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},_):i==="insideTop"?Mi({x:l+d/2,y:c+p,textAnchor:"middle",verticalAnchor:b},_):i==="insideBottom"?Mi({x:l+d/2,y:c+u-p,textAnchor:"middle",verticalAnchor:m},_):i==="insideTopLeft"?Mi({x:l+g,y:c+p,textAnchor:w,verticalAnchor:b},_):i==="insideTopRight"?Mi({x:l+d-g,y:c+p,textAnchor:y,verticalAnchor:b},_):i==="insideBottomLeft"?Mi({x:l+g,y:c+u-p,textAnchor:w,verticalAnchor:m},_):i==="insideBottomRight"?Mi({x:l+d-g,y:c+u-p,textAnchor:y,verticalAnchor:m},_):ap(i)&&(ir(i.x)||nh(i.x))&&(ir(i.y)||nh(i.y))?Mi({x:l+wh(i.x,d),y:c+wh(i.y,u),textAnchor:"end",verticalAnchor:"end"},_):Mi({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},_)},pY=function(t){return"cx"in t&&ir(t.cx)};function al(e){var t=e.offset,r=t===void 0?5:t,a=sY(e,ZX),s=Mi({offset:r},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,f=u===void 0?"":u,p=s.textBreakAll;if(!i||Hn(l)&&Hn(c)&&!D.isValidElement(d)&&!On(d))return null;if(D.isValidElement(d))return D.cloneElement(d,s);var m;if(On(d)){if(m=D.createElement(d,s),D.isValidElement(m))return m}else m=dY(s);var b=pY(i),v=zn(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return fY(s,m,v);var g=b?hY(s):mY(s);return ut.createElement(N1,Fx({className:ca("recharts-label",f)},v,g,{breakAll:p}),m)}al.displayName="Label";var MF=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,p=t.y,m=t.top,b=t.left,v=t.width,g=t.height,y=t.clockWise,w=t.labelViewBox;if(w)return w;if(ir(v)&&ir(g)){if(ir(f)&&ir(p))return{x:f,y:p,width:v,height:g};if(ir(m)&&ir(b))return{x:m,y:b,width:v,height:g}}return ir(f)&&ir(p)?{x:f,y:p,width:0,height:0}:ir(r)&&ir(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},xY=function(t,r){return t?t===!0?ut.createElement(al,{key:"label-implicit",viewBox:r}):qi(t)?ut.createElement(al,{key:"label-implicit",viewBox:r,value:t}):D.isValidElement(t)?t.type===al?D.cloneElement(t,{key:"label-implicit",viewBox:r}):ut.createElement(al,{key:"label-implicit",content:t,viewBox:r}):On(t)?ut.createElement(al,{key:"label-implicit",content:t,viewBox:r}):ap(t)?ut.createElement(al,Fx({viewBox:r},t,{key:"label-implicit"})):null:null},gY=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=MF(t),o=Qd(s,al).map(function(c,d){return D.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!a)return o;var l=xY(t.label,r||i);return[l].concat(eY(o))};al.parseViewBox=MF;al.renderCallByParent=gY;var L5,vO;function vY(){if(vO)return L5;vO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return L5=e,L5}var bY=vY();const yY=Pa(bY);function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}var wY=["valueAccessor"],NY=["data","dataKey","clockWise","id","textBreakAll"];function jY(e){return CY(e)||_Y(e)||SY(e)||kY()}function kY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SY(e,t){if(e){if(typeof e=="string")return P4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P4(e,t)}}function _Y(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CY(e){if(Array.isArray(e))return P4(e)}function P4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B1.apply(this,arguments)}function bO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(r),!0).forEach(function(a){AY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AY(e,t,r){return t=EY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EY(e){var t=TY(e,"string");return Mx(t)=="symbol"?t:t+""}function TY(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Mx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wO(e,t){if(e==null)return{};var r=OY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function OY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var PY=function(t){return Array.isArray(t.value)?yY(t.value):t.value};function g0(e){var t=e.valueAccessor,r=t===void 0?PY:t,a=wO(e,wY),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=wO(a,NY);return!s||!s.length?null:ut.createElement(Ms,{className:"recharts-label-list"},s.map(function(u,f){var p=Hn(i)?r(u,f):Sc(u&&u.payload,i),m=Hn(l)?{}:{id:"".concat(l,"-").concat(f)};return ut.createElement(al,B1({},zn(u,!0),d,m,{parentViewBox:u.parentViewBox,value:p,textBreakAll:c,viewBox:al.parseViewBox(Hn(o)?u:yO(yO({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}g0.displayName="LabelList";function IY(e,t){return e?e===!0?ut.createElement(g0,{key:"labelList-implicit",data:t}):ut.isValidElement(e)||On(e)?ut.createElement(g0,{key:"labelList-implicit",data:t,content:e}):ap(e)?ut.createElement(g0,B1({data:t},e,{key:"labelList-implicit"})):null:null}function DY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Qd(a,g0).map(function(o,l){return D.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=IY(e.label,t);return[i].concat(jY(s))}g0.renderCallByParent=DY;function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function I4(){return I4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I4.apply(this,arguments)}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(a){LY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function LY(e,t,r){return t=FY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=MY(e,"string");return Rx(t)=="symbol"?t:t+""}function MY(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RY=function(t,r){var a=Wd(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},xv=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+s,f=Math.asin(c/u)/R1,p=d?i:i+o*f,m=Io(r,a,u,p),b=Io(r,a,s,p),v=d?i-o*f:i,g=Io(r,a,u*Math.cos(f*R1),v);return{center:m,circleTangency:b,lineTangency:g,theta:f}},RF=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=RY(o,l),d=o+c,u=Io(r,a,i,o),f=Io(r,a,i,d),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var m=Io(r,a,s,o),b=Io(r,a,s,d);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(a," Z");return p},BY=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Wd(u-d),p=xv({cx:r,cy:a,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,b=p.lineTangency,v=p.theta,g=xv({cx:r,cy:a,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=g.circleTangency,w=g.lineTangency,j=g.theta,N=c?Math.abs(d-u):Math.abs(d-u)-v-j;if(N<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):RF({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(s>0){var A=xv({cx:r,cy:a,radius:s,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=A.circleTangency,P=A.lineTangency,I=A.theta,B=xv({cx:r,cy:a,radius:s,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=B.circleTangency,E=B.lineTangency,F=B.theta,q=c?Math.abs(d-u):Math.abs(d-u)-I-F;if(q<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(q>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},UY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BF=function(t){var r=jO(jO({},UY),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,p=r.className;if(o<i||u===f)return null;var m=ca("recharts-sector",p),b=o-i,v=wh(l,b,0,!0),g;return v>0&&Math.abs(u-f)<360?g=BY({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):g=RF({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),ut.createElement("path",I4({},zn(r,!0),{className:m,d:g,role:"img"}))};function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function D4(){return D4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D4.apply(this,arguments)}function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(r),!0).forEach(function(a){qY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qY(e,t,r){return t=$Y(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Y(e){var t=zY(e,"string");return Bx(t)=="symbol"?t:t+""}function zY(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _O={curveBasisClosed:c$,curveBasisOpen:d$,curveBasis:l$,curveBumpX:Kq,curveBumpY:Xq,curveLinearClosed:u$,curveLinear:Ub,curveMonotoneX:f$,curveMonotoneY:h$,curveNatural:m$,curveStep:p$,curveStepAfter:g$,curveStepBefore:x$},gv=function(t){return t.x===+t.x&&t.y===+t.y},Ip=function(t){return t.x},Dp=function(t){return t.y},HY=function(t,r){if(On(t))return t;var a="curve".concat(Rb(t));return(a==="curveMonotone"||a==="curveBump")&&r?_O["".concat(a).concat(r==="vertical"?"Y":"X")]:_O[a]||Ub},WY=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=HY(a,l),f=d?i.filter(function(v){return gv(v)}):i,p;if(Array.isArray(o)){var m=d?o.filter(function(v){return gv(v)}):o,b=f.map(function(v,g){return SO(SO({},v),{},{base:m[g]})});return l==="vertical"?p=lv().y(Dp).x1(Ip).x0(function(v){return v.base.x}):p=lv().x(Ip).y1(Dp).y0(function(v){return v.base.y}),p.defined(gv).curve(u),p(b)}return l==="vertical"&&ir(o)?p=lv().y(Dp).x1(Ip).x0(o):ir(o)?p=lv().x(Ip).y1(Dp).y0(o):p=zD().x(Ip).y(Dp),p.defined(gv).curve(u),p(f)},ax=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?WY(t):s;return D.createElement("path",D4({},zn(t,!1),d1(t),{className:ca("recharts-curve",r),d:o,ref:i}))},F5={exports:{}},M5,CO;function VY(){if(CO)return M5;CO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M5=e,M5}var R5,AO;function GY(){if(AO)return R5;AO=1;var e=VY();function t(){}function r(){}return r.resetWarningCache=t,R5=function(){function a(o,l,c,d,u,f){if(f!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},R5}var EO;function KY(){return EO||(EO=1,F5.exports=GY()()),F5.exports}var XY=KY();const ja=Pa(XY),{getOwnPropertyNames:YY,getOwnPropertySymbols:QY}=Object,{hasOwnProperty:JY}=Object.prototype;function B5(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function vv(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const c=e(r,a,s);return i.delete(r),i.delete(a),c}}function ZY(e){return e?.[Symbol.toStringTag]}function TO(e){return YY(e).concat(QY(e))}const eQ=Object.hasOwn||((e,t)=>JY.call(e,t));function Mh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const tQ="__v",rQ="__o",nQ="_owner",{getOwnPropertyDescriptor:OO,keys:PO}=Object;function aQ(e,t){return e.byteLength===t.byteLength&&U1(new Uint8Array(e),new Uint8Array(t))}function sQ(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function iQ(e,t){return e.byteLength===t.byteLength&&U1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function oQ(e,t){return Mh(e.getTime(),t.getTime())}function lQ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function cQ(e,t){return e===t}function IO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(s[f]){f++;continue}const p=o.value,m=l.value;if(r.equals(p[0],m[0],c,f,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1;c++}return!0}const dQ=Mh;function uQ(e,t,r){const a=PO(e);let s=a.length;if(PO(t).length!==s)return!1;for(;s-- >0;)if(!UF(e,t,r,a[s]))return!1;return!0}function Lp(e,t,r){const a=TO(e);let s=a.length;if(TO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!UF(e,t,r,i)||(o=OO(e,i),l=OO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function fQ(e,t){return Mh(e.valueOf(),t.valueOf())}function hQ(e,t){return e.source===t.source&&e.flags===t.flags}function DO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function U1(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function mQ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function UF(e,t,r,a){return(a===nQ||a===rQ||a===tQ)&&(e.$$typeof||t.$$typeof)?!0:eQ(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const pQ="[object ArrayBuffer]",xQ="[object Arguments]",gQ="[object Boolean]",vQ="[object DataView]",bQ="[object Date]",yQ="[object Error]",wQ="[object Map]",NQ="[object Number]",jQ="[object Object]",kQ="[object RegExp]",SQ="[object Set]",_Q="[object String]",CQ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},AQ="[object URL]",EQ=Object.prototype.toString;function TQ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:b}){return function(g,y,w){if(g===y)return!0;if(g==null||y==null)return!1;const j=typeof g;if(j!==typeof y)return!1;if(j!=="object")return j==="number"?l(g,y,w):j==="function"?i(g,y,w):!1;const N=g.constructor;if(N!==y.constructor)return!1;if(N===Object)return c(g,y,w);if(Array.isArray(g))return t(g,y,w);if(N===Date)return a(g,y,w);if(N===RegExp)return u(g,y,w);if(N===Map)return o(g,y,w);if(N===Set)return f(g,y,w);const S=EQ.call(g);if(S===bQ)return a(g,y,w);if(S===kQ)return u(g,y,w);if(S===wQ)return o(g,y,w);if(S===SQ)return f(g,y,w);if(S===jQ)return typeof g.then!="function"&&typeof y.then!="function"&&c(g,y,w);if(S===AQ)return m(g,y,w);if(S===yQ)return s(g,y,w);if(S===xQ)return c(g,y,w);if(CQ[S])return p(g,y,w);if(S===pQ)return e(g,y,w);if(S===vQ)return r(g,y,w);if(S===gQ||S===NQ||S===_Q)return d(g,y,w);if(b){let A=b[S];if(!A){const _=ZY(g);_&&(A=b[_])}if(A)return A(g,y,w)}return!1}}function OQ({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:aQ,areArraysEqual:r?Lp:sQ,areDataViewsEqual:iQ,areDatesEqual:oQ,areErrorsEqual:lQ,areFunctionsEqual:cQ,areMapsEqual:r?B5(IO,Lp):IO,areNumbersEqual:dQ,areObjectsEqual:r?Lp:uQ,arePrimitiveWrappersEqual:fQ,areRegExpsEqual:hQ,areSetsEqual:r?B5(DO,Lp):DO,areTypedArraysEqual:r?B5(U1,Lp):U1,areUrlsEqual:mQ,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=vv(a.areArraysEqual),i=vv(a.areMapsEqual),o=vv(a.areObjectsEqual),l=vv(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function PQ(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function IQ({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=r();return t(l,c,{cache:d,equals:a,meta:u,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const DQ=O0();O0({strict:!0});O0({circular:!0});O0({circular:!0,strict:!0});O0({createInternalComparator:()=>Mh});O0({strict:!0,createInternalComparator:()=>Mh});O0({circular:!0,createInternalComparator:()=>Mh});O0({circular:!0,createInternalComparator:()=>Mh,strict:!0});function O0(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=OQ(e),o=TQ(i),l=r?r(o):PQ(o);return IQ({circular:t,comparator:o,createState:a,equals:l,strict:s})}function LQ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function LO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):LQ(s)};requestAnimationFrame(a)}function L4(e){"@babel/helpers - typeof";return L4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L4(e)}function FQ(e){return UQ(e)||BQ(e)||RQ(e)||MQ()}function MQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RQ(e,t){if(e){if(typeof e=="string")return FO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FO(e,t)}}function FO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function BQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UQ(e){if(Array.isArray(e))return e}function qQ(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=FQ(o),c=l[0],d=l.slice(1);if(typeof c=="number"){LO(s.bind(null,d),c);return}s(c),LO(s.bind(null,d));return}L4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function MO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function RO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(r),!0).forEach(function(a){qF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qF(e,t,r){return t=$Q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e){var t=zQ(e,"string");return Ux(t)==="symbol"?t:String(t)}function zQ(e,t){if(Ux(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ux(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HQ=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},WQ=function(t){return t},VQ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},sx=function(t,r){return Object.keys(r).reduce(function(a,s){return RO(RO({},a),{},qF({},s,t(s,r[s])))},{})},BO=function(t,r,a){return t.map(function(s){return"".concat(VQ(s)," ").concat(r,"ms ").concat(a)}).join(",")};function GQ(e,t){return YQ(e)||XQ(e,t)||$F(e,t)||KQ()}function KQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function YQ(e){if(Array.isArray(e))return e}function QQ(e){return eJ(e)||ZQ(e)||$F(e)||JQ()}function JQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $F(e,t){if(e){if(typeof e=="string")return F4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F4(e,t)}}function ZQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eJ(e){if(Array.isArray(e))return F4(e)}function F4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var q1=1e-4,zF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},HF=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},UO=function(t,r){return function(a){var s=zF(t,r);return HF(s,a)}},tJ=function(t,r){return function(a){var s=zF(t,r),i=[].concat(QQ(s.map(function(o,l){return o*l}).slice(1)),[0]);return HF(i,a)}},qO=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=GQ(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var f=UO(s,o),p=UO(i,l),m=tJ(s,o),b=function(y){return y>1?1:y<0?0:y},v=function(y){for(var w=y>1?1:y,j=w,N=0;N<8;++N){var S=f(j)-w,A=m(j);if(Math.abs(S-w)<q1||A<q1)return p(j);j=b(j-S/A)}return p(j)};return v.isStepper=!1,v},rJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(u,f,p){var m=-(u-f)*a,b=p*i,v=p+(m-b)*l/1e3,g=p*l/1e3+u;return Math.abs(g-f)<q1&&Math.abs(v)<q1?[f,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},nJ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qO(s);case"spring":return rJ();default:if(s.split("(")[0]==="cubic-bezier")return qO(s)}return typeof s=="function"?s:null};function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function $O(e){return iJ(e)||sJ(e)||WF(e)||aJ()}function aJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iJ(e){if(Array.isArray(e))return R4(e)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(a){M4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M4(e,t,r){return t=oJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e){var t=lJ(e,"string");return qx(t)==="symbol"?t:String(t)}function lJ(e,t){if(qx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qx(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cJ(e,t){return fJ(e)||uJ(e,t)||WF(e,t)||dJ()}function dJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WF(e,t){if(e){if(typeof e=="string")return R4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R4(e,t)}}function R4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function uJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function fJ(e){if(Array.isArray(e))return e}var $1=function(t,r,a){return t+(r-t)*a},B4=function(t){var r=t.from,a=t.to;return r!==a},hJ=function e(t,r,a){var s=sx(function(i,o){if(B4(o)){var l=t(o.from,o.to,o.velocity),c=cJ(l,2),d=c[0],u=c[1];return Eo(Eo({},o),{},{from:d,velocity:u})}return o},r);return a<1?sx(function(i,o){return B4(o)?Eo(Eo({},o),{},{velocity:$1(o.velocity,s[i].velocity,a),from:$1(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const mJ=(function(e,t,r,a,s){var i=HQ(e,t),o=i.reduce(function(g,y){return Eo(Eo({},g),{},M4({},y,[e[y],t[y]]))},{}),l=i.reduce(function(g,y){return Eo(Eo({},g),{},M4({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,d,u,f=function(){return null},p=function(){return sx(function(y,w){return w.from},l)},m=function(){return!Object.values(l).filter(B4).length},b=function(y){d||(d=y);var w=y-d,j=w/r.dt;l=hJ(r,l,j),s(Eo(Eo(Eo({},e),t),p())),d=y,m()||(c=requestAnimationFrame(f))},v=function(y){u||(u=y);var w=(y-u)/a,j=sx(function(S,A){return $1.apply(void 0,$O(A).concat([r(w)]))},o);if(s(Eo(Eo(Eo({},e),t),j)),w<1)c=requestAnimationFrame(f);else{var N=sx(function(S,A){return $1.apply(void 0,$O(A).concat([r(1)]))},o);s(Eo(Eo(Eo({},e),t),N))}};return f=r.isStepper?b:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}var pJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function xJ(e,t){if(e==null)return{};var r=gJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function gJ(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function U5(e){return wJ(e)||yJ(e)||bJ(e)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(e,t){if(e){if(typeof e=="string")return U4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U4(e,t)}}function yJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wJ(e){if(Array.isArray(e))return U4(e)}function U4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function HO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HO(Object(r),!0).forEach(function(a){Gp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gp(e,t,r){return t=VF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jJ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,VF(a.key),a)}}function kJ(e,t,r){return t&&jJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VF(e){var t=SJ(e,"string");return Bm(t)==="symbol"?t:String(t)}function SJ(e,t){if(Bm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q4(e,t)}function q4(e,t){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},q4(e,t)}function CJ(e){var t=AJ();return function(){var a=z1(e),s;if(t){var i=z1(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return $4(this,s)}}function $4(e,t){if(t&&(Bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z4(e)}function z4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z1(e){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z1(e)}var Ef=(function(e){_J(r,e);var t=CJ(r);function r(a,s){var i;NJ(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,p=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(z4(i)),i.changeStyle=i.changeStyle.bind(z4(i)),!l||m<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:u}),$4(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof p=="function")return i.state={style:d},$4(i);i.state={style:c?Gp({},c,d):d}}else i.state={style:{}};return i}return kJ(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,p=this.state.style;if(l){if(!o){var m={style:c?Gp({},c,u):u};this.state&&p&&(c&&p[c]!==u||!c&&p!==u)&&this.setState(m);return}if(!(DQ(s.to,u)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||d?f:s.to;if(this.state&&p){var g={style:c?Gp({},c,v):v};(c&&p[c]!==v||!c&&p!==v)&&this.setState(g)}this.runAnimation(Ld(Ld({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,f=s.onAnimationEnd,p=s.onAnimationStart,m=mJ(o,l,nJ(d),c,this.changeStyle),b=function(){i.stopJSAnimation=m()};this.manager.start([p,u,b,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,f=d.duration,p=f===void 0?0:f,m=function(v,g,y){if(y===0)return v;var w=g.duration,j=g.easing,N=j===void 0?"ease":j,S=g.style,A=g.properties,_=g.onAnimationEnd,P=y>0?o[y-1]:g,I=A||Object.keys(S);if(typeof N=="function"||N==="spring")return[].concat(U5(v),[i.runJSAnimation.bind(i,{from:P.style,to:S,duration:w,easing:N}),w]);var B=BO(I,w,N),T=Ld(Ld(Ld({},P.style),S),{},{transition:B});return[].concat(U5(v),[T,w,_]).filter(WQ)};return this.manager.start([c].concat(U5(o.reduce(m,[u,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=qQ());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,f=s.onAnimationEnd,p=s.steps,m=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var v=l?Gp({},l,c):c,g=BO(Object.keys(v),o,d);b.start([u,i,Ld(Ld({},v),{},{transition:g}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=xJ(s,pJ),d=D.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var f=function(m){var b=m.props,v=b.style,g=v===void 0?{}:v,y=b.className,w=D.cloneElement(m,Ld(Ld({},c),{},{style:Ld(Ld({},g),u),className:y}));return w};return d===1?f(D.Children.only(i)):ut.createElement("div",null,D.Children.map(i,function(p){return f(p)}))}}]),r})(D.PureComponent);Ef.displayName="Animate";Ef.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ef.propTypes={from:ja.oneOfType([ja.object,ja.string]),to:ja.oneOfType([ja.object,ja.string]),attributeName:ja.string,duration:ja.number,begin:ja.number,easing:ja.oneOfType([ja.string,ja.func]),steps:ja.arrayOf(ja.shape({duration:ja.number.isRequired,style:ja.object.isRequired,easing:ja.oneOfType([ja.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ja.func]),properties:ja.arrayOf("string"),onAnimationEnd:ja.func})),children:ja.oneOfType([ja.node,ja.func]),isActive:ja.bool,canBegin:ja.bool,onAnimationEnd:ja.func,shouldReAnimate:ja.bool,onAnimationStart:ja.func,onAnimationReStart:ja.func};function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H1.apply(this,arguments)}function EJ(e,t){return IJ(e)||PJ(e,t)||OJ(e,t)||TJ()}function TJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(e,t){if(e){if(typeof e=="string")return WO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WO(e,t)}}function WO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function PJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function IJ(e){if(Array.isArray(e))return e}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function GO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(a){DJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function DJ(e,t,r){return t=LJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=FJ(e,"string");return $x(t)=="symbol"?t:t+""}function FJ(e,t){if($x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($x(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KO=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,u;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=i[p]>o?o:i[p];u="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+a,",").concat(r+l*f[1])),u+="L ".concat(t+a,",").concat(r+s-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),u+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*f[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);u="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+a-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+a,",").concat(r+l*b,`
            L `).concat(t+a,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+a-c*b,",").concat(r+s,`
            L `).concat(t+c*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*b," Z")}else u="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return u},MJ=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),f=Math.min(o,o+c),p=Math.max(o,o+c);return a>=d&&a<=u&&s>=f&&s<=p}return!1},RJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},HS=function(t){var r=GO(GO({},RJ),t),a=D.useRef(),s=D.useState(-1),i=EJ(s,2),o=i[0],l=i[1];D.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var N=a.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,p=r.radius,m=r.className,b=r.animationEasing,v=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,w=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var j=ca("recharts-rectangle",m);return w?ut.createElement(Ef,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:v,animationEasing:b,isActive:w},function(N){var S=N.width,A=N.height,_=N.x,P=N.y;return ut.createElement(Ef,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:y,easing:b},ut.createElement("path",H1({},zn(r,!0),{className:j,d:KO(_,P,S,A,p),ref:a})))}):ut.createElement("path",H1({},zn(r,!0),{className:j,d:KO(c,d,u,f,p)}))};function H4(){return H4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H4.apply(this,arguments)}var WS=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=ca("recharts-dot",i);return r===+r&&a===+a&&s===+s?D.createElement("circle",H4({},zn(t,!1),d1(t),{className:o,cx:r,cy:a,r:s})):null};function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}var BJ=["x","y","top","left","width","height","className"];function W4(){return W4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W4.apply(this,arguments)}function XO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function UJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(r),!0).forEach(function(a){qJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qJ(e,t,r){return t=$J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=zJ(e,"string");return zx(t)=="symbol"?t:t+""}function zJ(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HJ(e,t){if(e==null)return{};var r=WJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WJ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var VJ=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},GJ=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,p=t.height,m=p===void 0?0:p,b=t.className,v=HJ(t,BJ),g=UJ({x:a,y:i,top:l,left:d,width:f,height:m},v);return!ir(a)||!ir(i)||!ir(f)||!ir(m)||!ir(l)||!ir(d)?null:ut.createElement("path",W4({},zn(g,!0),{className:ca("recharts-cross",b),d:VJ(a,i,f,m,l,d)}))},q5,YO;function KJ(){if(YO)return q5;YO=1;var e=fL(),t=e(Object.getPrototypeOf,Object);return q5=t,q5}var $5,QO;function XJ(){if(QO)return $5;QO=1;var e=Of(),t=KJ(),r=Pf(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!r(u)||e(u)!=a)return!1;var f=t(u);if(f===null)return!0;var p=l.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return $5=d,$5}var YJ=XJ();const QJ=Pa(YJ);var z5,JO;function JJ(){if(JO)return z5;JO=1;var e=Of(),t=Pf(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return z5=a,z5}var ZJ=JJ();const eZ=Pa(ZJ);function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W1.apply(this,arguments)}function tZ(e,t){return sZ(e)||aZ(e,t)||nZ(e,t)||rZ()}function rZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nZ(e,t){if(e){if(typeof e=="string")return ZO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZO(e,t)}}function ZO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function aZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function sZ(e){if(Array.isArray(e))return e}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(a){iZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iZ(e,t,r){return t=oZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oZ(e){var t=lZ(e,"string");return Hx(t)=="symbol"?t:t+""}function lZ(e,t){if(Hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rP=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},cZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dZ=function(t){var r=tP(tP({},cZ),t),a=D.useRef(),s=D.useState(-1),i=tZ(s,2),o=i[0],l=i[1];D.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var j=a.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,p=r.height,m=r.className,b=r.animationEasing,v=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||p!==+p||u===0&&f===0||p===0)return null;var w=ca("recharts-trapezoid",m);return y?ut.createElement(Ef,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:p,x:c,y:d},duration:v,animationEasing:b,isActive:y},function(j){var N=j.upperWidth,S=j.lowerWidth,A=j.height,_=j.x,P=j.y;return ut.createElement(Ef,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:b},ut.createElement("path",W1({},zn(r,!0),{className:w,d:rP(_,P,N,S,A),ref:a})))}):ut.createElement("g",null,ut.createElement("path",W1({},zn(r,!0),{className:w,d:rP(c,d,u,f,p)})))},uZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function fZ(e,t){if(e==null)return{};var r=hZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function V1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(a){mZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mZ(e,t,r){return t=pZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pZ(e){var t=xZ(e,"string");return Wx(t)=="symbol"?t:t+""}function xZ(e,t){if(Wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gZ(e,t){return V1(V1({},t),e)}function vZ(e,t){return e==="symbols"}function aP(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ut.createElement(HS,r);case"trapezoid":return ut.createElement(dZ,r);case"sector":return ut.createElement(BF,r);case"symbols":if(vZ(t))return ut.createElement(cS,r);break;default:return null}}function bZ(e){return D.isValidElement(e)?e.props:e}function yZ(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?gZ:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=fZ(e,uZ),d;if(D.isValidElement(t))d=D.cloneElement(t,V1(V1({},c),bZ(t)));else if(On(t))d=t(c);else if(QJ(t)&&!eZ(t)){var u=s(t,c);d=ut.createElement(aP,{shapeType:r,elementProps:u})}else{var f=c;d=ut.createElement(aP,{shapeType:r,elementProps:f})}return l?ut.createElement(Ms,{className:o},d):d}function ty(e,t){return t!=null&&"trapezoids"in e.props}function ry(e,t){return t!=null&&"sectors"in e.props}function Vx(e,t){return t!=null&&"points"in e.props}function wZ(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function NZ(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function jZ(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function kZ(e,t){var r;return ty(e,t)?r=wZ:ry(e,t)?r=NZ:Vx(e,t)&&(r=jZ),r}function SZ(e,t){var r;return ty(e,t)?r="trapezoids":ry(e,t)?r="sectors":Vx(e,t)&&(r="points"),r}function _Z(e,t){if(ty(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ry(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Vx(e,t)?t.payload:{}}function CZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=SZ(r,t),i=_Z(r,t),o=a.filter(function(c,d){var u=Ex(i,c),f=r.props[s].filter(function(b){var v=kZ(r,t);return v(b,t)}),p=r.props[s].indexOf(f[f.length-1]),m=d===p;return u&&m}),l=a.indexOf(o[o.length-1]);return l}var H5,sP;function AZ(){if(sP)return H5;sP=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,c=t(e((s-a)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=i;return d}return H5=r,H5}var W5,iP;function GF(){if(iP)return W5;iP=1;var e=AL(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return W5=a,W5}var V5,oP;function EZ(){if(oP)return V5;oP=1;var e=AZ(),t=Hb(),r=GF();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return V5=a,V5}var G5,lP;function TZ(){if(lP)return G5;lP=1;var e=EZ(),t=e();return G5=t,G5}var OZ=TZ();const G1=Pa(OZ);function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(a){KF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KF(e,t,r){return t=PZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PZ(e){var t=IZ(e,"string");return Gx(t)=="symbol"?t:t+""}function IZ(e,t){if(Gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DZ=["Webkit","Moz","O","ms"],LZ=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=DZ.reduce(function(i,o){return dP(dP({},i),{},KF({},o+a,r))},{});return s[t]=r,s};function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function K1(){return K1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K1.apply(this,arguments)}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function K5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(a){xc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YF(a.key),a)}}function MZ(e,t,r){return t&&fP(e.prototype,t),r&&fP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RZ(e,t,r){return t=X1(t),BZ(e,XF()?Reflect.construct(t,r||[],X1(e).constructor):t.apply(e,r))}function BZ(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UZ(e)}function UZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XF=function(){return!!e})()}function X1(e){return X1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X1(e)}function qZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V4(e,t)}function V4(e,t){return V4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},V4(e,t)}function xc(e,t,r){return t=YF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YF(e){var t=$Z(e,"string");return Um(t)=="symbol"?t:t+""}function $Z(e,t){if(Um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Um(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zZ=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=rx().domain(G1(0,c)).range([i,i+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(s),scale:d,scaleValues:u}},hP=function(t){return t.changedTouches&&!!t.changedTouches.length},qm=(function(e){function t(r){var a;return FZ(this,t),a=RZ(this,t,[r]),xc(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),xc(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),xc(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),xc(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),xc(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),xc(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),xc(a,"handleSlideDragStart",function(s){var i=hP(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return qZ(t,e),MZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(s,i),p=Math.max(s,i),m=t.getIndexInRange(o,f),b=t.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:b===u?u:b-b%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Sc(i[a],l,a);return On(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,p=c.startIndex,m=c.endIndex,b=c.onChange,v=a.pageX-i;v>0?v=Math.min(v,d+u-f-l,d+u-f-o):v<0&&(v=Math.max(v,d-o,d-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==p||g.endIndex!==m)&&b&&b(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=hP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,f=u.x,p=u.width,m=u.travellerWidth,b=u.onChange,v=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},w=a.pageX-i;w>0?w=Math.min(w,f+p-m-d):w<0&&(w=Math.max(w,f-d)),y[o]=d+w;var j=this.getIndex(y),N=j.startIndex,S=j.endIndex,A=function(){var P=g.length-1;return o==="startX"&&(l>c?N%v===0:S%v===0)||l<c&&S===P||o==="endX"&&(l>c?S%v===0:N%v===0)||l>c&&S===P};this.setState(xc(xc({},o,d+w),"brushMoveStartX",a.pageX),function(){b&&A()&&b(j)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],f=l.indexOf(u);if(f!==-1){var p=f+a;if(!(p===-1||p>=l.length)){var m=l[p];s==="startX"&&m>=d||s==="endX"&&m<=c||this.setState(xc({},s,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return ut.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,d=a.children,u=a.padding,f=D.Children.only(d);return f?ut.cloneElement(f,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,p=c.traveller,m=c.ariaLabel,b=c.data,v=c.startIndex,g=c.endIndex,y=Math.max(a,this.props.x),w=K5(K5({},zn(this.props,!1)),{},{x:y,y:d,width:u,height:f}),j=m||"Min value: ".concat((i=b[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[g])===null||o===void 0?void 0:o.name);return ut.createElement(Ms,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,w))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(a,s)+d,f=Math.max(Math.abs(s-a)-d,0);return ut.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,u=this.state,f=u.startX,p=u.endX,m=5,b={pointerEvents:"none",fill:d};return ut.createElement(Ms,{className:"recharts-brush-texts"},ut.createElement(N1,K1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:o+l/2},b),this.getTextOfTick(s)),ut.createElement(N1,K1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+m,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,d=a.width,u=a.height,f=a.alwaysShowText,p=this.state,m=p.startX,b=p.endX,v=p.isTextActive,g=p.isSlideMoving,y=p.isTravellerMoving,w=p.isTravellerFocused;if(!s||!s.length||!ir(l)||!ir(c)||!ir(d)||!ir(u)||d<=0||u<=0)return null;var j=ca("recharts-brush",i),N=ut.Children.count(o)===1,S=LZ("userSelect","none");return ut.createElement(Ms,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,b),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(b,"endX"),(v||g||y||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(i+l/2)-1;return ut.createElement(ut.Fragment,null,ut.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),ut.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),ut.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return ut.isValidElement(a)?i=ut.cloneElement(a,s):On(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,u=a.startIndex,f=a.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return K5({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?zZ({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var p=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])})(D.PureComponent);xc(qm,"displayName","Brush");xc(qm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var X5,mP;function HZ(){if(mP)return X5;mP=1;var e=xS();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return X5=t,X5}var Y5,pP;function WZ(){if(pP)return Y5;pP=1;var e=sL(),t=A0(),r=HZ(),a=ec(),s=Hb();function i(o,l,c){var d=a(o)?e:r;return c&&s(o,l,c)&&(l=void 0),d(o,t(l,3))}return Y5=i,Y5}var VZ=WZ();const GZ=Pa(VZ);var Du=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},Q5,xP;function KZ(){if(xP)return Q5;xP=1;var e=jL();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return Q5=t,Q5}var J5,gP;function XZ(){if(gP)return J5;gP=1;var e=KZ(),t=wL(),r=A0();function a(s,i){var o={};return i=r(i,3),t(s,function(l,c,d){e(o,c,i(l,c,d))}),o}return J5=a,J5}var YZ=XZ();const QZ=Pa(YZ);var Z5,vP;function JZ(){if(vP)return Z5;vP=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return Z5=e,Z5}var ej,bP;function ZZ(){if(bP)return ej;bP=1;var e=xS();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return ej=t,ej}var tj,yP;function eee(){if(yP)return tj;yP=1;var e=JZ(),t=ZZ(),r=A0(),a=ec(),s=Hb();function i(o,l,c){var d=a(o)?e:t;return c&&s(o,l,c)&&(l=void 0),d(o,r(l,3))}return tj=i,tj}var tee=eee();const QF=Pa(tee);var ree=["x","y"];function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function G4(){return G4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G4.apply(this,arguments)}function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(a){nee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nee(e,t,r){return t=aee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aee(e){var t=see(e,"string");return Kx(t)=="symbol"?t:t+""}function see(e,t){if(Kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iee(e,t){if(e==null)return{};var r=oee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function oee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function lee(e,t){var r=e.x,a=e.y,s=iee(e,ree),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),f="".concat(t.width||s.width),p=parseInt(f,10);return Fp(Fp(Fp(Fp(Fp({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function NP(e){return ut.createElement(yZ,G4({shapeType:"rectangle",propTransformer:lee,activeClassName:"recharts-active-bar"},e))}var cee=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=ir(a)||pq(a);return i?t(a,s):(i||jh(),r)}},dee=["value","background"],JF;function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function uee(e,t){if(e==null)return{};var r=fee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y1.apply(this,arguments)}function jP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(r),!0).forEach(function(a){u0(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,e7(a.key),a)}}function mee(e,t,r){return t&&kP(e.prototype,t),r&&kP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pee(e,t,r){return t=Q1(t),xee(e,ZF()?Reflect.construct(t,r||[],Q1(e).constructor):t.apply(e,r))}function xee(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gee(e)}function gee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZF=function(){return!!e})()}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(e)}function vee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K4(e,t)}function K4(e,t){return K4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},K4(e,t)}function u0(e,t,r){return t=e7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e7(e){var t=bee(e,"string");return $m(t)=="symbol"?t:t+""}function bee(e,t){if($m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($m(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jg=(function(e){function t(){var r;hee(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=pee(this,t,[].concat(s)),u0(r,"state",{isAnimationFinished:!1}),u0(r,"id",gg("recharts-bar-")),u0(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),u0(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return vee(t,e),mee(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=zn(this.props,!1);return a&&a.map(function(f,p){var m=p===c,b=m?d:o,v=wi(wi(wi({},u),f),{},{isActive:m,option:b,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ut.createElement(Ms,Y1({className:"recharts-bar-rectangle"},u1(s.props,f,p),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(p)}),ut.createElement(NP,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,p=this.state.prevData;return ut.createElement(Ef,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var b=m.t,v=i.map(function(g,y){var w=p&&p[y];if(w){var j=rd(w.x,g.x),N=rd(w.y,g.y),S=rd(w.width,g.width),A=rd(w.height,g.height);return wi(wi({},g),{},{x:j(b),y:N(b),width:S(b),height:A(b)})}if(o==="horizontal"){var _=rd(0,g.height),P=_(b);return wi(wi({},g),{},{y:g.y+g.height-P,height:P})}var I=rd(0,g.width),B=I(b);return wi(wi({},g),{},{width:B})});return ut.createElement(Ms,null,a.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Ex(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=zn(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,p=uee(d,dee);if(!f)return null;var m=wi(wi(wi(wi(wi({},p),{},{fill:"#eee"},f),c),u1(a.props,d,u)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ut.createElement(NP,Y1({key:"background-bar-".concat(u),option:a.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=Qd(u,ey);if(!f)return null;var p=d==="vertical"?o[0].height/2:o[0].width/2,m=function(g,y){var w=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:w,errorVal:Sc(g,y)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ut.createElement(Ms,b,f.map(function(v){return ut.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,u=a.top,f=a.width,p=a.height,m=a.isAnimationActive,b=a.background,v=a.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=ca("recharts-bar",o),w=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=w||j,S=Hn(v)?this.id:v;return ut.createElement(Ms,{className:y},w||j?ut.createElement("defs",null,ut.createElement("clipPath",{id:"clipPath-".concat(S)},ut.createElement("rect",{x:w?d:d-f/2,y:j?u:u-p/2,width:w?f:f*2,height:j?p:p*2}))):null,ut.createElement(Ms,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,S),(!m||g)&&g0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(D.PureComponent);JF=jg;u0(jg,"displayName","Bar");u0(jg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!op.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});u0(jg,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,p=e.offset,m=DX(a,r);if(!m)return null;var b=t.layout,v=r.type.defaultProps,g=v!==void 0?wi(wi({},v),r.props):r.props,y=g.dataKey,w=g.children,j=g.minPointSize,N=b==="horizontal"?o:i,S=d?N.scale.domain():null,A=$X({numericAxis:N}),_=Qd(w,TL),P=f.map(function(I,B){var T,E,F,q,H,Q;d?T=LX(d[u+B],S):(T=Sc(I,y),Array.isArray(T)||(T=[A,T]));var J=cee(j,JF.defaultProps.minPointSize)(T[1],B);if(b==="horizontal"){var re,X=[o.scale(T[0]),o.scale(T[1])],ee=X[0],W=X[1];E=dO({axis:i,ticks:l,bandSize:s,offset:m.offset,entry:I,index:B}),F=(re=W??ee)!==null&&re!==void 0?re:void 0,q=m.size;var O=ee-W;if(H=Number.isNaN(O)?0:O,Q={x:E,y:o.y,width:q,height:o.height},Math.abs(J)>0&&Math.abs(H)<Math.abs(J)){var z=Wd(H||J)*(Math.abs(J)-Math.abs(H));F-=z,H+=z}}else{var V=[i.scale(T[0]),i.scale(T[1])],U=V[0],K=V[1];if(E=U,F=dO({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:I,index:B}),q=K-U,H=m.size,Q={x:i.x,y:F,width:i.width,height:H},Math.abs(J)>0&&Math.abs(q)<Math.abs(J)){var se=Wd(q||J)*(Math.abs(J)-Math.abs(q));q+=se}}return wi(wi(wi({},I),{},{x:E,y:F,width:q,height:H,value:d?T:T[1],payload:I,background:Q},_&&_[B]&&_[B].props),{},{tooltipPayload:[FF(r,I)],tooltipPosition:{x:E+q/2,y:F+H/2}})});return wi({data:P,layout:b},p)});function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function yee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t7(a.key),a)}}function wee(e,t,r){return t&&SP(e.prototype,t),r&&SP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(a){ny(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ny(e,t,r){return t=t7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t7(e){var t=Nee(e,"string");return Xx(t)=="symbol"?t:t+""}function Nee(e,t){if(Xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jee=function(t,r,a,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},p=!!gc(d,jg);return u.reduce(function(m,b){var v=r[b],g=v.orientation,y=v.domain,w=v.padding,j=w===void 0?{}:w,N=v.mirror,S=v.reversed,A="".concat(g).concat(N?"Mirror":""),_,P,I,B,T;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var E=y[1]-y[0],F=1/0,q=v.categoricalDomain.sort(vq);if(q.forEach(function(V,U){U>0&&(F=Math.min((V||0)-(q[U-1]||0),F))}),Number.isFinite(F)){var H=F/E,Q=v.layout==="vertical"?a.height:a.width;if(v.padding==="gap"&&(_=H*Q/2),v.padding==="no-gap"){var J=wh(t.barCategoryGap,H*Q),re=H*Q/2;_=re-J-(re-J)/Q*J}}}s==="xAxis"?P=[a.left+(j.left||0)+(_||0),a.left+a.width-(j.right||0)-(_||0)]:s==="yAxis"?P=c==="horizontal"?[a.top+a.height-(j.bottom||0),a.top+(j.top||0)]:[a.top+(j.top||0)+(_||0),a.top+a.height-(j.bottom||0)-(_||0)]:P=v.range,S&&(P=[P[1],P[0]]);var X=PX(v,i,p),ee=X.scale,W=X.realScaleType;ee.domain(y).range(P),IX(ee);var O=qX(ee,zd(zd({},v),{},{realScaleType:W}));s==="xAxis"?(T=g==="top"&&!N||g==="bottom"&&N,I=a.left,B=f[A]-T*v.height):s==="yAxis"&&(T=g==="left"&&!N||g==="right"&&N,I=f[A]-T*v.width,B=a.top);var z=zd(zd(zd({},v),O),{},{realScaleType:W,x:I,y:B,scale:ee,width:s==="xAxis"?a.width:v.width,height:s==="yAxis"?a.height:v.height});return z.bandSize=M1(z,O),!v.hide&&s==="xAxis"?f[A]+=(T?-1:1)*z.height:v.hide||(f[A]+=(T?-1:1)*z.width),zd(zd({},m),{},ny({},b,z))},{})},r7=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},kee=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return r7({x:r,y:a},{x:s,y:i})},n7=(function(){function e(t){yee(this,e),this.scale=t}return wee(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();ny(n7,"EPS",1e-4);var VS=function(t){var r=Object.keys(t).reduce(function(a,s){return zd(zd({},a),{},ny({},s,n7.create(t[s])))},{});return zd(zd({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return QZ(s,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return QF(s,function(i,o){return r[o].isInRange(i)})}})};function See(e){return(e%180+180)%180}var _ee=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=See(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},rj,CP;function Cee(){if(CP)return rj;CP=1;var e=A0(),t=vg(),r=$b();function a(s){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(f){return d(c[f],f,c)}}var u=s(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return rj=a,rj}var nj,AP;function Aee(){if(AP)return nj;AP=1;var e=GF();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return nj=t,nj}var aj,EP;function Eee(){if(EP)return aj;EP=1;var e=xL(),t=A0(),r=Aee(),a=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=a(c+d,0)),e(i,t(o,3),d)}return aj=s,aj}var sj,TP;function Tee(){if(TP)return sj;TP=1;var e=Cee(),t=Eee(),r=e(t);return sj=r,sj}var Oee=Tee();const Pee=Pa(Oee);var Iee=PD();const Dee=Pa(Iee);var Lee=Dee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),GS=D.createContext(void 0),KS=D.createContext(void 0),a7=D.createContext(void 0),s7=D.createContext({}),i7=D.createContext(void 0),o7=D.createContext(0),l7=D.createContext(0),OP=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Lee(i);return ut.createElement(GS.Provider,{value:a},ut.createElement(KS.Provider,{value:s},ut.createElement(s7.Provider,{value:i},ut.createElement(a7.Provider,{value:u},ut.createElement(i7.Provider,{value:o},ut.createElement(o7.Provider,{value:d},ut.createElement(l7.Provider,{value:c},l)))))))},Fee=function(){return D.useContext(i7)},c7=function(t){var r=D.useContext(GS);r==null&&jh();var a=r[t];return a==null&&jh(),a},Mee=function(){var t=D.useContext(GS);return c0(t)},Ree=function(){var t=D.useContext(KS),r=Pee(t,function(a){return QF(a.domain,Number.isFinite)});return r||c0(t)},d7=function(t){var r=D.useContext(KS);r==null&&jh();var a=r[t];return a==null&&jh(),a},Bee=function(){var t=D.useContext(a7);return t},Uee=function(){return D.useContext(s7)},XS=function(){return D.useContext(l7)},YS=function(){return D.useContext(o7)};function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,f7(a.key),a)}}function zee(e,t,r){return t&&$ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hee(e,t,r){return t=J1(t),Wee(e,u7()?Reflect.construct(t,r||[],J1(e).constructor):t.apply(e,r))}function Wee(e,t){if(t&&(zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vee(e)}function Vee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u7=function(){return!!e})()}function J1(e){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J1(e)}function Gee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X4(e,t)}function X4(e,t){return X4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},X4(e,t)}function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function IP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(a){QS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QS(e,t,r){return t=f7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=Kee(e,"string");return zm(t)=="symbol"?t:t+""}function Kee(e,t){if(zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Xee(e,t){return Zee(e)||Jee(e,t)||Qee(e,t)||Yee()}function Yee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qee(e,t){if(e){if(typeof e=="string")return DP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DP(e,t)}}function DP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Zee(e){if(Array.isArray(e))return e}function Y4(){return Y4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y4.apply(this,arguments)}var ete=function(t,r){var a;return ut.isValidElement(t)?a=ut.cloneElement(t,r):On(t)?a=t(r):a=ut.createElement("line",Y4({},r,{className:"recharts-reference-line-line"})),a},tte=function(t,r,a,s,i,o,l,c,d){var u=i.x,f=i.y,p=i.width,m=i.height;if(a){var b=d.y,v=t.y.apply(b,{position:o});if(Du(d,"discard")&&!t.y.isInRange(v))return null;var g=[{x:u+p,y:v},{x:u,y:v}];return c==="left"?g.reverse():g}if(r){var y=d.x,w=t.x.apply(y,{position:o});if(Du(d,"discard")&&!t.x.isInRange(w))return null;var j=[{x:w,y:f+m},{x:w,y:f}];return l==="top"?j.reverse():j}if(s){var N=d.segment,S=N.map(function(A){return t.apply(A,{position:o})});return Du(d,"discard")&&GZ(S,function(A){return!t.isInRange(A)})?null:S}return null};function rte(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Fee(),u=c7(s),f=d7(i),p=Bee();if(!d||!p)return null;wf(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=VS({x:u.scale,y:f.scale}),b=qi(t),v=qi(r),g=a&&a.length===2,y=tte(m,b,v,g,p,e.position,u.orientation,f.orientation,e);if(!y)return null;var w=Xee(y,2),j=w[0],N=j.x,S=j.y,A=w[1],_=A.x,P=A.y,I=Du(e,"hidden")?"url(#".concat(d,")"):void 0,B=IP(IP({clipPath:I},zn(e,!0)),{},{x1:N,y1:S,x2:_,y2:P});return ut.createElement(Ms,{className:ca("recharts-reference-line",l)},ete(o,B),al.renderCallByParent(e,kee({x1:N,y1:S,x2:_,y2:P})))}var JS=(function(e){function t(){return qee(this,t),Hee(this,t,arguments)}return Gee(t,e),zee(t,[{key:"render",value:function(){return ut.createElement(rte,this.props)}}])})(ut.Component);QS(JS,"displayName","ReferenceLine");QS(JS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Q4(){return Q4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q4.apply(this,arguments)}function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function LP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function FP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(r),!0).forEach(function(a){ay(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ate(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,m7(a.key),a)}}function ste(e,t,r){return t&&ate(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ite(e,t,r){return t=Z1(t),ote(e,h7()?Reflect.construct(t,r||[],Z1(e).constructor):t.apply(e,r))}function ote(e,t){if(t&&(Hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lte(e)}function lte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!e})()}function Z1(e){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z1(e)}function cte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J4(e,t)}function J4(e,t){return J4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},J4(e,t)}function ay(e,t,r){return t=m7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m7(e){var t=dte(e,"string");return Hm(t)=="symbol"?t:t+""}function dte(e,t){if(Hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ute=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=VS({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return Du(t,"discard")&&!o.isInRange(l)?null:l},sy=(function(e){function t(){return nte(this,t),ite(this,t,arguments)}return cte(t,e),ste(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=qi(s),u=qi(i);if(wf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=ute(this.props);if(!f)return null;var p=f.x,m=f.y,b=this.props,v=b.shape,g=b.className,y=Du(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=FP(FP({clipPath:y},zn(this.props,!0)),{},{cx:p,cy:m});return ut.createElement(Ms,{className:ca("recharts-reference-dot",g)},t.renderDot(v,w),al.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])})(ut.Component);ay(sy,"displayName","ReferenceDot");ay(sy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ay(sy,"renderDot",function(e,t){var r;return ut.isValidElement(e)?r=ut.cloneElement(e,t):On(e)?r=e(t):r=ut.createElement(WS,Q4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Z4(){return Z4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Z4.apply(this,arguments)}function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function MP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function RP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(r),!0).forEach(function(a){iy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,x7(a.key),a)}}function mte(e,t,r){return t&&hte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pte(e,t,r){return t=eb(t),xte(e,p7()?Reflect.construct(t,r||[],eb(e).constructor):t.apply(e,r))}function xte(e,t){if(t&&(Wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gte(e)}function gte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p7=function(){return!!e})()}function eb(e){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eb(e)}function vte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ek(e,t)}function ek(e,t){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ek(e,t)}function iy(e,t,r){return t=x7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7(e){var t=bte(e,"string");return Wm(t)=="symbol"?t:t+""}function bte(e,t){if(Wm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yte=function(t,r,a,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var p=VS({x:u.scale,y:f.scale}),m={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:a?p.y.apply(c,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(d,{position:"end"}):p.y.rangeMax};return Du(i,"discard")&&(!p.isInRange(m)||!p.isInRange(b))?null:r7(m,b)},oy=(function(e){function t(){return fte(this,t),pte(this,t,arguments)}return vte(t,e),mte(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,u=a.clipPathId;wf(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=qi(s),p=qi(i),m=qi(o),b=qi(l),v=this.props.shape;if(!f&&!p&&!m&&!b&&!v)return null;var g=yte(f,p,m,b,this.props);if(!g&&!v)return null;var y=Du(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ut.createElement(Ms,{className:ca("recharts-reference-area",c)},t.renderRect(v,RP(RP({clipPath:y},zn(this.props,!0)),g)),al.renderCallByParent(this.props,g))}}])})(ut.Component);iy(oy,"displayName","ReferenceArea");iy(oy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});iy(oy,"renderRect",function(e,t){var r;return ut.isValidElement(e)?r=ut.cloneElement(e,t):On(e)?r=e(t):r=ut.createElement(HS,Z4({},t,{className:"recharts-reference-area-rect"})),r});function g7(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function wte(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return _ee(a,r)}function Nte(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function tb(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function jte(e,t){return g7(e,t+1)}function kte(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var b=a?.[c];if(b===void 0)return{v:g7(a,d)};var v=c,g,y=function(){return g===void 0&&(g=r(b,v)),g},w=b.coordinate,j=c===0||tb(e,w,y,u,l);j||(c=0,u=o,d+=1),j&&(u=w+e*(y()/2+s),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function tl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(a){Ste(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ste(e,t,r){return t=_te(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _te(e){var t=Cte(e,"string");return Yx(t)=="symbol"?t:t+""}function Cte(e,t){if(Yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ate(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(p){var m=i[p],b,v=function(){return b===void 0&&(b=r(m,p)),b};if(p===o-1){var g=e*(m.coordinate+e*v()/2-c);i[p]=m=tl(tl({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate})}else i[p]=m=tl(tl({},m),{},{tickCoord:m.coordinate});var y=tb(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+s),i[p]=tl(tl({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Ete(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=a[l-1],f=r(u,l-1),p=e*(u.coordinate+e*f/2-d);o[l-1]=u=tl(tl({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate});var m=tb(e,u.tickCoord,function(){return f},c,d);m&&(d=u.tickCoord-e*(f/2+s),o[l-1]=tl(tl({},u),{},{isShow:!0}))}for(var b=i?l-1:l,v=function(w){var j=o[w],N,S=function(){return N===void 0&&(N=r(j,w)),N};if(w===0){var A=e*(j.coordinate-e*S()/2-c);o[w]=j=tl(tl({},j),{},{tickCoord:A<0?j.coordinate-A*e:j.coordinate})}else o[w]=j=tl(tl({},j),{},{tickCoord:j.coordinate});var _=tb(e,j.tickCoord,S,c,d);_&&(c=j.tickCoord+e*(S()/2+s),o[w]=tl(tl({},j),{},{isShow:!0}))},g=0;g<b;g++)v(g);return o}function ZS(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(ir(c)||op.isSsr)return jte(s,typeof c=="number"&&ir(c)?c:0);var p=[],m=l==="top"||l==="bottom"?"width":"height",b=u&&m==="width"?tx(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,N){var S=On(d)?d(j.value,N):j.value;return m==="width"?wte(tx(S,{fontSize:t,letterSpacing:r}),b,f):tx(S,{fontSize:t,letterSpacing:r})[m]},g=s.length>=2?Wd(s[1].coordinate-s[0].coordinate):1,y=Nte(i,g,m);return c==="equidistantPreserveStart"?kte(g,y,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Ete(g,y,v,s,o,c==="preserveStartEnd"):p=Ate(g,y,v,s,o),p.filter(function(w){return w.isShow}))}var Tte=["viewBox"],Ote=["viewBox"],Pte=["ticks"];function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mm.apply(this,arguments)}function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(a){e3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ij(e,t){if(e==null)return{};var r=Ite(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ite(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Dte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,b7(a.key),a)}}function Lte(e,t,r){return t&&qP(e.prototype,t),r&&qP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fte(e,t,r){return t=rb(t),Mte(e,v7()?Reflect.construct(t,r||[],rb(e).constructor):t.apply(e,r))}function Mte(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rte(e)}function Rte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v7=function(){return!!e})()}function rb(e){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(e)}function Bte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tk(e,t)}function e3(e,t,r){return t=b7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b7(e){var t=Ute(e,"string");return Vm(t)=="symbol"?t:t+""}function Ute(e,t){if(Vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var up=(function(e){function t(r){var a;return Dte(this,t),a=Fte(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return Bte(t,e),Lte(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=ij(a,Tte),l=this.props,c=l.viewBox,d=ij(l,Ote);return!vm(i,c)||!vm(o,d)||!vm(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,f=s.mirror,p=s.tickMargin,m,b,v,g,y,w,j=f?-1:1,N=a.tickSize||u,S=ir(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":m=b=a.coordinate,g=o+ +!f*c,v=g-j*N,w=v-j*p,y=S;break;case"left":v=g=a.coordinate,b=i+ +!f*l,m=b-j*N,y=m-j*p,w=S;break;case"right":v=g=a.coordinate,b=i+ +f*l,m=b+j*N,y=m+j*p,w=S;break;default:m=b=a.coordinate,g=o+ +f*c,v=g+j*N,w=v+j*p,y=S;break}return{line:{x1:m,y1:v,x2:b,y2:g},tick:{x:y,y:w}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,u=a.axisLine,f=Fi(Fi(Fi({},zn(this.props,!1)),zn(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!d||c==="bottom"&&d);f=Fi(Fi({},f),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);f=Fi(Fi({},f),{},{x1:s+m*o,y1:i,x2:s+m*o,y2:i+l})}return ut.createElement("line",mm({},f,{className:ca("recharts-cartesian-axis-line",od(u,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,p=l.unit,m=ZS(Fi(Fi({},this.props),{},{ticks:a}),s,i),b=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=zn(this.props,!1),y=zn(u,!1),w=Fi(Fi({},g),{},{fill:"none"},zn(c,!1)),j=m.map(function(N,S){var A=o.getTickLineCoord(N),_=A.line,P=A.tick,I=Fi(Fi(Fi(Fi({textAnchor:b,verticalAnchor:v},g),{},{stroke:"none",fill:d},y),P),{},{index:S,payload:N,visibleTicksCount:m.length,tickFormatter:f});return ut.createElement(Ms,mm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},u1(o.props,N,S)),c&&ut.createElement("line",mm({},w,_,{className:ca("recharts-cartesian-axis-tick-line",od(c,"className"))})),u&&t.renderTickItem(u,I,"".concat(On(f)?f(N.value,S):N.value).concat(p||"")))});return ut.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var f=this.props,p=f.ticks,m=ij(f,Pte),b=p;return On(c)&&(b=p&&p.length>0?c(this.props):c(m)),o<=0||l<=0||!b||!b.length?null:ut.createElement(Ms,{className:ca("recharts-cartesian-axis",d),ref:function(g){a.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),al.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=ca(s.className,"recharts-cartesian-axis-tick-value");return ut.isValidElement(a)?o=ut.cloneElement(a,Fi(Fi({},s),{},{className:l})):On(a)?o=a(Fi(Fi({},s),{},{className:l})):o=ut.createElement(N1,mm({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(D.Component);e3(up,"displayName","CartesianAxis");e3(up,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qte=["x1","y1","x2","y2","key"],$te=["offset"];function kh(e){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}function $P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(r),!0).forEach(function(a){zte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zte(e,t,r){return t=Hte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hte(e){var t=Wte(e,"string");return kh(t)=="symbol"?t:t+""}function Wte(e,t){if(kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(kh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ih.apply(this,arguments)}function zP(e,t){if(e==null)return{};var r=Vte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Vte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Gte=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ut.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function y7(e,t){var r;if(ut.isValidElement(e))r=ut.cloneElement(e,t);else if(On(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=zP(t,qte),d=zn(c,!1);d.offset;var u=zP(d,$te);r=ut.createElement("line",ih({},u,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Kte(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=sl(sl({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return y7(s,d)});return ut.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Xte(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=sl(sl({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return y7(s,d)});return ut.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Yte(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,m){return p-m});s!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var b=!u[m+1],v=b?s+o-p:u[m+1]-p;if(v<=0)return null;var g=m%t.length;return ut.createElement("rect",{key:"react-".concat(m),y:p,x:a,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ut.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Qte(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!a||!a.length)return null;var u=d.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var b=!u[m+1],v=b?i+l-p:u[m+1]-p;if(v<=0)return null;var g=m%a.length;return ut.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:v,height:c,stroke:"none",fill:a[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ut.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Jte=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return DF(ZS(sl(sl(sl({},up.defaultProps),a),{},{ticks:mf(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Zte=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return DF(ZS(sl(sl(sl({},up.defaultProps),a),{},{ticks:mf(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},nm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function w7(e){var t,r,a,s,i,o,l=XS(),c=YS(),d=Uee(),u=sl(sl({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:nm.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:nm.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:nm.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:nm.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:nm.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:nm.verticalFill,x:ir(e.x)?e.x:d.left,y:ir(e.y)?e.y:d.top,width:ir(e.width)?e.width:d.width,height:ir(e.height)?e.height:d.height}),f=u.x,p=u.y,m=u.width,b=u.height,v=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,w=Mee(),j=Ree();if(!ir(m)||m<=0||!ir(b)||b<=0||!ir(f)||f!==+f||!ir(p)||p!==+p)return null;var N=u.verticalCoordinatesGenerator||Jte,S=u.horizontalCoordinatesGenerator||Zte,A=u.horizontalPoints,_=u.verticalPoints;if((!A||!A.length)&&On(S)){var P=g&&g.length,I=S({yAxis:j?sl(sl({},j),{},{ticks:P?g:j.ticks}):void 0,width:l,height:c,offset:d},P?!0:v);wf(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(kh(I),"]")),Array.isArray(I)&&(A=I)}if((!_||!_.length)&&On(N)){var B=y&&y.length,T=N({xAxis:w?sl(sl({},w),{},{ticks:B?y:w.ticks}):void 0,width:l,height:c,offset:d},B?!0:v);wf(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(kh(T),"]")),Array.isArray(T)&&(_=T)}return ut.createElement("g",{className:"recharts-cartesian-grid"},ut.createElement(Gte,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ut.createElement(Kte,ih({},u,{offset:d,horizontalPoints:A,xAxis:w,yAxis:j})),ut.createElement(Xte,ih({},u,{offset:d,verticalPoints:_,xAxis:w,yAxis:j})),ut.createElement(Yte,ih({},u,{horizontalPoints:A})),ut.createElement(Qte,ih({},u,{verticalPoints:_})))}w7.displayName="CartesianGrid";var ere=["layout","type","stroke","connectNulls","isRange","ref"],tre=["key"],N7;function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function j7(e,t){if(e==null)return{};var r=rre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function rre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},oh.apply(this,arguments)}function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function s0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(a){Au(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,S7(a.key),a)}}function are(e,t,r){return t&&WP(e.prototype,t),r&&WP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sre(e,t,r){return t=nb(t),ire(e,k7()?Reflect.construct(t,r||[],nb(e).constructor):t.apply(e,r))}function ire(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ore(e)}function ore(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k7=function(){return!!e})()}function nb(e){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nb(e)}function lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},rk(e,t)}function Au(e,t,r){return t=S7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S7(e){var t=cre(e,"string");return Gm(t)=="symbol"?t:t+""}function cre(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var P0=(function(e){function t(){var r;nre(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=sre(this,t,[].concat(s)),Au(r,"state",{isAnimationFinished:!0}),Au(r,"id",gg("recharts-area-")),Au(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),On(o)&&o()}),Au(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),On(o)&&o()}),r}return lre(t,e),are(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,f=c.dataKey,p=zn(this.props,!1),m=zn(d,!0),b=u.map(function(g,y){var w=s0(s0(s0({key:"dot-".concat(y),r:3},p),m),{},{index:y,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return t.renderDotItem(d,w)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ut.createElement(Ms,oh({className:"recharts-area-dots"},v),b)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=a*Math.abs(c-d),f=d0(o.map(function(p){return p.y||0}));return ir(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(d0(i.map(function(p){return p.y||0})),f)),ir(f)?ut.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=a*Math.abs(c-d),f=d0(o.map(function(p){return p.x||0}));return ir(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(d0(i.map(function(p){return p.x||0})),f)),ir(f)?ut.createElement("rect",{x:0,y:c<d?c:c-u,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,f=l.connectNulls,p=l.isRange;l.ref;var m=j7(l,ere);return ut.createElement(Ms,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ut.createElement(ax,oh({},zn(m,!0),{points:a,connectNulls:f,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ut.createElement(ax,oh({},zn(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:a})),u!=="none"&&p&&ut.createElement(ax,oh({},zn(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,p=o.animationEasing,m=o.animationId,b=this.state,v=b.prevPoints,g=b.prevBaseLine;return ut.createElement(Ef,{begin:u,duration:f,isActive:d,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var w=y.t;if(v){var j=v.length/l.length,N=l.map(function(P,I){var B=Math.floor(I*j);if(v[B]){var T=v[B],E=rd(T.x,P.x),F=rd(T.y,P.y);return s0(s0({},P),{},{x:E(w),y:F(w)})}return P}),S;if(ir(c)&&typeof c=="number"){var A=rd(g,c);S=A(w)}else if(Hn(c)||sp(c)){var _=rd(g,0);S=_(w)}else S=c.map(function(P,I){var B=Math.floor(I*j);if(g[B]){var T=g[B],E=rd(T.x,P.x),F=rd(T.y,P.y);return s0(s0({},P),{},{x:E(w),y:F(w)})}return P});return i.renderAreaStatically(N,S,a,s)}return ut.createElement(Ms,null,ut.createElement("defs",null,ut.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(w))),ut.createElement(Ms,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,p=d.totalLength;return c&&o&&o.length&&(!u&&p>0||!Ex(u,o)||!Ex(f,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,f=s.xAxis,p=s.yAxis,m=s.width,b=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,w=l.length===1,j=ca("recharts-area",c),N=f&&f.allowDataOverflow,S=p&&p.allowDataOverflow,A=N||S,_=Hn(g)?this.id:g,P=(a=zn(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=P.r,B=I===void 0?3:I,T=P.strokeWidth,E=T===void 0?2:T,F=Cq(o)?o:{},q=F.clipDot,H=q===void 0?!0:q,Q=B*2+E;return ut.createElement(Ms,{className:j},N||S?ut.createElement("defs",null,ut.createElement("clipPath",{id:"clipPath-".concat(_)},ut.createElement("rect",{x:N?u:u-m/2,y:S?d:d-b/2,width:N?m:m*2,height:S?b:b*2})),!H&&ut.createElement("clipPath",{id:"clipPath-dots-".concat(_)},ut.createElement("rect",{x:u-Q/2,y:d-Q/2,width:m+Q,height:b+Q}))):null,w?null:this.renderArea(A,_),(o||w)&&this.renderDots(A,H,_),(!v||y)&&g0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(D.PureComponent);N7=P0;Au(P0,"displayName","Area");Au(P0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!op.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Au(P0,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(ir(l)&&typeof l=="number")return l;var c=s==="horizontal"?a:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return l==="dataMin"?f:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Au(P0,"getComposedData",function(e){var t=e.props,r=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,p=e.offset,m=t.layout,b=d&&d.length,v=N7.getBaseValue(t,r,a,s),g=m==="horizontal",y=!1,w=f.map(function(N,S){var A;b?A=d[u+S]:(A=Sc(N,c),Array.isArray(A)?y=!0:A=[v,A]);var _=A[1]==null||b&&Sc(N,c)==null;return g?{x:cO({axis:a,ticks:i,bandSize:l,entry:N,index:S}),y:_?null:s.scale(A[1]),value:A,payload:N}:{x:_?null:a.scale(A[1]),y:cO({axis:s,ticks:o,bandSize:l,entry:N,index:S}),value:A,payload:N}}),j;return b||y?j=w.map(function(N){var S=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:S!=null&&N.y!=null?s.scale(S):null}:{x:S!=null?a.scale(S):null,y:N.y}}):j=g?s.scale(v):a.scale(v),s0({points:w,baseLine:j,layout:m,isRange:y},p)});Au(P0,"renderDotItem",function(e,t){var r;if(ut.isValidElement(e))r=ut.cloneElement(e,t);else if(On(e))r=e(t);else{var a=ca("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=j7(t,tre);r=ut.createElement(WS,oh({},i,{key:s,className:a}))}return r});function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function dre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ure(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,A7(a.key),a)}}function fre(e,t,r){return t&&ure(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hre(e,t,r){return t=ab(t),mre(e,_7()?Reflect.construct(t,r||[],ab(e).constructor):t.apply(e,r))}function mre(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pre(e)}function pre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_7=function(){return!!e})()}function ab(e){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ab(e)}function xre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}function nk(e,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},nk(e,t)}function C7(e,t,r){return t=A7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A7(e){var t=gre(e,"string");return Km(t)=="symbol"?t:t+""}function gre(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Km(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ak.apply(this,arguments)}function vre(e){var t=e.xAxisId,r=XS(),a=YS(),s=c7(t);return s==null?null:D.createElement(up,ak({},s,{className:ca("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return mf(o,!0)}}))}var ly=(function(e){function t(){return dre(this,t),hre(this,t,arguments)}return xre(t,e),fre(t,[{key:"render",value:function(){return D.createElement(vre,this.props)}}])})(D.Component);C7(ly,"displayName","XAxis");C7(ly,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function bre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,O7(a.key),a)}}function wre(e,t,r){return t&&yre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nre(e,t,r){return t=sb(t),jre(e,E7()?Reflect.construct(t,r||[],sb(e).constructor):t.apply(e,r))}function jre(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kre(e)}function kre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E7=function(){return!!e})()}function sb(e){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sb(e)}function Sre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sk(e,t)}function T7(e,t,r){return t=O7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7(e){var t=_re(e,"string");return Xm(t)=="symbol"?t:t+""}function _re(e,t){if(Xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ik.apply(this,arguments)}var Cre=function(t){var r=t.yAxisId,a=XS(),s=YS(),i=d7(r);return i==null?null:D.createElement(up,ik({},i,{className:ca("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return mf(l,!0)}}))},cy=(function(e){function t(){return bre(this,t),Nre(this,t,arguments)}return Sre(t,e),wre(t,[{key:"render",value:function(){return D.createElement(Cre,this.props)}}])})(D.Component);T7(cy,"displayName","YAxis");T7(cy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VP(e){return Ore(e)||Tre(e)||Ere(e)||Are()}function Are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ere(e,t){if(e){if(typeof e=="string")return ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ok(e,t)}}function Tre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ore(e){if(Array.isArray(e))return ok(e)}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var lk=function(t,r,a,s,i){var o=Qd(t,JS),l=Qd(t,sy),c=[].concat(VP(o),VP(l)),d=Qd(t,oy),u="".concat(s,"Id"),f=s[0],p=r;if(c.length&&(p=c.reduce(function(v,g){if(g.props[u]===a&&Du(g.props,"extendDomain")&&ir(g.props[f])){var y=g.props[f];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},p)),d.length){var m="".concat(f,"1"),b="".concat(f,"2");p=d.reduce(function(v,g){if(g.props[u]===a&&Du(g.props,"extendDomain")&&ir(g.props[m])&&ir(g.props[b])){var y=g.props[m],w=g.props[b];return[Math.min(v[0],y,w),Math.max(v[1],y,w)]}return v},p)}return i&&i.length&&(p=i.reduce(function(v,g){return ir(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},p)),p},oj={exports:{}},GP;function Pre(){return GP||(GP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,f||c,p),b=r?r+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,b=new Array(m);p<m;p++)b[p]=f[p].fn;return b},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,m,b){var v=r?r+d:d;if(!this._events[v])return!1;var g=this._events[v],y=arguments.length,w,j;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,p),!0;case 5:return g.fn.call(g.context,u,f,p,m),!0;case 6:return g.fn.call(g.context,u,f,p,m,b),!0}for(j=1,w=new Array(y-1);j<y;j++)w[j-1]=arguments[j];g.fn.apply(g.context,w)}else{var N=g.length,S;for(j=0;j<N;j++)switch(g[j].once&&this.removeListener(d,g[j].fn,void 0,!0),y){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,u);break;case 3:g[j].fn.call(g[j].context,u,f);break;case 4:g[j].fn.call(g[j].context,u,f,p);break;default:if(!w)for(S=1,w=new Array(y-1);S<y;S++)w[S-1]=arguments[S];g[j].fn.apply(g[j].context,w)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===u&&(!p||b.once)&&(!f||b.context===f)&&o(this,m);else{for(var v=0,g=[],y=b.length;v<y;v++)(b[v].fn!==u||p&&!b[v].once||f&&b[v].context!==f)&&g.push(b[v]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(oj)),oj.exports}var Ire=Pre();const Dre=Pa(Ire);var lj=new Dre,cj="recharts.syncMouseEvents";function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function Lre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P7(a.key),a)}}function Mre(e,t,r){return t&&Fre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dj(e,t,r){return t=P7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7(e){var t=Rre(e,"string");return Qx(t)=="symbol"?t:t+""}function Rre(e,t){if(Qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bre=(function(){function e(){Lre(this,e),dj(this,"activeIndex",0),dj(this,"coordinateList",[]),dj(this,"layout","horizontal")}return Mre(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+d,p=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])})();function Ure(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&ir(a)&&ir(s))return!0}return!1}function qre(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function I7(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=Io(t,r,a,s),l=Io(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function $re(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,p=Io(l,c,d,f),m=Io(l,c,u,f);a=p.x,s=p.y,i=m.x,o=m.y}else return I7(t);return[{x:a,y:s},{x:i,y:o}]}function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(a){zre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zre(e,t,r){return t=Hre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hre(e){var t=Wre(e,"string");return Jx(t)=="symbol"?t:t+""}function Wre(e,t){if(Jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vre(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,m=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!m||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var b,v=ax;if(p==="ScatterChart")b=o,v=GJ;else if(p==="BarChart")b=qre(f,o,c,u),v=HS;else if(f==="radial"){var g=I7(o),y=g.cx,w=g.cy,j=g.radius,N=g.startAngle,S=g.endAngle;b={cx:y,cy:w,startAngle:N,endAngle:S,innerRadius:j,outerRadius:j},v=BF}else b={points:$re(f,o,c)},v=ax;var A=bv(bv(bv(bv({stroke:"#ccc",pointerEvents:"none"},c),b),zn(m,!1)),{},{payload:l,payloadIndex:d,className:ca("recharts-tooltip-cursor",m.className)});return D.isValidElement(m)?D.cloneElement(m,A):D.createElement(v,A)}var Gre=["item"],Kre=["children","className","width","height","style","compact","title","desc"];function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pm.apply(this,arguments)}function XP(e,t){return Qre(e)||Yre(e,t)||L7(e,t)||Xre()}function Xre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Qre(e){if(Array.isArray(e))return e}function YP(e,t){if(e==null)return{};var r=Jre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Jre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Zre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ene(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,F7(a.key),a)}}function tne(e,t,r){return t&&ene(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rne(e,t,r){return t=ib(t),nne(e,D7()?Reflect.construct(t,r||[],ib(e).constructor):t.apply(e,r))}function nne(e,t){if(t&&(Ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ane(e)}function ane(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D7=function(){return!!e})()}function ib(e){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ib(e)}function sne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}function ck(e,t){return ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ck(e,t)}function Qm(e){return lne(e)||one(e)||L7(e)||ine()}function ine(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L7(e,t){if(e){if(typeof e=="string")return dk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dk(e,t)}}function one(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lne(e){if(Array.isArray(e))return dk(e)}function dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function QP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(r),!0).forEach(function(a){an(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function an(e,t,r){return t=F7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F7(e){var t=cne(e,"string");return Ym(t)=="symbol"?t:t+""}function cne(e,t){if(Ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dne={xAxis:["bottom","top"],yAxis:["left","right"]},une={width:"100%",height:"100%"},M7={x:0,y:0};function yv(e){return e}var fne=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},hne=function(t,r,a,s){var i=r.find(function(u){return u&&u.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Rt(Rt(Rt({},s),Io(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return Rt(Rt(Rt({},s),Io(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return M7},dy=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Qm(l),Qm(d)):l},[]);return o.length>0?o:t&&t.length&&ir(s)&&ir(i)?t.slice(s,i+1):[]};function R7(e){return e==="number"?[0,"auto"]:void 0}var uk=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=dy(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;p=c1(m,o.dataKey,s)}else p=f&&f[a]||l[a];return p?[].concat(Qm(c),[FF(d,p)]):c},[])},JP=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=fne(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=_X(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,p=uk(t,r,u,f),m=hne(a,l,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},mne=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,p=t.stackOffset,m=IF(u,i);return a.reduce(function(b,v){var g,y=v.type.defaultProps!==void 0?Rt(Rt({},v.type.defaultProps),v.props):v.props,w=y.type,j=y.dataKey,N=y.allowDataOverflow,S=y.allowDuplicatedCategory,A=y.scale,_=y.ticks,P=y.includeHidden,I=y[o];if(b[I])return b;var B=dy(t.data,{graphicalItems:s.filter(function(O){var z,V=o in O.props?O.props[o]:(z=O.type.defaultProps)===null||z===void 0?void 0:z[o];return V===I}),dataStartIndex:c,dataEndIndex:d}),T=B.length,E,F,q;Ure(y.domain,N,w)&&(E=T4(y.domain,null,N),m&&(w==="number"||A!=="auto")&&(q=nx(B,j,"category")));var H=R7(w);if(!E||E.length===0){var Q,J=(Q=y.domain)!==null&&Q!==void 0?Q:H;if(j){if(E=nx(B,j,w),w==="category"&&m){var re=gq(E);S&&re?(F=E,E=G1(0,T)):S||(E=hO(J,E,v).reduce(function(O,z){return O.indexOf(z)>=0?O:[].concat(Qm(O),[z])},[]))}else if(w==="category")S?E=E.filter(function(O){return O!==""&&!Hn(O)}):E=hO(J,E,v).reduce(function(O,z){return O.indexOf(z)>=0||z===""||Hn(z)?O:[].concat(Qm(O),[z])},[]);else if(w==="number"){var X=OX(B,s.filter(function(O){var z,V,U=o in O.props?O.props[o]:(z=O.type.defaultProps)===null||z===void 0?void 0:z[o],K="hide"in O.props?O.props.hide:(V=O.type.defaultProps)===null||V===void 0?void 0:V.hide;return U===I&&(P||!K)}),j,i,u);X&&(E=X)}m&&(w==="number"||A!=="auto")&&(q=nx(B,j,"category"))}else m?E=G1(0,T):l&&l[I]&&l[I].hasStack&&w==="number"?E=p==="expand"?[0,1]:LF(l[I].stackGroups,c,d):E=PF(B,s.filter(function(O){var z=o in O.props?O.props[o]:O.type.defaultProps[o],V="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return z===I&&(P||!V)}),w,u,!0);if(w==="number")E=lk(f,E,I,i,_),J&&(E=T4(J,E,N));else if(w==="category"&&J){var ee=J,W=E.every(function(O){return ee.indexOf(O)>=0});W&&(E=ee)}}return Rt(Rt({},b),{},an({},I,Rt(Rt({},y),{},{axisType:i,domain:E,categoricalDomain:q,duplicateDomain:F,originalDomain:(g=y.domain)!==null&&g!==void 0?g:H,isCategorical:m,layout:u})))},{})},pne=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,p=dy(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),m=p.length,b=IF(u,i),v=-1;return a.reduce(function(g,y){var w=y.type.defaultProps!==void 0?Rt(Rt({},y.type.defaultProps),y.props):y.props,j=w[o],N=R7("number");if(!g[j]){v++;var S;return b?S=G1(0,m):l&&l[j]&&l[j].hasStack?(S=LF(l[j].stackGroups,c,d),S=lk(f,S,j,i)):(S=T4(N,PF(p,a.filter(function(A){var _,P,I=o in A.props?A.props[o]:(_=A.type.defaultProps)===null||_===void 0?void 0:_[o],B="hide"in A.props?A.props.hide:(P=A.type.defaultProps)===null||P===void 0?void 0:P.hide;return I===j&&!B}),"number",u),s.defaultProps.allowDataOverflow),S=lk(f,S,j,i)),Rt(Rt({},g),{},an({},j,Rt(Rt({axisType:i},s.defaultProps),{},{hide:!0,orientation:od(dne,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:N,isCategorical:b,layout:u})))}return g},{})},xne=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(s,"Id"),p=Qd(u,i),m={};return p&&p.length?m=mne(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=pne(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},gne=function(t){var r=c0(t),a=mf(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:gS(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:M1(r,a)}},ZP=function(t){var r=t.children,a=t.defaultShowTooltip,s=gc(r,qm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},vne=function(t){return!t||!t.length?!1:t.some(function(r){var a=yf(r&&r.type);return a&&a.indexOf("Bar")>=0})},eI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},bne=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=a.width,u=a.height,f=a.children,p=a.margin||{},m=gc(f,qm),b=gc(f,bm),v=Object.keys(c).reduce(function(S,A){var _=c[A],P=_.orientation;return!_.mirror&&!_.hide?Rt(Rt({},S),{},an({},P,S[P]+_.width)):S},{left:p.left||0,right:p.right||0}),g=Object.keys(o).reduce(function(S,A){var _=o[A],P=_.orientation;return!_.mirror&&!_.hide?Rt(Rt({},S),{},an({},P,od(S,"".concat(P))+_.height)):S},{top:p.top||0,bottom:p.bottom||0}),y=Rt(Rt({},g),v),w=y.bottom;m&&(y.bottom+=m.props.height||qm.defaultProps.height),b&&r&&(y=EX(y,s,a,r));var j=d-y.left-y.right,N=u-y.top-y.bottom;return Rt(Rt({brushBottom:w},y),{},{width:Math.max(j,0),height:Math.max(N,0)})},yne=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},wne=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,p=function(y,w){var j=w.graphicalItems,N=w.stackGroups,S=w.offset,A=w.updateId,_=w.dataStartIndex,P=w.dataEndIndex,I=y.barSize,B=y.layout,T=y.barGap,E=y.barCategoryGap,F=y.maxBarSize,q=eI(B),H=q.numericAxisName,Q=q.cateAxisName,J=vne(j),re=[];return j.forEach(function(X,ee){var W=dy(y.data,{graphicalItems:[X],dataStartIndex:_,dataEndIndex:P}),O=X.type.defaultProps!==void 0?Rt(Rt({},X.type.defaultProps),X.props):X.props,z=O.dataKey,V=O.maxBarSize,U=O["".concat(H,"Id")],K=O["".concat(Q,"Id")],se={},xe=c.reduce(function(de,Ce){var Ve=w["".concat(Ce.axisType,"Map")],ge=O["".concat(Ce.axisType,"Id")];Ve&&Ve[ge]||Ce.axisType==="zAxis"||jh();var fe=Ve[ge];return Rt(Rt({},de),{},an(an({},Ce.axisType,fe),"".concat(Ce.axisType,"Ticks"),mf(fe)))},se),ie=xe[Q],ue=xe["".concat(Q,"Ticks")],Be=N&&N[U]&&N[U].hasStack&&zX(X,N[U].stackGroups),me=yf(X.type).indexOf("Bar")>=0,$e=M1(ie,ue),Oe=[],le=J&&CX({barSize:I,stackGroups:N,totalSize:yne(xe,Q)});if(me){var te,Te,we=Hn(V)?F:V,Ie=(te=(Te=M1(ie,ue,!0))!==null&&Te!==void 0?Te:we)!==null&&te!==void 0?te:0;Oe=AX({barGap:T,barCategoryGap:E,bandSize:Ie!==$e?Ie:$e,sizeList:le[K],maxBarSize:we}),Ie!==$e&&(Oe=Oe.map(function(de){return Rt(Rt({},de),{},{position:Rt(Rt({},de.position),{},{offset:de.position.offset-Ie/2})})}))}var he=X&&X.type&&X.type.getComposedData;he&&re.push({props:Rt(Rt({},he(Rt(Rt({},xe),{},{displayedData:W,props:y,dataKey:z,item:X,bandSize:$e,barPosition:Oe,offset:S,stackedData:Be,layout:B,dataStartIndex:_,dataEndIndex:P}))),{},an(an(an({key:X.key||"item-".concat(ee)},H,xe[H]),Q,xe[Q]),"animationId",A)),childIndex:Tq(X,y.children),item:X})}),re},m=function(y,w){var j=y.props,N=y.dataStartIndex,S=y.dataEndIndex,A=y.updateId;if(!CC({props:j}))return null;var _=j.children,P=j.layout,I=j.stackOffset,B=j.data,T=j.reverseStackOrder,E=eI(P),F=E.numericAxisName,q=E.cateAxisName,H=Qd(_,a),Q=UX(B,H,"".concat(F,"Id"),"".concat(q,"Id"),I,T),J=c.reduce(function(O,z){var V="".concat(z.axisType,"Map");return Rt(Rt({},O),{},an({},V,xne(j,Rt(Rt({},z),{},{graphicalItems:H,stackGroups:z.axisType===F&&Q,dataStartIndex:N,dataEndIndex:S}))))},{}),re=bne(Rt(Rt({},J),{},{props:j,graphicalItems:H}),w?.legendBBox);Object.keys(J).forEach(function(O){J[O]=u(j,J[O],re,O.replace("Map",""),r)});var X=J["".concat(q,"Map")],ee=gne(X),W=p(j,Rt(Rt({},J),{},{dataStartIndex:N,dataEndIndex:S,updateId:A,graphicalItems:H,stackGroups:Q,offset:re}));return Rt(Rt({formattedGraphicalItems:W,graphicalItems:H,offset:re,stackGroups:Q},ee),J)},b=(function(g){function y(w){var j,N,S;return Zre(this,y),S=rne(this,y,[w]),an(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),an(S,"accessibilityManager",new Bre),an(S,"handleLegendBBoxUpdate",function(A){if(A){var _=S.state,P=_.dataStartIndex,I=_.dataEndIndex,B=_.updateId;S.setState(Rt({legendBBox:A},m({props:S.props,dataStartIndex:P,dataEndIndex:I,updateId:B},Rt(Rt({},S.state),{},{legendBBox:A}))))}}),an(S,"handleReceiveSyncEvent",function(A,_,P){if(S.props.syncId===A){if(P===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(_)}}),an(S,"handleBrushChange",function(A){var _=A.startIndex,P=A.endIndex;if(_!==S.state.dataStartIndex||P!==S.state.dataEndIndex){var I=S.state.updateId;S.setState(function(){return Rt({dataStartIndex:_,dataEndIndex:P},m({props:S.props,dataStartIndex:_,dataEndIndex:P,updateId:I},S.state))}),S.triggerSyncEvent({dataStartIndex:_,dataEndIndex:P})}}),an(S,"handleMouseEnter",function(A){var _=S.getMouseInfo(A);if(_){var P=Rt(Rt({},_),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var I=S.props.onMouseEnter;On(I)&&I(P,A)}}),an(S,"triggeredAfterMouseMove",function(A){var _=S.getMouseInfo(A),P=_?Rt(Rt({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var I=S.props.onMouseMove;On(I)&&I(P,A)}),an(S,"handleItemMouseEnter",function(A){S.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),an(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),an(S,"handleMouseMove",function(A){A.persist(),S.throttleTriggeredAfterMouseMove(A)}),an(S,"handleMouseLeave",function(A){S.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};S.setState(_),S.triggerSyncEvent(_);var P=S.props.onMouseLeave;On(P)&&P(_,A)}),an(S,"handleOuterEvent",function(A){var _=Eq(A),P=od(S.props,"".concat(_));if(_&&On(P)){var I,B;/.*touch.*/i.test(_)?B=S.getMouseInfo(A.changedTouches[0]):B=S.getMouseInfo(A),P((I=B)!==null&&I!==void 0?I:{},A)}}),an(S,"handleClick",function(A){var _=S.getMouseInfo(A);if(_){var P=Rt(Rt({},_),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var I=S.props.onClick;On(I)&&I(P,A)}}),an(S,"handleMouseDown",function(A){var _=S.props.onMouseDown;if(On(_)){var P=S.getMouseInfo(A);_(P,A)}}),an(S,"handleMouseUp",function(A){var _=S.props.onMouseUp;if(On(_)){var P=S.getMouseInfo(A);_(P,A)}}),an(S,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),an(S,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.handleMouseDown(A.changedTouches[0])}),an(S,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.handleMouseUp(A.changedTouches[0])}),an(S,"handleDoubleClick",function(A){var _=S.props.onDoubleClick;if(On(_)){var P=S.getMouseInfo(A);_(P,A)}}),an(S,"handleContextMenu",function(A){var _=S.props.onContextMenu;if(On(_)){var P=S.getMouseInfo(A);_(P,A)}}),an(S,"triggerSyncEvent",function(A){S.props.syncId!==void 0&&lj.emit(cj,S.props.syncId,A,S.eventEmitterSymbol)}),an(S,"applySyncEvent",function(A){var _=S.props,P=_.layout,I=_.syncMethod,B=S.state.updateId,T=A.dataStartIndex,E=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)S.setState(Rt({dataStartIndex:T,dataEndIndex:E},m({props:S.props,dataStartIndex:T,dataEndIndex:E,updateId:B},S.state)));else if(A.activeTooltipIndex!==void 0){var F=A.chartX,q=A.chartY,H=A.activeTooltipIndex,Q=S.state,J=Q.offset,re=Q.tooltipTicks;if(!J)return;if(typeof I=="function")H=I(re,A);else if(I==="value"){H=-1;for(var X=0;X<re.length;X++)if(re[X].value===A.activeLabel){H=X;break}}var ee=Rt(Rt({},J),{},{x:J.left,y:J.top}),W=Math.min(F,ee.x+ee.width),O=Math.min(q,ee.y+ee.height),z=re[H]&&re[H].value,V=uk(S.state,S.props.data,H),U=re[H]?{x:P==="horizontal"?re[H].coordinate:W,y:P==="horizontal"?O:re[H].coordinate}:M7;S.setState(Rt(Rt({},A),{},{activeLabel:z,activeCoordinate:U,activePayload:V,activeTooltipIndex:H}))}else S.setState(A)}),an(S,"renderCursor",function(A){var _,P=S.state,I=P.isTooltipActive,B=P.activeCoordinate,T=P.activePayload,E=P.offset,F=P.activeTooltipIndex,q=P.tooltipAxisBandSize,H=S.getTooltipEventType(),Q=(_=A.props.active)!==null&&_!==void 0?_:I,J=S.props.layout,re=A.key||"_recharts-cursor";return ut.createElement(Vre,{key:re,activeCoordinate:B,activePayload:T,activeTooltipIndex:F,chartName:r,element:A,isActive:Q,layout:J,offset:E,tooltipAxisBandSize:q,tooltipEventType:H})}),an(S,"renderPolarAxis",function(A,_,P){var I=od(A,"type.axisType"),B=od(S.state,"".concat(I,"Map")),T=A.type.defaultProps,E=T!==void 0?Rt(Rt({},T),A.props):A.props,F=B&&B[E["".concat(I,"Id")]];return D.cloneElement(A,Rt(Rt({},F),{},{className:ca(I,F.className),key:A.key||"".concat(_,"-").concat(P),ticks:mf(F,!0)}))}),an(S,"renderPolarGrid",function(A){var _=A.props,P=_.radialLines,I=_.polarAngles,B=_.polarRadius,T=S.state,E=T.radiusAxisMap,F=T.angleAxisMap,q=c0(E),H=c0(F),Q=H.cx,J=H.cy,re=H.innerRadius,X=H.outerRadius;return D.cloneElement(A,{polarAngles:Array.isArray(I)?I:mf(H,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(B)?B:mf(q,!0).map(function(ee){return ee.coordinate}),cx:Q,cy:J,innerRadius:re,outerRadius:X,key:A.key||"polar-grid",radialLines:P})}),an(S,"renderLegend",function(){var A=S.state.formattedGraphicalItems,_=S.props,P=_.children,I=_.width,B=_.height,T=S.props.margin||{},E=I-(T.left||0)-(T.right||0),F=TF({children:P,formattedGraphicalItems:A,legendWidth:E,legendContent:d});if(!F)return null;var q=F.item,H=YP(F,Gre);return D.cloneElement(q,Rt(Rt({},H),{},{chartWidth:I,chartHeight:B,margin:T,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),an(S,"renderTooltip",function(){var A,_=S.props,P=_.children,I=_.accessibilityLayer,B=gc(P,Su);if(!B)return null;var T=S.state,E=T.isTooltipActive,F=T.activeCoordinate,q=T.activePayload,H=T.activeLabel,Q=T.offset,J=(A=B.props.active)!==null&&A!==void 0?A:E;return D.cloneElement(B,{viewBox:Rt(Rt({},Q),{},{x:Q.left,y:Q.top}),active:J,label:H,payload:J?q:[],coordinate:F,accessibilityLayer:I})}),an(S,"renderBrush",function(A){var _=S.props,P=_.margin,I=_.data,B=S.state,T=B.offset,E=B.dataStartIndex,F=B.dataEndIndex,q=B.updateId;return D.cloneElement(A,{key:A.key||"_recharts-brush",onChange:pv(S.handleBrushChange,A.props.onChange),data:I,x:ir(A.props.x)?A.props.x:T.left,y:ir(A.props.y)?A.props.y:T.top+T.height+T.brushBottom-(P.bottom||0),width:ir(A.props.width)?A.props.width:T.width,startIndex:E,endIndex:F,updateId:"brush-".concat(q)})}),an(S,"renderReferenceElement",function(A,_,P){if(!A)return null;var I=S,B=I.clipPathId,T=S.state,E=T.xAxisMap,F=T.yAxisMap,q=T.offset,H=A.type.defaultProps||{},Q=A.props,J=Q.xAxisId,re=J===void 0?H.xAxisId:J,X=Q.yAxisId,ee=X===void 0?H.yAxisId:X;return D.cloneElement(A,{key:A.key||"".concat(_,"-").concat(P),xAxis:E[re],yAxis:F[ee],viewBox:{x:q.left,y:q.top,width:q.width,height:q.height},clipPathId:B})}),an(S,"renderActivePoints",function(A){var _=A.item,P=A.activePoint,I=A.basePoint,B=A.childIndex,T=A.isRange,E=[],F=_.props.key,q=_.item.type.defaultProps!==void 0?Rt(Rt({},_.item.type.defaultProps),_.item.props):_.item.props,H=q.activeDot,Q=q.dataKey,J=Rt(Rt({index:B,dataKey:Q,cx:P.x,cy:P.y,r:4,fill:zS(_.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},zn(H,!1)),d1(H));return E.push(y.renderActiveDot(H,J,"".concat(F,"-activePoint-").concat(B))),I?E.push(y.renderActiveDot(H,Rt(Rt({},J),{},{cx:I.x,cy:I.y}),"".concat(F,"-basePoint-").concat(B))):T&&E.push(null),E}),an(S,"renderGraphicChild",function(A,_,P){var I=S.filterFormatItem(A,_,P);if(!I)return null;var B=S.getTooltipEventType(),T=S.state,E=T.isTooltipActive,F=T.tooltipAxis,q=T.activeTooltipIndex,H=T.activeLabel,Q=S.props.children,J=gc(Q,Su),re=I.props,X=re.points,ee=re.isRange,W=re.baseLine,O=I.item.type.defaultProps!==void 0?Rt(Rt({},I.item.type.defaultProps),I.item.props):I.item.props,z=O.activeDot,V=O.hide,U=O.activeBar,K=O.activeShape,se=!!(!V&&E&&J&&(z||U||K)),xe={};B!=="axis"&&J&&J.props.trigger==="click"?xe={onClick:pv(S.handleItemMouseEnter,A.props.onClick)}:B!=="axis"&&(xe={onMouseLeave:pv(S.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:pv(S.handleItemMouseEnter,A.props.onMouseEnter)});var ie=D.cloneElement(A,Rt(Rt({},I.props),xe));function ue(Ce){return typeof F.dataKey=="function"?F.dataKey(Ce.payload):null}if(se)if(q>=0){var Be,me;if(F.dataKey&&!F.allowDuplicatedCategory){var $e=typeof F.dataKey=="function"?ue:"payload.".concat(F.dataKey.toString());Be=c1(X,$e,H),me=ee&&W&&c1(W,$e,H)}else Be=X?.[q],me=ee&&W&&W[q];if(K||U){var Oe=A.props.activeIndex!==void 0?A.props.activeIndex:q;return[D.cloneElement(A,Rt(Rt(Rt({},I.props),xe),{},{activeIndex:Oe})),null,null]}if(!Hn(Be))return[ie].concat(Qm(S.renderActivePoints({item:I,activePoint:Be,basePoint:me,childIndex:q,isRange:ee})))}else{var le,te=(le=S.getItemByXY(S.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:ie},Te=te.graphicalItem,we=Te.item,Ie=we===void 0?A:we,he=Te.childIndex,de=Rt(Rt(Rt({},I.props),xe),{},{activeIndex:he});return[D.cloneElement(Ie,de),null,null]}return ee?[ie,null,null]:[ie,null]}),an(S,"renderCustomized",function(A,_,P){return D.cloneElement(A,Rt(Rt({key:"recharts-customized-".concat(P)},S.props),S.state))}),an(S,"renderMap",{CartesianGrid:{handler:yv,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:yv},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:yv},YAxis:{handler:yv},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((j=w.id)!==null&&j!==void 0?j:gg("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=EL(S.triggeredAfterMouseMove,(N=w.throttleDelay)!==null&&N!==void 0?N:1e3/60),S.state={},S}return sne(y,g),tne(y,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,S=j.data,A=j.height,_=j.layout,P=gc(N,Su);if(P){var I=P.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,T=uk(this.state,S,I,B),E=this.state.tooltipTicks[I].coordinate,F=(this.state.offset.top+A)/2,q=_==="horizontal",H=q?{x:E,y:F}:{y:E,x:F},Q=this.state.formattedGraphicalItems.find(function(re){var X=re.item;return X.type.name==="Scatter"});Q&&(H=Rt(Rt({},H),Q.props.points[I].tooltipPosition),T=Q.props.points[I].tooltipPayload);var J={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:B,activePayload:T,activeCoordinate:H};this.setState(J),this.renderCursor(P),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var S,A;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(j){Jj([gc(j.children,Su)],[gc(this.props.children,Su)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=gc(this.props.children,Su);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,S=N.getBoundingClientRect(),A=gW(S),_={chartX:Math.round(j.pageX-A.left),chartY:Math.round(j.pageY-A.top)},P=S.width/N.offsetWidth||1,I=this.inRange(_.chartX,_.chartY,P);if(!I)return null;var B=this.state,T=B.xAxisMap,E=B.yAxisMap,F=this.getTooltipEventType(),q=JP(this.state,this.props.data,this.props.layout,I);if(F!=="axis"&&T&&E){var H=c0(T).scale,Q=c0(E).scale,J=H&&H.invert?H.invert(_.chartX):null,re=Q&&Q.invert?Q.invert(_.chartY):null;return Rt(Rt({},_),{},{xValue:J,yValue:re},q)}return q?Rt(Rt({},_),q):null}},{key:"inRange",value:function(j,N){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,_=j/S,P=N/S;if(A==="horizontal"||A==="vertical"){var I=this.state.offset,B=_>=I.left&&_<=I.left+I.width&&P>=I.top&&P<=I.top+I.height;return B?{x:_,y:P}:null}var T=this.state,E=T.angleAxisMap,F=T.radiusAxisMap;if(E&&F){var q=c0(E);return xO({x:_,y:P},q)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),S=gc(j,Su),A={};S&&N==="axis"&&(S.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=d1(this.props,this.handleOuterEvent);return Rt(Rt({},_),A)}},{key:"addListener",value:function(){lj.on(cj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){lj.removeListener(cj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,S){for(var A=this.state.formattedGraphicalItems,_=0,P=A.length;_<P;_++){var I=A[_];if(I.item===j||I.props.key===j.key||N===yf(I.item.type)&&S===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,S=N.left,A=N.top,_=N.height,P=N.width;return ut.createElement("defs",null,ut.createElement("clipPath",{id:j},ut.createElement("rect",{x:S,y:A,height:_,width:P})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,S){var A=XP(S,2),_=A[0],P=A[1];return Rt(Rt({},N),{},an({},_,P.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,S){var A=XP(S,2),_=A[0],P=A[1];return Rt(Rt({},N),{},an({},_,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,S=N.formattedGraphicalItems,A=N.activeItem;if(S&&S.length)for(var _=0,P=S.length;_<P;_++){var I=S[_],B=I.props,T=I.item,E=T.type.defaultProps!==void 0?Rt(Rt({},T.type.defaultProps),T.props):T.props,F=yf(T.type);if(F==="Bar"){var q=(B.data||[]).find(function(re){return MJ(j,re)});if(q)return{graphicalItem:I,payload:q}}else if(F==="RadialBar"){var H=(B.data||[]).find(function(re){return xO(j,re)});if(H)return{graphicalItem:I,payload:H}}else if(ty(I,A)||ry(I,A)||Vx(I,A)){var Q=CZ({graphicalItem:I,activeTooltipItem:A,itemData:E.data}),J=E.activeIndex===void 0?Q:E.activeIndex;return{graphicalItem:Rt(Rt({},I),{},{childIndex:J}),payload:Vx(I,A)?E.data[Q]:I.props.data[Q]}}}return null}},{key:"render",value:function(){var j=this;if(!CC(this))return null;var N=this.props,S=N.children,A=N.className,_=N.width,P=N.height,I=N.style,B=N.compact,T=N.title,E=N.desc,F=YP(N,Kre),q=zn(F,!1);if(B)return ut.createElement(OP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ut.createElement(e4,pm({},q,{width:_,height:P,title:T,desc:E}),this.renderClipPath(),EC(S,this.renderMap)));if(this.props.accessibilityLayer){var H,Q;q.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,q.role=(Q=this.props.role)!==null&&Q!==void 0?Q:"application",q.onKeyDown=function(re){j.accessibilityManager.keyboardEvent(re)},q.onFocus=function(){j.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return ut.createElement(OP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ut.createElement("div",pm({className:ca("recharts-wrapper",A),style:Rt({position:"relative",cursor:"default",width:_,height:P},I)},J,{ref:function(X){j.container=X}}),ut.createElement(e4,pm({},q,{width:_,height:P,title:T,desc:E,style:une}),this.renderClipPath(),EC(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(D.Component);an(b,"displayName",r),an(b,"defaultProps",Rt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),an(b,"getDerivedStateFromProps",function(g,y){var w=g.dataKey,j=g.data,N=g.children,S=g.width,A=g.height,_=g.layout,P=g.stackOffset,I=g.margin,B=y.dataStartIndex,T=y.dataEndIndex;if(y.updateId===void 0){var E=ZP(g);return Rt(Rt(Rt({},E),{},{updateId:0},m(Rt(Rt({props:g},E),{},{updateId:0}),y)),{},{prevDataKey:w,prevData:j,prevWidth:S,prevHeight:A,prevLayout:_,prevStackOffset:P,prevMargin:I,prevChildren:N})}if(w!==y.prevDataKey||j!==y.prevData||S!==y.prevWidth||A!==y.prevHeight||_!==y.prevLayout||P!==y.prevStackOffset||!vm(I,y.prevMargin)){var F=ZP(g),q={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},H=Rt(Rt({},JP(y,j,_)),{},{updateId:y.updateId+1}),Q=Rt(Rt(Rt({},F),q),H);return Rt(Rt(Rt({},Q),m(Rt({props:g},Q),y)),{},{prevDataKey:w,prevData:j,prevWidth:S,prevHeight:A,prevLayout:_,prevStackOffset:P,prevMargin:I,prevChildren:N})}if(!Jj(N,y.prevChildren)){var J,re,X,ee,W=gc(N,qm),O=W&&(J=(re=W.props)===null||re===void 0?void 0:re.startIndex)!==null&&J!==void 0?J:B,z=W&&(X=(ee=W.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&X!==void 0?X:T,V=O!==B||z!==T,U=!Hn(j),K=U&&!V?y.updateId:y.updateId+1;return Rt(Rt({updateId:K},m(Rt(Rt({props:g},y),{},{updateId:K,dataStartIndex:O,dataEndIndex:z}),y)),{},{prevChildren:N,dataStartIndex:O,dataEndIndex:z})}return null}),an(b,"renderActiveDot",function(g,y,w){var j;return D.isValidElement(g)?j=D.cloneElement(g,y):On(g)?j=g(y):j=ut.createElement(WS,y),ut.createElement(Ms,{className:"recharts-active-dot",key:w},j)});var v=D.forwardRef(function(y,w){return ut.createElement(b,pm({},y,{ref:w}))});return v.displayName=b.displayName,v},Nne=wne({chartName:"AreaChart",GraphicalChild:P0,axisComponents:[{axisType:"xAxis",AxisComp:ly},{axisType:"yAxis",AxisComp:cy}],formatAxisMap:jee});const jne=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},Xs=({src:e,alt:t,className:r,fallbackText:a,isAvatar:s})=>{const[i,o]=D.useState(!1),[l,c]=D.useState(!1),d=D.useMemo(()=>{const g=(a||t||"").trim();if(!g)return"?";if(s){const y=g.match(/[a-zA-Z0-9]/);return y?y[0].toUpperCase():"?"}else{const y=g.split(/\s+/).filter(w=>w.length>0);if(y.length===0)return"?";if(y.length===1){const w=y[0].match(/[a-zA-Z0-9]/);return w?w[0].toUpperCase():"?"}else{const w=y[0].match(/[a-zA-Z0-9]/),j=y[1].match(/[a-zA-Z0-9]/),N=w?w[0].toUpperCase():"",S=j?j[0].toUpperCase():"";return N&&S?`${N}${S}`:N||"?"}}},[a,t,s]),u=D.useMemo(()=>jne(d),[d]),f=()=>r?.includes("w-5")||r?.includes("h-5")?"text-[10px]":r?.includes("w-6")||r?.includes("h-6")?"text-xs":r?.includes("w-8")||r?.includes("h-8")?"text-sm":r?.includes("w-10")||r?.includes("h-10")?"text-base":r?.includes("w-12")||r?.includes("h-12")||r?.includes("w-14")||r?.includes("h-14")?"text-lg":r?.includes("w-16")||r?.includes("h-16")?"text-xl":r?.includes("w-20")||r?.includes("h-20")?"text-2xl":r?.includes("w-24")||r?.includes("h-24")?"text-3xl":"text-base",m=s?"rounded-full":r?.includes("rounded-3xl")?"rounded-3xl":r?.includes("rounded-xl")?"rounded-xl":r?.includes("rounded-lg")?"rounded-lg":r?.includes("rounded-md")?"rounded-md":r?.includes("rounded-sm")?"rounded-sm":"rounded-lg",b=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const v=`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}if(!e||i){const v=`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}return n.jsxs(n.Fragment,{children:[!l&&n.jsx("div",{className:`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:n.jsx("span",{className:f(),children:d})}),n.jsx("img",{src:e,alt:t,className:`${b} ${m} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},tI=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},wv=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},rI=async(e,t={})=>{await new Promise(o=>setTimeout(o,600));const r=t.body?JSON.parse(t.body):{},a=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${a} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const o=r.email?.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),Yv.some(c=>c.email.toLowerCase().trim()===o)?{success:!0,message:"Simulated OTP sent to "+o}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const o=r.email?.toLowerCase().trim();return{success:!0,token:"v-token-123",user:Yv.find(c=>c.email.toLowerCase()===o)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let o=tI("feedback",[]);if(a==="POST"){const l={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return o.unshift(l),wv("feedback",o),{success:!0,data:l,simulated:!0}}if(a==="PATCH"||a==="PUT"){const l=e.split("/").pop();return o=o.map(c=>c.id===l?{...c,...r,updatedAt:new Date().toISOString()}:c),wv("feedback",o),{success:!0,simulated:!0}}if(a==="DELETE"){const l=e.split("/").pop();return o=o.filter(c=>c.id!==l),wv("feedback",o),{success:!0,simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(a==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(a==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(o=>e.includes(o));if(i){let o=tI(i,[]);if(a==="POST"){const l={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return o.unshift(l),wv(i,o),{success:!0,data:l,simulated:!0}}if(a==="GET"&&e.split("/").length>2){const l=e.split("/").pop();return{success:!0,data:o.find(d=>d.id===l),simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&a==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return Yv[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},t3=()=>"http://127.0.0.1:8050/api/v1/impactOS",r3=t3();typeof window<"u"&&console.log(`[API] Initializing with Base: ${r3}`);const ft=async(e,t={})=>{const r=localStorage.getItem("auth_token"),a=e.startsWith("/")?e:`/${e}`,s=`${r3}${a}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};try{const o=await fetch(s,{...t,headers:i}),l=await o.json().catch(()=>({}));if(!o.ok){const d=["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(p=>a.includes(p));if(o.status===404&&d)return console.warn(`[SYSTEM] Live endpoint ${a} not found. Engaging Virtual Engine fallback.`),rI(a,t);let u=`Server Error ${o.status}`;try{if(l&&typeof l=="object"){const p=l.message||l.error?.message||l.error?.error?.message||(typeof l.error=="string"?l.error:null);p&&typeof p=="string"&&p.trim()&&(u=p)}}catch{}const f=new Error(u);throw f.status=o.status,f.response=o,f.data=l,u&&u!==`Server Error ${o.status}`&&(f.message=u),l?.code&&typeof l.code=="string"?f.code=l.code:l?.error?.code&&typeof l.error.code=="string"&&(f.code=l.error.code),f}return l}catch(o){let l="Unknown error",c="Error",d,u;try{o&&typeof o=="object"?(l=o.message||String(o)||l,c=o.name||c,d=typeof o.status=="number"?o.status:void 0,u=typeof o.code=="string"?o.code:void 0):o&&(l=String(o))}catch{}const f=c==="TypeError"||l.includes("Failed to fetch"),p=d!==void 0&&d>=500,m=d!==void 0&&d>=400&&d<500;if(f||p&&!m)return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),rI(a,t);const b=new Error(l);throw d!==void 0&&(b.status=d),u&&(b.code=u),b}},nI=e=>ft("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),kne=e=>ft("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),aI=()=>ft("/auth/me"),Sne=async()=>{try{await ft("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},_c=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return ft(`/users${t}`)},_ne=e=>ft("/users",{method:"POST",body:JSON.stringify(e)}),Cne=(e,t)=>ft(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Ane=e=>ft(`/users/${e}/dashboard-layout`),Ene=(e,t)=>ft(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),Tne=e=>ft(`/users/${e}`,{method:"DELETE"}),One=(e,t)=>ft(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),hd=e=>ft(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),Pne=e=>ft("/companies",{method:"POST",body:JSON.stringify(e)}),B7=(e,t)=>ft(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),U7=e=>ft(`/companies/${e}`,{method:"DELETE"}),Sh=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const a=r.toString();return ft(`/contacts${a?`?${a}`:""}`)},sI=e=>ft("/contacts",{method:"POST",body:JSON.stringify(e)}),q7=(e,t)=>ft(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),$7=e=>ft(`/contacts/${e}`,{method:"DELETE"}),kg=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return ft(`/deals${s?`?${s}`:""}`)},Ine=e=>ft("/deals",{method:"POST",body:JSON.stringify(e)}),Nv=(e,t)=>ft(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),iI=e=>ft(`/deals/${e}`,{method:"DELETE"}),I0=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return ft(`/projects${s?`?${s}`:""}`)},Dne=e=>ft(`/projects/${e}`),Lne=e=>ft("/projects",{method:"POST",body:JSON.stringify(e)}),z7=(e,t)=>ft(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),H7=e=>ft(`/projects/${e}`,{method:"DELETE"}),uy=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return ft(`/tasks${s?`?${s}`:""}`)},ob=()=>ft("/tasks/categories"),W7=e=>ft("/tasks",{method:"POST",body:JSON.stringify(e)}),lb=(e,t)=>ft(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),V7=e=>ft(`/tasks/${e}`,{method:"DELETE"}),Fne=e=>ft("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),G7=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return ft(`/invoices${s?`?${s}`:""}`)},Mne=e=>ft("/invoices",{method:"POST",body:JSON.stringify(e)}),jv=(e,t)=>ft(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),oI=e=>ft(`/invoices/${e}`,{method:"DELETE"}),Rne=(e,t)=>ft(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),lI=e=>ft(`/automations${e?`?userId=${e}`:""}`),Bne=e=>ft("/automations",{method:"POST",body:JSON.stringify(e)}),Une=e=>ft(`/automations/${e}/toggle`,{method:"PATCH"}),qne=e=>ft(`/automations/${e}`,{method:"DELETE"}),K7=(e,t)=>ft(`/notifications?userId=${e}&limitNum=${t}`),Jm=e=>ft("/notifications",{method:"POST",body:JSON.stringify(e)}),X7=(e,t)=>ft(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),Y7=e=>ft("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),$ne=e=>ft(`/users/${e}/notification-preferences`),zne=(e,t)=>ft(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),Hne=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return ft(`/satisfaction/records${t}`)},Wne=e=>ft(`/satisfaction/records/${e}`),Vne=e=>ft("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),fk=e=>ft(`/satisfaction/companies/${e}`),Gne=e=>ft(`/satisfaction/surveys/${e}`),Kne=e=>ft("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),Xne=()=>ft("/satisfaction/templates/default"),Yne=e=>ft("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),Qne=(e,t)=>ft(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),Jne=()=>ft("/satisfaction/stats"),Zne=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return ft(`/playbooks/templates${t}`)},eae=e=>ft(`/playbooks/templates/${e}`),tae=e=>ft("/playbooks/templates",{method:"POST",body:JSON.stringify(e)}),rae=(e,t)=>ft(`/playbooks/templates/${e}`,{method:"PUT",body:JSON.stringify(t)}),nae=e=>ft(`/playbooks/templates/${e}`,{method:"DELETE"}),aae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return ft(`/playbooks/instances${t}`)},sae=e=>ft(`/playbooks/instances/${e}`),iae=e=>ft("/playbooks/instances",{method:"POST",body:JSON.stringify(e)}),oae=(e,t)=>ft(`/playbooks/instances/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),lae=(e,t)=>ft(`/playbooks/instances/${e}/steps/${t}/complete`,{method:"POST"}),cae=e=>ft(`/playbooks/instances/${e}/completions`),dae=(e="default")=>ft(`/data-retention/policy?workspaceId=${e}`),uae=(e,t)=>ft("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),fae=(e="default")=>ft(`/data-retention/stats?workspaceId=${e}`),hae=(e="default",t=50)=>ft("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),mae=(e="default",t=50)=>ft("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),pae=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),ft(`/data-retention/export?${r.toString()}`)},cI=()=>ft("/pipelines"),dI=e=>ft("/pipelines",{method:"POST",body:JSON.stringify(e)}),kv=(e,t)=>ft(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),xae=()=>ft("/feedback"),Q7=e=>ft("/feedback",{method:"POST",body:JSON.stringify(e)}),uj=(e,t)=>ft(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),uI=e=>ft(`/feedback/${e}`,{method:"DELETE"}),gae=e=>{const t=new URLSearchParams;e?.companyId&&t.append("companyId",e.companyId),e?.userId&&t.append("userId",e.userId);const r=t.toString();return ft(`/expenses${r?`?${r}`:""}`)},vae=e=>ft("/expenses",{method:"POST",body:JSON.stringify(e)}),bae=(e,t)=>ft(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),fI=e=>ft(`/expenses/${e}`,{method:"DELETE"}),J7=()=>ft("/expense-categories"),Z7=e=>ft("/expense-categories",{method:"POST",body:JSON.stringify(e)}),yae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString():"";return ft(`/budgets${t}`)},wae=e=>ft("/budgets",{method:"POST",body:JSON.stringify(e)}),Nae=(e,t)=>ft(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),jae=e=>ft(`/budgets/${e}`,{method:"DELETE"}),kae=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString();return ft(`/budgets/tracking${t}`)},Sae=()=>ft("/budgets/departments"),eM=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a)).toString():"";return ft(`/contracts${t}`)},_ae=e=>ft("/contracts",{method:"POST",body:JSON.stringify(e)}),Cae=(e,t)=>ft(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Aae=e=>ft(`/contracts/${e}`,{method:"DELETE"}),Eae=(e,t)=>ft(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),Tae=()=>ft("/contracts/document-types"),Oae=e=>ft("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),cb=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return ft(`/contracts/google-drive/access-token${t}`)},Pae=e=>ft("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),Iae=e=>ft("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),Dae=(e,t)=>ft("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Lae=(e,t)=>ft("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Fae=()=>ft("/data-hygiene/duplicate-companies"),Mae=()=>ft("/data-hygiene/duplicate-contacts"),Rae=()=>ft("/data-hygiene/incomplete-records"),Bae=()=>ft("/data-hygiene/domain-mismatches"),Uae=()=>ft("/industries"),qae=e=>ft("/industries",{method:"POST",body:JSON.stringify(e)}),$ae=(e,t)=>ft(`/industries/${e}`,{method:"PUT",body:JSON.stringify(t)}),zae=e=>ft(`/industries/${e}`,{method:"DELETE"}),Hae=async(e,t="company")=>{const r=localStorage.getItem("auth_token"),a=t3(),s=new FormData;s.append("file",e),s.append("type",t);const i=await fetch(`${a}/import/upload`,{method:"POST",headers:r?{Authorization:`Bearer ${r}`}:{},body:s});if(!i.ok){const o=await i.json().catch(()=>({message:i.statusText}));throw new Error(o.message||"Upload failed")}return i.json()},Wae=async(e,t="company")=>{try{return await ft("/import/google-sheets",{method:"POST",body:JSON.stringify({url:e,type:t})})}catch(r){let a="Failed to import Google Sheets";r.data?.message?a=r.data.message:r.message&&r.message!=="Server Error 400"?a=r.message:r.error?.message&&(a=r.error.message);const s=new Error(a);throw s.response=r.response,s.data=r.data||r.response?.data,s.error=r.error||r,s.code=r.code||r.data?.code,s}},Vae=(e,t)=>ft(`/import/${e}/mapping`,{method:"POST",body:JSON.stringify({mapping:t})}),Gae=e=>ft(`/import/${e}/preview`),Kae=(e,t,r)=>ft(`/import/${e}/execute`,{method:"POST",body:JSON.stringify({targetAccountSelections:t,...r?{companySelections:r}:{}})}),Xae=e=>ft(`/import/batch/${e}`),Yae=e=>{const t=new URLSearchParams;e?.userId&&t.append("userId",e.userId),e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate),t.append("limit",String(e.limit)),e?.offset&&t.append("offset",String(e.offset));const r=t.toString();return ft(`/import/batches${r?`?${r}`:""}`)},n3=e=>ft(`/google-calendar/status?userId=${e}`),tM=e=>ft(`/google-calendar/auth-url?userId=${e}`),Qae=(e,t,r)=>ft(`/google-calendar/events?userId=${r}&startDate=${e}&endDate=${t}`),Jae=e=>ft("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),Zae=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),a!=null&&s.append("scopeDays",String(a)),ft(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},ese=e=>ft(`/shared-inbox/accounts?userId=${e}`),tse=(e,t)=>ft("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),rse=e=>ft(`/shared-inbox/filtered-accounts?userId=${e}`),nse=(e,t)=>ft("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),ase=(e,t)=>ft(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),rM=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.cursor&&r.append("cursor",t.cursor),t.page!==void 0&&!t.cursor&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),ft(`/shared-inbox/emails?${r.toString()}`)):ft(`/shared-inbox/emails?${r.toString()}`)},sse=(e,t)=>ft(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),ise=(e,t)=>ft(`/shared-inbox/emails/${e}?userId=${t}`),hI=(e,t,r)=>ft(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),ose=(e,t)=>ft(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),lse=e=>ft("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),cse=e=>ft(`/shared-inbox/notes/${e}`),dse=(e,t)=>ft(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),use=(e,t,r)=>ft("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),fse=e=>ft("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),hse=e=>ft(`/shared-inbox/templates?userId=${e}`),mse=(e,t)=>ft(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),pse=e=>ft("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),xse=e=>ft("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),gse=e=>ft("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),nM=e=>ft(`/shared-inbox/signatures?userId=${e}`),vse=e=>ft("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),bse=(e,t)=>ft(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),yse=(e,t)=>ft(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),mI=(e,t)=>ft(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),pI=(e,t)=>ft(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),wse=(e,t)=>ft(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),Sv=(e,t)=>ft(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),xI=(e,t,r)=>{const a=t3(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${a}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},Nse=e=>ft("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),jse=(e,t)=>ft(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),kse=e=>ft("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),Sse=e=>ft(`/email-sync-filter?userId=${e}`),_se=(e,t)=>ft("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),Cse=(e,t)=>ft(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),a3=(e,t)=>ft(`/shared-inbox/activity/${e}/${t}`),Ase=e=>ft("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),Ese=e=>ft("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),Tse=e=>ft("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),Ose=e=>ft("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),Pse=e=>ft("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),Ise=e=>ft(`/shared-inbox/suggested-links?emailId=${e}`),Dse=e=>ft("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),Lse=e=>ft(`/shared-inbox/related-tasks/${e}`),Fse=e=>ft(`/shared-inbox/related-projects/${e}`),Mse=e=>ft(`/shared-inbox/related-contracts/${e}`),Rse=e=>ft(`/shared-inbox/labels?userId=${e}`),Bse=e=>ft("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),Use=(e,t)=>ft(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),qse=(e,t)=>ft(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),$se=e=>ft("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),gI=e=>ft(`/shared-inbox/categorization-rules?userId=${e}`),zse=(e,t=30)=>ft(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),Hse=e=>ft("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),Wse=(e,t)=>ft(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),Vse=e=>ft(`/shared-inbox/folder-mapping?userId=${e}`),Gse=e=>ft("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),hk=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),a&&s.append("endDate",a),ft(`/shared-inbox/calendar-events?${s.toString()}`)},Kse=e=>ft("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),Xse=(e,t,r,a)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:a});return ft(`/shared-inbox/calendar-availability?${s.toString()}`)},Yse=(e,t,r,a,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),a&&o.append("query",a),s&&o.append("pageToken",s),ft(`/shared-inbox/drive-files?${o.toString()}`)},vI=e=>ft("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),Qse=e=>ft("/events",{method:"POST",body:JSON.stringify(e)}),Jse=(e,t)=>ft(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),aM=e=>ft("/lead-sources?active=true"),Zse=async(e,t)=>{const r=localStorage.getItem("auth_token"),a=new FormData;a.append("file",e),a.append("userId",t);const s=await fetch(`${r3}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},eie=e=>ft("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),tie=e=>ft("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),rie=e=>ft("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),nie=({toast:e,onRemove:t})=>{D.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return n.jsx(gn,{className:"w-5 h-5 text-emerald-600"});case"error":return n.jsx(Kk,{className:"w-5 h-5 text-red-600"});case"warning":return n.jsx(Bn,{className:"w-5 h-5 text-amber-600"});case"info":return n.jsx(b0,{className:"w-5 h-5 text-blue-600"});default:return n.jsx(b0,{className:"w-5 h-5 text-blue-600"})}},a=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return n.jsxs("div",{className:`${a()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[n.jsx("div",{className:"shrink-0",children:r()}),n.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),n.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-4 h-4 text-slate-400"})})]})},aie=({toasts:e,onRemove:t})=>n.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>n.jsx("div",{className:"pointer-events-auto",children:n.jsx(nie,{toast:r,onRemove:t})},r.id))}),sM=D.createContext(void 0),kn=()=>{const e=D.useContext(sM);if(!e)throw new Error("useToast must be used within ToastProvider");return e},sie=({children:e})=>{const[t,r]=D.useState([]),a=D.useCallback(d=>{r(u=>u.filter(f=>f.id!==d))},[]),s=D.useCallback((d,u="info",f=3e3)=>{const m={id:Math.random().toString(36).substring(2,9),message:d,type:u,duration:f};r(b=>[...b,m])},[]),i=D.useCallback((d,u)=>{s(d,"success",u)},[s]),o=D.useCallback((d,u)=>{s(d,"error",u||5e3)},[s]),l=D.useCallback((d,u)=>{s(d,"warning",u)},[s]),c=D.useCallback((d,u)=>{s(d,"info",u)},[s]);return n.jsxs(sM.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,n.jsx(aie,{toasts:t,onRemove:a})]})},Zm=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],ki="USD",mk=e=>Zm.find(t=>t.code===e),uf=e=>e?mk(e)?.symbol||"$":Zm.find(r=>r.code===ki)?.symbol||"$",pf=(e,t)=>`${uf(t)}${e.toLocaleString()}`,bI=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"},{id:"nps-average",order:7,size:"medium"},{id:"nps-needing-attention",order:8,size:"medium"},{id:"nps-recent-feedback",order:9,size:"medium"},{id:"nps-awaiting-feedback",order:10,size:"medium"}],yI=({onNavigate:e})=>{const{showError:t,showSuccess:r}=kn(),[a,s]=D.useState(null),[i,o]=D.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=D.useState([]),[d,u]=D.useState([]),[f,p]=D.useState(!0),[m,b]=D.useState("1M"),[v,g]=D.useState([]),[y,w]=D.useState(!1),[j,N]=D.useState({}),[S,A]=D.useState({}),[_,P]=D.useState(ki),[I,B]=D.useState(!1),[T,E]=D.useState(bI),[F,q]=D.useState(null),[H,Q]=D.useState(!1),[J,re]=D.useState(!1),[X,ee]=D.useState(null);D.useRef(0);const[W,O]=D.useState(null),[z,V]=D.useState(!1);D.useEffect(()=>{const he=JSON.parse(localStorage.getItem("user_data")||"null");s(he),he?.id&&U(he.id)},[]);const U=async he=>{try{const de=await Ane(he);if(de?.data&&Array.isArray(de.data)){const Ce=de.data.flatMap(fe=>fe.id==="stats-grid"?[{id:"stat-pipeline",order:fe.order,size:fe.size||"medium"},{id:"stat-projects",order:fe.order+.1,size:fe.size||"medium"},{id:"stat-invoices",order:fe.order+.2,size:fe.size||"medium"},{id:"stat-tasks",order:fe.order+.3,size:fe.size||"medium"}]:fe.order>0?[{...fe,order:fe.order+3,size:fe.size||"medium"}]:[{...fe,size:fe.size||"medium"}]),Ve=new Set,ge=Ce.filter(fe=>Ve.has(fe.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${fe.id}, removing duplicate`),!1):(Ve.add(fe.id),!0));E(ge)}}catch{console.log("[DASHBOARD] Using default layout")}},K=async()=>{if(a?.id){re(!0);try{await Ene(a.id,T),r("Dashboard layout saved"),Q(!1)}catch{t("Failed to save layout")}finally{re(!1)}}},se=()=>{E(bI)},xe=(he,de)=>{E(Ce=>Ce.map(Ve=>Ve.id===he?{...Ve,size:de}:Ve))},ie=(he="medium",de)=>{if(de.startsWith("stat-"))return"";switch(he){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},ue=(he,de)=>{H&&(q(de),he.dataTransfer.effectAllowed="move",he.dataTransfer.setData("text/html",de))},Be=he=>{!H||!F||(he.preventDefault(),he.dataTransfer.dropEffect="move")},me=(he,de)=>{if(!H||!F||F===de)return;he.preventDefault();const Ce=[...T],Ve=Ce.findIndex(fe=>fe.id===F),ge=Ce.findIndex(fe=>fe.id===de);if(Ve!==-1&&ge!==-1){const fe=Ce[Ve];Ce.splice(Ve,1),Ce.splice(ge,0,fe),Ce.forEach((_e,Ue)=>{_e.order=Ue}),E(Ce)}q(null)},$e=()=>{q(null)};D.useEffect(()=>{(async()=>{p(!0);try{const de=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!de){p(!1);return}const[Ce,Ve,ge,fe,_e,Ue]=await Promise.all([kg(de).catch(()=>({data:[]})),I0(de).catch(()=>({data:[]})),uy(de).catch(()=>({data:[]})),G7(de).catch(()=>({data:[]})),rM(de).catch(()=>({data:[]})),_c().catch(()=>({data:[]}))]),ke=Ce?.data||Ce||[],Fe=Ve?.data||Ve||[],qe=ge?.data||ge||[],et=fe?.data||fe||[],Kt=_e?.data||_e||[],qt=Ue?.data||Ue||[],vr=Array.isArray(ke)?ke.filter(jr=>jr.stage!=="Won"&&jr.stage!=="Lost"):[],er={},mr={};vr.forEach(jr=>{const qr=jr.currency||ki,tr=jr.value||0;er[qr]=(er[qr]||0)+tr,mr[qr]=(mr[qr]||0)+1});const Ge=Array.isArray(Fe)?Fe.filter(jr=>jr.status!=="Completed"&&jr.status!=="Cancelled").length:0,jt=Array.isArray(et)?et.filter(jr=>jr.status!=="Paid"):[],br={};jt.forEach(jr=>{const qr=jr.currency||ki,tr=jr.amount||0;br[qr]=(br[qr]||0)+tr,mr[qr]=(mr[qr]||0)+1});let Qt=0,Fr=ki;Object.keys(mr).forEach(jr=>{mr[jr]>Qt&&(Qt=mr[jr],Fr=jr)}),N(er),A(br),P(Fr);const Mr=er[Fr]||0,rt=br[Fr]||0,At=0,cr=new Date;cr.setHours(0,0,0,0);const wr=Array.isArray(qe)?qe.filter(jr=>{if(!jr.dueDate)return!1;const qr=new Date(jr.dueDate);return qr.setHours(0,0,0,0),qr.getTime()===cr.getTime()&&jr.status!=="Done"}):[],Gr=await Promise.all(wr.slice(0,2).map(async jr=>{if(jr.projectId)try{const qr=await Dne(jr.projectId);return{...jr,projectTitle:qr?.data?.title||"Software"}}catch{return{...jr,projectTitle:"Software"}}return{...jr,projectTitle:"Software"}}));o({openPipeline:Mr,activeProjects:Ge,unpaidInvoices:rt,actionableMail:At}),c(Gr),u(qt.slice(0,3))}catch(de){console.error("[DASHBOARD] Failed to fetch data:",de),t("Failed to load dashboard data")}finally{p(!1)}})()},[t]),D.useEffect(()=>{(async()=>{w(!0);try{const de=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!de){w(!1);return}const Ce=await Rne(de,m),Ve=Ce?.data||Ce||[];g(Array.isArray(Ve)?Ve:[])}catch{g([])}finally{w(!1)}})()},[m]),D.useEffect(()=>{(async()=>{V(!0);try{const Ce=(await Jne())?.data;Ce&&O({averageNps:Ce.averageNps??null,totalResponses:Ce.totalResponses??0,companiesNeedingAttention:Ce.companiesNeedingAttention??[],recentFeedback:Ce.recentFeedback??[],awaitingFeedback:Ce.awaitingFeedback??[]})}catch{O(null)}finally{V(!1)}})()},[]);const Oe=(he,de=_)=>{const Ce=uf(de);return he>=1e3?`${Ce}${(he/1e3).toFixed(1)}k`:`${Ce}${he.toLocaleString()}`},le=(he,de)=>{const Ce=F===he,Ve=T.find(Ue=>Ue.id===he),ge=de||Ve?.size||"medium",fe={draggable:H,onDragStart:Ue=>ue(Ue,he),onDragOver:Be,onDrop:Ue=>me(Ue,he),onDragEnd:$e,className:`transition-all ${Ce?"opacity-50 scale-95":""} ${H?"cursor-move":""}`},_e=()=>{if(!H)return null;const Ue=[{value:"small",icon:n.jsx(xU,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:n.jsx(NU,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:n.jsx(hU,{className:"w-3 h-3"}),label:"Large"}];return n.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:Ue.map(({value:ke,icon:Fe,label:qe})=>n.jsx("button",{onClick:et=>{et.stopPropagation(),xe(he,ke)},onMouseEnter:()=>ee(he),onMouseLeave:()=>ee(null),className:`p-1.5 rounded transition-all ${ge===ke?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:qe,children:Fe},ke))})};switch(he){case"stat-pipeline":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),n.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Yd,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Oe(i.openPipeline,_)})]}),n.jsx("button",{onClick:Ue=>{Ue.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(dh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},he);case"stat-projects":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),n.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Cl,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},he);case"stat-invoices":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),n.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Mu,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Oe(i.unpaidInvoices,_)})]}),n.jsx("button",{onClick:Ue=>{Ue.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(dh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},he);case"stat-tasks":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),n.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:n.jsx(_i,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},he);case"revenue-chart":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),_e()]}),n.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),n.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),n.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(Ue=>n.jsx("button",{onClick:()=>b(Ue),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${Ue===m?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:Ue},Ue))})]}),n.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:y?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsx(f6,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):v.length===0?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Yd,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):n.jsx(dW,{width:"100%",height:"100%",children:n.jsxs(Nne,{data:v,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),n.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),n.jsx(w7,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),n.jsx(ly,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),n.jsx(cy,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:Ue=>`$${Ue}`}),n.jsx(Su,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),n.jsx(P0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},he);case"inbox-card":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),_e()]}),n.jsxs("div",{onClick:()=>!H&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${H?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[n.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:n.jsx(bf,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!H&&n.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:n.jsx(To,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),n.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),n.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),n.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:n.jsxs("div",{className:"flex -space-x-2",children:[d.map((Ue,ke)=>n.jsx(Xs,{src:Ue.avatar,isAvatar:!0,fallbackText:Ue.name||Ue.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},Ue.id||ke)),n.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),n.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:n.jsx(p0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},he);case"tasks-card":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),n.jsx(_i,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4 lg:space-y-6",children:f?n.jsx("div",{className:"space-y-3",children:[1,2].map(Ue=>n.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},Ue))}):l.length>0?l.slice(0,2).map(Ue=>n.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[n.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:Ue.title}),n.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:Ue.projectTitle||"Software"})]})]},Ue.id)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),n.jsx("button",{onClick:()=>!H&&e("tasks"),disabled:H,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},he);case"nps-average":{const Ue=W?.averageNps??null,ke=Ue===null?"text-slate-400":Ue>=9?"text-green-600":Ue>=7?"text-amber-600":"text-red-600",Fe=Ue===null?"bg-slate-50":Ue>=9?"bg-green-50":Ue>=7?"bg-amber-50":"bg-red-50";return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Average NPS Score"})]}),_e()]}),n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full disabled:opacity-50",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:`p-2 rounded-lg lg:p-2.5 lg:rounded-xl ${Fe} ${ke}`,children:n.jsx(bf,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em]",children:"Average NPS Score"}),z?n.jsx("div",{className:"h-8 w-16 bg-slate-100 rounded mt-1 animate-pulse"}):n.jsx("h3",{className:`text-2xl lg:text-3xl font-black mt-0.5 lg:mt-1 ${ke}`,children:Ue!==null?Ue.toFixed(1):""})]})]})]},he)}case"nps-needing-attention":{const Ue=W?.companiesNeedingAttention??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Companies Needing Attention"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Detractors (06)"}),n.jsx(bf,{className:"w-4 h-4 text-red-400"})]}),n.jsx("div",{className:"space-y-3",children:z?[1,2,3].map(ke=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},ke)):Ue.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No detractors"}):Ue.map(ke=>{const Fe=ke.accountManagerId&&d?.length?d.find(qe=>qe.id===ke.accountManagerId)?.name:null;return n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex flex-col gap-0.5 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:ke.companyName}),n.jsx("span",{className:"text-xs font-bold text-red-600 shrink-0",children:ke.npsScore})]}),Fe?n.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["AM: ",Fe]}):null]},ke.companyId)})}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},he)}case"nps-recent-feedback":{const Ue=W?.recentFeedback??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Recent Feedback"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Latest 5 responses"}),n.jsx(lo,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4",children:z?[1,2,3].map(ke=>n.jsx("div",{className:"h-14 bg-slate-50 rounded animate-pulse"},ke)):Ue.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No feedback yet"}):Ue.map((ke,Fe)=>n.jsxs("div",{className:"border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900",children:ke.companyName}),n.jsx("span",{className:`text-xs font-bold shrink-0 ${ke.npsScore>=9?"text-green-600":ke.npsScore>=7?"text-amber-600":"text-red-600"}`,children:ke.npsScore})]}),ke.feedback?n.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2",children:ke.feedback}):null,n.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:ke.date?new Date(ke.date).toLocaleDateString():""})]},Fe))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},he)}case"nps-awaiting-feedback":{const Ue=W?.awaitingFeedback??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Awaiting Feedback"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Survey sent, no response yet"}),n.jsx(es,{className:"w-4 h-4 text-amber-400"})]}),n.jsx("div",{className:"space-y-3",children:z?[1,2,3].map(ke=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},ke)):Ue.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"None"}):Ue.map(ke=>n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:ke.companyName}),n.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[ke.daysElapsed,"d ago"]})]},ke.companyId))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},he)}default:return null}},te=a?.name?.split(" ")[0]||"Alex",Te=a?.avatar||a?.photoURL||"",we=a?.name||a?.email||"Impact Member",Ie=[...T].sort((he,de)=>he.order-de.order);return n.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{src:Te,alt:we,fallbackText:we,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",te]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:H?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:se,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),n.jsx("button",{onClick:K,disabled:J,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:J?n.jsxs(n.Fragment,{children:[n.jsx(f6,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Layout"]})}),n.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[n.jsx(pc,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),H&&n.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:n.jsx(pc,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),n.jsx("div",{className:"space-y-6 lg:space-y-8",children:Ie.map((he,de)=>{const Ce=le(he.id,he.size);if(he.id.startsWith("stat-")){const Ue=Ie[de-1];if(Ue&&Ue.id.startsWith("stat-"))return null;{const Fe=[];for(let qe=de;qe<Ie.length&&Ie[qe].id.startsWith("stat-");qe++)Fe.push(Ie[qe]);return n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:Fe.map(qe=>le(qe.id,qe.size))},`stat-cards-group-${de}`)}}if(he.id==="revenue-chart"){const Ue=Ie[de+1],ke=Ie[de+2],Fe=he.size||"large";if(Ue&&ke&&(Ue.id==="inbox-card"&&ke.id==="tasks-card"||Ue.id==="tasks-card"&&ke.id==="inbox-card")&&Fe==="large")return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:Ce}),n.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[le(Ue.id,Ue.size),le(ke.id,ke.size)]})]},"revenue-with-sidebar")}const ge=Ie[de-1],fe=Ie[de-2];if(ge?.id==="revenue-chart"&&(he.id==="inbox-card"||he.id==="tasks-card")){const Ue=ge.size||"large",ke=Ie[de+1];if(Ue==="large"&&ke&&(he.id==="inbox-card"&&ke.id==="tasks-card"||he.id==="tasks-card"&&ke.id==="inbox-card"))return null}if(fe?.id==="revenue-chart"&&(he.id==="inbox-card"||he.id==="tasks-card")&&(fe.size||"large")==="large")return null;const _e=ie(he.size||"medium",he.id);return _e?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:n.jsx("div",{className:_e,children:Ce})},he.id):n.jsx("div",{children:Ce},he.id)})}),I&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>B(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(dh,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),n.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(Yd,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(j).length>0?Object.entries(j).sort((he,de)=>de[1]-he[1]).map(([he,de])=>{const Ce=mk(he),Ve=he===_;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ve?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ce?.symbol||he}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:he}),Ve&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:pf(de,he)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ce?.name||he})]},he)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(Mu,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(S).length>0?Object.entries(S).sort((he,de)=>de[1]-he[1]).map(([he,de])=>{const Ce=mk(he),Ve=he===_;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ve?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ce?.symbol||he}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:he}),Ve&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:pf(de,he)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ce?.name||he})]},he)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),n.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:n.jsxs("button",{onClick:()=>B(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},iM=({extractedData:e,suggestions:t,source:r,onConfirm:a,onCancel:s,isProcessing:i=!1,companies:o})=>{const[l,c]=D.useState(""),[d,u]=D.useState(""),[f,p]=D.useState(""),[m,b]=D.useState(""),[v,g]=D.useState(""),[y,w]=D.useState(""),[j,N]=D.useState(""),[S,A]=D.useState(null),[_,P]=D.useState({});D.useEffect(()=>{r==="business_card"?(c(e?.name?.value||""),u(e?.email?.value||""),p(e?.phone?.value||""),b(e?.title?.value||""),g(e?.linkedin?.value||""),w(e?.company?.value||""),N(e?.website?.value||"")):r==="linkedin"&&(c(e?.name||""),u(e?.email||""),p(e?.phone||""),b(e?.currentRole||e?.headline||""),g(e?.profileImageUrl||""),w(e?.currentCompany||""),N(e?.companyWebsite||"")),t?.existingCompany&&A(t.existingCompany.id)},[e,t,r]);const I=F=>F>=95?"text-green-600 bg-green-50":F>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",B=F=>F>=95?"High Confidence":F>=75?"Medium - Verify":"Low - Review",T=()=>{const F={};return l.trim()||(F.name="Name is required"),d&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)&&(F.email="Invalid email format"),!S&&!y.trim()&&(F.company="Company is required"),P(F),Object.keys(F).length===0},E=()=>{if(!T())return;const F={name:l,email:d.toLowerCase(),phone:f,role:m,linkedin:v};a(F,{name:y,website:j},S)};return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Xt,{className:"w-6 h-6"})})]}),t?.existingContact&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[n.jsx(y0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),n.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),n.jsx("div",{className:"mt-2 flex gap-2",children:n.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(co,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:l,onChange:F=>c(F.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&e?.name?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.name.confidence)}`,children:B(e.name.confidence)})]}),_.name&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.name})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(es,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",value:d,onChange:F=>u(F.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&e?.email?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.email.confidence)}`,children:B(e.email.confidence)})]}),_.email&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.email})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),n.jsxs("div",{className:"relative",children:[n.jsx(Gj,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"tel",value:f,onChange:F=>p(F.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&e?.phone?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.phone.confidence)}`,children:B(e.phone.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:m,onChange:F=>b(F.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&e?.title?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.title.confidence)}`,children:B(e.title.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),n.jsxs("div",{className:"relative",children:[n.jsx(uh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:v,onChange:F=>g(F.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),n.jsxs("select",{value:S||"new",onChange:F=>{const q=F.target.value;if(q==="new")A(null);else{A(q);const H=o.find(Q=>Q.id===q);H&&(w(H.name),N(H.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.company?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(F=>n.jsx("option",{value:F.id,children:F.name},F.id))]}),_.company&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.company})]}),!S&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(cl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:y,onChange:F=>w(F.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),n.jsxs("div",{className:"relative",children:[n.jsx(dh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:j,onChange:F=>N(F.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:E,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(gn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},iie=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=kn(),[i,o]=D.useState("select"),[l,c]=D.useState(null),[d,u]=D.useState(null),[f,p]=D.useState(null),[m,b]=D.useState(null),[v,g]=D.useState(null),[y,w]=D.useState(!1),[j,N]=D.useState([]),[S,A]=D.useState([]),_=D.useRef(null),P=D.useRef(null),I=D.useRef(null),B=D.useRef(null);ut.useEffect(()=>{(async()=>{try{const[X,ee]=await Promise.all([hd(),aM(!0)]);N(X.data||[]),A(ee.data||[])}catch(X){console.error("Failed to load data:",X)}})()},[]);const T=async()=>{console.log("Camera button clicked - starting camera..."),g(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let re;try{console.log("Requesting rear camera..."),re=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),re=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",re),B.current=re,o("camera"),await new Promise(X=>setTimeout(X,100)),_.current){_.current.srcObject=re,console.log("Stream set to video element");try{await _.current.play(),console.log(" Camera started successfully")}catch(X){console.error("Video play error:",X)}}}catch(re){console.error(" Camera error:",re);let X="Camera access denied. Please grant camera permission or use file upload.";re.name==="NotAllowedError"?X="Camera permission denied. Please allow camera access in your browser settings.":re.name==="NotFoundError"?X="No camera found on this device. Please use file upload instead.":re.name==="NotReadableError"?X="Camera is already in use by another application.":re.name==="NotSupportedError"&&(X="Camera not supported on this browser. Please use file upload."),g(X),o("select"),E()}},E=()=>{B.current&&(B.current.getTracks().forEach(re=>re.stop()),B.current=null),_.current&&(_.current.srcObject=null)},F=()=>{if(!_.current||!P.current)return;const re=_.current,X=P.current,ee=X.getContext("2d");ee&&(X.width=re.videoWidth,X.height=re.videoHeight,ee.drawImage(re,0,0),X.toBlob(W=>{if(W){const O=new File([W],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(O),u(X.toDataURL("image/jpeg")),E(),H(O)}},"image/jpeg",.95))},q=re=>{const X=re.target.files;if(!X||X.length===0)return;const ee=X[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(ee.type)){g("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(ee.size>10*1024*1024){g("File too large. Maximum size is 10MB.");return}if(c(ee),ee.type.startsWith("image/")){const W=new FileReader;W.onload=O=>{u(O.target?.result)},W.readAsDataURL(ee)}H(ee)},H=async re=>{o("processing"),g(null),w(!0);try{const X=await Zse(re,r);if(X.success)p(X.data.extractedData),b(X.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(X){console.error("Processing error:",X),g(X.message||"Failed to process business card. Please try again."),o("select")}finally{w(!1)}},Q=async(re,X,ee)=>{w(!0),g(null);try{const W=S.find(z=>z.name==="Business Card Scanner");if((await eie({contactData:re,companyData:X,linkToExistingCompany:ee,leadSourceId:W?.id||"",scanConfidenceScore:J(f),originalScanData:f,userId:r})).success)o("success"),a("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(W){console.error("Confirm error:",W),g(W.message||"Failed to create contact. Please try again."),s(W.message||"Failed to create contact")}finally{w(!1)}},J=re=>{if(!re)return 0;const X=[re.name?.confidence||0,re.email?.confidence||0,re.phone?.confidence||0,re.title?.confidence||0,re.company?.confidence||0].filter(ee=>ee>0);return X.length===0?0:Math.round(X.reduce((ee,W)=>ee+W,0)/X.length)};return ut.useEffect(()=>()=>{E()},[]),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(Xt,{className:"w-6 h-6"})})]}),v&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:v}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("button",{onClick:re=>{re.preventDefault(),console.log("Camera button clicked"),T()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[n.jsx(m6,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),n.jsxs("button",{onClick:()=>I.current?.click(),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[n.jsx(kc,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),n.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),n.jsx("input",{ref:I,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:q,className:"hidden"})]}),i==="camera-loading"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(pt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),n.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&n.jsxs("div",{className:"relative bg-black",children:[n.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),n.jsx("canvas",{ref:P,className:"hidden"}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:n.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),n.jsx("div",{className:"absolute top-4 left-4",children:n.jsx("button",{onClick:()=>{E(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:n.jsx(Gk,{className:"w-6 h-6 text-gray-700"})})}),n.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:n.jsx("button",{onClick:F,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:n.jsx(m6,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(pt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),d&&n.jsx("div",{className:"mt-6",children:n.jsx("img",{src:d,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&f&&n.jsx(iM,{extractedData:f,suggestions:m||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Q,onCancel:e,isProcessing:y,companies:j}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},oie=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=kn(),[i,o]=D.useState("input"),[l,c]=D.useState(""),[d,u]=D.useState(null),[f,p]=D.useState(null),[m,b]=D.useState(null),[v,g]=D.useState(!1),[y,w]=D.useState([]),[j,N]=D.useState([]);ut.useEffect(()=>{(async()=>{try{const[T,E]=await Promise.all([hd(),aM(!0)]);w(T.data||[]),N(E.data||[])}catch(T){console.error("Failed to load data:",T)}})()},[]);const S=B=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(B),A=B=>{let T=B.trim();return!T.startsWith("http://")&&!T.startsWith("https://")&&(T=`https://${T}`),T.includes("www.")||(T=T.replace("linkedin.com","www.linkedin.com")),T.replace(/\/$/,"")},_=B=>{c(B),b(null)},P=async()=>{if(!l.trim()){b("Please enter a LinkedIn URL");return}const B=A(l);if(!S(B)){b("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),b(null),g(!0);try{const T=await tie({linkedinUrl:B,userId:r});if(T.success)u(T.data.profile),p(T.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(T){console.error("Fetch error:",T);let E="Failed to fetch LinkedIn profile";T.message?.includes("Invalid LinkedIn URL")?E="Invalid LinkedIn URL format":T.message?.includes("private")?E="This LinkedIn profile is private and cannot be accessed":T.message?.includes("rate limit")&&(E="Rate limit exceeded. Please try again later"),b(E),o("input")}finally{g(!1)}},I=async(B,T,E)=>{g(!0),b(null);try{const F=j.find(H=>H.name==="LinkedIn Scanner");if((await rie({contactData:B,linkedinData:d?{headline:d.headline,currentRole:d.currentRole,profileImageUrl:d.profileImageUrl}:void 0,companyData:T,linkToExistingCompany:E,leadSourceId:F?.id||"",userId:r})).success)o("success"),a("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(F){console.error("Confirm error:",F),b(F.message||"Failed to create contact. Please try again."),s(F.message||"Failed to create contact")}finally{g(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(Xt,{className:"w-6 h-6"})})]}),m&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[n.jsx(Bn,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsx("div",{className:"text-red-800",children:m})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),n.jsxs("div",{className:"relative",children:[n.jsx(uh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:l,onChange:B=>_(B.target.value),onKeyPress:B=>B.key==="Enter"&&P(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Paste any public LinkedIn profile URL"}),n.jsx("li",{children:"We'll extract available contact and company information"}),n.jsx("li",{children:"Review and edit before saving to your CRM"}),n.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:P,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(uh,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(pt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&d&&n.jsx(iM,{extractedData:d,suggestions:f||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:I,onCancel:e,isProcessing:v,companies:y}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var fp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lie={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},cie=class{#e=lie;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},lh=new cie;function die(e){setTimeout(e,0)}var _h=typeof window>"u"||"Deno"in globalThis;function Nl(){}function uie(e,t){return typeof e=="function"?e(t):e}function pk(e){return typeof e=="number"&&e>=0&&e!==1/0}function oM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function v0(e,t){return typeof e=="function"?e(t):e}function td(e,t){return typeof e=="function"?e(t):e}function wI(e,t){const{type:r="all",exact:a,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(a){if(t.queryHash!==s3(o,t.options))return!1}else if(!Zx(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function NI(e,t){const{exact:r,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ch(t.options.mutationKey)!==Ch(i))return!1}else if(!Zx(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function s3(e,t){return(t?.queryKeyHashFn||Ch)(e)}function Ch(e){return JSON.stringify(e,(t,r)=>xk(r)?Object.keys(r).sort().reduce((a,s)=>(a[s]=r[s],a),{}):r)}function Zx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Zx(e[r],t[r])):!1}var fie=Object.prototype.hasOwnProperty;function lM(e,t,r=0){if(e===t)return e;if(r>500)return t;const a=jI(e)&&jI(t);if(!a&&!(xk(e)&&xk(t)))return t;const i=(a?e:Object.keys(e)).length,o=a?t:Object.keys(t),l=o.length,c=a?new Array(l):{};let d=0;for(let u=0;u<l;u++){const f=a?u:o[u],p=e[f],m=t[f];if(p===m){c[f]=p,(a?u<i:fie.call(e,f))&&d++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){c[f]=m;continue}const b=lM(p,m,r+1);c[f]=b,b===p&&d++}return i===l&&d===i?e:c}function db(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function jI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function xk(e){if(!kI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!kI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function kI(e){return Object.prototype.toString.call(e)==="[object Object]"}function hie(e){return new Promise(t=>{lh.setTimeout(t,e)})}function gk(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?lM(e,t):t}function mie(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function pie(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var i3=Symbol();function cM(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===i3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function o3(e,t){return typeof e=="function"?e(...t):!!e}function xie(e,t,r){let a=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),a||(a=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var gie=class extends fp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!_h&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},l3=new gie;function vk(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function a(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},r.reject=s=>{a({status:"rejected",reason:s}),t(s)},r}var vie=die;function bie(){let e=[],t=0,r=l=>{l()},a=l=>{l()},s=vie;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{a(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{s=l}}}var Bi=bie(),yie=class extends fp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!_h&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},ub=new yie;function wie(e){return Math.min(1e3*2**e,3e4)}function dM(e){return(e??"online")==="online"?ub.isOnline():!0}var bk=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function uM(e){let t=!1,r=0,a;const s=vk(),i=()=>s.status!=="pending",o=v=>{if(!i()){const g=new bk(v);p(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>l3.isFocused()&&(e.networkMode==="always"||ub.isOnline())&&e.canRun(),u=()=>dM(e.networkMode)&&e.canRun(),f=v=>{i()||(a?.(),s.resolve(v))},p=v=>{i()||(a?.(),s.reject(v))},m=()=>new Promise(v=>{a=g=>{(i()||d())&&v(g)},e.onPause?.()}).then(()=>{a=void 0,i()||e.onContinue?.()}),b=()=>{if(i())return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(f).catch(y=>{if(i())return;const w=e.retry??(_h?0:3),j=e.retryDelay??wie,N=typeof j=="function"?j(r,y):j,S=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,y);if(t||!S){p(y);return}r++,e.onFail?.(r,y),hie(N).then(()=>d()?void 0:m()).then(()=>{t?p(y):b()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(a?.(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?b():m().then(b),s)}}var fM=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pk(this.gcTime)&&(this.#e=lh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(_h?1/0:300*1e3))}clearGcTimeout(){this.#e&&(lh.clearTimeout(this.#e),this.#e=void 0)}},Nie=class extends fM{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=_I(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=_I(this.options);t.data!==void 0&&(this.setState(SI(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=gk(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Nl).catch(Nl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>td(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>v0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!oM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,a=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=cM(this.options,t),d=(()=>{const u={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return a(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=uM({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof bk&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof bk){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...hM(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,...SI(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Bi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function hM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function SI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _I(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var mM=class extends fp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=vk(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#p;#f;#h;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),CI(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return yk(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return yk(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof td(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!db(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&AI(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||td(this.options.enabled,this.#t)!==td(t.enabled,this.#t)||v0(this.options.staleTime,this.#t)!==v0(t.staleTime,this.#t))&&this.#x();const s=this.#g();a&&(this.#t!==r||td(this.options.enabled,this.#t)!==td(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return kie(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#N();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Nl)),t}#x(){this.#y();const e=v0(this.options.staleTime,this.#t);if(_h||this.#a.isStale||!pk(e))return;const r=oM(this.#a.dataUpdatedAt,e)+1;this.#c=lh.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(_h||td(this.options.enabled,this.#t)===!1||!pk(this.#l)||this.#l===0)&&(this.#d=lh.setInterval(()=>{(this.options.refetchIntervalInBackground||l3.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#v(this.#g())}#y(){this.#c&&(lh.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(lh.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,a=this.options,s=this.#a,i=this.#n,o=this.#i,c=e!==r?e.state:this.#r,{state:d}=e;let u={...d},f=!1,p;if(t._optimisticResults){const P=this.hasListeners(),I=!P&&CI(e,t),B=P&&AI(e,r,t,a);(I||B)&&(u={...u,...hM(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:b,status:v}=u;p=u.data;let g=!1;if(t.placeholderData!==void 0&&p===void 0&&v==="pending"){let P;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(P=s.data,g=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,P!==void 0&&(v="success",p=gk(s?.data,P,t),f=!0)}if(t.select&&p!==void 0&&!g)if(s&&p===i?.data&&t.select===this.#p)p=this.#f;else try{this.#p=t.select,p=t.select(p),p=gk(s?.data,p,t),this.#f=p,this.#s=null}catch(P){this.#s=P}this.#s&&(m=this.#s,p=this.#f,b=Date.now(),v="error");const y=u.fetchStatus==="fetching",w=v==="pending",j=v==="error",N=w&&y,S=p!==void 0,_={status:v,fetchStatus:u.fetchStatus,isPending:w,isSuccess:v==="success",isError:j,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:b,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:j&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&S,isStale:c3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:td(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=_.data!==void 0,I=_.status==="error"&&!P,B=F=>{I?F.reject(_.error):P&&F.resolve(_.data)},T=()=>{const F=this.#o=_.promise=vk();B(F)},E=this.#o;switch(E.status){case"pending":e.queryHash===r.queryHash&&B(E);break;case"fulfilled":(I||_.data!==E.value)&&T();break;case"rejected":(!I||_.error!==E.reason)&&T();break}}return _}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),db(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#j(e){Bi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function jie(e,t){return td(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function CI(e,t){return jie(e,t)||e.state.data!==void 0&&yk(e,t,t.refetchOnMount)}function yk(e,t,r){if(td(t.enabled,e)!==!1&&v0(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&c3(e,t)}return!1}function AI(e,t,r,a){return(e!==t||td(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&c3(e,r)}function c3(e,t){return td(t.enabled,e)!==!1&&e.isStaleByTime(v0(t.staleTime,e))}function kie(e,t){return!db(e.getCurrentResult(),t)}function fb(e){return{onFetch:(t,r)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const f=b=>{xie(b,()=>t.signal,()=>u=!0)},p=cM(t.options,t.fetchOptions),m=async(b,v,g)=>{if(u)return Promise.reject();if(v==null&&b.pages.length)return Promise.resolve(b);const w=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return f(A),A})(),j=await p(w),{maxPages:N}=t.options,S=g?pie:mie;return{pages:S(b.pages,j,N),pageParams:S(b.pageParams,v,N)}};if(s&&i.length){const b=s==="backward",v=b?pM:wk,g={pages:i,pageParams:o},y=v(a,g);l=await m(g,y,b)}else{const b=e??i.length;do{const v=c===0?o[0]??a.initialPageParam:wk(a,l);if(c>0&&v==null)break;l=await m(l,v),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function wk(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function pM(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function Sie(e,t){return t?wk(e,t)!=null:!1}function _ie(e,t){return!t||!e.getPreviousPageParam?!1:pM(e,t)!=null}var Cie=class extends mM{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:fb()})}getOptimisticResult(e){return e.behavior=fb(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,a=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=a,c=r.fetchMeta?.fetchMore?.direction,d=o&&c==="forward",u=s&&c==="forward",f=o&&c==="backward",p=s&&c==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Sie(t,r.data),hasPreviousPage:_ie(t,r.data),isFetchNextPageError:d,isFetchingNextPage:u,isFetchPreviousPageError:f,isFetchingPreviousPage:p,isRefetchError:l&&!d&&!f,isRefetching:i&&!u&&!p}}},Aie=class extends fM{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||xM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=uM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",s=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Bi.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function xM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Eie=class extends fp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new Aie({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=_v(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=_v(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=_v(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=_v(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bi.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>NI(t,r))}findAll(e={}){return this.getAll().filter(t=>NI(e,t))}notify(e){Bi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Bi.batch(()=>Promise.all(e.map(t=>t.continue().catch(Nl))))}};function _v(e){return e.options.scope?.id}var Tie=class extends fp{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),db(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ch(r.mutationKey)!==Ch(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??xM();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Bi.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,a,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,a,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},Oie=class extends fp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,s=t.queryHash??s3(a,t);let i=this.get(s);return i||(i=new Nie({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>wI(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>wI(e,r)):t}notify(e){Bi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Bi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pie=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Oie,this.#t=e.mutationCache||new Eie,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=l3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=ub.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(v0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(a.queryHash)?.state.data,o=uie(t,i);if(o!==void 0)return this.#e.build(this,a).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Bi.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Bi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Bi.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Bi.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(a).then(Nl).catch(Nl)}invalidateQueries(e,t={}){return Bi.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Bi.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Nl)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Nl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(v0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nl).catch(Nl)}fetchInfiniteQuery(e){return e.behavior=fb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nl).catch(Nl)}ensureInfiniteQueryData(e){return e.behavior=fb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ub.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(Ch(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{Zx(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Ch(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{Zx(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=s3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===i3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},gM=D.createContext(void 0),Ia=e=>{const t=D.useContext(gM);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Iie=({client:e,children:t})=>(D.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(gM.Provider,{value:e,children:t})),vM=D.createContext(!1),Die=()=>D.useContext(vM);vM.Provider;function Lie(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Fie=D.createContext(Lie()),Mie=()=>D.useContext(Fie),Rie=(e,t,r)=>{const a=r?.state.error&&typeof e.throwOnError=="function"?o3(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))},Bie=e=>{D.useEffect(()=>{e.clearReset()},[e])},Uie=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||o3(r,[e.error,a])),qie=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>r(a(...s)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},$ie=(e,t)=>e.isLoading&&e.isFetching&&!t,zie=(e,t)=>e?.suspense&&t.isPending,EI=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function bM(e,t,r){const a=Die(),s=Mie(),i=Ia(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",qie(o),Rie(o,s,l),Bie(s);const c=!i.getQueryCache().get(o.queryHash),[d]=D.useState(()=>new t(i,o)),u=d.getOptimisticResult(o),f=!a&&e.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(p=>{const m=f?d.subscribe(Bi.batchCalls(p)):Nl;return d.updateResult(),m},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),D.useEffect(()=>{d.setOptions(o)},[o,d]),zie(o,u))throw EI(o,d,s);if(Uie({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!_h&&$ie(u,a)&&(c?EI(o,d,s):l?.promise)?.catch(Nl).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?u:d.trackResult(u)}function Ys(e,t){return bM(e,mM)}function ui(e,t){const r=Ia(),[a]=D.useState(()=>new Tie(r,e));D.useEffect(()=>{a.setOptions(e)},[a,e]);const s=D.useSyncExternalStore(D.useCallback(o=>a.subscribe(Bi.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=D.useCallback((o,l)=>{a.mutate(o,l).catch(Nl)},[a]);if(s.error&&o3(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Hie(e,t){return bM(e,Cie)}const fy={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},Wie=e=>Ys({queryKey:fy.companies(e),queryFn:async()=>(await hd(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Vie=e=>Ys({queryKey:fy.contacts(e),queryFn:async()=>(await Sh(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Gie=()=>Ys({queryKey:fy.deals(),queryFn:async()=>(await kg()).data||[],staleTime:60*1e3,gcTime:600*1e3}),Kie=()=>Ys({queryKey:fy.users(),queryFn:async()=>(await _c()).data||[],staleTime:300*1e3,gcTime:1800*1e3}),Xie=()=>{const e=Ia();return ui({mutationFn:async({id:t,updates:r})=>(await B7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const a=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:a}},onError:(t,r,a)=>{a?.previousCompanies&&a.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},Yie=()=>{const e=Ia();return ui({mutationFn:async({id:t,updates:r})=>(await q7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const a=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:a}},onError:(t,r,a)=>{a?.previousContacts&&a.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},Qie=()=>{const e=Ia();return ui({mutationFn:async t=>(await U7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>a.id!==t))}})},Jie=()=>{const e=Ia();return ui({mutationFn:async t=>(await $7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>a.id!==t))}})},Zie=()=>{const e=Ia();return ui({mutationFn:async t=>(await Promise.all(t.map(r=>U7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>!t.includes(a.id)))}})},eoe=()=>{const e=Ia();return ui({mutationFn:async t=>(await Promise.all(t.map(r=>$7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>!t.includes(a.id)))}})},toe=()=>{const e=Ia();return ui({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(a=>B7(a,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},a=>a?.map(s=>t.includes(s.id)?{...s,...r}:s))}})},Fd=["playbooks"],Es={templates:{all:()=>[...Fd,"templates"],lists:()=>[...Fd,"templates","list"],list:e=>[...Fd,"templates","list",e],details:()=>[...Fd,"templates","detail"],detail:e=>[...Fd,"templates","detail",e]},instances:{all:()=>[...Fd,"instances"],lists:()=>[...Fd,"instances","list"],list:e=>[...Fd,"instances","list",e],details:()=>[...Fd,"instances","detail"],detail:e=>[...Fd,"instances","detail",e],completions:e=>[...Fd,"instances","detail",e,"completions"]}},yM=e=>{const t=Ia();return D.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:Es.templates.lists()})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[t]),Ys({queryKey:Es.templates.list(e),queryFn:async()=>{const r=await Zne(e);return r.data||r||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:r=>r})},roe=e=>Ys({queryKey:Es.templates.detail(e),queryFn:async()=>{const t=await eae(e);return t.data||t},enabled:!!e}),wM=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>{const s=await tae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Es.templates.lists()}),e.refetchQueries({queryKey:Es.templates.lists()}),t("Playbook template created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook template")}})},noe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async({id:a,data:s})=>{const i=await rae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Es.templates.lists()}),e.invalidateQueries({queryKey:Es.templates.detail(s.id)}),e.refetchQueries({queryKey:Es.templates.lists()}),t("Playbook template updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to update playbook template")}})},aoe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>(await nae(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:Es.templates.lists()}),t("Playbook template deleted successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to delete playbook template")}})},hy=e=>Ys({queryKey:Es.instances.list(e),queryFn:async()=>{const t=await aae(e);return t.data||t||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:t=>t}),soe=e=>Ys({queryKey:Es.instances.detail(e),queryFn:async()=>{const t=await sae(e);return t.data||t},enabled:!!e}),ioe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>{const s=await iae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Es.instances.lists()}),e.refetchQueries({queryKey:Es.instances.lists()}),t("Playbook instance created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook instance")}})},ooe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async({id:a,status:s})=>{const i=await oae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Es.instances.lists()}),e.invalidateQueries({queryKey:Es.instances.detail(s.id)}),t("Playbook instance status updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to update playbook instance status")}})},loe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async({instanceId:a,stepId:s})=>{const i=await lae(a,s);return i.data||i},onMutate:async({instanceId:a,stepId:s})=>{await e.cancelQueries({queryKey:Es.instances.completions(a)});const i=e.getQueryData(Es.instances.completions(a));return e.setQueryData(Es.instances.completions(a),(o=[])=>{if(o.some(c=>c.stepId===s))return o;const l=JSON.parse(localStorage.getItem("user_data")||"{}");return[...o,{id:`temp-${Date.now()}`,instanceId:a,stepId:s,completedBy:l.id,completedAt:new Date().toISOString()}]}),{previousCompletions:i}},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Es.instances.completions(s.instanceId)}),e.invalidateQueries({queryKey:Es.instances.detail(s.instanceId)}),e.invalidateQueries({queryKey:Es.instances.lists()}),t("Step marked as complete!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:(a,s,i)=>{i?.previousCompletions&&e.setQueryData(Es.instances.completions(s.instanceId),i.previousCompletions),r(a.message||"Failed to mark step as complete")}})},Sg=e=>{const t=Ia();return D.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:Es.instances.completions(e)})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[e,t]),Ys({queryKey:Es.instances.completions(e),queryFn:async()=>{const r=await cae(e);return r.data||r||[]},enabled:!!e,staleTime:0,refetchOnWindowFocus:!1})};const{entries:NM,setPrototypeOf:TI,isFrozen:coe,getPrototypeOf:doe,getOwnPropertyDescriptor:uoe}=Object;let{freeze:El,seal:dd,create:Nk}=Object,{apply:jk,construct:kk}=typeof Reflect<"u"&&Reflect;El||(El=function(t){return t});dd||(dd=function(t){return t});jk||(jk=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return t.apply(r,s)});kk||(kk=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return new t(...a)});const Cv=Tl(Array.prototype.forEach),foe=Tl(Array.prototype.lastIndexOf),OI=Tl(Array.prototype.pop),Mp=Tl(Array.prototype.push),hoe=Tl(Array.prototype.splice),Qv=Tl(String.prototype.toLowerCase),fj=Tl(String.prototype.toString),hj=Tl(String.prototype.match),Rp=Tl(String.prototype.replace),moe=Tl(String.prototype.indexOf),poe=Tl(String.prototype.trim),qd=Tl(Object.prototype.hasOwnProperty),wl=Tl(RegExp.prototype.test),Bp=xoe(TypeError);function Tl(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return jk(e,t,a)}}function xoe(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return kk(e,r)}}function Rn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qv;TI&&TI(e,null);let a=t.length;for(;a--;){let s=t[a];if(typeof s=="string"){const i=r(s);i!==s&&(coe(t)||(t[a]=i),s=i)}e[s]=!0}return e}function goe(e){for(let t=0;t<e.length;t++)qd(e,t)||(e[t]=null);return e}function wu(e){const t=Nk(null);for(const[r,a]of NM(e))qd(e,r)&&(Array.isArray(a)?t[r]=goe(a):a&&typeof a=="object"&&a.constructor===Object?t[r]=wu(a):t[r]=a);return t}function Up(e,t){for(;e!==null;){const a=uoe(e,t);if(a){if(a.get)return Tl(a.get);if(typeof a.value=="function")return Tl(a.value)}e=doe(e)}function r(){return null}return r}const PI=El(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mj=El(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pj=El(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),voe=El(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xj=El(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),boe=El(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),II=El(["#text"]),DI=El(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),gj=El(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),LI=El(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Av=El(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yoe=dd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),woe=dd(/<%[\w\W]*|[\w\W]*%>/gm),Noe=dd(/\$\{[\w\W]*/gm),joe=dd(/^data-[\-\w.\u00B7-\uFFFF]+$/),koe=dd(/^aria-[\-\w]+$/),jM=dd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Soe=dd(/^(?:\w+script|data):/i),_oe=dd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kM=dd(/^html$/i),Coe=dd(/^[a-z][.\w]*(-[.\w]+)+$/i);var FI=Object.freeze({__proto__:null,ARIA_ATTR:koe,ATTR_WHITESPACE:_oe,CUSTOM_ELEMENT:Coe,DATA_ATTR:joe,DOCTYPE_NAME:kM,ERB_EXPR:woe,IS_ALLOWED_URI:jM,IS_SCRIPT_OR_DATA:Soe,MUSTACHE_EXPR:yoe,TMPLIT_EXPR:Noe});const qp={element:1,text:3,progressingInstruction:7,comment:8,document:9},Aoe=function(){return typeof window>"u"?null:window},Eoe=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let a=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(a=r.getAttribute(s));const i="dompurify"+(a?"#"+a:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},MI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function SM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Aoe();const t=Xe=>SM(Xe);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==qp.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const a=r,s=a.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=e,b=c.prototype,v=Up(b,"cloneNode"),g=Up(b,"remove"),y=Up(b,"nextSibling"),w=Up(b,"childNodes"),j=Up(b,"parentNode");if(typeof o=="function"){const Xe=r.createElement("template");Xe.content&&Xe.content.ownerDocument&&(r=Xe.content.ownerDocument)}let N,S="";const{implementation:A,createNodeIterator:_,createDocumentFragment:P,getElementsByTagName:I}=r,{importNode:B}=a;let T=MI();t.isSupported=typeof NM=="function"&&typeof j=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:F,TMPLIT_EXPR:q,DATA_ATTR:H,ARIA_ATTR:Q,IS_SCRIPT_OR_DATA:J,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:X}=FI;let{IS_ALLOWED_URI:ee}=FI,W=null;const O=Rn({},[...PI,...mj,...pj,...xj,...II]);let z=null;const V=Rn({},[...DI,...gj,...LI,...Av]);let U=Object.seal(Nk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,se=null;const xe=Object.seal(Nk(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ie=!0,ue=!0,Be=!1,me=!0,$e=!1,Oe=!0,le=!1,te=!1,Te=!1,we=!1,Ie=!1,he=!1,de=!0,Ce=!1;const Ve="user-content-";let ge=!0,fe=!1,_e={},Ue=null;const ke=Rn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fe=null;const qe=Rn({},["audio","video","img","source","image","track"]);let et=null;const Kt=Rn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qt="http://www.w3.org/1998/Math/MathML",vr="http://www.w3.org/2000/svg",er="http://www.w3.org/1999/xhtml";let mr=er,Ge=!1,jt=null;const br=Rn({},[qt,vr,er],fj);let Qt=Rn({},["mi","mo","mn","ms","mtext"]),Fr=Rn({},["annotation-xml"]);const Mr=Rn({},["title","style","font","a","script"]);let rt=null;const At=["application/xhtml+xml","text/html"],cr="text/html";let wr=null,Gr=null;const jr=r.createElement("form"),qr=function(Me){return Me instanceof RegExp||Me instanceof Function},tr=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Gr&&Gr===Me)){if((!Me||typeof Me!="object")&&(Me={}),Me=wu(Me),rt=At.indexOf(Me.PARSER_MEDIA_TYPE)===-1?cr:Me.PARSER_MEDIA_TYPE,wr=rt==="application/xhtml+xml"?fj:Qv,W=qd(Me,"ALLOWED_TAGS")?Rn({},Me.ALLOWED_TAGS,wr):O,z=qd(Me,"ALLOWED_ATTR")?Rn({},Me.ALLOWED_ATTR,wr):V,jt=qd(Me,"ALLOWED_NAMESPACES")?Rn({},Me.ALLOWED_NAMESPACES,fj):br,et=qd(Me,"ADD_URI_SAFE_ATTR")?Rn(wu(Kt),Me.ADD_URI_SAFE_ATTR,wr):Kt,Fe=qd(Me,"ADD_DATA_URI_TAGS")?Rn(wu(qe),Me.ADD_DATA_URI_TAGS,wr):qe,Ue=qd(Me,"FORBID_CONTENTS")?Rn({},Me.FORBID_CONTENTS,wr):ke,K=qd(Me,"FORBID_TAGS")?Rn({},Me.FORBID_TAGS,wr):wu({}),se=qd(Me,"FORBID_ATTR")?Rn({},Me.FORBID_ATTR,wr):wu({}),_e=qd(Me,"USE_PROFILES")?Me.USE_PROFILES:!1,ie=Me.ALLOW_ARIA_ATTR!==!1,ue=Me.ALLOW_DATA_ATTR!==!1,Be=Me.ALLOW_UNKNOWN_PROTOCOLS||!1,me=Me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$e=Me.SAFE_FOR_TEMPLATES||!1,Oe=Me.SAFE_FOR_XML!==!1,le=Me.WHOLE_DOCUMENT||!1,we=Me.RETURN_DOM||!1,Ie=Me.RETURN_DOM_FRAGMENT||!1,he=Me.RETURN_TRUSTED_TYPE||!1,Te=Me.FORCE_BODY||!1,de=Me.SANITIZE_DOM!==!1,Ce=Me.SANITIZE_NAMED_PROPS||!1,ge=Me.KEEP_CONTENT!==!1,fe=Me.IN_PLACE||!1,ee=Me.ALLOWED_URI_REGEXP||jM,mr=Me.NAMESPACE||er,Qt=Me.MATHML_TEXT_INTEGRATION_POINTS||Qt,Fr=Me.HTML_INTEGRATION_POINTS||Fr,U=Me.CUSTOM_ELEMENT_HANDLING||{},Me.CUSTOM_ELEMENT_HANDLING&&qr(Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&qr(Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&typeof Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$e&&(ue=!1),Ie&&(we=!0),_e&&(W=Rn({},II),z=[],_e.html===!0&&(Rn(W,PI),Rn(z,DI)),_e.svg===!0&&(Rn(W,mj),Rn(z,gj),Rn(z,Av)),_e.svgFilters===!0&&(Rn(W,pj),Rn(z,gj),Rn(z,Av)),_e.mathMl===!0&&(Rn(W,xj),Rn(z,LI),Rn(z,Av))),Me.ADD_TAGS&&(typeof Me.ADD_TAGS=="function"?xe.tagCheck=Me.ADD_TAGS:(W===O&&(W=wu(W)),Rn(W,Me.ADD_TAGS,wr))),Me.ADD_ATTR&&(typeof Me.ADD_ATTR=="function"?xe.attributeCheck=Me.ADD_ATTR:(z===V&&(z=wu(z)),Rn(z,Me.ADD_ATTR,wr))),Me.ADD_URI_SAFE_ATTR&&Rn(et,Me.ADD_URI_SAFE_ATTR,wr),Me.FORBID_CONTENTS&&(Ue===ke&&(Ue=wu(Ue)),Rn(Ue,Me.FORBID_CONTENTS,wr)),Me.ADD_FORBID_CONTENTS&&(Ue===ke&&(Ue=wu(Ue)),Rn(Ue,Me.ADD_FORBID_CONTENTS,wr)),ge&&(W["#text"]=!0),le&&Rn(W,["html","head","body"]),W.table&&(Rn(W,["tbody"]),delete K.tbody),Me.TRUSTED_TYPES_POLICY){if(typeof Me.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Me.TRUSTED_TYPES_POLICY,S=N.createHTML("")}else N===void 0&&(N=Eoe(m,s)),N!==null&&typeof S=="string"&&(S=N.createHTML(""));El&&El(Me),Gr=Me}},Xr=Rn({},[...mj,...pj,...voe]),Vr=Rn({},[...xj,...boe]),pn=function(Me){let it=j(Me);(!it||!it.tagName)&&(it={namespaceURI:mr,tagName:"template"});const bt=Qv(Me.tagName),It=Qv(it.tagName);return jt[Me.namespaceURI]?Me.namespaceURI===vr?it.namespaceURI===er?bt==="svg":it.namespaceURI===qt?bt==="svg"&&(It==="annotation-xml"||Qt[It]):!!Xr[bt]:Me.namespaceURI===qt?it.namespaceURI===er?bt==="math":it.namespaceURI===vr?bt==="math"&&Fr[It]:!!Vr[bt]:Me.namespaceURI===er?it.namespaceURI===vr&&!Fr[It]||it.namespaceURI===qt&&!Qt[It]?!1:!Vr[bt]&&(Mr[bt]||!Xr[bt]):!!(rt==="application/xhtml+xml"&&jt[Me.namespaceURI]):!1},Nr=function(Me){Mp(t.removed,{element:Me});try{j(Me).removeChild(Me)}catch{g(Me)}},Or=function(Me,it){try{Mp(t.removed,{attribute:it.getAttributeNode(Me),from:it})}catch{Mp(t.removed,{attribute:null,from:it})}if(it.removeAttribute(Me),Me==="is")if(we||Ie)try{Nr(it)}catch{}else try{it.setAttribute(Me,"")}catch{}},ne=function(Me){let it=null,bt=null;if(Te)Me="<remove></remove>"+Me;else{const xr=hj(Me,/^[\r\n\t ]+/);bt=xr&&xr[0]}rt==="application/xhtml+xml"&&mr===er&&(Me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Me+"</body></html>");const It=N?N.createHTML(Me):Me;if(mr===er)try{it=new p().parseFromString(It,rt)}catch{}if(!it||!it.documentElement){it=A.createDocument(mr,"template",null);try{it.documentElement.innerHTML=Ge?S:It}catch{}}const Dt=it.body||it.documentElement;return Me&&bt&&Dt.insertBefore(r.createTextNode(bt),Dt.childNodes[0]||null),mr===er?I.call(it,le?"html":"body")[0]:le?it.documentElement:Dt},je=function(Me){return _.call(Me.ownerDocument||Me,Me,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Se=function(Me){return Me instanceof f&&(typeof Me.nodeName!="string"||typeof Me.textContent!="string"||typeof Me.removeChild!="function"||!(Me.attributes instanceof u)||typeof Me.removeAttribute!="function"||typeof Me.setAttribute!="function"||typeof Me.namespaceURI!="string"||typeof Me.insertBefore!="function"||typeof Me.hasChildNodes!="function")},oe=function(Me){return typeof l=="function"&&Me instanceof l};function ve(Xe,Me,it){Cv(Xe,bt=>{bt.call(t,Me,it,Gr)})}const Ae=function(Me){let it=null;if(ve(T.beforeSanitizeElements,Me,null),Se(Me))return Nr(Me),!0;const bt=wr(Me.nodeName);if(ve(T.uponSanitizeElement,Me,{tagName:bt,allowedTags:W}),Oe&&Me.hasChildNodes()&&!oe(Me.firstElementChild)&&wl(/<[/\w!]/g,Me.innerHTML)&&wl(/<[/\w!]/g,Me.textContent)||Me.nodeType===qp.progressingInstruction||Oe&&Me.nodeType===qp.comment&&wl(/<[/\w]/g,Me.data))return Nr(Me),!0;if(!(xe.tagCheck instanceof Function&&xe.tagCheck(bt))&&(!W[bt]||K[bt])){if(!K[bt]&&nt(bt)&&(U.tagNameCheck instanceof RegExp&&wl(U.tagNameCheck,bt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(bt)))return!1;if(ge&&!Ue[bt]){const It=j(Me)||Me.parentNode,Dt=w(Me)||Me.childNodes;if(Dt&&It){const xr=Dt.length;for(let Rr=xr-1;Rr>=0;--Rr){const Yr=v(Dt[Rr],!0);Yr.__removalCount=(Me.__removalCount||0)+1,It.insertBefore(Yr,y(Me))}}}return Nr(Me),!0}return Me instanceof c&&!pn(Me)||(bt==="noscript"||bt==="noembed"||bt==="noframes")&&wl(/<\/no(script|embed|frames)/i,Me.innerHTML)?(Nr(Me),!0):($e&&Me.nodeType===qp.text&&(it=Me.textContent,Cv([E,F,q],It=>{it=Rp(it,It," ")}),Me.textContent!==it&&(Mp(t.removed,{element:Me.cloneNode()}),Me.textContent=it)),ve(T.afterSanitizeElements,Me,null),!1)},Ke=function(Me,it,bt){if(de&&(it==="id"||it==="name")&&(bt in r||bt in jr))return!1;if(!(ue&&!se[it]&&wl(H,it))){if(!(ie&&wl(Q,it))){if(!(xe.attributeCheck instanceof Function&&xe.attributeCheck(it,Me))){if(!z[it]||se[it]){if(!(nt(Me)&&(U.tagNameCheck instanceof RegExp&&wl(U.tagNameCheck,Me)||U.tagNameCheck instanceof Function&&U.tagNameCheck(Me))&&(U.attributeNameCheck instanceof RegExp&&wl(U.attributeNameCheck,it)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(it,Me))||it==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&wl(U.tagNameCheck,bt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(bt))))return!1}else if(!et[it]){if(!wl(ee,Rp(bt,re,""))){if(!((it==="src"||it==="xlink:href"||it==="href")&&Me!=="script"&&moe(bt,"data:")===0&&Fe[Me])){if(!(Be&&!wl(J,Rp(bt,re,"")))){if(bt)return!1}}}}}}}return!0},nt=function(Me){return Me!=="annotation-xml"&&hj(Me,X)},Qe=function(Me){ve(T.beforeSanitizeAttributes,Me,null);const{attributes:it}=Me;if(!it||Se(Me))return;const bt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let It=it.length;for(;It--;){const Dt=it[It],{name:xr,namespaceURI:Rr,value:Yr}=Dt,Nn=wr(xr),Ps=Yr;let Sn=xr==="value"?Ps:poe(Ps);if(bt.attrName=Nn,bt.attrValue=Sn,bt.keepAttr=!0,bt.forceKeepAttr=void 0,ve(T.uponSanitizeAttribute,Me,bt),Sn=bt.attrValue,Ce&&(Nn==="id"||Nn==="name")&&(Or(xr,Me),Sn=Ve+Sn),Oe&&wl(/((--!?|])>)|<\/(style|title|textarea)/i,Sn)){Or(xr,Me);continue}if(Nn==="attributename"&&hj(Sn,"href")){Or(xr,Me);continue}if(bt.forceKeepAttr)continue;if(!bt.keepAttr){Or(xr,Me);continue}if(!me&&wl(/\/>/i,Sn)){Or(xr,Me);continue}$e&&Cv([E,F,q],Wn=>{Sn=Rp(Sn,Wn," ")});const ts=wr(Me.nodeName);if(!Ke(ts,Nn,Sn)){Or(xr,Me);continue}if(N&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Rr)switch(m.getAttributeType(ts,Nn)){case"TrustedHTML":{Sn=N.createHTML(Sn);break}case"TrustedScriptURL":{Sn=N.createScriptURL(Sn);break}}if(Sn!==Ps)try{Rr?Me.setAttributeNS(Rr,xr,Sn):Me.setAttribute(xr,Sn),Se(Me)?Nr(Me):OI(t.removed)}catch{Or(xr,Me)}}ve(T.afterSanitizeAttributes,Me,null)},tt=function Xe(Me){let it=null;const bt=je(Me);for(ve(T.beforeSanitizeShadowDOM,Me,null);it=bt.nextNode();)ve(T.uponSanitizeShadowNode,it,null),Ae(it),Qe(it),it.content instanceof i&&Xe(it.content);ve(T.afterSanitizeShadowDOM,Me,null)};return t.sanitize=function(Xe){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=null,bt=null,It=null,Dt=null;if(Ge=!Xe,Ge&&(Xe="<!-->"),typeof Xe!="string"&&!oe(Xe))if(typeof Xe.toString=="function"){if(Xe=Xe.toString(),typeof Xe!="string")throw Bp("dirty is not a string, aborting")}else throw Bp("toString is not a function");if(!t.isSupported)return Xe;if(te||tr(Me),t.removed=[],typeof Xe=="string"&&(fe=!1),fe){if(Xe.nodeName){const Yr=wr(Xe.nodeName);if(!W[Yr]||K[Yr])throw Bp("root node is forbidden and cannot be sanitized in-place")}}else if(Xe instanceof l)it=ne("<!---->"),bt=it.ownerDocument.importNode(Xe,!0),bt.nodeType===qp.element&&bt.nodeName==="BODY"||bt.nodeName==="HTML"?it=bt:it.appendChild(bt);else{if(!we&&!$e&&!le&&Xe.indexOf("<")===-1)return N&&he?N.createHTML(Xe):Xe;if(it=ne(Xe),!it)return we?null:he?S:""}it&&Te&&Nr(it.firstChild);const xr=je(fe?Xe:it);for(;It=xr.nextNode();)Ae(It),Qe(It),It.content instanceof i&&tt(It.content);if(fe)return Xe;if(we){if(Ie)for(Dt=P.call(it.ownerDocument);it.firstChild;)Dt.appendChild(it.firstChild);else Dt=it;return(z.shadowroot||z.shadowrootmode)&&(Dt=B.call(a,Dt,!0)),Dt}let Rr=le?it.outerHTML:it.innerHTML;return le&&W["!doctype"]&&it.ownerDocument&&it.ownerDocument.doctype&&it.ownerDocument.doctype.name&&wl(kM,it.ownerDocument.doctype.name)&&(Rr="<!DOCTYPE "+it.ownerDocument.doctype.name+`>
`+Rr),$e&&Cv([E,F,q],Yr=>{Rr=Rp(Rr,Yr," ")}),N&&he?N.createHTML(Rr):Rr},t.setConfig=function(){let Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tr(Xe),te=!0},t.clearConfig=function(){Gr=null,te=!1},t.isValidAttribute=function(Xe,Me,it){Gr||tr({});const bt=wr(Xe),It=wr(Me);return Ke(bt,It,it)},t.addHook=function(Xe,Me){typeof Me=="function"&&Mp(T[Xe],Me)},t.removeHook=function(Xe,Me){if(Me!==void 0){const it=foe(T[Xe],Me);return it===-1?void 0:hoe(T[Xe],it,1)[0]}return OI(T[Xe])},t.removeHooks=function(Xe){T[Xe]=[]},t.removeAllHooks=function(){T=MI()},t}var eg=SM();const Kp={all:["users"],lists:()=>[...Kp.all,"list"],list:e=>[...Kp.lists(),{search:e}],details:()=>[...Kp.all,"detail"],detail:e=>[...Kp.details(),e]},d3=e=>Ys({queryKey:Kp.list(e),queryFn:async()=>{const t=await _c(void 0);return Array.isArray(t)?t:t?.data&&Array.isArray(t.data)||t?.success&&t?.data&&Array.isArray(t.data)?t.data:[]},staleTime:300*1e3,refetchInterval:600*1e3,placeholderData:t=>t}),my=({instanceId:e,isOpen:t,onClose:r})=>{const{showSuccess:a,showError:s}=kn(),[i,o]=D.useState(new Set),[l,c]=D.useState(new Set),[d,u]=D.useState(null),[f,p]=D.useState(new Map),m=D.useRef(!1),{data:b,isLoading:v}=soe(e),{data:g=[],isLoading:y}=Sg(e),{data:w=[]}=d3(),j=loe(),N=ooe(),S=H=>w.find(J=>J.id===H)?.name||H;D.useEffect(()=>{if(b?.templateSnapshot?.sections){const H=b.templateSnapshot.sections.map(J=>String(J.id)).filter(Boolean),Q=new Set(H);o(Q)}},[b]);const A=D.useMemo(()=>{if(!b?.templateSnapshot?.sections)return{completed:0,total:0,percentage:0};let H=0;b.templateSnapshot.sections.forEach(re=>{re.steps&&(H+=re.steps.length)});const Q=g.length,J=H>0?Math.round(Q/H*100):0;return{completed:Q,total:H,percentage:J}},[b,g]);D.useEffect(()=>{b&&A.total>0&&A.completed>=A.total&&b.status!=="completed"&&!m.current&&!N.isPending&&(m.current=!0,N.mutate({id:e,status:"completed"})),b?.status==="completed"&&(m.current=!1)},[A.completed,A.total,b?.status,e,N.isPending]),D.useEffect(()=>{if(!N.isPending&&m.current){const H=setTimeout(()=>{b?.status==="completed"&&(m.current=!1)},500);return()=>clearTimeout(H)}},[N.isPending,b?.status]);const _=H=>g.some(Q=>Q.stepId===H),P=H=>g.find(Q=>Q.stepId===H),I=H=>{if(!H.steps)return{completed:0,total:0};const Q=H.steps.length;return{completed:H.steps.filter(re=>_(re.id)).length,total:Q}},B=H=>{o(Q=>{const J=new Set(Q);return J.has(H)?J.delete(H):J.add(H),J})},T=H=>{c(Q=>{const J=new Set(Q);return J.has(H)?J.delete(H):J.add(H),J})},E=async H=>{if(!_(H)){u(H);try{await j.mutateAsync({instanceId:e,stepId:H}),setTimeout(()=>{u(null)},300)}catch{u(null)}}},F=(H,Q)=>{const J=document.createElement("a");J.href=H,J.download=Q,J.target="_blank",document.body.appendChild(J),J.click(),document.body.removeChild(J)};if(!t)return null;const q=v||y;return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ci,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:b?.templateSnapshot?.name||"Loading..."}),(b?.templateSnapshot?.version||b?.templateVersion)&&n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Version ",b.templateSnapshot?.version||b.templateVersion]})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),!q&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:[A.completed," of ",A.total," steps complete"]}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[A.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all ${A.percentage===100?"bg-green-500":A.percentage>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${A.percentage}%`}})}),A.percentage===100&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(gn,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"text-xs font-semibold text-green-700",children:"All steps completed!"})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:q?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):b?.templateSnapshot?.sections?n.jsx("div",{className:"space-y-4",children:b.templateSnapshot.sections.sort((H,Q)=>(H.order||0)-(Q.order||0)).map(H=>{const Q=I(H),J=i.has(H.id);return n.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white",children:[n.jsxs("button",{onClick:()=>B(H.id),className:"w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform ${J?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:n.jsx(Vs,{className:`w-5 h-5 transition-transform ${J?"":"-rotate-90"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:H.name}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Q.completed," of ",Q.total," steps completed"]})]})]}),Q.completed===Q.total&&Q.total>0&&n.jsx(gn,{className:"w-5 h-5 text-green-500"})]}),J&&H.steps&&n.jsx("div",{className:"border-t border-slate-100 bg-slate-50/50",children:H.steps.sort((re,X)=>(re.order||0)-(X.order||0)).map(re=>{const X=_(re.id),ee=P(re.id),W=l.has(re.id);return n.jsxs("div",{className:"border-b border-slate-100 last:border-b-0",children:[n.jsxs("div",{className:"p-4 flex items-start gap-4",children:[n.jsx("div",{className:"pt-1",children:n.jsx("button",{onClick:()=>E(re.id),disabled:X||d===re.id||j.isPending,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${X?"bg-green-500 border-green-500 text-white":d===re.id?"bg-indigo-50 border-indigo-500":"bg-white border-slate-300 hover:border-indigo-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:d===re.id?n.jsx(pt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):X?n.jsx(_i,{className:"w-4 h-4"}):null})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:`text-sm font-semibold ${X?"text-slate-600 line-through":"text-slate-900"}`,children:re.name}),ee&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(co,{className:"w-3 h-3 text-slate-400"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Completed by ",ee.completedBy?S(ee.completedBy):"Unknown"," on"," ",ee.completedAt?new Date(ee.completedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Unknown date"]})]})]}),(re.instructions||re.checklistItems?.length>0||re.attachments?.length>0)&&n.jsx("button",{onClick:()=>T(re.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(va,{className:`w-4 h-4 text-slate-400 transition-transform ${W?"rotate-90":""}`})})]})})]}),W&&n.jsxs("div",{className:"px-4 pb-4 pl-14 space-y-4",children:[re.instructions&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2 flex items-center gap-2",children:[n.jsx(ea,{className:"w-3.5 h-3.5"}),"Instructions"]}),n.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:eg.sanitize(re.instructions)}})]}),re.checklistItems&&re.checklistItems.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(Ob,{className:"w-3.5 h-3.5"}),"Checklist"]}),n.jsx("div",{className:"space-y-2",children:re.checklistItems.map((O,z)=>{`${re.id}${z}`;const U=(f.get(re.id)||new Set).has(z);return n.jsxs("div",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 rounded-lg p-1 -ml-1 transition-colors",onClick:()=>{const K=f.get(re.id)||new Set,se=new Set(K);U?se.delete(z):se.add(z),p(xe=>{const ie=new Map(xe);return se.size>0?ie.set(re.id,se):ie.delete(re.id),ie})},children:[n.jsx("div",{className:`w-4 h-4 rounded border-2 mt-0.5 flex-shrink-0 flex items-center justify-center transition-all ${U?"bg-green-500 border-green-500":"border-slate-300 hover:border-indigo-500"}`,children:U&&n.jsx(_i,{className:"w-3 h-3 text-white"})}),n.jsx("span",{className:`text-sm flex-1 ${U?"text-slate-500 line-through":"text-slate-700"}`,children:O})]},z)})})]}),re.attachments&&re.attachments.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(ea,{className:"w-3.5 h-3.5"}),"Attachments"]}),n.jsx("div",{className:"space-y-2",children:re.attachments.map((O,z)=>n.jsx("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:O.type==="pdf"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center",children:n.jsx(ea,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500",children:"PDF Document"})]}),n.jsx("button",{onClick:()=>F(O.url,O.name||"document.pdf"),className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Download PDF",children:n.jsx(Pu,{className:"w-4 h-4 text-indigo-600"})})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:n.jsx(o0,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name||"Google Drive File"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Google Drive"})]}),n.jsx("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-white rounded-lg transition-colors flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View in Google Drive",children:n.jsx(Ts,{className:"w-4 h-4"})})]})},z))})]})]})]},re.id)})})]},H.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ci,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Playbook Data"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Unable to load playbook instance data."})]})}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:n.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm",children:"Close"})})]})})]})},Toe=[{value:"companyName",label:"Company Name",required:!0},{value:"domain",label:"Domain",required:!0},{value:"industry",label:"Industry",required:!1}],Ooe=[{value:"contactName",label:"Contact Name",required:!0},{value:"companyDomain",label:"Company Domain",required:!0},{value:"email",label:"Email",required:!1},{value:"phone",label:"Phone",required:!1},{value:"jobTitle",label:"Job Title",required:!1},{value:"linkedinUrl",label:"LinkedIn URL",required:!1}],Poe={company:"companyName",organization:"companyName","business name":"companyName","company name":"companyName",website:"domain",domain:"domain",url:"domain",industry:"industry",segment:"industry",sector:"industry"},Ioe={name:"contactName","contact name":"contactName","full name":"contactName","first name":"contactName","last name":"contactName","company domain":"companyDomain",domain:"companyDomain",website:"companyDomain","company website":"companyDomain",email:"email","email address":"email",phone:"phone","phone number":"phone","job title":"jobTitle",title:"jobTitle",position:"jobTitle",role:"jobTitle",linkedin:"linkedinUrl","linkedin url":"linkedinUrl","linkedin profile":"linkedinUrl"},Doe=`Company,Website,Industry
Acme Corp,https://acme.com,Technology
Beta Inc,https://beta.io,Logistics
Gamma LLC,https://gamma.com,Healthcare
Delta Solutions,delta-solutions.com,Retail
Epsilon Group,www.epsilon-group.org,Technology`,Loe=`Contact Name,Company Domain,Email,Phone,Job Title,LinkedIn URL
John Doe,acme.com,john.doe@acme.com,+1-555-0101,CEO,https://linkedin.com/in/johndoe
Jane Smith,beta.io,jane.smith@beta.io,+1-555-0102,CTO,https://linkedin.com/in/janesmith
Bob Johnson,gamma.com,bob.johnson@gamma.com,+1-555-0103,CFO,https://linkedin.com/in/bobjohnson`,Foe=({onClose:e,onSuccess:t,type:r="company"})=>{const a=r,{showSuccess:s,showError:i}=kn(),[o,l]=D.useState(1),[c,d]=D.useState(null),[u,f]=D.useState(!1),[p,m]=D.useState(null),[b,v]=D.useState([]),[g,y]=D.useState(0),[w,j]=D.useState({}),[N,S]=D.useState(!1),[A,_]=D.useState(null),[P,I]=D.useState(!1),[B,T]=D.useState({}),[E,F]=D.useState({}),[q,H]=D.useState(!1),[Q,J]=D.useState(null),[re,X]=D.useState("all"),[ee,W]=D.useState(!1),[O,z]=D.useState(""),[V,U]=D.useState(!1),[K,se]=D.useState(null),xe=a==="contact"?Ooe:Toe,ie=a==="contact"?Ioe:Poe,ue=a==="contact"?Loe:Doe,Be=()=>{const fe=new Blob([ue],{type:"text/csv;charset=utf-8"}),_e=URL.createObjectURL(fe),Ue=document.createElement("a");Ue.href=_e,Ue.download=`${a==="contact"?"contacts":"companies"}-sample.csv`,Ue.click(),URL.revokeObjectURL(_e),s(`Sample CSV downloaded. Fill it with your ${a} data and upload.`)},me=async()=>{if(!O.trim()){se("Please enter a Google Sheets URL"),i("Please enter a Google Sheets URL");return}se(null),U(!0);try{const fe=await Wae(O.trim(),a);if(!fe.success){const Ue=fe.message||fe.error?.message||"Failed to load Google Sheets";console.log("[WIZARD] API returned error:",Ue),se(Ue),i(Ue);return}const _e=fe.headers||[];if(_e.length===0){const Ue="No columns found in the Google Sheet. Please ensure the first row contains column headers.";se(Ue),i(Ue);return}console.log("[WIZARD] Google Sheets loaded:",{uploadId:fe.uploadId,headers:_e.length,rows:fe.rowCount}),m(fe.uploadId),v(_e),y(fe.rowCount||0),se(null),l(2),s(`Google Sheets loaded successfully: ${_e.length} columns, ${fe.rowCount||0} rows`)}catch(fe){console.error("[WIZARD] Google Sheets error:",fe);let _e="Failed to load Google Sheets.";fe.data?.message&&typeof fe.data.message=="string"&&fe.data.message.trim()?_e=fe.data.message:fe.message&&typeof fe.message=="string"&&fe.message.trim()&&fe.message!=="Server Error 400"&&fe.message!=="Failed to load Google Sheets."&&fe.message!=="Failed to import Google Sheets"&&!fe.message.startsWith("Server Error")?_e=fe.message:fe.response?.data?.message?_e=fe.response.data.message:fe.response?.data?.error?.message?_e=fe.response.data.error.message:fe.data?.error?.message?_e=fe.data.error.message:fe.error?.message?_e=fe.error.message:fe.error?.data?.message?_e=fe.error.data.message:typeof fe=="string"&&(_e=fe),console.log("[WIZARD] Extracted error message:",_e),console.log("[WIZARD] Full error object:",JSON.stringify({message:fe.message,data:fe.data,response:fe.response?{status:fe.response.status,data:fe.response.data}:void 0,code:fe.code||fe.data?.code,error:fe.error},null,2)),se(_e),i(_e)}finally{U(!1)}},$e=fe=>{const _e=fe.target.files?.[0];if(!_e)return;const Ue=_e.name.toLowerCase();if(!Ue.endsWith(".csv")&&!Ue.endsWith(".xlsx")&&!Ue.endsWith(".xls")){i("Please select a CSV or Excel (.xlsx) file.");return}d(_e)},Oe=D.useCallback(async()=>{if(!c){i("Please select a file first.");return}f(!0);try{const fe=await Hae(c,a);m(fe.uploadId),v(fe.headers||[]),y(fe.rowCount||0),j({}),S(!1),_(null),T({}),J(null),l(2)}catch(fe){i(fe?.message||"Upload failed")}finally{f(!1)}},[c,i]),le=D.useCallback(()=>{const fe={};b.forEach(_e=>{const Ue=(_e||"").trim().toLowerCase(),ke=ie[Ue];ke&&(fe[_e]=ke)}),j(_e=>({..._e,...fe}))},[b,ie]),te=D.useCallback(async()=>{const fe=new Set(Object.values(w).filter(Boolean));if(a==="company"){if(!fe.has("companyName")||!fe.has("domain")){i("Please map both Company Name and Domain.");return}}else if(!fe.has("contactName")||!fe.has("companyDomain")){i("Please map both Contact Name and Company Domain.");return}if(p){W(!0);try{await Vae(p,w),S(!0),l(3),I(!0);try{const _e=await Gae(p);if(!_e.success){i(_e.message||"Failed to load preview"),_(null);return}_({summary:_e.summary||{total:0,new:0,updates:0,errors:0},rows:_e.rows||[],errors:_e.errors||[],companies:_e.companies||[]});const Ue={};(_e.rows||[]).forEach(ke=>{(ke.status==="new"||ke.status==="update")&&(Ue[String(ke.rowIndex-1)]=!1)}),T(Ue),F({})}catch(_e){i(_e?.message||"Failed to load preview. Please try again."),_(null)}finally{I(!1)}}catch(_e){i(_e?.message||"Failed to save mapping")}finally{W(!1)}}},[p,w,i]),Te=D.useCallback(()=>{if(!A?.errors?.length)return;const fe=["Row,Message",...A.errors.map(Fe=>`${Fe.rowIndex},${(Fe.message||"").replace(/"/g,'""')}`)],_e=new Blob([fe.join(`
`)],{type:"text/csv;charset=utf-8"}),Ue=URL.createObjectURL(_e),ke=document.createElement("a");ke.href=Ue,ke.download="import-errors.csv",ke.click(),URL.revokeObjectURL(Ue)},[A?.errors]),we=D.useCallback(async()=>{if(p){if(a==="contact"&&A&&A.rows.some(_e=>_e.needsCompanySelection&&!E[String(_e.rowIndex-1)])){i("Please select a company for all contacts that require it.");return}if(A&&A.summary.errors>0&&A.errors.some(_e=>{const Ue=A.rows.find(ke=>ke.rowIndex===_e.rowIndex);return Ue&&!Ue.needsCompanySelection})){i("Fix all errors before importing. Download the error report and correct your file.");return}H(!0);try{const fe=await Kae(p,B,a==="contact"?E:void 0);J(fe.summary||{created:0,updated:0,targetAccounts:0,failed:0}),l(5),s(`Import complete: ${fe.summary?.created||0} created, ${fe.summary?.updated||0} updated.`),t?.()}catch(fe){i(fe?.message||"Import failed")}finally{H(!1)}}},[p,A,B,E,a,i,s,t]),Ie=A?.rows?.filter(fe=>re==="all"?!0:re==="error"?fe.status==="error"||fe.status==="needs_company_selection":fe.status===re)||[],he=50,[de,Ce]=D.useState(0),Ve=Ie.slice(de*he,(de+1)*he),ge=Math.ceil(Ie.length/he)||1;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center",children:n.jsx(cl,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Upload ",a==="contact"?"contacts":"companies"]}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Step ",o," of 5"]})]})]}),n.jsx("button",{type:"button",onClick:e,className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Upload a CSV or Excel file, or import from Google Sheets (max 1,000 rows). The first row will be used as headers."}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Need a template?"}),n.jsxs("button",{type:"button",onClick:Be,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 text-sm font-medium hover:bg-slate-50 hover:border-indigo-200 hover:text-indigo-700 transition-colors",children:[n.jsx(Pu,{className:"w-4 h-4"}),"Download sample CSV"]})]}),n.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(px,{className:"w-5 h-5 text-slate-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Import from Google Sheets"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Paste a Google Sheets URL. The sheet must be publicly accessible (Anyone with the link can view)."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"How to make your sheet publicly accessible:"}),n.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 ml-4 list-decimal",children:[n.jsx("li",{children:"Open your Google Sheet"}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:'"Share"'})," button (top right)"]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Change to anyone with the link"'})]}),n.jsxs("li",{children:["Set permission to ",n.jsx("strong",{children:'"Viewer"'})]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Done"'})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs flex-wrap",children:[n.jsx("span",{className:"text-slate-500",children:"Example URL format:"}),n.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-slate-700",children:"https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"(Make sure your sheet is publicly accessible)"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:O,onChange:fe=>{z(fe.target.value),se(null)},placeholder:"https://docs.google.com/spreadsheets/d/...",className:`flex-1 px-3 py-2 border rounded-lg text-sm ${K?"border-red-300 bg-red-50":"border-slate-200"}`}),n.jsxs("button",{type:"button",disabled:!O.trim()||V,onClick:me,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[V?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):null,"Import"]})]}),K&&n.jsx("div",{className:"p-4 bg-red-50 border-2 border-red-300 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Bn,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Sheet Not Accessible"}),n.jsx("p",{className:"text-sm text-red-800 whitespace-pre-line leading-relaxed",children:K}),(K.includes("publicly accessible")||K.includes("Access denied")||K.includes("SHEET_FETCH_FAILED"))&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[n.jsx("p",{className:"text-xs font-semibold text-red-900 mb-2",children:"Quick fix:"}),n.jsxs("ol",{className:"text-xs text-red-800 space-y-1.5 ml-4 list-decimal",children:[n.jsx("li",{children:"Open your Google Sheet in a new tab"}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:'"Share"'})," button (top right corner)"]}),n.jsxs("li",{children:['Change access from "Restricted" to ',n.jsx("strong",{children:'"Anyone with the link"'})]}),n.jsxs("li",{children:["Make sure the permission is set to ",n.jsx("strong",{children:'"Viewer"'})]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Done"'})," and try importing again"]})]})]})]}),n.jsx("button",{type:"button",onClick:()=>se(null),className:"shrink-0 p-1 hover:bg-red-100 rounded transition-colors","aria-label":"Dismiss error",children:n.jsx(Xt,{className:"w-4 h-4 text-red-600"})})]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-200"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Or"})})]}),n.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-colors",children:[n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:$e,className:"hidden"}),c?n.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[n.jsx(px,{className:"w-10 h-10 text-indigo-500"}),n.jsx("span",{className:"font-medium",children:c.name}),n.jsxs("span",{className:"text-slate-400 text-sm",children:["(",(c.size/1024).toFixed(1)," KB)"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(kc,{className:"w-10 h-10 text-slate-400 mb-2"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Click to select CSV or Excel file"})]})]}),n.jsxs("button",{type:"button",disabled:!c||u,onClick:Oe,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[u?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):null,"Upload and continue"]})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Map your file columns to CRM fields. ",a==="contact"?"Contact Name and Company Domain":"Company Name and Domain"," are required."]}),b.length===0?n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-sm text-red-700",children:"No columns detected. Please go back and ensure your file has column headers in the first row."})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:le,className:"text-sm font-medium text-indigo-600 hover:text-indigo-700",children:"Auto-map by column name"}),n.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"File column"}),n.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Maps to"})]})}),n.jsx("tbody",{children:b.map(fe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"p-3 text-slate-700",children:fe}),n.jsx("td",{className:"p-3",children:n.jsxs("select",{value:w[fe]||"",onChange:_e=>j(Ue=>({...Ue,[fe]:_e.target.value})),className:"w-full max-w-xs px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:" Ignore "}),xe.map(_e=>n.jsxs("option",{value:_e.value,children:[_e.label," ",_e.required?"(required)":""]},_e.value))]})})]},fe))})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l(1),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsxs("button",{type:"button",onClick:te,disabled:ee,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[ee&&n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Continue to preview"]})]})]}),o===3&&n.jsx("div",{className:"space-y-4",children:P?n.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-8",children:[n.jsx(pt,{className:"w-6 h-6 animate-spin"}),n.jsx("span",{children:"Validating and loading preview..."})]}):A&&A.rows&&A.rows.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total"}),n.jsx("p",{className:"text-lg font-bold text-slate-900",children:A.summary.total})]}),n.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-green-600",children:"New"}),n.jsx("p",{className:"text-lg font-bold text-green-700",children:A.summary.new})]}),n.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-blue-600",children:"Updates"}),n.jsx("p",{className:"text-lg font-bold text-blue-700",children:A.summary.updates})]}),n.jsxs("div",{className:"bg-red-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-red-600",children:"Errors"}),n.jsx("p",{className:"text-lg font-bold text-red-700",children:A.summary.errors})]})]}),A.summary.errors>0&&n.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[n.jsx(Bn,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Fix all errors before importing. Download the error report and re-upload a corrected file."})]}),n.jsxs("button",{type:"button",onClick:Te,className:"flex items-center gap-2 px-3 py-2 bg-white border border-red-200 rounded-lg text-red-700 text-sm font-medium",children:[n.jsx(Pu,{className:"w-4 h-4"}),"Download error report"]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Filter:"}),["all","new","update","error"].map(fe=>n.jsx("button",{type:"button",onClick:()=>{X(fe),Ce(0)},className:`px-3 py-1.5 rounded-lg text-sm font-medium ${re===fe?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:fe==="all"?"All":fe==="new"?"New":fe==="update"?"Existing":"Errors"},fe))]}),a==="contact"&&A?.rows.some(fe=>fe.needsCompanySelection)&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-xl",children:n.jsxs("p",{className:"text-sm text-amber-800",children:[n.jsx("strong",{children:"Note:"})," Some contacts need a company selected. Please select a company from the dropdown for each contact marked in red."]})}),n.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden max-h-64 overflow-y-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700 w-12",children:"Row"}),a==="contact"?n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Contact Name"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Company Domain"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Email"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Select Company"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Company"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Domain"})]}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Status"}),a==="company"&&n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Target account"})]})}),n.jsx("tbody",{children:Ve.map(fe=>{const _e=String(fe.rowIndex-1),Ue=a==="contact"&&fe.needsCompanySelection,ke=E[_e]||"",Fe=fe.status==="error"||fe.status==="needs_company_selection";return n.jsxs("tr",{className:`border-t border-slate-100 ${Fe?"bg-red-50":""}`,children:[n.jsx("td",{className:"p-2 text-slate-500",children:fe.rowIndex}),a==="contact"?n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-2",children:fe.data?.contactName||""}),n.jsx("td",{className:"p-2",children:fe.originalCompanyDomain?n.jsx("span",{className:"text-red-600",title:"Company not found",children:fe.data?.companyDomain||""}):fe.data?.companyDomain||""}),n.jsx("td",{className:"p-2",children:fe.data?.email||""}),n.jsx("td",{className:"p-2",children:Ue?n.jsxs("select",{value:ke,onChange:qe=>F(et=>({...et,[_e]:qe.target.value})),className:"w-full max-w-xs px-2 py-1.5 border border-red-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:" Select Company "}),A?.companies?.map(qe=>n.jsxs("option",{value:qe.id,children:[qe.name," ",qe.domain?`(${qe.domain})`:""]},qe.id))]}):n.jsx("span",{className:"text-slate-400 text-xs",children:""})})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-2",children:fe.data?.companyName||""}),n.jsx("td",{className:"p-2",children:fe.data?.domain||""})]}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Fe?"bg-red-100 text-red-700":fe.status==="new"?"bg-green-100 text-green-700":fe.status==="update"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:Fe?fe.status==="needs_company_selection"?"Needs Company":"Error":fe.status==="new"?"New":fe.status==="update"?"Existing":"Error"})}),a==="company"&&n.jsx("td",{className:"p-2",children:fe.status!=="error"&&n.jsx("input",{type:"checkbox",checked:B[_e]||!1,onChange:qe=>T(et=>({...et,[_e]:qe.target.checked})),className:"rounded border-slate-300"})})]},fe.rowIndex)})})]})}),ge>1&&n.jsxs("div",{className:"flex items-center gap-2 justify-center text-sm",children:[n.jsx("button",{type:"button",onClick:()=>Ce(fe=>Math.max(0,fe-1)),disabled:de===0,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50",children:"Prev"}),n.jsxs("span",{className:"text-slate-600",children:["Page ",de+1," of ",ge]}),n.jsx("button",{type:"button",onClick:()=>Ce(fe=>Math.min(ge-1,fe+1)),disabled:de>=ge-1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50",children:"Next"})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>l(2),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsx("button",{type:"button",disabled:a==="contact"&&A&&A.rows.some(Ue=>Ue.needsCompanySelection&&!E[String(Ue.rowIndex-1)])?!0:A?.errors.some(_e=>{const Ue=A.rows.find(ke=>ke.rowIndex===_e.rowIndex);return Ue&&!Ue.needsCompanySelection})||!1,onClick:()=>l(4),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50",children:"Next: Review merge rules"})]})]}):A&&A.summary?n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx(Bn,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"No rows to preview. Please check your file and try again."})]}):n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx(Bn,{className:"w-12 h-12 mx-auto mb-3 text-red-400"}),n.jsx("p",{className:"text-sm text-red-600",children:"Failed to load preview. Please go back and try again."}),n.jsx("button",{type:"button",onClick:()=>l(2),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Go Back"})]})}),o===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"How we match and merge"}),n.jsx("ul",{className:"text-sm text-slate-600 space-y-1 list-disc list-inside",children:a==="contact"?n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["Contacts are matched by ",n.jsx("strong",{children:"email + company"}),". Same email + company = update; new combination = create."]}),n.jsxs("li",{children:["We only ",n.jsx("strong",{children:"fill blank"})," fields. Existing values are never overwritten."]}),n.jsx("li",{children:"The company domain must exist in your CRM. Import companies first if needed."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["Companies are matched by ",n.jsx("strong",{children:"domain"})," (case-insensitive). Same domain = update; new domain = create."]}),n.jsxs("li",{children:["We only ",n.jsx("strong",{children:"fill blank"})," fields. Existing values are never overwritten."]}),n.jsx("li",{children:"Target account selection is applied to new and updated companies as you chose in the preview."})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l(3),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsxs("button",{type:"button",disabled:q||(A?.summary?.errors??0)>0,onClick:we,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[q?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(_D,{className:"w-4 h-4"}),"Import ",A?.summary?.total??0," companies"]})]})]}),o===5&&Q&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[n.jsx(gn,{className:"w-10 h-10 text-green-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-green-900",children:"Import completed"}),n.jsxs("p",{className:"text-sm text-green-700",children:[Q.created," created, ",Q.updated," updated, ",Q.targetAccounts," marked as target accounts."]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700",children:"Done"}),n.jsx("button",{type:"button",onClick:()=>{l(1),d(null),m(null),J(null)},className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Upload another file"})]})]})]})]})})},Moe=({instance:e,deals:t,projects:r,onView:a})=>{const{data:s=[]}=Sg(e.id),i=e.templateSnapshot?.sections?.reduce((f,p)=>f+(p.steps?.length||0),0)||0,o=s.length,l=i>0?Math.round(o/i*100):0,c=e.dealId?t.find(f=>f.id===e.dealId):null,d=e.projectId?r.find(f=>f.id===e.projectId):null,u=c?{type:"Deal",name:c.title||c.name,id:c.id}:d?{type:"Project",name:d.title||d.name,id:d.id}:null;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(ci,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:e.templateSnapshot?.name||"Unknown Playbook"}),u&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.type==="Deal"?n.jsx(Cl,{className:"w-3 h-3 text-slate-400"}):n.jsx(Xd,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-xs text-slate-500 truncate",children:u.name})]})]})]}),l===100&&n.jsx(_i,{className:"w-5 h-5 text-green-500 shrink-0"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[o," / ",i," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[l,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${l===100?"bg-green-500":l>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${l}%`}})})]}),n.jsxs("button",{onClick:()=>{u?.type==="Deal"||u?.type,a(e.id)},className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View ",u?u.type:"Playbook",n.jsx(Ts,{className:"w-3 h-3"})]})]})},Roe=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:a=""})=>{const{showSuccess:s,showError:i}=kn(),o=Ia(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,d]=D.useState("companies"),[u,f]=D.useState(""),[p,m]=D.useState(null),[b,v]=D.useState(null),[g,y]=D.useState(null),[w,j]=D.useState(!1),{data:N=[],isLoading:S}=hy({companyId:p?.id}),{data:A=[],isLoading:_,isError:P,refetch:I}=Wie(u),{data:B=[],isLoading:T,isError:E,refetch:F}=Vie(u),{data:q=[],isLoading:H}=Gie(),{data:Q=[],isLoading:J}=Kie(),{data:re=[]}=Ys({queryKey:["projects"],queryFn:async()=>{const He=await I0();return He.data||He||[]},staleTime:300*1e3}),X=Xie(),ee=Yie(),W=Qie(),O=Jie(),z=Zie(),V=eoe(),U=toe(),K=_||T||H||J,[se,xe]=D.useState([]),[ie,ue]=D.useState([]),[Be,me]=D.useState([]),[$e,Oe]=D.useState(!1),[le,te]=D.useState(!1),[Te,we]=D.useState({}),[Ie,he]=D.useState(!1),[de,Ce]=D.useState(!1),[Ve,ge]=D.useState({}),[fe,_e]=D.useState("details"),[Ue,ke]=D.useState(!1),[Fe,qe]=D.useState(null),[et,Kt]=D.useState(null),[qt,vr]=D.useState(!1),[er,mr]=D.useState(!1),[Ge,jt]=D.useState([]),[br,Qt]=D.useState([]),[Fr,Mr]=D.useState(!1),[rt,At]=D.useState(!1),[cr,wr]=D.useState(!1),[Gr,jr]=D.useState(!1),[qr,tr]=D.useState(null),[Xr,Vr]=D.useState(null),[pn,Nr]=D.useState(!1),[Or,ne]=D.useState(""),[je,Se]=D.useState(!1),[oe,ve]=D.useState(null),[Ae,Ke]=D.useState(null),[nt,Qe]=D.useState(!1),[tt,Xe]=D.useState(""),[Me,it]=D.useState(0),[bt,It]=D.useState([]),[Dt,xr]=D.useState(""),[Rr,Yr]=D.useState(!1),[Nn,Ps]=D.useState(null),[Sn,ts]=D.useState(null),[Wn,za]=D.useState(!1),[Vn,Pn]=D.useState(""),[Do,ba]=D.useState(0),[We,Tt]=D.useState([]),[_t,nr]=D.useState(!1),[yr,dr]=D.useState(!1),[Pr,ra]=D.useState(!1),_n=async()=>{ra(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>ra(!1),500)}};D.useEffect(()=>{a!==void 0&&f(a)},[a]),D.useEffect(()=>{jt([]),Qt([])},[c,u]),D.useEffect(()=>{const He=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",He),()=>window.removeEventListener("refresh-crm",He)},[o]);const Yt=async He=>{if(p)try{await X.mutateAsync({id:p.id,updates:He}),m({...p,...He}),s("Account updated")}catch{i("Update failed")}},ur=async()=>{if(!(!b||Ue)){if(!Ve.name||!Ve.email){i("Name and Email are required fields");return}ke(!0);try{const He={...Ve,companyId:Ve.companyId===""?null:Ve.companyId,phone:Ve.phone===""?null:Ve.phone,linkedin:Ve.linkedin===""?null:Ve.linkedin,role:Ve.role===""?null:Ve.role};await ee.mutateAsync({id:b.id,updates:He});const pr={...b,...He};v(pr),Ce(!1),s("Contact profile updated successfully")}catch(He){console.error("Contact update error:",He),i(He.message||"Failed to update contact. Please try again.")}finally{ke(!1)}}},Lt=async He=>{vr(!0);try{await W.mutateAsync(He),p?.id===He&&(m(null),te(!1)),qe(null),s("Company deleted successfully")}catch(pr){i(pr.message||"Failed to delete company")}finally{vr(!1)}},kr=async He=>{mr(!0);try{await O.mutateAsync(He),b?.id===He&&(v(null),Ce(!1)),Kt(null),s("Contact deleted successfully")}catch(pr){i(pr.message||"Failed to delete contact")}finally{mr(!1)}};D.useEffect(()=>{p?.id?(async()=>{try{Nr(!0);const pr=await fk(p.id);pr.success&&Vr(pr.data)}catch{Vr(null)}finally{Nr(!1)}})():Vr(null)},[p?.id]);const zt=()=>{m(null),te(!1),ne(""),Qe(!1),Vr(null)},Da=()=>{v(null),Ce(!1),xr(""),za(!1)},ka=He=>{const pr=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Br=[];let $r;for(;($r=pr.exec(He))!==null;){const hn=$r[1].trim(),qn=Q.find(ua=>ua.name.toLowerCase()===hn.toLowerCase());qn&&Br.push(qn.id)}return[...new Set(Br)]},Sa=He=>{const pr=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Br=[];let $r=0,hn;for(;(hn=pr.exec(He))!==null;){hn.index>$r&&Br.push(He.substring($r,hn.index));const qn=hn[1].trim(),ua=Q.find(Ma=>Ma.name.toLowerCase()===qn.toLowerCase());ua?Br.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",ua.name]},hn.index)):Br.push(`@${qn}`),$r=hn.index+hn[0].length}return $r<He.length&&Br.push(He.substring($r)),Br.length>0?Br:He},Zt=He=>{const pr=He.target.value,Br=He.target.selectionStart;ne(pr),it(Br);const $r=pr.substring(0,Br),hn=$r.lastIndexOf("@");if(hn!==-1){const qn=$r.substring(hn+1),ua=hn>0?$r[hn-1]:" ";if((ua===" "||ua===`
`||hn===0)&&!qn.includes(" ")&&!qn.includes(`
`)){Xe(qn);const Ma=Q.filter(ys=>ys.name.toLowerCase().includes(qn.toLowerCase())||ys.email.toLowerCase().includes(qn.toLowerCase()));It(Ma.slice(0,5)),Qe(!0);return}}Qe(!1)},Zr=He=>{const Br=Or.substring(0,Me).lastIndexOf("@"),$r=Or.substring(Me),qn=`${Or.substring(0,Br)}@${He.name} ${$r}`;ne(qn),Qe(!1)},La=async()=>{if(!(!p||!Or.trim())){Se(!0);try{const He=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",pr=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Br={id:`note_${Date.now()}`,userId:He,userName:pr,text:Or.trim(),createdAt:new Date().toISOString()},$r=[...p.notes||[],Br];await X.mutateAsync({id:p.id,updates:{notes:$r}}),m({...p,notes:$r}),o.invalidateQueries({queryKey:["companies"]});const hn=ka(Or);for(const ua of hn)try{await Jm({userId:ua,type:"mention",title:"You were mentioned in a company note",message:`${pr} mentioned you in ${p.name}`,relatedId:p.id,relatedType:"company",read:!1})}catch(Ma){console.error("Failed to send notification:",Ma)}ne("");const qn=hn.length>0?`Note added and ${hn.length} user(s) notified`:"Note added successfully";s(qn)}catch(He){i(He.message||"Failed to add note")}finally{Se(!1)}}},Xn=async()=>{if(!(!p||!l||!Ae))try{ve(Ae);const He=p.notes?.filter(pr=>pr.id!==Ae)||[];await X.mutateAsync({id:p.id,updates:{notes:He}}),m({...p,notes:He}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),Ke(null)}catch(He){i(He.message||"Failed to delete note")}finally{ve(null)}},bn=He=>{const pr=He.target.value,Br=He.target.selectionStart;xr(pr),ba(Br);const $r=pr.substring(0,Br),hn=$r.lastIndexOf("@");if(hn!==-1){const qn=$r.substring(hn+1),ua=hn>0?$r[hn-1]:" ";if((ua===" "||ua===`
`||hn===0)&&!qn.includes(" ")&&!qn.includes(`
`)){Pn(qn);const Ma=Q.filter(ys=>ys.name.toLowerCase().includes(qn.toLowerCase())||ys.email.toLowerCase().includes(qn.toLowerCase()));Tt(Ma.slice(0,5)),za(!0);return}}za(!1)},Sr=He=>{const Br=Dt.substring(0,Do).lastIndexOf("@"),$r=Dt.substring(Do),qn=`${Dt.substring(0,Br)}@${He.name} ${$r}`;xr(qn),za(!1)},en=async()=>{if(!(!b||!Dt.trim())){Yr(!0);try{const He=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",pr=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Br={id:`note_${Date.now()}`,userId:He,userName:pr,text:Dt.trim(),createdAt:new Date().toISOString()},$r=[...b.notes||[],Br];await ee.mutateAsync({id:b.id,updates:{notes:$r}}),v({...b,notes:$r}),o.invalidateQueries({queryKey:["contacts"]});const hn=ka(Dt);for(const ua of hn)try{await Jm({userId:ua,type:"mention",title:"You were mentioned in a contact note",message:`${pr} mentioned you in ${b.name}`,relatedId:b.id,relatedType:"contact",read:!1})}catch(Ma){console.error("Failed to send notification:",Ma)}xr("");const qn=hn.length>0?`Note added and ${hn.length} user(s) notified`:"Note added successfully";s(qn)}catch(He){i(He.message||"Failed to add note")}finally{Yr(!1)}}},sr=async()=>{if(!(!b||!l||!Sn))try{Ps(Sn);const He=b.notes?.filter(pr=>pr.id!==Sn)||[];await ee.mutateAsync({id:b.id,updates:{notes:He}}),v({...b,notes:He}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),ts(null)}catch(He){i(He.message||"Failed to delete note")}finally{Ps(null)}},Dn=D.useCallback(He=>q.some(pr=>pr.companyId===He),[q]),Ar=D.useMemo(()=>A.filter(He=>{if(se.length>0){const pr=se.includes("target")&&He.isTargetAccount,Br=se.includes("non-target")&&!He.isTargetAccount;if(!pr&&!Br)return!1}if(ie.length>0){const pr=ie.includes("assigned")&&He.ownerId,Br=ie.includes("unassigned")&&!He.ownerId;if(!pr&&!Br)return!1}if(Be.length>0){const pr=Be.includes("has-deals")&&Dn(He.id),Br=Be.includes("no-deals")&&!Dn(He.id);if(!pr&&!Br)return!1}return!0}),[A,se,ie,Be,Dn]),Fa=D.useMemo(()=>se.length>0||ie.length>0||Be.length>0,[se,ie,Be]),ho=()=>{xe([]),ue([]),me([])},gs=(He,pr)=>{He==="target"?xe(Br=>Br.includes(pr)?Br.filter($r=>$r!==pr):[...Br,pr]):He==="assigned"?ue(Br=>Br.includes(pr)?Br.filter($r=>$r!==pr):[...Br,pr]):He==="deals"&&me(Br=>Br.includes(pr)?Br.filter($r=>$r!==pr):[...Br,pr])},vs=()=>{Ge.length===Ar.length&&Ar.length>0?jt([]):jt(Ar.map(He=>He.id))},bs=()=>{br.length===B.length?Qt([]):Qt(B.map(He=>He.id))},mo=async()=>{Mr(!0);try{const He=[...Ge];await z.mutateAsync(He),p&&He.includes(p.id)&&(m(null),te(!1)),jt([]),tr(null),s(`Successfully deleted ${He.length} compan${He.length>1?"ies":"y"}`)}catch(He){i(He.message||"Failed to delete companies")}finally{Mr(!1)}},ml=async()=>{At(!0);try{const He=[...br];await V.mutateAsync(He),b&&He.includes(b.id)&&(v(null),Ce(!1)),Qt([]),tr(null),s(`Successfully deleted ${He.length} contact${He.length>1?"s":""}`)}catch(He){i(He.message||"Failed to delete contacts")}finally{At(!1)}},zu=async()=>{if(Ge.length!==0){wr(!0);try{const He=[...Ge];await U.mutateAsync({ids:He,updates:{isTargetAccount:!0}}),p&&He.includes(p.id)&&m({...p,isTargetAccount:!0}),jt([]),s(`Successfully marked ${He.length} compan${He.length>1?"ies":"y"} as target account${He.length>1?"s":""}`)}catch(He){i(He.message||"Failed to mark companies as target accounts")}finally{wr(!1)}}},po=async()=>{if(Ge.length!==0){jr(!0);try{const He=[...Ge];await U.mutateAsync({ids:He,updates:{isTargetAccount:!1}}),p&&He.includes(p.id)&&m({...p,isTargetAccount:!1}),jt([]),s(`Successfully unmarked ${He.length} compan${He.length>1?"ies":"y"} as target account${He.length>1?"s":""}`)}catch(He){i(He.message||"Failed to unmark companies as target accounts")}finally{jr(!1)}}},Hi=async()=>{p&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},hi=He=>q.filter(pr=>pr.companyId===He&&pr.stage!=="Won"&&pr.stage!=="Lost").length,rc=He=>He?Q.find(pr=>pr.id===He)?.name||"Unknown":"Unassigned";return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),n.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[n.jsxs("button",{onClick:()=>{d("companies"),jt([]),Qt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?Ar.length:A.length,")"]}),n.jsxs("button",{onClick:()=>{d("contacts"),jt([]),Qt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",B.length,")"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n.jsxs("button",{onClick:_n,disabled:Pr,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[n.jsx(sd,{className:`w-4 h-4 ${Pr?"animate-spin":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),n.jsxs("button",{onClick:()=>j(!0),className:"px-3 sm:px-4 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm shrink-0",title:`Upload ${c==="companies"?"companies":"contacts"} from CSV, Excel, or Google Sheets`,children:[n.jsx(kc,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Upload"})]}),n.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[n.jsx(nn,{className:"w-4 h-4 shrink-0"})," ",n.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>nr(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[n.jsx(yU,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),n.jsxs("button",{onClick:()=>dr(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[n.jsx(uh,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[n.jsx("div",{className:"w-full min-w-0",children:n.jsxs("div",{className:"relative group w-full min-w-0",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),n.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:u,onChange:He=>f(He.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),c==="companies"&&P||c==="contacts"&&E?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("p",{className:"text-sm text-amber-800",children:[c==="companies"?"Companies":"Contacts"," could not be loaded. Check your connection and try again."]}),n.jsxs("button",{type:"button",onClick:()=>{c==="companies"?I():F()},className:"shrink-0 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(sd,{className:"w-4 h-4"}),"Retry"]})]}):null,n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:K,checked:c==="companies"?Ar.length>0&&Ge.length===Ar.length&&Ar.every(He=>Ge.includes(He.id)):B.length>0&&br.length===B.length,onChange:c==="companies"?vs:bs}),n.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>Oe(!0),disabled:K,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${Fa?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[n.jsx(vf,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"text-sm font-bold",children:"Filters"}),Fa&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:se.length+ie.length+Be.length})]}),n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:K?"Loading...":`Showing ${Ar.length} of ${A.length} companies`})]}):n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:K?"Loading...":`Showing ${B.length} contact${B.length!==1?"s":""}`})}),$e&&c==="companies"&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[n.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(vf,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),n.jsx("button",{onClick:()=>Oe(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(_p,{className:"w-4 h-4"}),"Target Account"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:se.includes("target"),onChange:()=>gs("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(_p,{className:"w-4 h-4 text-amber-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[A.filter(He=>He.isTargetAccount).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:se.includes("non-target"),onChange:()=>gs("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(cl,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[A.filter(He=>!He.isTargetAccount).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(iv,{className:"w-4 h-4"}),"Assignment"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:ie.includes("assigned"),onChange:()=>gs("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(iv,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[A.filter(He=>He.ownerId).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:ie.includes("unassigned"),onChange:()=>gs("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Ou,{className:"w-4 h-4 text-orange-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[A.filter(He=>!He.ownerId).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Cl,{className:"w-4 h-4"}),"Deals"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Be.includes("has-deals"),onChange:()=>gs("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Cl,{className:"w-4 h-4 text-purple-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[A.filter(He=>Dn(He.id)).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Be.includes("no-deals"),onChange:()=>gs("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Cl,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[A.filter(He=>!Dn(He.id)).length," companies"]})]})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:ho,disabled:!Fa,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[n.jsx(Xt,{className:"w-4 h-4"}),"Clear All Filters"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Ar.length," of ",A.length," companies"]}),n.jsx("button",{onClick:()=>Oe(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:K?Array.from({length:8}).map((He,pr)=>n.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${pr}`)):c==="companies"?Ar.map(He=>{const pr=Q.find($r=>$r.id===He.ownerId),Br=Ge.includes(He.id);return n.jsxs("div",{onClick:()=>m(He),className:`bg-white p-6 rounded-2xl border ${Br?"border-indigo-400 bg-indigo-50/30":He.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[He.isTargetAccount&&n.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[n.jsx(_p,{className:"w-2.5 h-2.5"})," Target Account"]}),n.jsx("div",{className:"absolute top-4 right-4",onClick:$r=>$r.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Br,onChange:()=>jt($r=>Br?$r.filter(hn=>hn!==He.id):[...$r,He.id])})}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Xs,{src:He.logo,fallbackText:He.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:He.name}),n.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:He.industry})]})]}),n.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dh,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate",children:He.website||"No website"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate font-medium",children:pr?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[hi(He.id)," Active Deals"]}),n.jsx(va,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},He.id)}):B.map(He=>{const pr=A.find($r=>$r.id===He.companyId),Br=br.includes(He.id);return n.jsxs("div",{onClick:()=>v(He),className:`bg-white p-5 rounded-2xl border ${Br?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[n.jsx("div",{className:"absolute top-4 right-4",onClick:$r=>$r.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Br,onChange:()=>Qt($r=>Br?$r.filter(hn=>hn!==He.id):[...$r,He.id])})}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:He.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:He.name}),n.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[He.role," @ ",pr?.name||"Partner"]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(es,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:He.email})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gj,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-[13px]",children:He.phone})]})]}),He.linkedin&&n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsxs("a",{href:He.linkedin,target:"_blank",rel:"noreferrer",onClick:$r=>$r.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[n.jsx(uh,{className:"w-4 h-4"}),"LinkedIn"]})})]},He.id)})})]}),(c==="companies"&&Ge.length>0||c==="contacts"&&br.length>0)&&n.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?Ge.length:br.length}),"Selected"]}),n.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:He=>{He.stopPropagation(),zu()},disabled:cr||Gr,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[cr?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(_p,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),n.jsxs("button",{onClick:He=>{He.stopPropagation(),po()},disabled:cr||Gr,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[Gr?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Ou,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),n.jsxs("button",{onClick:He=>{He.stopPropagation(),tr(c)},disabled:c==="companies"?Fr:rt,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?Fr:rt)?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Lr,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),n.jsx("button",{onClick:()=>{c==="companies"?jt([]):Qt([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]})}),p&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:zt}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Xs,{src:p.logo,fallbackText:p.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:p.name}),n.jsx("button",{onClick:()=>Yt({isTargetAccount:!p.isTargetAccount}),className:`p-1 rounded-lg transition-all ${p.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:n.jsx(_p,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-500",children:p.industry})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[le?n.jsx("button",{onClick:async()=>{await Yt(Te),te(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:n.jsx(Si,{className:"w-5 h-5"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{we({...p}),te(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:n.jsx(Vj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>qe(p),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:n.jsx(Lr,{className:"w-5 h-5"})})]}),n.jsx("button",{onClick:zt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[le?n.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),n.jsx("input",{type:"text",value:Te.name,onChange:He=>we({...Te,name:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),n.jsx("input",{type:"text",value:Te.industry,onChange:He=>we({...Te,industry:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),n.jsxs("select",{value:Te.ownerId,onChange:He=>we({...Te,ownerId:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"",children:"Unassigned"}),Q.map(He=>n.jsx("option",{value:He.id,children:He.name},He.id))]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),n.jsx("input",{type:"text",value:Te.website,onChange:He=>we({...Te,website:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),n.jsx("input",{type:"text",value:Te.linkedin,onChange:He=>we({...Te,linkedin:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),n.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4"})," ",rc(p.ownerId)]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),n.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${p.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:p.isTargetAccount?"Target Account":"Standard Account"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Yd,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),n.jsxs("button",{onClick:Hi,disabled:Ie,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[Ie?n.jsx(pt,{className:"w-3 h-3 animate-spin"}):n.jsx(_U,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),n.jsxs("div",{className:"space-y-3",children:[Ie&&n.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),n.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!p.socialSignals||p.socialSignals.length===0)&&!Ie?n.jsxs("div",{className:"py-12 text-center text-slate-400",children:[n.jsx(Yd,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),n.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(p.socialSignals||[]).map(He=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${He.type==="funding"?"bg-emerald-50 text-emerald-600":He.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[He.type==="funding"&&n.jsx(_D,{className:"w-4 h-4"}),He.type==="hiring"&&n.jsx(id,{className:"w-4 h-4"}),He.type==="acquisition"&&n.jsx(l1,{className:"w-4 h-4"}),He.type==="news"&&n.jsx(gU,{className:"w-4 h-4"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-sm text-slate-900",children:He.title}),He.isAiGenerated&&n.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[n.jsx(Ri,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:He.date})]}),n.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:He.description})]},He.id))]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(bf,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),Xr&&n.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",n.jsx(va,{className:"w-3 h-3"})]})]}),pn?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):Xr?n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-2xl border-2 ${Xr.latestNpsScore>=9?"bg-green-50 border-green-200":Xr.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":Xr.latestNpsScore!==void 0&&Xr.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),Xr.latestNpsScore!==void 0&&Xr.latestNpsScore!==null?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-2xl font-black ${Xr.latestNpsScore>=9?"text-green-600":Xr.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:Xr.latestNpsScore}),Xr.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${Xr.npsCategory==="Promoter"?"bg-green-100 text-green-700":Xr.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Xr.npsCategory})]}):n.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),Xr.lastSurveyDate?n.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[n.jsx(ta,{className:"w-4 h-4"}),new Date(Xr.lastSurveyDate).toLocaleDateString()]}):n.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):n.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:n.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-500"}),"Playbooks",N.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:N.length})]}),S?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(pt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):N.length>0?n.jsx("div",{className:"space-y-3",children:N.map(He=>n.jsx(Moe,{instance:He,deals:q,projects:re,onView:pr=>y(pr)},He.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(ci,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to deals or projects for this company."})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",p.notes&&p.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:p.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:3,value:Or,onChange:Zt,onBlur:()=>setTimeout(()=>Qe(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),nt&&bt.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(bh,{className:"w-3 h-3"}),"Mention User"]}),bt.map(He=>n.jsxs("button",{onClick:()=>Zr(He),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:He.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:He.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:He.email})]})]},He.id))]})})]}),n.jsx("button",{onClick:La,disabled:je||!Or.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:je?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:p.notes&&p.notes.length>0?[...p.notes].reverse().map(He=>{const pr=l?.role==="Admin"||He.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:He.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(He.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),pr&&n.jsx("button",{onClick:()=>Ke(He.id),disabled:oe===He.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:oe===He.id?n.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),He.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Sa(He.text)})]},He.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),n.jsx("div",{className:"space-y-3",children:B.filter(He=>He.companyId===p.id).map(He=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>v(He),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:He.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:He.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:He.role})]})]}),n.jsx(va,{className:"w-4 h-4 text-slate-300"})]},He.id))})]})]})]})]}),b&&n.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Da}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Da,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Xt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:b.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:b.name}),n.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[b.role," @ ",A.find(He=>He.id===b.companyId)?.name||"Direct Contact"]}),n.jsx("div",{className:"flex gap-2 mt-4",children:de?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ur,disabled:Ue,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:Ue?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-3.5 h-3.5"})," Save Changes"]})}),n.jsxs("button",{onClick:()=>{Ce(!1),ge({...b})},disabled:Ue,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Xt,{className:"w-3.5 h-3.5"})," Cancel"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{ge({...b}),Ce(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[n.jsx(Vj,{className:"w-3.5 h-3.5"})," Edit Profile"]}),n.jsx("a",{href:`mailto:${b.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:n.jsx(es,{className:"w-4 h-4"})}),b.linkedin&&n.jsx("a",{href:b.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:n.jsx(uh,{className:"w-4 h-4"})})]})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:n.jsx(b0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:n.jsx(ea,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:n.jsx(ad,{className:"w-3.5 h-3.5"})}].map(He=>n.jsxs("button",{onClick:()=>{_e(He.id),Ce(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${fe===He.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[He.icon," ",He.label]},He.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[fe==="details"&&n.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:de?n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"text",value:Ve.name||"",onChange:He=>ge({...Ve,name:He.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),n.jsx("input",{type:"text",value:Ve.role||"",onChange:He=>ge({...Ve,role:He.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),n.jsxs("select",{value:Ve.companyId||"",onChange:He=>ge({...Ve,companyId:He.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"No Organization"}),A.map(He=>n.jsx("option",{value:He.id,children:He.name},He.id))]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[n.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"email",value:Ve.email||"",onChange:He=>ge({...Ve,email:He.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),n.jsx("input",{type:"tel",value:Ve.phone||"",onChange:He=>ge({...Ve,phone:He.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),n.jsx("input",{type:"url",value:Ve.linkedin||"",onChange:He=>ge({...Ve,linkedin:He.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),n.jsx(es,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:b.email}),n.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),n.jsx(Gj,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:b.phone||"Registry Pending"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(cl,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),n.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[n.jsx(Xs,{src:A.find(He=>He.id===b.companyId)?.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:A.find(He=>He.id===b.companyId)?.name||"Independent Partner"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:A.find(He=>He.id===b.companyId)?.industry||"Uncategorized"}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),n.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),n.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:n.jsx(Ts,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[n.jsx(iv,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),n.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[n.jsx(o1,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),fe==="notes"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",b.notes&&b.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:b.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:4,value:Dt,onChange:bn,onBlur:()=>setTimeout(()=>za(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),Wn&&We.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(bh,{className:"w-3 h-3"}),"Mention User"]}),We.map(He=>n.jsxs("button",{onClick:()=>Sr(He),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:He.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:He.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:He.email})]})]},He.id))]})})]}),n.jsx("button",{onClick:en,disabled:Rr||!Dt.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Rr?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),b.legacyNotes&&n.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(b0,{className:"w-4 h-4 text-amber-600"}),n.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),n.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:b.legacyNotes})]}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:b.notes&&b.notes.length>0?[...b.notes].reverse().map(He=>{const pr=l?.role==="Admin"||He.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:He.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(He.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),pr&&n.jsx("button",{onClick:()=>ts(He.id),disabled:Nn===He.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Nn===He.id?n.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),He.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Sa(He.text)})]},He.id)}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),fe==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),n.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[n.jsx(sU,{className:"w-3 h-3"})," Audit Log"]})]}),n.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>Kt(b),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>{v(null),Ce(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(iv,{className:"w-5 h-5"})," Save"]})]})]})]}),Fe&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Xs,{src:Fe.logo,fallbackText:Fe.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Fe.name}),n.jsx("p",{className:"text-xs text-slate-500",children:Fe.industry})]})]})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>qe(null),disabled:qt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Lt(Fe.id),disabled:qt,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:qt?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),et&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:et.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:et.name}),n.jsx("p",{className:"text-xs text-slate-500",children:et.email}),et.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:et.role})]})]}),A.find(He=>He.id===et.companyId)&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(cl,{className:"w-4 h-4 text-slate-400"}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:A.find(He=>He.id===et.companyId)?.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Kt(null),disabled:er,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>kr(et.id),disabled:er,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:er?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),qr&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",qr==="companies"?Ge.length:br.length," ",qr==="companies"?"Compan":"Contact",qr==="companies"?Ge.length>1?"ies":"y":br.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",qr==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(qr==="companies"?A.filter(He=>Ge.includes(He.id)):B.filter(He=>br.includes(He.id))).slice(0,5).map(He=>n.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:qr==="companies"?n.jsxs(n.Fragment,{children:[n.jsx(Xs,{src:He.logo,fallbackText:He.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:He.industry})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:He.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:He.email})]})]})},He.id)),(qr==="companies"?Ge.length:br.length)>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(qr==="companies"?Ge.length:br.length)-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>tr(null),disabled:qr==="companies"?Fr:rt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>{qr==="companies"?mo():ml()},disabled:qr==="companies"?Fr:rt,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(qr==="companies"?Fr:rt)?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${qr==="companies"?Ge.length:br.length} ${qr==="companies"?"Compan":"Contact"}${qr==="companies"?Ge.length>1?"ies":"y":br.length>1?"s":""}`})]})]})}),Ae&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(y0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>Ke(null),disabled:oe===Ae,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Xn,disabled:oe===Ae,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:oe===Ae?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Sn&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(y0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>ts(null),disabled:Nn===Sn,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:sr,disabled:Nn===Sn,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Nn===Sn?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),_t&&n.jsx(iie,{onClose:()=>nr(!1),onSuccess:()=>{nr(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),yr&&n.jsx(oie,{onClose:()=>dr(!1),onSuccess:()=>{dr(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),w&&n.jsx(Foe,{type:c==="contacts"?"contact":"company",onClose:()=>j(!1),onSuccess:()=>{c==="contacts"?o.invalidateQueries({queryKey:["contacts"]}):o.invalidateQueries({queryKey:["companies"]})}}),g&&n.jsx(my,{instanceId:g,isOpen:!!g,onClose:()=>y(null)})]})},u3=({isOpen:e,dealId:t,projectId:r,preSelectedTemplateId:a,onClose:s,onSuccess:i})=>{const{showError:o}=kn(),[l,c]=D.useState(""),[d,u]=D.useState(null),[f,p]=D.useState(!1);D.useEffect(()=>{e&&a?u(a):e||(u(null),c(""))},[e,a]);const{data:m=[],isLoading:b}=yM(),v=ioe();if(!e)return null;const g=m.filter(N=>{if(!l)return!0;const S=l.toLowerCase();return N.name?.toLowerCase().includes(S)||N.description?.toLowerCase().includes(S)||N.category?.toLowerCase().includes(S)}),y=N=>!N.sections||!Array.isArray(N.sections)?0:N.sections.reduce((S,A)=>S+(A.steps?.length||0),0),w=N=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[N]||"bg-slate-100 text-slate-700",j=async()=>{if(!d){o("Please select a playbook template");return}if(!t&&!r){o("Either dealId or projectId must be provided");return}p(!0);try{await v.mutateAsync({templateId:d,dealId:t||void 0,projectId:r||void 0}),i?.(),s(),u(null),c("")}catch(N){o(N.message||"Failed to attach playbook")}finally{p(!1)}};return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:s}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ci,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:a?"Activate Onboarding Playbook?":"Attach Playbook"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:a?"The Client Onboarding Playbook is ready to activate for this deal.":"Select a playbook template to attach"})]})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:l,onChange:N=>c(N.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]})}),b?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):g.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ci,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Templates Found"}),n.jsx("p",{className:"text-sm text-slate-500",children:l?"No templates match your search. Try a different query.":"No playbook templates available. Create one first."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(N=>{const S=y(N),A=N.sections?.length||0,_=d===N.id;return n.jsxs("div",{onClick:()=>u(N.id),className:`p-6 border-2 rounded-xl cursor-pointer transition-all ${_?"border-indigo-500 bg-indigo-50 shadow-lg":"border-slate-200 hover:border-slate-300 hover:shadow-md bg-white"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:N.name}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${w(N.category||"Custom")}`,children:N.category||"Custom"})]}),_&&n.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),N.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:N.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ea,{className:"w-4 h-4"}),n.jsxs("span",{children:[A," section",A!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ob,{className:"w-4 h-4"}),n.jsxs("span",{children:[S," step",S!==1?"s":""]})]})]})]},N.id)})})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:a&&d===a?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("button",{onClick:j,disabled:f,className:"w-full px-6 py-3 bg-green-600 text-white text-sm font-semibold rounded-xl hover:bg-green-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Activating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_i,{className:"w-4 h-4"}),"Yes, Activate Onboarding Playbook"]})}),n.jsx("button",{onClick:s,disabled:f,className:"w-full px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Maybe Later"})]}):n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:s,disabled:f,className:"px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:j,disabled:!d||f,className:"px-6 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Attaching..."]}):"Attach Playbook"})]})})]})})]})},RI=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],Boe=({instance:e,onView:t})=>{const{data:r=[]}=Sg(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(ci,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:["Version ",e.templateSnapshot.version]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${e.status==="completed"?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700"}`,children:e.status==="completed"?"Completed":"Active"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Progress"}),n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:[s," / ",a," steps"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:t,className:"w-full px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 text-xs font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4"}),"View Playbook"]})]})},Uoe=({onNavigate:e,onNewDeal:t,currentUser:r})=>{const{showSuccess:a,showError:s,showInfo:i}=kn(),[o,l]=D.useState([]),[c,d]=D.useState([]),[u,f]=D.useState([]),[p,m]=D.useState([]),[b,v]=D.useState(!0),[g,y]=D.useState(null),[w,j]=D.useState("overview"),[N,S]=D.useState(!1),[A,_]=D.useState(null),{data:P=[],isLoading:I}=hy({dealId:g?.id}),[B,T]=D.useState(!1),[E,F]=D.useState(null),[q,H]=D.useState(null),[Q,J]=D.useState(""),[re,X]=D.useState(null),[ee,W]=D.useState(!1),[O,z]=D.useState(!1),[V,U]=D.useState(!1),[K,se]=D.useState({title:"",companyId:"",value:"",currency:ki,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[xe,ie]=D.useState([]),[ue,Be]=D.useState(!1),[me,$e]=D.useState(!1),[Oe,le]=D.useState([]),[te,Te]=D.useState(!1),[we,Ie]=D.useState([]),[he,de]=D.useState(""),[Ce]=D.useState("sales"),[Ve,ge]=D.useState(!1),[fe,_e]=D.useState(!1),[Ue,ke]=D.useState(!0),[Fe,qe]=D.useState(!1),[et,Kt]=D.useState(null),[qt,vr]=D.useState(""),[er,mr]=D.useState(""),Ge=we.find(oe=>oe.id===he)||null,[jt,br]=D.useState(null),Qt=async()=>{try{ke(!0);const Ae=((await cI())?.data||[]).filter(Ke=>Ke.type==="sales");if(Ae.length===0)try{const Ke=await dI({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});Ke?.data?.id&&await kv(Ke.data.id,{isActive:!0});const tt=((await cI())?.data||[]).filter(Me=>Me.type==="sales");Ie(tt);const Xe=tt.find(Me=>Me.isActive)||tt[0];Xe&&de(Xe.id)}catch(Ke){console.error("[PIPELINE] Failed to create default sales pipeline:",Ke);const nt=RI.filter(Qe=>Qe.type==="sales");Ie(nt),nt.length>0&&de(nt[0].id)}else{Ie(Ae);const Ke=Ae.find(nt=>nt.isActive)||Ae[0];Ke&&de(Ke.id)}}catch(oe){console.error("[PIPELINE] Failed to fetch pipelines:",oe);const ve=RI.filter(Ae=>Ae.type==="sales");Ie(ve),ve.length>0&&de(ve[0].id)}finally{ke(!1)}};D.useEffect(()=>{Qt()},[]);const Fr=async()=>{v(!0);try{const[oe,ve,Ae,Ke]=await Promise.all([kg(),hd(),_c(),Sh()]),Qe=(Array.isArray(oe)?oe:oe?.data||[]).filter(tt=>tt.pipelineType?tt.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(tt.stage));l(Qe),d(ve?.data||[]),f(Ae?.data||[]),m(Ke?.data||[])}catch{s("Failed to load pipeline data")}finally{v(!1)}};D.useEffect(()=>{Fr()},[r,Ce]),D.useEffect(()=>{const oe=()=>Fr();return window.addEventListener("refresh-pipeline",oe),()=>window.removeEventListener("refresh-pipeline",oe)},[]);const Mr=(oe,ve)=>{br(ve),oe.dataTransfer.setData("dealId",ve)},rt=async(oe,ve)=>{oe.preventDefault();const Ae=oe.dataTransfer.getData("dealId"),Ke=o.find(nt=>nt.id===Ae);if(!(!Ke||Ke.stage===ve))try{await Nv(Ae,{stage:ve,pipelineType:"sales"}),l(nt=>nt.map(Qe=>Qe.id===Ae?{...Qe,stage:ve}:Qe)),a(`Deal moved to ${ve}`),Ke.ownerId&&Ke.ownerId!==r?.id&&await Jm({userId:Ke.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${Ke.title}" was moved to ${ve}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{br(null)}},At=async()=>{if(!(!qt.trim()||!he||Fe))try{qe(!0);const oe=we.find(Ae=>Ae.id===he);if(!oe)return;const ve=[...oe.stages,qt.trim()];await kv(he,{stages:ve}),Ie(Ae=>Ae.map(Ke=>Ke.id===he?{...Ke,stages:ve}:Ke)),vr(""),a("Stage added successfully")}catch(oe){s(oe.message||"Failed to add stage")}finally{qe(!1)}},cr=async oe=>{if(he)try{const ve=we.find(Ke=>Ke.id===he);if(!ve)return;const Ae=ve.stages.filter((Ke,nt)=>nt!==oe);await kv(he,{stages:Ae}),Ie(Ke=>Ke.map(nt=>nt.id===he?{...nt,stages:Ae}:nt)),a("Stage removed successfully")}catch(ve){s(ve.message||"Failed to remove stage")}},wr=async()=>{if(er.trim())try{const oe=await dI({name:er.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});oe?.data&&(await Qt(),de(oe.data.id),mr(""),ge(!1),a("Sales pipeline created successfully"))}catch(oe){s(oe.message||"Failed to create pipeline")}},Gr=async oe=>{try{const ve=we.find(Ae=>Ae.id===oe);if(!ve)return;await kv(oe,{isActive:!0}),de(oe),await Qt(),await Fr(),a(`Switched to ${ve.name}`)}catch(ve){s(ve.message||"Failed to switch pipeline")}},jr=async oe=>{W(!0);try{await iI(oe),l(ve=>ve.filter(Ae=>Ae.id!==oe)),g?.id===oe&&y(null),X(null),a("Opportunity removed from pipeline")}catch(ve){s(ve.message||"Failed to delete opportunity")}finally{W(!1)}},qr=()=>{xe.length===o.length?ie([]):ie(o.map(oe=>oe.id))},tr=async()=>{Be(!0);try{const oe=[...xe];await Promise.all(oe.map(ve=>iI(ve))),l(ve=>ve.filter(Ae=>!oe.includes(Ae.id))),g&&oe.includes(g.id)&&y(null),ie([]),$e(!1),a(`Successfully deleted ${oe.length} opportunit${oe.length>1?"ies":"y"}`)}catch(oe){s(oe.message||"Failed to delete opportunities")}finally{Be(!1)}},Xr=async oe=>{if(!g)return;if(g.stakeholderIds?.includes(oe)){s("Stakeholder already linked");return}F(oe);const ve=[...g.stakeholderIds||[],oe];try{await Nv(g.id,{stakeholderIds:ve});const Ae={...g,stakeholderIds:ve};y(Ae),l(Ke=>Ke.map(nt=>nt.id===g.id?Ae:nt)),T(!1),J(""),a("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{F(null)}},Vr=c.find(oe=>oe.id===g?.companyId),pn=u.find(oe=>oe.id===g?.ownerId),Nr=p.filter(oe=>g?.stakeholderIds?.includes(oe.id)),Or=p.filter(oe=>!g?.stakeholderIds?.includes(oe.id)&&(oe.name.toLowerCase().includes(Q.toLowerCase())||oe.email.toLowerCase().includes(Q.toLowerCase())));D.useEffect(()=>{g&&!O&&se({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||ki,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},[g]);const ne=async()=>{if(g){if(!K.title.trim()){s("Deal title is required");return}if(!K.ownerId){s("Opportunity lead is required");return}U(!0);try{const oe={title:K.title.trim(),companyId:K.companyId&&K.companyId.trim()!==""?K.companyId:null,value:parseFloat(K.value)||0,currency:K.currency||ki,stage:K.stage,pipelineType:"sales",ownerId:K.ownerId,expectedCloseDate:K.expectedCloseDate&&K.expectedCloseDate.trim()!==""?K.expectedCloseDate:null,description:K.description.trim()||null};await Nv(g.id,oe);const ve={...g,...oe};l(Ae=>Ae.map(Ke=>Ke.id===g.id?ve:Ke)),y(ve),z(!1),a("Deal updated successfully")}catch(oe){s(oe.message||"Failed to update deal")}finally{U(!1)}}},je=async()=>{if(!(!g||w!=="activity")){Te(!0);try{const oe=await a3("deal",g.id);le(oe?.data||[])}catch(oe){console.error("[PIPELINE] Failed to fetch deal activities:",oe),le([])}finally{Te(!1)}}};D.useEffect(()=>{g&&w==="activity"?je():le([])},[g?.id,w]);const Se=()=>{if(!g)return[];const oe=[];return g.createdAt&&oe.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${g.title}" was created${pn?` by ${pn.name}`:""}`,date:g.createdAt,icon:n.jsx(nn,{className:"w-4 h-4"}),color:"indigo"}),oe.push({id:"stage",type:"stage",title:`Current Stage: ${g.stage}`,description:`Opportunity is currently in the ${g.stage} stage`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(Yd,{className:"w-4 h-4"}),color:g.stage==="Won"?"emerald":g.stage==="Lost"?"red":"blue"}),g.value>0&&oe.push({id:"value",type:"value",title:`Deal Value: ${pf(g.value,g.currency)}`,description:`Gross contract revenue for this opportunity: ${pf(g.value,g.currency)}`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(Mu,{className:"w-4 h-4"}),color:"emerald"}),g.expectedCloseDate&&oe.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${g.expectedCloseDate}`,description:"Target date for closing this opportunity",date:g.expectedCloseDate,icon:n.jsx(ta,{className:"w-4 h-4"}),color:"amber"}),Nr.length>0&&oe.push({id:"stakeholders",type:"stakeholder",title:`${Nr.length} Stakeholder${Nr.length>1?"s":""} Linked`,description:Nr.map(ve=>ve.name).join(", "),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(p0,{className:"w-4 h-4"}),color:"purple"}),g.description&&oe.push({id:"description",type:"description",title:"Strategic Context Added",description:g.description.substring(0,100)+(g.description.length>100?"...":""),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(lo,{className:"w-4 h-4"}),color:"slate"}),Oe.forEach(ve=>{ve.activityType==="email_linked"&&oe.push({id:ve.id||`email-${ve.emailId}`,type:"email_linked",title:ve.title||"Email Linked",description:ve.description||`Email "${ve.emailSubject||"Untitled"}" from ${ve.emailSender||"Unknown"}`,date:ve.createdAt,icon:n.jsx(es,{className:"w-4 h-4"}),color:"indigo",emailId:ve.emailId})}),oe.sort((ve,Ae)=>new Date(Ae.date).getTime()-new Date(ve.date).getTime())};return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[n.jsx(Wj,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-900",children:Ge?.name||"Loading..."}),n.jsx(Vs,{className:"w-4 h-4 text-slate-400"})]}),n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[we.length>0?we.map(oe=>n.jsxs("button",{onClick:()=>Gr(oe.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${he===oe.id?"text-indigo-600":"text-slate-600"}`,children:[oe.name," ",he===oe.id&&n.jsx(Fu,{className:"w-4 h-4"})]},oe.id)):n.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsxs("button",{onClick:()=>ge(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[n.jsx(nn,{className:"w-3 h-3"}),"Manage Pipelines"]})}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:er,onChange:oe=>mr(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&wr(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),n.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),n.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[n.jsx("button",{onClick:()=>ge(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:n.jsx(g6,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[n.jsx(nn,{className:"w-4 h-4"})," New Deal"]})]})]}),!b&&o.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&xe.length===o.length,onChange:qr}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),n.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:b||Ue||!Ge?n.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:n.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Ge.stages.map(oe=>{const ve=o.filter(Ae=>Ae.stage===oe);return n.jsxs("div",{onDragOver:Ae=>Ae.preventDefault(),onDrop:Ae=>rt(Ae,oe),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:oe}),n.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:ve.length})]}),n.jsx(nn,{onClick:()=>t(oe),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),n.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:ve.map(Ae=>{const Ke=c.find(Qe=>Qe.id===Ae.companyId),nt=xe.includes(Ae.id);return n.jsxs("div",{onClick:()=>y(Ae),draggable:!0,onDragStart:Qe=>Mr(Qe,Ae.id),className:`bg-white p-5 rounded-2xl border ${nt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${jt===Ae.id?"opacity-30":""}`,children:[n.jsx("div",{className:"absolute top-3 right-3",onClick:Qe=>Qe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:nt,onChange:()=>ie(Qe=>nt?Qe.filter(tt=>tt!==Ae.id):[...Qe,Ae.id])})}),n.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[n.jsx(Xs,{src:Ke?.logo,fallbackText:Ke?.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),n.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Ae.title})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:Ke?.name||"Independent"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-indigo-600 font-black text-xs",children:pf(Ae.value,Ae.currency)}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Ae.expectedCloseDate}),n.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Ae.id)})})]},oe)})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{y(null),T(!1)}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:n.jsx(Cl,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[O?n.jsx("input",{type:"text",value:K.title,onChange:oe=>se(ve=>({...ve,title:oe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:g.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[O?n.jsx("select",{value:K.stage,onChange:oe=>se(ve=>({...ve,stage:oe.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:Ge?.stages?.map(oe=>n.jsx("option",{value:oe,children:oe},oe))||[]}):n.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:g.stage}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",g.id.substring(0,8)]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[O?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{z(!1),se({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||ki,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},disabled:V,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:ne,disabled:V||!K.title.trim()||!K.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:V?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"}),"Edit Deal"]}),n.jsx("button",{onClick:()=>{y(null),T(!1),z(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:n.jsx(Xt,{className:"w-6 h-6"})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:n.jsx(b0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:n.jsx(ad,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:n.jsx(p0,{className:"w-4 h-4"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(ci,{className:"w-4 h-4"})}].map(oe=>n.jsxs("button",{onClick:()=>{j(oe.id),T(!1),z(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${w===oe.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[oe.icon," ",oe.label]},oe.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[w==="overview"&&n.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[O?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(Zp,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("select",{value:K.currency||ki,onChange:oe=>se(ve=>({...ve,currency:oe.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:Zm.map(oe=>n.jsxs("option",{value:oe.code,children:[oe.code," (",oe.symbol,")"]},oe.code))}),n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:uf(K.currency||ki)}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:K.value||"",onChange:oe=>se(ve=>({...ve,value:oe.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(ta,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("input",{type:"date",value:K.expectedCloseDate,onChange:oe=>se(ve=>({...ve,expectedCloseDate:oe.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(Zp,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:pf(g.value,g.currency)}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(ta,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:g.expectedCloseDate||"Not set"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(cl,{className:"w-4 h-4"})," Account Association"]}),O?n.jsxs("select",{value:K.companyId,onChange:oe=>se(ve=>({...ve,companyId:oe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[n.jsx("option",{value:"",children:"Independent/Direct"}),c.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[n.jsx(Xs,{src:Vr?.logo,className:"w-14 h-14",fallbackText:Vr?.name||"A",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:Vr?.name||"Independent/Direct"}),n.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:Vr?.industry||"Uncategorized"})]}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:n.jsx(Ts,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Pb,{className:"w-4 h-4"})," Opportunity Lead"]}),O?n.jsxs("select",{value:K.ownerId,onChange:oe=>se(ve=>({...ve,ownerId:oe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[n.jsx("option",{value:"",children:"Select Owner"}),u.map(oe=>n.jsxs("option",{value:oe.id,children:[oe.name," (",oe.role,")"]},oe.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[n.jsx(Xs,{src:pn?.avatar,className:"w-14 h-14",fallbackText:pn?.name||"U",isAvatar:!0}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:pn?.name||"Unassigned"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:pn?.role||"Teammate"})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4"})," Strategic Context"]}),O?n.jsx("textarea",{value:K.description,onChange:oe=>se(ve=>({...ve,description:oe.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[n.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:g.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),n.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[n.jsx(Ri,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),n.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(ea,{className:"w-6 h-6"})}),n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),n.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),n.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),w==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),te?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const oe=Se();return oe.length===0?n.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[n.jsx(ad,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),n.jsx("div",{className:"space-y-6",children:oe.map((ve,Ae)=>{const Ke=Xe=>{const Me={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return Me[Xe]||Me.slate},nt=new Date(ve.date),Qe=nt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),tt=nt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"relative flex items-start gap-4",children:[n.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${Ke(ve.color)} flex items-center justify-center flex-shrink-0`,children:ve.icon}),n.jsx("div",{className:"flex-1 pb-6",children:n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-black text-slate-900 text-sm",children:ve.title}),n.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[Qe," ",tt]})]}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:ve.description}),ve.type==="email_linked"&&ve.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${ve.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(Ts,{className:"w-3 h-3"})," View Email"]})]})})]},ve.id)})})]})})()]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.createdAt?Math.floor((new Date().getTime()-new Date(g.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.stage})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:Nr.length})]})]})]}),w==="stakeholders"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!B&&n.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(id,{className:"w-3 h-3"})," Link Person"]})]}),B?n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),n.jsx("button",{onClick:()=>T(!1),className:"p-1 hover:bg-white rounded-lg",children:n.jsx(Xt,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search global registry...",value:Q,onChange:oe=>J(oe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:Or.length>0?Or.map(oe=>{const ve=E===oe.id;return n.jsxs("button",{onClick:()=>Xr(oe.id),disabled:ve||!!E,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:oe.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:oe.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:oe.role})]}),ve?n.jsx(pt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):n.jsx(nn,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},oe.id)}):n.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):Nr.length>0?n.jsx("div",{className:"grid grid-cols-1 gap-3",children:Nr.map(oe=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:oe.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:oe.name}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:oe.role})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(g){H(oe.id);try{const ve=(g.stakeholderIds||[]).filter(Ke=>Ke!==oe.id);await Nv(g.id,{stakeholderIds:ve});const Ae={...g,stakeholderIds:ve};y(Ae),l(Ke=>Ke.map(nt=>nt.id===g.id?Ae:nt)),a("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{H(null)}}},disabled:q===oe.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:q===oe.id?n.jsx(pt,{className:"w-4 h-4 animate-spin text-red-500"}):n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:n.jsx(va,{className:"w-5 h-5"})})]})]},oe.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(p0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]}),w==="playbooks"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(nn,{className:"w-3 h-3"})," Attach Playbook"]})]}),I?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(pt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):P.length>0?n.jsx("div",{className:"space-y-3",children:P.map(oe=>n.jsx(Boe,{instance:oe,onView:()=>_(oe.id)},oe.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(ci,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this deal yet."})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>X(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(_i,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),re&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Cl,{className:"w-5 h-5 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:re.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:re.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",re.value.toLocaleString()]})]})]})]}),Vr&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(Xs,{src:Vr.logo,fallbackText:Vr.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:Vr.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(null),disabled:ee,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>jr(re.id),disabled:ee,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),xe.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:xe.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:oe=>{oe.stopPropagation(),$e(!0)},disabled:ue,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[ue?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>ie([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]})}),me&&xe.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",xe.length," Opportunit",xe.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(oe=>xe.includes(oe.id)).slice(0,5).map(oe=>(c.find(ve=>ve.id===oe.companyId),n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(Cl,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:oe.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:oe.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",oe.value.toLocaleString()]})]})]})]},oe.id))),xe.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",xe.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>$e(!1),disabled:ue,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:tr,disabled:ue,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ue?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${xe.length} Opportunit${xe.length>1?"ies":"y"}`})]})]})}),fe&&n.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[n.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>_e(!1)}),n.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(g6,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),n.jsx("button",{onClick:()=>_e(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),n.jsx("div",{className:"space-y-2",children:we.map(oe=>n.jsx("button",{onClick:()=>Gr(oe.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${he===oe.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:oe.name}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[oe.stages.length," stages"]})]}),he===oe.id&&n.jsx(Fu,{className:"w-5 h-5 text-indigo-600"})]})},oe.id))})]}),Ge&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Ge.stages.length," stages"]})]}),n.jsx("div",{className:"space-y-2",children:Ge.stages.map((oe,ve)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:ve+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-sm text-slate-900",children:oe}),n.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Ae=>Ae.stage===oe).length," deals"]})]})]},oe))})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Zp,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),n.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),n.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((oe,ve)=>oe+(ve.value||0),0).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>{_e(!1),ge(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(Wj,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),n.jsx(va,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),n.jsxs("button",{onClick:()=>{_e(!1),Fr(),a("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(sd,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),n.jsx(va,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),Ve&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),n.jsx("button",{onClick:()=>ge(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),n.jsx("div",{className:"space-y-2",children:we.map(oe=>n.jsx("button",{onClick:()=>Gr(oe.id),className:`w-full p-3 rounded-xl border-2 text-left ${he===oe.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:n.jsx("p",{className:"font-bold",children:oe.name})},oe.id))})]}),Ge&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),n.jsx("div",{className:"space-y-2",children:Ge.stages.map((oe,ve)=>n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:oe}),n.jsx("button",{onClick:()=>cr(ve),disabled:et!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:et===ve?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]},ve))}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("input",{type:"text",placeholder:"New stage name...",value:qt,onChange:oe=>vr(oe.target.value),onKeyDown:oe=>{oe.key==="Enter"&&qt.trim()&&!Fe&&At()},disabled:Fe,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),n.jsx("button",{onClick:At,disabled:Fe||!qt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Fe?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Pipeline name...",value:er,onChange:oe=>mr(oe.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),n.jsx("button",{onClick:wr,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:n.jsx("button",{onClick:()=>ge(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})}),n.jsx(u3,{isOpen:N,dealId:g?.id,onClose:()=>S(!1),onSuccess:()=>{S(!1)}}),A&&n.jsx(my,{instanceId:A,isOpen:!!A,onClose:()=>_(null)})]})},Rh={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},qoe=e=>Ys({queryKey:Rh.projects(e||""),queryFn:async()=>(await I0()).data||[],enabled:!0,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),$oe=()=>Ys({queryKey:Rh.companies,queryFn:async()=>(await hd()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),zoe=()=>Ys({queryKey:Rh.users,queryFn:async()=>(await _c()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Hoe=e=>Ys({queryKey:Rh.tasks(e||""),queryFn:async()=>e?(await uy(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Woe=e=>Ys({queryKey:Rh.projectActivities(e||""),queryFn:async()=>e?(await a3("project",e))?.data||[]:[],enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),Voe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async({id:a,data:s})=>await z7(a,s),onSuccess:async(a,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:Rh.projectActivities(s.id),type:"active"})])},onError:a=>{console.error("Failed to update project:",a),r(a?.message||"Failed to update project")}})},Goe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>await H7(a),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to delete project:",a),r(a?.message||"Failed to delete project")}})},Koe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async({id:a,archived:s})=>await z7(a,{archived:s}),onSuccess:async(a,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:Rh.projectActivities(s.id)})},onError:a=>{console.error("Failed to archive/restore project:",a),r(a?.message||"Failed to update project")}})},Xoe=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>{await Promise.all(a.map(s=>H7(s)))},onSuccess:async(a,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to bulk delete projects:",a),r(a?.message||"Failed to delete projects")}})},Yoe=({instance:e,onView:t})=>{const{data:r=[]}=Sg(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(ci,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["v",e.templateSnapshot.version]})]})]}),i===100&&n.jsx(_i,{className:"w-5 h-5 text-green-500"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[s," / ",a," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[i,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${i===100?"bg-green-500":i>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:()=>t(e.id),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Playbook",n.jsx(Ts,{className:"w-3 h-3"})]})]})},Qoe=({onNavigate:e,onCreateProject:t,currentUser:r})=>{const{showSuccess:a,showError:s}=kn(),i=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=qoe(i),{data:c=[]}=$oe(),{data:d=[]}=zoe(),{data:u=[]}=Hoe(i),[f,p]=D.useState(null),{data:m=[],isLoading:b}=Woe(f?.id||null),[v,g]=D.useState(null),[y,w]=D.useState(!1),{data:j=[],isLoading:N}=hy({projectId:f?.id}),[S,A]=D.useState("active"),_=l,P=Voe(),I=Goe(),B=Koe(),T=Xoe(),E=Fe=>{const qe=u.filter(Kt=>Kt.projectId===Fe);if(qe.length===0)return 0;const et=qe.filter(Kt=>Kt.status==="Done").length;return Math.round(et/qe.length*100)},[F,q]=D.useState(null),[H,Q]=D.useState(null),[J,re]=D.useState(null),[X,ee]=D.useState(null),[W,O]=D.useState([]),[z,V]=D.useState(!1),[U,K]=D.useState(!1),[se,xe]=D.useState(!1),[ie,ue]=D.useState(!1),[Be,me]=D.useState(!1),[$e,Oe]=D.useState(""),[le,te]=D.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Te,we]=D.useState(null),Ie=async Fe=>{if(o.find(et=>et.id===Fe)){Q(Fe);try{await B.mutateAsync({id:Fe,archived:S==="active"}),re(null),f?.id===Fe&&p(null)}finally{Q(null)}}},he=async Fe=>{q(Fe);try{await I.mutateAsync(Fe),ee(null),f?.id===Fe&&p(null)}finally{q(null)}},de=()=>{W.length===ke.length?O([]):O(ke.map(Fe=>Fe.id))},Ce=async()=>{V(!0);try{const Fe=[...W];await T.mutateAsync(Fe),O([]),K(!1),f&&Fe.includes(f.id)&&p(null),a(`Successfully deleted ${Fe.length} project${Fe.length>1?"s":""}`)}catch(Fe){s(Fe.message||"Failed to delete projects")}finally{V(!1)}},Ve=Fe=>{if(!Fe)return"";try{const qe=new Date(Fe);if(isNaN(qe.getTime()))return"";const et=qe.getFullYear(),Kt=String(qe.getMonth()+1).padStart(2,"0"),qt=String(qe.getDate()).padStart(2,"0");return`${et}-${Kt}-${qt}`}catch{return""}},ge=Fe=>{p(Fe),te({title:Fe.title,description:Fe.description||"",companyId:Fe.companyId||"",status:Fe.status,engagement:Fe.engagement||"",startDate:Ve(Fe.startDate),endDate:Ve(Fe.endDate)}),xe(!1)},fe=async()=>{if(f){if(!le.title.trim()){s("Project title is required");return}ue(!0);try{const Fe={title:le.title.trim(),description:le.description.trim(),status:le.status,companyId:le.companyId&&le.companyId.trim()!==""?le.companyId:null};await P.mutateAsync({id:f.id,data:Fe});const qe={...f,...Fe};p(qe),xe(!1)}catch{}finally{ue(!1)}}},_e=async Fe=>{if(f){ue(!0);try{await P.mutateAsync({id:f.id,data:{status:Fe}});const qe={...f,status:Fe};p(qe),te(et=>({...et,status:Fe}))}catch{}finally{ue(!1)}}},Ue=async(Fe,qe)=>{we(Fe);try{const et=qe==="Done"?"Todo":"Done";await lb(Fe,{status:et}),setTasks(vr=>vr.map(er=>er.id===Fe?{...er,status:et}:er));const Kt=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,qt=await apiGetTasks(Kt);setTasks(qt.data||[]),a(et==="Done"?"Task marked as done":"Task marked as todo")}catch(et){s(et.message||"Failed to update task status")}finally{we(null)}},ke=D.useMemo(()=>o.filter(Fe=>{const qe=Fe.archived===!0;return S==="archived"?qe:!qe}),[o,S]);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{A("active"),O([])},className:`text-sm font-bold pb-1 transition-all ${S==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{A("archived"),O([])},className:`text-sm font-bold pb-1 transition-all ${S==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(Fe=>Fe.archived).length,")"]})]})]}),n.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Project"]})]}),!_&&ke.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ke.length>0&&W.length===ke.length,onChange:de}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),_?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):ke.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[n.jsx(s1,{className:"w-16 h-16 text-slate-200 mb-6"}),n.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",S," projects found"]}),n.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ke.map(Fe=>{const qe=c.find(qt=>qt.id===Fe.companyId),et=E(Fe.id),Kt=W.includes(Fe.id);return n.jsxs("div",{onClick:qt=>{!Fe.archived&&!Kt&&(qt.stopPropagation(),ge(Fe))},className:`bg-white rounded-3xl border ${Kt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${Fe.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[n.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[n.jsx("button",{onClick:qt=>{qt.stopPropagation(),re(Fe)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:S==="active"?"Archive":"Restore",children:S==="active"?n.jsx(_u,{className:"w-4 h-4"}):n.jsx(i1,{className:"w-4 h-4"})}),n.jsx("button",{onClick:qt=>{qt.stopPropagation(),ee(Fe)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("div",{onClick:qt=>qt.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${Kt?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Kt,onChange:()=>O(qt=>Kt?qt.filter(vr=>vr!==Fe.id):[...qt,Fe.id])})})]}),n.jsxs("div",{className:"p-7",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:n.jsx(Xd,{className:"w-6 h-6"})}),n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:Fe.title}),n.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:qe?.name||"Standalone Project"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[n.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),n.jsxs("span",{className:"text-indigo-600",children:[et,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:n.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${et}%`}})})]})]}),n.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[n.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[n.jsx(ms,{className:"w-3.5 h-3.5"})," ",Fe.status]}),!Fe.archived&&n.jsx(va,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Fe.id)})}),J&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:J.archived?n.jsx(i1,{className:"w-6 h-6"}):n.jsx(_u,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:J.archived?"Restore Project?":"Archive Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:J.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:J.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Fe=>Fe.id===J.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>re(null),disabled:H===J.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Ie(J.id),disabled:H===J.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H===J.id?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),J.archived?"Restoring...":"Archiving..."]}):J.archived?"Restore Project":"Archive Project"})]})]})}),X&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:X.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Fe=>Fe.id===X.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ee(null),disabled:F===X.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>he(X.id),disabled:F===X.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:F===X.id?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),W.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:W.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),K(!0)},disabled:z,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[z?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>O([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]})}),U&&W.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",W.length," Project",W.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Fe=>W.includes(Fe.id)).slice(0,5).map(Fe=>{const qe=c.find(et=>et.id===Fe.companyId);return n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(Xd,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Fe.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:qe?.name||"Standalone Project"})]})]},Fe.id)}),W.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",W.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>K(!1),disabled:z,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ce,disabled:z,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:z?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${W.length} Project${W.length>1?"s":""}`})]})]})}),f&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!se&&!ie&&(p(null),xe(!1))}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[n.jsx("button",{onClick:()=>{!se&&!ie&&(p(null),xe(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:ie,children:n.jsx(Xt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Xd,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[se?n.jsxs("div",{children:[n.jsx("input",{type:"text",value:le.title,onChange:Fe=>te(qe=>({...qe,title:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),n.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[n.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:f.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${f.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":f.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":f.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:f.status}),n.jsx("span",{className:"text-xs text-slate-400",children:c.find(Fe=>Fe.id===f.companyId)?.name||"Standalone Project"})]})]})]}),n.jsx("div",{className:"flex gap-3",children:se?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{xe(!1),te({title:f.title,description:f.description||"",companyId:f.companyId||"",status:f.status,engagement:f.engagement||"",startDate:Ve(f.startDate),endDate:Ve(f.endDate)})},disabled:ie,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:fe,disabled:ie||!le.title.trim()||!le.engagement.trim()||!le.startDate.trim()||!le.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ie?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>xe(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"}),"Edit Project"]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Fs,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),n.jsx("div",{className:"space-y-4",children:se?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:le.engagement,onChange:Fe=>te(qe=>({...qe,engagement:Fe.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:le.startDate,onChange:Fe=>{if(te(qe=>({...qe,startDate:Fe.target.value})),Fe.target.value&&le.endDate){const qe=new Date(Fe.target.value),et=new Date(le.endDate);!isNaN(qe.getTime())&&!isNaN(et.getTime())&&qe>=et}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:le.endDate,onChange:Fe=>{if(te(qe=>({...qe,endDate:Fe.target.value})),le.startDate&&Fe.target.value){const qe=new Date(le.startDate),et=new Date(Fe.target.value);!isNaN(qe.getTime())&&!isNaN(et.getTime())&&qe>=et}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{value:le.description,onChange:Fe=>te(qe=>({...qe,description:Fe.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),n.jsxs("select",{value:le.companyId,onChange:Fe=>te(qe=>({...qe,companyId:Fe.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"Standalone Project"}),c.map(Fe=>n.jsx("option",{value:Fe.id,children:Fe.name},Fe.id))]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.title})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.engagement||""})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.startDate?new Date(f.startDate).toLocaleDateString():""})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.endDate?new Date(f.endDate).toLocaleDateString():""})]})]}),f.description&&n.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:f.description})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.find(Fe=>Fe.id===f.companyId)?.name||"Standalone Project"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[E(f.id),"%"]})]})]}),f.noteImage&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ea,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),f.noteImageMimeType?.includes("pdf")?n.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:n.jsx(ea,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:f.noteImageName||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),n.jsxs("button",{onClick:()=>{const Fe=window.open();Fe&&Fe.document.write(`
                                        <html>
                                          <head>
                                            <title>${f.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${f.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[n.jsx(Kd,{className:"w-4 h-4"}),"View PDF"]})]})}):n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:f.noteImage,alt:f.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{Oe(f.noteImage||""),me(!0)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:n.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:n.jsx(Kd,{className:"w-5 h-5 text-indigo-600"})})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(nn,{className:"w-3 h-3"})," Attach"]})]}),N?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(pt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):j.length>0?n.jsx("div",{className:"space-y-3",children:j.map(Fe=>n.jsx(Yoe,{instance:Fe,onView:qe=>g(qe)},Fe.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(ci,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this project yet."})]})]})]})})]}),!se&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ms,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(Fe=>n.jsxs("button",{onClick:()=>_e(Fe),disabled:ie||f.status===Fe,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${f.status===Fe?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[f.status===Fe?n.jsx(gn,{className:"w-4 h-4"}):n.jsx(Ou,{className:"w-4 h-4"}),Fe]},Fe))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ob,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),n.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",f.id),e("tasks"),p(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",n.jsx(va,{className:"w-3 h-3"})]})]}),(()=>{const Fe=u.filter(qe=>qe.projectId===f.id);return Fe.length===0?n.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[n.jsx(s1,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):n.jsx("div",{className:"space-y-2",children:Fe.map(qe=>{const et=d.find(qt=>qt.id===qe.assigneeId),Kt=Te===qe.id;return n.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("button",{onClick:qt=>{qt.stopPropagation(),Kt||Ue(qe.id,qe.status)},disabled:Kt,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:Kt?n.jsx(pt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):qe.status==="Done"?n.jsx(gn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):n.jsx(Ou,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),n.jsx("p",{className:`text-sm font-bold ${qe.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:qe.title})]}),qe.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:qe.description}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${qe.priority==="High"?"bg-red-50 text-red-600":qe.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:qe.priority}),n.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:qe.status}),qe.dueDate&&n.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[n.jsx(ta,{className:"w-3 h-3"}),qe.dueDate]})]})]}),et&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:et.name.charAt(0)})})]})},qe.id)})})})()]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),b?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):m.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(es,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:m.map((Fe,qe)=>{const et=new Date(Fe.createdAt),qt=new Date().getTime()-et.getTime(),vr=Math.floor(qt/(1e3*60*60*24));let er="";vr===0?er="Today":vr===1?er="Yesterday":vr<7?er=`${vr} days ago`:vr<30?er=`${Math.floor(vr/7)} week${Math.floor(vr/7)>1?"s":""} ago`:er=`${Math.floor(vr/30)} month${Math.floor(vr/30)>1?"s":""} ago`;const mr=Fe.activityType==="email_linked",Ge=mr?"border-indigo-600":"border-slate-200",jt=mr?"bg-indigo-600":"bg-slate-300",br=mr?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${Ge} shadow-xl flex items-center justify-center`,children:mr?n.jsx(es,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${jt}`})}),n.jsxs("p",{className:`text-[10px] font-black ${br} uppercase mb-1 tracking-widest`,children:[mr?"Email Linked":Fe.activityType||"Activity","  ",er]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Fe.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Fe.description||Fe.title}),Fe.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Fe.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(Ts,{className:"w-3 h-3"})," View Email"]})]},Fe.id||qe)})})]})]}),n.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:n.jsxs("button",{onClick:()=>{!se&&!ie&&(p(null),xe(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:ie,children:[n.jsx(gn,{className:"w-5 h-5"})," Close"]})})]})]}),Be&&n.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>me(!1)}),n.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[n.jsx("button",{onClick:()=>me(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:n.jsx(Xt,{className:"w-6 h-6"})}),n.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:n.jsx("img",{src:$e,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:Fe=>Fe.stopPropagation()})})]})]}),n.jsx(u3,{isOpen:y,projectId:f?.id,onClose:()=>w(!1),onSuccess:()=>{w(!1)}}),v&&n.jsx(my,{instanceId:v,isOpen:!!v,onClose:()=>g(null)})]})};var Jv={exports:{}};var Joe=Jv.exports,BI;function Zoe(){return BI||(BI=1,(function(e,t){(function(a,s){e.exports=s()})(typeof self<"u"?self:Joe,function(){return(function(r){var a={};function s(i){if(a[i])return a[i].exports;var o=a[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=a,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)})([(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),d=s(46),u=s(47),f=s(48),p=s(49),m=s(12),b=s(32),v=s(33),g=s(31),y=s(1),w={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:f.default,Scroll:c.default,Block:u.default,Inline:d.default,Text:p.default,Attributor:{Attribute:m.default,Class:b.default,Style:v.default,Store:g.default}};a.default=w}),(function(r,a,s){var i=this&&this.__extends||(function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var j in w)w.hasOwnProperty(j)&&(y[j]=w[j])};return function(y,w){g(y,w);function j(){this.constructor=y}y.prototype=w===null?Object.create(w):(j.prototype=w.prototype,new j)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=(function(g){i(y,g);function y(w){var j=this;return w="[Parchment] "+w,j=g.call(this,w)||this,j.message=w,j.name=j.constructor.name,j}return y})(Error);a.ParchmentError=o;var l={},c={},d={},u={};a.DATA_KEY="__blot";var f;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(f=a.Scope||(a.Scope={}));function p(g,y){var w=b(g);if(w==null)throw new o("Unable to create "+g+" blot");var j=w,N=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:j.create(y);return new j(N,y)}a.create=p;function m(g,y){return y===void 0&&(y=!1),g==null?null:g[a.DATA_KEY]!=null?g[a.DATA_KEY].blot:y?m(g.parentNode,y):null}a.find=m;function b(g,y){y===void 0&&(y=f.ANY);var w;if(typeof g=="string")w=u[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)w=u.text;else if(typeof g=="number")g&f.LEVEL&f.BLOCK?w=u.block:g&f.LEVEL&f.INLINE&&(w=u.inline);else if(g instanceof HTMLElement){var j=(g.getAttribute("class")||"").split(/\s+/);for(var N in j)if(w=c[j[N]],w)break;w=w||d[g.tagName]}return w==null?null:y&f.LEVEL&w.scope&&y&f.TYPE&w.scope?w:null}a.query=b;function v(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];if(g.length>1)return g.map(function(N){return v(N)});var w=g[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new o("Invalid definition");if(w.blotName==="abstract")throw new o("Cannot register abstract class");if(u[w.blotName||w.attrName]=w,typeof w.keyName=="string")l[w.keyName]=w;else if(w.className!=null&&(c[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(N){return N.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var j=Array.isArray(w.tagName)?w.tagName:[w.tagName];j.forEach(function(N){(d[N]==null||w.className==null)&&(d[N]=w)})}return w}a.register=v}),(function(r,a,s){var i=s(51),o=s(11),l=s(3),c=s(20),d="\0",u=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};u.prototype.insert=function(f,p){var m={};return f.length===0?this:(m.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m))},u.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},u.prototype.retain=function(f,p){if(f<=0)return this;var m={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m)},u.prototype.push=function(f){var p=this.ops.length,m=this.ops[p-1];if(f=l(!0,{},f),typeof m=="object"){if(typeof f.delete=="number"&&typeof m.delete=="number")return this.ops[p-1]={delete:m.delete+f.delete},this;if(typeof m.delete=="number"&&f.insert!=null&&(p-=1,m=this.ops[p-1],typeof m!="object"))return this.ops.unshift(f),this;if(o(f.attributes,m.attributes)){if(typeof f.insert=="string"&&typeof m.insert=="string")return this.ops[p-1]={insert:m.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof m.retain=="number")return this.ops[p-1]={retain:m.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this},u.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},u.prototype.filter=function(f){return this.ops.filter(f)},u.prototype.forEach=function(f){this.ops.forEach(f)},u.prototype.map=function(f){return this.ops.map(f)},u.prototype.partition=function(f){var p=[],m=[];return this.forEach(function(b){var v=f(b)?p:m;v.push(b)}),[p,m]},u.prototype.reduce=function(f,p){return this.ops.reduce(f,p)},u.prototype.changeLength=function(){return this.reduce(function(f,p){return p.insert?f+c.length(p):p.delete?f-p.delete:f},0)},u.prototype.length=function(){return this.reduce(function(f,p){return f+c.length(p)},0)},u.prototype.slice=function(f,p){f=f||0,typeof p!="number"&&(p=1/0);for(var m=[],b=c.iterator(this.ops),v=0;v<p&&b.hasNext();){var g;v<f?g=b.next(f-v):(g=b.next(p-v),m.push(g)),v+=c.length(g)}return new u(m)},u.prototype.compose=function(f){var p=c.iterator(this.ops),m=c.iterator(f.ops),b=[],v=m.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var g=v.retain;p.peekType()==="insert"&&p.peekLength()<=g;)g-=p.peekLength(),b.push(p.next());v.retain-g>0&&m.next(v.retain-g)}for(var y=new u(b);p.hasNext()||m.hasNext();)if(m.peekType()==="insert")y.push(m.next());else if(p.peekType()==="delete")y.push(p.next());else{var w=Math.min(p.peekLength(),m.peekLength()),j=p.next(w),N=m.next(w);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=w:S.insert=j.insert;var A=c.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(A&&(S.attributes=A),y.push(S),!m.hasNext()&&o(y.ops[y.ops.length-1],S)){var _=new u(p.rest());return y.concat(_).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&y.push(N)}return y.chop()},u.prototype.concat=function(f){var p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p},u.prototype.diff=function(f,p){if(this.ops===f.ops)return new u;var m=[this,f].map(function(w){return w.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:d;var N=w===f?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),b=new u,v=i(m[0],m[1],p),g=c.iterator(this.ops),y=c.iterator(f.ops);return v.forEach(function(w){for(var j=w[1].length;j>0;){var N=0;switch(w[0]){case i.INSERT:N=Math.min(y.peekLength(),j),b.push(y.next(N));break;case i.DELETE:N=Math.min(j,g.peekLength()),g.next(N),b.delete(N);break;case i.EQUAL:N=Math.min(g.peekLength(),y.peekLength(),j);var S=g.next(N),A=y.next(N);o(S.insert,A.insert)?b.retain(N,c.attributes.diff(S.attributes,A.attributes)):b.push(A).delete(N);break}j-=N}}),b.chop()},u.prototype.eachLine=function(f,p){p=p||`
`;for(var m=c.iterator(this.ops),b=new u,v=0;m.hasNext();){if(m.peekType()!=="insert")return;var g=m.peek(),y=c.length(g)-m.peekLength(),w=typeof g.insert=="string"?g.insert.indexOf(p,y)-y:-1;if(w<0)b.push(m.next());else if(w>0)b.push(m.next(w));else{if(f(b,m.next(1).attributes||{},v)===!1)return;v+=1,b=new u}}b.length()>0&&f(b,{},v)},u.prototype.transform=function(f,p){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);for(var m=c.iterator(this.ops),b=c.iterator(f.ops),v=new u;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))v.retain(c.length(m.next()));else if(b.peekType()==="insert")v.push(b.next());else{var g=Math.min(m.peekLength(),b.peekLength()),y=m.next(g),w=b.next(g);if(y.delete)continue;w.delete?v.push(w):v.retain(g,c.attributes.transform(y.attributes,w.attributes,p))}return v.chop()},u.prototype.transformPosition=function(f,p){p=!!p;for(var m=c.iterator(this.ops),b=0;m.hasNext()&&b<=f;){var v=m.peekLength(),g=m.peekType();if(m.next(),g==="delete"){f-=Math.min(v,f-b);continue}else g==="insert"&&(b<f||!p)&&(f+=v);b+=v}return f},r.exports=u}),(function(r,a){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(m){return typeof Array.isArray=="function"?Array.isArray(m):i.call(m)==="[object Array]"},d=function(m){if(!m||i.call(m)!=="[object Object]")return!1;var b=s.call(m,"constructor"),v=m.constructor&&m.constructor.prototype&&s.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!b&&!v)return!1;var g;for(g in m);return typeof g>"u"||s.call(m,g)},u=function(m,b){o&&b.name==="__proto__"?o(m,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):m[b.name]=b.newValue},f=function(m,b){if(b==="__proto__")if(s.call(m,b)){if(l)return l(m,b).value}else return;return m[b]};r.exports=function p(){var m,b,v,g,y,w,j=arguments[0],N=1,S=arguments.length,A=!1;for(typeof j=="boolean"&&(A=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(m=arguments[N],m!=null)for(b in m)v=f(j,b),g=f(m,b),j!==g&&(A&&g&&(d(g)||(y=c(g)))?(y?(y=!1,w=v&&c(v)?v:[]):w=v&&d(v)?v:{},u(j,{name:b,newValue:p(A,w,g)})):typeof g<"u"&&u(j,{name:b,newValue:g}));return j}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BlockEmbed=a.bubbleFormats=void 0;var i=(function(){function T(E,F){for(var q=0;q<F.length;q++){var H=F[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(E,H.key,H)}}return function(E,F,q){return F&&T(E.prototype,F),q&&T(E,q),E}})(),o=function T(E,F,q){E===null&&(E=Function.prototype);var H=Object.getOwnPropertyDescriptor(E,F);if(H===void 0){var Q=Object.getPrototypeOf(E);return Q===null?void 0:T(Q,F,q)}else{if("value"in H)return H.value;var J=H.get;return J===void 0?void 0:J.call(q)}},l=s(3),c=j(l),d=s(2),u=j(d),f=s(0),p=j(f),m=s(16),b=j(m),v=s(6),g=j(v),y=s(7),w=j(y);function j(T){return T&&T.__esModule?T:{default:T}}function N(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function S(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function A(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var _=1,P=(function(T){A(E,T);function E(){return N(this,E),S(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return i(E,[{key:"attach",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(q,H){var Q=p.default.query(q,p.default.Scope.BLOCK_ATTRIBUTE);Q!=null&&this.attributes.attribute(Q,H)}},{key:"formatAt",value:function(q,H,Q,J){this.format(Q,J)}},{key:"insertAt",value:function(q,H,Q){if(typeof H=="string"&&H.endsWith(`
`)){var J=p.default.create(I.blotName);this.parent.insertBefore(J,q===0?this:this.next),J.insertAt(0,H.slice(0,-1))}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,q,H,Q)}}]),E})(p.default.Embed);P.scope=p.default.Scope.BLOCK_BLOT;var I=(function(T){A(E,T);function E(F){N(this,E);var q=S(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,F));return q.cache={},q}return i(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(q,H){return H.length()===0?q:q.insert(H.value(),B(H))},new u.default).insert(`
`,B(this))),this.cache.delta}},{key:"deleteAt",value:function(q,H){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,q,H),this.cache={}}},{key:"formatAt",value:function(q,H,Q,J){H<=0||(p.default.query(Q,p.default.Scope.BLOCK)?q+H===this.length()&&this.format(Q,J):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,q,Math.min(H,this.length()-q-1),Q,J),this.cache={})}},{key:"insertAt",value:function(q,H,Q){if(Q!=null)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,q,H,Q);if(H.length!==0){var J=H.split(`
`),re=J.shift();re.length>0&&(q<this.length()-1||this.children.tail==null?o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(q,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var X=this;J.reduce(function(ee,W){return X=X.split(ee,!0),X.insertAt(0,W),W.length},q+re.length)}}},{key:"insertBefore",value:function(q,H){var Q=this.children.head;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,q,H),Q instanceof b.default&&Q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+_),this.cache.length}},{key:"moveChildren",value:function(q,H){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,q,H),this.cache={}}},{key:"optimize",value:function(q){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,q),this.cache={}}},{key:"path",value:function(q){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,q,!0)}},{key:"removeChild",value:function(q){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,q),this.cache={}}},{key:"split",value:function(q){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H&&(q===0||q>=this.length()-_)){var Q=this.clone();return q===0?(this.parent.insertBefore(Q,this),this):(this.parent.insertBefore(Q,this.next),Q)}else{var J=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,q,H);return this.cache={},J}}}]),E})(p.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[g.default,p.default.Embed,w.default];function B(T){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(E=(0,c.default)(E,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?E:B(T.parent,E)}a.bubbleFormats=B,a.BlockEmbed=P,a.default=I}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.overload=a.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(ee,W){var O=[],z=!0,V=!1,U=void 0;try{for(var K=ee[Symbol.iterator](),se;!(z=(se=K.next()).done)&&(O.push(se.value),!(W&&O.length===W));z=!0);}catch(xe){V=!0,U=xe}finally{try{!z&&K.return&&K.return()}finally{if(V)throw U}}return O}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(ee,W){for(var O=0;O<W.length;O++){var z=W[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ee,z.key,z)}}return function(ee,W,O){return W&&X(ee.prototype,W),O&&X(ee,O),ee}})();s(50);var c=s(2),d=B(c),u=s(14),f=B(u),p=s(8),m=B(p),b=s(9),v=B(b),g=s(0),y=B(g),w=s(15),j=B(w),N=s(3),S=B(N),A=s(10),_=B(A),P=s(34),I=B(P);function B(X){return X&&X.__esModule?X:{default:X}}function T(X,ee,W){return ee in X?Object.defineProperty(X,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[ee]=W,X}function E(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}var F=(0,_.default)("quill"),q=(function(){l(X,null,[{key:"debug",value:function(W){W===!0&&(W="log"),_.default.level(W)}},{key:"find",value:function(W){return W.__quill||y.default.find(W)}},{key:"import",value:function(W){return this.imports[W]==null&&F.error("Cannot import "+W+". Are you sure it was registered?"),this.imports[W]}},{key:"register",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof W!="string"){var U=W.attrName||W.blotName;typeof U=="string"?this.register("formats/"+U,W,O):Object.keys(W).forEach(function(K){z.register(K,W[K],O)})}else this.imports[W]!=null&&!V&&F.warn("Overwriting "+W+" with",O),this.imports[W]=O,(W.startsWith("blots/")||W.startsWith("formats/"))&&O.blotName!=="abstract"?y.default.register(O):W.startsWith("modules")&&typeof O.register=="function"&&O.register()}}]);function X(ee){var W=this,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,X),this.options=H(ee,O),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",ee);this.options.debug&&X.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(U){U===m.default.events.TEXT_CHANGE&&W.root.classList.toggle("ql-blank",W.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(U,K){var se=W.selection.lastRange,xe=se&&se.length===0?se.index:void 0;Q.call(W,function(){return W.editor.update(null,K,xe)},U)});var V=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(V),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(X,[{key:"addContainer",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof W=="string"){var z=W;W=document.createElement("div"),W.classList.add(z)}return this.container.insertBefore(W,O),W}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(W,O,z){var V=this,U=J(W,O,z),K=o(U,4);return W=K[0],O=K[1],z=K[3],Q.call(this,function(){return V.editor.deleteText(W,O)},z,W,-1*O)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(W),this.container.classList.toggle("ql-disabled",!W)}},{key:"focus",value:function(){var W=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=W,this.scrollIntoView()}},{key:"format",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return Q.call(this,function(){var U=z.getSelection(!0),K=new d.default;if(U==null)return K;if(y.default.query(W,y.default.Scope.BLOCK))K=z.editor.formatLine(U.index,U.length,T({},W,O));else{if(U.length===0)return z.selection.format(W,O),K;K=z.editor.formatText(U.index,U.length,T({},W,O))}return z.setSelection(U,m.default.sources.SILENT),K},V)}},{key:"formatLine",value:function(W,O,z,V,U){var K=this,se=void 0,xe=J(W,O,z,V,U),ie=o(xe,4);return W=ie[0],O=ie[1],se=ie[2],U=ie[3],Q.call(this,function(){return K.editor.formatLine(W,O,se)},U,W,0)}},{key:"formatText",value:function(W,O,z,V,U){var K=this,se=void 0,xe=J(W,O,z,V,U),ie=o(xe,4);return W=ie[0],O=ie[1],se=ie[2],U=ie[3],Q.call(this,function(){return K.editor.formatText(W,O,se)},U,W,0)}},{key:"getBounds",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof W=="number"?z=this.selection.getBounds(W,O):z=this.selection.getBounds(W.index,W.length);var V=this.container.getBoundingClientRect();return{bottom:z.bottom-V.top,height:z.height,left:z.left-V.left,right:z.right-V.left,top:z.top-V.top,width:z.width}}},{key:"getContents",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,z=J(W,O),V=o(z,2);return W=V[0],O=V[1],this.editor.getContents(W,O)}},{key:"getFormat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof W=="number"?this.editor.getFormat(W,O):this.editor.getFormat(W.index,W.length)}},{key:"getIndex",value:function(W){return W.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(W){return this.scroll.leaf(W)}},{key:"getLine",value:function(W){return this.scroll.line(W)}},{key:"getLines",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof W!="number"?this.scroll.lines(W.index,W.length):this.scroll.lines(W,O)}},{key:"getModule",value:function(W){return this.theme.modules[W]}},{key:"getSelection",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return W&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,z=J(W,O),V=o(z,2);return W=V[0],O=V[1],this.editor.getText(W,O)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(W,O,z){var V=this,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return Q.call(this,function(){return V.editor.insertEmbed(W,O,z)},U,W)}},{key:"insertText",value:function(W,O,z,V,U){var K=this,se=void 0,xe=J(W,0,z,V,U),ie=o(xe,4);return W=ie[0],se=ie[2],U=ie[3],Q.call(this,function(){return K.editor.insertText(W,O,se)},U,W,O.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(W,O,z){this.clipboard.dangerouslyPasteHTML(W,O,z)}},{key:"removeFormat",value:function(W,O,z){var V=this,U=J(W,O,z),K=o(U,4);return W=K[0],O=K[1],z=K[3],Q.call(this,function(){return V.editor.removeFormat(W,O)},z,W)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(W){var O=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return Q.call(this,function(){W=new d.default(W);var V=O.getLength(),U=O.editor.deleteText(0,V),K=O.editor.applyDelta(W),se=K.ops[K.ops.length-1];se!=null&&typeof se.insert=="string"&&se.insert[se.insert.length-1]===`
`&&(O.editor.deleteText(O.getLength()-1,1),K.delete(1));var xe=U.compose(K);return xe},z)}},{key:"setSelection",value:function(W,O,z){if(W==null)this.selection.setRange(null,O||X.sources.API);else{var V=J(W,O,z),U=o(V,4);W=U[0],O=U[1],z=U[3],this.selection.setRange(new w.Range(W,O),z),z!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,z=new d.default().insert(W);return this.setContents(z,O)}},{key:"update",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,O=this.scroll.update(W);return this.selection.update(W),O}},{key:"updateContents",value:function(W){var O=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return Q.call(this,function(){return W=new d.default(W),O.editor.applyDelta(W,z)},z,!0)}}]),X})();q.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},q.events=m.default.events,q.sources=m.default.sources,q.version="1.3.7",q.imports={delta:d.default,parchment:y.default,"core/module":v.default,"core/theme":I.default};function H(X,ee){if(ee=(0,S.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},ee),!ee.theme||ee.theme===q.DEFAULTS.theme)ee.theme=I.default;else if(ee.theme=q.import("themes/"+ee.theme),ee.theme==null)throw new Error("Invalid theme "+ee.theme+". Did you register it?");var W=(0,S.default)(!0,{},ee.theme.DEFAULTS);[W,ee].forEach(function(V){V.modules=V.modules||{},Object.keys(V.modules).forEach(function(U){V.modules[U]===!0&&(V.modules[U]={})})});var O=Object.keys(W.modules).concat(Object.keys(ee.modules)),z=O.reduce(function(V,U){var K=q.import("modules/"+U);return K==null?F.error("Cannot load "+U+" module. Are you sure you registered it?"):V[U]=K.DEFAULTS||{},V},{});return ee.modules!=null&&ee.modules.toolbar&&ee.modules.toolbar.constructor!==Object&&(ee.modules.toolbar={container:ee.modules.toolbar}),ee=(0,S.default)(!0,{},q.DEFAULTS,{modules:z},W,ee),["bounds","container","scrollingContainer"].forEach(function(V){typeof ee[V]=="string"&&(ee[V]=document.querySelector(ee[V]))}),ee.modules=Object.keys(ee.modules).reduce(function(V,U){return ee.modules[U]&&(V[U]=ee.modules[U]),V},{}),ee}function Q(X,ee,W,O){if(this.options.strict&&!this.isEnabled()&&ee===m.default.sources.USER)return new d.default;var z=W==null?null:this.getSelection(),V=this.editor.delta,U=X();if(z!=null&&(W===!0&&(W=z.index),O==null?z=re(z,U,ee):O!==0&&(z=re(z,W,O,ee)),this.setSelection(z,m.default.sources.SILENT)),U.length()>0){var K,se=[m.default.events.TEXT_CHANGE,U,V,ee];if((K=this.emitter).emit.apply(K,[m.default.events.EDITOR_CHANGE].concat(se)),ee!==m.default.sources.SILENT){var xe;(xe=this.emitter).emit.apply(xe,se)}}return U}function J(X,ee,W,O,z){var V={};return typeof X.index=="number"&&typeof X.length=="number"?typeof ee!="number"?(z=O,O=W,W=ee,ee=X.length,X=X.index):(ee=X.length,X=X.index):typeof ee!="number"&&(z=O,O=W,W=ee,ee=0),(typeof W>"u"?"undefined":i(W))==="object"?(V=W,z=O):typeof W=="string"&&(O!=null?V[W]=O:z=W),z=z||m.default.sources.API,[X,ee,V,z]}function re(X,ee,W,O){if(X==null)return null;var z=void 0,V=void 0;if(ee instanceof d.default){var U=[X.index,X.index+X.length].map(function(ie){return ee.transformPosition(ie,O!==m.default.sources.USER)}),K=o(U,2);z=K[0],V=K[1]}else{var se=[X.index,X.index+X.length].map(function(ie){return ie<ee||ie===ee&&O===m.default.sources.USER?ie:W>=0?ie+W:Math.max(ee,ie+W)}),xe=o(se,2);z=xe[0],V=xe[1]}return new w.Range(z,V-z)}a.expandConfig=H,a.overload=J,a.default=q}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(y,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,j){return w&&g(y.prototype,w),j&&g(y,j),y}})(),o=function g(y,w,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(j)}},l=s(7),c=f(l),d=s(0),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function m(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function b(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var v=(function(g){b(y,g);function y(){return p(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"formatAt",value:function(j,N,S,A){if(y.compare(this.statics.blotName,S)<0&&u.default.query(S,u.default.Scope.BLOT)){var _=this.isolate(j,N);A&&_.wrap(S,A)}else o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,j,N,S,A)}},{key:"optimize",value:function(j){if(o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,j),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=y.order.indexOf(j),A=y.order.indexOf(N);return S>=0||A>=0?S-A:j===N?0:j<N?-1:1}}]),y})(u.default.Inline);v.allowedChildren=[v,u.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default.Text);a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function w(j,N){for(var S=0;S<N.length;S++){var A=N[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(j,A.key,A)}}return function(j,N,S){return N&&w(j.prototype,N),S&&w(j,S),j}})(),o=function w(j,N,S){j===null&&(j=Function.prototype);var A=Object.getOwnPropertyDescriptor(j,N);if(A===void 0){var _=Object.getPrototypeOf(j);return _===null?void 0:w(_,N,S)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(S)}},l=s(54),c=f(l),d=s(10),u=f(d);function f(w){return w&&w.__esModule?w:{default:w}}function p(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")}function m(w,j){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:w}function b(w,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);w.prototype=Object.create(j&&j.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(w,j):w.__proto__=j)}var v=(0,u.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(w){document.addEventListener(w,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var _;(_=A.__quill.emitter).handleDOM.apply(_,N)}})})});var y=(function(w){b(j,w);function j(){p(this,j);var N=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",v.error),N}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var A=arguments.length,_=Array(A>1?A-1:0),P=1;P<A;P++)_[P-1]=arguments[P];(this.listeners[S.type]||[]).forEach(function(I){var B=I.node,T=I.handler;(S.target===B||B.contains(S.target))&&T.apply(void 0,[S].concat(_))})}},{key:"listenDOM",value:function(S,A,_){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:A,handler:_})}}]),j})(c.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},a.default=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=d};o.DEFAULTS={},a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(d){if(i.indexOf(d)<=i.indexOf(o)){for(var u,f=arguments.length,p=Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];(u=console)[d].apply(u,p)}}function c(d){return i.reduce(function(u,f){return u[f]=l.bind(console,f,d),u},{})}l.level=c.level=function(d){o=d},a.default=c}),(function(r,a,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(p,m,b){return b||(b={}),p===m?!0:p instanceof Date&&m instanceof Date?p.getTime()===m.getTime():!p||!m||typeof p!="object"&&typeof m!="object"?b.strict?p===m:p==m:f(p,m,b)};function d(p){return p==null}function u(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function f(p,m,b){var v,g;if(d(p)||d(m)||p.prototype!==m.prototype)return!1;if(l(p))return l(m)?(p=i.call(p),m=i.call(m),c(p,m,b)):!1;if(u(p)){if(!u(m)||p.length!==m.length)return!1;for(v=0;v<p.length;v++)if(p[v]!==m[v])return!1;return!0}try{var y=o(p),w=o(m)}catch{return!1}if(y.length!=w.length)return!1;for(y.sort(),w.sort(),v=y.length-1;v>=0;v--)if(y[v]!=w[v])return!1;for(v=y.length-1;v>=0;v--)if(g=y[v],!c(p[g],m[g],b))return!1;return typeof p==typeof m}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c,d,u){u===void 0&&(u={}),this.attrName=c,this.keyName=d;var f=i.Scope.TYPE&i.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&i.Scope.LEVEL|f:this.scope=i.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},l.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},l.prototype.canAdd=function(c,d){var u=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Code=void 0;var i=(function(){function P(I,B){var T=[],E=!0,F=!1,q=void 0;try{for(var H=I[Symbol.iterator](),Q;!(E=(Q=H.next()).done)&&(T.push(Q.value),!(B&&T.length===B));E=!0);}catch(J){F=!0,q=J}finally{try{!E&&H.return&&H.return()}finally{if(F)throw q}}return T}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return P(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(I,B){for(var T=0;T<B.length;T++){var E=B[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,B,T){return B&&P(I.prototype,B),T&&P(I,T),I}})(),l=function P(I,B,T){I===null&&(I=Function.prototype);var E=Object.getOwnPropertyDescriptor(I,B);if(E===void 0){var F=Object.getPrototypeOf(I);return F===null?void 0:P(F,B,T)}else{if("value"in E)return E.value;var q=E.get;return q===void 0?void 0:q.call(T)}},c=s(2),d=w(c),u=s(0),f=w(u),p=s(4),m=w(p),b=s(6),v=w(b),g=s(7),y=w(g);function w(P){return P&&P.__esModule?P:{default:P}}function j(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function N(P,I){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:P}function S(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}var A=(function(P){S(I,P);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I})(v.default);A.blotName="code",A.tagName="CODE";var _=(function(P){S(I,P);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var T=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(F,q){return F.insert(q).insert(`
`,T.formats())},new d.default)}},{key:"format",value:function(T,E){if(!(T===this.statics.blotName&&E)){var F=this.descendant(y.default,this.length()-1),q=i(F,1),H=q[0];H?.deleteAt(H.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,T,E)}}},{key:"formatAt",value:function(T,E,F,q){if(E!==0&&!(f.default.query(F,f.default.Scope.BLOCK)==null||F===this.statics.blotName&&q===this.statics.formats(this.domNode))){var H=this.newlineIndex(T);if(!(H<0||H>=T+E)){var Q=this.newlineIndex(T,!0)+1,J=H-Q+1,re=this.isolate(Q,J),X=re.next;re.format(F,q),X instanceof I&&X.formatAt(0,T-Q+E-J,F,q)}}}},{key:"insertAt",value:function(T,E,F){if(F==null){var q=this.descendant(y.default,T),H=i(q,2),Q=H[0],J=H[1];Q.insertAt(J,E)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var F=this.domNode.textContent.slice(T).indexOf(`
`);return F>-1?T+F:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,T);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(T),E.moveChildren(this),E.remove())}},{key:"replace",value:function(T){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var F=f.default.find(E);F==null?E.parentNode.removeChild(E):F instanceof f.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(T){var E=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,T);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),I})(m.default);_.blotName="code-block",_.tagName="PRE",_.TAB="  ",a.Code=A,a.default=_}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(ee,W){var O=[],z=!0,V=!1,U=void 0;try{for(var K=ee[Symbol.iterator](),se;!(z=(se=K.next()).done)&&(O.push(se.value),!(W&&O.length===W));z=!0);}catch(xe){V=!0,U=xe}finally{try{!z&&K.return&&K.return()}finally{if(V)throw U}}return O}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(ee,W){for(var O=0;O<W.length;O++){var z=W[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ee,z.key,z)}}return function(ee,W,O){return W&&X(ee.prototype,W),O&&X(ee,O),ee}})(),c=s(2),d=E(c),u=s(20),f=E(u),p=s(0),m=E(p),b=s(13),v=E(b),g=s(24),y=E(g),w=s(4),j=E(w),N=s(16),S=E(N),A=s(21),_=E(A),P=s(11),I=E(P),B=s(3),T=E(B);function E(X){return X&&X.__esModule?X:{default:X}}function F(X,ee,W){return ee in X?Object.defineProperty(X,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[ee]=W,X}function q(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}var H=/^[ -~]*$/,Q=(function(){function X(ee){q(this,X),this.scroll=ee,this.delta=this.getDelta()}return l(X,[{key:"applyDelta",value:function(W){var O=this,z=!1;this.scroll.update();var V=this.scroll.length();return this.scroll.batchStart(),W=re(W),W.reduce(function(U,K){var se=K.retain||K.delete||K.insert.length||1,xe=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var ie=K.insert;ie.endsWith(`
`)&&z&&(z=!1,ie=ie.slice(0,-1)),U>=V&&!ie.endsWith(`
`)&&(z=!0),O.scroll.insertAt(U,ie);var ue=O.scroll.line(U),Be=o(ue,2),me=Be[0],$e=Be[1],Oe=(0,T.default)({},(0,w.bubbleFormats)(me));if(me instanceof j.default){var le=me.descendant(m.default.Leaf,$e),te=o(le,1),Te=te[0];Oe=(0,T.default)(Oe,(0,w.bubbleFormats)(Te))}xe=f.default.attributes.diff(Oe,xe)||{}}else if(i(K.insert)==="object"){var we=Object.keys(K.insert)[0];if(we==null)return U;O.scroll.insertAt(U,we,K.insert[we])}V+=se}return Object.keys(xe).forEach(function(Ie){O.scroll.formatAt(U,se,Ie,xe[Ie])}),U+se},0),W.reduce(function(U,K){return typeof K.delete=="number"?(O.scroll.deleteAt(U,K.delete),U):U+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(W)}},{key:"deleteText",value:function(W,O){return this.scroll.deleteAt(W,O),this.update(new d.default().retain(W).delete(O))}},{key:"formatLine",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(V).forEach(function(U){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[U])){var K=z.scroll.lines(W,Math.max(O,1)),se=O;K.forEach(function(xe){var ie=xe.length();if(!(xe instanceof v.default))xe.format(U,V[U]);else{var ue=W-xe.offset(z.scroll),Be=xe.newlineIndex(ue+se)-ue+1;xe.formatAt(ue,Be,U,V[U])}se-=ie})}}),this.scroll.optimize(),this.update(new d.default().retain(W).retain(O,(0,_.default)(V)))}},{key:"formatText",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(V).forEach(function(U){z.scroll.formatAt(W,O,U,V[U])}),this.update(new d.default().retain(W).retain(O,(0,_.default)(V)))}},{key:"getContents",value:function(W,O){return this.delta.slice(W,W+O)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(W,O){return W.concat(O.delta())},new d.default)}},{key:"getFormat",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],V=[];O===0?this.scroll.path(W).forEach(function(K){var se=o(K,1),xe=se[0];xe instanceof j.default?z.push(xe):xe instanceof m.default.Leaf&&V.push(xe)}):(z=this.scroll.lines(W,O),V=this.scroll.descendants(m.default.Leaf,W,O));var U=[z,V].map(function(K){if(K.length===0)return{};for(var se=(0,w.bubbleFormats)(K.shift());Object.keys(se).length>0;){var xe=K.shift();if(xe==null)return se;se=J((0,w.bubbleFormats)(xe),se)}return se});return T.default.apply(T.default,U)}},{key:"getText",value:function(W,O){return this.getContents(W,O).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(W,O,z){return this.scroll.insertAt(W,O,z),this.update(new d.default().retain(W).insert(F({},O,z)))}},{key:"insertText",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(W,O),Object.keys(V).forEach(function(U){z.scroll.formatAt(W,O.length,U,V[U])}),this.update(new d.default().retain(W).insert(O,(0,_.default)(V)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var W=this.scroll.children.head;return W.statics.blotName!==j.default.blotName||W.children.length>1?!1:W.children.head instanceof S.default}},{key:"removeFormat",value:function(W,O){var z=this.getText(W,O),V=this.scroll.line(W+O),U=o(V,2),K=U[0],se=U[1],xe=0,ie=new d.default;K!=null&&(K instanceof v.default?xe=K.newlineIndex(se)-se+1:xe=K.length()-se,ie=K.delta().slice(se,se+xe-1).insert(`
`));var ue=this.getContents(W,O+xe),Be=ue.diff(new d.default().insert(z).concat(ie)),me=new d.default().retain(W).concat(Be);return this.applyDelta(me)}},{key:"update",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,V=this.delta;if(O.length===1&&O[0].type==="characterData"&&O[0].target.data.match(H)&&m.default.find(O[0].target)){var U=m.default.find(O[0].target),K=(0,w.bubbleFormats)(U),se=U.offset(this.scroll),xe=O[0].oldValue.replace(y.default.CONTENTS,""),ie=new d.default().insert(xe),ue=new d.default().insert(U.value()),Be=new d.default().retain(se).concat(ie.diff(ue,z));W=Be.reduce(function(me,$e){return $e.insert?me.insert($e.insert,K):me.push($e)},new d.default),this.delta=V.compose(W)}else this.delta=this.getDelta(),(!W||!(0,I.default)(V.compose(W),this.delta))&&(W=V.diff(this.delta,z));return W}}]),X})();function J(X,ee){return Object.keys(ee).reduce(function(W,O){return X[O]==null||(ee[O]===X[O]?W[O]=ee[O]:Array.isArray(ee[O])?ee[O].indexOf(X[O])<0&&(W[O]=ee[O].concat([X[O]])):W[O]=[ee[O],X[O]]),W},{})}function re(X){return X.reduce(function(ee,W){if(W.insert===1){var O=(0,_.default)(W.attributes);return delete O.image,ee.insert({image:W.attributes.image},O)}if(W.attributes!=null&&(W.attributes.list===!0||W.attributes.bullet===!0)&&(W=(0,_.default)(W),W.attributes.list?W.attributes.list="ordered":(W.attributes.list="bullet",delete W.attributes.bullet)),typeof W.insert=="string"){var z=W.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ee.insert(z,W.attributes)}return ee.push(W)},new d.default)}a.default=Q}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Range=void 0;var i=(function(){function P(I,B){var T=[],E=!0,F=!1,q=void 0;try{for(var H=I[Symbol.iterator](),Q;!(E=(Q=H.next()).done)&&(T.push(Q.value),!(B&&T.length===B));E=!0);}catch(J){F=!0,q=J}finally{try{!E&&H.return&&H.return()}finally{if(F)throw q}}return T}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return P(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(I,B){for(var T=0;T<B.length;T++){var E=B[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,B,T){return B&&P(I.prototype,B),T&&P(I,T),I}})(),l=s(0),c=y(l),d=s(21),u=y(d),f=s(11),p=y(f),m=s(8),b=y(m),v=s(10),g=y(v);function y(P){return P&&P.__esModule?P:{default:P}}function w(P){if(Array.isArray(P)){for(var I=0,B=Array(P.length);I<P.length;I++)B[I]=P[I];return B}else return Array.from(P)}function j(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}var N=(0,g.default)("quill:selection"),S=function P(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,P),this.index=I,this.length=B},A=(function(){function P(I,B){var T=this;j(this,P),this.emitter=B,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(E,F){E===b.default.events.TEXT_CHANGE&&F.length()>0&&T.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var E=T.getNativeRange();E!=null&&E.start.node!==T.cursor.textNode&&T.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(E,F){if(F.range){var q=F.range,H=q.startNode,Q=q.startOffset,J=q.endNode,re=q.endOffset;T.setNativeRange(H,Q,J,re)}}),this.update(b.default.sources.SILENT)}return o(P,[{key:"handleComposition",value:function(){var B=this;this.root.addEventListener("compositionstart",function(){B.composing=!0}),this.root.addEventListener("compositionend",function(){if(B.composing=!1,B.cursor.parent){var T=B.cursor.restore();if(!T)return;setTimeout(function(){B.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var B=this;this.emitter.listenDOM("mousedown",document.body,function(){B.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){B.mouseDown=!1,B.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(B,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[B])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||c.default.query(B,c.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var F=c.default.find(E.start.node,!1);if(F==null)return;if(F instanceof c.default.Leaf){var q=F.split(E.start.offset);F.parent.insertBefore(this.cursor,q)}else F.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(B,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(B){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();B=Math.min(B,E-1),T=Math.min(B+T,E-1)-B;var F=void 0,q=this.scroll.leaf(B),H=i(q,2),Q=H[0],J=H[1];if(Q==null)return null;var re=Q.position(J,!0),X=i(re,2);F=X[0],J=X[1];var ee=document.createRange();if(T>0){ee.setStart(F,J);var W=this.scroll.leaf(B+T),O=i(W,2);if(Q=O[0],J=O[1],Q==null)return null;var z=Q.position(J,!0),V=i(z,2);return F=V[0],J=V[1],ee.setEnd(F,J),ee.getBoundingClientRect()}else{var U="left",K=void 0;return F instanceof Text?(J<F.data.length?(ee.setStart(F,J),ee.setEnd(F,J+1)):(ee.setStart(F,J-1),ee.setEnd(F,J),U="right"),K=ee.getBoundingClientRect()):(K=Q.domNode.getBoundingClientRect(),J>0&&(U="right")),{bottom:K.top+K.height,height:K.height,left:K[U],right:K[U],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var B=document.getSelection();if(B==null||B.rangeCount<=0)return null;var T=B.getRangeAt(0);if(T==null)return null;var E=this.normalizeNative(T);return N.info("getNativeRange",E),E}},{key:"getRange",value:function(){var B=this.getNativeRange();if(B==null)return[null,null];var T=this.normalizedToRange(B);return[T,B]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(B){var T=this,E=[[B.start.node,B.start.offset]];B.native.collapsed||E.push([B.end.node,B.end.offset]);var F=E.map(function(Q){var J=i(Q,2),re=J[0],X=J[1],ee=c.default.find(re,!0),W=ee.offset(T.scroll);return X===0?W:ee instanceof c.default.Container?W+ee.length():W+ee.index(re,X)}),q=Math.min(Math.max.apply(Math,w(F)),this.scroll.length()-1),H=Math.min.apply(Math,[q].concat(w(F)));return new S(H,q-H)}},{key:"normalizeNative",value:function(B){if(!_(this.root,B.startContainer)||!B.collapsed&&!_(this.root,B.endContainer))return null;var T={start:{node:B.startContainer,offset:B.startOffset},end:{node:B.endContainer,offset:B.endOffset},native:B};return[T.start,T.end].forEach(function(E){for(var F=E.node,q=E.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>q)F=F.childNodes[q],q=0;else if(F.childNodes.length===q)F=F.lastChild,q=F instanceof Text?F.data.length:F.childNodes.length+1;else break;E.node=F,E.offset=q}),T}},{key:"rangeToNative",value:function(B){var T=this,E=B.collapsed?[B.index]:[B.index,B.index+B.length],F=[],q=this.scroll.length();return E.forEach(function(H,Q){H=Math.min(q-1,H);var J=void 0,re=T.scroll.leaf(H),X=i(re,2),ee=X[0],W=X[1],O=ee.position(W,Q!==0),z=i(O,2);J=z[0],W=z[1],F.push(J,W)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(B){var T=this.lastRange;if(T!=null){var E=this.getBounds(T.index,T.length);if(E!=null){var F=this.scroll.length()-1,q=this.scroll.line(Math.min(T.index,F)),H=i(q,1),Q=H[0],J=Q;if(T.length>0){var re=this.scroll.line(Math.min(T.index+T.length,F)),X=i(re,1);J=X[0]}if(!(Q==null||J==null)){var ee=B.getBoundingClientRect();E.top<ee.top?B.scrollTop-=ee.top-E.top:E.bottom>ee.bottom&&(B.scrollTop+=E.bottom-ee.bottom)}}}}},{key:"setNativeRange",value:function(B,T){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",B,T,E,F),!(B!=null&&(this.root.parentNode==null||B.parentNode==null||E.parentNode==null))){var H=document.getSelection();if(H!=null)if(B!=null){this.hasFocus()||this.root.focus();var Q=(this.getNativeRange()||{}).native;if(Q==null||q||B!==Q.startContainer||T!==Q.startOffset||E!==Q.endContainer||F!==Q.endOffset){B.tagName=="BR"&&(T=[].indexOf.call(B.parentNode.childNodes,B),B=B.parentNode),E.tagName=="BR"&&(F=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var J=document.createRange();J.setStart(B,T),J.setEnd(E,F),H.removeAllRanges(),H.addRange(J)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(B){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof T=="string"&&(E=T,T=!1),N.info("setRange",B),B!=null){var F=this.rangeToNative(B);this.setNativeRange.apply(this,w(F).concat([T]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,T=this.lastRange,E=this.getRange(),F=i(E,2),q=F[0],H=F[1];if(this.lastRange=q,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(T,this.lastRange)){var Q;!this.composing&&H!=null&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[b.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(T),B];if((Q=this.emitter).emit.apply(Q,[b.default.events.EDITOR_CHANGE].concat(J)),B!==b.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,J)}}}}]),P})();function _(P,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),P.contains(I)}a.Range=S,a.default=A}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var y=0;y<g.length;y++){var w=g[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,y){return g&&b(v.prototype,g),y&&b(v,y),v}})(),o=function b(v,g,y){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(0),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(y,w){y.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,y,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);m.blotName="break",m.tagName="BR",a.default=m}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),d=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.build(),b}return p.prototype.appendChild=function(m){this.insertBefore(m)},p.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},p.prototype.build=function(){var m=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var v=u(b);m.insertBefore(v,m.children.head||void 0)}catch(g){if(g instanceof c.ParchmentError)return;throw g}})},p.prototype.deleteAt=function(m,b){if(m===0&&b===this.length())return this.remove();this.children.forEachAt(m,b,function(v,g,y){v.deleteAt(g,y)})},p.prototype.descendant=function(m,b){var v=this.children.find(b),g=v[0],y=v[1];return m.blotName==null&&m(g)||m.blotName!=null&&g instanceof m?[g,y]:g instanceof p?g.descendant(m,y):[null,-1]},p.prototype.descendants=function(m,b,v){b===void 0&&(b=0),v===void 0&&(v=Number.MAX_VALUE);var g=[],y=v;return this.children.forEachAt(b,v,function(w,j,N){(m.blotName==null&&m(w)||m.blotName!=null&&w instanceof m)&&g.push(w),w instanceof p&&(g=g.concat(w.descendants(m,j,y))),y-=N}),g},p.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),f.prototype.detach.call(this)},p.prototype.formatAt=function(m,b,v,g){this.children.forEachAt(m,b,function(y,w,j){y.formatAt(w,j,v,g)})},p.prototype.insertAt=function(m,b,v){var g=this.children.find(m),y=g[0],w=g[1];if(y)y.insertAt(w,b,v);else{var j=v==null?c.create("text",b):c.create(b,v);this.appendChild(j)}},p.prototype.insertBefore=function(m,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return m instanceof v}))throw new c.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,b)},p.prototype.length=function(){return this.children.reduce(function(m,b){return m+b.length()},0)},p.prototype.moveChildren=function(m,b){this.children.forEach(function(v){m.insertBefore(v,b)})},p.prototype.optimize=function(m){if(f.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var b=c.create(this.statics.defaultChild);this.appendChild(b),b.optimize(m)}else this.remove()},p.prototype.path=function(m,b){b===void 0&&(b=!1);var v=this.children.find(m,b),g=v[0],y=v[1],w=[[this,m]];return g instanceof p?w.concat(g.path(y,b)):(g!=null&&w.push([g,y]),w)},p.prototype.removeChild=function(m){this.children.remove(m)},p.prototype.replace=function(m){m instanceof p&&m.moveChildren(this),f.prototype.replace.call(this,m)},p.prototype.split=function(m,b){if(b===void 0&&(b=!1),!b){if(m===0)return this;if(m===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(m,this.length(),function(g,y,w){g=g.split(y,b),v.appendChild(g)}),v},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(m,b){var v=this,g=[],y=[];m.forEach(function(w){w.target===v.domNode&&w.type==="childList"&&(g.push.apply(g,w.addedNodes),y.push.apply(y,w.removedNodes))}),y.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=c.find(w);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),g.filter(function(w){return w.parentNode==v.domNode}).sort(function(w,j){return w===j?0:w.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var j=null;w.nextSibling!=null&&(j=c.find(w.nextSibling));var N=u(w);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,j||void 0))})},p})(l.default);function u(f){var p=c.find(f);if(p==null)try{p=c.create(f)}catch{p=c.create(c.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(b){p.domNode.appendChild(b)}),f.parentNode&&f.parentNode.replaceChild(p.domNode,f),p.attach()}return p}a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),d=s(1),u=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.attributes=new l.default(b.domNode),b}return p.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},p.prototype.format=function(m,b){var v=d.query(m);v instanceof o.default?this.attributes.attribute(v,b):b&&v!=null&&(m!==this.statics.blotName||this.formats()[m]!==b)&&this.replaceWith(m,b)},p.prototype.formats=function(){var m=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(m[this.statics.blotName]=b),m},p.prototype.replaceWith=function(m,b){var v=f.prototype.replaceWith.call(this,m,b);return this.attributes.copy(v),v},p.prototype.update=function(m,b){var v=this;f.prototype.update.call(this,m,b),m.some(function(g){return g.target===v.domNode&&g.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(m,b){var v=f.prototype.wrap.call(this,m,b);return v instanceof p&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},p})(c.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(30),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.value=function(f){return!0},u.prototype.index=function(f,p){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},u.prototype.position=function(f,p){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(m+=1),[this.parent.domNode,m]},u.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=s(11),o=s(3),l={attributes:{compose:function(d,u,f){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var p=o(!0,{},u);f||(p=Object.keys(p).reduce(function(b,v){return p[v]!=null&&(b[v]=p[v]),b},{}));for(var m in d)d[m]!==void 0&&u[m]===void 0&&(p[m]=d[m]);return Object.keys(p).length>0?p:void 0},diff:function(d,u){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var f=Object.keys(d).concat(Object.keys(u)).reduce(function(p,m){return i(d[m],u[m])||(p[m]=u[m]===void 0?null:u[m]),p},{});return Object.keys(f).length>0?f:void 0},transform:function(d,u,f){if(typeof d!="object")return u;if(typeof u=="object"){if(!f)return u;var p=Object.keys(u).reduce(function(m,b){return d[b]===void 0&&(m[b]=u[b]),m},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var u=this.ops[this.index];if(u){var f=this.offset,p=l.length(u);if(d>=p-f?(d=p-f,this.index+=1,this.offset=0):this.offset+=d,typeof u.delete=="number")return{delete:d};var m={};return u.attributes&&(m.attributes=u.attributes),typeof u.retain=="number"?m.retain=d:typeof u.insert=="string"?m.insert=u.insert.substr(f,d):m.insert=u.insert,m}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,u=this.index,f=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=u,[f].concat(p)}else return[]},r.exports=l}),(function(r,a){var s=(function(){function i(v,g){return g!=null&&v instanceof g}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(v,g,y,w,j){typeof g=="object"&&(y=g.depth,w=g.prototype,j=g.includeNonEnumerable,g=g.circular);var N=[],S=[],A=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof y>"u"&&(y=1/0);function _(P,I){if(P===null)return null;if(I===0)return P;var B,T;if(typeof P!="object")return P;if(i(P,o))B=new o;else if(i(P,l))B=new l;else if(i(P,c))B=new c(function(ee,W){P.then(function(O){ee(_(O,I-1))},function(O){W(_(O,I-1))})});else if(d.__isArray(P))B=[];else if(d.__isRegExp(P))B=new RegExp(P.source,b(P)),P.lastIndex&&(B.lastIndex=P.lastIndex);else if(d.__isDate(P))B=new Date(P.getTime());else{if(A&&Buffer.isBuffer(P))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(P.length):B=new Buffer(P.length),P.copy(B),B;i(P,Error)?B=Object.create(P):typeof w>"u"?(T=Object.getPrototypeOf(P),B=Object.create(T)):(B=Object.create(w),T=w)}if(g){var E=N.indexOf(P);if(E!=-1)return S[E];N.push(P),S.push(B)}i(P,o)&&P.forEach(function(ee,W){var O=_(W,I-1),z=_(ee,I-1);B.set(O,z)}),i(P,l)&&P.forEach(function(ee){var W=_(ee,I-1);B.add(W)});for(var F in P){var q;T&&(q=Object.getOwnPropertyDescriptor(T,F)),!(q&&q.set==null)&&(B[F]=_(P[F],I-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(P),F=0;F<H.length;F++){var Q=H[F],J=Object.getOwnPropertyDescriptor(P,Q);J&&!J.enumerable&&!j||(B[Q]=_(P[Q],I-1),J.enumerable||Object.defineProperty(B,Q,{enumerable:!1}))}if(j)for(var re=Object.getOwnPropertyNames(P),F=0;F<re.length;F++){var X=re[F],J=Object.getOwnPropertyDescriptor(P,X);J&&J.enumerable||(B[X]=_(P[X],I-1),Object.defineProperty(B,X,{enumerable:!1}))}return B}return _(v,y)}d.clonePrototype=function(g){if(g===null)return null;var y=function(){};return y.prototype=g,new y};function u(v){return Object.prototype.toString.call(v)}d.__objToStr=u;function f(v){return typeof v=="object"&&u(v)==="[object Date]"}d.__isDate=f;function p(v){return typeof v=="object"&&u(v)==="[object Array]"}d.__isArray=p;function m(v){return typeof v=="object"&&u(v)==="[object RegExp]"}d.__isRegExp=m;function b(v){var g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),g}return d.__getRegExpFlags=b,d})();typeof r=="object"&&r.exports&&(r.exports=s)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function B(T,E){var F=[],q=!0,H=!1,Q=void 0;try{for(var J=T[Symbol.iterator](),re;!(q=(re=J.next()).done)&&(F.push(re.value),!(E&&F.length===E));q=!0);}catch(X){H=!0,Q=X}finally{try{!q&&J.return&&J.return()}finally{if(H)throw Q}}return F}return function(T,E){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return B(T,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function B(T,E){for(var F=0;F<E.length;F++){var q=E[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(T,q.key,q)}}return function(T,E,F){return E&&B(T.prototype,E),F&&B(T,F),T}})(),l=function B(T,E,F){T===null&&(T=Function.prototype);var q=Object.getOwnPropertyDescriptor(T,E);if(q===void 0){var H=Object.getPrototypeOf(T);return H===null?void 0:B(H,E,F)}else{if("value"in q)return q.value;var Q=q.get;return Q===void 0?void 0:Q.call(F)}},c=s(0),d=N(c),u=s(8),f=N(u),p=s(4),m=N(p),b=s(16),v=N(b),g=s(13),y=N(g),w=s(25),j=N(w);function N(B){return B&&B.__esModule?B:{default:B}}function S(B,T){if(!(B instanceof T))throw new TypeError("Cannot call a class as a function")}function A(B,T){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:B}function _(B,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);B.prototype=Object.create(T&&T.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(B,T):B.__proto__=T)}function P(B){return B instanceof m.default||B instanceof p.BlockEmbed}var I=(function(B){_(T,B);function T(E,F){S(this,T);var q=A(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,E));return q.emitter=F.emitter,Array.isArray(F.whitelist)&&(q.whitelist=F.whitelist.reduce(function(H,Q){return H[Q]=!0,H},{})),q.domNode.addEventListener("DOMNodeInserted",function(){}),q.optimize(),q.enable(),q}return o(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,q){var H=this.line(F),Q=i(H,2),J=Q[0],re=Q[1],X=this.line(F+q),ee=i(X,1),W=ee[0];if(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,F,q),W!=null&&J!==W&&re>0){if(J instanceof p.BlockEmbed||W instanceof p.BlockEmbed){this.optimize();return}if(J instanceof y.default){var O=J.newlineIndex(J.length(),!0);if(O>-1&&(J=J.split(O+1),J===W)){this.optimize();return}}else if(W instanceof y.default){var z=W.newlineIndex(0);z>-1&&W.split(z+1)}var V=W.children.head instanceof v.default?null:W.children.head;J.moveChildren(W,V),J.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,q,H,Q){this.whitelist!=null&&!this.whitelist[H]||(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,F,q,H,Q),this.optimize())}},{key:"insertAt",value:function(F,q,H){if(!(H!=null&&this.whitelist!=null&&!this.whitelist[q])){if(F>=this.length())if(H==null||d.default.query(q,d.default.Scope.BLOCK)==null){var Q=d.default.create(this.statics.defaultChild);this.appendChild(Q),H==null&&q.endsWith(`
`)&&(q=q.slice(0,-1)),Q.insertAt(0,q,H)}else{var J=d.default.create(q,H);this.appendChild(J)}else l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,F,q,H);this.optimize()}}},{key:"insertBefore",value:function(F,q){if(F.statics.scope===d.default.Scope.INLINE_BLOT){var H=d.default.create(this.statics.defaultChild);H.appendChild(F),F=H}l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,F,q)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(P,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,H=function Q(J,re,X){var ee=[],W=X;return J.children.forEachAt(re,X,function(O,z,V){P(O)?ee.push(O):O instanceof d.default.Container&&(ee=ee.concat(Q(O,z,W))),W-=V}),ee};return H(this,F,q)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,F,q),F.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,F,q))}},{key:"path",value:function(F){return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var q=f.default.sources.USER;typeof F=="string"&&(q=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,q,F),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,q,F)}}}]),T})(d.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[m.default,p.BlockEmbed,j.default],a.default=I}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SHORTKEY=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(se,xe){var ie=[],ue=!0,Be=!1,me=void 0;try{for(var $e=se[Symbol.iterator](),Oe;!(ue=(Oe=$e.next()).done)&&(ie.push(Oe.value),!(xe&&ie.length===xe));ue=!0);}catch(le){Be=!0,me=le}finally{try{!ue&&$e.return&&$e.return()}finally{if(Be)throw me}}return ie}return function(se,xe){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return K(se,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function K(se,xe){for(var ie=0;ie<xe.length;ie++){var ue=xe[ie];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(se,ue.key,ue)}}return function(se,xe,ie){return xe&&K(se.prototype,xe),ie&&K(se,ie),se}})(),c=s(21),d=B(c),u=s(11),f=B(u),p=s(3),m=B(p),b=s(2),v=B(b),g=s(20),y=B(g),w=s(0),j=B(w),N=s(5),S=B(N),A=s(10),_=B(A),P=s(9),I=B(P);function B(K){return K&&K.__esModule?K:{default:K}}function T(K,se,xe){return se in K?Object.defineProperty(K,se,{value:xe,enumerable:!0,configurable:!0,writable:!0}):K[se]=xe,K}function E(K,se){if(!(K instanceof se))throw new TypeError("Cannot call a class as a function")}function F(K,se){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:K}function q(K,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);K.prototype=Object.create(se&&se.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(K,se):K.__proto__=se)}var H=(0,_.default)("quill:keyboard"),Q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=(function(K){q(se,K),l(se,null,[{key:"match",value:function(ie,ue){return ue=U(ue),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Be){return!!ue[Be]!==ie[Be]&&ue[Be]!==null})?!1:ue.key===(ie.which||ie.keyCode)}}]);function se(xe,ie){E(this,se);var ue=F(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,xe,ie));return ue.bindings={},Object.keys(ue.options.bindings).forEach(function(Be){Be==="list autofill"&&xe.scroll.whitelist!=null&&!xe.scroll.whitelist.list||ue.options.bindings[Be]&&ue.addBinding(ue.options.bindings[Be])}),ue.addBinding({key:se.keys.ENTER,shiftKey:null},O),ue.addBinding({key:se.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ue.addBinding({key:se.keys.BACKSPACE},{collapsed:!0},X),ue.addBinding({key:se.keys.DELETE},{collapsed:!0},ee)):(ue.addBinding({key:se.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},X),ue.addBinding({key:se.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ee)),ue.addBinding({key:se.keys.BACKSPACE},{collapsed:!1},W),ue.addBinding({key:se.keys.DELETE},{collapsed:!1},W),ue.addBinding({key:se.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},X),ue.listen(),ue}return l(se,[{key:"addBinding",value:function(ie){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me=U(ie);if(me==null||me.key==null)return H.warn("Attempted to add invalid keyboard binding",me);typeof ue=="function"&&(ue={handler:ue}),typeof Be=="function"&&(Be={handler:Be}),me=(0,m.default)(me,ue,Be),this.bindings[me.key]=this.bindings[me.key]||[],this.bindings[me.key].push(me)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(ue){if(!ue.defaultPrevented){var Be=ue.which||ue.keyCode,me=(ie.bindings[Be]||[]).filter(function(qe){return se.match(ue,qe)});if(me.length!==0){var $e=ie.quill.getSelection();if(!($e==null||!ie.quill.hasFocus())){var Oe=ie.quill.getLine($e.index),le=o(Oe,2),te=le[0],Te=le[1],we=ie.quill.getLeaf($e.index),Ie=o(we,2),he=Ie[0],de=Ie[1],Ce=$e.length===0?[he,de]:ie.quill.getLeaf($e.index+$e.length),Ve=o(Ce,2),ge=Ve[0],fe=Ve[1],_e=he instanceof j.default.Text?he.value().slice(0,de):"",Ue=ge instanceof j.default.Text?ge.value().slice(fe):"",ke={collapsed:$e.length===0,empty:$e.length===0&&te.length()<=1,format:ie.quill.getFormat($e),offset:Te,prefix:_e,suffix:Ue},Fe=me.some(function(qe){if(qe.collapsed!=null&&qe.collapsed!==ke.collapsed||qe.empty!=null&&qe.empty!==ke.empty||qe.offset!=null&&qe.offset!==ke.offset)return!1;if(Array.isArray(qe.format)){if(qe.format.every(function(et){return ke.format[et]==null}))return!1}else if(i(qe.format)==="object"&&!Object.keys(qe.format).every(function(et){return qe.format[et]===!0?ke.format[et]!=null:qe.format[et]===!1?ke.format[et]==null:(0,f.default)(qe.format[et],ke.format[et])}))return!1;return qe.prefix!=null&&!qe.prefix.test(ke.prefix)||qe.suffix!=null&&!qe.suffix.test(ke.suffix)?!1:qe.handler.call(ie,$e,ke)!==!0});Fe&&ue.preventDefault()}}}})}}]),se})(I.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:V("bold"),italic:V("italic"),underline:V("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(se,xe){if(xe.collapsed&&xe.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(se,xe){if(xe.collapsed&&xe.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(se,xe){xe.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):xe.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(se){this.quill.deleteText(se.index-1,1,S.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(se){this.quill.history.cutoff();var xe=new v.default().retain(se.index).delete(se.length).insert("	");this.quill.updateContents(xe,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(se.index+1,S.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(se,xe){this.quill.format("list",!1,S.default.sources.USER),xe.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(se){var xe=this.quill.getLine(se.index),ie=o(xe,2),ue=ie[0],Be=ie[1],me=(0,m.default)({},ue.formats(),{list:"checked"}),$e=new v.default().retain(se.index).insert(`
`,me).retain(ue.length()-Be-1).retain(1,{list:"unchecked"});this.quill.updateContents($e,S.default.sources.USER),this.quill.setSelection(se.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(se,xe){var ie=this.quill.getLine(se.index),ue=o(ie,2),Be=ue[0],me=ue[1],$e=new v.default().retain(se.index).insert(`
`,xe.format).retain(Be.length()-me-1).retain(1,{header:null});this.quill.updateContents($e,S.default.sources.USER),this.quill.setSelection(se.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(se,xe){var ie=xe.prefix.length,ue=this.quill.getLine(se.index),Be=o(ue,2),me=Be[0],$e=Be[1];if($e>ie)return!0;var Oe=void 0;switch(xe.prefix.trim()){case"[]":case"[ ]":Oe="unchecked";break;case"[x]":Oe="checked";break;case"-":case"*":Oe="bullet";break;default:Oe="ordered"}this.quill.insertText(se.index," ",S.default.sources.USER),this.quill.history.cutoff();var le=new v.default().retain(se.index-$e).delete(ie+1).retain(me.length()-2-$e).retain(1,{list:Oe});this.quill.updateContents(le,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(se.index-ie,S.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(se){var xe=this.quill.getLine(se.index),ie=o(xe,2),ue=ie[0],Be=ie[1],me=new v.default().retain(se.index+ue.length()-Be-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(me,S.default.sources.USER)}},"embed left":re(J.keys.LEFT,!1),"embed left shift":re(J.keys.LEFT,!0),"embed right":re(J.keys.RIGHT,!1),"embed right shift":re(J.keys.RIGHT,!0)}};function re(K,se){var xe,ie=K===J.keys.LEFT?"prefix":"suffix";return xe={key:K,shiftKey:se,altKey:null},T(xe,ie,/^$/),T(xe,"handler",function(Be){var me=Be.index;K===J.keys.RIGHT&&(me+=Be.length+1);var $e=this.quill.getLeaf(me),Oe=o($e,1),le=Oe[0];return le instanceof j.default.Embed?(K===J.keys.LEFT?se?this.quill.setSelection(Be.index-1,Be.length+1,S.default.sources.USER):this.quill.setSelection(Be.index-1,S.default.sources.USER):se?this.quill.setSelection(Be.index,Be.length+1,S.default.sources.USER):this.quill.setSelection(Be.index+Be.length+1,S.default.sources.USER),!1):!0}),xe}function X(K,se){if(!(K.index===0||this.quill.getLength()<=1)){var xe=this.quill.getLine(K.index),ie=o(xe,1),ue=ie[0],Be={};if(se.offset===0){var me=this.quill.getLine(K.index-1),$e=o(me,1),Oe=$e[0];if(Oe!=null&&Oe.length()>1){var le=ue.formats(),te=this.quill.getFormat(K.index-1,1);Be=y.default.attributes.diff(le,te)||{}}}var Te=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(se.prefix)?2:1;this.quill.deleteText(K.index-Te,Te,S.default.sources.USER),Object.keys(Be).length>0&&this.quill.formatLine(K.index-Te,Te,Be,S.default.sources.USER),this.quill.focus()}}function ee(K,se){var xe=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(se.suffix)?2:1;if(!(K.index>=this.quill.getLength()-xe)){var ie={},ue=0,Be=this.quill.getLine(K.index),me=o(Be,1),$e=me[0];if(se.offset>=$e.length()-1){var Oe=this.quill.getLine(K.index+1),le=o(Oe,1),te=le[0];if(te){var Te=$e.formats(),we=this.quill.getFormat(K.index,1);ie=y.default.attributes.diff(Te,we)||{},ue=te.length()}}this.quill.deleteText(K.index,xe,S.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(K.index+ue-1,xe,ie,S.default.sources.USER)}}function W(K){var se=this.quill.getLines(K),xe={};if(se.length>1){var ie=se[0].formats(),ue=se[se.length-1].formats();xe=y.default.attributes.diff(ue,ie)||{}}this.quill.deleteText(K,S.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(K.index,1,xe,S.default.sources.USER),this.quill.setSelection(K.index,S.default.sources.SILENT),this.quill.focus()}function O(K,se){var xe=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var ie=Object.keys(se.format).reduce(function(ue,Be){return j.default.query(Be,j.default.Scope.BLOCK)&&!Array.isArray(se.format[Be])&&(ue[Be]=se.format[Be]),ue},{});this.quill.insertText(K.index,`
`,ie,S.default.sources.USER),this.quill.setSelection(K.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(se.format).forEach(function(ue){ie[ue]==null&&(Array.isArray(se.format[ue])||ue!=="link"&&xe.quill.format(ue,se.format[ue],S.default.sources.USER))})}function z(K){return{key:J.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(xe){var ie=j.default.query("code-block"),ue=xe.index,Be=xe.length,me=this.quill.scroll.descendant(ie,ue),$e=o(me,2),Oe=$e[0],le=$e[1];if(Oe!=null){var te=this.quill.getIndex(Oe),Te=Oe.newlineIndex(le,!0)+1,we=Oe.newlineIndex(te+le+Be),Ie=Oe.domNode.textContent.slice(Te,we).split(`
`);le=0,Ie.forEach(function(he,de){K?(Oe.insertAt(Te+le,ie.TAB),le+=ie.TAB.length,de===0?ue+=ie.TAB.length:Be+=ie.TAB.length):he.startsWith(ie.TAB)&&(Oe.deleteAt(Te+le,ie.TAB.length),le-=ie.TAB.length,de===0?ue-=ie.TAB.length:Be-=ie.TAB.length),le+=he.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(ue,Be,S.default.sources.SILENT)}}}}function V(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(xe,ie){this.quill.format(K,!ie.format[K],S.default.sources.USER)}}}function U(K){if(typeof K=="string"||typeof K=="number")return U({key:K});if((typeof K>"u"?"undefined":i(K))==="object"&&(K=(0,d.default)(K,!1)),typeof K.key=="string")if(J.keys[K.key.toUpperCase()]!=null)K.key=J.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[Q]=K.shortKey,delete K.shortKey),K}a.default=J,a.SHORTKEY=Q}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(w,j){var N=[],S=!0,A=!1,_=void 0;try{for(var P=w[Symbol.iterator](),I;!(S=(I=P.next()).done)&&(N.push(I.value),!(j&&N.length===j));S=!0);}catch(B){A=!0,_=B}finally{try{!S&&P.return&&P.return()}finally{if(A)throw _}}return N}return function(w,j){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return y(w,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function y(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:y(A,j,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=(function(){function y(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&y(w.prototype,j),N&&y(w,N),w}})(),c=s(0),d=p(c),u=s(7),f=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function m(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function b(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function v(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var g=(function(y){v(w,y),l(w,null,[{key:"value",value:function(){}}]);function w(j,N){m(this,w);var S=b(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(w.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,N,S);for(var A=this,_=0;A!=null&&A.statics.scope!==d.default.Scope.BLOCK_BLOT;)_+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=w.CONTENTS.length,A.optimize(),A.formatAt(_,w.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),A=void 0,_=void 0,P=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var I=[N,S.start.offset,S.end.offset];A=I[0],_=I[1],P=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var B=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof f.default?(A=this.next.domNode,this.next.insertAt(0,B),this.textNode.data=w.CONTENTS):(this.textNode.data=B,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),_!=null){var T=[_,P].map(function(F){return Math.max(0,Math.min(A.data.length,F-1))}),E=i(T,2);return _=E[0],P=E[1],{startNode:A,startOffset:_,endNode:A,endOffset:P}}}}},{key:"update",value:function(N,S){var A=this;if(N.some(function(P){return P.type==="characterData"&&P.target===A.textNode})){var _=this.restore();_&&(S.range=_)}}},{key:"value",value:function(){return""}}]),w})(d.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=d(i),l=s(4),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(o.default.Container);m.allowedChildren=[c.default,l.BlockEmbed,m],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ColorStyle=a.ColorClass=a.ColorAttributor=void 0;var i=(function(){function g(y,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,j){return w&&g(y.prototype,w),j&&g(y,j),y}})(),o=function g(y,w,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(j)}},l=s(0),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function f(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function p(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var m=(function(g){p(y,g);function y(){return u(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(j){var N=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),y})(c.default.Attributor.Style),b=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new m("color","color",{scope:c.default.Scope.INLINE});a.ColorAttributor=m,a.ColorClass=b,a.ColorStyle=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.sanitize=a.default=void 0;var i=(function(){function v(g,y){for(var w=0;w<y.length;w++){var j=y[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,y,w){return y&&v(g.prototype,y),w&&v(g,w),g}})(),o=function v(g,y,w){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,y);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,y,w)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(w)}},l=s(6),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m=(function(v){p(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"format",value:function(w,j){if(w!==this.statics.blotName||!j)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(w){var j=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return w=this.sanitize(w),j.setAttribute("href",w),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return b(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),g})(c.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(v,g){var y=document.createElement("a");y.href=v;var w=y.href.slice(0,y.href.indexOf(":"));return g.indexOf(w)>-1}a.default=m,a.sanitize=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=(function(){function g(y,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,j){return w&&g(y.prototype,w),j&&g(y,j),y}})(),l=s(23),c=f(l),d=s(107),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var m=0;function b(g,y){g.setAttribute(y,g.getAttribute(y)!=="true")}var v=(function(){function g(y){var w=this;p(this,g),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case c.default.keys.ENTER:w.togglePicker();break;case c.default.keys.ESCAPE:w.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),w.hasAttribute("value")&&N.setAttribute("data-value",w.getAttribute("value")),w.textContent&&N.setAttribute("data-label",w.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case c.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case c.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=u.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=w.buildItem(N);j.appendChild(S),N.selected===!0&&w.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(j){w.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(w!==N&&(N?.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),g})();a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=H(i),l=s(5),c=H(l),d=s(4),u=H(d),f=s(16),p=H(f),m=s(25),b=H(m),v=s(24),g=H(v),y=s(35),w=H(y),j=s(6),N=H(j),S=s(22),A=H(S),_=s(7),P=H(_),I=s(55),B=H(I),T=s(42),E=H(T),F=s(23),q=H(F);function H(Q){return Q&&Q.__esModule?Q:{default:Q}}c.default.register({"blots/block":u.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":b.default,"blots/cursor":g.default,"blots/embed":w.default,"blots/inline":N.default,"blots/scroll":A.default,"blots/text":P.default,"modules/clipboard":B.default,"modules/history":E.default,"modules/keyboard":q.default}),o.default.register(u.default,p.default,g.default,N.default,A.default,P.default),a.default=c.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,d){var u=this.isolate(c,d);u.remove()},l.prototype.formatAt=function(c,d,u,f){var p=this.isolate(c,d);if(i.query(u,i.Scope.BLOT)!=null&&f)p.wrap(u,f);else if(i.query(u,i.Scope.ATTRIBUTE)!=null){var m=i.create(this.statics.scope);p.wrap(m),m.format(u,f)}},l.prototype.insertAt=function(c,d,u){var f=u==null?i.create("text",d):i.create(d,u),p=this.split(c);this.parent.insertBefore(f,p)},l.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var u=null;c.children.insertBefore(this,d),d!=null&&(u=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=u)&&c.domNode.insertBefore(this.domNode,u),this.parent=c,this.attach()},l.prototype.isolate=function(c,d){var u=this.split(c);return u.split(d),u},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return u.replace(this),u},l.prototype.split=function(c,d){return c===0?this:this.next},l.prototype.update=function(c,d){},l.prototype.wrap=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},l.blotName="abstract",l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),d=(function(){function u(f){this.attributes={},this.domNode=f,this.build()}return u.prototype.attribute=function(f,p){p?f.add(this.domNode,p)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},u.prototype.build=function(){var f=this;this.attributes={};var p=i.default.keys(this.domNode),m=o.default.keys(this.domNode),b=l.default.keys(this.domNode);p.concat(m).concat(b).forEach(function(v){var g=c.query(v,c.Scope.ATTRIBUTE);g instanceof i.default&&(f.attributes[g.attrName]=g)})},u.prototype.copy=function(f){var p=this;Object.keys(this.attributes).forEach(function(m){var b=p.attributes[m].value(p.domNode);f.format(m,b)})},u.prototype.move=function(f){var p=this;this.copy(f),Object.keys(this.attributes).forEach(function(m){p.attributes[m].remove(p.domNode)}),this.attributes={}},u.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(p,m){return p[m]=f.attributes[m].value(f.domNode),p},{})},u})();a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d,u){var f=d.getAttribute("class")||"";return f.split(/\s+/).filter(function(p){return p.indexOf(u+"-")===0})}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},u.prototype.add=function(f,p){return this.canAdd(f,p)?(this.remove(f),f.classList.add(this.keyName+"-"+p),!0):!1},u.prototype.remove=function(f){var p=l(f,this.keyName);p.forEach(function(m){f.classList.remove(m)}),f.classList.length===0&&f.removeAttribute("class")},u.prototype.value=function(f){var p=l(f,this.keyName)[0]||"",m=p.slice(this.keyName.length+1);return this.canAdd(f,m)?m:""},u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d){var u=d.split("-"),f=u.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return u[0]+f}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(p){var m=p.split(":");return m[0].trim()})},u.prototype.add=function(f,p){return this.canAdd(f,p)?(f.style[l(this.keyName)]=p,!0):!1},u.prototype.remove=function(f){f.style[l(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},u.prototype.value=function(f){var p=f.style[l(this.keyName)];return this.canAdd(f,p)?p:""},u})(o.default);a.default=c}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){o(this,c),this.quill=d,this.options=u,this.modules={}}return i(c,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(f){u.modules[f]==null&&u.addModule(f)})}},{key:"addModule",value:function(u){var f=this.quill.constructor.import("modules/"+u);return this.modules[u]=new f(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),c})();l.DEFAULTS={modules:{}},l.themes={default:l},a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&y(w.prototype,j),N&&y(w,N),w}})(),o=function y(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:y(A,j,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=s(0),c=f(l),d=s(7),u=f(d);function f(y){return y&&y.__esModule?y:{default:y}}function p(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function m(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function b(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var v="\uFEFF",g=(function(y){b(w,y);function w(j){p(this,w);var N=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(w,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,A=void 0,_=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof u.default){var P=this.prev.length();this.prev.insertAt(P,_),S={startNode:this.prev.domNode,startOffset:P+_.length}}else A=document.createTextNode(_),this.parent.insertBefore(c.default.create(A),this),S={startNode:A,startOffset:_.length};else N===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,_),S={startNode:this.next.domNode,startOffset:_.length}):(A=document.createTextNode(_),this.parent.insertBefore(c.default.create(A),this.next),S={startNode:A,startOffset:_.length}));return N.data=v,S}},{key:"update",value:function(N,S){var A=this;N.forEach(function(_){if(_.type==="characterData"&&(_.target===A.leftGuard||_.target===A.rightGuard)){var P=A.restore(_.target);P&&(S.range=P)}})}}]),w})(c.default.Embed);a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.AlignStyle=a.AlignClass=a.AlignAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new o.default.Attributor.Attribute("align","align",c),u=new o.default.Attributor.Class("align","ql-align",c),f=new o.default.Attributor.Style("align","text-align",c);a.AlignAttribute=d,a.AlignClass=u,a.AlignStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundStyle=a.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),u=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});a.BackgroundClass=d,a.BackgroundStyle=u}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.DirectionStyle=a.DirectionClass=a.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},d=new o.default.Attributor.Attribute("direction","dir",c),u=new o.default.Attributor.Class("direction","ql-direction",c),f=new o.default.Attributor.Style("direction","direction",c);a.DirectionAttribute=d,a.DirectionClass=u,a.DirectionStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.FontClass=a.FontStyle=void 0;var i=(function(){function y(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&y(w.prototype,j),N&&y(w,N),w}})(),o=function y(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:y(A,j,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=s(0),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function f(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function p(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var m={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new c.default.Attributor.Class("font","ql-font",m),v=(function(y){p(w,y);function w(){return u(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(N){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),w})(c.default.Attributor.Style),g=new v("font","font-family",m);a.FontStyle=g,a.FontClass=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SizeStyle=a.SizeClass=void 0;var i=s(0),o=l(i);function l(u){return u&&u.__esModule?u:{default:u}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});a.SizeClass=c,a.SizeStyle=d}),(function(r,a,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.getLastChangeIndex=a.default=void 0;var i=(function(){function j(N,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,S,A){return S&&j(N.prototype,S),A&&j(N,A),N}})(),o=s(0),l=p(o),c=s(5),d=p(c),u=s(9),f=p(u);function p(j){return j&&j.__esModule?j:{default:j}}function m(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function b(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function v(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var g=(function(j){v(N,j);function N(S,A){m(this,N);var _=b(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,A));return _.lastRecorded=0,_.ignoreChange=!1,_.clear(),_.quill.on(d.default.events.EDITOR_CHANGE,function(P,I,B,T){P!==d.default.events.TEXT_CHANGE||_.ignoreChange||(!_.options.userOnly||T===d.default.sources.USER?_.record(I,B):_.transform(I))}),_.quill.keyboard.addBinding({key:"Z",shortKey:!0},_.undo.bind(_)),_.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},_.redo.bind(_)),/Win/i.test(navigator.platform)&&_.quill.keyboard.addBinding({key:"Y",shortKey:!0},_.redo.bind(_)),_}return i(N,[{key:"change",value:function(A,_){if(this.stack[A].length!==0){var P=this.stack[A].pop();this.stack[_].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[A],d.default.sources.USER),this.ignoreChange=!1;var I=w(P[A]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,_){if(A.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(_),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var B=this.stack.undo.pop();P=P.compose(B.undo),A=B.redo.compose(A)}else this.lastRecorded=I;this.stack.undo.push({redo:A,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(_){_.undo=A.transform(_.undo,!0),_.redo=A.transform(_.redo,!0)}),this.stack.redo.forEach(function(_){_.undo=A.transform(_.undo,!0),_.redo=A.transform(_.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N})(f.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function w(j){var N=j.reduce(function(A,_){return A+=_.delete||0,A},0),S=j.length()-N;return y(j)&&(S-=1),S}a.default=g,a.getLastChangeIndex=w}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BaseTooltip=void 0;var i=(function(){function O(z,V){for(var U=0;U<V.length;U++){var K=V[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(z,K.key,K)}}return function(z,V,U){return V&&O(z.prototype,V),U&&O(z,U),z}})(),o=function O(z,V,U){z===null&&(z=Function.prototype);var K=Object.getOwnPropertyDescriptor(z,V);if(K===void 0){var se=Object.getPrototypeOf(z);return se===null?void 0:O(se,V,U)}else{if("value"in K)return K.value;var xe=K.get;return xe===void 0?void 0:xe.call(U)}},l=s(3),c=I(l),d=s(2),u=I(d),f=s(8),p=I(f),m=s(23),b=I(m),v=s(34),g=I(v),y=s(59),w=I(y),j=s(60),N=I(j),S=s(28),A=I(S),_=s(61),P=I(_);function I(O){return O&&O.__esModule?O:{default:O}}function B(O,z){if(!(O instanceof z))throw new TypeError("Cannot call a class as a function")}function T(O,z){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:O}function E(O,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);O.prototype=Object.create(z&&z.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(O,z):O.__proto__=z)}var F=[!1,"center","right","justify"],q=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],Q=["1","2","3",!1],J=["small",!1,"large","huge"],re=(function(O){E(z,O);function z(V,U){B(this,z);var K=T(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,V,U)),se=function xe(ie){if(!document.body.contains(V.root))return document.body.removeEventListener("click",xe);K.tooltip!=null&&!K.tooltip.root.contains(ie.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(ue){ue.container.contains(ie.target)||ue.close()})};return V.emitter.listenDOM("click",document.body,se),K}return i(z,[{key:"addModule",value:function(U){var K=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,U);return U==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(U,K){U.forEach(function(se){var xe=se.getAttribute("class")||"";xe.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),K[ie]!=null))if(ie==="direction")se.innerHTML=K[ie][""]+K[ie].rtl;else if(typeof K[ie]=="string")se.innerHTML=K[ie];else{var ue=se.value||"";ue!=null&&K[ie][ue]&&(se.innerHTML=K[ie][ue])}})})}},{key:"buildPickers",value:function(U,K){var se=this;this.pickers=U.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&W(ie,F),new N.default(ie,K.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var ue=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&W(ie,q,ue==="background"?"#ffffff":"#000000"),new w.default(ie,K[ue])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?W(ie,H):ie.classList.contains("ql-header")?W(ie,Q):ie.classList.contains("ql-size")&&W(ie,J)),new A.default(ie)});var xe=function(){se.pickers.forEach(function(ue){ue.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,xe)}}]),z})(g.default);re.DEFAULTS=(0,c.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,V=this.container.querySelector("input.ql-image[type=file]");V==null&&(V=document.createElement("input"),V.setAttribute("type","file"),V.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),V.classList.add("ql-image"),V.addEventListener("change",function(){if(V.files!=null&&V.files[0]!=null){var U=new FileReader;U.onload=function(K){var se=z.quill.getSelection(!0);z.quill.updateContents(new u.default().retain(se.index).delete(se.length).insert({image:K.target.result}),p.default.sources.USER),z.quill.setSelection(se.index+1,p.default.sources.SILENT),V.value=""},U.readAsDataURL(V.files[0])}}),this.container.appendChild(V)),V.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var X=(function(O){E(z,O);function z(V,U){B(this,z);var K=T(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,V,U));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return i(z,[{key:"listen",value:function(){var U=this;this.textbox.addEventListener("keydown",function(K){b.default.match(K,"enter")?(U.save(),K.preventDefault()):b.default.match(K,"escape")&&(U.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:U!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+U)||""),this.root.setAttribute("data-mode",U)}},{key:"restoreFocus",value:function(){var U=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=U}},{key:"save",value:function(){var U=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",U,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",U,p.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":U=ee(U);case"formula":{if(!U)break;var se=this.quill.getSelection(!0);if(se!=null){var xe=se.index+se.length;this.quill.insertEmbed(xe,this.root.getAttribute("data-mode"),U,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(xe+1," ",p.default.sources.USER),this.quill.setSelection(xe+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z})(P.default);function ee(O){var z=O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=O.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":O}function W(O,z){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(U){var K=document.createElement("option");U===V?K.setAttribute("selected","selected"):K.setAttribute("value",U),O.appendChild(K)})}a.BaseTooltip=X,a.default=re}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,d=this.iterator();c=d();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,d=this.head;d!=null;){if(d===l)return c;c+=d.length(),d=d.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var d,u=this.iterator();d=u();){var f=d.length();if(l<f||c&&l===f&&(d.next==null||d.next.length()!==0))return[d,l];l-=f}return[null,0]},o.prototype.forEach=function(l){for(var c,d=this.iterator();c=d();)l(c)},o.prototype.forEachAt=function(l,c,d){if(!(c<=0))for(var u=this.find(l),f=u[0],p=u[1],m,b=l-p,v=this.iterator(f);(m=v())&&b<l+c;){var g=m.length();l>b?d(m,l-b,Math.min(c,b+g-l)):d(m,0,Math.min(g,l+c-b)),b+=g}},o.prototype.map=function(l){return this.reduce(function(c,d){return c.push(l(d)),c},[])},o.prototype.reduce=function(l,c){for(var d,u=this.iterator();d=u();)c=l(c,d);return c},o})();a.default=i}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,u=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.scroll=b,b.observer=new MutationObserver(function(v){b.update(v)}),b.observer.observe(b.domNode,c),b.attach(),b}return p.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(m,b){this.update(),m===0&&b===this.length()?this.children.forEach(function(v){v.remove()}):f.prototype.deleteAt.call(this,m,b)},p.prototype.formatAt=function(m,b,v,g){this.update(),f.prototype.formatAt.call(this,m,b,v,g)},p.prototype.insertAt=function(m,b,v){this.update(),f.prototype.insertAt.call(this,m,b,v)},p.prototype.optimize=function(m,b){var v=this;m===void 0&&(m=[]),b===void 0&&(b={}),f.prototype.optimize.call(this,b);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)m.push(g.pop());for(var y=function(S,A){A===void 0&&(A=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),A&&y(S.parent))},w=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(w),S.optimize(b))},j=m,N=0;j.length>0;N+=1){if(N>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var A=l.find(S.target,!0);A!=null&&(A.domNode===S.target&&(S.type==="childList"?(y(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(_){var P=l.find(_,!1);y(P,!1),P instanceof o.default&&P.children.forEach(function(I){y(I,!1)})})):S.type==="attributes"&&y(A.prev)),y(A))}),this.children.forEach(w),j=[].slice.call(this.observer.takeRecords()),g=j.slice();g.length>0;)m.push(g.pop())}},p.prototype.update=function(m,b){var v=this;b===void 0&&(b={}),m=m||this.observer.takeRecords(),m.map(function(g){var y=l.find(g.target,!0);return y==null?null:y.domNode[l.DATA_KEY].mutations==null?(y.domNode[l.DATA_KEY].mutations=[g],y):(y.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===v||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],b)}),this.domNode[l.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,b),this.optimize(m,b)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p})(o.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){u(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1);function c(u,f){if(Object.keys(u).length!==Object.keys(f).length)return!1;for(var p in u)if(u[p]!==f[p])return!1;return!0}var d=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(p){if(p.tagName!==f.tagName)return u.formats.call(this,p)},f.prototype.format=function(p,m){var b=this;p===this.statics.blotName&&!m?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(f.blotName,!0)),b.attributes.copy(v)}),this.unwrap()):u.prototype.format.call(this,p,m)},f.prototype.formatAt=function(p,m,b,v){if(this.formats()[b]!=null||l.query(b,l.Scope.ATTRIBUTE)){var g=this.isolate(p,m);g.format(b,v)}else u.prototype.formatAt.call(this,p,m,b,v)},f.prototype.optimize=function(p){u.prototype.optimize.call(this,p);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var b=this.next;b instanceof f&&b.prev===this&&c(m,b.formats())&&(b.moveChildren(this),b.remove())},f.blotName="inline",f.scope=l.Scope.INLINE_BLOT,f.tagName="SPAN",f})(o.default);a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.formats=function(f){var p=l.query(u.blotName).tagName;if(f.tagName!==p)return d.formats.call(this,f)},u.prototype.format=function(f,p){l.query(f,l.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!p?this.replaceWith(u.blotName):d.prototype.format.call(this,f,p))},u.prototype.formatAt=function(f,p,m,b){l.query(m,l.Scope.BLOCK)!=null?this.format(m,b):d.prototype.formatAt.call(this,f,p,m,b)},u.prototype.insertAt=function(f,p,m){if(m==null||l.query(p,l.Scope.INLINE)!=null)d.prototype.insertAt.call(this,f,p,m);else{var b=this.split(f),v=l.create(p,m);b.parent.insertBefore(v,b)}},u.prototype.update=function(f,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,f,p)},u.blotName="block",u.scope=l.Scope.BLOCK_BLOT,u.tagName="P",u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)u.hasOwnProperty(f)&&(d[f]=u[f])};return function(d,u){c(d,u);function f(){this.constructor=d}d.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=(function(c){i(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(u){},d.prototype.format=function(u,f){c.prototype.formatAt.call(this,0,this.length(),u,f)},d.prototype.formatAt=function(u,f,p,m){u===0&&f===this.length()?this.format(p,m):c.prototype.formatAt.call(this,u,f,p,m)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d})(o.default);a.default=l}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=s(1),c=(function(d){i(u,d);function u(f){var p=d.call(this,f)||this;return p.text=p.statics.value(p.domNode),p}return u.create=function(f){return document.createTextNode(f)},u.value=function(f){var p=f.data;return p.normalize&&(p=p.normalize()),p},u.prototype.deleteAt=function(f,p){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+p)},u.prototype.index=function(f,p){return this.domNode===f?p:-1},u.prototype.insertAt=function(f,p,m){m==null?(this.text=this.text.slice(0,f)+p+this.text.slice(f),this.domNode.data=this.text):d.prototype.insertAt.call(this,f,p,m)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(f){d.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(f,p){return[this.domNode,f]},u.prototype.split=function(f,p){if(p===void 0&&(p=!1),!p){if(f===0)return this;if(f===this.length())return this.next}var m=l.create(this.domNode.splitText(f));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},u.prototype.update=function(f,p){var m=this;f.some(function(b){return b.type==="characterData"&&b.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=l.length;var u=d.indexOf(l,c);return u!==-1&&u===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),u=d.length>>>0,f=arguments[1],p,m=0;m<u;m++)if(p=d[m],c.call(f,p,m,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,a){var s=-1,i=1,o=0;function l(N,S,A){if(N==S)return N?[[o,N]]:[];(A<0||N.length<A)&&(A=null);var _=f(N,S),P=N.substring(0,_);N=N.substring(_),S=S.substring(_),_=p(N,S);var I=N.substring(N.length-_);N=N.substring(0,N.length-_),S=S.substring(0,S.length-_);var B=c(N,S);return P&&B.unshift([o,P]),I&&B.push([o,I]),b(B),A!=null&&(B=y(B,A)),B=w(B),B}function c(N,S){var A;if(!N)return[[i,S]];if(!S)return[[s,N]];var _=N.length>S.length?N:S,P=N.length>S.length?S:N,I=_.indexOf(P);if(I!=-1)return A=[[i,_.substring(0,I)],[o,P],[i,_.substring(I+P.length)]],N.length>S.length&&(A[0][0]=A[2][0]=s),A;if(P.length==1)return[[s,N],[i,S]];var B=m(N,S);if(B){var T=B[0],E=B[1],F=B[2],q=B[3],H=B[4],Q=l(T,F),J=l(E,q);return Q.concat([[o,H]],J)}return d(N,S)}function d(N,S){for(var A=N.length,_=S.length,P=Math.ceil((A+_)/2),I=P,B=2*P,T=new Array(B),E=new Array(B),F=0;F<B;F++)T[F]=-1,E[F]=-1;T[I+1]=0,E[I+1]=0;for(var q=A-_,H=q%2!=0,Q=0,J=0,re=0,X=0,ee=0;ee<P;ee++){for(var W=-ee+Q;W<=ee-J;W+=2){var O=I+W,z;W==-ee||W!=ee&&T[O-1]<T[O+1]?z=T[O+1]:z=T[O-1]+1;for(var V=z-W;z<A&&V<_&&N.charAt(z)==S.charAt(V);)z++,V++;if(T[O]=z,z>A)J+=2;else if(V>_)Q+=2;else if(H){var U=I+q-W;if(U>=0&&U<B&&E[U]!=-1){var K=A-E[U];if(z>=K)return u(N,S,z,V)}}}for(var se=-ee+re;se<=ee-X;se+=2){var U=I+se,K;se==-ee||se!=ee&&E[U-1]<E[U+1]?K=E[U+1]:K=E[U-1]+1;for(var xe=K-se;K<A&&xe<_&&N.charAt(A-K-1)==S.charAt(_-xe-1);)K++,xe++;if(E[U]=K,K>A)X+=2;else if(xe>_)re+=2;else if(!H){var O=I+q-se;if(O>=0&&O<B&&T[O]!=-1){var z=T[O],V=I+z-O;if(K=A-K,z>=K)return u(N,S,z,V)}}}}return[[s,N],[i,S]]}function u(N,S,A,_){var P=N.substring(0,A),I=S.substring(0,_),B=N.substring(A),T=S.substring(_),E=l(P,I),F=l(B,T);return E.concat(F)}function f(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var A=0,_=Math.min(N.length,S.length),P=_,I=0;A<P;)N.substring(I,P)==S.substring(I,P)?(A=P,I=A):_=P,P=Math.floor((_-A)/2+A);return P}function p(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var A=0,_=Math.min(N.length,S.length),P=_,I=0;A<P;)N.substring(N.length-P,N.length-I)==S.substring(S.length-P,S.length-I)?(A=P,I=A):_=P,P=Math.floor((_-A)/2+A);return P}function m(N,S){var A=N.length>S.length?N:S,_=N.length>S.length?S:N;if(A.length<4||_.length*2<A.length)return null;function P(J,re,X){for(var ee=J.substring(X,X+Math.floor(J.length/4)),W=-1,O="",z,V,U,K;(W=re.indexOf(ee,W+1))!=-1;){var se=f(J.substring(X),re.substring(W)),xe=p(J.substring(0,X),re.substring(0,W));O.length<xe+se&&(O=re.substring(W-xe,W)+re.substring(W,W+se),z=J.substring(0,X-xe),V=J.substring(X+se),U=re.substring(0,W-xe),K=re.substring(W+se))}return O.length*2>=J.length?[z,V,U,K,O]:null}var I=P(A,_,Math.ceil(A.length/4)),B=P(A,_,Math.ceil(A.length/2)),T;if(!I&&!B)return null;B?I?T=I[4].length>B[4].length?I:B:T=B:T=I;var E,F,q,H;N.length>S.length?(E=T[0],F=T[1],q=T[2],H=T[3]):(q=T[0],H=T[1],E=T[2],F=T[3]);var Q=T[4];return[E,F,q,H,Q]}function b(N){N.push([o,""]);for(var S=0,A=0,_=0,P="",I="",B;S<N.length;)switch(N[S][0]){case i:_++,I+=N[S][1],S++;break;case s:A++,P+=N[S][1],S++;break;case o:A+_>1?(A!==0&&_!==0&&(B=f(I,P),B!==0&&(S-A-_>0&&N[S-A-_-1][0]==o?N[S-A-_-1][1]+=I.substring(0,B):(N.splice(0,0,[o,I.substring(0,B)]),S++),I=I.substring(B),P=P.substring(B)),B=p(I,P),B!==0&&(N[S][1]=I.substring(I.length-B)+N[S][1],I=I.substring(0,I.length-B),P=P.substring(0,P.length-B))),A===0?N.splice(S-_,A+_,[i,I]):_===0?N.splice(S-A,A+_,[s,P]):N.splice(S-A-_,A+_,[s,P],[i,I]),S=S-A-_+(A?1:0)+(_?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,_=0,A=0,P="",I="";break}N[N.length-1][1]===""&&N.pop();var T=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),T=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),T=!0)),S++;T&&b(N)}var v=l;v.INSERT=i,v.DELETE=s,v.EQUAL=o,r.exports=v;function g(N,S){if(S===0)return[o,N];for(var A=0,_=0;_<N.length;_++){var P=N[_];if(P[0]===s||P[0]===o){var I=A+P[1].length;if(S===I)return[_+1,N];if(S<I){N=N.slice();var B=S-A,T=[P[0],P[1].slice(0,B)],E=[P[0],P[1].slice(B)];return N.splice(_,1,T,E),[_+1,N]}else A=I}}throw new Error("cursor_pos is out of bounds!")}function y(N,S){var A=g(N,S),_=A[1],P=A[0],I=_[P],B=_[P+1];if(I==null)return N;if(I[0]!==o)return N;if(B!=null&&I[1]+B[1]===B[1]+I[1])return _.splice(P,2,B,I),j(_,P,2);if(B!=null&&B[1].indexOf(I[1])===0){_.splice(P,2,[B[0],I[1]],[0,I[1]]);var T=B[1].slice(I[1].length);return T.length>0&&_.splice(P+2,0,[B[0],T]),j(_,P,3)}else return N}function w(N){for(var S=!1,A=function(B){return B.charCodeAt(0)>=56320&&B.charCodeAt(0)<=57343},_=function(B){return B.charCodeAt(B.length-1)>=55296&&B.charCodeAt(B.length-1)<=56319},P=2;P<N.length;P+=1)N[P-2][0]===o&&_(N[P-2][1])&&N[P-1][0]===s&&A(N[P-1][1])&&N[P][0]===i&&A(N[P][1])&&(S=!0,N[P-1][1]=N[P-2][1].slice(-1)+N[P-1][1],N[P][1]=N[P-2][1].slice(-1)+N[P][1],N[P-2][1]=N[P-2][1].slice(0,-1));if(!S)return N;for(var I=[],P=0;P<N.length;P+=1)N[P][1].length>0&&I.push(N[P]);return I}function j(N,S,A){for(var _=S+A-1;_>=0&&_>=S-1;_--)if(_+1<N.length){var P=N[_],I=N[_+1];P[0]===I[1]&&N.splice(_,2,[P[0],P[1]+I[1]])}return N}}),(function(r,a){a=r.exports=typeof Object.keys=="function"?Object.keys:s,a.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,a){var s=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";a=r.exports=s?i:o,a.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}a.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,a){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)s.call(f,p)&&u.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u,f){var p=i?i+u:u,m=this._events[p];if(f)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var b=0,v=m.length,g=new Array(v);b<v;b++)g[b]=m[b].fn;return g},c.prototype.emit=function(u,f,p,m,b,v){var g=i?i+u:u;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,j,N;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,p),!0;case 4:return y.fn.call(y.context,f,p,m),!0;case 5:return y.fn.call(y.context,f,p,m,b),!0;case 6:return y.fn.call(y.context,f,p,m,b,v),!0}for(N=1,j=new Array(w-1);N<w;N++)j[N-1]=arguments[N];y.fn.apply(y.context,j)}else{var S=y.length,A;for(N=0;N<S;N++)switch(y[N].once&&this.removeListener(u,y[N].fn,void 0,!0),w){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,f);break;case 3:y[N].fn.call(y[N].context,f,p);break;case 4:y[N].fn.call(y[N].context,f,p,m);break;default:if(!j)for(A=1,j=new Array(w-1);A<w;A++)j[A-1]=arguments[A];y[N].fn.apply(y[N].context,j)}}return!0},c.prototype.on=function(u,f,p){var m=new l(f,p||this),b=i?i+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],m]:this._events[b].push(m):(this._events[b]=m,this._eventsCount++),this},c.prototype.once=function(u,f,p){var m=new l(f,p||this,!0),b=i?i+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],m]:this._events[b].push(m):(this._events[b]=m,this._eventsCount++),this},c.prototype.removeListener=function(u,f,p,m){var b=i?i+u:u;if(!this._events[b])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[b],this;var v=this._events[b];if(v.fn)v.fn===f&&(!m||v.once)&&(!p||v.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[b]);else{for(var g=0,y=[],w=v.length;g<w;g++)(v[g].fn!==f||m&&!v[g].once||p&&v[g].context!==p)&&y.push(v[g]);y.length?this._events[b]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new o:delete this._events[b]}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=i?i+u:u,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.matchText=a.matchSpacing=a.matchNewline=a.matchBlot=a.matchAttributor=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},o=(function(){function we(Ie,he){var de=[],Ce=!0,Ve=!1,ge=void 0;try{for(var fe=Ie[Symbol.iterator](),_e;!(Ce=(_e=fe.next()).done)&&(de.push(_e.value),!(he&&de.length===he));Ce=!0);}catch(Ue){Ve=!0,ge=Ue}finally{try{!Ce&&fe.return&&fe.return()}finally{if(Ve)throw ge}}return de}return function(Ie,he){if(Array.isArray(Ie))return Ie;if(Symbol.iterator in Object(Ie))return we(Ie,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function we(Ie,he){for(var de=0;de<he.length;de++){var Ce=he[de];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(Ie,Ce.key,Ce)}}return function(Ie,he,de){return he&&we(Ie.prototype,he),de&&we(Ie,de),Ie}})(),c=s(3),d=E(c),u=s(2),f=E(u),p=s(0),m=E(p),b=s(5),v=E(b),g=s(10),y=E(g),w=s(9),j=E(w),N=s(36),S=s(37),A=s(13),_=E(A),P=s(26),I=s(38),B=s(39),T=s(40);function E(we){return we&&we.__esModule?we:{default:we}}function F(we,Ie,he){return Ie in we?Object.defineProperty(we,Ie,{value:he,enumerable:!0,configurable:!0,writable:!0}):we[Ie]=he,we}function q(we,Ie){if(!(we instanceof Ie))throw new TypeError("Cannot call a class as a function")}function H(we,Ie){if(!we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:we}function Q(we,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);we.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf(we,Ie):we.__proto__=Ie)}var J=(0,y.default)("quill:clipboard"),re="__ql-matcher",X=[[Node.TEXT_NODE,Te],[Node.TEXT_NODE,Oe],["br",Be],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,ue],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,te],["li",$e],["b",xe.bind(xe,"bold")],["i",xe.bind(xe,"italic")],["style",me]],ee=[N.AlignAttribute,I.DirectionAttribute].reduce(function(we,Ie){return we[Ie.keyName]=Ie,we},{}),W=[N.AlignStyle,S.BackgroundStyle,P.ColorStyle,I.DirectionStyle,B.FontStyle,T.SizeStyle].reduce(function(we,Ie){return we[Ie.keyName]=Ie,we},{}),O=(function(we){Q(Ie,we);function Ie(he,de){q(this,Ie);var Ce=H(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,he,de));return Ce.quill.root.addEventListener("paste",Ce.onPaste.bind(Ce)),Ce.container=Ce.quill.addContainer("ql-clipboard"),Ce.container.setAttribute("contenteditable",!0),Ce.container.setAttribute("tabindex",-1),Ce.matchers=[],X.concat(Ce.options.matchers).forEach(function(Ve){var ge=o(Ve,2),fe=ge[0],_e=ge[1];!de.matchVisual&&_e===le||Ce.addMatcher(fe,_e)}),Ce}return l(Ie,[{key:"addMatcher",value:function(de,Ce){this.matchers.push([de,Ce])}},{key:"convert",value:function(de){if(typeof de=="string")return this.container.innerHTML=de.replace(/\>\r?\n +\</g,"><"),this.convert();var Ce=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ce[_.default.blotName]){var Ve=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Ve,F({},_.default.blotName,Ce[_.default.blotName]))}var ge=this.prepareMatching(),fe=o(ge,2),_e=fe[0],Ue=fe[1],ke=se(this.container,_e,Ue);return U(ke,`
`)&&ke.ops[ke.ops.length-1].attributes==null&&(ke=ke.compose(new f.default().retain(ke.length()-1).delete(1))),J.log("convert",this.container.innerHTML,ke),this.container.innerHTML="",ke}},{key:"dangerouslyPasteHTML",value:function(de,Ce){var Ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof de=="string")this.quill.setContents(this.convert(de),Ce),this.quill.setSelection(0,v.default.sources.SILENT);else{var ge=this.convert(Ce);this.quill.updateContents(new f.default().retain(de).concat(ge),Ve),this.quill.setSelection(de+ge.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(de){var Ce=this;if(!(de.defaultPrevented||!this.quill.isEnabled())){var Ve=this.quill.getSelection(),ge=new f.default().retain(Ve.index),fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ge=ge.concat(Ce.convert()).delete(Ve.length),Ce.quill.updateContents(ge,v.default.sources.USER),Ce.quill.setSelection(ge.length()-Ve.length,v.default.sources.SILENT),Ce.quill.scrollingContainer.scrollTop=fe,Ce.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var de=this,Ce=[],Ve=[];return this.matchers.forEach(function(ge){var fe=o(ge,2),_e=fe[0],Ue=fe[1];switch(_e){case Node.TEXT_NODE:Ve.push(Ue);break;case Node.ELEMENT_NODE:Ce.push(Ue);break;default:[].forEach.call(de.container.querySelectorAll(_e),function(ke){ke[re]=ke[re]||[],ke[re].push(Ue)});break}}),[Ce,Ve]}}]),Ie})(j.default);O.DEFAULTS={matchers:[],matchVisual:!0};function z(we,Ie,he){return(typeof Ie>"u"?"undefined":i(Ie))==="object"?Object.keys(Ie).reduce(function(de,Ce){return z(de,Ce,Ie[Ce])},we):we.reduce(function(de,Ce){return Ce.attributes&&Ce.attributes[Ie]?de.push(Ce):de.insert(Ce.insert,(0,d.default)({},F({},Ie,he),Ce.attributes))},new f.default)}function V(we){if(we.nodeType!==Node.ELEMENT_NODE)return{};var Ie="__ql-computed-style";return we[Ie]||(we[Ie]=window.getComputedStyle(we))}function U(we,Ie){for(var he="",de=we.ops.length-1;de>=0&&he.length<Ie.length;--de){var Ce=we.ops[de];if(typeof Ce.insert!="string")break;he=Ce.insert+he}return he.slice(-1*Ie.length)===Ie}function K(we){if(we.childNodes.length===0)return!1;var Ie=V(we);return["block","list-item"].indexOf(Ie.display)>-1}function se(we,Ie,he){return we.nodeType===we.TEXT_NODE?he.reduce(function(de,Ce){return Ce(we,de)},new f.default):we.nodeType===we.ELEMENT_NODE?[].reduce.call(we.childNodes||[],function(de,Ce){var Ve=se(Ce,Ie,he);return Ce.nodeType===we.ELEMENT_NODE&&(Ve=Ie.reduce(function(ge,fe){return fe(Ce,ge)},Ve),Ve=(Ce[re]||[]).reduce(function(ge,fe){return fe(Ce,ge)},Ve)),de.concat(Ve)},new f.default):new f.default}function xe(we,Ie,he){return z(he,we,!0)}function ie(we,Ie){var he=m.default.Attributor.Attribute.keys(we),de=m.default.Attributor.Class.keys(we),Ce=m.default.Attributor.Style.keys(we),Ve={};return he.concat(de).concat(Ce).forEach(function(ge){var fe=m.default.query(ge,m.default.Scope.ATTRIBUTE);fe!=null&&(Ve[fe.attrName]=fe.value(we),Ve[fe.attrName])||(fe=ee[ge],fe!=null&&(fe.attrName===ge||fe.keyName===ge)&&(Ve[fe.attrName]=fe.value(we)||void 0),fe=W[ge],fe!=null&&(fe.attrName===ge||fe.keyName===ge)&&(fe=W[ge],Ve[fe.attrName]=fe.value(we)||void 0))}),Object.keys(Ve).length>0&&(Ie=z(Ie,Ve)),Ie}function ue(we,Ie){var he=m.default.query(we);if(he==null)return Ie;if(he.prototype instanceof m.default.Embed){var de={},Ce=he.value(we);Ce!=null&&(de[he.blotName]=Ce,Ie=new f.default().insert(de,he.formats(we)))}else typeof he.formats=="function"&&(Ie=z(Ie,he.blotName,he.formats(we)));return Ie}function Be(we,Ie){return U(Ie,`
`)||Ie.insert(`
`),Ie}function me(){return new f.default}function $e(we,Ie){var he=m.default.query(we);if(he==null||he.blotName!=="list-item"||!U(Ie,`
`))return Ie;for(var de=-1,Ce=we.parentNode;!Ce.classList.contains("ql-clipboard");)(m.default.query(Ce)||{}).blotName==="list"&&(de+=1),Ce=Ce.parentNode;return de<=0?Ie:Ie.compose(new f.default().retain(Ie.length()-1).retain(1,{indent:de}))}function Oe(we,Ie){return U(Ie,`
`)||(K(we)||Ie.length()>0&&we.nextSibling&&K(we.nextSibling))&&Ie.insert(`
`),Ie}function le(we,Ie){if(K(we)&&we.nextElementSibling!=null&&!U(Ie,`

`)){var he=we.offsetHeight+parseFloat(V(we).marginTop)+parseFloat(V(we).marginBottom);we.nextElementSibling.offsetTop>we.offsetTop+he*1.5&&Ie.insert(`
`)}return Ie}function te(we,Ie){var he={},de=we.style||{};return de.fontStyle&&V(we).fontStyle==="italic"&&(he.italic=!0),de.fontWeight&&(V(we).fontWeight.startsWith("bold")||parseInt(V(we).fontWeight)>=700)&&(he.bold=!0),Object.keys(he).length>0&&(Ie=z(Ie,he)),parseFloat(de.textIndent||0)>0&&(Ie=new f.default().insert("	").concat(Ie)),Ie}function Te(we,Ie){var he=we.data;if(we.parentNode.tagName==="O:P")return Ie.insert(he.trim());if(he.trim().length===0&&we.parentNode.classList.contains("ql-clipboard"))return Ie;if(!V(we.parentNode).whiteSpace.startsWith("pre")){var de=function(Ve,ge){return ge=ge.replace(/[^\u00a0]/g,""),ge.length<1&&Ve?" ":ge};he=he.replace(/\r\n/g," ").replace(/\n/g," "),he=he.replace(/\s\s+/g,de.bind(de,!0)),(we.previousSibling==null&&K(we.parentNode)||we.previousSibling!=null&&K(we.previousSibling))&&(he=he.replace(/^\s+/,de.bind(de,!1))),(we.nextSibling==null&&K(we.parentNode)||we.nextSibling!=null&&K(we.nextSibling))&&(he=he.replace(/\s+$/,de.bind(de,!1)))}return Ie.insert(he)}a.default=O,a.matchAttributor=ie,a.matchBlot=ue,a.matchNewline=Oe,a.matchSpacing=le,a.matchText=Te}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var y=0;y<g.length;y++){var w=g[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,y){return g&&b(v.prototype,g),y&&b(v,y),v}})(),o=function b(v,g,y){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(6),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);m.blotName="bold",m.tagName=["STRONG","B"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.addControls=a.default=void 0;var i=(function(){function T(E,F){var q=[],H=!0,Q=!1,J=void 0;try{for(var re=E[Symbol.iterator](),X;!(H=(X=re.next()).done)&&(q.push(X.value),!(F&&q.length===F));H=!0);}catch(ee){Q=!0,J=ee}finally{try{!H&&re.return&&re.return()}finally{if(Q)throw J}}return q}return function(E,F){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return T(E,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(E,F){for(var q=0;q<F.length;q++){var H=F[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(E,H.key,H)}}return function(E,F,q){return F&&T(E.prototype,F),q&&T(E,q),E}})(),l=s(2),c=y(l),d=s(0),u=y(d),f=s(5),p=y(f),m=s(10),b=y(m),v=s(9),g=y(v);function y(T){return T&&T.__esModule?T:{default:T}}function w(T,E,F){return E in T?Object.defineProperty(T,E,{value:F,enumerable:!0,configurable:!0,writable:!0}):T[E]=F,T}function j(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function N(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function S(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var A=(0,b.default)("quill:toolbar"),_=(function(T){S(E,T);function E(F,q){j(this,E);var H=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,F,q));if(Array.isArray(H.options.container)){var Q=document.createElement("div");I(Q,H.options.container),F.container.parentNode.insertBefore(Q,F.container),H.container=Q}else typeof H.options.container=="string"?H.container=document.querySelector(H.options.container):H.container=H.options.container;if(!(H.container instanceof HTMLElement)){var J;return J=A.error("Container required for toolbar",H.options),N(H,J)}return H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(re){H.addHandler(re,H.options.handlers[re])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(re){H.attach(re)}),H.quill.on(p.default.events.EDITOR_CHANGE,function(re,X){re===p.default.events.SELECTION_CHANGE&&H.update(X)}),H.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var re=H.quill.selection.getRange(),X=i(re,1),ee=X[0];H.update(ee)}),H}return o(E,[{key:"addHandler",value:function(q,H){this.handlers[q]=H}},{key:"attach",value:function(q){var H=this,Q=[].find.call(q.classList,function(re){return re.indexOf("ql-")===0});if(Q){if(Q=Q.slice(3),q.tagName==="BUTTON"&&q.setAttribute("type","button"),this.handlers[Q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Q]==null){A.warn("ignoring attaching to disabled format",Q,q);return}if(u.default.query(Q)==null){A.warn("ignoring attaching to nonexistent format",Q,q);return}}var J=q.tagName==="SELECT"?"change":"click";q.addEventListener(J,function(re){var X=void 0;if(q.tagName==="SELECT"){if(q.selectedIndex<0)return;var ee=q.options[q.selectedIndex];ee.hasAttribute("selected")?X=!1:X=ee.value||!1}else q.classList.contains("ql-active")?X=!1:X=q.value||!q.hasAttribute("value"),re.preventDefault();H.quill.focus();var W=H.quill.selection.getRange(),O=i(W,1),z=O[0];if(H.handlers[Q]!=null)H.handlers[Q].call(H,X);else if(u.default.query(Q).prototype instanceof u.default.Embed){if(X=prompt("Enter "+Q),!X)return;H.quill.updateContents(new c.default().retain(z.index).delete(z.length).insert(w({},Q,X)),p.default.sources.USER)}else H.quill.format(Q,X,p.default.sources.USER);H.update(z)}),this.controls.push([Q,q])}}},{key:"update",value:function(q){var H=q==null?{}:this.quill.getFormat(q);this.controls.forEach(function(Q){var J=i(Q,2),re=J[0],X=J[1];if(X.tagName==="SELECT"){var ee=void 0;if(q==null)ee=null;else if(H[re]==null)ee=X.querySelector("option[selected]");else if(!Array.isArray(H[re])){var W=H[re];typeof W=="string"&&(W=W.replace(/\"/g,'\\"')),ee=X.querySelector('option[value="'+W+'"]')}ee==null?(X.value="",X.selectedIndex=-1):ee.selected=!0}else if(q==null)X.classList.remove("ql-active");else if(X.hasAttribute("value")){var O=H[re]===X.getAttribute("value")||H[re]!=null&&H[re].toString()===X.getAttribute("value")||H[re]==null&&!X.getAttribute("value");X.classList.toggle("ql-active",O)}else X.classList.toggle("ql-active",H[re]!=null)})}}]),E})(g.default);_.DEFAULTS={};function P(T,E,F){var q=document.createElement("button");q.setAttribute("type","button"),q.classList.add("ql-"+E),F!=null&&(q.value=F),T.appendChild(q)}function I(T,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(F){var q=document.createElement("span");q.classList.add("ql-formats"),F.forEach(function(H){if(typeof H=="string")P(q,H);else{var Q=Object.keys(H)[0],J=H[Q];Array.isArray(J)?B(q,Q,J):P(q,Q,J)}}),T.appendChild(q)})}function B(T,E,F){var q=document.createElement("select");q.classList.add("ql-"+E),F.forEach(function(H){var Q=document.createElement("option");H!==!1?Q.setAttribute("value",H):Q.setAttribute("selected","selected"),q.appendChild(Q)}),T.appendChild(q)}_.DEFAULTS={container:null,handlers:{clean:function(){var E=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var q=this.quill.getFormat();Object.keys(q).forEach(function(H){u.default.query(H,u.default.Scope.INLINE)!=null&&E.quill.format(H,!1)})}else this.quill.removeFormat(F,p.default.sources.USER)},direction:function(E){var F=this.quill.getFormat().align;E==="rtl"&&F==null?this.quill.format("align","right",p.default.sources.USER):!E&&F==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",E,p.default.sources.USER)},indent:function(E){var F=this.quill.getSelection(),q=this.quill.getFormat(F),H=parseInt(q.indent||0);if(E==="+1"||E==="-1"){var Q=E==="+1"?1:-1;q.direction==="rtl"&&(Q*=-1),this.quill.format("indent",H+Q,p.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,p.default.sources.USER)},list:function(E){var F=this.quill.getSelection(),q=this.quill.getFormat(F);E==="check"?q.list==="checked"||q.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",E,p.default.sources.USER)}}},a.default=_,a.addControls=I}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var y=0;y<g.length;y++){var w=g[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,y){return g&&b(v.prototype,g),y&&b(v,y),v}})(),o=function b(v,g,y){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(28),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(g,y){u(this,v);var w=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return w.label.innerHTML=y,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),w}return i(v,[{key:"buildItem",value:function(y){var w=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,y);return w.style.backgroundColor=y.getAttribute("value")||"",w}},{key:"selectItem",value:function(y,w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,y,w);var j=this.label.querySelector(".ql-color-label"),N=y&&y.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),v})(c.default);a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var y=0;y<g.length;y++){var w=g[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,y){return g&&b(v.prototype,g),y&&b(v,y),v}})(),o=function b(v,g,y){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(28),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(g,y){u(this,v);var w=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=y[j.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return i(v,[{key:"selectItem",value:function(y,w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,y,w),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),v})(c.default);a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){var f=this;o(this,c),this.quill=d,this.boundsContainer=u||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var f=u.left+u.width/2-this.root.offsetWidth/2,p=u.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),v=0;if(b.right>m.right&&(v=m.right-b.right,this.root.style.left=f+v+"px"),b.left<m.left&&(v=m.left-b.left,this.root.style.left=f+v+"px"),b.bottom>m.bottom){var g=b.bottom-b.top,y=u.bottom-u.top+g;this.root.style.top=p-y+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function B(T,E){var F=[],q=!0,H=!1,Q=void 0;try{for(var J=T[Symbol.iterator](),re;!(q=(re=J.next()).done)&&(F.push(re.value),!(E&&F.length===E));q=!0);}catch(X){H=!0,Q=X}finally{try{!q&&J.return&&J.return()}finally{if(H)throw Q}}return F}return function(T,E){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return B(T,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function B(T,E,F){T===null&&(T=Function.prototype);var q=Object.getOwnPropertyDescriptor(T,E);if(q===void 0){var H=Object.getPrototypeOf(T);return H===null?void 0:B(H,E,F)}else{if("value"in q)return q.value;var Q=q.get;return Q===void 0?void 0:Q.call(F)}},l=(function(){function B(T,E){for(var F=0;F<E.length;F++){var q=E[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(T,q.key,q)}}return function(T,E,F){return E&&B(T.prototype,E),F&&B(T,F),T}})(),c=s(3),d=j(c),u=s(8),f=j(u),p=s(43),m=j(p),b=s(27),v=j(b),g=s(15),y=s(41),w=j(y);function j(B){return B&&B.__esModule?B:{default:B}}function N(B,T){if(!(B instanceof T))throw new TypeError("Cannot call a class as a function")}function S(B,T){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:B}function A(B,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);B.prototype=Object.create(T&&T.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(B,T):B.__proto__=T)}var _=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=(function(B){A(T,B);function T(E,F){N(this,T),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=_);var q=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,E,F));return q.quill.container.classList.add("ql-snow"),q}return l(T,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),w.default),this.tooltip=new I(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(q,H){F.handlers.link.call(F,!H.format.link)})}}]),T})(m.default);P.DEFAULTS=(0,d.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var E=this.quill.getSelection();if(E==null||E.length==0)return;var F=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var q=this.quill.theme.tooltip;q.edit("link",F)}else this.quill.format("link",!1)}}}}});var I=(function(B){A(T,B);function T(E,F){N(this,T);var q=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,E,F));return q.preview=q.root.querySelector("a.ql-preview"),q}return l(T,[{key:"listen",value:function(){var F=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(q){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),q.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(q){if(F.linkRange!=null){var H=F.linkRange;F.restoreFocus(),F.quill.formatText(H,"link",!1,f.default.sources.USER),delete F.linkRange}q.preventDefault(),F.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(q,H,Q){if(q!=null){if(q.length===0&&Q===f.default.sources.USER){var J=F.quill.scroll.descendant(v.default,q.index),re=i(J,2),X=re[0],ee=re[1];if(X!=null){F.linkRange=new g.Range(q.index-ee,X.length());var W=v.default.formats(X.domNode);F.preview.textContent=W,F.preview.setAttribute("href",W),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T})(p.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),a.default=P}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(29),o=Ce(i),l=s(36),c=s(38),d=s(64),u=s(65),f=Ce(u),p=s(66),m=Ce(p),b=s(67),v=Ce(b),g=s(37),y=s(26),w=s(39),j=s(40),N=s(56),S=Ce(N),A=s(68),_=Ce(A),P=s(27),I=Ce(P),B=s(69),T=Ce(B),E=s(70),F=Ce(E),q=s(71),H=Ce(q),Q=s(72),J=Ce(Q),re=s(73),X=Ce(re),ee=s(13),W=Ce(ee),O=s(74),z=Ce(O),V=s(75),U=Ce(V),K=s(57),se=Ce(K),xe=s(41),ie=Ce(xe),ue=s(28),Be=Ce(ue),me=s(59),$e=Ce(me),Oe=s(60),le=Ce(Oe),te=s(61),Te=Ce(te),we=s(108),Ie=Ce(we),he=s(62),de=Ce(he);function Ce(Ve){return Ve&&Ve.__esModule?Ve:{default:Ve}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":w.FontClass,"formats/size":j.SizeClass,"formats/blockquote":f.default,"formats/code-block":W.default,"formats/header":m.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":ee.Code,"formats/italic":_.default,"formats/link":I.default,"formats/script":T.default,"formats/strike":F.default,"formats/underline":H.default,"formats/image":J.default,"formats/video":X.default,"formats/list/item":b.ListItem,"modules/formula":z.default,"modules/syntax":U.default,"modules/toolbar":se.default,"themes/bubble":Ie.default,"themes/snow":de.default,"ui/icons":ie.default,"ui/picker":Be.default,"ui/icon-picker":le.default,"ui/color-picker":$e.default,"ui/tooltip":Te.default},!0),a.default=o.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.IndentClass=void 0;var i=(function(){function v(g,y){for(var w=0;w<y.length;w++){var j=y[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,y,w){return y&&v(g.prototype,y),w&&v(g,w),g}})(),o=function v(g,y,w){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,y);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,y,w)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m=(function(v){p(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"add",value:function(w,j){if(j==="+1"||j==="-1"){var N=this.value(w)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(w),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,w,j)}},{key:"canAdd",value:function(w,j){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,w,j)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,w,parseInt(j))}},{key:"value",value:function(w){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w))||void 0}}]),g})(c.default.Attributor.Class),b=new m("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});a.IndentClass=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(4),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="blockquote",f.tagName="blockquote",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function m(b,v){for(var g=0;g<v.length;g++){var y=v[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,v,g){return v&&m(b.prototype,v),g&&m(b,g),b}})(),o=s(4),l=c(o);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function u(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function f(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var p=(function(m){f(b,m);function b(){return d(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),b})(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.ListItem=void 0;var i=(function(){function N(S,A){for(var _=0;_<A.length;_++){var P=A[_];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,A,_){return A&&N(S.prototype,A),_&&N(S,_),S}})(),o=function N(S,A,_){S===null&&(S=Function.prototype);var P=Object.getOwnPropertyDescriptor(S,A);if(P===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,A,_)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(_)}},l=s(0),c=m(l),d=s(4),u=m(d),f=s(25),p=m(f);function m(N){return N&&N.__esModule?N:{default:N}}function b(N,S,A){return S in N?Object.defineProperty(N,S,{value:A,enumerable:!0,configurable:!0,writable:!0}):N[S]=A,N}function v(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function g(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function y(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var w=(function(N){y(S,N);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(_,P){_===j.blotName&&!P?this.replaceWith(c.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,_,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(_,P){return this.parent.isolate(this.offset(this.parent),this.length()),_===this.parent.statics.blotName?(this.parent.replaceWith(_,P),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,_,P))}}],[{key:"formats",value:function(_){return _.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,_)}}]),S})(u.default);w.blotName="list-item",w.tagName="LI";var j=(function(N){y(S,N),i(S,null,[{key:"create",value:function(_){var P=_==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,P);return(_==="checked"||_==="unchecked")&&I.setAttribute("data-checked",_==="checked"),I}},{key:"formats",value:function(_){if(_.tagName==="OL")return"ordered";if(_.tagName==="UL")return _.hasAttribute("data-checked")?_.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(A){v(this,S);var _=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,A)),P=function(B){if(B.target.parentNode===A){var T=_.statics.formats(A),E=c.default.find(B.target);T==="checked"?E.format("list","unchecked"):T==="unchecked"&&E.format("list","checked")}};return A.addEventListener("touchstart",P),A.addEventListener("mousedown",P),_}return i(S,[{key:"format",value:function(_,P){this.children.length>0&&this.children.tail.format(_,P)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(_,P){if(_ instanceof w)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,_,P);else{var I=P==null?this.length():P.offset(this),B=this.split(I);B.parent.insertBefore(_,B)}}},{key:"optimize",value:function(_){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,_);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(_){if(_.statics.blotName!==this.statics.blotName){var P=c.default.create(this.statics.defaultChild);_.moveChildren(P),this.appendChild(P)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,_)}}]),S})(p.default);j.blotName="list",j.scope=c.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[w],a.ListItem=w,a.default=j}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(56),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="italic",f.tagName=["EM","I"],a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var y=0;y<g.length;y++){var w=g[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,y){return g&&b(v.prototype,g),y&&b(v,y),v}})(),o=function b(v,g,y){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(6),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),v})(c.default);m.blotName="script",m.tagName=["SUB","SUP"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="strike",f.tagName="S",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="underline",f.tagName="U",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(y,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,j){return w&&g(y.prototype,w),j&&g(y,j),y}})(),o=function g(y,w,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(j)}},l=s(0),c=u(l),d=s(27);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function p(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function m(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var b=["alt","height","width"],v=(function(g){m(y,g);function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(j,N){b.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return b.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,d.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),y})(c.default.Embed);v.blotName="image",v.tagName="IMG",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(y,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,j){return w&&g(y.prototype,w),j&&g(y,j),y}})(),o=function g(y,w,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(j)}},l=s(4),c=s(27),d=u(c);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function p(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function m(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var b=["height","width"],v=(function(g){m(y,g);function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(j,N){b.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return b.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return d.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),y})(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.FormulaBlot=void 0;var i=(function(){function j(N,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,S,A){return S&&j(N.prototype,S),A&&j(N,A),N}})(),o=function j(N,S,A){N===null&&(N=Function.prototype);var _=Object.getOwnPropertyDescriptor(N,S);if(_===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:j(P,S,A)}else{if("value"in _)return _.value;var I=_.get;return I===void 0?void 0:I.call(A)}},l=s(35),c=m(l),d=s(5),u=m(d),f=s(9),p=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function b(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function v(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function g(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var y=(function(j){g(N,j);function N(){return b(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(A){var _=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,_,{throwOnError:!1,errorColor:"#f00"}),_.setAttribute("data-value",A)),_}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),N})(c.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var w=(function(j){g(N,j),i(N,null,[{key:"register",value:function(){u.default.register(y,!0)}}]);function N(){b(this,N);var S=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N})(p.default);a.FormulaBlot=y,a.default=w}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.CodeToken=a.CodeBlock=void 0;var i=(function(){function A(_,P){for(var I=0;I<P.length;I++){var B=P[I];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(_,B.key,B)}}return function(_,P,I){return P&&A(_.prototype,P),I&&A(_,I),_}})(),o=function A(_,P,I){_===null&&(_=Function.prototype);var B=Object.getOwnPropertyDescriptor(_,P);if(B===void 0){var T=Object.getPrototypeOf(_);return T===null?void 0:A(T,P,I)}else{if("value"in B)return B.value;var E=B.get;return E===void 0?void 0:E.call(I)}},l=s(0),c=v(l),d=s(5),u=v(d),f=s(9),p=v(f),m=s(13),b=v(m);function v(A){return A&&A.__esModule?A:{default:A}}function g(A,_){if(!(A instanceof _))throw new TypeError("Cannot call a class as a function")}function y(A,_){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:A}function w(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);A.prototype=Object.create(_&&_.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(A,_):A.__proto__=_)}var j=(function(A){w(_,A);function _(){return g(this,_),y(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var B=this.domNode.textContent;this.cachedText!==B&&((B.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(B),this.domNode.normalize(),this.attach()),this.cachedText=B)}}]),_})(b.default);j.className="ql-syntax";var N=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),S=(function(A){w(_,A),i(_,null,[{key:"register",value:function(){u.default.register(N,!0),u.default.register(j,!0)}}]);function _(P,I){g(this,_);var B=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,P,I));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return B.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){B.highlight(),T=null},B.options.interval)}),B.highlight(),B}return i(_,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var B=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(T){T.highlight(I.options.highlight)}),this.quill.update(u.default.sources.SILENT),B!=null&&this.quill.setSelection(B,u.default.sources.SILENT)}}}]),_})(p.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(A){var _=window.hljs.highlightAuto(A);return _.value}})(),interval:1e3},a.CodeBlock=j,a.CodeToken=N,a.default=S}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BubbleTooltip=void 0;var i=function _(P,I,B){P===null&&(P=Function.prototype);var T=Object.getOwnPropertyDescriptor(P,I);if(T===void 0){var E=Object.getPrototypeOf(P);return E===null?void 0:_(E,I,B)}else{if("value"in T)return T.value;var F=T.get;return F===void 0?void 0:F.call(B)}},o=(function(){function _(P,I){for(var B=0;B<I.length;B++){var T=I[B];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(P,T.key,T)}}return function(P,I,B){return I&&_(P.prototype,I),B&&_(P,B),P}})(),l=s(3),c=g(l),d=s(8),u=g(d),f=s(43),p=g(f),m=s(15),b=s(41),v=g(b);function g(_){return _&&_.__esModule?_:{default:_}}function y(_,P){if(!(_ instanceof P))throw new TypeError("Cannot call a class as a function")}function w(_,P){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:_}function j(_,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);_.prototype=Object.create(P&&P.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(_,P):_.__proto__=P)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(_){j(P,_);function P(I,B){y(this,P),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=N);var T=w(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I,B));return T.quill.container.classList.add("ql-bubble"),T}return o(P,[{key:"extendToolbar",value:function(B){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(B.container),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),v.default)}}]),P})(p.default);S.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=(function(_){j(P,_);function P(I,B){y(this,P);var T=w(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I,B));return T.quill.on(u.default.events.EDITOR_CHANGE,function(E,F,q,H){if(E===u.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&H===u.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var Q=T.quill.getLines(F.index,F.length);if(Q.length===1)T.position(T.quill.getBounds(F));else{var J=Q[Q.length-1],re=T.quill.getIndex(J),X=Math.min(J.length()-1,F.index+F.length-re),ee=T.quill.getBounds(new m.Range(re,X));T.position(ee)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return o(P,[{key:"listen",value:function(){var B=this;i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){B.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!B.root.classList.contains("ql-hidden")){var T=B.quill.getSelection();T!=null&&B.position(B.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(B){var T=i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,B),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",T===0)return T;E.style.marginLeft=-1*T-E.offsetWidth/2+"px"}}]),P})(f.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),a.BubbleTooltip=A,a.default=S}),(function(r,a,s){r.exports=s(63)})]).default})})(Jv)),Jv.exports}var Md,UI;function ele(){if(UI)return Md;UI=1;var e=Md&&Md.__extends||(function(){var u=function(f,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var v in b)b.hasOwnProperty(v)&&(m[v]=b[v])},u(f,p)};return function(f,p){u(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),t=Md&&Md.__assign||function(){return t=Object.assign||function(u){for(var f,p=1,m=arguments.length;p<m;p++){f=arguments[p];for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(u[b]=f[b])}return u},t.apply(this,arguments)},r=Md&&Md.__spreadArrays||function(){for(var u=0,f=0,p=arguments.length;f<p;f++)u+=arguments[f].length;for(var m=Array(u),b=0,f=0;f<p;f++)for(var v=arguments[f],g=0,y=v.length;g<y;g++,b++)m[b]=v[g];return m},a=Md&&Md.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},s=a(Eb()),i=a(bD()),o=a(mF()),l=a(Zoe()),c=(function(u){e(f,u);function f(p){var m=u.call(this,p)||this;m.dirtyProps=["modules","formats","bounds","theme","children"],m.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],m.state={generation:0},m.selection=null,m.onEditorChange=function(v,g,y,w){var j,N,S,A;v==="text-change"?(N=(j=m).onEditorChangeText)===null||N===void 0||N.call(j,m.editor.root.innerHTML,g,w,m.unprivilegedEditor):v==="selection-change"&&((A=(S=m).onEditorChangeSelection)===null||A===void 0||A.call(S,g,w,m.unprivilegedEditor))};var b=m.isControlled()?p.value:p.defaultValue;return m.value=b??"",m}return f.prototype.validateProps=function(p){var m;if(s.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(p.children)){var b=s.default.Children.only(p.children);if(((m=b)===null||m===void 0?void 0:m.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(p,m){var b=this,v;if(this.validateProps(p),!this.editor||this.state.generation!==m.generation)return!0;if("value"in p){var g=this.getEditorContents(),y=(v=p.value,v??"");this.isEqualValue(y,g)||this.setEditorContents(this.editor,y)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),r(this.cleanProps,this.dirtyProps).some(function(w){return!o.default(p[w],b.props[w])})},f.prototype.shouldComponentRegenerate=function(p){var m=this;return this.dirtyProps.some(function(b){return!o.default(p[b],m.props[b])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(p,m){var b=this;if(this.editor&&this.shouldComponentRegenerate(p)){var v=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==m.generation){var y=this.regenerationSnapshot,v=y.delta,w=y.selection;delete this.regenerationSnapshot,this.instantiateEditor();var j=this.editor;j.setContents(v),d(function(){return b.setEditorSelection(j,w)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(p,m){var b=new l.default(p,m);return m.tabIndex!=null&&this.setEditorTabIndex(b,m.tabIndex),this.hookEditor(b),b},f.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(p){return p&&p.ops},f.prototype.isEqualValue=function(p,m){return this.isDelta(p)&&this.isDelta(m)?o.default(p.ops,m.ops):o.default(p,m)},f.prototype.setEditorContents=function(p,m){var b=this;this.value=m;var v=this.getEditorSelection();typeof m=="string"?p.setContents(p.clipboard.convert(m)):p.setContents(m),d(function(){return b.setEditorSelection(p,v)})},f.prototype.setEditorSelection=function(p,m){if(this.selection=m,m){var b=p.getLength();m.index=Math.max(0,Math.min(m.index,b-1)),m.length=Math.max(0,Math.min(m.length,b-1-m.index)),p.setSelection(m)}},f.prototype.setEditorTabIndex=function(p,m){var b,v;!((v=(b=p)===null||b===void 0?void 0:b.scroll)===null||v===void 0)&&v.domNode&&(p.scroll.domNode.tabIndex=m)},f.prototype.setEditorReadOnly=function(p,m){m?p.disable():p.enable()},f.prototype.makeUnprivilegedEditor=function(p){var m=p;return{getHTML:function(){return m.root.innerHTML},getLength:m.getLength.bind(m),getText:m.getText.bind(m),getContents:m.getContents.bind(m),getSelection:m.getSelection.bind(m),getBounds:m.getBounds.bind(m)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=i.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},f.prototype.renderEditingArea=function(){var p=this,m=this.props,b=m.children,v=m.preserveWhitespace,g=this.state.generation,y={key:g,ref:function(w){p.editingArea=w}};return s.default.Children.count(b)?s.default.cloneElement(s.default.Children.only(b),y):v?s.default.createElement("pre",t({},y)):s.default.createElement("div",t({},y))},f.prototype.render=function(){var p;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(p,m,b,v){var g,y;if(this.editor){var w=this.isDelta(this.value)?v.getContents():v.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=m,this.value=w,(y=(g=this.props).onChange)===null||y===void 0||y.call(g,p,m,b,v))}},f.prototype.onEditorChangeSelection=function(p,m,b){var v,g,y,w,j,N;if(this.editor){var S=this.getEditorSelection(),A=!S&&p,_=S&&!p;o.default(p,S)||(this.selection=p,(g=(v=this.props).onChangeSelection)===null||g===void 0||g.call(v,p,m,b),A?(w=(y=this.props).onFocus)===null||w===void 0||w.call(y,p,m,b):_&&((N=(j=this.props).onBlur)===null||N===void 0||N.call(j,S,m,b)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=l.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f})(s.default.Component);function d(u){Promise.resolve().then(u)}return Md=c,Md}var tle=ele();const f3=Pa(tle),rle=({isOpen:e,templateId:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=kn();Ia();const o=JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:l,isLoading:c}=roe(t||""),d=wM(),u=noe(),[f,p]=D.useState(""),[m,b]=D.useState("Custom"),[v,g]=D.useState(""),[y,w]=D.useState(!1),[j,N]=D.useState(""),[S,A]=D.useState([]),[_,P]=D.useState(!1),[I,B]=D.useState(new Set),[T,E]=D.useState(new Set),[F,q]=D.useState(null),[H,Q]=D.useState(""),[J,re]=D.useState(!1),[X,ee]=D.useState(!1),W=D.useRef({});D.useEffect(()=>{t&&l&&e?(p(l.name||""),b(l.category||"Custom"),N(l.description||""),l.sections&&Array.isArray(l.sections)?A(l.sections.map((ge,fe)=>({id:ge.id||`section_${Date.now()}_${fe}`,name:ge.name||`Section ${fe+1}`,order:ge.order!==void 0?ge.order:fe,steps:(ge.steps||[]).map((_e,Ue)=>({id:_e.id||`step_${Date.now()}_${fe}_${Ue}`,name:_e.name||"",instructions:_e.instructions||"",checklistItems:Array.isArray(_e.checklistItems)?_e.checklistItems:[],attachments:Array.isArray(_e.attachments)?_e.attachments:[],order:_e.order!==void 0?_e.order:Ue}))}))):A([])):!t&&e&&(p(""),b("Custom"),g(""),w(!1),N(""),A([]),B(new Set),E(new Set))},[t,l,e]),D.useEffect(()=>{e&&(async()=>{if(o)try{await cb({userId:o}),ee(!0)}catch{ee(!1)}})()},[o,e]);const O={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},z=["header","bold","italic","underline","strike","list","bullet","link"],V=()=>{const ge={id:`section_${Date.now()}`,name:`Section ${S.length+1}`,order:S.length,steps:[]};A([...S,ge]),B(fe=>new Set([...fe,ge.id]))},U=ge=>{A(S.filter(fe=>fe.id!==ge)),B(fe=>{const _e=new Set(fe);return _e.delete(ge),_e})},K=(ge,fe)=>{A(S.map(_e=>_e.id===ge?{..._e,name:fe}:_e))},se=(ge,fe)=>{const _e=S.findIndex(Fe=>Fe.id===ge);if(_e===-1)return;const Ue=fe==="up"?_e-1:_e+1;if(Ue<0||Ue>=S.length)return;const ke=[...S];[ke[_e],ke[Ue]]=[ke[Ue],ke[_e]],ke.forEach((Fe,qe)=>{Fe.order=qe}),A(ke)},xe=ge=>{B(fe=>{const _e=new Set(fe);return _e.has(ge)?_e.delete(ge):_e.add(ge),_e})},ie=ge=>{const fe=S.find(Ue=>Ue.id===ge);if(!fe)return;const _e={id:`step_${Date.now()}`,name:`Step ${fe.steps.length+1}`,instructions:"",checklistItems:[],attachments:[],order:fe.steps.length};A(S.map(Ue=>Ue.id===ge?{...Ue,steps:[...Ue.steps,_e]}:Ue)),E(Ue=>new Set([...Ue,_e.id]))},ue=(ge,fe)=>{A(S.map(_e=>_e.id===ge?{..._e,steps:_e.steps.filter(Ue=>Ue.id!==fe)}:_e)),E(_e=>{const Ue=new Set(_e);return Ue.delete(fe),Ue}),q(null)},Be=(ge,fe,_e)=>{A(S.map(Ue=>Ue.id===ge?{...Ue,steps:Ue.steps.map(ke=>ke.id===fe?{...ke,name:_e}:ke)}:Ue))},me=(ge,fe,_e)=>{const Ue=S.find(et=>et.id===ge);if(!Ue)return;const ke=Ue.steps.findIndex(et=>et.id===fe);if(ke===-1)return;const Fe=_e==="up"?ke-1:ke+1;if(Fe<0||Fe>=Ue.steps.length)return;const qe=[...Ue.steps];[qe[ke],qe[Fe]]=[qe[Fe],qe[ke]],qe.forEach((et,Kt)=>{et.order=Kt}),A(S.map(et=>et.id===ge?{...et,steps:qe}:et))},$e=ge=>{E(fe=>{const _e=new Set(fe);return _e.has(ge)?(_e.delete(ge),q(null)):_e.add(ge),_e})},Oe=(ge,fe)=>{const Ue=S.find(ke=>ke.id===ge)?.steps.find(ke=>ke.id===fe);Ue&&(q(fe),Q(Ue.instructions))},le=(ge,fe)=>{A(S.map(_e=>_e.id===ge?{..._e,steps:_e.steps.map(Ue=>Ue.id===fe?{...Ue,instructions:H}:Ue)}:_e)),q(null),Q("")},te=(ge,fe)=>{A(S.map(_e=>_e.id===ge?{..._e,steps:_e.steps.map(Ue=>Ue.id===fe?{...Ue,checklistItems:[...Ue.checklistItems,""]}:Ue)}:_e))},Te=(ge,fe,_e,Ue)=>{A(S.map(ke=>ke.id===ge?{...ke,steps:ke.steps.map(Fe=>Fe.id===fe?{...Fe,checklistItems:Fe.checklistItems.map((qe,et)=>et===_e?Ue:qe)}:Fe)}:ke))},we=(ge,fe,_e)=>{A(S.map(Ue=>Ue.id===ge?{...Ue,steps:Ue.steps.map(ke=>ke.id===fe?{...ke,checklistItems:ke.checklistItems.filter((Fe,qe)=>qe!==_e)}:ke)}:Ue))},Ie=(ge,fe,_e)=>{const Ue=_e.target.files?.[0];if(!Ue)return;if(Ue.type!=="application/pdf"){i("Please select a PDF file");return}if(Ue.size>10*1024*1024){i("File size must be less than 10MB");return}const ke=new FileReader;ke.onload=()=>{const qe={type:"pdf",url:ke.result,name:Ue.name};A(S.map(et=>et.id===ge?{...et,steps:et.steps.map(Kt=>Kt.id===fe?{...Kt,attachments:[...Kt.attachments,qe]}:Kt)}:et)),s("PDF attached successfully")},ke.readAsDataURL(Ue)},he=async(ge,fe)=>{if(!o){i("User not authenticated");return}re(!0);try{const _e=await cb({userId:o}),{accessToken:Ue}=_e?.data||{};if(!Ue)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");await new Promise((qe,et)=>{let Kt=0;const qt=50,vr=setInterval(()=>{Kt++,window.google&&window.google.picker?(clearInterval(vr),qe()):Kt>=qt&&(clearInterval(vr),et(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const ke=window.google.picker;new ke.PickerBuilder().setOAuthToken(Ue).setCallback(qe=>{if(re(!1),qe[ke.Response.ACTION]===ke.Action.PICKED){const et=qe[ke.Response.DOCUMENTS];if(et&&et.length>0){const Kt=et[0],qt={type:"gdrive",url:Kt.url||Kt.embedUrl||"",name:Kt.name||"Untitled",fileId:Kt.id};A(S.map(vr=>vr.id===ge?{...vr,steps:vr.steps.map(er=>er.id===fe?{...er,attachments:[...er.attachments,qt]}:er)}:vr)),s("File attached from Google Drive")}}else qe[ke.Response.ACTION]===ke.Action.CANCEL&&re(!1)}).addView(ke.ViewId.DOCS).enableFeature(ke.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(_e){re(!1),i(_e.message||"Failed to open Google Drive picker")}},de=(ge,fe,_e)=>{A(S.map(Ue=>Ue.id===ge?{...Ue,steps:Ue.steps.map(ke=>ke.id===fe?{...ke,attachments:ke.attachments.filter((Fe,qe)=>qe!==_e)}:ke)}:Ue))},Ce=()=>{if(!f.trim())return"Template name is required";if(S.length===0)return"At least one section is required";for(const ge of S){if(!ge.name.trim())return`Section "${ge.name||"Unnamed"}" must have a name`;if(ge.steps.length===0)return`Section "${ge.name}" must have at least one step`;for(const fe of ge.steps)if(!fe.name.trim())return"All steps must have a name"}return null},Ve=async()=>{const ge=Ce();if(ge){i(ge);return}P(!0);try{const fe=y&&v.trim()?v.trim():m,_e={name:f.trim(),category:fe,description:j,sections:S.map(Ue=>({id:Ue.id,name:Ue.name.trim(),order:Ue.order,steps:Ue.steps.map(ke=>({id:ke.id,name:ke.name.trim(),instructions:ke.instructions,checklistItems:ke.checklistItems.filter(Fe=>Fe.trim()!==""),attachments:ke.attachments,order:ke.order}))}))};t?await u.mutateAsync({id:t,data:_e}):await d.mutateAsync(_e),a?.(),r()}catch(fe){i(fe.message||"Failed to save template")}finally{P(!1)}};return e?n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t?"Edit Playbook Template":"Create New Playbook Template"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"Update your playbook template":"Build a reusable workflow template"})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c&&t?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:f,onChange:ge=>p(ge.target.value),placeholder:"e.g., Sales Playbook",className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),n.jsx("div",{className:"flex items-center gap-2",children:y?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",value:v,onChange:ge=>g(ge.target.value),placeholder:"Enter category name",className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>{w(!1),g("")},className:"px-3 py-2.5 text-slate-500 hover:text-slate-700",children:n.jsx(Xt,{className:"w-4 h-4"})})]}):n.jsx(n.Fragment,{children:n.jsxs("select",{value:m,onChange:ge=>{ge.target.value==="custom"?w(!0):b(ge.target.value)},className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"Sales",children:"Sales"}),n.jsx("option",{value:"Onboarding",children:"Onboarding"}),n.jsx("option",{value:"Custom",children:"Custom"}),n.jsx("option",{value:"custom",children:"+ Create New Category"})]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{value:j,onChange:ge=>N(ge.target.value),placeholder:"Brief description of this playbook...",rows:3,className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Sections & Steps"}),n.jsxs("button",{onClick:V,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Section"]})]}),S.length===0?n.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl",children:[n.jsx(ci,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No sections yet. Add your first section to get started."})]}):n.jsx("div",{className:"space-y-3",children:S.map((ge,fe)=>n.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-slate-50 p-4 flex items-center gap-3",children:[n.jsx("button",{onClick:()=>xe(ge.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(Vs,{className:`w-4 h-4 text-slate-400 transition-transform ${I.has(ge.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:ge.name,onChange:_e=>K(ge.id,_e.target.value),placeholder:"Section name",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-semibold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>se(ge.id,"up"),disabled:fe===0,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx($j,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>se(ge.id,"down"),disabled:fe===S.length-1,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(Vs,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>U(ge.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]}),I.has(ge.id)&&n.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase",children:[ge.steps.length," Step",ge.steps.length!==1?"s":""]}),n.jsxs("button",{onClick:()=>ie(ge.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(nn,{className:"w-3 h-3"}),"Add Step"]})]}),ge.steps.length===0?n.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[n.jsx(ea,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-500",children:"No steps yet. Add your first step."})]}):n.jsx("div",{className:"space-y-3",children:ge.steps.map((_e,Ue)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-white p-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>$e(_e.id),className:"p-1 hover:bg-slate-50 rounded transition-colors",children:n.jsx(Vs,{className:`w-3.5 h-3.5 text-slate-400 transition-transform ${T.has(_e.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:_e.name,onChange:ke=>Be(ge.id,_e.id,ke.target.value),placeholder:"Step name",className:"flex-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>me(ge.id,_e.id,"up"),disabled:Ue===0,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx($j,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>me(ge.id,_e.id,"down"),disabled:Ue===ge.steps.length-1,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(Vs,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>ue(ge.id,_e.id),className:"p-1 hover:bg-red-50 rounded transition-colors text-red-600",children:n.jsx(Lr,{className:"w-3 h-3"})})]})]}),T.has(_e.id)&&n.jsxs("div",{className:"p-4 bg-slate-50 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Instructions"}),F===_e.id?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-white border border-slate-200 rounded-lg",children:n.jsx(f3,{theme:"snow",value:H,onChange:Q,modules:O,formats:z,placeholder:"Add instructions, best practices, talking points...",className:"text-sm"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>le(ge.id,_e.id),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold rounded-lg transition-colors",children:"Save Instructions"}),n.jsx("button",{onClick:()=>{q(null),Q("")},className:"px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-2",children:[_e.instructions?n.jsx("div",{className:"p-3 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:eg.sanitize(_e.instructions)}}):n.jsx("div",{className:"p-3 bg-white border-2 border-dashed border-slate-200 rounded-lg text-sm text-slate-400 text-center",children:"No instructions added"}),n.jsxs("button",{onClick:()=>Oe(ge.id,_e.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(dl,{className:"w-3 h-3"}),_e.instructions?"Edit Instructions":"Add Instructions"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Checklist Items"}),n.jsxs("div",{className:"space-y-2",children:[_e.checklistItems.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No checklist items"}):_e.checklistItems.map((ke,Fe)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:ke,onChange:qe=>Te(ge.id,_e.id,Fe,qe.target.value),placeholder:"Checklist item",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>we(ge.id,_e.id,Fe),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",children:n.jsx(Xt,{className:"w-3.5 h-3.5"})})]},Fe)),n.jsxs("button",{onClick:()=>te(ge.id,_e.id),className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(nn,{className:"w-3 h-3"}),"Add Checklist Item"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"space-y-2",children:[_e.attachments.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No attachments"}):_e.attachments.map((ke,Fe)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[ke.type==="pdf"?n.jsx(ea,{className:"w-4 h-4 text-red-600 shrink-0"}):n.jsx(o0,{className:"w-4 h-4 text-blue-600 shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:ke.name}),ke.type==="gdrive"&&n.jsx("span",{className:"text-xs text-blue-600 font-semibold shrink-0",children:"Google Drive"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[ke.type==="gdrive"&&n.jsx("a",{href:ke.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-blue-50 rounded text-blue-600",children:n.jsx(Ts,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>de(ge.id,_e.id,Fe),className:"p-1 hover:bg-red-50 rounded text-red-600",children:n.jsx(Xt,{className:"w-3.5 h-3.5"})})]})]},Fe)),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:ke=>{W.current[`${ge.id}_${_e.id}_pdf`]=ke},type:"file",accept:".pdf",onChange:ke=>Ie(ge.id,_e.id,ke),className:"hidden"}),n.jsxs("button",{onClick:()=>W.current[`${ge.id}_${_e.id}_pdf`]?.click(),className:"flex-1 px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Q0,{className:"w-3 h-3"}),"Upload PDF"]}),n.jsx("button",{onClick:()=>he(ge.id,_e.id),disabled:J||!X,className:"flex-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:J?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(o0,{className:"w-3 h-3"}),"Google Drive"]})})]})]})]})]})]},_e.id))})]})]},ge.id))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex items-center justify-end gap-3 shrink-0",children:[n.jsx("button",{onClick:r,className:"px-4 py-2.5 text-slate-600 hover:bg-slate-50 text-sm font-semibold rounded-xl transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ve,disabled:_||c,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),t?"Update Template":"Create Template"]})})]})]})})]}):null},nle=({instance:e,getCompanyName:t,getDealName:r,getProjectName:a,getUserName:s,onView:i})=>{const{data:o=[]}=Sg(e.id),l=e.templateSnapshot?.sections?.reduce((p,m)=>p+(m.steps?.length||0),0)||0,c=o.length,d=l>0?Math.round(c/l*100):0,u=e.dealId?{type:"Deal",name:r(e.dealId),id:e.dealId}:e.projectId?{type:"Project",name:a(e.projectId),id:e.projectId}:null,f=p=>{if(!p)return"";const m=new Date(p),b=new Date,v=new Date(b);return v.setDate(v.getDate()-1),m.toDateString()===b.toDateString()?"Today":m.toDateString()===v.toDateString()?"Yesterday":m.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})};return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("span",{className:"text-xs text-slate-400",children:["v",e.templateSnapshot.version]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u?n.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="Deal"?n.jsx(Cl,{className:"w-4 h-4 text-slate-400"}):n.jsx(Xd,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:u.name})]}):n.jsx("span",{className:"text-sm text-slate-400",children:""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(cl,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:e.companyId?t(e.companyId):""})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-[120px]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[c," / ",l]}),n.jsxs("span",{className:"text-xs text-slate-500",children:[d,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${d===100?"bg-green-500":d>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${d}%`}})})]}),d===100&&n.jsx(gn,{className:"w-4 h-4 text-green-500"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-slate-600",children:e.activatedBy?s(e.activatedBy):""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ta,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:f(e.activatedAt)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("button",{onClick:()=>i(e.id),className:"text-indigo-600 hover:text-indigo-700 text-sm font-semibold flex items-center gap-1.5 transition-colors",children:["View",n.jsx(Ts,{className:"w-3.5 h-3.5"})]})})]})},ale=({onNavigate:e,currentUser:t,playbookPrompt:r,onClearPlaybookPrompt:a})=>{const{showSuccess:s,showError:i}=kn(),[o,l]=D.useState("templates"),[c,d]=D.useState(""),[u,f]=D.useState("all"),[p,m]=D.useState(null),[b,v]=D.useState(!1),[g,y]=D.useState([]),[w,j]=D.useState(!1),[N,S]=D.useState(null),[A,_]=D.useState(!1),[P,I]=D.useState(null),[B,T]=D.useState(!1),[E,F]=D.useState(void 0),[q,H]=D.useState(void 0),[Q,J]=D.useState(""),[re,X]=D.useState("all"),[ee,W]=D.useState("all"),{data:O=[],isLoading:z,error:V}=yM({category:u!=="all"?u:void 0,search:c||void 0}),U=aoe(),K=wM(),{data:se=[],isLoading:xe}=hy({companyId:re!=="all"?re:void 0,status:ee!=="all"?ee:void 0}),{data:ie=[]}=Ys({queryKey:["companies"],queryFn:async()=>{const fe=await hd();return fe.data||fe||[]},staleTime:300*1e3}),{data:ue=[]}=Ys({queryKey:["deals"],queryFn:async()=>{const fe=await kg();return fe.data||fe||[]},staleTime:300*1e3}),{data:Be=[]}=Ys({queryKey:["projects"],queryFn:async()=>{const fe=await I0();return fe.data||fe||[]},staleTime:300*1e3}),{data:me=[]}=d3(),$e=D.useRef("");D.useEffect(()=>{const fe=new Set;O.forEach(ke=>{ke.category&&fe.add(ke.category)});const _e=Array.from(fe).sort(),Ue=_e.join(",");Ue!==$e.current&&($e.current=Ue,y(_e))},[O.length]),D.useEffect(()=>{const fe=()=>{window.dispatchEvent(new Event("refresh-playbooks-queries"))};return window.addEventListener("refresh-playbooks",fe),()=>window.removeEventListener("refresh-playbooks",fe)},[]),D.useEffect(()=>{r&&r.dealId&&(l("templates"),F(r.dealId),H(r.templateId),T(!0),a&&a())},[r,a]),D.useEffect(()=>{A||z||_(!0)},[O.length,z]);const Oe=async fe=>{v(!0);try{await U.mutateAsync(fe.id),m(null)}catch(_e){i(_e.message||"Failed to delete template")}finally{v(!1)}},le=async fe=>{try{await K.mutateAsync({name:`${fe.name} (Copy)`,category:fe.category||"Custom",description:fe.description||"",sections:fe.sections||[]}),s("Template duplicated successfully!")}catch(_e){i(_e.message||"Failed to duplicate template")}},te=fe=>!fe.sections||!Array.isArray(fe.sections)?0:fe.sections.reduce((_e,Ue)=>_e+(Ue.steps?.length||0),0),Te=fe=>{if(!fe)return"Never";const _e=new Date(fe),ke=new Date().getTime()-_e.getTime(),Fe=Math.floor(ke/(1e3*60*60*24));return Fe===0?"Today":Fe===1?"Yesterday":Fe<7?`${Fe} days ago`:Fe<30?`${Math.floor(Fe/7)} weeks ago`:_e.toLocaleDateString()},we=fe=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[fe]||"bg-slate-100 text-slate-700",Ie=D.useMemo(()=>{if(!c)return O;const fe=c.toLowerCase();return O.filter(_e=>_e.name?.toLowerCase().includes(fe)||_e.description?.toLowerCase().includes(fe))},[O,c]),he=fe=>ie.find(Ue=>Ue.id===fe)?.name||"Unknown Company",de=fe=>{const _e=ue.find(Ue=>Ue.id===fe);return _e?.title||_e?.name||"Unknown Deal"},Ce=fe=>{const _e=Be.find(Ue=>Ue.id===fe);return _e?.title||_e?.name||"Unknown Project"},Ve=fe=>me.find(Ue=>Ue.id===fe)?.name||fe,ge=D.useMemo(()=>{let fe=se;if(Q){const _e=Q.toLowerCase();fe=fe.filter(Ue=>{const ke=Ue.templateSnapshot?.name||"",Fe=Ue.companyId?he(Ue.companyId).toLowerCase():"",qe=Ue.dealId?de(Ue.dealId).toLowerCase():"",et=Ue.projectId?Ce(Ue.projectId).toLowerCase():"";return ke.toLowerCase().includes(_e)||Fe.includes(_e)||qe.includes(_e)||et.includes(_e)})}return fe},[se,Q,ie,ue,Be]);return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shrink-0",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Playbooks"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Create and manage standardized workflows for your team"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>l("templates"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="templates"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Template Library"}),n.jsx("button",{onClick:()=>l("active"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="active"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Active Playbooks"})]})]}),o==="templates"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[V&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("p",{className:"text-red-800 text-sm font-medium",children:["Error loading playbooks: ",V instanceof Error?V.message:"Unknown error"]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:c,onChange:fe=>d(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(vf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:u,onChange:fe=>f(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Categories"}),g.map(fe=>n.jsx("option",{value:fe,children:fe},fe))]}),n.jsx(va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create New Playbook"]})]}),z?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading playbooks..."})]})}):Ie.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(ci,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No playbooks found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:c||u!=="all"?"Try adjusting your search or filters":"Get started by creating your first playbook template"}),!c&&u==="all"&&n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Your First Playbook"]})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:Ie.map(fe=>{const _e=te(fe),Ue=fe.sections?.length||0;return n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:border-indigo-300 hover:shadow-lg transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ci,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-1",children:fe.name})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${we(fe.category||"Custom")}`,children:fe.category||"Custom"})]}),n.jsx("div",{className:"relative",children:n.jsx("button",{onClick:ke=>{ke.stopPropagation()},className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Xk,{className:"w-4 h-4 text-slate-400"})})})]}),fe.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:fe.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ea,{className:"w-4 h-4"}),n.jsxs("span",{children:[Ue," section",Ue!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ob,{className:"w-4 h-4"}),n.jsxs("span",{children:[_e," step",_e!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(ta,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:["Updated ",Te(fe.updatedAt||fe.createdAt)]})]}),n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["v",fe.version||1]})})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:ke=>{ke.stopPropagation(),S(fe.id),j(!0)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(dl,{className:"w-3.5 h-3.5"}),"Edit"]}),n.jsxs("button",{onClick:ke=>{ke.stopPropagation(),le(fe)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(rU,{className:"w-3.5 h-3.5"}),"Duplicate"]}),n.jsx("button",{onClick:ke=>{ke.stopPropagation(),m(fe)},className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]})]},fe.id)})})})]}),o==="active"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by playbook name, company, deal, or project...",value:Q,onChange:fe=>J(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(vf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:re,onChange:fe=>X(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Companies"}),ie.map(fe=>n.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),n.jsx(va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(vf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:ee,onChange:fe=>W(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Completed"})]}),n.jsx(va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]})]}),xe?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ge.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Xd,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Active Playbooks"}),n.jsx("p",{className:"text-sm text-slate-500",children:Q||re!=="all"||ee!=="all"?"No playbooks match your filters. Try adjusting your search criteria.":"No active playbook instances found. Attach a playbook to a Deal or Project to get started."})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Playbook Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Attached To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Progress"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:ge.map(fe=>n.jsx(nle,{instance:fe,getCompanyName:he,getDealName:de,getProjectName:Ce,getUserName:Ve,onView:_e=>I(_e)},fe.id))})]})})})})]}),p&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Playbook Template"}),n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:['Are you sure you want to delete "',p.name,'"? This action cannot be undone.']})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>m(null),className:"flex-1 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-xl transition-colors border border-slate-200",disabled:b,children:"Cancel"}),n.jsx("button",{onClick:()=>Oe(p),disabled:b,className:"flex-1 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50",children:b?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}),n.jsx(rle,{isOpen:w,templateId:N,onClose:()=>{j(!1),S(null)},onSuccess:()=>{}}),n.jsx(u3,{isOpen:B,dealId:E,preSelectedTemplateId:q,onClose:()=>{T(!1),F(void 0),H(void 0)},onSuccess:()=>{T(!1),F(void 0),H(void 0)}}),P&&n.jsx(my,{instanceId:P,isOpen:!!P,onClose:()=>I(null)})]})},sle=({onNavigate:e,companyIdFromUrl:t,onClearCompanyIdFromUrl:r})=>{const{showSuccess:a,showError:s}=kn(),i=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[o,l]=D.useState([]),[c,d]=D.useState(!0),[u,f]=D.useState(""),[p,m]=D.useState(null),[b,v]=D.useState("date"),[g,y]=D.useState("desc"),[w,j]=D.useState([]),[N,S]=D.useState(!1),[A,_]=D.useState(!1),[P,I]=D.useState(null),[B,T]=D.useState([]),[E,F]=D.useState([]),[q,H]=D.useState("email"),[Q,J]=D.useState(!1),[re,X]=D.useState(!1),[ee,W]=D.useState(null),[O,z]=D.useState(!1),[V,U]=D.useState({}),[K,se]=D.useState([]),[xe,ie]=D.useState({}),ue=D.useRef(!1),Be=async()=>{try{z(!0);const ge=await Xne();console.log("[SATISFACTION] Template response:",ge),ge&&ge.success&&ge.data?W(ge.data):(console.error("[SATISFACTION] Invalid response format:",ge),s(ge?.error?.message||ge?.message||"Failed to load survey template"))}catch(ge){console.error("[SATISFACTION] Error loading template:",ge),s(ge.message||"Failed to load survey template")}finally{z(!1)}};D.useEffect(()=>{re&&!ee&&Be()},[re]),D.useEffect(()=>{(async()=>{try{const fe=await _c(),_e=fe?.data||fe||[];Array.isArray(_e)&&se(_e)}catch(fe){console.error("[SATISFACTION] Failed to load users",fe)}})()},[]),D.useEffect(()=>{(async()=>{try{const fe=await hd(),_e=fe?.data||fe||[];if(Array.isArray(_e)){const Ue={};_e.forEach(ke=>{ke.id&&(Ue[ke.id]=ke)}),ie(Ue)}}catch(fe){console.error("[SATISFACTION] Failed to load companies",fe)}})()},[]),D.useEffect(()=>{me()},[]),D.useEffect(()=>{p&&te(p.id)},[p]),D.useEffect(()=>{(async()=>{if(p?.companyId)try{const fe=await Sh("",p.companyId);if(fe.success&&fe.data){const _e={};fe.data.forEach(Ue=>{Ue.id&&(_e[Ue.id]=Ue)}),U(_e)}}catch(fe){console.error("[SATISFACTION] Failed to load contacts for timeline",fe)}})()},[p?.companyId]),D.useEffect(()=>{if(!t||ue.current||!r)return;ue.current=!0;const ge=t;(async()=>{try{const _e=(await fk(ge))?.data?.satisfactionRecordId;_e&&m({id:_e,companyId:ge,createdAt:"",createdBy:"",source:"manual"}),await Ce(ge)}catch{await Ce(ge)}finally{r()}})()},[t,r]);const me=async()=>{try{d(!0);const ge=await Hne(u);if(ge.success&&ge.data){const fe=ge.data.map(_e=>({companyId:_e.companyId,companyName:_e.company?.name||"Unknown Company",latestNpsScore:_e.latestNpsScore,npsCategory:_e.npsCategory,accountManagerId:_e.company?.ownerId,accountManagerName:null,lastSurveyDate:_e.lastSurveyDate,status:_e.status||"not_yet_sent",satisfactionRecordId:_e.id}));l(fe)}}catch(ge){s(ge.message||"Failed to load satisfaction records")}finally{d(!1)}},$e=ge=>ge==null?null:ge>=9?"Promoter":ge>=7?"Passive":"Detractor",Oe=D.useMemo(()=>{const ge=[];return w.forEach(fe=>{(fe.responses||[]).forEach(_e=>{const Ue=_e.contactId?V[_e.contactId]:null;let ke="";if(_e.answers&&Array.isArray(_e.answers)){const Fe=_e.answers.find(qe=>typeof qe.answer=="string"&&qe.questionText&&(qe.questionText.toLowerCase().includes("improve")||qe.questionText.toLowerCase().includes("additional")))||_e.answers.find(qe=>typeof qe.answer=="string");Fe&&typeof Fe.answer=="string"&&(ke=Fe.answer)}ge.push({id:_e.id,submittedAt:_e.submittedAt,npsScore:_e.npsScore,contactId:_e.contactId,contactName:Ue?.name,feedback:ke})})}),ge.sort((fe,_e)=>{const Ue=fe.submittedAt?new Date(fe.submittedAt).getTime():0;return(_e.submittedAt?new Date(_e.submittedAt).getTime():0)-Ue}),ge},[w,V]),le=ge=>!ge.accountManagerId||!K||K.length===0?null:K.find(_e=>_e.id===ge.accountManagerId)?.name||null,te=async ge=>{try{S(!0);const fe=await Wne(ge);fe.success&&fe.data&&j(fe.data.surveys||[])}catch(fe){s(fe.message||"Failed to load record details")}finally{S(!1)}},Te=ge=>ge==null?"text-slate-400":ge>=9?"text-green-600":ge>=7?"text-yellow-600":"text-red-600",we=ge=>ge==null?"bg-slate-100":ge>=9?"bg-green-50":ge>=7?"bg-yellow-50":"bg-red-50",Ie=ge=>{const _e={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[ge];return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${_e.color}`,children:_e.label})},he=D.useMemo(()=>[...o.filter(fe=>fe.companyName.toLowerCase().includes(u.toLowerCase()))].sort((fe,_e)=>{let Ue=0;if(b==="score"){const ke=fe.latestNpsScore??-1,Fe=_e.latestNpsScore??-1;Ue=ke-Fe}else if(b==="date"){const ke=fe.lastSurveyDate?new Date(fe.lastSurveyDate).getTime():0,Fe=_e.lastSurveyDate?new Date(_e.lastSurveyDate).getTime():0;Ue=ke-Fe}else b==="status"&&(Ue=fe.status.localeCompare(_e.status));return g==="asc"?Ue:-Ue}),[o,u,b,g]),de=async()=>{if(!P||E.length===0){s("Please select a company and at least one contact");return}try{J(!0);let fe=(await fk(P)).data?.satisfactionRecordId;fe||(fe=(await Vne({companyId:P,source:"manual"})).data.id);const _e=await Kne({satisfactionRecordId:fe,contactIds:E,deliveryMethod:q});if(q==="link"&&_e.data?.surveyUrl){const Ue=_e.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText(Ue).then(()=>{a(`Survey link copied to clipboard! Share: ${Ue}`)}).catch(()=>{a(`Survey created! Copy this link: ${Ue}`)}):a(`Survey created! Copy this link: ${Ue}`)}else a("Survey sent successfully");_(!1),F([]),me()}catch(ge){s(ge.message||"Failed to send survey")}finally{J(!1)}},Ce=async ge=>{I(ge),_(!0);try{const fe=await Sh("",ge);if(fe.success&&fe.data){const _e=fe.data.filter(Ue=>Ue.email);T(_e)}}catch(fe){s(fe.message||"Failed to load contacts")}},Ve=ge=>{if(!i)return!1;const fe=i.role==="Admin",_e=i.id===ge.accountManagerId;return fe||_e};return n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),!!i&&(i.role==="Admin"||o.some(fe=>fe.accountManagerId===i.id))?n.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[n.jsx(Vj,{className:"w-4 h-4"}),"Survey Builder"]}):null]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search companies...",value:u,onChange:ge=>f(ge.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:b,onChange:ge=>v(ge.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Sort by Date"}),n.jsx("option",{value:"score",children:"Sort by Score"}),n.jsx("option",{value:"status",children:"Sort by Status"})]}),n.jsx("button",{onClick:()=>y(g==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:n.jsx(ZB,{className:"w-4 h-4"})})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):he.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(bf,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):n.jsx("div",{className:"space-y-4",children:he.map(ge=>n.jsx("div",{onClick:()=>{const fe={id:ge.satisfactionRecordId,companyId:ge.companyId,createdAt:"",createdBy:"",source:"manual"};m(fe)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(Xs,{src:xe[ge.companyId]?.logo,fallbackText:xe[ge.companyId]?.name||ge.companyName,className:"w-16 h-16 border border-slate-200",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:xe[ge.companyId]?.name||ge.companyName}),ge.latestNpsScore!==void 0&&ge.latestNpsScore!==null&&n.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-sm font-bold ${ge.latestNpsScore>=9?"bg-green-100 text-green-700":ge.latestNpsScore>=7?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["NPS ",ge.latestNpsScore]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[ge.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ge.npsCategory==="Promoter"?"bg-green-100 text-green-700":ge.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:ge.npsCategory}),Ie(ge.status),ge.lastSurveyDate&&n.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(ta,{className:"w-3 h-3"}),new Date(ge.lastSurveyDate).toLocaleDateString()]})]}),le(ge)&&n.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Account Manager: ",le(ge)]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Ve(ge)&&n.jsxs("button",{onClick:fe=>{fe.stopPropagation(),Ce(ge.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send Survey"]}),n.jsx(va,{className:"w-5 h-5 text-slate-400"})]})]})},ge.satisfactionRecordId))})}),p&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),n.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:N?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border border-slate-200 rounded-2xl p-4 bg-slate-50/60",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Current NPS Score"}),Oe.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"No responses yet"}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${we(Oe[0].npsScore)}`,children:n.jsx("span",{className:`text-3xl font-black ${Te(Oe[0].npsScore)}`,children:Oe[0].npsScore})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[$e(Oe[0].npsScore)&&n.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${$e(Oe[0].npsScore)==="Promoter"?"bg-green-100 text-green-700":$e(Oe[0].npsScore)==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:$e(Oe[0].npsScore)}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Last response on"," ",Oe[0].submittedAt?new Date(Oe[0].submittedAt).toLocaleDateString():""]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Historical Timeline"}),Oe.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No responses yet"}):n.jsx("div",{className:"space-y-3",children:Oe.map(ge=>n.jsxs("div",{className:"flex items-start gap-3 border-l-2 border-slate-200 pl-4 relative",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 absolute -left-[5px] mt-2"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:["NPS ",ge.npsScore]}),ge.contactName&&n.jsx("span",{className:"text-[11px] text-slate-500",children:ge.contactName})]}),n.jsx("span",{className:"text-[10px] text-slate-400",children:ge.submittedAt?new Date(ge.submittedAt).toLocaleDateString():""})]}),ge.feedback&&n.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:ge.feedback})]})]},ge.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),w.length===0?n.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):n.jsx("div",{className:"space-y-4",children:w.map(ge=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",ge.sentAt?new Date(ge.sentAt).toLocaleDateString():""]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ge.status==="completed"?"bg-green-100 text-green-700":ge.status==="sent"?"bg-yellow-100 text-yellow-700":ge.status==="expired"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-700"}`,children:ge.status==="sent"?"Sent":ge.status==="completed"?"Completed":ge.status==="expired"?"Expired":ge.status})]}),n.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[ge.recipients?.length||0," recipient(s)  ",ge.responses?.length||0," response(s)"]}),ge.recipients&&ge.recipients.length>0&&n.jsxs("div",{className:"text-[11px] text-slate-500 mb-2",children:["Recipients:"," ",ge.recipients.slice(0,3).map(fe=>fe.email||fe.contactId).join(", "),ge.recipients.length>3&&n.jsxs("span",{className:"text-slate-400",children:[" ","+",ge.recipients.length-3," more"]})]}),ge.responses&&ge.responses.length>0&&n.jsx("div",{className:"mt-3 space-y-3",children:ge.responses.map(fe=>n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",fe.npsScore]}),n.jsx("span",{className:"text-xs text-slate-500",children:new Date(fe.submittedAt).toLocaleDateString()})]}),fe.answers.map((_e,Ue)=>_e.questionText&&_e.answer&&n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsx("span",{className:"font-medium text-slate-700",children:_e.questionText}),n.jsx("p",{className:"text-slate-600 mt-1",children:String(_e.answer)})]},Ue))]},fe.id))})]},ge.id))})]})]})})]})]}),A&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>_(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:ge=>ge.stopPropagation(),children:[n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),n.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:B.map(ge=>n.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[n.jsx("input",{type:"checkbox",checked:E.includes(ge.id),onChange:fe=>{fe.target.checked?F([...E,ge.id]):F(E.filter(_e=>_e!==ge.id))},className:"w-4 h-4 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:ge.name}),n.jsx("div",{className:"text-xs text-slate-500",children:ge.email})]})]},ge.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:q==="email",onChange:()=>H("email"),className:"w-4 h-4 text-indigo-600"}),n.jsx(es,{className:"w-4 h-4"}),n.jsx("span",{children:"Email"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:q==="link",onChange:()=>H("link"),className:"w-4 h-4 text-indigo-600"}),n.jsx(Hj,{className:"w-4 h-4"}),n.jsx("span",{children:"Copy Link"})]})]}),q==="link"&&n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:de,disabled:Q||E.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Q&&n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),re&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>X(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:ge=>ge.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),n.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:O?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ee?n.jsx(ile,{template:ee,setTemplate:W,onClose:()=>X(!1),showSuccess:a,showError:s}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Bn,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),n.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),n.jsx("button",{onClick:()=>{Be()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},ile=({template:e,setTemplate:t,onClose:r,showSuccess:a,showError:s})=>{const[i,o]=D.useState(e),[l,c]=D.useState(!1),d=async()=>{try{c(!0),(await Yne({questions:i.questions,name:i.name})).success&&(a("Survey template updated successfully"),t(i),r())}catch(b){s(b.message||"Failed to update survey template")}finally{c(!1)}},u=()=>{const b={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,b]})},f=b=>{const v=i.questions.find(g=>g.order===1);if(v&&v.id===b){s("Cannot delete Q1 (the first NPS question)");return}o({...i,questions:i.questions.filter(g=>g.id!==b).map((g,y)=>({...g,order:y+1}))})},p=(b,v)=>{o({...i,questions:i.questions.map(g=>g.id===b?{...g,...v}:g)})},m=(b,v)=>{const g=[...i.questions],y=g.findIndex(S=>S.id===b);if(y===-1)return;const w=g.find(S=>S.order===1);if(w&&w.id===b){s("Q1 must remain first");return}if(v==="up"&&y<=0){s("Cannot move question before Q1");return}const j=v==="up"?y-1:y+1;if(j<0||j>=g.length)return;[g[y],g[j]]=[g[j],g[y]];const N=g.map((S,A)=>({...S,order:A+1}));o({...i,questions:N})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:i.name||"",onChange:b=>o({...i,name:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),n.jsxs("button",{onClick:u,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Question"]})]}),n.jsx("div",{className:"space-y-4",children:i.questions.map((b,v)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",b.order]}),n.jsxs("div",{className:"flex items-center gap-2",children:[v>0&&b.type!=="nps"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>m(b.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:n.jsx(Yd,{className:"w-4 h-4 text-slate-500"})}),n.jsx("button",{onClick:()=>m(b.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:n.jsx(SU,{className:"w-4 h-4 text-slate-500"})})]}),!(b.order===1&&b.type==="nps")&&n.jsx("button",{onClick:()=>f(b.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:n.jsx(Xt,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),n.jsxs("select",{value:b.type,onChange:g=>p(b.id,{type:g.target.value}),disabled:b.order===1&&b.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[n.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),n.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),n.jsx("option",{value:"free_text",children:"Free Text"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),n.jsx("input",{type:"text",value:b.text,onChange:g=>p(b.id,{text:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),b.type==="multiple_choice"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Options"}),n.jsxs("div",{className:"space-y-2",children:[(b.options||[]).map((g,y)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:g,onChange:w=>{const j=[...b.options||[]];j[y]=w.target.value,p(b.id,{options:j})},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${y+1}`}),n.jsx("button",{onClick:()=>{const w=[...b.options||[]];w.splice(y,1),p(b.id,{options:w})},className:"p-2 hover:bg-red-50 rounded-lg text-red-500 transition-colors",title:"Remove option",children:n.jsx(Xt,{className:"w-4 h-4"})})]},y)),n.jsxs("button",{onClick:()=>{const g=b.options||[];p(b.id,{options:[...g,""]})},className:"w-full px-3 py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-600 hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Option"]}),(!b.options||b.options.length===0)&&n.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:'No options yet. Click "Add Option" to add choices.'})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:b.required,onChange:g=>p(b.id,{required:g.target.checked}),disabled:b.order===1&&b.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),n.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},b.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},ole=({surveyId:e})=>{const[t,r]=D.useState(null),[a,s]=D.useState(!0),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[d,u]=D.useState(null),[f,p]=D.useState({}),[m,b]=D.useState(null);D.useEffect(()=>{v()},[e]);const v=async()=>{try{s(!0);const w=await Gne(e);if(w.success&&w.data){r(w.data);const j={};w.data.templateSnapshot.forEach(A=>{A.type==="nps"?j[A.id]=null:(A.type,j[A.id]="")}),p(j);const S=new URLSearchParams(window.location.search).get("contact");S?b(S):w.data.recipients&&w.data.recipients.length>0&&b(w.data.recipients[0].contactId)}else u("Survey not found")}catch(w){u(w.message||"Failed to load survey")}finally{s(!1)}},g=(w,j)=>{p(N=>({...N,[w]:j}))},y=async()=>{if(!m){u("Contact information is missing");return}const w=t.templateSnapshot.find(j=>j.type==="nps");if(w&&(f[w.id]===null||f[w.id]===void 0)){u("Please answer the NPS question (required)");return}for(const j of t.templateSnapshot)if(j.required&&(!f[j.id]||f[j.id]==="")){u(`Please answer: ${j.text}`);return}try{o(!0),u(null);const j=Object.entries(f).filter(([N,S])=>S!==null&&S!=="").map(([N,S])=>({questionId:N,answer:S}));await Qne(e,{contactId:m,answers:j}),c(!0)}catch(j){u(j.message||"Failed to submit survey")}finally{o(!1)}};return a?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx(pt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):d&&!t?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Bn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),n.jsx("p",{className:"text-slate-600",children:d})]})}):l?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[n.jsx(gn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),n.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(w=>w.type==="nps"),n.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),n.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),d&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-700 text-sm",children:d})}),n.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((w,j)=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[w.text,w.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),w.type==="nps"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>n.jsx("button",{type:"button",onClick:()=>g(w.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${f[w.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[n.jsx("span",{children:"Not at all likely"}),n.jsx("span",{children:"Extremely likely"})]})]}),w.type==="multiple_choice"&&n.jsx("div",{className:"space-y-2",children:w.options?.map(N=>n.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:w.id,value:N,checked:f[w.id]===N,onChange:S=>g(w.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-700",children:N})]},N))}),w.type==="free_text"&&n.jsx("textarea",{value:f[w.id]||"",onChange:N=>g(w.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},w.id))}),n.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:n.jsx("button",{onClick:y,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};var hb={};hb.version="0.18.5";var _M=1252,lle=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],h3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},m3=function(e){lle.indexOf(e)!=-1&&(_M=h3[0]=e)};function cle(){m3(1252)}var Vd=function(e){m3(e)};function p3(){Vd(1200),cle()}function qI(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function dle(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function CM(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Xp=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?dle(e.slice(2)):t==254&&r==255?CM(e.slice(2)):t==65279?e.slice(1):e},Ev=function(t){return String.fromCharCode(t)},$I=function(t){return String.fromCharCode(t)},tg,f0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function rg(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,s=e.charCodeAt(d++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=f0.charAt(i)+f0.charAt(o)+f0.charAt(l)+f0.charAt(c);return t}function Cc(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=f0.indexOf(e.charAt(d++)),o=f0.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=f0.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=f0.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Ln=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Df=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function w0(e){return Ln?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function zI(e){return Ln?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var wc=function(t){return Ln?Df(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function py(e){if(typeof ArrayBuffer>"u")return wc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function D0(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function ule(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function x3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return x3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var oo=Ln?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Df(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function fle(e){for(var t=[],r=0,a=e.length+250,s=w0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=w0(65535),a=65530)}return t.push(s.slice(0,r)),oo(t)}var Al=/\u0000/g,Yp=/[\u0001-\u0006]/g;function Nm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Gd(e,t){var r=""+e;return r.length>=t?r:Ks("0",t-r.length)+r}function g3(e,t){var r=""+e;return r.length>=t?r:Ks(" ",t-r.length)+r}function mb(e,t){var r=""+e;return r.length>=t?r:r+Ks(" ",t-r.length)}function hle(e,t){var r=""+Math.round(e);return r.length>=t?r:Ks("0",t-r.length)+r}function mle(e,t){var r=""+e;return r.length>=t?r:Ks("0",t-r.length)+r}var HI=Math.pow(2,32);function am(e,t){if(e>HI||e<-HI)return hle(e,t);var r=Math.round(e);return mle(r,t)}function pb(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var WI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],vj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ple(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var sn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},VI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xb(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,d=0,u=0,f=Math.floor(s);d<t&&(f=Math.floor(s),l=f*o+i,u=f*d+c,!(s-f<5e-8));)s=1/(s-f),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var p=Math.floor(a*l/u);return[p,a*l-p*u,u]}function ch(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Nle(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var AM=new Date(1899,11,31,0,0,0),gle=AM.getTime(),vle=new Date(1900,2,1,0,0,0);function EM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=vle&&(r+=1440*60*1e3),(r-(gle+(e.getTimezoneOffset()-AM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function v3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ble(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function yle(e){var t=e<0?12:11,r=v3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function wle(e){var t=v3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ng(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=yle(e):t===10?r=e.toFixed(10).substr(0,12):r=wle(e),v3(ble(r.toUpperCase()))}function Ah(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ng(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ud(14,EM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Nle(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function jle(e,t,r,a){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return vj[r.m-1][1];case 5:return vj[r.m-1][0];default:return vj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return WI[r.q][0];default:return WI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Gd(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Gd(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Gd(c,d):"";return u}function h0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var TM=/%/g;function kle(e,t,r){var a=t.replace(TM,""),s=t.length-a.length;return jf(e,a,r*Math.pow(10,2*s))+Ks("%",s)}function Sle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return jf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function OM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+OM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var PM=/# (\?+)( ?)\/( ?)(\d+)/;function _le(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Ks(" ",e[1].length+1+e[4].length):g3(o,e[1].length)+e[2]+"/"+e[3]+Gd(l,e[4].length))}function Cle(e,t,r){return r+(t===0?"":""+t)+Ks(" ",e[1].length+2+e[4].length)}var IM=/^#*0*\.([0#]+)/,DM=/\).*[0#]/,LM=/\(###\) ###\\?-####/;function jl(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function GI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function KI(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Ale(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Ele(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Yc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(DM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Yc("n",a,r):"("+Yc("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Sle(e,t,r);if(t.indexOf("%")!==-1)return kle(e,t,r);if(t.indexOf("E")!==-1)return OM(t,r);if(t.charCodeAt(0)===36)return"$"+Yc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+am(c,t.length);if(t.match(/^[#?]+$/))return s=am(r,0),s==="0"&&(s=""),s.length>t.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(PM))return _le(i,c,d);if(t.match(/^#+0+$/))return d+am(c,t.length-t.indexOf("0"));if(i=t.match(IM))return s=GI(r,i[1].length).replace(/^([^\.]+)$/,"$1."+jl(i[1])).replace(/\.$/,"."+jl(i[1])).replace(/\.(\d*)$/,function(b,v){return"."+v+Ks("0",jl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+GI(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+h0(am(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Yc(e,t,-r):h0(""+(Math.floor(r)+Ale(r,i[1].length)))+"."+Gd(KI(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Yc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Nm(Yc(e,t.replace(/[\\-]/g,""),r)),o=0,Nm(Nm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(LM))return s=Yc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=xb(c,Math.pow(10,o)-1,!1),s=""+d,u=jf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=mb(l[2],o),u.length<i[4].length&&(u=jl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=xb(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?g3(l[1],o)+i[2]+"/"+i[3]+mb(l[2],o):Ks(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=am(r,0),t.length<=s.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,p=t.length-s.length-f;return jl(t.substr(0,f)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=KI(r,i[1].length),r<0?"-"+Yc(e,t,-r):h0(Ele(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Gd(0,3-b.length):"")+b})+"."+Gd(o,i[1].length);switch(t){case"###,##0.00":return Yc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=h0(am(c,0));return m!=="0"?d+m:"";case"###,###.00":return Yc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Yc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Tle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return jf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Ole(e,t,r){var a=t.replace(TM,""),s=t.length-a.length;return jf(e,a,r*Math.pow(10,2*s))+Ks("%",s)}function FM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+FM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Nu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(DM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Nu("n",a,r):"("+Nu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Tle(e,t,r);if(t.indexOf("%")!==-1)return Ole(e,t,r);if(t.indexOf("E")!==-1)return FM(t,r);if(t.charCodeAt(0)===36)return"$"+Nu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Gd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(PM))return Cle(i,c,d);if(t.match(/^#+0+$/))return d+Gd(c,t.length-t.indexOf("0"));if(i=t.match(IM))return s=(""+r).replace(/^([^\.]+)$/,"$1."+jl(i[1])).replace(/\.$/,"."+jl(i[1])),s=s.replace(/\.(\d*)$/,function(b,v){return"."+v+Ks("0",jl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+h0(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Nu(e,t,-r):h0(""+r)+"."+Ks("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Nu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Nm(Nu(e,t.replace(/[\\-]/g,""),r)),o=0,Nm(Nm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(LM))return s=Nu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=xb(c,Math.pow(10,o)-1,!1),s=""+d,u=jf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=mb(l[2],o),u.length<i[4].length&&(u=jl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=xb(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?g3(l[1],o)+i[2]+"/"+i[3]+mb(l[2],o):Ks(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,p=t.length-s.length-f;return jl(t.substr(0,f)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Nu(e,t,-r):h0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Gd(0,3-b.length):"")+b})+"."+Gd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=h0(""+c);return m!=="0"?d+m:"";default:if(t.match(/\.[0#?]*$/))return Nu(e,t.slice(0,t.lastIndexOf(".")),r)+jl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function jf(e,t,r){return(r|0)===r?Nu(e,t,r):Yc(e,t,r)}function Ple(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var MM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function hp(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":pb(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(MM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Ile(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",d,u,f,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!pb(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),b=m==="("||m===")"?m:"t";s[s.length]={t:b,v:m},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=ch(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=ch(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var v={t:l,v:l};if(d==null&&(d=ch(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(v.v=d.H>=12?"P":"A"),v.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(v.v=d.H>=12?"PM":"AM"),v.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(v.v=d.H>=12?"":""),v.t="T",o+=5,p="h"):(v.t="t",++o),d==null&&v.t==="T")return"";s[s.length]=v,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(MM)){if(d==null&&(d=ch(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",hp(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var g=0,y=0,w;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,c="h",g<1&&(g=1);break;case"s":(w=s[o].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[o].v.match(/[Hh]/)&&(g=1),g<2&&s[o].v.match(/[Mm]/)&&(g=2),g<3&&s[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",N;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=jle(s[o].t.charCodeAt(0),s[o].v,d,y),s[o].t="t";break;case"n":case"?":for(N=o+1;s[N]!=null&&((l=s[N].t)==="?"||l==="D"||(l===" "||l==="t")&&s[N+1]!=null&&(s[N+1].t==="?"||s[N+1].t==="t"&&s[N+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[N].v==="/"||s[N].v===" "&&s[N+1]!=null&&s[N+1].t=="?"));)s[o].v+=s[N].v,s[N]={v:"",t:";"},++N;j+=s[o].v,o=N-1;break;case"G":s[o].t="t",s[o].v=Ah(t,r);break}var S="",A,_;if(j.length>0){j.charCodeAt(0)==40?(A=t<0&&j.charCodeAt(0)===45?-t:t,_=jf("n",j,A)):(A=t<0&&a>1?-t:t,_=jf("n",j,A),A<0&&s[0]&&s[0].t=="t"&&(_=_.substr(1),s[0].v="-"+s[0].v)),N=_.length-1;var P=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){P=o;break}var I=s.length;if(P===s.length&&_.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(N>=s[o].v.length-1?(N-=s[o].v.length,s[o].v=_.substr(N+1,s[o].v.length)):N<0?s[o].v="":(s[o].v=_.substr(0,N+1),N=-1),s[o].t="t",I=o);N>=0&&I<s.length&&(s[I].v=_.substr(0,N+1)+s[I].v)}else if(P!==s.length&&_.indexOf("E")===-1){for(N=_.indexOf(".")-1,o=P;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)N>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=_.charAt(N--)+S);s[o].v=S,s[o].t="t",I=o}for(N>=0&&I<s.length&&(s[I].v=_.substr(0,N+1)+s[I].v),N=_.indexOf(".")+1,o=P;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==P)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)N<_.length&&(S+=_.charAt(N++));s[o].v=S,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(A=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=jf(s[o].t,s[o].v,A),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var XI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function YI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Dle(e,t){var r=Ple(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(XI),l=r[1].match(XI);return YI(t,o)?[a,r[0]]:YI(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function ud(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:sn)[e],a==null&&(a=r.table&&r.table[VI[e]]||sn[VI[e]]),a==null&&(a=xle[e]||"General");break}if(pb(a,0))return Ah(t,r);t instanceof Date&&(t=EM(t,r.date1904));var s=Dle(a,t);if(pb(s[1]))return Ah(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Ile(s[1],t,r,s[0])}function kf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(sn[r]==null){t<0&&(t=r);continue}if(sn[r]==e){t=r;break}}t<0&&(t=391)}return sn[t]=e,t}function xy(e){for(var t=0;t!=392;++t)e[t]!==void 0&&kf(e[t],t)}function mp(){sn=ple()}var Lle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},RM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Fle(e){var t=typeof e=="number"?sn[e]:e;return t=t.replace(RM,"(\\d+)"),new RegExp("^"+t+"$")}function Mle(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(RM)||[]).forEach(function(f,p){var m=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=m;break;case"d":i=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:s=m;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&s==-1&&i==-1?u:d+"T"+u}var Rle=(function(){var e={};e.version="1.2.0";function t(){for(var _=0,P=new Array(256),I=0;I!=256;++I)_=I,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,P[I]=_;return typeof Int32Array<"u"?new Int32Array(P):P}var r=t();function a(_){var P=0,I=0,B=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)T[B]=_[B];for(B=0;B!=256;++B)for(I=_[B],P=256+B;P<4096;P+=256)I=T[P]=I>>>8^_[I&255];var E=[];for(B=1;B!=16;++B)E[B-1]=typeof Int32Array<"u"?T.subarray(B*256,B*256+256):T.slice(B*256,B*256+256);return E}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],f=s[6],p=s[7],m=s[8],b=s[9],v=s[10],g=s[11],y=s[12],w=s[13],j=s[14];function N(_,P){for(var I=P^-1,B=0,T=_.length;B<T;)I=I>>>8^r[(I^_.charCodeAt(B++))&255];return~I}function S(_,P){for(var I=P^-1,B=_.length-15,T=0;T<B;)I=j[_[T++]^I&255]^w[_[T++]^I>>8&255]^y[_[T++]^I>>16&255]^g[_[T++]^I>>>24]^v[_[T++]]^b[_[T++]]^m[_[T++]]^p[_[T++]]^f[_[T++]]^u[_[T++]]^d[_[T++]]^c[_[T++]]^l[_[T++]]^o[_[T++]]^i[_[T++]]^r[_[T++]];for(B+=15;T<B;)I=I>>>8^r[(I^_[T++])&255];return~I}function A(_,P){for(var I=P^-1,B=0,T=_.length,E=0,F=0;B<T;)E=_.charCodeAt(B++),E<128?I=I>>>8^r[(I^E)&255]:E<2048?(I=I>>>8^r[(I^(192|E>>6&31))&255],I=I>>>8^r[(I^(128|E&63))&255]):E>=55296&&E<57344?(E=(E&1023)+64,F=_.charCodeAt(B++)&1023,I=I>>>8^r[(I^(240|E>>8&7))&255],I=I>>>8^r[(I^(128|E>>2&63))&255],I=I>>>8^r[(I^(128|F>>6&15|(E&3)<<4))&255],I=I>>>8^r[(I^(128|F&63))&255]):(I=I>>>8^r[(I^(224|E>>12&15))&255],I=I>>>8^r[(I^(128|E>>6&63))&255],I=I>>>8^r[(I^(128|E&63))&255]);return~I}return e.table=r,e.bstr=N,e.buf=S,e.str=A,e})(),Kr=(function(){var t={};t.version="1.2.1";function r(ne,je){for(var Se=ne.split("/"),oe=je.split("/"),ve=0,Ae=0,Ke=Math.min(Se.length,oe.length);ve<Ke;++ve){if(Ae=Se[ve].length-oe[ve].length)return Ae;if(Se[ve]!=oe[ve])return Se[ve]<oe[ve]?-1:1}return Se.length-oe.length}function a(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:a(ne.slice(0,-1));var je=ne.lastIndexOf("/");return je===-1?ne:ne.slice(0,je+1)}function s(ne){if(ne.charAt(ne.length-1)=="/")return s(ne.slice(0,-1));var je=ne.lastIndexOf("/");return je===-1?ne:ne.slice(je+1)}function i(ne,je){typeof je=="string"&&(je=new Date(je));var Se=je.getHours();Se=Se<<6|je.getMinutes(),Se=Se<<5|je.getSeconds()>>>1,ne.write_shift(2,Se);var oe=je.getFullYear()-1980;oe=oe<<4|je.getMonth()+1,oe=oe<<5|je.getDate(),ne.write_shift(2,oe)}function o(ne){var je=ne.read_shift(2)&65535,Se=ne.read_shift(2)&65535,oe=new Date,ve=Se&31;Se>>>=5;var Ae=Se&15;Se>>>=4,oe.setMilliseconds(0),oe.setFullYear(Se+1980),oe.setMonth(Ae-1),oe.setDate(ve);var Ke=je&31;je>>>=5;var nt=je&63;return je>>>=6,oe.setHours(je),oe.setMinutes(nt),oe.setSeconds(Ke<<1),oe}function l(ne){Oo(ne,0);for(var je={},Se=0;ne.l<=ne.length-4;){var oe=ne.read_shift(2),ve=ne.read_shift(2),Ae=ne.l+ve,Ke={};oe===21589&&(Se=ne.read_shift(1),Se&1&&(Ke.mtime=ne.read_shift(4)),ve>5&&(Se&2&&(Ke.atime=ne.read_shift(4)),Se&4&&(Ke.ctime=ne.read_shift(4))),Ke.mtime&&(Ke.mt=new Date(Ke.mtime*1e3))),ne.l=Ae,je[oe]=Ke}return je}var c;function d(){return c||(c={})}function u(ne,je){if(ne[0]==80&&ne[1]==75)return Qt(ne,je);if((ne[0]|32)==109&&(ne[1]|32)==105)return qr(ne,je);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var Se=3,oe=512,ve=0,Ae=0,Ke=0,nt=0,Qe=0,tt=[],Xe=ne.slice(0,512);Oo(Xe,0);var Me=f(Xe);switch(Se=Me[0],Se){case 3:oe=512;break;case 4:oe=4096;break;case 0:if(Me[1]==0)return Qt(ne,je);default:throw new Error("Major Version: Expected 3 or 4 saw "+Se)}oe!==512&&(Xe=ne.slice(0,oe),Oo(Xe,28));var it=ne.slice(0,oe);p(Xe,Se);var bt=Xe.read_shift(4,"i");if(Se===3&&bt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+bt);Xe.l+=4,Ke=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),nt=Xe.read_shift(4,"i"),ve=Xe.read_shift(4,"i"),Qe=Xe.read_shift(4,"i"),Ae=Xe.read_shift(4,"i");for(var It=-1,Dt=0;Dt<109&&(It=Xe.read_shift(4,"i"),!(It<0));++Dt)tt[Dt]=It;var xr=m(ne,oe);g(Qe,Ae,xr,oe,tt);var Rr=w(xr,Ke,tt,oe);Rr[Ke].name="!Directory",ve>0&&nt!==F&&(Rr[nt].name="!MiniFAT"),Rr[tt[0]].name="!FAT",Rr.fat_addrs=tt,Rr.ssz=oe;var Yr={},Nn=[],Ps=[],Sn=[];j(Ke,Rr,xr,Nn,ve,Yr,Ps,nt),b(Ps,Sn,Nn),Nn.shift();var ts={FileIndex:Ps,FullPaths:Sn};return je&&je.raw&&(ts.raw={header:it,sectors:xr}),ts}function f(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(q,"Header Signature: "),ne.l+=16;var je=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),je]}function p(ne,je){var Se=9;switch(ne.l+=2,Se=ne.read_shift(2)){case 9:if(je!=3)throw new Error("Sector Shift: Expected 9 saw "+Se);break;case 12:if(je!=4)throw new Error("Sector Shift: Expected 12 saw "+Se);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Se)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function m(ne,je){for(var Se=Math.ceil(ne.length/je)-1,oe=[],ve=1;ve<Se;++ve)oe[ve-1]=ne.slice(ve*je,(ve+1)*je);return oe[Se-1]=ne.slice(Se*je),oe}function b(ne,je,Se){for(var oe=0,ve=0,Ae=0,Ke=0,nt=0,Qe=Se.length,tt=[],Xe=[];oe<Qe;++oe)tt[oe]=Xe[oe]=oe,je[oe]=Se[oe];for(;nt<Xe.length;++nt)oe=Xe[nt],ve=ne[oe].L,Ae=ne[oe].R,Ke=ne[oe].C,tt[oe]===oe&&(ve!==-1&&tt[ve]!==ve&&(tt[oe]=tt[ve]),Ae!==-1&&tt[Ae]!==Ae&&(tt[oe]=tt[Ae])),Ke!==-1&&(tt[Ke]=oe),ve!==-1&&oe!=tt[oe]&&(tt[ve]=tt[oe],Xe.lastIndexOf(ve)<nt&&Xe.push(ve)),Ae!==-1&&oe!=tt[oe]&&(tt[Ae]=tt[oe],Xe.lastIndexOf(Ae)<nt&&Xe.push(Ae));for(oe=1;oe<Qe;++oe)tt[oe]===oe&&(Ae!==-1&&tt[Ae]!==Ae?tt[oe]=tt[Ae]:ve!==-1&&tt[ve]!==ve&&(tt[oe]=tt[ve]));for(oe=1;oe<Qe;++oe)if(ne[oe].type!==0){if(nt=oe,nt!=tt[nt])do nt=tt[nt],je[oe]=je[nt]+"/"+je[oe];while(nt!==0&&tt[nt]!==-1&&nt!=tt[nt]);tt[oe]=-1}for(je[0]+="/",oe=1;oe<Qe;++oe)ne[oe].type!==2&&(je[oe]+="/")}function v(ne,je,Se){for(var oe=ne.start,ve=ne.size,Ae=[],Ke=oe;Se&&ve>0&&Ke>=0;)Ae.push(je.slice(Ke*E,Ke*E+E)),ve-=E,Ke=th(Se,Ke*4);return Ae.length===0?Mt(0):oo(Ae).slice(0,ne.size)}function g(ne,je,Se,oe,ve){var Ae=F;if(ne===F){if(je!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var Ke=Se[ne],nt=(oe>>>2)-1;if(!Ke)return;for(var Qe=0;Qe<nt&&(Ae=th(Ke,Qe*4))!==F;++Qe)ve.push(Ae);g(th(Ke,oe-4),je-1,Se,oe,ve)}}function y(ne,je,Se,oe,ve){var Ae=[],Ke=[];ve||(ve=[]);var nt=oe-1,Qe=0,tt=0;for(Qe=je;Qe>=0;){ve[Qe]=!0,Ae[Ae.length]=Qe,Ke.push(ne[Qe]);var Xe=Se[Math.floor(Qe*4/oe)];if(tt=Qe*4&nt,oe<4+tt)throw new Error("FAT boundary crossed: "+Qe+" 4 "+oe);if(!ne[Xe])break;Qe=th(ne[Xe],tt)}return{nodes:Ae,data:l8([Ke])}}function w(ne,je,Se,oe){var ve=ne.length,Ae=[],Ke=[],nt=[],Qe=[],tt=oe-1,Xe=0,Me=0,it=0,bt=0;for(Xe=0;Xe<ve;++Xe)if(nt=[],it=Xe+je,it>=ve&&(it-=ve),!Ke[it]){Qe=[];var It=[];for(Me=it;Me>=0;){It[Me]=!0,Ke[Me]=!0,nt[nt.length]=Me,Qe.push(ne[Me]);var Dt=Se[Math.floor(Me*4/oe)];if(bt=Me*4&tt,oe<4+bt)throw new Error("FAT boundary crossed: "+Me+" 4 "+oe);if(!ne[Dt]||(Me=th(ne[Dt],bt),It[Me]))break}Ae[it]={nodes:nt,data:l8([Qe])}}return Ae}function j(ne,je,Se,oe,ve,Ae,Ke,nt){for(var Qe=0,tt=oe.length?2:0,Xe=je[ne].data,Me=0,it=0,bt;Me<Xe.length;Me+=128){var It=Xe.slice(Me,Me+128);Oo(It,64),it=It.read_shift(2),bt=S3(It,0,it-tt),oe.push(bt);var Dt={name:bt,type:It.read_shift(1),color:It.read_shift(1),L:It.read_shift(4,"i"),R:It.read_shift(4,"i"),C:It.read_shift(4,"i"),clsid:It.read_shift(16),state:It.read_shift(4,"i"),start:0,size:0},xr=It.read_shift(2)+It.read_shift(2)+It.read_shift(2)+It.read_shift(2);xr!==0&&(Dt.ct=N(It,It.l-8));var Rr=It.read_shift(2)+It.read_shift(2)+It.read_shift(2)+It.read_shift(2);Rr!==0&&(Dt.mt=N(It,It.l-8)),Dt.start=It.read_shift(4,"i"),Dt.size=It.read_shift(4,"i"),Dt.size<0&&Dt.start<0&&(Dt.size=Dt.type=0,Dt.start=F,Dt.name=""),Dt.type===5?(Qe=Dt.start,ve>0&&Qe!==F&&(je[Qe].name="!StreamData")):Dt.size>=4096?(Dt.storage="fat",je[Dt.start]===void 0&&(je[Dt.start]=y(Se,Dt.start,je.fat_addrs,je.ssz)),je[Dt.start].name=Dt.name,Dt.content=je[Dt.start].data.slice(0,Dt.size)):(Dt.storage="minifat",Dt.size<0?Dt.size=0:Qe!==F&&Dt.start!==F&&je[Qe]&&(Dt.content=v(Dt,je[Qe].data,(je[nt]||{}).data))),Dt.content&&Oo(Dt.content,0),Ae[bt]=Dt,Ke.push(Dt)}}function N(ne,je){return new Date((bc(ne,je+4)/1e7*Math.pow(2,32)+bc(ne,je)/1e7-11644473600)*1e3)}function S(ne,je){return d(),u(c.readFileSync(ne),je)}function A(ne,je){var Se=je&&je.type;switch(Se||Ln&&Buffer.isBuffer(ne)&&(Se="buffer"),Se||"base64"){case"file":return S(ne,je);case"base64":return u(wc(Cc(ne)),je);case"binary":return u(wc(ne),je)}return u(ne,je)}function _(ne,je){var Se=je||{},oe=Se.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=oe+"/",ne.FileIndex[0]={name:oe,type:5}),Se.CLSID&&(ne.FileIndex[0].clsid=Se.CLSID),P(ne)}function P(ne){var je="Sh33tJ5";if(!Kr.find(ne,"/"+je)){var Se=Mt(4);Se[0]=55,Se[1]=Se[3]=50,Se[2]=54,ne.FileIndex.push({name:je,type:2,content:Se,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+je),I(ne)}}function I(ne,je){_(ne);for(var Se=!1,oe=!1,ve=ne.FullPaths.length-1;ve>=0;--ve){var Ae=ne.FileIndex[ve];switch(Ae.type){case 0:oe?Se=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:oe=!0,isNaN(Ae.R*Ae.L*Ae.C)&&(Se=!0),Ae.R>-1&&Ae.L>-1&&Ae.R==Ae.L&&(Se=!0);break;default:Se=!0;break}}if(!(!Se&&!je)){var Ke=new Date(1987,1,19),nt=0,Qe=Object.create?Object.create(null):{},tt=[];for(ve=0;ve<ne.FullPaths.length;++ve)Qe[ne.FullPaths[ve]]=!0,ne.FileIndex[ve].type!==0&&tt.push([ne.FullPaths[ve],ne.FileIndex[ve]]);for(ve=0;ve<tt.length;++ve){var Xe=a(tt[ve][0]);oe=Qe[Xe],oe||(tt.push([Xe,{name:s(Xe).replace("/",""),type:1,clsid:Q,ct:Ke,mt:Ke,content:null}]),Qe[Xe]=!0)}for(tt.sort(function(bt,It){return r(bt[0],It[0])}),ne.FullPaths=[],ne.FileIndex=[],ve=0;ve<tt.length;++ve)ne.FullPaths[ve]=tt[ve][0],ne.FileIndex[ve]=tt[ve][1];for(ve=0;ve<tt.length;++ve){var Me=ne.FileIndex[ve],it=ne.FullPaths[ve];if(Me.name=s(it).replace("/",""),Me.L=Me.R=Me.C=-(Me.color=1),Me.size=Me.content?Me.content.length:0,Me.start=0,Me.clsid=Me.clsid||Q,ve===0)Me.C=tt.length>1?1:-1,Me.size=0,Me.type=5;else if(it.slice(-1)=="/"){for(nt=ve+1;nt<tt.length&&a(ne.FullPaths[nt])!=it;++nt);for(Me.C=nt>=tt.length?-1:nt,nt=ve+1;nt<tt.length&&a(ne.FullPaths[nt])!=a(it);++nt);Me.R=nt>=tt.length?-1:nt,Me.type=1}else a(ne.FullPaths[ve+1]||"")==a(it)&&(Me.R=ve+1),Me.type=2}}}function B(ne,je){var Se=je||{};if(Se.fileType=="mad")return tr(ne,Se);if(I(ne),Se.fileType==="zip")return Mr(ne,Se);var oe=(function(bt){for(var It=0,Dt=0,xr=0;xr<bt.FileIndex.length;++xr){var Rr=bt.FileIndex[xr];if(Rr.content){var Yr=Rr.content.length;Yr>0&&(Yr<4096?It+=Yr+63>>6:Dt+=Yr+511>>9)}}for(var Nn=bt.FullPaths.length+3>>2,Ps=It+7>>3,Sn=It+127>>7,ts=Ps+Dt+Nn+Sn,Wn=ts+127>>7,za=Wn<=109?0:Math.ceil((Wn-109)/127);ts+Wn+za+127>>7>Wn;)za=++Wn<=109?0:Math.ceil((Wn-109)/127);var Vn=[1,za,Wn,Sn,Nn,Dt,It,0];return bt.FileIndex[0].size=It<<6,Vn[7]=(bt.FileIndex[0].start=Vn[0]+Vn[1]+Vn[2]+Vn[3]+Vn[4]+Vn[5])+(Vn[6]+7>>3),Vn})(ne),ve=Mt(oe[7]<<9),Ae=0,Ke=0;{for(Ae=0;Ae<8;++Ae)ve.write_shift(1,H[Ae]);for(Ae=0;Ae<8;++Ae)ve.write_shift(2,0);for(ve.write_shift(2,62),ve.write_shift(2,3),ve.write_shift(2,65534),ve.write_shift(2,9),ve.write_shift(2,6),Ae=0;Ae<3;++Ae)ve.write_shift(2,0);for(ve.write_shift(4,0),ve.write_shift(4,oe[2]),ve.write_shift(4,oe[0]+oe[1]+oe[2]+oe[3]-1),ve.write_shift(4,0),ve.write_shift(4,4096),ve.write_shift(4,oe[3]?oe[0]+oe[1]+oe[2]-1:F),ve.write_shift(4,oe[3]),ve.write_shift(-4,oe[1]?oe[0]-1:F),ve.write_shift(4,oe[1]),Ae=0;Ae<109;++Ae)ve.write_shift(-4,Ae<oe[2]?oe[1]+Ae:-1)}if(oe[1])for(Ke=0;Ke<oe[1];++Ke){for(;Ae<236+Ke*127;++Ae)ve.write_shift(-4,Ae<oe[2]?oe[1]+Ae:-1);ve.write_shift(-4,Ke===oe[1]-1?F:Ke+1)}var nt=function(bt){for(Ke+=bt;Ae<Ke-1;++Ae)ve.write_shift(-4,Ae+1);bt&&(++Ae,ve.write_shift(-4,F))};for(Ke=Ae=0,Ke+=oe[1];Ae<Ke;++Ae)ve.write_shift(-4,J.DIFSECT);for(Ke+=oe[2];Ae<Ke;++Ae)ve.write_shift(-4,J.FATSECT);nt(oe[3]),nt(oe[4]);for(var Qe=0,tt=0,Xe=ne.FileIndex[0];Qe<ne.FileIndex.length;++Qe)Xe=ne.FileIndex[Qe],Xe.content&&(tt=Xe.content.length,!(tt<4096)&&(Xe.start=Ke,nt(tt+511>>9)));for(nt(oe[6]+7>>3);ve.l&511;)ve.write_shift(-4,J.ENDOFCHAIN);for(Ke=Ae=0,Qe=0;Qe<ne.FileIndex.length;++Qe)Xe=ne.FileIndex[Qe],Xe.content&&(tt=Xe.content.length,!(!tt||tt>=4096)&&(Xe.start=Ke,nt(tt+63>>6)));for(;ve.l&511;)ve.write_shift(-4,J.ENDOFCHAIN);for(Ae=0;Ae<oe[4]<<2;++Ae){var Me=ne.FullPaths[Ae];if(!Me||Me.length===0){for(Qe=0;Qe<17;++Qe)ve.write_shift(4,0);for(Qe=0;Qe<3;++Qe)ve.write_shift(4,-1);for(Qe=0;Qe<12;++Qe)ve.write_shift(4,0);continue}Xe=ne.FileIndex[Ae],Ae===0&&(Xe.start=Xe.size?Xe.start-1:F);var it=Ae===0&&Se.root||Xe.name;if(tt=2*(it.length+1),ve.write_shift(64,it,"utf16le"),ve.write_shift(2,tt),ve.write_shift(1,Xe.type),ve.write_shift(1,Xe.color),ve.write_shift(-4,Xe.L),ve.write_shift(-4,Xe.R),ve.write_shift(-4,Xe.C),Xe.clsid)ve.write_shift(16,Xe.clsid,"hex");else for(Qe=0;Qe<4;++Qe)ve.write_shift(4,0);ve.write_shift(4,Xe.state||0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,Xe.start),ve.write_shift(4,Xe.size),ve.write_shift(4,0)}for(Ae=1;Ae<ne.FileIndex.length;++Ae)if(Xe=ne.FileIndex[Ae],Xe.size>=4096)if(ve.l=Xe.start+1<<9,Ln&&Buffer.isBuffer(Xe.content))Xe.content.copy(ve,ve.l,0,Xe.size),ve.l+=Xe.size+511&-512;else{for(Qe=0;Qe<Xe.size;++Qe)ve.write_shift(1,Xe.content[Qe]);for(;Qe&511;++Qe)ve.write_shift(1,0)}for(Ae=1;Ae<ne.FileIndex.length;++Ae)if(Xe=ne.FileIndex[Ae],Xe.size>0&&Xe.size<4096)if(Ln&&Buffer.isBuffer(Xe.content))Xe.content.copy(ve,ve.l,0,Xe.size),ve.l+=Xe.size+63&-64;else{for(Qe=0;Qe<Xe.size;++Qe)ve.write_shift(1,Xe.content[Qe]);for(;Qe&63;++Qe)ve.write_shift(1,0)}if(Ln)ve.l=ve.length;else for(;ve.l<ve.length;)ve.write_shift(1,0);return ve}function T(ne,je){var Se=ne.FullPaths.map(function(Qe){return Qe.toUpperCase()}),oe=Se.map(function(Qe){var tt=Qe.split("/");return tt[tt.length-(Qe.slice(-1)=="/"?2:1)]}),ve=!1;je.charCodeAt(0)===47?(ve=!0,je=Se[0].slice(0,-1)+je):ve=je.indexOf("/")!==-1;var Ae=je.toUpperCase(),Ke=ve===!0?Se.indexOf(Ae):oe.indexOf(Ae);if(Ke!==-1)return ne.FileIndex[Ke];var nt=!Ae.match(Yp);for(Ae=Ae.replace(Al,""),nt&&(Ae=Ae.replace(Yp,"!")),Ke=0;Ke<Se.length;++Ke)if((nt?Se[Ke].replace(Yp,"!"):Se[Ke]).replace(Al,"")==Ae||(nt?oe[Ke].replace(Yp,"!"):oe[Ke]).replace(Al,"")==Ae)return ne.FileIndex[Ke];return null}var E=64,F=-2,q="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(ne,je,Se){d();var oe=B(ne,Se);c.writeFileSync(je,oe)}function X(ne){for(var je=new Array(ne.length),Se=0;Se<ne.length;++Se)je[Se]=String.fromCharCode(ne[Se]);return je.join("")}function ee(ne,je){var Se=B(ne,je);switch(je&&je.type||"buffer"){case"file":return d(),c.writeFileSync(je.filename,Se),Se;case"binary":return typeof Se=="string"?Se:X(Se);case"base64":return rg(typeof Se=="string"?Se:X(Se));case"buffer":if(Ln)return Buffer.isBuffer(Se)?Se:Df(Se);case"array":return typeof Se=="string"?wc(Se):Se}return Se}var W;function O(ne){try{var je=ne.InflateRaw,Se=new je;if(Se._processChunk(new Uint8Array([3,0]),Se._finishFlushFlag),Se.bytesRead)W=ne;else throw new Error("zlib does not expose bytesRead")}catch(oe){console.error("cannot use native zlib: "+(oe.message||oe))}}function z(ne,je){if(!W)return jt(ne,je);var Se=W.InflateRaw,oe=new Se,ve=oe._processChunk(ne.slice(ne.l),oe._finishFlushFlag);return ne.l+=oe.bytesRead,ve}function V(ne){return W?W.deflateRawSync(ne):qe(ne)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function xe(ne){var je=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(je>>16|je>>8|je)&255}for(var ie=typeof Uint8Array<"u",ue=ie?new Uint8Array(256):[],Be=0;Be<256;++Be)ue[Be]=xe(Be);function me(ne,je){var Se=ue[ne&255];return je<=8?Se>>>8-je:(Se=Se<<8|ue[ne>>8&255],je<=16?Se>>>16-je:(Se=Se<<8|ue[ne>>16&255],Se>>>24-je))}function $e(ne,je){var Se=je&7,oe=je>>>3;return(ne[oe]|(Se<=6?0:ne[oe+1]<<8))>>>Se&3}function Oe(ne,je){var Se=je&7,oe=je>>>3;return(ne[oe]|(Se<=5?0:ne[oe+1]<<8))>>>Se&7}function le(ne,je){var Se=je&7,oe=je>>>3;return(ne[oe]|(Se<=4?0:ne[oe+1]<<8))>>>Se&15}function te(ne,je){var Se=je&7,oe=je>>>3;return(ne[oe]|(Se<=3?0:ne[oe+1]<<8))>>>Se&31}function Te(ne,je){var Se=je&7,oe=je>>>3;return(ne[oe]|(Se<=1?0:ne[oe+1]<<8))>>>Se&127}function we(ne,je,Se){var oe=je&7,ve=je>>>3,Ae=(1<<Se)-1,Ke=ne[ve]>>>oe;return Se<8-oe||(Ke|=ne[ve+1]<<8-oe,Se<16-oe)||(Ke|=ne[ve+2]<<16-oe,Se<24-oe)||(Ke|=ne[ve+3]<<24-oe),Ke&Ae}function Ie(ne,je,Se){var oe=je&7,ve=je>>>3;return oe<=5?ne[ve]|=(Se&7)<<oe:(ne[ve]|=Se<<oe&255,ne[ve+1]=(Se&7)>>8-oe),je+3}function he(ne,je,Se){var oe=je&7,ve=je>>>3;return Se=(Se&1)<<oe,ne[ve]|=Se,je+1}function de(ne,je,Se){var oe=je&7,ve=je>>>3;return Se<<=oe,ne[ve]|=Se&255,Se>>>=8,ne[ve+1]=Se,je+8}function Ce(ne,je,Se){var oe=je&7,ve=je>>>3;return Se<<=oe,ne[ve]|=Se&255,Se>>>=8,ne[ve+1]=Se&255,ne[ve+2]=Se>>>8,je+16}function Ve(ne,je){var Se=ne.length,oe=2*Se>je?2*Se:je+5,ve=0;if(Se>=je)return ne;if(Ln){var Ae=zI(oe);if(ne.copy)ne.copy(Ae);else for(;ve<ne.length;++ve)Ae[ve]=ne[ve];return Ae}else if(ie){var Ke=new Uint8Array(oe);if(Ke.set)Ke.set(ne);else for(;ve<Se;++ve)Ke[ve]=ne[ve];return Ke}return ne.length=oe,ne}function ge(ne){for(var je=new Array(ne),Se=0;Se<ne;++Se)je[Se]=0;return je}function fe(ne,je,Se){var oe=1,ve=0,Ae=0,Ke=0,nt=0,Qe=ne.length,tt=ie?new Uint16Array(32):ge(32);for(Ae=0;Ae<32;++Ae)tt[Ae]=0;for(Ae=Qe;Ae<Se;++Ae)ne[Ae]=0;Qe=ne.length;var Xe=ie?new Uint16Array(Qe):ge(Qe);for(Ae=0;Ae<Qe;++Ae)tt[ve=ne[Ae]]++,oe<ve&&(oe=ve),Xe[Ae]=0;for(tt[0]=0,Ae=1;Ae<=oe;++Ae)tt[Ae+16]=nt=nt+tt[Ae-1]<<1;for(Ae=0;Ae<Qe;++Ae)nt=ne[Ae],nt!=0&&(Xe[Ae]=tt[nt+16]++);var Me=0;for(Ae=0;Ae<Qe;++Ae)if(Me=ne[Ae],Me!=0)for(nt=me(Xe[Ae],oe)>>oe-Me,Ke=(1<<oe+4-Me)-1;Ke>=0;--Ke)je[nt|Ke<<Me]=Me&15|Ae<<4;return oe}var _e=ie?new Uint16Array(512):ge(512),Ue=ie?new Uint16Array(32):ge(32);if(!ie){for(var ke=0;ke<512;++ke)_e[ke]=0;for(ke=0;ke<32;++ke)Ue[ke]=0}(function(){for(var ne=[],je=0;je<32;je++)ne.push(5);fe(ne,Ue,32);var Se=[];for(je=0;je<=143;je++)Se.push(8);for(;je<=255;je++)Se.push(9);for(;je<=279;je++)Se.push(7);for(;je<=287;je++)Se.push(8);fe(Se,_e,288)})();var Fe=(function(){for(var je=ie?new Uint8Array(32768):[],Se=0,oe=0;Se<se.length-1;++Se)for(;oe<se[Se+1];++oe)je[oe]=Se;for(;oe<32768;++oe)je[oe]=29;var ve=ie?new Uint8Array(259):[];for(Se=0,oe=0;Se<K.length-1;++Se)for(;oe<K[Se+1];++oe)ve[oe]=Se;function Ae(nt,Qe){for(var tt=0;tt<nt.length;){var Xe=Math.min(65535,nt.length-tt),Me=tt+Xe==nt.length;for(Qe.write_shift(1,+Me),Qe.write_shift(2,Xe),Qe.write_shift(2,~Xe&65535);Xe-- >0;)Qe[Qe.l++]=nt[tt++]}return Qe.l}function Ke(nt,Qe){for(var tt=0,Xe=0,Me=ie?new Uint16Array(32768):[];Xe<nt.length;){var it=Math.min(65535,nt.length-Xe);if(it<10){for(tt=Ie(Qe,tt,+(Xe+it==nt.length)),tt&7&&(tt+=8-(tt&7)),Qe.l=tt/8|0,Qe.write_shift(2,it),Qe.write_shift(2,~it&65535);it-- >0;)Qe[Qe.l++]=nt[Xe++];tt=Qe.l*8;continue}tt=Ie(Qe,tt,+(Xe+it==nt.length)+2);for(var bt=0;it-- >0;){var It=nt[Xe];bt=(bt<<5^It)&32767;var Dt=-1,xr=0;if((Dt=Me[bt])&&(Dt|=Xe&-32768,Dt>Xe&&(Dt-=32768),Dt<Xe))for(;nt[Dt+xr]==nt[Xe+xr]&&xr<250;)++xr;if(xr>2){It=ve[xr],It<=22?tt=de(Qe,tt,ue[It+1]>>1)-1:(de(Qe,tt,3),tt+=5,de(Qe,tt,ue[It-23]>>5),tt+=3);var Rr=It<8?0:It-4>>2;Rr>0&&(Ce(Qe,tt,xr-K[It]),tt+=Rr),It=je[Xe-Dt],tt=de(Qe,tt,ue[It]>>3),tt-=3;var Yr=It<4?0:It-2>>1;Yr>0&&(Ce(Qe,tt,Xe-Dt-se[It]),tt+=Yr);for(var Nn=0;Nn<xr;++Nn)Me[bt]=Xe&32767,bt=(bt<<5^nt[Xe])&32767,++Xe;it-=xr-1}else It<=143?It=It+48:tt=he(Qe,tt,1),tt=de(Qe,tt,ue[It]),Me[bt]=Xe&32767,++Xe}tt=de(Qe,tt,0)-1}return Qe.l=(tt+7)/8|0,Qe.l}return function(Qe,tt){return Qe.length<8?Ae(Qe,tt):Ke(Qe,tt)}})();function qe(ne){var je=Mt(50+Math.floor(ne.length*1.1)),Se=Fe(ne,je);return je.slice(0,Se)}var et=ie?new Uint16Array(32768):ge(32768),Kt=ie?new Uint16Array(32768):ge(32768),qt=ie?new Uint16Array(128):ge(128),vr=1,er=1;function mr(ne,je){var Se=te(ne,je)+257;je+=5;var oe=te(ne,je)+1;je+=5;var ve=le(ne,je)+4;je+=4;for(var Ae=0,Ke=ie?new Uint8Array(19):ge(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qe=1,tt=ie?new Uint8Array(8):ge(8),Xe=ie?new Uint8Array(8):ge(8),Me=Ke.length,it=0;it<ve;++it)Ke[U[it]]=Ae=Oe(ne,je),Qe<Ae&&(Qe=Ae),tt[Ae]++,je+=3;var bt=0;for(tt[0]=0,it=1;it<=Qe;++it)Xe[it]=bt=bt+tt[it-1]<<1;for(it=0;it<Me;++it)(bt=Ke[it])!=0&&(nt[it]=Xe[bt]++);var It=0;for(it=0;it<Me;++it)if(It=Ke[it],It!=0){bt=ue[nt[it]]>>8-It;for(var Dt=(1<<7-It)-1;Dt>=0;--Dt)qt[bt|Dt<<It]=It&7|it<<3}var xr=[];for(Qe=1;xr.length<Se+oe;)switch(bt=qt[Te(ne,je)],je+=bt&7,bt>>>=3){case 16:for(Ae=3+$e(ne,je),je+=2,bt=xr[xr.length-1];Ae-- >0;)xr.push(bt);break;case 17:for(Ae=3+Oe(ne,je),je+=3;Ae-- >0;)xr.push(0);break;case 18:for(Ae=11+Te(ne,je),je+=7;Ae-- >0;)xr.push(0);break;default:xr.push(bt),Qe<bt&&(Qe=bt);break}var Rr=xr.slice(0,Se),Yr=xr.slice(Se);for(it=Se;it<286;++it)Rr[it]=0;for(it=oe;it<30;++it)Yr[it]=0;return vr=fe(Rr,et,286),er=fe(Yr,Kt,30),je}function Ge(ne,je){if(ne[0]==3&&!(ne[1]&3))return[w0(je),2];for(var Se=0,oe=0,ve=zI(je||1<<18),Ae=0,Ke=ve.length>>>0,nt=0,Qe=0;(oe&1)==0;){if(oe=Oe(ne,Se),Se+=3,oe>>>1)oe>>1==1?(nt=9,Qe=5):(Se=mr(ne,Se),nt=vr,Qe=er);else{Se&7&&(Se+=8-(Se&7));var tt=ne[Se>>>3]|ne[(Se>>>3)+1]<<8;if(Se+=32,tt>0)for(!je&&Ke<Ae+tt&&(ve=Ve(ve,Ae+tt),Ke=ve.length);tt-- >0;)ve[Ae++]=ne[Se>>>3],Se+=8;continue}for(;;){!je&&Ke<Ae+32767&&(ve=Ve(ve,Ae+32767),Ke=ve.length);var Xe=we(ne,Se,nt),Me=oe>>>1==1?_e[Xe]:et[Xe];if(Se+=Me&15,Me>>>=4,(Me>>>8&255)===0)ve[Ae++]=Me;else{if(Me==256)break;Me-=257;var it=Me<8?0:Me-4>>2;it>5&&(it=0);var bt=Ae+K[Me];it>0&&(bt+=we(ne,Se,it),Se+=it),Xe=we(ne,Se,Qe),Me=oe>>>1==1?Ue[Xe]:Kt[Xe],Se+=Me&15,Me>>>=4;var It=Me<4?0:Me-2>>1,Dt=se[Me];for(It>0&&(Dt+=we(ne,Se,It),Se+=It),!je&&Ke<bt&&(ve=Ve(ve,bt+100),Ke=ve.length);Ae<bt;)ve[Ae]=ve[Ae-Dt],++Ae}}}return je?[ve,Se+7>>>3]:[ve.slice(0,Ae),Se+7>>>3]}function jt(ne,je){var Se=ne.slice(ne.l||0),oe=Ge(Se,je);return ne.l+=oe[1],oe[0]}function br(ne,je){if(ne)typeof console<"u"&&console.error(je);else throw new Error(je)}function Qt(ne,je){var Se=ne;Oo(Se,0);var oe=[],ve=[],Ae={FileIndex:oe,FullPaths:ve};_(Ae,{root:je.root});for(var Ke=Se.length-4;(Se[Ke]!=80||Se[Ke+1]!=75||Se[Ke+2]!=5||Se[Ke+3]!=6)&&Ke>=0;)--Ke;Se.l=Ke+4,Se.l+=4;var nt=Se.read_shift(2);Se.l+=6;var Qe=Se.read_shift(4);for(Se.l=Qe,Ke=0;Ke<nt;++Ke){Se.l+=20;var tt=Se.read_shift(4),Xe=Se.read_shift(4),Me=Se.read_shift(2),it=Se.read_shift(2),bt=Se.read_shift(2);Se.l+=8;var It=Se.read_shift(4),Dt=l(Se.slice(Se.l+Me,Se.l+Me+it));Se.l+=Me+it+bt;var xr=Se.l;Se.l=It+4,Fr(Se,tt,Xe,Ae,Dt),Se.l=xr}return Ae}function Fr(ne,je,Se,oe,ve){ne.l+=2;var Ae=ne.read_shift(2),Ke=ne.read_shift(2),nt=o(ne);if(Ae&8257)throw new Error("Unsupported ZIP encryption");for(var Qe=ne.read_shift(4),tt=ne.read_shift(4),Xe=ne.read_shift(4),Me=ne.read_shift(2),it=ne.read_shift(2),bt="",It=0;It<Me;++It)bt+=String.fromCharCode(ne[ne.l++]);if(it){var Dt=l(ne.slice(ne.l,ne.l+it));(Dt[21589]||{}).mt&&(nt=Dt[21589].mt),((ve||{})[21589]||{}).mt&&(nt=ve[21589].mt)}ne.l+=it;var xr=ne.slice(ne.l,ne.l+tt);switch(Ke){case 8:xr=z(ne,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ke)}var Rr=!1;Ae&8&&(Qe=ne.read_shift(4),Qe==134695760&&(Qe=ne.read_shift(4),Rr=!0),tt=ne.read_shift(4),Xe=ne.read_shift(4)),tt!=je&&br(Rr,"Bad compressed size: "+je+" != "+tt),Xe!=Se&&br(Rr,"Bad uncompressed size: "+Se+" != "+Xe),Vr(oe,bt,xr,{unsafe:!0,mt:nt})}function Mr(ne,je){var Se=je||{},oe=[],ve=[],Ae=Mt(1),Ke=Se.compression?8:0,nt=0,Qe=0,tt=0,Xe=0,Me=0,it=ne.FullPaths[0],bt=it,It=ne.FileIndex[0],Dt=[],xr=0;for(Qe=1;Qe<ne.FullPaths.length;++Qe)if(bt=ne.FullPaths[Qe].slice(it.length),It=ne.FileIndex[Qe],!(!It.size||!It.content||bt=="Sh33tJ5")){var Rr=Xe,Yr=Mt(bt.length);for(tt=0;tt<bt.length;++tt)Yr.write_shift(1,bt.charCodeAt(tt)&127);Yr=Yr.slice(0,Yr.l),Dt[Me]=Rle.buf(It.content,0);var Nn=It.content;Ke==8&&(Nn=V(Nn)),Ae=Mt(30),Ae.write_shift(4,67324752),Ae.write_shift(2,20),Ae.write_shift(2,nt),Ae.write_shift(2,Ke),It.mt?i(Ae,It.mt):Ae.write_shift(4,0),Ae.write_shift(-4,Dt[Me]),Ae.write_shift(4,Nn.length),Ae.write_shift(4,It.content.length),Ae.write_shift(2,Yr.length),Ae.write_shift(2,0),Xe+=Ae.length,oe.push(Ae),Xe+=Yr.length,oe.push(Yr),Xe+=Nn.length,oe.push(Nn),Ae=Mt(46),Ae.write_shift(4,33639248),Ae.write_shift(2,0),Ae.write_shift(2,20),Ae.write_shift(2,nt),Ae.write_shift(2,Ke),Ae.write_shift(4,0),Ae.write_shift(-4,Dt[Me]),Ae.write_shift(4,Nn.length),Ae.write_shift(4,It.content.length),Ae.write_shift(2,Yr.length),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(4,0),Ae.write_shift(4,Rr),xr+=Ae.l,ve.push(Ae),xr+=Yr.length,ve.push(Yr),++Me}return Ae=Mt(22),Ae.write_shift(4,101010256),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,Me),Ae.write_shift(2,Me),Ae.write_shift(4,xr),Ae.write_shift(4,Xe),Ae.write_shift(2,0),oo([oo(oe),oo(ve),Ae])}var rt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function At(ne,je){if(ne.ctype)return ne.ctype;var Se=ne.name||"",oe=Se.match(/\.([^\.]+)$/);return oe&&rt[oe[1]]||je&&(oe=(Se=je).match(/[\.\\]([^\.\\])+$/),oe&&rt[oe[1]])?rt[oe[1]]:"application/octet-stream"}function cr(ne){for(var je=rg(ne),Se=[],oe=0;oe<je.length;oe+=76)Se.push(je.slice(oe,oe+76));return Se.join(`\r
`)+`\r
`}function wr(ne){var je=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var Xe=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});je=je.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),je.charAt(0)==`
`&&(je="=0D"+je.slice(1)),je=je.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Se=[],oe=je.split(`\r
`),ve=0;ve<oe.length;++ve){var Ae=oe[ve];if(Ae.length==0){Se.push("");continue}for(var Ke=0;Ke<Ae.length;){var nt=76,Qe=Ae.slice(Ke,Ke+nt);Qe.charAt(nt-1)=="="?nt--:Qe.charAt(nt-2)=="="?nt-=2:Qe.charAt(nt-3)=="="&&(nt-=3),Qe=Ae.slice(Ke,Ke+nt),Ke+=nt,Ke<Ae.length&&(Qe+="="),Se.push(Qe)}}return Se.join(`\r
`)}function Gr(ne){for(var je=[],Se=0;Se<ne.length;++Se){for(var oe=ne[Se];Se<=ne.length&&oe.charAt(oe.length-1)=="=";)oe=oe.slice(0,oe.length-1)+ne[++Se];je.push(oe)}for(var ve=0;ve<je.length;++ve)je[ve]=je[ve].replace(/[=][0-9A-Fa-f]{2}/g,function(Ae){return String.fromCharCode(parseInt(Ae.slice(1),16))});return wc(je.join(`\r
`))}function jr(ne,je,Se){for(var oe="",ve="",Ae="",Ke,nt=0;nt<10;++nt){var Qe=je[nt];if(!Qe||Qe.match(/^\s*$/))break;var tt=Qe.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":oe=tt[2].trim();break;case"content-type":Ae=tt[2].trim();break;case"content-transfer-encoding":ve=tt[2].trim();break}}switch(++nt,ve.toLowerCase()){case"base64":Ke=wc(Cc(je.slice(nt).join("")));break;case"quoted-printable":Ke=Gr(je.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ve)}var Xe=Vr(ne,oe.slice(Se.length),Ke,{unsafe:!0});Ae&&(Xe.ctype=Ae)}function qr(ne,je){if(X(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Se=je&&je.root||"",oe=(Ln&&Buffer.isBuffer(ne)?ne.toString("binary"):X(ne)).split(`\r
`),ve=0,Ae="";for(ve=0;ve<oe.length;++ve)if(Ae=oe[ve],!!/^Content-Location:/i.test(Ae)&&(Ae=Ae.slice(Ae.indexOf("file")),Se||(Se=Ae.slice(0,Ae.lastIndexOf("/")+1)),Ae.slice(0,Se.length)!=Se))for(;Se.length>0&&(Se=Se.slice(0,Se.length-1),Se=Se.slice(0,Se.lastIndexOf("/")+1),Ae.slice(0,Se.length)!=Se););var Ke=(oe[1]||"").match(/boundary="(.*?)"/);if(!Ke)throw new Error("MAD cannot find boundary");var nt="--"+(Ke[1]||""),Qe=[],tt=[],Xe={FileIndex:Qe,FullPaths:tt};_(Xe);var Me,it=0;for(ve=0;ve<oe.length;++ve){var bt=oe[ve];bt!==nt&&bt!==nt+"--"||(it++&&jr(Xe,oe.slice(Me,ve),Se),Me=ve)}return Xe}function tr(ne,je){var Se=je||{},oe=Se.boundary||"SheetJS";oe="------="+oe;for(var ve=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+oe.slice(2)+'"',"","",""],Ae=ne.FullPaths[0],Ke=Ae,nt=ne.FileIndex[0],Qe=1;Qe<ne.FullPaths.length;++Qe)if(Ke=ne.FullPaths[Qe].slice(Ae.length),nt=ne.FileIndex[Qe],!(!nt.size||!nt.content||Ke=="Sh33tJ5")){Ke=Ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(xr){return"_x"+xr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(xr){return"_u"+xr.charCodeAt(0).toString(16)+"_"});for(var tt=nt.content,Xe=Ln&&Buffer.isBuffer(tt)?tt.toString("binary"):X(tt),Me=0,it=Math.min(1024,Xe.length),bt=0,It=0;It<=it;++It)(bt=Xe.charCodeAt(It))>=32&&bt<128&&++Me;var Dt=Me>=it*4/5;ve.push(oe),ve.push("Content-Location: "+(Se.root||"file:///C:/SheetJS/")+Ke),ve.push("Content-Transfer-Encoding: "+(Dt?"quoted-printable":"base64")),ve.push("Content-Type: "+At(nt,Ke)),ve.push(""),ve.push(Dt?wr(Xe):cr(Xe))}return ve.push(oe+`--\r
`),ve.join(`\r
`)}function Xr(ne){var je={};return _(je,ne),je}function Vr(ne,je,Se,oe){var ve=oe&&oe.unsafe;ve||_(ne);var Ae=!ve&&Kr.find(ne,je);if(!Ae){var Ke=ne.FullPaths[0];je.slice(0,Ke.length)==Ke?Ke=je:(Ke.slice(-1)!="/"&&(Ke+="/"),Ke=(Ke+je).replace("//","/")),Ae={name:s(je),type:2},ne.FileIndex.push(Ae),ne.FullPaths.push(Ke),ve||Kr.utils.cfb_gc(ne)}return Ae.content=Se,Ae.size=Se?Se.length:0,oe&&(oe.CLSID&&(Ae.clsid=oe.CLSID),oe.mt&&(Ae.mt=oe.mt),oe.ct&&(Ae.ct=oe.ct)),Ae}function pn(ne,je){_(ne);var Se=Kr.find(ne,je);if(Se){for(var oe=0;oe<ne.FileIndex.length;++oe)if(ne.FileIndex[oe]==Se)return ne.FileIndex.splice(oe,1),ne.FullPaths.splice(oe,1),!0}return!1}function Nr(ne,je,Se){_(ne);var oe=Kr.find(ne,je);if(oe){for(var ve=0;ve<ne.FileIndex.length;++ve)if(ne.FileIndex[ve]==oe)return ne.FileIndex[ve].name=s(Se),ne.FullPaths[ve]=Se,!0}return!1}function Or(ne){I(ne,!0)}return t.find=T,t.read=A,t.parse=u,t.write=ee,t.writeFile=re,t.utils={cfb_new:Xr,cfb_add:Vr,cfb_del:pn,cfb_mov:Nr,cfb_gc:Or,ReadShift:ix,CheckField:iR,prep_blob:Oo,bconcat:oo,use_zlib:O,_deflateRaw:qe,_inflateRaw:jt,consts:J},t})();function Ble(e){return typeof e=="string"?py(e):Array.isArray(e)?ule(e):e}function _g(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=py(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Eu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([Ble(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=D0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Ule(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Js(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function QI(e,t){for(var r=[],a=Js(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function gy(e){for(var t=[],r=Js(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function vy(e){for(var t=[],r=Js(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function qle(e){for(var t=[],r=Js(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var gb=new Date(1899,11,30,0,0,0);function $i(e,t){var r=e.getTime(),a=gb.getTime()+(e.getTimezoneOffset()-gb.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var BM=new Date,$le=gb.getTime()+(BM.getTimezoneOffset()-gb.getTimezoneOffset())*6e4,JI=BM.getTimezoneOffset();function by(e){var t=new Date;return t.setTime(e*24*60*60*1e3+$le),t.getTimezoneOffset()!==JI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-JI)*6e4),t}function zle(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var ZI=new Date("2017-02-19T19:06:09.000Z"),UM=isNaN(ZI.getFullYear())?new Date("2/19/17"):ZI,Hle=UM.getFullYear()==2017;function ps(e,t){var r=new Date(e);if(Hle)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(UM.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Eh(e,t){if(Ln&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Eu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Eu(CM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Eu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Eu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function xs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=xs(e[r]));return t}function Ks(e,t){for(var r="";r.length<t;)r+=e;return r}function Jd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var Wle=["january","february","march","april","may","june","july","august","september","october","november","december"];function ep(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Wle.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Vle=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function qM(e){return e?e.content&&e.type?Eh(e.content,!0):e.data?Xp(e.data):e.asNodeBuffer&&Ln?Xp(e.asNodeBuffer().toString("binary")):e.asBinary?Xp(e.asBinary()):e._data&&e._data.getContent?Xp(Eh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function $M(e){if(!e)return null;if(e.data)return qI(e.data);if(e.asNodeBuffer&&Ln)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?qI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Gle(e){return e&&e.name.slice(-4)===".bin"?$M(e):qM(e)}function Zc(e,t){for(var r=e.FullPaths||Js(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function b3(e,t){var r=Zc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ni(e,t,r){if(!r)return Gle(b3(e,t));if(!t)return null;try{return Ni(e,t)}catch{return null}}function Nc(e,t,r){if(!r)return qM(b3(e,t));if(!t)return null;try{return Nc(e,t)}catch{return null}}function Kle(e,t,r){return $M(b3(e,t))}function e8(e){for(var t=e.FullPaths||Js(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function Tn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return Ln?a=Df(r):a=fle(r),Kr.utils.cfb_add(e,t,a)}Kr.utils.cfb_add(e,t,r)}else e.file(t,r)}function y3(){return Kr.utils.cfb_new()}function zM(e,t){switch(t.type){case"base64":return Kr.read(e,{type:"base64"});case"binary":return Kr.read(e,{type:"binary"});case"buffer":case"array":return Kr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Qp(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var fi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Xle=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,t8=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Yle=/<[^>]*>/g,hl=fi.match(t8)?t8:Yle,Qle=/<\w*:/,Jle=/<(\/?)\w+:/;function mn(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(Xle),l=0,c="",d=0,u="",f="",p=1;if(o)for(d=0;d!=o.length;++d){for(f=o[d],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(p=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+p,f.length-p),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var m=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[m]&&u.slice(l-3,l)=="ext")continue;a[m]=c,a[m.toLowerCase()]=c}}return a}function Uu(e){return e.replace(Jle,"<$1")}var HM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},w3=gy(HM),la=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return HM[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),N3=/[&<>'"]/g,Zle=/[\u0000-\u0008\u000b-\u001f]/g;function Ta(e){var t=e+"";return t.replace(N3,function(r){return w3[r]}).replace(Zle,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function r8(e){return Ta(e).replace(/ /g,"_x0020_")}var WM=/[\u0000-\u001f]/g;function j3(e){var t=e+"";return t.replace(N3,function(r){return w3[r]}).replace(/\n/g,"<br/>").replace(WM,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function ece(e){var t=e+"";return t.replace(N3,function(r){return w3[r]}).replace(WM,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var n8=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function tce(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function fs(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function bj(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function a8(e){var t=w0(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function s8(e){return Df(e,"binary").toString("utf8")}var Tv="foo bar baz",$a=Ln&&(s8(Tv)==bj(Tv)&&s8||a8(Tv)==bj(Tv)&&a8)||bj,Eu=Ln?function(e){return Df(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},ag=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),VM=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),rce=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),nce=/<\/?(?:vt:)?variant>/g,ace=/<(?:vt:)([^>]*)>([\s\S]*)</;function i8(e,t){var r=mn(e),a=e.match(rce(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(nce,"").match(ace);o&&s.push({v:$a(o[2]),t:o[1]})}),s}var GM=/(^\s|\s$|\n)/;function Po(e,t){return"<"+e+(t.match(GM)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function sg(e){return Js(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function lr(e,t,r){return"<"+e+(r!=null?sg(r):"")+(t!=null?(t.match(GM)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Sk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function sce(e,t){switch(typeof e){case"string":var r=lr("vt:lpwstr",Ta(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return lr((e|0)==e?"vt:i4":"vt:r8",Ta(String(e)));case"boolean":return lr("vt:bool",e?"true":"false")}if(e instanceof Date)return lr("vt:filetime",Sk(e));throw new Error("Unable to serialize "+e)}function k3(e){if(Ln&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return $a(D0(x3(e)));throw new Error("Bad input format: expected Buffer or string")}var ig=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ui={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Bh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],vc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function ice(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function oce(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var o8=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},l8=Ln?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Df(t)})):o8(e)}:o8,c8=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(xf(e,s)));return a.join("").replace(Al,"")},S3=Ln?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Al,""):c8(e,t,r)}:c8,d8=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},KM=Ln?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):d8(e,t,r)}:d8,u8=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(cm(e,s)));return a.join("")},Cg=Ln?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):u8(t,r,a)}:u8,XM=function(e,t){var r=bc(e,t);return r>0?Cg(e,t+4,t+4+r-1):""},YM=XM,QM=function(e,t){var r=bc(e,t);return r>0?Cg(e,t+4,t+4+r-1):""},JM=QM,ZM=function(e,t){var r=2*bc(e,t);return r>0?Cg(e,t+4,t+4+r-1):""},eR=ZM,tR=function(t,r){var a=bc(t,r);return a>0?S3(t,r+4,r+4+a):""},rR=tR,nR=function(e,t){var r=bc(e,t);return r>0?Cg(e,t+4,t+4+r):""},aR=nR,sR=function(e,t){return ice(e,t)},vb=sR,_3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Ln&&(YM=function(t,r){if(!Buffer.isBuffer(t))return XM(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},JM=function(t,r){if(!Buffer.isBuffer(t))return QM(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},eR=function(t,r){if(!Buffer.isBuffer(t))return ZM(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},rR=function(t,r){if(!Buffer.isBuffer(t))return tR(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},aR=function(t,r){if(!Buffer.isBuffer(t))return nR(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},vb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):sR(t,r)},_3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var cm=function(e,t){return e[t]},xf=function(e,t){return e[t+1]*256+e[t]},lce=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},bc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},th=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},cce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ix(e,t){var r="",a,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,Ln&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(xf(this,d)),d+=2;e*=2;break;case"utf8":r=Cg(this,this.l,this.l+e);break;case"utf16le":e*=2,r=S3(this,this.l,this.l+e);break;case"wstr":return ix.call(this,e,"dbcs");case"lpstr-ansi":r=YM(this,this.l),e=4+bc(this,this.l);break;case"lpstr-cp":r=JM(this,this.l),e=4+bc(this,this.l);break;case"lpwstr":r=eR(this,this.l),e=4+2*bc(this,this.l);break;case"lpp4":e=4+bc(this,this.l),r=rR(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+bc(this,this.l),r=aR(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=cm(this,this.l+e++))!==0;)i.push(Ev(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=xf(this,this.l+e))!==0;)i.push(Ev(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=cm(this,d),this.l=d+1,l=ix.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Ev(xf(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=cm(this,d),this.l=d+1,l=ix.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Ev(cm(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=cm(this,this.l),this.l++,a;case 2:return a=(t==="i"?lce:xf)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?th:cce)(this,this.l),this.l+=4,a):(s=bc(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=vb(this,this.l):s=vb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=KM(this,this.l,e);break}}return this.l+=e,r}var dce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},uce=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},fce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function hce(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)fce(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,dce(this,t,this.l);break;case 8:if(a=8,r==="f"){oce(this,t,this.l);break}case 16:break;case-4:a=4,uce(this,t,this.l);break}return this.l+=a,this}function iR(e,t){var r=KM(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Oo(e,t){e.l=t,e.read_shift=ix,e.chk=iR,e.write_shift=hce}function fl(e,t){e.l+=t}function Mt(e){var t=w0(e);return Oo(t,0),t}function Lf(e,t,r){if(e){var a,s,i;Oo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=fg[l]||fg[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function Ql(){var e=[],t=Ln?256:2048,r=function(d){var u=Mt(d);return Oo(u,0),u},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(s(),a=r(Math.max(d+1,t)))},o=function(){return s(),oo(e)},l=function(d){s(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Ht(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=fg[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&_3(r)&&e.push(r)}}function ox(e,t,r){var a=xs(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function f8(e,t,r){var a=xs(e);return a.s=ox(a.s,t.s,r),a.e=ox(a.e,t.s,r),a}function lx(e,t){if(e.cRel&&e.c<0)for(e=xs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=xs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=fn(e);return!e.cRel&&e.cRel!=null&&(r=xce(r)),!e.rRel&&e.rRel!=null&&(r=mce(r)),r}function yj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Rs(e.s.c)+":"+(e.e.cRel?"":"$")+Rs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+di(e.s.r)+":"+(e.e.rRel?"":"$")+di(e.e.r):lx(e.s,t.biff)+":"+lx(e.e,t.biff)}function C3(e){return parseInt(pce(e),10)-1}function di(e){return""+(e+1)}function mce(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function pce(e){return e.replace(/\$(\d+)$/,"$1")}function A3(e){for(var t=gce(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Rs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function xce(e){return e.replace(/^([A-Z])/,"$$$1")}function gce(e){return e.replace(/^\$([A-Z])/,"$1")}function vce(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Bs(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function fn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Zl(e){var t=e.indexOf(":");return t==-1?{s:Bs(e),e:Bs(e)}:{s:Bs(e.slice(0,t)),e:Bs(e.slice(t+1))}}function jn(e,t){return typeof t>"u"||typeof t=="number"?jn(e.s,e.e):(typeof e!="string"&&(e=fn(e)),typeof t!="string"&&(t=fn(t)),e==t?e:e+":"+t)}function da(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function h8(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ud(e.z,r?$i(t):t)}catch{}try{return e.w=ud((e.XF||{}).numFmtId||(r?14:0),r?$i(t):t)}catch{return""+t}}function Tf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Ff[e.v]||e.v:t==null?h8(e,e.v):h8(e,t))}function L0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function oR(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Bs(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=da(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var m={v:t[f][p]},b=o+f,v=l+p;if(d.s.r>b&&(d.s.r=b),d.s.c>v&&(d.s.c=v),d.e.r<b&&(d.e.r=b),d.e.c<v&&(d.e.c=v),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))m=t[f][p];else if(Array.isArray(m.v)&&(m.f=t[f][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else if(a.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=a.dateNF||sn[14],a.cellDates?(m.t="d",m.w=ud(m.z,$i(m.v))):(m.t="n",m.v=$i(m.v),m.w=ud(m.z,m.v))):m.t="s";if(s)i[b]||(i[b]=[]),i[b][v]&&i[b][v].z&&(m.z=i[b][v].z),i[b][v]=m;else{var g=fn({c:v,r:b});i[g]&&i[g].z&&(m.z=i[g].z),i[g]=m}}}return d.s.c<1e7&&(i["!ref"]=jn(d)),i}function pp(e,t){return oR(null,e,t)}function bce(e){return e.read_shift(4,"i")}function Zd(e,t){return t||(t=Mt(4)),t.write_shift(4,e),t}function ul(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function uo(e,t){var r=!1;return t==null&&(r=!0,t=Mt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function yce(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function wce(e,t){return t||(t=Mt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function E3(e,t){var r=e.l,a=e.read_shift(1),s=ul(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(yce(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Nce(e,t){var r=!1;return t==null&&(r=!0,t=Mt(15+4*e.t.length)),t.write_shift(1,0),uo(e.t,t),r?t.slice(0,t.l):t}var jce=E3;function kce(e,t){var r=!1;return t==null&&(r=!0,t=Mt(23+4*e.t.length)),t.write_shift(1,1),uo(e.t,t),t.write_shift(4,1),wce({},t),r?t.slice(0,t.l):t}function md(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Uh(e,t){return t==null&&(t=Mt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function qh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function $h(e,t){return t==null&&(t=Mt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Sce=ul,lR=uo;function T3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function bb(e,t){var r=!1;return t==null&&(r=!0,t=Mt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var _ce=ul,_k=T3,O3=bb;function P3(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?vb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):th(t,0)>>2;return r?s/100:s}function cR(e,t){t==null&&(t=Mt(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function dR(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Cce(e,t){return t||(t=Mt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var zh=dR,xp=Cce;function ol(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Th(e,t){return(t||Mt(8)).write_shift(8,e,"f")}function Ace(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var d=mh[s];d&&(t.rgb=lg(d));break;case 2:t.rgb=lg([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function yb(e,t){if(t||(t=Mt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Ece(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Tce(e,t){t||(t=Mt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function uR(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Oce(e){return uR(e,1)}function Pce(e){return uR(e,2)}var I3=2,Kl=3,Ov=11,m8=12,wb=19,Pv=64,Ice=65,Dce=71,Lce=4108,Fce=4126,so=80,fR=81,Mce=[so,fR],Ck={1:{n:"CodePage",t:I3},2:{n:"Category",t:so},3:{n:"PresentationFormat",t:so},4:{n:"ByteCount",t:Kl},5:{n:"LineCount",t:Kl},6:{n:"ParagraphCount",t:Kl},7:{n:"SlideCount",t:Kl},8:{n:"NoteCount",t:Kl},9:{n:"HiddenCount",t:Kl},10:{n:"MultimediaClipCount",t:Kl},11:{n:"ScaleCrop",t:Ov},12:{n:"HeadingPairs",t:Lce},13:{n:"TitlesOfParts",t:Fce},14:{n:"Manager",t:so},15:{n:"Company",t:so},16:{n:"LinksUpToDate",t:Ov},17:{n:"CharacterCount",t:Kl},19:{n:"SharedDoc",t:Ov},22:{n:"HyperlinksChanged",t:Ov},23:{n:"AppVersion",t:Kl,p:"version"},24:{n:"DigSig",t:Ice},26:{n:"ContentType",t:so},27:{n:"ContentStatus",t:so},28:{n:"Language",t:so},29:{n:"Version",t:so},255:{},2147483648:{n:"Locale",t:wb},2147483651:{n:"Behavior",t:wb},1919054434:{}},Ak={1:{n:"CodePage",t:I3},2:{n:"Title",t:so},3:{n:"Subject",t:so},4:{n:"Author",t:so},5:{n:"Keywords",t:so},6:{n:"Comments",t:so},7:{n:"Template",t:so},8:{n:"LastAuthor",t:so},9:{n:"RevNumber",t:so},10:{n:"EditTime",t:Pv},11:{n:"LastPrinted",t:Pv},12:{n:"CreatedDate",t:Pv},13:{n:"ModifiedDate",t:Pv},14:{n:"PageCount",t:Kl},15:{n:"WordCount",t:Kl},16:{n:"CharCount",t:Kl},17:{n:"Thumbnail",t:Dce},18:{n:"Application",t:so},19:{n:"DocSecurity",t:Kl},255:{},2147483648:{n:"Locale",t:wb},2147483651:{n:"Behavior",t:wb},1919054434:{}},p8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Rce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Bce(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Uce=Bce([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),mh=xs(Uce),Ff={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},hR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ek={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Iv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function D3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function qce(e){var t=D3();if(!e||!e.match)return t;var r={};if((e.match(hl)||[]).forEach(function(a){var s=mn(a);switch(s[0].replace(Qle,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Ek[s.ContentType]]!==void 0&&t[Ek[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Ui.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function mR(e,t){var r=qle(Ek),a=[],s;a[a.length]=fi,a[a.length]=lr("Types",null,{xmlns:Ui.CT,"xmlns:xsd":Ui.xsd,"xmlns:xsi":Ui.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return lr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=lr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Iv[c][t.bookType]||Iv[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=lr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Iv[c][t.bookType]||Iv[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=lr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Un={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function og(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function cx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(hl)||[]).forEach(function(s){var i=mn(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Qp(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function jm(e){var t=[fi,lr("Relationships",null,{xmlns:Ui.RELS})];return Js(e["!id"]).forEach(function(r){t[t.length]=lr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ea(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[Un.HLINK,Un.XPATH,Un.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var $ce="application/vnd.oasis.opendocument.spreadsheet";function zce(e,t){for(var r=k3(e),a,s;a=ig.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=mn(a[0],!1),s.path=="/"&&s.type!==$ce)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function Hce(e){var t=[fi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function x8(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Wce(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Vce(e){var t=[fi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(x8(e[r][0],e[r][1])),t.push(Wce("",e[r][0]));return t.push(x8("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function pR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hb.version+"</meta:generator></office:meta></office:document-meta>"}var ld=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Gce=(function(){for(var e=new Array(ld.length),t=0;t<ld.length;++t){var r=ld[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function xR(e){var t={};e=$a(e);for(var r=0;r<ld.length;++r){var a=ld[r],s=e.match(Gce[r]);s!=null&&s.length>0&&(t[a[1]]=la(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=ps(t[a[1]]))}return t}function wj(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Ta(t),a[a.length]=r?lr(e,t,r):Po(e,t))}function gR(e,t){var r=t||{},a=[fi,lr("cp:coreProperties",null,{"xmlns:cp":Ui.CORE_PROPS,"xmlns:dc":Ui.dc,"xmlns:dcterms":Ui.dcterms,"xmlns:dcmitype":Ui.dcmitype,"xmlns:xsi":Ui.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&wj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Sk(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&wj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Sk(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=ld.length;++i){var o=ld[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&wj(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var ph=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],vR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function bR(e,t,r,a){var s=[];if(typeof e=="string")s=i8(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?i8(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function Kce(e,t,r){var a={};return t||(t={}),e=$a(e),ph.forEach(function(s){var i=(e.match(ag(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=la(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&bR(a.HeadingPairs,a.TitlesOfParts,t,r),t}function yR(e){var t=[],r=lr;return e||(e={}),e.Application="SheetJS",t[t.length]=fi,t[t.length]=lr("Properties",null,{xmlns:Ui.EXT_PROPS,"xmlns:vt":Ui.vt}),ph.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Ta(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Ta(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Xce=/<[^>]+>[^<]*/g;function Yce(e,t){var r={},a="",s=e.match(Xce);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=mn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=la(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=la(u);break;case"bool":r[a]=fs(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=ps(u);break;case"cy":case"error":r[a]=la(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function wR(e){var t=[fi,lr("Properties",null,{xmlns:Ui.CUST_PROPS,"xmlns:vt":Ui.vt})];if(!e)return t.join("");var r=1;return Js(e).forEach(function(s){++r,t[t.length]=lr("property",sce(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ta(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Tk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Nj;function Qce(e,t,r){Nj||(Nj=gy(Tk)),t=Nj[t]||t,e[t]=r}function Jce(e,t){var r=[];return Js(Tk).map(function(a){for(var s=0;s<ld.length;++s)if(ld[s][1]==a)return ld[s];for(s=0;s<ph.length;++s)if(ph[s][1]==a)return ph[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];a[2]==="date"&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Po(Tk[a[1]]||a[1],s))}}),lr("DocumentProperties",r.join(""),{xmlns:vc.o})}function Zce(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&Js(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<ld.length;++o)if(i==ld[o][1])return;for(o=0;o<ph.length;++o)if(i==ph[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(lr(r8(i),l,{"dt:dt":c}))}}),t&&Js(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(lr(r8(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+vc.o+'">'+s.join("")+"</"+a+">"}function L3(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function ede(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=Mt(8);return o.write_shift(4,a),o.write_shift(4,s),o}function NR(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function jR(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function kR(e,t,r){return t===31?jR(e):NR(e,t,r)}function Ok(e,t,r){return kR(e,t,r===!1?0:4)}function tde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return kR(e,t,0)}function rde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Al,""),e.l-s&2&&(e.l+=2)}return r}function nde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Al,"");return r}function ade(e){var t=e.l,r=Nb(e,fR);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=Nb(e,Kl);return[r,a]}function sde(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(ade(e));return r}function g8(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Al,"").replace(Yp,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function SR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function ide(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Nb(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==m8&&a!==t&&Mce.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===m8?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return NR(e,a,4).replace(Al,"");case 31:return jR(e);case 64:return L3(e);case 65:return SR(e);case 71:return ide(e);case 80:return Ok(e,a,!i.raw).replace(Al,"");case 81:return tde(e,a).replace(Al,"");case 4108:return sde(e);case 4126:case 4127:return a==4127?rde(e):nde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function v8(e,t){var r=Mt(4),a=Mt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Mt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=ede(t);break;case 31:case 80:for(a=Mt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return oo([r,a])}function b8(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),f=e.read_shift(4);i[o]=[u,f+r]}i.sort(function(w,j){return w[1]-j[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var m=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(m=!1,e.l=i[o][1]),m)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var b=t[i[o][0]];if(p[b.n]=Nb(e,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Vd(l=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(i[o][0]===1){if(l=p.CodePage=Nb(e,I3),Vd(l),c!==-1){var v=e.l;e.l=i[c][1],d=g8(e,l),e.l=v}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=g8(e,l)}else{var g=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=SR(e);break;case 30:e.l+=4,y=Ok(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=Ok(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=si(e,4);break;case 64:e.l+=4,y=ps(L3(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[g]=y}}return e.l=r+a,p}var _R=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ode(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function y8(e,t,r){var a=Mt(8),s=[],i=[],o=8,l=0,c=Mt(8),d=Mt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=Mt(8),d.write_shift(4,0),s.unshift(d);var u=[Mt(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Mt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=oo(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(_R.indexOf(e[l][0])>-1||vR.indexOf(e[l][0])>-1)&&e[l][1]!=null){var p=e[l][1],m=0;if(t){m=+t[e[l][0]];var b=r[m];if(b.p=="version"&&typeof p=="string"){var v=p.split(".");p=(+v[0]<<16)+(+v[1]||0)}c=v8(b.t,p)}else{var g=ode(p);g==-1&&(g=31,p=String(p)),c=v8(g,p)}i.push(c),d=Mt(8),d.write_shift(4,t?m:2+l),s.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,y),y+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),oo([a].concat(s).concat(i))}function w8(e,t,r){var a=e.content;if(!a)return{};Oo(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==Kr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=b8(a,t),p={SystemIdentifier:d};for(var m in f)p[m]=f[m];if(p.FMTID=i,s===1)return p;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var b;try{b=b8(a,null)}catch{}for(m in b)p[m]=b[m];return p.FMTID=[i,o],p}function N8(e,t,r,a,s,i){var o=Mt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Kr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=y8(e,r,a);if(l.push(c),s){var d=y8(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return oo(l)}function t0(e,t){return e.read_shift(t),null}function lde(e,t){t||(t=Mt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function cde(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function si(e,t){return e.read_shift(t)===1}function kl(e,t){return t||(t=Mt(2)),t.write_shift(2,+!!e),t}function ji(e){return e.read_shift(2,"u")}function ed(e,t){return t||(t=Mt(2)),t.write_shift(2,e),t}function CR(e,t){return cde(e,t,ji)}function dde(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function AR(e,t,r){return r||(r=Mt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Ag(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function ude(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),a&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function fde(e){var t=e.t||"",r=Mt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Mt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return oo(s)}function Oh(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Eg(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Oh(e,a,r)}function Hh(e,t,r){if(r.biff>5)return Eg(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function ER(e,t,r){return r||(r=Mt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function hde(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function mde(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Al,"");return a&&(e.l+=24),s}function pde(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Al,"");return r+o}function xde(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return mde(e);case"0303000000000000c000000000000046":return pde(e);default:throw new Error("Unsupported Moniker "+r)}}function Dv(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Al,""):"";return r}function j8(e,t){t||(t=Mt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function gde(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,f;s&16&&(i=Dv(e,r-e.l)),s&128&&(o=Dv(e,r-e.l)),(s&257)===257&&(l=Dv(e,r-e.l)),(s&257)===1&&(c=xde(e,r-e.l)),s&8&&(d=Dv(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(f=L3(e)),e.l=r;var p=o||l||c||"";p&&d&&(p+="#"+d),p||(p="#"+d),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return u&&(m.guid=u),f&&(m.time=f),i&&(m.Tooltip=i),m}function vde(e){var t=Mt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),j8(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&j8(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function TR(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function OR(e,t){var r=TR(e);return r[3]=0,r}function qu(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Ph(e,t,r,a){return a||(a=Mt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function bde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function yde(e,t,r){return t===0?"":Hh(e,t,r)}function wde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function PR(e){var t=e.read_shift(2),r=P3(e);return[t,r]}function Nde(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Ag(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function yy(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function IR(e,t){return t||(t=Mt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function DR(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var jde=DR;function LR(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function kde(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Sde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Yo(e){e.l+=2,e.l+=e.read_shift(2)}var _de={0:Yo,4:Yo,5:Yo,6:Yo,7:Sde,8:Yo,9:Yo,10:Yo,11:Yo,12:Yo,13:kde,14:Yo,15:Yo,16:Yo,17:Yo,18:Yo,19:Yo,20:Yo,21:LR};function Cde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(_de[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function Lv(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function F3(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Mt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Ade(e,t){return t===0||e.read_shift(2),1200}function Ede(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=Hh(e,0,r);return e.read_shift(t+a-e.l),s}function Tde(e,t){var r=!t||t.biff==8,a=Mt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Ode(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Pde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Ag(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function Ide(e,t){var r=!t||t.biff>=8?2:1,a=Mt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function Dde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(ude(e));return i.Count=a,i.Unique=s,i}function Lde(e,t){var r=Mt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=fde(e[s]);var i=oo([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function Fde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Mde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Rde(e){var t=bde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Bde(e){return e.read_shift(2),e.read_shift(4)}function k8(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function Ude(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function qde(){var e=Mt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function $de(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function zde(e){var t=Mt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Hde(){}function Wde(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Ag(e,0,r),a}function Vde(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=Mt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function Gde(e){var t=qu(e);return t.isst=e.read_shift(4),t}function Kde(e,t,r,a){var s=Mt(10);return Ph(e,t,a,s),s.write_shift(4,r),s}function Xde(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=qu(e);r.biff==2&&e.l++;var i=Eg(e,a-e.l,r);return s.val=i,s}function Yde(e,t,r,a,s){var i=!s||s.biff==8,o=Mt(8+ +i+(1+i)*r.length);return Ph(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function Qde(e,t,r){var a=e.read_shift(2),s=Hh(e,0,r);return[a,s]}function Jde(e,t,r,a){var s=r&&r.biff==5;a||(a=Mt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var Zde=Hh;function S8(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function eue(e,t){var r=t.biff==8||!t.biff?4:2,a=Mt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function tue(e){var t=e.read_shift(2),r=e.read_shift(2),a=PR(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function rue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(PR(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function nue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function aue(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=Rce[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function sue(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=aue(e,t,a.fStyle,r),a}function _8(e,t,r,a){var s=r&&r.biff==5;a||(a=Mt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function iue(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function oue(e){var t=Mt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function C8(e,t,r){var a=qu(e);(r.biff==2||t==9)&&++e.l;var s=dde(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function lue(e,t,r,a,s,i){var o=Mt(8);return Ph(e,t,a,o),AR(r,i,o),o}function cue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=qu(e),s=ol(e);return a.val=s,a}function due(e,t,r,a){var s=Mt(14);return Ph(e,t,a,s),Th(r,s),s}var A8=yde;function uue(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Oh(e,i),l=[];a>e.l;)l.push(Eg(e));return[i,s,o,l]}function E8(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Nde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var fue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function T8(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Oh(e,o,r);s&32&&(d=fue[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var f=a==e.l||l===0||!(u>0)?[]:Cme(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:f}}function FR(e,t,r){if(r.biff<8)return hue(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(wde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function hue(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Ag(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function mue(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Oh(e,a,r),o=Oh(e,s,r);return[i,o]}function pue(e,t,r){var a=DR(e);e.l++;var s=e.read_shift(1);return t-=8,[Ame(e,t,r),s,a]}function O8(e,t,r){var a=jde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,Sme(e,t,r)]}function xue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function gue(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Hh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function vue(e,t,r){return gue(e,t,r)}function bue(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(yy(e));return r}function yue(e){var t=Mt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)IR(e[r],t);return t}function wue(e,t,r){if(r&&r.biff<8)return jue(e,t,r);var a=LR(e),s=Cde(e,t-22,a[1]);return{cmo:a,ft:s}}var Nue={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function jue(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Nue[a]||fl)(e,t,r)),{cmo:[s,a,i],ft:o}}function kue(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=hde(e,6,r);var l=e.read_shift(2);e.read_shift(2),ji(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],f=Oh(e,e.lens[d+1]-e.lens[d]-1);if(s+=f,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Sue(e,t){var r=yy(e);e.l+=16;var a=gde(e,t-24);return[r,a]}function _ue(e){var t=Mt(24),r=Bs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return oo([t,vde(e[1])])}function Cue(e,t){e.read_shift(2);var r=yy(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Al,""),[r,a]}function Aue(e){var t=e[1].Tooltip,r=Mt(10+2*(t.length+1));r.write_shift(2,2048);var a=Bs(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Eue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=p8[r]||r,r=e.read_shift(2),t[1]=p8[r]||r,t}function Tue(e){return e||(e=Mt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Oue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(OR(e));return r}function Pue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(OR(e));return r}function Iue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function MR(e,t,r){if(!r.cellStyles)return fl(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Due(e,t){var r=Mt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Lue(e,t){var r={};return t<32||(e.l+=16,r.header=ol(e),r.footer=ol(e),e.l+=2),r}function Fue(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function Mue(e){for(var t=Mt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Rue=qu,Bue=CR,Uue=Eg;function que(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function $ue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=qu(e);++e.l;var s=Hh(e,t-7,r);return a.t="str",a.val=s,a}function zue(e){var t=qu(e);++e.l;var r=ol(e);return t.t="n",t.val=r,t}function Hue(e,t,r){var a=Mt(15);return Ig(a,e,t),a.write_shift(8,r,"f"),a}function Wue(e){var t=qu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Vue(e,t,r){var a=Mt(9);return Ig(a,e,t),a.write_shift(2,r),a}function Gue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Kue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Xue(e,t,r){var a=e.l+t,s=qu(e),i=e.read_shift(2),o=Oh(e,i,r);return e.l=a,s.t="str",s.val=o,s}var Yue=[2,3,48,49,131,139,140,245],Pk=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=w0(1);switch(c.type){case"base64":u=wc(Cc(l));break;case"binary":u=wc(l);break;case"buffer":case"array":u=l;break}Oo(u,0);var f=u.read_shift(1),p=!!(f&136),m=!1,b=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,g=521;f==2&&(v=u.read_shift(2)),u.l+=3,f!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(g=u.read_shift(2));var y=u.read_shift(2),w=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(w=e[u[u.l]]),u.l+=1,u.l+=2),b&&(u.l+=36);for(var j=[],N={},S=Math.min(u.length,f==2?521:g-10-(m?264:0)),A=b?32:11;u.l<S&&u[u.l]!=13;)switch(N={},N.name=tg.utils.decode(w,u.slice(u.l,u.l+A)).replace(/[\u0000\r\n].*$/g,""),u.l+=A,N.type=String.fromCharCode(u.read_shift(1)),f!=2&&!b&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),f==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&j.push(N),f!=2&&(u.l+=b?13:14),N.type){case"B":(!m||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var _=0,P=0;for(d[0]=[],P=0;P!=j.length;++P)d[0][P]=j[P].name;for(;v-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++_]=[],P=0,P=0;P!=j.length;++P){var I=u.slice(u.l,u.l+j[P].len);u.l+=j[P].len,Oo(I,0);var B=tg.utils.decode(w,I);switch(j[P].type){case"C":B.trim().length&&(d[_][P]=B.replace(/\s+$/,""));break;case"D":B.length===8?d[_][P]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):d[_][P]=B;break;case"F":d[_][P]=parseFloat(B.trim());break;case"+":case"I":d[_][P]=b?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":d[_][P]=!0;break;case"N":case"F":d[_][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));d[_][P]="##MEMO##"+(b?parseInt(B.trim(),10):I.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(d[_][P]=+B||0);break;case"@":d[_][P]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":d[_][P]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":d[_][P]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[_][P]=-I.read_shift(-8,"f");break;case"B":if(m&&j[P].len==8){d[_][P]=I.read_shift(8,"f");break}case"G":case"P":I.l+=j[P].len;break;case"0":if(j[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[P].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=pp(r(l,d),d);return u["!cols"]=d.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete d.DBF,u}function s(l,c){try{return L0(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Vd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Ql(),f=_b(l,{header:1,raw:!0,cellDates:!0}),p=f[0],m=f.slice(1),b=l["!cols"]||[],v=0,g=0,y=0,w=1;for(v=0;v<p.length;++v){if(((b[v]||{}).DBF||{}).name){p[v]=b[v].DBF.name,++y;continue}if(p[v]!=null){if(++y,typeof p[v]=="number"&&(p[v]=p[v].toString(10)),typeof p[v]!="string")throw new Error("DBF Invalid column name "+p[v]+" |"+typeof p[v]+"|");if(p.indexOf(p[v])!==v){for(g=0;g<1024;++g)if(p.indexOf(p[v]+"_"+g)==-1){p[v]+="_"+g;break}}}}var j=da(l["!ref"]),N=[],S=[],A=[];for(v=0;v<=j.e.c-j.s.c;++v){var _="",P="",I=0,B=[];for(g=0;g<m.length;++g)m[g][v]!=null&&B.push(m[g][v]);if(B.length==0||p[v]==null){N[v]="?";continue}for(g=0;g<B.length;++g){switch(typeof B[g]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=B[g]instanceof Date?"D":"C";break;default:P="C"}I=Math.max(I,String(B[g]).length),_=_&&_!=P?"C":P}I>250&&(I=250),P=((b[v]||{}).DBF||{}).type,P=="C"&&b[v].DBF.len>I&&(I=b[v].DBF.len),_=="B"&&P=="N"&&(_="N",A[v]=b[v].DBF.dec,I=b[v].DBF.len),S[v]=_=="C"||P=="N"?I:i[_]||0,w+=S[v],N[v]=_}var T=u.next(32);for(T.write_shift(4,318902576),T.write_shift(4,m.length),T.write_shift(2,296+32*y),T.write_shift(2,w),v=0;v<4;++v)T.write_shift(4,0);for(T.write_shift(4,0|(+t[_M]||3)<<8),v=0,g=0;v<p.length;++v)if(p[v]!=null){var E=u.next(32),F=(p[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);E.write_shift(1,F,"sbcs"),E.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),E.write_shift(4,g),E.write_shift(1,S[v]||i[N[v]]||0),E.write_shift(1,A[v]||0),E.write_shift(1,2),E.write_shift(4,0),E.write_shift(1,0),E.write_shift(4,0),E.write_shift(4,0),g+=S[v]||i[N[v]]||0}var q=u.next(264);for(q.write_shift(4,13),v=0;v<65;++v)q.write_shift(4,0);for(v=0;v<m.length;++v){var H=u.next(w);for(H.write_shift(1,0),g=0;g<p.length;++g)if(p[g]!=null)switch(N[g]){case"L":H.write_shift(1,m[v][g]==null?63:m[v][g]?84:70);break;case"B":H.write_shift(8,m[v][g]||0,"f");break;case"N":var Q="0";for(typeof m[v][g]=="number"&&(Q=m[v][g].toFixed(A[g]||0)),y=0;y<S[g]-Q.length;++y)H.write_shift(1,32);H.write_shift(1,Q,"sbcs");break;case"D":m[v][g]?(H.write_shift(4,("0000"+m[v][g].getFullYear()).slice(-4),"sbcs"),H.write_shift(2,("00"+(m[v][g].getMonth()+1)).slice(-2),"sbcs"),H.write_shift(2,("00"+m[v][g].getDate()).slice(-2),"sbcs")):H.write_shift(8,"00000000","sbcs");break;case"C":var J=String(m[v][g]!=null?m[v][g]:"").slice(0,S[g]);for(H.write_shift(1,J,"sbcs"),y=0;y<S[g]-J.length;++y)H.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}})(),RR=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Js(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var b=e[m];return typeof b=="number"?$I(b):b},a=function(p,m,b){var v=m.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return v==59?p:$I(v)};e["|"]=254;function s(p,m){switch(m.type){case"base64":return i(Cc(p),m);case"binary":return i(p,m);case"buffer":return i(Ln&&Buffer.isBuffer(p)?p.toString("binary"):D0(p),m);case"array":return i(Eh(p),m)}throw new Error("Unrecognized type "+m.type)}function i(p,m){var b=p.split(/[\n\r]+/),v=-1,g=-1,y=0,w=0,j=[],N=[],S=null,A={},_=[],P=[],I=[],B=0,T;for(+m.codepage>=0&&Vd(+m.codepage);y!==b.length;++y){B=0;var E=b[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),F=E.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),q=F[0],H;if(E.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&N.push(E.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,J=!1,re=!1,X=!1,ee=-1,W=-1;for(w=1;w<F.length;++w)switch(F[w].charAt(0)){case"A":break;case"X":g=parseInt(F[w].slice(1))-1,J=!0;break;case"Y":for(v=parseInt(F[w].slice(1))-1,J||(g=0),T=j.length;T<=v;++T)j[T]=[];break;case"K":H=F[w].slice(1),H.charAt(0)==='"'?H=H.slice(1,H.length-1):H==="TRUE"?H=!0:H==="FALSE"?H=!1:isNaN(Jd(H))?isNaN(ep(H).getDate())||(H=ps(H)):(H=Jd(H),S!==null&&hp(S)&&(H=by(H))),Q=!0;break;case"E":X=!0;var O=km(F[w].slice(1),{r:v,c:g});j[v][g]=[j[v][g],O];break;case"S":re=!0,j[v][g]=[j[v][g],"S5S"];break;case"G":break;case"R":ee=parseInt(F[w].slice(1))-1;break;case"C":W=parseInt(F[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+E)}if(Q&&(j[v][g]&&j[v][g].length==2?j[v][g][0]=H:j[v][g]=H,S=null),re){if(X)throw new Error("SYLK shared formula cannot have own formula");var z=ee>-1&&j[ee][W];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");j[v][g][1]=r9(z[1],{r:v-ee,c:g-W})}break;case"F":var V=0;for(w=1;w<F.length;++w)switch(F[w].charAt(0)){case"X":g=parseInt(F[w].slice(1))-1,++V;break;case"Y":for(v=parseInt(F[w].slice(1))-1,T=j.length;T<=v;++T)j[T]=[];break;case"M":B=parseInt(F[w].slice(1))/20;break;case"F":break;case"G":break;case"P":S=N[parseInt(F[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=F[w].slice(1).split(" "),T=parseInt(I[0],10);T<=parseInt(I[1],10);++T)B=parseInt(I[2],10),P[T-1]=B===0?{hidden:!0}:{wch:B},N0(P[T-1]);break;case"C":g=parseInt(F[w].slice(1))-1,P[g]||(P[g]={});break;case"R":v=parseInt(F[w].slice(1))-1,_[v]||(_[v]={}),B>0?(_[v].hpt=B,_[v].hpx=rp(B)):B===0&&(_[v].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+E)}V<1&&(S=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+E)}}return _.length>0&&(A["!rows"]=_),P.length>0&&(A["!cols"]=P),m&&m.sheetRows&&(j=j.slice(0,m.sheetRows)),[j,A]}function o(p,m){var b=s(p,m),v=b[0],g=b[1],y=pp(v,m);return Js(g).forEach(function(w){y[w]=g[w]}),y}function l(p,m){return L0(o(p,m),m)}function c(p,m,b,v){var g="C;Y"+(b+1)+";X"+(v+1)+";K";switch(p.t){case"n":g+=p.v||0,p.f&&!p.F&&(g+=";E"+$3(p.f,{r:b,c:v}));break;case"b":g+=p.v?"TRUE":"FALSE";break;case"e":g+=p.w||p.v;break;case"d":g+='"'+(p.w||p.v)+'"';break;case"s":g+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(p,m){m.forEach(function(b,v){var g="F;W"+(v+1)+" "+(v+1)+" ";b.hidden?g+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=cg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=dg(b.wpx)),typeof b.wch=="number"&&(g+=Math.round(b.wch))),g.charAt(g.length-1)!=" "&&p.push(g)})}function u(p,m){m.forEach(function(b,v){var g="F;";b.hidden?g+="M0;":b.hpt?g+="M"+20*b.hpt+";":b.hpx&&(g+="M"+20*ug(b.hpx)+";"),g.length>2&&p.push(g+"R"+(v+1))})}function f(p,m){var b=["ID;PWXL;N;E"],v=[],g=da(p["!ref"]),y,w=Array.isArray(p),j=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&d(b,p["!cols"]),p["!rows"]&&u(b,p["!rows"]),b.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var N=g.s.r;N<=g.e.r;++N)for(var S=g.s.c;S<=g.e.c;++S){var A=fn({r:N,c:S});y=w?(p[N]||[])[S]:p[A],!(!y||y.v==null&&(!y.f||y.F))&&v.push(c(y,p,N,S))}return b.join(j)+j+v.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:f}})(),BR=(function(){function e(i,o){switch(o.type){case"base64":return t(Cc(i),o);case"binary":return t(i,o);case"buffer":return t(Ln&&Buffer.isBuffer(i)?i.toString("binary"):D0(i),o);case"array":return t(Eh(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,f=[];u!==l.length;++u){if(l[u].trim()==="BOT"){f[++c]=[],d=0;continue}if(!(c<0)){var p=l[u].trim().split(","),m=p[0],b=p[1];++u;for(var v=l[u]||"";(v.match(/["]/g)||[]).length&1&&u<l.length-1;)v+=`
`+l[++u];switch(v=v.trim(),+m){case-1:if(v==="BOT"){f[++c]=[],d=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[c][d]=!0:v==="FALSE"?f[c][d]=!1:isNaN(Jd(b))?isNaN(ep(b).getDate())?f[c][d]=b:f[c][d]=ps(b):f[c][d]=Jd(b),++d;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[c][d++]=v!==""?v:null;break}if(v==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return pp(e(i,o),o)}function a(i,o){return L0(r(i,o),o)}var s=(function(){var i=function(c,d,u,f,p){c.push(d),c.push(u+","+f),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,d,u,f){c.push(d+","+u),c.push(d==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var d=[],u=da(c["!ref"]),f,p=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){o(d,-1,0,"BOT");for(var b=u.s.c;b<=u.e.c;++b){var v=fn({r:m,c:b});if(f=p?(c[m]||[])[b]:c[v],!f){o(d,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(d,1,0,"="+f.f):o(d,1,0,""):o(d,0,g,"V");break;case"b":o(d,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ud(f.z||sn[14],$i(ps(f.v)))),o(d,0,f.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,w=d.join(y);return w}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),UR=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var m=f.split(`
`),b=-1,v=-1,g=0,y=[];g!==m.length;++g){var w=m[g].trim().split(":");if(w[0]==="cell"){var j=Bs(w[1]);if(y.length<=j.r)for(b=y.length;b<=j.r;++b)y[b]||(y[b]=[]);switch(b=j.r,v=j.c,w[2]){case"t":y[b][v]=e(w[3]);break;case"v":y[b][v]=+w[3];break;case"vtf":var N=w[w.length-1];case"vtc":w[3]==="nl"?y[b][v]=!!+w[4]:y[b][v]=+w[4],w[2]=="vtf"&&(y[b][v]=[y[b][v],N])}}}return p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),y}function a(f,p){return pp(r(f,p),p)}function s(f,p){return L0(a(f,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(f){if(!f||!f["!ref"])return"";for(var p=[],m=[],b,v="",g=Zl(f["!ref"]),y=Array.isArray(f),w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j)if(v=fn({r:w,c:j}),b=y?(f[w]||[])[j]:f[v],!(!b||b.v==null||b.t==="z")){switch(m=["cell",v,"t"],b.t){case"s":case"str":m.push(t(b.v));break;case"n":b.f?(m[2]="vtf",m[3]="n",m[4]=b.v,m[5]=t(b.f)):(m[2]="v",m[3]=b.v);break;case"b":m[2]="vt"+(b.f?"f":"c"),m[3]="nl",m[4]=b.v?"1":"0",m[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var N=$i(ps(b.v));m[2]="vtc",m[3]="nd",m[4]=""+N,m[5]=b.w||ud(b.z||sn[14],N);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function u(f){return[i,o,l,o,d(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:u}})(),tp=(function(){function e(u,f,p,m,b){b.raw?f[p][m]=u:u===""||(u==="TRUE"?f[p][m]=!0:u==="FALSE"?f[p][m]=!1:isNaN(Jd(u))?isNaN(ep(u).getDate())?f[p][m]=u:f[p][m]=ps(u):f[p][m]=Jd(u))}function t(u,f){var p=f||{},m=[];if(!u||u.length===0)return m;for(var b=u.split(/[\r\n]/),v=b.length-1;v>=0&&b[v].length===0;)--v;for(var g=10,y=0,w=0;w<=v;++w)y=b[w].indexOf(" "),y==-1?y=b[w].length:y++,g=Math.max(g,y);for(w=0;w<=v;++w){m[w]=[];var j=0;for(e(b[w].slice(0,g).trim(),m,w,j,p),j=1;j<=(b[w].length-g)/10+1;++j)e(b[w].slice(g+(j-1)*10,g+j*10).trim(),m,w,j,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(u){for(var f={},p=!1,m=0,b=0;m<u.length;++m)(b=u.charCodeAt(m))==34?p=!p:!p&&b in r&&(f[b]=(f[b]||0)+1);b=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.push([f[m],m]);if(!b.length){f=a;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.push([f[m],m])}return b.sort(function(v,g){return v[0]-g[0]||a[v[1]]-a[g[1]]}),r[b.pop()[1]]||44}function i(u,f){var p=f||{},m="",b=p.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=s(u.slice(0,1024)):p&&p.FS?m=p.FS:m=s(u.slice(0,1024));var g=0,y=0,w=0,j=0,N=0,S=m.charCodeAt(0),A=!1,_=0,P=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var I=p.dateNF!=null?Fle(p.dateNF):null;function B(){var T=u.slice(j,N),E={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)E.t="z";else if(p.raw)E.t="s",E.v=T;else if(T.trim().length===0)E.t="s",E.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(E.t="s",E.v=T.slice(2,-1).replace(/""/g,'"')):uhe(T)?(E.t="n",E.f=T.slice(1)):(E.t="s",E.v=T);else if(T=="TRUE")E.t="b",E.v=!0;else if(T=="FALSE")E.t="b",E.v=!1;else if(!isNaN(w=Jd(T)))E.t="n",p.cellText!==!1&&(E.w=T),E.v=w;else if(!isNaN(ep(T).getDate())||I&&T.match(I)){E.z=p.dateNF||sn[14];var F=0;I&&T.match(I)&&(T=Mle(T,p.dateNF,T.match(I)||[]),F=1),p.cellDates?(E.t="d",E.v=ps(T,F)):(E.t="n",E.v=$i(ps(T,F))),p.cellText!==!1&&(E.w=ud(E.z,E.v instanceof Date?$i(E.v):E.v)),p.cellNF||delete E.z}else E.t="s",E.v=T;if(E.t=="z"||(p.dense?(b[g]||(b[g]=[]),b[g][y]=E):b[fn({c:y,r:g})]=E),j=N+1,P=u.charCodeAt(j),v.e.c<y&&(v.e.c=y),v.e.r<g&&(v.e.r=g),_==S)++y;else if(y=0,++g,p.sheetRows&&p.sheetRows<=g)return!0}e:for(;N<u.length;++N)switch(_=u.charCodeAt(N)){case 34:P===34&&(A=!A);break;case S:case 10:case 13:if(!A&&B())break e;break}return N-j>0&&B(),b["!ref"]=jn(v),b}function o(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):pp(t(u,f),f)}function l(u,f){var p="",m=f.type=="string"?[0,0,0,0]:Y3(u,f);switch(f.type){case"base64":p=Cc(u);break;case"binary":p=u;break;case"buffer":f.codepage==65001?p=u.toString("utf8"):f.codepage&&typeof tg<"u"||(p=Ln&&Buffer.isBuffer(u)?u.toString("binary"):D0(u));break;case"array":p=Eh(u);break;case"string":p=u;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=$a(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=$a(p):f.type=="binary"&&typeof tg<"u",p.slice(0,19)=="socialcalc:version:"?UR.to_sheet(f.type=="string"?p:$a(p),f):o(p,f)}function c(u,f){return L0(l(u,f),f)}function d(u){for(var f=[],p=da(u["!ref"]),m,b=Array.isArray(u),v=p.s.r;v<=p.e.r;++v){for(var g=[],y=p.s.c;y<=p.e.c;++y){var w=fn({r:v,c:y});if(m=b?(u[v]||[])[y]:u[w],!m||m.v==null){g.push("          ");continue}for(var j=(m.w||(Tf(m),m.w)||"").slice(0,10);j.length<10;)j+=" ";g.push(j+(y===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}})();function Que(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=RR.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return tp.to_workbook(e,t)}}var xh=(function(){function e(O,z,V){if(O){Oo(O,O.l||0);for(var U=V.Enum||ee;O.l<O.length;){var K=O.read_shift(2),se=U[K]||U[65535],xe=O.read_shift(2),ie=O.l+xe,ue=se.f&&se.f(O,xe,V);if(O.l=ie,z(ue,se,K))return}}}function t(O,z){switch(z.type){case"base64":return r(wc(Cc(O)),z);case"binary":return r(wc(O),z);case"buffer":case"array":return r(O,z)}throw"Unsupported type "+z.type}function r(O,z){if(!O)return O;var V=z||{},U=V.dense?[]:{},K="Sheet1",se="",xe=0,ie={},ue=[],Be=[],me={s:{r:0,c:0},e:{r:0,c:0}},$e=V.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)V.Enum=ee,e(O,function(Te,we,Ie){switch(Ie){case 0:V.vers=Te,Te>=4096&&(V.qpro=!0);break;case 6:me=Te;break;case 204:Te&&(se=Te);break;case 222:se=Te;break;case 15:case 51:V.qpro||(Te[1].v=Te[1].v.slice(1));case 13:case 14:case 16:Ie==14&&(Te[2]&112)==112&&(Te[2]&15)>1&&(Te[2]&15)<15&&(Te[1].z=V.dateNF||sn[14],V.cellDates&&(Te[1].t="d",Te[1].v=by(Te[1].v))),V.qpro&&Te[3]>xe&&(U["!ref"]=jn(me),ie[K]=U,ue.push(K),U=V.dense?[]:{},me={s:{r:0,c:0},e:{r:0,c:0}},xe=Te[3],K=se||"Sheet"+(xe+1),se="");var he=V.dense?(U[Te[0].r]||[])[Te[0].c]:U[fn(Te[0])];if(he){he.t=Te[1].t,he.v=Te[1].v,Te[1].z!=null&&(he.z=Te[1].z),Te[1].f!=null&&(he.f=Te[1].f);break}V.dense?(U[Te[0].r]||(U[Te[0].r]=[]),U[Te[0].r][Te[0].c]=Te[1]):U[fn(Te[0])]=Te[1];break}},V);else if(O[2]==26||O[2]==14)V.Enum=W,O[2]==14&&(V.qpro=!0,O.l=0),e(O,function(Te,we,Ie){switch(Ie){case 204:K=Te;break;case 22:Te[1].v=Te[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Te[3]>xe&&(U["!ref"]=jn(me),ie[K]=U,ue.push(K),U=V.dense?[]:{},me={s:{r:0,c:0},e:{r:0,c:0}},xe=Te[3],K="Sheet"+(xe+1)),$e>0&&Te[0].r>=$e)break;V.dense?(U[Te[0].r]||(U[Te[0].r]=[]),U[Te[0].r][Te[0].c]=Te[1]):U[fn(Te[0])]=Te[1],me.e.c<Te[0].c&&(me.e.c=Te[0].c),me.e.r<Te[0].r&&(me.e.r=Te[0].r);break;case 27:Te[14e3]&&(Be[Te[14e3][0]]=Te[14e3][1]);break;case 1537:Be[Te[0]]=Te[1],Te[0]==xe&&(K=Te[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=jn(me),ie[se||K]=U,ue.push(se||K),!Be.length)return{SheetNames:ue,Sheets:ie};for(var Oe={},le=[],te=0;te<Be.length;++te)ie[ue[te]]?(le.push(Be[te]||ue[te]),Oe[Be[te]]=ie[Be[te]]||ie[ue[te]]):(le.push(Be[te]),Oe[Be[te]]={"!ref":"A1"});return{SheetNames:le,Sheets:Oe}}function a(O,z){var V=z||{};if(+V.codepage>=0&&Vd(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Ql(),K=da(O["!ref"]),se=Array.isArray(O),xe=[];hr(U,0,i(1030)),hr(U,6,c(K));for(var ie=Math.min(K.e.r,8191),ue=K.s.r;ue<=ie;++ue)for(var Be=di(ue),me=K.s.c;me<=K.e.c;++me){ue===K.s.r&&(xe[me]=Rs(me));var $e=xe[me]+Be,Oe=se?(O[ue]||[])[me]:O[$e];if(!(!Oe||Oe.t=="z"))if(Oe.t=="n")(Oe.v|0)==Oe.v&&Oe.v>=-32768&&Oe.v<=32767?hr(U,13,m(ue,me,Oe.v)):hr(U,14,v(ue,me,Oe.v));else{var le=Tf(Oe);hr(U,15,f(ue,me,le.slice(0,239)))}}return hr(U,1),U.end()}function s(O,z){var V=z||{};if(+V.codepage>=0&&Vd(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Ql();hr(U,0,o(O));for(var K=0,se=0;K<O.SheetNames.length;++K)(O.Sheets[O.SheetNames[K]]||{})["!ref"]&&hr(U,27,X(O.SheetNames[K],se++));var xe=0;for(K=0;K<O.SheetNames.length;++K){var ie=O.Sheets[O.SheetNames[K]];if(!(!ie||!ie["!ref"])){for(var ue=da(ie["!ref"]),Be=Array.isArray(ie),me=[],$e=Math.min(ue.e.r,8191),Oe=ue.s.r;Oe<=$e;++Oe)for(var le=di(Oe),te=ue.s.c;te<=ue.e.c;++te){Oe===ue.s.r&&(me[te]=Rs(te));var Te=me[te]+le,we=Be?(ie[Oe]||[])[te]:ie[Te];if(!(!we||we.t=="z"))if(we.t=="n")hr(U,23,B(Oe,te,xe,we.v));else{var Ie=Tf(we);hr(U,22,_(Oe,te,xe,Ie.slice(0,239)))}}++xe}}return hr(U,1),U.end()}function i(O){var z=Mt(2);return z.write_shift(2,O),z}function o(O){var z=Mt(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var V=0,U=0,K=0,se=0;se<O.SheetNames.length;++se){var xe=O.SheetNames[se],ie=O.Sheets[xe];if(!(!ie||!ie["!ref"])){++K;var ue=Zl(ie["!ref"]);V<ue.e.r&&(V=ue.e.r),U<ue.e.c&&(U=ue.e.c)}}return V>8191&&(V=8191),z.write_shift(2,V),z.write_shift(1,K),z.write_shift(1,U),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function l(O,z,V){var U={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&V.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),z==12&&V.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),z==12&&V.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var z=Mt(8);return z.write_shift(2,O.s.c),z.write_shift(2,O.s.r),z.write_shift(2,O.e.c),z.write_shift(2,O.e.r),z}function d(O,z,V){var U=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function u(O,z,V){var U=O.l+z,K=d(O,z,V);if(K[1].t="s",V.vers==20768){O.l++;var se=O.read_shift(1);return K[1].v=O.read_shift(se,"utf8"),K}return V.qpro&&O.l++,K[1].v=O.read_shift(U-O.l,"cstr"),K}function f(O,z,V){var U=Mt(7+V.length);U.write_shift(1,255),U.write_shift(2,z),U.write_shift(2,O),U.write_shift(1,39);for(var K=0;K<U.length;++K){var se=V.charCodeAt(K);U.write_shift(1,se>=128?95:se)}return U.write_shift(1,0),U}function p(O,z,V){var U=d(O,z,V);return U[1].v=O.read_shift(2,"i"),U}function m(O,z,V){var U=Mt(7);return U.write_shift(1,255),U.write_shift(2,z),U.write_shift(2,O),U.write_shift(2,V,"i"),U}function b(O,z,V){var U=d(O,z,V);return U[1].v=O.read_shift(8,"f"),U}function v(O,z,V){var U=Mt(13);return U.write_shift(1,255),U.write_shift(2,z),U.write_shift(2,O),U.write_shift(8,V,"f"),U}function g(O,z,V){var U=O.l+z,K=d(O,z,V);if(K[1].v=O.read_shift(8,"f"),V.qpro)O.l=U;else{var se=O.read_shift(2);N(O.slice(O.l,O.l+se),K),O.l+=se}return K}function y(O,z,V){var U=z&32768;return z&=-32769,z=(U?O:0)+(z>=8192?z-16384:z),(U?"":"$")+(V?Rs(z):di(z))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(O,z){Oo(O,0);for(var V=[],U=0,K="",se="",xe="",ie="";O.l<O.length;){var ue=O[O.l++];switch(ue){case 0:V.push(O.read_shift(8,"f"));break;case 1:se=y(z[0].c,O.read_shift(2),!0),K=y(z[0].r,O.read_shift(2),!1),V.push(se+K);break;case 2:{var Be=y(z[0].c,O.read_shift(2),!0),me=y(z[0].r,O.read_shift(2),!1);se=y(z[0].c,O.read_shift(2),!0),K=y(z[0].r,O.read_shift(2),!1),V.push(Be+me+":"+se+K)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(O.read_shift(2));break;case 6:{for(var $e="";ue=O[O.l++];)$e+=String.fromCharCode(ue);V.push('"'+$e.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ie=V.pop(),xe=V.pop(),V.push(["AND","OR"][ue-20]+"("+xe+","+ie+")");break;default:if(ue<32&&j[ue])ie=V.pop(),xe=V.pop(),V.push(xe+j[ue]+ie);else if(w[ue]){if(U=w[ue][1],U==69&&(U=O[O.l++]),U>V.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+V.join("|")+"|");return}var Oe=V.slice(-U);V.length-=U,V.push(w[ue][0]+"("+Oe.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}V.length==1?z[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function S(O){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=O.read_shift(2),z[3]=O[O.l++],z[0].c=O[O.l++],z}function A(O,z){var V=S(O);return V[1].t="s",V[1].v=O.read_shift(z-4,"cstr"),V}function _(O,z,V,U){var K=Mt(6+U.length);K.write_shift(2,O),K.write_shift(1,V),K.write_shift(1,z),K.write_shift(1,39);for(var se=0;se<U.length;++se){var xe=U.charCodeAt(se);K.write_shift(1,xe>=128?95:xe)}return K.write_shift(1,0),K}function P(O,z){var V=S(O);V[1].v=O.read_shift(2);var U=V[1].v>>1;if(V[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return V[1].v=U,V}function I(O,z){var V=S(O),U=O.read_shift(4),K=O.read_shift(4),se=O.read_shift(2);if(se==65535)return U===0&&K===3221225472?(V[1].t="e",V[1].v=15):U===0&&K===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var xe=se&32768;return se=(se&32767)-16446,V[1].v=(1-xe*2)*(K*Math.pow(2,se+32)+U*Math.pow(2,se)),V}function B(O,z,V,U){var K=Mt(14);if(K.write_shift(2,O),K.write_shift(1,V),K.write_shift(1,z),U==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var se=0,xe=0,ie=0,ue=0;return U<0&&(se=1,U=-U),xe=Math.log2(U)|0,U/=Math.pow(2,xe-31),ue=U>>>0,(ue&2147483648)==0&&(U/=2,++xe,ue=U>>>0),U-=ue,ue|=2147483648,ue>>>=0,U*=Math.pow(2,32),ie=U>>>0,K.write_shift(4,ie),K.write_shift(4,ue),xe+=16383+(se?32768:0),K.write_shift(2,xe),K}function T(O,z){var V=I(O);return O.l+=z-14,V}function E(O,z){var V=S(O),U=O.read_shift(4);return V[1].v=U>>6,V}function F(O,z){var V=S(O),U=O.read_shift(8,"f");return V[1].v=U,V}function q(O,z){var V=F(O);return O.l+=z-10,V}function H(O,z){return O[O.l+z-1]==0?O.read_shift(z,"cstr"):""}function Q(O,z){var V=O[O.l++];V>z-1&&(V=z-1);for(var U="";U.length<V;)U+=String.fromCharCode(O[O.l++]);return U}function J(O,z,V){if(!(!V.qpro||z<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var K=O.read_shift(z-21,"cstr");return[U,K]}}function re(O,z){for(var V={},U=O.l+z;O.l<U;){var K=O.read_shift(2);if(K==14e3){for(V[K]=[0,""],V[K][0]=O.read_shift(2);O[O.l];)V[K][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return V}function X(O,z){var V=Mt(5+O.length);V.write_shift(2,14e3),V.write_shift(2,z);for(var U=0;U<O.length;++U){var K=O.charCodeAt(U);V[V.l++]=K>127?95:K}return V[V.l++]=0,V}var ee={0:{n:"BOF",f:ji},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:H},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:A},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:E},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:H},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function Jue(e){var t={},r=e.match(hl),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=mn(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=h3[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var Zue=(function(){var e=ag("t"),t=ag("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:la(o[1])},c=i.match(t);return c&&(l.s=Jue(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}})(),efe=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),tfe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,rfe=/<(?:\w+:)?r>/,nfe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function M3(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=la($a(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=$a(e),r&&(a.h=j3(a.t))):e.match(rfe)&&(a.r=$a(e),a.t=la($a((e.replace(nfe,"").match(tfe)||[]).join("").replace(hl,""))),r&&(a.h=efe(Zue(a.r)))),a):{t:""}}var afe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sfe=/<(?:\w+:)?(?:si|sstItem)>/g,ife=/<\/(?:\w+:)?(?:si|sstItem)>/;function ofe(e,t){var r=[],a="";if(!e)return r;var s=e.match(afe);if(s){a=s[2].replace(sfe,"").split(ife);for(var i=0;i!=a.length;++i){var o=M3(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=mn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var lfe=/^\s|\s$|[\t\n\r]/;function qR(e,t){if(!t.bookSST)return"";var r=[fi];r[r.length]=lr("sst",null,{xmlns:Bh[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(lfe)&&(i+=' xml:space="preserve"'),i+=">"+Ta(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function cfe(e){return[e.read_shift(4),e.read_shift(4)]}function dfe(e,t){var r=[],a=!1;return Lf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function ufe(e,t){return t||(t=Mt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var ffe=Nce;function hfe(e){var t=Ql();Ht(t,159,ufe(e));for(var r=0;r<e.length;++r)Ht(t,19,ffe(e[r]));return Ht(t,160),t.end()}function $R(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Sf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function mfe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Sf(e,4),t.U=Sf(e,4),t.W=Sf(e,4),t}function pfe(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function xfe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(pfe(e));return t}function gfe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function vfe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Sf(e,4),t.U=Sf(e,4),t.W=Sf(e,4),t}function bfe(e){var t=vfe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function zR(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function HR(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function yfe(e){var t=Sf(e);switch(t.Minor){case 2:return[t.Minor,wfe(e)];case 3:return[t.Minor,Nfe()];case 4:return[t.Minor,jfe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function wfe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=zR(e,r),s=HR(e,e.length-e.l);return{t:"Std",h:a,v:s}}function Nfe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function jfe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(hl,function(i){var o=mn(i);switch(Uu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function kfe(e,t){var r={},a=r.EncryptionVersionInfo=Sf(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=zR(e,s),t-=s,r.EncryptionVerifier=HR(e,t),r}function Sfe(e){var t={},r=t.EncryptionVersionInfo=Sf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function R3(e){var t=0,r,a=$R(e),s=a.length+1,i,o,l,c,d;for(r=w0(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var WR=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],f=0;f!=7;++f)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=$R(o),c=i(l),d=l.length,u=w0(16),f=0;f!=16;++f)u[f]=0;var p,m,b;for((d&1)===1&&(p=c>>8,u[d]=s(e[0],p),--d,p=c&255,m=l[l.length-1],u[d]=s(m,p));d>0;)--d,p=c>>8,u[d]=s(l[d],p),--d,p=c&255,u[d]=s(l[d],p);for(d=15,b=15-l.length;b>0;)p=c>>8,u[d]=s(e[b],p),--d,--b,p=c&255,u[d]=s(l[d],p),--d,--b;return u}})(),_fe=function(e,t,r,a,s){s||(s=t),a||(a=WR(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},Cfe=function(e){var t=0,r=WR(e);return function(a){var s=_fe("",a,t,r);return t=s[1],s[0]}};function Afe(e,t,r,a){var s={key:ji(e),verificationBytes:ji(e)};return r.password&&(s.verifier=R3(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=Cfe(r.password)),s}function Efe(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=Sfe(e):a.Data=kfe(e,t),a}function Tfe(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?Efe(e,t-2,a):Afe(e,r.biff>=8?t:t-2,r,a),a}var VR=(function(){function e(s,i){switch(i.type){case"base64":return t(Cc(s),i);case"binary":return t(s,i);case"buffer":return t(Ln&&Buffer.isBuffer(s)?s.toString("binary"):D0(s),i);case"array":return t(Eh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,f){Array.isArray(l)&&(l[f]=[]);for(var p=/\\\w+\b/g,m=0,b,v=-1;b=p.exec(u);){switch(b[0]){case"\\cell":var g=u.slice(m,p.lastIndex-b[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var y={v:g,t:"s"};Array.isArray(l)?l[f][v]=y:l[fn({r:f,c:v})]=y}break}m=p.lastIndex}v>d.e.c&&(d.e.c=v)}),l["!ref"]=jn(d),l}function r(s,i){return L0(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=da(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var f=fn({r:d,c:u});l=c?(s[d]||[])[u]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Tf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function Ofe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function lg(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Pfe(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function Ife(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function jb(e,t){if(t===0)return e;var r=Pfe(Ofe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),lg(Ife(r))}var GR=6,Dfe=15,Lfe=1,il=GR;function cg(e){return Math.floor((e+Math.round(128/il)/256)*il)}function dg(e){return Math.floor((e-5)/il*100+.5)/100}function kb(e){return Math.round((e*il+5)/il*256)/256}function jj(e){return kb(dg(cg(e)))}function B3(e){var t=Math.abs(e-jj(e)),r=il;if(t>.005)for(il=Lfe;il<Dfe;++il)Math.abs(e-jj(e))<=t&&(t=Math.abs(e-jj(e)),r=il);il=r}function N0(e){e.width?(e.wpx=cg(e.width),e.wch=dg(e.wpx),e.MDW=il):e.wpx?(e.wch=dg(e.wpx),e.width=kb(e.wch),e.MDW=il):typeof e.wch=="number"&&(e.width=kb(e.wch),e.wpx=cg(e.width),e.MDW=il),e.customWidth&&delete e.customWidth}var Ffe=96,KR=Ffe;function ug(e){return e*96/KR}function rp(e){return e*KR/96}var Mfe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Rfe(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(hl)||[]).forEach(function(o){var l=mn(o);switch(Uu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=fs(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=fs(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Bfe(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(hl)||[]).forEach(function(o){var l=mn(o);switch(Uu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Ufe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(hl)||[]).forEach(function(o){var l=mn(o);switch(Uu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=$a(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?fs(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?fs(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?fs(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?fs(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?fs(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?fs(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?fs(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=h3[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=fs(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=mh[s.color.index];s.color.index==81&&(c=mh[1]),c||(c=mh[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=jb(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function qfe(e,t,r){t.NumberFmt=[];for(var a=Js(sn),s=0;s<a.length;++s)t.NumberFmt[a[s]]=sn[a[s]];var i=e[0].match(hl);if(i)for(s=0;s<i.length;++s){var o=mn(i[s]);switch(Uu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=la($a(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}kf(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function $fe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=lr("numFmt",null,{numFmtId:a,formatCode:Ta(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=lr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Fv=["numFmtId","fillId","fontId","borderId","xfId"],Mv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function zfe(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(hl)||[]).forEach(function(i){var o=mn(i),l=0;switch(Uu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Fv.length;++l)a[Fv[l]]&&(a[Fv[l]]=parseInt(a[Fv[l]],10));for(l=0;l<Mv.length;++l)a[Mv[l]]&&(a[Mv[l]]=fs(a[Mv[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=fs(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function Hfe(e){var t=[];return t[t.length]=lr("cellXfs",null),e.forEach(function(r){t[t.length]=lr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=lr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Wfe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&qfe(f,u,d),(f=l.match(s))&&Ufe(f,u,c,d),(f=l.match(a))&&Bfe(f,u,c,d),(f=l.match(i))&&Rfe(f,u,c,d),(f=l.match(r))&&zfe(f,u,d),u}})();function XR(e,t){var r=[fi,lr("styleSheet",null,{xmlns:Bh[0],"xmlns:vt":Ui.vt})],a;return e.SSF&&(a=$fe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=Hfe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Vfe(e,t){var r=e.read_shift(2),a=ul(e);return[r,a]}function Gfe(e,t,r){r||(r=Mt(6+4*t.length)),r.write_shift(2,e),uo(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function Kfe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Ece(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=Ace(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=ul(e),a}function Xfe(e,t){t||(t=Mt(153)),t.write_shift(2,e.sz*20),Tce(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),yb(e.color,t);var a=0;return a=2,t.write_shift(1,a),uo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Yfe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],kj,Qfe=fl;function P8(e,t){t||(t=Mt(84)),kj||(kj=gy(Yfe));var r=kj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(yb({auto:1},t),yb({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Jfe(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function YR(e,t,r){r||(r=Mt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function $p(e,t){return t||(t=Mt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Zfe=fl;function e0e(e,t){return t||(t=Mt(51)),t.write_shift(1,0),$p(null,t),$p(null,t),$p(null,t),$p(null,t),$p(null,t),t.length>t.l?t.slice(0,t.l):t}function t0e(e,t){return t||(t=Mt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),bb(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function r0e(e,t,r){var a=Mt(2052);return a.write_shift(4,e),bb(t,a),bb(r,a),a.length>a.l?a.slice(0,a.l):a}function n0e(e,t,r){var a={};a.NumberFmt=[];for(var s in sn)a.NumberFmt[s]=sn[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return Lf(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],kf(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=jb(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function a0e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(Ht(e,615,Zd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Ht(e,44,Gfe(s,t[s]))}),Ht(e,616))}}function s0e(e){var t=1;Ht(e,611,Zd(t)),Ht(e,43,Xfe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ht(e,612)}function i0e(e){var t=2;Ht(e,603,Zd(t)),Ht(e,45,P8({patternType:"none"})),Ht(e,45,P8({patternType:"gray125"})),Ht(e,604)}function o0e(e){var t=1;Ht(e,613,Zd(t)),Ht(e,46,e0e()),Ht(e,614)}function l0e(e){var t=1;Ht(e,626,Zd(t)),Ht(e,47,YR({numFmtId:0},65535)),Ht(e,627)}function c0e(e,t){Ht(e,617,Zd(t.length)),t.forEach(function(r){Ht(e,47,YR(r,0))}),Ht(e,618)}function d0e(e){var t=1;Ht(e,619,Zd(t)),Ht(e,48,t0e({xfId:0,name:"Normal"})),Ht(e,620)}function u0e(e){var t=0;Ht(e,505,Zd(t)),Ht(e,506)}function f0e(e){var t=0;Ht(e,508,r0e(t,"TableStyleMedium9","PivotStyleMedium4")),Ht(e,509)}function h0e(e,t){var r=Ql();return Ht(r,278),a0e(r,e.SSF),s0e(r),i0e(r),o0e(r),l0e(r),c0e(r,t.cellXfs),d0e(r),u0e(r),f0e(r),Ht(r,279),r.end()}var m0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function p0e(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(hl)||[]).forEach(function(s){var i=mn(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[m0e.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function x0e(){}function g0e(){}var v0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,b0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,y0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function w0e(e,t,r){t.themeElements={};var a;[["clrScheme",v0e,p0e],["fontScheme",b0e,x0e],["fmtScheme",y0e,g0e]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var N0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function QR(e,t){(!e||e.length===0)&&(e=U3());var r,a={};if(!(r=e.match(N0e)))throw new Error("themeElements not found in theme");return w0e(r[0],a,t),a.raw=e,a}function U3(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[fi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function j0e(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=zM(i,{type:"array"})}catch{return}var l=Nc(o,"theme/theme/theme1.xml",!0);if(l)return QR(l,r)}}function k0e(e){return e.read_shift(4)}function S0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=_0e(e,4);break;case 2:t.xclrValue=TR(e);break;case 3:t.xclrValue=k0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function _0e(e,t){return fl(e,t)}function C0e(e,t){return fl(e,t)}function A0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=S0e(e);break;case 6:a[1]=C0e(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function E0e(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(A0e(e,r-e.l));return{ixfe:a,ext:i}}function T0e(e,t){t.forEach(function(r){r[0]})}function O0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ul(e)}}function P0e(e){var t=Mt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),uo(e.name,t),t.slice(0,t.l)}function I0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function D0e(e){var t=Mt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function L0e(e,t){var r=Mt(8+2*t.length);return r.write_shift(4,e),uo(t,r),r.slice(0,r.l)}function F0e(e){return e.l+=4,e.read_shift(4)!=0}function M0e(e,t){var r=Mt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function R0e(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Lf(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function B0e(){var e=Ql();return Ht(e,332),Ht(e,334,Zd(1)),Ht(e,335,P0e({name:"XLDAPR",version:12e4,flags:3496657072})),Ht(e,336),Ht(e,339,L0e(1,"XLDAPR")),Ht(e,52),Ht(e,35,Zd(514)),Ht(e,4096,Zd(0)),Ht(e,4097,ed(1)),Ht(e,36),Ht(e,53),Ht(e,340),Ht(e,337,M0e(1)),Ht(e,51,D0e([[1,0]])),Ht(e,338),Ht(e,333),e.end()}function U0e(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(hl,function(l){var c=mn(l);switch(Uu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function JR(){var e=[fi];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function q0e(e){var t=[];if(!e)return t;var r=1;return(e.match(hl)||[]).forEach(function(a){var s=mn(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function $0e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=fn(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function z0e(e,t,r){var a=[];return Lf(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function H0e(e,t,r,a){if(!e)return e;var s=a||{},i=!1;Lf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function W0e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var xm=1024;function ZR(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[lr("xml",null,{"xmlns:v":vc.v,"xmlns:o":vc.o,"xmlns:x":vc.x,"xmlns:mv":vc.mv}).replace(/\/>/,">"),lr("o:shapelayout",lr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),lr("v:shapetype",[lr("v:stroke",null,{joinstyle:"miter"}),lr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];xm<e*1e3;)xm+=1e3;return t.forEach(function(i){var o=Bs(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?lr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=lr("v:fill",c,l),u={on:"t",obscured:"t"};++xm,s=s.concat(["<v:shape"+sg({id:"_x0000_s"+xm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,lr("v:shadow",null,u),lr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Po("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Po("x:AutoFill","False"),Po("x:Row",String(o.r)),Po("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function I8(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=Bs(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=da(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=jn(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(u.a==a[f].id){u.a=a[f].name||u.a;break}}i.c.push(u)})}function V0e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=mn(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Bs(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!f&&!!f[1]&&M3(f[1])||{r:"",t:"",h:""};d.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),d.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=p.h),a.push(d)}}}}),a}function e9(e){var t=[fi,lr("comments",null,{xmlns:Bh[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Ta(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(Ta(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Po("t",Ta(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Po("t",Ta(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function G0e(e,t){var r=[],a=!1,s={},i=0;return e.replace(hl,function(l,c){var d=mn(l);switch(Uu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function K0e(e,t,r){var a=[fi,lr("ThreadedComments",null,{xmlns:Ui.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(lr("threadedComment",Po("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function X0e(e,t){var r=[],a=!1;return e.replace(hl,function(i){var o=mn(i);switch(Uu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function Y0e(e){var t=[fi,lr("personList",null,{xmlns:Ui.TCMNT,"xmlns:x":Bh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(lr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Q0e(e){var t={};t.iauthor=e.read_shift(4);var r=zh(e);return t.rfx=r.s,t.ref=fn(r.s),e.l+=16,t}function J0e(e,t){return t==null&&(t=Mt(36)),t.write_shift(4,e[1].iauthor),xp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Z0e=ul;function ehe(e){return uo(e.slice(0,54))}function the(e,t){var r=[],a=[],s={},i=!1;return Lf(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function rhe(e){var t=Ql(),r=[];return Ht(t,628),Ht(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ht(t,632,ehe(s.a)))})}),Ht(t,631),Ht(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Bs(a[0]),e:Bs(a[0])};Ht(t,635,J0e([i,s])),s.t&&s.t.length>0&&Ht(t,637,kce(s)),Ht(t,636),delete s.iauthor})}),Ht(t,634),Ht(t,629),t.end()}var nhe="application/vnd.ms-office.vbaProject";function ahe(e){var t=Kr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Kr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Kr.write(t)}function she(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Kr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var t9=["xlsb","xlsm","xlam","biff8","xla"];function ihe(){return{"!type":"dialog"}}function ohe(){return{"!type":"dialog"}}function lhe(){return{"!type":"macro"}}function che(){return{"!type":"macro"}}var km=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+Rs(u)+(c?"":"$")+di(d)}return function(s,i){return t=i,s.replace(e,r)}})(),q3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,$3=(function(){return function(t,r){return t.replace(q3,function(a,s,i,o,l,c){var d=A3(o)-(i?0:r.c),u=C3(c)-(l?0:r.r),f=u==0?"":l?u+1:"["+u+"]",p=d==0?"":i?d+1:"["+d+"]";return s+"R"+f+"C"+p})}})();function r9(e,t){return e.replace(q3,function(r,a,s,i,o,l){return a+(s=="$"?s+i:Rs(A3(i)+t.c))+(o=="$"?o+l:di(C3(l)+t.r))})}function dhe(e,t,r){var a=Zl(t),s=a.s,i=Bs(r),o={r:i.r-s.r,c:i.c-s.c};return r9(e,o)}function uhe(e){return e.length!=1}function D8(e){return e.replace(/_xlfn\./g,"")}function yi(e){e.l+=1}function j0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function n9(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return a9(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=j0(e),l=j0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function a9(e){var t=j0(e),r=j0(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function fhe(e,t,r){if(r.biff<8)return a9(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=j0(e),o=j0(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function s9(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return hhe(e);var a=e.read_shift(r&&r.biff==12?4:2),s=j0(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function hhe(e){var t=j0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function mhe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function phe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return xhe(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function xhe(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function ghe(e,t,r){var a=(e[e.l++]&96)>>5,s=n9(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function vhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=n9(e,i,r);return[a,s,o]}function bhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function yhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function whe(e,t,r){var a=(e[e.l++]&96)>>5,s=fhe(e,t-1,r);return[a,s]}function Nhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function L8(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function jhe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function khe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function She(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function _he(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Che(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function i9(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Ahe(e){return e.read_shift(2),i9(e)}function Ehe(e){return e.read_shift(2),i9(e)}function The(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=s9(e,0,r);return[a,s]}function Ohe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=phe(e,0,r);return[a,s]}function Phe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=s9(e,0,r);return[a,s,i]}function Ihe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Fme[s],c9[s],a]}function Dhe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Lhe(e);return[s,(i[0]===0?c9:Lme)[i[1]]]}function Lhe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Fhe(e,t,r){e.l+=r&&r.biff==2?3:4}function Mhe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Rhe(e){return e.l++,Ff[e.read_shift(1)]}function Bhe(e){return e.l++,e.read_shift(2)}function Uhe(e){return e.l++,e.read_shift(1)!==0}function qhe(e){return e.l++,ol(e)}function $he(e,t,r){return e.l++,Ag(e,t-1,r)}function zhe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=si(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Ff[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ol(e);break;case 2:r[1]=Hh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Hhe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?zh:yy)(e));return s}function Whe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=zhe(e,r.biff);return o}function Vhe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function Ghe(e,t,r){if(r.biff==5)return Khe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function Khe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Xhe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Yhe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Qhe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function Jhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var Zhe=fl,eme=fl,tme=fl;function Tg(e,t,r){return e.l+=2,[mhe(e)]}function z3(e){return e.l+=6,[]}var rme=Tg,nme=z3,ame=z3,sme=Tg;function o9(e){return e.l+=2,[ji(e),e.read_shift(2)&1]}var ime=Tg,ome=o9,lme=z3,cme=Tg,dme=Tg,ume=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function fme(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=ume[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function hme(e){return e.l+=2,[e.read_shift(4)]}function mme(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function pme(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function xme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function gme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function vme(e){return e.l+=4,[0,0]}var F8={1:{n:"PtgExp",f:Mhe},2:{n:"PtgTbl",f:tme},3:{n:"PtgAdd",f:yi},4:{n:"PtgSub",f:yi},5:{n:"PtgMul",f:yi},6:{n:"PtgDiv",f:yi},7:{n:"PtgPower",f:yi},8:{n:"PtgConcat",f:yi},9:{n:"PtgLt",f:yi},10:{n:"PtgLe",f:yi},11:{n:"PtgEq",f:yi},12:{n:"PtgGe",f:yi},13:{n:"PtgGt",f:yi},14:{n:"PtgNe",f:yi},15:{n:"PtgIsect",f:yi},16:{n:"PtgUnion",f:yi},17:{n:"PtgRange",f:yi},18:{n:"PtgUplus",f:yi},19:{n:"PtgUminus",f:yi},20:{n:"PtgPercent",f:yi},21:{n:"PtgParen",f:yi},22:{n:"PtgMissArg",f:yi},23:{n:"PtgStr",f:$he},26:{n:"PtgSheet",f:mme},27:{n:"PtgEndSheet",f:pme},28:{n:"PtgErr",f:Rhe},29:{n:"PtgBool",f:Uhe},30:{n:"PtgInt",f:Bhe},31:{n:"PtgNum",f:qhe},32:{n:"PtgArray",f:Nhe},33:{n:"PtgFunc",f:Ihe},34:{n:"PtgFuncVar",f:Dhe},35:{n:"PtgName",f:Vhe},36:{n:"PtgRef",f:The},37:{n:"PtgArea",f:ghe},38:{n:"PtgMemArea",f:Xhe},39:{n:"PtgMemErr",f:Zhe},40:{n:"PtgMemNoMem",f:eme},41:{n:"PtgMemFunc",f:Yhe},42:{n:"PtgRefErr",f:Qhe},43:{n:"PtgAreaErr",f:bhe},44:{n:"PtgRefN",f:Ohe},45:{n:"PtgAreaN",f:whe},46:{n:"PtgMemAreaN",f:xme},47:{n:"PtgMemNoMemN",f:gme},57:{n:"PtgNameX",f:Ghe},58:{n:"PtgRef3d",f:Phe},59:{n:"PtgArea3d",f:vhe},60:{n:"PtgRefErr3d",f:Jhe},61:{n:"PtgAreaErr3d",f:yhe},255:{}},bme={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},yme={1:{n:"PtgElfLel",f:o9},2:{n:"PtgElfRw",f:cme},3:{n:"PtgElfCol",f:rme},6:{n:"PtgElfRwV",f:dme},7:{n:"PtgElfColV",f:sme},10:{n:"PtgElfRadical",f:ime},11:{n:"PtgElfRadicalS",f:lme},13:{n:"PtgElfColS",f:nme},15:{n:"PtgElfColSV",f:ame},16:{n:"PtgElfRadicalLel",f:ome},25:{n:"PtgList",f:fme},29:{n:"PtgSxName",f:hme},255:{}},wme={0:{n:"PtgAttrNoop",f:vme},1:{n:"PtgAttrSemi",f:Che},2:{n:"PtgAttrIf",f:She},4:{n:"PtgAttrChoose",f:jhe},8:{n:"PtgAttrGoto",f:khe},16:{n:"PtgAttrSum",f:Fhe},32:{n:"PtgAttrBaxcel",f:L8},33:{n:"PtgAttrBaxcel",f:L8},64:{n:"PtgAttrSpace",f:Ahe},65:{n:"PtgAttrSpaceSemi",f:Ehe},128:{n:"PtgAttrIfError",f:_he},255:{}};function Og(e,t,r,a){if(a.biff<8)return fl(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Whe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Hhe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(fl(e,t)),i}function Pg(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=F8[i]||F8[bme[i]],(i===24||i===25)&&(s=(i===24?yme:wme)[e[e.l+1]]),!s||!s.f?fl(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Nme(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}t.push(s.join(","))}return t.join(";")}var jme={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function kme(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function l9(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function M8(e,t,r){var a=l9(e,t,r);return a=="#REF"?a:kme(a,r)}function nl(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,f=0,p=0,m,b="";if(!e[0]||!e[0][0])return"";for(var v=-1,g="",y=0,w=e[0].length;y<w;++y){var j=e[0][y];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),v>=0){switch(e[0][v][1][0]){case 0:g=Ks(" ",e[0][v][1][1]);break;case 1:g=Ks("\r",e[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}d=d+g,v=-1}l.push(d+jme[j[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=ox(j[1][1],o,s),l.push(lx(u,i));break;case"PtgRefN":u=r?ox(j[1][1],r,s):j[1][1],l.push(lx(u,i));break;case"PtgRef3d":f=j[1][1],u=ox(j[1][2],o,s),b=M8(a,f,s),l.push(b+"!"+lx(u,i));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],S=j[1][1];N||(N=0),N&=127;var A=N==0?[]:l.slice(-N);l.length-=N,S==="User"&&(S=A.shift()),l.push(S+"("+A.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":m=f8(j[1][1],r?{s:r}:o,s),l.push(yj(m,s));break;case"PtgArea":m=f8(j[1][1],o,s),l.push(yj(m,s));break;case"PtgArea3d":f=j[1][1],m=j[1][2],b=M8(a,f,s),l.push(b+"!"+yj(m,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=j[1][2];var _=(a.names||[])[p-1]||(a[0]||[])[p],P=_?_.Name:"SH33TJSNAME"+String(p);P&&P.slice(0,6)=="_xlfn."&&!s.xlfn&&(P=P.slice(6)),l.push(P);break;case"PtgNameX":var I=j[1][1];p=j[1][2];var B;if(s.biff<=5)I<0&&(I=-I),a[I]&&(B=a[I][p]);else{var T="";if(((a[I]||[])[0]||[])[0]==14849||(((a[I]||[])[0]||[])[0]==1025?a[I][p]&&a[I][p].itab>0&&(T=a.SheetNames[a[I][p].itab-1]+"!"):T=a.SheetNames[p-1]+"!"),a[I]&&a[I][p])T+=a[I][p].Name;else if(a[0]&&a[0][p])T+=a[0][p].Name;else{var E=(l9(a,I,s)||"").split(";;");E[p-1]?T=E[p-1]:T+="SH33TJSERRX"}l.push(T);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var F="(",q=")";if(v>=0){switch(g="",e[0][v][1][0]){case 2:F=Ks(" ",e[0][v][1][1])+F;break;case 3:F=Ks("\r",e[0][v][1][1])+F;break;case 4:q=Ks(" ",e[0][v][1][1])+q;break;case 5:q=Ks("\r",e[0][v][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}l.push(F+l.pop()+q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var H={c:r.c,r:r.r};if(a.sharedf[fn(u)]){var Q=a.sharedf[fn(u)];l.push(nl(Q,o,H,a,s))}else{var J=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(nl(d[1],o,H,a,s)),J=!0;break}J||l.push(j[1])}break;case"PtgArray":l.push("{"+Nme(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&re.indexOf(e[0][y][0])==-1){j=e[0][v];var X=!0;switch(j[1][0]){case 4:X=!1;case 0:g=Ks(" ",j[1][1]);break;case 5:X=!1;case 1:g=Ks("\r",j[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((X?g:"")+l.pop()+(X?"":g)),v=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Sme(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],fl(e,t-2)];var l=Pg(e,o,r);return t!==o+s&&(i=Og(e,t-o-s,l,r)),e.l=a,[l,i]}function _me(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],fl(e,t-2)];var l=Pg(e,o,r);return t!==o+s&&(i=Og(e,t-o-s,l,r)),e.l=a,[l,i]}function Cme(e,t,r,a){var s=e.l+t,i=Pg(e,a,r),o;return s!==e.l&&(o=Og(e,s-e.l,i,r)),[i,o]}function Ame(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=Pg(e,i,r);return i==65535?[[],fl(e,t-2)]:(t!==i+2&&(s=Og(e,a-i-2,o,r)),[o,s])}function Eme(e){var t;if(xf(e,e.l+6)!==65535)return[ol(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Tme(e){if(e==null){var t=Mt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Th(e);return Th(0)}function Sj(e,t,r){var a=e.l+t,s=qu(e);r.biff==2&&++e.l;var i=Eme(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=_me(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Ome(e,t,r,a,s){var i=Ph(t,r,s),o=Tme(e.v),l=Mt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=Mt(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var f=oo([i,o,l,d]);return f}function wy(e,t,r){var a=e.read_shift(4),s=Pg(e,a,r),i=e.read_shift(4),o=i>0?Og(e,i,s,r):null;return[s,o]}var Pme=wy,Ny=wy,Ime=wy,Dme=wy,Lme={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},c9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Fme={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function R8(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Mme(e){var t="of:="+e.replace(q3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function _j(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Rme(e){return e.replace(/\./,"!")}var dx={},Sm={},ux=typeof Map<"u";function H3(e,t,r){var a=0,s=e.length;if(r){if(ux?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=ux?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(ux?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function jy(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(il=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=dg(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=kb(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function gh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function F0(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){kf(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function d9(e,t,r,a,s,i){try{a.cellNF&&(e.z=sn[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ps(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(sn[t]==null&&kf(Lle[t]||"General",t),e.t==="e")e.w=e.w||Ff[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ng(e.v);else if(e.t==="d"){var o=$i(e.v);(o|0)===o?e.w=o.toString(10):e.w=ng(o)}else{if(e.v===void 0)return"";e.w=Ah(e.v,Sm)}else e.t==="d"?e.w=ud(t,$i(e.v),Sm):e.w=ud(t,e.v,Sm)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=jb(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=jb(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function Bme(e,t,r){if(e&&e["!ref"]){var a=da(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Ume(e,t){var r=da(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=jn(r))}var qme=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,$me=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,zme=/<(?:\w:)?hyperlink [^>]*>/mg,Hme=/"(\w*:\w*)"/,Wme=/<(?:\w:)?col\b[^>]*[\/]?>/g,Vme=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Gme=/<(?:\w:)?pageMargins[^>]*\/>/g,u9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Kme=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Xme=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Yme(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",f=e.match($me);f?(d=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):d=u=e;var p=d.match(u9);p?W3(p[0],l,s,r):(p=d.match(Kme))&&Jme(p[0],p[1]||"",l,s,r);var m=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var b=d.slice(m,m+50).match(Hme);b&&Ume(l,b[1])}var v=d.match(Xme);v&&v[1]&&upe(v[1],s);var g=[];if(t.cellStyles){var y=d.match(Wme);y&&ipe(g,y)}f&&mpe(f[1],l,t,c,i,o);var w=u.match(Vme);w&&(l["!autofilter"]=lpe(w[0]));var j=[],N=u.match(qme);if(N)for(m=0;m!=N.length;++m)j[m]=da(N[m].slice(N[m].indexOf('"')+1));var S=u.match(zme);S&&npe(l,S,a);var A=u.match(Gme);if(A&&(l["!margins"]=ape(mn(A[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=jn(c)),t.sheetRows>0&&l["!ref"]){var _=da(l["!ref"]);t.sheetRows<=+_.e.r&&(_.e.r=t.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=jn(_))}return g.length>0&&(l["!cols"]=g),j.length>0&&(l["!merges"]=j),l}function Qme(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+jn(e[r])+'"/>';return t+"</mergeCells>"}function W3(e,t,r,a){var s=mn(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=la($a(s.codeName)))}function Jme(e,t,r,a,s){W3(e.slice(0,e.indexOf(">")),r,a,s)}function Zme(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Eu(Ta(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+lr("outlinePr",null,d)}!i&&!l||(s[s.length]=lr("sheetPr",l,o))}var epe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],tpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function rpe(e){var t={sheet:1};return epe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),tpe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=R3(e.password).toString(16).toUpperCase()),lr("sheetProtection",null,t)}function npe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=mn($a(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+la(i.location))):(i.Target="#"+la(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=da(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=fn({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function ape(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function spe(e){return gh(e),lr("pageMargins",null,e)}function ipe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=mn(t[a],!0);s.hidden&&(s.hidden=fs(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,B3(s.width)),N0(s);i<=o;)e[i++]=xs(s)}}function ope(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=lr("col",null,jy(s,a)));return r[r.length]="</cols>",r.join("")}function lpe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function cpe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:jn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Zl(s);o.s.r==o.e.r&&(o.e.r=Zl(t["!ref"]).e.r,s=jn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),lr("autoFilter",null,{ref:s})}var dpe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function upe(e,t){t.Views||(t.Views=[{}]),(e.match(dpe)||[]).forEach(function(r,a){var s=mn(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),fs(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function fpe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),lr("sheetViews",lr("sheetView",null,s),{})}function hpe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Ff[e.v];break;case"d":a&&a.cellDates?s=ps(e.v,-1).toISOString():(e=xs(e),e.t="n",s=""+(e.v=$i(ps(e.v)))),typeof e.z>"u"&&(e.z=sn[14]);break;default:s=e.v;break}var l=Po("v",Ta(s)),c={r:t},d=F0(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=Po("v",""+H3(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=lr("f",Ta(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),lr("c",l,c)}var mpe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=ag("v"),o=ag("f");return function(c,d,u,f,p,m){for(var b=0,v="",g=[],y=[],w=0,j=0,N=0,S="",A,_,P=0,I=0,B,T,E=0,F=0,q=Array.isArray(m.CellXf),H,Q=[],J=[],re=Array.isArray(d),X=[],ee={},W=!1,O=!!u.sheetStubs,z=c.split(t),V=0,U=z.length;V!=U;++V){v=z[V].trim();var K=v.length;if(K!==0){var se=0;e:for(b=0;b<K;++b)switch(v[b]){case">":if(v[b-1]!="/"){++b;break e}if(u&&u.cellStyles){if(_=mn(v.slice(se,b),!0),P=_.r!=null?parseInt(_.r,10):P+1,I=-1,u.sheetRows&&u.sheetRows<P)continue;ee={},W=!1,_.ht&&(W=!0,ee.hpt=parseFloat(_.ht),ee.hpx=rp(ee.hpt)),_.hidden=="1"&&(W=!0,ee.hidden=!0),_.outlineLevel!=null&&(W=!0,ee.level=+_.outlineLevel),W&&(X[P-1]=ee)}break;case"<":se=b;break}if(se>=b)break;if(_=mn(v.slice(se,b),!0),P=_.r!=null?parseInt(_.r,10):P+1,I=-1,!(u.sheetRows&&u.sheetRows<P)){f.s.r>P-1&&(f.s.r=P-1),f.e.r<P-1&&(f.e.r=P-1),u&&u.cellStyles&&(ee={},W=!1,_.ht&&(W=!0,ee.hpt=parseFloat(_.ht),ee.hpx=rp(ee.hpt)),_.hidden=="1"&&(W=!0,ee.hidden=!0),_.outlineLevel!=null&&(W=!0,ee.level=+_.outlineLevel),W&&(X[P-1]=ee)),g=v.slice(b).split(e);for(var xe=0;xe!=g.length&&g[xe].trim().charAt(0)=="<";++xe);for(g=g.slice(xe),b=0;b!=g.length;++b)if(v=g[b].trim(),v.length!==0){if(y=v.match(r),w=b,j=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,y!=null&&y.length===2){for(w=0,S=y[1],j=0;j!=S.length&&!((N=S.charCodeAt(j)-64)<1||N>26);++j)w=26*w+N;--w,I=w}else++I;for(j=0;j!=v.length&&v.charCodeAt(j)!==62;++j);if(++j,_=mn(v.slice(0,j),!0),_.r||(_.r=fn({r:P-1,c:I})),S=v.slice(j),A={t:""},(y=S.match(i))!=null&&y[1]!==""&&(A.v=la(y[1])),u.cellFormula){if((y=S.match(o))!=null&&y[1]!==""){if(A.f=la($a(y[1])).replace(/\r\n/g,`
`),u.xlfn||(A.f=D8(A.f)),y[0].indexOf('t="array"')>-1)A.F=(S.match(s)||[])[1],A.F.indexOf(":")>-1&&Q.push([da(A.F),A.F]);else if(y[0].indexOf('t="shared"')>-1){T=mn(y[0]);var ie=la($a(y[1]));u.xlfn||(ie=D8(ie)),J[parseInt(T.si,10)]=[T,ie,_.r]}}else(y=S.match(/<f[^>]*\/>/))&&(T=mn(y[0]),J[T.si]&&(A.f=dhe(J[T.si][1],J[T.si][2],_.r)));var ue=Bs(_.r);for(j=0;j<Q.length;++j)ue.r>=Q[j][0].s.r&&ue.r<=Q[j][0].e.r&&ue.c>=Q[j][0].s.c&&ue.c<=Q[j][0].e.c&&(A.F=Q[j][1])}if(_.t==null&&A.v===void 0)if(A.f||A.F)A.v=0,A.t="n";else if(O)A.t="z";else continue;else A.t=_.t||"n";switch(f.s.c>I&&(f.s.c=I),f.e.c<I&&(f.e.c=I),A.t){case"n":if(A.v==""||A.v==null){if(!O)continue;A.t="z"}else A.v=parseFloat(A.v);break;case"s":if(typeof A.v>"u"){if(!O)continue;A.t="z"}else B=dx[parseInt(A.v,10)],A.v=B.t,A.r=B.r,u.cellHTML&&(A.h=B.h);break;case"str":A.t="s",A.v=A.v!=null?$a(A.v):"",u.cellHTML&&(A.h=j3(A.v));break;case"inlineStr":y=S.match(a),A.t="s",y!=null&&(B=M3(y[1]))?(A.v=B.t,u.cellHTML&&(A.h=B.h)):A.v="";break;case"b":A.v=fs(A.v);break;case"d":u.cellDates?A.v=ps(A.v,1):(A.v=$i(ps(A.v,1)),A.t="n");break;case"e":(!u||u.cellText!==!1)&&(A.w=A.v),A.v=hR[A.v];break}if(E=F=0,H=null,q&&_.s!==void 0&&(H=m.CellXf[_.s],H!=null&&(H.numFmtId!=null&&(E=H.numFmtId),u.cellStyles&&H.fillId!=null&&(F=H.fillId))),d9(A,E,F,u,p,m),u.cellDates&&q&&A.t=="n"&&hp(sn[E])&&(A.t="d",A.v=by(A.v)),_.cm&&u.xlmeta){var Be=(u.xlmeta.Cell||[])[+_.cm-1];Be&&Be.type=="XLDAPR"&&(A.D=!0)}if(re){var me=Bs(_.r);d[me.r]||(d[me.r]=[]),d[me.r][me.c]=A}else d[_.r]=A}}}}X.length>0&&(d["!rows"]=X)}})();function ppe(e,t,r,a){var s=[],i=[],o=da(e["!ref"]),l="",c,d="",u=[],f=0,p=0,m=e["!rows"],b=Array.isArray(e),v={r:d},g,y=-1;for(p=o.s.c;p<=o.e.c;++p)u[p]=Rs(p);for(f=o.s.r;f<=o.e.r;++f){for(i=[],d=di(f),p=o.s.c;p<=o.e.c;++p){c=u[p]+d;var w=b?(e[f]||[])[p]:e[c];w!==void 0&&(l=hpe(w,c,e,t))!=null&&i.push(l)}(i.length>0||m&&m[f])&&(v={r:d},m&&m[f]&&(g=m[f],g.hidden&&(v.hidden=1),y=-1,g.hpx?y=ug(g.hpx):g.hpt&&(y=g.hpt),y>-1&&(v.ht=y,v.customHeight=1),g.level&&(v.outlineLevel=g.level)),s[s.length]=lr("row",i.join(""),v))}if(m)for(;f<m.length;++f)m&&m[f]&&(v={r:f+1},g=m[f],g.hidden&&(v.hidden=1),y=-1,g.hpx?y=ug(g.hpx):g.hpt&&(y=g.hpt),y>-1&&(v.ht=y,v.customHeight=1),g.level&&(v.outlineLevel=g.level),s[s.length]=lr("row","",v));return s.join("")}function f9(e,t,r,a){var s=[fi,lr("worksheet",null,{xmlns:Bh[0],"xmlns:r":Ui.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=da(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=jn(u)}a||(a={}),c["!comments"]=[];var f=[];Zme(c,r,e,t,s),s[s.length]=lr("dimension",null,{ref:d}),s[s.length]=fpe(c,t,e,r),t.sheetFormat&&(s[s.length]=lr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=ope(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=ppe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=rpe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=cpe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Qme(c["!merges"]));var p=-1,m,b=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(m={ref:v[0]},v[1].Target.charAt(0)!="#"&&(b=Ea(a,-1,Ta(v[1].Target).replace(/#.*$/,""),Un.HLINK),m["r:id"]="rId"+b),(p=v[1].Target.indexOf("#"))>-1&&(m.location=Ta(v[1].Target.slice(p+1))),v[1].Tooltip&&(m.tooltip=Ta(v[1].Tooltip)),s[s.length]=lr("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=spe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Po("ignoredErrors",lr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),f.length>0&&(b=Ea(a,-1,"../drawings/drawing"+(e+1)+".xml",Un.DRAW),s[s.length]=lr("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=f),c["!comments"].length>0&&(b=Ea(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Un.VML),s[s.length]=lr("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function xpe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function gpe(e,t,r){var a=Mt(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=ug(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var f=-1,p=-1,m=u<<10;m<u+1<<10;++m){d.c=m;var b=Array.isArray(r)?(r[d.r]||[])[d.c]:r[fn(d)];b&&(f<0&&(f=m),p=m)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,p))}var v=a.l;return a.l=c,a.write_shift(4,l),a.l=v,a.length>a.l?a.slice(0,a.l):a}function vpe(e,t,r,a){var s=gpe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&Ht(e,0,s)}var bpe=zh,ype=xp;function wpe(){}function Npe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Sce(e),r}function jpe(e,t,r){r==null&&(r=Mt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return yb({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),lR(e,r),r.slice(0,r.l)}function kpe(e){var t=md(e);return[t]}function Spe(e,t,r){return r==null&&(r=Mt(8)),Uh(t,r)}function _pe(e){var t=qh(e);return[t]}function Cpe(e,t,r){return r==null&&(r=Mt(4)),$h(t,r)}function Ape(e){var t=md(e),r=e.read_shift(1);return[t,r,"b"]}function Epe(e,t,r){return r==null&&(r=Mt(9)),Uh(t,r),r.write_shift(1,e.v?1:0),r}function Tpe(e){var t=qh(e),r=e.read_shift(1);return[t,r,"b"]}function Ope(e,t,r){return r==null&&(r=Mt(5)),$h(t,r),r.write_shift(1,e.v?1:0),r}function Ppe(e){var t=md(e),r=e.read_shift(1);return[t,r,"e"]}function Ipe(e,t,r){return r==null&&(r=Mt(9)),Uh(t,r),r.write_shift(1,e.v),r}function Dpe(e){var t=qh(e),r=e.read_shift(1);return[t,r,"e"]}function Lpe(e,t,r){return r==null&&(r=Mt(8)),$h(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Fpe(e){var t=md(e),r=e.read_shift(4);return[t,r,"s"]}function Mpe(e,t,r){return r==null&&(r=Mt(12)),Uh(t,r),r.write_shift(4,t.v),r}function Rpe(e){var t=qh(e),r=e.read_shift(4);return[t,r,"s"]}function Bpe(e,t,r){return r==null&&(r=Mt(8)),$h(t,r),r.write_shift(4,t.v),r}function Upe(e){var t=md(e),r=ol(e);return[t,r,"n"]}function qpe(e,t,r){return r==null&&(r=Mt(16)),Uh(t,r),Th(e.v,r),r}function h9(e){var t=qh(e),r=ol(e);return[t,r,"n"]}function $pe(e,t,r){return r==null&&(r=Mt(12)),$h(t,r),Th(e.v,r),r}function zpe(e){var t=md(e),r=P3(e);return[t,r,"n"]}function Hpe(e,t,r){return r==null&&(r=Mt(12)),Uh(t,r),cR(e.v,r),r}function Wpe(e){var t=qh(e),r=P3(e);return[t,r,"n"]}function Vpe(e,t,r){return r==null&&(r=Mt(8)),$h(t,r),cR(e.v,r),r}function Gpe(e){var t=md(e),r=E3(e);return[t,r,"is"]}function Kpe(e){var t=md(e),r=ul(e);return[t,r,"str"]}function Xpe(e,t,r){return r==null&&(r=Mt(12+4*e.v.length)),Uh(t,r),uo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Ype(e){var t=qh(e),r=ul(e);return[t,r,"str"]}function Qpe(e,t,r){return r==null&&(r=Mt(8+4*e.v.length)),$h(t,r),uo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Jpe(e,t,r){var a=e.l+t,s=md(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=Ny(e,a-e.l,r);o[3]=nl(l,null,s,r.supbooks,r)}else e.l=a;return o}function Zpe(e,t,r){var a=e.l+t,s=md(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=Ny(e,a-e.l,r);o[3]=nl(l,null,s,r.supbooks,r)}else e.l=a;return o}function exe(e,t,r){var a=e.l+t,s=md(e);s.r=r["!row"];var i=ol(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=Ny(e,a-e.l,r);o[3]=nl(l,null,s,r.supbooks,r)}else e.l=a;return o}function txe(e,t,r){var a=e.l+t,s=md(e);s.r=r["!row"];var i=ul(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=Ny(e,a-e.l,r);o[3]=nl(l,null,s,r.supbooks,r)}else e.l=a;return o}var rxe=zh,nxe=xp;function axe(e,t){return t==null&&(t=Mt(4)),t.write_shift(4,e),t}function sxe(e,t){var r=e.l+t,a=zh(e),s=T3(e),i=ul(e),o=ul(e),l=ul(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function ixe(e,t){var r=Mt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));xp({s:Bs(e[0]),e:Bs(e[0])},r),O3("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return uo(s||"",r),uo(e[1].Tooltip||"",r),uo("",r),r.slice(0,r.l)}function oxe(){}function lxe(e,t,r){var a=e.l+t,s=dR(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Pme(e,a-e.l,r);o[1]=l}else e.l=a;return o}function cxe(e,t,r){var a=e.l+t,s=zh(e),i=[s];if(r.cellFormula){var o=Dme(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function dxe(e,t,r){r==null&&(r=Mt(18));var a=jy(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var m9=["left","right","top","bottom","header","footer"];function uxe(e){var t={};return m9.forEach(function(r){t[r]=ol(e)}),t}function fxe(e,t){return t==null&&(t=Mt(48)),gh(e),m9.forEach(function(r){Th(e[r],t)}),t}function hxe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function mxe(e,t,r){r==null&&(r=Mt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function pxe(e){var t=Mt(24);return t.write_shift(4,4),t.write_shift(4,1),xp(e,t),t}function xxe(e,t){return t==null&&(t=Mt(66)),t.write_shift(2,e.password?R3(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function gxe(){}function vxe(){}function bxe(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,p=!1,m,b,v,g,y,w,j,N,S,A=[];l.biff=12,l["!row"]=0;var _=0,P=!1,I=[],B={},T=l.supbooks||s.supbooks||[[]];if(T.sharedf=B,T.arrayf=I,T.SheetNames=s.SheetNames||s.Sheets.map(function(re){return re.name}),!l.supbooks&&(l.supbooks=T,s.Names))for(var E=0;E<s.Names.length;++E)T[0][E+1]=s.Names[E];var F=[],q=[],H=!1;fg[16]={n:"BrtShortReal",f:h9};var Q;if(Lf(e,function(X,ee,W){if(!p)switch(W){case 148:d=X;break;case 0:m=X,l.sheetRows&&l.sheetRows<=m.r&&(p=!0),N=di(g=m.r),l["!row"]=m.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=rp(X.hpt)),q[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:X[2]},X[2]){case"n":b.v=X[1];break;case"s":j=dx[X[1]],b.v=j.t,b.r=j.r;break;case"b":b.v=!!X[1];break;case"e":b.v=X[1],l.cellText!==!1&&(b.w=Ff[b.v]);break;case"str":b.t="s",b.v=X[1];break;case"is":b.t="s",b.v=X[1].t;break}if((v=o.CellXf[X[0].iStyleRef])&&d9(b,v.numFmtId,null,l,i,o),y=X[0].c==-1?y+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][y]=b):c[Rs(y)+N]=b,l.cellFormula){for(P=!1,_=0;_<I.length;++_){var O=I[_];m.r>=O[0].s.r&&m.r<=O[0].e.r&&y>=O[0].s.c&&y<=O[0].e.c&&(b.F=jn(O[0]),P=!0)}!P&&X.length>3&&(b.f=X[3])}if(u.s.r>m.r&&(u.s.r=m.r),u.s.c>y&&(u.s.c=y),u.e.r<m.r&&(u.e.r=m.r),u.e.c<y&&(u.e.c=y),l.cellDates&&v&&b.t=="n"&&hp(sn[v.numFmtId])){var z=ch(b.v);z&&(b.t="d",b.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}Q&&(Q.type=="XLDAPR"&&(b.D=!0),Q=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;b={t:"z",v:void 0},y=X[0].c==-1?y+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][y]=b):c[Rs(y)+N]=b,u.s.r>m.r&&(u.s.r=m.r),u.s.c>y&&(u.s.c=y),u.e.r<m.r&&(u.e.r=m.r),u.e.c<y&&(u.e.c=y),Q&&(Q.type=="XLDAPR"&&(b.D=!0),Q=void 0);break;case 176:A.push(X);break;case 49:Q=((l.xlmeta||{}).Cell||[])[X-1];break;case 494:var V=a["!id"][X.relId];for(V?(X.Target=V.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=V):X.relId==""&&(X.Target="#"+X.loc),g=X.rfx.s.r;g<=X.rfx.e.r;++g)for(y=X.rfx.s.c;y<=X.rfx.e.c;++y)l.dense?(c[g]||(c[g]=[]),c[g][y]||(c[g][y]={t:"z",v:void 0}),c[g][y].l=X):(w=fn({c:y,r:g}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=X);break;case 426:if(!l.cellFormula)break;I.push(X),S=l.dense?c[g][y]:c[Rs(y)+N],S.f=nl(X[1],u,{r:m.r,c:y},T,l),S.F=jn(X[0]);break;case 427:if(!l.cellFormula)break;B[fn(X[0].s)]=X[1],S=l.dense?c[g][y]:c[Rs(y)+N],S.f=nl(X[1],u,{r:m.r,c:y},T,l);break;case 60:if(!l.cellStyles)break;for(;X.e>=X.s;)F[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},H||(H=!0,B3(X.w/256)),N0(F[X.e+1]);break;case 161:c["!autofilter"]={ref:jn(X)};break;case 476:c["!margins"]=X;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),X.name&&(s.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),X.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=jn(d||u)),l.sheetRows&&c["!ref"]){var J=da(c["!ref"]);l.sheetRows<=+J.e.r&&(J.e.r=l.sheetRows-1,J.e.r>u.e.r&&(J.e.r=u.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>u.e.c&&(J.e.c=u.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),c["!fullref"]=c["!ref"],c["!ref"]=jn(J))}return A.length>0&&(c["!merges"]=A),F.length>0&&(c["!cols"]=F),q.length>0&&(c["!rows"]=q),c}function yxe(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=xs(t),t.z=t.z||sn[14],t.v=$i(ps(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=F0(s.cellXfs,t,s),t.l&&i["!links"].push([fn(c),t.l]),t.c&&i["!comments"].push([fn(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=H3(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Ht(e,18,Bpe(t,c)):Ht(e,7,Mpe(t,c))):(c.t="str",o?Ht(e,17,Qpe(t,c)):Ht(e,6,Xpe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Ht(e,13,Vpe(t,c)):Ht(e,2,Hpe(t,c)):o?Ht(e,16,$pe(t,c)):Ht(e,5,qpe(t,c)),!0;case"b":return c.t="b",o?Ht(e,15,Ope(t,c)):Ht(e,4,Epe(t,c)),!0;case"e":return c.t="e",o?Ht(e,14,Lpe(t,c)):Ht(e,3,Ipe(t,c)),!0}return o?Ht(e,12,Cpe(t,c)):Ht(e,1,Spe(t,c)),!0}function wxe(e,t,r,a){var s=da(t["!ref"]||"A1"),i,o="",l=[];Ht(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=di(u),vpe(e,t,s,u);var f=!1;if(u<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){u===s.s.r&&(l[p]=Rs(p)),i=l[p]+o;var m=c?(t[u]||[])[p]:t[i];if(!m){f=!1;continue}f=yxe(e,m,u,p,a,t,f)}}Ht(e,146)}function Nxe(e,t){!t||!t["!merges"]||(Ht(e,177,axe(t["!merges"].length)),t["!merges"].forEach(function(r){Ht(e,176,nxe(r))}),Ht(e,178))}function jxe(e,t){!t||!t["!cols"]||(Ht(e,390),t["!cols"].forEach(function(r,a){r&&Ht(e,60,dxe(a,r))}),Ht(e,391))}function kxe(e,t){!t||!t["!ref"]||(Ht(e,648),Ht(e,649,pxe(da(t["!ref"]))),Ht(e,650))}function Sxe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Ea(r,-1,a[1].Target.replace(/#.*$/,""),Un.HLINK);Ht(e,494,ixe(a,s))}}),delete t["!links"]}function _xe(e,t,r,a){if(t["!comments"].length>0){var s=Ea(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Un.VML);Ht(e,551,O3("rId"+s)),t["!legacy"]=s}}function Cxe(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:jn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Zl(i);l.s.r==l.e.r&&(l.e.r=Zl(t["!ref"]).e.r,i=jn(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Ht(e,161,xp(da(i))),Ht(e,162)}}function Axe(e,t,r){Ht(e,133),Ht(e,137,mxe(t,r)),Ht(e,138),Ht(e,134)}function Exe(e,t){t["!protect"]&&Ht(e,535,xxe(t["!protect"]))}function Txe(e,t,r,a){var s=Ql(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=da(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ht(s,129),(r.vbaraw||o["!outline"])&&Ht(s,147,jpe(l,o["!outline"])),Ht(s,148,ype(c)),Axe(s,o,r.Workbook),jxe(s,o),wxe(s,o,e,t),Exe(s,o),Cxe(s,o,r,e),Nxe(s,o),Sxe(s,o,a),o["!margins"]&&Ht(s,476,fxe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&kxe(s,o),_xe(s,o,e,a),Ht(s,130),s.end()}function Oxe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=la((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function Pxe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var p=Oxe(f);u.s.r=u.s.c=0,u.e.c=l,d=Rs(l),p[0].forEach(function(m,b){o[d+di(b)]={t:"n",v:m,z:p[1]},c=b}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=jn(u)),o}function Ixe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(u9);return l&&W3(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function Dxe(e,t){e.l+=10;var r=ul(e);return{name:r}}function Lxe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Lf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var V3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Fxe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Mxe=[],Rxe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function B8(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=fs(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function U8(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=fs(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function p9(e){U8(e.WBProps,V3),U8(e.CalcPr,Rxe),B8(e.WBView,Fxe),B8(e.Sheets,Mxe),Sm.date1904=fs(e.WBProps.date1904)}function Bxe(e){return!e.Workbook||!e.Workbook.WBProps?"false":fs(e.Workbook.WBProps.date1904)?"true":"false"}var Uxe="][*?/\\".split("");function x9(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Uxe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function qxe(e,t,r){e.forEach(function(a,s){x9(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function $xe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];qxe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Bme(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var zxe=/<\w+:workbook/;function Hxe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(hl,function(c,d){var u=mn(c);switch(Uu(u[0])){case"<?xml":break;case"<workbook":c.match(zxe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":V3.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=fs(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=$a(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=la($a(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=$a(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),fs(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=la($a(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Bh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return p9(r),r}function g9(e){var t=[fi];t[t.length]=lr("workbook",null,{xmlns:Bh[0],"xmlns:r":Ui.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(V3.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=lr("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Ta(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=lr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=lr("definedName",Ta(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Wxe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=_k(e),r.name=ul(e),r}function Vxe(e,t){return t||(t=Mt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),O3(e.strRelID,t),uo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Gxe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?ul(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function Kxe(e,t){t||(t=Mt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),lR(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Xxe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Yxe(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=_ce(e),o=Ime(e,0,r),l=T3(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function Qxe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],fg[16]={n:"BrtFRTArchID$",f:Xxe},Lf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=nl(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),p9(r),r.Names=i,r.supbooks=o,r}function Jxe(e,t){Ht(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ht(e,156,Vxe(s))}Ht(e,144)}function Zxe(e,t){t||(t=Mt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return uo("SheetJS",t),uo(hb.version,t),uo(hb.version,t),uo("7262",t),t.length>t.l?t.slice(0,t.l):t}function ege(e,t){t||(t=Mt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function tge(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(Ht(e,135),Ht(e,158,ege(s)),Ht(e,136))}}function rge(e,t){var r=Ql();return Ht(r,131),Ht(r,128,Zxe()),Ht(r,153,Kxe(e.Workbook&&e.Workbook.WBProps||null)),tge(r,e),Jxe(r,e),Ht(r,132),r.end()}function nge(e,t,r){return t.slice(-4)===".bin"?Qxe(e,r):Hxe(e,r)}function age(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?bxe(e,a,r,s,i,o,l):Yme(e,a,r,s,i,o,l)}function sge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Lxe(e,a,r,s,i):Ixe(e,a,r,s,i)}function ige(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?lhe():che()}function oge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?ihe():ohe()}function lge(e,t,r,a){return t.slice(-4)===".bin"?n0e(e,r,a):Wfe(e,r,a)}function cge(e,t,r){return QR(e,r)}function dge(e,t,r){return t.slice(-4)===".bin"?dfe(e,r):ofe(e,r)}function uge(e,t,r){return t.slice(-4)===".bin"?the(e,r):V0e(e,r)}function fge(e,t,r){return t.slice(-4)===".bin"?z0e(e):q0e(e)}function hge(e,t,r,a){return r.slice(-4)===".bin"?H0e(e,t,r,a):void 0}function mge(e,t,r){return t.slice(-4)===".bin"?R0e(e,t,r):U0e(e,t,r)}function pge(e,t,r){return(t.slice(-4)===".bin"?rge:g9)(e)}function xge(e,t,r,a,s){return(t.slice(-4)===".bin"?Txe:f9)(e,r,a,s)}function gge(e,t,r){return(t.slice(-4)===".bin"?h0e:XR)(e,r)}function vge(e,t,r){return(t.slice(-4)===".bin"?hfe:qR)(e,r)}function bge(e,t,r){return(t.slice(-4)===".bin"?rhe:e9)(e)}function yge(e){return(e.slice(-4)===".bin"?B0e:JR)()}var v9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,b9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Rd(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(v9),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(b9),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function wge(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(v9),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(b9),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var fx;function Nge(e,t){var r=fx[e]||la(e);return r==="General"?Ah(t):ud(r,t)}function jge(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=fs(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=ps(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[la(t)]=s}function kge(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Ff[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ng(e.v):e.w=Ah(e.v):e.w=Nge(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=fx[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&hp(a)){var s=ch(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Sge(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=Mfe[a.Pattern]||a.Pattern)}e[t.ID]=t}function _ge(e,t,r,a,s,i,o,l,c,d){var u="General",f=a.StyleID,p={};d=d||{};var m=[],b=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=fs(e);break;case"String":a.t="s",a.r=n8(la(e)),a.v=e.indexOf("<")>-1?la(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(ps(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=la(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=hR[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=n8(t||e));break}if(kge(a,u,d),d.cellFormula!==!1)if(a.Formula){var v=la(a.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),a.f=km(v,s),delete a.Formula,a.ArrayRange=="RC"?a.F=km("RC:RC",s):a.ArrayRange&&(a.F=km(a.ArrayRange,s),c.push([da(a.F),a.F]))}else for(b=0;b<c.length;++b)s.r>=c[b][0].s.r&&s.r<=c[b][0].e.r&&s.c>=c[b][0].s.c&&s.c<=c[b][0].e.c&&(a.F=c[b][1]);d.cellStyles&&(m.forEach(function(g){!p.patternType&&g.patternType&&(p.patternType=g.patternType)}),a.s=p),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Cge(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Cj(e,t){var r=t||{};mp();var a=Xp(k3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=$a(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=xs(r);return o.type="string",tp.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(we){s.indexOf("<"+we)>=0&&(i=!0)}),i)return fve(a,r);fx={"General Number":"General","General Date":sn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":sn[15],"Short Date":sn[14],"Long Time":sn[19],"Medium Time":sn[18],"Short Time":sn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:sn[2],Standard:sn[4],Percent:sn[10],Scientific:sn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},f=[],p=r.dense?[]:{},m="",b={},v={},g=Rd('<Data ss:Type="String">'),y=0,w=0,j=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},A={},_="",P=0,I=[],B={},T={},E=0,F=[],q=[],H={},Q=[],J,re=!1,X=[],ee=[],W={},O=0,z=0,V={Sheets:[],WBProps:{date1904:!1}},U={};ig.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=ig.exec(a);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?_ge(a.slice(y,l.index),_,g,c[c.length-1][0]=="comment"?H:b,{c:w,r:j},S,Q[w],v,X,r):(_="",g=Rd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(q.length>0&&(b.c=q),(!r.sheetRows||r.sheetRows>j)&&b.v!==void 0&&(r.dense?(p[j]||(p[j]=[]),p[j][w]=b):p[Rs(w)+di(j)]=b),b.HRef&&(b.l={Target:la(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(O=w+(parseInt(b.MergeAcross,10)|0),z=j+(parseInt(b.MergeDown,10)|0),I.push({s:{c:w,r:j},e:{c:O,r:z}})),!r.sheetStubs)b.MergeAcross?w=O+1:++w;else if(b.MergeAcross||b.MergeDown){for(var se=w;se<=O;++se)for(var xe=j;xe<=z;++xe)(se>w||xe>j)&&(r.dense?(p[xe]||(p[xe]=[]),p[xe][se]={t:"z"}):p[Rs(se)+di(xe)]={t:"z"});w=O+1}else++w;else b=wge(l[0]),b.Index&&(w=+b.Index-1),w<N.s.c&&(N.s.c=w),w>N.e.c&&(N.e.c=w),l[0].slice(-2)==="/>"&&++w,q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<N.s.r&&(N.s.r=j),j>N.e.r&&(N.e.r=j),l[0].slice(-2)==="/>"&&(v=Rd(l[0]),v.Index&&(j=+v.Index-1)),w=0,++j):(v=Rd(l[0]),v.Index&&(j=+v.Index-1),W={},(v.AutoFitHeight=="0"||v.Height)&&(W.hpx=parseInt(v.Height,10),W.hpt=ug(W.hpx),ee[j]=W),v.Hidden=="1"&&(W.hidden=!0,ee[j]=W));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));f.push(m),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(p["!ref"]=jn(N),r.sheetRows&&r.sheetRows<=N.e.r&&(p["!fullref"]=p["!ref"],N.e.r=r.sheetRows-1,p["!ref"]=jn(N))),I.length&&(p["!merges"]=I),Q.length>0&&(p["!cols"]=Q),ee.length>0&&(p["!rows"]=ee),u[m]=p}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=w=0,c.push([l[3],!1]),d=Rd(l[0]),m=la(d.Name),p=r.dense?[]:{},I=[],X=[],ee=[],U={name:m,Hidden:0},V.Sheets.push(U);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Q=[],re=!1}break;case"style":l[1]==="/"?Sge(S,A,r):A=Rd(l[0]);break;case"numberformat":A.nf=la(Rd(l[0]).Format||"General"),fx[A.nf]&&(A.nf=fx[A.nf]);for(var ie=0;ie!=392&&sn[ie]!=A.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(sn[ie]==null){kf(A.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(J=Rd(l[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!re&&J.wpx>10){re=!0,il=GR;for(var ue=0;ue<Q.length;++ue)Q[ue]&&N0(Q[ue])}re&&N0(J),Q[J.Index-1||Q.length]=J;for(var Be=0;Be<+J.Span;++Be)Q[Q.length]=xs(J);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var me=mn(l[0]),$e={Name:me.Name,Ref:km(me.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&($e.Sheet=V.Sheets.length-1),V.Names.push($e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=a.slice(P,l.index):P=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;A.Interior=Rd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Qce(B,K,a.slice(E,l.index)):E=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));Cge(H),q.push(H)}else c.push([l[3],!1]),d=Rd(l[0]),H={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Oe=Rd(l[0]);p["!autofilter"]={ref:km(Oe.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return W8(a,r);var le=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:le=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:le=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:le=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:le=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(E,l.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else E=l.index+l[0].length;break;case"header":p["!margins"]||gh(p["!margins"]={},"xlml"),isNaN(+mn(l[0]).Margin)||(p["!margins"].header=+mn(l[0]).Margin);break;case"footer":p["!margins"]||gh(p["!margins"]={},"xlml"),isNaN(+mn(l[0]).Margin)||(p["!margins"].footer=+mn(l[0]).Margin);break;case"pagemargins":var te=mn(l[0]);p["!margins"]||gh(p["!margins"]={},"xlml"),isNaN(+te.Top)||(p["!margins"].top=+te.Top),isNaN(+te.Left)||(p["!margins"].left=+te.Left),isNaN(+te.Right)||(p["!margins"].right=+te.Right),isNaN(+te.Bottom)||(p["!margins"].bottom=+te.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:le=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:le=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:le=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:le=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:le=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:le=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:le=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:le=!1}break;case"smarttags":break;default:le=!1;break}if(le||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?jge(T,K,F,a.slice(E,l.index)):(F=l,E=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Te={};return!r.bookSheets&&!r.bookProps&&(Te.Sheets=u),Te.SheetNames=f,Te.Workbook=V,Te.SSF=xs(sn),Te.Props=B,Te.Custprops=T,Te}function Ik(e,t){switch(K3(t=t||{}),t.type||"base64"){case"base64":return Cj(Cc(e),t);case"binary":case"buffer":case"file":return Cj(e,t);case"array":return Cj(D0(e),t)}}function Age(e,t){var r=[];return e.Props&&r.push(Jce(e.Props,t)),e.Custprops&&r.push(Zce(e.Props,e.Custprops)),r.join("")}function Ege(){return""}function Tge(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(lr("NumberFormat",null,{"ss:Format":Ta(sn[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(lr("Style",i.join(""),o))}),lr("Styles",r.join(""))}function y9(e){return lr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+$3(e.Ref,{r:0,c:0})})}function Oge(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(y9(s)))}return lr("Names",r.join(""))}function Pge(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(y9(l)))}return i.join("")}function Ige(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(lr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(lr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(lr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(lr("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Po("ProtectContents","True")),e["!protect"].objects&&s.push(Po("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Po("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Po("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Po("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":lr("WorksheetOptions",s.join(""),{xmlns:vc.x})}function Dge(e){return e.map(function(t){var r=tce(t.t||""),a=lr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return lr("Comment",a,{"ss:Author":t.a})}).join("")}function Lge(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Ta($3(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Bs(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Ta(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Ta(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var f="",p="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=Ff[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||sn[14]);break;case"s":f="String",p=ece(e.v||"");break}var m=F0(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var b=e.v!=null?p:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+b+"</Data>";return(e.c||[]).length>0&&(v+=Dge(e.c)),lr("Cell",v,l)}function Fge(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=rp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Mge(e,t,r,a){if(!e["!ref"])return"";var s=da(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,y){N0(g);var w=!!g.width,j=jy(y,g),N={"ss:Index":y+1};w&&(N["ss:Width"]=cg(j.width)),g.hidden&&(N["ss:Hidden"]="1"),l.push(lr("Column",null,N))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[Fge(d,(e["!rows"]||[])[d])],f=s.s.c;f<=s.e.c;++f){var p=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>d)&&!(i[o].e.c<f)&&!(i[o].e.r<d)){(i[o].s.c!=f||i[o].s.r!=d)&&(p=!0);break}if(!p){var m={r:d,c:f},b=fn(m),v=c?(e[d]||[])[f]:e[b];u.push(Lge(v,b,e,t,r,a,m))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function Rge(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?Pge(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?Mge(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(Ige(i,t,e,r)),a.join("")}function Bge(e,t){t||(t={}),e.SSF||(e.SSF=xs(sn)),e.SSF&&(mp(),xy(e.SSF),t.revssf=vy(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],F0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Age(e,t)),r.push(Ege()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(lr("Worksheet",Rge(a,t,e),{"ss:Name":Ta(e.SheetNames[a])}));return r[2]=Tge(e,t),r[3]=Oge(e),fi+lr("Workbook",r.join(""),{xmlns:vc.ss,"xmlns:o":vc.o,"xmlns:x":vc.x,"xmlns:ss":vc.ss,"xmlns:dt":vc.dt,"xmlns:html":vc.html})}function Uge(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Oce(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=Pce(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var qge=[60,1084,2066,2165,2175];function $ge(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=xf(r,r.l),d=Dk[c],u=0;d!=null&&qge.indexOf(c)>-1;)i=xf(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=Dk[c=xf(r,r.l)];var f=oo(o);Oo(f,0);var p=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(p),p+=o[m].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function yu(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=sn[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Ff[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ng(e.v):e.w=Ah(e.v):e.w=ud(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&hp(sn[a]||String(a))){var s=ch(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Rv(e,t,r){return{v:e,ixfe:t,t:r}}function zge(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},f,p="",m,b,v,g,y={},w=[],j,N,S=[],A=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},I=function(qe){return qe<8?mh[qe]:qe<64&&A[qe-8]||mh[qe]},B=function(qe,et,Kt){var qt=et.XF.data;if(!(!qt||!qt.patternType||!Kt||!Kt.cellStyles)){et.s={},et.s.patternType=qt.patternType;var vr;(vr=lg(I(qt.icvFore)))&&(et.s.fgColor={rgb:vr}),(vr=lg(I(qt.icvBack)))&&(et.s.bgColor={rgb:vr})}},T=function(qe,et,Kt){if(!(W>1)&&!(Kt.sheetRows&&qe.r>=Kt.sheetRows)){if(Kt.cellStyles&&et.XF&&et.XF.data&&B(qe,et,Kt),delete et.ixfe,delete et.XF,f=qe,p=fn(qe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),qe.r<o.s.r&&(o.s.r=qe.r),qe.c<o.s.c&&(o.s.c=qe.c),qe.r+1>o.e.r&&(o.e.r=qe.r+1),qe.c+1>o.e.c&&(o.e.c=qe.c+1),Kt.cellFormula&&et.f){for(var qt=0;qt<w.length;++qt)if(!(w[qt][0].s.c>qe.c||w[qt][0].s.r>qe.r)&&!(w[qt][0].e.c<qe.c||w[qt][0].e.r<qe.r)){et.F=jn(w[qt][0]),(w[qt][0].s.c!=qe.c||w[qt][0].s.r!=qe.r)&&delete et.f,et.f&&(et.f=""+nl(w[qt][1],o,qe,X,E));break}}Kt.dense?(s[qe.r]||(s[qe.r]=[]),s[qe.r][qe.c]=et):s[p]=et}},E={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(E.password=t.password);var F,q=[],H=[],Q=[],J=[],re=!1,X=[];X.SheetNames=E.snames,X.sharedf=E.sharedf,X.arrayf=E.arrayf,X.names=[],X.XTI=[];var ee=0,W=0,O=0,z=[],V=[],U;E.codepage=1200,Vd(1200);for(var K=!1;e.l<e.length-1;){var se=e.l,xe=e.read_shift(2);if(xe===0&&ee===10)break;var ie=e.l===e.length?0:e.read_shift(2),ue=Dk[xe];if(ue&&ue.f){if(t.bookSheets&&ee===133&&xe!==133)break;if(ee=xe,ue.r===2||ue.r==12){var Be=e.read_shift(2);if(ie-=2,!E.enc&&Be!==xe&&((Be&255)<<8|Be>>8)!==xe)throw new Error("rt mismatch: "+Be+"!="+xe);ue.r==12&&(e.l+=10,ie-=10)}var me={};if(xe===10?me=ue.f(e,ie,E):me=$ge(xe,ue,e,ie,E),W==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(xe){case 34:r.opts.Date1904=_.WBProps.date1904=me;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(E.enc||(e.l=0),E.enc=me,!t.password)throw new Error("File is password-protected");if(me.valid==null)throw new Error("Encryption scheme unsupported");if(!me.valid)throw new Error("Password is incorrect");break;case 92:E.lastuser=me;break;case 66:var $e=Number(me);switch($e){case 21010:$e=1200;break;case 32768:$e=1e4;break;case 32769:$e=1252;break}Vd(E.codepage=$e),K=!0;break;case 317:E.rrtabid=me;break;case 25:E.winlocked=me;break;case 439:r.opts.RefreshAll=me;break;case 12:r.opts.CalcCount=me;break;case 16:r.opts.CalcDelta=me;break;case 17:r.opts.CalcIter=me;break;case 13:r.opts.CalcMode=me;break;case 14:r.opts.CalcPrecision=me;break;case 95:r.opts.CalcSaveRecalc=me;break;case 15:E.CalcRefMode=me;break;case 2211:r.opts.FullCalc=me;break;case 129:me.fDialog&&(s["!type"]="dialog"),me.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),me.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(me);break;case 430:X.push([me]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(me);break;case 24:case 536:U={Name:me.Name,Ref:nl(me.rgce,o,null,X,E)},me.itab>0&&(U.Sheet=me.itab-1),X.names.push(U),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(me),me.Name=="_xlnm._FilterDatabase"&&me.itab>0&&me.rgce&&me.rgce[0]&&me.rgce[0][0]&&me.rgce[0][0][0]=="PtgArea3d"&&(V[me.itab-1]={ref:jn(me.rgce[0][0][1][2])});break;case 22:E.ExternCount=me;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(me),X.XTI=X.XTI.concat(me);break;case 2196:if(E.biff<8)break;U!=null&&(U.Comment=me[1]);break;case 18:s["!protect"]=me;break;case 19:me!==0&&E.WTF&&console.error("Password verifier: "+me);break;case 133:i[me.pos]=me,E.snames.push(me.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=jn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Oe=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=jn(o),o.e.r=Oe}o.e.r++,o.e.c++}q.length>0&&(s["!merges"]=q),H.length>0&&(s["!objects"]=H),Q.length>0&&(s["!cols"]=Q),J.length>0&&(s["!rows"]=J),_.Sheets.push(P)}d===""?u=s:a[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(E.biff===8&&(E.biff={9:2,521:3,1033:4}[xe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[me.BIFFVer]||8),E.biffguess=me.BIFFVer==0,me.BIFFVer==0&&me.dt==4096&&(E.biff=5,K=!0,Vd(E.codepage=28591)),E.biff==8&&me.BIFFVer==0&&me.dt==16&&(E.biff=2),W++)break;if(s=t.dense?[]:{},E.biff<8&&!K&&(K=!0,Vd(E.codepage=t.codepage||1252)),E.biff<5||me.BIFFVer==0&&me.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var le={pos:e.l-ie,name:d};i[le.pos]=le,E.snames.push(d)}else d=(i[se]||{name:""}).name;me.dt==32&&(s["!type"]="chart"),me.dt==64&&(s["!type"]="macro"),q=[],H=[],E.arrayf=w=[],Q=[],J=[],re=!1,P={Hidden:(i[se]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[me.r]||[])[me.c]:s[fn({c:me.c,r:me.r})])&&++me.c,j={ixfe:me.ixfe,XF:S[me.ixfe]||{},v:me.val,t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:me.c,r:me.r},j,t);break;case 5:case 517:j={ixfe:me.ixfe,XF:S[me.ixfe],v:me.val,t:me.t},O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:me.c,r:me.r},j,t);break;case 638:j={ixfe:me.ixfe,XF:S[me.ixfe],v:me.rknum,t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:me.c,r:me.r},j,t);break;case 189:for(var te=me.c;te<=me.C;++te){var Te=me.rkrec[te-me.c][0];j={ixfe:Te,XF:S[Te],v:me.rkrec[te-me.c][1],t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:te,r:me.r},j,t)}break;case 6:case 518:case 1030:{if(me.val=="String"){l=me;break}if(j=Rv(me.val,me.cell.ixfe,me.tt),j.XF=S[j.ixfe],t.cellFormula){var we=me.formula;if(we&&we[0]&&we[0][0]&&we[0][0][0]=="PtgExp"){var Ie=we[0][0][1][0],he=we[0][0][1][1],de=fn({r:Ie,c:he});y[de]?j.f=""+nl(me.formula,o,me.cell,X,E):j.F=((t.dense?(s[Ie]||[])[he]:s[de])||{}).F}else j.f=""+nl(me.formula,o,me.cell,X,E)}O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T(me.cell,j,t),l=me}break;case 7:case 519:if(l)l.val=me,j=Rv(me,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+nl(l.formula,o,l.cell,X,E)),O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(me);var Ce=fn(me[0].s);if(m=t.dense?(s[me[0].s.r]||[])[me[0].s.c]:s[Ce],t.cellFormula&&m){if(!l||!Ce||!m)break;m.f=""+nl(me[1],o,me[0],X,E),m.F=jn(me[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;y[fn(l.cell)]=me[0],m=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[fn(l.cell)],(m||{}).f=""+nl(me[0],o,f,X,E)}}break;case 253:j=Rv(c[me.isst].t,me.ixfe,"s"),c[me.isst].h&&(j.h=c[me.isst].h),j.XF=S[j.ixfe],O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:me.c,r:me.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:me.ixfe,XF:S[me.ixfe],t:"z"},O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:me.c,r:me.r},j,t));break;case 190:if(t.sheetStubs)for(var Ve=me.c;Ve<=me.C;++Ve){var ge=me.ixfe[Ve-me.c];j={ixfe:ge,XF:S[ge],t:"z"},O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:Ve,r:me.r},j,t)}break;case 214:case 516:case 4:j=Rv(me.val,me.ixfe,"s"),j.XF=S[j.ixfe],O>0&&(j.z=z[j.ixfe>>8&63]),yu(j,t,r.opts.Date1904),T({c:me.c,r:me.r},j,t);break;case 0:case 512:W===1&&(o=me);break;case 252:c=me;break;case 1054:if(E.biff==4){z[O++]=me[1];for(var fe=0;fe<O+163&&sn[fe]!=me[1];++fe);fe>=163&&kf(me[1],O+163)}else kf(me[1],me[0]);break;case 30:{z[O++]=me;for(var _e=0;_e<O+163&&sn[_e]!=me;++_e);_e>=163&&kf(me,O+163)}break;case 229:q=q.concat(me);break;case 93:H[me.cmo[0]]=E.lastobj=me;break;case 438:E.lastobj.TxO=me;break;case 127:E.lastobj.ImData=me;break;case 440:for(g=me[0].s.r;g<=me[0].e.r;++g)for(v=me[0].s.c;v<=me[0].e.c;++v)m=t.dense?(s[g]||[])[v]:s[fn({c:v,r:g})],m&&(m.l=me[1]);break;case 2048:for(g=me[0].s.r;g<=me[0].e.r;++g)for(v=me[0].s.c;v<=me[0].e.c;++v)m=t.dense?(s[g]||[])[v]:s[fn({c:v,r:g})],m&&m.l&&(m.l.Tooltip=me[1]);break;case 28:{if(E.biff<=5&&E.biff>=2)break;m=t.dense?(s[me[0].r]||[])[me[0].c]:s[fn(me[0])];var Ue=H[me[2]];m||(t.dense?(s[me[0].r]||(s[me[0].r]=[]),m=s[me[0].r][me[0].c]={t:"z"}):m=s[fn(me[0])]={t:"z"},o.e.r=Math.max(o.e.r,me[0].r),o.s.r=Math.min(o.s.r,me[0].r),o.e.c=Math.max(o.e.c,me[0].c),o.s.c=Math.min(o.s.c,me[0].c)),m.c||(m.c=[]),b={a:me[1],t:Ue.TxO.t},m.c.push(b)}break;case 2173:T0e(S[me.ixfe],me.ext);break;case 125:{if(!E.cellStyles)break;for(;me.e>=me.s;)Q[me.e--]={width:me.w/256,level:me.level||0,hidden:!!(me.flags&1)},re||(re=!0,B3(me.w/256)),N0(Q[me.e+1])}break;case 520:{var ke={};me.level!=null&&(J[me.r]=ke,ke.level=me.level),me.hidden&&(J[me.r]=ke,ke.hidden=!0),me.hpt&&(J[me.r]=ke,ke.hpt=me.hpt,ke.hpx=rp(me.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||gh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[xe]]=me;break;case 161:s["!margins"]||gh(s["!margins"]={}),s["!margins"].header=me.header,s["!margins"].footer=me.footer;break;case 574:me.RTL&&(_.Views[0].RTL=!0);break;case 146:A=me;break;case 2198:F=me;break;case 140:N=me;break;case 442:d?P.CodeName=me||P.name:_.WBProps.CodeName=me||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+xe.toString(16)),e.l+=ie}return r.SheetNames=Js(i).sort(function(Fe,qe){return Number(Fe)-Number(qe)}).map(function(Fe){return i[Fe].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&V.forEach(function(Fe,qe){r.Sheets[r.SheetNames[qe]]["!autofilter"]=Fe}),r.Strings=c,r.SSF=xs(sn),E.enc&&(r.Encryption=E.enc),F&&(r.Themes=F),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),X.names.length>0&&(_.Names=X.names),r.Workbook=_,r}var hx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Hge(e,t,r){var a=Kr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=w8(a,Ck,hx.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Kr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=w8(o,Ak,hx.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(bR(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Wge(e,t){var r=[],a=[],s=[],i=0,o,l=QI(Ck,"n"),c=QI(Ak,"n");if(e.Props)for(o=Js(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Js(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)_R.indexOf(s[i][0])>-1||vR.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);a.length&&Kr.utils.cfb_add(t,"/SummaryInformation",N8(a,hx.SI,c,Ak)),(r.length||d.length)&&Kr.utils.cfb_add(t,"/DocumentSummaryInformation",N8(r,hx.DSI,l,Ck,d.length?d:null,hx.UDI))}function w9(e,t){t||(t={}),K3(t),p3(),t.codepage&&m3(t.codepage);var r,a;if(e.FullPaths){if(Kr.find(e,"/encryption"))throw new Error("File is password-protected");r=Kr.find(e,"!CompObj"),a=Kr.find(e,"/Workbook")||Kr.find(e,"/Book")}else{switch(t.type){case"base64":e=wc(Cc(e));break;case"binary":e=wc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Oo(e,0),a={content:e}}var s,i;if(r&&Uge(r),t.bookProps&&!t.bookSheets)s={};else{var o=Ln?"buffer":"array";if(a&&a.content)s=zge(a.content,t);else if((i=Kr.find(e,"PerfectOffice_MAIN"))&&i.content)s=xh.to_workbook(i.content,(t.type=o,t));else if((i=Kr.find(e,"NativeContent_MAIN"))&&i.content)s=xh.to_workbook(i.content,(t.type=o,t));else throw(i=Kr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Kr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=ahe(e))}var l={};return e.FullPaths&&Hge(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function Vge(e,t){var r=t||{},a=Kr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Kr.utils.cfb_add(a,s,N9(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Wge(e,a),r.biff==8&&e.vbaraw&&she(a,Kr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var fg={0:{f:xpe},1:{f:kpe},2:{f:zpe},3:{f:Ppe},4:{f:Ape},5:{f:Upe},6:{f:Kpe},7:{f:Fpe},8:{f:txe},9:{f:exe},10:{f:Jpe},11:{f:Zpe},12:{f:_pe},13:{f:Wpe},14:{f:Dpe},15:{f:Tpe},16:{f:h9},17:{f:Ype},18:{f:Rpe},19:{f:E3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Yxe},40:{},42:{},43:{f:Kfe},44:{f:Vfe},45:{f:Qfe},46:{f:Zfe},47:{f:Jfe},48:{},49:{f:bce},50:{},51:{f:I0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:MR},62:{f:Gpe},63:{f:$0e},64:{f:gxe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:fl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:hxe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Npe},148:{f:bpe,p:16},151:{f:oxe},152:{},153:{f:Gxe},154:{},155:{},156:{f:Wxe},157:{},158:{},159:{T:1,f:cfe},160:{T:-1},161:{T:1,f:zh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:rxe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:O0e},336:{T:-1},337:{f:F0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_k},357:{},358:{},359:{},360:{T:1},361:{},362:{f:FR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:lxe},427:{f:cxe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:uxe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:wpe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:sxe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_k},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Z0e},633:{T:1},634:{T:-1},635:{T:1,f:Q0e},636:{T:-1},637:{f:jce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Dxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:vxe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Dk={6:{f:Sj},10:{f:t0},12:{f:ji},13:{f:ji},14:{f:si},15:{f:si},16:{f:ol},17:{f:si},18:{f:si},19:{f:ji},20:{f:A8},21:{f:A8},23:{f:FR},24:{f:T8},25:{f:si},26:{},27:{},28:{f:vue},29:{},34:{f:si},35:{f:E8},38:{f:ol},39:{f:ol},40:{f:ol},41:{f:ol},42:{f:si},43:{f:si},47:{f:Tfe},49:{f:Wde},51:{f:ji},60:{},61:{f:Ude},64:{f:si},65:{f:Hde},66:{f:ji},77:{},80:{},81:{},82:{},85:{f:ji},89:{},90:{},91:{},92:{f:Ede},93:{f:wue},94:{},95:{f:si},96:{},97:{},99:{f:si},125:{f:MR},128:{f:iue},129:{f:Ode},130:{f:ji},131:{f:si},132:{f:si},133:{f:Pde},134:{},140:{f:Eue},141:{f:ji},144:{},146:{f:Pue},151:{},152:{},153:{},154:{},155:{},156:{f:ji},157:{},158:{},160:{f:Bue},161:{f:Lue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:rue},190:{f:nue},193:{f:t0},197:{},198:{},199:{},200:{},201:{},202:{f:si},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ji},220:{},221:{f:si},222:{},224:{f:sue},225:{f:Ade},226:{f:t0},227:{},229:{f:bue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Dde},253:{f:Gde},255:{f:Fde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:CR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:si},353:{f:t0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:uue},431:{f:si},432:{},433:{},434:{},437:{},438:{f:kue},439:{f:si},440:{f:Sue},441:{},442:{f:Eg},443:{},444:{f:ji},445:{},446:{},448:{f:t0},449:{f:Bde,r:2},450:{f:t0},512:{f:S8},513:{f:Rue},515:{f:cue},516:{f:Xde},517:{f:C8},519:{f:Uue},520:{f:Mde},523:{},545:{f:O8},549:{f:k8},566:{},574:{f:$de},638:{f:tue},659:{},1048:{},1054:{f:Qde},1084:{},1212:{f:pue},2048:{f:Cue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Lv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:t0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Iue,r:12},2173:{f:E0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:si,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:mue,r:12},2197:{},2198:{f:j0e,r:12},2199:{},2200:{},2201:{},2202:{f:xue,r:12},2203:{f:t0},2204:{},2205:{},2206:{},2207:{},2211:{f:Rde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ji},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Fue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Oue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:S8},1:{},2:{f:Wue},3:{f:zue},4:{f:$ue},5:{f:C8},7:{f:Gue},8:{},9:{f:Lv},11:{},22:{f:ji},30:{f:Zde},31:{},32:{},33:{f:O8},36:{},37:{f:k8},50:{f:Kue},62:{},52:{},67:{},68:{f:ji},69:{},86:{},126:{},127:{f:que},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Xue},223:{},234:{},354:{},421:{},518:{f:Sj},521:{f:Lv},536:{f:T8},547:{f:E8},561:{},579:{},1030:{f:Sj},1033:{f:Lv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function hr(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&_3(r)&&e.push(r)}}function Gge(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return hr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function Ig(e,t,r){return e||(e=Mt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Kge(e,t,r,a){var s=Mt(9);return Ig(s,e,t),AR(r,a||"b",s),s}function Xge(e,t,r){var a=Mt(8+2*r.length);return Ig(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function Yge(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?$i(ps(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?hr(e,2,Vue(r,a,s)):hr(e,3,Hue(r,a,s));return;case"b":case"e":hr(e,5,Kge(r,a,t.v,t.t));return;case"s":case"str":hr(e,4,Xge(r,a,(t.v||"").slice(0,255)));return}hr(e,1,Ig(null,r,a))}function Qge(e,t,r,a){var s=Array.isArray(t),i=da(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=jn(i)}for(var d=i.s.r;d<=i.e.r;++d){l=di(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=Rs(u)),o=c[u]+l;var f=s?(t[d]||[])[u]:t[o];f&&Yge(e,f,d,u)}}}function Jge(e,t){for(var r=t||{},a=Ql(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return hr(a,r.biff==4?1033:r.biff==3?521:9,F3(e,16,r)),Qge(a,e.Sheets[e.SheetNames[s]],s,r),hr(a,10),a.end()}function Zge(e,t,r){hr(e,49,Vde({sz:12,name:"Arial"},r))}function eve(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&hr(e,1054,Jde(s,t[s],r))})}function tve(e,t){var r=Mt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),hr(e,2151,r),r=Mt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),IR(da(t["!ref"]||"A1"),r),r.write_shift(4,4),hr(e,2152,r)}function rve(e,t){for(var r=0;r<16;++r)hr(e,224,_8({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){hr(e,224,_8(a,0,t))})}function nve(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];hr(e,440,_ue(a)),a[1].Tooltip&&hr(e,2048,Aue(a))}delete t["!links"]}function ave(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&hr(e,125,Due(jy(s,a),s))})}}function sve(e,t,r,a,s){var i=16+F0(s.cellXfs,t,s);if(t.v==null&&!t.bf){hr(e,513,Ph(r,a,i));return}if(t.bf)hr(e,6,Ome(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?$i(ps(t.v)):t.v;hr(e,515,due(r,a,o,i));break;case"b":case"e":hr(e,517,lue(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=H3(s.Strings,t.v,s.revStrings);hr(e,253,Kde(r,a,l,i))}else hr(e,516,Yde(r,a,(t.v||"").slice(0,255),i,s));break;default:hr(e,513,Ph(r,a,i))}}function ive(e,t,r){var a=Ql(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,f="",p=[],m=da(i["!ref"]||"A1"),b=d?65536:16384;if(m.e.c>255||m.e.r>=b){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,b-1)}hr(a,2057,F3(r,16,t)),hr(a,13,ed(1)),hr(a,12,ed(100)),hr(a,15,kl(!0)),hr(a,17,kl(!1)),hr(a,16,Th(.001)),hr(a,95,kl(!0)),hr(a,42,kl(!1)),hr(a,43,kl(!1)),hr(a,130,ed(1)),hr(a,128,oue()),hr(a,131,kl(!1)),hr(a,132,kl(!1)),d&&ave(a,i["!cols"]),hr(a,512,eue(m,t)),d&&(i["!links"]=[]);for(var v=m.s.r;v<=m.e.r;++v){f=di(v);for(var g=m.s.c;g<=m.e.c;++g){v===m.s.r&&(p[g]=Rs(g)),u=p[g]+f;var y=c?(i[v]||[])[g]:i[u];y&&(sve(a,y,v,g,t),d&&y.l&&i["!links"].push([u,y.l]))}}var w=l.CodeName||l.name||s;return d&&hr(a,574,zde((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&hr(a,229,yue(i["!merges"])),d&&nve(a,i),hr(a,442,ER(w)),d&&tve(a,i),hr(a,10),a.end()}function ove(e,t,r){var a=Ql(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(hr(a,2057,F3(e,5,r)),r.bookType=="xla"&&hr(a,135),hr(a,225,l?ed(1200):null),hr(a,193,lde(2)),c&&hr(a,191),c&&hr(a,192),hr(a,226),hr(a,92,Tde("SheetJS",r)),hr(a,66,ed(l?1200:1252)),l&&hr(a,353,ed(0)),l&&hr(a,448),hr(a,317,Mue(e.SheetNames.length)),l&&e.vbaraw&&hr(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";hr(a,442,ER(d))}hr(a,156,ed(17)),hr(a,25,kl(!1)),hr(a,18,kl(!1)),hr(a,19,ed(0)),l&&hr(a,431,kl(!1)),l&&hr(a,444,ed(0)),hr(a,61,qde()),hr(a,64,kl(!1)),hr(a,141,ed(0)),hr(a,34,kl(Bxe(e)=="true")),hr(a,14,kl(!0)),l&&hr(a,439,kl(!1)),hr(a,218,ed(0)),Zge(a,e,r),eve(a,e.SSF,r),rve(a,r),l&&hr(a,352,kl(!1));var u=a.end(),f=Ql();l&&hr(f,140,Tue()),l&&r.Strings&&Gge(f,252,Lde(r.Strings)),hr(f,10);var p=f.end(),m=Ql(),b=0,v=0;for(v=0;v<e.SheetNames.length;++v)b+=(l?12:11)+(l?2:1)*e.SheetNames[v].length;var g=u.length+b+p.length;for(v=0;v<e.SheetNames.length;++v){var y=i[v]||{};hr(m,133,Ide({pos:g,hs:y.Hidden||0,dt:0,name:e.SheetNames[v]},r)),g+=t[v].length}var w=m.end();if(b!=w.length)throw new Error("BS8 "+b+" != "+w.length);var j=[];return u.length&&j.push(u),w.length&&j.push(w),p.length&&j.push(p),oo(j)}function lve(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=xs(sn)),e&&e.SSF&&(mp(),xy(e.SSF),r.revssf=vy(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,X3(r),r.cellXfs=[],F0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=ive(s,r,e);return a.unshift(ove(e,a,r)),oo(a)}function N9(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=Zl(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return lve(e,t);case 4:case 3:case 2:return Jge(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function q8(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=Vle(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,f=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(o=0;o<c.length;++o){var v=c[o].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var y=v.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var j=w,N=0;j.charAt(0)=="<"&&(N=j.indexOf(">"))>-1;)j=j.slice(N+1);for(var S=0;S<b.length;++S){var A=b[S];A.s.c==u&&A.s.r<d&&d<=A.e.r&&(u=A.e.c+1,S=-1)}var _=mn(w.slice(0,w.indexOf(">")));p=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||p>1)&&b.push({s:{r:d,c:u},e:{r:d+(f||1)-1,c:u+p-1}});var P=_.t||_["data-t"]||"";if(!j.length){u+=p;continue}if(j=VM(j),m.s.r>d&&(m.s.r=d),m.e.r<d&&(m.e.r=d),m.s.c>u&&(m.s.c=u),m.e.c<u&&(m.e.c=u),!j.length){u+=p;continue}var I={t:"s",v:j};r.raw||!j.trim().length||P=="s"||(j==="TRUE"?I={t:"b",v:!0}:j==="FALSE"?I={t:"b",v:!1}:isNaN(Jd(j))?isNaN(ep(j).getDate())||(I={t:"d",v:ps(j)},r.cellDates||(I={t:"n",v:$i(I.v)}),I.z=r.dateNF||sn[14]):I={t:"n",v:Jd(j)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=I):a[fn({r:d,c:u})]=I,u+=p}}}}return a["!ref"]=jn(m),b.length&&(a["!merges"]=b),a}function cve(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=fn({r,c:o}),f=a.dense?(e[r]||[])[o]:e[u],p=f&&f.v!=null&&(f.h||j3(f.w||(Tf(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),a.editable?p='<span contenteditable="true">'+p+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),m.id=(a.id||"sjs")+"-"+u,i.push(lr("td",p,m))}}var b="<tr>";return b+i.join("")+"</tr>"}var dve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',uve="</body></html>";function fve(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return L0(q8(r[0],t),t);var a=J3();return r.forEach(function(s,i){Z3(a,q8(s,t),"Sheet"+(i+1))}),a}function hve(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function j9(e,t){var r=t||{},a=r.header!=null?r.header:dve,s=r.footer!=null?r.footer:uve,i=[a],o=Zl(e["!ref"]);r.dense=Array.isArray(e),i.push(hve(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(cve(e,o,l,r));return i.push("</table>"+s),i.join("")}function k9(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?Bs(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=Zl(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var f=[],p=0,m=e["!rows"]||(e["!rows"]=[]),b=0,v=0,g=0,y=0,w=0,j=0;for(e["!cols"]||(e["!cols"]=[]);b<l.length&&v<c;++b){var N=l[b];if($8(N)){if(a.display)continue;m[v]={hidden:!0}}var S=N.children;for(g=y=0;g<S.length;++g){var A=S[g];if(!(a.display&&$8(A))){var _=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):VM(A.innerHTML),P=A.getAttribute("data-z")||A.getAttribute("z");for(p=0;p<f.length;++p){var I=f[p];I.s.c==y+i&&I.s.r<v+s&&v+s<=I.e.r&&(y=I.e.c+1-i,p=-1)}j=+A.getAttribute("colspan")||1,((w=+A.getAttribute("rowspan")||1)>1||j>1)&&f.push({s:{r:v+s,c:y+i},e:{r:v+s+(w||1)-1,c:y+i+(j||1)-1}});var B={t:"s",v:_},T=A.getAttribute("data-t")||A.getAttribute("t")||"";_!=null&&(_.length==0?B.t=T||"z":a.raw||_.trim().length==0||T=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(Jd(_))?isNaN(ep(_).getDate())||(B={t:"d",v:ps(_)},a.cellDates||(B={t:"n",v:$i(B.v)}),B.z=a.dateNF||sn[14]):B={t:"n",v:Jd(_)})),B.z===void 0&&P!=null&&(B.z=P);var E="",F=A.getElementsByTagName("A");if(F&&F.length)for(var q=0;q<F.length&&!(F[q].hasAttribute("href")&&(E=F[q].getAttribute("href"),E.charAt(0)!="#"));++q);E&&E.charAt(0)!="#"&&(B.l={Target:E}),a.dense?(e[v+s]||(e[v+s]=[]),e[v+s][y+i]=B):e[fn({c:y+i,r:v+s})]=B,d.e.c<y+i&&(d.e.c=y+i),y+=j}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),d.e.r=Math.max(d.e.r,v-1+s),e["!ref"]=jn(d),v>=c&&(e["!fullref"]=jn((d.e.r=l.length-b+v-1+s,d))),e}function S9(e,t){var r=t||{},a=r.dense?[]:{};return k9(a,e,t)}function mve(e,t){return L0(S9(e,t),t)}function $8(e){var t="",r=pve(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function pve(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function xve(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=la(t.replace(/<[^>]*>/g,""));return[r]}var z8={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function _9(e,t){var r=t||{},a=k3(e),s=[],i,o,l={name:""},c="",d=0,u,f,p={},m=[],b=r.dense?[]:{},v,g,y={value:""},w="",j=0,N=[],S=-1,A=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,I={},B=[],T={},E=0,F=0,q=[],H=1,Q=1,J=[],re={Names:[]},X={},ee=["",""],W=[],O={},z="",V=0,U=!1,K=!1,se=0;for(ig.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=ig.exec(a);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?b["!ref"]=jn(_):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(b["!fullref"]=b["!ref"],_.e.r=r.sheetRows-1,b["!ref"]=jn(_)),B.length&&(b["!merges"]=B),q.length&&(b["!rows"]=q),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),m.push(u.name),p[u.name]=b,K=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=mn(v[0],!1),S=A=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,b=r.dense?[]:{},B=[],q=[],K=!0);break;case"table-row-group":v[1]==="/"?--P:++P;break;case"table-row":case"":if(v[1]==="/"){S+=H,H=1;break}if(f=mn(v[0],!1),f.?S=f.-1:S==-1&&(S=0),H=+f["number-rows-repeated"]||1,H<10)for(se=0;se<H;++se)P>0&&(q[S+se]={level:P});A=-1;break;case"covered-table-cell":v[1]!=="/"&&++A,r.sheetStubs&&(r.dense?(b[S]||(b[S]=[]),b[S][A]={t:"z"}):b[fn({r:S,c:A})]={t:"z"}),w="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++A,y=mn(v[0],!1),Q=parseInt(y["number-columns-repeated"]||"1",10),g={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(g.f=R8(la(y.formula))),(y.||y["value-type"])=="string"&&(g.t="s",g.v=la(y["string-value"]||""),r.dense?(b[S]||(b[S]=[]),b[S][A]=g):b[fn({r:S,c:A})]=g),A+=Q-1;else if(v[1]!=="/"){++A,w="",j=0,N=[],Q=1;var xe=H?S+H-1:S;if(A>_.e.c&&(_.e.c=A),A<_.s.c&&(_.s.c=A),S<_.s.r&&(_.s.r=S),xe>_.e.r&&(_.e.r=xe),y=mn(v[0],!1),W=[],O={},g={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=la(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(E=parseInt(y["number-matrix-rows-spanned"],10)||0,F=parseInt(y["number-matrix-columns-spanned"],10)||0,T={s:{r:S,c:A},e:{r:S+E-1,c:A+F-1}},g.F=jn(T),J.push([T,g.F])),y.formula)g.f=R8(y.formula);else for(se=0;se<J.length;++se)S>=J[se][0].s.r&&S<=J[se][0].e.r&&A>=J[se][0].s.c&&A<=J[se][0].e.c&&(g.F=J[se][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(E=parseInt(y["number-rows-spanned"],10)||0,F=parseInt(y["number-columns-spanned"],10)||0,T={s:{r:S,c:A},e:{r:S+E-1,c:A+F-1}},B.push(T)),y["number-columns-repeated"]&&(Q=parseInt(y["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=fs(y["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(y.value);break;case"percentage":g.t="n",g.v=parseFloat(y.value);break;case"currency":g.t="n",g.v=parseFloat(y.value);break;case"date":g.t="d",g.v=ps(y["date-value"]),r.cellDates||(g.t="n",g.v=$i(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=zle(y["time-value"])/86400,r.cellDates&&(g.t="d",g.v=by(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(y.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",y["string-value"]!=null&&(w=la(y["string-value"]),N=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(U=!1,g.t==="s"&&(g.v=w||"",N.length&&(g.R=N),U=j==0),X.Target&&(g.l=X),W.length>0&&(g.c=W,W=[]),w&&r.cellText!==!1&&(g.w=w),U&&(g.t="z",delete g.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ie=0;ie<H;++ie){if(Q=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(b[S+ie]||(b[S+ie]=[]),b[S+ie][A]=ie==0?g:xs(g);--Q>0;)b[S+ie][A+Q]=xs(g);else for(b[fn({r:S+ie,c:A})]=g;--Q>0;)b[fn({r:S+ie,c:A+Q})]=xs(g);_.e.c<=A&&(_.e.c=A)}Q=parseInt(y["number-columns-repeated"]||"1",10),A+=Q-1,Q=0,g={},w="",N=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;O.t=w,N.length&&(O.R=N),O.a=z,W.push(O)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);z="",V=0,w="",j=0,N=[];break;case"creator":v[1]==="/"?z=a.slice(V,v.index):V=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);w="",j=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(c="",l=mn(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=mn(v[0],!1),c+=z8[v[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=mn(v[0],!1),c+=z8[v[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,v.index);break}else d=v.index+v[0].length;break;case"named-range":o=mn(v[0],!1),ee=_j(o["cell-range-address"]);var ue={Name:o.name,Ref:ee[0]+"!"+ee[1]};K&&(ue.Sheet=m.length),re.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!y||!y["string-value"])){var Be=xve(a.slice(j,v.index));w=(w.length>0?w+`
`:"")+Be[0]}else mn(v[0],!1),j=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{ee=_j(mn(v[0])["target-range-address"]),p[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(X=mn(v[0],!1),!X.href)break;X.Target=la(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(ee=_j(X.Target.slice(1)),X.Target="#"+ee[0]+"!"+ee[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var me={Sheets:p,SheetNames:m,Workbook:re};return r.bookSheets&&delete me.Sheets,me}function H8(e,t){t=t||{},Zc(e,"META-INF/manifest.xml")&&zce(Ni(e,"META-INF/manifest.xml"),t);var r=Nc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=_9($a(r),t);return Zc(e,"meta.xml")&&(a.Props=xR(Ni(e,"meta.xml"))),a}function W8(e,t){return _9(e,t)}var gve=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+sg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return fi+t}})(),V8=(function(){var e=function(i){return Ta(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Ta(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,f=Zl(i["!ref"]||"A1"),p=i["!merges"]||[],m=0,b=Array.isArray(i);if(i["!cols"])for(u=0;u<=f.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var v="",g=i["!rows"]||[];for(d=0;d<f.s.r;++d)v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;d<=f.e.r;++d){for(v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`>
`),u=0;u<f.s.c;++u)c.push(t);for(;u<=f.e.c;++u){var y=!1,w={},j="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>u)&&!(p[m].s.r>d)&&!(p[m].e.c<u)&&!(p[m].e.r<d)){(p[m].s.c!=u||p[m].s.r!=d)&&(y=!0),w["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,w["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(y){c.push(r);continue}var N=fn({r:d,c:u}),S=b?(i[d]||[])[u]:i[N];if(S&&S.f&&(w["table:formula"]=Ta(Mme(S.f)),S.F&&S.F.slice(0,N.length)==N)){var A=Zl(S.F);w["table:number-matrix-columns-spanned"]=A.e.c-A.s.c+1,w["table:number-matrix-rows-spanned"]=A.e.r-A.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":j=S.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=S.v?"true":"false";break;case"n":j=S.w||String(S.v||0),w["office:value-type"]="float",w["office:value"]=S.v||0;break;case"s":case"str":j=S.v==null?"":S.v,w["office:value-type"]="string";break;case"d":j=S.w||ps(S.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=ps(S.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var _=e(j);if(S.l&&S.l.Target){var P=S.l.Target;P=P.charAt(0)=="#"?"#"+Rme(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),_=lr("text:a",_,{"xlink:href":P.replace(/&/g,"&amp;")})}c.push("          "+lr("table:table-cell",lr("text:p",_,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var f=d["!cols"][u];if(f.width==null&&f.wpx==null&&f.wch==null)continue;N0(f),f.ods=l;var p=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var f=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[fi],d=sg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=sg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(pR().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function C9(e,t){if(t.bookType=="fods")return V8(e,t);var r=y3(),a="",s=[],i=[];return a="mimetype",Tn(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",Tn(r,a,V8(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",Tn(r,a,gve(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",Tn(r,a,fi+pR()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",Tn(r,a,Vce(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",Tn(r,a,Hce(s)),r}function Ih(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Lk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):$a(D0(e))}function vve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):wc(Eu(e))}function bve(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function k0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function G8(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function yve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function wve(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function hg(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Qs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ma(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=hg(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=hg(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Ao(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(Aa(a*8+s.type)),s.type==2&&t.push(Aa(s.data.length)),t.push(s.data))})}),k0(t)}function G3(e,t){return e?.map(function(r){return t(r.data)})||[]}function Qc(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=hg(e,a),i=ma(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:Qs(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ma(l.data),d=Qs(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Qs(i[3][0].data)>>>0>0),r.push(o)}return r}function sm(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Aa(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Aa(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Aa(o.data.length)}],a[2].push({data:Ao(o.meta),type:2})});var i=Ao(a);t.push(Aa(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),k0(t)}function Nve(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=hg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[k0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=k0(s);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function Jc(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Nve(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return k0(t)}function im(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Aa(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return k0(t)}function jve(e,t,r,a){var s=Ih(e),i=s.getUint32(4,!0),o=(a>1?12:8)+G8(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=G8(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(d))f={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function kve(e,t,r){var a=Ih(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=yve(e,i),i+=16),s&2&&(d=a.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Aj(e,t){var r=new Uint8Array(32),a=Ih(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,wve(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Ej(e,t){var r=new Uint8Array(32),a=Ih(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function Sve(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return jve(e,t,r,e[0]);case 5:return kve(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function rl(e){var t=ma(e);return hg(t[1][0].data)}function K8(e,t){var r=ma(t.data),a=Qs(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=ma(o.data),c=Qs(l[1][0].data)>>>0;switch(a){case 1:i[c]=Lk(l[3][0].data);break;case 8:{var d=e[rl(l[9][0].data)][0],u=ma(d.data),f=e[rl(u[1][0].data)][0],p=Qs(f.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=ma(f.data);i[c]=m[3].map(function(b){return Lk(b.data)}).join("")}break}}),i}function _ve(e,t){var r,a,s,i,o,l,c,d,u,f,p,m,b,v,g=ma(e),y=Qs(g[1][0].data)>>>0,w=Qs(g[2][0].data)>>>0,j=((a=(r=g[8])==null?void 0:r[0])==null?void 0:a.data)&&Qs(g[8][0].data)>0||!1,N,S;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&t!=0)N=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=g[6])==null?void 0:c[0])==null?void 0:d.data;else if((f=(u=g[4])==null?void 0:u[0])!=null&&f.data&&t!=1)N=(m=(p=g[4])==null?void 0:p[0])==null?void 0:m.data,S=(v=(b=g[3])==null?void 0:b[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var A=j?4:1,_=Ih(N),P=[],I=0;I<N.length/2;++I){var B=_.getUint16(I*2,!0);B<65535&&P.push([I,B])}if(P.length!=w)throw"Expected ".concat(w," cells, found ").concat(P.length);var T=[];for(I=0;I<P.length-1;++I)T[P[I][0]]=S.subarray(P[I][1]*A,P[I+1][1]*A);return P.length>=1&&(T[P[P.length-1][0]]=S.subarray(P[P.length-1][1]*A)),{R:y,cells:T}}function Cve(e,t){var r,a=ma(t.data),s=(r=a?.[7])!=null&&r[0]?Qs(a[7][0].data)>>>0>0?1:0:-1,i=G3(a[5],function(o){return _ve(o,s)});return{nrows:Qs(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function Ave(e,t,r){var a,s=ma(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Qs(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Qs(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=jn(i);var o=ma(s[4][0].data),l=K8(e,e[rl(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?K8(e,e[rl(o[17][0].data)][0]):[],d=ma(o[3][0].data),u=0;d[1].forEach(function(f){var p=ma(f.data),m=e[rl(p[2][0].data)][0],b=Qs(m.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var v=Cve(e,m);v.data.forEach(function(g,y){g.forEach(function(w,j){var N=fn({r:u+y,c:j}),S=Sve(w,l,c);S&&(r[N]=S)})}),u+=v.nrows})}function Eve(e,t){var r=ma(t.data),a={"!ref":"A1"},s=e[rl(r[2][0].data)],i=Qs(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Ave(e,s[0],a),a}function Tve(e,t){var r,a=ma(t.data),s={name:(r=a[1])!=null&&r[0]?Lk(a[1][0].data):"",sheets:[]},i=G3(a[2],rl);return i.forEach(function(o){e[o].forEach(function(l){var c=Qs(l.meta[1][0].data);c==6e3&&s.sheets.push(Eve(e,l))})}),s}function Ove(e,t){var r=J3(),a=ma(t.data),s=G3(a[1],rl);if(s.forEach(function(i){e[i].forEach(function(o){var l=Qs(o.meta[1][0].data);if(l==2){var c=Tve(e,o);c.sheets.forEach(function(d,u){Z3(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Tj(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Jc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var u;try{u=Qc(d)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&Qs(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Qs(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Ove(i,l)}function Pve(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Qs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Ih(e[7][0].data),u=0,f=[],p=Ih(e[4][0].data),m=0,b=[],v=0;v<t.length;++v){if(t[v]==null){d.setUint16(v*2,65535,!0),p.setUint16(v*2,65535);continue}d.setUint16(v*2,u,!0),p.setUint16(v*2,m,!0);var g,y;switch(typeof t[v]){case"string":g=Aj({t:"s",v:t[v]},r),y=Ej({t:"s",v:t[v]},r);break;case"number":g=Aj({t:"n",v:t[v]},r),y=Ej({t:"n",v:t[v]},r);break;case"boolean":g=Aj({t:"b",v:t[v]},r),y=Ej({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(g),u+=g.length,b.push(y),m+=y.length,++c}for(e[2][0].data=Aa(c);v<e[7][0].data.length/2;++v)d.setUint16(v*2,65535,!0),p.setUint16(v*2,65535,!0);return e[6][0].data=k0(f),e[3][0].data=k0(b),c}function Ive(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Zl(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(jn(a)));var i=_b(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(z){return z.forEach(function(V){typeof V=="string"&&o.push(V)})});var l={},c=[],d=Kr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(z,V){return[z,d.FullPaths[V]]}).forEach(function(z){var V=z[0],U=z[1];if(V.type==2&&V.name.match(/\.iwa/)){var K=V.content,se=Jc(K),xe=Qc(se);xe.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:U,type:Qs(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(z,V){return z-V});var u=c.filter(function(z){return z>1}).map(function(z){return[z,Aa(z)]});d.FileIndex.map(function(z,V){return[z,d.FullPaths[V]]}).forEach(function(z){var V=z[0];if(z[1],!!V.name.match(/\.iwa/)){var U=Qc(Jc(V.content));U.forEach(function(K){K.messages.forEach(function(se){u.forEach(function(xe){K.messages.some(function(ie){return Qs(ie.meta[1][0].data)!=11006&&bve(ie.data,xe[1])})&&l[xe[0]].deps.push(K.id)})})})}});for(var f=Kr.find(d,l[1].location),p=Qc(Jc(f.content)),m,b=0;b<p.length;++b){var v=p[b];v.id==1&&(m=v)}var g=rl(ma(m.messages[0].data)[1][0].data);for(f=Kr.find(d,l[g].location),p=Qc(Jc(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);for(g=rl(ma(m.messages[0].data)[2][0].data),f=Kr.find(d,l[g].location),p=Qc(Jc(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);for(g=rl(ma(m.messages[0].data)[2][0].data),f=Kr.find(d,l[g].location),p=Qc(Jc(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);var y=ma(m.messages[0].data);{y[6][0].data=Aa(a.e.r+1),y[7][0].data=Aa(a.e.c+1);var w=rl(y[46][0].data),j=Kr.find(d,l[w].location),N=Qc(Jc(j.content));{for(var S=0;S<N.length&&N[S].id!=w;++S);if(N[S].id!=w)throw"Bad ColumnRowUIDMapArchive";var A=ma(N[S].messages[0].data);A[1]=[],A[2]=[],A[3]=[];for(var _=0;_<=a.e.c;++_){var P=[];P[1]=P[2]=[{type:0,data:Aa(_+420690)}],A[1].push({type:2,data:Ao(P)}),A[2].push({type:0,data:Aa(_)}),A[3].push({type:0,data:Aa(_)})}A[4]=[],A[5]=[],A[6]=[];for(var I=0;I<=a.e.r;++I)P=[],P[1]=P[2]=[{type:0,data:Aa(I+726270)}],A[4].push({type:2,data:Ao(P)}),A[5].push({type:0,data:Aa(I)}),A[6].push({type:0,data:Aa(I)});N[S].messages[0].data=Ao(A)}j.content=im(sm(N)),j.size=j.content.length,delete y[46];var B=ma(y[4][0].data);{B[7][0].data=Aa(a.e.r+1);var T=ma(B[1][0].data),E=rl(T[2][0].data);j=Kr.find(d,l[E].location),N=Qc(Jc(j.content));{if(N[0].id!=E)throw"Bad HeaderStorageBucket";var F=ma(N[0].messages[0].data);for(I=0;I<i.length;++I){var q=ma(F[2][0].data);q[1][0].data=Aa(I),q[4][0].data=Aa(i[I].length),F[2][I]={type:F[2][0].type,data:Ao(q)}}N[0].messages[0].data=Ao(F)}j.content=im(sm(N)),j.size=j.content.length;var H=rl(B[2][0].data);j=Kr.find(d,l[H].location),N=Qc(Jc(j.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";for(F=ma(N[0].messages[0].data),_=0;_<=a.e.c;++_)q=ma(F[2][0].data),q[1][0].data=Aa(_),q[4][0].data=Aa(a.e.r+1),F[2][_]={type:F[2][0].type,data:Ao(q)};N[0].messages[0].data=Ao(F)}j.content=im(sm(N)),j.size=j.content.length;var Q=rl(B[4][0].data);(function(){for(var z=Kr.find(d,l[Q].location),V=Qc(Jc(z.content)),U,K=0;K<V.length;++K){var se=V[K];se.id==Q&&(U=se)}var xe=ma(U.messages[0].data);{xe[3]=[];var ie=[];o.forEach(function(me,$e){ie[1]=[{type:0,data:Aa($e)}],ie[2]=[{type:0,data:Aa(1)}],ie[3]=[{type:2,data:vve(me)}],xe[3].push({type:2,data:Ao(ie)})})}U.messages[0].data=Ao(xe);var ue=sm(V),Be=im(ue);z.content=Be,z.size=z.content.length})();var J=ma(B[3][0].data);{var re=J[1][0];delete J[2];var X=ma(re.data);{var ee=rl(X[2][0].data);(function(){for(var z=Kr.find(d,l[ee].location),V=Qc(Jc(z.content)),U,K=0;K<V.length;++K){var se=V[K];se.id==ee&&(U=se)}var xe=ma(U.messages[0].data);{delete xe[6],delete J[7];var ie=new Uint8Array(xe[5][0].data);xe[5]=[];for(var ue=0,Be=0;Be<=a.e.r;++Be){var me=ma(ie);ue+=Pve(me,i[Be],o),me[1][0].data=Aa(Be),xe[5].push({data:Ao(me),type:2})}xe[1]=[{type:0,data:Aa(a.e.c+1)}],xe[2]=[{type:0,data:Aa(a.e.r+1)}],xe[3]=[{type:0,data:Aa(ue)}],xe[4]=[{type:0,data:Aa(a.e.r+1)}]}U.messages[0].data=Ao(xe);var $e=sm(V),Oe=im($e);z.content=Oe,z.size=z.content.length})()}re.data=Ao(X)}B[3][0].data=Ao(J)}y[4][0].data=Ao(B)}m.messages[0].data=Ao(y);var W=sm(p),O=im(W);return f.content=O,f.size=f.content.length,d}function A9(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function K3(e){A9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function X3(e){A9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Dve(e){return Un.WS.indexOf(e)>-1?"sheet":e==Un.CS?"chart":e==Un.DS?"dialog":e==Un.MS?"macro":e&&e.length?e:"sheet"}function Lve(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Dve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Fve(e,t,r,a,s,i,o,l,c,d,u,f){try{i[a]=cx(Nc(e,r,!0),t);var p=Ni(e,t),m;switch(l){case"sheet":m=age(p,t,s,c,i[a],d,u,f);break;case"chart":if(m=sge(p,t,s,c,i[a],d,u,f),!m||!m["!drawel"])break;var b=Qp(m["!drawel"].Target,t),v=og(b),g=W0e(Nc(e,b,!0),cx(Nc(e,v,!0),b)),y=Qp(g,b),w=og(y);m=Pxe(Nc(e,y,!0),y,c,cx(Nc(e,w,!0),y),d,m);break;case"macro":m=ige(p,t,s,c,i[a],d,u,f);break;case"dialog":m=oge(p,t,s,c,i[a],d,u,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=m;var j=[];i&&i[a]&&Js(i[a]).forEach(function(N){var S="";if(i[a][N].Type==Un.CMNT){S=Qp(i[a][N].Target,t);var A=uge(Ni(e,S,!0),S,c);if(!A||!A.length)return;I8(m,A,!1)}i[a][N].Type==Un.TCMNT&&(S=Qp(i[a][N].Target,t),j=j.concat(G0e(Ni(e,S,!0),c)))}),j&&j.length&&I8(m,j,!0,c.people||[])}catch(N){if(c.WTF)throw N}}function Kc(e){return e.charAt(0)=="/"?e.slice(1):e}function Mve(e,t){if(mp(),t=t||{},K3(t),Zc(e,"META-INF/manifest.xml")||Zc(e,"objectdata.xml"))return H8(e,t);if(Zc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Tj<"u"){if(e.FileIndex)return Tj(e);var r=Kr.utils.cfb_new();return e8(e).forEach(function(q){Tn(r,q,Kle(e,q))}),Tj(r)}throw new Error("Unsupported NUMBERS file")}if(!Zc(e,"[Content_Types].xml"))throw Zc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Zc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=e8(e),s=qce(Nc(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Ni(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Ni(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(dx=[],s.sst)try{dx=dge(Ni(e,Kc(s.sst)),s.sst,t)}catch(q){if(t.WTF)throw q}t.cellStyles&&s.themes.length&&(c=cge(Nc(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=lge(Ni(e,Kc(s.style)),s.style,c,t))}s.links.map(function(q){try{var H=cx(Nc(e,og(Kc(q))),q);return hge(Ni(e,Kc(q)),H,q,t)}catch{}});var u=nge(Ni(e,Kc(s.workbooks[0])),s.workbooks[0],t),f={},p="";s.coreprops.length&&(p=Ni(e,Kc(s.coreprops[0]),!0),p&&(f=xR(p)),s.extprops.length!==0&&(p=Ni(e,Kc(s.extprops[0]),!0),p&&Kce(p,f,t)));var m={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=Nc(e,Kc(s.custprops[0]),!0),p&&(m=Yce(p,t)));var b={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(H){return H.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(b.Props=f,b.Custprops=m),t.bookSheets&&typeof o<"u"&&(b.SheetNames=o),t.bookSheets?b.SheetNames:t.bookProps))return b;o={};var v={};t.bookDeps&&s.calcchain&&(v=fge(Ni(e,Kc(s.calcchain)),s.calcchain));var g=0,y={},w,j;{var N=u.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var S=0;S!=N.length;++S)f.SheetNames[S]=N[S].name}var A=i?"bin":"xml",_=s.workbooks[0].lastIndexOf("/"),P=(s.workbooks[0].slice(0,_+1)+"_rels/"+s.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Zc(e,P)||(P="xl/_rels/workbook."+A+".rels");var I=cx(Nc(e,P,!0),P.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=mge(Ni(e,Kc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=X0e(Ni(e,Kc(s.people[0])),t)),I&&(I=Lve(I,u.Sheets));var B=Ni(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var T="sheet";if(I&&I[g]?(w="xl/"+I[g][1].replace(/[\/]?xl\//,""),Zc(e,w)||(w=I[g][1]),Zc(e,w)||(w=P.replace(/_rels\/.*$/,"")+I[g][1]),T=I[g][2]):(w="xl/worksheets/sheet"+(g+1-B)+"."+A,w=w.replace(/sheet0\./,"sheet.")),j=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var E=!1,F=0;F!=t.sheets.length;++F)typeof t.sheets[F]=="number"&&t.sheets[F]==g&&(E=1),typeof t.sheets[F]=="string"&&t.sheets[F].toLowerCase()==f.SheetNames[g].toLowerCase()&&(E=1);if(!E)continue e}}Fve(e,w,j,f.SheetNames[g],g,y,o,T,t,u,c,d)}return b={Directory:s,Workbook:u,Props:f,Custprops:m,Deps:v,Sheets:o,SheetNames:f.SheetNames,Strings:dx,Styles:d,Themes:c,SSF:xs(sn)},t&&t.bookFiles&&(e.files?(b.keys=a,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(q,H){q=q.replace(/^Root Entry[\/]/,""),b.keys.push(q),b.files[q]=e.FileIndex[H]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=Ni(e,Kc(s.vba[0]),!0):s.defaults&&s.defaults.bin===nhe&&(b.vbaraw=Ni(e,"xl/vbaProject.bin",!0))),b}function Rve(e,t){var r=t||{},a="Workbook",s=Kr.find(e,a);try{if(a="/!DataSpaces/Version",s=Kr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(mfe(s.content),a="/!DataSpaces/DataSpaceMap",s=Kr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=xfe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Kr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=gfe(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Kr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);bfe(s.content)}catch{}if(a="/EncryptionInfo",s=Kr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=yfe(s.content);if(a="/EncryptedPackage",s=Kr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Bve(e,t){return t.bookType=="ods"?C9(e,t):t.bookType=="numbers"?Ive(e,t):t.bookType=="xlsb"?Uve(e,t):qve(e,t)}function Uve(e,t){xm=1024,e&&!e.SSF&&(e.SSF=xs(sn)),e&&e.SSF&&(mp(),xy(e.SSF),t.revssf=vy(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ux?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=t9.indexOf(t.bookType)>-1,s=D3();X3(t=t||{});var i=y3(),o="",l=0;if(t.cellXfs=[],F0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Tn(i,o,gR(e.Props,t)),s.coreprops.push(o),Ea(t.rels,2,o,Un.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Tn(i,o,yR(e.Props)),s.extprops.push(o),Ea(t.rels,3,o,Un.EXT_PROPS),e.Custprops!==e.Props&&Js(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Tn(i,o,wR(e.Custprops)),s.custprops.push(o),Ea(t.rels,4,o,Un.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,Tn(i,o,xge(l-1,o,t,e,u)),s.sheets.push(o),Ea(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Un.WS[0]),f){var m=f["!comments"],b=!1,v="";m&&m.length>0&&(v="xl/comments"+l+"."+r,Tn(i,v,bge(m,v)),s.comments.push(v),Ea(u,-1,"../comments"+l+"."+r,Un.CMNT),b=!0),f["!legacy"]&&b&&Tn(i,"xl/drawings/vmlDrawing"+l+".vml",ZR(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&Tn(i,og(o),jm(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Tn(i,o,vge(t.Strings,o,t)),s.strs.push(o),Ea(t.wbrels,-1,"sharedStrings."+r,Un.SST)),o="xl/workbook."+r,Tn(i,o,pge(e,o)),s.workbooks.push(o),Ea(t.rels,1,o,Un.WB),o="xl/theme/theme1.xml",Tn(i,o,U3(e.Themes,t)),s.themes.push(o),Ea(t.wbrels,-1,"theme/theme1.xml",Un.THEME),o="xl/styles."+r,Tn(i,o,gge(e,o,t)),s.styles.push(o),Ea(t.wbrels,-1,"styles."+r,Un.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",Tn(i,o,e.vbaraw),s.vba.push(o),Ea(t.wbrels,-1,"vbaProject.bin",Un.VBA)),o="xl/metadata."+r,Tn(i,o,yge(o)),s.metadata.push(o),Ea(t.wbrels,-1,"metadata."+r,Un.XLMETA),Tn(i,"[Content_Types].xml",mR(s,t)),Tn(i,"_rels/.rels",jm(t.rels)),Tn(i,"xl/_rels/workbook."+r+".rels",jm(t.wbrels)),delete t.revssf,delete t.ssf,i}function qve(e,t){xm=1024,e&&!e.SSF&&(e.SSF=xs(sn)),e&&e.SSF&&(mp(),xy(e.SSF),t.revssf=vy(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ux?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=t9.indexOf(t.bookType)>-1,s=D3();X3(t=t||{});var i=y3(),o="",l=0;if(t.cellXfs=[],F0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Tn(i,o,gR(e.Props,t)),s.coreprops.push(o),Ea(t.rels,2,o,Un.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Tn(i,o,yR(e.Props)),s.extprops.push(o),Ea(t.rels,3,o,Un.EXT_PROPS),e.Custprops!==e.Props&&Js(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Tn(i,o,wR(e.Custprops)),s.custprops.push(o),Ea(t.rels,4,o,Un.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},p=e.Sheets[e.SheetNames[l-1]],m=(p||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,Tn(i,o,f9(l-1,t,e,f)),s.sheets.push(o),Ea(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Un.WS[0]),p){var b=p["!comments"],v=!1,g="";if(b&&b.length>0){var y=!1;b.forEach(function(w){w[1].forEach(function(j){j.T==!0&&(y=!0)})}),y&&(g="xl/threadedComments/threadedComment"+l+"."+r,Tn(i,g,K0e(b,u,t)),s.threadedcomments.push(g),Ea(f,-1,"../threadedComments/threadedComment"+l+"."+r,Un.TCMNT)),g="xl/comments"+l+"."+r,Tn(i,g,e9(b)),s.comments.push(g),Ea(f,-1,"../comments"+l+"."+r,Un.CMNT),v=!0}p["!legacy"]&&v&&Tn(i,"xl/drawings/vmlDrawing"+l+".vml",ZR(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&Tn(i,og(o),jm(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Tn(i,o,qR(t.Strings,t)),s.strs.push(o),Ea(t.wbrels,-1,"sharedStrings."+r,Un.SST)),o="xl/workbook."+r,Tn(i,o,g9(e)),s.workbooks.push(o),Ea(t.rels,1,o,Un.WB),o="xl/theme/theme1.xml",Tn(i,o,U3(e.Themes,t)),s.themes.push(o),Ea(t.wbrels,-1,"theme/theme1.xml",Un.THEME),o="xl/styles."+r,Tn(i,o,XR(e,t)),s.styles.push(o),Ea(t.wbrels,-1,"styles."+r,Un.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",Tn(i,o,e.vbaraw),s.vba.push(o),Ea(t.wbrels,-1,"vbaProject.bin",Un.VBA)),o="xl/metadata."+r,Tn(i,o,JR()),s.metadata.push(o),Ea(t.wbrels,-1,"metadata."+r,Un.XLMETA),u.length>1&&(o="xl/persons/person.xml",Tn(i,o,Y0e(u)),s.people.push(o),Ea(t.wbrels,-1,"persons/person.xml",Un.PEOPLE)),Tn(i,"[Content_Types].xml",mR(s,t)),Tn(i,"_rels/.rels",jm(t.rels)),Tn(i,"xl/_rels/workbook."+r+".rels",jm(t.wbrels)),delete t.revssf,delete t.ssf,i}function Y3(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Cc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $ve(e,t){return Kr.find(e,"EncryptedPackage")?Rve(e,t):w9(e,t)}function zve(e,t){var r,a=e,s=t||{};return s.type||(s.type=Ln&&Buffer.isBuffer(e)?"buffer":"base64"),r=zM(a,s),Mve(r,s)}function E9(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Ik(e.slice(r),t);default:break e}return tp.to_workbook(e,t)}function Hve(e,t){var r="",a=Y3(e,t);switch(t.type){case"base64":r=Cc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Eh(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=$a(r)),t.type="binary",E9(r,t)}function Wve(e,t){var r=e;return t.type=="base64"&&(r=Cc(r)),r=tg.utils.decode(1200,r.slice(2),"str"),t.type="binary",E9(r,t)}function Vve(e){return e.match(/[^\x00-\x7F]/)?Eu(e):e}function Oj(e,t,r,a){return a?(r.type="string",tp.to_workbook(e,r)):tp.to_workbook(t,r)}function Sb(e,t){p3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Sb(new Uint8Array(e),(r=xs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Sm={},r.dateNF&&(Sm.dateNF=r.dateNF),r.type||(r.type=Ln&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Ln?"buffer":"binary",a=Ule(e),typeof Uint8Array<"u"&&!Ln&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=Vve(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=xs(r),r.type="array",Sb(x3(a),r)}switch((s=Y3(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return $ve(Kr.read(a,r),r);break;case 9:if(s[1]<=8)return w9(a,r);break;case 60:return Ik(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Que(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return BR.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?zve(a,r):Oj(e,a,r,i);case 239:return s[3]===60?Ik(a,r):Oj(e,a,r,i);case 255:if(s[1]===254)return Wve(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return xh.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return xh.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return Pk.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return VR.to_workbook(a,r);break;case 10:case 13:case 32:return Hve(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Yue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Pk.to_workbook(a,r):Oj(e,a,r,i)}function T9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return _g(t.file,Kr.write(e,{type:Ln?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Kr.write(e,t)}function Gve(e,t){var r=xs(t||{}),a=Bve(e,r);return Kve(a,r)}function Kve(e,t){var r={},a=Ln?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Kr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(py(s))}return t.password&&typeof encrypt_agile<"u"?T9(encrypt_agile(s,t.password),t):t.type==="file"?_g(t.file,s):t.type=="string"?$a(s):s}function Xve(e,t){var r=t||{},a=Vge(e,r);return T9(a,r)}function ju(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return rg(Eu(a));case"binary":return Eu(a);case"string":return e;case"file":return _g(t.file,a,"utf8");case"buffer":return Ln?Df(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ju(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Yve(e,t){switch(t.type){case"base64":return rg(e);case"binary":return e;case"string":return e;case"file":return _g(t.file,e,"binary");case"buffer":return Ln?Df(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Bv(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?rg(r):t.type=="string"?$a(r):r;case"file":return _g(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function O9(e,t){p3(),$xe(e);var r=xs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=O9(e,r);return r.type="array",py(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ju(Bge(e,r),r);case"slk":case"sylk":return ju(RR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ju(j9(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Yve(P9(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ju(Q3(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ju(BR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Bv(Pk.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ju(tp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ju(VR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ju(UR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ju(C9(e,r),r);case"wk1":return Bv(xh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Bv(xh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Bv(N9(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Xve(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Gve(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Qve(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Jve(e,t,r){var a={};return a.type="file",a.file=t,Qve(a),O9(e,a)}function Zve(e,t,r,a,s,i,o,l){var c=di(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var b=o?e[r][m]:e[a[m]+c];if(b===void 0||b.t===void 0){if(d===void 0)continue;i[m]!=null&&(p[i[m]]=d);continue}var v=b.v;switch(b.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[m]!=null){if(v==null)if(b.t=="e"&&v===null)p[i[m]]=null;else if(d!==void 0)p[i[m]]=d;else if(u&&v===null)p[i[m]]=null;else continue;else p[i[m]]=u&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?v:Tf(b,v,l);v!=null&&(f=!1)}}return{row:p,isempty:f}}function _b(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=da(u);break;case"number":c=da(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(s=0);var f=di(c.s.r),p=[],m=[],b=0,v=0,g=Array.isArray(e),y=c.s.r,w=0,j={};g&&!e[y]&&(e[y]=[]);var N=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(N[w]||{}).hidden)switch(p[w]=Rs(w),r=g?e[y][w]:e[p[w]+f],a){case 1:i[w]=w-c.s.c;break;case 2:i[w]=p[w];break;case 3:i[w]=d.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Tf(r,null,d),v=j[o]||0,!v)j[o]=1;else{do l=o+"_"+v++;while(j[l]);j[o]=v,j[l]=1}i[w]=l}for(y=c.s.r+s;y<=c.e.r;++y)if(!(S[y]||{}).hidden){var A=Zve(e,c,y,p,a,i,g,d);(A.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(m[b++]=A.row)}return m.length=b,m}var X8=/"/g;function e1e(e,t,r,a,s,i,o,l){for(var c=!0,d=[],u="",f=di(r),p=t.s.c;p<=t.e.c;++p)if(a[p]){var m=l.dense?(e[r]||[])[p]:e[a[p]+f];if(m==null)u="";else if(m.v!=null){c=!1,u=""+(l.rawNumbers&&m.t=="n"?m.v:Tf(m,null,l));for(var b=0,v=0;b!==u.length;++b)if((v=u.charCodeAt(b))===s||v===i||v===34||l.forceQuotes){u='"'+u.replace(X8,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(c=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(X8,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function Q3(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=da(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];a.dense=Array.isArray(e);for(var p=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(p[b]||{}).hidden||(f[b]=Rs(b));for(var v=0,g=s.s.r;g<=s.e.r;++g)(m[g]||{}).hidden||(u=e1e(e,s,g,f,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((v++?l:"")+u)));return delete a.dense,r.join("")}function P9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Q3(e,t);return r}function t1e(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=da(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Rs(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=di(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function I9(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Bs(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var f=da(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var p=a.header||[],m=0;t.forEach(function(v,g){Js(v).forEach(function(y){(m=p.indexOf(y))==-1&&(p[m=p.length]=y);var w=v[y],j="z",N="",S=fn({c:l+m,r:o+g+s});d=mg(i,S),w&&typeof w=="object"&&!(w instanceof Date)?i[S]=w:(typeof w=="number"?j="n":typeof w=="boolean"?j="b":typeof w=="string"?j="s":w instanceof Date?(j="d",a.cellDates||(j="n",w=$i(w)),N=a.dateNF||sn[14]):w===null&&a.nullError&&(j="e",w=0),d?(d.t=j,d.v=w,delete d.w,delete d.R,N&&(d.z=N)):i[S]=d={t:j,v:w},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,l+p.length-1);var b=di(o);if(s)for(m=0;m<p.length;++m)i[Rs(m+l)+b]={t:"s",v:p[m]};return i["!ref"]=jn(u),i}function r1e(e,t){return I9(null,e,t)}function mg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Bs(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?mg(e,fn(t)):mg(e,fn({r:t,c:r||0}))}function n1e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function J3(){return{SheetNames:[],Sheets:{}}}function Z3(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(x9(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function a1e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=n1e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function s1e(e,t){return e.z=t,e}function D9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function i1e(e,t,r){return D9(e,"#"+t,r)}function o1e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function l1e(e,t,r,a){for(var s=typeof t!="string"?t:da(t),i=typeof t=="string"?t:jn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=mg(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Y0={encode_col:Rs,encode_row:di,encode_cell:fn,encode_range:jn,decode_col:A3,decode_row:C3,split_cell:vce,decode_cell:Bs,decode_range:Zl,format_cell:Tf,sheet_add_aoa:oR,sheet_add_json:I9,sheet_add_dom:k9,aoa_to_sheet:pp,json_to_sheet:r1e,table_to_sheet:S9,table_to_book:mve,sheet_to_csv:Q3,sheet_to_txt:P9,sheet_to_json:_b,sheet_to_html:j9,sheet_to_formulae:t1e,sheet_to_row_object_array:_b,sheet_get_cell:mg,book_new:J3,book_append_sheet:Z3,book_set_sheet_visibility:a1e,cell_set_number_format:s1e,cell_set_hyperlink:D9,cell_set_internal_link:i1e,cell_add_comment:o1e,sheet_set_array_formula:l1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const c1e={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},d1e=["header","bold","italic","underline","list","bullet","link","image"],e_=({value:e,onChange:t,placeholder:r="Enter text...",readOnly:a=!1,className:s=""})=>n.jsx("div",{className:s,children:n.jsx(f3,{theme:"snow",value:e||"",onChange:t,modules:a?{toolbar:!1}:c1e,formats:d1e,readOnly:a,placeholder:r})}),L9=({content:e,className:t=""})=>{if(!e||e.trim()==="")return null;const r=eg.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","ul","ol","li","a","img","h1","h2","h3"],ALLOWED_ATTR:["href","src","alt","class","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});return n.jsx("div",{className:t+" [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1",dangerouslySetInnerHTML:{__html:r}})},gf={all:["tasks"],lists:()=>[...gf.all,"list"],list:e=>[...gf.lists(),e],details:()=>[...gf.all,"detail"],detail:e=>[...gf.details(),e]},u1e=(e,t,r)=>Ys({queryKey:gf.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const a=await uy(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:a=>a}),f1e=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>{const s=await W7(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:gf.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to create task")}})},h1e=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async({id:a,data:s})=>{const i=await lb(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:gf.lists()}),e.invalidateQueries({queryKey:gf.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to update task")}})},m1e=()=>{const e=Ia(),{showSuccess:t,showError:r}=kn();return ui({mutationFn:async a=>(await V7(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:gf.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to delete task")}})},Jp={all:["projects"],lists:()=>[...Jp.all,"list"],list:e=>[...Jp.lists(),e],details:()=>[...Jp.all,"detail"],detail:e=>[...Jp.details(),e]},p1e=(e,t,r)=>Ys({queryKey:Jp.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const a=await I0(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:60*1e3,refetchInterval:120*1e3,placeholderData:a=>a}),x1e=({onCreateTask:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=kn(),i=Ia(),{data:o=[],isLoading:l,error:c}=u1e(),{data:d=[],isLoading:u}=p1e(),{data:f=[],isLoading:p}=d3(),m=h1e(),b=m1e();f1e();const v=l||u||p,[g,y]=D.useState(""),[w,j]=D.useState("active"),[N,S]=D.useState("list"),[A,_]=D.useState("none"),[P,I]=D.useState(!1),[B,T]=D.useState("upload"),[E,F]=D.useState([]),[q,H]=D.useState([]),[Q,J]=D.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[re,X]=D.useState(!1),[ee,W]=D.useState(null),[O,z]=D.useState(null),[V,U]=D.useState(null),[K,se]=D.useState(null),[xe,ie]=D.useState(null),[ue,Be]=D.useState(null),[me,$e]=D.useState(!1),[Oe,le]=D.useState(!1),[te,Te]=D.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[we,Ie]=D.useState([]),[he,de]=D.useState(!1),[Ce,Ve]=D.useState(!1),[ge,fe]=D.useState(!1),[_e,Ue]=D.useState(!1),[ke,Fe]=D.useState(""),[qe,et]=D.useState(""),[Kt,qt]=D.useState(""),[vr,er]=D.useState(null),[mr,Ge]=D.useState(!1),[jt,br]=D.useState(null),[Qt,Fr]=D.useState(null),[Mr,rt]=D.useState(!1),[At,cr]=D.useState(""),[wr,Gr]=D.useState(0),[jr,qr]=D.useState([]),[tr,Xr]=D.useState(!1),[Vr,pn]=D.useState([]),[Nr,Or]=D.useState(!1),ne=D.useRef(null),je=D.useRef(null),Se=D.useRef(null),oe=We=>{const Tt=We.getFullYear(),_t=We.getMonth(),nr=We.getDate();return`${Tt}-${String(_t+1).padStart(2,"0")}-${String(nr).padStart(2,"0")}`},ve=We=>{if(!We||!/^\d{4}-\d{2}-\d{2}$/.test(We))return We;const[Tt,_t,nr]=We.split("-").map(Number);return new Date(Tt,_t-1,nr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Ae=We=>{const Tt=new Date(We),_t=Tt.getDay(),nr=Tt.getDate()-_t+(_t===0?-6:1);return new Date(Tt.setDate(nr))},Ke=We=>{const Tt=new Date(We);Tt.setHours(0,0,0,0);const _t=new Date(Tt);return _t.setDate(Tt.getDate()+6),_t.setHours(23,59,59,999),{start:Tt,end:_t}},nt=We=>{if(!We||!/^\d{4}-\d{2}-\d{2}$/.test(We))return null;const[Tt,_t,nr]=We.split("-").map(Number),yr=new Date(Tt,_t-1,nr),dr=Ae(yr);return`${dr.getFullYear()}-${String(dr.getMonth()+1).padStart(2,"0")}-${String(dr.getDate()).padStart(2,"0")}`};D.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),a("Failed to load tasks"))},[c,a]),D.useEffect(()=>{ue&&!me&&Te({title:ue.title,category:ue.category||"",description:ue.description||"",dueDate:ue.dueDate||"",priority:ue.priority||"Medium",status:ue.status||"Todo",assigneeId:ue.assigneeId,projectId:ue.projectId||""})},[ue,me]),D.useEffect(()=>{if(!ue)return;let We=!1;return(async()=>{try{const Tt=await ob(),_t=Array.isArray(Tt?.data)?Tt.data:[];We||pn(_t)}catch{We||pn([])}})(),()=>{We=!0}},[ue?.id]),D.useEffect(()=>{if(!me){Or(!1);return}te.category&&Vr.includes(te.category)?Or(!1):te.category&&!Vr.includes(te.category)&&Or(!0)},[me,te.category,Vr]);const Qe=async We=>{if(o.find(_t=>_t.id===We)){z(We);try{await m.mutateAsync({id:We,data:{archived:w==="active"}}),se(null)}catch{}finally{z(null)}}},tt=async We=>{W(We);try{await b.mutateAsync(We),ie(null)}catch{}finally{W(null)}},Xe=()=>{we.length===ba.length?Ie([]):Ie(ba.map(We=>We.id))},Me=async()=>{de(!0);try{const We=[...we];await Promise.all(We.map(Tt=>b.mutateAsync(Tt))),Ie([]),Ve(!1),r(`Successfully deleted ${We.length} task${We.length>1?"s":""}`)}catch(We){a(We.message||"Failed to delete tasks")}finally{de(!1)}},it=async()=>{if(!ke){a("Please select a project");return}Ue(!0);try{const We=[...we];await Promise.all(We.map(Tt=>m.mutateAsync({id:Tt,data:{projectId:ke==="__none__"?null:ke}}))),Ie([]),fe(!1),Fe(""),r(`Assigned ${We.length} task${We.length>1?"s":""} to ${ke==="__none__"?"No project":d.find(Tt=>Tt.id===ke)?.title||"project"}`)}catch(We){a(We.message||"Failed to assign project")}finally{Ue(!1)}},bt=()=>{const We=new Date;We.setDate(We.getDate()+30);const Tt=We.getDate(),_t=We.getMonth()+1,nr=We.getFullYear(),yr=`${Tt}-${_t}-${nr}`,dr=Y0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",yr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Pr=Y0.book_new();Y0.book_append_sheet(Pr,dr,"Tasks"),Jve(Pr,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},It=async()=>{if(!Q.title){a("Please map the required field: Title");return}if(q.length===0){a("No data to import");return}X(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Q),console.log("[IMPORT] Parsed data rows:",q.length),console.log("[IMPORT] Sample parsed row:",q[0]);const We=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!We){a("Please log in to import tasks"),X(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:q.length,columnMapping:Q,usersCount:f.length,currentUserId:We});const Tt=q.map((Yt,ur)=>{console.log(`[IMPORT] Processing row ${ur}:`,Yt),console.log("[IMPORT] Column mapping:",Q);const Lt=String(Yt[Q.title]||"").trim(),kr=Q.category?String(Yt[Q.category]||"").trim():"",zt=String(Yt[Q.dueDate]||"").trim(),Da=Q.description?String(Yt[Q.description]||"").trim():"",ka=Q.priority?String(Yt[Q.priority]||"").trim():"Medium",Sa=Q.owner?String(Yt[Q.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${ur}:`,{title:Lt,category:kr,dueDateRaw:zt,description:Da,priorityRaw:ka,ownerRaw:Sa,rowKeys:Object.keys(Yt),mappedTitleKey:Q.title,mappedDueDateKey:Q.dueDate});let Zt="";if(zt&&zt.toLowerCase().trim()==="ongoing")Zt="";else if(zt)if(/^\d+$/.test(zt)&&parseFloat(zt)>25569){const Sr=new Date(1900,0,1),en=parseFloat(zt)-2,sr=new Date(Sr.getTime()+en*24*60*60*1e3);isNaN(sr.getTime())||(Zt=oe(sr))}else{let Sr=null;if(/^\d{4}-\d{2}-\d{2}$/.test(zt))Zt=zt,Sr=new Date(0);else if(zt.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(zt)){const en=zt.split("-").map(sr=>sr.trim());if(en.length===3){const sr=parseInt(en[0],10),Dn=parseInt(en[1],10)-1,Ar=parseInt(en[2],10);!isNaN(sr)&&!isNaN(Dn)&&!isNaN(Ar)&&sr>=1&&sr<=31&&Dn>=0&&Dn<=11&&(Sr=new Date(Ar,Dn,sr),console.log(`[IMPORT] Parsed hyphen-separated date "${zt}" as day-month-year -> ${oe(Sr)}`))}}else if(zt.includes("/")){const en=zt.split("/").map(sr=>sr.trim());if(en.length===3){const sr=parseInt(en[0],10),Dn=parseInt(en[1],10)-1;let Ar=parseInt(en[2],10);Ar<100&&(Ar+=2e3),!isNaN(sr)&&!isNaN(Dn)&&!isNaN(Ar)&&(Sr=new Date(Ar,Dn,sr))}}else if(zt.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const en=zt.split("/"),sr=parseInt(en[0],10)-1,Dn=parseInt(en[1],10),Ar=parseInt(en[2],10);!isNaN(Dn)&&!isNaN(sr)&&!isNaN(Ar)&&(Sr=new Date(Ar,sr,Dn))}else if(!Sr||isNaN(Sr.getTime())){const en=zt.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(en){const[,sr,Dn,Ar]=en,Fa=["january","february","march","april","may","june","july","august","september","october","november","december"],ho=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],gs=sr.toLowerCase().trim();let vs=-1;for(let bs=0;bs<Fa.length;bs++)if(gs.startsWith(Fa[bs])||gs.startsWith(ho[bs])){vs=bs;break}if(vs>=0){const bs=parseInt(Dn,10),mo=parseInt(Ar,10);Sr=new Date(mo,vs,bs),Sr.getFullYear()!==mo||Sr.getMonth()!==vs||Sr.getDate()!==bs?(console.warn(`[IMPORT] Invalid date parsed from "${zt}": year=${mo}, month=${vs}, day=${bs}`),Sr=null):console.log(`[IMPORT] Successfully parsed date "${zt}" -> ${oe(Sr)}`)}else console.warn(`[IMPORT] Could not match month name in "${zt}"`)}}if(!Sr||isNaN(Sr.getTime())){const en=new Date(zt);if(!isNaN(en.getTime())){const sr=en.getFullYear(),Dn=en.getMonth(),Ar=en.getDate();Sr=new Date(sr,Dn,Ar),console.log(`[IMPORT] Used fallback date parsing for "${zt}" -> ${oe(Sr)}`)}}Sr&&!isNaN(Sr.getTime())&&!Zt?(Zt=oe(Sr),console.log(`[IMPORT] Final dueDate for row ${ur}: "${zt}" -> "${Zt}"`)):zt&&!Zt&&console.error(`[IMPORT] Failed to parse date "${zt}" for row ${ur}`)}const La={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[ka.toLowerCase()]||"Medium";let Xn=We;if(Sa&&f.length>0){const Sr=Sa.toLowerCase().trim(),en=f.find(sr=>sr.name.toLowerCase().trim()===Sr||sr.email.toLowerCase().trim()===Sr||sr.name.toLowerCase().trim().includes(Sr)||sr.email.toLowerCase().trim().includes(Sr));en?(Xn=en.id,console.log(`[IMPORT] Matched owner "${Sa}" to user:`,en.name,en.id)):console.warn(`[IMPORT] Could not match owner "${Sa}", using current user`)}Xn||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),Xn=We);const bn={title:Lt.trim(),category:kr||void 0,dueDate:Zt||null,description:Da.trim()||"",priority:La,status:"Todo",assigneeId:Xn,_rowIndex:ur,_rawDate:zt};return(!bn.title||!bn.assigneeId)&&console.error(`[IMPORT] Row ${ur} missing required fields:`,{hasTitle:!!bn.title,hasAssigneeId:!!bn.assigneeId,taskData:bn}),Xn||console.warn(`[IMPORT] Row ${ur}: No assigneeId found, using current user:`,{title:Lt,ownerRaw:Sa,userId:We}),console.log(`[IMPORT] Task data for row ${ur}:`,bn),bn}).filter(Yt=>{const ur=Yt.title&&Yt.assigneeId;return ur?console.log("[IMPORT] Valid task:",{title:Yt.title,dueDate:Yt.dueDate||"Not set",assigneeId:Yt.assigneeId,priority:Yt.priority,status:Yt.status}):console.error("[IMPORT] Filtered out invalid task:",{title:Yt.title,dueDate:Yt.dueDate,assigneeId:Yt.assigneeId,rawDate:Yt._rawDate,rowIndex:Yt._rowIndex,fullTask:Yt,missingFields:{title:!Yt.title,assigneeId:!Yt.assigneeId}}),ur}).map(({_rowIndex:Yt,_rawDate:ur,...Lt})=>(Lt.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",Lt),Lt.assigneeId=We),Lt));if(console.log("[IMPORT] Final tasks to import:",Tt),console.log("[IMPORT] Tasks count:",Tt.length),Tt.length===0){const Yt=q[0],ur=Yt?String(Yt[Q.title]||"").trim():"N/A",Lt=Yt?String(Yt[Q.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:q.length,columnMapping:Q,mappedTitle:Q.title,mappedDueDate:Q.dueDate,sampleRow:Yt,sampleTitle:ur,sampleDate:Lt,sampleRowKeys:Yt?Object.keys(Yt):[],parsedData:q.slice(0,3)}),a(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Q.title}")
2. Due Date column is mapped correctly (current: "${Q.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${ur}", Date: "${Lt}"

Available columns: ${E.join(", ")}`),X(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const _t=Tt.map(({_rowIndex:Yt,_rawDate:ur,...Lt})=>Lt);console.log("[IMPORT] Tasks to import count:",_t.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(_t,null,2)),console.log("[IMPORT] Sample task structure:",{title:_t[0]?.title,dueDate:_t[0]?.dueDate,assigneeId:_t[0]?.assigneeId,priority:_t[0]?.priority,status:_t[0]?.status,description:_t[0]?.description,hasProjectId:!!_t[0]?.projectId});const nr=_t.filter(Yt=>!Yt.title||!Yt.assigneeId);if(nr.length>0){console.error("[IMPORT] Invalid tasks found:",nr),a(`Cannot import: ${nr.length} task(s) missing required fields (title or assigneeId)`),X(!1);return}let yr;try{yr=await Fne(_t),console.log("[IMPORT] API call successful")}catch(Yt){console.error("[IMPORT] API call failed:",Yt),console.error("[IMPORT] Error details:",{message:Yt.message,status:Yt.status,code:Yt.code,stack:Yt.stack}),a(`Failed to import tasks: ${Yt.message||"Unknown error"}`),X(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(yr,null,2)),console.log("[IMPORT] Response type:",typeof yr),console.log("[IMPORT] Response keys:",yr?Object.keys(yr):"null");let dr={},Pr=[];if(yr)yr.success&&yr.data?(dr=yr.data,Pr=dr.created||[]):yr.data&&Array.isArray(yr.data.created)?(dr=yr.data,Pr=dr.created||[]):yr.created&&Array.isArray(yr.created)?(dr=yr,Pr=dr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),dr=yr.data||yr,Pr=dr.created||dr.data?.created||[]),console.log("[IMPORT] Extracted importData:",dr),console.log("[IMPORT] Created tasks:",Pr),console.log("[IMPORT] Created tasks count:",Pr.length),console.log("[IMPORT] Created task IDs:",Pr.map(Yt=>Yt?.id)),console.log("[IMPORT] Created task details:",Pr.map(Yt=>({id:Yt.id,title:Yt.title,assigneeId:Yt.assigneeId})));else{console.error("[IMPORT] No response received from API"),a("No response received from server. Please check your connection."),X(!1);return}const ra=dr.successful??Pr.length??0,_n=dr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:ra,failedCount:_n,total:Tt.length,createdTasks:Pr.length,createdTaskIds:Pr.map(Yt=>Yt.id),errors:dr.errors}),Pr&&Pr.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",Pr.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",Pr),console.error("[IMPORT] Response structure:",yr),console.error("[IMPORT] Import data:",dr)),_n>0){const Yt=dr.errors?.map(ur=>`Row ${ur.index+1}: ${ur.error}`).join(`
`)||"";a(`Imported ${ra} task(s), but ${_n} failed.
${Yt}`)}else r(`Successfully imported ${ra} task(s)`);H([]),F([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ne.current&&(ne.current.value=""),I(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(We){console.error("Import error:",We),a(We.message||"Failed to import tasks. Please check your data format.")}finally{X(!1)}},Dt=We=>{if(!We||We.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",We),console.log("[IMPORT] Header detection - firstRow length:",We.length),console.log("[IMPORT] Header detection - firstRow values:",We.map((dr,Pr)=>`[${Pr}]: "${dr}"`));const Tt=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let _t=0;const nr=We.filter(dr=>dr&&String(dr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",nr);for(const dr of nr){const Pr=String(dr).toLowerCase().trim();Tt.some(ra=>Pr.includes(ra))&&(_t++,console.log(`[IMPORT] Header detection - matched keyword in: "${dr}"`)),Pr.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(_t++,console.log(`[IMPORT] Header detection - matched pattern in: "${dr}"`))}const yr=nr.length>0?_t/nr.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:We,totalCells:We.length,cellsToCheck:nr.length,matchCount:_t,matchRatio:yr,isHeader:yr>=.4}),yr>=.4},xr=async We=>{const Tt=We.target.files?.[0];if(Tt)try{const _t=Tt.name.split(".").pop()?.toLowerCase();if(_t==="csv"){const nr=new FileReader;nr.onload=yr=>{try{const dr=new Uint8Array(yr.target?.result),Pr=Sb(dr,{type:"array",sheetStubs:!0}),ra=Pr.SheetNames[0],_n=Pr.Sheets[ra],Yt=Y0.decode_range(_n["!ref"]||"A1"),ur=Yt.e.c-Yt.s.c+1;console.log("[IMPORT] CSV worksheet range:",_n["!ref"]),console.log("[IMPORT] CSV number of columns from range:",ur);const Lt=Y0.sheet_to_json(_n,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Lt.length),console.log("[IMPORT] CSV first row length:",Lt[0]?.length),console.log("[IMPORT] CSV first row:",Lt[0]),Lt.length===0){a("File is empty");return}if(Lt[0]&&Lt[0].length<ur)for(console.log(`[IMPORT] CSV: Padding first row from ${Lt[0].length} to ${ur} columns`);Lt[0].length<ur;)Lt[0].push("");const kr=Dt(Lt[0]);console.log("[IMPORT] CSV Header detection result:",kr);let zt,Da;if(kr?(zt=Lt[0].map((Zt,Zr)=>String(Zt||"").trim()||`Column ${Zr+1}`),Da=1,console.log("[IMPORT] CSV raw first row:",Lt[0]),console.log("[IMPORT] CSV processed headers:",zt)):(zt=Lt[0].map((Zt,Zr)=>`Column ${Zr+1}`),Da=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),zt.length===0){a("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",zt),console.log("[IMPORT] CSV detected headers count:",zt.length),console.log("[IMPORT] CSV detected headers array:",zt),F(zt),console.log("[IMPORT] CSV setDetectedColumns called with:",zt);const ka=[];for(let Zt=Da;Zt<Lt.length;Zt++){const Zr={},La=Lt[Zt]||[];for(;La.length<zt.length;)La.push("");zt.forEach((Xn,bn)=>{const Sr=La[bn];if(typeof Sr=="number"&&Sr>25569&&Xn.toLowerCase().includes("date")){const en=new Date(1900,0,1),sr=Sr-2,Dn=new Date(en.getTime()+sr*24*60*60*1e3);Zr[Xn]=Dn.toISOString().split("T")[0]}else Zr[Xn]=Sr!=null?String(Sr).trim():""}),Object.values(Zr).some(Xn=>Xn)&&ka.push(Zr)}console.log("[IMPORT] CSV parsed rows:",ka),console.log("[IMPORT] CSV parsed rows count:",ka.length),H(ka);const Sa={title:zt.find(Zt=>Zt.toLowerCase().includes("title")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("name")||!Zt.toLowerCase().includes("category")&&Zt.toLowerCase().includes("name"))||"",category:zt.find(Zt=>Zt.toLowerCase().includes("category")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("cat"))||"",dueDate:zt.find(Zt=>Zt.toLowerCase().includes("due")||Zt.toLowerCase().includes("date")&&!Zt.toLowerCase().includes("created")&&!Zt.toLowerCase().includes("updated"))||"",description:zt.find(Zt=>Zt.toLowerCase().includes("description")||Zt.toLowerCase().includes("desc"))||"",priority:zt.find(Zt=>Zt.toLowerCase().includes("priority")||Zt.toLowerCase().includes("prio"))||"",owner:zt.find(Zt=>Zt.toLowerCase().includes("owner")||Zt.toLowerCase().includes("assignee")||Zt.toLowerCase().includes("assigned")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("owner"))||""};J(Sa),T("mapping")}catch(dr){console.error("CSV parse error:",dr),a("Failed to parse CSV file: "+(dr.message||"Unknown error"))}},nr.readAsArrayBuffer(Tt)}else if(_t==="xlsx"||_t==="xls"){const nr=new FileReader;nr.onload=yr=>{const dr=new Uint8Array(yr.target?.result),Pr=Sb(dr,{type:"array"}),ra=Pr.SheetNames[0],_n=Pr.Sheets[ra],Yt=Y0.decode_range(_n["!ref"]||"A1"),ur=Yt.e.c-Yt.s.c+1;console.log("[IMPORT] Excel worksheet range:",_n["!ref"]),console.log("[IMPORT] Excel number of columns from range:",ur);const Lt=Y0.sheet_to_json(_n,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",Lt.length),console.log("[IMPORT] Excel first row length:",Lt[0]?.length),console.log("[IMPORT] Excel first row:",Lt[0]),Lt.length===0){a("File is empty");return}if(Lt[0]&&Lt[0].length<ur)for(console.log(`[IMPORT] Padding first row from ${Lt[0].length} to ${ur} columns`);Lt[0].length<ur;)Lt[0].push("");const kr=Dt(Lt[0]);console.log("[IMPORT] Excel Header detection result:",kr);let zt,Da;kr?(zt=Lt[0].map((Zt,Zr)=>String(Zt||"").trim()||`Column ${Zr+1}`),Da=1,console.log("[IMPORT] Excel raw first row:",Lt[0]),console.log("[IMPORT] Excel processed headers:",zt)):(zt=Lt[0].map((Zt,Zr)=>`Column ${Zr+1}`),Da=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",zt),console.log("[IMPORT] Detected headers count:",zt.length),console.log("[IMPORT] Detected headers array:",zt),console.log("[IMPORT] Raw JSON data:",Lt),F(zt),console.log("[IMPORT] setDetectedColumns called with:",zt);const ka=[];for(let Zt=Da;Zt<Lt.length;Zt++){const Zr={},La=Lt[Zt]||[];for(;La.length<zt.length;)La.push("");zt.forEach((Xn,bn)=>{const Sr=La[bn];if(typeof Sr=="number"&&Sr>25569&&Xn.toLowerCase().includes("date")){const en=new Date(1900,0,1),sr=Sr-2,Dn=new Date(en.getTime()+sr*24*60*60*1e3),Ar=Dn.getFullYear(),Fa=Dn.getMonth(),ho=Dn.getDate();Zr[Xn]=`${Ar}-${String(Fa+1).padStart(2,"0")}-${String(ho).padStart(2,"0")}`}else Zr[Xn]=Sr!=null?String(Sr).trim():""}),Object.values(Zr).some(Xn=>Xn)&&ka.push(Zr)}console.log("[IMPORT] Parsed rows:",ka),console.log("[IMPORT] Parsed rows count:",ka.length),H(ka);const Sa={title:zt.find(Zt=>Zt.toLowerCase().includes("title")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("name")||!Zt.toLowerCase().includes("category")&&Zt.toLowerCase().includes("name"))||"",category:zt.find(Zt=>Zt.toLowerCase().includes("category")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("cat"))||"",dueDate:zt.find(Zt=>Zt.toLowerCase().includes("due")||Zt.toLowerCase().includes("date")&&!Zt.toLowerCase().includes("created")&&!Zt.toLowerCase().includes("updated"))||"",description:zt.find(Zt=>Zt.toLowerCase().includes("description")||Zt.toLowerCase().includes("desc"))||"",priority:zt.find(Zt=>Zt.toLowerCase().includes("priority")||Zt.toLowerCase().includes("prio"))||"",owner:zt.find(Zt=>Zt.toLowerCase().includes("owner")||Zt.toLowerCase().includes("assignee")||Zt.toLowerCase().includes("assigned")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",Sa),J(Sa),T("mapping")},nr.readAsArrayBuffer(Tt)}else a("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(_t){console.error("Error parsing file:",_t),a("Failed to parse file: "+(_t.message||"Unknown error"))}},Rr=async(We,Tt,_t)=>{_t.stopPropagation();const nr=Tt==="Done"?"Todo":"Done";U(We);try{await m.mutateAsync({id:We,data:{status:nr}}),ue?.id===We&&Be({...ue,status:nr})}catch{}finally{U(null)}},Yr=async()=>{if(ue){if(!te.title.trim()){a("Task title is required");return}if(!te.assigneeId){a("Assignee is required");return}le(!0);try{await m.mutateAsync({id:ue.id,data:{title:te.title.trim(),category:te.category.trim()||void 0,description:te.description.trim()||"",dueDate:te.dueDate||null,priority:te.priority,status:te.status,assigneeId:te.assigneeId,projectId:te.projectId||null}}),Be({...ue,title:te.title.trim(),category:te.category.trim()||void 0,description:te.description.trim()||"",dueDate:te.dueDate||"",priority:te.priority,status:te.status,assigneeId:te.assigneeId,projectId:te.projectId||void 0}),$e(!1)}catch{}finally{le(!1)}}},Nn=(We,Tt=1200,_t=1200,nr=.8)=>new Promise((yr,dr)=>{const Pr=new FileReader;Pr.onload=ra=>{const _n=new Image;_n.onload=()=>{let Yt=_n.width,ur=_n.height;Yt>ur?Yt>Tt&&(ur=ur*Tt/Yt,Yt=Tt):ur>_t&&(Yt=Yt*_t/ur,ur=_t);const Lt=document.createElement("canvas");Lt.width=Yt,Lt.height=ur;const kr=Lt.getContext("2d");kr?(kr.drawImage(_n,0,0,Yt,ur),yr(Lt.toDataURL("image/jpeg",nr))):dr(new Error("Canvas context not available"))},_n.onerror=()=>dr(new Error("Failed to load image")),_n.src=ra.target?.result},Pr.onerror=()=>dr(new Error("Failed to read file")),Pr.readAsDataURL(We)}),Ps=async We=>{const Tt=We.target.files?.[0];if(Tt){if(!Tt.type.startsWith("image/")){a("Please select an image file");return}if(Tt.size>10*1024*1024){a("Image size must be less than 10MB");return}try{const _t=await Nn(Tt,1200,1200,.8);qt(_t),er(Tt)}catch(_t){a(_t.message||"Failed to process image")}}},Sn=We=>{const Tt=We.target.value,_t=We.target.selectionStart;et(Tt),Gr(_t);const nr=Tt.substring(0,_t),yr=nr.lastIndexOf("@");if(yr!==-1){const dr=nr.substring(yr+1),Pr=yr>0?nr[yr-1]:" ";if((Pr===" "||Pr===`
`||yr===0)&&!dr.includes(" ")&&!dr.includes(`
`)){cr(dr);const ra=f.filter(_n=>_n.name.toLowerCase().includes(dr.toLowerCase())||_n.email.toLowerCase().includes(dr.toLowerCase()));qr(ra.slice(0,5)),rt(!0);return}}rt(!1)},ts=We=>{const _t=qe.substring(0,wr).lastIndexOf("@"),nr=qe.substring(wr),dr=`${qe.substring(0,_t)}@${We.name} ${nr}`;if(et(dr),rt(!1),Se.current){Se.current.focus();const Pr=_t+We.name.length+2;Se.current.setSelectionRange(Pr,Pr)}},Wn=We=>{const Tt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,_t=[];let nr;for(;(nr=Tt.exec(We))!==null;){const yr=nr[1].trim(),dr=f.find(Pr=>Pr.name.toLowerCase()===yr.toLowerCase());dr&&dr.id!==(t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&_t.push(dr.id)}return[...new Set(_t)]};D.useEffect(()=>{if(Se.current){const We=Se.current;We.style.height="auto";const Tt=24,_t=5*Tt,nr=15*Tt,yr=Math.min(Math.max(We.scrollHeight,_t),nr);We.style.height=`${yr}px`}},[qe]);const za=We=>{const Tt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,_t=[];let nr=0,yr;for(;(yr=Tt.exec(We))!==null;){yr.index>nr&&_t.push(We.substring(nr,yr.index));const dr=yr[1].trim(),Pr=f.find(ra=>ra.name.toLowerCase()===dr.toLowerCase());Pr?_t.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Pr.name]},yr.index)):_t.push(`@${dr}`),nr=yr.index+yr[0].length}return nr<We.length&&_t.push(We.substring(nr)),_t.length>0?_t:We},Vn=async()=>{if(ue){if(!qe.trim()&&!vr){a("Please enter a note or upload an image");return}Ge(!0);try{const We=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Tt=t?.name||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",_t={id:`note_${Date.now()}`,userId:We,userName:Tt,text:qe.trim(),imageUrl:Kt||void 0,imageName:vr?.name||void 0,imageMimeType:vr?.type||void 0,createdAt:new Date().toISOString()},nr=[...ue.notes||[],_t];await m.mutateAsync({id:ue.id,data:{notes:nr}}),Be({...ue,notes:nr});const yr=Wn(qe);for(const Pr of yr)try{await Jm({userId:Pr,type:"task-mention",title:"You were mentioned in a task",message:`${Tt} mentioned you in task "${ue.title}"`,relatedId:ue.id,relatedType:"task",read:!1})}catch(ra){console.error("Failed to send notification:",ra)}et(""),qt(""),er(null),je.current&&(je.current.value="");const dr=yr.length>0?`Note added and ${yr.length} user(s) notified`:"Note added successfully";r(dr)}catch(We){a(We.message||"Failed to add note")}finally{Ge(!1)}}},Pn=async()=>{if(!(!ue||!t||!Qt))try{br(Qt);const We=ue.notes?.filter(Tt=>Tt.id!==Qt)||[];await m.mutateAsync({id:ue.id,data:{notes:We}}),Be({...ue,notes:We}),r("Note deleted successfully"),Fr(null)}catch(We){a(We.message||"Failed to delete note")}finally{br(null)}},Do=()=>{Be(null),$e(!1),et(""),qt(""),er(null),rt(!1),Xr(!1),je.current&&(je.current.value="")};let ba=o.filter(We=>{if(w==="archived"){if(!We.archived)return!1}else if(w==="week"){if(We.archived)return!1}else if(We.archived)return!1;return g.trim()?We.title.toLowerCase().includes(g.toLowerCase()):!0});if(A==="dueDate")ba=[...ba].sort((We,Tt)=>!We.dueDate&&!Tt.dueDate?0:We.dueDate?Tt.dueDate?(We.dueDate||"").localeCompare(Tt.dueDate||""):-1:1);else if(A==="priority"){const We={High:1,Medium:2,Low:3};ba=[...ba].sort((Tt,_t)=>{const nr=We[Tt.priority]||4,yr=We[_t.priority]||4;return nr-yr})}else A==="category"?ba=[...ba].sort((We,Tt)=>{const _t=(We.category||"Uncategorized").toLowerCase(),nr=(Tt.category||"Uncategorized").toLowerCase();return _t.localeCompare(nr)}):A==="owner"&&(ba=[...ba].sort((We,Tt)=>{const _t=f.find(yr=>yr.id===We.assigneeId)?.name||"Unassigned",nr=f.find(yr=>yr.id===Tt.assigneeId)?.name||"Unassigned";return _t.localeCompare(nr)}));return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{j("active"),Ie([])},className:`text-sm font-bold pb-1 transition-all ${w==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{j("archived"),Ie([])},className:`text-sm font-bold pb-1 transition-all ${w==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(We=>We.archived).length,")"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{I(!0),T("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[n.jsx(x6,{className:"w-4 h-4"})," Bulk Import"]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[n.jsx(nn,{className:"w-4 h-4"})," New Task"]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:We=>{y(We.target.value),Ie([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:A,onChange:We=>_(We.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[n.jsx("option",{value:"none",children:"No Sort"}),n.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),n.jsx("option",{value:"priority",children:"Sort by Priority"}),n.jsx("option",{value:"category",children:"Sort by Category"}),n.jsx("option",{value:"owner",children:"Sort by Owner"})]}),n.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:n.jsx(Vs,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[n.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${N==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(uU,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S("card"),className:`p-2 rounded-lg ${N==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(lU,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{j(w==="week"?"active":"week"),Ie([])},className:`p-2 rounded-lg ${w==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:n.jsx(ta,{className:"w-4 h-4"})})]})]}),!v&&ba.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ba.length>0&&we.length===ba.length,onChange:Xe}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),v?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):ba.length===0?n.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[n.jsx(s1,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",w==="week"?"tasks":w," tasks found"]})]}):w==="week"?n.jsx("div",{className:"space-y-8",children:(()=>{const We=ba.filter(ur=>!nt(ur.dueDate)),Tt=ba.filter(ur=>nt(ur.dueDate)),_t={};Tt.forEach(ur=>{const Lt=nt(ur.dueDate);_t[Lt]||(_t[Lt]=[]),_t[Lt].push(ur)});const nr=Object.keys(_t).sort(),yr=(()=>{const ur=Ae(new Date);return`${ur.getFullYear()}-${String(ur.getMonth()+1).padStart(2,"0")}-${String(ur.getDate()).padStart(2,"0")}`})(),dr=(()=>{const ur=Ae(new Date),Lt=new Date(ur);return Lt.setDate(ur.getDate()+7),`${Lt.getFullYear()}-${String(Lt.getMonth()+1).padStart(2,"0")}-${String(Lt.getDate()).padStart(2,"0")}`})(),Pr=(ur,Lt)=>{const kr=ur.toLocaleDateString("en-US",{month:"short",day:"numeric"}),zt=Lt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${kr} - ${zt}`},ra=ur=>{if(ur===yr)return"This Week";if(ur===dr)return"Next Week";const[Lt,kr,zt]=ur.split("-").map(Number),Da=new Date(Lt,kr-1,zt),{start:ka,end:Sa}=Ke(Da);return`Week of ${Pr(ka,Sa)}`},_n=ur=>{const[Lt,kr,zt]=ur.split("-").map(Number);return Ke(new Date(Lt,kr-1,zt))};nr.forEach(ur=>{_t[ur].sort((Lt,kr)=>(Lt.dueDate||"").localeCompare(kr.dueDate||""))});const Yt=ur=>ur.length===0?null:N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:ur.map(Lt=>{const kr=we.includes(Lt.id);return n.jsxs("div",{onClick:()=>Be(Lt),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${kr?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:zt=>zt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:kr,onChange:()=>Ie(zt=>kr?zt.filter(Da=>Da!==Lt.id):[...zt,Lt.id])})}),n.jsx("button",{onClick:zt=>Rr(Lt.id,Lt.status,zt),disabled:V===Lt.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:V===Lt.id?n.jsx(pt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Lt.status==="Done"?n.jsx(gn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Ou,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${Lt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Lt.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Lt.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Fs,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Lt.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(zt=>zt.id===Lt.projectId)?.title||"General"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ta,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Lt.dueDate?ve(Lt.dueDate):"Ongoing"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Lt.priority==="High"?"bg-red-50 text-red-600":Lt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Lt.priority}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[n.jsx(co,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:f.find(zt=>zt.id===Lt.assigneeId)?.name||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:zt=>{zt.stopPropagation(),Be(Lt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(Kd,{className:"w-4 h-4"})}),n.jsx("button",{onClick:zt=>{zt.stopPropagation(),se(Lt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(_u,{className:"w-4 h-4"})}),n.jsx("button",{onClick:zt=>{zt.stopPropagation(),ie(Lt)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})]},Lt.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ur.map(Lt=>{const kr=we.includes(Lt.id);return n.jsxs("div",{onClick:()=>Be(Lt),className:`bg-white p-6 rounded-3xl border ${kr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsx("div",{className:"absolute top-4 left-4",onClick:zt=>zt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:`${kr?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:kr,onChange:()=>Ie(zt=>kr?zt.filter(Da=>Da!==Lt.id):[...zt,Lt.id])})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:`font-bold text-sm mb-3 ${Lt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Lt.title}),n.jsxs("div",{className:"space-y-2 mb-4",children:[Lt.category&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Lt.category})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(zt=>zt.id===Lt.projectId)?.title||"General"})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Lt.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ta,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ve(Lt.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Lt.priority==="High"?"bg-red-50 text-red-600":Lt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Lt.priority})]})]},Lt.id)})});return n.jsxs(n.Fragment,{children:[nr.map(ur=>{const Lt=_t[ur];if(!Lt||Lt.length===0)return null;const kr=_n(ur),zt=ra(ur);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:zt}),n.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Pr(kr.start,kr.end)}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Lt.length,")"]})]}),Yt(Lt)]},ur)}),We.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",We.length," tasks)"]})]}),Yt(We)]})]})})()}):N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:ba.map(We=>{const Tt=we.includes(We.id);return n.jsxs("div",{onClick:()=>Be(We),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${We.archived?"bg-slate-50/50":""} ${Tt?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:_t=>_t.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Tt,onChange:()=>Ie(_t=>Tt?_t.filter(nr=>nr!==We.id):[..._t,We.id])})}),n.jsx("button",{onClick:_t=>Rr(We.id,We.status,_t),disabled:V===We.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:V===We.id?n.jsx(pt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):We.status==="Done"?n.jsx(gn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Ou,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${We.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:We.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[We.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Fs,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:We.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(_t=>_t.id===We.projectId)?.title||"General"}),n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ta,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:We.dueDate?ve(We.dueDate):"Ongoing"})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${We.priority==="High"?"bg-red-50 text-red-600":We.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:We.priority}),We.assigneeId&&(()=>{const _t=f.find(nr=>nr.id===We.assigneeId);return _t?n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:_t.name,children:[n.jsx(co,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:_t.name})]}):null})()]}),n.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[n.jsx("button",{onClick:_t=>{_t.stopPropagation(),Be(We)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:n.jsx(Kd,{className:"w-4 h-4"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),se(We)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:We.archived?n.jsx(i1,{className:"w-4 h-4"}):n.jsx(_u,{className:"w-4 h-4"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),ie(We)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},We.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ba.map(We=>{const Tt=we.includes(We.id);return n.jsxs("div",{onClick:()=>Be(We),className:`bg-white p-6 rounded-3xl border ${Tt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:n.jsx(_i,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[n.jsx("button",{onClick:_t=>{_t.stopPropagation(),Be(We)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:n.jsx(Kd,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),se(We)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:n.jsx(_u,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),ie(We)},className:"p-1.5 text-slate-400 hover:text-red-500",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]}),n.jsx("div",{onClick:_t=>_t.stopPropagation(),className:`${Tt?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Tt,onChange:()=>Ie(_t=>Tt?_t.filter(nr=>nr!==We.id):[..._t,We.id])})})]})]}),n.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${We.status==="Done"?"line-through opacity-40":""}`,children:We.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:We.description}),We.category&&n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[n.jsx(Fs,{className:"w-3.5 h-3.5 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:We.category})]})}),We.assigneeId&&(()=>{const _t=f.find(nr=>nr.id===We.assigneeId);return _t?n.jsx("div",{className:"flex items-center gap-2 mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[n.jsx(co,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:_t.name})]})}):null})(),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[We.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ta,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ve(We.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${We.priority==="High"?"bg-red-50 text-red-600":We.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:We.priority})]})]},We.id)})}),P&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(x6,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),n.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(Xt,{className:"w-6 h-6 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:B==="upload"?n.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(b0,{className:"w-4 h-4"})," Registry Data Requirements"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-5",children:[n.jsxs("button",{onClick:()=>ne.current?.click(),className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:n.jsx(px,{className:"w-8 h-8"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),n.jsxs("button",{onClick:bt,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[n.jsx(Pu,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),n.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),n.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",E.length," columns and ",q.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),n.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:n.jsx(ea,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:n.jsx(Fs,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:n.jsx(ta,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:n.jsx(b0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:n.jsx(Fs,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:n.jsx(co,{className:"w-4 h-4"})}].map(We=>n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:We.icon}),n.jsx("div",{children:n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[We.label," ",We.required&&n.jsx("span",{className:"text-red-500",children:"*"})]})})]}),n.jsx(To,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),n.jsxs("select",{value:Q[We.key]||"",onChange:Tt=>J({...Q,[We.key]:Tt.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"-- Select Source Column --"}),E.map(Tt=>n.jsx("option",{value:Tt,children:Tt},Tt))]})]},We.key))}),n.jsxs("div",{className:"flex gap-4 pt-6",children:[n.jsx("button",{onClick:()=>{T("upload"),H([]),F([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ne.current&&(ne.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),n.jsx("button",{onClick:It,disabled:re||!Q.title||!Q.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:re?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),n.jsx("input",{ref:ne,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:xr})]})}),K&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:K.archived?n.jsx(i1,{className:"w-6 h-6"}):n.jsx(_u,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:K.archived?"Restore Task?":"Archive Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:K.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:K.title}),K.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:K.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>se(null),disabled:O===K.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Qe(K.id),disabled:O===K.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O===K.id?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),K.archived?"Restoring...":"Archiving..."]}):K.archived?"Restore Task":"Archive Task"})]})]})}),xe&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:xe.title}),xe.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:xe.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ie(null),disabled:ee===xe.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>tt(xe.id),disabled:ee===xe.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===xe.id?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),we.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:we.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:We=>{We.stopPropagation(),fe(!0),Fe("")},disabled:_e,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[n.jsx(Xd,{className:"w-3.5 h-3.5"}),"Assign to project"]}),n.jsxs("button",{onClick:We=>{We.stopPropagation(),Ve(!0)},disabled:he,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[he?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>Ie([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]})}),ge&&we.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:n.jsx(Xd,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",we.length," selected task",we.length>1?"s":"","."]})]})]}),n.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),n.jsxs("select",{value:ke,onChange:We=>Fe(We.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"Select project..."}),n.jsx("option",{value:"__none__",children:"None (General)"}),d.filter(We=>!We.archived).map(We=>n.jsx("option",{value:We.id,children:We.title},We.id))]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{fe(!1),Fe("")},disabled:_e,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:it,disabled:_e||!ke,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_e?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${we.length} task${we.length>1?"s":""}`})]})]})}),Ce&&we.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",we.length," Task",we.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(We=>we.includes(We.id)).slice(0,5).map(We=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(_i,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:We.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:d.find(Tt=>Tt.id===We.projectId)?.title||"General"})]})]},We.id)),we.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",we.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ve(!1),disabled:he,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Me,disabled:he,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:he?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${we.length} Task${we.length>1?"s":""}`})]})]})}),ue&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Do}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Do,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Xt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(_i,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[me?n.jsx("input",{type:"text",value:te.title,onChange:We=>Te(Tt=>({...Tt,title:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:ue.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${ue.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":ue.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":ue.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:ue.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",ue.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:me?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{$e(!1),Te({title:ue.title,description:ue.description||"",dueDate:ue.dueDate||"",priority:ue.priority||"Medium",status:ue.status||"Todo",assigneeId:ue.assigneeId,projectId:ue.projectId||""})},disabled:Oe,className:"px-4 py-2 border border-slate-200 text-slate-500 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"CANCEL"}),n.jsx("button",{onClick:Yr,disabled:Oe||!te.title.trim()||!te.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Oe?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"SAVE CHANGES"]})})]}):n.jsxs("button",{onClick:()=>$e(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"ASSIGNEE"}),me?n.jsxs("select",{value:te.assigneeId,onChange:We=>Te(Tt=>({...Tt,assigneeId:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),f.map(We=>n.jsx("option",{value:We.id,children:We.name},We.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:f.find(We=>We.id===ue.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.find(We=>We.id===ue.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"LINKED PROJECT"}),me?n.jsxs("select",{value:te.projectId,onChange:We=>Te(Tt=>({...Tt,projectId:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),d.filter(We=>!We.archived).map(We=>n.jsx("option",{value:We.id,children:We.title},We.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:ue.projectId?d.find(We=>We.id===ue.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] flex items-center gap-2 px-1",children:[n.jsx(ea,{className:"w-4 h-4 text-indigo-500"})," DESCRIPTION"]}),me?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(e_,{value:te.description||"",onChange:We=>Te(Tt=>({...Tt,description:We})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[ue.description?n.jsx(L9,{content:ue.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert max-w-none prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50 [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Fs,{className:"w-3.5 h-3.5"})," TASK CATEGORY"]}),me?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:Nr?"__new__":te.category||"",onChange:We=>{const Tt=We.target.value;Tt==="__new__"?(Or(!0),Te(_t=>({..._t,category:""}))):(Or(!1),Te(_t=>({..._t,category:Tt})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),Vr.map(We=>n.jsx("option",{value:We,children:We},We)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),Nr&&n.jsx("input",{type:"text",value:te.category,onChange:We=>Te(Tt=>({...Tt,category:We.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:ue.category?n.jsxs(n.Fragment,{children:[n.jsx(Fs,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:ue.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"DUE DATE"}),me?n.jsx("input",{type:"date",value:te.dueDate,onChange:We=>Te(Tt=>({...Tt,dueDate:We.target.value})),placeholder:"dd/mm/yyyy",className:"w-full px-4 py-2 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 mt-2 [color-scheme:light]"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:ue.dueDate?ve(ue.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"PRIORITY"}),me?n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200 mt-2",children:["Low","Medium","High"].map(We=>n.jsx("button",{onClick:()=>Te(Tt=>({...Tt,priority:We})),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${te.priority===We?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:We.toUpperCase()},We))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${ue.priority==="High"?"bg-red-50 text-red-600":ue.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:ue.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),me?n.jsxs("select",{value:te.status,onChange:We=>Te(Tt=>({...Tt,status:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[ue.status==="Done"?n.jsx(gn,{className:"w-5 h-5 text-emerald-500"}):ue.status==="In Progress"?n.jsx(ms,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Ou,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:ue.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",ue.notes&&ue.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:ue.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:Se,rows:5,value:qe,onChange:Sn,onBlur:()=>{setTimeout(()=>rt(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),Mr&&jr.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(bh,{className:"w-3 h-3"}),"Mention User"]}),jr.map(We=>n.jsxs("button",{onClick:()=>ts(We),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:We.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:We.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:We.email})]})]},We.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:Kt?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(kc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Kt?vr?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:je,type:"file",accept:"image/*",onChange:Ps,className:"hidden"})]}),n.jsx("button",{onClick:Vn,disabled:mr||!qe.trim()&&!vr,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:mr?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),Kt&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Kt,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{qt(""),er(null),je.current&&(je.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Xt,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:ue.notes&&ue.notes.length>0?[...ue.notes].reverse().map(We=>{const Tt=t?.role==="Admin"||We.userId===t?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:We.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:We.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(We.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Tt&&n.jsx("button",{onClick:()=>Fr(We.id),disabled:jt===We.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:jt===We.id?n.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),We.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:za(We.text)}),We.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:We.imageUrl,alt:We.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const _t=window.open();_t&&_t.document.write(`<img src="${We.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},We.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>Xr(!tr),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(va,{className:`w-4 h-4 text-slate-400 transition-transform ${tr?"rotate-90":""}`})]}),tr&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:ue.createdAt?new Date(ue.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),ue.updatedAt&&ue.updatedAt!==ue.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ue.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),ue.notes&&ue.notes.map((We,Tt)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[We.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(We.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},We.id)),(!ue.notes||ue.notes.length===0)&&(!ue.updatedAt||ue.updatedAt===ue.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>{ie(ue),Do()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:Do,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5"})," CLOSE"]})]})]})]}),Qt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(Bn,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>Fr(null),disabled:jt===Qt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Pn,disabled:jt===Qt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:jt===Qt?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function Oa(e){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(e)}var ll=Uint8Array,jc=Uint16Array,t_=Int32Array,ky=new ll([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sy=new ll([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Fk=new ll([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F9=function(e,t){for(var r=new jc(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new t_(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},M9=F9(ky,2),R9=M9.b,Mk=M9.r;R9[28]=258,Mk[258]=28;var B9=F9(Sy,0),g1e=B9.b,Y8=B9.r,Rk=new jc(32768);for(var hs=0;hs<32768;++hs){var r0=(hs&43690)>>1|(hs&21845)<<1;r0=(r0&52428)>>2|(r0&13107)<<2,r0=(r0&61680)>>4|(r0&3855)<<4,Rk[hs]=((r0&65280)>>8|(r0&255)<<8)>>1}var Lu=(function(e,t,r){for(var a=e.length,s=0,i=new jc(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new jc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new jc(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],f=o[e[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)l[Rk[f]>>c]=d}else for(l=new jc(a),s=0;s<a;++s)e[s]&&(l[s]=Rk[o[e[s]-1]++]>>15-e[s]);return l}),S0=new ll(288);for(var hs=0;hs<144;++hs)S0[hs]=8;for(var hs=144;hs<256;++hs)S0[hs]=9;for(var hs=256;hs<280;++hs)S0[hs]=7;for(var hs=280;hs<288;++hs)S0[hs]=8;var pg=new ll(32);for(var hs=0;hs<32;++hs)pg[hs]=5;var v1e=Lu(S0,9,0),b1e=Lu(S0,9,1),y1e=Lu(pg,5,0),w1e=Lu(pg,5,1),Pj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Bd=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},Ij=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},r_=function(e){return(e+7)/8|0},U9=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ll(e.subarray(t,r))},N1e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$d=function(e,t,r){var a=new Error(t||N1e[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,$d),!r)throw a;return a},j1e=function(e,t,r,a){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new ll(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new ll(s*3));var d=function(Be){var me=r.length;if(Be>me){var $e=new ll(Math.max(me*2,Be));$e.set(r),r=$e}},u=t.f||0,f=t.p||0,p=t.b||0,m=t.l,b=t.d,v=t.m,g=t.n,y=s*8;do{if(!m){u=Bd(e,f,1);var w=Bd(e,f+1,3);if(f+=3,w)if(w==1)m=b1e,b=w1e,v=9,g=5;else if(w==2){var A=Bd(e,f,31)+257,_=Bd(e,f+10,15)+4,P=A+Bd(e,f+5,31)+1;f+=14;for(var I=new ll(P),B=new ll(19),T=0;T<_;++T)B[Fk[T]]=Bd(e,f+T*3,7);f+=_*3;for(var E=Pj(B),F=(1<<E)-1,q=Lu(B,E,1),T=0;T<P;){var H=q[Bd(e,f,F)];f+=H&15;var j=H>>4;if(j<16)I[T++]=j;else{var Q=0,J=0;for(j==16?(J=3+Bd(e,f,3),f+=2,Q=I[T-1]):j==17?(J=3+Bd(e,f,7),f+=3):j==18&&(J=11+Bd(e,f,127),f+=7);J--;)I[T++]=Q}}var re=I.subarray(0,A),X=I.subarray(A);v=Pj(re),g=Pj(X),m=Lu(re,v,1),b=Lu(X,g,1)}else $d(1);else{var j=r_(f)+4,N=e[j-4]|e[j-3]<<8,S=j+N;if(S>s){c&&$d(0);break}l&&d(p+N),r.set(e.subarray(j,S),p),t.b=p+=N,t.p=f=S*8,t.f=u;continue}if(f>y){c&&$d(0);break}}l&&d(p+131072);for(var ee=(1<<v)-1,W=(1<<g)-1,O=f;;O=f){var Q=m[Ij(e,f)&ee],z=Q>>4;if(f+=Q&15,f>y){c&&$d(0);break}if(Q||$d(2),z<256)r[p++]=z;else if(z==256){O=f,m=null;break}else{var V=z-254;if(z>264){var T=z-257,U=ky[T];V=Bd(e,f,(1<<U)-1)+R9[T],f+=U}var K=b[Ij(e,f)&W],se=K>>4;K||$d(3),f+=K&15;var X=g1e[se];if(se>3){var U=Sy[se];X+=Ij(e,f)&(1<<U)-1,f+=U}if(f>y){c&&$d(0);break}l&&d(p+131072);var xe=p+V;if(p<X){var ie=i-X,ue=Math.min(X,xe);for(ie+p<0&&$d(3);p<ue;++p)r[p]=a[ie+p]}for(;p<xe;++p)r[p]=r[p-X]}}t.l=m,t.p=O,t.b=p,t.f=u,m&&(u=1,t.m=v,t.d=b,t.n=g)}while(!u);return p!=r.length&&o?U9(r,0,p):r.subarray(0,p)},df=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},zp=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},Dj=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:$9,l:0};if(s==1){var o=new ll(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,A){return S.f-A.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[f].f?d++:f++],c=r[d!=u&&r[d].f<r[f].f?d++:f++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,a=1;a<s;++a)i[a].s>p&&(p=i[a].s);var m=new jc(p+1),b=Bk(r[u-1],m,0);if(b>t){var a=0,v=0,g=b-t,y=1<<g;for(i.sort(function(A,_){return m[_.s]-m[A.s]||A.f-_.f});a<s;++a){var w=i[a].s;if(m[w]>t)v+=y-(1<<b-m[w]),m[w]=t;else break}for(v>>=g;v>0;){var j=i[a].s;m[j]<t?v-=1<<t-m[j]++-1:++a}for(;a>=0&&v;--a){var N=i[a].s;m[N]==t&&(--m[N],++v)}b=t}return{t:new ll(m),l:b}},Bk=function(e,t,r){return e.s==-1?Math.max(Bk(e.l,t,r+1),Bk(e.r,t,r+1)):t[e.s]=r},Q8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new jc(++t),a=0,s=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},Hp=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},q9=function(e,t,r){var a=r.length,s=r_(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},J8=function(e,t,r,a,s,i,o,l,c,d,u){df(t,u++,r),++s[256];for(var f=Dj(s,15),p=f.t,m=f.l,b=Dj(i,15),v=b.t,g=b.l,y=Q8(p),w=y.c,j=y.n,N=Q8(v),S=N.c,A=N.n,_=new jc(19),P=0;P<w.length;++P)++_[w[P]&31];for(var P=0;P<S.length;++P)++_[S[P]&31];for(var I=Dj(_,7),B=I.t,T=I.l,E=19;E>4&&!B[Fk[E-1]];--E);var F=d+5<<3,q=Hp(s,S0)+Hp(i,pg)+o,H=Hp(s,p)+Hp(i,v)+o+14+3*E+Hp(_,B)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&F<=q&&F<=H)return q9(t,u,e.subarray(c,c+d));var Q,J,re,X;if(df(t,u,1+(H<q)),u+=2,H<q){Q=Lu(p,m,0),J=p,re=Lu(v,g,0),X=v;var ee=Lu(B,T,0);df(t,u,j-257),df(t,u+5,A-1),df(t,u+10,E-4),u+=14;for(var P=0;P<E;++P)df(t,u+3*P,B[Fk[P]]);u+=3*E;for(var W=[w,S],O=0;O<2;++O)for(var z=W[O],P=0;P<z.length;++P){var V=z[P]&31;df(t,u,ee[V]),u+=B[V],V>15&&(df(t,u,z[P]>>5&127),u+=z[P]>>12)}}else Q=v1e,J=S0,re=y1e,X=pg;for(var P=0;P<l;++P){var U=a[P];if(U>255){var V=U>>18&31;zp(t,u,Q[V+257]),u+=J[V+257],V>7&&(df(t,u,U>>23&31),u+=ky[V]);var K=U&31;zp(t,u,re[K]),u+=X[K],K>3&&(zp(t,u,U>>5&8191),u+=Sy[K])}else zp(t,u,Q[U]),u+=J[U]}return zp(t,u,Q[256]),u+J[256]},k1e=new t_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$9=new ll(0),S1e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new ll(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var f=k1e[t-1],p=f>>13,m=f&8191,b=(1<<r)-1,v=i.p||new jc(32768),g=i.h||new jc(b+1),y=Math.ceil(r/3),w=2*y,j=function(Oe){return(e[Oe]^e[Oe+1]<<y^e[Oe+2]<<w)&b},N=new t_(25e3),S=new jc(288),A=new jc(32),_=0,P=0,I=i.i||0,B=0,T=i.w||0,E=0;I+2<o;++I){var F=j(I),q=I&32767,H=g[F];if(v[q]=H,g[F]=q,T<=I){var Q=o-I;if((_>7e3||B>24576)&&(Q>423||!d)){u=J8(e,c,0,N,S,A,P,B,E,I-E,u),B=_=P=0,E=I;for(var J=0;J<286;++J)S[J]=0;for(var J=0;J<30;++J)A[J]=0}var re=2,X=0,ee=m,W=q-H&32767;if(Q>2&&F==j(I-W))for(var O=Math.min(p,Q)-1,z=Math.min(32767,I),V=Math.min(258,Q);W<=z&&--ee&&q!=H;){if(e[I+re]==e[I+re-W]){for(var U=0;U<V&&e[I+U]==e[I+U-W];++U);if(U>re){if(re=U,X=W,U>O)break;for(var K=Math.min(W,U-2),se=0,J=0;J<K;++J){var xe=I-W+J&32767,ie=v[xe],ue=xe-ie&32767;ue>se&&(se=ue,H=xe)}}}q=H,H=v[q],W+=q-H&32767}if(X){N[B++]=268435456|Mk[re]<<18|Y8[X];var Be=Mk[re]&31,me=Y8[X]&31;P+=ky[Be]+Sy[me],++S[257+Be],++A[me],T=I+re,++_}else N[B++]=e[I],++S[e[I]]}}for(I=Math.max(I,T);I<o;++I)N[B++]=e[I],++S[e[I]];u=J8(e,c,d,N,S,A,P,B,E,I-E,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=v,i.i=I,i.w=T)}else{for(var I=i.w||0;I<o+d;I+=65535){var $e=I+65535;$e>=o&&(c[u/8|0]=d,$e=o),u=q9(c,u+1,e.subarray(I,$e))}i.i=o}return U9(l,0,a+r_(u)+s)},z9=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},_1e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ll(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return S1e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},H9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},C1e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=z9();s.p(t.dictionary),H9(e,2,s.d())}},A1e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&$d(6,"invalid zlib data"),(e[1]>>5&1)==1&&$d(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Uk(e,t){t||(t={});var r=z9();r.p(e);var a=_1e(e,t,t.dictionary?6:2,4);return C1e(a,t),H9(a,a.length-4,r.d()),a}function E1e(e,t){return j1e(e.subarray(A1e(e),-4),{i:2},t,t)}var T1e=typeof TextDecoder<"u"&&new TextDecoder,O1e=0;try{T1e.decode($9,{stream:!0}),O1e=1}catch{}var un=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Lj(){un.console&&typeof un.console.log=="function"&&un.console.log.apply(un.console,arguments)}var Ja={log:Lj,warn:function(e){un.console&&(typeof un.console.warn=="function"?un.console.warn.apply(un.console,arguments):Lj.call(null,arguments))},error:function(e){un.console&&(typeof un.console.error=="function"?un.console.error.apply(un.console,arguments):Lj(e))}};function Fj(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){eh(a.response,t,r)},a.onerror=function(){Ja.error("could not download file")},a.send()}function Z8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Uv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var mx,qk,eh=un.saveAs||((typeof window>"u"?"undefined":Oa(window))!=="object"||window!==un?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=un.URL||un.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?Z8(s.href)?Fj(e,t,r):Uv(s,s.target="_blank"):Uv(s)):(s.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(s.href)}),4e4),setTimeout((function(){Uv(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Z8(e))Fj(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){Uv(a)}))}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Oa(i)!=="object"&&(Ja.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return Fj(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(un.HTMLElement)||un.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Oa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=un.URL||un.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});function W9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}function Mj(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=Qo(r,a,s,i,t[0],7,-680876936),i=Qo(i,r,a,s,t[1],12,-389564586),s=Qo(s,i,r,a,t[2],17,606105819),a=Qo(a,s,i,r,t[3],22,-1044525330),r=Qo(r,a,s,i,t[4],7,-176418897),i=Qo(i,r,a,s,t[5],12,1200080426),s=Qo(s,i,r,a,t[6],17,-1473231341),a=Qo(a,s,i,r,t[7],22,-45705983),r=Qo(r,a,s,i,t[8],7,1770035416),i=Qo(i,r,a,s,t[9],12,-1958414417),s=Qo(s,i,r,a,t[10],17,-42063),a=Qo(a,s,i,r,t[11],22,-1990404162),r=Qo(r,a,s,i,t[12],7,1804603682),i=Qo(i,r,a,s,t[13],12,-40341101),s=Qo(s,i,r,a,t[14],17,-1502002290),r=Jo(r,a=Qo(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Jo(i,r,a,s,t[6],9,-1069501632),s=Jo(s,i,r,a,t[11],14,643717713),a=Jo(a,s,i,r,t[0],20,-373897302),r=Jo(r,a,s,i,t[5],5,-701558691),i=Jo(i,r,a,s,t[10],9,38016083),s=Jo(s,i,r,a,t[15],14,-660478335),a=Jo(a,s,i,r,t[4],20,-405537848),r=Jo(r,a,s,i,t[9],5,568446438),i=Jo(i,r,a,s,t[14],9,-1019803690),s=Jo(s,i,r,a,t[3],14,-187363961),a=Jo(a,s,i,r,t[8],20,1163531501),r=Jo(r,a,s,i,t[13],5,-1444681467),i=Jo(i,r,a,s,t[2],9,-51403784),s=Jo(s,i,r,a,t[7],14,1735328473),r=Zo(r,a=Jo(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Zo(i,r,a,s,t[8],11,-2022574463),s=Zo(s,i,r,a,t[11],16,1839030562),a=Zo(a,s,i,r,t[14],23,-35309556),r=Zo(r,a,s,i,t[1],4,-1530992060),i=Zo(i,r,a,s,t[4],11,1272893353),s=Zo(s,i,r,a,t[7],16,-155497632),a=Zo(a,s,i,r,t[10],23,-1094730640),r=Zo(r,a,s,i,t[13],4,681279174),i=Zo(i,r,a,s,t[0],11,-358537222),s=Zo(s,i,r,a,t[3],16,-722521979),a=Zo(a,s,i,r,t[6],23,76029189),r=Zo(r,a,s,i,t[9],4,-640364487),i=Zo(i,r,a,s,t[12],11,-421815835),s=Zo(s,i,r,a,t[15],16,530742520),r=el(r,a=Zo(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=el(i,r,a,s,t[7],10,1126891415),s=el(s,i,r,a,t[14],15,-1416354905),a=el(a,s,i,r,t[5],21,-57434055),r=el(r,a,s,i,t[12],6,1700485571),i=el(i,r,a,s,t[3],10,-1894986606),s=el(s,i,r,a,t[10],15,-1051523),a=el(a,s,i,r,t[1],21,-2054922799),r=el(r,a,s,i,t[8],6,1873313359),i=el(i,r,a,s,t[15],10,-30611744),s=el(s,i,r,a,t[6],15,-1560198380),a=el(a,s,i,r,t[13],21,1309151649),r=el(r,a,s,i,t[4],6,-145523070),i=el(i,r,a,s,t[11],10,-1120210379),s=el(s,i,r,a,t[2],15,718787259),a=el(a,s,i,r,t[9],21,-343485551),e[0]=m0(r,e[0]),e[1]=m0(a,e[1]),e[2]=m0(s,e[2]),e[3]=m0(i,e[3])}function _y(e,t,r,a,s,i){return t=m0(m0(t,e),m0(a,i)),m0(t<<s|t>>>32-s,r)}function Qo(e,t,r,a,s,i,o){return _y(t&r|~t&a,e,t,s,i,o)}function Jo(e,t,r,a,s,i,o){return _y(t&a|r&~a,e,t,s,i,o)}function Zo(e,t,r,a,s,i,o){return _y(t^r^a,e,t,s,i,o)}function el(e,t,r,a,s,i,o){return _y(r^(t|~a),e,t,s,i,o)}function V9(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Mj(a,P1e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Mj(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,Mj(a,s),a}function P1e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}mx=un.atob.bind(un),qk=un.btoa.bind(un);var eD="0123456789abcdef".split("");function I1e(e){for(var t="",r=0;r<4;r++)t+=eD[e>>8*r+4&15]+eD[e>>8*r&15];return t}function D1e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function $k(e){return V9(e).map(D1e).join("")}var L1e=(function(e){for(var t=0;t<e.length;t++)e[t]=I1e(e[t]);return e.join("")})(V9("hello"))!="5d41402abc4b2a76b9719d911017c592";function m0(e,t){if(L1e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function zk(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var f=t.length,p=0,m=0,b="";for(c=0;c<f;c++)m=(m+(u=l[p=(p+1)%256]))%256,l[p]=l[m],l[m]=u,o=l[(l[p]+l[m])%256],b+=String.fromCharCode(t.charCodeAt(c)^o);return b}var tD={print:4,modify:8,copy:16,"annot-forms":32};function dm(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach((function(l){if(tD.perm!==void 0)throw new Error("Invalid permission: "+l);s+=tD[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=$k(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=zk(this.encryptionKey,this.padding)}function um(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function rD(e){if(Oa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){un.console&&Ja.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Cb(e){if(!(this instanceof Cb))return new Cb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function G9(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function rh(e,t,r,a,s){if(!(this instanceof rh))return new rh(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,G9.call(this,a,s)}function gm(e,t,r,a,s){if(!(this instanceof gm))return new gm(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,G9.call(this,a,s)}function dn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Oa(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=rD;var b="1.3",v=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(G){b=G};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return g};var y=m.__private__.getPageFormat=function(G){return g[G]};s=s||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},j=w.COMPAT;function N(){this.saveGraphicsState(),te(new tr(et,0,0,-et,0,nc()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),d="n",j=w.ADVANCED}function S(){this.restoreGraphicsState(),d="S",j=w.COMPAT}var A=m.__private__.combineFontStyleAndFontWeight=function(G,Ne){if(G=="bold"&&Ne=="normal"||G=="bold"&&Ne==400||G=="normal"&&Ne=="italic"||G=="bold"&&Ne=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ne&&(G=Ne==400||Ne==="normal"?G==="italic"?"italic":"normal":Ne!=700&&Ne!=="bold"||G!=="normal"?(Ne==700?"bold":Ne)+""+G:"bold"),G};m.advancedAPI=function(G){var Ne=j===w.COMPAT;return Ne&&N.call(this),typeof G!="function"||(G(this),Ne&&S.call(this)),this},m.compatAPI=function(G){var Ne=j===w.ADVANCED;return Ne&&S.call(this),typeof G!="function"||(G(this),Ne&&N.call(this)),this},m.isAdvancedAPI=function(){return j===w.ADVANCED};var _,P=function(G){if(j!==w.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=m.roundToPrecision=m.__private__.roundToPrecision=function(G,Ne){var Ye=t||Ne;if(isNaN(G)||isNaN(Ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(Ye).replace(/0+$/,"")};_=m.hpf=m.__private__.hpf=typeof c=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,c)}:c==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,16)};var B=m.f2=m.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return I(G,2)},T=m.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return I(G,3)},E=m.scale=m.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return j===w.COMPAT?G*et:j===w.ADVANCED?G:void 0},F=function(G){return j===w.COMPAT?nc()-G:j===w.ADVANCED?G:void 0},q=function(G){return E(F(G))};m.__private__.setPrecision=m.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var H,Q="00000000000000000000000000000000",J=m.__private__.getFileId=function(){return Q},re=m.__private__.setFileId=function(G){return Q=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():Q.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),u!==null&&(bn=new dm(u.userPermissions,u.userPassword,u.ownerPassword,Q)),Q};m.setFileId=function(G){return re(G),this},m.getFileId=function(){return J()};var X=m.__private__.convertDateToPDFDate=function(G){var Ne=G.getTimezoneOffset(),Ye=Ne<0?"+":"-",at=Math.floor(Math.abs(Ne/60)),xt=Math.abs(Ne%60),Ot=[Ye,V(at),"'",V(xt),"'"].join("");return["D:",G.getFullYear(),V(G.getMonth()+1),V(G.getDate()),V(G.getHours()),V(G.getMinutes()),V(G.getSeconds()),Ot].join("")},ee=m.__private__.convertPDFDateToDate=function(G){var Ne=parseInt(G.substr(2,4),10),Ye=parseInt(G.substr(6,2),10)-1,at=parseInt(G.substr(8,2),10),xt=parseInt(G.substr(10,2),10),Ot=parseInt(G.substr(12,2),10),Wt=parseInt(G.substr(14,2),10);return new Date(Ne,Ye,at,xt,Ot,Wt,0)},W=m.__private__.setCreationDate=function(G){var Ne;if(G===void 0&&(G=new Date),G instanceof Date)Ne=X(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ne=G}return H=Ne},O=m.__private__.getCreationDate=function(G){var Ne=H;return G==="jsDate"&&(Ne=ee(H)),Ne};m.setCreationDate=function(G){return W(G),this},m.getCreationDate=function(G){return O(G)};var z,V=m.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},U=m.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},K=0,se=[],xe=[],ie=0,ue=[],Be=[],me=!1,$e=xe,Oe=function(){K=0,ie=0,xe=[],se=[],ue=[],Se=Or(),oe=Or()};m.__private__.setCustomOutputDestination=function(G){me=!0,$e=G};var le=function(G){me||($e=G)};m.__private__.resetCustomOutputDestination=function(){me=!1,$e=xe};var te=m.__private__.out=function(G){return G=G.toString(),ie+=G.length+1,$e.push(G),$e},Te=m.__private__.write=function(G){return te(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},we=m.__private__.getArrayBuffer=function(G){for(var Ne=G.length,Ye=new ArrayBuffer(Ne),at=new Uint8Array(Ye);Ne--;)at[Ne]=G.charCodeAt(Ne);return Ye},Ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ie};var he=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(G){return he=j===w.ADVANCED?G/et:G,this};var de,Ce=m.__private__.getFontSize=m.getFontSize=function(){return j===w.COMPAT?he:he*et},Ve=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(G){return Ve=G,this},m.__private__.getR2L=m.getR2L=function(){return Ve};var ge,fe=m.__private__.setZoomMode=function(G){var Ne=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))de=G;else if(isNaN(G)){if(Ne.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');de=G}else de=parseInt(G,10)};m.__private__.getZoomMode=function(){return de};var _e,Ue=m.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');ge=G};m.__private__.getPageMode=function(){return ge};var ke=m.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');_e=G};m.__private__.getLayoutMode=function(){return _e},m.__private__.setDisplayMode=m.setDisplayMode=function(G,Ne,Ye){return fe(G),ke(Ne),Ue(Ye),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(G){if(Object.keys(Fe).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[G]},m.__private__.getDocumentProperties=function(){return Fe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(G){for(var Ne in Fe)Fe.hasOwnProperty(Ne)&&G[Ne]&&(Fe[Ne]=G[Ne]);return this},m.__private__.setDocumentProperty=function(G,Ne){if(Object.keys(Fe).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[G]=Ne};var qe,et,Kt,qt,vr,er={},mr={},Ge=[],jt={},br={},Qt={},Fr={},Mr=null,rt=0,At=[],cr=new rD(m),wr=e.hotfixes||[],Gr={},jr={},qr=[],tr=function G(Ne,Ye,at,xt,Ot,Wt){if(!(this instanceof G))return new G(Ne,Ye,at,xt,Ot,Wt);isNaN(Ne)&&(Ne=1),isNaN(Ye)&&(Ye=0),isNaN(at)&&(at=0),isNaN(xt)&&(xt=1),isNaN(Ot)&&(Ot=0),isNaN(Wt)&&(Wt=0),this._matrix=[Ne,Ye,at,xt,Ot,Wt]};Object.defineProperty(tr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(tr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(tr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(tr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(tr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(tr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(tr.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(tr.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(tr.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(tr.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(tr.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(tr.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(tr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tr.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(G)},tr.prototype.multiply=function(G){var Ne=G.sx*this.sx+G.shy*this.shx,Ye=G.sx*this.shy+G.shy*this.sy,at=G.shx*this.sx+G.sy*this.shx,xt=G.shx*this.shy+G.sy*this.sy,Ot=G.tx*this.sx+G.ty*this.shx+this.tx,Wt=G.tx*this.shy+G.ty*this.sy+this.ty;return new tr(Ne,Ye,at,xt,Ot,Wt)},tr.prototype.decompose=function(){var G=this.sx,Ne=this.shy,Ye=this.shx,at=this.sy,xt=this.tx,Ot=this.ty,Wt=Math.sqrt(G*G+Ne*Ne),gr=(G/=Wt)*Ye+(Ne/=Wt)*at;Ye-=G*gr,at-=Ne*gr;var Hr=Math.sqrt(Ye*Ye+at*at);return gr/=Hr,G*(at/=Hr)<Ne*(Ye/=Hr)&&(G=-G,Ne=-Ne,gr=-gr,Wt=-Wt),{scale:new tr(Wt,0,0,Hr,0,0),translate:new tr(1,0,0,1,xt,Ot),rotate:new tr(G,Ne,-Ne,G,0,0),skew:new tr(1,0,gr,1,0,0)}},tr.prototype.toString=function(G){return this.join(" ")},tr.prototype.inversed=function(){var G=this.sx,Ne=this.shy,Ye=this.shx,at=this.sy,xt=this.tx,Ot=this.ty,Wt=1/(G*at-Ne*Ye),gr=at*Wt,Hr=-Ne*Wt,on=-Ye*Wt,tn=G*Wt;return new tr(gr,Hr,on,tn,-gr*xt-on*Ot,-Hr*xt-tn*Ot)},tr.prototype.applyToPoint=function(G){var Ne=G.x*this.sx+G.y*this.shx+this.tx,Ye=G.x*this.shy+G.y*this.sy+this.ty;return new Ei(Ne,Ye)},tr.prototype.applyToRectangle=function(G){var Ne=this.applyToPoint(G),Ye=this.applyToPoint(new Ei(G.x+G.w,G.y+G.h));return new Fo(Ne.x,Ne.y,Ye.x-Ne.x,Ye.y-Ne.y)},tr.prototype.clone=function(){var G=this.sx,Ne=this.shy,Ye=this.shx,at=this.sy,xt=this.tx,Ot=this.ty;return new tr(G,Ne,Ye,at,xt,Ot)},m.Matrix=tr;var Xr=m.matrixMult=function(G,Ne){return Ne.multiply(G)},Vr=new tr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Vr;var pn=function(G,Ne){if(!br[G]){var Ye=(Ne instanceof rh?"Sh":"P")+(Object.keys(jt).length+1).toString(10);Ne.id=Ye,br[G]=Ye,jt[Ye]=Ne,cr.publish("addPattern",Ne)}};m.ShadingPattern=rh,m.TilingPattern=gm,m.addShadingPattern=function(G,Ne){return P("addShadingPattern()"),pn(G,Ne),this},m.beginTilingPattern=function(G){P("beginTilingPattern()"),Hu(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},m.endTilingPattern=function(G,Ne){P("endTilingPattern()"),Ne.stream=Be[z].join(`
`),pn(G,Ne),cr.publish("endTilingPattern",Ne),qr.pop().restore()};var Nr=m.__private__.newObject=function(){var G=Or();return ne(G,!0),G},Or=m.__private__.newObjectDeferred=function(){return K++,se[K]=function(){return ie},K},ne=function(G,Ne){return Ne=typeof Ne=="boolean"&&Ne,se[G]=ie,Ne&&te(G+" 0 obj"),G},je=m.__private__.newAdditionalObject=function(){var G={objId:Or(),content:""};return ue.push(G),G},Se=Or(),oe=Or(),ve=m.__private__.decodeColorString=function(G){var Ne=G.split(" ");if(Ne.length!==2||Ne[1]!=="g"&&Ne[1]!=="G")Ne.length===5&&(Ne[4]==="k"||Ne[4]==="K")&&(Ne=[(1-Ne[0])*(1-Ne[3]),(1-Ne[1])*(1-Ne[3]),(1-Ne[2])*(1-Ne[3]),"r"]);else{var Ye=parseFloat(Ne[0]);Ne=[Ye,Ye,Ye,"r"]}for(var at="#",xt=0;xt<3;xt++)at+=("0"+Math.floor(255*parseFloat(Ne[xt])).toString(16)).slice(-2);return at},Ae=m.__private__.encodeColorString=function(G){var Ne;typeof G=="string"&&(G={ch1:G});var Ye=G.ch1,at=G.ch2,xt=G.ch3,Ot=G.ch4,Wt=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ye=="string"&&Ye.charAt(0)!=="#"){var gr=new W9(Ye);if(gr.ok)Ye=gr.toHex();else if(!/^\d*\.?\d*$/.test(Ye))throw new Error('Invalid color "'+Ye+'" passed to jsPDF.encodeColorString.')}if(typeof Ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ye)&&(Ye="#"+Ye[1]+Ye[1]+Ye[2]+Ye[2]+Ye[3]+Ye[3]),typeof Ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ye)){var Hr=parseInt(Ye.substr(1),16);Ye=Hr>>16&255,at=Hr>>8&255,xt=255&Hr}if(at===void 0||Ot===void 0&&Ye===at&&at===xt)typeof Ye=="string"?Ne=Ye+" "+Wt[0]:G.precision===2?Ne=B(Ye/255)+" "+Wt[0]:Ne=T(Ye/255)+" "+Wt[0];else if(Ot===void 0||Oa(Ot)==="object"){if(Ot&&!isNaN(Ot.a)&&Ot.a===0)return Ne=["1.","1.","1.",Wt[1]].join(" ");if(typeof Ye=="string")Ne=[Ye,at,xt,Wt[1]].join(" ");else switch(G.precision){case 2:Ne=[B(Ye/255),B(at/255),B(xt/255),Wt[1]].join(" ");break;default:case 3:Ne=[T(Ye/255),T(at/255),T(xt/255),Wt[1]].join(" ")}}else typeof Ye=="string"?Ne=[Ye,at,xt,Ot,Wt[2]].join(" "):G.precision===2?Ne=[B(Ye),B(at),B(xt),B(Ot),Wt[2]].join(" "):Ne=[T(Ye),T(at),T(xt),T(Ot),Wt[2]].join(" ");return Ne},Ke=m.__private__.getFilters=function(){return o},nt=m.__private__.putStream=function(G){var Ne=(G=G||{}).data||"",Ye=G.filters||Ke(),at=G.alreadyAppliedFilters||[],xt=G.addLength1||!1,Ot=Ne.length,Wt=G.objectId,gr=function(Zs){return Zs};if(u!==null&&Wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(gr=bn.encryptor(Wt,0));var Hr={};Ye===!0&&(Ye=["FlateEncode"]);var on=G.additionalKeyValues||[],tn=(Hr=dn.API.processDataByFilters!==void 0?dn.API.processDataByFilters(Ne,Ye):{data:Ne,reverseChain:[]}).reverseChain+(Array.isArray(at)?at.join(" "):at.toString());if(Hr.data.length!==0&&(on.push({key:"Length",value:Hr.data.length}),xt===!0&&on.push({key:"Length1",value:Ot})),tn.length!=0)if(tn.split("/").length-1==1)on.push({key:"Filter",value:tn});else{on.push({key:"Filter",value:"["+tn+"]"});for(var Cn=0;Cn<on.length;Cn+=1)if(on[Cn].key==="DecodeParms"){for(var Ha=[],Wa=0;Wa<Hr.reverseChain.split("/").length-1;Wa+=1)Ha.push("null");Ha.push(on[Cn].value),on[Cn].value="["+Ha.join(" ")+"]"}}te("<<");for(var Ns=0;Ns<on.length;Ns++)te("/"+on[Ns].key+" "+on[Ns].value);te(">>"),Hr.data.length!==0&&(te("stream"),te(gr(Hr.data)),te("endstream"))},Qe=m.__private__.putPage=function(G){var Ne=G.number,Ye=G.data,at=G.objId,xt=G.contentsObjId;ne(at,!0),te("<</Type /Page"),te("/Parent "+G.rootDictionaryObjId+" 0 R"),te("/Resources "+G.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(_(G.mediaBox.bottomLeftX))+" "+parseFloat(_(G.mediaBox.bottomLeftY))+" "+_(G.mediaBox.topRightX)+" "+_(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&te("/CropBox ["+_(G.cropBox.bottomLeftX)+" "+_(G.cropBox.bottomLeftY)+" "+_(G.cropBox.topRightX)+" "+_(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&te("/BleedBox ["+_(G.bleedBox.bottomLeftX)+" "+_(G.bleedBox.bottomLeftY)+" "+_(G.bleedBox.topRightX)+" "+_(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&te("/TrimBox ["+_(G.trimBox.bottomLeftX)+" "+_(G.trimBox.bottomLeftY)+" "+_(G.trimBox.topRightX)+" "+_(G.trimBox.topRightY)+"]"),G.artBox!==null&&te("/ArtBox ["+_(G.artBox.bottomLeftX)+" "+_(G.artBox.bottomLeftY)+" "+_(G.artBox.topRightX)+" "+_(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&te("/UserUnit "+G.userUnit),cr.publish("putPage",{objId:at,pageContext:At[Ne],pageNumber:Ne,page:Ye}),te("/Contents "+xt+" 0 R"),te(">>"),te("endobj");var Ot=Ye.join(`
`);return j===w.ADVANCED&&(Ot+=`
Q`),ne(xt,!0),nt({data:Ot,filters:Ke(),objectId:xt}),te("endobj"),at},tt=m.__private__.putPages=function(){var G,Ne,Ye=[];for(G=1;G<=rt;G++)At[G].objId=Or(),At[G].contentsObjId=Or();for(G=1;G<=rt;G++)Ye.push(Qe({number:G,data:Be[G],objId:At[G].objId,contentsObjId:At[G].contentsObjId,mediaBox:At[G].mediaBox,cropBox:At[G].cropBox,bleedBox:At[G].bleedBox,trimBox:At[G].trimBox,artBox:At[G].artBox,userUnit:At[G].userUnit,rootDictionaryObjId:Se,resourceDictionaryObjId:oe}));ne(Se,!0),te("<</Type /Pages");var at="/Kids [";for(Ne=0;Ne<rt;Ne++)at+=Ye[Ne]+" 0 R ";te(at+"]"),te("/Count "+rt),te(">>"),te("endobj"),cr.publish("postPutPages")},Xe=function(G){cr.publish("putFont",{font:G,out:te,newObject:Nr,putStream:nt}),G.isAlreadyPutted!==!0&&(G.objectNumber=Nr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+um(G.postScriptName)),te("/Subtype /Type1"),typeof G.encoding=="string"&&te("/Encoding /"+G.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},Me=function(){for(var G in er)er.hasOwnProperty(G)&&(f===!1||f===!0&&p.hasOwnProperty(G))&&Xe(er[G])},it=function(G){G.objectNumber=Nr();var Ne=[];Ne.push({key:"Type",value:"/XObject"}),Ne.push({key:"Subtype",value:"/Form"}),Ne.push({key:"BBox",value:"["+[_(G.x),_(G.y),_(G.x+G.width),_(G.y+G.height)].join(" ")+"]"}),Ne.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var Ye=G.pages[1].join(`
`);nt({data:Ye,additionalKeyValues:Ne,objectId:G.objectNumber}),te("endobj")},bt=function(){for(var G in Gr)Gr.hasOwnProperty(G)&&it(Gr[G])},It=function(G,Ne){var Ye,at=[],xt=1/(Ne-1);for(Ye=0;Ye<1;Ye+=xt)at.push(Ye);if(at.push(1),G[0].offset!=0){var Ot={offset:0,color:G[0].color};G.unshift(Ot)}if(G[G.length-1].offset!=1){var Wt={offset:1,color:G[G.length-1].color};G.push(Wt)}for(var gr="",Hr=0,on=0;on<at.length;on++){for(Ye=at[on];Ye>G[Hr+1].offset;)Hr++;var tn=G[Hr].offset,Cn=(Ye-tn)/(G[Hr+1].offset-tn),Ha=G[Hr].color,Wa=G[Hr+1].color;gr+=U(Math.round((1-Cn)*Ha[0]+Cn*Wa[0]).toString(16))+U(Math.round((1-Cn)*Ha[1]+Cn*Wa[1]).toString(16))+U(Math.round((1-Cn)*Ha[2]+Cn*Wa[2]).toString(16))}return gr.trim()},Dt=function(G,Ne){Ne||(Ne=21);var Ye=Nr(),at=It(G.colors,Ne),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+Ne+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:at,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ye}),te("endobj"),G.objectNumber=Nr(),te("<< /ShadingType "+G.type),te("/ColorSpace /DeviceRGB");var Ot="/Coords ["+_(parseFloat(G.coords[0]))+" "+_(parseFloat(G.coords[1]))+" ";G.type===2?Ot+=_(parseFloat(G.coords[2]))+" "+_(parseFloat(G.coords[3])):Ot+=_(parseFloat(G.coords[2]))+" "+_(parseFloat(G.coords[3]))+" "+_(parseFloat(G.coords[4]))+" "+_(parseFloat(G.coords[5])),te(Ot+="]"),G.matrix&&te("/Matrix ["+G.matrix.toString()+"]"),te("/Function "+Ye+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},xr=function(G,Ne){var Ye=Or(),at=Nr();Ne.push({resourcesOid:Ye,objectOid:at}),G.objectNumber=at;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+G.boundingBox.map(_).join(" ")+"]"}),xt.push({key:"XStep",value:_(G.xStep)}),xt.push({key:"YStep",value:_(G.yStep)}),xt.push({key:"Resources",value:Ye+" 0 R"}),G.matrix&&xt.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),nt({data:G.stream,additionalKeyValues:xt,objectId:G.objectNumber}),te("endobj")},Rr=function(G){var Ne;for(Ne in jt)jt.hasOwnProperty(Ne)&&(jt[Ne]instanceof rh?Dt(jt[Ne]):jt[Ne]instanceof gm&&xr(jt[Ne],G))},Yr=function(G){for(var Ne in G.objectNumber=Nr(),te("<<"),G)switch(Ne){case"opacity":te("/ca "+B(G[Ne]));break;case"stroke-opacity":te("/CA "+B(G[Ne]))}te(">>"),te("endobj")},Nn=function(){var G;for(G in Qt)Qt.hasOwnProperty(G)&&Yr(Qt[G])},Ps=function(){for(var G in te("/XObject <<"),Gr)Gr.hasOwnProperty(G)&&Gr[G].objectNumber>=0&&te("/"+G+" "+Gr[G].objectNumber+" 0 R");cr.publish("putXobjectDict"),te(">>")},Sn=function(){bn.oid=Nr(),te("<<"),te("/Filter /Standard"),te("/V "+bn.v),te("/R "+bn.r),te("/U <"+bn.toHexString(bn.U)+">"),te("/O <"+bn.toHexString(bn.O)+">"),te("/P "+bn.P),te(">>"),te("endobj")},ts=function(){for(var G in te("/Font <<"),er)er.hasOwnProperty(G)&&(f===!1||f===!0&&p.hasOwnProperty(G))&&te("/"+G+" "+er[G].objectNumber+" 0 R");te(">>")},Wn=function(){if(Object.keys(jt).length>0){for(var G in te("/Shading <<"),jt)jt.hasOwnProperty(G)&&jt[G]instanceof rh&&jt[G].objectNumber>=0&&te("/"+G+" "+jt[G].objectNumber+" 0 R");cr.publish("putShadingPatternDict"),te(">>")}},za=function(G){if(Object.keys(jt).length>0){for(var Ne in te("/Pattern <<"),jt)jt.hasOwnProperty(Ne)&&jt[Ne]instanceof m.TilingPattern&&jt[Ne].objectNumber>=0&&jt[Ne].objectNumber<G&&te("/"+Ne+" "+jt[Ne].objectNumber+" 0 R");cr.publish("putTilingPatternDict"),te(">>")}},Vn=function(){if(Object.keys(Qt).length>0){var G;for(G in te("/ExtGState <<"),Qt)Qt.hasOwnProperty(G)&&Qt[G].objectNumber>=0&&te("/"+G+" "+Qt[G].objectNumber+" 0 R");cr.publish("putGStateDict"),te(">>")}},Pn=function(G){ne(G.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ts(),Wn(),za(G.objectOid),Vn(),Ps(),te(">>"),te("endobj")},Do=function(){var G=[];Me(),Nn(),bt(),Rr(G),cr.publish("putResources"),G.forEach(Pn),Pn({resourcesOid:oe,objectOid:Number.MAX_SAFE_INTEGER}),cr.publish("postPutResources")},ba=function(){cr.publish("putAdditionalObjects");for(var G=0;G<ue.length;G++){var Ne=ue[G];ne(Ne.objId,!0),te(Ne.content),te("endobj")}cr.publish("postPutAdditionalObjects")},We=function(G){mr[G.fontName]=mr[G.fontName]||{},mr[G.fontName][G.fontStyle]=G.id},Tt=function(G,Ne,Ye,at,xt){var Ot={id:"F"+(Object.keys(er).length+1).toString(10),postScriptName:G,fontName:Ne,fontStyle:Ye,encoding:at,isStandardFont:xt||!1,metadata:{}};return cr.publish("addFont",{font:Ot,instance:this}),er[Ot.id]=Ot,We(Ot),Ot.id},_t=function(G){for(var Ne=0,Ye=Ie.length;Ne<Ye;Ne++){var at=Tt.call(this,G[Ne][0],G[Ne][1],G[Ne][2],Ie[Ne][3],!0);f===!1&&(p[at]=!0);var xt=G[Ne][0].split("-");We({id:at,fontName:xt[0],fontStyle:xt[1]||""})}cr.publish("addFonts",{fonts:er,dictionary:mr})},nr=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(at){var Ne=at.stack||"";~Ne.indexOf(" at ")&&(Ne=Ne.split(" at ")[1]);var Ye="Error in function "+Ne.split(`
`)[0].split("<")[0]+": "+at.message;if(!un.console)throw new Error(Ye);un.console.error(Ye,at),un.alert&&alert(Ye)}},G.foo.bar=G,G.foo},yr=function(G,Ne){var Ye,at,xt,Ot,Wt,gr,Hr,on,tn;if(xt=(Ne=Ne||{}).sourceEncoding||"Unicode",Wt=Ne.outputEncoding,(Ne.autoencode||Wt)&&er[qe].metadata&&er[qe].metadata[xt]&&er[qe].metadata[xt].encoding&&(Ot=er[qe].metadata[xt].encoding,!Wt&&er[qe].encoding&&(Wt=er[qe].encoding),!Wt&&Ot.codePages&&(Wt=Ot.codePages[0]),typeof Wt=="string"&&(Wt=Ot[Wt]),Wt)){for(Hr=!1,gr=[],Ye=0,at=G.length;Ye<at;Ye++)(on=Wt[G.charCodeAt(Ye)])?gr.push(String.fromCharCode(on)):gr.push(G[Ye]),gr[Ye].charCodeAt(0)>>8&&(Hr=!0);G=gr.join("")}for(Ye=G.length;Hr===void 0&&Ye!==0;)G.charCodeAt(Ye-1)>>8&&(Hr=!0),Ye--;if(!Hr)return G;for(gr=Ne.noBOM?[]:[254,255],Ye=0,at=G.length;Ye<at;Ye++){if((tn=(on=G.charCodeAt(Ye))>>8)>>8)throw new Error("Character at position "+Ye+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gr.push(tn),gr.push(on-(tn<<8))}return String.fromCharCode.apply(void 0,gr)},dr=m.__private__.pdfEscape=m.pdfEscape=function(G,Ne){return yr(G,Ne).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pr=m.__private__.beginPage=function(G){Be[++rt]=[],At[rt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},Yt(rt),le(Be[z])},ra=function(G,Ne){var Ye,at,xt;switch(r=Ne||r,typeof G=="string"&&(Ye=y(G.toLowerCase()),Array.isArray(Ye)&&(at=Ye[0],xt=Ye[1])),Array.isArray(G)&&(at=G[0]*et,xt=G[1]*et),isNaN(at)&&(at=s[0],xt=s[1]),(at>14400||xt>14400)&&(Ja.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),at=Math.min(14400,at),xt=Math.min(14400,xt)),s=[at,xt],r.substr(0,1)){case"l":xt>at&&(s=[xt,at]);break;case"p":at>xt&&(s=[xt,at])}Pr(s),$r(pr),te(Ai),Ac!==0&&te(Ac+" J"),xd!==0&&te(xd+" j"),cr.publish("addPage",{pageNumber:rt})},_n=function(G){G>0&&G<=rt&&(Be.splice(G,1),At.splice(G,1),rt--,z>rt&&(z=rt),this.setPage(z))},Yt=function(G){G>0&&G<=rt&&(z=G)},ur=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Be.length-1},Lt=function(G,Ne,Ye){var at,xt=void 0;return Ye=Ye||{},G=G!==void 0?G:er[qe].fontName,Ne=Ne!==void 0?Ne:er[qe].fontStyle,at=G.toLowerCase(),mr[at]!==void 0&&mr[at][Ne]!==void 0?xt=mr[at][Ne]:mr[G]!==void 0&&mr[G][Ne]!==void 0?xt=mr[G][Ne]:Ye.disableWarning===!1&&Ja.warn("Unable to look up font label for font '"+G+"', '"+Ne+"'. Refer to getFontList() for available fonts."),xt||Ye.noFallback||(xt=mr.times[Ne])==null&&(xt=mr.times.normal),xt},kr=m.__private__.putInfo=function(){var G=Nr(),Ne=function(at){return at};for(var Ye in u!==null&&(Ne=bn.encryptor(G,0)),te("<<"),te("/Producer ("+dr(Ne("jsPDF "+dn.version))+")"),Fe)Fe.hasOwnProperty(Ye)&&Fe[Ye]&&te("/"+Ye.substr(0,1).toUpperCase()+Ye.substr(1)+" ("+dr(Ne(Fe[Ye]))+")");te("/CreationDate ("+dr(Ne(H))+")"),te(">>"),te("endobj")},zt=m.__private__.putCatalog=function(G){var Ne=(G=G||{}).rootDictionaryObjId||Se;switch(Nr(),te("<<"),te("/Type /Catalog"),te("/Pages "+Ne+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ye=""+de;Ye.substr(Ye.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&te("/OpenAction [3 0 R /XYZ null null "+B(de)+"]")}switch(_e||(_e="continuous"),_e){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}ge&&te("/PageMode /"+ge),cr.publish("putCatalog"),te(">>"),te("endobj")},Da=m.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(K+1)),te("/Root "+K+" 0 R"),te("/Info "+(K-1)+" 0 R"),u!==null&&te("/Encrypt "+bn.oid+" 0 R"),te("/ID [ <"+Q+"> <"+Q+"> ]"),te(">>")},ka=m.__private__.putHeader=function(){te("%PDF-"+b),te("%")},Sa=m.__private__.putXRef=function(){var G="0000000000";te("xref"),te("0 "+(K+1)),te("0000000000 65535 f ");for(var Ne=1;Ne<=K;Ne++)typeof se[Ne]=="function"?te((G+se[Ne]()).slice(-10)+" 00000 n "):se[Ne]!==void 0?te((G+se[Ne]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Zt=m.__private__.buildDocument=function(){Oe(),le(xe),cr.publish("buildDocument"),ka(),tt(),ba(),Do(),u!==null&&Sn(),kr(),zt();var G=ie;return Sa(),Da(),te("startxref"),te(""+G),te("%%EOF"),le(Be[z]),xe.join(`
`)},Zr=m.__private__.getBlob=function(G){return new Blob([we(G)],{type:"application/pdf"})},La=m.output=m.__private__.output=nr((function(G,Ne){switch(typeof(Ne=Ne||{})=="string"?Ne={filename:Ne}:Ne.filename=Ne.filename||"generated.pdf",G){case void 0:return Zt();case"save":m.save(Ne.filename);break;case"arraybuffer":return we(Zt());case"blob":return Zr(Zt());case"bloburi":case"bloburl":if(un.URL!==void 0&&typeof un.URL.createObjectURL=="function")return un.URL&&un.URL.createObjectURL(Zr(Zt()))||void 0;Ja.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ye="",at=Zt();try{Ye=qk(at)}catch{Ye=qk(unescape(encodeURIComponent(at)))}return"data:application/pdf;filename="+Ne.filename+";base64,"+Ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ne.pdfObjectUrl&&(xt=Ne.pdfObjectUrl,Ot="");var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ne)+");<\/script></body></html>",gr=un.open();return gr!==null&&gr.document.write(Wt),gr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ne.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ne.filename+'" width="500px" height="400px" /></body></html>',on=un.open();if(on!==null){on.document.write(Hr);var tn=this;on.document.documentElement.querySelector("#pdfViewer").onload=function(){on.document.title=Ne.filename,on.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tn.output("bloburl"))}}return on}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(un)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ne)+'"></iframe></body></html>',Ha=un.open();if(Ha!==null&&(Ha.document.write(Cn),Ha.document.title=Ne.filename),Ha||typeof safari>"u")return Ha;break;case"datauri":case"dataurl":return un.document.location.href=this.output("datauristring",Ne);default:return null}})),Xn=function(G){return Array.isArray(wr)===!0&&wr.indexOf(G)>-1};switch(a){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=Xn("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);et=a}var bn=null;W(),re();var Sr=function(G){return u!==null?bn.encryptor(G,0):function(Ne){return Ne}},en=m.__private__.getPageInfo=m.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:At[G].objId,pageNumber:G,pageContext:At[G]}},sr=m.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ne in At)if(At[Ne].objId===G)break;return en(Ne)},Dn=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:At[z].objId,pageNumber:z,pageContext:At[z]}};m.addPage=function(){return ra.apply(this,arguments),this},m.setPage=function(){return Yt.apply(this,arguments),le.call(this,Be[z]),this},m.insertPage=function(G){return this.addPage(),this.movePage(z,G),this},m.movePage=function(G,Ne){var Ye,at;if(G>Ne){Ye=Be[G],at=At[G];for(var xt=G;xt>Ne;xt--)Be[xt]=Be[xt-1],At[xt]=At[xt-1];Be[Ne]=Ye,At[Ne]=at,this.setPage(Ne)}else if(G<Ne){Ye=Be[G],at=At[G];for(var Ot=G;Ot<Ne;Ot++)Be[Ot]=Be[Ot+1],At[Ot]=At[Ot+1];Be[Ne]=Ye,At[Ne]=at,this.setPage(Ne)}return this},m.deletePage=function(){return _n.apply(this,arguments),this},m.__private__.text=m.text=function(G,Ne,Ye,at,xt){var Ot,Wt,gr,Hr,on,tn,Cn,Ha,Wa,Ns=(at=at||{}).scope||this;if(typeof G=="number"&&typeof Ne=="number"&&(typeof Ye=="string"||Array.isArray(Ye))){var Zs=Ye;Ye=Ne,Ne=G,G=Zs}if(arguments[3]instanceof tr?(P("The transform parameter of text() with a Matrix value"),Wa=xt):(gr=arguments[4],Hr=arguments[5],Oa(Cn=arguments[3])==="object"&&Cn!==null||(typeof gr=="string"&&(Hr=gr,gr=null),typeof Cn=="string"&&(Hr=Cn,Cn=null),typeof Cn=="number"&&(gr=Cn,Cn=null),at={flags:Cn,angle:gr,align:Hr})),isNaN(Ne)||isNaN(Ye)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return Ns;var Us="",Mo=!1,ei=typeof at.lineHeightFactor=="number"?at.lineHeightFactor:He,go=Ns.internal.scaleFactor;function vo(na){return na=na.split("	").join(Array(at.TabLen||9).join(" ")),dr(na,Cn)}function su(na){for(var Yn,An=na.concat(),Ca=[],Uo=An.length;Uo--;)typeof(Yn=An.shift())=="string"?Ca.push(Yn):Array.isArray(na)&&(Yn.length===1||Yn[1]===void 0&&Yn[2]===void 0)?Ca.push(Yn[0]):Ca.push([Yn[0],Yn[1],Yn[2]]);return Ca}function iu(na,Yn){var An;if(typeof na=="string")An=Yn(na)[0];else if(Array.isArray(na)){for(var Ca,Uo,lu=na.concat(),qo=[],Nd=lu.length;Nd--;)typeof(Ca=lu.shift())=="string"?qo.push(Yn(Ca)[0]):Array.isArray(Ca)&&typeof Ca[0]=="string"&&(Uo=Yn(Ca[0],Ca[1],Ca[2]),qo.push([Uo[0],Uo[1],Uo[2]]));An=qo}return An}var Tc=!1,vd=!0;if(typeof G=="string")Tc=!0;else if(Array.isArray(G)){var bd=G.concat();Wt=[];for(var yd,_a=bd.length;_a--;)(typeof(yd=bd.shift())!="string"||Array.isArray(yd)&&typeof yd[0]!="string")&&(vd=!1);Tc=vd}if(Tc===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var bo=he/Ns.internal.scaleFactor,xl=bo*(ei-1);switch(at.baseline){case"bottom":Ye-=xl;break;case"top":Ye+=bo-xl;break;case"hanging":Ye+=bo-2*xl;break;case"middle":Ye+=bo/2-xl}if((tn=at.maxWidth||0)>0&&(typeof G=="string"?G=Ns.splitTextToSize(G,tn):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce((function(na,Yn){return na.concat(Ns.splitTextToSize(Yn,tn))}),[]))),Ot={text:G,x:Ne,y:Ye,options:at,mutex:{pdfEscape:dr,activeFontKey:qe,fonts:er,activeFontSize:he}},cr.publish("preProcessText",Ot),G=Ot.text,gr=(at=Ot.options).angle,!(Wa instanceof tr)&&gr&&typeof gr=="number"){gr*=Math.PI/180,at.rotationDirection===0&&(gr=-gr),j===w.ADVANCED&&(gr=-gr);var rs=Math.cos(gr),Oc=Math.sin(gr);Wa=new tr(rs,Oc,-Oc,rs,0,0)}else gr&&gr instanceof tr&&(Wa=gr);j!==w.ADVANCED||Wa||(Wa=Vr),(on=at.charSpace||Lo)!==void 0&&(Us+=_(E(on))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ha=at.horizontalScale)!==void 0&&(Us+=_(100*Ha)+` Tz
`),at.lang;var ln=-1,ss=at.renderingMode!==void 0?at.renderingMode:at.stroke,xa=Ns.internal.getCurrentPageInfo().pageContext;switch(ss){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var mi=xa.usedRenderingMode!==void 0?xa.usedRenderingMode:-1;ln!==-1?Us+=ln+` Tr
`:mi!==-1&&(Us+=`0 Tr
`),ln!==-1&&(xa.usedRenderingMode=ln),Hr=at.align||"left";var $n,qs=he*ei,Va=Ns.internal.pageSize.getWidth(),Vi=er[qe];on=at.charSpace||Lo,tn=at.maxWidth||0,Cn=Object.assign({autoencode:!0,noBOM:!0},at.flags);var Ga=[],js=function(na){return Ns.getStringUnitWidth(na,{font:Vi,charSpace:on,fontSize:he,doKerning:!1})*he/go};if(Object.prototype.toString.call(G)==="[object Array]"){var wa;Wt=su(G),Hr!=="left"&&($n=Wt.map(js));var is,Gi=0;if(Hr==="right"){Ne-=$n[0],G=[],_a=Wt.length;for(var Pl=0;Pl<_a;Pl++)Pl===0?(is=Ma(Ne),wa=ys(Ye)):(is=E(Gi-$n[Pl]),wa=-qs),G.push([Wt[Pl],is,wa]),Gi=$n[Pl]}else if(Hr==="center"){Ne-=$n[0]/2,G=[],_a=Wt.length;for(var Ro=0;Ro<_a;Ro++)Ro===0?(is=Ma(Ne),wa=ys(Ye)):(is=E((Gi-$n[Ro])/2),wa=-qs),G.push([Wt[Ro],is,wa]),Gi=$n[Ro]}else if(Hr==="left"){G=[],_a=Wt.length;for(var ou=0;ou<_a;ou++)G.push(Wt[ou])}else if(Hr==="justify"&&Vi.encoding==="Identity-H"){G=[],_a=Wt.length,tn=tn!==0?tn:Va;for(var gl=0,Gn=0;Gn<_a;Gn++)if(wa=Gn===0?ys(Ye):-qs,is=Gn===0?Ma(Ne):gl,Gn<_a-1){var Il=E((tn-$n[Gn])/(Wt[Gn].split(" ").length-1)),ti=Wt[Gn].split(" ");G.push([ti[0]+" ",is,wa]),gl=0;for(var Ti=1;Ti<ti.length;Ti++){var Dl=(js(ti[Ti-1]+" "+ti[Ti])-js(ti[Ti]))*go+Il;Ti==ti.length-1?G.push([ti[Ti],Dl,0]):G.push([ti[Ti]+" ",Dl,0]),gl-=Dl}}else G.push([Wt[Gn],is,wa]);G.push(["",gl,0])}else{if(Hr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],_a=Wt.length,tn=tn!==0?tn:Va,Gn=0;Gn<_a;Gn++)wa=Gn===0?ys(Ye):-qs,is=Gn===0?Ma(Ne):0,Gn<_a-1?Ga.push(_(E((tn-$n[Gn])/(Wt[Gn].split(" ").length-1)))):Ga.push(0),G.push([Wt[Gn],is,wa])}}var wd=typeof at.R2L=="boolean"?at.R2L:Ve;wd===!0&&(G=iu(G,(function(na,Yn,An){return[na.split("").reverse().join(""),Yn,An]}))),Ot={text:G,x:Ne,y:Ye,options:at,mutex:{pdfEscape:dr,activeFontKey:qe,fonts:er,activeFontSize:he}},cr.publish("postProcessText",Ot),G=Ot.text,Mo=Ot.mutex.isHex||!1;var Ll=er[qe].encoding;Ll!=="WinAnsiEncoding"&&Ll!=="StandardEncoding"||(G=iu(G,(function(na,Yn,An){return[vo(na),Yn,An]}))),Wt=su(G),G=[];for(var Bo,Ki,$s,Xi=0,Oi=1,Yi=Array.isArray(Wt[0])?Oi:Xi,yo="",Pc=function(na,Yn,An){var Ca="";return An instanceof tr?(An=typeof at.angle=="number"?Xr(An,new tr(1,0,0,1,na,Yn)):Xr(new tr(1,0,0,1,na,Yn),An),j===w.ADVANCED&&(An=Xr(new tr(1,0,0,-1,0,0),An)),Ca=An.join(" ")+` Tm
`):Ca=_(na)+" "+_(Yn)+` Td
`,Ca},ks=0;ks<Wt.length;ks++){switch(yo="",Yi){case Oi:$s=(Mo?"<":"(")+Wt[ks][0]+(Mo?">":")"),Bo=parseFloat(Wt[ks][1]),Ki=parseFloat(Wt[ks][2]);break;case Xi:$s=(Mo?"<":"(")+Wt[ks]+(Mo?">":")"),Bo=Ma(Ne),Ki=ys(Ye)}Ga!==void 0&&Ga[ks]!==void 0&&(yo=Ga[ks]+` Tw
`),ks===0?G.push(yo+Pc(Bo,Ki,Wa)+$s):Yi===Xi?G.push(yo+$s):Yi===Oi&&G.push(yo+Pc(Bo,Ki,Wa)+$s)}G=Yi===Xi?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var Ss=`BT
/`;return Ss+=qe+" "+he+` Tf
`,Ss+=_(he*ei)+` TL
`,Ss+=ws+`
`,Ss+=Us,Ss+=G,te(Ss+="ET"),p[qe]=!0,Ns};var Ar=m.__private__.clip=m.clip=function(G){return te(G==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ar("evenodd")},m.__private__.discardPath=m.discardPath=function(){return te("n"),this};var Fa=m.__private__.isValidStyle=function(G){var Ne=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(Ne=!0),Ne};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(G){return Fa(G)&&(d=G),this};var ho=m.__private__.getStyle=m.getStyle=function(G){var Ne=d;switch(G){case"D":case"S":Ne="S";break;case"F":Ne="f";break;case"FD":case"DF":Ne="B";break;case"f":case"f*":case"B":case"B*":Ne=G}return Ne},gs=m.close=function(){return te("h"),this};m.stroke=function(){return te("S"),this},m.fill=function(G){return vs("f",G),this},m.fillEvenOdd=function(G){return vs("f*",G),this},m.fillStroke=function(G){return vs("B",G),this},m.fillStrokeEvenOdd=function(G){return vs("B*",G),this};var vs=function(G,Ne){Oa(Ne)==="object"?ml(Ne,G):te(G)},bs=function(G){G===null||j===w.ADVANCED&&G===void 0||(G=ho(G),te(G))};function mo(G,Ne,Ye,at,xt){var Ot=new gm(Ne||this.boundingBox,Ye||this.xStep,at||this.yStep,this.gState,xt||this.matrix);Ot.stream=this.stream;var Wt=G+"$$"+this.cloneIndex+++"$$";return pn(Wt,Ot),Ot}var ml=function(G,Ne){var Ye=br[G.key],at=jt[Ye];if(at instanceof rh)te("q"),te(zu(Ne)),at.gState&&m.setGState(at.gState),te(G.matrix.toString()+" cm"),te("/"+Ye+" sh"),te("Q");else if(at instanceof gm){var xt=new tr(1,0,0,-1,0,nc());G.matrix&&(xt=xt.multiply(G.matrix||Vr),Ye=mo.call(at,G.key,G.boundingBox,G.xStep,G.yStep,xt).id),te("q"),te("/Pattern cs"),te("/"+Ye+" scn"),at.gState&&m.setGState(at.gState),te(Ne),te("Q")}},zu=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},po=m.moveTo=function(G,Ne){return te(_(E(G))+" "+_(q(Ne))+" m"),this},Hi=m.lineTo=function(G,Ne){return te(_(E(G))+" "+_(q(Ne))+" l"),this},hi=m.curveTo=function(G,Ne,Ye,at,xt,Ot){return te([_(E(G)),_(q(Ne)),_(E(Ye)),_(q(at)),_(E(xt)),_(q(Ot)),"c"].join(" ")),this};m.__private__.line=m.line=function(G,Ne,Ye,at,xt){if(isNaN(G)||isNaN(Ne)||isNaN(Ye)||isNaN(at)||!Fa(xt))throw new Error("Invalid arguments passed to jsPDF.line");return j===w.COMPAT?this.lines([[Ye-G,at-Ne]],G,Ne,[1,1],xt||"S"):this.lines([[Ye-G,at-Ne]],G,Ne,[1,1]).stroke()},m.__private__.lines=m.lines=function(G,Ne,Ye,at,xt,Ot){var Wt,gr,Hr,on,tn,Cn,Ha,Wa,Ns,Zs,Us,Mo;if(typeof G=="number"&&(Mo=Ye,Ye=Ne,Ne=G,G=Mo),at=at||[1,1],Ot=Ot||!1,isNaN(Ne)||isNaN(Ye)||!Array.isArray(G)||!Array.isArray(at)||!Fa(xt)||typeof Ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(po(Ne,Ye),Wt=at[0],gr=at[1],on=G.length,Zs=Ne,Us=Ye,Hr=0;Hr<on;Hr++)(tn=G[Hr]).length===2?(Zs=tn[0]*Wt+Zs,Us=tn[1]*gr+Us,Hi(Zs,Us)):(Cn=tn[0]*Wt+Zs,Ha=tn[1]*gr+Us,Wa=tn[2]*Wt+Zs,Ns=tn[3]*gr+Us,Zs=tn[4]*Wt+Zs,Us=tn[5]*gr+Us,hi(Cn,Ha,Wa,Ns,Zs,Us));return Ot&&gs(),bs(xt),this},m.path=function(G){for(var Ne=0;Ne<G.length;Ne++){var Ye=G[Ne],at=Ye.c;switch(Ye.op){case"m":po(at[0],at[1]);break;case"l":Hi(at[0],at[1]);break;case"c":hi.apply(this,at);break;case"h":gs()}}return this},m.__private__.rect=m.rect=function(G,Ne,Ye,at,xt){if(isNaN(G)||isNaN(Ne)||isNaN(Ye)||isNaN(at)||!Fa(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===w.COMPAT&&(at=-at),te([_(E(G)),_(q(Ne)),_(E(Ye)),_(E(at)),"re"].join(" ")),bs(xt),this},m.__private__.triangle=m.triangle=function(G,Ne,Ye,at,xt,Ot,Wt){if(isNaN(G)||isNaN(Ne)||isNaN(Ye)||isNaN(at)||isNaN(xt)||isNaN(Ot)||!Fa(Wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ye-G,at-Ne],[xt-Ye,Ot-at],[G-xt,Ne-Ot]],G,Ne,[1,1],Wt,!0),this},m.__private__.roundedRect=m.roundedRect=function(G,Ne,Ye,at,xt,Ot,Wt){if(isNaN(G)||isNaN(Ne)||isNaN(Ye)||isNaN(at)||isNaN(xt)||isNaN(Ot)||!Fa(Wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gr=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*Ye),Ot=Math.min(Ot,.5*at),this.lines([[Ye-2*xt,0],[xt*gr,0,xt,Ot-Ot*gr,xt,Ot],[0,at-2*Ot],[0,Ot*gr,-xt*gr,Ot,-xt,Ot],[2*xt-Ye,0],[-xt*gr,0,-xt,-Ot*gr,-xt,-Ot],[0,2*Ot-at],[0,-Ot*gr,xt*gr,-Ot,xt,-Ot]],G+xt,Ne,[1,1],Wt,!0),this},m.__private__.ellipse=m.ellipse=function(G,Ne,Ye,at,xt){if(isNaN(G)||isNaN(Ne)||isNaN(Ye)||isNaN(at)||!Fa(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ot=4/3*(Math.SQRT2-1)*Ye,Wt=4/3*(Math.SQRT2-1)*at;return po(G+Ye,Ne),hi(G+Ye,Ne-Wt,G+Ot,Ne-at,G,Ne-at),hi(G-Ot,Ne-at,G-Ye,Ne-Wt,G-Ye,Ne),hi(G-Ye,Ne+Wt,G-Ot,Ne+at,G,Ne+at),hi(G+Ot,Ne+at,G+Ye,Ne+Wt,G+Ye,Ne),bs(xt),this},m.__private__.circle=m.circle=function(G,Ne,Ye,at){if(isNaN(G)||isNaN(Ne)||isNaN(Ye)||!Fa(at))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,Ne,Ye,Ye,at)},m.setFont=function(G,Ne,Ye){return Ye&&(Ne=A(Ne,Ye)),qe=Lt(G,Ne,{disableWarning:!1}),this};var rc=m.__private__.getFont=m.getFont=function(){return er[Lt.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var G,Ne,Ye={};for(G in mr)if(mr.hasOwnProperty(G))for(Ne in Ye[G]=[],mr[G])mr[G].hasOwnProperty(Ne)&&Ye[G].push(Ne);return Ye},m.addFont=function(G,Ne,Ye,at,xt){var Ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ot.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Ot.indexOf(arguments[3])==-1&&(Ye=A(Ye,at)),xt=xt||"Identity-H",Tt.call(this,G,Ne,Ye,xt)};var He,pr=e.lineWidth||.200025,Br=m.__private__.getLineWidth=m.getLineWidth=function(){return pr},$r=m.__private__.setLineWidth=m.setLineWidth=function(G){return pr=G,te(_(E(G))+" w"),this};m.__private__.setLineDash=dn.API.setLineDash=dn.API.setLineDashPattern=function(G,Ne){if(G=G||[],Ne=Ne||0,isNaN(Ne)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map((function(Ye){return _(E(Ye))})).join(" "),Ne=_(E(Ne)),te("["+G+"] "+Ne+" d"),this};var hn=m.__private__.getLineHeight=m.getLineHeight=function(){return he*He};m.__private__.getLineHeight=m.getLineHeight=function(){return he*He};var qn=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(He=G),this},ua=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return He};qn(e.lineHeight);var Ma=m.__private__.getHorizontalCoordinate=function(G){return E(G)},ys=m.__private__.getVerticalCoordinate=function(G){return j===w.ADVANCED?G:At[z].mediaBox.topRightY-At[z].mediaBox.bottomLeftY-E(G)},Mf=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(G){return _(Ma(G))},Wi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(G){return _(ys(G))},Ai=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ve(Ai)},m.__private__.setStrokeColor=m.setDrawColor=function(G,Ne,Ye,at){return Ai=Ae({ch1:G,ch2:Ne,ch3:Ye,ch4:at,pdfColorType:"draw",precision:2}),te(Ai),this};var Ol=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ve(Ol)},m.__private__.setFillColor=m.setFillColor=function(G,Ne,Ye,at){return Ol=Ae({ch1:G,ch2:Ne,ch3:Ye,ch4:at,pdfColorType:"fill",precision:2}),te(Ol),this};var ws=e.textColor||"0 g",xo=m.__private__.getTextColor=m.getTextColor=function(){return ve(ws)};m.__private__.setTextColor=m.setTextColor=function(G,Ne,Ye,at){return ws=Ae({ch1:G,ch2:Ne,ch3:Ye,ch4:at,pdfColorType:"text",precision:3}),this};var Lo=e.charSpace,pd=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Lo||0)};m.__private__.setCharSpace=m.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Lo=G,this};var Ac=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(G){var Ne=m.CapJoinStyles[G];if(Ne===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ac=Ne,te(Ne+" J"),this};var xd=0;m.__private__.setLineJoin=m.setLineJoin=function(G){var Ne=m.CapJoinStyles[G];if(Ne===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xd=Ne,te(Ne+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(_(E(G))+" M"),this},m.GState=Cb,m.setGState=function(G){(G=typeof G=="string"?Qt[Fr[G]]:pl(null,G)).equals(Mr)||(te("/"+G.id+" gs"),Mr=G)};var pl=function(G,Ne){if(!G||!Fr[G]){var Ye=!1;for(var at in Qt)if(Qt.hasOwnProperty(at)&&Qt[at].equals(Ne)){Ye=!0;break}if(Ye)Ne=Qt[at];else{var xt="GS"+(Object.keys(Qt).length+1).toString(10);Qt[xt]=Ne,Ne.id=xt}return G&&(Fr[G]=Ne.id),cr.publish("addGState",Ne),Ne}};m.addGState=function(G,Ne){return pl(G,Ne),this},m.saveGraphicsState=function(){return te("q"),Ge.push({key:qe,size:he,color:ws}),this},m.restoreGraphicsState=function(){te("Q");var G=Ge.pop();return qe=G.key,he=G.size,ws=G.color,Mr=null,this},m.setCurrentTransformationMatrix=function(G){return te(G.toString()+" cm"),this},m.comment=function(G){return te("#"+G),this};var Ei=function(G,Ne){var Ye=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ye},set:function(Ot){isNaN(Ot)||(Ye=parseFloat(Ot))}});var at=Ne||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return at},set:function(Ot){isNaN(Ot)||(at=parseFloat(Ot))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Ot){xt=Ot.toString()}}),this},Fo=function(G,Ne,Ye,at){Ei.call(this,G,Ne),this.type="rect";var xt=Ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(Wt){isNaN(Wt)||(xt=parseFloat(Wt))}});var Ot=at||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ot},set:function(Wt){isNaN(Wt)||(Ot=parseFloat(Wt))}}),this},gd=function(){this.page=rt,this.currentPage=z,this.pages=Be.slice(0),this.pagesContext=At.slice(0),this.x=Kt,this.y=qt,this.matrix=vr,this.width=ya(z),this.height=nc(z),this.outputDestination=$e,this.id="",this.objectNumber=-1};gd.prototype.restore=function(){rt=this.page,z=this.currentPage,At=this.pagesContext,Be=this.pages,Kt=this.x,qt=this.y,vr=this.matrix,Wu(z,this.width),au(z,this.height),$e=this.outputDestination};var Hu=function(G,Ne,Ye,at,xt){qr.push(new gd),rt=z=0,Be=[],Kt=G,qt=Ne,vr=xt,Pr([Ye,at])},nu=function(G){if(jr[G])qr.pop().restore();else{var Ne=new gd,Ye="Xo"+(Object.keys(Gr).length+1).toString(10);Ne.id=Ye,jr[G]=Ye,Gr[Ye]=Ne,cr.publish("addFormObject",Ne),qr.pop().restore()}};for(var Ec in m.beginFormObject=function(G,Ne,Ye,at,xt){return Hu(G,Ne,Ye,at,xt),this},m.endFormObject=function(G){return nu(G),this},m.doFormObject=function(G,Ne){var Ye=Gr[jr[G]];return te("q"),te(Ne.toString()+" cm"),te("/"+Ye.id+" Do"),te("Q"),this},m.getFormObject=function(G){var Ne=Gr[jr[G]];return{x:Ne.x,y:Ne.y,width:Ne.width,height:Ne.height,matrix:Ne.matrix}},m.save=function(G,Ne){return G=G||"generated.pdf",(Ne=Ne||{}).returnPromise=Ne.returnPromise||!1,Ne.returnPromise===!1?(eh(Zr(Zt()),G),typeof eh.unload=="function"&&un.setTimeout&&setTimeout(eh.unload,911),this):new Promise((function(Ye,at){try{var xt=eh(Zr(Zt()),G);typeof eh.unload=="function"&&un.setTimeout&&setTimeout(eh.unload,911),Ye(xt)}catch(Ot){at(Ot.message)}}))},dn.API)dn.API.hasOwnProperty(Ec)&&(Ec==="events"&&dn.API.events.length?(function(G,Ne){var Ye,at,xt;for(xt=Ne.length-1;xt!==-1;xt--)Ye=Ne[xt][0],at=Ne[xt][1],G.subscribe.apply(G,[Ye].concat(typeof at=="function"?[at]:at))})(cr,dn.API.events):m[Ec]=dn.API[Ec]);var ya=m.getPageWidth=function(G){return(At[G=G||z].mediaBox.topRightX-At[G].mediaBox.bottomLeftX)/et},Wu=m.setPageWidth=function(G,Ne){At[G].mediaBox.topRightX=Ne*et+At[G].mediaBox.bottomLeftX},nc=m.getPageHeight=function(G){return(At[G=G||z].mediaBox.topRightY-At[G].mediaBox.bottomLeftY)/et},au=m.setPageHeight=function(G,Ne){At[G].mediaBox.topRightY=Ne*et+At[G].mediaBox.bottomLeftY};return m.internal={pdfEscape:dr,getStyle:ho,getFont:rc,getFontSize:Ce,getCharSpace:pd,getTextColor:xo,getLineHeight:hn,getLineHeightFactor:ua,getLineWidth:Br,write:Te,getHorizontalCoordinate:Ma,getVerticalCoordinate:ys,getCoordinateString:Mf,getVerticalCoordinateString:Wi,collections:{},newObject:Nr,newAdditionalObject:je,newObjectDeferred:Or,newObjectDeferredBegin:ne,getFilters:Ke,putStream:nt,events:cr,scaleFactor:et,pageSize:{getWidth:function(){return ya(z)},setWidth:function(G){Wu(z,G)},getHeight:function(){return nc(z)},setHeight:function(G){au(z,G)}},encryptionOptions:u,encryption:bn,getEncryptor:Sr,output:La,getNumberOfPages:ur,pages:Be,out:te,f2:B,f3:T,getPageInfo:en,getPageInfoByObjId:sr,getCurrentPageInfo:Dn,getPDFVersion:v,Point:Ei,Rectangle:Fo,Matrix:tr,hasHotfix:Xn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ya(z)},set:function(G){Wu(z,G)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return nc(z)},set:function(G){au(z,G)},enumerable:!0,configurable:!0}),_t.call(m,Ie),qe="F1",ra(s,r),cr.publish("initialized"),m}dm.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},dm.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},dm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},dm.prototype.processOwnerPassword=function(e,t){return zk($k(t).substr(0,5),e)},dm.prototype.encryptor=function(e,t){var r=$k(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return zk(r,a)}},Cb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Oa(e)!==Oa(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},dn.API={events:[]},dn.version="2.5.2";var Ws=dn.API,n_=1,Wh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},om=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wn=function(e){return e.toFixed(2)},n0=function(e){return e.toFixed(5)};Ws.__acroform__={};var tc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},nD=function(e){return e*n_},ku=function(e){var t=new X9,r=Dr.internal.getHeight(e)||0,a=Dr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(wn(a)),Number(wn(r))],t},F1e=Ws.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},M1e=Ws.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},R1e=Ws.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ii=Ws.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return R1e(e,t-1)},oi=Ws.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return F1e(e,t-1)},li=Ws.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return M1e(e,t-1)},B1e=Ws.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=a(i)||0,[Number(wn(c.lowerLeft_X)),Number(wn(c.lowerLeft_Y)),Number(wn(c.upperRight_X)),Number(wn(c.upperRight_Y))]},U1e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=Hk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+wn(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ku(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Hk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(T){return T.split(`
`)})):s.map((function(T){return[T]}));var i=r,o=Dr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Dr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,E,F){if(T+1<s.length){var q=E+" "+s[T+1][0];return qv(q,e,F).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,f=qv("3",e,i).height,p=e.multiline?o-i:(o-f)/2,m=p+=2,b=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+qv(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var N=!1;if(s[j].length!==1&&g!==s[j].length-1){if((f+2)*(w+2)+2>o)continue e;y+=s[j][g],N=!0,v=j,j--}else{y=(y+=s[j][g]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(j),A=c(S,y,i),_=j>=s.length-1;if(A&&!_){y+=" ",g=0;continue}if(A||_){if(_)v=S;else if(e.multiline&&(f+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>o)continue e;v=S}}for(var P="",I=b;I<=v;I++){var B=s[I];if(e.multiline){if(I===v){P+=B[g]+" ",g=(g+1)%B.length;continue}if(I===b){P+=B[B.length-1]+" ";continue}}P+=B[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,u=qv(P,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=wn(d)+" "+wn(m)+` Td
`,t+="("+Wh(P)+`) Tj
`,t+=-wn(d)+` 0 Td
`,m=-(i+2),u=0,b=N?v:v+1,w++,y=""}break}return a.text=t,a.fontSize=i,a},qv=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},q1e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$1e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(a){return a.type===r.type&&a.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},z1e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Oa(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},H1e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(tu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(q1e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");n_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Y9,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&$1e(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=B1e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Dr.createDefaultAppearanceStream(l),Oa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=U1e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var m=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var b=m[o];typeof b=="function"&&(b=b.call(s,l)),f+="/"+o+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(s,l)),f+="/"+o+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&z1e(s.internal.acroformPlugin.xForms,s)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},K9=Ws.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Oa(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Wh(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rj=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Wh(a(e))+")"},Tu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Tu.prototype.toString=function(){return this.objId+" 0 R"},Tu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Tu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:K9(s,this.objId,this.scope)}):s instanceof Tu?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var X9=function(){Tu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};tc(X9,Tu);var Y9=function(){Tu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Wh(r(e))+")"}},set:function(r){e=r}})};tc(Y9,Tu);var tu=function e(){Tu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ii(t,3)},set:function(y){y?this.F=oi(t,3):this.F=li(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ab)return;i="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Wh(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/n_:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Ab||this instanceof vh))return Rj(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof io?p:Rj(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof io?y:y.substr(0,1)==="("?om(y.substr(1,y.length-2)):om(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof io?om(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof io?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof io?m:Rj(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof io?y:y.substr(0,1)==="("?om(y.substr(1,y.length-2)):om(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof io?om(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof io?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(y){b=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,1)},set:function(y){y?this.Ff=oi(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,2)},set:function(y){y?this.Ff=oi(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,3)},set:function(y){y?this.Ff=oi(this.Ff,3):this.Ff=li(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');g=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(g){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};tc(tu,Tu);var _m=function(){tu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return K9(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,18)},set:function(r){r?this.Ff=oi(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=oi(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,20)},set:function(r){r?(this.Ff=oi(this.Ff,20),t.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,22)},set:function(r){r?this.Ff=oi(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,23)},set:function(r){r?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,27)},set:function(r){r?this.Ff=oi(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};tc(_m,tu);var Cm=function(){_m.call(this),this.fontName="helvetica",this.combo=!1};tc(Cm,_m);var Am=function(){Cm.call(this),this.combo=!0};tc(Am,Cm);var Zv=function(){Am.call(this),this.edit=!0};tc(Zv,Am);var io=function(){tu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,15)},set:function(r){r?this.Ff=oi(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,16)},set:function(r){r?this.Ff=oi(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,17)},set:function(r){r?this.Ff=oi(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,26)},set:function(r){r?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Wh(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Oa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};tc(io,tu);var e1=function(){io.call(this),this.pushButton=!0};tc(e1,io);var Em=function(){io.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};tc(Em,io);var Ab=function(){var e,t;tu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+Wh(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Oa(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tc(Ab,tu),Em.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Em.prototype.createOption=function(e){var t=new Ab;return t.Parent=this,t.optionName=e,this.Kids.push(t),W1e.call(this.scope,t),t};var t1=function(){io.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dr.CheckBox.createAppearanceStream()};tc(t1,io);var vh=function(){tu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,13)},set:function(t){t?this.Ff=oi(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,21)},set:function(t){t?this.Ff=oi(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,23)},set:function(t){t?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,24)},set:function(t){t?this.Ff=oi(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,25)},set:function(t){t?this.Ff=oi(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,26)},set:function(t){t?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tc(vh,tu);var r1=function(){vh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,14)},set:function(e){e?this.Ff=oi(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};tc(r1,vh);var Dr={CheckBox:{createAppearanceStream:function(){return{N:{On:Dr.CheckBox.YesNormal},D:{On:Dr.CheckBox.YesPushDown,Off:Dr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ku(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Hk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+wn(Dr.internal.getWidth(e))+" "+wn(Dr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+wn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ku(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Dr.internal.getHeight(e),o=Dr.internal.getWidth(e),l=Hk(e,e.caption);return s.push("1 g"),s.push("0 0 "+wn(o)+" "+wn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+wn(o-1)+" "+wn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+wn(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=ku(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wn(Dr.internal.getWidth(e))+" "+wn(Dr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Dr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Dr.RadioButton.Circle.YesNormal,t.D[e]=Dr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ku(e);t.scope=e.scope;var r=[],a=Dr.internal.getWidth(e)<=Dr.internal.getHeight(e)?Dr.internal.getWidth(e)/4:Dr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Dr.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+n0(Dr.internal.getWidth(e)/2)+" "+n0(Dr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ku(e);t.scope=e.scope;var r=[],a=Dr.internal.getWidth(e)<=Dr.internal.getHeight(e)?Dr.internal.getWidth(e)/4:Dr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Dr.internal.Bezier_C).toFixed(5)),o=Number((a*Dr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+n0(Dr.internal.getWidth(e)/2)+" "+n0(Dr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+n0(Dr.internal.getWidth(e)/2)+" "+n0(Dr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ku(e);t.scope=e.scope;var r=[],a=Dr.internal.getWidth(e)<=Dr.internal.getHeight(e)?Dr.internal.getWidth(e)/4:Dr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Dr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+n0(Dr.internal.getWidth(e)/2)+" "+n0(Dr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Dr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Dr.RadioButton.Cross.YesNormal,t.D[e]=Dr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ku(e);t.scope=e.scope;var r=[],a=Dr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+wn(Dr.internal.getWidth(e)-2)+" "+wn(Dr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(wn(a.x1.x)+" "+wn(a.x1.y)+" m"),r.push(wn(a.x2.x)+" "+wn(a.x2.y)+" l"),r.push(wn(a.x4.x)+" "+wn(a.x4.y)+" m"),r.push(wn(a.x3.x)+" "+wn(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ku(e);t.scope=e.scope;var r=Dr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+wn(Dr.internal.getWidth(e))+" "+wn(Dr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+wn(Dr.internal.getWidth(e)-2)+" "+wn(Dr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(wn(r.x1.x)+" "+wn(r.x1.y)+" m"),a.push(wn(r.x2.x)+" "+wn(r.x2.y)+" l"),a.push(wn(r.x4.x)+" "+wn(r.x4.y)+" m"),a.push(wn(r.x3.x)+" "+wn(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=ku(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wn(Dr.internal.getWidth(e))+" "+wn(Dr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Dr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Dr.internal.getWidth(e),r=Dr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Dr.internal.getWidth=function(e){var t=0;return Oa(e)==="object"&&(t=nD(e.Rect[2])),t},Dr.internal.getHeight=function(e){var t=0;return Oa(e)==="object"&&(t=nD(e.Rect[3])),t};var W1e=Ws.addField=function(e){if(H1e(this,e),!(e instanceof tu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ws.AcroFormChoiceField=_m,Ws.AcroFormListBox=Cm,Ws.AcroFormComboBox=Am,Ws.AcroFormEditBox=Zv,Ws.AcroFormButton=io,Ws.AcroFormPushButton=e1,Ws.AcroFormRadioButton=Em,Ws.AcroFormCheckBox=t1,Ws.AcroFormTextField=vh,Ws.AcroFormPasswordField=r1,Ws.AcroFormAppearance=Dr,Ws.AcroForm={ChoiceField:_m,ListBox:Cm,ComboBox:Am,EditBox:Zv,Button:io,PushButton:e1,RadioButton:Em,CheckBox:t1,TextField:vh,PasswordField:r1,Appearance:Dr},dn.AcroForm={ChoiceField:_m,ListBox:Cm,ComboBox:Am,EditBox:Zv,Button:io,PushButton:e1,RadioButton:Em,CheckBox:t1,TextField:vh,PasswordField:r1,Appearance:Dr};dn.AcroForm;function Q9(e){return e.reduce((function(t,r,a){return t[r]=a,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(T,E){var F,q,H,Q,J,re=t;if((E=E||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(A(T))for(J in r)for(H=r[J],F=0;F<H.length;F+=1){for(Q=!0,q=0;q<H[F].length;q+=1)if(H[F][q]!==void 0&&H[F][q]!==T[q]){Q=!1;break}if(Q===!0){re=J;break}}else for(J in r)for(H=r[J],F=0;F<H.length;F+=1){for(Q=!0,q=0;q<H[F].length;q+=1)if(H[F][q]!==void 0&&H[F][q]!==T.charCodeAt(q)){Q=!1;break}if(Q===!0){re=J;break}}return re===t&&E!==t&&(re=E),re},s=function T(E){for(var F=this.internal.write,q=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:E.width}),Q.push({key:"Height",value:E.height}),E.colorSpace===g.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===g.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var J="",re=0,X=E.transparency.length;re<X;re++)J+=E.transparency[re]+" "+E.transparency[re]+" ";Q.push({key:"Mask",value:"["+J+"]"})}E.sMask!==void 0&&Q.push({key:"SMask",value:E.objectId+1+" 0 R"});var ee=E.filter!==void 0?["/"+E.filter]:void 0;if(q({data:E.data,additionalKeyValues:Q,alreadyAppliedFilters:ee,objectId:E.objectId}),F("endobj"),"sMask"in E&&E.sMask!==void 0){var W="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,O={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:W,data:E.sMask};"filter"in E&&(O.filter=E.filter),T.call(this,O)}if(E.colorSpace===g.INDEXED){var z=this.internal.newObject();q({data:P(new Uint8Array(E.palette)),objectId:z}),F("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var E in T)s.call(this,T[E])},o=function(){var T,E=this.internal.collections.addImage_images,F=this.internal.write;for(var q in E)F("/I"+(T=E[q]).index,T.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return l.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(T){return typeof e["process"+T.toUpperCase()]=="function"},f=function(T){return Oa(T)==="object"&&T.nodeType===1},p=function(T,E){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var F=""+T.getAttribute("src");if(F.indexOf("data:image/")===0)return mx(unescape(F).split("base64,").pop());var q=e.loadFile(F,!0);if(q!==void 0)return q}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var H;switch(E){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return mx(T.toDataURL(H,1).split("base64,").pop())}},m=function(T){var E=this.internal.collections.addImage_images;if(E){for(var F in E)if(T===E[F].alias)return E[F]}},b=function(T,E,F){return T||E||(T=-96,E=-96),T<0&&(T=-1*F.width*72/T/this.internal.scaleFactor),E<0&&(E=-1*F.height*72/E/this.internal.scaleFactor),T===0&&(T=E*F.width/F.height),E===0&&(E=T*F.height/F.width),[T,E]},v=function(T,E,F,q,H,Q){var J=b.call(this,F,q,H),re=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,ee=c.call(this);if(F=J[0],q=J[1],ee[H.index]=H,Q){Q*=Math.PI/180;var W=Math.cos(Q),O=Math.sin(Q),z=function(U){return U.toFixed(4)},V=[z(W),z(O),z(-1*O),z(W),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,re(T),X(E+q),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([re(F),"0","0",re(q),"0","0","cm"].join(" "))):this.internal.write([re(F),"0","0",re(q),re(T),X(E+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(T){var E,F,q=0;if(typeof T=="string")for(F=T.length,E=0;E<F;E++)q=(q<<5)-q+T.charCodeAt(E),q|=0;else if(A(T))for(F=T.byteLength/2,E=0;E<F;E++)q=(q<<5)-q+T[E],q|=0;return q},j=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var E=!0;return T.length===0&&(E=!1),T.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(E=!1),E},N=e.__addimage__.extractImageFromDataUrl=function(T){var E=(T=T||"").split("base64,"),F=null;if(E.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(q)&&(F={mimeType:q[1],charset:q[2],data:E[1]})}return F},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return S()&&T instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(T){return S()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(T){for(var E=T.length,F=new Uint8Array(E),q=0;q<E;q++)F[q]=T.charCodeAt(q);return F},P=e.__addimage__.arrayBufferToBinaryString=function(T){for(var E="",F=A(T)?T:new Uint8Array(T),q=0;q<F.length;q+=8192)E+=String.fromCharCode.apply(null,F.subarray(q,q+8192));return E};e.addImage=function(){var T,E,F,q,H,Q,J,re,X;if(typeof arguments[1]=="number"?(E=t,F=arguments[1],q=arguments[2],H=arguments[3],Q=arguments[4],J=arguments[5],re=arguments[6],X=arguments[7]):(E=arguments[1],F=arguments[2],q=arguments[3],H=arguments[4],Q=arguments[5],J=arguments[6],re=arguments[7],X=arguments[8]),Oa(T=arguments[0])==="object"&&!f(T)&&"imageData"in T){var ee=T;T=ee.imageData,E=ee.format||E||t,F=ee.x||F||0,q=ee.y||q||0,H=ee.w||ee.width||H,Q=ee.h||ee.height||Q,J=ee.alias||J,re=ee.compression||re,X=ee.rotation||ee.angle||X}var W=this.internal.getFilters();if(re===void 0&&W.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(F)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=I.call(this,T,E,J,re);return v.call(this,F,q,H,Q,O,X),this};var I=function(T,E,F,q){var H,Q,J;if(typeof T=="string"&&a(T)===t){T=unescape(T);var re=B(T,!1);(re!==""||(re=e.loadFile(T,!0))!==void 0)&&(T=re)}if(f(T)&&(T=p(T,E)),E=a(T,E),!u(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((J=F)==null||J.length===0)&&(F=(function(X){return typeof X=="string"||A(X)?w(X):A(X.data)?w(X.data):null})(T)),(H=m.call(this,F))||(S()&&(T instanceof Uint8Array||E==="RGBA"||(Q=T,T=_(T))),H=this["process"+E.toUpperCase()](T,d.call(this),F,(function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:y.NONE})(q),Q)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},B=e.__addimage__.convertBase64ToBinaryString=function(T,E){var F;E=typeof E!="boolean"||E;var q,H="";if(typeof T=="string"){q=(F=N(T))!==null?F.data:T;try{H=mx(q)}catch(Q){if(E)throw j(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};e.getImageProperties=function(T){var E,F,q="";if(f(T)&&(T=p(T)),typeof T=="string"&&a(T)===t&&((q=B(T,!1))===""&&(q=e.loadFile(T)||""),T=q),F=a(T),!u(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!S()||T instanceof Uint8Array||(T=_(T)),!(E=this["process"+F.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=F,E}})(dn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};dn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((a=d[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){a=d[p];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),w=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(y(a.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(y(w))+") >>",v.content=i;var j=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+j,a.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var N=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(b(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var S=this.annotations._nameMap[a.options.name];a.options.pageNumber=S.page,a.options.top=S.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var A=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+A+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(dn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var g=0,y=r,w="",j=0;for(g=0;g<v.length;g+=1)y[v.charCodeAt(g)]!==void 0?(j++,typeof(y=y[v.charCodeAt(g)])=="number"&&(w+=String.fromCharCode(y),y=r,j=0),g===v.length-1&&(y=r,w+=v.charAt(g-(j-1)),g-=j-1,j=0)):(y=r,w+=v.charAt(g-j),g-=j,j=0);return w};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(v,g,y){return o(v)?i(v)===!1?-1:!d(v)||!o(g)&&!o(y)||!o(y)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:u(v)&&o(g)&&!l(g)&&o(y)&&d(y)?3:l(v)||!o(y)?1:2:-1},m=function(v){var g=0,y=0,w=0,j="",N="",S="",A=(v=v||"").split("\\s+"),_=[];for(g=0;g<A.length;g+=1){for(_.push(""),y=0;y<A[g].length;y+=1)j=A[g][y],N=A[g][y-1],S=A[g][y+1],o(j)?(w=p(j,N,S),_[g]+=w!==-1?String.fromCharCode(t[j.charCodeAt(0)][w]):j):_[g]+=j;_[g]=f(_[g])}return _.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(g)){var w=0;for(y=[],w=0;w<g.length;w+=1)Array.isArray(g[w])?y.push([m(g[w][0]),g[w][1],g[w][2]]):y.push([m(g[w])]);v=y}else v=m(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",b])})(dn.API),dn.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform",e.variant)==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(dn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(v){b=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,m=0,b=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(j,N){return j.concat(g.splitTextToSize(N,y))}),[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(v=this.getStringUnitWidth(c[w],{font:f})*u)&&(m=v);return m!==0&&(b=c.length),{w:m/=p,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,f,p){if(a.call(this),!u)throw new Error("No data for PDF table.");var m,b,v,g,y=[],w=[],j=[],N={},S={},A=[],_=[],P=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,B=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,T=p.margins||Object.assign({width:this.getPageWidth()},t),E=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",q=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=q,this.setFontSize(B),f==null)w=y=Object.keys(u[0]),j=y.map((function(){return"left"}));else if(Array.isArray(f)&&Oa(f[0])==="object")for(y=f.map((function(ee){return ee.name})),w=f.map((function(ee){return ee.prompt||ee.name||""})),j=f.map((function(ee){return ee.align||"left"})),m=0;m<f.length;m+=1)S[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,j=y.map((function(){return"left"})));if(P||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(N[g=y[m]]=u.map((function(ee){return ee[g]})),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=N[g],this.setFont(void 0,"normal"),v=0;v<b.length;v+=1)A.push(this.getTextDimensions(b[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,A)+E+E,A=[]}if(I){var H={};for(m=0;m<y.length;m+=1)H[y[m]]={},H[y[m]].text=w[m],H[y[m]].align=j[m];var Q=l.call(this,H,S);_=y.map((function(ee){return new i(c,d,S[ee],Q,H[ee].text,void 0,H[ee].align)})),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var J=f.reduce((function(ee,W){return ee[W.name]=W.align,ee}),{});for(m=0;m<u.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:u[m]},this);var re=l.call(this,u[m],S);for(v=0;v<y.length;v+=1){var X=u[m][y[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:v,data:X},this),o.call(this,new i(c,d,S[y[v]],re,X,m+2,J[y[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map((function(m){var b=c[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,d[m]-u-u)}),this).map((function(m){return this.getLineHeightFactor()*m.length*f/p+u+u}),this).reduce((function(m,b){return Math.max(m,b)}),0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}})(dn.API);var J9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Z9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Wk=Q9(Z9),eB=[100,200,300,400,500,600,700,800,900],V1e=Q9(eB);function Vk(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return J9[i=i||"normal"]?i:"normal"})(e.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof Wk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function aD(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var G1e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function iD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function K1e(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},G1e,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=Vk(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+iD(i)+"' and default family '"+a+"'.");if(o=(function(c,d){if(d[c])return d[c];var u=Wk[c],f=u<=Wk.normal?-1:1,p=aD(d,Z9,u,f);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p})(i.stretch,o),o=(function(c,d){if(d[c])return d[c];for(var u=J9[c],f=0;f<u.length;++f)if(d[u[f]])return d[u[f]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=V1e[c],f=aD(d,eB,u,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+iD(i)+"'.");return o}function oD(e){return e.trimLeft()}function X1e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Y1e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var $v,lD,cD,Bj=["times"];(function(e){var t,r,a,s,i,o,l,c,d,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=O;Object.defineProperty(this,"pdf",{get:function(){return z}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(le){V=!!le}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(le){U=!!le}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(le){isNaN(le)||(K=le)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(le){isNaN(le)||(se=le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(le){var te;typeof le=="number"?te=[le,le,le,le]:((te=new Array(4))[0]=le[0],te[1]=le.length>=2?le[1]:te[0],te[2]=le.length>=3?le[2]:te[0],te[3]=le.length>=4?le[3]:te[1]),d.margin=te}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(le){xe=le}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(le){ie=le}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(le){ue=le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(le){le instanceof u&&(d=le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(le){d.path=le}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(le){Be=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var te;te=p(le),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var te=p(le);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var me=null;function $e(le,te){if(me===null){var Te=(function(we){var Ie=[];return Object.keys(we).forEach((function(he){we[he].forEach((function(de){var Ce=null;switch(de){case"bold":Ce={family:he,weight:"bold"};break;case"italic":Ce={family:he,style:"italic"};break;case"bolditalic":Ce={family:he,weight:"bold",style:"italic"};break;case"":case"normal":Ce={family:he}}Ce!==null&&(Ce.ref={name:he,style:de},Ie.push(Ce))}))})),Ie})(le.getFontList());me=(function(we){for(var Ie={},he=0;he<we.length;++he){var de=Vk(we[he]),Ce=de.family,Ve=de.stretch,ge=de.style,fe=de.weight;Ie[Ce]=Ie[Ce]||{},Ie[Ce][Ve]=Ie[Ce][Ve]||{},Ie[Ce][Ve][ge]=Ie[Ce][Ve][ge]||{},Ie[Ce][Ve][ge][fe]=de}return Ie})(Te.concat(te))}return me}var Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(le){me=null,Oe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var te;if(this.ctx.font=le,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var Te=te[1],we=(te[2],te[3]),Ie=te[4],he=(te[5],te[6]),de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ie)[2];Ie=Math.floor(de==="px"?parseFloat(Ie)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(Ie)*this.pdf.getFontSize():parseFloat(Ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ie);var Ce=(function(Fe){var qe,et,Kt=[],qt=Fe.trim();if(qt==="")return Bj;if(qt in sD)return[sD[qt]];for(;qt!=="";){switch(et=null,qe=(qt=oD(qt)).charAt(0)){case'"':case"'":et=X1e(qt.substring(1),qe);break;default:et=Y1e(qt)}if(et===null||(Kt.push(et[0]),(qt=oD(et[1]))!==""&&qt.charAt(0)!==","))return Bj;qt=qt.replace(/^,/,"")}return Kt})(he);if(this.fontFaces){var Ve=K1e($e(this.pdf,this.fontFaces),Ce.map((function(Fe){return{family:Fe,stretch:"normal",weight:we,style:Te}})));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var ge="";(we==="bold"||parseInt(we,10)>=700||Te==="bold")&&(ge="bold"),Te==="italic"&&(ge+="italic"),ge.length===0&&(ge="normal");for(var fe="",_e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ue=0;Ue<Ce.length;Ue++){if(this.pdf.internal.getFont(Ce[Ue],ge,{noFallback:!0,disableWarning:!0})!==void 0){fe=Ce[Ue];break}if(ge==="bolditalic"&&this.pdf.internal.getFont(Ce[Ue],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fe=Ce[Ue],ge="bold";else if(this.pdf.internal.getFont(Ce[Ue],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fe=Ce[Ue],ge="normal";break}}if(fe===""){for(var ke=0;ke<Ce.length;ke++)if(_e[Ce[ke]]){fe=_e[Ce[ke]];break}}fe=fe===""?"Times":fe,this.pdf.setFont(fe,ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,z){if(isNaN(O)||isNaN(z))throw Ja.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(O,z)},f.prototype.closePath=function(){var O=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Oa(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){O=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,z){if(isNaN(O)||isNaN(z))throw Ja.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,z,V,U){if(isNaN(V)||isNaN(U)||isNaN(O)||isNaN(z))throw Ja.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(V,U)),se=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"qct",x1:se.x,y1:se.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},f.prototype.bezierCurveTo=function(O,z,V,U,K,se){if(isNaN(K)||isNaN(se)||isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U))throw Ja.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(K,se)),ie=this.ctx.transform.applyToPoint(new o(O,z)),ue=this.ctx.transform.applyToPoint(new o(V,U));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:ue.x,y2:ue.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},f.prototype.arc=function(O,z,V,U,K,se){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U)||isNaN(K))throw Ja.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(O,z));O=xe.x,z=xe.y;var ie=this.ctx.transform.applyToPoint(new o(0,V)),ue=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(ie.x-ue.x,2)+Math.pow(ie.y-ue.y,2))}Math.abs(K-U)>=2*Math.PI&&(U=0,K=2*Math.PI),this.path.push({type:"arc",x:O,y:z,radius:V,startAngle:U,endAngle:K,counterclockwise:se})},f.prototype.arcTo=function(O,z,V,U,K){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,z,V,U){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U))throw Ja.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,z),this.lineTo(O+V,z),this.lineTo(O+V,z+U),this.lineTo(O,z+U),this.lineTo(O,z),this.lineTo(O+V,z),this.lineTo(O,z)},f.prototype.fillRect=function(O,z,V,U){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U))throw Ja.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,z,V,U),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},f.prototype.strokeRect=function(O,z,V,U){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U))throw Ja.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,z,V,U),this.stroke())},f.prototype.clearRect=function(O,z,V,U){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U))throw Ja.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,z,V,U))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(z),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(O){var z,V,U,K;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))z=0,V=0,U=0,K=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(se!==null)z=parseInt(se[1]),V=parseInt(se[2]),U=parseInt(se[3]),K=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)z=parseInt(se[1]),V=parseInt(se[2]),U=parseInt(se[3]),K=parseFloat(se[4]);else{if(K=1,typeof O=="string"&&O.charAt(0)!=="#"){var xe=new W9(O);O=xe.ok?xe.toHex():"#000000"}O.length===4?(z=O.substring(1,2),z+=z,V=O.substring(2,3),V+=V,U=O.substring(3,4),U+=U):(z=O.substring(1,3),V=O.substring(3,5),U=O.substring(5,7)),z=parseInt(z,16),V=parseInt(V,16),U=parseInt(U,16)}}return{r:z,g:V,b:U,a:K,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,z,V,U){if(isNaN(z)||isNaN(V)||typeof O!="string")throw Ja.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!m.call(this)){var K=re(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;E.call(this,{text:O,x:z,y:V,scale:se,angle:K,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(O,z,V,U){if(isNaN(z)||isNaN(V)||typeof O!="string")throw Ja.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){U=isNaN(U)?void 0:U;var K=re(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;E.call(this,{text:O,x:z,y:V,scale:se,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Ja.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,V=this.pdf.internal.scaleFactor,U=z.internal.getFontSize(),K=z.getStringUnitWidth(O)*U/z.internal.scaleFactor,se=function(xe){var ie=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new se({width:K*=Math.round(96*V/72*1e4)/1e4})},f.prototype.scale=function(O,z){if(isNaN(O)||isNaN(z))throw Ja.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(O,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.rotate=function(O){if(isNaN(O))throw Ja.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.translate=function(O,z){if(isNaN(O)||isNaN(z))throw Ja.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,O,z);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.transform=function(O,z,V,U,K,se){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(U)||isNaN(K)||isNaN(se))throw Ja.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(O,z,V,U,K,se);this.ctx.transform=this.ctx.transform.multiply(xe)},f.prototype.setTransform=function(O,z,V,U,K,se){O=isNaN(O)?1:O,z=isNaN(z)?0:z,V=isNaN(V)?0:V,U=isNaN(U)?1:U,K=isNaN(K)?0:K,se=isNaN(se)?0:se,this.ctx.transform=new c(O,z,V,U,K,se)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,z,V,U,K,se,xe,ie,ue){var Be=this.pdf.getImageProperties(O),me=1,$e=1,Oe=1,le=1;U!==void 0&&ie!==void 0&&(Oe=ie/U,le=ue/K,me=Be.width/U*ie/U,$e=Be.height/K*ue/K),se===void 0&&(se=z,xe=V,z=0,V=0),U!==void 0&&ie===void 0&&(ie=U,ue=K),U===void 0&&ie===void 0&&(ie=Be.width,ue=Be.height);for(var te,Te=this.ctx.transform.decompose(),we=re(Te.rotate.shx),Ie=new c,he=(Ie=(Ie=(Ie=Ie.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new l(se-z*Oe,xe-V*le,U*me,K*$e)),de=g.call(this,he),Ce=[],Ve=0;Ve<de.length;Ve+=1)Ce.indexOf(de[Ve])===-1&&Ce.push(de[Ve]);if(j(Ce),this.autoPaging)for(var ge=Ce[0],fe=Ce[Ce.length-1],_e=ge;_e<fe+1;_e++){this.pdf.setPage(_e);var Ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ke=_e===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=_e===1?0:Fe+(_e-2)*qe;if(this.ctx.clip_path.length!==0){var Kt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(te,this.posX+this.margin[3],-et+ke+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Kt}var qt=JSON.parse(JSON.stringify(he));qt=w([qt],this.posX+this.margin[3],-et+ke+this.ctx.prevPageLastElemOffset)[0];var vr=(_e>ge||_e<fe)&&v.call(this);vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,qe,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,we),vr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",he.x,he.y,he.w,he.h,null,null,we)};var g=function(O,z,V){var U=[];z=z||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+K)/V)+1);break;case"arc":U.push(Math.floor((O.y+K-O.radius)/V)+1),U.push(Math.floor((O.y+K+O.radius)/V)+1);break;case"qct":var se=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((se.y+K)/V)+1),U.push(Math.floor((se.y+se.h+K)/V)+1);break;case"bct":var xe=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((xe.y+K)/V)+1),U.push(Math.floor((xe.y+xe.h+K)/V)+1);break;case"rect":U.push(Math.floor((O.y+K)/V)+1),U.push(Math.floor((O.y+O.h+K)/V)+1)}for(var ie=0;ie<U.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<U[ie];)y.call(this);return U},y=function(){var O=this.fillStyle,z=this.strokeStyle,V=this.font,U=this.lineCap,K=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=z,this.font=V,this.lineCap=U,this.lineWidth=K,this.lineJoin=se},w=function(O,z,V){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=z,O[U].y2+=V;case"qct":O[U].x1+=z,O[U].y1+=V;default:O[U].x+=z,O[U].y+=V}return O},j=function(O){return O.sort((function(z,V){return z-V}))},N=function(O,z){for(var V,U,K=this.fillStyle,se=this.strokeStyle,xe=this.lineCap,ie=this.lineWidth,ue=Math.abs(ie*this.ctx.transform.scaleX),Be=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),$e=JSON.parse(JSON.stringify(this.path)),Oe=[],le=0;le<$e.length;le++)if($e[le].x!==void 0)for(var te=g.call(this,$e[le]),Te=0;Te<te.length;Te+=1)Oe.indexOf(te[Te])===-1&&Oe.push(te[Te]);for(var we=0;we<Oe.length;we++)for(;this.pdf.internal.getNumberOfPages()<Oe[we];)y.call(this);if(j(Oe),this.autoPaging)for(var Ie=Oe[0],he=Oe[Oe.length-1],de=Ie;de<he+1;de++){this.pdf.setPage(de),this.fillStyle=K,this.strokeStyle=se,this.lineCap=xe,this.lineWidth=ue,this.lineJoin=Be;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=de===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=de===1?0:ge+(de-2)*fe;if(this.ctx.clip_path.length!==0){var Ue=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(V,this.posX+this.margin[3],-_e+Ve+this.ctx.prevPageLastElemOffset),S.call(this,O,!0),this.path=Ue}if(U=JSON.parse(JSON.stringify(me)),this.path=w(U,this.posX+this.margin[3],-_e+Ve+this.ctx.prevPageLastElemOffset),z===!1||de===0){var ke=(de>Ie||de<he)&&v.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,fe,null).clip().discardPath()),S.call(this,O,z),ke&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=ue,S.call(this,O,z),this.lineWidth=ie;this.path=me},S=function(O,z){if((O!=="stroke"||z||!b.call(this))&&(O==="stroke"||z||!m.call(this))){for(var V,U,K=[],se=this.path,xe=0;xe<se.length;xe++){var ie=se[xe];switch(ie.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:ie,deltas:[],abs:[]});break;case"lt":var ue=K.length;if(se[xe-1]&&!isNaN(se[xe-1].x)&&(V=[ie.x-se[xe-1].x,ie.y-se[xe-1].y],ue>0)){for(;ue>=0;ue--)if(K[ue-1].close!==!0&&K[ue-1].begin!==!0){K[ue-1].deltas.push(V),K[ue-1].abs.push(ie);break}}break;case"bct":V=[ie.x1-se[xe-1].x,ie.y1-se[xe-1].y,ie.x2-se[xe-1].x,ie.y2-se[xe-1].y,ie.x-se[xe-1].x,ie.y-se[xe-1].y],K[K.length-1].deltas.push(V);break;case"qct":var Be=se[xe-1].x+2/3*(ie.x1-se[xe-1].x),me=se[xe-1].y+2/3*(ie.y1-se[xe-1].y),$e=ie.x+2/3*(ie.x1-ie.x),Oe=ie.y+2/3*(ie.y1-ie.y),le=ie.x,te=ie.y;V=[Be-se[xe-1].x,me-se[xe-1].y,$e-se[xe-1].x,Oe-se[xe-1].y,le-se[xe-1].x,te-se[xe-1].y],K[K.length-1].deltas.push(V);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(ie)}}U=z?null:O==="stroke"?"stroke":"fill";for(var Te=!1,we=0;we<K.length;we++)if(K[we].arc)for(var Ie=K[we].abs,he=0;he<Ie.length;he++){var de=Ie[he];de.type==="arc"?P.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,z,!Te):F.call(this,de.x,de.y),Te=!0}else if(K[we].close===!0)this.pdf.internal.out("h"),Te=!1;else if(K[we].begin!==!0){var Ce=K[we].start.x,Ve=K[we].start.y;q.call(this,K[we].deltas,Ce,Ve),Te=!0}U&&I.call(this,U),z&&B.call(this)}},A=function(O){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-V;case"top":return O+z-V;case"hanging":return O+z-2*V;case"middle":return O+z/2-V;case"ideographic":return O;default:return O}},_=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(z,V){this.colorStops.push([z,V])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(O,z,V,U,K,se,xe,ie,ue){for(var Be=Q.call(this,V,U,K,se),me=0;me<Be.length;me++){var $e=Be[me];me===0&&(ue?T.call(this,$e.x1+O,$e.y1+z):F.call(this,$e.x1+O,$e.y1+z)),H.call(this,O,z,$e.x2,$e.y2,$e.x3,$e.y3,$e.x4,$e.y4)}ie?B.call(this):I.call(this,xe)},I=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(O,z){this.pdf.internal.out(r(O)+" "+a(z)+" m")},E=function(O){var z;switch(O.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var V=this.pdf.getTextDimensions(O.text),U=A.call(this,O.y),K=_.call(this,U)-V.h,se=this.ctx.transform.applyToPoint(new o(O.x,U)),xe=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var ue,Be,me,$e=this.ctx.transform.applyToRectangle(new l(O.x,U,V.w,V.h)),Oe=ie.applyToRectangle(new l(O.x,K,V.w,V.h)),le=g.call(this,Oe),te=[],Te=0;Te<le.length;Te+=1)te.indexOf(le[Te])===-1&&te.push(le[Te]);if(j(te),this.autoPaging)for(var we=te[0],Ie=te[te.length-1],he=we;he<Ie+1;he++){this.pdf.setPage(he);var de=he===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],ge=Ve-this.margin[0],fe=this.pdf.internal.pageSize.width-this.margin[1],_e=fe-this.margin[3],Ue=he===1?0:Ce+(he-2)*ge;if(this.ctx.clip_path.length!==0){var ke=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ue,this.posX+this.margin[3],-1*Ue+de),S.call(this,"fill",!0),this.path=ke}var Fe=w([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Ue+de+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*O.scale),me=this.lineWidth,this.lineWidth=me*O.scale);var qe=this.autoPaging!=="text";if(qe||Fe.y+Fe.h<=Ve){if(qe||Fe.y>=de&&Fe.x<=fe){var et=qe?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||fe-Fe.x)[0],Kt=w([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-Ue+de+this.ctx.prevPageLastElemOffset)[0],qt=qe&&(he>we||he<Ie)&&v.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,ge,null).clip().discardPath()),this.pdf.text(et,Kt.x,Kt.y,{angle:O.angle,align:z,renderingMode:O.renderingMode}),qt&&this.pdf.restoreGraphicsState()}}else Fe.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Fe.y);O.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=me)}else O.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*O.scale),me=this.lineWidth,this.lineWidth=me*O.scale),this.pdf.text(O.text,se.x+this.posX,se.y+this.posY,{angle:O.angle,align:z,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=me)},F=function(O,z,V,U){V=V||0,U=U||0,this.pdf.internal.out(r(O+V)+" "+a(z+U)+" l")},q=function(O,z,V){return this.pdf.lines(O,z,V,null,null)},H=function(O,z,V,U,K,se,xe,ie){this.pdf.internal.out([t(s(V+O)),t(i(U+z)),t(s(K+O)),t(i(se+z)),t(s(xe+O)),t(i(ie+z)),"c"].join(" "))},Q=function(O,z,V,U){for(var K=2*Math.PI,se=Math.PI/2;z>V;)z-=K;var xe=Math.abs(V-z);xe<K&&U&&(xe=K-xe);for(var ie=[],ue=U?-1:1,Be=z;xe>1e-5;){var me=Be+ue*Math.min(xe,se);ie.push(J.call(this,O,Be,me)),xe-=Math.abs(me-Be),Be=me}return ie},J=function(O,z,V){var U=(V-z)/2,K=O*Math.cos(U),se=O*Math.sin(U),xe=K,ie=-se,ue=xe*xe+ie*ie,Be=ue+xe*K+ie*se,me=4/3*(Math.sqrt(2*ue*Be)-Be)/(xe*se-ie*K),$e=xe-me*ie,Oe=ie+me*xe,le=$e,te=-Oe,Te=U+z,we=Math.cos(Te),Ie=Math.sin(Te);return{x1:O*Math.cos(z),y1:O*Math.sin(z),x2:$e*we-Oe*Ie,y2:$e*Ie+Oe*we,x3:le*we-te*Ie,y3:le*Ie+te*we,x4:O*Math.cos(V),y4:O*Math.sin(V)}},re=function(O){return 180*O/Math.PI},X=function(O,z,V,U,K,se){var xe=O+.5*(V-O),ie=z+.5*(U-z),ue=K+.5*(V-K),Be=se+.5*(U-se),me=Math.min(O,K,xe,ue),$e=Math.max(O,K,xe,ue),Oe=Math.min(z,se,ie,Be),le=Math.max(z,se,ie,Be);return new l(me,Oe,$e-me,le-Oe)},ee=function(O,z,V,U,K,se,xe,ie){var ue,Be,me,$e,Oe,le,te,Te,we,Ie,he,de,Ce,Ve,ge=V-O,fe=U-z,_e=K-V,Ue=se-U,ke=xe-K,Fe=ie-se;for(Be=0;Be<41;Be++)we=(te=(me=O+(ue=Be/40)*ge)+ue*((Oe=V+ue*_e)-me))+ue*(Oe+ue*(K+ue*ke-Oe)-te),Ie=(Te=($e=z+ue*fe)+ue*((le=U+ue*Ue)-$e))+ue*(le+ue*(se+ue*Fe-le)-Te),Be==0?(he=we,de=Ie,Ce=we,Ve=Ie):(he=Math.min(he,we),de=Math.min(de,Ie),Ce=Math.max(Ce,we),Ve=Math.max(Ve,Ie));return new l(Math.round(he),Math.round(de),Math.round(Ce-he),Math.round(Ve-de))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,z,V=(O=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:z}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(dn.API),(function(e){var t=function(i){var o,l,c,d,u,f,p,m,b,v;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(u=((u=((u=((u=(u-(v=u%85))/85)-(b=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)%85,l.push(f+33,p+33,m+33,b+33,v+33)):l.push(122);return(function(g,y){for(var w=y;w>0;w--)g.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,f=String,p="length",m=255,b="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[v](i[p]%5||5))[p];u>d;d+=5)l=52200625*(i[b](d)-33)+614125*(i[b](d+1)-33)+7225*(i[b](d+2)-33)+85*(i[b](d+3)-33)+(i[b](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return(function(y,w){for(var j=w;j>0;j--)y.pop()})(c,o[p]),f.fromCharCode.apply(f,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Uk(o)).reduce((function(c,d){return c+String.fromCharCode(d)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)})).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(dn.API),(function(e){e.loadFile=function(t,r,a){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var f=new XMLHttpRequest,p=0,m=function(b){var v=b.length,g=[],y=String.fromCharCode;for(p=0;p<v;p+=1)g.push(y(255&b.charCodeAt(p)));return g.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(m(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return m(f.responseText)})(s,i,o)}catch{}return l})(t,r,a)},e.loadImageFile=e.loadFile})(dn.API),(function(e){function t(){return(un.html2canvas?Promise.resolve(un.html2canvas):a1(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(un.DOMPurify?Promise.resolve(un.DOMPurify):a1(()=>import("./purify.es-BpVZ_uCt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var a=function(o){var l=Oa(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",(function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft}),!0)),f})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var m=d[p],b=m.src.find((function(v){return v.format==="truetype"}));b&&c.addFont(b.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then((function(){(o=o||dn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,(function(f){return c.updateProgress(null,d),f})).then(d,u).then((function(f){return c.updateProgress(1),f}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,dn.getPageSize=function(o,l,c){if(Oa(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,f=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,b=0,v=0;if(p.hasOwnProperty(f))b=p[f][1]/u,v=p[f][0]/u;else try{b=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>b&&(m=v,v=b,b=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>v&&(m=v,v=b,b=m)}return{width:v,height:b,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Vk):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(dn.API),dn.API.addJS=function(e){return cD=e,this.internal.events.subscribe("postPutResources",(function(){$v=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($v+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cD+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){$v!==void 0&&lD!==void 0&&this.internal.out("/Names <</JavaScript "+$v+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var f=r.internal.newObject();u.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])})(dn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(f){for(var p,m=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,v={width:0,height:0,numcomponents:1},g=4;g<b;g+=2){if(g+=m,t.indexOf(f.charCodeAt(g+1))!==-1){p=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),v={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:p,numcomponents:f.charCodeAt(g+9)};break}m=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return u}})(dn.API);var lm,zv,dD,uD,fD,Q1e=(function(){var e,t,r;function a(i){var o,l,c,d,u,f,p,m,b,v,g,y,w,j;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),b=(function(){var N,S;for(S=[],N=0;N<4;++N)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*u/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),i=f?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(w=0;0<=v?w<v:w>v;0<=v?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(g=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,g.slice(0,p)),this.text[m]=String.fromCharCode.apply(String,g.slice(p+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,p,m,b){var v,g,y,w,j,N,S,A,_,P,I,B,T,E,F,q,H,Q,J,re,X,ee=Math.ceil((d.width-f)/m),W=Math.ceil((d.height-p)/b),O=d.width==ee&&d.height==W;for(E=o*ee,B=O?l:new Uint8Array(E*W),N=i.length,T=0,g=0;T<W&&c<N;){switch(i[c++]){case 0:for(w=H=0;H<E;w=H+=1)B[g++]=i[c++];break;case 1:for(w=Q=0;Q<E;w=Q+=1)v=i[c++],j=w<o?0:B[g-o],B[g++]=(v+j)%256;break;case 2:for(w=J=0;J<E;w=J+=1)v=i[c++],y=(w-w%o)/o,F=T&&B[(T-1)*E+y*o+w%o],B[g++]=(F+v)%256;break;case 3:for(w=re=0;re<E;w=re+=1)v=i[c++],y=(w-w%o)/o,j=w<o?0:B[g-o],F=T&&B[(T-1)*E+y*o+w%o],B[g++]=(v+Math.floor((j+F)/2))%256;break;case 4:for(w=X=0;X<E;w=X+=1)v=i[c++],y=(w-w%o)/o,j=w<o?0:B[g-o],T===0?F=q=0:(F=B[(T-1)*E+y*o+w%o],q=y&&B[(T-1)*E+(y-1)*o+w%o]),S=j+F-q,A=Math.abs(S-j),P=Math.abs(S-F),I=Math.abs(S-q),_=A<=P&&A<=I?j:P<=I?F:q,B[g++]=(v+_)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!O){var z=((p+T*b)*d.width+f)*o,V=T*E;for(w=0;w<ee;w+=1){for(var U=0;U<o;U+=1)l[z++]=B[V++];z+=(m-1)*o}}T++}}return i=E1e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,f,p,m;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=f=0,p=l.length;f<p;o=f+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=u[i++])!=null?m:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,f,p,m,b,v,g,y;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),b=(d=i.data||i).length,f=v||o,u=p=0,c===1)for(;u<b;)m=v?4*o[u/4]:p,g=f[m++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?f[m++]:255,p=m;else for(;u<b;)m=v?4*o[u/4]:p,d[u++]=f[m++],d[u++]=f[m++],d[u++]=f[m++],d[u++]=l?f[m++]:255,p=m},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(un)==="[object Window]"){try{t=un.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,f,p,m;if(this.animation){for(m=[],l=u=0,f=(p=this.animation.frames).length;u<f;l=++u)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,f,p=this;return l=0,f=this.animation,d=f.numFrames,c=f.frames,u=f.numPlays,(o=function(){var m,b;if(m=l++%d,b=c[m],p.renderFrame(i,m),d>1&&l/d<u)return p.animation._timeout=setTimeout(o,b.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a})();function J1e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],f=0,p=null,m=0,b=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],(1&v)==0&&(p=null),m=v>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,N=e[t++],S=N>>6&1,A=1<<(7&N)+1,_=l,P=c,I=!1;N>>7&&(I=!0,_=t,P=A,t+=3*A);var B=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}u.push({x:g,y,width:w,height:j,has_local_palette:I,palette_offset:_,palette_size:P,data_offset:B,data_length:t-B,transparent_index:p,interlaced:!!S,delay:f,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,F){var q=this.frameInfo(E),H=q.width*q.height,Q=new Uint8Array(H);hD(e,q.data_offset,Q,H);var J=q.palette_offset,re=q.transparent_index;re===null&&(re=256);var X=q.width,ee=r-X,W=X,O=4*(q.y*r+q.x),z=4*((q.y+q.height)*r+q.x),V=O,U=4*ee;q.interlaced===!0&&(U+=4*r*7);for(var K=8,se=0,xe=Q.length;se<xe;++se){var ie=Q[se];if(W===0&&(W=X,(V+=U)>=z&&(U=4*ee+4*r*(K-1),V=O+(X+ee)*(K<<1),K>>=1)),ie===re)V+=4;else{var ue=e[J+3*ie],Be=e[J+3*ie+1],me=e[J+3*ie+2];F[V++]=me,F[V++]=Be,F[V++]=ue,F[V++]=255}--W}},this.decodeAndBlitFrameRGBA=function(E,F){var q=this.frameInfo(E),H=q.width*q.height,Q=new Uint8Array(H);hD(e,q.data_offset,Q,H);var J=q.palette_offset,re=q.transparent_index;re===null&&(re=256);var X=q.width,ee=r-X,W=X,O=4*(q.y*r+q.x),z=4*((q.y+q.height)*r+q.x),V=O,U=4*ee;q.interlaced===!0&&(U+=4*r*7);for(var K=8,se=0,xe=Q.length;se<xe;++se){var ie=Q[se];if(W===0&&(W=X,(V+=U)>=z&&(U=4*ee+4*r*(K-1),V=O+(X+ee)*(K<<1),K>>=1)),ie===re)V+=4;else{var ue=e[J+3*ie],Be=e[J+3*ie+1],me=e[J+3*ie+2];F[V++]=ue,F[V++]=Be,F[V++]=me,F[V++]=255}--W}}}function hD(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,f=0,p=0,m=e[t++],b=new Int32Array(4096),v=null;;){for(;u<16&&m!==0;)f|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<c)break;var g=f&d;if(f>>=c,u-=c,g!==i){if(g===o)break;for(var y=g<l?g:v,w=0,j=y;j>i;)j=b[j]>>8,++w;var N=j;if(p+w+(y!==g?1:0)>a)return void Ja.log("Warning, gif stream longer than expected.");r[p++]=N;var S=p+=w;for(y!==g&&(r[p++]=N),j=y;w--;)j=b[j],r[--S]=255&j,j>>=8;v!==null&&l<4096&&(b[l++]=v<<8|N,l>=d+1&&c<12&&(++c,d=d<<1|1)),v=g}else l=o+1,d=(1<<(c=s+1))-1,v=null}return p!==a&&Ja.log("Warning, gif stream shorter than expected."),r}function Uj(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),p=new Array(65535),m=new Array(64),b=new Array(64),v=[],g=0,y=7,w=new Array(64),j=new Array(64),N=new Array(64),S=new Array(256),A=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(O,z){for(var V=0,U=0,K=new Array,se=1;se<=16;se++){for(var xe=1;xe<=O[se];xe++)K[z[U]]=[],K[z[U]][0]=V,K[z[U]][1]=se,U++,V++;V*=2}return K}function J(O){for(var z=O[0],V=O[1]-1;V>=0;)z&1<<V&&(g|=1<<y),V--,--y<0&&(g==255?(re(255),re(0)):re(g),y=7,g=0)}function re(O){v.push(O)}function X(O){re(O>>8&255),re(255&O)}function ee(O,z,V,U,K){for(var se,xe=K[0],ie=K[240],ue=(function(Ie,he){var de,Ce,Ve,ge,fe,_e,Ue,ke,Fe,qe,et=0;for(Fe=0;Fe<8;++Fe){de=Ie[et],Ce=Ie[et+1],Ve=Ie[et+2],ge=Ie[et+3],fe=Ie[et+4],_e=Ie[et+5],Ue=Ie[et+6];var Kt=de+(ke=Ie[et+7]),qt=de-ke,vr=Ce+Ue,er=Ce-Ue,mr=Ve+_e,Ge=Ve-_e,jt=ge+fe,br=ge-fe,Qt=Kt+jt,Fr=Kt-jt,Mr=vr+mr,rt=vr-mr;Ie[et]=Qt+Mr,Ie[et+4]=Qt-Mr;var At=.707106781*(rt+Fr);Ie[et+2]=Fr+At,Ie[et+6]=Fr-At;var cr=.382683433*((Qt=br+Ge)-(rt=er+qt)),wr=.5411961*Qt+cr,Gr=1.306562965*rt+cr,jr=.707106781*(Mr=Ge+er),qr=qt+jr,tr=qt-jr;Ie[et+5]=tr+wr,Ie[et+3]=tr-wr,Ie[et+1]=qr+Gr,Ie[et+7]=qr-Gr,et+=8}for(et=0,Fe=0;Fe<8;++Fe){de=Ie[et],Ce=Ie[et+8],Ve=Ie[et+16],ge=Ie[et+24],fe=Ie[et+32],_e=Ie[et+40],Ue=Ie[et+48];var Xr=de+(ke=Ie[et+56]),Vr=de-ke,pn=Ce+Ue,Nr=Ce-Ue,Or=Ve+_e,ne=Ve-_e,je=ge+fe,Se=ge-fe,oe=Xr+je,ve=Xr-je,Ae=pn+Or,Ke=pn-Or;Ie[et]=oe+Ae,Ie[et+32]=oe-Ae;var nt=.707106781*(Ke+ve);Ie[et+16]=ve+nt,Ie[et+48]=ve-nt;var Qe=.382683433*((oe=Se+ne)-(Ke=Nr+Vr)),tt=.5411961*oe+Qe,Xe=1.306562965*Ke+Qe,Me=.707106781*(Ae=ne+Nr),it=Vr+Me,bt=Vr-Me;Ie[et+40]=bt+tt,Ie[et+24]=bt-tt,Ie[et+8]=it+Xe,Ie[et+56]=it-Xe,et++}for(Fe=0;Fe<64;++Fe)qe=Ie[Fe]*he[Fe],m[Fe]=qe>0?qe+.5|0:qe-.5|0;return m})(O,z),Be=0;Be<64;++Be)b[_[Be]]=ue[Be];var me=b[0]-V;V=b[0],me==0?J(U[0]):(J(U[p[se=32767+me]]),J(f[se]));for(var $e=63;$e>0&&b[$e]==0;)$e--;if($e==0)return J(xe),V;for(var Oe,le=1;le<=$e;){for(var te=le;b[le]==0&&le<=$e;)++le;var Te=le-te;if(Te>=16){Oe=Te>>4;for(var we=1;we<=Oe;++we)J(ie);Te&=15}se=32767+b[le],J(K[(Te<<4)+p[se]]),J(f[se]),le++}return $e!=63&&J(xe),V}function W(O){O=Math.min(Math.max(O,1),100),i!=O&&((function(z){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var K=o((V[U]*z+50)/100);K=Math.min(Math.max(K,1),255),l[_[U]]=K}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var ie=o((se[xe]*z+50)/100);ie=Math.min(Math.max(ie,1),255),c[_[xe]]=ie}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,me=0;me<8;me++)for(var $e=0;$e<8;$e++)d[Be]=1/(l[_[Be]]*ue[me]*ue[$e]*8),u[Be]=1/(c[_[Be]]*ue[me]*ue[$e]*8),Be++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,z){z&&W(z),v=new Array,g=0,y=7,X(65496),X(65504),X(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),X(1),X(1),re(0),re(0),(function(){X(65499),X(132),re(0);for(var Ce=0;Ce<64;Ce++)re(l[Ce]);re(1);for(var Ve=0;Ve<64;Ve++)re(c[Ve])})(),(function(Ce,Ve){X(65472),X(17),re(8),X(Ve),X(Ce),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(O.width,O.height),(function(){X(65476),X(418),re(0);for(var Ce=0;Ce<16;Ce++)re(P[Ce+1]);for(var Ve=0;Ve<=11;Ve++)re(I[Ve]);re(16);for(var ge=0;ge<16;ge++)re(B[ge+1]);for(var fe=0;fe<=161;fe++)re(T[fe]);re(1);for(var _e=0;_e<16;_e++)re(E[_e+1]);for(var Ue=0;Ue<=11;Ue++)re(F[Ue]);re(17);for(var ke=0;ke<16;ke++)re(q[ke+1]);for(var Fe=0;Fe<=161;Fe++)re(H[Fe])})(),X(65498),X(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var V=0,U=0,K=0;g=0,y=7,this.encode.displayName="_encode_";for(var se,xe,ie,ue,Be,me,$e,Oe,le,te=O.data,Te=O.width,we=O.height,Ie=4*Te,he=0;he<we;){for(se=0;se<Ie;){for(Be=Ie*he+se,$e=-1,Oe=0,le=0;le<64;le++)me=Be+(Oe=le>>3)*Ie+($e=4*(7&le)),he+Oe>=we&&(me-=Ie*(he+1+Oe-we)),se+$e>=Ie&&(me-=se+$e-Ie+4),xe=te[me++],ie=te[me++],ue=te[me++],w[le]=(A[xe]+A[ie+256>>0]+A[ue+512>>0]>>16)-128,j[le]=(A[xe+768>>0]+A[ie+1024>>0]+A[ue+1280>>0]>>16)-128,N[le]=(A[xe+1280>>0]+A[ie+1536>>0]+A[ue+1792>>0]>>16)-128;V=ee(w,d,V,t,a),U=ee(j,u,U,r,s),K=ee(N,u,K,r,s),se+=32}he+=8}if(y>=0){var de=[];de[1]=y+1,de[0]=(1<<y+1)-1,J(de)}return X(65497),new Uint8Array(v)},e=e||50,(function(){for(var O=String.fromCharCode,z=0;z<256;z++)S[z]=O(z)})(),t=Q(P,I),r=Q(E,F),a=Q(B,T),s=Q(q,H),(function(){for(var O=1,z=2,V=1;V<=15;V++){for(var U=O;U<z;U++)p[32767+U]=V,f[32767+U]=[],f[32767+U][1]=V,f[32767+U][0]=U;for(var K=-(z-1);K<=-O;K++)p[32767+K]=V,f[32767+K]=[],f[32767+K][1]=V,f[32767+K][0]=z-1+K;O<<=1,z<<=1}})(),(function(){for(var O=0;O<256;O++)A[O]=19595*O,A[O+256>>0]=38470*O,A[O+512>>0]=7471*O+32768,A[O+768>>0]=-11059*O,A[O+1024>>0]=-21709*O,A[O+1280>>0]=32768*O+8421375,A[O+1536>>0]=-27439*O,A[O+1792>>0]=-5329*O})(),W(e)}function Ud(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mD(e){function t(P){if(!P)throw Error("assert :P")}function r(P,I,B){for(var T=0;4>T;T++)if(P[I+T]!=B.charCodeAt(T))return!0;return!1}function a(P,I,B,T,E){for(var F=0;F<E;F++)P[I+F]=B[T+F]}function s(P,I,B,T){for(var E=0;E<T;E++)P[I+E]=B}function i(P){return new Int32Array(P)}function o(P,I){for(var B=[],T=0;T<P;T++)B.push(new I);return B}function l(P,I){var B=[];return(function T(E,F,q){for(var H=q[F],Q=0;Q<H&&(E.push(q.length>F+1?[]:new I),!(q.length<F+1));Q++)T(E[Q],F+1,q)})(B,0,P),B}var c=function(){var P=this;function I(C,R){for(var Z=1<<R-1>>>0;C&Z;)Z>>>=1;return Z?(C&Z-1)+Z:C}function B(C,R,Z,ce,be){t(!(ce%Z));do C[R+(ce-=Z)]=be;while(0<ce)}function T(C,R,Z,ce,be){if(t(2328>=be),512>=be)var Ee=i(512);else if((Ee=i(be))==null)return 0;return(function(De,Le,Re,ze,st,gt){var vt,mt,Ut=Le,St=1<<Re,dt=i(16),ot=i(16);for(t(st!=0),t(ze!=null),t(De!=null),t(0<Re),mt=0;mt<st;++mt){if(15<ze[mt])return 0;++dt[ze[mt]]}if(dt[0]==st)return 0;for(ot[1]=0,vt=1;15>vt;++vt){if(dt[vt]>1<<vt)return 0;ot[vt+1]=ot[vt]+dt[vt]}for(mt=0;mt<st;++mt)vt=ze[mt],0<ze[mt]&&(gt[ot[vt]++]=mt);if(ot[15]==1)return(ze=new E).g=0,ze.value=gt[0],B(De,Ut,1,St,ze),St;var Et,Ct=-1,Ft=St-1,or=0,rr=1,Wr=1,fr=1<<Re;for(mt=0,vt=1,st=2;vt<=Re;++vt,st<<=1){if(rr+=Wr<<=1,0>(Wr-=dt[vt]))return 0;for(;0<dt[vt];--dt[vt])(ze=new E).g=vt,ze.value=gt[mt++],B(De,Ut+or,st,fr,ze),or=I(or,vt)}for(vt=Re+1,st=2;15>=vt;++vt,st<<=1){if(rr+=Wr<<=1,0>(Wr-=dt[vt]))return 0;for(;0<dt[vt];--dt[vt]){if(ze=new E,(or&Ft)!=Ct){for(Ut+=fr,Et=1<<(Ct=vt)-Re;15>Ct&&!(0>=(Et-=dt[Ct]));)++Ct,Et<<=1;St+=fr=1<<(Et=Ct-Re),De[Le+(Ct=or&Ft)].g=Et+Re,De[Le+Ct].value=Ut-Le-Ct}ze.g=vt-Re,ze.value=gt[mt++],B(De,Ut+(or>>Re),st,fr,ze),or=I(or,vt)}}return rr!=2*ot[15]-1?0:St})(C,R,Z,ce,be,Ee)}function E(){this.value=this.g=0}function F(){this.value=this.g=0}function q(){this.G=o(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(_a,F)}function H(C,R,Z,ce){t(C!=null),t(R!=null),t(2147483648>ce),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=R,C.pa=Z,C.Jd=R,C.Yc=Z+ce,C.Zc=4<=ce?Z+ce-4+1:Z,se(C)}function Q(C,R){for(var Z=0;0<R--;)Z|=ie(C,128)<<R;return Z}function J(C,R){var Z=Q(C,R);return xe(C)?-Z:Z}function re(C,R,Z,ce){var be,Ee=0;for(t(C!=null),t(R!=null),t(4294967288>ce),C.Sb=ce,C.Ra=0,C.u=0,C.h=0,4<ce&&(ce=4),be=0;be<ce;++be)Ee+=R[Z+be]<<8*be;C.Ra=Ee,C.bb=ce,C.oa=R,C.pa=Z}function X(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<rs-8>>>0,++C.bb,C.u-=8;V(C)&&(C.h=1,C.u=0)}function ee(C,R){if(t(0<=R),!C.h&&R<=xl){var Z=z(C)&bo[R];return C.u+=R,X(C),Z}return C.h=1,C.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(C){return C.Ra>>>(C.u&rs-1)>>>0}function V(C){return t(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>rs}function U(C,R){C.u=R,C.h=V(C)}function K(C){C.u>=Oc&&(t(C.u>=Oc),X(C))}function se(C){t(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(t(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function xe(C){return Q(C,1)}function ie(C,R){var Z=C.Ca;0>C.b&&se(C);var ce=C.b,be=Z*R>>>8,Ee=(C.I>>>ce>be)+0;for(Ee?(Z-=be,C.I-=be+1<<ce>>>0):Z=be+1,ce=Z,be=0;256<=ce;)be+=8,ce>>=8;return ce=7^be+ln[ce],C.b-=ce,C.Ca=(Z<<ce)-1,Ee}function ue(C,R,Z){C[R+0]=Z>>24&255,C[R+1]=Z>>16&255,C[R+2]=Z>>8&255,C[R+3]=Z>>0&255}function Be(C,R){return C[R+0]<<0|C[R+1]<<8}function me(C,R){return Be(C,R)|C[R+2]<<16}function $e(C,R){return Be(C,R)|Be(C,R+2)<<16}function Oe(C,R){var Z=1<<R;return t(C!=null),t(0<R),C.X=i(Z),C.X==null?0:(C.Mb=32-R,C.Xa=R,1)}function le(C,R){t(C!=null),t(R!=null),t(C.Xa==R.Xa),a(R.X,0,C.X,0,1<<R.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Te(C,R,Z,ce){t(Z!=null),t(ce!=null);var be=Z[0],Ee=ce[0];return be==0&&(be=(C*Ee+R/2)/R),Ee==0&&(Ee=(R*be+C/2)/C),0>=be||0>=Ee?0:(Z[0]=be,ce[0]=Ee,1)}function we(C,R){return C+(1<<R)-1>>>R}function Ie(C,R){return((4278255360&C)+(4278255360&R)>>>0&4278255360)+((16711935&C)+(16711935&R)>>>0&16711935)>>>0}function he(C,R){P[R]=function(Z,ce,be,Ee,De,Le,Re){var ze;for(ze=0;ze<De;++ze){var st=P[C](Le[Re+ze-1],be,Ee+ze);Le[Re+ze]=Ie(Z[ce+ze],st)}}}function de(){this.ud=this.hd=this.jd=0}function Ce(C,R){return((4278124286&(C^R))>>>1)+(C&R)>>>0}function Ve(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function ge(C,R){return Ve(C+(C-R+.5>>1))}function fe(C,R,Z){return Math.abs(R-Z)-Math.abs(C-Z)}function _e(C,R,Z,ce,be,Ee,De){for(ce=Ee[De-1],Z=0;Z<be;++Z)Ee[De+Z]=ce=Ie(C[R+Z],ce)}function Ue(C,R,Z,ce,be){var Ee;for(Ee=0;Ee<Z;++Ee){var De=C[R+Ee],Le=De>>8&255,Re=16711935&(Re=(Re=16711935&De)+((Le<<16)+Le));ce[be+Ee]=(4278255360&De)+Re>>>0}}function ke(C,R){R.jd=C>>0&255,R.hd=C>>8&255,R.ud=C>>16&255}function Fe(C,R,Z,ce,be,Ee){var De;for(De=0;De<ce;++De){var Le=R[Z+De],Re=Le>>>8,ze=Le,st=255&(st=(st=Le>>>16)+((C.jd<<24>>24)*(Re<<24>>24)>>>5));ze=255&(ze=(ze=ze+((C.hd<<24>>24)*(Re<<24>>24)>>>5))+((C.ud<<24>>24)*(st<<24>>24)>>>5)),be[Ee+De]=(4278255360&Le)+(st<<16)+ze}}function qe(C,R,Z,ce,be){P[R]=function(Ee,De,Le,Re,ze,st,gt,vt,mt){for(Re=gt;Re<vt;++Re)for(gt=0;gt<mt;++gt)ze[st++]=be(Le[ce(Ee[De++])])},P[C]=function(Ee,De,Le,Re,ze,st,gt){var vt=8>>Ee.b,mt=Ee.Ea,Ut=Ee.K[0],St=Ee.w;if(8>vt)for(Ee=(1<<Ee.b)-1,St=(1<<vt)-1;De<Le;++De){var dt,ot=0;for(dt=0;dt<mt;++dt)dt&Ee||(ot=ce(Re[ze++])),st[gt++]=be(Ut[ot&St]),ot>>=vt}else P["VP8LMapColor"+Z](Re,ze,Ut,St,st,gt,De,Le,mt)}}function et(C,R,Z,ce,be){for(Z=R+Z;R<Z;){var Ee=C[R++];ce[be++]=Ee>>16&255,ce[be++]=Ee>>8&255,ce[be++]=Ee>>0&255}}function Kt(C,R,Z,ce,be){for(Z=R+Z;R<Z;){var Ee=C[R++];ce[be++]=Ee>>16&255,ce[be++]=Ee>>8&255,ce[be++]=Ee>>0&255,ce[be++]=Ee>>24&255}}function qt(C,R,Z,ce,be){for(Z=R+Z;R<Z;){var Ee=(De=C[R++])>>16&240|De>>12&15,De=De>>0&240|De>>28&15;ce[be++]=Ee,ce[be++]=De}}function vr(C,R,Z,ce,be){for(Z=R+Z;R<Z;){var Ee=(De=C[R++])>>16&248|De>>13&7,De=De>>5&224|De>>3&31;ce[be++]=Ee,ce[be++]=De}}function er(C,R,Z,ce,be){for(Z=R+Z;R<Z;){var Ee=C[R++];ce[be++]=Ee>>0&255,ce[be++]=Ee>>8&255,ce[be++]=Ee>>16&255}}function mr(C,R,Z,ce,be,Ee){if(Ee==0)for(Z=R+Z;R<Z;)ue(ce,((Ee=C[R++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),be+=32;else a(ce,be,C,R,Z)}function Ge(C,R){P[R][0]=P[C+"0"],P[R][1]=P[C+"1"],P[R][2]=P[C+"2"],P[R][3]=P[C+"3"],P[R][4]=P[C+"4"],P[R][5]=P[C+"5"],P[R][6]=P[C+"6"],P[R][7]=P[C+"7"],P[R][8]=P[C+"8"],P[R][9]=P[C+"9"],P[R][10]=P[C+"10"],P[R][11]=P[C+"11"],P[R][12]=P[C+"12"],P[R][13]=P[C+"13"],P[R][14]=P[C+"0"],P[R][15]=P[C+"0"]}function jt(C){return C==Ic||C==jd||C==du||C==Ku}function br(){this.eb=[],this.size=this.A=this.fb=0}function Qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new br,this.f.kb=new Qt,this.sd=null}function Mr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function At(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function cr(C,R){var Z=C.T,ce=R.ba.f.RGBA,be=ce.eb,Ee=ce.fb+C.ka*ce.A,De=Qi[R.ba.S],Le=C.y,Re=C.O,ze=C.f,st=C.N,gt=C.ea,vt=C.W,mt=R.cc,Ut=R.dc,St=R.Mc,dt=R.Nc,ot=C.ka,Et=C.ka+C.T,Ct=C.U,Ft=Ct+1>>1;for(ot==0?De(Le,Re,null,null,ze,st,gt,vt,ze,st,gt,vt,be,Ee,null,null,Ct):(De(R.ec,R.fc,Le,Re,mt,Ut,St,dt,ze,st,gt,vt,be,Ee-ce.A,be,Ee,Ct),++Z);ot+2<Et;ot+=2)mt=ze,Ut=st,St=gt,dt=vt,st+=C.Rc,vt+=C.Rc,Ee+=2*ce.A,De(Le,(Re+=2*C.fa)-C.fa,Le,Re,mt,Ut,St,dt,ze,st,gt,vt,be,Ee-ce.A,be,Ee,Ct);return Re+=C.fa,C.j+Et<C.o?(a(R.ec,R.fc,Le,Re,Ct),a(R.cc,R.dc,ze,st,Ft),a(R.Mc,R.Nc,gt,vt,Ft),Z--):1&Et||De(Le,Re,null,null,ze,st,gt,vt,ze,st,gt,vt,be,Ee+ce.A,null,null,Ct),Z}function wr(C,R,Z){var ce=C.F,be=[C.J];if(ce!=null){var Ee=C.U,De=R.ba.S,Le=De==Gu||De==du;R=R.ba.f.RGBA;var Re=[0],ze=C.ka;Re[0]=C.T,C.Kb&&(ze==0?--Re[0]:(--ze,be[0]-=C.width),C.j+C.ka+C.T==C.o&&(Re[0]=C.o-C.j-ze));var st=R.eb;ze=R.fb+ze*R.A,C=Yn(ce,be[0],C.width,Ee,Re,st,ze+(Le?0:3),R.A),t(Z==Re),C&&jt(De)&&Ss(st,ze,Le,Ee,Re,R.A)}return 0}function Gr(C){var R=C.ma,Z=R.ba.S,ce=11>Z,be=Z==ac||Z==cu||Z==Gu||Z==fa||Z==12||jt(Z);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!vd(R.Oa,C,be?11:12))return 0;if(be&&jt(Z)&&Wt(),C.da)alert("todo:use_scaling");else{if(ce){if(R.Ib=At,C.Kb){if(Z=C.U+1>>1,R.memory=i(C.U+2*Z),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+C.U,R.Mc=R.cc,R.Nc=R.dc+Z,R.Ib=cr,Wt()}}else alert("todo:EmitYUV");be&&(R.Jb=wr,ce&&xt())}if(ce&&!_s){for(C=0;256>C;++C)gi[C]=89858*(C-128)+vl>>zo,Ji[C]=-22014*(C-128)+vl,_d[C]=-45773*(C-128),Rl[C]=113618*(C-128)+vl>>zo;for(C=Qn;C<aa;++C)R=76283*(C-16)+vl>>zo,ef[C-Qn]=ei(R,255),zf[C-Qn]=ei(R+8>>4,15);_s=1}return 1}function jr(C){var R=C.ma,Z=C.U,ce=C.T;return t(!(1&C.ka)),0>=Z||0>=ce?0:(Z=R.Ib(C,R),R.Jb!=null&&R.Jb(C,R,Z),R.Dc+=Z,1)}function qr(C){C.ma.memory=null}function tr(C,R,Z,ce){return ee(C,8)!=47?0:(R[0]=ee(C,14)+1,Z[0]=ee(C,14)+1,ce[0]=ee(C,1),ee(C,3)!=0?0:!C.h)}function Xr(C,R){if(4>C)return C+1;var Z=C-2>>1;return(2+(1&C)<<Z)+ee(R,Z)+1}function Vr(C,R){return 120<R?R-120:1<=(Z=((Z=Gh[R-1])>>4)*C+(8-(15&Z)))?Z:1;var Z}function pn(C,R,Z){var ce=z(Z),be=C[R+=255&ce].g-8;return 0<be&&(U(Z,Z.u+8),ce=z(Z),R+=C[R].value,R+=ce&(1<<be)-1),U(Z,Z.u+C[R].g),C[R].value}function Nr(C,R,Z){return Z.g+=C.g,Z.value+=C.value<<R>>>0,t(8>=Z.g),C.g}function Or(C,R,Z){var ce=C.xc;return t((R=ce==0?0:C.vc[C.md*(Z>>ce)+(R>>ce)])<C.Wb),C.Ya[R]}function ne(C,R,Z,ce){var be=C.ab,Ee=C.c*R,De=C.C;R=De+R;var Le=Z,Re=ce;for(ce=C.Ta,Z=C.Ua;0<be--;){var ze=C.gc[be],st=De,gt=R,vt=Le,mt=Re,Ut=(Re=ce,Le=Z,ze.Ea);switch(t(st<gt),t(gt<=ze.nc),ze.hc){case 2:mi(vt,mt,(gt-st)*Ut,Re,Le);break;case 0:var St=st,dt=gt,ot=Re,Et=Le,Ct=(fr=ze).Ea;St==0&&(ss(vt,mt,null,null,1,ot,Et),_e(vt,mt+1,0,0,Ct-1,ot,Et+1),mt+=Ct,Et+=Ct,++St);for(var Ft=1<<fr.b,or=Ft-1,rr=we(Ct,fr.b),Wr=fr.K,fr=fr.w+(St>>fr.b)*rr;St<dt;){var yn=Wr,In=fr,En=1;for(xa(vt,mt,ot,Et-Ct,1,ot,Et);En<Ct;){var cn=(En&~or)+Ft;cn>Ct&&(cn=Ct),(0,Ga[yn[In++]>>8&15])(vt,mt+ +En,ot,Et+En-Ct,cn-En,ot,Et+En),En=cn}mt+=Ct,Et+=Ct,++St&or||(fr+=rr)}gt!=ze.nc&&a(Re,Le-Ut,Re,Le+(gt-st-1)*Ut,Ut);break;case 1:for(Ut=vt,dt=mt,Ct=(vt=ze.Ea)-(Et=vt&~(ot=(mt=1<<ze.b)-1)),St=we(vt,ze.b),Ft=ze.K,ze=ze.w+(st>>ze.b)*St;st<gt;){for(or=Ft,rr=ze,Wr=new de,fr=dt+Et,yn=dt+vt;dt<fr;)ke(or[rr++],Wr),js(Wr,Ut,dt,mt,Re,Le),dt+=mt,Le+=mt;dt<yn&&(ke(or[rr++],Wr),js(Wr,Ut,dt,Ct,Re,Le),dt+=Ct,Le+=Ct),++st&ot||(ze+=St)}break;case 3:if(vt==Re&&mt==Le&&0<ze.b){for(dt=Re,vt=Ut=Le+(gt-st)*Ut-(Et=(gt-st)*we(ze.Ea,ze.b)),mt=Re,ot=Le,St=[],Et=(Ct=Et)-1;0<=Et;--Et)St[Et]=mt[ot+Et];for(Et=Ct-1;0<=Et;--Et)dt[vt+Et]=St[Et];$n(ze,st,gt,Re,Ut,Re,Le)}else $n(ze,st,gt,vt,mt,Re,Le)}Le=ce,Re=Z}Re!=Z&&a(ce,Z,Le,Re,Ee)}function je(C,R){var Z=C.V,ce=C.Ba+C.c*C.C,be=R-C.C;if(t(R<=C.l.o),t(16>=be),0<be){var Ee=C.l,De=C.Ta,Le=C.Ua,Re=Ee.width;if(ne(C,be,Z,ce),be=Le=[Le],t((Z=C.C)<(ce=R)),t(Ee.v<Ee.va),ce>Ee.o&&(ce=Ee.o),Z<Ee.j){var ze=Ee.j-Z;Z=Ee.j,be[0]+=ze*Re}if(Z>=ce?Z=0:(be[0]+=4*Ee.v,Ee.ka=Z-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=ce-Z,Z=1),Z){if(Le=Le[0],11>(Z=C.ca).S){var st=Z.f.RGBA,gt=(ce=Z.S,be=Ee.U,Ee=Ee.T,ze=st.eb,st.A),vt=Ee;for(st=st.fb+C.Ma*st.A;0<vt--;){var mt=De,Ut=Le,St=be,dt=ze,ot=st;switch(ce){case Vu:wa(mt,Ut,St,dt,ot);break;case ac:is(mt,Ut,St,dt,ot);break;case Ic:is(mt,Ut,St,dt,ot),Ss(dt,ot,0,St,1,0);break;case Vh:Ro(mt,Ut,St,dt,ot);break;case cu:mr(mt,Ut,St,dt,ot,1);break;case jd:mr(mt,Ut,St,dt,ot,1),Ss(dt,ot,0,St,1,0);break;case Gu:mr(mt,Ut,St,dt,ot,0);break;case du:mr(mt,Ut,St,dt,ot,0),Ss(dt,ot,1,St,1,0);break;case fa:Gi(mt,Ut,St,dt,ot);break;case Ku:Gi(mt,Ut,St,dt,ot),na(dt,ot,St,1,0);break;case Rf:Pl(mt,Ut,St,dt,ot);break;default:t(0)}Le+=Re,st+=gt}C.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");t(C.Ma<=Z.height)}}C.C=R,t(C.C<=C.i)}function Se(C){var R;if(0<C.ua)return 0;for(R=0;R<C.Wb;++R){var Z=C.Ya[R].G,ce=C.Ya[R].H;if(0<Z[1][ce[1]+0].g||0<Z[2][ce[2]+0].g||0<Z[3][ce[3]+0].g)return 0}return 1}function oe(C,R,Z,ce,be,Ee){if(C.Z!=0){var De=C.qd,Le=C.rd;for(t(ls[C.Z]!=null);R<Z;++R)ls[C.Z](De,Le,ce,be,ce,be,Ee),De=ce,Le=be,be+=Ee;C.qd=De,C.rd=Le}}function ve(C,R){var Z=C.l.ma,ce=Z.Z==0||Z.Z==1?C.l.j:C.C;if(ce=C.C<ce?ce:C.C,t(R<=C.l.o),R>ce){var be=C.l.width,Ee=Z.ca,De=Z.tb+be*ce,Le=C.V,Re=C.Ba+C.c*ce,ze=C.gc;t(C.ab==1),t(ze[0].hc==3),Va(ze[0],ce,R,Le,Re,Ee,De),oe(Z,ce,R,Ee,De,be)}C.C=C.Ma=R}function Ae(C,R,Z,ce,be,Ee,De){var Le=C.$/ce,Re=C.$%ce,ze=C.m,st=C.s,gt=Z+C.$,vt=gt;be=Z+ce*be;var mt=Z+ce*Ee,Ut=280+st.ua,St=C.Pb?Le:16777216,dt=0<st.ua?st.Wa:null,ot=st.wc,Et=gt<mt?Or(st,Re,Le):null;t(C.C<Ee),t(mt<=be);var Ct=!1;e:for(;;){for(;Ct||gt<mt;){var Ft=0;if(Le>=St){var or=gt-Z;t((St=C).Pb),St.wd=St.m,St.xd=or,0<St.s.ua&&le(St.s.Wa,St.s.vb),St=Le+Qu}if(Re&ot||(Et=Or(st,Re,Le)),t(Et!=null),Et.Qb&&(R[gt]=Et.qb,Ct=!0),!Ct)if(K(ze),Et.jc){Ft=ze,or=R;var rr=gt,Wr=Et.pd[z(Ft)&_a-1];t(Et.jc),256>Wr.g?(U(Ft,Ft.u+Wr.g),or[rr]=Wr.value,Ft=0):(U(Ft,Ft.u+Wr.g-256),t(256<=Wr.value),Ft=Wr.value),Ft==0&&(Ct=!0)}else Ft=pn(Et.G[0],Et.H[0],ze);if(ze.h)break;if(Ct||256>Ft){if(!Ct)if(Et.nd)R[gt]=(Et.qb|Ft<<8)>>>0;else{if(K(ze),Ct=pn(Et.G[1],Et.H[1],ze),K(ze),or=pn(Et.G[2],Et.H[2],ze),rr=pn(Et.G[3],Et.H[3],ze),ze.h)break;R[gt]=(rr<<24|Ct<<16|Ft<<8|or)>>>0}if(Ct=!1,++gt,++Re>=ce&&(Re=0,++Le,De!=null&&Le<=Ee&&!(Le%16)&&De(C,Le),dt!=null))for(;vt<gt;)Ft=R[vt++],dt.X[(506832829*Ft&4294967295)>>>dt.Mb]=Ft}else if(280>Ft){if(Ft=Xr(Ft-256,ze),or=pn(Et.G[4],Et.H[4],ze),K(ze),or=Vr(ce,or=Xr(or,ze)),ze.h)break;if(gt-Z<or||be-gt<Ft)break e;for(rr=0;rr<Ft;++rr)R[gt+rr]=R[gt+rr-or];for(gt+=Ft,Re+=Ft;Re>=ce;)Re-=ce,++Le,De!=null&&Le<=Ee&&!(Le%16)&&De(C,Le);if(t(gt<=be),Re&ot&&(Et=Or(st,Re,Le)),dt!=null)for(;vt<gt;)Ft=R[vt++],dt.X[(506832829*Ft&4294967295)>>>dt.Mb]=Ft}else{if(!(Ft<Ut))break e;for(Ct=Ft-280,t(dt!=null);vt<gt;)Ft=R[vt++],dt.X[(506832829*Ft&4294967295)>>>dt.Mb]=Ft;Ft=gt,t(!(Ct>>>(or=dt).Xa)),R[Ft]=or.X[Ct],Ct=!0}Ct||t(ze.h==V(ze))}if(C.Pb&&ze.h&&gt<be)t(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&le(C.s.vb,C.s.Wa);else{if(ze.h)break e;De?.(C,Le>Ee?Ee:Le),C.a=0,C.$=gt-Z}return 1}return C.a=3,0}function Ke(C){t(C!=null),C.vc=null,C.yc=null,C.Ya=null;var R=C.Wa;R!=null&&(R.X=null),C.vb=null,t(C!=null)}function nt(){var C=new nu;return C==null?null:(C.a=0,C.xb=hu,Ge("Predictor","VP8LPredictors"),Ge("Predictor","VP8LPredictors_C"),Ge("PredictorAdd","VP8LPredictorsAdd"),Ge("PredictorAdd","VP8LPredictorsAdd_C"),mi=Ue,js=Fe,wa=et,is=Kt,Gi=qt,Pl=vr,Ro=er,P.VP8LMapColor32b=qs,P.VP8LMapColor8b=Vi,C)}function Qe(C,R,Z,ce,be){var Ee=1,De=[C],Le=[R],Re=ce.m,ze=ce.s,st=null,gt=0;e:for(;;){if(Z)for(;Ee&&ee(Re,1);){var vt=De,mt=Le,Ut=ce,St=1,dt=Ut.m,ot=Ut.gc[Ut.ab],Et=ee(dt,2);if(Ut.Oc&1<<Et)Ee=0;else{switch(Ut.Oc|=1<<Et,ot.hc=Et,ot.Ea=vt[0],ot.nc=mt[0],ot.K=[null],++Ut.ab,t(4>=Ut.ab),Et){case 0:case 1:ot.b=ee(dt,3)+2,St=Qe(we(ot.Ea,ot.b),we(ot.nc,ot.b),0,Ut,ot.K),ot.K=ot.K[0];break;case 3:var Ct,Ft=ee(dt,8)+1,or=16<Ft?0:4<Ft?1:2<Ft?2:3;if(vt[0]=we(ot.Ea,or),ot.b=or,Ct=St=Qe(Ft,1,0,Ut,ot.K)){var rr,Wr=Ft,fr=ot,yn=1<<(8>>fr.b),In=i(yn);if(In==null)Ct=0;else{var En=fr.K[0],cn=fr.w;for(In[0]=fr.K[0][0],rr=1;rr<1*Wr;++rr)In[rr]=Ie(En[cn+rr],In[rr-1]);for(;rr<4*yn;++rr)In[rr]=0;fr.K[0]=null,fr.K[0]=In,Ct=1}}St=Ct;break;case 2:break;default:t(0)}Ee=St}}if(De=De[0],Le=Le[0],Ee&&ee(Re,1)&&!(Ee=1<=(gt=ee(Re,4))&&11>=gt)){ce.a=3;break e}var Jn;if(Jn=Ee)t:{var Fn,rn,Ka,Ii=ce,Xa=De,Cs=Le,Zn=gt,Is=Z,vi=Ii.m,Ya=Ii.s,Ba=[null],zs=1,Di=0,Wo=Yu[Zn];r:for(;;){if(Is&&ee(vi,1)){var Qa=ee(vi,3)+2,ns=we(Xa,Qa),Ds=we(Cs,Qa),Uc=ns*Ds;if(!Qe(ns,Ds,0,Ii,Ba))break r;for(Ba=Ba[0],Ya.xc=Qa,Fn=0;Fn<Uc;++Fn){var Zi=Ba[Fn]>>8&65535;Ba[Fn]=Zi,Zi>=zs&&(zs=Zi+1)}}if(vi.h)break r;for(rn=0;5>rn;++rn){var Kn=kd[rn];!rn&&0<Zn&&(Kn+=1<<Zn),Di<Kn&&(Di=Kn)}var Bl=o(zs*Wo,E),Cd=zs,mu=o(Cd,q);if(mu==null)var Vo=null;else t(65536>=Cd),Vo=mu;var jo=i(Di);if(Vo==null||jo==null||Bl==null){Ii.a=1;break r}var oc=Bl;for(Fn=Ka=0;Fn<zs;++Fn){var ko=Vo[Fn],Ul=ko.G,Ad=ko.H,pu=0,So=1,xu=0;for(rn=0;5>rn;++rn){Kn=kd[rn],Ul[rn]=oc,Ad[rn]=Ka,!rn&&0<Zn&&(Kn+=1<<Zn);a:{var qc,lc=Kn,gu=Ii,ql=jo,Xh=oc,tf=Ka,ga=0,ri=gu.m,cc=ee(ri,1);if(s(ql,0,0,lc),cc){var U0=ee(ri,1)+1,Ed=ee(ri,1),Hf=ee(ri,Ed==0?1:8);ql[Hf]=1,U0==2&&(ql[Hf=ee(ri,8)]=1);var $l=1}else{var Ua=i(19),As=ee(ri,4)+4;if(19<As){gu.a=3;var cs=0;break a}for(qc=0;qc<As;++qc)Ua[Bf[qc]]=ee(ri,3);var vu=void 0,dc=void 0,$c=gu,q0=Ua,Ls=lc,Wf=ql,rf=0,zl=$c.m,Go=8,eo=o(128,E);n:for(;T(eo,0,7,q0,19);){if(ee(zl,1)){var nf=2+2*ee(zl,3);if((vu=2+ee(zl,nf))>Ls)break n}else vu=Ls;for(dc=0;dc<Ls&&vu--;){K(zl);var Vf=eo[0+(127&z(zl))];U(zl,zl.u+Vf.g);var uc=Vf.value;if(16>uc)Wf[dc++]=uc,uc!=0&&(Go=uc);else{var Td=uc==16,af=uc-16,to=Xu[af],$0=ee(zl,Dc[af])+to;if(dc+$0>Ls)break n;for(var z0=Td?Go:0;0<$0--;)Wf[dc++]=z0}}rf=1;break n}rf||($c.a=3),$l=rf}($l=$l&&!ri.h)&&(ga=T(Xh,tf,8,ql,lc)),$l&&ga!=0?cs=ga:(gu.a=3,cs=0)}if(cs==0)break r;if(So&&M0[rn]==1&&(So=oc[Ka].g==0),pu+=oc[Ka].g,Ka+=cs,3>=rn){var fc,sf=jo[0];for(fc=1;fc<Kn;++fc)jo[fc]>sf&&(sf=jo[fc]);xu+=sf}}if(ko.nd=So,ko.Qb=0,So&&(ko.qb=(Ul[3][Ad[3]+0].value<<24|Ul[1][Ad[1]+0].value<<16|Ul[2][Ad[2]+0].value)>>>0,pu==0&&256>Ul[0][Ad[0]+0].value&&(ko.Qb=1,ko.qb+=Ul[0][Ad[0]+0].value<<8)),ko.jc=!ko.Qb&&6>xu,ko.jc){var L,pe=ko;for(L=0;L<_a;++L){var ye=L,Je=pe.pd[ye],lt=pe.G[0][pe.H[0]+ye];256<=lt.value?(Je.g=lt.g+256,Je.value=lt.value):(Je.g=0,Je.value=0,ye>>=Nr(lt,8,Je),ye>>=Nr(pe.G[1][pe.H[1]+ye],16,Je),ye>>=Nr(pe.G[2][pe.H[2]+ye],0,Je),Nr(pe.G[3][pe.H[3]+ye],24,Je))}}}Ya.vc=Ba,Ya.Wb=zs,Ya.Ya=Vo,Ya.yc=Bl,Jn=1;break t}Jn=0}if(!(Ee=Jn)){ce.a=3;break e}if(0<gt){if(ze.ua=1<<gt,!Oe(ze.Wa,gt)){ce.a=1,Ee=0;break e}}else ze.ua=0;var Pt=ce,wt=De,$t=Le,Cr=Pt.s,vn=Cr.xc;if(Pt.c=wt,Pt.i=$t,Cr.md=we(wt,vn),Cr.wc=vn==0?-1:(1<<vn)-1,Z){ce.xb=No;break e}if((st=i(De*Le))==null){ce.a=1,Ee=0;break e}Ee=(Ee=Ae(ce,st,0,De,Le,Le,null))&&!Re.h;break e}return Ee?(be!=null?be[0]=st:(t(st==null),t(Z)),ce.$=0,Z||Ke(ze)):Ke(ze),Ee}function tt(C,R){var Z=C.c*C.i,ce=Z+R+16*R;return t(C.c<=R),C.V=i(ce),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+Z+R,1)}function Xe(C,R){var Z=C.C,ce=R-Z,be=C.V,Ee=C.Ba+C.c*Z;for(t(R<=C.l.o);0<ce;){var De=16<ce?16:ce,Le=C.l.ma,Re=C.l.width,ze=Re*De,st=Le.ca,gt=Le.tb+Re*Z,vt=C.Ta,mt=C.Ua;ne(C,De,be,Ee),An(vt,mt,st,gt,ze),oe(Le,Z,Z+De,st,gt,Re),ce-=De,be+=De*C.c,Z+=De}t(Z==R),C.C=C.Ma=R}function Me(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function It(){this.Yb=(function(){var C=[];return(function R(Z,ce,be){for(var Ee=be[ce],De=0;De<Ee&&(Z.push(be.length>ce+1?[]:0),!(be.length<ce+1));De++)R(Z[De],ce+1,be)})(C,0,[3,11]),C})()}function Dt(){this.jb=i(3),this.Wc=l([4,8],It),this.Xc=l([4,17],It)}function xr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Rr(){this.ld=this.La=this.dd=this.tc=0}function Yr(){this.Na=this.la=0}function Nn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ps(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rr),this.Y=0,this.ya=Array(new Ps),this.aa=0,this.l=new za}function ts(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Wn(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Me,this.Kc=new it,this.ed=new xr,this.Qa=new bt,this.Ic=this.$c=this.Aa=0,this.D=new Sn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,Nn),this.Pa=new Dt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ts),this.Hd=0,this.rb=Array(new Yr),this.sb=0,this.wa=Array(new Rr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ps),this.L=this.aa=0,this.gd=l([4,2],Rr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function za(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vn(){var C=new Wn;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,fu||(fu=We)),C}function Pn(C,R,Z){return C.a==0&&(C.a=R,C.sc=Z,C.cb=0),0}function Do(C,R,Z){return 3<=Z&&C[R+0]==157&&C[R+1]==1&&C[R+2]==42}function ba(C,R){if(C==null)return 0;if(C.a=0,C.sc="OK",R==null)return Pn(C,2,"null VP8Io passed to VP8GetHeaders()");var Z=R.data,ce=R.w,be=R.ha;if(4>be)return Pn(C,7,"Truncated header.");var Ee=Z[ce+0]|Z[ce+1]<<8|Z[ce+2]<<16,De=C.Od;if(De.Rb=!(1&Ee),De.td=Ee>>1&7,De.yd=Ee>>4&1,De.ub=Ee>>5,3<De.td)return Pn(C,3,"Incorrect keyframe parameters.");if(!De.yd)return Pn(C,4,"Frame not displayable.");ce+=3,be-=3;var Le=C.Kc;if(De.Rb){if(7>be)return Pn(C,7,"cannot parse picture header");if(!Do(Z,ce,be))return Pn(C,3,"Bad code word");Le.c=16383&(Z[ce+4]<<8|Z[ce+3]),Le.Td=Z[ce+4]>>6,Le.i=16383&(Z[ce+6]<<8|Z[ce+5]),Le.Ud=Z[ce+6]>>6,ce+=7,be-=7,C.za=Le.c+15>>4,C.Ub=Le.i+15>>4,R.width=Le.c,R.height=Le.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,s((Ee=C.Pa).jb,0,255,Ee.jb.length),t((Ee=C.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,s(Ee.Zb,0,0,Ee.Zb.length),s(Ee.Lb,0,0,Ee.Lb)}if(De.ub>be)return Pn(C,7,"bad partition length");H(Ee=C.m,Z,ce,De.ub),ce+=De.ub,be-=De.ub,De.Rb&&(Le.Ld=xe(Ee),Le.Kd=xe(Ee)),Le=C.Qa;var Re,ze=C.Pa;if(t(Ee!=null),t(Le!=null),Le.Cb=xe(Ee),Le.Cb){if(Le.Bb=xe(Ee),xe(Ee)){for(Le.Fb=xe(Ee),Re=0;4>Re;++Re)Le.Zb[Re]=xe(Ee)?J(Ee,7):0;for(Re=0;4>Re;++Re)Le.Lb[Re]=xe(Ee)?J(Ee,6):0}if(Le.Bb)for(Re=0;3>Re;++Re)ze.jb[Re]=xe(Ee)?Q(Ee,8):255}else Le.Bb=0;if(Ee.Ka)return Pn(C,3,"cannot parse segment header");if((Le=C.ed).zd=xe(Ee),Le.Tb=Q(Ee,6),Le.wb=Q(Ee,3),Le.Pc=xe(Ee),Le.Pc&&xe(Ee)){for(ze=0;4>ze;++ze)xe(Ee)&&(Le.vd[ze]=J(Ee,6));for(ze=0;4>ze;++ze)xe(Ee)&&(Le.od[ze]=J(Ee,6))}if(C.L=Le.Tb==0?0:Le.zd?1:2,Ee.Ka)return Pn(C,3,"cannot parse filter header");var st=be;if(be=Re=ce,ce=Re+st,Le=st,C.Xb=(1<<Q(C.m,2))-1,st<3*(ze=C.Xb))Z=7;else{for(Re+=3*ze,Le-=3*ze,st=0;st<ze;++st){var gt=Z[be+0]|Z[be+1]<<8|Z[be+2]<<16;gt>Le&&(gt=Le),H(C.Jc[+st],Z,Re,gt),Re+=gt,Le-=gt,be+=3}H(C.Jc[+ze],Z,Re,Le),Z=Re<ce?0:5}if(Z!=0)return Pn(C,Z,"cannot parse partitions");for(Z=Q(Re=C.m,7),be=xe(Re)?J(Re,4):0,ce=xe(Re)?J(Re,4):0,Le=xe(Re)?J(Re,4):0,ze=xe(Re)?J(Re,4):0,Re=xe(Re)?J(Re,4):0,st=C.Qa,gt=0;4>gt;++gt){if(st.Cb){var vt=st.Zb[gt];st.Fb||(vt+=Z)}else{if(0<gt){C.pb[gt]=C.pb[0];continue}vt=Z}var mt=C.pb[gt];mt.Sc[0]=sc[ei(vt+be,127)],mt.Sc[1]=uu[ei(vt+0,127)],mt.Eb[0]=2*sc[ei(vt+ce,127)],mt.Eb[1]=101581*uu[ei(vt+Le,127)]>>16,8>mt.Eb[1]&&(mt.Eb[1]=8),mt.Qc[0]=sc[ei(vt+ze,117)],mt.Qc[1]=uu[ei(vt+Re,127)],mt.lc=vt+Re}if(!De.Rb)return Pn(C,4,"Not a key frame.");for(xe(Ee),De=C.Pa,Z=0;4>Z;++Z){for(be=0;8>be;++be)for(ce=0;3>ce;++ce)for(Le=0;11>Le;++Le)ze=ie(Ee,gp[Z][be][ce][Le])?Q(Ee,8):ic[Z][be][ce][Le],De.Wc[Z][be].Yb[ce][Le]=ze;for(be=0;17>be;++be)De.Xc[Z][be]=De.Wc[Z][Ju[be]]}return C.kc=xe(Ee),C.kc&&(C.Bd=Q(Ee,8)),C.cb=1}function We(C,R,Z,ce,be,Ee,De){var Le=R[be].Yb[Z];for(Z=0;16>be;++be){if(!ie(C,Le[Z+0]))return be;for(;!ie(C,Le[Z+1]);)if(Le=R[++be].Yb[0],Z=0,be==16)return 16;var Re=R[be+1].Yb;if(ie(C,Le[Z+2])){var ze=C,st=0;if(ie(ze,(vt=Le)[(gt=Z)+3]))if(ie(ze,vt[gt+6])){for(Le=0,gt=2*(st=ie(ze,vt[gt+8]))+(vt=ie(ze,vt[gt+9+st])),st=0,vt=Uf[gt];vt[Le];++Le)st+=st+ie(ze,vt[Le]);st+=3+(8<<gt)}else ie(ze,vt[gt+7])?(st=7+2*ie(ze,165),st+=ie(ze,145)):st=5+ie(ze,159);else st=ie(ze,vt[gt+4])?3+ie(ze,vt[gt+5]):2;Le=Re[2]}else st=1,Le=Re[1];Re=De+R0[be],0>(ze=C).b&&se(ze);var gt,vt=ze.b,mt=(gt=ze.Ca>>1)-(ze.I>>vt)>>31;--ze.b,ze.Ca+=mt,ze.Ca|=1,ze.I-=(gt+1&mt)<<vt,Ee[Re]=((st^mt)-mt)*ce[(0<be)+0]}return 16}function Tt(C){var R=C.rb[C.sb-1];R.la=0,R.Na=0,s(C.zc,0,0,C.zc.length),C.ja=0}function _t(C,R){if(C==null)return 0;if(R==null)return Pn(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!ba(C,R))return 0;if(t(C.cb),R.ac==null||R.ac(R)){R.ob&&(C.L=0);var Z=Bc[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=R.v-Z>>4,C.zb=R.j-Z>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=R.o+15+Z>>4,C.Hb=R.va+15+Z>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var ce=C.ed;for(Z=0;4>Z;++Z){var be;if(C.Qa.Cb){var Ee=C.Qa.Lb[Z];C.Qa.Fb||(Ee+=ce.Tb)}else Ee=ce.Tb;for(be=0;1>=be;++be){var De=C.gd[Z][be],Le=Ee;if(ce.Pc&&(Le+=ce.vd[0],be&&(Le+=ce.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var Re=Le;0<ce.wb&&(Re=4<ce.wb?Re>>2:Re>>1)>9-ce.wb&&(Re=9-ce.wb),1>Re&&(Re=1),De.dd=Re,De.tc=2*Le+Re,De.ld=40<=Le?2:15<=Le?1:0}else De.tc=0;De.La=be}}}Z=0}else Pn(C,6,"Frame setup failed"),Z=C.a;if(Z=Z==0){if(Z){C.$c=0,0<C.Aa||(C.Ic=Ho);e:{Z=C.Ic,ce=4*(Re=C.za);var ze=32*Re,st=Re+1,gt=0<C.L?Re*(0<C.Aa?2:1):0,vt=(C.Aa==2?2:1)*Re;if((De=ce+832+(be=3*(16*Z+Bc[C.L])/2*ze)+(Ee=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=De)Z=0;else{if(De>C.Vb){if(C.Vb=0,C.Ec=i(De),C.Fc=0,C.Ec==null){Z=Pn(C,1,"no memory during frame initialization.");break e}C.Vb=De}De=C.Ec,Le=C.Fc,C.Ac=De,C.Bc=Le,Le+=ce,C.Gd=o(ze,ts),C.Hd=0,C.rb=o(st+1,Yr),C.sb=1,C.wa=gt?o(gt,Rr):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=Re),t(!0),C.oc=De,C.pc=Le,Le+=832,C.ya=o(vt,Ps),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=Re),C.R=16*Re,C.B=8*Re,Re=(ze=Bc[C.L])*C.R,ze=ze/2*C.B,C.sa=De,C.ta=Le+Re,C.qa=C.sa,C.ra=C.ta+16*Z*C.R+ze,C.Ha=C.qa,C.Ia=C.ra+8*Z*C.B+ze,C.$c=0,Le+=be,C.mb=Ee?De:null,C.nb=Ee?Le:null,t(Le+Ee<=C.Fc+C.Vb),Tt(C),s(C.Ac,C.Bc,0,ce),Z=1}}if(Z){if(R.ka=0,R.y=C.sa,R.O=C.ta,R.f=C.qa,R.N=C.ra,R.ea=C.Ha,R.Vd=C.Ia,R.fa=C.R,R.Rc=C.B,R.F=null,R.J=0,!Nd){for(Z=-255;255>=Z;++Z)Ca[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Uo[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)lu[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)qo[255+Z]=0>Z?0:255<Z?255:Z;Nd=1}ou=kr,gl=_n,Il=Yt,ti=ur,Ti=Lt,Gn=ra,Dl=Ol,wd=ws,Ll=pd,Bo=Ac,Ki=xo,$s=Lo,Xi=xd,Oi=pl,Yi=ua,yo=Ma,Pc=ys,ks=Mf,wo[0]=Fa,wo[1]=Da,wo[2]=Dn,wo[3]=Ar,wo[4]=ho,wo[5]=vs,wo[6]=gs,wo[7]=bs,wo[8]=ml,wo[9]=mo,os[0]=Xn,os[1]=Sa,os[2]=Zt,os[3]=Zr,os[4]=bn,os[5]=Sr,os[6]=en,Pi[0]=hi,Pi[1]=ka,Pi[2]=zu,Pi[3]=po,Pi[4]=He,Pi[5]=rc,Pi[6]=pr,Z=1}else Z=0}Z&&(Z=(function(mt,Ut){for(mt.M=0;mt.M<mt.Va;++mt.M){var St,dt=mt.Jc[mt.M&mt.Xb],ot=mt.m,Et=mt;for(St=0;St<Et.za;++St){var Ct=ot,Ft=Et,or=Ft.Ac,rr=Ft.Bc+4*St,Wr=Ft.zc,fr=Ft.ya[Ft.aa+St];if(Ft.Qa.Bb?fr.$b=ie(Ct,Ft.Pa.jb[0])?2+ie(Ct,Ft.Pa.jb[2]):ie(Ct,Ft.Pa.jb[1]):fr.$b=0,Ft.kc&&(fr.Ad=ie(Ct,Ft.Bd)),fr.Za=!ie(Ct,145)+0,fr.Za){var yn=fr.Ob,In=0;for(Ft=0;4>Ft;++Ft){var En,cn=Wr[0+Ft];for(En=0;4>En;++En){cn=Sd[or[rr+En]][cn];for(var Jn=Lc[ie(Ct,cn[0])];0<Jn;)Jn=Lc[2*Jn+ie(Ct,cn[Jn])];cn=-Jn,or[rr+En]=cn}a(yn,In,or,rr,4),In+=4,Wr[0+Ft]=cn}}else cn=ie(Ct,156)?ie(Ct,128)?1:3:ie(Ct,163)?2:0,fr.Ob[0]=cn,s(or,rr,cn,4),s(Wr,0,cn,4);fr.Dd=ie(Ct,142)?ie(Ct,114)?ie(Ct,183)?1:3:2:0}if(Et.m.Ka)return Pn(mt,7,"Premature end-of-partition0 encountered.");for(;mt.ja<mt.za;++mt.ja){if(Et=dt,Ct=(ot=mt).rb[ot.sb-1],or=ot.rb[ot.sb+ot.ja],St=ot.ya[ot.aa+ot.ja],rr=ot.kc?St.Ad:0)Ct.la=or.la=0,St.Za||(Ct.Na=or.Na=0),St.Hc=0,St.Gc=0,St.ia=0;else{var Fn,rn;if(Ct=or,or=Et,rr=ot.Pa.Xc,Wr=ot.ya[ot.aa+ot.ja],fr=ot.pb[Wr.$b],Ft=Wr.ad,yn=0,In=ot.rb[ot.sb-1],cn=En=0,s(Ft,yn,0,384),Wr.Za)var Ka=0,Ii=rr[3];else{Jn=i(16);var Xa=Ct.Na+In.Na;if(Xa=fu(or,rr[1],Xa,fr.Eb,0,Jn,0),Ct.Na=In.Na=(0<Xa)+0,1<Xa)ou(Jn,0,Ft,yn);else{var Cs=Jn[0]+3>>3;for(Jn=0;256>Jn;Jn+=16)Ft[yn+Jn]=Cs}Ka=1,Ii=rr[0]}var Zn=15&Ct.la,Is=15&In.la;for(Jn=0;4>Jn;++Jn){var vi=1&Is;for(Cs=rn=0;4>Cs;++Cs)Zn=Zn>>1|(vi=(Xa=fu(or,Ii,Xa=vi+(1&Zn),fr.Sc,Ka,Ft,yn))>Ka)<<7,rn=rn<<2|(3<Xa?3:1<Xa?2:Ft[yn+0]!=0),yn+=16;Zn>>=4,Is=Is>>1|vi<<7,En=(En<<8|rn)>>>0}for(Ii=Zn,Ka=Is>>4,Fn=0;4>Fn;Fn+=2){for(rn=0,Zn=Ct.la>>4+Fn,Is=In.la>>4+Fn,Jn=0;2>Jn;++Jn){for(vi=1&Is,Cs=0;2>Cs;++Cs)Xa=vi+(1&Zn),Zn=Zn>>1|(vi=0<(Xa=fu(or,rr[2],Xa,fr.Qc,0,Ft,yn)))<<3,rn=rn<<2|(3<Xa?3:1<Xa?2:Ft[yn+0]!=0),yn+=16;Zn>>=2,Is=Is>>1|vi<<5}cn|=rn<<4*Fn,Ii|=Zn<<4<<Fn,Ka|=(240&Is)<<Fn}Ct.la=Ii,In.la=Ka,Wr.Hc=En,Wr.Gc=cn,Wr.ia=43690&cn?0:fr.ia,rr=!(En|cn)}if(0<ot.L&&(ot.wa[ot.Y+ot.ja]=ot.gd[St.$b][St.Za],ot.wa[ot.Y+ot.ja].La|=!rr),Et.Ka)return Pn(mt,7,"Premature end-of-file encountered.")}if(Tt(mt),ot=Ut,Et=1,St=(dt=mt).D,Ct=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)e:{if(St.M=dt.M,St.uc=Ct,iu(dt,St),Et=1,St=(rn=dt.D).Nb,Ct=(cn=Bc[dt.L])*dt.R,or=cn/2*dt.B,Jn=16*St*dt.R,Cs=8*St*dt.B,rr=dt.sa,Wr=dt.ta-Ct+Jn,fr=dt.qa,Ft=dt.ra-or+Cs,yn=dt.Ha,In=dt.Ia-or+Cs,Is=(Zn=rn.M)==0,En=Zn>=dt.Va-1,dt.Aa==2&&iu(dt,rn),rn.uc)for(vi=(Xa=dt).D.M,t(Xa.D.uc),rn=Xa.yb;rn<Xa.Hb;++rn){Ka=rn,Ii=vi;var Ya=(Ba=(Kn=Xa).D).Nb;Fn=Kn.R;var Ba=Ba.wa[Ba.Y+Ka],zs=Kn.sa,Di=Kn.ta+16*Ya*Fn+16*Ka,Wo=Ba.dd,Qa=Ba.tc;if(Qa!=0)if(t(3<=Qa),Kn.L==1)0<Ka&&yo(zs,Di,Fn,Qa+4),Ba.La&&ks(zs,Di,Fn,Qa),0<Ii&&Yi(zs,Di,Fn,Qa+4),Ba.La&&Pc(zs,Di,Fn,Qa);else{var ns=Kn.B,Ds=Kn.qa,Uc=Kn.ra+8*Ya*ns+8*Ka,Zi=Kn.Ha,Kn=Kn.Ia+8*Ya*ns+8*Ka;Ya=Ba.ld,0<Ka&&(wd(zs,Di,Fn,Qa+4,Wo,Ya),Bo(Ds,Uc,Zi,Kn,ns,Qa+4,Wo,Ya)),Ba.La&&($s(zs,Di,Fn,Qa,Wo,Ya),Oi(Ds,Uc,Zi,Kn,ns,Qa,Wo,Ya)),0<Ii&&(Dl(zs,Di,Fn,Qa+4,Wo,Ya),Ll(Ds,Uc,Zi,Kn,ns,Qa+4,Wo,Ya)),Ba.La&&(Ki(zs,Di,Fn,Qa,Wo,Ya),Xi(Ds,Uc,Zi,Kn,ns,Qa,Wo,Ya))}}if(dt.ia&&alert("todo:DitherRow"),ot.put!=null){if(rn=16*Zn,Zn=16*(Zn+1),Is?(ot.y=dt.sa,ot.O=dt.ta+Jn,ot.f=dt.qa,ot.N=dt.ra+Cs,ot.ea=dt.Ha,ot.W=dt.Ia+Cs):(rn-=cn,ot.y=rr,ot.O=Wr,ot.f=fr,ot.N=Ft,ot.ea=yn,ot.W=In),En||(Zn-=cn),Zn>ot.o&&(Zn=ot.o),ot.F=null,ot.J=null,dt.Fa!=null&&0<dt.Fa.length&&rn<Zn&&(ot.J=au(dt,ot,rn,Zn-rn),ot.F=dt.mb,ot.F==null&&ot.F.length==0)){Et=Pn(dt,3,"Could not decode alpha data.");break e}rn<ot.j&&(cn=ot.j-rn,rn=ot.j,t(!(1&cn)),ot.O+=dt.R*cn,ot.N+=dt.B*(cn>>1),ot.W+=dt.B*(cn>>1),ot.F!=null&&(ot.J+=ot.width*cn)),rn<Zn&&(ot.O+=ot.v,ot.N+=ot.v>>1,ot.W+=ot.v>>1,ot.F!=null&&(ot.J+=ot.v),ot.ka=rn-ot.j,ot.U=ot.va-ot.v,ot.T=Zn-rn,Et=ot.put(ot))}St+1!=dt.Ic||En||(a(dt.sa,dt.ta-Ct,rr,Wr+16*dt.R,Ct),a(dt.qa,dt.ra-or,fr,Ft+8*dt.B,or),a(dt.Ha,dt.Ia-or,yn,In+8*dt.B,or))}if(!Et)return Pn(mt,6,"Output aborted.")}return 1})(C,R)),R.bc!=null&&R.bc(R),Z&=1}return Z?(C.cb=0,Z):0}function nr(C,R,Z,ce,be){be=C[R+Z+32*ce]+(be>>3),C[R+Z+32*ce]=-256&be?0>be?0:255:be}function yr(C,R,Z,ce,be,Ee){nr(C,R,0,Z,ce+be),nr(C,R,1,Z,ce+Ee),nr(C,R,2,Z,ce-Ee),nr(C,R,3,Z,ce-be)}function dr(C){return(20091*C>>16)+C}function Pr(C,R,Z,ce){var be,Ee=0,De=i(16);for(be=0;4>be;++be){var Le=C[R+0]+C[R+8],Re=C[R+0]-C[R+8],ze=(35468*C[R+4]>>16)-dr(C[R+12]),st=dr(C[R+4])+(35468*C[R+12]>>16);De[Ee+0]=Le+st,De[Ee+1]=Re+ze,De[Ee+2]=Re-ze,De[Ee+3]=Le-st,Ee+=4,R++}for(be=Ee=0;4>be;++be)Le=(C=De[Ee+0]+4)+De[Ee+8],Re=C-De[Ee+8],ze=(35468*De[Ee+4]>>16)-dr(De[Ee+12]),nr(Z,ce,0,0,Le+(st=dr(De[Ee+4])+(35468*De[Ee+12]>>16))),nr(Z,ce,1,0,Re+ze),nr(Z,ce,2,0,Re-ze),nr(Z,ce,3,0,Le-st),Ee++,ce+=32}function ra(C,R,Z,ce){var be=C[R+0]+4,Ee=35468*C[R+4]>>16,De=dr(C[R+4]),Le=35468*C[R+1]>>16;yr(Z,ce,0,be+De,C=dr(C[R+1]),Le),yr(Z,ce,1,be+Ee,C,Le),yr(Z,ce,2,be-Ee,C,Le),yr(Z,ce,3,be-De,C,Le)}function _n(C,R,Z,ce,be){Pr(C,R,Z,ce),be&&Pr(C,R+16,Z,ce+4)}function Yt(C,R,Z,ce){gl(C,R+0,Z,ce,1),gl(C,R+32,Z,ce+128,1)}function ur(C,R,Z,ce){var be;for(C=C[R+0]+4,be=0;4>be;++be)for(R=0;4>R;++R)nr(Z,ce,R,be,C)}function Lt(C,R,Z,ce){C[R+0]&&ti(C,R+0,Z,ce),C[R+16]&&ti(C,R+16,Z,ce+4),C[R+32]&&ti(C,R+32,Z,ce+128),C[R+48]&&ti(C,R+48,Z,ce+128+4)}function kr(C,R,Z,ce){var be,Ee=i(16);for(be=0;4>be;++be){var De=C[R+0+be]+C[R+12+be],Le=C[R+4+be]+C[R+8+be],Re=C[R+4+be]-C[R+8+be],ze=C[R+0+be]-C[R+12+be];Ee[0+be]=De+Le,Ee[8+be]=De-Le,Ee[4+be]=ze+Re,Ee[12+be]=ze-Re}for(be=0;4>be;++be)De=(C=Ee[0+4*be]+3)+Ee[3+4*be],Le=Ee[1+4*be]+Ee[2+4*be],Re=Ee[1+4*be]-Ee[2+4*be],ze=C-Ee[3+4*be],Z[ce+0]=De+Le>>3,Z[ce+16]=ze+Re>>3,Z[ce+32]=De-Le>>3,Z[ce+48]=ze-Re>>3,ce+=64}function zt(C,R,Z){var ce,be=R-32,Ee=pi,De=255-C[be-1];for(ce=0;ce<Z;++ce){var Le,Re=Ee,ze=De+C[R-1];for(Le=0;Le<Z;++Le)C[R+Le]=Re[ze+C[be+Le]];R+=32}}function Da(C,R){zt(C,R,4)}function ka(C,R){zt(C,R,8)}function Sa(C,R){zt(C,R,16)}function Zt(C,R){var Z;for(Z=0;16>Z;++Z)a(C,R+32*Z,C,R-32,16)}function Zr(C,R){var Z;for(Z=16;0<Z;--Z)s(C,R,C[R-1],16),R+=32}function La(C,R,Z){var ce;for(ce=0;16>ce;++ce)s(R,Z+32*ce,C,16)}function Xn(C,R){var Z,ce=16;for(Z=0;16>Z;++Z)ce+=C[R-1+32*Z]+C[R+Z-32];La(ce>>5,C,R)}function bn(C,R){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=C[R-1+32*Z];La(ce>>4,C,R)}function Sr(C,R){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=C[R+Z-32];La(ce>>4,C,R)}function en(C,R){La(128,C,R)}function sr(C,R,Z){return C+2*R+Z+2>>2}function Dn(C,R){var Z,ce=R-32;for(ce=new Uint8Array([sr(C[ce-1],C[ce+0],C[ce+1]),sr(C[ce+0],C[ce+1],C[ce+2]),sr(C[ce+1],C[ce+2],C[ce+3]),sr(C[ce+2],C[ce+3],C[ce+4])]),Z=0;4>Z;++Z)a(C,R+32*Z,ce,0,ce.length)}function Ar(C,R){var Z=C[R-1],ce=C[R-1+32],be=C[R-1+64],Ee=C[R-1+96];ue(C,R+0,16843009*sr(C[R-1-32],Z,ce)),ue(C,R+32,16843009*sr(Z,ce,be)),ue(C,R+64,16843009*sr(ce,be,Ee)),ue(C,R+96,16843009*sr(be,Ee,Ee))}function Fa(C,R){var Z,ce=4;for(Z=0;4>Z;++Z)ce+=C[R+Z-32]+C[R-1+32*Z];for(ce>>=3,Z=0;4>Z;++Z)s(C,R+32*Z,ce,4)}function ho(C,R){var Z=C[R-1+0],ce=C[R-1+32],be=C[R-1+64],Ee=C[R-1-32],De=C[R+0-32],Le=C[R+1-32],Re=C[R+2-32],ze=C[R+3-32];C[R+0+96]=sr(ce,be,C[R-1+96]),C[R+1+96]=C[R+0+64]=sr(Z,ce,be),C[R+2+96]=C[R+1+64]=C[R+0+32]=sr(Ee,Z,ce),C[R+3+96]=C[R+2+64]=C[R+1+32]=C[R+0+0]=sr(De,Ee,Z),C[R+3+64]=C[R+2+32]=C[R+1+0]=sr(Le,De,Ee),C[R+3+32]=C[R+2+0]=sr(Re,Le,De),C[R+3+0]=sr(ze,Re,Le)}function gs(C,R){var Z=C[R+1-32],ce=C[R+2-32],be=C[R+3-32],Ee=C[R+4-32],De=C[R+5-32],Le=C[R+6-32],Re=C[R+7-32];C[R+0+0]=sr(C[R+0-32],Z,ce),C[R+1+0]=C[R+0+32]=sr(Z,ce,be),C[R+2+0]=C[R+1+32]=C[R+0+64]=sr(ce,be,Ee),C[R+3+0]=C[R+2+32]=C[R+1+64]=C[R+0+96]=sr(be,Ee,De),C[R+3+32]=C[R+2+64]=C[R+1+96]=sr(Ee,De,Le),C[R+3+64]=C[R+2+96]=sr(De,Le,Re),C[R+3+96]=sr(Le,Re,Re)}function vs(C,R){var Z=C[R-1+0],ce=C[R-1+32],be=C[R-1+64],Ee=C[R-1-32],De=C[R+0-32],Le=C[R+1-32],Re=C[R+2-32],ze=C[R+3-32];C[R+0+0]=C[R+1+64]=Ee+De+1>>1,C[R+1+0]=C[R+2+64]=De+Le+1>>1,C[R+2+0]=C[R+3+64]=Le+Re+1>>1,C[R+3+0]=Re+ze+1>>1,C[R+0+96]=sr(be,ce,Z),C[R+0+64]=sr(ce,Z,Ee),C[R+0+32]=C[R+1+96]=sr(Z,Ee,De),C[R+1+32]=C[R+2+96]=sr(Ee,De,Le),C[R+2+32]=C[R+3+96]=sr(De,Le,Re),C[R+3+32]=sr(Le,Re,ze)}function bs(C,R){var Z=C[R+0-32],ce=C[R+1-32],be=C[R+2-32],Ee=C[R+3-32],De=C[R+4-32],Le=C[R+5-32],Re=C[R+6-32],ze=C[R+7-32];C[R+0+0]=Z+ce+1>>1,C[R+1+0]=C[R+0+64]=ce+be+1>>1,C[R+2+0]=C[R+1+64]=be+Ee+1>>1,C[R+3+0]=C[R+2+64]=Ee+De+1>>1,C[R+0+32]=sr(Z,ce,be),C[R+1+32]=C[R+0+96]=sr(ce,be,Ee),C[R+2+32]=C[R+1+96]=sr(be,Ee,De),C[R+3+32]=C[R+2+96]=sr(Ee,De,Le),C[R+3+64]=sr(De,Le,Re),C[R+3+96]=sr(Le,Re,ze)}function mo(C,R){var Z=C[R-1+0],ce=C[R-1+32],be=C[R-1+64],Ee=C[R-1+96];C[R+0+0]=Z+ce+1>>1,C[R+2+0]=C[R+0+32]=ce+be+1>>1,C[R+2+32]=C[R+0+64]=be+Ee+1>>1,C[R+1+0]=sr(Z,ce,be),C[R+3+0]=C[R+1+32]=sr(ce,be,Ee),C[R+3+32]=C[R+1+64]=sr(be,Ee,Ee),C[R+3+64]=C[R+2+64]=C[R+0+96]=C[R+1+96]=C[R+2+96]=C[R+3+96]=Ee}function ml(C,R){var Z=C[R-1+0],ce=C[R-1+32],be=C[R-1+64],Ee=C[R-1+96],De=C[R-1-32],Le=C[R+0-32],Re=C[R+1-32],ze=C[R+2-32];C[R+0+0]=C[R+2+32]=Z+De+1>>1,C[R+0+32]=C[R+2+64]=ce+Z+1>>1,C[R+0+64]=C[R+2+96]=be+ce+1>>1,C[R+0+96]=Ee+be+1>>1,C[R+3+0]=sr(Le,Re,ze),C[R+2+0]=sr(De,Le,Re),C[R+1+0]=C[R+3+32]=sr(Z,De,Le),C[R+1+32]=C[R+3+64]=sr(ce,Z,De),C[R+1+64]=C[R+3+96]=sr(be,ce,Z),C[R+1+96]=sr(Ee,be,ce)}function zu(C,R){var Z;for(Z=0;8>Z;++Z)a(C,R+32*Z,C,R-32,8)}function po(C,R){var Z;for(Z=0;8>Z;++Z)s(C,R,C[R-1],8),R+=32}function Hi(C,R,Z){var ce;for(ce=0;8>ce;++ce)s(R,Z+32*ce,C,8)}function hi(C,R){var Z,ce=8;for(Z=0;8>Z;++Z)ce+=C[R+Z-32]+C[R-1+32*Z];Hi(ce>>4,C,R)}function rc(C,R){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=C[R+Z-32];Hi(ce>>3,C,R)}function He(C,R){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=C[R-1+32*Z];Hi(ce>>3,C,R)}function pr(C,R){Hi(128,C,R)}function Br(C,R,Z){var ce=C[R-Z],be=C[R+0],Ee=3*(be-ce)+$o[1020+C[R-2*Z]-C[R+Z]],De=Fl[112+(Ee+4>>3)];C[R-Z]=pi[255+ce+Fl[112+(Ee+3>>3)]],C[R+0]=pi[255+be-De]}function $r(C,R,Z,ce){var be=C[R+0],Ee=C[R+Z];return xi[255+C[R-2*Z]-C[R-Z]]>ce||xi[255+Ee-be]>ce}function hn(C,R,Z,ce){return 4*xi[255+C[R-Z]-C[R+0]]+xi[255+C[R-2*Z]-C[R+Z]]<=ce}function qn(C,R,Z,ce,be){var Ee=C[R-3*Z],De=C[R-2*Z],Le=C[R-Z],Re=C[R+0],ze=C[R+Z],st=C[R+2*Z],gt=C[R+3*Z];return 4*xi[255+Le-Re]+xi[255+De-ze]>ce?0:xi[255+C[R-4*Z]-Ee]<=be&&xi[255+Ee-De]<=be&&xi[255+De-Le]<=be&&xi[255+gt-st]<=be&&xi[255+st-ze]<=be&&xi[255+ze-Re]<=be}function ua(C,R,Z,ce){var be=2*ce+1;for(ce=0;16>ce;++ce)hn(C,R+ce,Z,be)&&Br(C,R+ce,Z)}function Ma(C,R,Z,ce){var be=2*ce+1;for(ce=0;16>ce;++ce)hn(C,R+ce*Z,1,be)&&Br(C,R+ce*Z,1)}function ys(C,R,Z,ce){var be;for(be=3;0<be;--be)ua(C,R+=4*Z,Z,ce)}function Mf(C,R,Z,ce){var be;for(be=3;0<be;--be)Ma(C,R+=4,Z,ce)}function Wi(C,R,Z,ce,be,Ee,De,Le){for(Ee=2*Ee+1;0<be--;){if(qn(C,R,Z,Ee,De))if($r(C,R,Z,Le))Br(C,R,Z);else{var Re=C,ze=R,st=Z,gt=Re[ze-2*st],vt=Re[ze-st],mt=Re[ze+0],Ut=Re[ze+st],St=Re[ze+2*st],dt=27*(Et=$o[1020+3*(mt-vt)+$o[1020+gt-Ut]])+63>>7,ot=18*Et+63>>7,Et=9*Et+63>>7;Re[ze-3*st]=pi[255+Re[ze-3*st]+Et],Re[ze-2*st]=pi[255+gt+ot],Re[ze-st]=pi[255+vt+dt],Re[ze+0]=pi[255+mt-dt],Re[ze+st]=pi[255+Ut-ot],Re[ze+2*st]=pi[255+St-Et]}R+=ce}}function Ai(C,R,Z,ce,be,Ee,De,Le){for(Ee=2*Ee+1;0<be--;){if(qn(C,R,Z,Ee,De))if($r(C,R,Z,Le))Br(C,R,Z);else{var Re=C,ze=R,st=Z,gt=Re[ze-st],vt=Re[ze+0],mt=Re[ze+st],Ut=Fl[112+((St=3*(vt-gt))+4>>3)],St=Fl[112+(St+3>>3)],dt=Ut+1>>1;Re[ze-2*st]=pi[255+Re[ze-2*st]+dt],Re[ze-st]=pi[255+gt+St],Re[ze+0]=pi[255+vt-Ut],Re[ze+st]=pi[255+mt-dt]}R+=ce}}function Ol(C,R,Z,ce,be,Ee){Wi(C,R,Z,1,16,ce,be,Ee)}function ws(C,R,Z,ce,be,Ee){Wi(C,R,1,Z,16,ce,be,Ee)}function xo(C,R,Z,ce,be,Ee){var De;for(De=3;0<De;--De)Ai(C,R+=4*Z,Z,1,16,ce,be,Ee)}function Lo(C,R,Z,ce,be,Ee){var De;for(De=3;0<De;--De)Ai(C,R+=4,1,Z,16,ce,be,Ee)}function pd(C,R,Z,ce,be,Ee,De,Le){Wi(C,R,be,1,8,Ee,De,Le),Wi(Z,ce,be,1,8,Ee,De,Le)}function Ac(C,R,Z,ce,be,Ee,De,Le){Wi(C,R,1,be,8,Ee,De,Le),Wi(Z,ce,1,be,8,Ee,De,Le)}function xd(C,R,Z,ce,be,Ee,De,Le){Ai(C,R+4*be,be,1,8,Ee,De,Le),Ai(Z,ce+4*be,be,1,8,Ee,De,Le)}function pl(C,R,Z,ce,be,Ee,De,Le){Ai(C,R+4,1,be,8,Ee,De,Le),Ai(Z,ce+4,1,be,8,Ee,De,Le)}function Ei(){this.ba=new Fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hu(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new E}function nu(){this.xb=this.a=0,this.l=new za,this.ca=new Fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hu,this.ab=0,this.gc=o(4,gd),this.Oc=0}function Ec(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new za,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ya(C,R,Z,ce,be,Ee,De){for(C=C==null?0:C[R+0],R=0;R<De;++R)be[Ee+R]=C+Z[ce+R]&255,C=be[Ee+R]}function Wu(C,R,Z,ce,be,Ee,De){var Le;if(C==null)ya(null,null,Z,ce,be,Ee,De);else for(Le=0;Le<De;++Le)be[Ee+Le]=C[R+Le]+Z[ce+Le]&255}function nc(C,R,Z,ce,be,Ee,De){if(C==null)ya(null,null,Z,ce,be,Ee,De);else{var Le,Re=C[R+0],ze=Re,st=Re;for(Le=0;Le<De;++Le)ze=st+(Re=C[R+Le])-ze,st=Z[ce+Le]+(-256&ze?0>ze?0:255:ze)&255,ze=Re,be[Ee+Le]=st}}function au(C,R,Z,ce){var be=R.width,Ee=R.o;if(t(C!=null&&R!=null),0>Z||0>=ce||Z+ce>Ee)return null;if(!C.Cc){if(C.ga==null){var De;if(C.ga=new Ec,(De=C.ga==null)||(De=R.width*R.o,t(C.Gb.length==0),C.Gb=i(De),C.Uc=0,C.Gb==null?De=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,De=1),De=!De),!De){De=C.ga;var Le=C.Fa,Re=C.P,ze=C.qc,st=C.mb,gt=C.nb,vt=Re+1,mt=ze-1,Ut=De.l;if(t(Le!=null&&st!=null&&R!=null),ls[0]=null,ls[1]=ya,ls[2]=Wu,ls[3]=nc,De.ca=st,De.tb=gt,De.c=R.width,De.i=R.height,t(0<De.c&&0<De.i),1>=ze)R=0;else if(De.$a=Le[Re+0]>>0&3,De.Z=Le[Re+0]>>2&3,De.Lc=Le[Re+0]>>4&3,Re=Le[Re+0]>>6&3,0>De.$a||1<De.$a||4<=De.Z||1<De.Lc||Re)R=0;else if(Ut.put=jr,Ut.ac=Gr,Ut.bc=qr,Ut.ma=De,Ut.width=R.width,Ut.height=R.height,Ut.Da=R.Da,Ut.v=R.v,Ut.va=R.va,Ut.j=R.j,Ut.o=R.o,De.$a)e:{t(De.$a==1),R=nt();t:for(;;){if(R==null){R=0;break e}if(t(De!=null),De.mc=R,R.c=De.c,R.i=De.i,R.l=De.l,R.l.ma=De,R.l.width=De.c,R.l.height=De.i,R.a=0,re(R.m,Le,vt,mt),!Qe(De.c,De.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&Se(R.s)?(De.ic=1,Le=R.c*R.i,R.Ta=null,R.Ua=0,R.V=i(Le),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(De.ic=0,R=tt(R,De.c)),!R))break t;R=1;break e}De.mc=null,R=0}else R=mt>=De.c*De.i;De=!R}if(De)return null;C.ga.Lc!=1?C.Ga=0:ce=Ee-Z}t(C.ga!=null),t(Z+ce<=Ee);e:{if(R=(Le=C.ga).c,Ee=Le.l.o,Le.$a==0){if(vt=C.rc,mt=C.Vc,Ut=C.Fa,Re=C.P+1+Z*R,ze=C.mb,st=C.nb+Z*R,t(Re<=C.P+C.qc),Le.Z!=0)for(t(ls[Le.Z]!=null),De=0;De<ce;++De)ls[Le.Z](vt,mt,Ut,Re,ze,st,R),vt=ze,mt=st,st+=R,Re+=R;else for(De=0;De<ce;++De)a(ze,st,Ut,Re,R),vt=ze,mt=st,st+=R,Re+=R;C.rc=vt,C.Vc=mt}else{if(t(Le.mc!=null),R=Z+ce,t((De=Le.mc)!=null),t(R<=De.i),De.C>=R)R=1;else if(Le.ic||xt(),Le.ic){Le=De.V,vt=De.Ba,mt=De.c;var St=De.i,dt=(Ut=1,Re=De.$/mt,ze=De.$%mt,st=De.m,gt=De.s,De.$),ot=mt*St,Et=mt*R,Ct=gt.wc,Ft=dt<Et?Or(gt,ze,Re):null;t(dt<=ot),t(R<=St),t(Se(gt));t:for(;;){for(;!st.h&&dt<Et;){if(ze&Ct||(Ft=Or(gt,ze,Re)),t(Ft!=null),K(st),256>(St=pn(Ft.G[0],Ft.H[0],st)))Le[vt+dt]=St,++dt,++ze>=mt&&(ze=0,++Re<=R&&!(Re%16)&&ve(De,Re));else{if(!(280>St)){Ut=0;break t}St=Xr(St-256,st);var or,rr=pn(Ft.G[4],Ft.H[4],st);if(K(st),!(dt>=(rr=Vr(mt,rr=Xr(rr,st)))&&ot-dt>=St)){Ut=0;break t}for(or=0;or<St;++or)Le[vt+dt+or]=Le[vt+dt+or-rr];for(dt+=St,ze+=St;ze>=mt;)ze-=mt,++Re<=R&&!(Re%16)&&ve(De,Re);dt<Et&&ze&Ct&&(Ft=Or(gt,ze,Re))}t(st.h==V(st))}ve(De,Re>R?R:Re);break t}!Ut||st.h&&dt<ot?(Ut=0,De.a=st.h?5:3):De.$=dt,R=Ut}else R=Ae(De,De.V,De.Ba,De.c,De.i,R,Xe);if(!R){ce=0;break e}}Z+ce>=Ee&&(C.Cc=1),ce=1}if(!ce)return null;if(C.Cc&&((ce=C.ga)!=null&&(ce.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+Z*be}function G(C,R,Z,ce,be,Ee){for(;0<be--;){var De,Le=C,Re=R+(Z?1:0),ze=C,st=R+(Z?0:3);for(De=0;De<ce;++De){var gt=ze[st+4*De];gt!=255&&(gt*=32897,Le[Re+4*De+0]=Le[Re+4*De+0]*gt>>23,Le[Re+4*De+1]=Le[Re+4*De+1]*gt>>23,Le[Re+4*De+2]=Le[Re+4*De+2]*gt>>23)}R+=Ee}}function Ne(C,R,Z,ce,be){for(;0<ce--;){var Ee;for(Ee=0;Ee<Z;++Ee){var De=C[R+2*Ee+0],Le=15&(ze=C[R+2*Ee+1]),Re=4369*Le,ze=(240&ze|ze>>4)*Re>>16;C[R+2*Ee+0]=(240&De|De>>4)*Re>>16&240|(15&De|De<<4)*Re>>16>>4&15,C[R+2*Ee+1]=240&ze|Le}R+=be}}function Ye(C,R,Z,ce,be,Ee,De,Le){var Re,ze,st=255;for(ze=0;ze<be;++ze){for(Re=0;Re<ce;++Re){var gt=C[R+Re];Ee[De+4*Re]=gt,st&=gt}R+=Z,De+=Le}return st!=255}function at(C,R,Z,ce,be){var Ee;for(Ee=0;Ee<be;++Ee)Z[ce+Ee]=C[R+Ee]>>8}function xt(){Ss=G,na=Ne,Yn=Ye,An=at}function Ot(C,R,Z){P[C]=function(ce,be,Ee,De,Le,Re,ze,st,gt,vt,mt,Ut,St,dt,ot,Et,Ct){var Ft,or=Ct-1>>1,rr=Le[Re+0]|ze[st+0]<<16,Wr=gt[vt+0]|mt[Ut+0]<<16;t(ce!=null);var fr=3*rr+Wr+131074>>2;for(R(ce[be+0],255&fr,fr>>16,St,dt),Ee!=null&&(fr=3*Wr+rr+131074>>2,R(Ee[De+0],255&fr,fr>>16,ot,Et)),Ft=1;Ft<=or;++Ft){var yn=Le[Re+Ft]|ze[st+Ft]<<16,In=gt[vt+Ft]|mt[Ut+Ft]<<16,En=rr+yn+Wr+In+524296,cn=En+2*(yn+Wr)>>3;fr=cn+rr>>1,rr=(En=En+2*(rr+In)>>3)+yn>>1,R(ce[be+2*Ft-1],255&fr,fr>>16,St,dt+(2*Ft-1)*Z),R(ce[be+2*Ft-0],255&rr,rr>>16,St,dt+(2*Ft-0)*Z),Ee!=null&&(fr=En+Wr>>1,rr=cn+In>>1,R(Ee[De+2*Ft-1],255&fr,fr>>16,ot,Et+(2*Ft-1)*Z),R(Ee[De+2*Ft+0],255&rr,rr>>16,ot,Et+(2*Ft+0)*Z)),rr=yn,Wr=In}1&Ct||(fr=3*rr+Wr+131074>>2,R(ce[be+Ct-1],255&fr,fr>>16,St,dt+(Ct-1)*Z),Ee!=null&&(fr=3*Wr+rr+131074>>2,R(Ee[De+Ct-1],255&fr,fr>>16,ot,Et+(Ct-1)*Z)))}}function Wt(){Qi[Vu]=vp,Qi[ac]=Fc,Qi[Vh]=qf,Qi[cu]=Ml,Qi[Gu]=Mc,Qi[fa]=Zu,Qi[Rf]=$f,Qi[Ic]=Fc,Qi[jd]=Ml,Qi[du]=Mc,Qi[Ku]=Zu}function gr(C){return C&-16384?0>C?0:255:C>>Rc}function Hr(C,R){return gr((19077*C>>8)+(26149*R>>8)-14234)}function on(C,R,Z){return gr((19077*C>>8)-(6419*R>>8)-(13320*Z>>8)+8708)}function tn(C,R){return gr((19077*C>>8)+(33050*R>>8)-17685)}function Cn(C,R,Z,ce,be){ce[be+0]=Hr(C,Z),ce[be+1]=on(C,R,Z),ce[be+2]=tn(C,R)}function Ha(C,R,Z,ce,be){ce[be+0]=tn(C,R),ce[be+1]=on(C,R,Z),ce[be+2]=Hr(C,Z)}function Wa(C,R,Z,ce,be){var Ee=on(C,R,Z);R=Ee<<3&224|tn(C,R)>>3,ce[be+0]=248&Hr(C,Z)|Ee>>5,ce[be+1]=R}function Ns(C,R,Z,ce,be){var Ee=240&tn(C,R)|15;ce[be+0]=240&Hr(C,Z)|on(C,R,Z)>>4,ce[be+1]=Ee}function Zs(C,R,Z,ce,be){ce[be+0]=255,Cn(C,R,Z,ce,be+1)}function Us(C,R,Z,ce,be){Ha(C,R,Z,ce,be),ce[be+3]=255}function Mo(C,R,Z,ce,be){Cn(C,R,Z,ce,be),ce[be+3]=255}function ei(C,R){return 0>C?0:C>R?R:C}function go(C,R,Z){P[C]=function(ce,be,Ee,De,Le,Re,ze,st,gt){for(var vt=st+(-2&gt)*Z;st!=vt;)R(ce[be+0],Ee[De+0],Le[Re+0],ze,st),R(ce[be+1],Ee[De+0],Le[Re+0],ze,st+Z),be+=2,++De,++Re,st+=2*Z;1&gt&&R(ce[be+0],Ee[De+0],Le[Re+0],ze,st)}}function vo(C,R,Z){return Z==0?C==0?R==0?6:5:R==0?4:0:Z}function su(C,R,Z,ce,be){switch(C>>>30){case 3:gl(R,Z,ce,be,0);break;case 2:Gn(R,Z,ce,be);break;case 1:ti(R,Z,ce,be)}}function iu(C,R){var Z,ce,be=R.M,Ee=R.Nb,De=C.oc,Le=C.pc+40,Re=C.oc,ze=C.pc+584,st=C.oc,gt=C.pc+600;for(Z=0;16>Z;++Z)De[Le+32*Z-1]=129;for(Z=0;8>Z;++Z)Re[ze+32*Z-1]=129,st[gt+32*Z-1]=129;for(0<be?De[Le-1-32]=Re[ze-1-32]=st[gt-1-32]=129:(s(De,Le-32-1,127,21),s(Re,ze-32-1,127,9),s(st,gt-32-1,127,9)),ce=0;ce<C.za;++ce){var vt=R.ya[R.aa+ce];if(0<ce){for(Z=-1;16>Z;++Z)a(De,Le+32*Z-4,De,Le+32*Z+12,4);for(Z=-1;8>Z;++Z)a(Re,ze+32*Z-4,Re,ze+32*Z+4,4),a(st,gt+32*Z-4,st,gt+32*Z+4,4)}var mt=C.Gd,Ut=C.Hd+ce,St=vt.ad,dt=vt.Hc;if(0<be&&(a(De,Le-32,mt[Ut].y,0,16),a(Re,ze-32,mt[Ut].f,0,8),a(st,gt-32,mt[Ut].ea,0,8)),vt.Za){var ot=De,Et=Le-32+16;for(0<be&&(ce>=C.za-1?s(ot,Et,mt[Ut].y[15],4):a(ot,Et,mt[Ut+1].y,0,4)),Z=0;4>Z;Z++)ot[Et+128+Z]=ot[Et+256+Z]=ot[Et+384+Z]=ot[Et+0+Z];for(Z=0;16>Z;++Z,dt<<=2)ot=De,Et=Le+B0[Z],wo[vt.Ob[Z]](ot,Et),su(dt,St,16*+Z,ot,Et)}else if(ot=vo(ce,be,vt.Ob[0]),os[ot](De,Le),dt!=0)for(Z=0;16>Z;++Z,dt<<=2)su(dt,St,16*+Z,De,Le+B0[Z]);for(Z=vt.Gc,ot=vo(ce,be,vt.Dd),Pi[ot](Re,ze),Pi[ot](st,gt),dt=St,ot=Re,Et=ze,255&(vt=Z>>0)&&(170&vt?Il(dt,256,ot,Et):Ti(dt,256,ot,Et)),vt=st,dt=gt,255&(Z>>=8)&&(170&Z?Il(St,320,vt,dt):Ti(St,320,vt,dt)),be<C.Ub-1&&(a(mt[Ut].y,0,De,Le+480,16),a(mt[Ut].f,0,Re,ze+224,8),a(mt[Ut].ea,0,st,gt+224,8)),Z=8*Ee*C.B,mt=C.sa,Ut=C.ta+16*ce+16*Ee*C.R,St=C.qa,vt=C.ra+8*ce+Z,dt=C.Ha,ot=C.Ia+8*ce+Z,Z=0;16>Z;++Z)a(mt,Ut+Z*C.R,De,Le+32*Z,16);for(Z=0;8>Z;++Z)a(St,vt+Z*C.B,Re,ze+32*Z,8),a(dt,ot+Z*C.B,st,gt+32*Z,8)}}function Tc(C,R,Z,ce,be,Ee,De,Le,Re){var ze=[0],st=[0],gt=0,vt=Re!=null?Re.kd:0,mt=Re??new Fo;if(C==null||12>Z)return 7;mt.data=C,mt.w=R,mt.ha=Z,R=[R],Z=[Z],mt.gb=[mt.gb];e:{var Ut=R,St=Z,dt=mt.gb;if(t(C!=null),t(St!=null),t(dt!=null),dt[0]=0,12<=St[0]&&!r(C,Ut[0],"RIFF")){if(r(C,Ut[0]+8,"WEBP")){dt=3;break e}var ot=$e(C,Ut[0]+4);if(12>ot||4294967286<ot){dt=3;break e}if(vt&&ot>St[0]-8){dt=7;break e}dt[0]=ot,Ut[0]+=12,St[0]-=12}dt=0}if(dt!=0)return dt;for(ot=0<mt.gb[0],Z=Z[0];;){e:{var Et=C;St=R,dt=Z;var Ct=ze,Ft=st,or=Ut=[0];if((fr=gt=[gt])[0]=0,8>dt[0])dt=7;else{if(!r(Et,St[0],"VP8X")){if($e(Et,St[0]+4)!=10){dt=3;break e}if(18>dt[0]){dt=7;break e}var rr=$e(Et,St[0]+8),Wr=1+me(Et,St[0]+12);if(2147483648<=Wr*(Et=1+me(Et,St[0]+15))){dt=3;break e}or!=null&&(or[0]=rr),Ct!=null&&(Ct[0]=Wr),Ft!=null&&(Ft[0]=Et),St[0]+=18,dt[0]-=18,fr[0]=1}dt=0}}if(gt=gt[0],Ut=Ut[0],dt!=0)return dt;if(St=!!(2&Ut),!ot&&gt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Ut)),De!=null&&(De[0]=St),Le!=null&&(Le[0]=0),De=ze[0],Ut=st[0],gt&&St&&Re==null){dt=0;break}if(4>Z){dt=7;break}if(ot&&gt||!ot&&!gt&&!r(C,R[0],"ALPH")){Z=[Z],mt.na=[mt.na],mt.P=[mt.P],mt.Sa=[mt.Sa];e:{rr=C,dt=R,ot=Z;var fr=mt.gb;Ct=mt.na,Ft=mt.P,or=mt.Sa,Wr=22,t(rr!=null),t(ot!=null),Et=dt[0];var yn=ot[0];for(t(Ct!=null),t(or!=null),Ct[0]=null,Ft[0]=null,or[0]=0;;){if(dt[0]=Et,ot[0]=yn,8>yn){dt=7;break e}var In=$e(rr,Et+4);if(4294967286<In){dt=3;break e}var En=8+In+1&-2;if(Wr+=En,0<fr&&Wr>fr){dt=3;break e}if(!r(rr,Et,"VP8 ")||!r(rr,Et,"VP8L")){dt=0;break e}if(yn[0]<En){dt=7;break e}r(rr,Et,"ALPH")||(Ct[0]=rr,Ft[0]=Et+8,or[0]=In),Et+=En,yn-=En}}if(Z=Z[0],mt.na=mt.na[0],mt.P=mt.P[0],mt.Sa=mt.Sa[0],dt!=0)break}Z=[Z],mt.Ja=[mt.Ja],mt.xa=[mt.xa];e:if(fr=C,dt=R,ot=Z,Ct=mt.gb[0],Ft=mt.Ja,or=mt.xa,rr=dt[0],Et=!r(fr,rr,"VP8 "),Wr=!r(fr,rr,"VP8L"),t(fr!=null),t(ot!=null),t(Ft!=null),t(or!=null),8>ot[0])dt=7;else{if(Et||Wr){if(fr=$e(fr,rr+4),12<=Ct&&fr>Ct-12){dt=3;break e}if(vt&&fr>ot[0]-8){dt=7;break e}Ft[0]=fr,dt[0]+=8,ot[0]-=8,or[0]=Wr}else or[0]=5<=ot[0]&&fr[rr+0]==47&&!(fr[rr+4]>>5),Ft[0]=ot[0];dt=0}if(Z=Z[0],mt.Ja=mt.Ja[0],mt.xa=mt.xa[0],R=R[0],dt!=0)break;if(4294967286<mt.Ja)return 3;if(Le==null||St||(Le[0]=mt.xa?2:1),De=[De],Ut=[Ut],mt.xa){if(5>Z){dt=7;break}Le=De,vt=Ut,St=Ee,C==null||5>Z?C=0:5<=Z&&C[R+0]==47&&!(C[R+4]>>5)?(ot=[0],fr=[0],Ct=[0],re(Ft=new O,C,R,Z),tr(Ft,ot,fr,Ct)?(Le!=null&&(Le[0]=ot[0]),vt!=null&&(vt[0]=fr[0]),St!=null&&(St[0]=Ct[0]),C=1):C=0):C=0}else{if(10>Z){dt=7;break}Le=Ut,C==null||10>Z||!Do(C,R+3,Z-3)?C=0:(vt=C[R+0]|C[R+1]<<8|C[R+2]<<16,St=16383&(C[R+7]<<8|C[R+6]),C=16383&(C[R+9]<<8|C[R+8]),1&vt||3<(vt>>1&7)||!(vt>>4&1)||vt>>5>=mt.Ja||!St||!C?C=0:(De&&(De[0]=St),Le&&(Le[0]=C),C=1))}if(!C||(De=De[0],Ut=Ut[0],gt&&(ze[0]!=De||st[0]!=Ut)))return 3;Re!=null&&(Re[0]=mt,Re.offset=R-Re.w,t(4294967286>R-Re.w),t(Re.offset==Re.ha-Z));break}return dt==0||dt==7&&gt&&Re==null?(Ee!=null&&(Ee[0]|=mt.na!=null&&0<mt.na.length),ce!=null&&(ce[0]=De),be!=null&&(be[0]=Ut),0):dt}function vd(C,R,Z){var ce=R.width,be=R.height,Ee=0,De=0,Le=ce,Re=be;if(R.Da=C!=null&&0<C.Da,R.Da&&(Le=C.cd,Re=C.bd,Ee=C.v,De=C.j,11>Z||(Ee&=-2,De&=-2),0>Ee||0>De||0>=Le||0>=Re||Ee+Le>ce||De+Re>be))return 0;if(R.v=Ee,R.j=De,R.va=Ee+Le,R.o=De+Re,R.U=Le,R.T=Re,R.da=C!=null&&0<C.da,R.da){if(!Te(Le,Re,Z=[C.ib],Ee=[C.hb]))return 0;R.ib=Z[0],R.hb=Ee[0]}return R.ob=C!=null&&C.ob,R.Kb=C==null||!C.Sd,R.da&&(R.ob=R.ib<3*ce/4&&R.hb<3*be/4,R.Kb=0),1}function bd(C){if(C==null)return 2;if(11>C.S){var R=C.f.RGBA;R.fb+=(C.height-1)*R.A,R.A=-R.A}else R=C.f.kb,C=C.height,R.O+=(C-1)*R.fa,R.fa=-R.fa,R.N+=(C-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(C-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(C-1)*R.lb,R.lb=-R.lb);return 0}function yd(C,R,Z,ce){if(ce==null||0>=C||0>=R)return 2;if(Z!=null){if(Z.Da){var be=Z.cd,Ee=Z.bd,De=-2&Z.v,Le=-2&Z.j;if(0>De||0>Le||0>=be||0>=Ee||De+be>C||Le+Ee>R)return 2;C=be,R=Ee}if(Z.da){if(!Te(C,R,be=[Z.ib],Ee=[Z.hb]))return 2;C=be[0],R=Ee[0]}}ce.width=C,ce.height=R;e:{var Re=ce.width,ze=ce.height;if(C=ce.S,0>=Re||0>=ze||!(C>=Vu&&13>C))C=2;else{if(0>=ce.Rd&&ce.sd==null){De=Ee=be=R=0;var st=(Le=Re*Ra[C])*ze;if(11>C||(Ee=(ze+1)/2*(R=(Re+1)/2),C==12&&(De=(be=Re)*ze)),(ze=i(st+2*Ee+De))==null){C=1;break e}ce.sd=ze,11>C?((Re=ce.f.RGBA).eb=ze,Re.fb=0,Re.A=Le,Re.size=st):((Re=ce.f.kb).y=ze,Re.O=0,Re.fa=Le,Re.Fd=st,Re.f=ze,Re.N=0+st,Re.Ab=R,Re.Cd=Ee,Re.ea=ze,Re.W=0+st+Ee,Re.Db=R,Re.Ed=Ee,C==12&&(Re.F=ze,Re.J=0+st+2*Ee),Re.Tc=De,Re.lb=be)}if(R=1,be=ce.S,Ee=ce.width,De=ce.height,be>=Vu&&13>be)if(11>be)C=ce.f.RGBA,R&=(Le=Math.abs(C.A))*(De-1)+Ee<=C.size,R&=Le>=Ee*Ra[be],R&=C.eb!=null;else{C=ce.f.kb,Le=(Ee+1)/2,st=(De+1)/2,Re=Math.abs(C.fa),ze=Math.abs(C.Ab);var gt=Math.abs(C.Db),vt=Math.abs(C.lb),mt=vt*(De-1)+Ee;R&=Re*(De-1)+Ee<=C.Fd,R&=ze*(st-1)+Le<=C.Cd,R=(R&=gt*(st-1)+Le<=C.Ed)&Re>=Ee&ze>=Le&gt>=Le,R&=C.y!=null,R&=C.f!=null,R&=C.ea!=null,be==12&&(R&=vt>=Ee,R&=mt<=C.Tc,R&=C.F!=null)}else R=0;C=R?0:2}}return C!=0||Z!=null&&Z.fd&&(C=bd(ce)),C}var _a=64,bo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xl=24,rs=32,Oc=8,ln=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];he("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(C){return C},P.Predictor2=function(C,R,Z){return R[Z+0]},P.Predictor3=function(C,R,Z){return R[Z+1]},P.Predictor4=function(C,R,Z){return R[Z-1]},P.Predictor5=function(C,R,Z){return Ce(Ce(C,R[Z+1]),R[Z+0])},P.Predictor6=function(C,R,Z){return Ce(C,R[Z-1])},P.Predictor7=function(C,R,Z){return Ce(C,R[Z+0])},P.Predictor8=function(C,R,Z){return Ce(R[Z-1],R[Z+0])},P.Predictor9=function(C,R,Z){return Ce(R[Z+0],R[Z+1])},P.Predictor10=function(C,R,Z){return Ce(Ce(C,R[Z-1]),Ce(R[Z+0],R[Z+1]))},P.Predictor11=function(C,R,Z){var ce=R[Z+0];return 0>=fe(ce>>24&255,C>>24&255,(R=R[Z-1])>>24&255)+fe(ce>>16&255,C>>16&255,R>>16&255)+fe(ce>>8&255,C>>8&255,R>>8&255)+fe(255&ce,255&C,255&R)?ce:C},P.Predictor12=function(C,R,Z){var ce=R[Z+0];return(Ve((C>>24&255)+(ce>>24&255)-((R=R[Z-1])>>24&255))<<24|Ve((C>>16&255)+(ce>>16&255)-(R>>16&255))<<16|Ve((C>>8&255)+(ce>>8&255)-(R>>8&255))<<8|Ve((255&C)+(255&ce)-(255&R)))>>>0},P.Predictor13=function(C,R,Z){var ce=R[Z-1];return(ge((C=Ce(C,R[Z+0]))>>24&255,ce>>24&255)<<24|ge(C>>16&255,ce>>16&255)<<16|ge(C>>8&255,ce>>8&255)<<8|ge(C>>0&255,ce>>0&255))>>>0};var ss=P.PredictorAdd0;P.PredictorAdd1=_e,he("Predictor2","PredictorAdd2"),he("Predictor3","PredictorAdd3"),he("Predictor4","PredictorAdd4"),he("Predictor5","PredictorAdd5"),he("Predictor6","PredictorAdd6"),he("Predictor7","PredictorAdd7"),he("Predictor8","PredictorAdd8"),he("Predictor9","PredictorAdd9"),he("Predictor10","PredictorAdd10"),he("Predictor11","PredictorAdd11"),he("Predictor12","PredictorAdd12"),he("Predictor13","PredictorAdd13");var xa=P.PredictorAdd2;qe("ColorIndexInverseTransform","MapARGB","32b",(function(C){return C>>8&255}),(function(C){return C})),qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(C){return C}),(function(C){return C>>8&255}));var mi,$n=P.ColorIndexInverseTransform,qs=P.MapARGB,Va=P.VP8LColorIndexInverseTransformAlpha,Vi=P.MapAlpha,Ga=P.VP8LPredictorsAdd=[];Ga.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var js,wa,is,Gi,Pl,Ro,ou,gl,Gn,Il,ti,Ti,Dl,wd,Ll,Bo,Ki,$s,Xi,Oi,Yi,yo,Pc,ks,Ss,na,Yn,An,Ca=i(511),Uo=i(2041),lu=i(225),qo=i(767),Nd=0,$o=Uo,Fl=lu,pi=qo,xi=Ca,Vu=0,ac=1,Vh=2,cu=3,Gu=4,fa=5,Rf=6,Ic=7,jd=8,du=9,Ku=10,Dc=[2,3,7],Xu=[3,3,11],kd=[280,256,256,256,40],M0=[0,1,1,1,0],Bf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Gh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Qu=8,sc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],uu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fu=null,Uf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],R0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ic=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Sd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ju=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],os=[],wo=[],Pi=[],No=1,hu=2,ls=[],Qi=[];Ot("UpsampleRgbLinePair",Cn,3),Ot("UpsampleBgrLinePair",Ha,3),Ot("UpsampleRgbaLinePair",Mo,4),Ot("UpsampleBgraLinePair",Us,4),Ot("UpsampleArgbLinePair",Zs,4),Ot("UpsampleRgba4444LinePair",Ns,2),Ot("UpsampleRgb565LinePair",Wa,2);var vp=P.UpsampleRgbLinePair,qf=P.UpsampleBgrLinePair,Fc=P.UpsampleRgbaLinePair,Ml=P.UpsampleBgraLinePair,Mc=P.UpsampleArgbLinePair,Zu=P.UpsampleRgba4444LinePair,$f=P.UpsampleRgb565LinePair,zo=16,vl=1<<zo-1,Qn=-227,aa=482,Rc=6,_s=0,gi=i(256),Rl=i(256),_d=i(256),Ji=i(256),ef=i(aa-Qn),zf=i(aa-Qn);go("YuvToRgbRow",Cn,3),go("YuvToBgrRow",Ha,3),go("YuvToRgbaRow",Mo,4),go("YuvToBgraRow",Us,4),go("YuvToArgbRow",Zs,4),go("YuvToRgba4444Row",Ns,2),go("YuvToRgb565Row",Wa,2);var B0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bc=[0,2,8],Kh=[8,7,6,4,4,2,2,2,1,1,1,1],Ho=1;this.WebPDecodeRGBA=function(C,R,Z,ce,be){var Ee=ac,De=new Ei,Le=new Fr;De.ba=Le,Le.S=Ee,Le.width=[Le.width],Le.height=[Le.height];var Re=Le.width,ze=Le.height,st=new Mr;if(st==null||C==null)var gt=2;else t(st!=null),gt=Tc(C,R,Z,st.width,st.height,st.Pd,st.Qd,st.format,null);if(gt!=0?Re=0:(Re!=null&&(Re[0]=st.width[0]),ze!=null&&(ze[0]=st.height[0]),Re=1),Re){Le.width=Le.width[0],Le.height=Le.height[0],ce!=null&&(ce[0]=Le.width),be!=null&&(be[0]=Le.height);e:{if(ce=new za,(be=new Fo).data=C,be.w=R,be.ha=Z,be.kd=1,R=[0],t(be!=null),((C=Tc(be.data,be.w,be.ha,null,null,null,R,null,be))==0||C==7)&&R[0]&&(C=4),(R=C)==0){if(t(De!=null),ce.data=be.data,ce.w=be.w+be.offset,ce.ha=be.ha-be.offset,ce.put=jr,ce.ac=Gr,ce.bc=qr,ce.ma=De,be.xa){if((C=nt())==null){De=1;break e}if((function(vt,mt){var Ut=[0],St=[0],dt=[0];t:for(;;){if(vt==null)return 0;if(mt==null)return vt.a=2,0;if(vt.l=mt,vt.a=0,re(vt.m,mt.data,mt.w,mt.ha),!tr(vt.m,Ut,St,dt)){vt.a=3;break t}if(vt.xb=hu,mt.width=Ut[0],mt.height=St[0],!Qe(Ut[0],St[0],1,vt,null))break t;return 1}return t(vt.a!=0),0})(C,ce)){if(ce=(R=yd(ce.width,ce.height,De.Oa,De.ba))==0){t:{ce=C;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((Z=ce.l)!=null),t((be=Z.ma)!=null),ce.xb!=0){if(ce.ca=be.ba,ce.tb=be.tb,t(ce.ca!=null),!vd(be.Oa,Z,cu)){ce.a=2;break r}if(!tt(ce,Z.width)||Z.da)break r;if((Z.da||jt(ce.ca.S))&&xt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&xt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!Oe(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!Ae(ce,ce.V,ce.Ba,ce.c,ce.i,Z.o,je))break r;be.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(R=C.a)}else R=C.a}else{if((C=new Vn)==null){De=1;break e}if(C.Fa=be.na,C.P=be.P,C.qc=be.Sa,ba(C,ce)){if((R=yd(ce.width,ce.height,De.Oa,De.ba))==0){if(C.Aa=0,Z=De.Oa,t((be=C)!=null),Z!=null){if(0<(Re=0>(Re=Z.Md)?0:100<Re?255:255*Re/100)){for(ze=st=0;4>ze;++ze)12>(gt=be.pb[ze]).lc&&(gt.ia=Re*Kh[0>gt.lc?0:gt.lc]>>3),st|=gt.ia;st&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=Z.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}_t(C,ce)||(R=C.a)}}else R=C.a}R==0&&De.Oa!=null&&De.Oa.fd&&(R=bd(De.ba))}De=R}Ee=De!=0?null:11>Ee?Le.f.RGBA.eb:Le.f.kb.y}else Ee=null;return Ee};var Ra=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,I){for(var B="",T=0;T<4;T++)B+=String.fromCharCode(P[I++]);return B}function u(P,I){return(P[I+0]<<0|P[I+1]<<8|P[I+2]<<16)>>>0}function f(P,I){return(P[I+0]<<0|P[I+1]<<8|P[I+2]<<16|P[I+3]<<24)>>>0}new c;var p=[0],m=[0],b=[],v=new c,g=e,y=(function(P,I){var B={},T=0,E=!1,F=0,q=0;if(B.frames=[],!(function(z,V,U,K){for(var se=0;se<K;se++)if(z[V+se]!=U.charCodeAt(se))return!0;return!1})(P,I,"RIFF",4)){var H,Q;for(f(P,I+=4),I+=8;I<P.length;){var J=d(P,I),re=f(P,I+=4);I+=4;var X=re+(1&re);switch(J){case"VP8 ":case"VP8L":B.frames[T]===void 0&&(B.frames[T]={}),(O=B.frames[T]).src_off=E?q:I-8,O.src_size=F+re+8,T++,E&&(E=!1,F=0,q=0);break;case"VP8X":(O=B.header={}).feature_flags=P[I];var ee=I+4;O.canvas_width=1+u(P,ee),ee+=3,O.canvas_height=1+u(P,ee),ee+=3;break;case"ALPH":E=!0,F=X+8,q=I-8;break;case"ANIM":(O=B.header).bgcolor=f(P,I),ee=I+4,O.loop_count=(H=P)[(Q=ee)+0]<<0|H[Q+1]<<8,ee+=2;break;case"ANMF":var W,O;(O=B.frames[T]={}).offset_x=2*u(P,I),I+=3,O.offset_y=2*u(P,I),I+=3,O.width=1+u(P,I),I+=3,O.height=1+u(P,I),I+=3,O.duration=u(P,I),I+=3,W=P[I++],O.dispose=1&W,O.blend=W>>1&1}J!="ANMF"&&(I+=X)}return B}})(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,j=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,p=[w.canvas_height],m=[w.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var S=j[0],A=v.WebPDecodeRGBA(g,S.src_off,S.src_size,m,p);S.rgba=A,S.imgwidth=m[0],S.imgheight=p[0];for(var _=0;_<m[0]*p[0]*4;_++)b[_]=A[_];return this.width=m,this.height=p,this.data=b,this}(function(e){var t=function(){return typeof Uk=="function"},r=function(p,m,b,v){var g=4,y=o;switch(v){case e.image_compression.FAST:g=1,y=i;break;case e.image_compression.MEDIUM:g=6,y=l;break;case e.image_compression.SLOW:g=9,y=c}p=a(p,m,b,y);var w=Uk(p,{level:g});return e.__addimage__.arrayBufferToBinaryString(w)},a=function(p,m,b,v){for(var g,y,w,j=p.length/m,N=new Uint8Array(p.length+j),S=u(),A=0;A<j;A+=1){if(w=A*m,g=p.subarray(w,w+m),v)N.set(v(g,b,y),w+A);else{for(var _,P=S.length,I=[];_<P;_+=1)I[_]=S[_](g,b,y);var B=f(I.concat());N.set(I[B],w+A)}y=g}return N},s=function(p){var m=Array.apply([],p);return m.unshift(0),m},i=function(p,m){var b,v=[],g=p.length;v[0]=1;for(var y=0;y<g;y+=1)b=p[y-m]||0,v[y+1]=p[y]-b+256&255;return v},o=function(p,m,b){var v,g=[],y=p.length;g[0]=2;for(var w=0;w<y;w+=1)v=b&&b[w]||0,g[w+1]=p[w]-v+256&255;return g},l=function(p,m,b){var v,g,y=[],w=p.length;y[0]=3;for(var j=0;j<w;j+=1)v=p[j-m]||0,g=b&&b[j]||0,y[j+1]=p[j]+256-(v+g>>>1)&255;return y},c=function(p,m,b){var v,g,y,w,j=[],N=p.length;j[0]=4;for(var S=0;S<N;S+=1)v=p[S-m]||0,g=b&&b[S]||0,y=b&&b[S-m]||0,w=d(v,g,y),j[S+1]=p[S]-w+256&255;return j},d=function(p,m,b){if(p===m&&m===b)return p;var v=Math.abs(m-b),g=Math.abs(p-b),y=Math.abs(p+m-b-b);return v<=g&&v<=y?p:g<=y?m:b},u=function(){return[s,i,o,l,c]},f=function(p){var m=p.map((function(b){return b.reduce((function(v,g){return v+Math.abs(g)}),0)}));return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(p,m,b,v){var g,y,w,j,N,S,A,_,P,I,B,T,E,F,q,H=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(w=new Q1e(p)).imgData,y=w.bits,g=w.colorSpace,N=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){P=(_=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,B=new Uint8Array(P*w.colors),I=new Uint8Array(P);var J,re=w.pixelBitlength-w.bits;for(F=0,q=0;F<P;F++){for(E=_[F],J=0;J<re;)B[q++]=E>>>J&255,J+=w.bits;I[F]=E>>>J&255}}if(w.bits===16){P=(_=new Uint32Array(w.decodePixels().buffer)).length,B=new Uint8Array(P*(32/w.pixelBitlength)*w.colors),I=new Uint8Array(P*(32/w.pixelBitlength)),T=w.colors>1,F=0,q=0;for(var X=0;F<P;)E=_[F++],B[q++]=E>>>0&255,T&&(B[q++]=E>>>16&255,E=_[F++],B[q++]=E>>>0&255),I[X++]=E>>>16&255;y=8}v!==e.image_compression.NONE&&t()?(p=r(B,w.width*w.colors,w.colors,v),A=r(I,w.width,1,v)):(p=B,A=I,H=void 0)}if(w.colorType===3&&(g=this.color_spaces.INDEXED,S=w.palette,w.transparency.indexed)){var ee=w.transparency.indexed,W=0;for(F=0,P=ee.length;F<P;++F)W+=ee[F];if((W/=255)===P-1&&ee.indexOf(0)!==-1)j=[ee.indexOf(0)];else if(W!==P){for(_=w.decodePixels(),I=new Uint8Array(_.length),F=0,P=_.length;F<P;F++)I[F]=ee[_[F]];A=r(I,w.width,1)}}var O=(function(z){var V;switch(z){case e.image_compression.FAST:V=11;break;case e.image_compression.MEDIUM:V=13;break;case e.image_compression.SLOW:V=14;break;default:V=12}return V})(v);return H===this.decode.FLATE_DECODE&&(Q="/Predictor "+O+" "),Q+="/Colors "+N+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:b,data:p,index:m,filter:H,decodeParameters:Q,transparency:j,palette:S,sMask:A,predictor:O,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:g}}}})(dn.API),(function(e){e.processGIF89A=function(t,r,a,s){var i=new J1e(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new Uj(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)},e.processGIF87A=e.processGIF89A})(dn.API),Ud.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ud.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ja.log("bit decode error:"+r)}},Ud.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ud.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ud.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ud.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Ud.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Ud.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Ud.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},Ud.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,a,s){var i=new Ud(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Uj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(dn.API),mD.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,a,s){var i=new mD(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Uj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(dn.API),dn.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=a[d],f=a[d+1],p=a[d+2],m=a[d+3];i[l++]=u,i[l++]=f,i[l++]=p,o[c++]=m}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},dn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},lm=dn.API,zv=lm.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=t.doKerning!==!1,p=0,m=e.length,b=0,v=l[0]||c,g=[];for(r=0;r<m;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(p=f&&Oa(d[a])==="object"&&!isNaN(parseInt(d[a][b],10))?d[a][b]/u:0,g.push((l[a]||v)/c+p)),b=a;return g},dD=lm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return lm.processArabic&&(e=lm.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:zv.apply(this,arguments).reduce((function(i,o){return i+o}),0)},uD=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},fD=function(e,t,r){r||(r={});var a,s,i,o,l,c,d,u=[],f=[u],p=r.textIndent||0,m=0,b=0,v=e.split(" "),g=zv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];v.map((function(N){(N=N.split(/\s*\n/)).length>1?w=w.concat(N.map((function(S,A){return(A&&S.length?`
`:"")+S}))):w.push(N[0])})),v=w,c=dD.apply(this,[y,r])}for(i=0,o=v.length;i<o;i++){var j=0;if(a=v[i],c&&a[0]==`
`&&(a=a.substr(1),j=1),p+m+(b=(s=zv.apply(this,[a,r])).reduce((function(N,S){return N+S}),0))>t||j){if(b>t){for(l=uD.apply(this,[a,s,t-(p+m),t]),u.push(l.shift()),u=[l.pop()];l.length;)f.push([l.shift()]);b=s.slice(a.length-(u[0]?u[0].length:0)).reduce((function(N,S){return N+S}),0)}else u=[a];f.push(u),p=b+c,m=g}else u.push(a),p+=m+b,m=g}return d=c?function(N,S){return(S?y:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(d)},lm.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(fD.apply(this,[a[l],o,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var p,m,b,v,g=["{"];for(var y in f){if(p=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof p=="number")p<0?(b=i(p).slice(3),v="-"):(b=i(p).slice(2),v=""),b=v+b.slice(0,-1)+a[b.slice(-1)];else{if(Oa(p)!=="object")throw new Error("Don't know what to do with value type "+Oa(p)+".");b=o(p)}g.push(m+b)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,m,b,v,g={},y=1,w=g,j=[],N="",S="",A=f.length-1,_=1;_<A;_+=1)(v=f[_])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(v):v=="{"?(j.push([w,b]),w={},b=void 0):v=="}"?((m=j.pop())[0][m[1]]=w,b=void 0,w=m[0]):v=="-"?y=-1:b===void 0?r.hasOwnProperty(v)?(N+=r[v],b=parseInt(N,16)*y,y=1,N=""):N+=v:r.hasOwnProperty(v)?(S+=r[v],w[b]=parseInt(S,16)*y,y=1,b=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var p=f.font,m=u.Unicode[p.postScriptName];m&&(p.metadata.Unicode={},p.metadata.Unicode.widths=m.widths,p.metadata.Unicode.kerning=m.kerning);var b=d.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])})(dn.API),(function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(mx(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])})(dn),(function(e){function t(){return(un.canvg?Promise.resolve(un.canvg):a1(()=>import("./index.es-jrc2dNI7.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}dn.API.addSvgAsImage=function(r,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw Ja.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ja.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then((function(b){return b.fromString(f,r,p)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(b){return b.render(p)})).then((function(){m.addImage(u.toDataURL("image/jpeg",1),a,s,i,o,c,d)}))}})(),dn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},dn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,f=0;function p(b,v){var g,y=!1;for(g=0;g<b.length;g+=1)b[g]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Oa(e)==="object"){for(s in e)if(i=e[s],p(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var b,v=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?v.push("/"+b+" /"+r[b].value):v.push("/"+b+" "+r[b].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(dn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,p=i.length;f<p;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,f,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(i).sort((function(m,b){return m-b}))).length;f<p;f++)o=l[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",b=0;b<p.length;b++)m+=String.fromCharCode(p[b]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+um(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+um(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+um(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var b=d();u({data:p,addLength1:!0,objectId:b}),c("endobj");var v=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+um(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+um(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},f=i.mutex||{},p=f.pdfEscape,m=f.activeFontKey,b=f.fonts,v=m,g="",y=0,w="",j=b[v].encoding;if(b[v].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:f};for(w=l,v=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)b[v].metadata.hasOwnProperty("cmap")&&(o=b[v].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),o||w[y].charCodeAt(0)<256&&b[v].metadata.hasOwnProperty("Unicode")?g+=w[y]:g+="";var N="";return parseInt(v.slice(1))<14||j==="WinAnsiEncoding"?N=p(g,v).split("").map((function(S){return S.charCodeAt(0).toString(16)})).join(""):j==="Identity-H"&&(N=r(g,b[v])),f.isHex=!0,{text:N,x:c,y:d,options:u,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])})(dn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(dn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,u,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,j=0;this.__bidiEngine__={};var N=function(T){var E=T.charCodeAt(),F=E>>8,q=v[F];return q!==void 0?f[256*q+(255&E)]:F===252||F===253?"AL":y.test(F)?"L":F===8?"R":"N"},S=function(T){for(var E,F=0;F<T.length;F++){if((E=N(T.charAt(F)))==="L")return!1;if(E==="R")return!0}return!1},A=function(T,E,F,q){var H,Q,J,re,X=E[q];switch(X){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(X="AN");break;case"AL":w=!0,X="R";break;case"WS":X="N";break;case"CS":q<1||q+1>=E.length||(H=F[q-1])!=="EN"&&H!=="AN"||(Q=E[q+1])!=="EN"&&Q!=="AN"?X="N":w&&(Q="AN"),X=Q===H?Q:"N";break;case"ES":X=(H=q>0?F[q-1]:"B")==="EN"&&q+1<E.length&&E[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&F[q-1]==="EN"){X="EN";break}if(w){X="N";break}for(J=q+1,re=E.length;J<re&&E[J]==="ET";)J++;X=J<re&&E[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(re=E.length,J=q+1;J<re&&E[J]==="NSM";)J++;if(J<re){var ee=T[q],W=ee>=1425&&ee<=2303||ee===64286;if(H=E[J],W&&(H==="R"||H==="AL")){X="R";break}}}X=q<1||(H=E[q-1])==="B"?"N":F[q-1];break;case"B":w=!1,s=!0,X=j;break;case"S":i=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":X="N"}return X},_=function(T,E,F){var q=T.split("");return F&&P(q,F,{hiLevel:j}),q.reverse(),E&&E.reverse(),q.join("")},P=function(T,E,F){var q,H,Q,J,re,X=-1,ee=T.length,W=0,O=[],z=j?m:p,V=[];for(w=!1,s=!1,i=!1,H=0;H<ee;H++)V[H]=N(T[H]);for(Q=0;Q<ee;Q++){if(re=W,O[Q]=A(T,V,O,Q),q=240&(W=z[re][b[O[Q]]]),W&=15,E[Q]=J=z[W][5],q>0)if(q===16){for(H=X;H<Q;H++)E[H]=1;X=-1}else X=-1;if(z[W][6])X===-1&&(X=Q);else if(X>-1){for(H=X;H<Q;H++)E[H]=J;X=-1}V[Q]==="B"&&(E[Q]=0),F.hiLevel|=J}i&&(function(U,K,se){for(var xe=0;xe<se;xe++)if(U[xe]==="S"){K[xe]=j;for(var ie=xe-1;ie>=0&&U[ie]==="WS";ie--)K[ie]=j}})(V,E,ee)},I=function(T,E,F,q,H){if(!(H.hiLevel<T)){if(T===1&&j===1&&!s)return E.reverse(),void(F&&F.reverse());for(var Q,J,re,X,ee=E.length,W=0;W<ee;){if(q[W]>=T){for(re=W+1;re<ee&&q[re]>=T;)re++;for(X=W,J=re-1;X<J;X++,J--)Q=E[X],E[X]=E[J],E[J]=Q,F&&(Q=F[X],F[X]=F[J],F[J]=Q);W=re}W++}}},B=function(T,E,F){var q=T.split(""),H={hiLevel:j};return F||(F=[]),P(q,F,H),(function(Q,J,re){if(re.hiLevel!==0&&u)for(var X,ee=0;ee<Q.length;ee++)J[ee]===1&&(X=g.indexOf(Q[ee]))>=0&&(Q[ee]=g[X+1])})(q,F,H),I(2,q,E,F,H),I(1,q,E,F,H),q.join("")};return this.__bidiEngine__.doBidiReorder=function(T,E,F){if((function(H,Q){if(Q)for(var J=0;J<H.length;J++)Q[J]=J;l===void 0&&(l=S(H)),d===void 0&&(d=S(H))})(T,E),o||!c||d)if(o&&c&&l^d)j=l?1:0,T=_(T,E,F);else if(!o&&c&&d)j=l?1:0,T=B(T,E,F),T=_(T,E);else if(!o||l||c||d){if(o&&!c&&l^d)T=_(T,E),l?(j=0,T=B(T,E,F)):(j=1,T=B(T,E,F),T=_(T,E));else if(o&&l&&!c&&d)j=1,T=B(T,E,F),T=_(T,E);else if(!o&&!c&&l^d){var q=u;l?(j=1,T=B(T,E,F),j=0,u=!1,T=B(T,E,F),u=q):(j=0,T=B(T,E,F),T=_(T,E),j=1,u=!1,T=B(T,E,F),u=q,T=_(T,E))}}else j=0,T=B(T,E,F);else j=l?1:0,T=B(T,E,F);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(dn),dn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new _0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new hbe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Z1e(this.contents),this.head=new tbe(this),this.name=new ibe(this),this.cmap=new tB(this),this.toUnicode={},this.hhea=new rbe(this),this.maxp=new obe(this),this.hmtx=new lbe(this),this.post=new abe(this),this.os2=new nbe(this),this.loca=new fbe(this),this.glyf=new cbe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e})();var ru,_0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e})(),Z1e=(function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,c,d,u,f,p,m,b,v;for(v in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),u=16*m-f,(s=new _0).writeInt(this.scalarType),s.writeShort(m),s.writeShort(f),s.writeShort(o),s.writeShort(u),i=16*m,d=s.pos+i,l=null,b=[],r)for(p=r[v],s.writeString(v),s.writeInt(e(p)),s.writeInt(d),s.writeInt(p.length),b=b.concat(p),v==="head"&&(l=d),d+=p.length;d%4;)b.push(0),d++;return s.write(b),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=rB.call(r);r.length%4;)r.push(0);for(i=new _0(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t})(),ebe={}.hasOwnProperty,$u=function(e,t){for(var r in t)ebe.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};ru=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var tbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new _0).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t})(),pD=(function(){function e(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,y,w,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),p=m/2,t.pos+=6,i=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),d=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),u=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var N,S;for(S=[],c=N=0;0<=s?N<s:N>s;c=0<=s?++N:--N)S.push(t.readUInt16());return S})(),c=y=0,j=i.length;y<j;c=++y)for(g=i[c],a=w=b=v[c];b<=g?w<=g:w>=g;a=b<=g?++w:--w)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-b)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,y,w,j,N,S,A,_,P,I,B,T,E,F,q,H,Q,J,re,X,ee,W,O,z,V,U,K,se,xe,ie,ue,Be,me;switch(q=new _0,o=Object.keys(t).sort((function($e,Oe){return $e-Oe})),r){case"macroman":for(v=0,g=(function(){var $e=[];for(b=0;b<256;++b)$e.push(0);return $e})(),w={0:0},i={},H=0,X=o.length;H<X;H++)w[ie=t[s=o[H]]]==null&&(w[ie]=++v),i[s]={old:t[s],new:w[t[s]]},g[s]=w[t[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(g),{charMap:i,subtable:q.data,maxGlyphID:v+1};case"unicode":for(E=[],f=[],j=0,w={},a={},y=d=null,Q=0,ee=o.length;Q<ee;Q++)w[S=t[s=o[Q]]]==null&&(w[S]=++j),a[s]={old:S,new:w[S]},l=w[S]-s,y!=null&&l===d||(y&&f.push(y),E.push(s),d=l),y=s;for(y&&f.push(y),f.push(65535),E.push(65535),B=2*(I=E.length),P=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(P/2)/Math.LN2,_=2*I-P,c=[],A=[],m=[],b=J=0,W=E.length;J<W;b=++J){if(T=E[b],u=f[b],T===65535){c.push(0),A.push(0);break}if(T-(F=a[T].new)>=32768)for(c.push(0),A.push(2*(m.length+I-b)),s=re=T;T<=u?re<=u:re>=u;s=T<=u?++re:--re)m.push(a[s].new);else c.push(F-T),A.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*I+2*m.length),q.writeUInt16(0),q.writeUInt16(B),q.writeUInt16(P),q.writeUInt16(p),q.writeUInt16(_),se=0,O=f.length;se<O;se++)s=f[se],q.writeUInt16(s);for(q.writeUInt16(0),xe=0,z=E.length;xe<z;xe++)s=E[xe],q.writeUInt16(s);for(ue=0,V=c.length;ue<V;ue++)l=c[ue],q.writeUInt16(l);for(Be=0,U=A.length;Be<U;Be++)N=A[Be],q.writeUInt16(N);for(me=0,K=m.length;me<K;me++)v=m[me],q.writeUInt16(v);return{charMap:a,subtable:q.data,maxGlyphID:j+1}}},e})(),tB=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new pD(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var s,i;return a==null&&(a="macroman"),s=pD.encode(r,a),(i=new _0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t})(),rbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),nbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s})(),this.charRange=(function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),abe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="post",t.prototype.parse=function(r){var a,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t})(),sbe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ibe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="name",t.prototype.parse=function(r){var a,s,i,o,l,c,d,u,f,p,m;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=f=0,p=s.length;f<p;o=++f)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new sbe(u,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),obe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),lbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)f.push(r.readInt16());return f})(),this.widths=(function(){var u,f,p,m;for(m=[],u=0,f=(p=this.metrics).length;u<f;u++)o=p[u],m.push(o.advance);return m}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),rB=[].slice,cbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,s,i,o,l,c,d,u,f,p;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,l=(c=new _0(a.read(i))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new ube(c,u,p,d,f):new dbe(c,l,u,p,d,f),this.cache[r]))},t.prototype.encode=function(r,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t})(),dbe=(function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),ube=(function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new _0(rB.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),fbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,ru),t.prototype.tag="loca",t.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),f=0;f<s.length;++f)u[4*f+3]=255&s[f],u[4*f+2]=(65280&s[f])>>8,u[4*f+1]=(16711680&s[f])>>16,u[4*f]=(4278190080&s[f])>>24;return u},t})(),hbe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,y;for(s in a=tB.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=a.charMap)m[(c=y[s]).old]=c.new;for(b in p=a.maxGlyphID,o)b in m||(m[b]=p++);return u=(function(w){var j,N;for(j in N={},w)N[w[j]]=j;return N})(m),f=Object.keys(u).sort((function(w,j){return w-j})),v=(function(){var w,j,N;for(N=[],w=0,j=f.length;w<j;w++)l=f[w],N.push(u[l]);return N})(),i=this.font.glyf.encode(o,v,m),d=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();dn.API.PDFObject=(function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+(function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const mbe=({onCreateInvoice:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=kn(),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState(null),[f,p]=D.useState(!0),[m,b]=D.useState(!1),[v,g]=D.useState(!1),[y,w]=D.useState([]),[j,N]=D.useState(!1),[S,A]=D.useState(!1),[_,P]=D.useState(!1),[I,B]=D.useState(!1),[T,E]=D.useState([]),[F,q]=D.useState(null),[H,Q]=D.useState({description:"",quantity:1,rate:0}),[J,re]=D.useState(!1),[X,ee]=D.useState(!1),[W,O]=D.useState(ki),z=D.useCallback(async()=>{p(!0);try{const Oe=await G7(),le=Oe?.data||Oe||[];o(Array.isArray(le)?le:[]);try{const te=await hd();c(te?.data||te||[])}catch{c([])}}catch(Oe){a(Oe.message||"Failed to load invoices")}finally{p(!1)}},[t,a]);D.useEffect(()=>{z()},[z]),D.useEffect(()=>{const Oe=()=>z();return window.addEventListener("refresh-invoices",Oe),()=>window.removeEventListener("refresh-invoices",Oe)},[z]);const V=Oe=>l.find(le=>le.id===Oe),U=Oe=>{switch(Oe){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},K={totalOutstanding:i.filter(Oe=>Oe.status!=="Paid").reduce((Oe,le)=>Oe+(le.amount||0),0),awaitingPayment:i.filter(Oe=>Oe.status!=="Paid").reduce((Oe,le)=>Oe+(le.amount||0),0),paidThisMonth:i.filter(Oe=>Oe.status==="Paid").reduce((Oe,le)=>Oe+(le.amount||0),0)},se=()=>{y.length===i.length?w([]):w(i.map(Oe=>Oe.id))},xe=async()=>{const Oe=[...y];if(Oe.length!==0){N(!0),s(`Processing payment status for ${Oe.length} items...`);try{await Promise.all(Oe.map(le=>jv(le,{status:"Paid"}))),o(le=>le.map(te=>Oe.includes(te.id)?{...te,status:"Paid"}:te)),r(`Successfully marked ${Oe.length} invoices as paid`),w([]),z()}catch{a("Bulk update failed. Some items may not have been updated.")}finally{N(!1)}}},ie=async()=>{[...y].length!==0&&P(!0)},ue=async()=>{const Oe=[...y];if(Oe.length!==0){N(!0),P(!1),s(`Executing batch deletion for ${Oe.length} registry entries...`);try{await Promise.all(Oe.map(le=>oI(le))),o(le=>le.filter(te=>!Oe.includes(te.id))),r(`Successfully removed ${Oe.length} invoices from registry`),w([]),z()}catch{a("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{N(!1)}}};D.useEffect(()=>{if(d){const Oe=d.lineItems||d.items||[];E(Oe),B(!1),q(null),Q({description:"",quantity:1,rate:0}),O(d.currency||ki),ee(!1)}},[d]);const Be=async()=>{if(d){b(!0);try{await jv(d.id,{items:T,lineItems:T}),o(Oe=>Oe.map(le=>le.id===d.id?{...le,items:T,lineItems:T}:le)),u({...d,items:T,lineItems:T}),B(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Oe){console.error("Failed to save breakdown:",Oe),a(Oe.message||"Failed to save breakdown")}finally{b(!1)}}},me=async()=>{if(d){b(!0);try{await jv(d.id,{status:"Paid"}),o(Oe=>Oe.map(le=>le.id===d.id?{...le,status:"Paid"}:le)),u({...d,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Oe){console.error("Failed to update invoice:",Oe),a(Oe.message||"Failed to update invoice")}finally{b(!1)}}},$e=async()=>{if(d){g(!0);try{await oI(d.id),o(Oe=>Oe.filter(le=>le.id!==d.id)),u(null),A(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Oe){console.error("Failed to delete invoice:",Oe),a(Oe.message||"Failed to delete invoice")}finally{g(!1)}}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Invoice"]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${K.totalOutstanding.toLocaleString()}`,icon:n.jsx(Mu,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${K.awaitingPayment.toLocaleString()}`,icon:n.jsx(ms,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${K.paidThisMonth.toLocaleString()}`,icon:n.jsx(gn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((Oe,le)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl ${Oe.bg} ${Oe.color} flex items-center justify-center`,children:ut.cloneElement(Oe.icon,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Oe.label}),n.jsx("h3",{className:"text-xl font-black text-slate-900",children:Oe.value})]})]},le))}),n.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[n.jsx("th",{className:"px-6 py-4 w-10",children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&y.length===i.length,onChange:se})}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-right"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-50",children:f?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center",children:n.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(Oe=>{const le=y.includes(Oe.id);return n.jsxs("tr",{onClick:()=>u(Oe),className:`group transition-colors cursor-pointer ${le?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-6 py-4",onClick:te=>te.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:le,onChange:()=>w(te=>le?te.filter(Te=>Te!==Oe.id):[...te,Oe.id])})}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Oe.number}),n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",Oe.id.substring(0,8)]})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xs,{src:V(Oe.companyId)?.logo,fallbackText:V(Oe.companyId)?.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:V(Oe.companyId)?.name||"Unknown Partner"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm font-bold text-slate-900",children:pf(Oe.amount,Oe.currency)})}),n.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:Oe.dueDate}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${U(Oe.status)}`,children:Oe.status})}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsx(va,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},Oe.id)})})]})})}),y.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:y.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Oe=>{Oe.stopPropagation(),xe()},disabled:j,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(gn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),n.jsxs("button",{onClick:Oe=>{Oe.stopPropagation(),ie()},disabled:j,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>w([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]})}),d&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>u(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:n.jsx(ea,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:d.number}),n.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${U(d.status)}`,children:d.status})]}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[n.jsx(Xs,{src:V(d.companyId)?.logo,fallbackText:V(d.companyId)?.name||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:V(d.companyId)?.name||"Unknown Company"}),n.jsx("p",{className:"text-xs text-slate-500",children:V(d.companyId)?.website||""})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),X?n.jsx("button",{onClick:async()=>{b(!0);try{await jv(d.id,{currency:W}),o(Oe=>Oe.map(le=>le.id===d.id?{...le,currency:W}:le)),u({...d,currency:W}),ee(!1),r("Currency updated successfully!")}catch(Oe){a(Oe.message||"Failed to update currency")}finally{b(!1)}},disabled:m,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:n.jsx(Si,{className:"w-3 h-3"})}):n.jsx("button",{onClick:()=>ee(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:n.jsx(dl,{className:"w-3 h-3"})})]}),X?n.jsx("select",{value:W,onChange:Oe=>O(Oe.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Zm.map(Oe=>n.jsxs("option",{value:Oe.code,children:[Oe.code," (",Oe.symbol,")"]},Oe.code))}):n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:pf(d.amount,d.currency)})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:d.dueDate})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),n.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:d.description||"No additional strategic description provided for this statement."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),I?n.jsxs("button",{onClick:Be,disabled:m,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[n.jsx(Si,{className:"w-3 h-3"})," ",m?"Saving...":"Save"]}):n.jsxs("button",{onClick:()=>B(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[n.jsx(dl,{className:"w-3 h-3"})," Edit"]})]}),n.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[T.map(Oe=>n.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:Oe.description}),n.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",Oe.quantity," @ ",uf(d.currency),Oe.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:pf(Oe.amount,d.currency)})]},Oe.id)),T.length===0&&n.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[d.status!=="Paid"&&n.jsxs("button",{onClick:me,disabled:m,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[m?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(gn,{className:"w-4 h-4"})," Confirm Receipt"]}),n.jsx("button",{onClick:()=>A(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:n.jsx(Lr,{className:"w-5 h-5"})})]})]})]}),S&&d&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>A(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),n.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>A(!1),disabled:v,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:$e,disabled:v,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),_&&y.length>0&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",y.length," Invoice",y.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",y.length," invoice",y.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>P(!1),disabled:j,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:ue,disabled:j,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${y.length} Invoice${y.length>1?"s":""}`})]})]})})]})]})},pbe=()=>n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),n.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(id,{className:"w-4 h-4"})," Invite Member"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),n.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),n.jsx("div",{className:"divide-y divide-slate-100",children:Yv.map(e=>n.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Xs,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&n.jsx(Pb,{className:"w-4 h-4 text-indigo-600"})]}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[n.jsx(es,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),n.jsxs("div",{className:"flex items-center gap-12",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),n.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:n.jsx(Xk,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),xbe=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:a=1,circularCrop:s=!0})=>{const[i,o]=D.useState({x:0,y:0}),[l,c]=D.useState(.5),[d,u]=D.useState(!1),[f,p]=D.useState({x:0,y:0}),[m,b]=D.useState(!1),[v,g]=D.useState(!1),y=D.useRef(null),w=D.useRef(null),j=D.useRef(300),N=D.useCallback(()=>{if(!w.current||!y.current)return null;const B=w.current.getBoundingClientRect(),T=j.current,E=B.width/2,F=B.height/2,q=y.current.getBoundingClientRect(),H=q.left-B.left,Q=q.top-B.top,J=(E-T/2-H-i.x)/l,re=(F-T/2-Q-i.y)/l,X=T/l;return{x:Math.max(0,J*(y.current.naturalWidth/y.current.width)),y:Math.max(0,re*(y.current.naturalHeight/y.current.height)),width:Math.min(y.current.naturalWidth,X*(y.current.naturalWidth/y.current.width)),height:Math.min(y.current.naturalHeight,X*(y.current.naturalHeight/y.current.height))}},[i,l]),S=D.useCallback(async()=>{if(y.current){b(!0);try{const I=N();if(!I)throw new Error("Failed to calculate crop area");const B=y.current,T=document.createElement("canvas"),E=T.getContext("2d");if(!E)throw new Error("Failed to create canvas context");const F=Math.min(I.width,I.height);T.width=F,T.height=F,s&&(E.beginPath(),E.arc(F/2,F/2,F/2,0,2*Math.PI),E.clip()),E.drawImage(B,I.x,I.y,I.width,I.height,0,0,F,F);const q=T.toDataURL("image/jpeg",.9);t(q)}catch(I){console.error("Error cropping image:",I)}finally{b(!1)}}},[N,s,t]),A=D.useCallback(I=>{I.preventDefault(),u(!0),p({x:I.clientX-i.x,y:I.clientY-i.y})},[i]),_=D.useCallback(I=>{if(!d||!w.current||!y.current)return;const B=w.current,T=y.current,E=B.getBoundingClientRect(),F=T.getBoundingClientRect(),q=I.clientX-f.x,H=I.clientY-f.y,Q=F.width*l,J=F.height*l,re=Math.max(0,(Q-E.width)/2),X=Math.max(0,(J-E.height)/2);l<=1?o({x:q,y:H}):o({x:Math.max(-re,Math.min(re,q)),y:Math.max(-X,Math.min(X,H))})},[d,f,l]),P=D.useCallback(()=>{u(!1)},[]);return D.useEffect(()=>{if(d)return document.addEventListener("mousemove",_),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",P)}},[d,_,P]),D.useEffect(()=>{if(w.current){const B=w.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},[]),n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),n.jsx("button",{onClick:r,disabled:m,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{ref:w,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:d?"grabbing":"grab"},children:[n.jsx("img",{ref:y,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(g(!0),w.current&&y.current){const B=w.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},draggable:!1}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:A,style:{pointerEvents:m?"none":"auto",cursor:d?"grabbing":"grab"},children:[n.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${j.current}px`,height:`${j.current}px`,aspectRatio:a.toString()}}),n.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${j.current/2}px at 50% 50%)`:`inset(calc(50% - ${j.current/2}px))`}})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),n.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:I=>{const B=parseFloat(I.target.value);c(B),B<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:m}),n.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[n.jsx("span",{children:"30%"}),n.jsx("span",{children:"300%"})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:r,disabled:m,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:S,disabled:m||!v,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fu,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},gbe=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=D.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=D.useState(null),[l,c]=D.useState(!1),[d,u]=D.useState(!1),[f,p]=D.useState(!1),[m,b]=D.useState(!1),[v,g]=D.useState(!1),[y,w]=D.useState(!1);D.useEffect(()=>{j(),N()},[]);const j=async()=>{c(!0);try{const I=await dae("default");I.success&&I.data&&s(I.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},N=async()=>{p(!0);try{const I=await fae("default");I.success&&I.data&&o(I.data)}catch(I){console.error("Failed to load retention stats:",I)}finally{p(!1)}},S=async()=>{u(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await uae("default",{...a,updatedBy:I})).success&&(t("Retention policy updated successfully"),await N())}catch(I){r(I.message||"Failed to update retention policy")}finally{u(!1)}},A=async()=>{b(!0);try{const I=await hae("default",50);I.success&&(t(`Archive completed: ${I.data.archived} emails archived`),await N())}catch(I){r(I.message||"Failed to trigger archive")}finally{b(!1)}},_=async()=>{g(!0);try{const I=await mae("default",50);I.success&&(t(`Cleanup completed: ${I.data.deleted} emails deleted`),await N())}catch(I){r(I.message||"Failed to trigger cleanup")}finally{g(!1)}},P=async()=>{w(!0);try{const I=await pae("default",{format:"csv"});if(typeof I=="string"){const B=new Blob([I],{type:"text/csv"}),T=window.URL.createObjectURL(B),E=document.createElement("a");E.href=T,E.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(T),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(I){r(I.message||"Failed to export archived emails")}finally{w(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(jD,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?n.jsx("div",{className:"p-8 text-center",children:n.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),n.jsx("input",{type:"number",min:"1",max:"20",value:a.retentionYears,onChange:I=>s({...a,retentionYears:parseInt(I.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),n.jsx("input",{type:"number",min:"0",max:a.retentionYears,value:a.coldStorageYears,onChange:I=>s({...a,coldStorageYears:parseInt(I.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),n.jsx("button",{onClick:()=>s({...a,archiveEnabled:!a.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),n.jsx("button",{onClick:()=>s({...a,autoCleanupEnabled:!a.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsx("button",{onClick:S,disabled:d,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:d?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(_u,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),f?n.jsx("div",{className:"p-8 text-center",children:n.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(sd,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:A,disabled:m,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[m?n.jsx(pt,{className:"w-5 h-5 animate-spin text-indigo-600"}):n.jsx(_u,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),n.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),n.jsxs("button",{onClick:_,disabled:v,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?n.jsx(pt,{className:"w-5 h-5 animate-spin text-red-600"}):n.jsx(kU,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),n.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),n.jsxs("button",{onClick:P,disabled:y,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[y?n.jsx(pt,{className:"w-5 h-5 animate-spin text-green-600"}):n.jsx(Pu,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),n.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},vbe=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=D.useState([]),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[d,u]=D.useState(null),[f,p]=D.useState({name:"",content:"",isDefault:!1}),[m,b]=D.useState(!1),[v,g]=D.useState(null),[y,w]=D.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});D.useEffect(()=>{j(),N()},[]);const j=async()=>{o(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I)return;const B=await nM(I);s(B.data||[])}catch(I){console.error("Failed to load signatures:",I)}finally{o(!1)}},N=()=>{try{const I=localStorage.getItem("user_display_preferences");I&&w(JSON.parse(I))}catch(I){console.error("Failed to load display preferences:",I)}},S=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(y)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},A=async()=>{if(!f.name||!f.content){r("Name and content are required");return}b(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I){r("Please log in to save signature");return}d?(await bse(d.id,{userId:I,...f}),t("Signature updated successfully")):(await vse({userId:I,...f}),t("Signature created successfully")),c(!1),u(null),p({name:"",content:"",isDefault:!1}),await j()}catch(I){r(I.message||"Failed to save signature")}finally{b(!1)}},_=async I=>{if(confirm("Are you sure you want to delete this signature?")){g(I);try{const B=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await yse(I,B),t("Signature deleted successfully"),await j()}catch(B){r(B.message||"Failed to delete signature")}finally{g(null)}}},P=I=>{I?(u(I),p({name:I.name||"",content:I.content||"",isDefault:I.isDefault||!1})):(u(null),p({name:"",content:"",isDefault:!1})),c(!0)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(ea,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),n.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Signature"]})]}),i?n.jsx("div",{className:"p-8 text-center",children:n.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(ea,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),n.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),n.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):n.jsx("div",{className:"space-y-3",children:a.map(I=>n.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:I.name}),I.isDefault&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),n.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:I.content}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>P(I),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:n.jsx(dl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_(I.id),disabled:v===I.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:v===I.id?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]})]})},I.id))})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Wj,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(I=>n.jsx("button",{onClick:()=>w({...y,layout:I}),className:`p-4 rounded-xl border-2 transition-all ${y.layout===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(I=>n.jsx("button",{onClick:()=>w({...y,density:I}),className:`p-4 rounded-xl border-2 transition-all ${y.density===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Kd,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),n.jsxs("select",{value:y.emailFormat,onChange:I=>w({...y,emailFormat:I.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),n.jsx("option",{value:"plain",children:"Plain Text"}),n.jsx("option",{value:"rich",children:"Rich Text"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),n.jsx("button",{onClick:()=>w({...y,showPreview:!y.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${y.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${y.showPreview?"translate-x-6":"translate-x-0"}`})})]}),y.showPreview&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),n.jsx("input",{type:"number",min:"1",max:"10",value:y.previewLines,onChange:I=>w({...y,previewLines:parseInt(I.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:d?"Edit Signature":"Create Signature"}),n.jsx("button",{onClick:()=>{c(!1),u(null),p({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),n.jsx("input",{type:"text",value:f.name,onChange:I=>p({...f,name:I.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),n.jsx("textarea",{value:f.content,onChange:I=>p({...f,content:I.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),n.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),n.jsx("button",{onClick:()=>p({...f,isDefault:!f.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${f.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${f.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>{c(!1),u(null),p({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:A,disabled:m||!f.name||!f.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),d?"Update":"Create"," Signature"]})})]})]})})]})},bbe=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:a}=kn(),[s,i]=D.useState("profile"),[o,l]=D.useState(ov),[c,d]=D.useState(!1),[u,f]=D.useState([]),[p,m]=D.useState(""),[b,v]=D.useState(!1),[g,y]=D.useState(!1),[w,j]=D.useState(!1),[N,S]=D.useState(null),[A,_]=D.useState(!1),[P,I]=D.useState(!1),[B,T]=D.useState([]),[E,F]=D.useState(!1),[q,H]=D.useState(""),[Q,J]=D.useState(!1),[re,X]=D.useState(null),[ee,W]=D.useState(null),[O,z]=D.useState(null),[V,U]=D.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Cp(),language:"English"}),[K,se]=D.useState(!1),[xe,ie]=D.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[ue,Be]=D.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:Cp(),language:"English"}),[me,$e]=D.useState(!1),[Oe,le]=D.useState(null),[te,Te]=D.useState(""),[we,Ie]=D.useState(!1),[he,de]=D.useState(!1),[Ce,Ve]=D.useState(""),ge=D.useRef(null),[fe,_e]=D.useState([]),[Ue,ke]=D.useState(!1),[Fe,qe]=D.useState({open:!1,name:""}),[et,Kt]=D.useState(!1),qt=(rt,At)=>{l(cr=>cr.map(wr=>wr.id===rt?{...wr,[At]:!wr[At]}:wr))};D.useEffect(()=>{s==="connections"&&(async()=>{const At=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(At)try{const cr=await n3(At);j(cr.connected||!1),S(cr.userEmail||null)}catch{j(!1)}})()},[s,e]);const vr=async()=>{F(!0);try{const rt=await _c(q||void 0);T(rt.data||[])}catch{T([])}finally{F(!1)}};D.useEffect(()=>{s==="users"&&vr()},[s,q]);const er=async()=>{ke(!0);try{const rt=await Uae();_e(rt?.data||[])}catch{_e([])}finally{ke(!1)}};D.useEffect(()=>{s==="crm"&&er()},[s]),D.useEffect(()=>{(async()=>{if(s==="notifications")try{const At=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!At)return;const wr=(await $ne(At)).data||[];if(wr.length>0){const Gr=ov.map(jr=>wr.find(tr=>tr.id===jr.id)||jr);l(Gr)}else l(ov)}catch(At){console.error("[SETTINGS] Failed to load notification preferences:",At),l(ov)}})()},[s,e]);const mr=async()=>{_(!0);try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,At=await tM(rt);At.authUrl&&(window.location.href=At.authUrl)}catch{a("Failed to connect Google Calendar"),_(!1)}},Ge=async()=>{I(!0);try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await Jae(rt),j(!1),S(null),r("Google account disconnected successfully")}catch{a("Failed to disconnect Google account")}finally{I(!1)}};D.useEffect(()=>{(async()=>{let At=e||JSON.parse(localStorage.getItem("user_data")||"null");if(At){const cr=Cp();Be({name:At.name||"",email:At.email||"",avatar:At.avatar||"",phone:At.phone||"",jobTitle:At.jobTitle||"",department:At.department||"",bio:At.bio||"",timezone:At.timezone||cr,language:At.language||"English"}),Te(At.avatar||"")}})()},[e]);const jt=(rt,At=400,cr=400,wr=.8)=>new Promise((Gr,jr)=>{if(rt.size>5242880){jr(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const tr=new FileReader;tr.onload=Xr=>{const Vr=new Image;Vr.onload=()=>{let pn=Vr.width,Nr=Vr.height;pn>Nr?pn>At&&(Nr=Nr*At/pn,pn=At):Nr>cr&&(pn=pn*cr/Nr,Nr=cr);const Or=document.createElement("canvas");Or.width=pn,Or.height=Nr;const ne=Or.getContext("2d");if(!ne){jr(new Error("Failed to create canvas context"));return}ne.drawImage(Vr,0,0,pn,Nr);const je=Or.toDataURL("image/jpeg",wr);if(je.length>9e5)if(wr>.5){jt(rt,At,cr,wr-.1).then(Gr).catch(jr);return}else{jr(new Error("Image is too large even after compression. Please use a smaller image."));return}Gr(je)},Vr.onerror=()=>jr(new Error("Failed to load image")),Vr.src=Xr.target?.result},tr.onerror=()=>jr(new Error("Failed to read file")),tr.readAsDataURL(rt)}),br=async rt=>{const At=rt.target.files?.[0];if(At){if(!At.type.startsWith("image/")){a("Please select a valid image file.");return}le(null);try{const cr=new FileReader;cr.onload=wr=>{const Gr=wr.target?.result;Ve(Gr),de(!0)},cr.onerror=()=>{a("Failed to read image file.")},cr.readAsDataURL(At)}catch(cr){const wr=cr.message||"Failed to load image. Please try a different image.";a(wr),le(wr),ge.current&&(ge.current.value="")}}},Qt=async rt=>{de(!1),Ie(!0);try{const cr=await(await fetch(rt)).blob(),wr=new File([cr],"cropped-image.jpg",{type:"image/jpeg"}),Gr=await jt(wr,400,400,.8);Te(Gr),Be(jr=>({...jr,avatar:Gr})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch(At){const cr=At.message||"Failed to process cropped image.";a(cr),le(cr)}finally{Ie(!1),ge.current&&(ge.current.value="")}},Fr=()=>{de(!1),Ve(""),ge.current&&(ge.current.value="")},Mr=async()=>{if(!ue.name.trim()){le("Full name is required.");return}$e(!0);try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,At=await One(rt,ue),cr=At.data||At;localStorage.setItem("user_data",JSON.stringify(cr)),t(cr),r("Profile updated successfully!"),le(null)}catch{a("Failed to update profile.")}finally{$e(!1)}};return n.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&n.jsxs("button",{onClick:Mr,disabled:me,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[me?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Si,{className:"w-4 h-4"}),"Save Changes"]})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[n.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:n.jsx(co,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:n.jsx(Tb,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:n.jsx(Xj,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:n.jsx(Hj,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:n.jsx(p0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:n.jsx(jD,{className:"w-4 h-4"})},{id:"crm",label:"CRM",icon:n.jsx(cl,{className:"w-4 h-4"})}].map(rt=>n.jsxs("button",{onClick:()=>i(rt.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===rt.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[rt.icon,rt.label]},rt.id))}),n.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Oe&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Oe}),n.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[n.jsxs("div",{className:"relative group",children:[n.jsx(Xs,{src:te,alt:ue.name||"User",fallbackText:ue.name||ue.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),we&&n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:n.jsx(pt,{className:"w-6 h-6 text-white animate-spin"})}),n.jsx("button",{onClick:()=>ge.current?.click(),disabled:we,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:n.jsx(kc,{className:"w-6 h-6"})}),n.jsx("input",{ref:ge,type:"file",accept:"image/*",onChange:br,className:"hidden",disabled:we})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900",children:ue.name||"Set Name"}),n.jsxs("p",{className:"text-slate-500 text-sm",children:[ue.jobTitle||"No Title","  ",ue.department||"No Dept"]}),n.jsx("p",{className:"text-slate-400 text-xs mt-1",children:ue.email})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:ue.name,onChange:rt=>Be({...ue,name:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:ue.jobTitle,onChange:rt=>Be({...ue,jobTitle:rt.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:ue.department,onChange:rt=>Be({...ue,department:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:ue.phone,onChange:rt=>Be({...ue,phone:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),n.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:ue.bio,onChange:rt=>Be({...ue,bio:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(p6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:ue.timezone,onChange:rt=>Be({...ue,timezone:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:ex.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),n.jsx("select",{value:ue.language,onChange:rt=>Be({...ue,language:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:v6.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]})]})]}),s==="notifications"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),n.jsx("div",{className:"space-y-4",children:o.map(rt=>n.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:rt.label}),n.jsx("p",{className:"text-xs text-slate-500",children:rt.description})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),n.jsx("button",{onClick:()=>qt(rt.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${rt.inApp?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${rt.inApp?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),n.jsx("button",{onClick:()=>qt(rt.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${rt.email?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${rt.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},rt.id))}),n.jsx("div",{className:"pt-4 border-t border-slate-100",children:n.jsxs("button",{onClick:async()=>{try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!rt){a("Please log in to save preferences.");return}await zne(rt,o),r("Notification preferences saved successfully!")}catch(rt){console.error("[SETTINGS] Failed to save notification preferences:",rt),a(rt.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[n.jsx(Si,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:n.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),n.jsx("div",{className:"p-6",children:w?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),N&&n.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:N})]})]}),n.jsx("button",{onClick:Ge,disabled:P,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:P?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(ta,{className:"w-4 h-4 text-blue-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:n.jsx(es,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),n.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(xx,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),n.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[n.jsx("li",{children:" View and manage calendar events"}),n.jsx("li",{children:" Create, view, and manage files in Google Drive"}),n.jsx("li",{children:" Create and edit documents in Google Docs"}),n.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:n.jsx(Hj,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),n.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),n.jsx("button",{onClick:mr,disabled:A,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:A?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(ta,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(es,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),n.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(xx,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),n.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[n.jsx("li",{children:" Your data is encrypted and securely stored"}),n.jsx("li",{children:" We only request the minimum permissions needed"}),n.jsx("li",{children:" You can disconnect at any time"}),n.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),n.jsxs("button",{onClick:()=>{X(null),U({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Cp(),language:"English"}),J(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[n.jsx(id,{className:"w-4 h-4"})," Add User"]})]}),n.jsx("div",{className:"p-4 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:q,onChange:rt=>H(rt.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:E?n.jsx("div",{className:"p-8 text-center",children:n.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):B.map(rt=>n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{src:rt.avatar,alt:rt.name||"",fallbackText:rt.name||rt.email||"U",className:"w-10 h-10 border",isAvatar:!0}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900 text-sm",children:rt.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[rt.email,"  ",n.jsx("span",{className:"font-bold text-indigo-600",children:rt.role})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{X(rt),U({email:rt.email,name:rt.name,role:rt.role||"User",jobTitle:rt.jobTitle||"",department:rt.department||"",phone:rt.phone||"",bio:rt.bio||"",timezone:rt.timezone||Cp(),language:rt.language||"English"}),J(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:n.jsx(dl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>z(rt),className:"p-2 text-slate-400 hover:text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},rt.id))})]}),s==="preferences"&&n.jsx(vbe,{currentUser:e,showSuccess:r,showError:a}),s==="workspace"&&n.jsx(gbe,{currentUser:e,showSuccess:r,showError:a}),s==="crm"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-indigo-50/30",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center",children:n.jsx(cl,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CRM Settings"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Manage industries for company imports and CRM data."})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Industries"}),n.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Industries are used when uploading companies. Add any industry that may appear in your company import files. Only admins can add, edit, or delete."}),Ue?n.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-6",children:[n.jsx(pt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading industries..."})]}):n.jsxs("div",{className:"space-y-2",children:[e?.role==="Admin"&&n.jsxs("button",{type:"button",onClick:()=>qe({open:!0,name:""}),className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-semibold hover:bg-indigo-700 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add industry"]}),fe.length===0?n.jsx("p",{className:"text-sm text-slate-500 py-4",children:"No industries yet. Add one to use with company uploads."}):n.jsx("ul",{className:"divide-y divide-slate-100",children:fe.map(rt=>n.jsxs("li",{className:"flex items-center justify-between py-3 px-3 rounded-lg hover:bg-slate-50",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:rt.name}),rt.usageCount!==void 0&&n.jsxs("span",{className:"text-xs text-slate-400 ml-2",children:["(",rt.usageCount," companies)"]})]}),e?.role==="Admin"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>qe({open:!0,industry:rt,name:rt.name}),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:n.jsx(dl,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:async()=>{if((rt.usageCount||0)>0){a("Cannot delete: this industry is in use by companies.");return}try{await zae(rt.id),r("Industry deleted"),er()}catch(At){a(At?.message||"Failed to delete industry")}},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},rt.id))})]})]})]})}),Fe.open&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:Fe.industry?"Edit industry":"Add industry"}),n.jsx("input",{type:"text",value:Fe.name,onChange:rt=>qe(At=>({...At,name:rt.target.value})),placeholder:"Industry name",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm mb-4"}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>qe({open:!1,name:""}),className:"px-4 py-2 rounded-xl text-slate-600 hover:bg-slate-100 font-medium text-sm",children:"Cancel"}),n.jsxs("button",{type:"button",disabled:et,onClick:async()=>{const rt=Fe.name.trim();if(!rt){a("Name is required");return}Kt(!0);try{Fe.industry?(await $ae(Fe.industry.id,{name:rt}),r("Industry updated")):(await qae({name:rt}),r("Industry added")),qe({open:!1,name:""}),er()}catch(At){a(At?.message||"Failed to save industry")}finally{Kt(!1)}},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[et&&n.jsx(pt,{className:"w-4 h-4 animate-spin"}),Fe.industry?"Save":"Add"]})]})]})})]})]}),Q&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:re?"Edit User":"Add New User"}),n.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:V.name,onChange:rt=>U({...V,name:rt.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),n.jsx("input",{type:"email",value:V.email,onChange:rt=>U({...V,email:rt.target.value}),placeholder:"Email Address",disabled:!!re,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),n.jsxs("select",{value:V.role,onChange:rt=>U({...V,role:rt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),n.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),n.jsx("option",{value:"Admin",children:"Admin - Full access"}),n.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[V.role==="Viewer"&&"Read-only access to shared inbox",V.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",V.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",V.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:V.jobTitle,onChange:rt=>U({...V,jobTitle:rt.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:V.department,onChange:rt=>U({...V,department:rt.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:V.phone,onChange:rt=>U({...V,phone:rt.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:V.bio,onChange:rt=>U({...V,bio:rt.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(p6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:V.timezone,onChange:rt=>U({...V,timezone:rt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:ex.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),n.jsx("select",{value:V.language,onChange:rt=>U({...V,language:rt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:v6.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>J(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{se(!0);try{re?await Cne(re.id,V):await _ne(V),J(!1),vr(),r(re?"User updated successfully!":"User created successfully!")}catch(rt){a(rt.message||"Failed to save user")}finally{se(!1)}},disabled:K||!V.name||!V.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:K?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),re?"Updating...":"Creating..."]}):re?"Update":"Invite"})]})]})}),O&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:O.name}),n.jsx("p",{className:"text-xs text-slate-500",children:O.email}),O.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:O.role})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>z(null),disabled:ee===O.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:async()=>{W(O.id);try{await Tne(O.id),await vr(),z(null),r("User deleted successfully")}catch(rt){a(rt.message||"Failed to delete user")}finally{W(null)}},disabled:ee===O.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===O.id?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),he&&Ce&&n.jsx(xbe,{imageSrc:Ce,onCrop:Qt,onCancel:Fr,aspectRatio:1,circularCrop:!0})]})},ybe=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),a=e?.role==="Admin",[s,i]=D.useState("companies"),[o,l]=D.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,d]=D.useState({groups:[],totalDuplicates:0}),[u,f]=D.useState({groups:[],totalDuplicates:0}),[p,m]=D.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[b,v]=D.useState({mismatches:[],count:0}),[g,y]=D.useState(null),[w,j]=D.useState(!1),[N,S]=D.useState({}),A=D.useCallback(async()=>{l(J=>({...J,companies:!0}));try{const J=await Fae(),re=J?.data??J;d({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),d({groups:[],totalDuplicates:0})}finally{l(J=>({...J,companies:!1}))}},[r]),_=D.useCallback(async()=>{l(J=>({...J,contacts:!0}));try{const J=await Mae(),re=J?.data??J;f({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),f({groups:[],totalDuplicates:0})}finally{l(J=>({...J,contacts:!1}))}},[r]),P=D.useCallback(async()=>{l(J=>({...J,incomplete:!0}));try{const J=await Rae(),re=J?.data??J;m({companies:re.companies||[],contacts:re.contacts||[],deals:re.deals||[],projects:re.projects||[],invoices:re.invoices||[]})}catch{r("Failed to load incomplete records"),m({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(J=>({...J,incomplete:!1}))}},[r]),I=D.useCallback(async()=>{l(J=>({...J,mismatches:!0}));try{const J=await Bae(),re=J?.data??J;v({mismatches:re.mismatches||[],count:re.count??0})}catch{r("Failed to load domain mismatches"),v({mismatches:[],count:0})}finally{l(J=>({...J,mismatches:!1}))}},[r]);D.useEffect(()=>{a&&(s==="companies"?A():s==="contacts"?_():s==="incomplete"?P():s==="mismatches"&&I())},[a,s,A,_,P,I]);const B=()=>{s==="companies"?A():s==="contacts"?_():s==="incomplete"?P():I()},T=(J,re,X,ee,W,O)=>{y({open:!0,type:J,primaryId:re,secondaryId:X,primaryName:ee,secondaryName:W,groupKey:O})},E=()=>{w||y(null)},F=async()=>{if(g){j(!0);try{g.type==="company"?(await Dae(g.primaryId,g.secondaryId),t("Companies merged successfully"),A()):(await Lae(g.primaryId,g.secondaryId),t("Contacts merged successfully"),_()),y(null)}catch(J){r(J?.message||"Merge failed")}finally{j(!1)}}},q=J=>{S(re=>({...re,[J]:!re[J]}))};if(!a)return n.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[n.jsx(wU,{className:"w-12 h-12 text-amber-600 mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const H=[{id:"companies",label:"Duplicate Companies",icon:n.jsx(cl,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:n.jsx(co,{className:"w-4 h-4"}),count:u.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:n.jsx(oU,{className:"w-4 h-4"}),count:p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:n.jsx(dh,{className:"w-4 h-4"}),count:b.count}],Q=o[s];return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),n.jsxs("button",{onClick:B,disabled:Q,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Q?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(sd,{className:"w-4 h-4"}),"Refresh"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:H.map(J=>n.jsxs("button",{onClick:()=>i(J.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===J.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[J.icon,J.label,J.count!=null&&J.count>0&&n.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===J.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:J.count})]},J.id))}),n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Q&&n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Q&&s==="companies"&&n.jsx("div",{className:"p-6",children:c.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):n.jsx("ul",{className:"space-y-4",children:c.groups.map(J=>{const re=`company-${J.domain}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>q(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.domain}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," companies"]}),X?n.jsx(Vs,{className:"w-5 h-5"}):n.jsx(va,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.companies.map((ee,W)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),ee.industry&&n.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",ee.industry,")"]})]}),J.companies.length>=2&&n.jsx("div",{className:"flex gap-2",children:J.companies.filter(O=>O.id!==ee.id).map(O=>n.jsxs("button",{onClick:()=>T("company",ee.id,O.id,ee.name||ee.id,O.name||O.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Kv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},O.id))})]},ee.id))})]},re)})})}),!Q&&s==="contacts"&&n.jsx("div",{className:"p-6",children:u.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):n.jsx("ul",{className:"space-y-4",children:u.groups.map(J=>{const re=`contact-${J.email}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>q(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.email}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," contacts"]}),X?n.jsx(Vs,{className:"w-5 h-5"}):n.jsx(va,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.contacts.map(ee=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),n.jsx("span",{className:"text-slate-500 text-sm ml-2",children:ee.email})]}),J.contacts.filter(W=>W.id!==ee.id).map(W=>n.jsxs("button",{onClick:()=>T("contact",ee.id,W.id,ee.name||ee.id,W.name||W.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Kv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},W.id))]},ee.id))})]},re)})})}),!Q&&s==="incomplete"&&n.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:p.companies,recordLabel:J=>J.name||J.id},{key:"contacts",label:"Contacts",items:p.contacts,recordLabel:J=>J.name||J.email||J.id},{key:"deals",label:"Deals",items:p.deals,recordLabel:J=>J.name||J.title||J.id},{key:"projects",label:"Projects",items:p.projects,recordLabel:J=>J.name||J.title||J.id},{key:"invoices",label:"Invoices",items:p.invoices,recordLabel:J=>J.id}].map(({key:J,label:re,items:X,recordLabel:ee})=>X.length===0?null:n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:re}),n.jsx("ul",{className:"space-y-2",children:X.map(W=>n.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx(Bn,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900",children:ee(W.record)}),n.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:W.errors.map((O,z)=>n.jsx("li",{children:O},z))})]})]},W.record.id))})]},J)),p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length===0&&n.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Q&&s==="mismatches"&&n.jsx("div",{className:"p-6",children:b.mismatches.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):n.jsx("ul",{className:"space-y-3",children:b.mismatches.map((J,re)=>n.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx(Bn,{className:"w-5 h-5 text-amber-600 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("p",{className:"font-medium text-slate-900",children:[J.contact?.name," (",J.contact?.email,")"]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",n.jsx("strong",{children:J.contactDomain}),"  Company domain: ",n.jsx("strong",{children:J.companyDomain})," (",J.company?.name,")"]})]})]},re))})})]}),g&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:E}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),n.jsx("button",{onClick:E,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:w,children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",n.jsx("strong",{children:g.secondaryName})," into ",n.jsx("strong",{children:g.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:E,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:w,children:"Cancel"}),n.jsxs("button",{onClick:F,disabled:w,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[w?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):n.jsx(Kv,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},wbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),[a,s]=D.useState([]),[i,o]=D.useState(!1),[l,c]=D.useState(null),[d,u]=D.useState(null),[f,p]=D.useState(!1),[m,b]=D.useState([]),v=e?.role==="Admin",[g,y]=D.useState(()=>{const E=!v&&e?.id?e.id:void 0;return E?{userId:E}:{}}),[w,j]=D.useState(!1);D.useEffect(()=>{(async()=>{try{const F=await _c();b(F?.data||[])}catch(F){console.error("Failed to load users:",F)}})()},[]);const N=D.useCallback(async()=>{o(!0);try{const F=(await Yae({...g,limit:100}))?.data||[];s(F)}catch(E){r(E.message||"Failed to load import history"),s([])}finally{o(!1)}},[g,r]);D.useEffect(()=>{N()},[N]);const S=async E=>{c(E),p(!0);try{const F=await Xae(E.id);u(F?.data||F)}catch(F){r(F.message||"Failed to load batch details"),u(null)}finally{p(!1)}},A=E=>{if(!E)return"N/A";try{return(E.toDate?E.toDate():new Date(E)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},_=E=>m.find(q=>q.id===E)?.name||E||"Unknown",P=E=>{switch(E){case"completed":return n.jsx(gn,{className:"w-5 h-5 text-green-600"});case"failed":return n.jsx(Kk,{className:"w-5 h-5 text-red-600"});case"processing":return n.jsx(ms,{className:"w-5 h-5 text-yellow-600"});default:return n.jsx(ms,{className:"w-5 h-5 text-slate-400"})}},I=E=>{const F="px-2 py-1 rounded-full text-xs font-medium";switch(E){case"completed":return`${F} bg-green-100 text-green-700`;case"failed":return`${F} bg-red-100 text-red-700`;case"processing":return`${F} bg-yellow-100 text-yellow-700`;default:return`${F} bg-slate-100 text-slate-700`}},B=()=>{y({})},T=Object.keys(g).length>0;return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(ad,{className:"w-6 h-6 text-indigo-600"}),"Import History"]}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"View and manage past import batches"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>j(!w),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${w||T?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50"}`,children:[n.jsx(vf,{className:"w-4 h-4"}),"Filters",T&&n.jsx("span",{className:"bg-white text-indigo-600 rounded-full px-2 py-0.5 text-xs font-bold",children:Object.keys(g).length})]}),n.jsxs("button",{onClick:N,disabled:i,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-50 flex items-center gap-2 disabled:opacity-50",children:[n.jsx(sd,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]})]})]}),w&&n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Filter Imports"}),n.jsx("button",{onClick:B,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear all"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"User"}),n.jsxs("select",{value:g.userId||"",onChange:E=>y(F=>({...F,userId:E.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All users"}),m.map(E=>n.jsx("option",{value:E.id,children:E.name||E.email},E.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Type"}),n.jsxs("select",{value:g.type||"",onChange:E=>y(F=>({...F,type:E.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All types"}),n.jsx("option",{value:"company",children:"Companies"}),n.jsx("option",{value:"contact",children:"Contacts"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Status"}),n.jsxs("select",{value:g.status||"",onChange:E=>y(F=>({...F,status:E.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All statuses"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"processing",children:"Processing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:g.startDate||"",onChange:E=>y(F=>({...F,startDate:E.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:g.endDate||"",onChange:E=>y(F=>({...F,endDate:E.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[P(l.status),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Import Batch Details"}),n.jsx("p",{className:"text-sm text-slate-500",children:l.fileName})]})]}),n.jsx("button",{onClick:()=>{c(null),u(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Rows"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.totalRows})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Successful"}),n.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.successfulImports})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Failed"}),n.jsx("p",{className:"text-2xl font-bold text-red-700",children:l.failedRows})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-indigo-600 mb-1",children:"Status"}),n.jsx("span",{className:I(l.status),children:l.status})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Type"}),n.jsxs("p",{className:"text-sm text-slate-900 capitalize flex items-center gap-2",children:[l.type==="company"?n.jsx(cl,{className:"w-4 h-4"}):n.jsx(co,{className:"w-4 h-4"}),l.type]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Uploaded By"}),n.jsx("p",{className:"text-sm text-slate-900",children:_(l.uploadedBy)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Date"}),n.jsxs("p",{className:"text-sm text-slate-900 flex items-center gap-2",children:[n.jsx(ta,{className:"w-4 h-4"}),A(l.createdAt)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"File Name"}),n.jsxs("p",{className:"text-sm text-slate-900 flex items-center gap-2",children:[n.jsx(px,{className:"w-4 h-4"}),l.fileName]})]})]}),l.type==="company"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Created Companies"}),n.jsx("p",{className:"text-xl font-bold text-blue-700",children:l.createdCompanies||0})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Updated Companies"}),n.jsx("p",{className:"text-xl font-bold text-purple-700",children:l.updatedCompanies||0})]})]}),l.type==="contact"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Created Contacts"}),n.jsx("p",{className:"text-xl font-bold text-blue-700",children:l.createdContacts||0})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Updated Contacts"}),n.jsx("p",{className:"text-xl font-bold text-purple-700",children:l.updatedContacts||0})]})]}),d&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-2",children:"Batch ID"}),n.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-slate-700",children:l.id})]})]})]})})]})}),n.jsx("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:i?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(ad,{className:"w-12 h-12 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"No import batches found"}),n.jsx("p",{className:"text-sm text-slate-400 mt-1",children:T?"Try adjusting your filters":"Import batches will appear here after you upload companies or contacts"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"File Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Results"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Uploaded By"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200",children:a.map(E=>n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(px,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:E.fileName})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[E.type==="company"?n.jsx(cl,{className:"w-3 h-3"}):n.jsx(co,{className:"w-3 h-3"}),E.type]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:I(E.status),children:E.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("span",{className:"text-green-600 font-medium",children:E.successfulImports})," / ",n.jsx("span",{className:"text-slate-900",children:E.totalRows}),E.failedRows>0&&n.jsxs(n.Fragment,{children:[" ",n.jsxs("span",{className:"text-red-600",children:["(",E.failedRows," failed)"]})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-slate-600",children:_(E.uploadedBy)})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-slate-600",children:A(E.createdAt)})}),n.jsx("td",{className:"px-4 py-3 text-right",children:n.jsxs("button",{onClick:()=>S(E),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors",children:[n.jsx(Kd,{className:"w-4 h-4"}),"View"]})})]},E.id))})]})})})]})},Nbe=({currentUser:e,onNavigate:t,onNewEvent:r})=>{const{showError:a,showSuccess:s}=kn(),[i,o]=D.useState(new Date),[l,c]=D.useState("daily"),[d,u]=D.useState([]),[f,p]=D.useState([]),[m,b]=D.useState([]),[v,g]=D.useState([]),[y,w]=D.useState([]),[j,N]=D.useState(!1),[S,A]=D.useState(!1),[_,P]=D.useState(null),[I,B]=D.useState(!1),[T,E]=D.useState(!1),[F,q]=D.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[H,Q]=D.useState([]),[J,re]=D.useState(!1),[X,ee]=D.useState(""),[W,O]=D.useState(""),[z,V]=D.useState(null),[U,K]=D.useState(!1),[se,xe]=D.useState(null),[ie,ue]=D.useState(null),[Be,me]=D.useState(!1),[$e,Oe]=D.useState(""),[le,te]=D.useState(0),[Te,we]=D.useState([]),[Ie,he]=D.useState(!1),[de,Ce]=D.useState(null),[Ve,ge]=D.useState(!0),[fe,_e]=D.useState(!0),Ue=D.useRef(null),ke=D.useRef(null),Fe=Array.from({length:24},(ne,je)=>je),qe=D.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),et=D.useMemo(()=>{const ne=i.getFullYear(),je=String(i.getMonth()+1).padStart(2,"0"),Se=String(i.getDate()).padStart(2,"0");return`${ne}-${je}-${Se}`},[i]);D.useEffect(()=>{(async()=>{if(e?.id)try{const je=await n3(e.id);N(je.connected||!1)}catch{N(!1)}})()},[e]);const Kt=ne=>ne.filter(je=>{if(je.recurringEventId){const Se=(je.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(Ae=>Se.includes(Ae)))return!1}return!0});D.useEffect(()=>{(async()=>{A(!0);const je=new Date(i),Se=new Date(i);if(l==="monthly")je.setDate(1),je.setHours(0,0,0,0),Se.setMonth(Se.getMonth()+1),Se.setDate(0),Se.setHours(23,59,59,999);else if(l==="weekly"){const Qe=new Date(i),tt=Qe.getDay(),Xe=Qe.getDate()-tt+(tt===0?-6:1),Me=new Date(Qe.setDate(Xe));je.setTime(Me.getTime()),je.setHours(0,0,0,0);const it=new Date(Me);it.setDate(Me.getDate()+6),Se.setTime(it.getTime()),Se.setHours(23,59,59,999)}else je.setHours(0,0,0,0),Se.setHours(23,59,59,999);const oe=Qe=>{const tt=Qe.getFullYear(),Xe=String(Qe.getMonth()+1).padStart(2,"0"),Me=String(Qe.getDate()).padStart(2,"0");return`${tt}-${Xe}-${Me}`},ve=oe(je),Ae=oe(Se),Ke=[];if(j&&e?.id)try{const tt=(await Qae(ve,Ae,e.id)).data||[],Xe=Kt(tt);Ke.push(...Xe)}catch(Qe){console.warn("[Schedule] Failed to fetch Google Calendar events:",Qe.message)}if(e?.id)try{const Qe=await hk(e.id,void 0,ve,Ae);if(Qe.success&&Qe.data){const tt=Qe.data.map(Xe=>({id:Xe.id,title:Xe.title,description:Xe.description||"",start:Xe.start,end:Xe.end,type:Xe.type||"meeting",location:Xe.location||"",participants:Xe.participants||[],color:Xe.color||"#4f46e5",isAllDay:Xe.isAllDay||!1,source:"firestore",googleEventId:Xe.googleEventId||null,htmlLink:Xe.htmlLink||null,relatedEntity:Xe.relatedEntity||null}));Ke.push(...tt)}}catch(Qe){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Qe.message)}const nt=new Map;Ke.forEach(Qe=>{const tt=Qe.googleEventId||Qe.id;nt.has(tt)||nt.set(tt,Qe)}),u(Array.from(nt.values()));try{const Qe=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Qe){b([]),p([]);return}const tt=await uy(Qe),Me=(Array.isArray(tt?.data||tt)?tt?.data||tt:[]).filter(bt=>{const It=bt.dueDate&&bt.dueDate!==null&&bt.dueDate!==void 0&&String(bt.dueDate).trim()!==""&&String(bt.dueDate).trim().toLowerCase()!=="ongoing";return!bt.archived&&It});b(Me);const it=Me.filter(bt=>bt.dueDate===et);p(it)}catch{b([]),p([])}try{const[Qe,tt,Xe]=await Promise.all([I0(e?.id),_c(),ob()]);g(Array.isArray(Qe?.data||Qe)?Qe?.data||Qe:[]),w(Array.isArray(tt?.data||tt)?tt?.data||tt:[]),Q(Array.isArray(Xe?.data)?Xe.data:[])}catch{g([]),w([]),Q([])}A(!1)})()},[et,j,e,l,i]);const qt=()=>{const ne=new Date(i);l==="daily"?ne.setDate(ne.getDate()-1):l==="weekly"?ne.setDate(ne.getDate()-7):ne.setMonth(ne.getMonth()-1),o(ne)},vr=()=>{const ne=new Date(i);l==="daily"?ne.setDate(ne.getDate()+1):l==="weekly"?ne.setDate(ne.getDate()+7):ne.setMonth(ne.getMonth()+1),o(ne)},er=()=>{const ne=new Date;return i.toDateString()===ne.toDateString()},mr=ne=>{let je=new Date(ne.start),Se=new Date(ne.end);const oe=new Date(i);oe.setHours(0,0,0,0);const ve=(je.getTime()-oe.getTime())/(1e3*60),Ae=(Se.getTime()-je.getTime())/(1e3*60),Ke=ve*(80/60)+20,nt=Ae*(80/60);return{top:Ke,height:Math.max(nt,50)}},Ge=ne=>{try{return new Date(ne).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ne}},jt=ne=>{switch(ne){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},br=ne=>{const je=new Date(ne),Se=je.getDay(),oe=je.getDate()-Se+(Se===0?-6:1);return new Date(je.setDate(oe))},Qt=ne=>{const je=br(ne);return Array.from({length:7},(Se,oe)=>{const ve=new Date(je);return ve.setDate(je.getDate()+oe),ve})},Fr=ne=>{const je=ne.getFullYear(),Se=ne.getMonth(),oe=new Date(je,Se,1),ve=new Date(je,Se+1,0),Ae=new Date(oe);Ae.setDate(Ae.getDate()-Ae.getDay());const Ke=[],nt=new Date(Ae);for(;(nt<=ve||Ke.length<42)&&(Ke.push(new Date(nt)),nt.setDate(nt.getDate()+1),!(Ke.length>=42)););return Ke},Mr=ne=>{const je=ne.getFullYear(),Se=String(ne.getMonth()+1).padStart(2,"0"),oe=String(ne.getDate()).padStart(2,"0");return`${je}-${Se}-${oe}`},rt=ne=>m.filter(je=>je.dueDate===ne),At=ne=>{Mr(ne);const je=new Date(ne);je.setHours(0,0,0,0);const Se=new Date(ne);return Se.setHours(23,59,59,999),d.filter(oe=>{const ve=new Date(oe.start),Ae=oe.end?new Date(oe.end):ve;return ve<=Se&&Ae>=je})},cr=ne=>{if(!ne||!/^\d{4}-\d{2}-\d{2}$/.test(ne))return ne;const[je,Se,oe]=ne.split("-").map(Number);return new Date(je,Se-1,oe).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};D.useEffect(()=>{_&&!I&&q({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},[_,I]),D.useEffect(()=>{if(!I){re(!1);return}_?.category&&!H.includes(_.category)?re(!0):F.category&&H.includes(F.category)?re(!1):F.category&&!H.includes(F.category)&&re(!0)},[I,F.category,H]),D.useEffect(()=>{if(!_)return;let ne=!1;return(async()=>{try{const je=await ob(),Se=Array.isArray(je?.data)?je.data:[];ne||Q(Se)}catch{ne||Q([])}})(),()=>{ne=!0}},[_?.id]);const wr=()=>{P(null),B(!1),ee(""),O(""),V(null),me(!1),he(!1),ke.current&&(ke.current.value="")},Gr=async()=>{if(_){if(!F.title.trim()){a("Task title is required");return}if(!F.assigneeId){a("Assignee is required");return}E(!0);try{await lb(_.id,{title:F.title.trim(),category:F.category.trim()||void 0,description:F.description.trim()||"",dueDate:F.dueDate||null,priority:F.priority,status:F.status,assigneeId:F.assigneeId,projectId:F.projectId||null}),b(ne=>ne.map(je=>je.id===_.id?{...je,title:F.title.trim(),category:F.category.trim()||void 0,description:F.description.trim()||"",dueDate:F.dueDate||"",priority:F.priority,status:F.status,assigneeId:F.assigneeId,projectId:F.projectId||void 0}:je)),P({..._,title:F.title.trim(),category:F.category.trim()||void 0,description:F.description.trim()||"",dueDate:F.dueDate||"",priority:F.priority,status:F.status,assigneeId:F.assigneeId,projectId:F.projectId||void 0,updatedAt:new Date().toISOString()}),B(!1),s("Task updated successfully")}catch(ne){a(ne.message||"Failed to update task")}finally{E(!1)}}},jr=(ne,je=1200,Se=1200,oe=.8)=>new Promise((ve,Ae)=>{const Ke=new FileReader;Ke.onload=nt=>{const Qe=new Image;Qe.onload=()=>{let tt=Qe.width,Xe=Qe.height;tt>Xe?tt>je&&(Xe=Xe*je/tt,tt=je):Xe>Se&&(tt=tt*Se/Xe,Xe=Se);const Me=document.createElement("canvas");Me.width=tt,Me.height=Xe;const it=Me.getContext("2d");it?(it.drawImage(Qe,0,0,tt,Xe),ve(Me.toDataURL("image/jpeg",oe))):Ae(new Error("Canvas context not available"))},Qe.onerror=()=>Ae(new Error("Failed to load image")),Qe.src=nt.target?.result},Ke.onerror=()=>Ae(new Error("Failed to read file")),Ke.readAsDataURL(ne)}),qr=async ne=>{const je=ne.target.files?.[0];if(je){if(!je.type.startsWith("image/")){a("Please select an image file");return}if(je.size>10*1024*1024){a("Image size must be less than 10MB");return}try{const Se=await jr(je,1200,1200,.8);O(Se),V(je)}catch(Se){a(Se.message||"Failed to process image")}}},tr=ne=>{const je=ne.target.value,Se=ne.target.selectionStart;ee(je),te(Se);const oe=je.substring(0,Se),ve=oe.lastIndexOf("@");if(ve!==-1){const Ae=oe.substring(ve+1),Ke=ve>0?oe[ve-1]:" ";if((Ke===" "||Ke===`
`||ve===0)&&!Ae.includes(" ")&&!Ae.includes(`
`)){Oe(Ae);const nt=y.filter(Qe=>Qe.name.toLowerCase().includes(Ae.toLowerCase())||Qe.email.toLowerCase().includes(Ae.toLowerCase()));we(nt.slice(0,5)),me(!0);return}}me(!1)},Xr=ne=>{const Se=X.substring(0,le).lastIndexOf("@"),oe=X.substring(le),Ae=`${X.substring(0,Se)}@${ne.name} ${oe}`;if(ee(Ae),me(!1),Ue.current){Ue.current.focus();const Ke=Se+ne.name.length+2;Ue.current.setSelectionRange(Ke,Ke)}},Vr=ne=>{const je=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Se=[];let oe;for(;(oe=je.exec(ne))!==null;){const ve=oe[1].trim(),Ae=y.find(Ke=>Ke.name.toLowerCase()===ve.toLowerCase());Ae&&Ae.id!==(e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Se.push(Ae.id)}return[...new Set(Se)]};D.useEffect(()=>{if(Ue.current){const ne=Ue.current;ne.style.height="auto";const je=24,Se=5*je,oe=15*je,ve=Math.min(Math.max(ne.scrollHeight,Se),oe);ne.style.height=`${ve}px`}},[X]);const pn=ne=>{const je=[],Se=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let oe=0,ve,Ae=0;for(;(ve=Se.exec(ne))!==null;){ve.index>oe&&je.push(ne.substring(oe,ve.index));const Ke=ve[1].trim();y.find(Qe=>Qe.name.toLowerCase()===Ke.toLowerCase())?je.push(n.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Ke]},Ae++)):je.push(`@${Ke}`),oe=Se.lastIndex}return oe<ne.length&&je.push(ne.substring(oe)),je.length>0?je:ne},Nr=async()=>{if(_){if(!X.trim()&&!z){a("Please add a note or attach an image");return}K(!0);try{const ne=JSON.parse(localStorage.getItem("user_data")||"{}"),je={id:`note_${Date.now()}`,userId:ne.id,userName:ne.name||"Unknown User",text:X.trim(),createdAt:new Date().toISOString()};W&&z&&(je.imageUrl=W,je.imageName=z.name,je.imageMimeType=z.type);const Se=[..._.notes||[],je];await lb(_.id,{notes:Se});const oe=Vr(X);if(oe.length>0)for(const ve of oe)try{await Jm({userId:ve,notificationType:"task-mention",title:"You were mentioned in a task",message:`${ne.name||"Someone"} mentioned you in task: "${_.title}"`,link:`/?tab=tasks&task=${_.id}`})}catch(Ae){console.error("Failed to send mention notification:",Ae)}P({..._,notes:Se}),b(ve=>ve.map(Ae=>Ae.id===_.id?{...Ae,notes:Se}:Ae)),ee(""),O(""),V(null),ke.current&&(ke.current.value=""),s("Note added successfully")}catch(ne){a(ne.message||"Failed to add note")}finally{K(!1)}}},Or=()=>{if(l==="daily")return n.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[Fe.map(ne=>{const je=ne*80+20;return n.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${je}px`},children:[n.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:ne===0?"12 AM":ne===12?"12 PM":ne>12?`${ne-12} PM`:`${ne} AM`}),n.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),n.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},ne)}),Ve&&d.map(ne=>{const je=mr(ne);return n.jsxs("div",{className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100",style:{top:`${je.top}px`,height:`${je.height}px`},children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/20 group-hover:w-2 transition-all"}),n.jsxs("div",{className:"flex justify-between items-start gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:ne.title}),n.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:n.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[n.jsx(ms,{className:"w-3 h-3 text-indigo-400"})," ",Ge(ne.start)," - ",Ge(ne.end)]})})]}),ne.htmlLink&&n.jsx("a",{href:ne.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95",children:n.jsx(Ts,{className:"w-3.5 h-3.5"})})]})]},ne.id)}),!S&&(Ve&&d.length===0||!Ve&&(!fe||f.length===0))&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[n.jsx(ta,{className:"w-16 h-16 text-slate-200 mb-4"}),n.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(l==="weekly"){const ne=Qt(i),je=new Date;return je.setHours(0,0,0,0),n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((Se,oe)=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Se})},Se))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:ne.map((Se,oe)=>{const ve=Mr(Se),Ae=fe?rt(ve):[],Ke=Ve?At(Se):[];let nt=[],Qe=[];fe&&Ve?Ae.length>0&&Ke.length>0?(nt=Ae.slice(0,1),Qe=Ke.slice(0,1)):Ae.length>0?nt=Ae.slice(0,2):Ke.length>0&&(Qe=Ke.slice(0,2)):fe?nt=Ae.slice(0,2):Ve&&(Qe=Ke.slice(0,2));const tt=[...Ae,...Ke],Xe=Se.toDateString()===je.toDateString(),Me=Se.getMonth()===i.getMonth();return n.jsxs("div",{onClick:()=>{o(new Date(Se)),c("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${Xe?"bg-indigo-50 border-indigo-300":Me?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-xs font-black mb-2 ${Xe?"text-indigo-600":Me?"text-slate-900":"text-slate-400"}`,children:Se.getDate()}),n.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[fe&&nt.map(it=>n.jsx("div",{onClick:bt=>{bt.stopPropagation(),P(it)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${it.priority==="High"?"bg-red-100 text-red-700":it.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:it.title,children:it.title},it.id)),Ve&&Qe.map(it=>n.jsx("div",{onClick:bt=>{bt.stopPropagation(),it.htmlLink&&window.open(it.htmlLink,"_blank")},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:it.title,children:it.title},it.id)),nt.length+Qe.length<tt.length&&n.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",tt.length-(nt.length+Qe.length)," more"]})]})]},oe)})})]})}if(l==="monthly"){const ne=Fr(i),je=new Date;je.setHours(0,0,0,0);const Se=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Se.map(oe=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:oe})},oe))}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:ne.map((oe,ve)=>{const Ae=Mr(oe),Ke=fe?rt(Ae):[],nt=Ve?At(oe):[];let Qe=[],tt=[];fe&&Ve?Ke.length>0&&nt.length>0?(Qe=Ke.slice(0,1),tt=nt.slice(0,1)):Ke.length>0?Qe=Ke.slice(0,1):nt.length>0&&(tt=nt.slice(0,1)):fe?Qe=Ke.slice(0,1):Ve&&(tt=nt.slice(0,1));const Xe=[...Ke,...nt],Me=oe.toDateString()===je.toDateString(),it=oe.getMonth()===i.getMonth();return n.jsxs("div",{onClick:()=>{o(new Date(oe)),c("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${Me?"bg-indigo-50 border-indigo-300":it?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-[10px] font-black mb-1 ${Me?"text-indigo-600":it?"text-slate-900":"text-slate-400"}`,children:oe.getDate()}),n.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[fe&&Qe.map(bt=>n.jsx("div",{onClick:It=>{It.stopPropagation(),P(bt)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${bt.priority==="High"?"bg-red-100 text-red-700":bt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:bt.title,children:bt.title},bt.id)),Ve&&tt.map(bt=>n.jsx("div",{onClick:It=>{It.stopPropagation(),bt.htmlLink&&window.open(bt.htmlLink,"_blank")},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:bt.title,children:bt.title},bt.id)),Qe.length+tt.length<Xe.length&&n.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",Xe.length-(Qe.length+tt.length)]})]})]},ve)})})]})}};return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l==="monthly"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{const ne=new Date(i);ne.setMonth(ne.getMonth()-1),o(ne)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:n.jsx(qj,{className:"w-4 h-4"})}),n.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>{const ne=new Date(i);ne.setMonth(ne.getMonth()+1),o(ne)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:n.jsx(va,{className:"w-4 h-4"})})]}):l==="weekly"?n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const ne=Qt(i),je=ne[0],Se=ne[6];return`${je.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Se.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[n.jsx(ms,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:qe})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:Ve,onChange:ne=>ge(ne.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${Ve?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Ve&&n.jsx(Fu,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),n.jsx("div",{className:"w-px h-4 bg-slate-200"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:fe,onChange:ne=>_e(ne.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${fe?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:fe&&n.jsx(Fu,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(ne=>n.jsx("button",{onClick:()=>c(ne),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${l===ne?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:ne},ne))}),n.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:qt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(qj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>o(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${er()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),n.jsx("button",{onClick:vr,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(va,{className:"w-5 h-5"})})]}),n.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"New Entry"]})]})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[n.jsx(ms,{className:"w-3 h-3 text-slate-500"}),n.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:qe})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[S&&n.jsx(pt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${j?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:j?"Google Workspace Connected":"Google Disconnected"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[l==="daily"&&fe&&f.length>0&&n.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(gn,{className:"w-3 h-3"})," Today's Deliverables"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:f.map(ne=>n.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:ne.status==="Done"?n.jsx(gn,{className:"w-4 h-4 text-emerald-500"}):n.jsx(Ou,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-xs font-bold truncate ${ne.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:ne.title}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${jt(ne.priority)}`,children:ne.priority})})]})]},ne.id))})]}),Or()]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsx(Ri,{className:"w-8 h-8 text-indigo-400 mb-6"}),n.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),n.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),n.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),n.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:n.jsx(b0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),_&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:wr}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:wr,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Xt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(gn,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[I?n.jsx("input",{type:"text",value:F.title,onChange:ne=>q(je=>({...je,title:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:_.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${_.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":_.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":_.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:_.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",_.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:I?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{B(!1),q({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},disabled:T,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Gr,disabled:T||!F.title.trim()||!F.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:T?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),I?n.jsxs("select",{value:F.assigneeId,onChange:ne=>q(je=>({...je,assigneeId:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),y.map(ne=>n.jsx("option",{value:ne.id,children:ne.name},ne.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:y.find(ne=>ne.id===_.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:y.find(ne=>ne.id===_.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),I?n.jsxs("select",{value:F.projectId,onChange:ne=>q(je=>({...je,projectId:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),v.filter(ne=>!ne.archived).map(ne=>n.jsx("option",{value:ne.id,children:ne.title},ne.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.projectId?v.find(ne=>ne.id===_.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ea,{className:"w-4 h-4 text-indigo-500"})," Description"]}),I?n.jsx(e_,{value:F.description||"",onChange:ne=>q(je=>({...je,description:ne})),placeholder:"Add task description..."}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[_.description?n.jsx(L9,{content:_.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Fs,{className:"w-3.5 h-3.5"})," Task Category"]}),I?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:J?"__new__":F.category||"",onChange:ne=>{const je=ne.target.value;je==="__new__"?(re(!0),q(Se=>({...Se,category:""}))):(re(!1),q(Se=>({...Se,category:je})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),H.map(ne=>n.jsx("option",{value:ne,children:ne},ne)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),J&&n.jsx("input",{type:"text",value:F.category,onChange:ne=>q(je=>({...je,category:ne.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:_.category?n.jsxs(n.Fragment,{children:[n.jsx(Fs,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:_.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),I?n.jsx("input",{type:"date",value:F.dueDate,onChange:ne=>q(je=>({...je,dueDate:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.dueDate?cr(_.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),I?n.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(ne=>n.jsx("button",{onClick:()=>q(je=>({...je,priority:ne})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${F.priority===ne?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:ne},ne))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${_.priority==="High"?"bg-red-50 text-red-600":_.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:_.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),I?n.jsxs("select",{value:F.status,onChange:ne=>q(je=>({...je,status:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[_.status==="Done"?n.jsx(gn,{className:"w-5 h-5 text-emerald-500"}):_.status==="In Progress"?n.jsx(ms,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Ou,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:_.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",_.notes&&_.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:_.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:Ue,rows:5,value:X,onChange:tr,onBlur:()=>{setTimeout(()=>me(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),Be&&Te.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(bh,{className:"w-3 h-3"}),"Mention User"]}),Te.map(ne=>n.jsxs("button",{onClick:()=>Xr(ne),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ne.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ne.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:ne.email})]})]},ne.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:W?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(kc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:W?z?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:ke,type:"file",accept:"image/*",onChange:qr,className:"hidden"})]}),n.jsx("button",{onClick:Nr,disabled:U||!X.trim()&&!z,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:U?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),W&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:W,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{O(""),V(null),ke.current&&(ke.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Xt,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:_.notes&&_.notes.length>0?[..._.notes].reverse().map(ne=>{const je=e?.role==="Admin"||ne.userId===e?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:ne.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ne.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ne.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),je&&n.jsx("button",{onClick:()=>ue(ne.id),disabled:se===ne.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:se===ne.id?n.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ne.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:pn(ne.text)}),ne.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:ne.imageUrl,alt:ne.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Se=window.open();Se&&Se.document.write(`<img src="${ne.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},ne.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>he(!Ie),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(va,{className:`w-4 h-4 text-slate-400 transition-transform ${Ie?"rotate-90":""}`})]}),Ie&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:_.createdAt?new Date(_.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),_.updatedAt&&_.updatedAt!==_.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(_.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),_.notes&&_.notes.map((ne,je)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[ne.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ne.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},ne.id)),(!_.notes||_.notes.length===0)&&(!_.updatedAt||_.updatedAt===_.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[n.jsx("button",{onClick:()=>{Ce(_),wr()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:wr,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5"})," Close"]})]})]})]}),de&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-xs font-bold text-slate-900",children:de.title})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ce(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(de)try{await V7(de.id),b(ne=>ne.filter(je=>je.id!==de.id)),p(ne=>ne.filter(je=>je.id!==de.id)),Ce(null),P(null),s("Task deleted successfully")}catch(ne){a(ne.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},jbe=()=>{const{showSuccess:e}=kn(),[t,r]=D.useState(null),[a,s]=D.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:n.jsx(es,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:n.jsx(ND,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:n.jsx(dh,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[n.jsx(Pb,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=a.includes(l.id),d=t===l.id;return n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&n.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),n.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?n.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):n.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),n.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[n.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:d||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:d?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):c?n.jsxs(n.Fragment,{children:["Connected ",n.jsx(gn,{className:"w-4 h-4"})]}):l.isComingSoon?n.jsx(n.Fragment,{children:"Development in Progress"}):n.jsxs(n.Fragment,{children:["Connect ",l.name," ",n.jsx(To,{className:"w-4 h-4"})]})}),n.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",n.jsx(Ts,{className:"w-3 h-3"})]})]})]},l.id)})}),n.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:n.jsx(o1,{className:"w-6 h-6 text-indigo-400"})}),n.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",n.jsx("br",{}),n.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),n.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),n.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),n.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:n.jsx(o1,{className:"w-full h-full text-indigo-600"})})]})]})};function kbe(e){if(e==null||Object.keys(e).length===0)return"";const t=Object.keys(e).sort().reduce((r,a)=>(r[a]=e[a],r),{});return JSON.stringify(t)}const ds={all:["shared-inbox"],emails:()=>[...ds.all,"emails"],emailsList:(e,t)=>[...ds.emails(),e,kbe(t)],senders:(e,t)=>[...ds.all,"senders",e,t]},Sbe=(e,t,r)=>{const a=t?.limit||50;return Hie({queryKey:ds.emailsList(e||"",t),queryFn:async({pageParam:s})=>{if(!e)return{data:[],hasMore:!1,total:0,nextCursor:void 0};const i={...t,limit:a};typeof s=="string"?i.cursor=s:s!=null&&s!==void 0?i.page=Number(s):i.page=0;const o=await rM(e,i),l=o?.data??o??[],c=Array.isArray(l)?l:[],d=o?.hasMore,u=typeof d=="boolean"?d:c.length>=a;return{data:c,hasMore:u,total:o?.total??c.length,nextCursor:o?.nextCursor}},getNextPageParam:(s,i)=>{if(s.hasMore)return s.nextCursor?s.nextCursor:i.length},initialPageParam:void 0,enabled:!!e&&r?.enabled!==!1,staleTime:r?.staleTime,refetchInterval:r?.refetchInterval,refetchOnWindowFocus:!1,refetchOnMount:!1,placeholderData:s=>s})},_be=(e,t)=>Ys({queryKey:ds.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await sse(e,t);return r?.data??r??[]},enabled:!!e,staleTime:300*1e3}),Cbe=()=>{const e=Ia();return ui({mutationFn:async({userId:t,accountEmail:r,scopeHours:a,scopeDays:s})=>await Zae(t,r,a,s),onSuccess:()=>{e.invalidateQueries({queryKey:ds.emails()})}})},Abe=({isOpen:e,onClose:t,userId:r,emailId:a,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:d,showError:u}=kn(),[f,p]=D.useState(!1),[m,b]=D.useState(!1),[v,g]=D.useState([]),[y,w]=D.useState(!1),[j,N]=D.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});D.useEffect(()=>{if(!e)return;const _=new Date;_.setDate(_.getDate()+1),_.setHours(10,0,0,0);const P=new Date(_);P.setHours(11,0,0,0);let I=_.toISOString().substring(0,16),B=P.toISOString().substring(0,16);if(l?.date||l?.time)try{const T=l.date||"tomorrow",E=l.time||"10:00 AM";let F=new Date;if(T.toLowerCase().includes("tomorrow"))F.setDate(F.getDate()+1);else if(!T.toLowerCase().includes("today")){const H=T.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(H){const[,Q,J,re]=H;F=new Date(parseInt(re)<100?2e3+parseInt(re):parseInt(re),parseInt(Q)-1,parseInt(J))}}const q=E.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(q){let H=parseInt(q[1]);const Q=q[2]?parseInt(q[2]):0,J=q[3]?.toLowerCase();J==="pm"&&H!==12&&(H+=12),J==="am"&&H===12&&(H=0),F.setHours(H,Q,0,0),I=F.toISOString().substring(0,16);const re=new Date(F);re.setHours(re.getHours()+1),B=re.toISOString().substring(0,16)}}catch(T){console.warn("Failed to parse extracted date/time:",T)}N({title:l?.title||s||"Meeting",description:l?.description||i?.substring(0,500)||"",start:I,end:B,location:l?.location||"",participants:l?.participants||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const S=async()=>{if(!j.start||!j.end||j.participants.length===0){u("Please set date/time and add participants to check availability");return}b(!0);try{const _=new Date(j.start).toISOString().split("T")[0],P=new Date(j.end).toISOString().split("T")[0],I=await Xse(r,j.participants,_,P);I.success&&I.data&&(g(I.data),w(!0))}catch(_){u(_.message||"Failed to check availability")}finally{b(!1)}},A=async _=>{if(_.preventDefault(),!j.title||!j.start||!j.end){u("Please fill in all required fields");return}if(!a){u("Email ID is required to create meeting");return}p(!0);try{(await Kse({userId:r,emailId:a,title:j.title,description:j.description,start:new Date(j.start).toISOString(),end:new Date(j.end).toISOString(),location:j.location,participants:j.participants,createInGoogleCalendar:j.createInGoogleCalendar})).success&&(d("Meeting created successfully!"),c?.(),t())}catch(P){u(P.message||"Failed to create meeting")}finally{p(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(ta,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&n.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Bn,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),n.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&n.jsxs("p",{children:["Date: ",l.date]}),l.time&&n.jsxs("p",{children:["Time: ",l.time]}),l.location&&n.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),n.jsxs("form",{onSubmit:A,className:"space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:j.title,onChange:_=>N({...j,title:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(ms,{className:"w-3 h-3"})," Start Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.start,onChange:_=>N({...j,start:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(ms,{className:"w-3 h-3"})," End Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.end,onChange:_=>N({...j,end:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(SD,{className:"w-3 h-3"})," Location"]}),n.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:j.location,onChange:_=>N({...j,location:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(p0,{className:"w-3 h-3"})," Participants"]}),j.participants.length>0&&n.jsx("button",{type:"button",onClick:S,disabled:m||!j.start||!j.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Checking...":"Check Availability"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[j.participants.map((_,P)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[_,n.jsx("button",{type:"button",onClick:()=>N({...j,participants:j.participants.filter((I,B)=>B!==P)}),className:"hover:text-indigo-900",children:n.jsx(Xt,{className:"w-3 h-3"})})]},P)),n.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:_=>{if(_.key==="Enter"&&_.currentTarget.value.trim()){_.preventDefault();const P=_.currentTarget.value.trim();j.participants.includes(P)||N({...j,participants:[...j.participants,P]}),_.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),y&&v.length>0&&n.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),v.map((_,P)=>n.jsxs("div",{className:"text-xs text-amber-800",children:[n.jsx("p",{className:"font-medium",children:_.userId}),_.busySlots&&_.busySlots.length>0?n.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",_.busySlots.length," conflict(s)"]}):n.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},P))]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),n.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:j.description,onChange:_=>N({...j,description:_.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:j.createInGoogleCalendar,onChange:_=>N({...j,createInGoogleCalendar:_.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),n.jsx("button",{type:"button",onClick:A,disabled:f||!j.title||!j.start||!j.end||!a,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fu,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},Ebe={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},nB=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Xc=(e,t)=>{const r=nB(e);return(Ebe[t]||[]).includes(r)},Tbe=e=>nB(e)==="Admin",n1=ut.forwardRef((e,t)=>n.jsx(f3,{...e,ref:t}));n1.displayName="QuillEditor";function xD({content:e,highlightTerm:t}){const r=D.useRef(null),a=e||"No content",s=/<[a-z][\s\S]*>/i.test(a);if(D.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(d=>{d.forEach(u=>{if(u.isIntersecting){const f=u.target,p=f.getAttribute("data-src");p&&(f.src=p,f.removeAttribute("data-src"),f.loading="lazy",c.unobserve(f))}})},{rootMargin:"50px"});return l.forEach(d=>c.observe(d)),()=>{l.forEach(d=>c.unobserve(d))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),u=(s?a.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():a).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),f=eg.sanitize(u,{ALLOWED_TAGS:["mark","br"]});return n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:f}})}const i=s?eg.sanitize(a,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,d,u)=>`<img${c}data-src="${d}" loading="lazy"${u}>`)),n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:a}})}const Obe=90*1e3;let gD=0;const aB=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),a=Ia(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s?.id,o=s?.role||"Viewer",l=Xc(o,"shared-inbox:add-note"),c=Xc(o,"shared-inbox:assign-email"),d=Xc(o,"shared-inbox:send-email"),u=Xc(o,"shared-inbox:reply-email"),f=Xc(o,"shared-inbox:forward-email"),p=Xc(o,"shared-inbox:star-email"),m=Xc(o,"shared-inbox:archive-email"),b=Xc(o,"shared-inbox:delete-email"),v=Xc(o,"shared-inbox:update-metadata");Xc(o,"shared-inbox:manage-accounts");const g=Xc(o,"shared-inbox:sync-emails"),y=(L,pe="An error occurred")=>L?typeof L=="string"?L:typeof L=="object"?typeof L.message=="string"&&L.message?L.message:L.error&&typeof L.error=="object"&&typeof L.error.message=="string"&&L.error.message?L.error.message:pe:pe:pe,w=L=>!L||typeof L!="string"?"":L.replace(/\n/g,"<br/>"),j=async(L,pe)=>{try{return await L()}catch(ye){const Je=y(ye,"An error occurred");return pe&&pe(Je),null}},[N,S]=D.useState(null),[A,_]=D.useState(!1),[P,I]=D.useState(!1),[B,T]=D.useState(!1),E=D.useRef(!1),F=D.useRef(null),q=D.useRef(null),[H,Q]=D.useState(""),[J,re]=D.useState(null),[X,ee]=D.useState(""),[W,O]=D.useState(""),[z,V]=D.useState("contains"),[U,K]=D.useState(void 0),[se,xe]=D.useState(""),[ie,ue]=D.useState(""),[Be,me]=D.useState(void 0),[$e,Oe]=D.useState(void 0),[le,te]=D.useState(""),[Te,we]=D.useState(!1),[Ie,he]=D.useState(!1),{data:de=[]}=_be(i,Te?150:void 0),[Ce,Ve]=D.useState([]),[ge,fe]=D.useState(!1),[_e,Ue]=D.useState(""),[ke,Fe]=D.useState(!1),[qe,et]=D.useState([]),[Kt,qt]=D.useState([]),[vr,er]=D.useState(!1),[mr,Ge]=D.useState(""),[jt,br]=D.useState(null),[Qt,Fr]=D.useState(null),[Mr,rt]=D.useState(null),[At,cr]=D.useState("list"),[wr,Gr]=D.useState(new Set),[jr,qr]=D.useState(new Set),[tr,Xr]=D.useState({}),[Vr,pn]=D.useState(""),[Nr,Or]=D.useState(""),[ne,je]=D.useState(null),[Se,oe]=D.useState(!1),[ve,Ae]=D.useState(null),[Ke,nt]=D.useState(null),[Qe,tt]=D.useState([]),[Xe,Me]=D.useState(null),[it,bt]=D.useState(!1),It=D.useRef(null),Dt=D.useRef(null),[xr,Rr]=D.useState(!1),[Yr,Nn]=D.useState([]),[Ps,Sn]=D.useState(null),[ts,Wn]=D.useState(!1),[za,Vn]=D.useState(""),[Pn,Do]=D.useState([]),[ba,We]=D.useState(!1),[Tt,_t]=D.useState(""),[nr,yr]=D.useState(0),[dr,Pr]=D.useState([]),[ra,_n]=D.useState(null),[Yt,ur]=D.useState([]),[Lt,kr]=D.useState(!1),[zt,Da]=D.useState(""),ka=D.useRef(null),[Sa,Zt]=D.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[Zr,La]=D.useState(null),[Xn,bn]=D.useState({}),[Sr,en]=D.useState([]),[sr,Dn]=D.useState(!1),[Ar,Fa]=D.useState(null),[ho,gs]=D.useState(!1),[vs,bs]=D.useState(null),[mo,ml]=D.useState([]),[zu,po]=D.useState(null),[Hi,hi]=D.useState(!1),[rc,He]=D.useState([]),[pr,Br]=D.useState(""),[$r,hn]=D.useState(!1),qn=D.useRef(null),ua=D.useRef(null),Ma=D.useRef(!1),[ys,Mf]=D.useState("domain"),[Wi,Ai]=D.useState(""),[Ol,ws]=D.useState(""),[xo,Lo]=D.useState([]),[pd,Ac]=D.useState(!1),[xd,pl]=D.useState(!1),[Ei,Fo]=D.useState(""),[gd,Hu]=D.useState(!1),[nu,Ec]=D.useState(""),[ya,Wu]=D.useState(null),[nc,au]=D.useState(!1),[G,Ne]=D.useState([]),[Ye,at]=D.useState(!1),[xt,Ot]=D.useState(!1),[Wt,gr]=D.useState(!1),[Hr,on]=D.useState(null),[tn,Cn]=D.useState(null),[Ha,Wa]=D.useState(null),[Ns,Zs]=D.useState(null),[Us,Mo]=D.useState(null),[ei,go]=D.useState([]),[vo,su]=D.useState(""),[iu,Tc]=D.useState(!1),[vd,bd]=D.useState(!1),[yd,_a]=D.useState(!1),[bo,xl]=D.useState(!1),[rs,Oc]=D.useState("compose"),[ln,ss]=D.useState([]),[xa,mi]=D.useState([]),[$n,qs]=D.useState([]),[Va,Vi]=D.useState(""),[Ga,js]=D.useState(""),[wa,is]=D.useState(""),[Gi,Pl]=D.useState(""),[Ro,ou]=D.useState([]),[gl,Gn]=D.useState([]),[Il,ti]=D.useState(!1),[Ti,Dl]=D.useState(!1),[wd,Ll]=D.useState(!1),[Bo,Ki]=D.useState(""),[$s,Xi]=D.useState(""),[Oi,Yi]=D.useState(""),[yo,Pc]=D.useState([]),[ks,Ss]=D.useState(!1),[na,Yn]=D.useState(0),[An,Ca]=D.useState([]),Uo=D.useRef(null),[lu,qo]=D.useState(!1),[Nd,$o]=D.useState([]),[Fl,pi]=D.useState(!1),[xi,Vu]=D.useState(""),[ac,Vh]=D.useState(null),[cu,Gu]=D.useState([]),[fa,Rf]=D.useState([]),[Ic,jd]=D.useState([]),[du,Ku]=D.useState([]),[Dc,Xu]=D.useState({contacts:[],companies:[]}),[kd,M0]=D.useState(!1),[Bf,Gh]=D.useState([]),[Yu,Qu]=D.useState([]),[sc,uu]=D.useState([]),[fu,Uf]=D.useState(!1),[R0,Lc]=D.useState(!1),[ic,Sd]=D.useState(null),[gp,Ju]=D.useState(!1),[os,wo]=D.useState(!1),[Pi,No]=D.useState(null),[hu,ls]=D.useState(!1),[Qi,vp]=D.useState(null),[qf,Fc]=D.useState(!1),[Ml,Mc]=D.useState(null),[Zu,$f]=D.useState(!1),[zo,vl]=D.useState({}),[Qn,aa]=D.useState(!1),[Rc,_s]=D.useState(!1),[gi,Rl]=D.useState(""),[_d,Ji]=D.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[ef,zf]=D.useState([]),[B0,Bc]=D.useState(!1),[Kh,Ho]=D.useState(!1),[Ra,C]=D.useState(new Set),[R,Z]=D.useState(!1),[ce,be]=D.useState(!1),[Ee,De]=D.useState("date"),[Le,Re]=D.useState("desc"),[ze,st]=D.useState(!1),[gt,vt]=D.useState(null),mt=D.useRef(null),Ut=D.useRef(null),St=D.useRef(null),dt=D.useRef(null),ot=D.useCallback(L=>{const pe={searchText:""};if(!L||typeof L!="string")return pe;const ye=[];let Je="",lt=!1;for(let wt=0;wt<L.length;wt++){const $t=L[wt];if($t==='"'){lt=!lt;continue}if(!lt&&($t===" "||$t==="	")){Je&&(ye.push(Je),Je="");continue}Je+=$t}Je&&ye.push(Je);const Pt=[];for(const wt of ye){const $t=wt.match(/^from:(.+)$/i);if($t){pe.from=$t[1].trim();continue}const Cr=wt.match(/^subject:(.+)$/i);if(Cr){pe.subject=Cr[1].trim();continue}if(/^has:attachment$/i.test(wt)){pe.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(wt)||/^-has:attachment$/i.test(wt)){pe.hasAttachment=!1;continue}if(/^is:read$/i.test(wt)){pe.isRead=!0;continue}if(/^is:unread$/i.test(wt)){pe.isRead=!1;continue}if(/^is:starred$/i.test(wt)){pe.isStarred=!0;continue}if(/^is:unstarred$/i.test(wt)){pe.isStarred=!1;continue}Pt.push(wt)}return pe.searchText=Pt.join(" ").trim(),pe},[]),Et=D.useMemo(()=>{const L=ot(H),pe={};L.searchText&&(pe.search=L.searchText),le&&(pe.status=le);const ye=L.from??X;ye&&(pe.from=ye);const Je=L.subject??W;Je&&(pe.subject=Je,pe.subjectOperator=z);const lt=L.hasAttachment!==void 0?L.hasAttachment:U;lt!==void 0&&(pe.hasAttachment=lt),se&&(pe.dateFrom=se),ie&&(pe.dateTo=ie),Ar&&(pe.labelId=Ar);const Pt=L.isRead!==void 0?L.isRead:Be;Pt!==void 0&&(pe.isRead=Pt);const wt=L.isStarred!==void 0?L.isStarred:$e;return wt!==void 0&&(pe.isStarred=wt),pe},[H,le,X,W,z,U,se,ie,Ar,Be,$e,ot]),{data:Ct,isLoading:Ft,isFetchingNextPage:or,hasNextPage:rr,fetchNextPage:Wr,error:fr,refetch:yn}=Sbe(i,Object.keys(Et).length>0?Et:void 0,{staleTime:60*1e3,refetchInterval:120*1e3}),In=D.useMemo(()=>Ct?.pages?Ct.pages.flatMap(ye=>ye.data||[]).filter((ye,Je,lt)=>ye.id&&Je===lt.findIndex(Pt=>Pt.id===ye.id)):[],[Ct]);Ct?.pages[0]?.total??In.length;const En=Cbe(),cn=D.useCallback(()=>{Ma.current||or||!rr||!i||(Ma.current=!0,Wr())},[or,rr,Wr,i]);D.useEffect(()=>{or||(Ma.current=!1)},[or]),D.useEffect(()=>{if(fr){const L=fr?.message||"Failed to load inbox";rt(L),(L.toLowerCase().includes("google")||L.toLowerCase().includes("connected"))&&re(!1)}else rt(null)},[fr]),D.useEffect(()=>{const L=qn.current,pe=ua.current;if(!L||!pe||!rr||or)return;let ye=null,Je=null,lt=null;const Pt=400;try{ye=new IntersectionObserver(wt=>{wt[0].isIntersecting&&rr&&!or&&cn()},{threshold:.1,rootMargin:"300px",root:pe}),ye.observe(L)}catch(wt){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",wt)}return Je=()=>{or||!rr||lt==null&&(lt=setTimeout(()=>{lt=null;const wt=pe,$t=L;if(!wt||!$t||or||!rr)return;const Cr=wt.getBoundingClientRect(),vn=$t.getBoundingClientRect(),sa=Cr.bottom-vn.top;sa<500&&sa>-100&&cn()},Pt))},pe.addEventListener("scroll",Je,{passive:!0}),()=>{lt!=null&&clearTimeout(lt),ye&&ye.disconnect(),Je&&pe&&pe.removeEventListener("scroll",Je)}},[rr,or,cn,At,In.length]);const Jn=D.useCallback(async()=>{if(i)try{const L=await n3(i),pe=L?.connected===!0||L?.data?.connected===!0;re(pe)}catch{re(!1)}},[i]),Fn=D.useCallback(async()=>{if(i){Tc(!0);try{const L=await Sse(i),pe=L?.data??L??[],ye=Array.isArray(pe)?pe:[];go(ye.filter(Je=>Je.domain&&String(Je.domain).trim()||!1))}catch(L){console.error("[INBOX] Failed to load excluded domains:",L),r(y(L,"Failed to load excluded domains")),go([])}finally{Tc(!1)}}},[i,r]),rn=D.useCallback(async()=>{if(!(!i||!vo.trim())){bd(!0);try{await _se(i,vo.trim()),su(""),await Fn(),t("Domain added to exclusion list"),yn()}catch(L){console.error("[INBOX] Failed to add excluded domain:",L),r(y(L,"Failed to add excluded domain"))}finally{bd(!1)}}},[i,vo,Fn,yn,t,r]),Ka=D.useCallback(async L=>{if(i)try{await Cse(i,L),await Fn(),t("Domain removed from exclusion list"),yn()}catch(pe){console.error("[INBOX] Failed to remove excluded domain:",pe),r(y(pe,"Failed to remove excluded domain"))}},[i,Fn,yn,t,r]),Ii=L=>L?`${L.toLowerCase().trim().replace(/[^a-z0-9\s]/g,"").split(/\s+/)[0].replace(/[^a-z0-9]/g,"")||"user"}@impact24x7.com`:"",Xa=D.useCallback(async()=>{if(i)try{let L=[],pe=[];try{const Pt=await ese(i),wt=Pt?.data??Pt??[];L=Array.isArray(wt)?wt.filter(($t,Cr,vn)=>{const sa=($t.email||"").toLowerCase();return vn.findIndex(ia=>(ia.email||"").toLowerCase()===sa&&ia.userId===$t.userId)===Cr}):[]}catch(Pt){console.error("[INBOX] Failed to load Gmail accounts:",Pt)}try{const Pt=await _c(),wt=Pt?.data??Pt??[];pe=Array.isArray(wt)?wt.filter($t=>$t.name&&$t.id).map($t=>({email:Ii($t.name),userId:$t.id,ownerName:$t.name,connectedAt:$t.createdAt||new Date().toISOString(),lastSyncedAt:$t.updatedAt||new Date().toISOString(),isCurrentUser:$t.id===i,isCustomEmail:!0})):[],console.log("[INBOX] Loaded custom email accounts:",pe.length)}catch(Pt){console.error("[INBOX] Failed to load users for custom emails:",Pt)}const ye=[...L,...pe],Je=new Map;ye.forEach(Pt=>{const wt=(Pt.email||"").toLowerCase(),$t=Pt.ownerName||"";$t.toLowerCase()==="unknown user"||$t.trim()===""||Je.has(wt)||Je.set(wt,Pt)});const lt=Array.from(Je.values());console.log("[INBOX] Total accounts loaded:",{gmail:L.length,custom:pe.length,beforeDedup:ye.length,afterDedup:lt.length}),et(lt),re(L.length>0),is(Pt=>lt.length>0&&!Pt?lt[0].email:Pt)}catch(L){console.error("[INBOX] Failed to load connected accounts:",L)}},[i]),Cs=async()=>{if(i)try{const L=await tM(i),pe=L?.authUrl||L?.data?.authUrl;pe?window.location.href=pe:r("Failed to get authorization URL")}catch(L){r(L?.message||"Failed to connect account")}},Zn=async L=>{if(i){br(L);try{await tse(i,L),t(`Disconnected ${L}`),await Xa(),await yn()}catch(pe){r(pe?.message||"Failed to disconnect account")}finally{br(null)}}},Is=D.useCallback(async()=>{if(i)try{const L=await rse(i),pe=L?.data??L??[];qt(Array.isArray(pe)?pe:[])}catch(L){console.error("[INBOX] Failed to load filtered accounts:",L),qt([])}},[i]),vi=async L=>{if(i){Fr(L);try{await nse(i,L),await Is(),await a.invalidateQueries({queryKey:ds.emails()}),t(`Emails from ${L} will be hidden`)}catch(pe){r(pe?.message||"Failed to filter account")}finally{Fr(null)}}},Ya=async(L,pe)=>{if(i){Fr(pe);try{await ase(i,L),await Is(),await a.invalidateQueries({queryKey:ds.emails()}),t(`Emails from ${pe} will now be visible`)}catch(ye){r(ye?.message||"Failed to unfilter account")}finally{Fr(null)}}};D.useEffect(()=>{if(!i){re(!1);return}Jn(),Xa(),Fn(),Is()},[i,Jn,Xa,Fn,Is]),D.useEffect(()=>{qe.length>0&&!wa&&is(qe[0].email)},[qe]),D.useEffect(()=>{try{const L=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(L){const pe=JSON.parse(L);Array.isArray(pe)&&Ve(pe)}}catch{}},[]),D.useEffect(()=>{if(Ce.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(Ce))}catch{}},[Ce]),D.useEffect(()=>{i&&(async()=>{try{const pe=await _c(),ye=pe?.data??pe??[];Do(Array.isArray(ye)?ye:[])}catch(pe){const ye=pe?.message||"Failed to load users";console.error("Failed to load users:",ye)}})()},[i]),D.useEffect(()=>{const L=pe=>{ka.current&&!ka.current.contains(pe.target)&&kr(!1)};if(Lt)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[Lt]),D.useEffect(()=>{i&&(async()=>{try{const pe=await Sh(),ye=pe?.data??pe??[];Gn(Array.isArray(ye)?ye:[])}catch(pe){console.error("Failed to load contacts:",pe?.message)}})()},[i]);const Ba=D.useCallback(async(L=!1)=>{if(i&&!(sr&&!L))try{Dn(!0);const pe=await Rse(i),ye=pe?.labels??pe?.data;en(Array.isArray(ye)?ye:[])}catch(pe){console.error("Error fetching labels:",pe),en([])}finally{Dn(!1)}},[i]);D.useEffect(()=>{i&&J&&Ba()},[i,J,Ba]),D.useEffect(()=>{ho&&vs&&i&&Ba(!0)},[ho,vs,i,Ba]),D.useEffect(()=>{i&&bo&&(async()=>{if(i)try{const pe=await nM(i),ye=pe?.data??pe??[];ou(Array.isArray(ye)?ye:[]);const Je=ye.find(lt=>lt.isDefault);Je&&Pl(Je.content||"")}catch(pe){console.error("Failed to load signatures:",pe?.message)}})()},[i,bo]);const zs=async()=>{if(i){_(!0),rt(null);try{await En.mutateAsync({userId:i,scopeDays:"all"}),t("Syncing all emails from connected accounts")}catch(L){const pe=L?.message||"Sync failed";r(pe),rt(pe)}finally{_(!1)}}},Di=D.useRef(En),Wo=D.useRef(a);D.useEffect(()=>{Di.current=En,Wo.current=a},[En,a]),D.useEffect(()=>{if(!i||!g){F.current&&(clearTimeout(F.current),F.current=null),q.current&&(clearInterval(q.current),q.current=null);return}F.current&&(clearTimeout(F.current),F.current=null),q.current&&(clearInterval(q.current),q.current=null);const L=()=>{const pe=Date.now();pe-gD<Obe||E.current||(gD=pe,E.current=!0,I(!0),Di.current.mutate({userId:i,scopeDays:"all"},{onSuccess:()=>{E.current=!1,I(!1)},onError:ye=>{console.log("[INBOX] Background sync failed:",ye?.message||"Unknown error"),E.current=!1,I(!1)}}))};return F.current=setTimeout(()=>{L(),F.current=null},30*1e3),q.current=setInterval(()=>{L()},1500*1e3),()=>{F.current&&(clearTimeout(F.current),F.current=null),q.current&&(clearInterval(q.current),q.current=null),E.current=!1}},[i,g]);const Qa=async L=>{if(i){M0(!0);try{const pe=await Ise(L);Xu(pe?.data||{contacts:[],companies:[]})}catch(pe){console.error("Failed to load suggested links:",pe),Xu({contacts:[],companies:[]})}finally{M0(!1)}}},ns=async L=>{if(i){Uf(!0);try{const[pe,ye,Je]=await Promise.all([Lse(L).catch(()=>({success:!0,data:[]})),Fse(L).catch(()=>({success:!0,data:[]})),Mse(L).catch(()=>({success:!0,data:[]}))]);Gh(pe?.data||[]),Qu(ye?.data||[]),uu(Je?.data||[])}catch(pe){console.error("Failed to load related items:",pe),Gh([]),Qu([]),uu([])}finally{Uf(!1)}}};D.useEffect(()=>{(async()=>{if(i)try{const[pe,ye,Je,lt]=await Promise.all([hd().catch(()=>({data:[]})),kg(i).catch(()=>({data:[]})),I0(i).catch(()=>({data:[]})),eM({userId:i}).catch(()=>({data:[]}))]);Gu(pe?.data||[]),Rf(ye?.data||[]),jd(Je?.data||[]),Ku(lt?.data||[])}catch(pe){console.error("Failed to load CRM data:",pe)}})()},[i]);const Ds=async(L,pe)=>{if(!(!N?.id||!i)){wo(!0);try{const ye=N.id;let Je;switch(L){case"contact":await Ase({emailId:ye,contactId:pe,userId:i}),Je="contactId";break;case"company":await Ese({emailId:ye,companyId:pe,userId:i}),Je="companyId";break;case"deal":await Tse({emailId:ye,dealId:pe,userId:i}),Je="dealId";break;case"project":await Ose({emailId:ye,projectId:pe,userId:i}),Je="projectId";break;case"contract":await Pse({emailId:ye,contractId:pe,userId:i}),Je="contractId";break;default:throw new Error(`Unknown link type: ${L}`)}t(`Email linked to ${L} successfully`),S(lt=>lt?{...lt,linkedRecords:{...lt.linkedRecords||{},[Je]:pe}}:null),ns(ye),Lc(!1),Sd(null)}catch(ye){r(ye?.message||`Failed to link email to ${L}`)}finally{wo(!1)}}},Uc=async L=>{if(!(!N?.id||!i))try{const pe=await Dse({emailId:N.id,userId:i,title:L.title||N.subject||"Task from Email",description:L.description||N.body||"",dueDate:L.dueDate,priority:L.priority||"Medium",projectId:L.projectId,assigneeId:L.assigneeId});t("Task created successfully"),Ju(!1),ns(N.id)}catch(pe){r(pe?.message||"Failed to create task")}},Zi=async L=>{if(!i)return;S(null),ml([]),po(null),nt(null),tt([]),Me(null),T(!0);const pe=!L.isRead;pe&&a.setQueriesData({queryKey:ds.emails()},ye=>{if(!ye?.pages)return ye;const Je=ye.pages.map(lt=>{const Pt=lt.data.map(wt=>wt.id===L.id?{...wt,isRead:!0}:wt);return{...lt,data:Pt}});return{...ye,pages:Je}});try{const ye=await ise(L.id,i),Je=ye?.data??ye??{},lt={...L,...Je,body:Je.body??L.lastMessage,gmailThreadId:Je.gmailThreadId??L.gmailThreadId,isRead:!0};S(lt),pe&&Kn(L.id,!0,!0).catch(Pt=>{console.error("[INBOX] Failed to mark email as read:",Pt?.message),a.setQueryData(ds.emailsList(i||"",Et),wt=>wt?.pages?{...wt,pages:wt.pages.map($t=>({...$t,data:$t.data.map(Cr=>Cr.id===L.id?{...Cr,isRead:!1}:Cr)}))}:wt)}),L.id&&(Qa(L.id),ns(L.id));try{const Pt=await cse(L.id),wt=Pt?.data??Pt??[];Xr($t=>({...$t,[L.id]:wt.map(Cr=>({id:Cr.id,userId:Cr.userId,userName:Cr.userName,message:Cr.message,timestamp:Cr.createdAt,imageUrl:Cr.imageUrl,imageName:Cr.imageName,markedFor:Cr.markedFor||[]}))}))}catch(Pt){const wt=Pt?.message||"Failed to load notes";console.error("Failed to load notes:",wt),Xr($t=>({...$t,[L.id]:[]}))}if(i)try{at(!0);const Pt=await hk(i,L.id);Pt.success&&Pt.data?Ne(Pt.data):Ne([])}catch(Pt){console.error("Failed to load calendar events:",Pt.message),Ne([])}finally{at(!1)}}catch(ye){r(ye?.message||"Could not load email")}finally{T(!1)}},Kn=async(L,pe,ye=!1)=>{if(i)try{await hI(L,pe,i),a.setQueriesData({queryKey:ds.emails()},Je=>{if(!Je?.pages)return Je;const lt=Je.pages.map(Pt=>({...Pt,data:Pt.data.map(wt=>wt.id===L?{...wt,isRead:pe,syncStatus:{...wt.syncStatus||{},readStatus:"pending"}}:wt)}));return{...Je,pages:lt}}),N?.id===L&&S(Je=>Je?{...Je,isRead:pe,syncStatus:{...Je.syncStatus||{},readStatus:"pending"}}:null),ye||t(pe?"Marked as read":"Marked as unread")}catch(Je){ye?console.error("[INBOX] Failed to mark email as read:",Je?.message):(r(Je?.message||"Update failed"),yn())}},Bl=async(L,pe)=>{try{await ose(L,pe),a.setQueryData(ds.emailsList(i||"",Et),ye=>ye?.pages?{...ye,pages:ye.pages.map(Je=>({...Je,data:Je.data.map(lt=>lt.id===L?{...lt,isStarred:pe,syncStatus:{...lt.syncStatus||{},starredStatus:"pending"}}:lt)}))}:ye),N?.id===L&&S(ye=>ye?{...ye,isStarred:pe,syncStatus:{...ye.syncStatus||{},starredStatus:"pending"}}:null),a.invalidateQueries({queryKey:ds.emails()}),t(pe?"Starred":"Unstarred")}catch(ye){r(ye?.message||"Update failed"),yn()}},Cd=L=>{if(!L)return null;switch(L){case"synced":return n.jsx(gn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return n.jsx(ms,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return n.jsx(Bn,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},mu=async(L,pe=[],ye=[],Je=!1,lt)=>{try{if(await Use(L,{addLabelIds:pe,removeLabelIds:ye,trackAccuracy:Je,suggestionId:lt}),a.invalidateQueries({queryKey:ds.emails()}),N?.id===L){const wt=[...N.labels||[]];pe.forEach($t=>{wt.includes($t)||wt.push($t)}),ye.forEach($t=>{const Cr=wt.indexOf($t);Cr>-1&&wt.splice(Cr,1)}),S({...N,labels:wt,syncStatus:{...N.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(Pt){r(Pt?.message||"Failed to update labels")}},Vo=async(L,pe)=>{try{await qse(L,pe),await mu(L,[],[pe])}catch(ye){r(ye?.message||"Failed to remove label")}},jo=async(L,pe)=>{if(i){Hu(!0);try{await Bse({userId:i,accountEmail:pe,labelName:L,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await Ba(),Fo(""),pl(!1)}catch(ye){r(ye?.message||"Failed to create label")}finally{Hu(!1)}}},oc=async(L,pe)=>{if(i)try{await Sv(L,{userId:i,...pe}),a.invalidateQueries({queryKey:ds.emails()}),N?.id===L&&S(ye=>ye?{...ye,...pe}:null),t("Email updated")}catch(ye){r(ye?.message||"Update failed")}},ko=()=>{Z(!R),C(new Set)},Ul=L=>{C(pe=>{const ye=new Set(pe);return ye.has(L)?ye.delete(L):ye.add(L),ye})},Ad=()=>{Ra.size===to.length?C(new Set):C(new Set(to.map(L=>L.id)))},pu=async()=>{if(!(!i||Ra.size===0)){be(!0);try{await Promise.all(Array.from(Ra).map(L=>hI(L,!0,i))),a.invalidateQueries({queryKey:ds.emails()}),t(`${Ra.size} email(s) marked as read`),C(new Set)}catch(L){r(L?.message||"Failed to mark emails as read")}finally{be(!1)}}},So=async L=>{if(i)try{await mI(L,i),a.invalidateQueries({queryKey:ds.emails()}),N?.id===L&&S(pe=>pe?{...pe,threadStatus:"archived"}:null),t("Email archived")}catch(pe){r(pe?.message||"Failed to archive email")}},xu=async L=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await pI(L,i),a.invalidateQueries({queryKey:ds.emails()}),N?.id===L&&S(null),t("Email deleted")}catch(pe){r(pe?.message||"Failed to delete email")}},qc=async L=>{if(i)try{await wse(L,i),a.invalidateQueries({queryKey:ds.emails()}),N?.id===L&&S(pe=>pe?{...pe,threadStatus:"active"}:null),t("Email restored")}catch(pe){r(pe?.message||"Failed to restore email")}},lc=async L=>{if(i)try{await Sv(L,{userId:i,threadStatus:"resolved"}),a.invalidateQueries({queryKey:ds.emails()}),N?.id===L&&S(pe=>pe?{...pe,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(pe){r(pe?.message||"Failed to resolve conversation")}},gu=async()=>{if(!(!i||Ra.size===0)){be(!0);try{await Promise.all(Array.from(Ra).map(L=>mI(L,i))),a.invalidateQueries({queryKey:ds.emails()}),t(`${Ra.size} email(s) archived`),C(new Set)}catch(L){r(L?.message||"Failed to archive emails")}finally{be(!1)}}},ql=async()=>{if(!(!i||Ra.size===0)&&confirm(`Are you sure you want to delete ${Ra.size} email(s)? This action cannot be undone.`)){be(!0);try{await Promise.all(Array.from(Ra).map(pe=>pI(pe,i)));const L=Array.from(Ra);a.invalidateQueries({queryKey:ds.emails()}),N&&Ra.has(N.id)&&S(null),t(`${L.length} email(s) deleted`),C(new Set)}catch(L){r(L?.message||"Failed to delete emails")}finally{be(!1)}}},Xh=async(L,pe,ye,Je)=>{if(!i)return;const lt=`${L}-${pe}-view`;bn(Pt=>({...Pt,[lt]:!0}));try{const Pt=await xI(L,pe,i),wt=window.URL.createObjectURL(Pt);La({isOpen:!0,emailId:L,attachmentId:pe,filename:ye,mimeType:Je,url:wt})}catch(Pt){r(Pt?.message||"Failed to load attachment")}finally{bn(Pt=>({...Pt,[lt]:!1}))}},tf=async(L,pe,ye)=>{if(!i)return;const Je=`${L}-${pe}-download`;bn(lt=>({...lt,[Je]:!0}));try{const lt=await xI(L,pe,i),Pt=window.URL.createObjectURL(lt),wt=document.createElement("a");wt.href=Pt,wt.download=ye,document.body.appendChild(wt),wt.click(),window.URL.revokeObjectURL(Pt),document.body.removeChild(wt),t("Attachment downloaded")}catch(lt){r(lt?.message||"Failed to download attachment")}finally{bn(lt=>({...lt,[Je]:!1}))}},ga=L=>{if(L===0)return"0 Bytes";const pe=1024,ye=["Bytes","KB","MB","GB"],Je=Math.floor(Math.log(L)/Math.log(pe));return Math.round(L/Math.pow(pe,Je)*100)/100+" "+ye[Je]},ri=L=>L.startsWith("image/"),cc=L=>L==="application/pdf",U0=L=>{const pe=L.target.files;if(!pe||pe.length===0)return;const ye=25*1024*1024,Je=[];Array.from(pe).forEach(lt=>{if(lt.size>ye){r(`File "${lt.name}" is too large. Maximum size is 25MB.`);return}const Pt=`${Date.now()}-${Math.random()}`;let wt;lt.type.startsWith("image/")&&(wt=URL.createObjectURL(lt)),Je.push({file:lt,preview:wt,id:Pt})}),Ca([...An,...Je]),Uo.current&&(Uo.current.value="")},Ed=async(L,pe)=>{if(i){pi(!0);try{const ye=await Yse(i,wa||void 0,void 0,L||xi,pe),Je=ye?.data||ye||{};$o(pe?lt=>[...lt,...Je.files||[]]:Je.files||[]),Vh(Je.nextPageToken||null)}catch(ye){const Je=ye?.message||"Failed to load Drive files";Je.includes("not connected")||ye?.code==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${wa||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Je),pe||$o([])}finally{pi(!1)}}},Hf=async L=>{if(!(!i||!bo))try{const pe=rs!=="compose"&&N?.id?N.id:`draft_${Date.now()}`;if(rs==="compose"){const ye={id:`drive_${L.id}`,file:new mc([],L.name,{type:L.mimeType}),isDriveFile:!0,driveFileId:L.id,driveWebViewLink:L.webViewLink,driveIconLink:L.iconLink,preview:L.thumbnailLink||L.iconLink};Ca([...An,ye]),qo(!1),t("Drive file added")}else await vI({userId:i,emailId:N.id,fileId:L.id,fileName:L.name,fileMimeType:L.mimeType,webViewLink:L.webViewLink,webContentLink:L.webContentLink,iconLink:L.iconLink}),qo(!1),t("Drive file attached"),N&&Zi(N)}catch(pe){r(pe?.message||"Failed to attach Drive file")}},$l=L=>{const pe=An.find(ye=>ye.id===L);pe?.preview&&URL.revokeObjectURL(pe.preview),vl(ye=>{const Je={...ye};return delete Je[L],Je}),Ca(An.filter(ye=>ye.id!==L))},Ua=async()=>{if(!i||!wa||!Va||!Ga){r("Please fill in subject and message to save draft");return}aa(!0);try{await Nse({userId:i,accountEmail:wa||qe[0]?.email,to:ln.length>0?ln:void 0,cc:xa.length>0?xa:void 0,bcc:$n.length>0?$n:void 0,subject:Va,body:Ga}),t("Draft saved to Gmail")}catch(L){const pe=y(L,"Failed to save draft");r(pe)}finally{aa(!1)}},As=async()=>{if(!(!i||!wa)){Bc(!0);try{const L=await jse(i,wa||qe[0]?.email),pe=L?.data||L||[];zf(Array.isArray(pe)?pe:[])}catch(L){const pe=y(L,"Failed to load drafts");r(pe),zf([])}finally{Bc(!1)}}};D.useEffect(()=>()=>{An.forEach(L=>{L.preview&&URL.revokeObjectURL(L.preview)})},[An]),D.useEffect(()=>{!bo&&An.length>0&&(An.forEach(L=>{L.preview&&URL.revokeObjectURL(L.preview)}),Ca([]))},[bo,An]);const cs=(L,pe=1200,ye=1200,Je=.8)=>new Promise((lt,Pt)=>{const wt=new FileReader;wt.onload=$t=>{const Cr=new Image;Cr.onload=()=>{let vn=Cr.width,sa=Cr.height;vn>sa?vn>pe&&(sa=sa*pe/vn,vn=pe):sa>ye&&(vn=vn*ye/sa,sa=ye);const ia=document.createElement("canvas");ia.width=vn,ia.height=sa;const ni=ia.getContext("2d");ni?(ni.drawImage(Cr,0,0,vn,sa),lt(ia.toDataURL("image/jpeg",Je))):Pt(new Error("Canvas context not available"))},Cr.onerror=Pt,Cr.src=$t.target?.result},wt.onerror=Pt,wt.readAsDataURL(L)}),vu=async L=>{const pe=L.target.files?.[0];if(pe){if(!pe.type.startsWith("image/")){r("Please select an image file");return}if(pe.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const ye=await cs(pe,1200,1200,.8);Or(ye),je(pe)}catch(ye){r(ye.message||"Failed to process image")}}},dc=L=>{const pe=document.createElement("div");pe.innerHTML=L;const ye=pe.textContent||pe.innerText||"",Je=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,lt=[];let Pt;for(;(Pt=Je.exec(ye))!==null;){const wt=Pt[1].trim(),$t=Pn.find(Cr=>Cr.name.toLowerCase()===wt.toLowerCase());$t&&$t.id!==i&&lt.push($t.id)}return[...new Set(lt)]},$c=D.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),q0=["header","bold","italic","underline","strike","list","bullet","link"],Ls=D.useCallback((L,pe,ye,Je)=>{if(pn(L),Ut.current=Je,ye==="user"){const lt=Je.getSelection(!0);if(lt){const wt=Je.getText().substring(0,lt.index),$t=wt.lastIndexOf("@");if($t!==-1){const Cr=wt.substring($t+1),vn=$t>0?wt[$t-1]:" ";if(vn===" "||vn===`
`||$t===0)if(!Cr.includes(" ")&&!Cr.includes(`
`)&&Cr.length<50){_n($t),_t(Cr);const sa=Pn.filter(ia=>ia.name?.toLowerCase().includes(Cr.toLowerCase())||ia.email?.toLowerCase().includes(Cr.toLowerCase()));Pr(sa),We(sa.length>0)}else We(!1),_n(null);else We(!1),_n(null)}else We(!1),_n(null)}}},[Pn]),Wf=D.useCallback(L=>{const pe=Ut.current;if(!pe){console.error("[INBOX] Quill editor not available");return}pe.focus();const ye=pe.getText();let Je=ra;if((Je===null||Je<0)&&(Je=ye.lastIndexOf("@")),Je===-1){console.error("[INBOX] Could not find @ symbol for mention"),We(!1),_n(null);return}const lt=ye.substring(Je+1),Pt=lt.indexOf(" "),wt=lt.indexOf(`
`);let $t=lt.length;Pt!==-1&&($t=Math.min($t,Pt)),wt!==-1&&($t=Math.min($t,wt));const Cr=Je,vn=Je+1+$t,sa=vn-Cr;console.log("[INBOX] Inserting mention:",{atIndex:Je,deleteStartIndex:Cr,deleteEndIndex:vn,deleteLength:sa,textAfterAt:lt.substring(0,$t),mentionText:`@${L.name} `}),pe.setSelection(Cr,sa,"api"),pe.deleteText(Cr,sa,"api");const ia=`@${L.name} `;pe.insertText(Cr,ia,"api"),pe.formatText(Cr,ia.length-1,{bold:!0,color:"#4338ca"},"api");const ni=Cr+ia.length;pe.setSelection(ni,0,"api");const Gf=pe.root.innerHTML;pn(Gf),We(!1),_n(null)},[ra]),rf=async()=>{if(!N||!Vr.trim()&&!ne||!i||!s){!Vr.trim()&&!ne&&r("Please enter a note or upload an image");return}oe(!0);try{const L=N.id,pe=s.name||s.email||"You",ye=document.createElement("div");ye.innerHTML=Vr;const lt=(ye.textContent||ye.innerText||"").trim()?Vr.trim():"",Pt={emailId:L,userId:i,userName:pe,message:lt};if(Yt.length>0&&(Pt.markedFor=Yt),Nr&&Nr.trim()){if(Nr.length>75e4){r("Image is too large. Please use a smaller image."),oe(!1);return}Pt.imageUrl=Nr,ne?.name&&(Pt.imageName=ne.name)}const wt=await lse(Pt),$t=wt?.data||{};if(!$t.id&&!$t.emailId)throw console.error("[INBOX] Invalid note response:",wt),new Error("Invalid response from server. Note was not created.");const Cr={id:$t.id||`thread-${Date.now()}`,userId:i,userName:pe,message:lt,timestamp:$t.createdAt||new Date().toISOString(),imageUrl:Nr||void 0,imageName:ne?.name||void 0,markedFor:$t.markedFor||[]};Xr(ia=>({...ia,[L]:[Cr,...ia[L]||[]]}));const vn=dc(lt);if(vn.length>0)for(const ia of vn)try{await Jm({userId:ia,type:"mention",title:"You were mentioned in an email note",message:`${pe} mentioned you in a note on email: "${N.subject||"Untitled"}"`,link:`/?tab=inbox&email=${L}`,read:!1})}catch(ni){const Gf=ni?.message||"Failed to send notification";console.error("Failed to send notification:",Gf)}pn(""),Or(""),je(null),ur([]),St.current&&(St.current.value=""),Ut.current&&Ut.current.setText("");const sa=wt?.message||(vn.length>0?`Note added and ${vn.length} user(s) notified`:"Internal note added");t(sa)}catch(L){const pe=y(L,"Failed to add note");console.error("[INBOX] Error adding note:",pe),r(pe)}finally{oe(!1)}},zl=async(L,pe)=>{if(!(!i||!s)){Ae(pe);try{await dse(pe,i),Xr(ye=>({...ye,[L]:(ye[L]||[]).filter(Je=>Je.id!==pe)})),t("Note deleted")}catch(ye){const Je=y(ye,"Failed to delete note");r(Je)}finally{Ae(null)}}},Go=async L=>{if(!(!N||!i)){bt(!0),tt([]),Me(null),nt(null);try{const pe=await use(N.id,i,L),ye=pe?.data??pe??{};if(ye.variations&&Array.isArray(ye.variations)&&ye.variations.length>0)tt(ye.variations),Me(0),nt(w(ye.variations[0].draft)),t(`Generated ${ye.variations.length} draft variations`);else{let Je=ye.draft;(!Je||typeof Je!="string")&&(Je=`Hi ${N.sender||"there"},

Thank you for your email regarding "${N.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${s?.name||"Team"}`),nt(w(Je)),tt([{style:"default",description:"AI-generated draft",draft:Je,confidence:75}]),Me(0),t("AI draft generated")}}catch(pe){const ye=y(pe,"Failed to generate draft");bt(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",ye),r(ye)},0)}finally{bt(!1)}}},eo=async()=>{if(!i||!Va||ln.length===0){r("Please enter a subject and recipient to generate AI draft");return}$f(!0),Mc(null);try{const pe=`Hi ${ln[0].split("@")[0]},

${Va?`Regarding: ${Va}`:""}

[Your message here]

Best regards,
${s?.name||"Team"}`;await new Promise(ye=>setTimeout(ye,1e3)),Mc(w(pe)),t("AI draft generated")}catch(L){const pe=y(L,"Failed to generate draft");r(pe)}finally{$f(!1)}},nf=()=>{if(!Ke)return;let L="";try{if(Dt.current&&typeof Dt.current.getText=="function")L=Dt.current.getText();else{const pe=document.createElement("div");pe.innerHTML=Ke,L=pe.textContent||pe.innerText||""}}catch(pe){const ye=document.createElement("div");ye.innerHTML=Ke||"",L=ye.textContent||ye.innerText||"";const Je=pe?.message||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Je)}navigator.clipboard.writeText(L).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(pe=>{try{const ye=document.createElement("textarea");ye.value=L,document.body.appendChild(ye),ye.select(),document.execCommand("copy"),document.body.removeChild(ye),t("Draft copied to clipboard!")}catch(ye){const Je=ye?.message||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Je),r("Failed to copy draft. Please select and copy manually.")}})},Vf=()=>{!Ke||!i||!N||(Vn(""),Wn(!0))},uc=async()=>{if(!za||!za.trim()||!Ke||!i||!N){r("Please enter a template name");return}try{const L=typeof Ke=="string"?Ke:String(Ke||"");await fse({name:za.trim(),content:L,userId:i,category:"email-response"}),t("Template saved successfully!"),Wn(!1),Vn(""),Td()}catch(L){const pe=y(L,"Failed to save template");console.error("[INBOX] Error saving template:",pe),r(pe)}},Td=async()=>{if(i)try{const L=await hse(i),pe=L?.data??L??[];Nn(Array.isArray(pe)?pe:[])}catch(L){const pe=L?.message||"Failed to load templates";console.error("Failed to load templates:",pe)}};D.useEffect(()=>{i&&Td()},[i]),D.useEffect(()=>{i&&bo&&Td()},[i,bo]);const af=(L,pe=100)=>{if(!L)return"";let ye=L.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(ye=ye.replace(/https?:\/\/[^\s]+/g,"").trim(),ye=ye.replace(/\s+/g," ").trim(),ye.length<=pe)return ye;const Je=ye.substring(0,pe),lt=Je.lastIndexOf(" ");return lt>pe*.7?Je.substring(0,lt)+"...":Je+"..."},to=D.useMemo(()=>{let pe=[...In.filter((ye,Je,lt)=>ye.id&&Je===lt.findIndex(Pt=>Pt.id===ye.id))];return le==="archived"?pe=pe.filter(ye=>ye.threadStatus==="archived"):le&&le!=="archived"?pe=pe.filter(ye=>ye.status===le):le||(pe=pe.filter(ye=>ye.threadStatus!=="archived")),Ar&&(pe=pe.filter(ye=>(ye.labels||[]).includes(Ar))),ze&&i&&(pe=pe.filter(ye=>ye.owner===i)),gt&&(pe=pe.filter(ye=>ye.owner===gt)),pe.sort((ye,Je)=>{let lt=0;switch(Ee){case"date":const Pt=parseInt(ye.internalDate||"0")||0;lt=(parseInt(Je.internalDate||"0")||0)-Pt;break;case"sender":const $t=(ye.sender||ye.email||"").toLowerCase(),Cr=(Je.sender||Je.email||"").toLowerCase();lt=$t.localeCompare(Cr);break;case"subject":const vn=(ye.subject||"").toLowerCase(),sa=(Je.subject||"").toLowerCase();lt=vn.localeCompare(sa);break;case"unread":if(ye.isRead===Je.isRead){const ia=parseInt(ye.internalDate||"0")||0;lt=(parseInt(Je.internalDate||"0")||0)-ia}else lt=ye.isRead?1:-1;break}return Le==="asc"?-lt:lt}),pe},[In,Ar,ze,gt,i,Ee,Le]);D.useEffect(()=>{N?.id&&(to.some(pe=>pe.id===N.id)||(S(null),ml([]),po(null),nt(null),tt([]),Me(null),Ne([]),Xr(pe=>{const ye={...pe};return delete ye[N.id],ye})))},[to,N?.id]);const $0=to.filter(L=>!L.isRead).length,z0=D.useMemo(()=>{if(At==="list")return null;const L=new Map;to.forEach(ye=>{const Je=ye.gmailThreadId||ye.id;L.has(Je)||L.set(Je,[]),L.get(Je).push(ye)});const pe=Array.from(L.entries()).map(([ye,Je])=>{const lt=[...Je].sort((Pt,wt)=>{const $t=parseInt(Pt.internalDate||"0")||0;return(parseInt(wt.internalDate||"0")||0)-$t});return{threadId:ye,emails:lt,latestEmail:lt[0],unreadCount:lt.filter(Pt=>!Pt.isRead).length}});return pe.sort((ye,Je)=>{let lt=0;const Pt=ye.latestEmail,wt=Je.latestEmail;switch(Ee){case"date":const $t=parseInt(Pt.internalDate||"0")||0;lt=(parseInt(wt.internalDate||"0")||0)-$t;break;case"sender":const vn=(Pt.sender||Pt.email||"").toLowerCase(),sa=(wt.sender||wt.email||"").toLowerCase();lt=vn.localeCompare(sa);break;case"subject":const ia=(Pt.subject||"").toLowerCase(),ni=(wt.subject||"").toLowerCase();lt=ia.localeCompare(ni);break;case"unread":if(ye.unreadCount>0&&Je.unreadCount===0)lt=-1;else if(ye.unreadCount===0&&Je.unreadCount>0)lt=1;else if(ye.unreadCount===Je.unreadCount){const Gf=parseInt(Pt.internalDate||"0")||0;lt=(parseInt(wt.internalDate||"0")||0)-Gf}else lt=Je.unreadCount-ye.unreadCount;break}return Le==="asc"?-lt:lt}),pe},[to,At,Ee,Le]),fc=L=>{Gr(pe=>{const ye=new Set(pe);return ye.has(L)?ye.delete(L):ye.add(L),ye})},sf=L=>{qr(pe=>{const ye=new Set(pe);return ye.has(L)?ye.delete(L):ye.add(L),ye})};return i?n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0 relative",children:[P&&n.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-xs font-medium rounded-full shadow-lg border border-indigo-500/30 animate-in fade-in duration-200",title:"Auto-syncing emails from connected accounts",role:"status","aria-live":"polite",children:[n.jsx(pt,{className:"w-4 h-4 animate-spin flex-shrink-0"}),n.jsx("span",{children:"Auto-syncing"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),Ar&&n.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",Sr.find(L=>L.id===Ar)?.name||Ar]})]}),n.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",$0," unread",Ar&&`  ${to.length} email${to.length!==1?"s":""} with label`]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Sr.length>0&&n.jsx("div",{className:"relative",children:n.jsxs("select",{value:Ar||"",onChange:L=>{const pe=L.target.value||null;Fa(pe);const ye=document.querySelector(".overflow-y-auto");ye&&(ye.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[n.jsx("option",{value:"",children:"All Labels"}),Sr.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})}),n.jsxs("button",{onClick:()=>cr(At==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:At==="threads"?"Switch to list view":"Switch to threaded view",children:[n.jsx(lo,{className:"w-4 h-4"}),At==="threads"?"Threads":"List"]}),g&&n.jsxs("button",{onClick:zs,disabled:A,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[A?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(sd,{className:"w-4 h-4"}),A?"Syncing":"Sync from Gmail"]}),qe.length>0&&n.jsxs("button",{onClick:()=>er(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${qe.length} connected account${qe.length!==1?"s":""}`,children:[n.jsx(gn,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),n.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:qe.length})]})]})]}),J===!1&&qe.length===0&&n.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[n.jsx(Bn,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),n.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),n.jsxs("button",{onClick:Cs,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),n.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:H,onChange:L=>Q(L.target.value),onKeyDown:L=>L.key==="Enter"&&yn(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),n.jsxs("button",{type:"button",onClick:()=>we(L=>!L),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${Te?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[n.jsx(vf,{className:"w-4 h-4"}),"Filters",(X||W||U!==void 0||se||ie||Be!==void 0||$e!==void 0||le||Ar)&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),Te&&n.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[n.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),n.jsx("input",{type:"text",placeholder:"email or name",value:X,onChange:L=>{ee(L.target.value),he(!0)},onFocus:()=>he(!0),onBlur:()=>setTimeout(()=>he(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),Ie&&de.length>0&&n.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:de.filter(L=>!X||[L.email,L.name].some(pe=>pe?.toLowerCase().includes(X.toLowerCase()))).slice(0,20).map(L=>n.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:pe=>{pe.preventDefault(),ee(L.email||L.name),he(!1)},children:[n.jsx("span",{className:"font-medium text-slate-800",children:L.name||L.email}),L.email!==L.name&&n.jsx("span",{className:"text-xs text-slate-500",children:L.email})]},L.email))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Be===void 0?"":String(Be),onChange:L=>me(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"false",children:"Unread"}),n.jsx("option",{value:"true",children:"Read"})]}),n.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:se,onChange:L=>xe(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:ie,onChange:L=>ue(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"",value:W,onChange:L=>O(L.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),n.jsxs("div",{className:"relative w-32",children:[n.jsxs("select",{value:z,onChange:L=>V(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[n.jsx("option",{value:"contains",children:"contains"}),n.jsx("option",{value:"equals",children:"equals"}),n.jsx("option",{value:"starts",children:"starts with"}),n.jsx("option",{value:"ends",children:"ends with"})]}),n.jsx(Vs,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:U===void 0?"":String(U),onChange:L=>K(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Has attachment"}),n.jsx("option",{value:"false",children:"No attachment"})]}),n.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:le,onChange:L=>te(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"assigned",children:"Assigned to me"})]}),n.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:$e===void 0?"":String($e),onChange:L=>Oe(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Starred"}),n.jsx("option",{value:"false",children:"Not starred"})]}),n.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),Sr.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Ar||"",onChange:L=>Fa(L.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"All labels"}),Sr.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:L=>{st(L.target.checked),L.target.checked&&vt(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),n.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:gt||"",onChange:L=>{const pe=L.target.value||null;vt(pe),pe&&st(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any team member"}),Pn.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>a.invalidateQueries({queryKey:ds.emails()}),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),n.jsx("button",{type:"button",onClick:()=>{ee(""),O(""),V("contains"),K(void 0),xe(""),ue(""),me(void 0),Oe(void 0),te(""),Fa(null),st(!1),vt(null),Q(""),setTimeout(()=>a.invalidateQueries({queryKey:ds.emails()}),0)},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),n.jsxs("button",{type:"button",onClick:()=>fe(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(h6,{className:"w-4 h-4"}),"Save search"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>Fe(L=>!L),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(h6,{className:"w-4 h-4"}),"Saved (",Ce.length,")"]}),ke&&n.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ce.length===0?n.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):Ce.map(L=>n.jsxs("div",{className:"flex items-center group",children:[n.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{Q(L.filters.search??""),ee(L.filters.from??""),O(L.filters.subject??""),V(L.filters.subjectOperator??"contains"),K(L.filters.hasAttachment),xe(L.filters.dateFrom??""),ue(L.filters.dateTo??""),me(L.filters.isRead),Oe(L.filters.isStarred),te(L.filters.status??""),Fa(L.filters.labelId??null),Fe(!1),setTimeout(()=>a.invalidateQueries({queryKey:ds.emails()}),0)},children:L.name}),n.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{Ve(pe=>pe.filter(ye=>ye.id!==L.id)),Fe(!1)},title:"Delete saved search",children:""})]},L.id))})]}),n.jsxs("button",{type:"button",onClick:()=>{hn(!0),i&&gI(i).then(L=>{const pe=L?.data??L??[];He(Array.isArray(pe)?pe:[])}).catch(()=>He([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[n.jsx(vf,{className:"w-4 h-4"}),"Categorization rules"]}),n.jsx("button",{type:"button",onClick:()=>{Ac(!0),i&&Vse(i).then(L=>{const pe=L?.data??L??[];Lo(Array.isArray(pe)?pe:[])}).catch(()=>Lo([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),n.jsxs("button",{type:"button",onClick:()=>{_a(!0),ei.length===0&&Fn()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[n.jsx(av,{className:"w-4 h-4"}),"Excluded Domains ",ei.length>0&&`(${ei.length})`]})]})]}),(H||X||W||U!==void 0||se||ie||Be!==void 0||$e!==void 0||le||Ar)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),H&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',H.length>20?H.slice(0,20)+"":H,'"',n.jsx("button",{type:"button",onClick:()=>Q(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Ar&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",Sr.find(L=>L.id===Ar)?.name||Ar,n.jsx("button",{type:"button",onClick:()=>Fa(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),X&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",X,n.jsx("button",{type:"button",onClick:()=>ee(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),W&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",n.jsx("button",{type:"button",onClick:()=>O(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),U!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[U?"Has attachment":"No attachment",n.jsx("button",{type:"button",onClick:()=>K(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),le&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",le,n.jsx("button",{type:"button",onClick:()=>te(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Be!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Be?"Read":"Unread",n.jsx("button",{type:"button",onClick:()=>me(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),$e!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[$e?"Starred":"Not starred",n.jsx("button",{type:"button",onClick:()=>Oe(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(se||ie)&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",se&&ie?`${se}  ${ie}`:se||ie,n.jsx("button",{type:"button",onClick:()=>{xe(""),ue("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{te(le==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${le==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(sv,{className:"w-4 h-4 inline mr-1.5"}),le==="archived"?"Show Active":"Show Archived"]}),le==="archived"&&n.jsxs("span",{className:"text-sm text-slate-500",children:[to.length," archived email(s)"]})]}),(R||Ra.size>0)&&n.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:Ad,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:Ra.size===to.length?"Deselect all":"Select all"}),n.jsxs("span",{className:"text-sm text-indigo-600",children:[Ra.size," selected"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:pu,disabled:ce||Ra.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),n.jsx("button",{type:"button",onClick:gu,disabled:ce||Ra.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),n.jsx("button",{type:"button",onClick:ql,disabled:ce||Ra.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),n.jsx("button",{type:"button",onClick:ko,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[n.jsx("div",{className:"flex items-center gap-2",children:!R&&n.jsxs("button",{type:"button",onClick:ko,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4"}),"Select"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),n.jsxs("select",{value:Ee,onChange:L=>De(L.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"sender",children:"Sender"}),n.jsx("option",{value:"subject",children:"Subject"}),n.jsx("option",{value:"unread",children:"Unread"})]}),n.jsx("button",{type:"button",onClick:()=>Re(Le==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:Le==="asc"?"Ascending":"Descending",children:Le==="asc"?n.jsx($j,{className:"w-4 h-4"}):n.jsx(Vs,{className:"w-4 h-4"})})]})]}),ge&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{fe(!1),Ue("")},children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:L=>L.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),n.jsx("input",{type:"text",placeholder:"Search name",value:_e,onChange:L=>Ue(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{fe(!1),Ue("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>{const L=_e.trim()||"Saved search",pe={search:H||void 0,status:le||void 0,from:X||void 0,subject:W||void 0,subjectOperator:z,hasAttachment:U,dateFrom:se||void 0,dateTo:ie||void 0,labelId:Ar||void 0,isRead:Be,isStarred:$e},ye={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:L,filters:pe};Ve(Je=>[...Je,ye]),fe(!1),Ue("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),$r&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>hn(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),n.jsx("button",{type:"button",onClick:async()=>{if(i){au(!0);try{const pe=(await zse(i,30))?.data;Wu(pe)}catch(L){console.error("Failed to load accuracy stats:",L)}finally{au(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:nc,children:nc?"Loading...":"View accuracy stats"})]}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),ya&&n.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",ya.periodDays," days)"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),n.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[ya.summary.accuracyRate,"%"]}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ya.summary.accepted," accepted / ",ya.summary.accepted+ya.summary.rejected+ya.summary.changed," resolved"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),n.jsx("p",{className:"text-lg font-semibold text-slate-700",children:ya.summary.total}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ya.summary.pending," pending"]})]})]}),n.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ya.bySource.domain.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ya.bySource.domain.accepted,"/",ya.bySource.domain.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ya.bySource.keyword.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ya.bySource.keyword.accepted,"/",ya.bySource.keyword.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ya.bySource.ai.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ya.bySource.ai.accepted,"/",ya.bySource.ai.total]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsxs("select",{value:ys,onChange:L=>Mf(L.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"domain",children:"Sender domain"}),n.jsx("option",{value:"keyword",children:"Keyword"})]}),n.jsx("input",{type:"text",placeholder:ys==="domain"?"e.g. company.com":"e.g. invoice",value:Wi,onChange:L=>Ai(L.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),n.jsxs("select",{value:Ol,onChange:L=>ws(L.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Select label"}),Sr.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx("button",{type:"button",disabled:!Wi.trim()||!Ol||!i,onClick:async()=>{if(!(!i||!Wi.trim()||!Ol))try{await Hse({userId:i,type:ys,value:Wi.trim(),labelId:Ol,labelName:Sr.find(ye=>ye.id===Ol)?.name});const L=await gI(i),pe=L?.data??L??[];He(Array.isArray(pe)?pe:[]),Ai(""),ws(""),t("Rule added")}catch(L){r(L?.message||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:rc.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):rc.map(L=>n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[n.jsxs("span",{className:"text-slate-700",children:[n.jsx("span",{className:"font-medium",children:L.type==="domain"?"Domain":"Keyword"}),n.jsxs("span",{className:"text-slate-500",children:[' "',L.value,'"  ']}),n.jsx("span",{className:"text-indigo-600",children:L.labelName||L.labelId})]}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Wse(L.id,i),He(pe=>pe.filter(ye=>ye.id!==L.id)),t("Rule removed")}catch(pe){r(pe?.message||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:n.jsx(Xt,{className:"w-4 h-4"})})]},L.id))}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>hn(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),yd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>_a(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:n.jsx(av,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),n.jsx("button",{type:"button",onClick:()=>_a(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from domains listed below will not sync or appear in your shared inbox. To see emails from a domain again, remove it from this list."})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:vo,onChange:L=>su(L.target.value),onKeyDown:L=>{L.key==="Enter"&&vo.trim()&&rn()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),n.jsx("button",{type:"button",onClick:rn,disabled:!vo.trim()||vd,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:vd?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),iu?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):ei.length===0?n.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[n.jsx(av,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):n.jsx("div",{className:"space-y-2",children:ei.filter(L=>L.domain&&String(L.domain).trim()).map(L=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:n.jsx(av,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:L.domain})]}),n.jsx("button",{type:"button",onClick:()=>Ka(L.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:n.jsx(Lr,{className:"w-4 h-4"})})]},L.id))})]}),n.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>_a(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),pd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Ac(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:L=>L.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:xo.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):xo.map((L,pe)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[n.jsx("span",{className:"flex-1 text-slate-700 truncate",children:L.labelName||L.labelId}),n.jsx("input",{type:"text",placeholder:"View name",value:L.viewName??"",onChange:ye=>{const Je=[...xo];Je[pe]={...Je[pe],viewName:ye.target.value},Lo(Je)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),n.jsx("button",{type:"button",onClick:()=>Lo(ye=>ye.filter((Je,lt)=>lt!==pe)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:n.jsx(Xt,{className:"w-4 h-4"})})]},L.labelId||pe))}),n.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:n.jsxs("select",{value:"",onChange:L=>{const pe=L.target.value;if(!pe||xo.some(Je=>Je.labelId===pe))return;const ye=Sr.find(Je=>Je.id===pe);Lo(Je=>[...Je,{labelId:pe,labelName:ye?.name,viewName:ye?.name??"",sortOrder:Je.length}]),L.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Add label to mapping"}),Sr.filter(L=>!xo.some(pe=>pe.labelId===L.id)).map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Ac(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Gse({userId:i,mappings:xo}),t("Folder mapping saved"),Ac(!1)}catch(L){r(L?.message||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),Mr&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:Mr}),n.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[n.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${N?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:Ft?n.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((L,pe)=>n.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),n.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},pe))}):to.length===0?n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(es,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium",children:Ar?"No emails with this label":"No emails yet"}),n.jsx("p",{className:"text-slate-400 text-sm mt-1",children:Ar?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync from Gmail" to pull in your inbox (including older mail).'}),(se||ie)&&!Ar&&n.jsx("p",{className:"text-slate-500 text-xs mt-2 max-w-sm",children:"To see emails older than your date range, run Sync from Gmail first so full history is available."}),Ar&&n.jsx("button",{onClick:()=>Fa(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!Ar&&n.jsx("button",{onClick:zs,disabled:A,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:A?"Syncing":"Sync from Gmail"})]}):At==="threads"&&z0?n.jsxs("ul",{ref:ua,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[z0.map(L=>{const pe=wr.has(L.threadId),ye=L.latestEmail,Je=L.emails.length>1;return n.jsxs("li",{children:[n.jsxs("div",{role:R?void 0:"button",tabIndex:R?void 0:0,onKeyDown:lt=>{!R&&(lt.key==="Enter"||lt.key===" ")&&(lt.preventDefault(),Je?fc(L.threadId):Zi(ye))},onClick:()=>!R&&(Je?fc(L.threadId):Zi(ye)),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===ye.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[R&&n.jsx("input",{type:"checkbox",checked:Ra.has(ye.id),onChange:()=>Ul(ye.id),onClick:lt=>lt.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Xs,{src:void 0,alt:ye.sender||ye.email||"",fallbackText:ye.sender||ye.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Je&&n.jsx("div",{role:"button",tabIndex:0,onClick:lt=>{lt.stopPropagation(),fc(L.threadId)},onKeyDown:lt=>{(lt.key==="Enter"||lt.key===" ")&&(lt.preventDefault(),lt.stopPropagation(),fc(L.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:pe?n.jsx(Vs,{className:"w-4 h-4 text-slate-500"}):n.jsx(va,{className:"w-4 h-4 text-slate-500"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${L.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:ye.subject||"(No subject)"}),ye.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(bf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),ye.syncStatus?.starredStatus&&Cd(ye.syncStatus.starredStatus)]}),ye.attachments&&ye.attachments.length>0&&n.jsx(Q0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${ye.attachments.length} attachment(s)`}),ye.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ye.priority==="high"?"bg-red-100 text-red-700":ye.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:ye.priority==="high"?"High":ye.priority==="low"?"Low":"Medium"}),ye.threadStatus&&ye.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ye.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":ye.threadStatus==="pending"?"bg-amber-100 text-amber-700":ye.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:ye.threadStatus.charAt(0).toUpperCase()+ye.threadStatus.slice(1)}),ye.owner&&Pn.find(lt=>lt.id===ye.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:Pn.find(lt=>lt.id===ye.owner)?.name||"Assigned"}),Je&&n.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:L.emails.length})]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[ye.sender||ye.email,Je&&`  ${L.emails.length} messages`]}),(()=>{const lt=new Set;L.emails.forEach(wt=>{wt.participants&&Array.isArray(wt.participants)&&wt.participants.forEach($t=>lt.add($t.toLowerCase())),wt.to&&Array.isArray(wt.to)&&wt.to.forEach($t=>lt.add($t.toLowerCase())),wt.cc&&Array.isArray(wt.cc)&&wt.cc.forEach($t=>lt.add($t.toLowerCase()))});const Pt=Array.from(lt).slice(0,5);return Pt.length>0?n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[n.jsx("span",{className:"text-slate-500",children:"To: "}),Pt.map((wt,$t)=>n.jsxs("span",{children:[wt.split("@")[0],$t<Pt.length-1&&", "]},wt)),lt.size>5&&` +${lt.size-5} more`]}):null})(),(ye.accountEmail||ye.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[ye.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",ye.accountOwnerName]}),ye.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:ye.accountEmail})]}),ye.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:af(ye.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:ye.timestamp}),L.unreadCount>0&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!R&&n.jsx(va,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),pe&&Je&&n.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:L.emails.map((lt,Pt)=>{const wt=jr.has(lt.id);return n.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[n.jsxs("button",{type:"button",onClick:()=>sf(lt.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${N?.id===lt.id?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:$t=>{$t.stopPropagation(),sf(lt.id)},children:wt?n.jsx(Vs,{className:"w-3 h-3 text-slate-500"}):n.jsx(va,{className:"w-3 h-3 text-slate-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`text-xs font-medium ${lt.isRead?"text-slate-600":"text-slate-900"}`,children:lt.sender||lt.email}),!lt.isRead&&n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(lt.to?.length>0||lt.cc?.length>0)&&n.jsxs("span",{className:"text-xs text-slate-400",children:[lt.to?.length>0&&`To: ${lt.to.slice(0,2).map($t=>$t.split("@")[0]).join(", ")}${lt.to.length>2?"...":""}`,lt.cc?.length>0&&` CC: ${lt.cc.slice(0,2).map($t=>$t.split("@")[0]).join(", ")}${lt.cc.length>2?"...":""}`]})]}),lt.lastMessage&&!wt&&n.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:af(lt.lastMessage,100)})]}),n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:lt.timestamp})]}),wt&&n.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsx("span",{className:"font-medium",children:lt.sender||lt.email}),n.jsx("span",{className:"text-slate-400",children:""}),n.jsx("span",{children:lt.timestamp})]}),n.jsx("button",{type:"button",onClick:()=>Zi(lt),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),n.jsx("div",{className:"text-xs text-slate-700 mt-2",children:n.jsx(xD,{content:lt.lastMessage||"No content"})}),(lt.to?.length>0||lt.cc?.length>0||lt.bcc?.length>0)&&n.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[lt.to?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"To:"})," ",lt.to.join(", ")]}),lt.cc?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"CC:"})," ",lt.cc.join(", ")]}),lt.bcc?.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BCC:"})," ",lt.bcc.join(", ")]})]})]})]},lt.id)})})]},L.threadId)}),rr&&n.jsx("li",{className:"px-4 py-4 pb-6",ref:qn,children:or?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(pt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:cn,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`threads-${Ar||"all"}`):n.jsxs("ul",{ref:ua,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[to.map(L=>n.jsx("li",{children:n.jsxs("div",{role:R?void 0:"button",tabIndex:R?void 0:0,onKeyDown:pe=>{!R&&(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),Zi(L))},onClick:()=>!R&&Zi(L),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===L.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[R&&n.jsx("input",{type:"checkbox",checked:Ra.has(L.id),onChange:()=>Ul(L.id),onClick:pe=>pe.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Xs,{src:void 0,alt:L.sender||L.email||"",fallbackText:L.sender||L.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${L.isRead?"text-slate-600":"text-slate-900"}`,children:L.subject||"(No subject)"}),L.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(bf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),L.syncStatus?.starredStatus&&Cd(L.syncStatus.starredStatus)]}),L.attachments&&L.attachments.length>0&&n.jsx(Q0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${L.attachments.length} attachment(s)`}),L.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${L.priority==="high"?"bg-red-100 text-red-700":L.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:L.priority==="high"?"High":L.priority==="low"?"Low":"Medium"}),L.threadStatus&&L.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${L.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":L.threadStatus==="pending"?"bg-amber-100 text-amber-700":L.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:L.threadStatus.charAt(0).toUpperCase()+L.threadStatus.slice(1)}),L.owner&&Pn.find(pe=>pe.id===L.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:Pn.find(pe=>pe.id===L.owner)?.name||"Assigned"}),L.labels&&L.labels.length>0&&n.jsxs(n.Fragment,{children:[L.labels.slice(0,3).map(pe=>{const ye=Sr.find(Je=>Je.id===pe);return ye?n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:ye.name,children:ye.name},pe):null}),L.labels.length>3&&n.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",L.labels.length-3]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:L.sender||L.email}),(L.accountEmail||L.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[L.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",L.accountOwnerName]}),L.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:L.accountEmail})]}),L.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:af(L.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:L.timestamp}),!L.isRead&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!R&&n.jsx(va,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},L.id)),rr&&n.jsx("li",{ref:qn,className:"px-4 py-4 pb-6",children:or?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(pt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:cn,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`list-${Ar||"all"}`)}),n.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:B?n.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:n.jsx(pt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):N?n.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[n.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[n.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:N.subject||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"break-words",children:N.sender||N.email}),n.jsx("span",{children:""}),n.jsx("span",{children:N.timestamp}),N.senderClassification&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${N.senderClassification==="internal"?"bg-slate-100 text-slate-700":N.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:N.senderClassification==="internal"?"Internal":N.senderClassification==="system"?"System":"Customer"})]}),(N.accountEmail||N.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[N.accountOwnerName&&n.jsxs("span",{children:["Synced via ",n.jsx("span",{className:"font-medium text-slate-600",children:N.accountOwnerName})]}),N.accountEmail&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:N.accountEmail})]})]})}),N.linkedRecords&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[N.linkedRecords.contactId&&(()=>{const L=gl.find(pe=>pe.id===N.linkedRecords?.contactId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[n.jsx(co,{className:"w-3 h-3"}),L.name]}):null})(),N.linkedRecords.companyId&&(()=>{const L=cu.find(pe=>pe.id===N.linkedRecords?.companyId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[n.jsx(cl,{className:"w-3 h-3"}),L.name]}):null})(),N.linkedRecords.dealId&&(()=>{const L=fa.find(pe=>pe.id===N.linkedRecords?.dealId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[n.jsx(Cl,{className:"w-3 h-3"}),L.title||L.name]}):null})(),N.linkedRecords.projectId&&(()=>{const L=Ic.find(pe=>pe.id===N.linkedRecords?.projectId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[n.jsx(Xd,{className:"w-3 h-3"}),L.title||L.name]}):null})(),N.linkedRecords.contractId&&(()=>{const L=du.find(pe=>pe.id===N.linkedRecords?.contractId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[n.jsx(ea,{className:"w-3 h-3"}),L.title]}):null})()]}),kd?n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(Dc.contacts.length>0||Dc.companies.length>0)&&n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),Dc.contacts.map(L=>n.jsxs("button",{onClick:()=>Ds("contact",L.id),disabled:os,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[n.jsx(co,{className:"w-3 h-3"}),L.name,n.jsx(nn,{className:"w-3 h-3"})]},L.id)),Dc.companies.map(L=>n.jsxs("button",{onClick:()=>Ds("company",L.id),disabled:os,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[n.jsx(cl,{className:"w-3 h-3"}),L.name,n.jsx(nn,{className:"w-3 h-3"})]},L.id))]}),n.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",onClick:()=>{Sd("contact"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(l0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),n.jsxs("button",{type:"button",onClick:()=>{Sd("company"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(l0,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),n.jsxs("button",{type:"button",onClick:()=>{Sd("deal"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(l0,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),n.jsxs("button",{type:"button",onClick:()=>{Sd("project"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(l0,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),n.jsxs("button",{type:"button",onClick:()=>{Sd("contract"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(l0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),n.jsxs("button",{type:"button",onClick:()=>Ju(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(_i,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),N.labels&&N.labels.length>0&&n.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:N.labels.map(L=>{const pe=Sr.find(ye=>ye.id===L);return pe?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[200px]",children:pe.name}),n.jsx("button",{type:"button",onClick:()=>Vo(N.id,L),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:n.jsx(Xt,{className:"w-3 h-3"})})]},L):null})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",disabled:Hi||!i,onClick:async()=>{if(!(!N?.id||!i)){hi(!0),ml([]);try{const pe=(await $se({emailId:N.id,userId:i,useAi:!0,availableLabels:Sr.map(ye=>({id:ye.id,name:ye.name}))}))?.data;pe?.suggestedLabels?.length&&(ml(pe.suggestedLabels),po(pe.suggestionId||null))}catch{ml([])}finally{hi(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[Hi?n.jsx(pt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):n.jsx(Ri,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),mo.length>0&&n.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),mo.map((L,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[150px]",children:L.labelName}),n.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",L.source,")"]}),L.labelId&&n.jsx("button",{type:"button",onClick:()=>{mu(N.id,[L.labelId],[],!0,zu||void 0),ml(ye=>ye.filter((Je,lt)=>lt!==pe))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:n.jsx(nn,{className:"w-3 h-3"})})]},L.labelId||pe))]}),n.jsx("div",{className:"mt-1",children:n.jsxs("button",{type:"button",onClick:()=>{bs(N.id),gs(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[n.jsx(nn,{className:"w-3 h-3"}),N.labels&&N.labels.length>0?"Manage Labels":"Add Labels"]})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(N.customTags||[]).map((L,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[L,n.jsx("button",{type:"button",onClick:()=>{const ye=(N.customTags||[]).filter((Je,lt)=>lt!==pe);Sv(N.id,{userId:i,customTags:ye}).then(()=>{S(Je=>Je?{...Je,customTags:ye}:null)}).catch(()=>{})},className:"hover:text-red-600",children:n.jsx(Xt,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",placeholder:"Add tag",value:pr,onChange:L=>Br(L.target.value),onKeyDown:L=>{if(L.key==="Enter"&&pr.trim()){const ye=[...N.customTags||[],pr.trim()];Sv(N.id,{userId:i,customTags:ye}).then(()=>{S(Je=>Je?{...Je,customTags:ye}:null),Br("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[v&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("select",{value:N.priority||"medium",onChange:L=>oc(N.id,{priority:L.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]}),n.jsxs("select",{value:N.threadStatus||"active",onChange:L=>oc(N.id,{threadStatus:L.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"resolved",children:"Resolved"}),n.jsx("option",{value:"archived",children:"Archived"})]}),c&&n.jsxs("select",{value:N.owner||"",onChange:L=>oc(N.id,{owner:L.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[n.jsx("option",{value:"",children:"Unassigned"}),Pn.map(L=>n.jsx("option",{value:L.id,children:L.name||L.email},L.id))]})]}),p&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Bl(N.id,!N.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:N.isStarred?"Unstar":"Star",children:N.isStarred?n.jsx(bf,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):n.jsx(jU,{className:"w-4 h-4"})}),N.syncStatus?.starredStatus&&n.jsx("div",{className:"flex-shrink-0",children:Cd(N.syncStatus.starredStatus)})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Kn(N.id,!N.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:N.isRead?"Mark unread":"Mark read"}),N.syncStatus?.readStatus&&n.jsx("div",{className:"flex-shrink-0",children:Cd(N.syncStatus.readStatus)})]}),m&&n.jsx(n.Fragment,{children:N.threadStatus==="archived"?n.jsxs("button",{type:"button",onClick:()=>qc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[n.jsx(sv,{className:"w-3 h-3"}),"Restore"]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>So(N.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[n.jsx(sv,{className:"w-3 h-3"}),"Archive"]}),N.threadStatus!=="resolved"&&v&&n.jsxs("button",{type:"button",onClick:()=>lc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[n.jsx(gn,{className:"w-3 h-3"}),"Resolve"]})]})}),b&&n.jsxs("button",{type:"button",onClick:()=>xu(N.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[n.jsx(Lr,{className:"w-3 h-3"}),"Delete"]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{Oc("reply"),ss([N.email]),mi([]),qs([]),Vi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),js(""),is(N.accountEmail||qe[0]?.email||""),Dl(!1),Ll(!1),xl(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(Xl,{className:"w-3 h-3"}),"Reply"]}),n.jsx("button",{type:"button",onClick:()=>{Oc("replyAll");const L=(N.accountEmail||"").toLowerCase(),pe=[N.email,...N.to||[],...N.cc||[]].filter((ye,Je,lt)=>{const Pt=ye.toLowerCase();return lt.findIndex(wt=>wt.toLowerCase()===Pt)===Je&&Pt!==L});ss([N.email]),mi(pe.filter(ye=>ye.toLowerCase()!==N.email.toLowerCase())),qs([]),Vi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),js(""),is(N.accountEmail||qe[0]?.email||""),Dl(!0),Ll(!1),xl(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),f&&n.jsx("button",{type:"button",onClick:()=>{Oc("forward"),ss([]),mi([]),qs([]),Vi(N.subject?.startsWith("Fwd:")||N.subject?.startsWith("Fw:")?N.subject:`Fwd: ${N.subject||""}`);const L=N.body||N.lastMessage||"";js(`

--- Forwarded message ---
From: ${N.sender||N.email}
Date: ${N.timestamp}
Subject: ${N.subject}
To: ${N.to?.join(", ")||N.email}

${L}`),is(N.accountEmail||qe[0]?.email||""),Dl(!1),Ll(!1),xl(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),n.jsxs("button",{type:"button",onClick:()=>{if(!i||!N.id)return;const L=(N.body||N.lastMessage||"").replace(/<[^>]+>/g," "),pe=`${N.subject||""} ${L}`.toLowerCase(),ye=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Je;for(const ia of ye){const ni=pe.match(ia);if(ni){Je=ni[0];break}}const lt=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Pt;for(const ia of lt){const ni=pe.match(ia);if(ni){Pt=ni[0];break}}const wt=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let $t;for(const ia of wt){const ni=pe.match(ia);if(ni?.[1]){$t=ni[1].trim();break}}const Cr=Array.isArray(N.to)?N.to:N.to?[N.to]:[],vn=N.sender||N.from||N.email,sa=[...new Set([...Cr,vn].filter(Boolean))];Cn(N.id),Wa(N.subject||null),Zs(N.body||N.lastMessage||null),Mo(sa.length?sa:null),on({title:N.subject||"Meeting",date:Je,time:Pt,location:$t,participants:sa,description:(N.body||N.lastMessage||"").substring(0,500)}),gr(!0)},disabled:!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Open schedule meeting modal to review and confirm",children:[n.jsx(ta,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),n.jsx("div",{className:"prose prose-slate max-w-none break-words",children:n.jsx(xD,{content:N.body||N.lastMessage||"No content",highlightTerm:ot(H).searchText||void 0})})]}),(Bf.length>0||Yu.length>0||sc.length>0)&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),n.jsxs("div",{className:"space-y-3",children:[Bf.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_i,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",Bf.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Bf.map(L=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:L.title}),L.status&&n.jsx("span",{className:"text-xs text-slate-500",children:L.status})]},L.id))})]}),Yu.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Xd,{className:"w-4 h-4 text-amber-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",Yu.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Yu.map(L=>n.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsx("p",{className:"text-sm font-medium text-amber-900",children:L.title||L.name}),L.status&&n.jsx("span",{className:"text-xs text-amber-600",children:L.status})]},L.id))})]}),sc.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ea,{className:"w-4 h-4 text-red-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",sc.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:sc.map(L=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[n.jsx("p",{className:"text-sm font-medium text-red-900",children:L.title}),L.status&&n.jsx("span",{className:"text-xs text-red-600",children:L.status})]},L.id))})]})]})]}),G.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(ta,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",G.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:G.map(L=>n.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:L.title}),n.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ms,{className:"w-3 h-3"}),n.jsxs("span",{children:[new Date(L.start).toLocaleString()," - ",new Date(L.end).toLocaleString()]})]}),L.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(SD,{className:"w-3 h-3"}),n.jsx("span",{children:L.location})]}),L.participants&&L.participants.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(co,{className:"w-3 h-3"}),n.jsx("span",{children:L.participants.join(", ")})]})]})]}),L.htmlLink&&n.jsx("a",{href:L.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:n.jsx(Ts,{className:"w-4 h-4"})})]})},L.id))})]}),N.attachments&&N.attachments.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Q0,{className:"w-4 h-4 text-slate-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",N.attachments.length,")"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:N.attachments.map((L,pe)=>{const ye=L.isDriveFile||L.driveFileId;return n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${ye?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[ye&&L.iconUrl?n.jsx("img",{src:L.iconUrl,alt:L.filename,className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${ri(L.mimeType)?"bg-blue-50 text-blue-600":cc(L.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:ri(L.mimeType)?n.jsx(Sl,{className:"w-4 h-4"}):cc(L.mimeType)?n.jsx(mc,{className:"w-4 h-4"}):n.jsx(Q0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.filename}),ye&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:ye?"Google Drive file":`${ga(L.size)}  ${L.mimeType}`})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[ye&&L.previewUrl&&n.jsx("a",{href:L.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(Ts,{className:"w-4 h-4"})}),!ye&&(ri(L.mimeType)||cc(L.mimeType))&&n.jsx("button",{onClick:()=>Xh(N.id,L.attachmentId,L.filename,L.mimeType),disabled:Xn[`${N.id}-${L.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:Xn[`${N.id}-${L.attachmentId}-view`]?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Kd,{className:"w-4 h-4"})}),!ye&&n.jsx("button",{onClick:()=>tf(N.id,L.attachmentId,L.filename),disabled:Xn[`${N.id}-${L.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:Xn[`${N.id}-${L.attachmentId}-download`]?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Pu,{className:"w-4 h-4"})}),ye&&L.downloadUrl&&n.jsx("a",{href:L.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:n.jsx(Pu,{className:"w-4 h-4"})})]})]},L.attachmentId||pe)})})]}),N.attachments&&N.attachments.some(L=>(L.isDriveFile||L.driveFileId)&&L.previewUrl&&(L.mimeType?.includes("google-apps")||L.mimeType?.includes("document")||L.mimeType?.includes("spreadsheet")||L.mimeType?.includes("presentation")))&&n.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(mc,{className:"w-4 h-4 text-blue-500"}),n.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),n.jsx("div",{className:"space-y-4",children:N.attachments.filter(L=>(L.isDriveFile||L.driveFileId)&&L.previewUrl&&(L.mimeType?.includes("google-apps")||L.mimeType?.includes("document")||L.mimeType?.includes("spreadsheet")||L.mimeType?.includes("presentation"))).map((L,pe)=>{const ye=L.previewUrl?.replace("/edit","/preview")||L.previewUrl;return n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[L.iconUrl&&n.jsx("img",{src:L.iconUrl,alt:L.filename,className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:L.filename}),n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),L.previewUrl&&n.jsx("a",{href:L.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:n.jsx(Ts,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:n.jsx("iframe",{src:ye,className:"absolute top-0 left-0 w-full h-full border-0",title:L.filename,allow:"fullscreen"})})]},L.attachmentId||pe)})})]}),n.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Qe.length>0&&n.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),j(()=>Go(),pe=>{})},disabled:it,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:it?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(sd,{className:"w-3 h-3"}),"Regenerate"]})}),!Ke&&n.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),j(()=>Go(),pe=>{})},disabled:it,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:it?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ri,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),Qe.length>1&&n.jsxs("div",{className:"mb-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Qe.map((L,pe)=>n.jsxs("button",{type:"button",onClick:()=>{Me(pe),nt(w(L.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${Xe===pe?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:L.style}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[L.confidence,"%"]})]}),n.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:L.description}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full ${L.confidence>=80?"bg-green-500":L.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${L.confidence}%`}})})]},pe))})]}),Ke?n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[Qe.length>1&&Xe!==null&&n.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[Qe[Xe].style," Variation"]}),n.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",Qe[Xe].description,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Qe[Xe].confidence,"%"]})]})]}),n.jsx("div",{className:"quill-wrapper",children:n.jsx(n1,{ref:L=>{It.current=L,L&&(Dt.current=L.getEditor())},theme:"snow",value:Ke,onChange:L=>nt(L),modules:$c,formats:q0,placeholder:"Edit your draft..."})}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("button",{type:"button",onClick:nf,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(Xl,{className:"w-3 h-3"}),"Copy to Clipboard"]}),n.jsxs("button",{type:"button",onClick:Vf,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[n.jsx(nn,{className:"w-3 h-3"}),"Save as Template"]}),n.jsx("button",{type:"button",onClick:()=>{Rr(!0),Td()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),n.jsx("button",{type:"button",onClick:()=>{nt(null),tt([]),Me(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),n.jsx("button",{type:"button",onClick:()=>{Rr(!0),Td()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",N?.id&&tr[N.id]&&tr[N.id].length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:tr[N.id].length})]}),l&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",style:{position:"relative"},children:[n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),n.jsx(n1,{ref:L=>{mt.current=L,L&&(Ut.current=L.getEditor())},theme:"snow",value:Vr,onChange:Ls,onBlur:()=>{setTimeout(()=>{ba||_n(null)},200)},modules:$c,formats:q0,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),ba&&dr.length>0&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:L=>{L.preventDefault()},children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(bh,{className:"w-3 h-3"}),"Mention User"]}),dr.map(L=>n.jsxs("button",{type:"button",onMouseDown:pe=>{pe.preventDefault(),pe.stopPropagation(),Wf(L)},onClick:pe=>{pe.preventDefault(),pe.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:L.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:L.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.email||""})]})]},L.id))]})})]}),n.jsxs("div",{className:"relative",ref:ka,children:[n.jsxs("button",{type:"button",onClick:()=>kr(!Lt),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${Yt.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(id,{className:`w-4 h-4 ${Yt.length>0?"text-indigo-600":"text-slate-400"}`}),n.jsx("span",{className:`font-medium ${Yt.length>0?"text-indigo-900":"text-slate-600"}`,children:Yt.length>0?`Marked for ${Yt.length} team member${Yt.length>1?"s":""}`:"Mark for team member"})]}),Yt.length>0&&n.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),ur([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:n.jsx(Xt,{className:"w-3 h-3 text-indigo-600"})})]}),Lt&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[n.jsx(id,{className:"w-3 h-3"}),"Select Team Members"]}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:zt,onChange:L=>Da(L.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),Pn.filter(L=>L.id!==i&&(zt===""||L.name?.toLowerCase().includes(zt.toLowerCase())||L.email?.toLowerCase().includes(zt.toLowerCase()))).map(L=>{const pe=Yt.includes(L.id);return n.jsxs("button",{type:"button",onClick:()=>{ur(pe?ye=>ye.filter(Je=>Je!==L.id):ye=>[...ye,L.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${pe?"bg-indigo-50":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${pe?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:L.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:L.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.email||""})]}),pe&&n.jsx(gn,{className:"w-4 h-4 text-indigo-600"})]},L.id)})]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:Nr?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(kc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Nr?ne?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:St,type:"file",accept:"image/*",onChange:vu,className:"hidden"})]}),n.jsx("button",{onClick:rf,disabled:Se||!Vr.trim()&&!ne,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Se?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),Nr&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Nr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{Or(""),je(null),St.current&&(St.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Xt,{className:"w-4 h-4"})})]})]}),!l&&n.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:n.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:tr[N?.id]&&tr[N.id]?.length>0?tr[N.id].map(L=>{const pe=Xc(o,"shared-inbox:delete-note")&&(Tbe(o)||L.userId===i);return n.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(L.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:L.userName?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:L.userName}),(L.markedFor||[]).length>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[n.jsx(id,{className:"w-2.5 h-2.5"}),"Marked"]})]}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(L.markedFor||[]).length>0&&n.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",Pn.filter(ye=>(L.markedFor||[]).includes(ye.id)).map(ye=>ye.name).join(", ")||"Unknown"]})]})]}),pe&&n.jsx("button",{onClick:()=>N?.id&&zl(N.id,L.id),disabled:ve===L.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:ve===L.id?n.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),L.message&&n.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:L.message}}),L.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsxs("button",{type:"button",onClick:()=>Zt({isOpen:!0,imageUrl:L.imageUrl,imageName:L.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[n.jsx(Sl,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:L.imageName||"View Attachment"})]})})]},L.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(es,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Sa.isOpen&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Zt({isOpen:!1,imageUrl:"",imageName:void 0}),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>Zt({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(Xt,{className:"w-6 h-6"})}),n.jsx("img",{src:Sa.imageUrl,alt:Sa.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:L=>L.stopPropagation()}),Sa.imageName&&n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Sa.imageName})})]})}),ts&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Wn(!1),Vn("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),n.jsx("button",{onClick:()=>{Wn(!1),Vn("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:za,onChange:L=>Vn(L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),uc())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[n.jsx("button",{onClick:()=>{Wn(!1),Vn("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:uc,disabled:!za||!za.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),xr&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Rr(!1),children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),n.jsx("button",{onClick:()=>Rr(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Yr.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ri,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):n.jsx("div",{className:"space-y-3",children:Yr.map(L=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),N&&L.content&&(nt(L.content),Rr(!1),t("Template loaded"))},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:L.name}),n.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[L.content?.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(L.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),N&&L.content&&(nt(L.content),Rr(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),n.jsx("button",{onClick:async pe=>{pe.preventDefault(),pe.stopPropagation(),No(L.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Lr,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},L.id))})})]})}),Pi&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>No(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Bn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>No(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const L=Pi;No(null);try{await mse(L,i),t("Template deleted"),Td()}catch(pe){const ye=pe?.message||"Failed to delete template";console.error("[INBOX] Error deleting template:",ye),r(ye)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),lu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>qo(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(mc,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),n.jsx("button",{onClick:()=>qo(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:xi,onChange:L=>Vu(L.target.value),onKeyDown:L=>{L.key==="Enter"&&Ed(xi)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),n.jsx("button",{onClick:()=>Ed(xi),disabled:Fl,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:Fl?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),Fl&&Nd.length===0?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):Nd.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):n.jsx("div",{className:"space-y-2",children:Nd.map(L=>n.jsxs("button",{onClick:()=>Hf(L),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[L.iconLink?n.jsx("img",{src:L.iconLink,alt:L.name,className:"w-8 h-8"}):n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(mc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[L.size?ga(L.size):"Drive file","  ",L.mimeType||"Unknown type"]})]}),n.jsx("button",{onClick:pe=>{pe.stopPropagation(),L.webViewLink&&window.open(L.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:n.jsx(Ts,{className:"w-4 h-4 text-slate-400"})})]},L.id))}),ac&&n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx("button",{onClick:()=>Ed(xi,ac),disabled:Fl,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:Fl?"Loading...":"Load More"})})]})]})})]}),hu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>ls(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:n.jsx(Bn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>ls(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{ls(!1),xl(!1),ss([]),mi([]),qs([]),Vi(""),js(""),Ki(""),Xi(""),Yi("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),bo&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{ls(!0)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:rs==="compose"?"Compose Email":rs==="reply"?"Reply":rs==="replyAll"?"Reply All":"Forward"}),n.jsx("button",{onClick:()=>{ls(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[qe.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),n.jsx("select",{value:wa,onChange:L=>is(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:qe.map((L,pe)=>n.jsxs("option",{value:L.email,children:[L.email," ",L.isCurrentUser?"(You)":`(${L.ownerName})`]},`${L.email}-${L.userId}-${pe}`))})]}),qe.length===0&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No email accounts available. Please connect a Gmail account or ensure users are configured."}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[ln.map((L,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>ss(ln.filter((ye,Je)=>Je!==pe)),className:"hover:text-indigo-900",children:n.jsx(Xt,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",value:Bo,onChange:L=>{const pe=L.target.value;if(Ki(pe),pe.length>0){const ye=gl.filter(Je=>Je.email?.toLowerCase().includes(pe.toLowerCase())||Je.name?.toLowerCase().includes(pe.toLowerCase())).slice(0,5);Pc(ye),Ss(!0)}else Ss(!1)},onKeyDown:L=>{if(L.key==="Enter"&&Bo.trim()){L.preventDefault();const pe=Bo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!ln.includes(pe)&&(ss([...ln,pe]),Ki(""),Ss(!1))}else if(L.key==="Backspace"&&Bo===""&&ln.length>0)ss(ln.slice(0,-1));else if(L.key==="ArrowDown"&&ks)L.preventDefault(),Yn(pe=>Math.min(pe+1,yo.length-1));else if(L.key==="ArrowUp"&&ks)L.preventDefault(),Yn(pe=>Math.max(pe-1,0));else if(L.key==="Enter"&&ks&&yo[na]){L.preventDefault();const pe=yo[na];pe.email&&!ln.includes(pe.email)&&(ss([...ln,pe.email]),Ki(""),Ss(!1))}else if(L.key===","||L.key===";"){L.preventDefault();const pe=Bo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!ln.includes(pe)&&(ss([...ln,pe]),Ki(""),Ss(!1))}},onBlur:()=>{const L=Bo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!ln.includes(L)&&(ss([...ln,L]),Ki(""),Ss(!1))},placeholder:ln.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),ks&&yo.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:yo.map((L,pe)=>n.jsxs("button",{type:"button",onClick:()=>{L.email&&!ln.includes(L.email)&&(ss([...ln,L.email]),Ki(""),Ss(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${pe===na?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"font-medium text-slate-900",children:L.name}),n.jsx("div",{className:"text-xs text-slate-500",children:L.email})]},L.id))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),n.jsxs("button",{type:"button",onClick:()=>Dl(!Ti),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Ti?"Hide":"Show"," Cc"]})]}),Ti&&n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[xa.map((L,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>mi(xa.filter((ye,Je)=>Je!==pe)),className:"hover:text-slate-900",children:n.jsx(Xt,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",value:$s,onChange:L=>{Xi(L.target.value)},onKeyDown:L=>{if(L.key==="Enter"&&$s.trim()){L.preventDefault();const pe=$s.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!xa.includes(pe)&&(mi([...xa,pe]),Xi(""))}else if(L.key==="Backspace"&&$s===""&&xa.length>0)mi(xa.slice(0,-1));else if(L.key===","||L.key===";"){L.preventDefault();const pe=$s.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!xa.includes(pe)&&(mi([...xa,pe]),Xi(""))}},onBlur:()=>{const L=$s.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!xa.includes(L)&&(mi([...xa,L]),Xi(""))},placeholder:xa.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),n.jsxs("button",{type:"button",onClick:()=>Ll(!wd),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[wd?"Hide":"Show"," Bcc"]})]}),wd&&n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[$n.map((L,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>qs($n.filter((ye,Je)=>Je!==pe)),className:"hover:text-slate-900",children:n.jsx(Xt,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",value:Oi,onChange:L=>{Yi(L.target.value)},onKeyDown:L=>{if(L.key==="Enter"&&Oi.trim()){L.preventDefault();const pe=Oi.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!$n.includes(pe)&&(qs([...$n,pe]),Yi(""))}else if(L.key==="Backspace"&&Oi===""&&$n.length>0)qs($n.slice(0,-1));else if(L.key===","||L.key===";"){L.preventDefault();const pe=Oi.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!$n.includes(pe)&&(qs([...$n,pe]),Yi(""))}},onBlur:()=>{const L=Oi.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!$n.includes(L)&&(qs([...$n,L]),Yi(""))},placeholder:$n.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:Va,onChange:L=>Vi(L.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),Yr.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:Qi||"",onChange:L=>{const pe=L.target.value||null;if(vp(pe),pe){const ye=Yr.find(Je=>Je.id===pe);ye?.content&&(js(ye.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No template"}),Yr.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx("button",{type:"button",onClick:()=>Rr(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:n.jsx(Ri,{className:"w-4 h-4"})})]})]}),rs==="compose"&&n.jsxs("div",{children:[n.jsxs("button",{type:"button",onClick:()=>{Fc(!qf),!qf&&!Ml&&Va&&ln.length>0&&eo()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4"}),qf?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),qf&&n.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:Zu?n.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):Ml?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),n.jsx("button",{type:"button",onClick:eo,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),n.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:Ml}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{js(Ml||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),n.jsx("button",{type:"button",onClick:()=>{const L=Ml?.replace(/<[^>]+>/g,"")||"";navigator.clipboard.writeText(L),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):n.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Ro.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),n.jsxs("select",{value:Ro.find(L=>L.content===Gi)?.id||"",onChange:L=>{const pe=Ro.find(ye=>ye.id===L.target.value);Pl(pe?.content||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No signature"}),Ro.map(L=>n.jsxs("option",{value:L.id,children:[L.name," ",L.isDefault?"(Default)":""]},L.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),n.jsx(n1,{ref:L=>{dt.current=L},theme:"snow",value:Ga,onChange:L=>{js(L)},modules:$c,formats:q0,placeholder:"Compose your message..."})]}),Gi&&n.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[n.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:Gi}})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:n.jsx(Q0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),n.jsx("input",{ref:Uo,type:"file",multiple:!0,onChange:U0,className:"hidden"})]}),n.jsxs("button",{type:"button",onClick:()=>{qo(!0),Vu(""),Ed()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(mc,{className:"w-4 h-4"})}),n.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),An.length>0&&n.jsx("div",{className:"mt-3 space-y-2",children:An.map(L=>n.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${L.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[L.isDriveFile&&L.driveIconLink?n.jsx("img",{src:L.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${ri(L.file.type)?"bg-blue-50 text-blue-600":cc(L.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:ri(L.file.type)?n.jsx(Sl,{className:"w-4 h-4"}):cc(L.file.type)?n.jsx(mc,{className:"w-4 h-4"}):n.jsx(Q0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.file.name}),L.isDriveFile&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:L.isDriveFile?"Google Drive file":`${ga(L.file.size)}  ${L.file.type}`}),zo[L.id]!==void 0&&zo[L.id]<100&&n.jsxs("div",{className:"flex-1 max-w-[100px]",children:[n.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${zo[L.id]}%`}})}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[zo[L.id],"%"]})]})]})]}),L.isDriveFile&&L.driveWebViewLink&&n.jsx("a",{href:L.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(Ts,{className:"w-4 h-4"})}),L.preview&&!L.isDriveFile&&n.jsx("button",{type:"button",onClick:()=>{La({isOpen:!0,emailId:"",attachmentId:L.id,filename:L.file.name,mimeType:L.file.type,url:L.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:n.jsx(Kd,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:()=>$l(L.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:n.jsx(Xt,{className:"w-4 h-4"})})]},L.id))})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{ls(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),rs==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{Ho(!0),await As()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(mc,{className:"w-4 h-4"}),"Load Drafts"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:Ua,disabled:Qn||!Va||!Ga,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Qn?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(mc,{className:"w-4 h-4"}),"Save Draft"]})}),rs==="compose"&&n.jsxs("button",{type:"button",onClick:()=>{if(!ln.length||!Va||!Ga){r("Please fill in all required fields (To, Subject, Message)");return}_s(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[n.jsx(ms,{className:"w-4 h-4"}),"Schedule"]}),rs==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{if(!i||ln.length===0||!Va||!Ga){r("Please fill in all required fields (To, Subject, Message)");return}const L=Ga.replace(/<[^>]+>/g," ").toLowerCase(),pe=`${Va} ${L}`,ye=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Je;for(const Cr of ye){const vn=pe.match(Cr);if(vn){Je=vn[0];break}}const lt=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Pt;for(const Cr of lt){const vn=pe.match(Cr);if(vn){Pt=vn[0];break}}const wt=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let $t;for(const Cr of wt){const vn=pe.match(Cr);if(vn&&vn[1]){$t=vn[1].trim();break}}on({title:Va,date:Je,time:Pt,location:$t,participants:ln,description:Ga.substring(0,500)}),Cn(null),gr(!0)},disabled:xt||!i||ln.length===0||!Va,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[xt?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(ta,{className:"w-4 h-4"}),"Schedule Meeting"]}),d?n.jsx("button",{type:"button",onClick:async()=>{if(!i||ln.length===0||!Va||!Ga){r("Please fill in all required fields (To, Subject, Message)");return}ti(!0);try{let L=Ga;Gi&&(L+=`<br><br>${Gi}`);const pe=await Promise.all(An.filter(Je=>!Je.isDriveFile).map(async Je=>new Promise((lt,Pt)=>{const wt=new FileReader;wt.onload=()=>{const $t=wt.result.split(",")[1];lt({filename:Je.file.name,content:$t,type:Je.file.type})},wt.onerror=Pt,wt.readAsDataURL(Je.file)}))),ye=An.filter(Je=>Je.isDriveFile&&Je.driveWebViewLink);if(ye.length>0&&rs==="compose"){let Je='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';ye.forEach(lt=>{Je+=`<li style="margin-bottom: 4px;"><a href="${lt.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${lt.file.name}</a></li>`}),Je+="</ul></div>",L+=Je}if(rs==="reply"||rs==="replyAll")await xse({emailId:N?.id||"",userId:i,accountEmail:wa||qe[0]?.email,body:L,replyAll:rs==="replyAll",attachments:pe.length>0?pe:void 0}),t("Reply sent successfully");else if(rs==="forward")await gse({emailId:N?.id||"",userId:i,accountEmail:wa||qe[0]?.email,to:ln,cc:xa.length>0?xa:void 0,bcc:$n.length>0?$n:void 0,body:L,attachments:pe.length>0?pe:void 0}),t("Email forwarded successfully");else{const lt=(await pse({userId:i,accountEmail:wa||qe[0]?.email,to:ln,cc:xa.length>0?xa:void 0,bcc:$n.length>0?$n:void 0,subject:Va,body:L,attachments:pe.length>0?pe:void 0}))?.data?.id;if(lt){const Pt=An.filter(wt=>wt.isDriveFile&&wt.driveFileId);for(const wt of Pt)try{await vI({userId:i,emailId:lt,fileId:wt.driveFileId,fileName:wt.file.name,fileMimeType:wt.file.type,webViewLink:wt.driveWebViewLink,webContentLink:void 0,iconLink:wt.driveIconLink})}catch($t){console.error("Failed to attach Drive file:",$t)}}t("Email sent successfully")}An.forEach(Je=>{Je.preview&&URL.revokeObjectURL(Je.preview)}),xl(!1),ss([]),mi([]),qs([]),Vi(""),js(""),Ca([]),Ki(""),Xi(""),Yi(""),qo(!1),await yn()}catch(L){const pe=y(L,"Failed to send email");r(pe)}finally{ti(!1)}},disabled:Il||ln.length===0||!Va||!Ga||qe.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Il?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),rs==="reply"||rs==="replyAll"?"Send Reply":rs==="forward"?"Forward":"Send"]})}):n.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),Zr?.isOpen&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:n.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[(ri(Zr.mimeType)||cc(Zr.mimeType))&&n.jsx(Sl,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:Zr.filename})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{Zr.url&&window.URL.revokeObjectURL(Zr.url),La(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:n.jsx(Xt,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>{N&&Zr.url&&tf(Zr.emailId,Zr.attachmentId,Zr.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[n.jsx(Pu,{className:"w-4 h-4"}),"Download"]})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:Zr.url?ri(Zr.mimeType)?n.jsx("img",{src:Zr.url,alt:Zr.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):cc(Zr.mimeType)?n.jsx("iframe",{src:Zr.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:Zr.filename}):n.jsxs("div",{className:"text-center text-slate-500",children:[n.jsx(mc,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),n.jsx("button",{onClick:()=>{N&&tf(Zr.emailId,Zr.attachmentId,Zr.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),ho&&vs&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{gs(!1),bs(null)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),n.jsx("button",{onClick:()=>{gs(!1),bs(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[qe.length>0&&n.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:n.jsxs("button",{onClick:()=>pl(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create New Label"]})}),sr?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[n.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):Sr.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>Ba(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsx(sd,{className:"w-4 h-4"}),"Retry"]}),qe.length>0&&n.jsxs("button",{onClick:()=>pl(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):n.jsx("div",{className:"space-y-2",children:Sr.map(L=>{const ye=In.find(Je=>Je.id===vs)?.labels?.includes(L.id)||!1;return n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:ye,onChange:Je=>{vs&&(Je.target.checked?mu(vs,[L.id],[]):mu(vs,[],[L.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:L.name}),L.type==="system"&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},L.id)})})]})]})}),xd&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{pl(!1),Fo("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),n.jsx("button",{onClick:()=>{pl(!1),Fo(""),Ec("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),n.jsx("input",{type:"text",value:Ei,onChange:L=>Fo(L.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:L=>{if(L.key==="Enter"&&Ei.trim()&&(nu||qe.length>0)){const pe=nu||qe[0].email;jo(Ei.trim(),pe)}},autoFocus:!0})]}),qe.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),n.jsx("select",{value:nu||qe[0].email,onChange:L=>Ec(L.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:qe.map(L=>n.jsx("option",{value:L.email,children:L.email},L.email))})]}),n.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[n.jsx("button",{onClick:()=>{pl(!1),Fo(""),Ec("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{if(Ei.trim()&&qe.length>0){const L=nu||qe[0].email;jo(Ei.trim(),L)}},disabled:!Ei.trim()||gd||qe.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:gd?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Wt&&i&&n.jsx(Abe,{isOpen:Wt,onClose:()=>{gr(!1),on(null),Cn(null),Wa(null),Zs(null),Mo(null)},userId:i,emailId:tn||void 0,emailSubject:Ha??Va,emailBody:Ns??Ga,participants:Us??ln,extractedDetails:Hr||void 0,onCreateSuccess:()=>{tn&&N?.id===tn&&hk(i,tn).then(L=>{L.success&&L.data&&Ne(L.data)}).catch(()=>{})}}),R0&&ic&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",ic.charAt(0).toUpperCase()+ic.slice(1)]}),n.jsx("button",{onClick:()=>{Lc(!1),Sd(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[ic==="contact"&&n.jsx("div",{className:"space-y-2",children:gl.map(L=>n.jsxs("button",{onClick:()=>Ds("contact",L.id),disabled:os,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.name}),n.jsx("p",{className:"text-xs text-slate-500",children:L.email})]},L.id))}),ic==="company"&&n.jsx("div",{className:"space-y-2",children:cu.map(L=>n.jsxs("button",{onClick:()=>Ds("company",L.id),disabled:os,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.name}),L.industry&&n.jsx("p",{className:"text-xs text-slate-500",children:L.industry})]},L.id))}),ic==="deal"&&n.jsx("div",{className:"space-y-2",children:fa.map(L=>n.jsxs("button",{onClick:()=>Ds("deal",L.id),disabled:os,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title||L.name}),L.stage&&n.jsx("p",{className:"text-xs text-slate-500",children:L.stage})]},L.id))}),ic==="project"&&n.jsx("div",{className:"space-y-2",children:Ic.map(L=>n.jsxs("button",{onClick:()=>Ds("project",L.id),disabled:os,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title||L.name}),L.status&&n.jsx("p",{className:"text-xs text-slate-500",children:L.status})]},L.id))}),ic==="contract"&&n.jsx("div",{className:"space-y-2",children:du.map(L=>n.jsxs("button",{onClick:()=>Ds("contract",L.id),disabled:os,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title}),L.status&&n.jsx("p",{className:"text-xs text-slate-500",children:L.status})]},L.id))})]})]})}),gp&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),n.jsx("button",{onClick:()=>Ju(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",defaultValue:N.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[n.jsx("option",{value:"",children:"None"}),Ic.map(L=>n.jsx("option",{value:L.id,children:L.title||L.name},L.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[n.jsx("option",{value:"",children:"Unassigned"}),Pn.map(L=>n.jsx("option",{value:L.id,children:L.name||L.email},L.id))]})]}),n.jsx("button",{onClick:()=>{const L=document.getElementById("task-title"),pe=document.getElementById("task-priority"),ye=document.getElementById("task-project"),Je=document.getElementById("task-assignee");Uc({title:L?.value,priority:pe?.value,projectId:ye?.value||void 0,assigneeId:Je?.value||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),Rc&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(ms,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),n.jsx("button",{onClick:()=>{_s(!1),Rl("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",value:gi,onChange:L=>Rl(L.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),n.jsxs("select",{value:_d,onChange:L=>Ji(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[n.jsx("button",{onClick:()=>{_s(!1),Rl("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(!gi){r("Please select a date and time");return}if(!i||ln.length===0||!Va||!Ga){r("Please fill in all required fields");return}try{const L=await Promise.all(An.filter(ye=>!ye.isDriveFile).map(async ye=>new Promise((Je,lt)=>{const Pt=new FileReader;Pt.onload=()=>{const wt=Pt.result.split(",")[1];Je({filename:ye.file.name,content:wt,type:ye.file.type})},Pt.onerror=lt,Pt.readAsDataURL(ye.file)})));let pe=Ga;Gi&&(pe+=`<br><br>${Gi}`),await kse({userId:i,accountEmail:wa||qe[0]?.email,to:ln,cc:xa.length>0?xa:void 0,bcc:$n.length>0?$n:void 0,subject:Va,body:pe,scheduledDateTime:gi,timezone:_d,attachments:L.length>0?L:void 0}),t("Email scheduled successfully"),_s(!1),xl(!1),ss([]),mi([]),qs([]),Vi(""),js(""),Ca([]),Rl("")}catch(L){const pe=y(L,"Failed to schedule email");r(pe)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),Kh&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(mc,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),n.jsx("button",{onClick:()=>{Ho(!1),zf([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:B0?n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx(pt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):ef.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):n.jsx("div",{className:"space-y-3",children:ef.map(L=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{if(L.payload?.headers){const pe=L.payload.headers,ye=pe.find(wt=>wt.name==="To"),Je=pe.find(wt=>wt.name==="Cc"),lt=pe.find(wt=>wt.name==="Bcc"),Pt=pe.find(wt=>wt.name==="Subject");ye?.value&&ss(ye.value.split(",").map(wt=>wt.trim())),Je?.value&&mi(Je.value.split(",").map(wt=>wt.trim())),lt?.value&&qs(lt.value.split(",").map(wt=>wt.trim())),Pt?.value&&Vi(Pt.value)}if(L.payload?.body?.data)try{const pe=atob(L.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));js(pe)}catch(pe){console.error("Failed to decode draft body:",pe),r("Failed to decode draft body")}else if(L.payload?.parts){const pe=L.payload.parts.find(ye=>ye.mimeType==="text/html");if(pe?.body?.data)try{const ye=atob(pe.body.data.replace(/-/g,"+").replace(/_/g,"/"));js(ye)}catch(ye){console.error("Failed to decode draft body:",ye),r("Failed to decode draft body")}}Ho(!1),t("Draft loaded")},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:L.payload?.headers?.find(pe=>pe.name==="Subject")?.value||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",L.payload?.headers?.find(pe=>pe.name==="To")?.value||"No recipients"]}),n.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",L.message?.internalDate?new Date(parseInt(L.message.internalDate)).toLocaleString():"Unknown date"]})]}),n.jsx("button",{onClick:pe=>{if(pe.stopPropagation(),L.payload?.headers){const ye=L.payload.headers,Je=ye.find($t=>$t.name==="To"),lt=ye.find($t=>$t.name==="Cc"),Pt=ye.find($t=>$t.name==="Bcc"),wt=ye.find($t=>$t.name==="Subject");Je?.value&&ss(Je.value.split(",").map($t=>$t.trim())),lt?.value&&mi(lt.value.split(",").map($t=>$t.trim())),Pt?.value&&qs(Pt.value.split(",").map($t=>$t.trim())),wt?.value&&Vi(wt.value)}if(L.payload?.body?.data)try{const ye=atob(L.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));js(ye)}catch(ye){console.error("Failed to decode draft body:",ye),r("Failed to decode draft body")}else if(L.payload?.parts){const ye=L.payload.parts.find(Je=>Je.mimeType==="text/html");if(ye?.body?.data)try{const Je=atob(ye.body.data.replace(/-/g,"+").replace(/_/g,"/"));js(Je)}catch(Je){console.error("Failed to decode draft body:",Je),r("Failed to decode draft body")}}Ho(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},L.id))})})]})}),vr&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{er(!1),Ge("")},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[qe.length," account",qe.length!==1?"s":""," connected"]})]})]}),n.jsx("button",{onClick:()=>{er(!1),Ge("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:mr,onChange:L=>Ge(L.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const L=new Set(Kt.map(ye=>ye.accountEmail.toLowerCase())),pe=qe.filter((ye,Je,lt)=>lt.findIndex(Pt=>Pt.email===ye.email&&Pt.userId===ye.userId)===Je).filter(ye=>{if(!mr.trim())return!0;const Je=mr.toLowerCase();return ye.email.toLowerCase().includes(Je)||ye.ownerName.toLowerCase().includes(Je)});return pe.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx(p0,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium text-sm",children:mr?"No accounts found matching your search":"No accounts connected"}),mr&&n.jsx("button",{onClick:()=>Ge(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):n.jsx("div",{className:"space-y-2",children:pe.map((ye,Je)=>{const lt=L.has(ye.email.toLowerCase()),Pt=Kt.find(wt=>wt.accountEmail.toLowerCase()===ye.email.toLowerCase());return n.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${ye.isCurrentUser?"border-indigo-300 bg-indigo-50/30":lt?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${lt?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:ye.email.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:ye.email}),ye.isCurrentUser&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),lt&&n.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:ye.ownerName==="Unknown User"?n.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(ye.connectedAt).toLocaleDateString()]}):n.jsxs(n.Fragment,{children:[ye.ownerName,"  Connected ",new Date(ye.connectedAt).toLocaleDateString(),!ye.hasToken&&ye.ownerName!=="Unknown User"&&n.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),n.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[lt?n.jsx("button",{onClick:()=>Pt&&Ya(Pt.id,ye.email),disabled:Qt===ye.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:Qt===ye.email?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Unfiltering..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Kd,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Show"})]})}):n.jsx("button",{onClick:()=>vi(ye.email),disabled:Qt===ye.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:Qt===ye.email?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Hiding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(nU,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Hide"})]})}),ye.isCurrentUser&&ye.hasToken!==!1&&n.jsx("button",{onClick:()=>Zn(ye.email),disabled:jt===ye.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:jt===ye.email?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Disconnecting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(kD,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Remove"})]})}),ye.isCurrentUser&&ye.hasToken===!1&&n.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${ye.email}-${ye.userId}-${Je}`)})})})()}),n.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:n.jsxs("button",{onClick:()=>{er(!1),Cs()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[n.jsx(sv,{className:"w-14 h-14 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},Pbe=()=>{const{showSuccess:e,showError:t}=kn(),[r,a]=D.useState([]),[s,i]=D.useState(!0),[o,l]=D.useState(!1),[c,d]=D.useState({name:"",trigger:"",action:"",description:""}),[u,f]=D.useState(!1),[p,m]=D.useState(null),[b,v]=D.useState(null),[g,y]=D.useState(null),[w,j]=D.useState(null);D.useEffect(()=>{(async()=>{i(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id,B=await lI(I),T=B?.data||B||[];a(Array.isArray(T)?T:[])}catch(I){console.error("[AUTOMATIONS] Failed to fetch automations:",I),t(I.message||"Failed to load automations"),a([])}finally{i(!1)}})()},[]),D.useEffect(()=>{const P=async()=>{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const B=await lI(I),T=B?.data||B||[];a(Array.isArray(T)?T:[])}catch(B){console.error("Failed to refresh automations:",B)}};return window.addEventListener("refresh-automations",P),()=>window.removeEventListener("refresh-automations",P)},[]);const N=async P=>{m(P);try{await Une(P);const I=r.find(B=>B.id===P);a(B=>B.map(T=>T.id===P?{...T,active:!T.active}:T)),e(`Automation "${I?.name}" ${I?.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to toggle automation:",I),t(I.message||"Failed to toggle automation")}finally{m(null)}},S=P=>{j(P),y(P.id)},A=async()=>{if(w){v(w.id);try{await qne(w.id),a(P=>P.filter(I=>I.id!==w.id)),y(null),j(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(P){console.error("Failed to delete automation:",P),t(P.message||"Failed to delete automation")}finally{v(null)}}},_=async P=>{P.preventDefault(),f(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;await Bne({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:I||void 0}),f(!1),l(!1),d({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to create automation:",I),t(I.message||"Failed to create automation"),f(!1)}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Recipe"]})]}),s?n.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[n.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(l1,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(P=>n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{onClick:()=>N(P.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${P.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:n.jsx(l1,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:P.name}),P.active&&n.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[n.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:P.description})]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),n.jsx("p",{className:"text-xs font-bold text-slate-700",children:P.trigger})]}),n.jsx(To,{className:"w-4 h-4 text-slate-300"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),n.jsx("p",{className:"text-xs font-bold text-indigo-600",children:P.action})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>N(P.id),disabled:p===P.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${P.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:P.active?"Pause Automation":"Activate Automation",children:p===P.id?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):P.active?n.jsx(vU,{className:"w-5 h-5 fill-indigo-600"}):n.jsx(bU,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>S(P),disabled:b===P.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:b===P.id?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):n.jsx(Lr,{className:"w-5 h-5"})})]})]})]},P.id)),n.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:n.jsx(Ri,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),n.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),n.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),n.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",n.jsx(To,{className:"w-4 h-4"})]})]})]}),n.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),n.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:_,className:"p-6 space-y-4 text-left",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),n.jsx("input",{required:!0,type:"text",value:c.name,onChange:P=>d({...c,name:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),n.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:P=>d({...c,trigger:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),n.jsx("input",{required:!0,type:"text",value:c.action,onChange:P=>d({...c,action:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),n.jsx("textarea",{required:!0,value:c.description,onChange:P=>d({...c,description:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Fu,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),g&&w&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>y(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(y0,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),n.jsx("button",{onClick:()=>y(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",n.jsxs("span",{className:"font-bold text-slate-900",children:['"',w.name,'"']}),"?"]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),n.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>y(null),disabled:b===w.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:A,disabled:b===w.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b===w.id?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},Ibe=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=kn(),[s,i]=D.useState("registry"),[o,l]=D.useState([]),[c,d]=D.useState([]),[u,f]=D.useState(!0),[p,m]=D.useState("all"),[b,v]=D.useState("open"),[g,y]=D.useState(null),[w,j]=D.useState(!1),[N,S]=D.useState(!1),[A,_]=D.useState({type:"feature",title:"",description:""}),[P,I]=D.useState({type:null,item:null}),[B,T]=D.useState(null),[E,F]=D.useState(!1),[q,H]=D.useState([]),[Q,J]=D.useState(!1),[re,X]=D.useState(!1),[ee,W]=D.useState(null),[O,z]=D.useState(!1),[V,U]=D.useState(""),[K,se]=D.useState(null),xe=e?.role==="Admin",ie=async()=>{if(s==="registry"){f(!0);try{const[de,Ce]=await Promise.all([xae(),_c()]),Ve=(de.data||[]).map(ge=>{const fe=ge.url||null;let _e=[];return Array.isArray(ge.attachments)&&ge.attachments.length>0&&(_e=ge.attachments.filter(Ue=>Ue&&(Ue.source==="file"||Ue.data)).map(Ue=>({type:Ue.type||"image",data:Ue.data||"",filename:Ue.filename||"attachment",mimeType:Ue.mimeType||"image/jpeg",source:"file"}))),{...ge,url:fe,attachments:_e}});l(Ve),d(Ce.data||[])}catch{a("Failed to synchronize roadmap registry.")}finally{f(!1)}}};D.useEffect(()=>{ie();const de=()=>ie();return window.addEventListener("refresh-roadmap",de),()=>window.removeEventListener("refresh-roadmap",de)},[s]),D.useEffect(()=>{const de=Ce=>{Ce.key==="Escape"&&K&&se(null)};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[K]),D.useEffect(()=>{U(g&&g.description||"")},[g]);const ue=async()=>{if(!(!g||!xe)){z(!0);try{await uj(g.id,{description:V.trim()}),l(de=>de.map(Ce=>Ce.id===g.id?{...Ce,description:V.trim()}:Ce)),y(de=>de&&{...de,description:V.trim()}),r("Context updated")}catch{a("Failed to update context")}finally{z(!1)}}},Be=async(de,Ce)=>{if(xe)try{await uj(de,{status:Ce}),l(Ve=>Ve.map(ge=>ge.id===de?{...ge,status:Ce}:ge)),g?.id===de&&y({...g,status:Ce}),r(`Status updated to ${Ce}`)}catch{a("Update failed.")}},me=async de=>{if(xe){F(!0);try{await uI(de),l(Ce=>Ce.filter(Ve=>Ve.id!==de)),g?.id===de&&y(null),T(null),r("Entry purged from registry.")}catch{a("Purge failed.")}finally{F(!1)}}},$e=()=>{q.length===he.length?H([]):H(he.map(de=>de.id))},Oe=async()=>{if(!xe){a("Only admins can delete entries");return}if(q.length===0){a("No items selected");return}J(!0);try{const de=[...q],Ce=de.map(Ve=>uI(Ve));await Promise.all(Ce),l(Ve=>Ve.filter(ge=>!de.includes(ge.id))),g&&de.includes(g.id)&&y(null),H([]),X(!1),r(`Successfully deleted ${de.length} entr${de.length>1?"ies":"y"}`)}catch(de){console.error("Bulk delete error:",de),a(de.message||"Failed to delete entries. Please try again.")}finally{J(!1)}},le=async de=>{if(de.preventDefault(),!A.title||!A.description){a("Title and description are required");return}S(!0);try{const Ce={...A,userId:e?.id||"anonymous",status:"planned"};await Q7(Ce),r("Entry added to Strategic Pipeline"),j(!1),_({type:"feature",title:"",description:""}),ie()}catch(Ce){console.error("[FEEDBACK] Creation failed:",Ce),a(`Failed to add entry: ${Ce.message||"Unknown error"}`)}finally{S(!1)}},te=async()=>{if(!P.item||!P.type)return;let de,Ce;switch(P.type){case"done":de="done",Ce="Entry marked as done";break;case"archive":de="canceled",Ce="Entry archived";break;case"in-execution":de="in-progress",Ce="Entry marked as in execution";break;default:return}try{await uj(P.item.id,{status:de}),l(Ve=>Ve.map(ge=>ge.id===P.item.id?{...ge,status:de}:ge)),g?.id===P.item.id&&y({...g,status:de}),r(Ce),I({type:null,item:null})}catch{a("Failed to update entry status")}},Te=(de,Ce="w-4 h-4")=>{switch(de){case"done":return n.jsx(gn,{className:`${Ce} text-emerald-500`});case"in-progress":return n.jsx(ms,{className:`${Ce} text-blue-500 animate-pulse`});case"postponed":return n.jsx(tU,{className:`${Ce} text-amber-500`});case"canceled":return n.jsx(Kk,{className:`${Ce} text-slate-400`});default:return n.jsx(Gv,{className:`${Ce} text-indigo-400`})}},we=de=>{switch(de){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},Ie=(de,Ce="w-4 h-4")=>{switch(de){case"bug":return n.jsx(Wv,{className:Ce});case"feature":return n.jsx(Ri,{className:Ce});case"idea":return n.jsx(zj,{className:Ce})}},he=o.filter(de=>(b==="open"?de.status!=="done"&&de.status!=="canceled":de.status==="done"||de.status==="canceled")?p==="all"?!0:de.type===p:!1);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),n.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[n.jsx(Gv,{className:"w-4 h-4 text-indigo-500"}),n.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),n.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:()=>{v("open"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${b==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),n.jsx("button",{onClick:()=>{v("completed"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${b==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(de=>n.jsx("button",{onClick:()=>{m(de),H([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${p===de?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:de},de)),n.jsxs("button",{onClick:()=>{const Ce=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";_({type:Ce,title:"",description:""}),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(nn,{className:"w-3 h-3"})," New Entry"]})]})]}),u?n.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[n.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):he.length===0?n.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[n.jsx(s1,{className:"w-16 h-16 text-slate-100"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),n.jsxs("button",{onClick:()=>{const Ce=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";_({type:Ce,title:"",description:""}),j(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-4 h-4"})," Add Entry"]})]})]}):n.jsxs(n.Fragment,{children:[he.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:he.length>0&&q.length===he.length,onChange:de=>{de.stopPropagation(),$e()}}),n.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:de=>{de.stopPropagation(),$e()},children:"Select All Entries"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:he.map(de=>{const Ce=c.find(ge=>ge.id===de.userId),Ve=q.includes(de.id);return n.jsxs("div",{onClick:()=>{y(de),W(null)},className:`bg-white rounded-[32px] border ${Ve?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${we(de.type)} flex items-center gap-1.5`,children:[Ie(de.type,"w-2.5 h-2.5"),de.type]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[Te(de.status,"w-2.5 h-2.5"),de.status]}),n.jsxs("div",{className:"flex items-center gap-1.5",onClick:ge=>ge.stopPropagation(),children:[n.jsx("div",{className:`${Ve?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:n.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Ve?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Ve,onChange:ge=>{ge.stopPropagation(),H(fe=>fe.includes(de.id)?fe.filter(_e=>_e!==de.id):[...fe,de.id])},onClick:ge=>{ge.stopPropagation()}})})}),(de.status==="planned"||de.status==="in-progress"||de.status==="postponed")&&n.jsxs(n.Fragment,{children:[de.status!=="in-progress"&&n.jsx("button",{onClick:ge=>{ge.stopPropagation(),I({type:"in-execution",item:de})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:n.jsx(ms,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:ge=>{ge.stopPropagation(),I({type:"done",item:de})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:n.jsx(gn,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:ge=>{ge.stopPropagation(),I({type:"archive",item:de})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:n.jsx(_u,{className:"w-3.5 h-3.5"})})]}),xe&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:ge=>{ge.stopPropagation(),W(ee===de.id?null:de.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${ee===de.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:n.jsx(Xk,{className:"w-3.5 h-3.5"})}),ee===de.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-[55]",onClick:ge=>{ge.stopPropagation(),W(null)}}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),n.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(ge=>n.jsxs("button",{onClick:fe=>{fe.stopPropagation(),Be(de.id,ge),W(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${de.status===ge?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",ge]},ge)),n.jsx("button",{onClick:ge=>{ge.stopPropagation(),T(de),W(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:de.title}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',de.description,'"']}),de.url&&n.jsx("div",{className:"mb-6",children:n.jsxs("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",onClick:ge=>ge.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[de.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(Sl,{className:"w-3 h-3"}):n.jsx(fm,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[120px]",children:de.url.length>30?`${de.url.substring(0,30)}...`:de.url}),n.jsx(Ts,{className:"w-3 h-3"})]})}),de.attachments&&Array.isArray(de.attachments)&&de.attachments.length>0&&n.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:de.attachments.map((ge,fe)=>ge.type==="image"&&ge.data?n.jsxs("button",{type:"button",onClick:_e=>{_e.stopPropagation(),se({src:ge.data,alt:ge.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(Sl,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:ge.filename||"Screenshot"})]},fe):ge.type==="video"&&ge.data?n.jsxs("a",{href:ge.data,target:"_blank",rel:"noopener noreferrer",onClick:_e=>_e.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(fm,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:ge.filename||"Video"}),n.jsx(Ts,{className:"w-3 h-3"})]},fe):null)}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:Ce?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black text-slate-900",children:Ce?.name||"Observer"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(de.createdAt).toLocaleDateString()})]})]}),n.jsx(va,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},de.id)})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:n.jsx(Gv,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(de=>de.type==="bug").length,icon:n.jsx(Wv,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(de=>de.status==="done").length,icon:n.jsx(Ri,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(de=>de.status==="in-progress").length,icon:n.jsx(ms,{className:"w-4 h-4 text-blue-500"})}].map((de,Ce)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:de.icon}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:de.label}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:de.value})]})]},Ce))})]}),s==="registry"&&n.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[n.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),n.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",n.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(es,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),n.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:n.jsx(l1,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),n.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:n.jsx(ND,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(uh,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:n.jsx(Yd,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:n.jsx(wD,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:n.jsx(iU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:n.jsx(ci,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:n.jsx(cU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:n.jsx(Yk,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(pU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(aB,{currentUser:e})}),s==="automation"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(Pbe,{})}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>se(null),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>se(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(Xt,{className:"w-6 h-6"})}),n.jsx("img",{src:K.src,alt:K.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:de=>de.stopPropagation()})]})}),w&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(nn,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),n.jsx("button",{onClick:()=>{j(!1),_({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(Xt,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:le,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Wv,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:n.jsx(Ri,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:n.jsx(zj,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(de=>n.jsxs("button",{type:"button",onClick:()=>_({...A,type:de.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${A.type===de.id?`${de.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[de.icon," ",de.label]},de.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:A.title,onChange:de=>_({...A,title:de.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),n.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:A.description,onChange:de=>_({...A,description:de.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),n.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{j(!1),_({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N||!A.title||!A.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:N?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>y(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:()=>y(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Xt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${g.type==="bug"?"bg-red-500 shadow-red-100":g.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:Ie(g.type,"w-8 h-8")}),n.jsxs("div",{children:[n.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${we(g.type)}`,children:g.type}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:g.title})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[Te(g.status,"w-5 h-5"),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:g.status.replace("-"," ")})]})]}),n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[n.jsx(ta,{className:"w-5 h-5 text-indigo-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(g.createdAt).toLocaleDateString()})]})]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),xe&&n.jsx("button",{type:"button",onClick:ue,disabled:O||V.trim()===(g.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:O?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-3 h-3 animate-spin"})," Saving"]}):n.jsxs(n.Fragment,{children:[n.jsx(gn,{className:"w-3 h-3"})," Save Context"]})})]}),xe?n.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[n.jsx("textarea",{rows:4,value:V,onChange:de=>U(de.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),n.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[n.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',g.description,'"']}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),g.url&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(l0,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:n.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[g.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(fm,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[200px]",children:g.url.length>40?`${g.url.substring(0,40)}...`:g.url}),n.jsx(Ts,{className:"w-4 h-4"})]})})]}),g.attachments&&g.attachments.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:g.attachments.map((de,Ce)=>de.type==="image"&&de.data?n.jsxs("button",{type:"button",onClick:()=>se({src:de.data,alt:de.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(Sl,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:de.filename||"Screenshot"})]},Ce):de.type==="video"&&de.data?n.jsxs("a",{href:de.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(fm,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:de.filename||"Video"}),n.jsx(Ts,{className:"w-4 h-4"})]},Ce):null)})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[n.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:c.find(de=>de.id===g.userId)?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-black text-slate-900",children:c.find(de=>de.id===g.userId)?.name||"Impact Member"}),n.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[c.find(de=>de.id===g.userId)?.role||"Stakeholder","  Enterprise Contributor"]})]})]})]}),xe&&n.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(de=>n.jsxs("button",{onClick:()=>Be(g.id,de),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${g.status===de?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[Te(de,"w-3 h-3"),de.replace("-"," ")]},de))})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>T(g),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>y(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),P.type&&P.item&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${P.type==="done"?"bg-emerald-50 text-emerald-600":P.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:P.type==="done"?n.jsx(gn,{className:"w-6 h-6"}):P.type==="in-execution"?n.jsx(ms,{className:"w-6 h-6"}):n.jsx(_u,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:P.type==="done"?"Mark as Done?":P.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:P.type==="done"?"This will move the entry to Archive & Done":P.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:P.item.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:P.item.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>I({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:te,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${P.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":P.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:P.type==="done"?"Mark Done":P.type==="in-execution"?"Start Execution":"Archive"})]})]})}),B&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:B.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:B.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>T(null),disabled:E,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>me(B.id),disabled:E,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),q.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:q.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:de=>{if(de.preventDefault(),de.stopPropagation(),!xe){a("Only admins can delete entries");return}if(q.length===0){a("No items selected");return}X(!0)},disabled:Q,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Q?n.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>H([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]})]})}),re&&q.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",q.length," Entr",q.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(de=>q.includes(de.id)).slice(0,5).map(de=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[Ie(de.type,"w-4 h-4"),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:de.title}),n.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:de.type})]})]},de.id)),q.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",q.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(!1),disabled:Q,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:de=>{de.preventDefault(),de.stopPropagation(),Oe()},disabled:Q,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Q?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${q.length} Entr${q.length>1?"ies":"y"}`})]})]})})]})},Dbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),[a,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState(null),[f,p]=D.useState(!0),[m,b]=D.useState(!1),[v,g]=D.useState([]),[y,w]=D.useState(!1),[j,N]=D.useState("select"),[S,A]=D.useState(""),[_,P]=D.useState(!1),[I,B]=D.useState(!1),[T,E]=D.useState([]),[F,q]=D.useState(!1),[H,Q]=D.useState(!1),[J,re]=D.useState(!1),[X,ee]=D.useState(!1),[W,O]=D.useState(!1),[z,V]=D.useState(!1),[U,K]=D.useState(""),[se,xe]=D.useState(!1),ie=D.useRef(null),[ue,Be]=D.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),me=D.useCallback(async()=>{try{const ke=await J7(),Fe=ke?.data||ke||[];c(Array.isArray(Fe)?Fe:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),$e=D.useCallback(async()=>{p(!0);try{const ke={};v.length===1&&(ke.companyId=v[0]);const Fe=await gae(ke);let qe=Fe?.data||Fe||[];qe=Array.isArray(qe)?qe:[],v.length>1&&(qe=qe.filter(et=>v.includes(et.companyId))),s(qe);try{const et=await hd();o(et?.data||et||[])}catch(et){console.error("[Expenses] Failed to fetch companies:",et),o([])}}catch(ke){console.error("[Expenses] Error fetching expenses:",ke),r(ke.message||"Failed to load expenses"),s([])}finally{p(!1)}},[e,v,r]);D.useEffect(()=>{me()},[me]),D.useEffect(()=>{$e()},[$e]),D.useEffect(()=>{const ke=()=>$e();return window.addEventListener("refresh-expenses",ke),()=>window.removeEventListener("refresh-expenses",ke)},[$e]);const Oe=ke=>i.find(Fe=>Fe.id===ke),le=ke=>{switch(ke){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},te=a,Te={totalExpenses:te.reduce((ke,Fe)=>ke+(Fe.amount||0),0),pendingCount:te.filter(ke=>ke.status==="Pending"||!ke.status).length,approvedCount:te.filter(ke=>ke.status==="Approved").length,thisMonth:te.filter(ke=>{const Fe=new Date(ke.date),qe=new Date;return Fe.getMonth()===qe.getMonth()&&Fe.getFullYear()===qe.getFullYear()}).reduce((ke,Fe)=>ke+(Fe.amount||0),0)},we=()=>{T.length===te.length&&te.length>0?E([]):E(te.map(ke=>ke.id))},Ie=(ke,Fe=1920,qe=1080,et=.8)=>new Promise((Kt,qt)=>{const vr=new FileReader;vr.onload=er=>{const mr=new Image;mr.onload=()=>{let Ge=mr.width,jt=mr.height;Ge>jt?Ge>Fe&&(jt=jt*Fe/Ge,Ge=Fe):jt>qe&&(Ge=Ge*qe/jt,jt=qe);const br=document.createElement("canvas");br.width=Ge,br.height=jt;const Qt=br.getContext("2d");if(!Qt){qt(new Error("Failed to create canvas context"));return}Qt.drawImage(mr,0,0,Ge,jt);const Fr=br.toDataURL("image/jpeg",et);Kt(Fr)},mr.onerror=()=>qt(new Error("Failed to load image")),mr.src=er.target?.result},vr.onerror=()=>qt(new Error("Failed to read file")),vr.readAsDataURL(ke)}),he=async ke=>{const Fe=ke.target.files?.[0];if(Fe){if(!Fe.type.startsWith("image/")&&!Fe.type.includes("pdf")){r("Please select an image or PDF file");return}if(Fe.size>10*1024*1024){r("File size must be less than 10MB");return}V(!0);try{if(Fe.type.startsWith("image/")){const qe=await Ie(Fe,1920,1080,.8);K(qe),Be(et=>({...et,receiptFile:Fe}))}else{const qe=new FileReader;qe.onload=()=>{K(qe.result),Be(et=>({...et,receiptFile:Fe}))},qe.readAsDataURL(Fe)}}catch(qe){r(qe.message||"Failed to process receipt")}finally{V(!1)}}},de=async ke=>{if(ke.preventDefault(),!ue.companyId||!ue.title||!ue.amount||!ue.category||!ue.date){r("Please fill in all required fields");return}O(!0);try{const Fe=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;let qe="",et="",Kt="";ue.receiptFile&&(ue.receiptFile.type.startsWith("image/"),qe=U,et=ue.receiptFile.name,Kt=ue.receiptFile.type),await vae({companyId:ue.companyId,title:ue.title,amount:parseFloat(ue.amount),category:ue.category,date:new Date(ue.date).toISOString(),description:ue.description,status:ue.status,receiptUrl:qe||void 0,receiptFilename:et||void 0,receiptMimeType:Kt||void 0,userId:Fe}),t("Expense added successfully"),ee(!1),Be({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value=""),$e(),window.dispatchEvent(new Event("refresh-expenses"))}catch(Fe){r(Fe.message||"Failed to add expense")}finally{O(!1)}},Ce=async()=>{if(S.trim()){P(!0);try{const ke=await Z7({name:S.trim()});if(ke?.data){const Fe=ke.data;c(qe=>[...qe,Fe]),Be(qe=>({...qe,category:Fe.name})),A(""),w(!1),t("Category added successfully")}}catch(ke){ke.message?.includes("already exists")||ke.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(ke.message||"Failed to add category")}finally{P(!1)}}},Ve=async(ke,Fe)=>{xe(!0);try{await bae(ke,{status:Fe}),s(qe=>qe.map(et=>et.id===ke?{...et,status:Fe}:et)),d&&d.id===ke&&u({...d,status:Fe}),t(`Expense status updated to ${Fe}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(qe){r(qe.message||"Failed to update expense status")}finally{xe(!1)}},ge=async()=>{if(d){b(!0);try{await fI(d.id),s(ke=>ke.filter(Fe=>Fe.id!==d.id)),u(null),re(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(ke){r(ke.message||"Failed to delete expense")}finally{b(!1)}}},fe=async()=>{const ke=[...T];if(ke.length!==0){q(!0),Q(!1);try{await Promise.all(ke.map(Fe=>fI(Fe))),s(Fe=>Fe.filter(qe=>!ke.includes(qe.id))),E([]),t(`Successfully deleted ${ke.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{q(!1)}}},_e=ke=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(ke),Ue=ke=>new Date(ke).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return f?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{N("manage"),w(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[n.jsx(Fs,{className:"w-4 h-4"}),"Manage Categories"]}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[n.jsx(nn,{className:"w-5 h-5"}),"Add Expense"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:_e(Te.totalExpenses),icon:n.jsx(Mu,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:Te.pendingCount.toString(),icon:n.jsx(ms,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:Te.approvedCount.toString(),icon:n.jsx(_i,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:_e(Te.thisMonth),icon:n.jsx(ta,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((ke,Fe)=>n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("div",{className:`p-2 rounded-lg ${ke.color}`,children:ke.icon})}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:ke.label}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:ke.value})]},Fe))}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vf,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),n.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:v.length===0?"All Companies":v.length===1?i.find(ke=>ke.id===v[0])?.name||"1 Selected":`${v.length} Companies Selected`}),v.length>0&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:v.length})]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",te.length," expense(s)"]})]}),T.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:n.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-sm font-black",children:T.length})}),n.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),n.jsx("div",{className:"w-px h-6 bg-white/20"}),n.jsx("button",{onClick:()=>Q(!0),disabled:F,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:F?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"DELETE"]})}),n.jsx("button",{onClick:()=>E([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:n.jsx(Xt,{className:"w-5 h-5 text-white"})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:`lg:col-span-2 space-y-4 ${d?"lg:pr-6":""}`,children:[te.length>0&&n.jsx("div",{className:"flex items-center gap-3 mb-4",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:T.length===te.length&&te.length>0,onChange:we,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),te.length===0?n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[n.jsx(Kj,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[n.jsx(nn,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):te.map(ke=>{const Fe=Oe(ke.companyId),qe=T.includes(ke.id);return n.jsxs("div",{onClick:()=>u(ke),className:`bg-white rounded-2xl border ${qe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${d?.id===ke.id?"ring-2 ring-indigo-500":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("input",{type:"checkbox",checked:qe,onChange:et=>{et.stopPropagation(),E(Kt=>qe?Kt.filter(qt=>qt!==ke.id):[...Kt,ke.id])},onClick:et=>et.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),n.jsx(Xs,{src:Fe?.logo,fallbackText:Fe?.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:ke.title}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:Fe?.name||"Unknown Company"})]})]}),n.jsxs("div",{className:"text-right shrink-0 ml-4",children:[n.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:_e(ke.amount)}),n.jsxs("select",{value:ke.status||"Pending",onChange:et=>{et.stopPropagation(),Ve(ke.id,et.target.value)},onClick:et=>et.stopPropagation(),disabled:se,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${le(ke.status||"Pending")} ${se?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fs,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:ke.category})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ta,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:Ue(ke.date)})]}),ke.receiptUrl&&n.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[n.jsx(ea,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),ke.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:ke.description}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:et=>{et.stopPropagation(),u(ke)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",n.jsx(va,{className:"w-3 h-3"})]}),n.jsx("button",{onClick:et=>{et.stopPropagation(),u(ke),re(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},ke.id)})]}),d&&n.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),n.jsx("p",{className:"text-lg font-black text-slate-900",children:d.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xs,{src:Oe(d.companyId)?.logo,fallbackText:Oe(d.companyId)?.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Oe(d.companyId)?.name||"Unknown"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),n.jsx("p",{className:"text-2xl font-black text-indigo-600",children:_e(d.amount)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),n.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:d.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsxs("select",{value:d.status||"Pending",onChange:ke=>{const Fe=ke.target.value;Ve(d.id,Fe)},disabled:se,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${le(d.status||"Pending")} ${se?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]}),se&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(pt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ue(d.date)})]}),d.description&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),d.receiptUrl&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),n.jsx("div",{className:"space-y-2",children:d.receiptMimeType?.startsWith("image/")?n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:d.receiptUrl,alt:d.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const ke=window.open();ke&&ke.document.write(`<img src="${d.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:n.jsx(Kd,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):n.jsxs("a",{href:d.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[n.jsx(ea,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:d.receiptFilename||"Receipt"}),n.jsx(Pu,{className:"w-4 h-4 text-slate-400"})]})})]}),n.jsx("div",{className:"pt-4 border-t border-slate-200",children:n.jsx("button",{onClick:()=>{u(d),re(!0)},disabled:m,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),X&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Kj,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),n.jsx("button",{onClick:()=>{ee(!1),Be({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(Xt,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:de,className:"p-8 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),n.jsxs("select",{required:!0,value:ue.companyId,onChange:ke=>Be({...ue,companyId:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"",children:"Select Company"}),i.map(ke=>n.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:ue.title,onChange:ke=>Be({...ue,title:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),n.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:ue.amount,onChange:ke=>Be({...ue,amount:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),n.jsxs("button",{type:"button",onClick:()=>{N("select"),w(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${ue.category?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:ue.category||"Select Category"}),n.jsx(va,{className:"w-4 h-4 text-slate-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),n.jsx("input",{required:!0,type:"date",value:ue.date,onChange:ke=>Be({...ue,date:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),n.jsxs("select",{value:ue.status,onChange:ke=>Be({...ue,status:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{rows:3,placeholder:"Additional details...",value:ue.description,onChange:ke=>Be({...ue,description:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),n.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:z?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):U?n.jsx(Sl,{className:"w-5 h-5"}):n.jsx(kc,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:U?ue.receiptFile?.name||"Receipt uploaded":"Upload Receipt"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),n.jsx("input",{ref:ie,type:"file",accept:"image/*,.pdf",onChange:he,disabled:z,className:"hidden"})]}),U&&ue.receiptFile?.type.startsWith("image/")&&n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:U,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),U&&ue.receiptFile?.type.includes("pdf")&&n.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[n.jsx(ea,{className:"w-8 h-8 text-red-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-red-900",children:ue.receiptFile.name}),n.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),n.jsx("button",{type:"button",onClick:()=>{K(""),Be(ke=>({...ke,receiptFile:null})),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:n.jsx(Xt,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{ee(!1),Be({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:W||z,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),J&&d&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:d.title}),n.jsxs("p",{className:"text-xs text-slate-500",children:[_e(d.amount),"  ",Oe(d.companyId)?.name||"Unknown"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{re(!1),u(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:ge,disabled:m,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),y&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:j==="manage"?"Manage Categories":"Select Category"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:j==="manage"?"View and add expense categories":"Choose an expense category"})]}),n.jsx("button",{onClick:()=>{w(!1),A("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):j==="manage"?l.map(ke=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Fs,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:ke.name})]}),n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})]},ke.id)):l.map(ke=>n.jsxs("button",{type:"button",onClick:()=>{Be({...ue,category:ke.name}),w(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${ue.category===ke.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[n.jsx("span",{className:"font-bold text-sm",children:ke.name}),ue.category===ke.name?n.jsx(gn,{className:"w-5 h-5 text-indigo-600"}):n.jsx(Ou,{className:"w-5 h-5 text-slate-300"})]},ke.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:S,onChange:ke=>A(ke.target.value),onKeyDown:ke=>{ke.key==="Enter"&&S.trim()&&!_&&(ke.preventDefault(),Ce())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ce,disabled:!S.trim()||_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:_?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),I&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),n.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.length===0,onChange:()=>{g([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(ke=>n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.includes(ke.id),onChange:Fe=>{Fe.target.checked?g(qe=>[...qe,ke.id]):g(qe=>qe.filter(et=>et!==ke.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx(Xs,{src:ke.logo,fallbackText:ke.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:ke.name})]},ke.id))]})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:()=>{g([])},disabled:v.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(Xt,{className:"w-4 h-4"}),"Clear All"]}),n.jsxs("button",{onClick:()=>{B(!1),$e()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",v.length===0?"All":v.length,")"]})]})]})}),H&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-8 border-b border-slate-100",children:n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",T.length," Expense(s)?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:fe,disabled:F,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:F?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},Lbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),[a,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState(new Date().getFullYear()),[f,p]=D.useState(""),[m,b]=D.useState(null),[v,g]=D.useState(!0),[y,w]=D.useState(!1),[j,N]=D.useState("yearly"),[S,A]=D.useState(!1),[_,P]=D.useState(!1),[I,B]=D.useState(null),[T,E]=D.useState(!1),[F,q]=D.useState(!1),[H,Q]=D.useState(null),[J,re]=D.useState(!1),[X,ee]=D.useState(""),[W,O]=D.useState(!1),[z,V]=D.useState({year:new Date().getFullYear(),department:"",categories:[]}),U=e?.role==="Admin",K=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,se=Array.from({length:5},(he,de)=>new Date().getFullYear()-2+de),xe=D.useCallback(async()=>{try{const de=(await Sae())?.data||[];o(Array.isArray(de)?de:[])}catch(he){console.error("[BUDGET] Error fetching departments:",he)}},[]),ie=D.useCallback(async()=>{try{const de=(await J7())?.data||[];c(Array.isArray(de)?de:[])}catch(he){console.error("[BUDGET] Error fetching categories:",he)}},[]),ue=D.useCallback(async()=>{g(!0);try{const he={year:d};f&&(he.department=f),console.log("[Budget] Fetching budgets with params:",he);const Ce=(await yae(he))?.data||[];console.log("[Budget] Received budgets:",Ce),s(Array.isArray(Ce)?Ce:[])}catch(he){console.error("[Budget] Error fetching budgets:",he),r(he.message||"Failed to load budgets")}finally{g(!1)}},[d,f,r]),Be=D.useCallback(async()=>{w(!0);try{const he={year:d};f&&(he.department=f),console.log("[Budget] Fetching tracking with params:",he);const de=await kae(he);console.log("[Budget] Received tracking:",de?.data),b(de?.data||null)}catch(he){console.error("[Budget] Error fetching tracking:",he),b(null)}finally{w(!1)}},[d,f]);D.useEffect(()=>{xe(),ie()},[xe,ie]),D.useEffect(()=>{ue(),Be()},[ue,Be]);const me=()=>{V({year:d,department:f,categories:l.map(he=>({categoryId:he.id,categoryName:he.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},$e=async()=>{if(X.trim()){O(!0);try{const he=await Z7({name:X.trim()});if(he?.data){const de=he.data;c(Ce=>[...Ce,de]),ee(""),t("Category added successfully"),ie()}}catch(he){he.message?.includes("already exists")||he.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(he.message||"Failed to add category")}finally{O(!1)}}},Oe=async()=>{if(!K){r("User not found");return}if(z.categories.length===0){r("Please add at least one category");return}if(z.categories.reduce((de,Ce)=>de+Ce.yearlyBudget,0)===0){r("Total budget cannot be zero");return}E(!0);try{await wae({year:z.year,department:z.department||null,categories:z.categories,createdBy:K}),t("Budget created successfully"),A(!1),ue(),Be()}catch(de){r(de.message||"Failed to create budget")}finally{E(!1)}},le=async()=>{if(!(!I||!K)){E(!0);try{await Nae(I.id,{categories:z.categories,updatedBy:K}),t("Budget updated successfully"),P(!1),B(null),ue(),Be()}catch(he){r(he.message||"Failed to update budget")}finally{E(!1)}}},te=async he=>{q(!0);try{await jae(he.id),t("Budget deleted successfully"),Q(null),ue(),Be()}catch(de){r(de.message||"Failed to delete budget")}finally{q(!1)}},Te=he=>he>=1e6?`$${(he/1e6).toFixed(1)}M`:he>=1e3?`$${(he/1e3).toFixed(1)}k`:`$${he.toLocaleString()}`,we=he=>he>=100?"text-red-600":he>=80?"text-amber-600":"text-emerald-600",Ie=he=>he>=100?"bg-red-500":he>=80?"bg-amber-500":"bg-emerald-500";return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),U&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Fs,{className:"w-4 h-4"})," Manage Categories"]}),n.jsxs("button",{onClick:()=>{me(),A(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Budget"]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),n.jsx("select",{value:d,onChange:he=>u(parseInt(he.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:se.map(he=>n.jsx("option",{value:he,children:he},he))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:f,onChange:he=>p(he.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(he=>n.jsx("option",{value:he,children:he},he))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),n.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(he=>n.jsx("button",{onClick:()=>N(he),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${j===he?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:he},he))})]})]})}),!v&&a.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:m&&m.hasBudget!==!1?"Current Budget":"Available Budgets"}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[a.length," budget",a.length!==1?"s":""," for selected filters"]})]}),m&&m.hasBudget!==!1&&U&&n.jsxs("button",{onClick:()=>{const he=a[0];B(he),V({year:he.year,department:he.department||"",categories:he.categories.map(de=>({...de,q1Budget:de.q1Budget||0,q2Budget:de.q2Budget||0,q3Budget:de.q3Budget||0,q4Budget:de.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"})," Edit Budget"]})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:a.map(he=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[he.year," ",he.department&&`- ${he.department}`]}),!he.department&&n.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),n.jsx("p",{className:"text-lg font-black text-indigo-600",children:Te(he.totalBudget)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),n.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[he.categories.length," configured"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),n.jsx("p",{className:"text-xs text-slate-500 font-medium",children:he.createdAt?new Date(he.createdAt).toLocaleDateString():"N/A"})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:n.jsxs("details",{className:"group",children:[n.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[n.jsx(va,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:he.categories.map(de=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:de.categoryName}),n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",n.jsx("span",{className:"font-black",children:Te(de.yearlyBudget)})]})]},de.categoryId))})]})})]}),U&&!(m&&m.hasBudget!==!1)&&n.jsxs("button",{onClick:()=>{B(he),V({year:he.year,department:he.department||"",categories:he.categories.map(de=>({...de,q1Budget:de.q1Budget||0,q2Budget:de.q2Budget||0,q3Budget:de.q3Budget||0,q4Budget:de.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"})," View/Edit"]})]})},he.id))})]}),m&&m.hasBudget!==!1&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:n.jsx(Mu,{className:"w-5 h-5 text-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Te(m.totalBudget)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:n.jsx(Yd,{className:"w-5 h-5 text-blue-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Te(m.totalSpent)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl ${m.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:m.totalRemaining>=0?n.jsx(gn,{className:"w-5 h-5 text-emerald-600"}):n.jsx(Bn,{className:"w-5 h-5 text-red-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),n.jsx("h3",{className:`text-2xl font-black ${m.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:Te(Math.abs(m.totalRemaining))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:n.jsx(Zp,{className:"w-5 h-5 text-purple-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),n.jsxs("h3",{className:`text-2xl font-black ${we(m.totalPercentUsed)}`,children:[m.totalPercentUsed.toFixed(1),"%"]})]})]}),m&&m.isOverBudget&&n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[n.jsx(y0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),n.jsxs("p",{className:"text-sm text-red-700",children:["You are ",n.jsx("span",{className:"font-black",children:Te(m.overBudgetAmount)})," over budget (",m.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!v&&(!m||m.hasBudget===!1)&&n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(wD,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:U?`No budget has been set for ${d}${f?` - ${f}`:""}. Create one to start tracking.`:`No budget available for ${d}${f?` - ${f}`:""}.`}),U&&n.jsxs("button",{onClick:()=>{me(),A(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Budget"]})]}),m&&m.hasBudget!==!1&&m.categories&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),n.jsx("div",{className:"divide-y divide-slate-100",children:m.categories.map(he=>n.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:he.categoryName}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",n.jsx("span",{className:"font-black text-slate-900",children:Te(he.yearlyBudget)})]}),n.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",n.jsx("span",{className:"font-black text-slate-900",children:Te(he.yearlySpent)})]}),n.jsxs("span",{className:`font-black ${we(he.yearlyPercentUsed)}`,children:[he.yearlyPercentUsed.toFixed(1),"%"]})]})]}),he.isOverBudget&&n.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",Te(he.overBudgetAmount)]})]}),n.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[n.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${Ie(he.yearlyPercentUsed)}`,style:{width:`${Math.min(he.yearlyPercentUsed,100)}%`}}),he.yearlyPercentUsed>100&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),j==="quarterly"&&n.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((de,Ce)=>{const Ve=he.quarters[de];return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Ce+1]}),n.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[n.jsx("span",{className:"font-black text-slate-900",children:Te(Ve.spent)})," "," / ",Te(Ve.budget)]}),n.jsxs("p",{className:`text-xs font-black mt-1 ${we(Ve.percentUsed)}`,children:[Ve.percentUsed.toFixed(0),"%"]})]},de)})})]},he.categoryId))})]}),S&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>A(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Mu,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",z.year]})]})]}),n.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:z.year,onChange:he=>V(de=>({...de,year:parseInt(he.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:se.map(he=>n.jsx("option",{value:he,children:he},he))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:z.department,onChange:he=>V(de=>({...de,department:he.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(he=>n.jsx("option",{value:he,children:he},he))]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Fs,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),n.jsx("div",{className:"space-y-4",children:z.categories.map((he,de)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:he.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:he.yearlyBudget||"",onChange:Ce=>{const Ve=[...z.categories];Ve[de].yearlyBudget=parseFloat(Ce.target.value)||0,V(ge=>({...ge,categories:Ve}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ce,Ve)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ve+1]}),n.jsx("input",{type:"number",value:he[Ce]||"",onChange:ge=>{const fe=[...z.categories];fe[de][Ce]=parseFloat(ge.target.value)||0,V(_e=>({..._e,categories:fe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ce))]})]},he.categoryId))}),n.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Te(z.categories.reduce((he,de)=>he+de.yearlyBudget,0))})]})})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>A(!1),disabled:T,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Oe,disabled:T,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),_&&I&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{P(!1),B(null)}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(dl,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",I.year,I.department&&` - ${I.department}`]})]})]}),n.jsx("button",{onClick:()=>{P(!1),B(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-4",children:[z.categories.map((he,de)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:he.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:he.yearlyBudget||"",onChange:Ce=>{const Ve=[...z.categories];Ve[de].yearlyBudget=parseFloat(Ce.target.value)||0,V(ge=>({...ge,categories:Ve}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ce,Ve)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ve+1]}),n.jsx("input",{type:"number",value:he[Ce]||"",onChange:ge=>{const fe=[...z.categories];fe[de][Ce]=parseFloat(ge.target.value)||0,V(_e=>({..._e,categories:fe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ce))]})]},he.categoryId)),n.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Te(z.categories.reduce((he,de)=>he+de.yearlyBudget,0))})]})})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsxs("button",{onClick:()=>Q(I),disabled:T,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Lr,{className:"w-4 h-4"})," Delete"]}),n.jsx("button",{onClick:()=>{P(!1),B(null)},disabled:T,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:le,disabled:T,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Si,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),H&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Q(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(y0,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",H.year,H.department&&` - ${H.department}`,"? This action cannot be undone."]})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>Q(null),disabled:F,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:()=>te(H),disabled:F,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:F?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),J&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),n.jsx("button",{onClick:()=>{re(!1),ee("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(he=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Fs,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:he.name})]}),n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})]},he.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:X,onChange:he=>ee(he.target.value),onKeyDown:he=>{he.key==="Enter"&&X.trim()&&!W&&(he.preventDefault(),$e())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:$e,disabled:!X.trim()||W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},vD=["Draft","Pending Signature","Signed","Expired","Terminated"],Fbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),[a,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState([]),[f,p]=D.useState(null),[m,b]=D.useState(!0),[v,g]=D.useState(!1),[y,w]=D.useState(!1),[j,N]=D.useState(""),[S,A]=D.useState(""),[_,P]=D.useState(""),[I,B]=D.useState(!1),[T,E]=D.useState(!1),[F,q]=D.useState(!1),[H,Q]=D.useState(!1),J=D.useRef(null),[re,X]=D.useState(!1),[ee,W]=D.useState(!1),[O,z]=D.useState(!1),[V,U]=D.useState(!1),[K,se]=D.useState(!1),[xe,ie]=D.useState(""),[ue,Be]=D.useState(!1),[me,$e]=D.useState([]),[Oe,le]=D.useState(!1),[te,Te]=D.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),we=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Ie=D.useCallback(async()=>{b(!0);try{const[Ge,jt,br,Qt]=await Promise.all([eM(),hd(),Sh(),Tae()]);s(Ge?.data||[]),o(jt?.data||[]),c(br?.data||[]),u(Qt?.data||[])}catch(Ge){r(Ge.message||"Failed to load contracts")}finally{b(!1)}},[r]);D.useEffect(()=>{Ie()},[Ie]);const he=async()=>{if(f){le(!0);try{const Ge=await a3("contract",f.id);$e(Ge?.data||[])}catch(Ge){console.error("[CONTRACTS] Failed to fetch contract activities:",Ge),$e([])}finally{le(!1)}}};D.useEffect(()=>{f?he():$e([])},[f?.id]),D.useEffect(()=>{(async()=>{if(we)try{await cb({userId:we}),z(!0)}catch{z(!1)}})()},[we]);const de=async()=>{if(!we){r("User not authenticated");return}U(!0);try{let Ge;try{Ge=await cb({userId:we})}catch(Mr){throw Mr.message?.includes("Failed to fetch")||Mr.message?.includes("ERR_CONNECTION_REFUSED")||Mr.message?.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):Mr}const{accessToken:jt,apiKey:br}=Ge?.data||{};if(!jt)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",jt?"Present":"Missing"),console.log("Google Picker - API Key:",br?`Present (${br.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",Ge?.data),await new Promise((Mr,rt)=>{let At=0;const cr=50,wr=setInterval(()=>{At++,window.google&&window.google.picker?(clearInterval(wr),Mr()):At>=cr&&(clearInterval(wr),rt(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Qt=window.google.picker;new Qt.PickerBuilder().setOAuthToken(jt).setCallback(Mr=>{U(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(Mr,null,2)),console.log("Google Picker Response Action:",Mr[Qt.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:Qt.Action.PICKED,CANCEL:Qt.Action.CANCEL}),Mr[Qt.Response.ACTION]===Qt.Action.PICKED){const rt=Mr[Qt.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",rt),console.log("Google Picker - Number of documents:",rt?.length),rt&&rt.length>0){const At=rt[0];console.log("Google Picker - Selected file data:",JSON.stringify(At,null,2)),console.log("Google Picker - File ID:",At.id),console.log("Google Picker - File Name:",At.name),console.log("Google Picker - File MIME Type:",At.mimeType),console.log("Google Picker - File URL:",At.url),console.log("Google Picker - File Service ID:",At.serviceId),Ce(At)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(Mr[Qt.Response.ACTION]!==Qt.Action.CANCEL){const rt=Mr[Qt.Response.ERROR];rt&&(console.error("Google Picker Error:",rt),console.error("Error details:",JSON.stringify(Mr,null,2)),rt===Qt.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):rt===Qt.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):rt===Qt.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${rt}. Check browser console for details.`))}}catch(rt){console.error("Error handling picker callback:",rt),r("Failed to process selected file")}}).addView(Qt.ViewId.DOCS).enableFeature(Qt.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(Ge){U(!1),console.error("Google Drive Picker Error:",Ge),Ge.message?.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):Ge.message?.includes("not connected")||Ge.message?.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):Ge.message?.includes("Failed to fetch")||Ge.message?.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(Ge.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Ce=async Ge=>{if(we){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(Ge,null,2)),console.log("File data from Google Picker:",{id:Ge.id,name:Ge.name,url:Ge.url,iconUrl:Ge.iconUrl,mimeType:Ge.mimeType,serviceId:Ge.serviceId,type:Ge.type,sizeBytes:Ge.sizeBytes});try{const jt=Ge.url||Ge.embedUrl||"",br=Ge.iconUrl||"",Qt=Ge.sizeBytes?parseInt(Ge.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:Ge.id,publicUrl:jt,iconUrl:br,fileName:Ge.name,fileMimeType:Ge.mimeType}),Te(Fr=>({...Fr,isGoogleDriveLinked:!0,googleDriveFileId:Ge.id,googleDriveWebViewLink:jt,googleDriveDownloadLink:jt,googleDriveIconUrl:br,fileName:Ge.name||"Untitled",fileMimeType:Ge.mimeType||"",fileSize:Qt,fileUrl:jt,file:null})),t("File attached from Google Drive")}catch(jt){console.error("Error handling Google Drive file selection:",jt),r(jt.message||"Failed to attach file from Google Drive")}}},Ve=async()=>{if(xe.trim()){Be(!0);try{const Ge=await Oae({name:xe.trim()});if(Ge?.data){const jt=Ge.data;u(br=>[...br,jt]),ie(""),t("Document type added successfully")}}catch(Ge){Ge.message?.includes("already exists")||Ge.message?.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(Ge.message||"Failed to add document type")}finally{Be(!1)}}},ge=Ge=>{const jt=Ge.target.files?.[0];if(!jt)return;if(jt.size>10*1024*1024){r("File size must be less than 10MB");return}Q(!0);const br=new FileReader;br.onload=()=>{const Qt=br.result;Te(Fr=>({...Fr,file:jt,fileUrl:Qt,fileName:jt.name,fileMimeType:jt.type,fileSize:jt.size})),Q(!1)},br.onerror=()=>{r("Failed to read file"),Q(!1)},br.readAsDataURL(jt)},fe=async()=>{if(!te.fileUrl||!we){r("Please select a file first");return}X(!0);try{const Ge=await Pae({fileName:te.fileName,fileContent:te.fileUrl,fileMimeType:te.fileMimeType,userId:we});Te(jt=>({...jt,isGoogleDriveLinked:!0,googleDriveFileId:Ge.data.id,googleDriveWebViewLink:Ge.data.webViewLink,googleDriveDownloadLink:Ge.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(Ge){r(Ge.message||"Failed to upload to Google Drive")}finally{X(!1)}},_e=async(Ge,jt)=>{W(!0);try{const br=await Iae({contractId:Ge,userId:we,title:jt});t("Signature document created in Google Docs"),Ie(),window.open(br.data.documentLink,"_blank")}catch(br){r(br.message||"Failed to create signature document")}finally{W(!1)}},Ue=async()=>{if(!te.title||!te.documentType||!te.contractParty){r("Please fill in all required fields");return}q(!0);try{await _ae({title:te.title,documentType:te.documentType,contractParty:te.contractParty,companyId:te.companyId||null,contactId:te.contactId||null,expirationDate:te.expirationDate||null,renewalDate:te.renewalDate||null,signedDate:te.signedDate||null,status:te.status,description:te.description||null,tags:te.tags,requiresSignature:te.requiresSignature,signatureStatus:te.requiresSignature?"Pending":"Not Required",fileUrl:te.fileUrl||null,fileName:te.fileName||null,fileMimeType:te.fileMimeType||null,fileSize:te.fileSize||null,isGoogleDriveLinked:te.isGoogleDriveLinked,googleDriveFileId:te.googleDriveFileId||null,googleDriveWebViewLink:te.googleDriveWebViewLink||null,googleDriveDownloadLink:te.googleDriveDownloadLink||null,googleDriveIconUrl:te.googleDriveIconUrl||null,userId:we}),t("Contract created successfully"),B(!1),et(),Ie()}catch(Ge){r(Ge.message||"Failed to create contract")}finally{q(!1)}},ke=async()=>{if(f){q(!0);try{await Cae(f.id,{title:te.title,documentType:te.documentType,contractParty:te.contractParty,companyId:te.companyId||null,contactId:te.contactId||null,expirationDate:te.expirationDate||null,renewalDate:te.renewalDate||null,signedDate:te.signedDate||null,status:te.status,description:te.description||null,tags:te.tags,requiresSignature:te.requiresSignature,fileUrl:te.fileUrl||null,fileName:te.fileName||null,fileMimeType:te.fileMimeType||null,fileSize:te.fileSize||null,isGoogleDriveLinked:te.isGoogleDriveLinked,googleDriveFileId:te.googleDriveFileId||null,googleDriveWebViewLink:te.googleDriveWebViewLink||null,googleDriveDownloadLink:te.googleDriveDownloadLink||null,googleDriveIconUrl:te.googleDriveIconUrl||null}),t("Contract updated successfully"),E(!1),p(null),et(),Ie()}catch(Ge){r(Ge.message||"Failed to update contract")}finally{q(!1)}}},Fe=async()=>{if(f){g(!0);try{await Aae(f.id),t("Contract deleted successfully"),w(!1),p(null),Ie()}catch(Ge){r(Ge.message||"Failed to delete contract")}finally{g(!1)}}},qe=async Ge=>{try{await Eae(Ge.id,{signedBy:we,signedDate:new Date().toISOString()}),t("Contract marked as signed"),Ie()}catch(jt){r(jt.message||"Failed to mark contract as signed")}},et=()=>{Te({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),J.current&&(J.current.value="")},Kt=Ge=>{p(Ge),Te({title:Ge.title,documentType:Ge.documentType,contractParty:Ge.contractParty,companyId:Ge.companyId||"",contactId:Ge.contactId||"",expirationDate:Ge.expirationDate||"",renewalDate:Ge.renewalDate||"",signedDate:Ge.signedDate||"",status:Ge.status,description:Ge.description||"",tags:Ge.tags||[],requiresSignature:Ge.requiresSignature,file:null,fileUrl:Ge.fileUrl||"",fileName:Ge.fileName||"",fileMimeType:Ge.fileMimeType||"",fileSize:Ge.fileSize||0,isGoogleDriveLinked:Ge.isGoogleDriveLinked,googleDriveFileId:Ge.googleDriveFileId||"",googleDriveWebViewLink:Ge.googleDriveWebViewLink||"",googleDriveDownloadLink:Ge.googleDriveDownloadLink||"",googleDriveIconUrl:Ge.googleDriveIconUrl||""}),E(!0)},qt=Ge=>{switch(Ge){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},vr=Ge=>{switch(Ge){case"Signed":return n.jsx(gn,{className:"w-4 h-4"});case"Pending Signature":return n.jsx(ms,{className:"w-4 h-4"});case"Draft":return n.jsx(ea,{className:"w-4 h-4"});case"Expired":return n.jsx(Bn,{className:"w-4 h-4"});case"Terminated":return n.jsx(Xt,{className:"w-4 h-4"});default:return n.jsx(ea,{className:"w-4 h-4"})}},er=a.filter(Ge=>{const jt=Ge.title.toLowerCase().includes(j.toLowerCase())||Ge.contractParty.toLowerCase().includes(j.toLowerCase())||Ge.documentType.toLowerCase().includes(j.toLowerCase()),br=!S||Ge.status===S,Qt=!_||Ge.documentType===_;return jt&&br&&Qt}),mr={total:a.length,signed:a.filter(Ge=>Ge.status==="Signed").length,pending:a.filter(Ge=>Ge.status==="Pending Signature").length,expired:a.filter(Ge=>Ge.status==="Expired").length};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Fs,{className:"w-4 h-4"})," Manage Document Types"]}),n.jsxs("button",{onClick:()=>{et(),B(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(nn,{className:"w-4 h-4"})," Add Contract"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ea,{className:"w-5 h-5 text-indigo-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:mr.total})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(gn,{className:"w-5 h-5 text-emerald-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),n.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:mr.signed})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ms,{className:"w-5 h-5 text-amber-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),n.jsx("h3",{className:"text-2xl font-black text-amber-600",children:mr.pending})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Bn,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),n.jsx("h3",{className:"text-2xl font-black text-red-600",children:mr.expired})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:j,onChange:Ge=>N(Ge.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("select",{value:S,onChange:Ge=>A(Ge.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Statuses"}),vD.map(Ge=>n.jsx("option",{value:Ge,children:Ge},Ge))]}),n.jsxs("select",{value:_,onChange:Ge=>P(Ge.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Types"}),d.map(Ge=>n.jsx("option",{value:Ge.name,children:Ge.name},Ge.id))]})]})}),m?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):er.length===0?n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(ea,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:j||S||_?"Try adjusting your filters":"Create your first contract to get started"}),!j&&!S&&!_&&n.jsxs("button",{onClick:()=>{et(),B(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-4 h-4"})," Add Contract"]})]}):n.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:er.map(Ge=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p(Ge),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-base font-black text-slate-900",children:Ge.title}),n.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${qt(Ge.status)} flex items-center gap-1`,children:[vr(Ge.status),Ge.status]}),Ge.isGoogleDriveLinked&&n.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[Ge.googleDriveIconUrl?n.jsx("img",{src:Ge.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:jt=>{jt.target.style.display="none"}}):n.jsx(o0,{className:"w-3 h-3"}),"Drive"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Fs,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:Ge.documentType})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(co,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:Ge.contractParty})]}),Ge.expirationDate&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ta,{className:"w-4 h-4 text-slate-400"}),n.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(Ge.expirationDate).toLocaleDateString()]})]}),Ge.requiresSignature&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[n.jsx(Vv,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold",children:Ge.signatureStatus})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Ge.googleDriveWebViewLink&&n.jsx("a",{href:Ge.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:jt=>jt.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:n.jsx(Ts,{className:"w-4 h-4"})}),n.jsx("button",{onClick:jt=>{jt.stopPropagation(),Kt(Ge)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(dl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:jt=>{jt.stopPropagation(),p(Ge),w(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})},Ge.id))})}),(I||T)&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{B(!1),E(!1),et()}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ea,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:I?"Add Contract":"Edit Contract"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:I?"Create a new contract with metadata and documents":"Update contract details"})]})]}),n.jsx("button",{onClick:()=>{B(!1),E(!1),et()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:te.title,onChange:Ge=>Te(jt=>({...jt,title:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:te.documentType,onChange:Ge=>Te(jt=>({...jt,documentType:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"Select type"}),d.map(Ge=>n.jsx("option",{value:Ge.name,children:Ge.name},Ge.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:te.contractParty,onChange:Ge=>Te(jt=>({...jt,contractParty:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),n.jsxs("select",{value:te.companyId,onChange:Ge=>Te(jt=>({...jt,companyId:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),i.map(Ge=>n.jsx("option",{value:Ge.id,children:Ge.name},Ge.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),n.jsxs("select",{value:te.contactId,onChange:Ge=>Te(jt=>({...jt,contactId:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),l.map(Ge=>n.jsx("option",{value:Ge.id,children:Ge.name},Ge.id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),n.jsx("input",{type:"date",value:te.expirationDate,onChange:Ge=>Te(jt=>({...jt,expirationDate:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),n.jsx("input",{type:"date",value:te.renewalDate,onChange:Ge=>Te(jt=>({...jt,renewalDate:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),n.jsx("input",{type:"date",value:te.signedDate,onChange:Ge=>Te(jt=>({...jt,signedDate:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsx("select",{value:te.status,onChange:Ge=>Te(jt=>({...jt,status:Ge.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:vD.map(Ge=>n.jsx("option",{value:Ge,children:Ge},Ge))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:te.requiresSignature,onChange:Ge=>Te(jt=>({...jt,requiresSignature:Ge.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("textarea",{value:te.description,onChange:Ge=>Te(jt=>({...jt,description:Ge.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(I||T)&&n.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(kc,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),n.jsx("input",{ref:J,type:"file",onChange:ge,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!te.fileUrl&&!te.isGoogleDriveLinked?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>J.current?.click(),disabled:H,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:H?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(kc,{className:"w-4 h-4"}),"Choose File"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 h-px bg-slate-200"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),n.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),n.jsx("button",{onClick:de,disabled:!O||V,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:V?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(o0,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[te.isGoogleDriveLinked&&te.googleDriveIconUrl?n.jsx("img",{src:te.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:Ge=>{Ge.target.style.display="none";const jt=document.createElement("div");jt.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',Ge.target.parentNode?.appendChild(jt)}}):te.isGoogleDriveLinked?n.jsx(o0,{className:"w-5 h-5 text-blue-600"}):n.jsx(aU,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:te.fileName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[te.fileSize>0&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(te.fileSize/1024).toFixed(1)," KB"]}),te.isGoogleDriveLinked&&n.jsxs(n.Fragment,{children:[te.fileSize>0&&n.jsx("span",{className:"text-slate-300",children:""}),n.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),n.jsx("button",{onClick:()=>{Te(Ge=>({...Ge,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),J.current&&(J.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(Xt,{className:"w-4 h-4"})})]}),!te.isGoogleDriveLinked&&te.fileUrl&&n.jsx("button",{onClick:fe,disabled:re,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:re?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(o0,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),te.isGoogleDriveLinked&&te.googleDriveWebViewLink&&n.jsxs("a",{href:te.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[te.googleDriveIconUrl?n.jsx("img",{src:te.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:Ge=>{Ge.target.style.display="none"}}):n.jsx(Ts,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>{B(!1),E(!1),et()},disabled:F,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:I?Ue:ke,disabled:F,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:F?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),I?"Creating...":"Updating..."]}):n.jsx(n.Fragment,{children:I?"Create Contract":"Update Contract"})})]})]})})]}),f&&!T&&!y&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:f.title}),n.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${qt(f.status)} flex items-center gap-1`,children:[vr(f.status),f.status]})]}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[f.documentType," - ",f.contractParty]})]}),n.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Xt,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.expirationDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.expirationDate).toLocaleDateString()})]}),f.renewalDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.renewalDate).toLocaleDateString()})]}),f.signedDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.signedDate).toLocaleDateString()})]})]}),f.description&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:f.description})]}),(f.fileUrl||f.isGoogleDriveLinked)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),n.jsxs("div",{className:"space-y-2",children:[f.fileName&&n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[f.isGoogleDriveLinked&&f.googleDriveIconUrl?n.jsx("img",{src:f.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:Ge=>{Ge.target.style.display="none"}}):n.jsx(ea,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.fileName}),f.fileSize&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(f.fileSize/1024).toFixed(1)," KB"]})]})]}),f.fileUrl&&n.jsx("a",{href:f.fileUrl,download:f.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(Pu,{className:"w-4 h-4"})})]}),f.isGoogleDriveLinked&&f.googleDriveWebViewLink&&n.jsx("a",{href:f.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(o0,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),n.jsx(Ts,{className:"w-4 h-4 text-blue-600"})]})})]})]}),f.requiresSignature&&n.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Vv,{className:"w-5 h-5 text-amber-600"}),n.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),n.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",n.jsx("span",{className:"font-black",children:f.signatureStatus})]}),f.googleDocsSignatureLink?n.jsx("a",{href:f.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):n.jsx("button",{onClick:()=>_e(f.id,f.title),disabled:ee,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vv,{className:"w-4 h-4"}),"Create Signature Document"]})}),f.status!=="Signed"&&n.jsxs("button",{onClick:()=>qe(f),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[n.jsx(gn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Oe?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):me.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(es,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:me.map((Ge,jt)=>{const br=new Date(Ge.createdAt),Fr=new Date().getTime()-br.getTime(),Mr=Math.floor(Fr/(1e3*60*60*24));let rt="";Mr===0?rt="Today":Mr===1?rt="Yesterday":Mr<7?rt=`${Mr} days ago`:Mr<30?rt=`${Math.floor(Mr/7)} week${Math.floor(Mr/7)>1?"s":""} ago`:rt=`${Math.floor(Mr/30)} month${Math.floor(Mr/30)>1?"s":""} ago`;const At=Ge.activityType==="email_linked",cr=At?"border-indigo-600":"border-slate-200",wr=At?"bg-indigo-600":"bg-slate-300",Gr=At?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${cr} shadow-xl flex items-center justify-center`,children:At?n.jsx(es,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${wr}`})}),n.jsxs("p",{className:`text-[10px] font-black ${Gr} uppercase mb-1 tracking-widest`,children:[At?"Email Linked":Ge.activityType||"Activity","  ",rt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Ge.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Ge.description||Ge.title}),Ge.emailId&&n.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${Ge.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(Ts,{className:"w-3 h-3"})," View Email"]})]},Ge.id||jt)})})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),n.jsxs("button",{onClick:()=>{Kt(f)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),y&&f&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Bn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",n.jsx("span",{className:"font-black",children:f.title}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>w(!1),disabled:v,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Fe,disabled:v,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),n.jsx("button",{onClick:()=>{se(!1),ie("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:d.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ea,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):d.map(Ge=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(ea,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:Ge.name})]}),n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})]},Ge.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New document type...",value:xe,onChange:Ge=>ie(Ge.target.value),onKeyDown:Ge=>{Ge.key==="Enter"&&xe.trim()&&!ue&&(Ge.preventDefault(),Ve())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ve,disabled:!xe.trim()||ue,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ue?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},Mbe=()=>n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage your products and service catalog."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest border border-indigo-100",children:[n.jsx(Ri,{className:"w-4 h-4"})," Coming Soon"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-12 shadow-sm flex flex-col items-center justify-center min-h-[320px] text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-[24px] flex items-center justify-center mb-6",children:n.jsx(Yk,{className:"w-10 h-10 text-indigo-600"})}),n.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 max-w-md",children:"Catalog management, pricing, and service offerings will be available here. This section is in development."})]})]}),Rbe=({onLogin:e})=>{const[t,r]=D.useState("initial"),[a,s]=D.useState(""),[i,o]=D.useState(["","","","","",""]),[l,c]=D.useState(!1),[d,u]=D.useState(null),f=D.useRef([]),p=async()=>{if(!a||!a.includes("@")){u("Please enter a valid email address");return}c(!0),u(null);try{const w=await nI({email:a});if(w?.status===404)throw new Error(w.message);u(null),o(["","","","","",""]),r("verify")}catch(w){console.error("[AUTH UI] Error caught:",w),w.message&&(w.message.includes("Account not found")||w.status===404)?u("Account not found - contact your Administrator"):u(w.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},m=async()=>{const w=i.join("");if(w.length===6){if(!/^\d{6}$/.test(w)){u("OTP must contain only numbers");return}c(!0),u(null);try{const j=await kne({email:a,verificationCode:w});if(j.token&&j.user)e(j);else throw new Error("Invalid response from server.")}catch(j){console.error("[AUTH] Verification error:",j),j.message?.includes("User not registered")||j.message?.includes("USER_NOT_REGISTERED")||j.message?.includes("Account not found")?u("Account not found - contact your Administrator"):u(j.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>f.current[0]?.focus(),100)}finally{c(!1)}}},b=(w,j)=>{if(j&&!/^\d$/.test(j))return;const N=[...i];N[w]=j,o(N),d&&u(null),j&&w<5&&f.current[w+1]?.focus(),j&&w===5&&N.every(S=>S!=="")&&setTimeout(()=>m(),100)},v=(w,j)=>{if(j.key==="Backspace"||j.key==="Delete"){j.preventDefault();const N=[...i];i[w]?N[w]="":w>0&&(N[w-1]="",f.current[w-1]?.focus()),o(N),d&&u(null)}else j.key==="Enter"?(j.preventDefault(),m()):j.key==="ArrowLeft"&&w>0?(j.preventDefault(),f.current[w-1]?.focus()):j.key==="ArrowRight"&&w<5&&(j.preventDefault(),f.current[w+1]?.focus())},g=w=>{w.preventDefault();const j=w.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),N=[...i];for(let A=0;A<6;A++)N[A]=j[A]||"";o(N),d&&u(null);const S=N.findIndex(A=>A==="");f.current[S===-1?5:S]?.focus(),j.length===6&&setTimeout(()=>m(),100)};D.useEffect(()=>{t==="verify"?setTimeout(()=>f.current[0]?.focus(),100):o(["","","","","",""])},[t]);const y=w=>{w.preventDefault(),t==="initial"?p():m()};return n.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[n.jsx("div",{className:"mb-6 text-center",children:n.jsx("a",{href:"/privacy-policy",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),n.jsxs("div",{className:"flex flex-col items-center mb-10",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),n.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),n.jsxs("form",{onSubmit:y,className:"space-y-5",children:[d&&n.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx(Bn,{className:"w-4 h-4 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[d,d.includes("Administrator")&&n.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(es,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),n.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:a,onChange:w=>s(w.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&n.jsxs("div",{className:"space-y-4 text-center",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),n.jsx("p",{className:"text-sm font-semibold text-white",children:a})]}),n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),n.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((w,j)=>n.jsx("input",{ref:N=>{f.current[j]=N},type:"text",inputMode:"numeric",maxLength:1,value:w,onChange:N=>b(j,N.target.value),onKeyDown:N=>v(j,N),onPaste:j===0?g:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},j))}),n.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[n.jsx("button",{type:"button",onClick:async()=>{u(null),o(["","","","","",""]),c(!0);try{await nI({email:a}),u(null),setTimeout(()=>f.current[0]?.focus(),100)}catch(w){u(w.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),n.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),u(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),n.jsx("button",{disabled:l||t==="verify"&&i.some(w=>w===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",n.jsx(To,{className:"w-4 h-4"})]})})]}),n.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(cl,{className:"w-5 h-5 text-slate-700"}),n.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[n.jsx("p",{children:"Access restricted to authorized personnel."}),n.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[n.jsx("a",{href:"/help",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),n.jsx("span",{className:"text-slate-600",children:""}),n.jsx("a",{href:"/privacy-policy",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},Bbe=({children:e,onUserLoaded:t})=>{const[r,a]=D.useState(!0),[s,i]=D.useState(!1);return D.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),a(!1);return}if(c)try{const d=JSON.parse(c);t(d),i(!0),a(!1),aI().then(u=>{const f=u.data||u,p=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(f)!==JSON.stringify(p)&&(localStorage.setItem("user_data",JSON.stringify(f)),t(f))}).catch(u=>{console.warn("Session expired:",u),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const d=await aI(),u=d.data||d;localStorage.setItem("user_data",JSON.stringify(u)),t(u),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{a(!1)}})()},[t]),r?n.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[n.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),n.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?n.jsx(n.Fragment,{children:e}):n.jsx(Rbe,{onLogin:o=>{localStorage.setItem("auth_token",o.token||o.data?.token);const l=o.user||o.data?.user||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},Ube=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:a,isRefreshing:s=!1,onClose:i,onViewAll:o,onNavigate:l})=>{const c=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return n.jsx(id,{className:"w-4 h-4 text-indigo-500"});if(f?.toLowerCase().includes("pipeline"))return n.jsx(Yd,{className:"w-4 h-4 text-purple-500"});switch(u){case"lead":return n.jsx(id,{className:"w-4 h-4 text-blue-500"});case"deal":return n.jsx(lo,{className:"w-4 h-4 text-indigo-500"});case"task":return n.jsx(_i,{className:"w-4 h-4 text-emerald-500"});case"payment":return n.jsx(y0,{className:"w-4 h-4 text-red-500"});case"email-routing":return n.jsx(Xl,{className:"w-4 h-4 text-amber-500"});case"email-assigned":return n.jsx(es,{className:"w-4 h-4 text-blue-500"});case"email-mention":return n.jsx(bh,{className:"w-4 h-4 text-violet-500"});case"new-email":return n.jsx(es,{className:"w-4 h-4 text-slate-600"});default:return n.jsx(xx,{className:"w-4 h-4 text-slate-400"})}},d=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return"bg-indigo-50";if(f?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(u){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}};return n.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Tb,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[a&&n.jsx("button",{onClick:a,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:n.jsx(sd,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),n.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?n.jsx("div",{className:"divide-y divide-slate-50",children:e.map(u=>n.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${u.read?"":"bg-indigo-50/10"}`,onClick:()=>{if(t(u.id),u.link)if(u.link.startsWith("/?tab=")&&l){const p=new URL(u.link,window.location.origin).searchParams.get("tab");p?(l(p),localStorage.setItem("activeTab",p),window.history.replaceState(null,"",u.link),i()):window.location.href=u.link}else u.link.startsWith("/"),window.location.href=u.link},children:[n.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${d(u.type,u.title)}`,children:c(u.type,u.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-2",children:[n.jsx("p",{className:`text-sm font-semibold truncate ${u.read?"text-slate-600":"text-slate-900"}`,children:u.title}),n.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:u.timestamp})]}),n.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${u.read?"text-slate-400":"text-slate-500"}`,children:u.message})]}),!u.read&&n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},u.id))}):n.jsxs("div",{className:"p-12 text-center text-slate-400",children:[n.jsx(Fu,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),n.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),n.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:n.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Hv=20,qbe=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=kn(),[s,i]=D.useState([]),[o,l]=D.useState(!0),[c,d]=D.useState(!1),[u,f]=D.useState(1),[p,m]=D.useState(1),[b,v]=D.useState(0),[g,y]=D.useState(!1),w=D.useCallback(async(q=!1)=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;q?d(!0):l(!0);const Q=await K7(H.id,500),J=Q?.data||Q||[],re=(Array.isArray(J)?J:[]).map(X=>{let ee="Just now";if(X.createdAt){const W=new Date(X.createdAt),z=new Date().getTime()-W.getTime(),V=Math.floor(z/6e4),U=Math.floor(z/36e5),K=Math.floor(z/864e5);V<1?ee="Just now":V<60?ee=`${V}m ago`:U<24?ee=`${U}h ago`:K<7?ee=`${K}d ago`:ee=W.toLocaleDateString()}return{id:X.id,userId:X.userId,type:X.type||"system",title:X.title,message:X.message,timestamp:ee,read:!!X.read,link:X.link||void 0}});i(re),v(re.length),m(Math.ceil(re.length/Hv))}catch(H){console.error("[NOTIFICATIONS] Failed to load notifications",H),a(H.message||"Failed to load notifications")}finally{l(!1),d(!1)}},[e,a]);D.useEffect(()=>{w(!1)},[w]),D.useEffect(()=>{f(1)},[g]),D.useEffect(()=>{const q=()=>{w(!0)};return window.addEventListener("refresh-notifications",q),()=>{window.removeEventListener("refresh-notifications",q)}},[w]);const j=async q=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;await X7(q,H.id),i(Q=>Q.map(J=>J.id===q?{...J,read:!0}:J)),window.dispatchEvent(new Event("refresh-notifications"))}catch(H){console.error("[NOTIFICATIONS] Failed to mark as read",H),a(H.message||"Failed to mark notification as read")}},N=async()=>{try{const q=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!q?.id)return;await Y7(q.id),i(H=>H.map(Q=>({...Q,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(q){console.error("[NOTIFICATIONS] Failed to mark all as read",q),a(q.message||"Failed to mark all notifications as read")}},S=(q,H)=>{if(q==="note-marked"||H?.toLowerCase().includes("marked"))return n.jsx(id,{className:"w-5 h-5 text-indigo-500"});if(H?.toLowerCase().includes("pipeline"))return n.jsx(Yd,{className:"w-5 h-5 text-purple-500"});switch(q){case"lead":return n.jsx(id,{className:"w-5 h-5 text-blue-500"});case"deal":return n.jsx(lo,{className:"w-5 h-5 text-indigo-500"});case"task":return n.jsx(_i,{className:"w-5 h-5 text-emerald-500"});case"payment":return n.jsx(y0,{className:"w-5 h-5 text-red-500"});case"email-routing":return n.jsx(Xl,{className:"w-5 h-5 text-amber-500"});case"email-assigned":return n.jsx(es,{className:"w-5 h-5 text-blue-500"});case"email-mention":return n.jsx(bh,{className:"w-5 h-5 text-violet-500"});case"new-email":return n.jsx(es,{className:"w-5 h-5 text-slate-600"});default:return n.jsx(xx,{className:"w-5 h-5 text-slate-400"})}},A=(q,H)=>{if(q==="note-marked"||H?.toLowerCase().includes("marked"))return"bg-indigo-50";if(H?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(q){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}},_=q=>{if(j(q.id),q.link)if(q.link.startsWith("/?tab=")){const Q=new URL(q.link,window.location.origin).searchParams.get("tab");Q&&t?t(Q):window.location.href=q.link}else q.link.startsWith("/"),window.location.href=q.link},P=g?s.filter(q=>q.type==="note-marked"||q.title?.toLowerCase().includes("marked")):s,I=(u-1)*Hv,B=I+Hv,T=P.slice(I,B),E=P.filter(q=>!q.read).length,F=Math.ceil(P.length/Hv);return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(Tb,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:E>0?`${E} unread notification${E!==1?"s":""}`:"All caught up!"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>y(!g),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[n.jsx(id,{className:"w-4 h-4"}),g?"Show All":"Marked Notes"]}),n.jsxs("button",{onClick:()=>w(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[n.jsx(sd,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),E>0&&n.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(sd,{className:"w-8 h-8 animate-spin text-indigo-600"})}):P.length===0?n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[n.jsx(Fu,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:g?"No marked notes":"All caught up!"}),n.jsx("p",{className:"text-sm text-slate-500",children:g?"No notes have been marked for you yet.":"No notifications at this time."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:T.map(q=>n.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${q.read?"":"bg-indigo-50/30"}`,onClick:()=>_(q),children:[n.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${A(q.type,q.title)}`,children:S(q.type,q.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[n.jsx("p",{className:`text-sm font-semibold ${q.read?"text-slate-600":"text-slate-900 font-bold"}`,children:q.title}),n.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 font-medium",children:q.timestamp}),!q.read&&n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),n.jsx("p",{className:`text-sm ${q.read?"text-slate-400":"text-slate-600"}`,children:q.message})]})]},q.id))})}),F>1&&n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",n.jsx("span",{className:"font-semibold",children:I+1})," to"," ",n.jsx("span",{className:"font-semibold",children:Math.min(B,P.length)})," of"," ",n.jsx("span",{className:"font-semibold",children:P.length})," notifications"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>f(q=>Math.max(1,q-1)),disabled:u===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(qj,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:F},(q,H)=>H+1).map(q=>q===1||q===p||q>=u-1&&q<=u+1?n.jsx("button",{onClick:()=>f(q),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${u===q?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:q},q):q===u-2||q===u+2?n.jsx("span",{className:"px-2 text-slate-400",children:"..."},q):null)}),n.jsx("button",{onClick:()=>f(q=>Math.min(F,q+1)),disabled:u===F,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(va,{className:"w-5 h-5"})})]})]})]})]})},a0=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const a=r[1].toLowerCase().trim();return a.includes(".")?a:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const a=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return a.includes(".")?a:null}catch{const a=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return a&&a.includes(".")?a:null}},$be=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(r===a)return 1;const s=r.length,i=a.length;if(s===0||i===0)return 0;const o=[];for(let d=0;d<=s;d++)o[d]=[d];for(let d=0;d<=i;d++)o[0][d]=d;for(let d=1;d<=s;d++)for(let u=1;u<=i;u++){const f=r[d-1]===a[u-1]?0:1;o[d][u]=Math.min(o[d-1][u]+1,o[d][u-1]+1,o[d-1][u-1]+f)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},zbe=(e,t)=>{const r=[];if(!e.email)return r;const a=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===a&&r.push({record:s,matchType:"exact",confidence:1})}),r},Hbe=(e,t,r=.8)=>{const a=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=$be(e.name||"",s.name||"");i>=r&&a.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),a},Wbe=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],Vbe=({type:e,stage:t,lockedType:r,onClose:a,onSuccess:s})=>{const[i,o]=D.useState(e),[l,c]=D.useState("form"),[d,u]=D.useState(!1),[f,p]=D.useState(null),[m,b]=D.useState({}),[v,g]=D.useState([]),[y,w]=D.useState([]),[j,N]=D.useState([]),[S,A]=D.useState([]),[_,P]=D.useState([]),[I,B]=D.useState(!1),[T,E]=D.useState(!1),[F,q]=D.useState(""),H=D.useRef(null),[Q,J]=D.useState(null),[re,X]=D.useState(!1),[ee,W]=D.useState(""),[O,z]=D.useState(null),V=D.useRef(null),[U,K]=D.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:ki,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});D.useEffect(()=>{const le={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(le.lineItems=[{description:"",quantity:1,rate:0,amount:0}],le.currency=ki):(le.lineItems=[],e!=="deal"&&(le.currency=ki)),K(te=>({...te,...le})),p(null),b({}),c("form"),B(!1),W(""),z(null),V.current&&(V.current.value="")},[e,t]),D.useEffect(()=>{(async()=>{try{const Te=JSON.parse(localStorage.getItem("user_data")||"{}")?.id,[we,Ie,he,de]=await Promise.all([_c(),hd(),Sh(),I0(Te)]);N(we.data||[]),g(Ie.data||[]),w(he.data||[]);const Ce=Array.isArray(de)?de:de?.data||[];if(A(Ce.filter(Ve=>!Ve.archived)),i==="task")try{const Ve=await ob(),ge=Array.isArray(Ve?.data)?Ve.data:[];P(ge)}catch{P([])}else P([]);Te&&K(Ve=>({...Ve,ownerId:Ve.ownerId||Te,assigneeId:Ve.assigneeId||Te}))}catch(te){console.error("[QUICK-CREATE] Data fetch failed:",te)}})()},[i]),D.useEffect(()=>{const le=te=>{H.current&&!H.current.contains(te.target)&&(E(!1),q(""))};if(T)return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[T]);const se=Wbe.filter(le=>le.toLowerCase().includes(F.toLowerCase())),xe=(le,te=1200,Te=1200,we=.8)=>new Promise((Ie,he)=>{const de=new FileReader;de.onload=Ce=>{const Ve=new Image;Ve.onload=()=>{let ge=Ve.width,fe=Ve.height;ge>fe?ge>te&&(fe=fe*te/ge,ge=te):fe>Te&&(ge=ge*Te/fe,fe=Te);const _e=document.createElement("canvas");_e.width=ge,_e.height=fe;const Ue=_e.getContext("2d");Ue?(Ue.drawImage(Ve,0,0,ge,fe),Ie(_e.toDataURL("image/jpeg",we))):he(new Error("Canvas context not available"))},Ve.onerror=()=>he(new Error("Failed to load image")),Ve.src=Ce.target?.result},de.onerror=()=>he(new Error("Failed to read file")),de.readAsDataURL(le)}),ie=async le=>{const te=le.target.files?.[0];if(te){if(!te.type.startsWith("image/")){p("Please select an image file");return}if(te.size>10*1024*1024){p("Image size must be less than 10MB");return}try{const Te=await xe(te,1200,1200,.8);W(Te),z(te),p(null)}catch(Te){p(Te.message||"Failed to process image")}}},ue=()=>{W(""),z(null),V.current&&(V.current.value=""),a()},Be=()=>{const le={};if(i==="contact")U.name?.trim()||(le.name="Full Name is required"),U.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U.email)||(le.email="Please enter a valid email address"):le.email="Email Address is required";else if(i==="company"){U.name?.trim()||(le.name="Company Name is required"),(!U.region||U.region.trim()==="")&&(le.region="Region is required"),U.ownerId?.trim()||(le.ownerId="Assignee / Lead is required");let te=U.domain;!te&&U.website&&(te=a0(U.website)||""),!te&&U.email&&(te=a0(U.email)||""),(!te||te.trim()==="")&&(le.domain="Domain is required (can be auto-populated from website or email)",le.website="Add website or email to auto-populate domain")}else if(i==="deal")U.title?.trim()||(le.title="Deal Name is required"),U.companyId?.trim()||(le.companyId="Organization is required"),(!U.value||parseFloat(U.value)<=0)&&(le.value="Amount is required and must be greater than $0"),U.stage?.trim()||(le.stage="Stage is required"),U.ownerId||(le.ownerId="Assignee / Lead is required");else if(i==="project"){if(U.title?.trim()||(le.title="Project Name is required"),U.engagement?.trim()||(le.engagement="Engagement is required"),U.startDate?.trim()||(le.startDate="Start Date is required"),U.endDate?.trim()||(le.endDate="End Date is required"),U.startDate&&U.endDate){const te=new Date(U.startDate),Te=new Date(U.endDate);!isNaN(te.getTime())&&!isNaN(Te.getTime())&&te>=Te&&(le.endDate="End Date must be after Start Date")}U.ownerId||(le.ownerId="Assignee / Lead is required")}else i==="task"?(U.title?.trim()||(le.title="Task Title is required"),U.assigneeId||(le.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(U.companyId||(le.companyId="Client (Organization) is required"),(!U.expectedCloseDate||U.expectedCloseDate.trim()==="")&&(le.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!U.lineItems||U.lineItems.length===0?le.lineItems="At least one line item is required":(U.lineItems.forEach((Te,we)=>{(!Te.description||!Te.description.trim())&&(le[`lineItem_${we}_description`]=`Line item ${we+1}: Description is required`),(!Te.quantity||Te.quantity<=0)&&(le[`lineItem_${we}_quantity`]=`Line item ${we+1}: Quantity must be greater than 0`),(!Te.rate||Te.rate<=0)&&(le[`lineItem_${we}_rate`]=`Line item ${we+1}: Rate must be greater than 0`)}),U.lineItems.reduce((Te,we)=>{const Ie=we.amount||we.rate*we.quantity||0;return Te+Ie},0)<=0&&(le.lineItems="Total amount must be greater than $0")));return b(le),Object.keys(le).length===0},me=async le=>{if(le.preventDefault(),d)return;if(p(null),!Be()){u(!1);return}u(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,U);try{const we=JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(i==="contact"){const Ie={name:U.name,email:U.email},he=zbe(Ie,y),de=Hbe(Ie,y,.8);if(he.length>0||de.length>0){const Ce=new Map,Ve=new Set;he.forEach(fe=>{const _e=fe.record,Ue=_e.id||_e.email?.toLowerCase().trim()||"";Ue&&!Ce.has(Ue)&&(Ce.set(Ue,{..._e,matchType:"exact",matchReason:"email"}),_e.email&&Ve.add(_e.email.toLowerCase().trim()))}),de.forEach(fe=>{const _e=fe.record,Ue=_e.id||_e.email?.toLowerCase().trim()||"",ke=_e.email?.toLowerCase().trim();Ue&&!Ce.has(Ue)&&(!ke||!Ve.has(ke))&&(Ce.set(Ue,{..._e,matchType:"fuzzy",matchReason:"name",similarity:fe.similarity}),ke&&Ve.add(ke))});const ge=Array.from(Ce.values());J({open:!0,duplicates:ge,newContact:{name:U.name,email:U.email,companyId:U.companyId||void 0,role:U.role,phone:U.phone,linkedin:U.linkedin||void 0}}),u(!1);return}await sI({name:U.name,companyId:U.companyId||void 0,role:U.role,email:U.email,phone:U.phone,linkedin:U.linkedin||void 0})}else if(i==="company"){let Ie=U.domain;!Ie&&U.website&&(Ie=a0(U.website)||void 0),!Ie&&U.email&&(Ie=a0(U.email)||void 0);const he={name:U.name?.trim(),industry:U.industry?.trim(),region:U.region?.trim()||"",website:U.website?.trim()||void 0,email:U.email?.trim()||void 0,domain:Ie||"",linkedin:U.linkedin?.trim()||void 0,ownerId:U.ownerId||we};if(!he.region){b({region:"Region is required"}),u(!1);return}if(!he.domain){b({domain:"Domain is required (can be auto-populated from website or email)"}),u(!1);return}await Pne(he)}else if(i==="deal"){if(!U.companyId||U.companyId.trim()===""){b({companyId:"Organization is required"}),u(!1);return}if(!U.value||parseFloat(U.value)<=0){b({value:"Amount is required and must be greater than $0"}),u(!1);return}if(!U.stage||U.stage.trim()===""){b({stage:"Stage is required"}),u(!1);return}await Ine({title:U.title,companyId:U.companyId.trim(),value:parseFloat(U.value),currency:U.currency||ki,stage:U.stage,pipelineType:"sales",ownerId:U.ownerId,expectedCloseDate:U.expectedCloseDate||void 0,description:U.description||void 0})}else if(i==="project"){const Ie={};if(U.title?.trim()||(Ie.title="Project Name is required"),U.engagement?.trim()||(Ie.engagement="Engagement is required"),U.startDate?.trim()||(Ie.startDate="Start Date is required"),U.endDate?.trim()||(Ie.endDate="End Date is required"),U.ownerId?.trim()||(Ie.ownerId="Assignee / Lead is required"),U.startDate&&U.endDate){const de=new Date(U.startDate),Ce=new Date(U.endDate);!isNaN(de.getTime())&&!isNaN(Ce.getTime())&&de>=Ce&&(Ie.endDate="End Date must be after Start Date")}if(Object.keys(Ie).length>0){b(Ie),u(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:U.title,engagement:U.engagement,startDate:U.startDate,endDate:U.endDate,ownerId:U.ownerId});const he={title:U.title.trim(),engagement:U.engagement.trim(),startDate:U.startDate,endDate:U.endDate,companyId:U.companyId&&U.companyId.trim()!==""?U.companyId:void 0,status:U.status,ownerId:U.ownerId,projectManager:U.ownerId,progress:0,description:U.description||void 0};ee&&O&&(he.noteImage=ee,he.noteImageName=O.name,he.noteImageMimeType=O.type),console.debug("[QUICK-CREATE] Project payload:",he),await Lne(he)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:U.title,assigneeId:U.assigneeId});const Ie={title:U.title,projectId:U.projectId||void 0,description:U.description||void 0,dueDate:U.expectedCloseDate||void 0,priority:U.priority,status:"Todo",assigneeId:U.assigneeId,category:U.category&&U.category.trim()?U.category.trim():void 0};if(ee||U.description){const he=JSON.parse(localStorage.getItem("user_data")||"{}"),de={id:`note_${Date.now()}`,userId:we||he.id,userName:he.name||"Unknown User",text:U.description||"",createdAt:new Date().toISOString()};ee&&O&&(de.imageUrl=ee,de.imageName=O.name,de.imageMimeType=O.type),Ie.notes=[de]}await W7(Ie),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const Ie={};if(U.companyId?.trim()||(Ie.companyId="Client (Organization) is required"),U.expectedCloseDate?.trim()||(Ie.expectedCloseDate="Due Date is required"),(!U.lineItems||U.lineItems.length===0)&&(Ie.lineItems="At least one line item is required"),U.lineItems&&U.lineItems.length>0&&U.lineItems.forEach((Ce,Ve)=>{(!Ce.description||!Ce.description.trim())&&(Ie[`lineItem_${Ve}_description`]=`Line item ${Ve+1}: Description is required`),(!Ce.quantity||Ce.quantity<=0)&&(Ie[`lineItem_${Ve}_quantity`]=`Line item ${Ve+1}: Quantity must be greater than 0`),(!Ce.rate||Ce.rate<=0)&&(Ie[`lineItem_${Ve}_rate`]=`Line item ${Ve+1}: Rate must be greater than 0`)}),Object.keys(Ie).length>0){b(Ie),u(!1);return}const he=U.lineItems.map(Ce=>({description:Ce.description.trim(),quantity:Ce.quantity,rate:Ce.rate,amount:Ce.amount||Ce.rate*Ce.quantity})),de=he.reduce((Ce,Ve)=>Ce+(Ve.amount||0),0);if(de<=0){b({lineItems:"At least one line item with a valid amount is required"}),u(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:U.companyId,amount:de,dueDate:U.expectedCloseDate,lineItemsCount:he.length,lineItems:he,name:U.name,description:U.description}),await Mne({companyId:U.companyId,amount:de,currency:U.currency||ki,dueDate:U.expectedCloseDate,description:U.name||U.description||"",lineItems:he,items:he,status:"Draft",userId:we||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),W(""),z(null),V.current&&(V.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{a()},1500)}catch(Te){if(console.error("[QUICK-CREATE] Deployment failed:",Te),console.error("[QUICK-CREATE] Error details:",{message:Te.message,code:Te.code,status:Te.status,details:Te.details,type:i}),Te.code==="DUPLICATE_DETECTED"&&Te.duplicates&&i==="contact"){const we=new Map;Te.duplicates.forEach(he=>{if(he.id)if(!we.has(he.id))we.set(he.id,he);else{const de=we.get(he.id);he.matchType==="exact"&&de.matchType!=="exact"&&we.set(he.id,he)}});const Ie=Array.from(we.values());J({open:!0,duplicates:Ie,newContact:{name:U.name,email:U.email,companyId:U.companyId||void 0,role:U.role,phone:U.phone,linkedin:U.linkedin||void 0}}),u(!1);return}if(Te.code==="VALIDATION_ERROR"||Te.details&&Te.details.errors){const we={};(Te.details?.errors||(Te.message?[Te.message]:[])).forEach(he=>{const de=he.toLowerCase();if(de.includes("name")||de.includes("title"))we.title=he;else if(de.includes("industry"))we.industry=he;else if(de.includes("region"))we.region=he;else if(de.includes("domain"))we.domain=he;else if(de.includes("email"))we.email=he;else if(de.includes("engagement"))we.engagement=he;else if(de.includes("start date")||de.includes("startdate"))we.startDate=he;else if(de.includes("end date")||de.includes("enddate"))we.endDate=he;else if(de.includes("project manager")||de.includes("manager"))we.ownerId=he;else if(de.includes("assignee")||de.includes("lead")||de.includes("owner"))we.ownerId=he;else if(de.includes("client")||de.includes("company"))we.companyId=he;else if(de.includes("due date")||de.includes("duedate"))we.expectedCloseDate=he;else if(de.includes("line item")){const Ce=de.match(/line item (\d+):\s*(.+)/);if(Ce){const Ve=parseInt(Ce[1])-1,ge=Ce[2];ge.includes("description")?we[`lineItem_${Ve}_description`]=he:ge.includes("quantity")?we[`lineItem_${Ve}_quantity`]=he:(ge.includes("rate")||ge.includes("amount"))&&(we[`lineItem_${Ve}_rate`]=he)}else we.lineItems=he}else de.includes("amount")&&!de.includes("line item")&&(we.lineItems=he)}),Object.keys(we).length>0?(b(we),p("Please correct the validation errors below")):p(Te.message||"Validation failed. Please check all required fields.")}else p(Te.message||"Operational error. Verify mandatory fields and team authorization.");u(!1)}},$e=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Oe=()=>n.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?n.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[n.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:n.jsx(gn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):n.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&n.jsx(cl,{className:"w-6 h-6"}),i==="project"&&n.jsx(Xd,{className:"w-6 h-6"}),i==="task"&&n.jsx(_i,{className:"w-6 h-6"}),i==="invoice"&&n.jsx(ea,{className:"w-6 h-6"}),i==="contact"&&n.jsx(co,{className:"w-6 h-6"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:$e()}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"WORKSPACE UPDATE"})]})]}),n.jsx("button",{onClick:ue,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(Xt,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:me,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&n.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(le=>n.jsx("button",{type:"button",onClick:()=>o(le),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===le?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:le},le))}),f&&Object.keys(m).length===0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx(Bn,{className:"w-5 h-5 shrink-0"}),n.jsx("span",{children:f})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",n.jsx(Oe,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?U.title:U.name,onChange:le=>{const te=i==="deal"||i==="project"||i==="task"?"title":"name";K(Te=>({...Te,[te]:le.target.value})),m[te]&&b(Te=>{const we={...Te};return delete we[te],we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.title||m.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(m.title||m.name)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.title||m.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&n.jsx(Oe,{})]}),n.jsxs("select",{required:i==="deal"||i==="invoice",value:U.companyId,onChange:le=>{K(te=>({...te,companyId:le.target.value})),m.companyId&&b(te=>{const Te={...te};return delete Te.companyId,Te})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${m.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${m.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),v.map(le=>n.jsx("option",{value:le.id,children:le.name},le.id))]}),m.companyId&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.companyId]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",n.jsx(Oe,{})]}),n.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:U.email,onChange:le=>{K(te=>({...te,email:le.target.value})),m.email&&b(te=>{const Te={...te};return delete Te.email,Te})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.email]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),n.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:U.role,onChange:le=>K(te=>({...te,role:le.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),n.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:U.phone,onChange:le=>K(te=>({...te,phone:le.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),n.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:U.industry,onChange:le=>{K(te=>({...te,industry:le.target.value})),m.industry&&b(te=>{const Te={...te};return delete Te.industry,Te})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.industry&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.industry]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2 relative",ref:H,children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>{E(!T),T||q("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${m.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${U.region?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:U.region||"Select Region"}),n.jsx(Vs,{className:`w-4 h-4 text-slate-400 transition-transform ${T?"rotate-180":""}`})]}),T&&n.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-3 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search regions...",value:F,onChange:le=>q(le.target.value),onClick:le=>le.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:se.length>0?se.map(le=>n.jsx("button",{type:"button",onClick:()=>{const te=le.trim();K(Te=>({...Te,region:te})),E(!1),q(""),b(Te=>{const we={...Te};return delete we.region,we}),p(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${U.region===le?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:le},le)):n.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),m.region&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.region]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),n.jsx("input",{type:"url",placeholder:"https://www.example.com",value:U.website,onChange:le=>{const te=le.target.value;K(Te=>{const we={...Te,website:te},Ie=te?a0(te):null,he=Te.email?a0(Te.email):null;return we.domain=Ie||he||"",we}),(m.domain||m.website)&&b(Te=>{const we={...Te};return delete we.domain,delete we.website,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.website&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.website]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),n.jsx("input",{type:"email",placeholder:"contact@company.com",value:U.email,onChange:le=>{const te=le.target.value;K(Te=>{const we={...Te,email:te},Ie=Te.website?a0(Te.website):null,he=te?a0(te):null;return we.domain=Ie||he||"",we}),(m.email||m.domain)&&b(Te=>{const we={...Te};return delete we.email,delete we.domain,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.email]})]}),i==="company"&&U.domain&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",n.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),n.jsx("input",{type:"text",value:U.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${m.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),m.domain&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.domain]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),n.jsxs("select",{value:U.projectId||"",onChange:le=>{const te=le.target.value;K(Te=>({...Te,projectId:te===""?"":te}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),S.map(le=>n.jsx("option",{value:le.id,children:le.title},le.id))]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[n.jsx(Fs,{className:"w-3.5 h-3.5"})," Task Category"]}),n.jsxs("select",{value:I?"__new__":U.category||"",onChange:le=>{const te=le.target.value;te==="__new__"?(B(!0),K(Te=>({...Te,category:""}))):(B(!1),K(Te=>({...Te,category:te})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),_.map(le=>n.jsx("option",{value:le,children:le},le)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),I&&n.jsx("div",{className:"pt-1",children:n.jsx("input",{type:"text",value:U.category,onChange:le=>K(te=>({...te,category:le.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["ASSIGNEE / LEAD ",n.jsx(Oe,{})]}),n.jsxs("select",{required:!0,value:i==="task"?U.assigneeId:U.ownerId,onChange:le=>{const te=i==="task"?"assigneeId":"ownerId";K(Te=>({...Te,[te]:le.target.value})),m[te]&&b(Te=>{const we={...Te};return delete we[te],we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${m.ownerId||m.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[n.jsx("option",{value:"",children:"Select Resource Personnel"}),j.map(le=>n.jsx("option",{value:le.id,children:le.name},le.id))]}),(m.ownerId||m.assigneeId)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.ownerId||m.assigneeId]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"relative w-32",children:n.jsx("select",{value:U.currency||ki,onChange:le=>{K(te=>({...te,currency:le.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Zm.map(le=>n.jsxs("option",{value:le.code,children:[le.code," (",le.symbol,")"]},le.code))})}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:uf(U.currency)}),n.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:U.value,onChange:le=>{K(te=>({...te,value:le.target.value})),m.value&&b(te=>{const Te={...te};return delete Te.value,Te})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${m.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),m.value&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.value]})]}),i==="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),n.jsx("div",{className:"relative w-full",children:n.jsx("select",{value:U.currency||ki,onChange:le=>{K(te=>({...te,currency:le.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Zm.map(le=>n.jsxs("option",{value:le.code,children:[le.code," (",le.symbol,")"]},le.code))})})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"space-y-3",children:[U.lineItems.map((le,te)=>n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",te+1]}),U.lineItems.length>1&&n.jsx("button",{type:"button",onClick:()=>{const Te=U.lineItems.filter((we,Ie)=>Ie!==te);K(we=>({...we,lineItems:Te})),b(we=>{const Ie={...we};return delete Ie[`lineItem_${te}_description`],delete Ie[`lineItem_${te}_quantity`],delete Ie[`lineItem_${te}_rate`],Ie})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Item description",value:le.description,onChange:Te=>{const we=[...U.lineItems];we[te]={...we[te],description:Te.target.value},K(Ie=>({...Ie,lineItems:we})),m[`lineItem_${te}_description`]&&b(Ie=>{const he={...Ie};return delete he[`lineItem_${te}_description`],he})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${te}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${te}_description`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${te}_description`]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:le.quantity||"",onChange:Te=>{const we=parseFloat(Te.target.value)||0,Ie=le.rate||0,he=[...U.lineItems];he[te]={...he[te],quantity:we,amount:we*Ie},K(de=>({...de,lineItems:he})),m[`lineItem_${te}_quantity`]&&b(de=>{const Ce={...de};return delete Ce[`lineItem_${te}_quantity`],Ce})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${te}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${te}_quantity`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${te}_quantity`]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",uf(U.currency),") ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:le.rate||"",onChange:Te=>{const we=parseFloat(Te.target.value)||0,Ie=le.quantity||0,he=[...U.lineItems];he[te]={...he[te],rate:we,amount:Ie*we},K(de=>({...de,lineItems:he})),m[`lineItem_${te}_rate`]&&b(de=>{const Ce={...de};return delete Ce[`lineItem_${te}_rate`],Ce})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${te}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${te}_rate`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${te}_rate`]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),n.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[uf(U.currency),((le.quantity||0)*(le.rate||0)).toFixed(2)]})})]})]},te)),n.jsxs("button",{type:"button",onClick:()=>{K(le=>({...le,lineItems:[...le.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),m.lineItems&&b(le=>{const te={...le};return delete te.lineItems,te})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Line Item"]}),m.lineItems&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.lineItems]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",uf(U.currency),")"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Mu,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[uf(U.currency),U.lineItems.reduce((le,te)=>{const Te=te.amount||te.rate*te.quantity||0;return le+Te},0).toFixed(2)]})]})]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",n.jsx(Oe,{})]}),n.jsxs("select",{required:!0,value:U.stage,onChange:le=>{K(te=>({...te,stage:le.target.value})),m.stage&&b(te=>{const Te={...te};return delete Te.stage,Te})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${m.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${m.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:"Select Stage"}),n.jsx("option",{value:"Discovery",children:"Discovery"}),n.jsx("option",{value:"Proposal",children:"Proposal"}),n.jsx("option",{value:"Negotiation",children:"Negotiation"}),n.jsx("option",{value:"Won",children:"Won"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),m.stage&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.stage]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",n.jsx(Oe,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:U.engagement,onChange:le=>{K(te=>({...te,engagement:le.target.value})),m.engagement&&b(te=>{const Te={...te};return delete Te.engagement,Te})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.engagement&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.engagement]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(ta,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:U.startDate,onChange:le=>{if(K(te=>({...te,startDate:le.target.value})),m.startDate&&b(te=>{const Te={...te};return delete Te.startDate,Te}),le.target.value&&U.endDate){const te=new Date(le.target.value),Te=new Date(U.endDate);!isNaN(te.getTime())&&!isNaN(Te.getTime())&&te>=Te?b(we=>({...we,endDate:"End Date must be after Start Date"})):m.endDate==="End Date must be after Start Date"&&b(we=>{const Ie={...we};return delete Ie.endDate,Ie})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.startDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.startDate]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(ta,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:U.endDate,onChange:le=>{if(K(te=>({...te,endDate:le.target.value})),m.endDate&&b(te=>{const Te={...te};return delete Te.endDate,Te}),U.startDate&&le.target.value){const te=new Date(U.startDate),Te=new Date(le.target.value);!isNaN(te.getTime())&&!isNaN(Te.getTime())&&te>=Te&&b(we=>({...we,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.endDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.endDate]})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(ta,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:U.expectedCloseDate,onChange:le=>{K(te=>({...te,expectedCloseDate:le.target.value})),m.expectedCloseDate&&b(te=>{const Te={...te};return delete Te.expectedCloseDate,Te})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.expectedCloseDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Bn,{className:"w-3 h-3"}),m.expectedCloseDate]})]}),i!=="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"DUE DATE"}),n.jsxs("div",{className:"relative",children:[n.jsx(ta,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),n.jsx("input",{type:"date",value:U.expectedCloseDate,onChange:le=>K(te=>({...te,expectedCloseDate:le.target.value})),placeholder:"dd/mm/yyyy",className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 font-bold placeholder:text-slate-300 [color-scheme:light]"})]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"PRIORITY"}),n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(le=>n.jsx("button",{type:"button",onClick:()=>K({...U,priority:le}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${U.priority===le?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:le.toUpperCase()},le))})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"DESCRIPTION"}),i==="task"?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(e_,{value:U.description||"",onChange:le=>K(te=>({...te,description:le})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsx("textarea",{placeholder:"Add Context or Notes...",value:U.description,onChange:le=>K(te=>({...te,description:le.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),n.jsxs("label",{className:"cursor-pointer group block mt-4",children:[n.jsxs("div",{className:"flex items-center gap-4 px-5 py-5 bg-slate-50/80 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all shrink-0",children:ee?n.jsx(Sl,{className:"w-6 h-6"}):n.jsx(kc,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:ee?O?.name||"Image attached":"Attach Image to Note"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),n.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:ie,className:"hidden"})]}),ee&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ee,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),n.jsx("button",{type:"button",onClick:()=>{W(""),z(null),V.current&&(V.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Xt,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:ue,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),n.jsxs("button",{type:"submit",disabled:d,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[d?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):n.jsx(Si,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Q&&Q.open&&n.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!re&&J(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Q.duplicates.some(le=>le.matchType==="exact"||le.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),n.jsx("button",{onClick:()=>!re&&J(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:re,children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),n.jsx("p",{className:"font-semibold text-slate-900",children:Q.newContact.name||""}),Q.newContact.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Q.newContact.email}),Q.newContact.phone&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Q.newContact.phone]}),Q.newContact.role&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Q.newContact.role]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Q.duplicates.length>1?"s":""]}),n.jsx("div",{className:"space-y-3",children:Q.duplicates.map((le,te)=>n.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:le.name||""}),le.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:le.email}),n.jsxs("div",{className:"mt-2 space-y-1",children:[le.role?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",le.role]}):Q.newContact.role&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Q.newContact.role," (will be added)"]}),le.phone?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",le.phone]}):Q.newContact.phone&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Q.newContact.phone," (will be added)"]}),!le.companyId&&Q.newContact.companyId&&n.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),le.matchType==="fuzzy"&&le.similarity&&n.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(le.similarity*100),"% name similarity"]}),le.matchType==="exact"&&n.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{const Te={};Q.newContact.name&&(!le.name||le.name.trim()===""||Q.newContact.name.trim()!==le.name.trim())&&(Te.name=Q.newContact.name),Q.newContact.email&&(!le.email||le.email.trim()==="")&&(Te.email=Q.newContact.email),Q.newContact.phone&&(!le.phone||le.phone.trim()==="")&&(Te.phone=Q.newContact.phone),Q.newContact.role&&(!le.role||le.role.trim()==="")&&(Te.role=Q.newContact.role),Q.newContact.companyId&&(!le.companyId||le.companyId.trim()==="")&&(Te.companyId=Q.newContact.companyId),Q.newContact.linkedin&&(!le.linkedin||le.linkedin.trim()==="")&&(Te.linkedin=Q.newContact.linkedin),Object.keys(Te).length>0&&await q7(le.id,Te),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(Te){console.error("[MERGE] Failed:",Te),p(Te.message||"Merge failed"),X(!1)}}},disabled:re,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[re?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Kv,{className:"w-4 h-4"}),"Merge"]})]})},le.id||te))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>J(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:re,children:"Cancel"}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{await sI(Q.newContact),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(le){console.error("[CREATE] Failed:",le),p(le.message||"Failed to create contact"),X(!1),J(null)}}},disabled:re,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[re?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):n.jsx(nn,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},Gbe=({event:e,selectedDate:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=kn(),[o,l]=D.useState(!1),[c,d]=D.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});D.useEffect(()=>{if(e)d({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const f=new Date(t);f.setHours(9,0,0,0);const p=new Date(t);p.setHours(10,0,0,0),d(m=>({...m,start:f.toISOString().substring(0,16),end:p.toISOString().substring(0,16)}))}},[e,t]);const u=async f=>{f.preventDefault(),l(!0);try{e?(await Jse(e.id,c),s("Event updated successfully")):(await Qse({...c,source:"local"}),s("Event created successfully")),a(),r()}catch(p){i(p.message||"Failed to save event")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(ta,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:f=>d({...c,title:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(ms,{className:"w-3 h-3"})," Start"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:f=>d({...c,start:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(ms,{className:"w-3 h-3"})," End"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:f=>d({...c,end:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Fs,{className:"w-3 h-3"})," Event Type"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(f=>n.jsx("button",{type:"button",onClick:()=>d({...c,type:f}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===f?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:f},f))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(JB,{className:"w-3 h-3"})," Description"]}),n.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:f=>d({...c,description:f.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Fu,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},Kbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=kn(),[a,s]=D.useState(!1),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[d,u]=D.useState(!1);D.useEffect(()=>{const H=setTimeout(()=>u(!0),500);return()=>clearTimeout(H)},[]);const[f,p]=D.useState({type:"bug",title:"",description:""}),[m,b]=D.useState([]),[v,g]=D.useState(!1),[y,w]=D.useState("upload"),[j,N]=D.useState(""),[S,A]=D.useState(!1),_=D.useRef(null),P=D.useRef(m);D.useEffect(()=>{P.current=m},[m]),D.useEffect(()=>()=>{P.current.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)})},[]);const I=(H,Q=1920,J=1080,re=.8)=>new Promise((X,ee)=>{const W=new FileReader;W.onload=O=>{const z=new Image;z.onload=()=>{let V=z.width,U=z.height;V>U?V>Q&&(U=U*Q/V,V=Q):U>J&&(V=V*J/U,U=J);const K=document.createElement("canvas");K.width=V,K.height=U;const se=K.getContext("2d");if(!se){ee(new Error("Failed to create canvas context"));return}se.drawImage(z,0,0,V,U);const xe=K.toDataURL("image/jpeg",re);X(xe)},z.onerror=()=>ee(new Error("Failed to load image")),z.src=O.target?.result},W.onerror=()=>ee(new Error("Failed to read file")),W.readAsDataURL(H)}),B=async H=>{const Q=H.target.files;if(!(!Q||Q.length===0)){g(!0);try{const J=[];for(let re=0;re<Q.length;re++){const X=Q[re];if(!X.type.startsWith("image/")&&!X.type.startsWith("video/")){r("Please select only image or video files");continue}if(X.size>10*1024*1024){r(`File "${X.name}" is too large. Maximum size is 10MB`);continue}const ee=X.type.startsWith("image/");let W="";ee?W=await I(X,1920,1080,.8):W=URL.createObjectURL(X),J.push({file:X,preview:W,type:ee?"image":"video",source:"file"})}b(re=>[...re,...J]),_.current&&(_.current.value="")}catch(J){r(J.message||"Failed to process file")}finally{g(!1)}}},T=H=>new Promise(Q=>{const J=new Image,re=document.createElement("video"),X=[".jpg",".jpeg",".png",".gif",".webp",".svg"],ee=[".mp4",".mov",".avi",".webm",".mkv"],W=H.toLowerCase(),O=X.some(V=>W.includes(V))||W.includes("image")||W.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),z=ee.some(V=>W.includes(V))||W.includes("video")||W.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!O&&!z?(J.onload=()=>Q(!0),J.onerror=()=>{re.onloadedmetadata=()=>Q(!0),re.onerror=()=>Q(!1),re.src=H},J.src=H):Q(!0)}),E=async()=>{if(!j.trim()){r("Please enter a valid URL");return}try{new URL(j.trim())}catch{r("Please enter a valid URL");return}A(!0);try{if(!await T(j.trim())){r("URL does not appear to be a valid image or video");return}const Q=j.toLowerCase(),J=Q.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Q.includes("image")||!Q.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Q.includes("video"),re={url:j.trim(),preview:j.trim(),type:J?"image":"video",source:"url"};b(X=>[...X,re]),N(""),t("URL added successfully")}catch(H){r(H.message||"Failed to validate URL")}finally{A(!1)}},F=H=>{const Q=m[H];Q.source==="file"&&Q.type==="video"&&Q.preview.startsWith("blob:")&&URL.revokeObjectURL(Q.preview),b(J=>J.filter((re,X)=>X!==H))},q=async H=>{if(H.preventDefault(),!(!f.title||!f.description)){o(!0);try{const Q=m.filter(W=>W.source==="url"),J=m.filter(W=>W.source==="file"),re=Q.length>0?Q[0].url:"",X=await Promise.all(J.map(async W=>W.type==="image"?{type:"image",data:W.preview,filename:W.file.name,mimeType:W.file.type,source:"file"}:new Promise((O,z)=>{const V=new FileReader;V.onload=()=>{O({type:"video",data:V.result,filename:W.file.name,mimeType:W.file.type,source:"file"})},V.onerror=z,V.readAsDataURL(W.file)}))),ee={...f,userId:e?.id||"anonymous",status:"planned",url:re||void 0,attachments:X.length>0?X:[]};await Q7(ee),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),p({type:"bug",title:"",description:""}),m.forEach(W=>{W.type==="video"&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)}),b([])},2e3)}catch(Q){console.error("[FEEDBACK] Submission failed:",Q),r(`Submission error: ${Q.message||"Registry error"}`)}finally{o(!1)}}};return n.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[n.jsx("button",{onClick:()=>s(!a),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${d?"transition-all duration-300":""} ${a?"translate-x-full":""}`,children:n.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),n.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${d?"transition-all duration-500 ease-out":""} ${a?"translate-x-0":"translate-x-full"}`,style:d?void 0:{transform:a?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?n.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:n.jsx(gn,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):n.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[n.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:n.jsx(lo,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),n.jsx("button",{onClick:()=>{s(!1),m.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)}),b([]),N("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:n.jsx(Xt,{className:"w-4 h-4"})})]}),n.jsxs("form",{onSubmit:q,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Wv,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:n.jsx(Ri,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:n.jsx(zj,{className:"w-3 h-3"}),label:"Idea"}].map(H=>n.jsxs("button",{type:"button",onClick:()=>p({...f,type:H.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${f.type===H.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[H.icon," ",H.label]},H.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:f.title,onChange:H=>p({...f,title:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),n.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:f.description,onChange:H=>p({...f,description:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),n.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[n.jsxs("button",{type:"button",onClick:()=>w("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${y==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(kc,{className:"w-3 h-3"}),"Upload"]}),n.jsxs("button",{type:"button",onClick:()=>w("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${y==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(l0,{className:"w-3 h-3"}),"URL"]})]}),y==="upload"&&n.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:v?n.jsx(pt,{className:"w-5 h-5 animate-spin"}):n.jsx(kc,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),n.jsx("input",{ref:_,type:"file",accept:"image/*,video/*",multiple:!0,onChange:B,disabled:v,className:"hidden"})]}),y==="url"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:j,onChange:H=>N(H.target.value),onKeyDown:H=>{H.key==="Enter"&&!S&&j.trim()&&(H.preventDefault(),E())},disabled:S,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),n.jsx("button",{type:"button",onClick:E,disabled:S||!j.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:S?n.jsxs(n.Fragment,{children:[n.jsx(pt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(l0,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),m.length>0&&n.jsx("div",{className:"space-y-2",children:m.map((H,Q)=>n.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:H.type==="image"?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:H.preview,alt:`Attachment ${Q+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:J=>{J.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Sl,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Image URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/1024).toFixed(1)} KB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>F(Q),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:n.jsx(fm,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(fm,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Video URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/(1024*1024)).toFixed(2)} MB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>F(Q),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})},Q))})]}),n.jsxs("button",{type:"submit",disabled:i||v||S,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?n.jsx(pt,{className:"w-4 h-4 animate-spin"}):n.jsx(Xl,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},Xbe=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(Gk,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(eU,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Enter your professional email address in the login portal"}),n.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),n.jsx("li",{children:"Enter the 6-digit code sent to your email"}),n.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Check your spam or junk folder"}),n.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),n.jsx("li",{children:'Click "Request New Code" on the verification screen'}),n.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),n.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),n.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),n.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),n.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(es,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's IT administrator"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),Ybe=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(Gk,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(xx,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),n.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsx("div",{children:n.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(ea,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),n.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),n.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),n.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),n.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(fU,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"To authenticate your access and maintain your account"}),n.jsx("li",{children:"To personalize your experience and provide relevant features"}),n.jsx("li",{children:"To provide customer support and respond to your inquiries"}),n.jsx("li",{children:"To improve our services, features, and user experience"}),n.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),n.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),n.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),n.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),n.jsx("li",{children:"Access controls and role-based permissions"}),n.jsx("li",{children:"Regular security audits and monitoring"}),n.jsx("li",{children:"Restricted access to authorized personnel only"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),n.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Authentication and session management"}),n.jsx("li",{children:"Remembering your preferences"}),n.jsx("li",{children:"Security and fraud prevention"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),n.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),n.jsx("li",{children:"When required by law or to protect our rights and safety"}),n.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),n.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),n.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),n.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),n.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),n.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(es,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),Qbe=new Pie({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),Jbe=({children:e})=>n.jsx(Iie,{client:Qbe,children:e}),Zbe=()=>{const[e,t]=D.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,a]=D.useState(!1),[s,i]=D.useState(null),[o,l]=D.useState(!1),[c,d]=D.useState(!1),[u,f]=D.useState(()=>{try{const $e=localStorage.getItem("navGroupsOpen");if($e){const Oe=JSON.parse($e);return{...Xv.reduce((le,te)=>({...le,[te.id]:!0}),{}),system:!0,...Oe}}}catch{}return{...Xv.reduce(($e,Oe)=>({...$e,[Oe.id]:!0}),{}),system:!0}}),p=$e=>{f(Oe=>{const le={...Oe,[$e]:!Oe[$e]};try{localStorage.setItem("navGroupsOpen",JSON.stringify(le))}catch{}return le})},[m,b]=D.useState(""),[v,g]=D.useState(!1),[y,w]=D.useState({isOpen:!1,type:"deal"}),[j,N]=D.useState({isOpen:!1,event:null}),[S,A]=D.useState([]),[_,P]=D.useState(!1),[I,B]=D.useState(!1),T=S.filter($e=>!$e.read).length,E=D.useRef(null),F=D.useCallback(async($e=!1)=>{try{const Oe=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!Oe?.id)return;$e&&B(!0);const le=await K7(Oe.id,20),te=le?.data||le||[],Te=(Array.isArray(te)?te:[]).map(we=>{let Ie="Just now";if(we.createdAt){const he=new Date(we.createdAt),Ce=new Date().getTime()-he.getTime(),Ve=Math.floor(Ce/6e4),ge=Math.floor(Ce/36e5),fe=Math.floor(Ce/864e5);Ve<1?Ie="Just now":Ve<60?Ie=`${Ve}m ago`:ge<24?Ie=`${ge}h ago`:fe<7?Ie=`${fe}d ago`:Ie=he.toLocaleDateString()}return{id:we.id,userId:we.userId,type:we.type||"system",title:we.title,message:we.message,timestamp:Ie,read:!!we.read,link:we.link||void 0}});A(Te)}catch(Oe){console.error("[NOTIFICATIONS] Failed to load notifications",Oe)}finally{$e&&B(!1)}},[s]),q=D.useRef(null),H=D.useRef(!1);D.useEffect(()=>{const $e=s||JSON.parse(localStorage.getItem("user_data")||"null");if($e?.id)return q.current=null,H.current=!1,a1(async()=>{const{getNotificationWebSocket:Oe,disconnectNotificationWebSocket:le}=await import("./notificationWebSocket-mFjRd7uM.js");return{getNotificationWebSocket:Oe,disconnectNotificationWebSocket:le}},[]).then(({getNotificationWebSocket:Oe,disconnectNotificationWebSocket:le})=>{if(H.current){le();return}const te=Oe($e.id);"Notification"in window&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(we=>{console.log("[NOTIFICATIONS] Browser notification permission:",we)});const Te=we=>{const Ie={id:we.id,userId:we.userId,type:we.type||"system",title:we.title||"Notification",message:we.message||"",timestamp:"Just now",read:!1,link:we.link};if(A(he=>he.find(Ce=>Ce.id===we.id)?he:[Ie,...he].slice(0,100)),window.dispatchEvent(new Event("refresh-notifications")),"Notification"in window&&window.Notification.permission==="granted")try{const he=new window.Notification(we.title||"Notification",{body:we.message||"",icon:"/favicon.ico",tag:we.id,requireInteraction:!1});he.onclick=()=>{window.focus(),we.link&&(window.location.href=we.link),he.close()},setTimeout(()=>he.close(),5e3)}catch(he){console.error("[NOTIFICATIONS] Error showing browser notification:",he)}};te.on("notification",Te),te.connect().catch(we=>{console.error("[NOTIFICATIONS] WebSocket connection failed:",we)}),q.current=()=>{te.off("notification",Te),le()}}),()=>{H.current=!0,q.current?.(),q.current=null}},[s]),D.useEffect(()=>{F();const $e=setInterval(()=>{F(!1)},3e4),Oe=()=>{F(!0)};return window.addEventListener("refresh-notifications",Oe),()=>{clearInterval($e),window.removeEventListener("refresh-notifications",Oe)}},[F]),D.useEffect(()=>{_&&F(!0)},[_,F]),D.useEffect(()=>{const $e=()=>{const Oe=window.innerWidth<1024;l(Oe),a(!Oe)};return $e(),window.addEventListener("resize",$e),()=>window.removeEventListener("resize",$e)},[]);const[Q,J]=D.useState(null),[re,X]=D.useState(null);D.useEffect(()=>{const $e=new URLSearchParams(window.location.search),Oe=$e.get("tab"),le=$e.get("company"),te=$e.get("promptOnboarding"),Te=$e.get("deal"),we=$e.get("templateId");if(Oe&&["dashboard","schedule","crm","pipeline","projects","playbooks","tasks","invoices","roadmap","users","settings","integrations","satisfaction","inbox","expenses","budget","contracts","data-hygiene","products-services","import-history"].includes(Oe)){t(Oe),localStorage.setItem("activeTab",Oe),Oe==="satisfaction"&&le&&J(le),Oe==="playbooks"&&te==="true"&&X({dealId:Te||void 0,templateId:we||void 0}),$e.delete("tab"),$e.delete("company"),$e.delete("promptOnboarding"),$e.delete("deal"),$e.delete("templateId");const he=$e.toString()?`${window.location.pathname}?${$e.toString()}`:window.location.pathname;window.history.replaceState({},"",he)}},[]),D.useEffect(()=>{const $e=Oe=>{E.current&&!E.current.contains(Oe.target)&&P(!1)};return document.addEventListener("mousedown",$e),()=>document.removeEventListener("mousedown",$e)},[]);const ee=async()=>{await Sne(),window.location.reload()},W=async $e=>{const Oe=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Oe){A(le=>le.map(te=>te.id===$e?{...te,read:!0}:te));try{await X7($e,Oe)}catch{}}},O=async()=>{const $e=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if($e){A(Oe=>Oe.map(le=>({...le,read:!0})));try{await Y7($e)}catch{}}},z=($e,Oe)=>{w({isOpen:!0,type:$e,stage:Oe||void 0})},V=($e,Oe)=>{N({isOpen:!0,event:null,selectedDate:Oe})},U=()=>{N({isOpen:!1,event:null})},K=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},se=typeof window<"u"?window.location.pathname:"",[xe,ie]=D.useState(()=>se==="/privacy-policy"||se==="/privacy"?"privacy":se==="/help"?"help":se.startsWith("/survey/")?"survey":null),ue=se.startsWith("/survey/")?se.replace("/survey/",""):null;if(D.useEffect(()=>{const $e=window.location.pathname;$e==="/privacy-policy"||$e==="/privacy"?ie("privacy"):$e==="/help"?ie("help"):$e.startsWith("/survey/")?ie("survey"):ie(null)},[]),D.useEffect(()=>{const $e=()=>{const Oe=window.location.pathname;Oe==="/privacy-policy"||Oe==="/privacy"?ie("privacy"):Oe==="/help"?ie("help"):Oe.startsWith("/survey/")?ie("survey"):ie(null)};return window.addEventListener("popstate",$e),()=>window.removeEventListener("popstate",$e)},[]),xe==="privacy")return n.jsx(Ybe,{onBack:()=>{window.history.pushState({},"","/"),ie(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(xe==="help")return n.jsx(Xbe,{onBack:()=>{window.history.pushState({},"","/"),ie(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(xe==="survey"&&ue)return n.jsx(ole,{surveyId:ue});const Be=()=>{switch(e){case"dashboard":return n.jsx(yI,{onNavigate:t});case"schedule":return n.jsx(Nbe,{currentUser:s,onNavigate:t,onNewEvent:()=>V()});case"crm":return n.jsx(Roe,{onNavigate:t,onAddCompany:()=>z("company"),onAddContact:()=>z("contact"),externalSearchQuery:m});case"pipeline":return n.jsx(Uoe,{onNavigate:t,onNewDeal:$e=>z("deal",$e),currentUser:s});case"projects":return n.jsx(Qoe,{onNavigate:t,onCreateProject:()=>z("project"),currentUser:s});case"playbooks":return n.jsx(ale,{onNavigate:t,currentUser:s,playbookPrompt:re,onClearPlaybookPrompt:()=>X(null)});case"satisfaction":return n.jsx(sle,{onNavigate:t,companyIdFromUrl:Q,onClearCompanyIdFromUrl:()=>J(null)});case"tasks":return n.jsx(x1e,{onCreateTask:()=>z("task"),currentUser:s});case"invoices":return n.jsx(mbe,{onCreateInvoice:()=>z("invoice"),currentUser:s});case"expenses":return n.jsx(Dbe,{currentUser:s});case"budget":return n.jsx(Lbe,{currentUser:s});case"contracts":return n.jsx(Fbe,{currentUser:s});case"inbox":return n.jsx(aB,{currentUser:s});case"roadmap":return n.jsx(Ibe,{currentUser:s,onNavigate:t});case"users":return n.jsx(pbe,{});case"settings":return n.jsx(bbe,{currentUser:s,onUserUpdate:i});case"data-hygiene":return n.jsx(ybe,{currentUser:s});case"import-history":return n.jsx(wbe,{currentUser:s});case"integrations":return n.jsx(jbe,{});case"products-services":return n.jsx(Mbe,{});case"notifications":return n.jsx(qbe,{currentUser:s,onNavigate:t});default:return n.jsx(yI,{onNavigate:t})}},me=$e=>{t($e),localStorage.setItem("activeTab",$e),b(""),o&&a(!1)};return D.useEffect(()=>{const $e=setTimeout(()=>d(!0),400);return()=>clearTimeout($e)},[]),n.jsx(Jbe,{children:n.jsx(sie,{children:n.jsx(Bbe,{onUserLoaded:i,children:n.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&n.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>a(!1)}),n.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[n.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&n.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&n.jsx("button",{onClick:()=>a(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2 flex flex-col min-h-0",children:[CD.map($e=>n.jsxs("button",{onClick:()=>me($e.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===$e.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:$e.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap",children:$e.label})]},$e.id)),Xv.map($e=>{const Oe=u[$e.id]!==!1;return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>p($e.id),"aria-expanded":Oe,"aria-label":`${Oe?"Collapse":"Expand"} ${$e.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${$e.items.some(le=>le.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:$e.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:$e.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Oe?n.jsx(Vs,{className:"w-4 h-4"}):n.jsx(va,{className:"w-4 h-4"})})]})]}),Oe&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:$e.items.map(le=>n.jsxs("button",{onClick:()=>me(le.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===le.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:le.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:le.label})]},le.id))})]},$e.id)})]}),n.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0 space-y-0.5",children:[(()=>{const $e=AD,Oe=u[$e.id]!==!1,le=$e.items.filter(te=>te.id!=="data-hygiene"||s?.role==="Admin");return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>p($e.id),"aria-expanded":Oe,"aria-label":`${Oe?"Collapse":"Expand"} ${$e.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${le.some(te=>te.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:$e.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:$e.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Oe?n.jsx(Vs,{className:"w-4 h-4"}):n.jsx(va,{className:"w-4 h-4"})})]})]}),Oe&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:le.map(te=>n.jsxs("button",{onClick:()=>me(te.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===te.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:te.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:te.label})]},te.id))})]})})(),n.jsxs("button",{onClick:()=>g(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[n.jsx(kD,{className:"w-5 h-5 shrink-0"}),r&&n.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[n.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[n.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[n.jsx("button",{onClick:()=>a(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(mU,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{className:"relative group hidden sm:block",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),n.jsx("input",{type:"text",placeholder:"Search Current View...",value:m,onChange:$e=>b($e.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[n.jsxs("div",{className:"relative",ref:E,children:[n.jsxs("button",{onClick:()=>P(!_),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${_?"bg-slate-100":""}`,children:[n.jsx(Tb,{className:`w-5 h-5 transition-colors ${T>0?"text-indigo-600":"text-slate-600"} ${I?"animate-pulse":""}`}),T>0&&n.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:n.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${I?"animate-pulse":""}`,children:T})})]}),_&&n.jsx(Ube,{notifications:S,onMarkAsRead:W,onMarkAllAsRead:O,onRefresh:()=>F(!0),isRefreshing:I,onClose:()=>P(!1),onNavigate:t,onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),n.jsxs("button",{onClick:()=>z("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(nn,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),n.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:n.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:Be()})}),n.jsx(Kbe,{currentUser:s})]}),y.isOpen&&n.jsx(Vbe,{type:y.type,stage:y.stage,onClose:()=>w($e=>({...$e,isOpen:!1})),onSuccess:()=>{(y.type==="contact"||y.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),y.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),y.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),y.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):y.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),j.isOpen&&n.jsx(Gbe,{event:j.event,selectedDate:j.selectedDate,onClose:U,onSuccess:K}),v&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>g(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("div",{children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),n.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{onClick:ee,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function eye(){const[e,t]=D.useState("loading"),[r,a]=D.useState(!1);D.useEffect(()=>{const c=Date.now();let d=!1;const u=()=>{if(d)return;const m=Date.now()-c,b=Math.max(0,850-m);setTimeout(()=>{d||t("fading")},b)},f=()=>{if(d)return;(document.fonts?.ready??Promise.resolve()).then(()=>{d||setTimeout(u,1100)}).catch(()=>setTimeout(u,1100))};if(document.readyState==="complete")return f(),()=>{d=!0};window.addEventListener("load",f);const p=setTimeout(()=>{d||t("fading")},4500);return()=>{d=!0,window.removeEventListener("load",f),clearTimeout(p)}},[]),D.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),D.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>a(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return n.jsxs(n.Fragment,{children:[(e==="fading"||e==="done")&&n.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:n.jsx(Zbe,{})}),s&&n.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[n.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const sB=document.getElementById("root");if(!sB)throw new Error("Could not find root element to mount to");const tye=VB.createRoot(sB);tye.render(n.jsx(ut.StrictMode,{children:n.jsx(eye,{})}));export{Oa as _,rv as c,Pa as g};
