(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ta(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var f2={exports:{}},Ap={},h2={exports:{}},Fn={};var c6;function QB(){if(c6)return Fn;c6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function g(W,O,z){this.props=W,this.context=O,this.refs=v,this.updater=z||m}g.prototype.isReactComponent={},g.prototype.setState=function(W,O){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,O,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function w(){}w.prototype=g.prototype;function y(W,O,z){this.props=W,this.context=O,this.refs=v,this.updater=z||m}var j=y.prototype=new w;j.constructor=y,b(j,g.prototype),j.isPureReactComponent=!0;var N=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function P(W,O,z){var V,q={},K=null,se=null;if(O!=null)for(V in O.ref!==void 0&&(se=O.ref),O.key!==void 0&&(K=""+O.key),O)S.call(O,V)&&!A.hasOwnProperty(V)&&(q[V]=O[V]);var pe=arguments.length-2;if(pe===1)q.children=z;else if(1<pe){for(var ie=Array(pe),le=0;le<pe;le++)ie[le]=arguments[le+2];q.children=ie}if(W&&W.defaultProps)for(V in pe=W.defaultProps,pe)q[V]===void 0&&(q[V]=pe[V]);return{$$typeof:e,type:W,key:K,ref:se,props:q,_owner:E.current}}function D(W,O){return{$$typeof:e,type:W.type,key:O,ref:W.ref,props:W.props,_owner:W._owner}}function R(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function T(W){var O={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(z){return O[z]})}var _=/\/+/g;function B(W,O){return typeof W=="object"&&W!==null&&W.key!=null?T(""+W.key):O.toString(36)}function U(W,O,z,V,q){var K=typeof W;(K==="undefined"||K==="boolean")&&(W=null);var se=!1;if(W===null)se=!0;else switch(K){case"string":case"number":se=!0;break;case"object":switch(W.$$typeof){case e:case t:se=!0}}if(se)return se=W,q=q(se),W=V===""?"."+B(se,0):V,N(q)?(z="",W!=null&&(z=W.replace(_,"$&/")+"/"),U(q,O,z,"",function(le){return le})):q!=null&&(R(q)&&(q=D(q,z+(!q.key||se&&se.key===q.key?"":(""+q.key).replace(_,"$&/")+"/")+W)),O.push(q)),1;if(se=0,V=V===""?".":V+":",N(W))for(var pe=0;pe<W.length;pe++){K=W[pe];var ie=V+B(K,pe);se+=U(K,O,z,ie,q)}else if(ie=p(W),typeof ie=="function")for(W=ie.call(W),pe=0;!(K=W.next()).done;)K=K.value,ie=V+B(K,pe++),se+=U(K,O,z,ie,q);else if(K==="object")throw O=String(W),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return se}function H(W,O,z){if(W==null)return W;var V=[],q=0;return U(W,V,"","",function(K){return O.call(z,K,q++)}),V}function Y(W){if(W._status===-1){var O=W._result;O=O(),O.then(function(z){(W._status===0||W._status===-1)&&(W._status=1,W._result=z)},function(z){(W._status===0||W._status===-1)&&(W._status=2,W._result=z)}),W._status===-1&&(W._status=0,W._result=O)}if(W._status===1)return W._result.default;throw W._result}var J={current:null},re={transition:null},X={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:re,ReactCurrentOwner:E};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Fn.Children={map:H,forEach:function(W,O,z){H(W,function(){O.apply(this,arguments)},z)},count:function(W){var O=0;return H(W,function(){O++}),O},toArray:function(W){return H(W,function(O){return O})||[]},only:function(W){if(!R(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Fn.Component=g,Fn.Fragment=r,Fn.Profiler=s,Fn.PureComponent=y,Fn.StrictMode=a,Fn.Suspense=c,Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Fn.act=ee,Fn.cloneElement=function(W,O,z){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var V=b({},W.props),q=W.key,K=W.ref,se=W._owner;if(O!=null){if(O.ref!==void 0&&(K=O.ref,se=E.current),O.key!==void 0&&(q=""+O.key),W.type&&W.type.defaultProps)var pe=W.type.defaultProps;for(ie in O)S.call(O,ie)&&!A.hasOwnProperty(ie)&&(V[ie]=O[ie]===void 0&&pe!==void 0?pe[ie]:O[ie])}var ie=arguments.length-2;if(ie===1)V.children=z;else if(1<ie){pe=Array(ie);for(var le=0;le<ie;le++)pe[le]=arguments[le+2];V.children=pe}return{$$typeof:e,type:W.type,key:q,ref:K,props:V,_owner:se}},Fn.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},Fn.createElement=P,Fn.createFactory=function(W){var O=P.bind(null,W);return O.type=W,O},Fn.createRef=function(){return{current:null}},Fn.forwardRef=function(W){return{$$typeof:l,render:W}},Fn.isValidElement=R,Fn.lazy=function(W){return{$$typeof:u,_payload:{_status:-1,_result:W},_init:Y}},Fn.memo=function(W,O){return{$$typeof:d,type:W,compare:O===void 0?null:O}},Fn.startTransition=function(W){var O=re.transition;re.transition={};try{W()}finally{re.transition=O}},Fn.unstable_act=ee,Fn.useCallback=function(W,O){return J.current.useCallback(W,O)},Fn.useContext=function(W){return J.current.useContext(W)},Fn.useDebugValue=function(){},Fn.useDeferredValue=function(W){return J.current.useDeferredValue(W)},Fn.useEffect=function(W,O){return J.current.useEffect(W,O)},Fn.useId=function(){return J.current.useId()},Fn.useImperativeHandle=function(W,O,z){return J.current.useImperativeHandle(W,O,z)},Fn.useInsertionEffect=function(W,O){return J.current.useInsertionEffect(W,O)},Fn.useLayoutEffect=function(W,O){return J.current.useLayoutEffect(W,O)},Fn.useMemo=function(W,O){return J.current.useMemo(W,O)},Fn.useReducer=function(W,O,z){return J.current.useReducer(W,O,z)},Fn.useRef=function(W){return J.current.useRef(W)},Fn.useState=function(W){return J.current.useState(W)},Fn.useSyncExternalStore=function(W,O,z){return J.current.useSyncExternalStore(W,O,z)},Fn.useTransition=function(){return J.current.useTransition()},Fn.version="18.3.1",Fn}var d6;function Db(){return d6||(d6=1,h2.exports=QB()),h2.exports}var u6;function ZB(){if(u6)return Ap;u6=1;var e=Db(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,f={},p=null,m=null;d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(u in c)a.call(c,u)&&!i.hasOwnProperty(u)&&(f[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)f[u]===void 0&&(f[u]=c[u]);return{$$typeof:t,type:l,key:p,ref:m,props:f,_owner:s.current}}return Ap.Fragment=r,Ap.jsx=o,Ap.jsxs=o,Ap}var f6;function eU(){return f6||(f6=1,f2.exports=ZB()),f2.exports}var n=eU(),I=Db();const ft=Ta(I);var ov={},m2={exports:{}},Jl={},p2={exports:{}},x2={};var h6;function tU(){return h6||(h6=1,(function(e){function t(re,X){var ee=re.length;re.push(X);e:for(;0<ee;){var W=ee-1>>>1,O=re[W];if(0<s(O,X))re[W]=X,re[ee]=O,ee=W;else break e}}function r(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var X=re[0],ee=re.pop();if(ee!==X){re[0]=ee;e:for(var W=0,O=re.length,z=O>>>1;W<z;){var V=2*(W+1)-1,q=re[V],K=V+1,se=re[K];if(0>s(q,ee))K<O&&0>s(se,q)?(re[W]=se,re[K]=ee,W=K):(re[W]=q,re[V]=ee,W=V);else if(K<O&&0>s(se,ee))re[W]=se,re[K]=ee,W=K;else break e}}return X}function s(re,X){var ee=re.sortIndex-X.sortIndex;return ee!==0?ee:re.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,m=!1,b=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(re){for(var X=r(d);X!==null;){if(X.callback===null)a(d);else if(X.startTime<=re)a(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(d)}}function N(re){if(v=!1,j(re),!b)if(r(c)!==null)b=!0,Y(S);else{var X=r(d);X!==null&&J(N,X.startTime-re)}}function S(re,X){b=!1,v&&(v=!1,w(P),P=-1),m=!0;var ee=p;try{for(j(X),f=r(c);f!==null&&(!(f.expirationTime>X)||re&&!T());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var O=W(f.expirationTime<=X);X=e.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&a(c),j(X)}else a(c);f=r(c)}if(f!==null)var z=!0;else{var V=r(d);V!==null&&J(N,V.startTime-X),z=!1}return z}finally{f=null,p=ee,m=!1}}var E=!1,A=null,P=-1,D=5,R=-1;function T(){return!(e.unstable_now()-R<D)}function _(){if(A!==null){var re=e.unstable_now();R=re;var X=!0;try{X=A(!0,re)}finally{X?B():(E=!1,A=null)}}else E=!1}var B;if(typeof y=="function")B=function(){y(_)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=_,B=function(){H.postMessage(null)}}else B=function(){g(_,0)};function Y(re){A=re,E||(E=!0,B())}function J(re,X){P=g(function(){re(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,Y(S))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(re){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var ee=p;p=X;try{return re()}finally{p=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,X){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ee=p;p=re;try{return X()}finally{p=ee}},e.unstable_scheduleCallback=function(re,X,ee){var W=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?W+ee:W):ee=W,re){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,re={id:u++,callback:X,priorityLevel:re,startTime:ee,expirationTime:O,sortIndex:-1},ee>W?(re.sortIndex=ee,t(d,re),r(c)===null&&re===r(d)&&(v?(w(P),P=-1):v=!0,J(N,ee-W))):(re.sortIndex=O,t(c,re),b||m||(b=!0,Y(S))),re},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(re){var X=p;return function(){var ee=p;p=X;try{return re.apply(this,arguments)}finally{p=ee}}}})(x2)),x2}var m6;function rU(){return m6||(m6=1,p2.exports=tU()),p2.exports}var p6;function nU(){if(p6)return Jl;p6=1;var e=Db(),t=rU();function r(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(h,x){o(h,x),o(h+"Capture",x)}function o(h,x){for(s[h]=x,h=0;h<x.length;h++)a.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function p(h){return c.call(f,h)?!0:c.call(u,h)?!1:d.test(h)?f[h]=!0:(u[h]=!0,!1)}function m(h,x,k,F){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return F?!1:k!==null?!k.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function b(h,x,k,F){if(x===null||typeof x>"u"||m(h,x,k,F))return!0;if(F)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(h,x,k,F,Q,ae,Oe){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=F,this.attributeNamespace=Q,this.mustUseProperty=k,this.propertyName=h,this.type=x,this.sanitizeURL=ae,this.removeEmptyString=Oe}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){g[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];g[x]=new v(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){g[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){g[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){g[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){g[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){g[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){g[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){g[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function y(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(w,y);g[x]=new v(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(w,y);g[x]=new v(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(w,y);g[x]=new v(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,k,F){var Q=g.hasOwnProperty(x)?g[x]:null;(Q!==null?Q.type!==0:F||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(b(x,k,Q,F)&&(k=null),F||Q===null?p(x)&&(k===null?h.removeAttribute(x):h.setAttribute(x,""+k)):Q.mustUseProperty?h[Q.propertyName]=k===null?Q.type===3?!1:"":k:(x=Q.attributeName,F=Q.attributeNamespace,k===null?h.removeAttribute(x):(Q=Q.type,k=Q===3||Q===4&&k===!0?"":""+k,F?h.setAttributeNS(F,x,k):h.setAttribute(x,k))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),T=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),re=Symbol.iterator;function X(h){return h===null||typeof h!="object"?null:(h=re&&h[re]||h["@@iterator"],typeof h=="function"?h:null)}var ee=Object.assign,W;function O(h){if(W===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+h}var z=!1;function V(h,x){if(!h||z)return"";z=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Ot){var F=Ot}Reflect.construct(h,[],x)}else{try{x.call()}catch(Ot){F=Ot}h.call(x.prototype)}else{try{throw Error()}catch(Ot){F=Ot}h()}}catch(Ot){if(Ot&&F&&typeof Ot.stack=="string"){for(var Q=Ot.stack.split(`
`),ae=F.stack.split(`
`),Oe=Q.length-1,Ze=ae.length-1;1<=Oe&&0<=Ze&&Q[Oe]!==ae[Ze];)Ze--;for(;1<=Oe&&0<=Ze;Oe--,Ze--)if(Q[Oe]!==ae[Ze]){if(Oe!==1||Ze!==1)do if(Oe--,Ze--,0>Ze||Q[Oe]!==ae[Ze]){var ot=`
`+Q[Oe].replace(" at new "," at ");return h.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",h.displayName)),ot}while(1<=Oe&&0<=Ze);break}}}finally{z=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?O(h):""}function q(h){switch(h.tag){case 5:return O(h.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return h=V(h.type,!1),h;case 11:return h=V(h.type.render,!1),h;case 1:return h=V(h.type,!0),h;default:return""}}function K(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case A:return"Fragment";case E:return"Portal";case D:return"Profiler";case P:return"StrictMode";case B:return"Suspense";case U:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case T:return(h.displayName||"Context")+".Consumer";case R:return(h._context.displayName||"Context")+".Provider";case _:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case H:return x=h.displayName||null,x!==null?x:K(h.type)||"Memo";case Y:x=h._payload,h=h._init;try{return K(h(x))}catch{}}return null}function se(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(x);case 8:return x===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function pe(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ie(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function le(h){var x=ie(h)?"checked":"value",k=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),F=""+h[x];if(!h.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var Q=k.get,ae=k.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return Q.call(this)},set:function(Oe){F=""+Oe,ae.call(this,Oe)}}),Object.defineProperty(h,x,{enumerable:k.enumerable}),{getValue:function(){return F},setValue:function(Oe){F=""+Oe},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function $e(h){h._valueTracker||(h._valueTracker=le(h))}function he(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var k=x.getValue(),F="";return h&&(F=ie(h)?h.checked?"true":"false":h.value),h=F,h!==k?(x.setValue(h),!0):!1}function Ue(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Te(h,x){var k=x.checked;return ee({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??h._wrapperState.initialChecked})}function oe(h,x){var k=x.defaultValue==null?"":x.defaultValue,F=x.checked!=null?x.checked:x.defaultChecked;k=pe(x.value!=null?x.value:k),h._wrapperState={initialChecked:F,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function te(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function Pe(h,x){te(h,x);var k=pe(x.value),F=x.type;if(k!=null)F==="number"?(k===0&&h.value===""||h.value!=k)&&(h.value=""+k):h.value!==""+k&&(h.value=""+k);else if(F==="submit"||F==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?Ie(h,x.type,k):x.hasOwnProperty("defaultValue")&&Ie(h,x.type,pe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function je(h,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var F=x.type;if(!(F!=="submit"&&F!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,k||x===h.value||(h.value=x),h.defaultValue=x}k=h.name,k!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,k!==""&&(h.name=k)}function Ie(h,x,k){(x!=="number"||Ue(h.ownerDocument)!==h)&&(k==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+k&&(h.defaultValue=""+k))}var ue=Array.isArray;function de(h,x,k,F){if(h=h.options,x){x={};for(var Q=0;Q<k.length;Q++)x["$"+k[Q]]=!0;for(k=0;k<h.length;k++)Q=x.hasOwnProperty("$"+h[k].value),h[k].selected!==Q&&(h[k].selected=Q),Q&&F&&(h[k].defaultSelected=!0)}else{for(k=""+pe(k),x=null,Q=0;Q<h.length;Q++){if(h[Q].value===k){h[Q].selected=!0,F&&(h[Q].defaultSelected=!0);return}x!==null||h[Q].disabled||(x=h[Q])}x!==null&&(x.selected=!0)}}function Ae(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Qe(h,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(r(92));if(ue(k)){if(1<k.length)throw Error(r(93));k=k[0]}x=k}x==null&&(x=""),k=x}h._wrapperState={initialValue:pe(k)}}function ge(h,x){var k=pe(x.value),F=pe(x.defaultValue);k!=null&&(k=""+k,k!==h.value&&(h.value=k),x.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)),F!=null&&(h.defaultValue=""+F)}function fe(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function _e(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?_e(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Se,Fe=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,F,Q){MSApp.execUnsafeLocalFunction(function(){return h(x,k,F,Q)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Se.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function Me(h,x){if(x){var k=h.firstChild;if(k&&k===h.lastChild&&k.nodeType===3){k.nodeValue=x;return}}h.textContent=x}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(h){ut.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),et[x]=et[h]})});function bt(h,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||et.hasOwnProperty(h)&&et[h]?(""+x).trim():x+"px"}function At(h,x){h=h.style;for(var k in x)if(x.hasOwnProperty(k)){var F=k.indexOf("--")===0,Q=bt(k,x[k],F);k==="float"&&(k="cssFloat"),F?h.setProperty(k,Q):h[k]=Q}}var qt=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gt(h,x){if(x){if(qt[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function Ye(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=null;function Cr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var tr=null,Or=null,pr=null;function rt(h){if(h=ql(h)){if(typeof tr!="function")throw Error(r(280));var x=h.stateNode;x&&(x=rf(x),tr(h.stateNode,h.type,x))}}function Dt(h){Or?pr?pr.push(h):pr=[h]:Or=h}function yr(){if(Or){var h=Or,x=pr;if(pr=Or=null,rt(h),x)for(h=0;h<x.length;h++)rt(x[h])}}function kr(h,x){return h(x)}function Xr(){}var Sr=!1;function pn(h,x,k){if(Sr)return h(x,k);Sr=!0;try{return kr(h,x,k)}finally{Sr=!1,(Or!==null||pr!==null)&&(Xr(),yr())}}function rr(h,x){var k=h.stateNode;if(k===null)return null;var F=rf(k);if(F===null)return null;k=F[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(h=h.type,F=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!F;break e;default:h=!1}if(h)return null;if(k&&typeof k!="function")throw Error(r(231,x,typeof k));return k}var On=!1;if(l)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){On=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{On=!1}function sn(h,x,k,F,Q,ae,Oe,Ze,ot){var Ot=Array.prototype.slice.call(arguments,3);try{x.apply(k,Ot)}catch(er){this.onError(er)}}var jr=!1,Gr=null,Ne=!1,He=null,Be={onError:function(h){jr=!0,Gr=h}};function xe(h,x,k,F,Q,ae,Oe,Ze,ot){jr=!1,Gr=null,sn.apply(Be,arguments)}function Ce(h,x,k,F,Q,ae,Oe,Ze,ot){if(xe.apply(this,arguments),jr){if(jr){var Ot=Gr;jr=!1,Gr=null}else throw Error(r(198));Ne||(Ne=!0,He=Ot)}}function Re(h){var x=h,k=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(k=x.return),h=x.return;while(h)}return x.tag===3?k:null}function tt(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function ht(h){if(Re(h)!==h)throw Error(r(188))}function ct(h){var x=h.alternate;if(!x){if(x=Re(h),x===null)throw Error(r(188));return x!==h?null:h}for(var k=h,F=x;;){var Q=k.return;if(Q===null)break;var ae=Q.alternate;if(ae===null){if(F=Q.return,F!==null){k=F;continue}break}if(Q.child===ae.child){for(ae=Q.child;ae;){if(ae===k)return ht(Q),h;if(ae===F)return ht(Q),x;ae=ae.sibling}throw Error(r(188))}if(k.return!==F.return)k=Q,F=ae;else{for(var Oe=!1,Ze=Q.child;Ze;){if(Ze===k){Oe=!0,k=Q,F=ae;break}if(Ze===F){Oe=!0,F=Q,k=ae;break}Ze=Ze.sibling}if(!Oe){for(Ze=ae.child;Ze;){if(Ze===k){Oe=!0,k=ae,F=Q;break}if(Ze===F){Oe=!0,F=ae,k=Q;break}Ze=Ze.sibling}if(!Oe)throw Error(r(189))}}if(k.alternate!==F)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?h:x}function xt(h){return h=ct(h),h!==null?ve(h):null}function ve(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=ve(h);if(x!==null)return x;h=h.sibling}return null}var be=t.unstable_scheduleCallback,Ge=t.unstable_cancelCallback,at=t.unstable_shouldYield,yt=t.unstable_requestPaint,wt=t.unstable_now,Rt=t.unstable_getCurrentPriorityLevel,sr=t.unstable_ImmediatePriority,Yt=t.unstable_UserBlockingPriority,wr=t.unstable_NormalPriority,Pr=t.unstable_LowPriority,$r=t.unstable_IdlePriority,fn=null,Ur=null;function ea(h){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(fn,h,void 0,(h.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:va,gn=Math.log,po=Math.LN2;function va(h){return h>>>=0,h===0?32:31-(gn(h)/po|0)|0}var Ke=64,Bt=4194304;function It(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function dr(h,x){var k=h.pendingLanes;if(k===0)return 0;var F=0,Q=h.suspendedLanes,ae=h.pingedLanes,Oe=k&268435455;if(Oe!==0){var Ze=Oe&~Q;Ze!==0?F=It(Ze):(ae&=Oe,ae!==0&&(F=It(ae)))}else Oe=k&~Q,Oe!==0?F=It(Oe):ae!==0&&(F=It(ae));if(F===0)return 0;if(x!==0&&x!==F&&(x&Q)===0&&(Q=F&-F,ae=x&-x,Q>=ae||Q===16&&(ae&4194240)!==0))return x;if((F&4)!==0&&(F|=k&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=F;0<x;)k=31-Un(x),Q=1<<k,F|=h[k],x&=~Q;return F}function Nr(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(h,x){for(var k=h.suspendedLanes,F=h.pingedLanes,Q=h.expirationTimes,ae=h.pendingLanes;0<ae;){var Oe=31-Un(ae),Ze=1<<Oe,ot=Q[Oe];ot===-1?((Ze&k)===0||(Ze&F)!==0)&&(Q[Oe]=Nr(Ze,x)):ot<=x&&(h.expiredLanes|=Ze),ae&=~Ze}}function Rr(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Pn(){var h=Ke;return Ke<<=1,(Ke&4194240)===0&&(Ke=64),h}function yn(h){for(var x=[],k=0;31>k;k++)x.push(h);return x}function nr(h,x,k){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-Un(x),h[x]=k}function fr(h,x){var k=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var F=h.eventTimes;for(h=h.expirationTimes;0<k;){var Q=31-Un(k),ae=1<<Q;x[Q]=0,F[Q]=-1,h[Q]=-1,k&=~ae}}function Mt(h,x){var k=h.entangledLanes|=x;for(h=h.entanglements;k;){var F=31-Un(k),Q=1<<F;Q&x|h[F]&x&&(h[F]|=x),k&=~Q}}var _r=0;function Kt(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Na,Pa,da,ir,en,ja=!1,Xn=[],bn=null,Ar=null,tn=null,lr=new Map,Hn=new Map,Wr=[],Ra="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wi(h,x){switch(h){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":lr.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(x.pointerId)}}function ui(h,x,k,F,Q,ae){return h===null||h.nativeEvent!==ae?(h={blockedOn:x,domEventName:k,eventSystemFlags:F,nativeEvent:ae,targetContainers:[Q]},x!==null&&(x=ql(x),x!==null&&Pa(x)),h):(h.eventSystemFlags|=F,x=h.targetContainers,Q!==null&&x.indexOf(Q)===-1&&x.push(Q),h)}function hs(h,x,k,F,Q){switch(x){case"focusin":return bn=ui(bn,h,x,k,F,Q),!0;case"dragenter":return Ar=ui(Ar,h,x,k,F,Q),!0;case"mouseover":return tn=ui(tn,h,x,k,F,Q),!0;case"pointerover":var ae=Q.pointerId;return lr.set(ae,ui(lr.get(ae)||null,h,x,k,F,Q)),!0;case"gotpointercapture":return ae=Q.pointerId,Hn.set(ae,ui(Hn.get(ae)||null,h,x,k,F,Q)),!0}return!1}function ms(h){var x=zc(h.target);if(x!==null){var k=Re(x);if(k!==null){if(x=k.tag,x===13){if(x=tt(k),x!==null){h.blockedOn=x,en(h.priority,function(){da(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){h.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Ai(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var k=Il(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(k===null){k=h.nativeEvent;var F=new k.constructor(k.type,k);Et=F,k.target.dispatchEvent(F),Et=null}else return x=ql(k),x!==null&&Pa(x),h.blockedOn=k,!1;x.shift()}return!0}function pl(h,x,k){Ai(h)&&k.delete(x)}function jd(){ja=!1,bn!==null&&Ai(bn)&&(bn=null),Ar!==null&&Ai(Ar)&&(Ar=null),tn!==null&&Ai(tn)&&(tn=null),lr.forEach(pl),Hn.forEach(pl)}function xo(h,x){h.blockedOn===x&&(h.blockedOn=null,ja||(ja=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jd)))}function Vs(h){function x(Q){return xo(Q,h)}if(0<Xn.length){xo(Xn[0],h);for(var k=1;k<Xn.length;k++){var F=Xn[k];F.blockedOn===h&&(F.blockedOn=null)}}for(bn!==null&&xo(bn,h),Ar!==null&&xo(Ar,h),tn!==null&&xo(tn,h),lr.forEach(x),Hn.forEach(x),k=0;k<Wr.length;k++)F=Wr[k],F.blockedOn===h&&(F.blockedOn=null);for(;0<Wr.length&&(k=Wr[0],k.blockedOn===null);)ms(k),k.blockedOn===null&&Wr.shift()}var fi=N.ReactCurrentBatchConfig,Fo=!0;function Mo(h,x,k,F){var Q=_r,ae=fi.transition;fi.transition=null;try{_r=1,Ss(h,x,k,F)}finally{_r=Q,fi.transition=ae}}function Pl(h,x,k,F){var Q=_r,ae=fi.transition;fi.transition=null;try{_r=4,Ss(h,x,k,F)}finally{_r=Q,fi.transition=ae}}function Ss(h,x,k,F){if(Fo){var Q=Il(h,x,k,F);if(Q===null)Ju(h,x,F,lc,k),Wi(h,F);else if(hs(Q,h,x,k,F))F.stopPropagation();else if(Wi(h,F),x&4&&-1<Ra.indexOf(h)){for(;Q!==null;){var ae=ql(Q);if(ae!==null&&Na(ae),ae=Il(h,x,k,F),ae===null&&Ju(h,x,F,lc,k),ae===Q)break;Q=ae}Q!==null&&F.stopPropagation()}else Ju(h,x,F,null,k)}}var lc=null;function Il(h,x,k,F){if(lc=null,h=Cr(F),h=zc(h),h!==null)if(x=Re(h),x===null)h=null;else if(k=x.tag,k===13){if(h=tt(x),h!==null)return h;h=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return lc=h,null}function cc(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rt()){case sr:return 1;case Yt:return 4;case wr:case Pr:return 16;case $r:return 536870912;default:return 16}default:return 16}}var hi=null,Gs=null,Ks=null;function kd(){if(Ks)return Ks;var h,x=Gs,k=x.length,F,Q="value"in hi?hi.value:hi.textContent,ae=Q.length;for(h=0;h<k&&x[h]===Q[h];h++);var Oe=k-h;for(F=1;F<=Oe&&x[k-F]===Q[ae-F];F++);return Ks=Q.slice(h,1<F?1-F:void 0)}function mi(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function Xs(){return!0}function Ro(){return!1}function Ya(h){function x(k,F,Q,ae,Oe){this._reactName=k,this._targetInst=Q,this.type=F,this.nativeEvent=ae,this.target=Oe,this.currentTarget=null;for(var Ze in h)h.hasOwnProperty(Ze)&&(k=h[Ze],this[Ze]=k?k(ae):ae[Ze]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?Xs:Ro,this.isPropagationStopped=Ro,this}return ee(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),x}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Ya(Ei),dc=ee({},Ei,{view:0,detail:0}),Dl=Ya(dc),go,Dn,_s,Gi=ee({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tt,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==_s&&(_s&&h.type==="mousemove"?(go=h.screenX-_s.screenX,Dn=h.screenY-_s.screenY):Dn=go=0,_s=h),go)},movementY:function(h){return"movementY"in h?h.movementY:Dn}}),Ki=Ya(Gi),Lc=ee({},Gi,{dataTransfer:0}),uc=Ya(Lc),Ll=ee({},dc,{relatedTarget:0}),ua=Ya(Ll),Sd=ee({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),xl=Ya(Sd),Fc=ee({},Ei,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),G=Ya(Fc),ke=ee({},Ei,{data:0}),ne=Ya(ke),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=gt[h])?!!x[h]:!1}function Tt(){return jt}var br=ee({},dc,{key:function(h){if(h.key){var x=We[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=mi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Xe[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tt,charCode:function(h){return h.type==="keypress"?mi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?mi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),qr=Ya(br),Kr=ee({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sn=Ya(Kr),Ba=ee({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tt}),Ua=Ya(Ba),ps=ee({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ys=Ya(ps),Fs=ee({},Gi,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Bo=Ya(Fs),Js=[9,13,27,32],vo=l&&"CompositionEvent"in window,bo=null;l&&"documentMode"in document&&(bo=document.documentMode);var uu=l&&"TextEvent"in window&&!bo,fu=l&&(!vo||bo&&8<bo&&11>=bo),Mc=" ",_d=!1;function Cd(h,x){switch(h){case"keyup":return Js.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var ka=!1;function yo(h,x){switch(h){case"compositionend":return Ad(x);case"keypress":return x.which!==32?null:(_d=!0,Mc);case"textInput":return h=x.data,h===Mc&&_d?null:h;default:return null}}function gl(h,x){if(ka)return h==="compositionend"||!vo&&Cd(h,x)?(h=kd(),Ks=Gs=hi=null,ka=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return fu&&x.locale!=="ko"?null:x.data;default:return null}}var Ja={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!Ja[h.type]:x==="textarea"}function on(h,x,k,F){Dt(F),x=Qu(x,"onChange"),0<x.length&&(k=new Vi("onChange","change",null,k,F),h.push({event:k,listeners:x}))}var ts=null,xa=null;function pi(h){Yu(h,0)}function qn(h){var x=Hc(h);if(he(x))return h}function Ms(h,x){if(h==="change")return x}var qa=!1;if(l){var Xi;if(l){var $a="oninput"in document;if(!$a){var xs=document.createElement("div");xs.setAttribute("oninput","return;"),$a=typeof xs.oninput=="function"}Xi=$a}else Xi=!1;qa=Xi&&(!document.documentMode||9<document.documentMode)}function ba(){ts&&(ts.detachEvent("onpropertychange",rs),xa=ts=null)}function rs(h){if(h.propertyName==="value"&&qn(xa)){var x=[];on(x,xa,h,Cr(h)),pn(pi,x)}}function Yi(h,x,k){h==="focusin"?(ba(),ts=x,xa=k,ts.attachEvent("onpropertychange",rs)):h==="focusout"&&ba()}function Fl(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return qn(xa)}function Uo(h,x){if(h==="click")return qn(x)}function hu(h,x){if(h==="input"||h==="change")return qn(x)}function vl(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var Wn=typeof Object.is=="function"?Object.is:vl;function Ml(h,x){if(Wn(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var k=Object.keys(h),F=Object.keys(x);if(k.length!==F.length)return!1;for(F=0;F<k.length;F++){var Q=k[F];if(!c.call(x,Q)||!Wn(h[Q],x[Q]))return!1}return!0}function Qs(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ti(h,x){var k=Qs(h);h=0;for(var F;k;){if(k.nodeType===3){if(F=h+k.textContent.length,h<=x&&F>=x)return{node:k,offset:x-h};h=F}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Qs(k)}}function Rl(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?Rl(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function Ed(){for(var h=window,x=Ue();x instanceof h.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)h=x.contentWindow;else break;x=Ue(h.document)}return x}function Bl(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function qo(h){var x=Ed(),k=h.focusedElem,F=h.selectionRange;if(x!==k&&k&&k.ownerDocument&&Rl(k.ownerDocument.documentElement,k)){if(F!==null&&Bl(k)){if(x=F.start,h=F.end,h===void 0&&(h=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(h,k.value.length);else if(h=(x=k.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var Q=k.textContent.length,ae=Math.min(F.start,Q);F=F.end===void 0?ae:Math.min(F.end,Q),!h.extend&&ae>F&&(Q=F,F=ae,ae=Q),Q=Ti(k,ae);var Oe=Ti(k,F);Q&&Oe&&(h.rangeCount!==1||h.anchorNode!==Q.node||h.anchorOffset!==Q.offset||h.focusNode!==Oe.node||h.focusOffset!==Oe.offset)&&(x=x.createRange(),x.setStart(Q.node,Q.offset),h.removeAllRanges(),ae>F?(h.addRange(x),h.extend(Oe.node,Oe.offset)):(x.setEnd(Oe.node,Oe.offset),h.addRange(x)))}}for(x=[],h=k;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)h=x[k],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Ji=l&&"documentMode"in document&&11>=document.documentMode,Rs=null,Qi=null,Oi=null,Zi=!1;function wo(h,x,k){var F=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Zi||Rs==null||Rs!==Ue(F)||(F=Rs,"selectionStart"in F&&Bl(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Oi&&Ml(Oi,F)||(Oi=F,F=Qu(Qi,"onSelect"),0<F.length&&(x=new Vi("onSelect","select",null,x,k),h.push({event:x,listeners:F}),x.target=Rs)))}function Bc(h,x){var k={};return k[h.toLowerCase()]=x.toLowerCase(),k["Webkit"+h]="webkit"+x,k["Moz"+h]="moz"+x,k}var gs={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},vs={},ta={};l&&(ta=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Yn(h){if(vs[h])return vs[h];if(!gs[h])return h;var x=gs[h],k;for(k in x)if(x.hasOwnProperty(k)&&k in ta)return vs[h]=x[k];return h}var _n=Yn("animationend"),Sa=Yn("animationiteration"),$o=Yn("animationstart"),mu=Yn("transitionend"),zo=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ho(h,x){zo.set(h,x),i(x,[h])}for(var Ul=0;Ul<Td.length;Ul++){var xi=Td[Ul],gi=xi.toLowerCase(),Xu=xi[0].toUpperCase()+xi.slice(1);Ho(gi,"on"+Xu)}Ho(_n,"onAnimationEnd"),Ho(Sa,"onAnimationIteration"),Ho($o,"onAnimationStart"),Ho("dblclick","onDoubleClick"),Ho("focusin","onFocus"),Ho("focusout","onBlur"),Ho(mu,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xh=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function pu(h,x,k){var F=h.type||"unknown-event";h.currentTarget=k,Ce(F,x,void 0,h),h.currentTarget=null}function Yu(h,x){x=(x&4)!==0;for(var k=0;k<h.length;k++){var F=h[k],Q=F.event;F=F.listeners;e:{var ae=void 0;if(x)for(var Oe=F.length-1;0<=Oe;Oe--){var Ze=F[Oe],ot=Ze.instance,Ot=Ze.currentTarget;if(Ze=Ze.listener,ot!==ae&&Q.isPropagationStopped())break e;pu(Q,Ze,Ot),ae=ot}else for(Oe=0;Oe<F.length;Oe++){if(Ze=F[Oe],ot=Ze.instance,Ot=Ze.currentTarget,Ze=Ze.listener,ot!==ae&&Q.isPropagationStopped())break e;pu(Q,Ze,Ot),ae=ot}}}if(Ne)throw h=He,Ne=!1,He=null,h}function fa(h,x){var k=x[eo];k===void 0&&(k=x[eo]=new Set);var F=h+"__bubble";k.has(F)||(xu(x,h,2,!1),k.add(F))}function qf(h,x,k){var F=0;x&&(F|=4),xu(k,h,F,x)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Od(h){if(!h[Uc]){h[Uc]=!0,a.forEach(function(k){k!=="selectionchange"&&(Xh.has(k)||qf(k,!1,h),qf(k,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[Uc]||(x[Uc]=!0,qf("selectionchange",!1,x))}}function xu(h,x,k,F){switch(cc(x)){case 1:var Q=Mo;break;case 4:Q=Pl;break;default:Q=Ss}k=Q.bind(null,x,k,h),Q=void 0,!On||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Q=!0),F?Q!==void 0?h.addEventListener(x,k,{capture:!0,passive:Q}):h.addEventListener(x,k,!0):Q!==void 0?h.addEventListener(x,k,{passive:Q}):h.addEventListener(x,k,!1)}function Ju(h,x,k,F,Q){var ae=F;if((x&1)===0&&(x&2)===0&&F!==null)e:for(;;){if(F===null)return;var Oe=F.tag;if(Oe===3||Oe===4){var Ze=F.stateNode.containerInfo;if(Ze===Q||Ze.nodeType===8&&Ze.parentNode===Q)break;if(Oe===4)for(Oe=F.return;Oe!==null;){var ot=Oe.tag;if((ot===3||ot===4)&&(ot=Oe.stateNode.containerInfo,ot===Q||ot.nodeType===8&&ot.parentNode===Q))return;Oe=Oe.return}for(;Ze!==null;){if(Oe=zc(Ze),Oe===null)return;if(ot=Oe.tag,ot===5||ot===6){F=ae=Oe;continue e}Ze=Ze.parentNode}}F=F.return}pn(function(){var Ot=ae,er=Cr(k),ar=[];e:{var Qt=zo.get(h);if(Qt!==void 0){var Er=Vi,Fr=h;switch(h){case"keypress":if(mi(k)===0)break e;case"keydown":case"keyup":Er=qr;break;case"focusin":Fr="focus",Er=ua;break;case"focusout":Fr="blur",Er=ua;break;case"beforeblur":case"afterblur":Er=ua;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Er=Ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Er=uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Er=Ua;break;case _n:case Sa:case $o:Er=xl;break;case mu:Er=Ys;break;case"scroll":Er=Dl;break;case"wheel":Er=Bo;break;case"copy":case"cut":case"paste":Er=G;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Er=Sn}var Br=(x&4)!==0,ti=!Br&&h==="scroll",St=Br?Qt!==null?Qt+"Capture":null:Qt;Br=[];for(var mt=Ot,Ct;mt!==null;){Ct=mt;var cr=Ct.stateNode;if(Ct.tag===5&&cr!==null&&(Ct=cr,St!==null&&(cr=rr(mt,St),cr!=null&&Br.push(qc(mt,cr,Ct)))),ti)break;mt=mt.return}0<Br.length&&(Qt=new Er(Qt,Fr,null,k,er),ar.push({event:Qt,listeners:Br}))}}if((x&7)===0){e:{if(Qt=h==="mouseover"||h==="pointerover",Er=h==="mouseout"||h==="pointerout",Qt&&k!==Et&&(Fr=k.relatedTarget||k.fromElement)&&(zc(Fr)||Fr[as]))break e;if((Er||Qt)&&(Qt=er.window===er?er:(Qt=er.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,Er?(Fr=k.relatedTarget||k.toElement,Er=Ot,Fr=Fr?zc(Fr):null,Fr!==null&&(ti=Re(Fr),Fr!==ti||Fr.tag!==5&&Fr.tag!==6)&&(Fr=null)):(Er=null,Fr=Ot),Er!==Fr)){if(Br=Ki,cr="onMouseLeave",St="onMouseEnter",mt="mouse",(h==="pointerout"||h==="pointerover")&&(Br=Sn,cr="onPointerLeave",St="onPointerEnter",mt="pointer"),ti=Er==null?Qt:Hc(Er),Ct=Fr==null?Qt:Hc(Fr),Qt=new Br(cr,mt+"leave",Er,k,er),Qt.target=ti,Qt.relatedTarget=Ct,cr=null,zc(er)===Ot&&(Br=new Br(St,mt+"enter",Fr,k,er),Br.target=Ct,Br.relatedTarget=ti,cr=Br),ti=cr,Er&&Fr)t:{for(Br=Er,St=Fr,mt=0,Ct=Br;Ct;Ct=Pd(Ct))mt++;for(Ct=0,cr=St;cr;cr=Pd(cr))Ct++;for(;0<mt-Ct;)Br=Pd(Br),mt--;for(;0<Ct-mt;)St=Pd(St),Ct--;for(;mt--;){if(Br===St||St!==null&&Br===St.alternate)break t;Br=Pd(Br),St=Pd(St)}Br=null}else Br=null;Er!==null&&R0(ar,Qt,Er,Br,!1),Fr!==null&&ti!==null&&R0(ar,ti,Fr,Br,!0)}}e:{if(Qt=Ot?Hc(Ot):window,Er=Qt.nodeName&&Qt.nodeName.toLowerCase(),Er==="select"||Er==="input"&&Qt.type==="file")var zr=Ms;else if(Rc(Qt))if(qa)zr=hu;else{zr=Fl;var Jr=Yi}else(Er=Qt.nodeName)&&Er.toLowerCase()==="input"&&(Qt.type==="checkbox"||Qt.type==="radio")&&(zr=Uo);if(zr&&(zr=zr(h,Ot))){on(ar,zr,k,er);break e}Jr&&Jr(h,Qt,Ot),h==="focusout"&&(Jr=Qt._wrapperState)&&Jr.controlled&&Qt.type==="number"&&Ie(Qt,"number",Qt.value)}switch(Jr=Ot?Hc(Ot):window,h){case"focusin":(Rc(Jr)||Jr.contentEditable==="true")&&(Rs=Jr,Qi=Ot,Oi=null);break;case"focusout":Oi=Qi=Rs=null;break;case"mousedown":Zi=!0;break;case"contextmenu":case"mouseup":case"dragend":Zi=!1,wo(ar,k,er);break;case"selectionchange":if(Ji)break;case"keydown":case"keyup":wo(ar,k,er)}var Qr;if(vo)e:{switch(h){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else ka?Cd(h,k)&&(xn="onCompositionEnd"):h==="keydown"&&k.keyCode===229&&(xn="onCompositionStart");xn&&(fu&&k.locale!=="ko"&&(ka||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&ka&&(Qr=kd()):(hi=er,Gs="value"in hi?hi.value:hi.textContent,ka=!0)),Jr=Qu(Ot,xn),0<Jr.length&&(xn=new ne(xn,h,null,k,er),ar.push({event:xn,listeners:Jr}),Qr?xn.data=Qr:(Qr=Ad(k),Qr!==null&&(xn.data=Qr)))),(Qr=uu?yo(h,k):gl(h,k))&&(Ot=Qu(Ot,"onBeforeInput"),0<Ot.length&&(er=new ne("onBeforeInput","beforeinput",null,k,er),ar.push({event:er,listeners:Ot}),er.data=Qr))}Yu(ar,x)})}function qc(h,x,k){return{instance:h,listener:x,currentTarget:k}}function Qu(h,x){for(var k=x+"Capture",F=[];h!==null;){var Q=h,ae=Q.stateNode;Q.tag===5&&ae!==null&&(Q=ae,ae=rr(h,k),ae!=null&&F.unshift(qc(h,ae,Q)),ae=rr(h,x),ae!=null&&F.push(qc(h,ae,Q))),h=h.return}return F}function Pd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function R0(h,x,k,F,Q){for(var ae=x._reactName,Oe=[];k!==null&&k!==F;){var Ze=k,ot=Ze.alternate,Ot=Ze.stateNode;if(ot!==null&&ot===F)break;Ze.tag===5&&Ot!==null&&(Ze=Ot,Q?(ot=rr(k,ae),ot!=null&&Oe.unshift(qc(k,ot,Ze))):Q||(ot=rr(k,ae),ot!=null&&Oe.push(qc(k,ot,Ze)))),k=k.return}Oe.length!==0&&h.push({event:x,listeners:Oe})}var $f=/\r\n?/g,Yh=/\u0000|\uFFFD/g;function Zu(h){return(typeof h=="string"?h:""+h).replace($f,`
`).replace(Yh,"")}function ef(h,x,k){if(x=Zu(x),Zu(h)!==x&&k)throw Error(r(425))}function hc(){}var gu=null,vu=null;function zf(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var B0=typeof setTimeout=="function"?setTimeout:void 0,$c=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,Id=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(h){return mc.resolve(null).then(h).catch(yp)}:B0;function yp(h){setTimeout(function(){throw h})}function tf(h,x){var k=x,F=0;do{var Q=k.nextSibling;if(h.removeChild(k),Q&&Q.nodeType===8)if(k=Q.data,k==="/$"){if(F===0){h.removeChild(Q),Vs(x);return}F--}else k!=="$"&&k!=="$?"&&k!=="$!"||F++;k=Q}while(k);Vs(x)}function ns(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function No(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return h;x--}else k==="/$"&&x++}h=h.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),jo="__reactFiber$"+Pi,bu="__reactProps$"+Pi,as="__reactContainer$"+Pi,eo="__reactEvents$"+Pi,wp="__reactListeners$"+Pi,Hf="__reactHandles$"+Pi;function zc(h){var x=h[jo];if(x)return x;for(var k=h.parentNode;k;){if(x=k[as]||k[jo]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(h=No(h);h!==null;){if(k=h[jo])return k;h=No(h)}return x}h=k,k=h.parentNode}return null}function ql(h){return h=h[jo]||h[as],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Hc(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function rf(h){return h[bu]||null}var Wf=[],Wo=-1;function bl(h){return{current:h}}function Jn(h){0>Wo||(h.current=Wf[Wo],Wf[Wo]=null,Wo--)}function ra(h,x){Wo++,Wf[Wo]=h.current,h.current=x}var Wc={},bs=bl(Wc),vi=bl(!1),$l=Wc;function Dd(h,x){var k=h.type.contextTypes;if(!k)return Wc;var F=h.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===x)return F.__reactInternalMemoizedMaskedChildContext;var Q={},ae;for(ae in k)Q[ae]=x[ae];return F&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=Q),Q}function to(h){return h=h.childContextTypes,h!=null}function nf(){Jn(vi),Jn(bs)}function Vf(h,x,k){if(bs.current!==Wc)throw Error(r(168));ra(bs,x),ra(vi,k)}function U0(h,x,k){var F=h.stateNode;if(x=x.childContextTypes,typeof F.getChildContext!="function")return k;F=F.getChildContext();for(var Q in F)if(!(Q in x))throw Error(r(108,se(h)||"Unknown",Q));return ee({},k,F)}function Vc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Wc,$l=bs.current,ra(bs,h),ra(vi,vi.current),!0}function Jh(h,x,k){var F=h.stateNode;if(!F)throw Error(r(169));k?(h=U0(h,x,$l),F.__reactInternalMemoizedMergedChildContext=h,Jn(vi),Jn(bs),ra(bs,h)):Jn(vi),ra(vi,k)}var Vo=null,Ia=!1,C=!1;function M(h){Vo===null?Vo=[h]:Vo.push(h)}function Z(h){Ia=!0,M(h)}function ce(){if(!C&&Vo!==null){C=!0;var h=0,x=_r;try{var k=Vo;for(_r=1;h<k.length;h++){var F=k[h];do F=F(!0);while(F!==null)}Vo=null,Ia=!1}catch(Q){throw Vo!==null&&(Vo=Vo.slice(h+1)),be(sr,ce),Q}finally{_r=x,C=!1}}return null}var ye=[],Ee=0,De=null,Le=0,qe=[],Ve=0,nt=null,Nt=1,kt="";function pt(h,x){ye[Ee++]=Le,ye[Ee++]=De,De=h,Le=x}function Vt(h,x,k){qe[Ve++]=Nt,qe[Ve++]=kt,qe[Ve++]=nt,nt=h;var F=Nt;h=kt;var Q=32-Un(F)-1;F&=~(1<<Q),k+=1;var ae=32-Un(x)+Q;if(30<ae){var Oe=Q-Q%5;ae=(F&(1<<Oe)-1).toString(32),F>>=Oe,Q-=Oe,Nt=1<<32-Un(x)+Q|k<<Q|F,kt=ae+h}else Nt=1<<ae|k<<Q|F,kt=h}function Pt(h){h.return!==null&&(pt(h,1),Vt(h,1,0))}function lt(h){for(;h===De;)De=ye[--Ee],ye[Ee]=null,Le=ye[--Ee],ye[Ee]=null;for(;h===nt;)nt=qe[--Ve],qe[Ve]=null,kt=qe[--Ve],qe[Ve]=null,Nt=qe[--Ve],qe[Ve]=null}var st=null,Ft=null,Lt=!1,$t=null;function hr(h,x){var k=Jc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=h,x=h.deletions,x===null?(h.deletions=[k],h.flags|=16):x.push(k)}function or(h,x){switch(h.tag){case 5:var k=h.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,st=h,Ft=ns(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,st=h,Ft=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=nt!==null?{id:Nt,overflow:kt}:null,h.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Jc(18,null,null,0),k.stateNode=x,k.return=h,h.child=k,st=h,Ft=null,!0):!1;default:return!1}}function Vr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function xr(h){if(Lt){var x=Ft;if(x){var k=x;if(!or(h,x)){if(Vr(h))throw Error(r(418));x=ns(k.nextSibling);var F=st;x&&or(h,x)?hr(F,k):(h.flags=h.flags&-4097|2,Lt=!1,st=h)}}else{if(Vr(h))throw Error(r(418));h.flags=h.flags&-4097|2,Lt=!1,st=h}}}function wn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;st=h}function Tn(h){if(h!==st)return!1;if(!Lt)return wn(h),Lt=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!zf(h.type,h.memoizedProps)),x&&(x=Ft)){if(Vr(h))throw Cn(),Error(r(418));for(;x;)hr(h,x),x=ns(x.nextSibling)}if(wn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="/$"){if(x===0){Ft=ns(h.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}h=h.nextSibling}Ft=null}}else Ft=st?ns(h.stateNode.nextSibling):null;return!0}function Cn(){for(var h=Ft;h;)h=ns(h.nextSibling)}function ln(){Ft=st=null,Lt=!1}function Qn(h){$t===null?$t=[h]:$t.push(h)}var Ln=N.ReactCurrentBatchConfig;function rn(h,x,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var F=k.stateNode}if(!F)throw Error(r(147,h));var Q=F,ae=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ae?x.ref:(x=function(Oe){var Ze=Q.refs;Oe===null?delete Ze[ae]:Ze[ae]=Oe},x._stringRef=ae,x)}if(typeof h!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,h))}return h}function za(h,x){throw h=Object.prototype.toString.call(x),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function Ii(h){var x=h._init;return x(h._payload)}function Ha(h){function x(St,mt){if(h){var Ct=St.deletions;Ct===null?(St.deletions=[mt],St.flags|=16):Ct.push(mt)}}function k(St,mt){if(!h)return null;for(;mt!==null;)x(St,mt),mt=mt.sibling;return null}function F(St,mt){for(St=new Map;mt!==null;)mt.key!==null?St.set(mt.key,mt):St.set(mt.index,mt),mt=mt.sibling;return St}function Q(St,mt){return St=r0(St,mt),St.index=0,St.sibling=null,St}function ae(St,mt,Ct){return St.index=Ct,h?(Ct=St.alternate,Ct!==null?(Ct=Ct.index,Ct<mt?(St.flags|=2,mt):Ct):(St.flags|=2,mt)):(St.flags|=1048576,mt)}function Oe(St){return h&&St.alternate===null&&(St.flags|=2),St}function Ze(St,mt,Ct,cr){return mt===null||mt.tag!==6?(mt=i2(Ct,St.mode,cr),mt.return=St,mt):(mt=Q(mt,Ct),mt.return=St,mt)}function ot(St,mt,Ct,cr){var zr=Ct.type;return zr===A?er(St,mt,Ct.props.children,cr,Ct.key):mt!==null&&(mt.elementType===zr||typeof zr=="object"&&zr!==null&&zr.$$typeof===Y&&Ii(zr)===mt.type)?(cr=Q(mt,Ct.props),cr.ref=rn(St,mt,Ct),cr.return=St,cr):(cr=Qg(Ct.type,Ct.key,Ct.props,null,St.mode,cr),cr.ref=rn(St,mt,Ct),cr.return=St,cr)}function Ot(St,mt,Ct,cr){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==Ct.containerInfo||mt.stateNode.implementation!==Ct.implementation?(mt=o2(Ct,St.mode,cr),mt.return=St,mt):(mt=Q(mt,Ct.children||[]),mt.return=St,mt)}function er(St,mt,Ct,cr,zr){return mt===null||mt.tag!==7?(mt=X0(Ct,St.mode,cr,zr),mt.return=St,mt):(mt=Q(mt,Ct),mt.return=St,mt)}function ar(St,mt,Ct){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return mt=i2(""+mt,St.mode,Ct),mt.return=St,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case S:return Ct=Qg(mt.type,mt.key,mt.props,null,St.mode,Ct),Ct.ref=rn(St,null,mt),Ct.return=St,Ct;case E:return mt=o2(mt,St.mode,Ct),mt.return=St,mt;case Y:var cr=mt._init;return ar(St,cr(mt._payload),Ct)}if(ue(mt)||X(mt))return mt=X0(mt,St.mode,Ct,null),mt.return=St,mt;za(St,mt)}return null}function Qt(St,mt,Ct,cr){var zr=mt!==null?mt.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return zr!==null?null:Ze(St,mt,""+Ct,cr);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case S:return Ct.key===zr?ot(St,mt,Ct,cr):null;case E:return Ct.key===zr?Ot(St,mt,Ct,cr):null;case Y:return zr=Ct._init,Qt(St,mt,zr(Ct._payload),cr)}if(ue(Ct)||X(Ct))return zr!==null?null:er(St,mt,Ct,cr,null);za(St,Ct)}return null}function Er(St,mt,Ct,cr,zr){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return St=St.get(Ct)||null,Ze(mt,St,""+cr,zr);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case S:return St=St.get(cr.key===null?Ct:cr.key)||null,ot(mt,St,cr,zr);case E:return St=St.get(cr.key===null?Ct:cr.key)||null,Ot(mt,St,cr,zr);case Y:var Jr=cr._init;return Er(St,mt,Ct,Jr(cr._payload),zr)}if(ue(cr)||X(cr))return St=St.get(Ct)||null,er(mt,St,cr,zr,null);za(mt,cr)}return null}function Fr(St,mt,Ct,cr){for(var zr=null,Jr=null,Qr=mt,xn=mt=0,io=null;Qr!==null&&xn<Ct.length;xn++){Qr.index>xn?(io=Qr,Qr=null):io=Qr.sibling;var ha=Qt(St,Qr,Ct[xn],cr);if(ha===null){Qr===null&&(Qr=io);break}h&&Qr&&ha.alternate===null&&x(St,Qr),mt=ae(ha,mt,xn),Jr===null?zr=ha:Jr.sibling=ha,Jr=ha,Qr=io}if(xn===Ct.length)return k(St,Qr),Lt&&pt(St,xn),zr;if(Qr===null){for(;xn<Ct.length;xn++)Qr=ar(St,Ct[xn],cr),Qr!==null&&(mt=ae(Qr,mt,xn),Jr===null?zr=Qr:Jr.sibling=Qr,Jr=Qr);return Lt&&pt(St,xn),zr}for(Qr=F(St,Qr);xn<Ct.length;xn++)io=Er(Qr,St,xn,Ct[xn],cr),io!==null&&(h&&io.alternate!==null&&Qr.delete(io.key===null?xn:io.key),mt=ae(io,mt,xn),Jr===null?zr=io:Jr.sibling=io,Jr=io);return h&&Qr.forEach(function(n0){return x(St,n0)}),Lt&&pt(St,xn),zr}function Br(St,mt,Ct,cr){var zr=X(Ct);if(typeof zr!="function")throw Error(r(150));if(Ct=zr.call(Ct),Ct==null)throw Error(r(151));for(var Jr=zr=null,Qr=mt,xn=mt=0,io=null,ha=Ct.next();Qr!==null&&!ha.done;xn++,ha=Ct.next()){Qr.index>xn?(io=Qr,Qr=null):io=Qr.sibling;var n0=Qt(St,Qr,ha.value,cr);if(n0===null){Qr===null&&(Qr=io);break}h&&Qr&&n0.alternate===null&&x(St,Qr),mt=ae(n0,mt,xn),Jr===null?zr=n0:Jr.sibling=n0,Jr=n0,Qr=io}if(ha.done)return k(St,Qr),Lt&&pt(St,xn),zr;if(Qr===null){for(;!ha.done;xn++,ha=Ct.next())ha=ar(St,ha.value,cr),ha!==null&&(mt=ae(ha,mt,xn),Jr===null?zr=ha:Jr.sibling=ha,Jr=ha);return Lt&&pt(St,xn),zr}for(Qr=F(St,Qr);!ha.done;xn++,ha=Ct.next())ha=Er(Qr,St,xn,ha.value,cr),ha!==null&&(h&&ha.alternate!==null&&Qr.delete(ha.key===null?xn:ha.key),mt=ae(ha,mt,xn),Jr===null?zr=ha:Jr.sibling=ha,Jr=ha);return h&&Qr.forEach(function(JB){return x(St,JB)}),Lt&&pt(St,xn),zr}function ti(St,mt,Ct,cr){if(typeof Ct=="object"&&Ct!==null&&Ct.type===A&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case S:e:{for(var zr=Ct.key,Jr=mt;Jr!==null;){if(Jr.key===zr){if(zr=Ct.type,zr===A){if(Jr.tag===7){k(St,Jr.sibling),mt=Q(Jr,Ct.props.children),mt.return=St,St=mt;break e}}else if(Jr.elementType===zr||typeof zr=="object"&&zr!==null&&zr.$$typeof===Y&&Ii(zr)===Jr.type){k(St,Jr.sibling),mt=Q(Jr,Ct.props),mt.ref=rn(St,Jr,Ct),mt.return=St,St=mt;break e}k(St,Jr);break}else x(St,Jr);Jr=Jr.sibling}Ct.type===A?(mt=X0(Ct.props.children,St.mode,cr,Ct.key),mt.return=St,St=mt):(cr=Qg(Ct.type,Ct.key,Ct.props,null,St.mode,cr),cr.ref=rn(St,mt,Ct),cr.return=St,St=cr)}return Oe(St);case E:e:{for(Jr=Ct.key;mt!==null;){if(mt.key===Jr)if(mt.tag===4&&mt.stateNode.containerInfo===Ct.containerInfo&&mt.stateNode.implementation===Ct.implementation){k(St,mt.sibling),mt=Q(mt,Ct.children||[]),mt.return=St,St=mt;break e}else{k(St,mt);break}else x(St,mt);mt=mt.sibling}mt=o2(Ct,St.mode,cr),mt.return=St,St=mt}return Oe(St);case Y:return Jr=Ct._init,ti(St,mt,Jr(Ct._payload),cr)}if(ue(Ct))return Fr(St,mt,Ct,cr);if(X(Ct))return Br(St,mt,Ct,cr);za(St,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"?(Ct=""+Ct,mt!==null&&mt.tag===6?(k(St,mt.sibling),mt=Q(mt,Ct),mt.return=St,St=mt):(k(St,mt),mt=i2(Ct,St.mode,cr),mt.return=St,St=mt),Oe(St)):k(St,mt)}return ti}var ys=Ha(!0),Zn=Ha(!1),Cs=bl(null),bi=null,Wa=null,Da=null;function Bs(){Da=Wa=bi=null}function Di(h){var x=Cs.current;Jn(Cs),h._currentValue=x}function Go(h,x,k){for(;h!==null;){var F=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,F!==null&&(F.childLanes|=x)):F!==null&&(F.childLanes&x)!==x&&(F.childLanes|=x),h===k)break;h=h.return}}function Va(h,x){bi=h,Da=Wa=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&(Kl=!0),h.firstContext=null)}function Qa(h){var x=h._currentValue;if(Da!==h)if(h={context:h,memoizedValue:x,next:null},Wa===null){if(bi===null)throw Error(r(308));Wa=h,bi.dependencies={lanes:0,firstContext:h}}else Wa=Wa.next=h;return x}var As=null;function Gc(h){As===null?As=[h]:As.push(h)}function ro(h,x,k,F){var Q=x.interleaved;return Q===null?(k.next=k,Gc(x)):(k.next=Q.next,Q.next=k),x.interleaved=k,Vn(h,F)}function Vn(h,x){h.lanes|=x;var k=h.alternate;for(k!==null&&(k.lanes|=x),k=h,h=h.return;h!==null;)h.childLanes|=x,k=h.alternate,k!==null&&(k.childLanes|=x),k=h,h=h.return;return k.tag===3?k.stateNode:null}var zl=!1;function Ld(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yu(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ko(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function ko(h,x,k){var F=h.updateQueue;if(F===null)return null;if(F=F.shared,(sa&2)!==0){var Q=F.pending;return Q===null?x.next=x:(x.next=Q.next,Q.next=x),F.pending=x,Vn(h,k)}return Q=F.interleaved,Q===null?(x.next=x,Gc(F)):(x.next=Q.next,Q.next=x),F.interleaved=x,Vn(h,k)}function pc(h,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var F=x.lanes;F&=h.pendingLanes,k|=F,x.lanes=k,Mt(h,k)}}function So(h,x){var k=h.updateQueue,F=h.alternate;if(F!==null&&(F=F.updateQueue,k===F)){var Q=null,ae=null;if(k=k.firstBaseUpdate,k!==null){do{var Oe={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};ae===null?Q=ae=Oe:ae=ae.next=Oe,k=k.next}while(k!==null);ae===null?Q=ae=x:ae=ae.next=x}else Q=ae=x;k={baseState:F.baseState,firstBaseUpdate:Q,lastBaseUpdate:ae,shared:F.shared,effects:F.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=x:h.next=x,k.lastBaseUpdate=x}function Hl(h,x,k,F){var Q=h.updateQueue;zl=!1;var ae=Q.firstBaseUpdate,Oe=Q.lastBaseUpdate,Ze=Q.shared.pending;if(Ze!==null){Q.shared.pending=null;var ot=Ze,Ot=ot.next;ot.next=null,Oe===null?ae=Ot:Oe.next=Ot,Oe=ot;var er=h.alternate;er!==null&&(er=er.updateQueue,Ze=er.lastBaseUpdate,Ze!==Oe&&(Ze===null?er.firstBaseUpdate=Ot:Ze.next=Ot,er.lastBaseUpdate=ot))}if(ae!==null){var ar=Q.baseState;Oe=0,er=Ot=ot=null,Ze=ae;do{var Qt=Ze.lane,Er=Ze.eventTime;if((F&Qt)===Qt){er!==null&&(er=er.next={eventTime:Er,lane:0,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null});e:{var Fr=h,Br=Ze;switch(Qt=x,Er=k,Br.tag){case 1:if(Fr=Br.payload,typeof Fr=="function"){ar=Fr.call(Er,ar,Qt);break e}ar=Fr;break e;case 3:Fr.flags=Fr.flags&-65537|128;case 0:if(Fr=Br.payload,Qt=typeof Fr=="function"?Fr.call(Er,ar,Qt):Fr,Qt==null)break e;ar=ee({},ar,Qt);break e;case 2:zl=!0}}Ze.callback!==null&&Ze.lane!==0&&(h.flags|=64,Qt=Q.effects,Qt===null?Q.effects=[Ze]:Qt.push(Ze))}else Er={eventTime:Er,lane:Qt,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null},er===null?(Ot=er=Er,ot=ar):er=er.next=Er,Oe|=Qt;if(Ze=Ze.next,Ze===null){if(Ze=Q.shared.pending,Ze===null)break;Qt=Ze,Ze=Qt.next,Qt.next=null,Q.lastBaseUpdate=Qt,Q.shared.pending=null}}while(!0);if(er===null&&(ot=ar),Q.baseState=ot,Q.firstBaseUpdate=Ot,Q.lastBaseUpdate=er,x=Q.shared.interleaved,x!==null){Q=x;do Oe|=Q.lane,Q=Q.next;while(Q!==x)}else ae===null&&(Q.shared.lanes=0);W0|=Oe,h.lanes=Oe,h.memoizedState=ar}}function Fd(h,x,k){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var F=h[x],Q=F.callback;if(Q!==null){if(F.callback=null,F=k,typeof Q!="function")throw Error(r(191,Q));Q.call(F)}}}var wu={},_o=bl(wu),Nu=bl(wu),Kc=bl(wu);function xc(h){if(h===wu)throw Error(r(174));return h}function ju(h,x){switch(ra(Kc,x),ra(Nu,h),ra(_o,wu),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:ze(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=ze(x,h)}Jn(_o),ra(_o,x)}function Wl(){Jn(_o),Jn(Nu),Jn(Kc)}function Qh(h){xc(Kc.current);var x=xc(_o.current),k=ze(x,h.type);x!==k&&(ra(Nu,h),ra(_o,k))}function af(h){Nu.current===h&&(Jn(_o),Jn(Nu))}var ga=bl(0);function Zs(h){for(var x=h;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var gc=[];function q0(){for(var h=0;h<gc.length;h++)gc[h]._workInProgressVersionPrimary=null;gc.length=0}var Md=N.ReactCurrentDispatcher,Gf=N.ReactCurrentBatchConfig,Vl=0,La=null,ws=null,ss=null,ku=!1,vc=!1,Xc=0,$0=0;function Es(){throw Error(r(321))}function Kf(h,x){if(x===null)return!1;for(var k=0;k<x.length&&k<h.length;k++)if(!Wn(h[k],x[k]))return!1;return!0}function sf(h,x,k,F,Q,ae){if(Vl=ae,La=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Md.current=h===null||h.memoizedState===null?jB:kB,h=k(F,Q),vc){ae=0;do{if(vc=!1,Xc=0,25<=ae)throw Error(r(301));ae+=1,ss=ws=null,x.updateQueue=null,Md.current=SB,h=k(F,Q)}while(vc)}if(Md.current=Rg,x=ws!==null&&ws.next!==null,Vl=0,ss=ws=La=null,ku=!1,x)throw Error(r(300));return h}function Gl(){var h=Xc!==0;return Xc=0,h}function Xo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?La.memoizedState=ss=h:ss=ss.next=h,ss}function no(){if(ws===null){var h=La.alternate;h=h!==null?h.memoizedState:null}else h=ws.next;var x=ss===null?La.memoizedState:ss.next;if(x!==null)ss=x,ws=h;else{if(h===null)throw Error(r(310));ws=h,h={memoizedState:ws.memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},ss===null?La.memoizedState=ss=h:ss=ss.next=h}return ss}function of(h,x){return typeof x=="function"?x(h):x}function Xf(h){var x=no(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var F=ws,Q=F.baseQueue,ae=k.pending;if(ae!==null){if(Q!==null){var Oe=Q.next;Q.next=ae.next,ae.next=Oe}F.baseQueue=Q=ae,k.pending=null}if(Q!==null){ae=Q.next,F=F.baseState;var Ze=Oe=null,ot=null,Ot=ae;do{var er=Ot.lane;if((Vl&er)===er)ot!==null&&(ot=ot.next={lane:0,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null}),F=Ot.hasEagerState?Ot.eagerState:h(F,Ot.action);else{var ar={lane:er,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null};ot===null?(Ze=ot=ar,Oe=F):ot=ot.next=ar,La.lanes|=er,W0|=er}Ot=Ot.next}while(Ot!==null&&Ot!==ae);ot===null?Oe=F:ot.next=Ze,Wn(F,x.memoizedState)||(Kl=!0),x.memoizedState=F,x.baseState=Oe,x.baseQueue=ot,k.lastRenderedState=F}if(h=k.interleaved,h!==null){Q=h;do ae=Q.lane,La.lanes|=ae,W0|=ae,Q=Q.next;while(Q!==h)}else Q===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function bc(h){var x=no(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var F=k.dispatch,Q=k.pending,ae=x.memoizedState;if(Q!==null){k.pending=null;var Oe=Q=Q.next;do ae=h(ae,Oe.action),Oe=Oe.next;while(Oe!==Q);Wn(ae,x.memoizedState)||(Kl=!0),x.memoizedState=ae,x.baseQueue===null&&(x.baseState=ae),k.lastRenderedState=ae}return[ae,F]}function Rd(){}function lf(h,x){var k=La,F=no(),Q=x(),ae=!Wn(F.memoizedState,Q);if(ae&&(F.memoizedState=Q,Kl=!0),F=F.queue,_t(H0.bind(null,k,F,h),[h]),F.getSnapshot!==x||ae||ss!==null&&ss.memoizedState.tag&1){if(k.flags|=2048,me(9,z0.bind(null,k,F,Q,x),void 0,null),so===null)throw Error(r(349));(Vl&30)!==0||ao(k,x,Q)}return Q}function ao(h,x,k){h.flags|=16384,h={getSnapshot:x,value:k},x=La.updateQueue,x===null?(x={lastEffect:null,stores:null},La.updateQueue=x,x.stores=[h]):(k=x.stores,k===null?x.stores=[h]:k.push(h))}function z0(h,x,k,F){x.value=k,x.getSnapshot=F,yc(x)&&cf(h)}function H0(h,x,k){return k(function(){yc(x)&&cf(h)})}function yc(h){var x=h.getSnapshot;h=h.value;try{var k=x();return!Wn(h,k)}catch{return!0}}function cf(h){var x=Vn(h,1);x!==null&&$d(x,h,1,-1)}function L(h){var x=Xo();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:of,lastRenderedState:h},x.queue=h,h=h.dispatch=NB.bind(null,La,h),[x.memoizedState,h]}function me(h,x,k,F){return h={tag:h,create:x,destroy:k,deps:F,next:null},x=La.updateQueue,x===null?(x={lastEffect:null,stores:null},La.updateQueue=x,x.lastEffect=h.next=h):(k=x.lastEffect,k===null?x.lastEffect=h.next=h:(F=k.next,k.next=h,h.next=F,x.lastEffect=h)),h}function we(){return no().memoizedState}function Je(h,x,k,F){var Q=Xo();La.flags|=h,Q.memoizedState=me(1|x,k,void 0,F===void 0?null:F)}function it(h,x,k,F){var Q=no();F=F===void 0?null:F;var ae=void 0;if(ws!==null){var Oe=ws.memoizedState;if(ae=Oe.destroy,F!==null&&Kf(F,Oe.deps)){Q.memoizedState=me(x,k,ae,F);return}}La.flags|=h,Q.memoizedState=me(1|x,k,ae,F)}function Ut(h,x){return Je(8390656,8,h,x)}function _t(h,x){return it(2048,8,h,x)}function Xt(h,x){return it(4,2,h,x)}function Tr(h,x){return it(4,4,h,x)}function vn(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function na(h,x,k){return k=k!=null?k.concat([h]):null,it(4,4,vn.bind(null,x,h),k)}function aa(){}function ei(h,x){var k=no();x=x===void 0?null:x;var F=k.memoizedState;return F!==null&&x!==null&&Kf(x,F[1])?F[0]:(k.memoizedState=[h,x],h)}function Yf(h,x){var k=no();x=x===void 0?null:x;var F=k.memoizedState;return F!==null&&x!==null&&Kf(x,F[1])?F[0]:(h=h(),k.memoizedState=[h,x],h)}function Iy(h,x,k){return(Vl&21)===0?(h.baseState&&(h.baseState=!1,Kl=!0),h.memoizedState=k):(Wn(k,x)||(k=Pn(),La.lanes|=k,W0|=k,h.baseState=!0),x)}function yB(h,x){var k=_r;_r=k!==0&&4>k?k:4,h(!0);var F=Gf.transition;Gf.transition={};try{h(!1),x()}finally{_r=k,Gf.transition=F}}function u_(){return no().memoizedState}function wB(h,x,k){var F=e0(h);if(k={lane:F,action:k,hasEagerState:!1,eagerState:null,next:null},f_(h))h_(x,k);else if(k=ro(h,x,k,F),k!==null){var Q=wl();$d(k,h,F,Q),m_(k,x,F)}}function NB(h,x,k){var F=e0(h),Q={lane:F,action:k,hasEagerState:!1,eagerState:null,next:null};if(f_(h))h_(x,Q);else{var ae=h.alternate;if(h.lanes===0&&(ae===null||ae.lanes===0)&&(ae=x.lastRenderedReducer,ae!==null))try{var Oe=x.lastRenderedState,Ze=ae(Oe,k);if(Q.hasEagerState=!0,Q.eagerState=Ze,Wn(Ze,Oe)){var ot=x.interleaved;ot===null?(Q.next=Q,Gc(x)):(Q.next=ot.next,ot.next=Q),x.interleaved=Q;return}}catch{}k=ro(h,x,Q,F),k!==null&&(Q=wl(),$d(k,h,F,Q),m_(k,x,F))}}function f_(h){var x=h.alternate;return h===La||x!==null&&x===La}function h_(h,x){vc=ku=!0;var k=h.pending;k===null?x.next=x:(x.next=k.next,k.next=x),h.pending=x}function m_(h,x,k){if((k&4194240)!==0){var F=x.lanes;F&=h.pendingLanes,k|=F,x.lanes=k,Mt(h,k)}}var Rg={readContext:Qa,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},jB={readContext:Qa,useCallback:function(h,x){return Xo().memoizedState=[h,x===void 0?null:x],h},useContext:Qa,useEffect:Ut,useImperativeHandle:function(h,x,k){return k=k!=null?k.concat([h]):null,Je(4194308,4,vn.bind(null,x,h),k)},useLayoutEffect:function(h,x){return Je(4194308,4,h,x)},useInsertionEffect:function(h,x){return Je(4,2,h,x)},useMemo:function(h,x){var k=Xo();return x=x===void 0?null:x,h=h(),k.memoizedState=[h,x],h},useReducer:function(h,x,k){var F=Xo();return x=k!==void 0?k(x):x,F.memoizedState=F.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},F.queue=h,h=h.dispatch=wB.bind(null,La,h),[F.memoizedState,h]},useRef:function(h){var x=Xo();return h={current:h},x.memoizedState=h},useState:L,useDebugValue:aa,useDeferredValue:function(h){return Xo().memoizedState=h},useTransition:function(){var h=L(!1),x=h[0];return h=yB.bind(null,h[1]),Xo().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,k){var F=La,Q=Xo();if(Lt){if(k===void 0)throw Error(r(407));k=k()}else{if(k=x(),so===null)throw Error(r(349));(Vl&30)!==0||ao(F,x,k)}Q.memoizedState=k;var ae={value:k,getSnapshot:x};return Q.queue=ae,Ut(H0.bind(null,F,ae,h),[h]),F.flags|=2048,me(9,z0.bind(null,F,ae,k,x),void 0,null),k},useId:function(){var h=Xo(),x=so.identifierPrefix;if(Lt){var k=kt,F=Nt;k=(F&~(1<<32-Un(F)-1)).toString(32)+k,x=":"+x+"R"+k,k=Xc++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=$0++,x=":"+x+"r"+k.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},kB={readContext:Qa,useCallback:ei,useContext:Qa,useEffect:_t,useImperativeHandle:na,useInsertionEffect:Xt,useLayoutEffect:Tr,useMemo:Yf,useReducer:Xf,useRef:we,useState:function(){return Xf(of)},useDebugValue:aa,useDeferredValue:function(h){var x=no();return Iy(x,ws.memoizedState,h)},useTransition:function(){var h=Xf(of)[0],x=no().memoizedState;return[h,x]},useMutableSource:Rd,useSyncExternalStore:lf,useId:u_,unstable_isNewReconciler:!1},SB={readContext:Qa,useCallback:ei,useContext:Qa,useEffect:_t,useImperativeHandle:na,useInsertionEffect:Xt,useLayoutEffect:Tr,useMemo:Yf,useReducer:bc,useRef:we,useState:function(){return bc(of)},useDebugValue:aa,useDeferredValue:function(h){var x=no();return ws===null?x.memoizedState=h:Iy(x,ws.memoizedState,h)},useTransition:function(){var h=bc(of)[0],x=no().memoizedState;return[h,x]},useMutableSource:Rd,useSyncExternalStore:lf,useId:u_,unstable_isNewReconciler:!1};function Bd(h,x){if(h&&h.defaultProps){x=ee({},x),h=h.defaultProps;for(var k in h)x[k]===void 0&&(x[k]=h[k]);return x}return x}function Dy(h,x,k,F){x=h.memoizedState,k=k(F,x),k=k==null?x:ee({},x,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var Bg={isMounted:function(h){return(h=h._reactInternals)?Re(h)===h:!1},enqueueSetState:function(h,x,k){h=h._reactInternals;var F=wl(),Q=e0(h),ae=Ko(F,Q);ae.payload=x,k!=null&&(ae.callback=k),x=ko(h,ae,Q),x!==null&&($d(x,h,Q,F),pc(x,h,Q))},enqueueReplaceState:function(h,x,k){h=h._reactInternals;var F=wl(),Q=e0(h),ae=Ko(F,Q);ae.tag=1,ae.payload=x,k!=null&&(ae.callback=k),x=ko(h,ae,Q),x!==null&&($d(x,h,Q,F),pc(x,h,Q))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var k=wl(),F=e0(h),Q=Ko(k,F);Q.tag=2,x!=null&&(Q.callback=x),x=ko(h,Q,F),x!==null&&($d(x,h,F,k),pc(x,h,F))}};function p_(h,x,k,F,Q,ae,Oe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(F,ae,Oe):x.prototype&&x.prototype.isPureReactComponent?!Ml(k,F)||!Ml(Q,ae):!0}function x_(h,x,k){var F=!1,Q=Wc,ae=x.contextType;return typeof ae=="object"&&ae!==null?ae=Qa(ae):(Q=to(x)?$l:bs.current,F=x.contextTypes,ae=(F=F!=null)?Dd(h,Q):Wc),x=new x(k,ae),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Bg,h.stateNode=x,x._reactInternals=h,F&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=Q,h.__reactInternalMemoizedMaskedChildContext=ae),x}function g_(h,x,k,F){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,F),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,F),x.state!==h&&Bg.enqueueReplaceState(x,x.state,null)}function Ly(h,x,k,F){var Q=h.stateNode;Q.props=k,Q.state=h.memoizedState,Q.refs={},Ld(h);var ae=x.contextType;typeof ae=="object"&&ae!==null?Q.context=Qa(ae):(ae=to(x)?$l:bs.current,Q.context=Dd(h,ae)),Q.state=h.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(Dy(h,x,ae,k),Q.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(x=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),x!==Q.state&&Bg.enqueueReplaceState(Q,Q.state,null),Hl(h,k,Q,F),Q.state=h.memoizedState),typeof Q.componentDidMount=="function"&&(h.flags|=4194308)}function Zh(h,x){try{var k="",F=x;do k+=q(F),F=F.return;while(F);var Q=k}catch(ae){Q=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:h,source:x,stack:Q,digest:null}}function Fy(h,x,k){return{value:h,source:null,stack:k??null,digest:x??null}}function My(h,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var _B=typeof WeakMap=="function"?WeakMap:Map;function v_(h,x,k){k=Ko(-1,k),k.tag=3,k.payload={element:null};var F=x.value;return k.callback=function(){Vg||(Vg=!0,Qy=F),My(h,x)},k}function b_(h,x,k){k=Ko(-1,k),k.tag=3;var F=h.type.getDerivedStateFromError;if(typeof F=="function"){var Q=x.value;k.payload=function(){return F(Q)},k.callback=function(){My(h,x)}}var ae=h.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(k.callback=function(){My(h,x),typeof F!="function"&&(Qf===null?Qf=new Set([this]):Qf.add(this));var Oe=x.stack;this.componentDidCatch(x.value,{componentStack:Oe!==null?Oe:""})}),k}function y_(h,x,k){var F=h.pingCache;if(F===null){F=h.pingCache=new _B;var Q=new Set;F.set(x,Q)}else Q=F.get(x),Q===void 0&&(Q=new Set,F.set(x,Q));Q.has(k)||(Q.add(k),h=UB.bind(null,h,x,k),x.then(h,h))}function w_(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function N_(h,x,k,F,Q){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Ko(-1,1),x.tag=2,ko(k,x,1))),k.lanes|=1),h):(h.flags|=65536,h.lanes=Q,h)}var CB=N.ReactCurrentOwner,Kl=!1;function yl(h,x,k,F){x.child=h===null?Zn(x,null,k,F):ys(x,h.child,k,F)}function j_(h,x,k,F,Q){k=k.render;var ae=x.ref;return Va(x,Q),F=sf(h,x,k,F,ae,Q),k=Gl(),h!==null&&!Kl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Q,df(h,x,Q)):(Lt&&k&&Pt(x),x.flags|=1,yl(h,x,F,Q),x.child)}function k_(h,x,k,F,Q){if(h===null){var ae=k.type;return typeof ae=="function"&&!s2(ae)&&ae.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=ae,S_(h,x,ae,F,Q)):(h=Qg(k.type,null,F,x,x.mode,Q),h.ref=x.ref,h.return=x,x.child=h)}if(ae=h.child,(h.lanes&Q)===0){var Oe=ae.memoizedProps;if(k=k.compare,k=k!==null?k:Ml,k(Oe,F)&&h.ref===x.ref)return df(h,x,Q)}return x.flags|=1,h=r0(ae,F),h.ref=x.ref,h.return=x,x.child=h}function S_(h,x,k,F,Q){if(h!==null){var ae=h.memoizedProps;if(Ml(ae,F)&&h.ref===x.ref)if(Kl=!1,x.pendingProps=F=ae,(h.lanes&Q)!==0)(h.flags&131072)!==0&&(Kl=!0);else return x.lanes=h.lanes,df(h,x,Q)}return Ry(h,x,k,F,Q)}function __(h,x,k){var F=x.pendingProps,Q=F.children,ae=h!==null?h.memoizedState:null;if(F.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},ra(tm,wc),wc|=k;else{if((k&1073741824)===0)return h=ae!==null?ae.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,ra(tm,wc),wc|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=ae!==null?ae.baseLanes:k,ra(tm,wc),wc|=F}else ae!==null?(F=ae.baseLanes|k,x.memoizedState=null):F=k,ra(tm,wc),wc|=F;return yl(h,x,Q,k),x.child}function C_(h,x){var k=x.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function Ry(h,x,k,F,Q){var ae=to(k)?$l:bs.current;return ae=Dd(x,ae),Va(x,Q),k=sf(h,x,k,F,ae,Q),F=Gl(),h!==null&&!Kl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Q,df(h,x,Q)):(Lt&&F&&Pt(x),x.flags|=1,yl(h,x,k,Q),x.child)}function A_(h,x,k,F,Q){if(to(k)){var ae=!0;Vc(x)}else ae=!1;if(Va(x,Q),x.stateNode===null)qg(h,x),x_(x,k,F),Ly(x,k,F,Q),F=!0;else if(h===null){var Oe=x.stateNode,Ze=x.memoizedProps;Oe.props=Ze;var ot=Oe.context,Ot=k.contextType;typeof Ot=="object"&&Ot!==null?Ot=Qa(Ot):(Ot=to(k)?$l:bs.current,Ot=Dd(x,Ot));var er=k.getDerivedStateFromProps,ar=typeof er=="function"||typeof Oe.getSnapshotBeforeUpdate=="function";ar||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(Ze!==F||ot!==Ot)&&g_(x,Oe,F,Ot),zl=!1;var Qt=x.memoizedState;Oe.state=Qt,Hl(x,F,Oe,Q),ot=x.memoizedState,Ze!==F||Qt!==ot||vi.current||zl?(typeof er=="function"&&(Dy(x,k,er,F),ot=x.memoizedState),(Ze=zl||p_(x,k,Ze,F,Qt,ot,Ot))?(ar||typeof Oe.UNSAFE_componentWillMount!="function"&&typeof Oe.componentWillMount!="function"||(typeof Oe.componentWillMount=="function"&&Oe.componentWillMount(),typeof Oe.UNSAFE_componentWillMount=="function"&&Oe.UNSAFE_componentWillMount()),typeof Oe.componentDidMount=="function"&&(x.flags|=4194308)):(typeof Oe.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=F,x.memoizedState=ot),Oe.props=F,Oe.state=ot,Oe.context=Ot,F=Ze):(typeof Oe.componentDidMount=="function"&&(x.flags|=4194308),F=!1)}else{Oe=x.stateNode,yu(h,x),Ze=x.memoizedProps,Ot=x.type===x.elementType?Ze:Bd(x.type,Ze),Oe.props=Ot,ar=x.pendingProps,Qt=Oe.context,ot=k.contextType,typeof ot=="object"&&ot!==null?ot=Qa(ot):(ot=to(k)?$l:bs.current,ot=Dd(x,ot));var Er=k.getDerivedStateFromProps;(er=typeof Er=="function"||typeof Oe.getSnapshotBeforeUpdate=="function")||typeof Oe.UNSAFE_componentWillReceiveProps!="function"&&typeof Oe.componentWillReceiveProps!="function"||(Ze!==ar||Qt!==ot)&&g_(x,Oe,F,ot),zl=!1,Qt=x.memoizedState,Oe.state=Qt,Hl(x,F,Oe,Q);var Fr=x.memoizedState;Ze!==ar||Qt!==Fr||vi.current||zl?(typeof Er=="function"&&(Dy(x,k,Er,F),Fr=x.memoizedState),(Ot=zl||p_(x,k,Ot,F,Qt,Fr,ot)||!1)?(er||typeof Oe.UNSAFE_componentWillUpdate!="function"&&typeof Oe.componentWillUpdate!="function"||(typeof Oe.componentWillUpdate=="function"&&Oe.componentWillUpdate(F,Fr,ot),typeof Oe.UNSAFE_componentWillUpdate=="function"&&Oe.UNSAFE_componentWillUpdate(F,Fr,ot)),typeof Oe.componentDidUpdate=="function"&&(x.flags|=4),typeof Oe.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof Oe.componentDidUpdate!="function"||Ze===h.memoizedProps&&Qt===h.memoizedState||(x.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||Ze===h.memoizedProps&&Qt===h.memoizedState||(x.flags|=1024),x.memoizedProps=F,x.memoizedState=Fr),Oe.props=F,Oe.state=Fr,Oe.context=ot,F=Ot):(typeof Oe.componentDidUpdate!="function"||Ze===h.memoizedProps&&Qt===h.memoizedState||(x.flags|=4),typeof Oe.getSnapshotBeforeUpdate!="function"||Ze===h.memoizedProps&&Qt===h.memoizedState||(x.flags|=1024),F=!1)}return By(h,x,k,F,ae,Q)}function By(h,x,k,F,Q,ae){C_(h,x);var Oe=(x.flags&128)!==0;if(!F&&!Oe)return Q&&Jh(x,k,!1),df(h,x,ae);F=x.stateNode,CB.current=x;var Ze=Oe&&typeof k.getDerivedStateFromError!="function"?null:F.render();return x.flags|=1,h!==null&&Oe?(x.child=ys(x,h.child,null,ae),x.child=ys(x,null,Ze,ae)):yl(h,x,Ze,ae),x.memoizedState=F.state,Q&&Jh(x,k,!0),x.child}function E_(h){var x=h.stateNode;x.pendingContext?Vf(h,x.pendingContext,x.pendingContext!==x.context):x.context&&Vf(h,x.context,!1),ju(h,x.containerInfo)}function T_(h,x,k,F,Q){return ln(),Qn(Q),x.flags|=256,yl(h,x,k,F),x.child}var Uy={dehydrated:null,treeContext:null,retryLane:0};function qy(h){return{baseLanes:h,cachePool:null,transitions:null}}function O_(h,x,k){var F=x.pendingProps,Q=ga.current,ae=!1,Oe=(x.flags&128)!==0,Ze;if((Ze=Oe)||(Ze=h!==null&&h.memoizedState===null?!1:(Q&2)!==0),Ze?(ae=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(Q|=1),ra(ga,Q&1),h===null)return xr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(Oe=F.children,h=F.fallback,ae?(F=x.mode,ae=x.child,Oe={mode:"hidden",children:Oe},(F&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=Oe):ae=Zg(Oe,F,0,null),h=X0(h,F,k,null),ae.return=x,h.return=x,ae.sibling=h,x.child=ae,x.child.memoizedState=qy(k),x.memoizedState=Uy,h):$y(x,Oe));if(Q=h.memoizedState,Q!==null&&(Ze=Q.dehydrated,Ze!==null))return AB(h,x,Oe,F,Ze,Q,k);if(ae){ae=F.fallback,Oe=x.mode,Q=h.child,Ze=Q.sibling;var ot={mode:"hidden",children:F.children};return(Oe&1)===0&&x.child!==Q?(F=x.child,F.childLanes=0,F.pendingProps=ot,x.deletions=null):(F=r0(Q,ot),F.subtreeFlags=Q.subtreeFlags&14680064),Ze!==null?ae=r0(Ze,ae):(ae=X0(ae,Oe,k,null),ae.flags|=2),ae.return=x,F.return=x,F.sibling=ae,x.child=F,F=ae,ae=x.child,Oe=h.child.memoizedState,Oe=Oe===null?qy(k):{baseLanes:Oe.baseLanes|k,cachePool:null,transitions:Oe.transitions},ae.memoizedState=Oe,ae.childLanes=h.childLanes&~k,x.memoizedState=Uy,F}return ae=h.child,h=ae.sibling,F=r0(ae,{mode:"visible",children:F.children}),(x.mode&1)===0&&(F.lanes=k),F.return=x,F.sibling=null,h!==null&&(k=x.deletions,k===null?(x.deletions=[h],x.flags|=16):k.push(h)),x.child=F,x.memoizedState=null,F}function $y(h,x){return x=Zg({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function Ug(h,x,k,F){return F!==null&&Qn(F),ys(x,h.child,null,k),h=$y(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function AB(h,x,k,F,Q,ae,Oe){if(k)return x.flags&256?(x.flags&=-257,F=Fy(Error(r(422))),Ug(h,x,Oe,F)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(ae=F.fallback,Q=x.mode,F=Zg({mode:"visible",children:F.children},Q,0,null),ae=X0(ae,Q,Oe,null),ae.flags|=2,F.return=x,ae.return=x,F.sibling=ae,x.child=F,(x.mode&1)!==0&&ys(x,h.child,null,Oe),x.child.memoizedState=qy(Oe),x.memoizedState=Uy,ae);if((x.mode&1)===0)return Ug(h,x,Oe,null);if(Q.data==="$!"){if(F=Q.nextSibling&&Q.nextSibling.dataset,F)var Ze=F.dgst;return F=Ze,ae=Error(r(419)),F=Fy(ae,F,void 0),Ug(h,x,Oe,F)}if(Ze=(Oe&h.childLanes)!==0,Kl||Ze){if(F=so,F!==null){switch(Oe&-Oe){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}Q=(Q&(F.suspendedLanes|Oe))!==0?0:Q,Q!==0&&Q!==ae.retryLane&&(ae.retryLane=Q,Vn(h,Q),$d(F,h,Q,-1))}return a2(),F=Fy(Error(r(421))),Ug(h,x,Oe,F)}return Q.data==="$?"?(x.flags|=128,x.child=h.child,x=qB.bind(null,h),Q._reactRetry=x,null):(h=ae.treeContext,Ft=ns(Q.nextSibling),st=x,Lt=!0,$t=null,h!==null&&(qe[Ve++]=Nt,qe[Ve++]=kt,qe[Ve++]=nt,Nt=h.id,kt=h.overflow,nt=x),x=$y(x,F.children),x.flags|=4096,x)}function P_(h,x,k){h.lanes|=x;var F=h.alternate;F!==null&&(F.lanes|=x),Go(h.return,x,k)}function zy(h,x,k,F,Q){var ae=h.memoizedState;ae===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:F,tail:k,tailMode:Q}:(ae.isBackwards=x,ae.rendering=null,ae.renderingStartTime=0,ae.last=F,ae.tail=k,ae.tailMode=Q)}function I_(h,x,k){var F=x.pendingProps,Q=F.revealOrder,ae=F.tail;if(yl(h,x,F.children,k),F=ga.current,(F&2)!==0)F=F&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&P_(h,k,x);else if(h.tag===19)P_(h,k,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}F&=1}if(ra(ga,F),(x.mode&1)===0)x.memoizedState=null;else switch(Q){case"forwards":for(k=x.child,Q=null;k!==null;)h=k.alternate,h!==null&&Zs(h)===null&&(Q=k),k=k.sibling;k=Q,k===null?(Q=x.child,x.child=null):(Q=k.sibling,k.sibling=null),zy(x,!1,Q,k,ae);break;case"backwards":for(k=null,Q=x.child,x.child=null;Q!==null;){if(h=Q.alternate,h!==null&&Zs(h)===null){x.child=Q;break}h=Q.sibling,Q.sibling=k,k=Q,Q=h}zy(x,!0,k,null,ae);break;case"together":zy(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function qg(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function df(h,x,k){if(h!==null&&(x.dependencies=h.dependencies),W0|=x.lanes,(k&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(r(153));if(x.child!==null){for(h=x.child,k=r0(h,h.pendingProps),x.child=k,k.return=x;h.sibling!==null;)h=h.sibling,k=k.sibling=r0(h,h.pendingProps),k.return=x;k.sibling=null}return x.child}function EB(h,x,k){switch(x.tag){case 3:E_(x),ln();break;case 5:Qh(x);break;case 1:to(x.type)&&Vc(x);break;case 4:ju(x,x.stateNode.containerInfo);break;case 10:var F=x.type._context,Q=x.memoizedProps.value;ra(Cs,F._currentValue),F._currentValue=Q;break;case 13:if(F=x.memoizedState,F!==null)return F.dehydrated!==null?(ra(ga,ga.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?O_(h,x,k):(ra(ga,ga.current&1),h=df(h,x,k),h!==null?h.sibling:null);ra(ga,ga.current&1);break;case 19:if(F=(k&x.childLanes)!==0,(h.flags&128)!==0){if(F)return I_(h,x,k);x.flags|=128}if(Q=x.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),ra(ga,ga.current),F)break;return null;case 22:case 23:return x.lanes=0,__(h,x,k)}return df(h,x,k)}var D_,Hy,L_,F_;D_=function(h,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Hy=function(){},L_=function(h,x,k,F){var Q=h.memoizedProps;if(Q!==F){h=x.stateNode,xc(_o.current);var ae=null;switch(k){case"input":Q=Te(h,Q),F=Te(h,F),ae=[];break;case"select":Q=ee({},Q,{value:void 0}),F=ee({},F,{value:void 0}),ae=[];break;case"textarea":Q=Ae(h,Q),F=Ae(h,F),ae=[];break;default:typeof Q.onClick!="function"&&typeof F.onClick=="function"&&(h.onclick=hc)}Gt(k,F);var Oe;k=null;for(Ot in Q)if(!F.hasOwnProperty(Ot)&&Q.hasOwnProperty(Ot)&&Q[Ot]!=null)if(Ot==="style"){var Ze=Q[Ot];for(Oe in Ze)Ze.hasOwnProperty(Oe)&&(k||(k={}),k[Oe]="")}else Ot!=="dangerouslySetInnerHTML"&&Ot!=="children"&&Ot!=="suppressContentEditableWarning"&&Ot!=="suppressHydrationWarning"&&Ot!=="autoFocus"&&(s.hasOwnProperty(Ot)?ae||(ae=[]):(ae=ae||[]).push(Ot,null));for(Ot in F){var ot=F[Ot];if(Ze=Q?.[Ot],F.hasOwnProperty(Ot)&&ot!==Ze&&(ot!=null||Ze!=null))if(Ot==="style")if(Ze){for(Oe in Ze)!Ze.hasOwnProperty(Oe)||ot&&ot.hasOwnProperty(Oe)||(k||(k={}),k[Oe]="");for(Oe in ot)ot.hasOwnProperty(Oe)&&Ze[Oe]!==ot[Oe]&&(k||(k={}),k[Oe]=ot[Oe])}else k||(ae||(ae=[]),ae.push(Ot,k)),k=ot;else Ot==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,Ze=Ze?Ze.__html:void 0,ot!=null&&Ze!==ot&&(ae=ae||[]).push(Ot,ot)):Ot==="children"?typeof ot!="string"&&typeof ot!="number"||(ae=ae||[]).push(Ot,""+ot):Ot!=="suppressContentEditableWarning"&&Ot!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ot)?(ot!=null&&Ot==="onScroll"&&fa("scroll",h),ae||Ze===ot||(ae=[])):(ae=ae||[]).push(Ot,ot))}k&&(ae=ae||[]).push("style",k);var Ot=ae;(x.updateQueue=Ot)&&(x.flags|=4)}},F_=function(h,x,k,F){k!==F&&(x.flags|=4)};function Np(h,x){if(!Lt)switch(h.tailMode){case"hidden":x=h.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var F=null;k!==null;)k.alternate!==null&&(F=k),k=k.sibling;F===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:F.sibling=null}}function Yo(h){var x=h.alternate!==null&&h.alternate.child===h.child,k=0,F=0;if(x)for(var Q=h.child;Q!==null;)k|=Q.lanes|Q.childLanes,F|=Q.subtreeFlags&14680064,F|=Q.flags&14680064,Q.return=h,Q=Q.sibling;else for(Q=h.child;Q!==null;)k|=Q.lanes|Q.childLanes,F|=Q.subtreeFlags,F|=Q.flags,Q.return=h,Q=Q.sibling;return h.subtreeFlags|=F,h.childLanes=k,x}function TB(h,x,k){var F=x.pendingProps;switch(lt(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(x),null;case 1:return to(x.type)&&nf(),Yo(x),null;case 3:return F=x.stateNode,Wl(),Jn(vi),Jn(bs),q0(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(h===null||h.child===null)&&(Tn(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,$t!==null&&(t2($t),$t=null))),Hy(h,x),Yo(x),null;case 5:af(x);var Q=xc(Kc.current);if(k=x.type,h!==null&&x.stateNode!=null)L_(h,x,k,F,Q),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!F){if(x.stateNode===null)throw Error(r(166));return Yo(x),null}if(h=xc(_o.current),Tn(x)){F=x.stateNode,k=x.type;var ae=x.memoizedProps;switch(F[jo]=x,F[bu]=ae,h=(x.mode&1)!==0,k){case"dialog":fa("cancel",F),fa("close",F);break;case"iframe":case"object":case"embed":fa("load",F);break;case"video":case"audio":for(Q=0;Q<fc.length;Q++)fa(fc[Q],F);break;case"source":fa("error",F);break;case"img":case"image":case"link":fa("error",F),fa("load",F);break;case"details":fa("toggle",F);break;case"input":oe(F,ae),fa("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!ae.multiple},fa("invalid",F);break;case"textarea":Qe(F,ae),fa("invalid",F)}Gt(k,ae),Q=null;for(var Oe in ae)if(ae.hasOwnProperty(Oe)){var Ze=ae[Oe];Oe==="children"?typeof Ze=="string"?F.textContent!==Ze&&(ae.suppressHydrationWarning!==!0&&ef(F.textContent,Ze,h),Q=["children",Ze]):typeof Ze=="number"&&F.textContent!==""+Ze&&(ae.suppressHydrationWarning!==!0&&ef(F.textContent,Ze,h),Q=["children",""+Ze]):s.hasOwnProperty(Oe)&&Ze!=null&&Oe==="onScroll"&&fa("scroll",F)}switch(k){case"input":$e(F),je(F,ae,!0);break;case"textarea":$e(F),fe(F);break;case"select":case"option":break;default:typeof ae.onClick=="function"&&(F.onclick=hc)}F=Q,x.updateQueue=F,F!==null&&(x.flags|=4)}else{Oe=Q.nodeType===9?Q:Q.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=_e(k)),h==="http://www.w3.org/1999/xhtml"?k==="script"?(h=Oe.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof F.is=="string"?h=Oe.createElement(k,{is:F.is}):(h=Oe.createElement(k),k==="select"&&(Oe=h,F.multiple?Oe.multiple=!0:F.size&&(Oe.size=F.size))):h=Oe.createElementNS(h,k),h[jo]=x,h[bu]=F,D_(h,x,!1,!1),x.stateNode=h;e:{switch(Oe=Ye(k,F),k){case"dialog":fa("cancel",h),fa("close",h),Q=F;break;case"iframe":case"object":case"embed":fa("load",h),Q=F;break;case"video":case"audio":for(Q=0;Q<fc.length;Q++)fa(fc[Q],h);Q=F;break;case"source":fa("error",h),Q=F;break;case"img":case"image":case"link":fa("error",h),fa("load",h),Q=F;break;case"details":fa("toggle",h),Q=F;break;case"input":oe(h,F),Q=Te(h,F),fa("invalid",h);break;case"option":Q=F;break;case"select":h._wrapperState={wasMultiple:!!F.multiple},Q=ee({},F,{value:void 0}),fa("invalid",h);break;case"textarea":Qe(h,F),Q=Ae(h,F),fa("invalid",h);break;default:Q=F}Gt(k,Q),Ze=Q;for(ae in Ze)if(Ze.hasOwnProperty(ae)){var ot=Ze[ae];ae==="style"?At(h,ot):ae==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&Fe(h,ot)):ae==="children"?typeof ot=="string"?(k!=="textarea"||ot!=="")&&Me(h,ot):typeof ot=="number"&&Me(h,""+ot):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?ot!=null&&ae==="onScroll"&&fa("scroll",h):ot!=null&&j(h,ae,ot,Oe))}switch(k){case"input":$e(h),je(h,F,!1);break;case"textarea":$e(h),fe(h);break;case"option":F.value!=null&&h.setAttribute("value",""+pe(F.value));break;case"select":h.multiple=!!F.multiple,ae=F.value,ae!=null?de(h,!!F.multiple,ae,!1):F.defaultValue!=null&&de(h,!!F.multiple,F.defaultValue,!0);break;default:typeof Q.onClick=="function"&&(h.onclick=hc)}switch(k){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Yo(x),null;case 6:if(h&&x.stateNode!=null)F_(h,x,h.memoizedProps,F);else{if(typeof F!="string"&&x.stateNode===null)throw Error(r(166));if(k=xc(Kc.current),xc(_o.current),Tn(x)){if(F=x.stateNode,k=x.memoizedProps,F[jo]=x,(ae=F.nodeValue!==k)&&(h=st,h!==null))switch(h.tag){case 3:ef(F.nodeValue,k,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&ef(F.nodeValue,k,(h.mode&1)!==0)}ae&&(x.flags|=4)}else F=(k.nodeType===9?k:k.ownerDocument).createTextNode(F),F[jo]=x,x.stateNode=F}return Yo(x),null;case 13:if(Jn(ga),F=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Lt&&Ft!==null&&(x.mode&1)!==0&&(x.flags&128)===0)Cn(),ln(),x.flags|=98560,ae=!1;else if(ae=Tn(x),F!==null&&F.dehydrated!==null){if(h===null){if(!ae)throw Error(r(318));if(ae=x.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(r(317));ae[jo]=x}else ln(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Yo(x),ae=!1}else $t!==null&&(t2($t),$t=null),ae=!0;if(!ae)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(F=F!==null,F!==(h!==null&&h.memoizedState!==null)&&F&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(ga.current&1)!==0?Li===0&&(Li=3):a2())),x.updateQueue!==null&&(x.flags|=4),Yo(x),null);case 4:return Wl(),Hy(h,x),h===null&&Od(x.stateNode.containerInfo),Yo(x),null;case 10:return Di(x.type._context),Yo(x),null;case 17:return to(x.type)&&nf(),Yo(x),null;case 19:if(Jn(ga),ae=x.memoizedState,ae===null)return Yo(x),null;if(F=(x.flags&128)!==0,Oe=ae.rendering,Oe===null)if(F)Np(ae,!1);else{if(Li!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(Oe=Zs(h),Oe!==null){for(x.flags|=128,Np(ae,!1),F=Oe.updateQueue,F!==null&&(x.updateQueue=F,x.flags|=4),x.subtreeFlags=0,F=k,k=x.child;k!==null;)ae=k,h=F,ae.flags&=14680066,Oe=ae.alternate,Oe===null?(ae.childLanes=0,ae.lanes=h,ae.child=null,ae.subtreeFlags=0,ae.memoizedProps=null,ae.memoizedState=null,ae.updateQueue=null,ae.dependencies=null,ae.stateNode=null):(ae.childLanes=Oe.childLanes,ae.lanes=Oe.lanes,ae.child=Oe.child,ae.subtreeFlags=0,ae.deletions=null,ae.memoizedProps=Oe.memoizedProps,ae.memoizedState=Oe.memoizedState,ae.updateQueue=Oe.updateQueue,ae.type=Oe.type,h=Oe.dependencies,ae.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),k=k.sibling;return ra(ga,ga.current&1|2),x.child}h=h.sibling}ae.tail!==null&&wt()>rm&&(x.flags|=128,F=!0,Np(ae,!1),x.lanes=4194304)}else{if(!F)if(h=Zs(Oe),h!==null){if(x.flags|=128,F=!0,k=h.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),Np(ae,!0),ae.tail===null&&ae.tailMode==="hidden"&&!Oe.alternate&&!Lt)return Yo(x),null}else 2*wt()-ae.renderingStartTime>rm&&k!==1073741824&&(x.flags|=128,F=!0,Np(ae,!1),x.lanes=4194304);ae.isBackwards?(Oe.sibling=x.child,x.child=Oe):(k=ae.last,k!==null?k.sibling=Oe:x.child=Oe,ae.last=Oe)}return ae.tail!==null?(x=ae.tail,ae.rendering=x,ae.tail=x.sibling,ae.renderingStartTime=wt(),x.sibling=null,k=ga.current,ra(ga,F?k&1|2:k&1),x):(Yo(x),null);case 22:case 23:return n2(),F=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==F&&(x.flags|=8192),F&&(x.mode&1)!==0?(wc&1073741824)!==0&&(Yo(x),x.subtreeFlags&6&&(x.flags|=8192)):Yo(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function OB(h,x){switch(lt(x),x.tag){case 1:return to(x.type)&&nf(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return Wl(),Jn(vi),Jn(bs),q0(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return af(x),null;case 13:if(Jn(ga),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(r(340));ln()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return Jn(ga),null;case 4:return Wl(),null;case 10:return Di(x.type._context),null;case 22:case 23:return n2(),null;case 24:return null;default:return null}}var $g=!1,Jo=!1,PB=typeof WeakSet=="function"?WeakSet:Set,Ir=null;function em(h,x){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(F){Us(h,x,F)}else k.current=null}function Wy(h,x,k){try{k()}catch(F){Us(h,x,F)}}var M_=!1;function IB(h,x){if(gu=Fo,h=Ed(),Bl(h)){if("selectionStart"in h)var k={start:h.selectionStart,end:h.selectionEnd};else e:{k=(k=h.ownerDocument)&&k.defaultView||window;var F=k.getSelection&&k.getSelection();if(F&&F.rangeCount!==0){k=F.anchorNode;var Q=F.anchorOffset,ae=F.focusNode;F=F.focusOffset;try{k.nodeType,ae.nodeType}catch{k=null;break e}var Oe=0,Ze=-1,ot=-1,Ot=0,er=0,ar=h,Qt=null;t:for(;;){for(var Er;ar!==k||Q!==0&&ar.nodeType!==3||(Ze=Oe+Q),ar!==ae||F!==0&&ar.nodeType!==3||(ot=Oe+F),ar.nodeType===3&&(Oe+=ar.nodeValue.length),(Er=ar.firstChild)!==null;)Qt=ar,ar=Er;for(;;){if(ar===h)break t;if(Qt===k&&++Ot===Q&&(Ze=Oe),Qt===ae&&++er===F&&(ot=Oe),(Er=ar.nextSibling)!==null)break;ar=Qt,Qt=ar.parentNode}ar=Er}k=Ze===-1||ot===-1?null:{start:Ze,end:ot}}else k=null}k=k||{start:0,end:0}}else k=null;for(vu={focusedElem:h,selectionRange:k},Fo=!1,Ir=x;Ir!==null;)if(x=Ir,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,Ir=h;else for(;Ir!==null;){x=Ir;try{var Fr=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Fr!==null){var Br=Fr.memoizedProps,ti=Fr.memoizedState,St=x.stateNode,mt=St.getSnapshotBeforeUpdate(x.elementType===x.type?Br:Bd(x.type,Br),ti);St.__reactInternalSnapshotBeforeUpdate=mt}break;case 3:var Ct=x.stateNode.containerInfo;Ct.nodeType===1?Ct.textContent="":Ct.nodeType===9&&Ct.documentElement&&Ct.removeChild(Ct.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(cr){Us(x,x.return,cr)}if(h=x.sibling,h!==null){h.return=x.return,Ir=h;break}Ir=x.return}return Fr=M_,M_=!1,Fr}function jp(h,x,k){var F=x.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Q=F=F.next;do{if((Q.tag&h)===h){var ae=Q.destroy;Q.destroy=void 0,ae!==void 0&&Wy(x,k,ae)}Q=Q.next}while(Q!==F)}}function zg(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&h)===h){var F=k.create;k.destroy=F()}k=k.next}while(k!==x)}}function Vy(h){var x=h.ref;if(x!==null){var k=h.stateNode;h.tag,h=k,typeof x=="function"?x(h):x.current=h}}function R_(h){var x=h.alternate;x!==null&&(h.alternate=null,R_(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[jo],delete x[bu],delete x[eo],delete x[wp],delete x[Hf])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function B_(h){return h.tag===5||h.tag===3||h.tag===4}function U_(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||B_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Gy(h,x,k){var F=h.tag;if(F===5||F===6)h=h.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(h,x):k.insertBefore(h,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(h,k)):(x=k,x.appendChild(h)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=hc));else if(F!==4&&(h=h.child,h!==null))for(Gy(h,x,k),h=h.sibling;h!==null;)Gy(h,x,k),h=h.sibling}function Ky(h,x,k){var F=h.tag;if(F===5||F===6)h=h.stateNode,x?k.insertBefore(h,x):k.appendChild(h);else if(F!==4&&(h=h.child,h!==null))for(Ky(h,x,k),h=h.sibling;h!==null;)Ky(h,x,k),h=h.sibling}var Co=null,Ud=!1;function Jf(h,x,k){for(k=k.child;k!==null;)q_(h,x,k),k=k.sibling}function q_(h,x,k){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(fn,k)}catch{}switch(k.tag){case 5:Jo||em(k,x);case 6:var F=Co,Q=Ud;Co=null,Jf(h,x,k),Co=F,Ud=Q,Co!==null&&(Ud?(h=Co,k=k.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)):Co.removeChild(k.stateNode));break;case 18:Co!==null&&(Ud?(h=Co,k=k.stateNode,h.nodeType===8?tf(h.parentNode,k):h.nodeType===1&&tf(h,k),Vs(h)):tf(Co,k.stateNode));break;case 4:F=Co,Q=Ud,Co=k.stateNode.containerInfo,Ud=!0,Jf(h,x,k),Co=F,Ud=Q;break;case 0:case 11:case 14:case 15:if(!Jo&&(F=k.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){Q=F=F.next;do{var ae=Q,Oe=ae.destroy;ae=ae.tag,Oe!==void 0&&((ae&2)!==0||(ae&4)!==0)&&Wy(k,x,Oe),Q=Q.next}while(Q!==F)}Jf(h,x,k);break;case 1:if(!Jo&&(em(k,x),F=k.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=k.memoizedProps,F.state=k.memoizedState,F.componentWillUnmount()}catch(Ze){Us(k,x,Ze)}Jf(h,x,k);break;case 21:Jf(h,x,k);break;case 22:k.mode&1?(Jo=(F=Jo)||k.memoizedState!==null,Jf(h,x,k),Jo=F):Jf(h,x,k);break;default:Jf(h,x,k)}}function $_(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new PB),x.forEach(function(F){var Q=$B.bind(null,h,F);k.has(F)||(k.add(F),F.then(Q,Q))})}}function qd(h,x){var k=x.deletions;if(k!==null)for(var F=0;F<k.length;F++){var Q=k[F];try{var ae=h,Oe=x,Ze=Oe;e:for(;Ze!==null;){switch(Ze.tag){case 5:Co=Ze.stateNode,Ud=!1;break e;case 3:Co=Ze.stateNode.containerInfo,Ud=!0;break e;case 4:Co=Ze.stateNode.containerInfo,Ud=!0;break e}Ze=Ze.return}if(Co===null)throw Error(r(160));q_(ae,Oe,Q),Co=null,Ud=!1;var ot=Q.alternate;ot!==null&&(ot.return=null),Q.return=null}catch(Ot){Us(Q,x,Ot)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)z_(x,h),x=x.sibling}function z_(h,x){var k=h.alternate,F=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(qd(x,h),Su(h),F&4){try{jp(3,h,h.return),zg(3,h)}catch(Br){Us(h,h.return,Br)}try{jp(5,h,h.return)}catch(Br){Us(h,h.return,Br)}}break;case 1:qd(x,h),Su(h),F&512&&k!==null&&em(k,k.return);break;case 5:if(qd(x,h),Su(h),F&512&&k!==null&&em(k,k.return),h.flags&32){var Q=h.stateNode;try{Me(Q,"")}catch(Br){Us(h,h.return,Br)}}if(F&4&&(Q=h.stateNode,Q!=null)){var ae=h.memoizedProps,Oe=k!==null?k.memoizedProps:ae,Ze=h.type,ot=h.updateQueue;if(h.updateQueue=null,ot!==null)try{Ze==="input"&&ae.type==="radio"&&ae.name!=null&&te(Q,ae),Ye(Ze,Oe);var Ot=Ye(Ze,ae);for(Oe=0;Oe<ot.length;Oe+=2){var er=ot[Oe],ar=ot[Oe+1];er==="style"?At(Q,ar):er==="dangerouslySetInnerHTML"?Fe(Q,ar):er==="children"?Me(Q,ar):j(Q,er,ar,Ot)}switch(Ze){case"input":Pe(Q,ae);break;case"textarea":ge(Q,ae);break;case"select":var Qt=Q._wrapperState.wasMultiple;Q._wrapperState.wasMultiple=!!ae.multiple;var Er=ae.value;Er!=null?de(Q,!!ae.multiple,Er,!1):Qt!==!!ae.multiple&&(ae.defaultValue!=null?de(Q,!!ae.multiple,ae.defaultValue,!0):de(Q,!!ae.multiple,ae.multiple?[]:"",!1))}Q[bu]=ae}catch(Br){Us(h,h.return,Br)}}break;case 6:if(qd(x,h),Su(h),F&4){if(h.stateNode===null)throw Error(r(162));Q=h.stateNode,ae=h.memoizedProps;try{Q.nodeValue=ae}catch(Br){Us(h,h.return,Br)}}break;case 3:if(qd(x,h),Su(h),F&4&&k!==null&&k.memoizedState.isDehydrated)try{Vs(x.containerInfo)}catch(Br){Us(h,h.return,Br)}break;case 4:qd(x,h),Su(h);break;case 13:qd(x,h),Su(h),Q=h.child,Q.flags&8192&&(ae=Q.memoizedState!==null,Q.stateNode.isHidden=ae,!ae||Q.alternate!==null&&Q.alternate.memoizedState!==null||(Jy=wt())),F&4&&$_(h);break;case 22:if(er=k!==null&&k.memoizedState!==null,h.mode&1?(Jo=(Ot=Jo)||er,qd(x,h),Jo=Ot):qd(x,h),Su(h),F&8192){if(Ot=h.memoizedState!==null,(h.stateNode.isHidden=Ot)&&!er&&(h.mode&1)!==0)for(Ir=h,er=h.child;er!==null;){for(ar=Ir=er;Ir!==null;){switch(Qt=Ir,Er=Qt.child,Qt.tag){case 0:case 11:case 14:case 15:jp(4,Qt,Qt.return);break;case 1:em(Qt,Qt.return);var Fr=Qt.stateNode;if(typeof Fr.componentWillUnmount=="function"){F=Qt,k=Qt.return;try{x=F,Fr.props=x.memoizedProps,Fr.state=x.memoizedState,Fr.componentWillUnmount()}catch(Br){Us(F,k,Br)}}break;case 5:em(Qt,Qt.return);break;case 22:if(Qt.memoizedState!==null){V_(ar);continue}}Er!==null?(Er.return=Qt,Ir=Er):V_(ar)}er=er.sibling}e:for(er=null,ar=h;;){if(ar.tag===5){if(er===null){er=ar;try{Q=ar.stateNode,Ot?(ae=Q.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none"):(Ze=ar.stateNode,ot=ar.memoizedProps.style,Oe=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,Ze.style.display=bt("display",Oe))}catch(Br){Us(h,h.return,Br)}}}else if(ar.tag===6){if(er===null)try{ar.stateNode.nodeValue=Ot?"":ar.memoizedProps}catch(Br){Us(h,h.return,Br)}}else if((ar.tag!==22&&ar.tag!==23||ar.memoizedState===null||ar===h)&&ar.child!==null){ar.child.return=ar,ar=ar.child;continue}if(ar===h)break e;for(;ar.sibling===null;){if(ar.return===null||ar.return===h)break e;er===ar&&(er=null),ar=ar.return}er===ar&&(er=null),ar.sibling.return=ar.return,ar=ar.sibling}}break;case 19:qd(x,h),Su(h),F&4&&$_(h);break;case 21:break;default:qd(x,h),Su(h)}}function Su(h){var x=h.flags;if(x&2){try{e:{for(var k=h.return;k!==null;){if(B_(k)){var F=k;break e}k=k.return}throw Error(r(160))}switch(F.tag){case 5:var Q=F.stateNode;F.flags&32&&(Me(Q,""),F.flags&=-33);var ae=U_(h);Ky(h,ae,Q);break;case 3:case 4:var Oe=F.stateNode.containerInfo,Ze=U_(h);Gy(h,Ze,Oe);break;default:throw Error(r(161))}}catch(ot){Us(h,h.return,ot)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function DB(h,x,k){Ir=h,H_(h)}function H_(h,x,k){for(var F=(h.mode&1)!==0;Ir!==null;){var Q=Ir,ae=Q.child;if(Q.tag===22&&F){var Oe=Q.memoizedState!==null||$g;if(!Oe){var Ze=Q.alternate,ot=Ze!==null&&Ze.memoizedState!==null||Jo;Ze=$g;var Ot=Jo;if($g=Oe,(Jo=ot)&&!Ot)for(Ir=Q;Ir!==null;)Oe=Ir,ot=Oe.child,Oe.tag===22&&Oe.memoizedState!==null?G_(Q):ot!==null?(ot.return=Oe,Ir=ot):G_(Q);for(;ae!==null;)Ir=ae,H_(ae),ae=ae.sibling;Ir=Q,$g=Ze,Jo=Ot}W_(h)}else(Q.subtreeFlags&8772)!==0&&ae!==null?(ae.return=Q,Ir=ae):W_(h)}}function W_(h){for(;Ir!==null;){var x=Ir;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Jo||zg(5,x);break;case 1:var F=x.stateNode;if(x.flags&4&&!Jo)if(k===null)F.componentDidMount();else{var Q=x.elementType===x.type?k.memoizedProps:Bd(x.type,k.memoizedProps);F.componentDidUpdate(Q,k.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var ae=x.updateQueue;ae!==null&&Fd(x,ae,F);break;case 3:var Oe=x.updateQueue;if(Oe!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}Fd(x,Oe,k)}break;case 5:var Ze=x.stateNode;if(k===null&&x.flags&4){k=Ze;var ot=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&k.focus();break;case"img":ot.src&&(k.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Ot=x.alternate;if(Ot!==null){var er=Ot.memoizedState;if(er!==null){var ar=er.dehydrated;ar!==null&&Vs(ar)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Jo||x.flags&512&&Vy(x)}catch(Qt){Us(x,x.return,Qt)}}if(x===h){Ir=null;break}if(k=x.sibling,k!==null){k.return=x.return,Ir=k;break}Ir=x.return}}function V_(h){for(;Ir!==null;){var x=Ir;if(x===h){Ir=null;break}var k=x.sibling;if(k!==null){k.return=x.return,Ir=k;break}Ir=x.return}}function G_(h){for(;Ir!==null;){var x=Ir;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{zg(4,x)}catch(ot){Us(x,k,ot)}break;case 1:var F=x.stateNode;if(typeof F.componentDidMount=="function"){var Q=x.return;try{F.componentDidMount()}catch(ot){Us(x,Q,ot)}}var ae=x.return;try{Vy(x)}catch(ot){Us(x,ae,ot)}break;case 5:var Oe=x.return;try{Vy(x)}catch(ot){Us(x,Oe,ot)}}}catch(ot){Us(x,x.return,ot)}if(x===h){Ir=null;break}var Ze=x.sibling;if(Ze!==null){Ze.return=x.return,Ir=Ze;break}Ir=x.return}}var LB=Math.ceil,Hg=N.ReactCurrentDispatcher,Xy=N.ReactCurrentOwner,Yc=N.ReactCurrentBatchConfig,sa=0,so=null,yi=null,Ao=0,wc=0,tm=bl(0),Li=0,kp=null,W0=0,Wg=0,Yy=0,Sp=null,Xl=null,Jy=0,rm=1/0,uf=null,Vg=!1,Qy=null,Qf=null,Gg=!1,Zf=null,Kg=0,_p=0,Zy=null,Xg=-1,Yg=0;function wl(){return(sa&6)!==0?wt():Xg!==-1?Xg:Xg=wt()}function e0(h){return(h.mode&1)===0?1:(sa&2)!==0&&Ao!==0?Ao&-Ao:Ln.transition!==null?(Yg===0&&(Yg=Pn()),Yg):(h=_r,h!==0||(h=window.event,h=h===void 0?16:cc(h.type)),h)}function $d(h,x,k,F){if(50<_p)throw _p=0,Zy=null,Error(r(185));nr(h,k,F),((sa&2)===0||h!==so)&&(h===so&&((sa&2)===0&&(Wg|=k),Li===4&&t0(h,Ao)),Yl(h,F),k===1&&sa===0&&(x.mode&1)===0&&(rm=wt()+500,Ia&&ce()))}function Yl(h,x){var k=h.callbackNode;vr(h,x);var F=dr(h,h===so?Ao:0);if(F===0)k!==null&&Ge(k),h.callbackNode=null,h.callbackPriority=0;else if(x=F&-F,h.callbackPriority!==x){if(k!=null&&Ge(k),x===1)h.tag===0?Z(X_.bind(null,h)):M(X_.bind(null,h)),Id(function(){(sa&6)===0&&ce()}),k=null;else{switch(Kt(F)){case 1:k=sr;break;case 4:k=Yt;break;case 16:k=wr;break;case 536870912:k=$r;break;default:k=wr}k=n6(k,K_.bind(null,h))}h.callbackPriority=x,h.callbackNode=k}}function K_(h,x){if(Xg=-1,Yg=0,(sa&6)!==0)throw Error(r(327));var k=h.callbackNode;if(nm()&&h.callbackNode!==k)return null;var F=dr(h,h===so?Ao:0);if(F===0)return null;if((F&30)!==0||(F&h.expiredLanes)!==0||x)x=Jg(h,F);else{x=F;var Q=sa;sa|=2;var ae=J_();(so!==h||Ao!==x)&&(uf=null,rm=wt()+500,G0(h,x));do try{RB();break}catch(Ze){Y_(h,Ze)}while(!0);Bs(),Hg.current=ae,sa=Q,yi!==null?x=0:(so=null,Ao=0,x=Li)}if(x!==0){if(x===2&&(Q=Rr(h),Q!==0&&(F=Q,x=e2(h,Q))),x===1)throw k=kp,G0(h,0),t0(h,F),Yl(h,wt()),k;if(x===6)t0(h,F);else{if(Q=h.current.alternate,(F&30)===0&&!FB(Q)&&(x=Jg(h,F),x===2&&(ae=Rr(h),ae!==0&&(F=ae,x=e2(h,ae))),x===1))throw k=kp,G0(h,0),t0(h,F),Yl(h,wt()),k;switch(h.finishedWork=Q,h.finishedLanes=F,x){case 0:case 1:throw Error(r(345));case 2:K0(h,Xl,uf);break;case 3:if(t0(h,F),(F&130023424)===F&&(x=Jy+500-wt(),10<x)){if(dr(h,0)!==0)break;if(Q=h.suspendedLanes,(Q&F)!==F){wl(),h.pingedLanes|=h.suspendedLanes&Q;break}h.timeoutHandle=B0(K0.bind(null,h,Xl,uf),x);break}K0(h,Xl,uf);break;case 4:if(t0(h,F),(F&4194240)===F)break;for(x=h.eventTimes,Q=-1;0<F;){var Oe=31-Un(F);ae=1<<Oe,Oe=x[Oe],Oe>Q&&(Q=Oe),F&=~ae}if(F=Q,F=wt()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*LB(F/1960))-F,10<F){h.timeoutHandle=B0(K0.bind(null,h,Xl,uf),F);break}K0(h,Xl,uf);break;case 5:K0(h,Xl,uf);break;default:throw Error(r(329))}}}return Yl(h,wt()),h.callbackNode===k?K_.bind(null,h):null}function e2(h,x){var k=Sp;return h.current.memoizedState.isDehydrated&&(G0(h,x).flags|=256),h=Jg(h,x),h!==2&&(x=Xl,Xl=k,x!==null&&t2(x)),h}function t2(h){Xl===null?Xl=h:Xl.push.apply(Xl,h)}function FB(h){for(var x=h;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var F=0;F<k.length;F++){var Q=k[F],ae=Q.getSnapshot;Q=Q.value;try{if(!Wn(ae(),Q))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function t0(h,x){for(x&=~Yy,x&=~Wg,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var k=31-Un(x),F=1<<k;h[k]=-1,x&=~F}}function X_(h){if((sa&6)!==0)throw Error(r(327));nm();var x=dr(h,0);if((x&1)===0)return Yl(h,wt()),null;var k=Jg(h,x);if(h.tag!==0&&k===2){var F=Rr(h);F!==0&&(x=F,k=e2(h,F))}if(k===1)throw k=kp,G0(h,0),t0(h,x),Yl(h,wt()),k;if(k===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,K0(h,Xl,uf),Yl(h,wt()),null}function r2(h,x){var k=sa;sa|=1;try{return h(x)}finally{sa=k,sa===0&&(rm=wt()+500,Ia&&ce())}}function V0(h){Zf!==null&&Zf.tag===0&&(sa&6)===0&&nm();var x=sa;sa|=1;var k=Yc.transition,F=_r;try{if(Yc.transition=null,_r=1,h)return h()}finally{_r=F,Yc.transition=k,sa=x,(sa&6)===0&&ce()}}function n2(){wc=tm.current,Jn(tm)}function G0(h,x){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==-1&&(h.timeoutHandle=-1,$c(k)),yi!==null)for(k=yi.return;k!==null;){var F=k;switch(lt(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&nf();break;case 3:Wl(),Jn(vi),Jn(bs),q0();break;case 5:af(F);break;case 4:Wl();break;case 13:Jn(ga);break;case 19:Jn(ga);break;case 10:Di(F.type._context);break;case 22:case 23:n2()}k=k.return}if(so=h,yi=h=r0(h.current,null),Ao=wc=x,Li=0,kp=null,Yy=Wg=W0=0,Xl=Sp=null,As!==null){for(x=0;x<As.length;x++)if(k=As[x],F=k.interleaved,F!==null){k.interleaved=null;var Q=F.next,ae=k.pending;if(ae!==null){var Oe=ae.next;ae.next=Q,F.next=Oe}k.pending=F}As=null}return h}function Y_(h,x){do{var k=yi;try{if(Bs(),Md.current=Rg,ku){for(var F=La.memoizedState;F!==null;){var Q=F.queue;Q!==null&&(Q.pending=null),F=F.next}ku=!1}if(Vl=0,ss=ws=La=null,vc=!1,Xc=0,Xy.current=null,k===null||k.return===null){Li=1,kp=x,yi=null;break}e:{var ae=h,Oe=k.return,Ze=k,ot=x;if(x=Ao,Ze.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var Ot=ot,er=Ze,ar=er.tag;if((er.mode&1)===0&&(ar===0||ar===11||ar===15)){var Qt=er.alternate;Qt?(er.updateQueue=Qt.updateQueue,er.memoizedState=Qt.memoizedState,er.lanes=Qt.lanes):(er.updateQueue=null,er.memoizedState=null)}var Er=w_(Oe);if(Er!==null){Er.flags&=-257,N_(Er,Oe,Ze,ae,x),Er.mode&1&&y_(ae,Ot,x),x=Er,ot=Ot;var Fr=x.updateQueue;if(Fr===null){var Br=new Set;Br.add(ot),x.updateQueue=Br}else Fr.add(ot);break e}else{if((x&1)===0){y_(ae,Ot,x),a2();break e}ot=Error(r(426))}}else if(Lt&&Ze.mode&1){var ti=w_(Oe);if(ti!==null){(ti.flags&65536)===0&&(ti.flags|=256),N_(ti,Oe,Ze,ae,x),Qn(Zh(ot,Ze));break e}}ae=ot=Zh(ot,Ze),Li!==4&&(Li=2),Sp===null?Sp=[ae]:Sp.push(ae),ae=Oe;do{switch(ae.tag){case 3:ae.flags|=65536,x&=-x,ae.lanes|=x;var St=v_(ae,ot,x);So(ae,St);break e;case 1:Ze=ot;var mt=ae.type,Ct=ae.stateNode;if((ae.flags&128)===0&&(typeof mt.getDerivedStateFromError=="function"||Ct!==null&&typeof Ct.componentDidCatch=="function"&&(Qf===null||!Qf.has(Ct)))){ae.flags|=65536,x&=-x,ae.lanes|=x;var cr=b_(ae,Ze,x);So(ae,cr);break e}}ae=ae.return}while(ae!==null)}Z_(k)}catch(zr){x=zr,yi===k&&k!==null&&(yi=k=k.return);continue}break}while(!0)}function J_(){var h=Hg.current;return Hg.current=Rg,h===null?Rg:h}function a2(){(Li===0||Li===3||Li===2)&&(Li=4),so===null||(W0&268435455)===0&&(Wg&268435455)===0||t0(so,Ao)}function Jg(h,x){var k=sa;sa|=2;var F=J_();(so!==h||Ao!==x)&&(uf=null,G0(h,x));do try{MB();break}catch(Q){Y_(h,Q)}while(!0);if(Bs(),sa=k,Hg.current=F,yi!==null)throw Error(r(261));return so=null,Ao=0,Li}function MB(){for(;yi!==null;)Q_(yi)}function RB(){for(;yi!==null&&!at();)Q_(yi)}function Q_(h){var x=r6(h.alternate,h,wc);h.memoizedProps=h.pendingProps,x===null?Z_(h):yi=x,Xy.current=null}function Z_(h){var x=h;do{var k=x.alternate;if(h=x.return,(x.flags&32768)===0){if(k=TB(k,x,wc),k!==null){yi=k;return}}else{if(k=OB(k,x),k!==null){k.flags&=32767,yi=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Li=6,yi=null;return}}if(x=x.sibling,x!==null){yi=x;return}yi=x=h}while(x!==null);Li===0&&(Li=5)}function K0(h,x,k){var F=_r,Q=Yc.transition;try{Yc.transition=null,_r=1,BB(h,x,k,F)}finally{Yc.transition=Q,_r=F}return null}function BB(h,x,k,F){do nm();while(Zf!==null);if((sa&6)!==0)throw Error(r(327));k=h.finishedWork;var Q=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var ae=k.lanes|k.childLanes;if(fr(h,ae),h===so&&(yi=so=null,Ao=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||Gg||(Gg=!0,n6(wr,function(){return nm(),null})),ae=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||ae){ae=Yc.transition,Yc.transition=null;var Oe=_r;_r=1;var Ze=sa;sa|=4,Xy.current=null,IB(h,k),z_(k,h),qo(vu),Fo=!!gu,vu=gu=null,h.current=k,DB(k),yt(),sa=Ze,_r=Oe,Yc.transition=ae}else h.current=k;if(Gg&&(Gg=!1,Zf=h,Kg=Q),ae=h.pendingLanes,ae===0&&(Qf=null),ea(k.stateNode),Yl(h,wt()),x!==null)for(F=h.onRecoverableError,k=0;k<x.length;k++)Q=x[k],F(Q.value,{componentStack:Q.stack,digest:Q.digest});if(Vg)throw Vg=!1,h=Qy,Qy=null,h;return(Kg&1)!==0&&h.tag!==0&&nm(),ae=h.pendingLanes,(ae&1)!==0?h===Zy?_p++:(_p=0,Zy=h):_p=0,ce(),null}function nm(){if(Zf!==null){var h=Kt(Kg),x=Yc.transition,k=_r;try{if(Yc.transition=null,_r=16>h?16:h,Zf===null)var F=!1;else{if(h=Zf,Zf=null,Kg=0,(sa&6)!==0)throw Error(r(331));var Q=sa;for(sa|=4,Ir=h.current;Ir!==null;){var ae=Ir,Oe=ae.child;if((Ir.flags&16)!==0){var Ze=ae.deletions;if(Ze!==null){for(var ot=0;ot<Ze.length;ot++){var Ot=Ze[ot];for(Ir=Ot;Ir!==null;){var er=Ir;switch(er.tag){case 0:case 11:case 15:jp(8,er,ae)}var ar=er.child;if(ar!==null)ar.return=er,Ir=ar;else for(;Ir!==null;){er=Ir;var Qt=er.sibling,Er=er.return;if(R_(er),er===Ot){Ir=null;break}if(Qt!==null){Qt.return=Er,Ir=Qt;break}Ir=Er}}}var Fr=ae.alternate;if(Fr!==null){var Br=Fr.child;if(Br!==null){Fr.child=null;do{var ti=Br.sibling;Br.sibling=null,Br=ti}while(Br!==null)}}Ir=ae}}if((ae.subtreeFlags&2064)!==0&&Oe!==null)Oe.return=ae,Ir=Oe;else e:for(;Ir!==null;){if(ae=Ir,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:jp(9,ae,ae.return)}var St=ae.sibling;if(St!==null){St.return=ae.return,Ir=St;break e}Ir=ae.return}}var mt=h.current;for(Ir=mt;Ir!==null;){Oe=Ir;var Ct=Oe.child;if((Oe.subtreeFlags&2064)!==0&&Ct!==null)Ct.return=Oe,Ir=Ct;else e:for(Oe=mt;Ir!==null;){if(Ze=Ir,(Ze.flags&2048)!==0)try{switch(Ze.tag){case 0:case 11:case 15:zg(9,Ze)}}catch(zr){Us(Ze,Ze.return,zr)}if(Ze===Oe){Ir=null;break e}var cr=Ze.sibling;if(cr!==null){cr.return=Ze.return,Ir=cr;break e}Ir=Ze.return}}if(sa=Q,ce(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(fn,h)}catch{}F=!0}return F}finally{_r=k,Yc.transition=x}}return!1}function e6(h,x,k){x=Zh(k,x),x=v_(h,x,1),h=ko(h,x,1),x=wl(),h!==null&&(nr(h,1,x),Yl(h,x))}function Us(h,x,k){if(h.tag===3)e6(h,h,k);else for(;x!==null;){if(x.tag===3){e6(x,h,k);break}else if(x.tag===1){var F=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Qf===null||!Qf.has(F))){h=Zh(k,h),h=b_(x,h,1),x=ko(x,h,1),h=wl(),x!==null&&(nr(x,1,h),Yl(x,h));break}}x=x.return}}function UB(h,x,k){var F=h.pingCache;F!==null&&F.delete(x),x=wl(),h.pingedLanes|=h.suspendedLanes&k,so===h&&(Ao&k)===k&&(Li===4||Li===3&&(Ao&130023424)===Ao&&500>wt()-Jy?G0(h,0):Yy|=k),Yl(h,x)}function t6(h,x){x===0&&((h.mode&1)===0?x=1:(x=Bt,Bt<<=1,(Bt&130023424)===0&&(Bt=4194304)));var k=wl();h=Vn(h,x),h!==null&&(nr(h,x,k),Yl(h,k))}function qB(h){var x=h.memoizedState,k=0;x!==null&&(k=x.retryLane),t6(h,k)}function $B(h,x){var k=0;switch(h.tag){case 13:var F=h.stateNode,Q=h.memoizedState;Q!==null&&(k=Q.retryLane);break;case 19:F=h.stateNode;break;default:throw Error(r(314))}F!==null&&F.delete(x),t6(h,k)}var r6;r6=function(h,x,k){if(h!==null)if(h.memoizedProps!==x.pendingProps||vi.current)Kl=!0;else{if((h.lanes&k)===0&&(x.flags&128)===0)return Kl=!1,EB(h,x,k);Kl=(h.flags&131072)!==0}else Kl=!1,Lt&&(x.flags&1048576)!==0&&Vt(x,Le,x.index);switch(x.lanes=0,x.tag){case 2:var F=x.type;qg(h,x),h=x.pendingProps;var Q=Dd(x,bs.current);Va(x,k),Q=sf(null,x,F,h,Q,k);var ae=Gl();return x.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,to(F)?(ae=!0,Vc(x)):ae=!1,x.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Ld(x),Q.updater=Bg,x.stateNode=Q,Q._reactInternals=x,Ly(x,F,h,k),x=By(null,x,F,!0,ae,k)):(x.tag=0,Lt&&ae&&Pt(x),yl(null,x,Q,k),x=x.child),x;case 16:F=x.elementType;e:{switch(qg(h,x),h=x.pendingProps,Q=F._init,F=Q(F._payload),x.type=F,Q=x.tag=HB(F),h=Bd(F,h),Q){case 0:x=Ry(null,x,F,h,k);break e;case 1:x=A_(null,x,F,h,k);break e;case 11:x=j_(null,x,F,h,k);break e;case 14:x=k_(null,x,F,Bd(F.type,h),k);break e}throw Error(r(306,F,""))}return x;case 0:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Bd(F,Q),Ry(h,x,F,Q,k);case 1:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Bd(F,Q),A_(h,x,F,Q,k);case 3:e:{if(E_(x),h===null)throw Error(r(387));F=x.pendingProps,ae=x.memoizedState,Q=ae.element,yu(h,x),Hl(x,F,null,k);var Oe=x.memoizedState;if(F=Oe.element,ae.isDehydrated)if(ae={element:F,isDehydrated:!1,cache:Oe.cache,pendingSuspenseBoundaries:Oe.pendingSuspenseBoundaries,transitions:Oe.transitions},x.updateQueue.baseState=ae,x.memoizedState=ae,x.flags&256){Q=Zh(Error(r(423)),x),x=T_(h,x,F,k,Q);break e}else if(F!==Q){Q=Zh(Error(r(424)),x),x=T_(h,x,F,k,Q);break e}else for(Ft=ns(x.stateNode.containerInfo.firstChild),st=x,Lt=!0,$t=null,k=Zn(x,null,F,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(ln(),F===Q){x=df(h,x,k);break e}yl(h,x,F,k)}x=x.child}return x;case 5:return Qh(x),h===null&&xr(x),F=x.type,Q=x.pendingProps,ae=h!==null?h.memoizedProps:null,Oe=Q.children,zf(F,Q)?Oe=null:ae!==null&&zf(F,ae)&&(x.flags|=32),C_(h,x),yl(h,x,Oe,k),x.child;case 6:return h===null&&xr(x),null;case 13:return O_(h,x,k);case 4:return ju(x,x.stateNode.containerInfo),F=x.pendingProps,h===null?x.child=ys(x,null,F,k):yl(h,x,F,k),x.child;case 11:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Bd(F,Q),j_(h,x,F,Q,k);case 7:return yl(h,x,x.pendingProps,k),x.child;case 8:return yl(h,x,x.pendingProps.children,k),x.child;case 12:return yl(h,x,x.pendingProps.children,k),x.child;case 10:e:{if(F=x.type._context,Q=x.pendingProps,ae=x.memoizedProps,Oe=Q.value,ra(Cs,F._currentValue),F._currentValue=Oe,ae!==null)if(Wn(ae.value,Oe)){if(ae.children===Q.children&&!vi.current){x=df(h,x,k);break e}}else for(ae=x.child,ae!==null&&(ae.return=x);ae!==null;){var Ze=ae.dependencies;if(Ze!==null){Oe=ae.child;for(var ot=Ze.firstContext;ot!==null;){if(ot.context===F){if(ae.tag===1){ot=Ko(-1,k&-k),ot.tag=2;var Ot=ae.updateQueue;if(Ot!==null){Ot=Ot.shared;var er=Ot.pending;er===null?ot.next=ot:(ot.next=er.next,er.next=ot),Ot.pending=ot}}ae.lanes|=k,ot=ae.alternate,ot!==null&&(ot.lanes|=k),Go(ae.return,k,x),Ze.lanes|=k;break}ot=ot.next}}else if(ae.tag===10)Oe=ae.type===x.type?null:ae.child;else if(ae.tag===18){if(Oe=ae.return,Oe===null)throw Error(r(341));Oe.lanes|=k,Ze=Oe.alternate,Ze!==null&&(Ze.lanes|=k),Go(Oe,k,x),Oe=ae.sibling}else Oe=ae.child;if(Oe!==null)Oe.return=ae;else for(Oe=ae;Oe!==null;){if(Oe===x){Oe=null;break}if(ae=Oe.sibling,ae!==null){ae.return=Oe.return,Oe=ae;break}Oe=Oe.return}ae=Oe}yl(h,x,Q.children,k),x=x.child}return x;case 9:return Q=x.type,F=x.pendingProps.children,Va(x,k),Q=Qa(Q),F=F(Q),x.flags|=1,yl(h,x,F,k),x.child;case 14:return F=x.type,Q=Bd(F,x.pendingProps),Q=Bd(F.type,Q),k_(h,x,F,Q,k);case 15:return S_(h,x,x.type,x.pendingProps,k);case 17:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Bd(F,Q),qg(h,x),x.tag=1,to(F)?(h=!0,Vc(x)):h=!1,Va(x,k),x_(x,F,Q),Ly(x,F,Q,k),By(null,x,F,!0,h,k);case 19:return I_(h,x,k);case 22:return __(h,x,k)}throw Error(r(156,x.tag))};function n6(h,x){return be(h,x)}function zB(h,x,k,F){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jc(h,x,k,F){return new zB(h,x,k,F)}function s2(h){return h=h.prototype,!(!h||!h.isReactComponent)}function HB(h){if(typeof h=="function")return s2(h)?1:0;if(h!=null){if(h=h.$$typeof,h===_)return 11;if(h===H)return 14}return 2}function r0(h,x){var k=h.alternate;return k===null?(k=Jc(h.tag,x,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=x,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,x=h.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function Qg(h,x,k,F,Q,ae){var Oe=2;if(F=h,typeof h=="function")s2(h)&&(Oe=1);else if(typeof h=="string")Oe=5;else e:switch(h){case A:return X0(k.children,Q,ae,x);case P:Oe=8,Q|=8;break;case D:return h=Jc(12,k,x,Q|2),h.elementType=D,h.lanes=ae,h;case B:return h=Jc(13,k,x,Q),h.elementType=B,h.lanes=ae,h;case U:return h=Jc(19,k,x,Q),h.elementType=U,h.lanes=ae,h;case J:return Zg(k,Q,ae,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case R:Oe=10;break e;case T:Oe=9;break e;case _:Oe=11;break e;case H:Oe=14;break e;case Y:Oe=16,F=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return x=Jc(Oe,k,x,Q),x.elementType=h,x.type=F,x.lanes=ae,x}function X0(h,x,k,F){return h=Jc(7,h,F,x),h.lanes=k,h}function Zg(h,x,k,F){return h=Jc(22,h,F,x),h.elementType=J,h.lanes=k,h.stateNode={isHidden:!1},h}function i2(h,x,k){return h=Jc(6,h,null,x),h.lanes=k,h}function o2(h,x,k){return x=Jc(4,h.children!==null?h.children:[],h.key,x),x.lanes=k,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function WB(h,x,k,F,Q){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=F,this.onRecoverableError=Q,this.mutableSourceEagerHydrationData=null}function l2(h,x,k,F,Q,ae,Oe,Ze,ot){return h=new WB(h,x,k,Ze,ot),x===1?(x=1,ae===!0&&(x|=8)):x=0,ae=Jc(3,null,null,x),h.current=ae,ae.stateNode=h,ae.memoizedState={element:F,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(ae),h}function VB(h,x,k){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:F==null?null:""+F,children:h,containerInfo:x,implementation:k}}function a6(h){if(!h)return Wc;h=h._reactInternals;e:{if(Re(h)!==h||h.tag!==1)throw Error(r(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(to(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(h.tag===1){var k=h.type;if(to(k))return U0(h,k,x)}return x}function s6(h,x,k,F,Q,ae,Oe,Ze,ot){return h=l2(k,F,!0,h,Q,ae,Oe,Ze,ot),h.context=a6(null),k=h.current,F=wl(),Q=e0(k),ae=Ko(F,Q),ae.callback=x??null,ko(k,ae,Q),h.current.lanes=Q,nr(h,Q,F),Yl(h,F),h}function ev(h,x,k,F){var Q=x.current,ae=wl(),Oe=e0(Q);return k=a6(k),x.context===null?x.context=k:x.pendingContext=k,x=Ko(ae,Oe),x.payload={element:h},F=F===void 0?null:F,F!==null&&(x.callback=F),h=ko(Q,x,Oe),h!==null&&($d(h,Q,Oe,ae),pc(h,Q,Oe)),Oe}function tv(h){return h=h.current,h.child?(h.child.tag===5,h.child.stateNode):null}function i6(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<x?k:x}}function c2(h,x){i6(h,x),(h=h.alternate)&&i6(h,x)}function GB(){return null}var o6=typeof reportError=="function"?reportError:function(h){console.error(h)};function d2(h){this._internalRoot=h}rv.prototype.render=d2.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(r(409));ev(h,x,null,null)},rv.prototype.unmount=d2.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;V0(function(){ev(null,h,null,null)}),x[as]=null}};function rv(h){this._internalRoot=h}rv.prototype.unstable_scheduleHydration=function(h){if(h){var x=ir();h={blockedOn:null,target:h,priority:x};for(var k=0;k<Wr.length&&x!==0&&x<Wr[k].priority;k++);Wr.splice(k,0,h),k===0&&ms(h)}};function u2(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function nv(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function l6(){}function KB(h,x,k,F,Q){if(Q){if(typeof F=="function"){var ae=F;F=function(){var Ot=tv(Oe);ae.call(Ot)}}var Oe=s6(x,F,h,0,null,!1,!1,"",l6);return h._reactRootContainer=Oe,h[as]=Oe.current,Od(h.nodeType===8?h.parentNode:h),V0(),Oe}for(;Q=h.lastChild;)h.removeChild(Q);if(typeof F=="function"){var Ze=F;F=function(){var Ot=tv(ot);Ze.call(Ot)}}var ot=l2(h,0,!1,null,null,!1,!1,"",l6);return h._reactRootContainer=ot,h[as]=ot.current,Od(h.nodeType===8?h.parentNode:h),V0(function(){ev(x,ot,k,F)}),ot}function av(h,x,k,F,Q){var ae=k._reactRootContainer;if(ae){var Oe=ae;if(typeof Q=="function"){var Ze=Q;Q=function(){var ot=tv(Oe);Ze.call(ot)}}ev(x,Oe,h,Q)}else Oe=KB(k,x,h,Q,F);return tv(Oe)}Na=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var k=It(x.pendingLanes);k!==0&&(Mt(x,k|1),Yl(x,wt()),(sa&6)===0&&(rm=wt()+500,ce()))}break;case 13:V0(function(){var F=Vn(h,1);if(F!==null){var Q=wl();$d(F,h,1,Q)}}),c2(h,1)}},Pa=function(h){if(h.tag===13){var x=Vn(h,134217728);if(x!==null){var k=wl();$d(x,h,134217728,k)}c2(h,134217728)}},da=function(h){if(h.tag===13){var x=e0(h),k=Vn(h,x);if(k!==null){var F=wl();$d(k,h,x,F)}c2(h,x)}},ir=function(){return _r},en=function(h,x){var k=_r;try{return _r=h,x()}finally{_r=k}},tr=function(h,x,k){switch(x){case"input":if(Pe(h,k),x=k.name,k.type==="radio"&&x!=null){for(k=h;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var F=k[x];if(F!==h&&F.form===h.form){var Q=rf(F);if(!Q)throw Error(r(90));he(F),Pe(F,Q)}}}break;case"textarea":ge(h,k);break;case"select":x=k.value,x!=null&&de(h,!!k.multiple,x,!1)}},kr=r2,Xr=V0;var XB={usingClientEntryPoint:!1,Events:[ql,Hc,rf,Dt,yr,r2]},Cp={findFiberByHostInstance:zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YB={bundleType:Cp.bundleType,version:Cp.version,rendererPackageName:Cp.rendererPackageName,rendererConfig:Cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=xt(h),h===null?null:h.stateNode},findFiberByHostInstance:Cp.findFiberByHostInstance||GB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sv.isDisabled&&sv.supportsFiber)try{fn=sv.inject(YB),Ur=sv}catch{}}return Jl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XB,Jl.createPortal=function(h,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u2(x))throw Error(r(200));return VB(h,x,null,k)},Jl.createRoot=function(h,x){if(!u2(h))throw Error(r(299));var k=!1,F="",Q=o6;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(F=x.identifierPrefix),x.onRecoverableError!==void 0&&(Q=x.onRecoverableError)),x=l2(h,1,!1,null,null,k,!1,F,Q),h[as]=x.current,Od(h.nodeType===8?h.parentNode:h),new d2(x)},Jl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=xt(x),h=h===null?null:h.stateNode,h},Jl.flushSync=function(h){return V0(h)},Jl.hydrate=function(h,x,k){if(!nv(x))throw Error(r(200));return av(null,h,x,!0,k)},Jl.hydrateRoot=function(h,x,k){if(!u2(h))throw Error(r(405));var F=k!=null&&k.hydratedSources||null,Q=!1,ae="",Oe=o6;if(k!=null&&(k.unstable_strictMode===!0&&(Q=!0),k.identifierPrefix!==void 0&&(ae=k.identifierPrefix),k.onRecoverableError!==void 0&&(Oe=k.onRecoverableError)),x=s6(x,null,h,1,k??null,Q,!1,ae,Oe),h[as]=x.current,Od(h),F)for(h=0;h<F.length;h++)k=F[h],Q=k._getVersion,Q=Q(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,Q]:x.mutableSourceEagerHydrationData.push(k,Q);return new rv(x)},Jl.render=function(h,x,k){if(!nv(x))throw Error(r(200));return av(null,h,x,!1,k)},Jl.unmountComponentAtNode=function(h){if(!nv(h))throw Error(r(40));return h._reactRootContainer?(V0(function(){av(null,null,h,!1,function(){h._reactRootContainer=null,h[as]=null})}),!0):!1},Jl.unstable_batchedUpdates=r2,Jl.unstable_renderSubtreeIntoContainer=function(h,x,k,F){if(!nv(k))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return av(h,x,k,!1,F)},Jl.version="18.3.1-next-f1338f8080-20240426",Jl}var x6;function T8(){if(x6)return m2.exports;x6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),m2.exports=nU(),m2.exports}var g6;function aU(){if(g6)return ov;g6=1;var e=T8();return ov.createRoot=e.createRoot,ov.hydrateRoot=e.hydrateRoot,ov}var sU=aU();const iU=Ta(sU),oU="modulepreload",lU=function(e){return"/"+e},v6={},c1=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=lU(d),d in v6)return;v6[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":oU,u||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,b)=>{p.addEventListener("load",m),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};const cU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O8=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();var dU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const uU=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},c)=>I.createElement("svg",{ref:c,...dU,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:O8("lucide",s),...l},[...o.map(([d,u])=>I.createElement(d,u)),...Array.isArray(i)?i:[i]]));const Wt=(e,t)=>{const r=I.forwardRef(({className:a,...s},i)=>I.createElement(uU,{ref:i,iconNode:t,className:O8(`lucide-${cU(e)}`,a),...s}));return r.displayName=`${e}`,r};const b6=Wt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const fU=Wt("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);const Pu=Wt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const eS=Wt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Oo=Wt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const hU=Wt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const Nh=Wt("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const lv=Wt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const Lb=Wt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const ii=Wt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const y6=Wt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const d1=Wt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Al=Wt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Xv=Wt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const ul=Wt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Kn=Wt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const w6=Wt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const P8=Wt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const rx=Wt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const xd=Wt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Ts=Wt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Kj=Wt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ia=Wt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const u1=Wt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Rn=Wt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const mn=Wt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const I8=Wt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const mU=Wt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const Fb=Wt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Ru=Wt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const es=Wt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const c0=Wt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const Xj=Wt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const D8=Wt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const L8=Wt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const zu=Wt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Bu=Wt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const N6=Wt("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const tS=Wt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const cs=Wt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const pU=Wt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const ru=Wt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const xU=Wt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Yv=Wt("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const gU=Wt("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const vx=Wt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const Gn=Wt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const j6=Wt("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const vU=Wt("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);const bU=Wt("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Nc=Wt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const Nf=Wt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const nu=Wt("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const hh=Wt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const F8=Wt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Zl=Wt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const yU=Wt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const ud=Wt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const wU=Wt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const _l=Wt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const cv=Wt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const w0=Wt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Yj=Wt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Jj=Wt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const d0=Wt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const mh=Wt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const Mb=Wt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const M8=Wt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const vt=Wt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const NU=Wt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const R8=Wt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Xa=Wt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const rS=Wt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Jv=Wt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const jU=Wt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const kU=Wt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Qv=Wt("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);const SU=Wt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const fo=Wt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const _U=Wt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const CU=Wt("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const nS=Wt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Qj=Wt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Z0=Wt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const AU=Wt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Zv=Wt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const Lo=Wt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Zj=Wt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const EU=Wt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const Zr=Wt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const e4=Wt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const fd=Wt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const B8=Wt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const bx=Wt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const oi=Wt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const TU=Wt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const ac=Wt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const tc=Wt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const t4=Wt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const r4=Wt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const f1=Wt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const OU=Wt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Rb=Wt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const yx=Wt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ri=Wt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const _i=Wt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const PU=Wt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const IU=Wt("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const jf=Wt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Os=Wt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const am=Wt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Lr=Wt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const DU=Wt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const LU=Wt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const au=Wt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Iu=Wt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Oc=Wt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Ep=Wt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const hd=Wt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const qi=Wt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const g0=Wt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const sh=Wt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const FU=Wt("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const Zt=Wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const h1=Wt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),U8=[{id:"dashboard",label:"Dashboard",icon:n.jsx(wU,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:n.jsx(_i,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:n.jsx(Kn,{className:"w-5 h-5"})}],e1=[{id:"sales-crm",label:"Sales & CRM",icon:n.jsx(Al,{className:"w-5 h-5"}),items:[{id:"crm",label:"CRM",icon:n.jsx(g0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:n.jsx(Al,{className:"w-5 h-5"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(ii,{className:"w-5 h-5"})},{id:"products-services",label:"Products & Services",icon:n.jsx(nS,{className:"w-5 h-5"})}]},{id:"client-management",label:"Client Management",icon:n.jsx(Xa,{className:"w-5 h-5"}),items:[{id:"inbox",label:"Shared Inbox",icon:n.jsx(Xa,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:n.jsx(jf,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:n.jsx(Yv,{className:"w-5 h-5"})}]},{id:"finance",label:"Finance",icon:n.jsx(zu,{className:"w-5 h-5"}),items:[{id:"invoices",label:"Billing & Invoicing",icon:n.jsx(zu,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:n.jsx(e4,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:n.jsx(rx,{className:"w-5 h-5"})}]},{id:"projects",label:"Projects",icon:n.jsx(Gn,{className:"w-5 h-5"}),items:[{id:"projects",label:"Projects",icon:n.jsx(Gn,{className:"w-5 h-5"})}]}],q8={id:"system",label:"System",icon:n.jsx(r4,{className:"w-5 h-5"}),items:[{id:"integrations",label:"Integrations",icon:n.jsx(f1,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:n.jsx(Jv,{className:"w-5 h-5"})},{id:"settings",label:"Settings",icon:n.jsx(r4,{className:"w-5 h-5"})},{id:"data-hygiene",label:"Data Hygiene",icon:n.jsx(Rb,{className:"w-5 h-5"})},{id:"import-history",label:"Import History",icon:n.jsx(ud,{className:"w-5 h-5"})}]},MU=q8.items;[...U8,...e1.flatMap(e=>e.items),...MU];const t1=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],dv=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"task-comment",label:"Task Comment/Note Added",description:"Alerts when someone posts in the Notes & Comments section of a task you're assigned to or involved in",inApp:!0,email:!1},{id:"task-mention",label:"Task @Mention",description:"Alerts when someone uses @ to mention you in a task comment",inApp:!0,email:!0},{id:"task-status-changed",label:"Task Status Changed",description:"Alerts when a task you're assigned to or created moves between statuses",inApp:!0,email:!1},{id:"task-due-date-reminder",label:"Task Due Date Reminder",description:"Alert before a task is due",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],RU=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,a=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(a+s/60)},nx=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],Tp=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(nx.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),d=`UTC${t>=0?"+":"-"}${o}:${l}`;if(nx.find(u=>u.value===d))return d}const a=t;let s="UTC+0",i=1/0;return nx.forEach(o=>{const l=RU(o.value),c=Math.abs(l-a);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},k6=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function $8(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=$8(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function la(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=$8(e))&&(a&&(a+=" "),a+=t);return a}var g2,S6;function ic(){if(S6)return g2;S6=1;var e=Array.isArray;return g2=e,g2}var v2,_6;function z8(){if(_6)return v2;_6=1;var e=typeof iv=="object"&&iv&&iv.Object===Object&&iv;return v2=e,v2}var b2,C6;function Wu(){if(C6)return b2;C6=1;var e=z8(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return b2=r,b2}var y2,A6;function yg(){if(A6)return y2;A6=1;var e=Wu(),t=e.Symbol;return y2=t,y2}var w2,E6;function BU(){if(E6)return w2;E6=1;var e=yg(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var d=!0}catch{}var u=a.call(o);return d&&(l?o[s]=c:delete o[s]),u}return w2=i,w2}var N2,T6;function UU(){if(T6)return N2;T6=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return N2=r,N2}var j2,O6;function Lf(){if(O6)return j2;O6=1;var e=yg(),t=BU(),r=UU(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return j2=o,j2}var k2,P6;function Ff(){if(P6)return k2;P6=1;function e(t){return t!=null&&typeof t=="object"}return k2=e,k2}var S2,I6;function ip(){if(I6)return S2;I6=1;var e=Lf(),t=Ff(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return S2=a,S2}var _2,D6;function aS(){if(D6)return _2;D6=1;var e=ic(),t=ip(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return _2=s,_2}var C2,L6;function A0(){if(L6)return C2;L6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return C2=e,C2}var A2,F6;function sS(){if(F6)return A2;F6=1;var e=Lf(),t=A0(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==a||c==s||c==r||c==i}return A2=o,A2}var E2,M6;function qU(){if(M6)return E2;M6=1;var e=Wu(),t=e["__core-js_shared__"];return E2=t,E2}var T2,R6;function $U(){if(R6)return T2;R6=1;var e=qU(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return T2=r,T2}var O2,B6;function H8(){if(B6)return O2;B6=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return O2=r,O2}var P2,U6;function zU(){if(U6)return P2;U6=1;var e=sS(),t=$U(),r=A0(),a=H8(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!r(p)||t(p))return!1;var m=e(p)?u:i;return m.test(a(p))}return P2=f,P2}var I2,q6;function HU(){if(q6)return I2;q6=1;function e(t,r){return t?.[r]}return I2=e,I2}var D2,$6;function Mh(){if($6)return D2;$6=1;var e=zU(),t=HU();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return D2=r,D2}var L2,z6;function Bb(){if(z6)return L2;z6=1;var e=Mh(),t=e(Object,"create");return L2=t,L2}var F2,H6;function WU(){if(H6)return F2;H6=1;var e=Bb();function t(){this.__data__=e?e(null):{},this.size=0}return F2=t,F2}var M2,W6;function VU(){if(W6)return M2;W6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return M2=e,M2}var R2,V6;function GU(){if(V6)return R2;V6=1;var e=Bb(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return R2=s,R2}var B2,G6;function KU(){if(G6)return B2;G6=1;var e=Bb(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return B2=a,B2}var U2,K6;function XU(){if(K6)return U2;K6=1;var e=Bb(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return U2=r,U2}var q2,X6;function YU(){if(X6)return q2;X6=1;var e=WU(),t=VU(),r=GU(),a=KU(),s=XU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,q2=i,q2}var $2,Y6;function JU(){if(Y6)return $2;Y6=1;function e(){this.__data__=[],this.size=0}return $2=e,$2}var z2,J6;function iS(){if(J6)return z2;J6=1;function e(t,r){return t===r||t!==t&&r!==r}return z2=e,z2}var H2,Q6;function Ub(){if(Q6)return H2;Q6=1;var e=iS();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return H2=t,H2}var W2,Z6;function QU(){if(Z6)return W2;Z6=1;var e=Ub(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return W2=a,W2}var V2,eC;function ZU(){if(eC)return V2;eC=1;var e=Ub();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return V2=t,V2}var G2,tC;function eq(){if(tC)return G2;tC=1;var e=Ub();function t(r){return e(this.__data__,r)>-1}return G2=t,G2}var K2,rC;function tq(){if(rC)return K2;rC=1;var e=Ub();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return K2=t,K2}var X2,nC;function qb(){if(nC)return X2;nC=1;var e=JU(),t=QU(),r=ZU(),a=eq(),s=tq();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,X2=i,X2}var Y2,aC;function oS(){if(aC)return Y2;aC=1;var e=Mh(),t=Wu(),r=e(t,"Map");return Y2=r,Y2}var J2,sC;function rq(){if(sC)return J2;sC=1;var e=YU(),t=qb(),r=oS();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return J2=a,J2}var Q2,iC;function nq(){if(iC)return Q2;iC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Q2=e,Q2}var Z2,oC;function $b(){if(oC)return Z2;oC=1;var e=nq();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return Z2=t,Z2}var ew,lC;function aq(){if(lC)return ew;lC=1;var e=$b();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return ew=t,ew}var tw,cC;function sq(){if(cC)return tw;cC=1;var e=$b();function t(r){return e(this,r).get(r)}return tw=t,tw}var rw,dC;function iq(){if(dC)return rw;dC=1;var e=$b();function t(r){return e(this,r).has(r)}return rw=t,rw}var nw,uC;function oq(){if(uC)return nw;uC=1;var e=$b();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return nw=t,nw}var aw,fC;function lS(){if(fC)return aw;fC=1;var e=rq(),t=aq(),r=sq(),a=iq(),s=oq();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,aw=i,aw}var sw,hC;function W8(){if(hC)return sw;hC=1;var e=lS(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,sw=r,sw}var iw,mC;function lq(){if(mC)return iw;mC=1;var e=W8(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return iw=r,iw}var ow,pC;function cq(){if(pC)return ow;pC=1;var e=lq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,d){i.push(c?d.replace(r,"$1"):l||o)}),i});return ow=a,ow}var lw,xC;function cS(){if(xC)return lw;xC=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return lw=e,lw}var cw,gC;function dq(){if(gC)return cw;gC=1;var e=yg(),t=cS(),r=ic(),a=ip(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return cw=o,cw}var dw,vC;function V8(){if(vC)return dw;vC=1;var e=dq();function t(r){return r==null?"":e(r)}return dw=t,dw}var uw,bC;function G8(){if(bC)return uw;bC=1;var e=ic(),t=aS(),r=cq(),a=V8();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return uw=s,uw}var fw,yC;function zb(){if(yC)return fw;yC=1;var e=ip();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return fw=t,fw}var hw,wC;function dS(){if(wC)return hw;wC=1;var e=G8(),t=zb();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return hw=r,hw}var mw,NC;function K8(){if(NC)return mw;NC=1;var e=dS();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return mw=t,mw}var uq=K8();const md=Ta(uq);var pw,jC;function fq(){if(jC)return pw;jC=1;function e(t){return t==null}return pw=e,pw}var hq=fq();const zn=Ta(hq);var xw,kC;function mq(){if(kC)return xw;kC=1;var e=Lf(),t=ic(),r=Ff(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return xw=s,xw}var pq=mq();const jh=Ta(pq);var xq=sS();const En=Ta(xq);var gq=A0();const op=Ta(gq);var gw={exports:{}},ya={};var SC;function vq(){if(SC)return ya;SC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var w=g.$$typeof;switch(w){case e:switch(g=g.type,g){case r:case s:case a:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case p:case f:case i:return g;default:return w}}case t:return w}}}return ya.ContextConsumer=o,ya.ContextProvider=i,ya.Element=e,ya.ForwardRef=c,ya.Fragment=r,ya.Lazy=p,ya.Memo=f,ya.Portal=t,ya.Profiler=s,ya.StrictMode=a,ya.Suspense=d,ya.SuspenseList=u,ya.isAsyncMode=function(){return!1},ya.isConcurrentMode=function(){return!1},ya.isContextConsumer=function(g){return v(g)===o},ya.isContextProvider=function(g){return v(g)===i},ya.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},ya.isForwardRef=function(g){return v(g)===c},ya.isFragment=function(g){return v(g)===r},ya.isLazy=function(g){return v(g)===p},ya.isMemo=function(g){return v(g)===f},ya.isPortal=function(g){return v(g)===t},ya.isProfiler=function(g){return v(g)===s},ya.isStrictMode=function(g){return v(g)===a},ya.isSuspense=function(g){return v(g)===d},ya.isSuspenseList=function(g){return v(g)===u},ya.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===a||g===d||g===u||g===m||typeof g=="object"&&g!==null&&(g.$$typeof===p||g.$$typeof===f||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===b||g.getModuleId!==void 0)},ya.typeOf=v,ya}var _C;function bq(){return _C||(_C=1,gw.exports=vq()),gw.exports}var yq=bq(),vw,CC;function X8(){if(CC)return vw;CC=1;var e=Lf(),t=Ff(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return vw=a,vw}var bw,AC;function wq(){if(AC)return bw;AC=1;var e=X8();function t(r){return e(r)&&r!=+r}return bw=t,bw}var Nq=wq();const lp=Ta(Nq);var jq=X8();const kq=Ta(jq);var Zd=function(t){return t===0?0:t>0?1:-1},ih=function(t){return jh(t)&&t.indexOf("%")===t.length-1},ur=function(t){return kq(t)&&!lp(t)},Sq=function(t){return zn(t)},$i=function(t){return ur(t)||jh(t)},_q=0,wg=function(t){var r=++_q;return"".concat(t||"").concat(r)},kh=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&!jh(t))return a;var i;if(ih(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return lp(i)&&(i=a),s&&i>r&&(i=r),i},u0=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Cq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},cd=function(t,r){return ur(t)&&ur(r)?function(a){return t+a*(r-t)}:function(){return r}};function m1(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):md(a,t))===r})}var Aq=function(t,r){return ur(t)&&ur(r)?t-r:jh(t)&&jh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function wm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function n4(e){"@babel/helpers - typeof";return n4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n4(e)}var Eq=["viewBox","children"],Tq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],EC=["points","pathLength"],yw={svg:Eq,polygon:EC,polyline:EC},uS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],p1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(I.isValidElement(t)&&(a=t.props),!op(a))return null;var s={};return Object.keys(a).forEach(function(i){uS.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},Oq=function(t,r,a){return function(s){return t(r,a,s),null}},x1=function(t,r,a){if(!op(t)||n4(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];uS.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Oq(o,r,a))}),s},Pq=["children"],Iq=["children"];function TC(e,t){if(e==null)return{};var r=Dq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function a4(e){"@babel/helpers - typeof";return a4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a4(e)}var OC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},kf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},PC=null,ww=null,fS=function e(t){if(t===PC&&Array.isArray(ww))return ww;var r=[];return I.Children.forEach(t,function(a){zn(a)||(yq.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),ww=r,PC=t,r};function su(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return kf(s)}):a=[kf(t)],fS(e).forEach(function(s){var i=md(s,"type.displayName")||md(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function kc(e,t){var r=su(e,t);return r&&r[0]}var IC=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!ur(a)||a<=0||!ur(s)||s<=0)},Lq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Fq=function(t){return t&&t.type&&jh(t.type)&&Lq.indexOf(t.type)>=0},Mq=function(t){return t&&a4(t)==="object"&&"clipDot"in t},Rq=function(t,r,a,s){var i,o=(i=yw?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!En(t)&&(s&&o.includes(r)||Tq.includes(r))||a&&uS.includes(r)},$n=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(I.isValidElement(t)&&(s=t.props),!op(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Rq((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},s4=function e(t,r){if(t===r)return!0;var a=I.Children.count(t);if(a!==I.Children.count(r))return!1;if(a===0)return!0;if(a===1)return DC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!DC(i,o))return!1}return!0},DC=function(t,r){if(zn(t)&&zn(r))return!0;if(!zn(t)&&!zn(r)){var a=t.props||{},s=a.children,i=TC(a,Pq),o=r.props||{},l=o.children,c=TC(o,Iq);return s&&l?wm(i,c)&&s4(s,l):!s&&!l?wm(i,c):!1}return!1},LC=function(t,r){var a=[],s={};return fS(t).forEach(function(i,o){if(Fq(i))a.push(i);else if(i){var l=kf(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var f=d(i,l,o);a.push(f),s[l]=!0}}}),a},Bq=function(t){var r=t&&t.type;return r&&OC[r]?OC[r]:null},Uq=function(t,r){return fS(r).indexOf(t)},qq=["children","width","height","viewBox","className","style","title","desc"];function i4(){return i4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i4.apply(this,arguments)}function $q(e,t){if(e==null)return{};var r=zq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function o4(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=$q(e,qq),u=s||{width:r,height:a,x:0,y:0},f=la("recharts-surface",i);return ft.createElement("svg",i4({},$n(d,!0,"svg"),{className:f,width:r,height:a,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ft.createElement("title",null,l),ft.createElement("desc",null,c),t)}var Hq=["children","className"];function l4(){return l4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l4.apply(this,arguments)}function Wq(e,t){if(e==null)return{};var r=Vq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Vq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Is=ft.forwardRef(function(e,t){var r=e.children,a=e.className,s=Wq(e,Hq),i=la("recharts-layer",a);return ft.createElement("g",l4({className:i},$n(s,!0),{ref:t}),r)}),Sf=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},Nw,FC;function Gq(){if(FC)return Nw;FC=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return Nw=e,Nw}var jw,MC;function Kq(){if(MC)return jw;MC=1;var e=Gq();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return jw=t,jw}var kw,RC;function Y8(){if(RC)return kw;RC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(d){return l.test(d)}return kw=c,kw}var Sw,BC;function Xq(){if(BC)return Sw;BC=1;function e(t){return t.split("")}return Sw=e,Sw}var _w,UC;function Yq(){if(UC)return _w;UC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",b=d+"?",v="["+i+"]?",g="(?:"+m+"(?:"+[u,f,p].join("|")+")"+v+b+")*",w=v+b+g,y="(?:"+[u+l+"?",l,f,p,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+y+w,"g");function N(S){return S.match(j)||[]}return _w=N,_w}var Cw,qC;function Jq(){if(qC)return Cw;qC=1;var e=Xq(),t=Y8(),r=Yq();function a(s){return t(s)?r(s):e(s)}return Cw=a,Cw}var Aw,$C;function Qq(){if($C)return Aw;$C=1;var e=Kq(),t=Y8(),r=Jq(),a=V8();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return Aw=s,Aw}var Ew,zC;function Zq(){if(zC)return Ew;zC=1;var e=Qq(),t=e("toUpperCase");return Ew=t,Ew}var e$=Zq();const Hb=Ta(e$);function Za(e){return function(){return e}}const J8=Math.cos,g1=Math.sin,lu=Math.sqrt,v1=Math.PI,Wb=2*v1,c4=Math.PI,d4=2*c4,eh=1e-6,t$=d4-eh;function Q8(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function r$(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Q8;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class n${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Q8:r$(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-r,u=o-t,f=l-r,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>eh)if(!(Math.abs(f*c-d*u)>eh)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=a-o,b=s-l,v=c*c+d*d,g=m*m+b*b,w=Math.sqrt(v),y=Math.sqrt(p),j=i*Math.tan((c4-Math.acos((v+p-g)/(2*w*y)))/2),N=j/y,S=j/w;Math.abs(N-1)>eh&&this._append`L${t+N*u},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*m>u*b)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=r+c,f=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>eh||Math.abs(this._y1-u)>eh)&&this._append`L${d},${u}`,a&&(p<0&&(p=p%d4+d4),p>t$?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=u}`:p>eh&&this._append`A${a},${a},0,${+(p>=c4)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function hS(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new n$(t)}function mS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Z8(e){this._context=e}Z8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vb(e){return new Z8(e)}function eL(e){return e[0]}function tL(e){return e[1]}function rL(e,t){var r=Za(!0),a=null,s=Vb,i=null,o=hS(l);e=typeof e=="function"?e:e===void 0?eL:Za(e),t=typeof t=="function"?t:t===void 0?tL:Za(t);function l(c){var d,u=(c=mS(c)).length,f,p=!1,m;for(a==null&&(i=s(m=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Za(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Za(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Za(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function uv(e,t,r){var a=null,s=Za(!0),i=null,o=Vb,l=null,c=hS(d);e=typeof e=="function"?e:e===void 0?eL:Za(+e),t=typeof t=="function"?t:Za(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?tL:Za(+r);function d(f){var p,m,b,v=(f=mS(f)).length,g,w=!1,y,j=new Array(v),N=new Array(v);for(i==null&&(l=o(y=c())),p=0;p<=v;++p){if(!(p<v&&s(g=f[p],p,f))===w)if(w=!w)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=m;--b)l.point(j[b],N[b]);l.lineEnd(),l.areaEnd()}w&&(j[p]=+e(g,p,f),N[p]=+t(g,p,f),l.point(a?+a(g,p,f):j[p],r?+r(g,p,f):N[p]))}if(y)return l=null,y+""||null}function u(){return rL().defined(s).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Za(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Za(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Za(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Za(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Za(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Za(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Za(!!f),d):s},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class nL{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function a$(e){return new nL(e,!0)}function s$(e){return new nL(e,!1)}const pS={draw(e,t){const r=lu(t/v1);e.moveTo(r,0),e.arc(0,0,r,0,Wb)}},i$={draw(e,t){const r=lu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},aL=lu(1/3),o$=aL*2,l$={draw(e,t){const r=lu(t/o$),a=r*aL;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},c$={draw(e,t){const r=lu(t),a=-r/2;e.rect(a,a,r,r)}},d$=.8908130915292852,sL=g1(v1/10)/g1(7*v1/10),u$=g1(Wb/10)*sL,f$=-J8(Wb/10)*sL,h$={draw(e,t){const r=lu(t*d$),a=u$*r,s=f$*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Wb*i/5,l=J8(o),c=g1(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},Tw=lu(3),m$={draw(e,t){const r=-lu(t/(Tw*3));e.moveTo(0,r*2),e.lineTo(-Tw*r,-r),e.lineTo(Tw*r,-r),e.closePath()}},Qc=-.5,Zc=lu(3)/2,u4=1/lu(12),p$=(u4/2+1)*3,x$={draw(e,t){const r=lu(t/p$),a=r/2,s=r*u4,i=a,o=r*u4+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Qc*a-Zc*s,Zc*a+Qc*s),e.lineTo(Qc*i-Zc*o,Zc*i+Qc*o),e.lineTo(Qc*l-Zc*c,Zc*l+Qc*c),e.lineTo(Qc*a+Zc*s,Qc*s-Zc*a),e.lineTo(Qc*i+Zc*o,Qc*o-Zc*i),e.lineTo(Qc*l+Zc*c,Qc*c-Zc*l),e.closePath()}};function g$(e,t){let r=null,a=hS(s);e=typeof e=="function"?e:Za(e||pS),t=typeof t=="function"?t:Za(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Za(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Za(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function b1(){}function y1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function iL(e){this._context=e}iL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v$(e){return new iL(e)}function oL(e){this._context=e}oL.prototype={areaStart:b1,areaEnd:b1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:y1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b$(e){return new oL(e)}function lL(e){this._context=e}lL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:y1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y$(e){return new lL(e)}function cL(e){this._context=e}cL.prototype={areaStart:b1,areaEnd:b1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function w$(e){return new cL(e)}function HC(e){return e<0?-1:1}function WC(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(HC(i)+HC(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function VC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ow(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function w1(e){this._context=e}w1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ow(this,this._t0,VC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ow(this,VC(this,r=WC(this,e,t)),r);break;default:Ow(this,this._t0,r=WC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function dL(e){this._context=new uL(e)}(dL.prototype=Object.create(w1.prototype)).point=function(e,t){w1.prototype.point.call(this,t,e)};function uL(e){this._context=e}uL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function N$(e){return new w1(e)}function j$(e){return new dL(e)}function fL(e){this._context=e}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=GC(e),s=GC(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GC(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function k$(e){return new fL(e)}function Gb(e,t){this._context=e,this._t=t}Gb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function S$(e){return new Gb(e,.5)}function _$(e){return new Gb(e,0)}function C$(e){return new Gb(e,1)}function Im(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function f4(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function A$(e,t){return e[t]}function E$(e){const t=[];return t.key=e,t}function T$(){var e=Za([]),t=f4,r=Im,a=A$;function s(i){var o=Array.from(e.apply(this,arguments),E$),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(f,o[l].key,d,i)]).data=f;for(l=0,u=mS(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Za(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Za(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?f4:typeof i=="function"?i:Za(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Im,s):r},s}function O$(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Im(e,t)}}function P$(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Im(e,t)}}function I$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[a][1]||0,p=u[a-1][1]||0,m=(f-p)/2,b=0;b<l;++b){var v=e[t[b]],g=v[a][1]||0,w=v[a-1][1]||0;m+=g-w}c+=f,d+=m*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=d/c)}s[a-1][1]+=s[a-1][0]=r,Im(e,t)}}function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}var D$=["type","size","sizeType"];function h4(){return h4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},h4.apply(this,arguments)}function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function XC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(r),!0).forEach(function(a){L$(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function L$(e,t,r){return t=F$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F$(e){var t=M$(e,"string");return wx(t)=="symbol"?t:t+""}function M$(e,t){if(wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(wx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R$(e,t){if(e==null)return{};var r=B$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function B$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var hL={symbolCircle:pS,symbolCross:i$,symbolDiamond:l$,symbolSquare:c$,symbolStar:h$,symbolTriangle:m$,symbolWye:x$},U$=Math.PI/180,q$=function(t){var r="symbol".concat(Hb(t));return hL[r]||pS},$$=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*U$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},z$=function(t,r){hL["symbol".concat(Hb(t))]=r},xS=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=R$(t,D$),d=XC(XC({},c),{},{type:a,size:i,sizeType:l}),u=function(){var g=q$(a),w=g$().type(g).size($$(i,l,a));return w()},f=d.className,p=d.cx,m=d.cy,b=$n(d,!0);return p===+p&&m===+m&&i===+i?ft.createElement("path",h4({},b,{className:la("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:u()})):null};xS.registerSymbol=z$;function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function m4(){return m4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},m4.apply(this,arguments)}function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function H$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(r),!0).forEach(function(a){Nx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function W$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V$(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pL(a.key),a)}}function G$(e,t,r){return t&&V$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K$(e,t,r){return t=N1(t),X$(e,mL()?Reflect.construct(t,r||[],N1(e).constructor):t.apply(e,r))}function X$(e,t){if(t&&(Dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y$(e)}function Y$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mL=function(){return!!e})()}function N1(e){return N1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N1(e)}function J$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p4(e,t)}function p4(e,t){return p4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},p4(e,t)}function Nx(e,t,r){return t=pL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pL(e){var t=Q$(e,"string");return Dm(t)=="symbol"?t:t+""}function Q$(e,t){if(Dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ed=32,gS=(function(e){function t(){return W$(this,t),K$(this,t,arguments)}return J$(t,e),G$(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=ed/2,o=ed/6,l=ed/3,c=a.inactive?s:a.color;if(a.type==="plainline")return ft.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:ed,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return ft.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ed,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return ft.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ed/8,"h").concat(ed,"v").concat(ed*3/4,"h").concat(-ed,"z"),className:"recharts-legend-icon"});if(ft.isValidElement(a.legendIcon)){var d=H$({},a);return delete d.legendIcon,ft.cloneElement(a.legendIcon,d)}return ft.createElement(xS,{fill:c,cx:i,cy:i,size:ed,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:ed,height:ed},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,b){var v=m.formatter||c,g=la(Nx(Nx({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=En(m.value)?null:m.value;Sf(!En(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?d:m.color;return ft.createElement("li",m4({className:g,style:f,key:"legend-item-".concat(b)},x1(a.props,m,b)),ft.createElement(o4,{width:o,height:o,viewBox:u,style:p},a.renderIcon(m)),ft.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},v?v(w,m,b):w))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ft.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(I.PureComponent);Nx(gS,"displayName","Legend");Nx(gS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Pw,JC;function Z$(){if(JC)return Pw;JC=1;var e=qb();function t(){this.__data__=new e,this.size=0}return Pw=t,Pw}var Iw,QC;function ez(){if(QC)return Iw;QC=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return Iw=e,Iw}var Dw,ZC;function tz(){if(ZC)return Dw;ZC=1;function e(t){return this.__data__.get(t)}return Dw=e,Dw}var Lw,eA;function rz(){if(eA)return Lw;eA=1;function e(t){return this.__data__.has(t)}return Lw=e,Lw}var Fw,tA;function nz(){if(tA)return Fw;tA=1;var e=qb(),t=oS(),r=lS(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<a-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return Fw=s,Fw}var Mw,rA;function xL(){if(rA)return Mw;rA=1;var e=qb(),t=Z$(),r=ez(),a=tz(),s=rz(),i=nz();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,Mw=o,Mw}var Rw,nA;function az(){if(nA)return Rw;nA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Rw=t,Rw}var Bw,aA;function sz(){if(aA)return Bw;aA=1;function e(t){return this.__data__.has(t)}return Bw=e,Bw}var Uw,sA;function gL(){if(sA)return Uw;sA=1;var e=lS(),t=az(),r=sz();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,Uw=a,Uw}var qw,iA;function vL(){if(iA)return qw;iA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return qw=e,qw}var $w,oA;function bL(){if(oA)return $w;oA=1;function e(t,r){return t.has(r)}return $w=e,$w}var zw,lA;function yL(){if(lA)return zw;lA=1;var e=gL(),t=vL(),r=bL(),a=1,s=2;function i(o,l,c,d,u,f){var p=c&a,m=o.length,b=l.length;if(m!=b&&!(p&&b>m))return!1;var v=f.get(o),g=f.get(l);if(v&&g)return v==l&&g==o;var w=-1,y=!0,j=c&s?new e:void 0;for(f.set(o,l),f.set(l,o);++w<m;){var N=o[w],S=l[w];if(d)var E=p?d(S,N,w,l,o,f):d(N,S,w,o,l,f);if(E!==void 0){if(E)continue;y=!1;break}if(j){if(!t(l,function(A,P){if(!r(j,P)&&(N===A||u(N,A,c,d,f)))return j.push(P)})){y=!1;break}}else if(!(N===S||u(N,S,c,d,f))){y=!1;break}}return f.delete(o),f.delete(l),y}return zw=i,zw}var Hw,cA;function iz(){if(cA)return Hw;cA=1;var e=Wu(),t=e.Uint8Array;return Hw=t,Hw}var Ww,dA;function oz(){if(dA)return Ww;dA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return Ww=e,Ww}var Vw,uA;function vS(){if(uA)return Vw;uA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return Vw=e,Vw}var Gw,fA;function lz(){if(fA)return Gw;fA=1;var e=yg(),t=iz(),r=iS(),a=yL(),s=oz(),i=vS(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",f="[object Map]",p="[object Number]",m="[object RegExp]",b="[object Set]",v="[object String]",g="[object Symbol]",w="[object ArrayBuffer]",y="[object DataView]",j=e?e.prototype:void 0,N=j?j.valueOf:void 0;function S(E,A,P,D,R,T,_){switch(P){case y:if(E.byteLength!=A.byteLength||E.byteOffset!=A.byteOffset)return!1;E=E.buffer,A=A.buffer;case w:return!(E.byteLength!=A.byteLength||!T(new t(E),new t(A)));case c:case d:case p:return r(+E,+A);case u:return E.name==A.name&&E.message==A.message;case m:case v:return E==A+"";case f:var B=s;case b:var U=D&o;if(B||(B=i),E.size!=A.size&&!U)return!1;var H=_.get(E);if(H)return H==A;D|=l,_.set(E,A);var Y=a(B(E),B(A),D,R,T,_);return _.delete(E),Y;case g:if(N)return N.call(E)==N.call(A)}return!1}return Gw=S,Gw}var Kw,hA;function wL(){if(hA)return Kw;hA=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return Kw=e,Kw}var Xw,mA;function cz(){if(mA)return Xw;mA=1;var e=wL(),t=ic();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return Xw=r,Xw}var Yw,pA;function dz(){if(pA)return Yw;pA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return Yw=e,Yw}var Jw,xA;function uz(){if(xA)return Jw;xA=1;function e(){return[]}return Jw=e,Jw}var Qw,gA;function fz(){if(gA)return Qw;gA=1;var e=dz(),t=uz(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return Qw=i,Qw}var Zw,vA;function hz(){if(vA)return Zw;vA=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return Zw=e,Zw}var eN,bA;function mz(){if(bA)return eN;bA=1;var e=Lf(),t=Ff(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return eN=a,eN}var tN,yA;function bS(){if(yA)return tN;yA=1;var e=mz(),t=Ff(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return tN=i,tN}var Kp={exports:{}},rN,wA;function pz(){if(wA)return rN;wA=1;function e(){return!1}return rN=e,rN}Kp.exports;var NA;function NL(){return NA||(NA=1,(function(e,t){var r=Wu(),a=pz(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Kp,Kp.exports)),Kp.exports}var nN,jA;function yS(){if(jA)return nN;jA=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return nN=r,nN}var aN,kA;function wS(){if(kA)return aN;kA=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return aN=t,aN}var sN,SA;function xz(){if(SA)return sN;SA=1;var e=Lf(),t=wS(),r=Ff(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",f="[object Object]",p="[object RegExp]",m="[object Set]",b="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",w="[object DataView]",y="[object Float32Array]",j="[object Float64Array]",N="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",D="[object Uint16Array]",R="[object Uint32Array]",T={};T[y]=T[j]=T[N]=T[S]=T[E]=T[A]=T[P]=T[D]=T[R]=!0,T[a]=T[s]=T[g]=T[i]=T[w]=T[o]=T[l]=T[c]=T[d]=T[u]=T[f]=T[p]=T[m]=T[b]=T[v]=!1;function _(B){return r(B)&&t(B.length)&&!!T[e(B)]}return sN=_,sN}var iN,_A;function jL(){if(_A)return iN;_A=1;function e(t){return function(r){return t(r)}}return iN=e,iN}var Xp={exports:{}};Xp.exports;var CA;function gz(){return CA||(CA=1,(function(e,t){var r=z8(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Xp,Xp.exports)),Xp.exports}var oN,AA;function kL(){if(AA)return oN;AA=1;var e=xz(),t=jL(),r=gz(),a=r&&r.isTypedArray,s=a?t(a):e;return oN=s,oN}var lN,EA;function vz(){if(EA)return lN;EA=1;var e=hz(),t=bS(),r=ic(),a=NL(),s=yS(),i=kL(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var f=r(d),p=!f&&t(d),m=!f&&!p&&a(d),b=!f&&!p&&!m&&i(d),v=f||p||m||b,g=v?e(d.length,String):[],w=g.length;for(var y in d)(u||l.call(d,y))&&!(v&&(y=="length"||m&&(y=="offset"||y=="parent")||b&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||s(y,w)))&&g.push(y);return g}return lN=c,lN}var cN,TA;function bz(){if(TA)return cN;TA=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return cN=t,cN}var dN,OA;function SL(){if(OA)return dN;OA=1;function e(t,r){return function(a){return t(r(a))}}return dN=e,dN}var uN,PA;function yz(){if(PA)return uN;PA=1;var e=SL(),t=e(Object.keys,Object);return uN=t,uN}var fN,IA;function wz(){if(IA)return fN;IA=1;var e=bz(),t=yz(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return fN=s,fN}var hN,DA;function Ng(){if(DA)return hN;DA=1;var e=sS(),t=wS();function r(a){return a!=null&&t(a.length)&&!e(a)}return hN=r,hN}var mN,LA;function Kb(){if(LA)return mN;LA=1;var e=vz(),t=wz(),r=Ng();function a(s){return r(s)?e(s):t(s)}return mN=a,mN}var pN,FA;function Nz(){if(FA)return pN;FA=1;var e=cz(),t=fz(),r=Kb();function a(s){return e(s,r,t)}return pN=a,pN}var xN,MA;function jz(){if(MA)return xN;MA=1;var e=Nz(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,c,d,u){var f=l&t,p=e(i),m=p.length,b=e(o),v=b.length;if(m!=v&&!f)return!1;for(var g=m;g--;){var w=p[g];if(!(f?w in o:a.call(o,w)))return!1}var y=u.get(i),j=u.get(o);if(y&&j)return y==o&&j==i;var N=!0;u.set(i,o),u.set(o,i);for(var S=f;++g<m;){w=p[g];var E=i[w],A=o[w];if(c)var P=f?c(A,E,w,o,i,u):c(E,A,w,i,o,u);if(!(P===void 0?E===A||d(E,A,l,c,u):P)){N=!1;break}S||(S=w=="constructor")}if(N&&!S){var D=i.constructor,R=o.constructor;D!=R&&"constructor"in i&&"constructor"in o&&!(typeof D=="function"&&D instanceof D&&typeof R=="function"&&R instanceof R)&&(N=!1)}return u.delete(i),u.delete(o),N}return xN=s,xN}var gN,RA;function kz(){if(RA)return gN;RA=1;var e=Mh(),t=Wu(),r=e(t,"DataView");return gN=r,gN}var vN,BA;function Sz(){if(BA)return vN;BA=1;var e=Mh(),t=Wu(),r=e(t,"Promise");return vN=r,vN}var bN,UA;function _L(){if(UA)return bN;UA=1;var e=Mh(),t=Wu(),r=e(t,"Set");return bN=r,bN}var yN,qA;function _z(){if(qA)return yN;qA=1;var e=Mh(),t=Wu(),r=e(t,"WeakMap");return yN=r,yN}var wN,$A;function Cz(){if($A)return wN;$A=1;var e=kz(),t=oS(),r=Sz(),a=_L(),s=_z(),i=Lf(),o=H8(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",f="[object WeakMap]",p="[object DataView]",m=o(e),b=o(t),v=o(r),g=o(a),w=o(s),y=i;return(e&&y(new e(new ArrayBuffer(1)))!=p||t&&y(new t)!=l||r&&y(r.resolve())!=d||a&&y(new a)!=u||s&&y(new s)!=f)&&(y=function(j){var N=i(j),S=N==c?j.constructor:void 0,E=S?o(S):"";if(E)switch(E){case m:return p;case b:return l;case v:return d;case g:return u;case w:return f}return N}),wN=y,wN}var NN,zA;function Az(){if(zA)return NN;zA=1;var e=xL(),t=yL(),r=lz(),a=jz(),s=Cz(),i=ic(),o=NL(),l=kL(),c=1,d="[object Arguments]",u="[object Array]",f="[object Object]",p=Object.prototype,m=p.hasOwnProperty;function b(v,g,w,y,j,N){var S=i(v),E=i(g),A=S?u:s(v),P=E?u:s(g);A=A==d?f:A,P=P==d?f:P;var D=A==f,R=P==f,T=A==P;if(T&&o(v)){if(!o(g))return!1;S=!0,D=!1}if(T&&!D)return N||(N=new e),S||l(v)?t(v,g,w,y,j,N):r(v,g,A,w,y,j,N);if(!(w&c)){var _=D&&m.call(v,"__wrapped__"),B=R&&m.call(g,"__wrapped__");if(_||B){var U=_?v.value():v,H=B?g.value():g;return N||(N=new e),j(U,H,w,y,N)}}return T?(N||(N=new e),a(v,g,w,y,j,N)):!1}return NN=b,NN}var jN,HA;function NS(){if(HA)return jN;HA=1;var e=Az(),t=Ff();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return jN=r,jN}var kN,WA;function Ez(){if(WA)return kN;WA=1;var e=xL(),t=NS(),r=1,a=2;function s(i,o,l,c){var d=l.length,u=d,f=!c;if(i==null)return!u;for(i=Object(i);d--;){var p=l[d];if(f&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++d<u;){p=l[d];var m=p[0],b=i[m],v=p[1];if(f&&p[2]){if(b===void 0&&!(m in i))return!1}else{var g=new e;if(c)var w=c(b,v,m,i,o,g);if(!(w===void 0?t(v,b,r|a,c,g):w))return!1}}return!0}return kN=s,kN}var SN,VA;function CL(){if(VA)return SN;VA=1;var e=A0();function t(r){return r===r&&!e(r)}return SN=t,SN}var _N,GA;function Tz(){if(GA)return _N;GA=1;var e=CL(),t=Kb();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return _N=r,_N}var CN,KA;function AL(){if(KA)return CN;KA=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return CN=e,CN}var AN,XA;function Oz(){if(XA)return AN;XA=1;var e=Ez(),t=Tz(),r=AL();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return AN=a,AN}var EN,YA;function Pz(){if(YA)return EN;YA=1;function e(t,r){return t!=null&&r in Object(t)}return EN=e,EN}var TN,JA;function Iz(){if(JA)return TN;JA=1;var e=G8(),t=bS(),r=ic(),a=yS(),s=wS(),i=zb();function o(l,c,d){c=e(c,l);for(var u=-1,f=c.length,p=!1;++u<f;){var m=i(c[u]);if(!(p=l!=null&&d(l,m)))break;l=l[m]}return p||++u!=f?p:(f=l==null?0:l.length,!!f&&s(f)&&a(m,f)&&(r(l)||t(l)))}return TN=o,TN}var ON,QA;function Dz(){if(QA)return ON;QA=1;var e=Pz(),t=Iz();function r(a,s){return a!=null&&t(a,s,e)}return ON=r,ON}var PN,ZA;function Lz(){if(ZA)return PN;ZA=1;var e=NS(),t=K8(),r=Dz(),a=aS(),s=CL(),i=AL(),o=zb(),l=1,c=2;function d(u,f){return a(u)&&s(f)?i(o(u),f):function(p){var m=t(p,u);return m===void 0&&m===f?r(p,u):e(f,m,l|c)}}return PN=d,PN}var IN,eE;function cp(){if(eE)return IN;eE=1;function e(t){return t}return IN=e,IN}var DN,tE;function Fz(){if(tE)return DN;tE=1;function e(t){return function(r){return r?.[t]}}return DN=e,DN}var LN,rE;function Mz(){if(rE)return LN;rE=1;var e=dS();function t(r){return function(a){return e(a,r)}}return LN=t,LN}var FN,nE;function Rz(){if(nE)return FN;nE=1;var e=Fz(),t=Mz(),r=aS(),a=zb();function s(i){return r(i)?e(a(i)):t(i)}return FN=s,FN}var MN,aE;function E0(){if(aE)return MN;aE=1;var e=Oz(),t=Lz(),r=cp(),a=ic(),s=Rz();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return MN=i,MN}var RN,sE;function EL(){if(sE)return RN;sE=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return RN=e,RN}var BN,iE;function Bz(){if(iE)return BN;iE=1;function e(t){return t!==t}return BN=e,BN}var UN,oE;function Uz(){if(oE)return UN;oE=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return UN=e,UN}var qN,lE;function qz(){if(lE)return qN;lE=1;var e=EL(),t=Bz(),r=Uz();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return qN=a,qN}var $N,cE;function $z(){if(cE)return $N;cE=1;var e=qz();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return $N=t,$N}var zN,dE;function zz(){if(dE)return zN;dE=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return zN=e,zN}var HN,uE;function Hz(){if(uE)return HN;uE=1;function e(){}return HN=e,HN}var WN,fE;function Wz(){if(fE)return WN;fE=1;var e=_L(),t=Hz(),r=vS(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return WN=s,WN}var VN,hE;function Vz(){if(hE)return VN;hE=1;var e=gL(),t=$z(),r=zz(),a=bL(),s=Wz(),i=vS(),o=200;function l(c,d,u){var f=-1,p=t,m=c.length,b=!0,v=[],g=v;if(u)b=!1,p=r;else if(m>=o){var w=d?null:s(c);if(w)return i(w);b=!1,p=a,g=new e}else g=d?[]:v;e:for(;++f<m;){var y=c[f],j=d?d(y):y;if(y=u||y!==0?y:0,b&&j===j){for(var N=g.length;N--;)if(g[N]===j)continue e;d&&g.push(j),v.push(y)}else p(g,j,u)||(g!==v&&g.push(j),v.push(y))}return v}return VN=l,VN}var GN,mE;function Gz(){if(mE)return GN;mE=1;var e=E0(),t=Vz();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return GN=r,GN}var Kz=Gz();const pE=Ta(Kz);function TL(e,t,r){return t===!0?pE(e,r):En(t)?pE(e,t):e}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}var Xz=["ref"];function xE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ff(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(r),!0).forEach(function(a){Xb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gE(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PL(a.key),a)}}function Jz(e,t,r){return t&&gE(e.prototype,t),r&&gE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qz(e,t,r){return t=j1(t),Zz(e,OL()?Reflect.construct(t,r||[],j1(e).constructor):t.apply(e,r))}function Zz(e,t){if(t&&(Lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eH(e)}function eH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OL=function(){return!!e})()}function j1(e){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j1(e)}function tH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x4(e,t)}function x4(e,t){return x4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},x4(e,t)}function Xb(e,t,r){return t=PL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PL(e){var t=rH(e,"string");return Lm(t)=="symbol"?t:t+""}function rH(e,t){if(Lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nH(e,t){if(e==null)return{};var r=aH(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function aH(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function sH(e){return e.value}function iH(e,t){if(ft.isValidElement(e))return ft.cloneElement(e,t);if(typeof e=="function")return ft.createElement(e,t);t.ref;var r=nH(t,Xz);return ft.createElement(gS,r)}var vE=1,Nm=(function(e){function t(){var r;Yz(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Qz(this,t,[].concat(s)),Xb(r,"lastBoundingBox",{width:-1,height:-1}),r}return tH(t,e),Jz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>vE||Math.abs(s.height-this.lastBoundingBox.height)>vE)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ff({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,f,p;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((d||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();p={top:((u||0)-b.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ff(ff({},f),p)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,f=ff(ff({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ft.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){a.wrapperNode=m}},iH(i,ff(ff({},this.props),{},{payload:TL(u,d,sH)})))}}],[{key:"getWithHeight",value:function(a,s){var i=ff(ff({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&ur(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(I.PureComponent);Xb(Nm,"displayName","Legend");Xb(Nm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var KN,bE;function oH(){if(bE)return KN;bE=1;var e=yg(),t=bS(),r=ic(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return KN=s,KN}var XN,yE;function IL(){if(yE)return XN;yE=1;var e=wL(),t=oH();function r(a,s,i,o,l){var c=-1,d=a.length;for(i||(i=t),l||(l=[]);++c<d;){var u=a[c];s>0&&i(u)?s>1?r(u,s-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return XN=r,XN}var YN,wE;function lH(){if(wE)return YN;wE=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var d=l[t?c:++i];if(a(o[d],d,o)===!1)break}return r}}return YN=e,YN}var JN,NE;function cH(){if(NE)return JN;NE=1;var e=lH(),t=e();return JN=t,JN}var QN,jE;function DL(){if(jE)return QN;jE=1;var e=cH(),t=Kb();function r(a,s){return a&&e(a,s,t)}return QN=r,QN}var ZN,kE;function dH(){if(kE)return ZN;kE=1;var e=Ng();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,c=Object(s);(a?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return ZN=t,ZN}var e5,SE;function jS(){if(SE)return e5;SE=1;var e=DL(),t=dH(),r=t(e);return e5=r,e5}var t5,_E;function LL(){if(_E)return t5;_E=1;var e=jS(),t=Ng();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,c,d){o[++i]=s(l,c,d)}),o}return t5=r,t5}var r5,CE;function uH(){if(CE)return r5;CE=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return r5=e,r5}var n5,AE;function fH(){if(AE)return n5;AE=1;var e=ip();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=a!==void 0,d=a===null,u=a===a,f=e(a);if(!d&&!f&&!l&&r>a||l&&c&&u&&!d&&!f||i&&c&&u||!s&&u||!o)return 1;if(!i&&!l&&!f&&r<a||f&&s&&o&&!i&&!l||d&&s&&o||!c&&o||!u)return-1}return 0}return n5=t,n5}var a5,EE;function hH(){if(EE)return a5;EE=1;var e=fH();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,c=o.length,d=s.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var f=s[i];return u*(f=="desc"?-1:1)}}return r.index-a.index}return a5=t,a5}var s5,TE;function mH(){if(TE)return s5;TE=1;var e=cS(),t=dS(),r=E0(),a=LL(),s=uH(),i=jL(),o=hH(),l=cp(),c=ic();function d(u,f,p){f.length?f=e(f,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):f=[l];var m=-1;f=e(f,i(r));var b=a(u,function(v,g,w){var y=e(f,function(j){return j(v)});return{criteria:y,index:++m,value:v}});return s(b,function(v,g){return o(v,g,p)})}return s5=d,s5}var i5,OE;function pH(){if(OE)return i5;OE=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return i5=e,i5}var o5,PE;function xH(){if(PE)return o5;PE=1;var e=pH(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),d=Array(c);++l<c;)d[l]=o[s+l];l=-1;for(var u=Array(s+1);++l<s;)u[l]=o[l];return u[s]=i(d),e(a,this,u)}}return o5=r,o5}var l5,IE;function gH(){if(IE)return l5;IE=1;function e(t){return function(){return t}}return l5=e,l5}var c5,DE;function FL(){if(DE)return c5;DE=1;var e=Mh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return c5=t,c5}var d5,LE;function vH(){if(LE)return d5;LE=1;var e=gH(),t=FL(),r=cp(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return d5=a,d5}var u5,FE;function bH(){if(FE)return u5;FE=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return u5=a,u5}var f5,ME;function yH(){if(ME)return f5;ME=1;var e=vH(),t=bH(),r=t(e);return f5=r,f5}var h5,RE;function wH(){if(RE)return h5;RE=1;var e=cp(),t=xH(),r=yH();function a(s,i){return r(t(s,i,e),s+"")}return h5=a,h5}var m5,BE;function Yb(){if(BE)return m5;BE=1;var e=iS(),t=Ng(),r=yS(),a=A0();function s(i,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return m5=s,m5}var p5,UE;function NH(){if(UE)return p5;UE=1;var e=IL(),t=mH(),r=wH(),a=Yb(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return p5=s,p5}var jH=NH();const kS=Ta(jH);function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function g4(){return g4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},g4.apply(this,arguments)}function kH(e,t){return AH(e)||CH(e,t)||_H(e,t)||SH()}function SH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _H(e,t){if(e){if(typeof e=="string")return qE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qE(e,t)}}function qE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function CH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function AH(e){if(Array.isArray(e))return e}function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function x5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(a){EH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function EH(e,t,r){return t=TH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TH(e){var t=OH(e,"string");return jx(t)=="symbol"?t:t+""}function OH(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(jx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PH(e){return Array.isArray(e)&&$i(e[0])&&$i(e[1])?e.join(" ~ "):e}var IH=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,p=t.itemSorter,m=t.wrapperClassName,b=t.labelClassName,v=t.label,g=t.labelFormatter,w=t.accessibilityLayer,y=w===void 0?!1:w,j=function(){if(u&&u.length){var _={padding:0,margin:0},B=(p?kS(u,p):u).map(function(U,H){if(U.type==="none")return null;var Y=x5({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),J=U.formatter||f||PH,re=U.value,X=U.name,ee=re,W=X;if(J&&ee!=null&&W!=null){var O=J(re,X,U,H,u);if(Array.isArray(O)){var z=kH(O,2);ee=z[0],W=z[1]}else ee=O}return ft.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:Y},$i(W)?ft.createElement("span",{className:"recharts-tooltip-item-name"},W):null,$i(W)?ft.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,ft.createElement("span",{className:"recharts-tooltip-item-value"},ee),ft.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return ft.createElement("ul",{className:"recharts-tooltip-item-list",style:_},B)}return null},N=x5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=x5({margin:0},d),E=!zn(v),A=E?v:"",P=la("recharts-default-tooltip",m),D=la("recharts-tooltip-label",b);E&&g&&u!==void 0&&u!==null&&(A=g(v,u));var R=y?{role:"status","aria-live":"assertive"}:{};return ft.createElement("div",g4({className:P,style:N},R),ft.createElement("p",{className:D,style:S},ft.isValidElement(A)?A:"".concat(A)),j())};function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function fv(e,t,r){return t=DH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DH(e){var t=LH(e,"string");return kx(t)=="symbol"?t:t+""}function LH(e,t){if(kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(kx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Op="recharts-tooltip-wrapper",FH={visibility:"hidden"};function MH(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return la(Op,fv(fv(fv(fv({},"".concat(Op,"-right"),ur(r)&&t&&ur(t.x)&&r>=t.x),"".concat(Op,"-left"),ur(r)&&t&&ur(t.x)&&r<t.x),"".concat(Op,"-bottom"),ur(a)&&t&&ur(t.y)&&a>=t.y),"".concat(Op,"-top"),ur(a)&&t&&ur(t.y)&&a<t.y))}function zE(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&ur(i[a]))return i[a];var u=r[a]-l-s,f=r[a]+s;if(t[a])return o[a]?u:f;if(o[a]){var p=u,m=c[a];return p<m?Math.max(f,c[a]):Math.max(u,c[a])}var b=f+l,v=c[a]+d;return b>v?Math.max(u,c[a]):Math.max(f,c[a])}function RH(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function BH(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=zE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=zE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=RH({translateX:u,translateY:f,useTranslate3d:l})):d=FH,{cssProperties:d,cssClasses:MH({translateX:u,translateY:f,coordinate:r})}}function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function WE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(a){b4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RL(a.key),a)}}function $H(e,t,r){return t&&qH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zH(e,t,r){return t=k1(t),HH(e,ML()?Reflect.construct(t,r||[],k1(e).constructor):t.apply(e,r))}function HH(e,t){if(t&&(Fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WH(e)}function WH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ML=function(){return!!e})()}function k1(e){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k1(e)}function VH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v4(e,t)}function v4(e,t){return v4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},v4(e,t)}function b4(e,t,r){return t=RL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RL(e){var t=GH(e,"string");return Fm(t)=="symbol"?t:t+""}function GH(e,t){if(Fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VE=1,KH=(function(e){function t(){var r;UH(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=zH(this,t,[].concat(s)),b4(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),b4(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return VH(t,e),$H(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>VE||Math.abs(a.height-this.state.lastBoundingBox.height)>VE)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,f=s.hasPayload,p=s.isAnimationActive,m=s.offset,b=s.position,v=s.reverseDirection,g=s.useTranslate3d,w=s.viewBox,y=s.wrapperStyle,j=BH({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:w}),N=j.cssClasses,S=j.cssProperties,E=WE(WE({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return ft.createElement("div",{tabIndex:-1,className:N,style:E,ref:function(P){a.wrapperNode=P}},d)}}])})(I.PureComponent),XH=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},dp={isSsr:XH()};function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function GE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(r),!0).forEach(function(a){SS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function YH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,UL(a.key),a)}}function QH(e,t,r){return t&&JH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZH(e,t,r){return t=S1(t),eW(e,BL()?Reflect.construct(t,r||[],S1(e).constructor):t.apply(e,r))}function eW(e,t){if(t&&(Mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tW(e)}function tW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BL=function(){return!!e})()}function S1(e){return S1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S1(e)}function rW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y4(e,t)}function y4(e,t){return y4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},y4(e,t)}function SS(e,t,r){return t=UL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UL(e){var t=nW(e,"string");return Mm(t)=="symbol"?t:t+""}function nW(e,t){if(Mm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Mm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function aW(e){return e.dataKey}function sW(e,t){return ft.isValidElement(e)?ft.cloneElement(e,t):typeof e=="function"?ft.createElement(e,t):ft.createElement(IH,t)}var Ou=(function(e){function t(){return YH(this,t),ZH(this,t,arguments)}return rW(t,e),QH(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,f=s.filterNull,p=s.isAnimationActive,m=s.offset,b=s.payload,v=s.payloadUniqBy,g=s.position,w=s.reverseDirection,y=s.useTranslate3d,j=s.viewBox,N=s.wrapperStyle,S=b??[];f&&S.length&&(S=TL(b.filter(function(A){return A.value!=null&&(A.hide!==!0||a.props.includeHidden)}),v,aW));var E=S.length>0;return ft.createElement(KH,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:u,hasPayload:E,offset:m,position:g,reverseDirection:w,useTranslate3d:y,viewBox:j,wrapperStyle:N},sW(d,KE(KE({},this.props),{},{payload:S})))}}])})(I.PureComponent);SS(Ou,"displayName","Tooltip");SS(Ou,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!dp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var g5,XE;function iW(){if(XE)return g5;XE=1;var e=Wu(),t=function(){return e.Date.now()};return g5=t,g5}var v5,YE;function oW(){if(YE)return v5;YE=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return v5=t,v5}var b5,JE;function lW(){if(JE)return b5;JE=1;var e=oW(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return b5=r,b5}var y5,QE;function qL(){if(QE)return y5;QE=1;var e=lW(),t=A0(),r=ip(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return a;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=i.test(d);return f||o.test(d)?l(d.slice(2),f?2:8):s.test(d)?a:+d}return y5=c,y5}var w5,ZE;function cW(){if(ZE)return w5;ZE=1;var e=A0(),t=iW(),r=qL(),a="Expected a function",s=Math.max,i=Math.min;function o(l,c,d){var u,f,p,m,b,v,g=0,w=!1,y=!1,j=!0;if(typeof l!="function")throw new TypeError(a);c=r(c)||0,e(d)&&(w=!!d.leading,y="maxWait"in d,p=y?s(r(d.maxWait)||0,c):p,j="trailing"in d?!!d.trailing:j);function N(B){var U=u,H=f;return u=f=void 0,g=B,m=l.apply(H,U),m}function S(B){return g=B,b=setTimeout(P,c),w?N(B):m}function E(B){var U=B-v,H=B-g,Y=c-U;return y?i(Y,p-H):Y}function A(B){var U=B-v,H=B-g;return v===void 0||U>=c||U<0||y&&H>=p}function P(){var B=t();if(A(B))return D(B);b=setTimeout(P,E(B))}function D(B){return b=void 0,j&&u?N(B):(u=f=void 0,m)}function R(){b!==void 0&&clearTimeout(b),g=0,u=v=f=b=void 0}function T(){return b===void 0?m:D(t())}function _(){var B=t(),U=A(B);if(u=arguments,f=this,v=B,U){if(b===void 0)return S(v);if(y)return clearTimeout(b),b=setTimeout(P,c),N(v)}return b===void 0&&(b=setTimeout(P,c)),m}return _.cancel=R,_.flush=T,_}return w5=o,w5}var N5,eT;function dW(){if(eT)return N5;eT=1;var e=cW(),t=A0(),r="Expected a function";function a(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return N5=a,N5}var uW=dW();const $L=Ta(uW);function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}function tT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(r),!0).forEach(function(a){fW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fW(e,t,r){return t=hW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hW(e){var t=mW(e,"string");return Sx(t)=="symbol"?t:t+""}function mW(e,t){if(Sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Sx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pW(e,t){return bW(e)||vW(e,t)||gW(e,t)||xW()}function xW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gW(e,t){if(e){if(typeof e=="string")return rT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rT(e,t)}}function rT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function vW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function bW(e){if(Array.isArray(e))return e}var yW=I.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,p=e.maxHeight,m=e.children,b=e.debounce,v=b===void 0?0:b,g=e.id,w=e.className,y=e.onResize,j=e.style,N=j===void 0?{}:j,S=I.useRef(null),E=I.useRef();E.current=y,I.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var A=I.useState({containerWidth:s.width,containerHeight:s.height}),P=pW(A,2),D=P[0],R=P[1],T=I.useCallback(function(B,U){R(function(H){var Y=Math.round(B),J=Math.round(U);return H.containerWidth===Y&&H.containerHeight===J?H:{containerWidth:Y,containerHeight:J}})},[]);I.useEffect(function(){var B=function(X){var ee,W=X[0].contentRect,O=W.width,z=W.height;T(O,z),(ee=E.current)===null||ee===void 0||ee.call(E,O,z)};v>0&&(B=$L(B,v,{trailing:!0,leading:!1}));var U=new ResizeObserver(B),H=S.current.getBoundingClientRect(),Y=H.width,J=H.height;return T(Y,J),U.observe(S.current),function(){U.disconnect()}},[T,v]);var _=I.useMemo(function(){var B=D.containerWidth,U=D.containerHeight;if(B<0||U<0)return null;Sf(ih(o)||ih(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Sf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var H=ih(o)?B:o,Y=ih(c)?U:c;r&&r>0&&(H?Y=H/r:Y&&(H=Y*r),p&&Y>p&&(Y=p)),Sf(H>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,Y,o,c,u,f,r);var J=!Array.isArray(m)&&kf(m.type).endsWith("Chart");return ft.Children.map(m,function(re){return ft.isValidElement(re)?I.cloneElement(re,hv({width:H,height:Y},J?{style:hv({height:"100%",width:"100%",maxHeight:Y,maxWidth:H},re.props.style)}:{})):re})},[r,m,c,p,f,u,D,o]);return ft.createElement("div",{id:g?"".concat(g):void 0,className:la("recharts-responsive-container",w),style:hv(hv({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:p}),ref:S},_)}),zL=function(t){return null};zL.displayName="Cell";function _x(e){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_x(e)}function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function w4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nT(Object(r),!0).forEach(function(a){wW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wW(e,t,r){return t=NW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NW(e){var t=jW(e,"string");return _x(t)=="symbol"?t:t+""}function jW(e,t){if(_x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(_x(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sm={widthCache:{},cacheCount:0},kW=2e3,SW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aT="recharts_measurement_span";function _W(e){var t=w4({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ax=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||dp.isSsr)return{width:0,height:0};var a=_W(r),s=JSON.stringify({text:t,copyStyle:a});if(sm.widthCache[s])return sm.widthCache[s];try{var i=document.getElementById(aT);i||(i=document.createElement("span"),i.setAttribute("id",aT),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=w4(w4({},SW),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return sm.widthCache[s]=c,++sm.cacheCount>kW&&(sm.cacheCount=0,sm.widthCache={}),c}catch{return{width:0,height:0}}},CW=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function _1(e,t){return OW(e)||TW(e,t)||EW(e,t)||AW()}function AW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EW(e,t){if(e){if(typeof e=="string")return sT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sT(e,t)}}function sT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function TW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function OW(e){if(Array.isArray(e))return e}function PW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iT(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,DW(a.key),a)}}function IW(e,t,r){return t&&iT(e.prototype,t),r&&iT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DW(e){var t=LW(e,"string");return Cx(t)=="symbol"?t:t+""}function LW(e,t){if(Cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Cx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,HL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},RW=Object.keys(HL),xm="NaN";function BW(e,t){return e*HL[t]}var mv=(function(){function e(t,r){PW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!FW.test(r)&&(this.num=NaN,this.unit=""),RW.includes(r)&&(this.num=BW(t,r),this.unit="px")}return IW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=MW.exec(r))!==null&&a!==void 0?a:[],i=_1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function WL(e){if(e.includes(xm))return xm;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=oT.exec(t))!==null&&r!==void 0?r:[],s=_1(a,4),i=s[1],o=s[2],l=s[3],c=mv.parse(i??""),d=mv.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return xm;t=t.replace(oT,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=lT.exec(t))!==null&&f!==void 0?f:[],m=_1(p,4),b=m[1],v=m[2],g=m[3],w=mv.parse(b??""),y=mv.parse(g??""),j=v==="+"?w.add(y):w.subtract(y);if(j.isNaN())return xm;t=t.replace(lT,j.toString())}return t}var cT=/\(([^()]*)\)/;function UW(e){for(var t=e;t.includes("(");){var r=cT.exec(t),a=_1(r,2),s=a[1];t=t.replace(cT,WL(s))}return t}function qW(e){var t=e.replace(/\s+/g,"");return t=UW(t),t=WL(t),t}function $W(e){try{return qW(e)}catch{return xm}}function j5(e){var t=$W(e.slice(5,-1));return t===xm?"":t}var zW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HW=["dx","dy","angle","className","breakAll"];function N4(){return N4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},N4.apply(this,arguments)}function dT(e,t){if(e==null)return{};var r=WW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function uT(e,t){return XW(e)||KW(e,t)||GW(e,t)||VW()}function VW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GW(e,t){if(e){if(typeof e=="string")return fT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fT(e,t)}}function fT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function KW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function XW(e){if(Array.isArray(e))return e}var VL=/[ \f\n\r\t\v\u2028\u2029]+/,GL=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];zn(r)||(a?i=r.toString().split(""):i=r.toString().split(VL));var o=i.map(function(c){return{word:c,width:ax(c,s).width}}),l=a?0:ax("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},YW=function(t,r,a,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=ur(o),f=l,p=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(Y,J){var re=J.word,X=J.width,ee=Y[Y.length-1];if(ee&&(s==null||i||ee.width+X+a<Number(s)))ee.words.push(re),ee.width+=X+a;else{var W={words:[re],width:X};Y.push(W)}return Y},[])},m=p(r),b=function(H){return H.reduce(function(Y,J){return Y.width>J.width?Y:J})};if(!u)return m;for(var v="",g=function(H){var Y=f.slice(0,H),J=GL({breakAll:d,style:c,children:Y+v}).wordsWithComputedWidth,re=p(J),X=re.length>o||b(re).width>Number(s);return[X,re]},w=0,y=f.length-1,j=0,N;w<=y&&j<=f.length-1;){var S=Math.floor((w+y)/2),E=S-1,A=g(E),P=uT(A,2),D=P[0],R=P[1],T=g(S),_=uT(T,1),B=_[0];if(!D&&!B&&(w=S+1),D&&B&&(y=S-1),!D&&B){N=R;break}j++}return N||m},hT=function(t){var r=zn(t)?[]:t.toString().split(VL);return[{words:r}]},JW=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!dp.isSsr){var c,d,u=GL({breakAll:o,children:s,style:i});if(u){var f=u.wordsWithComputedWidth,p=u.spaceWidth;c=f,d=p}else return hT(s);return YW({breakAll:o,children:s,maxLines:l,style:i},c,d,r,a)}return hT(s)},mT="#808080",C1=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,p=t.textAnchor,m=p===void 0?"start":p,b=t.verticalAnchor,v=b===void 0?"end":b,g=t.fill,w=g===void 0?mT:g,y=dT(t,zW),j=I.useMemo(function(){return JW({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),N=y.dx,S=y.dy,E=y.angle,A=y.className,P=y.breakAll,D=dT(y,HW);if(!$i(a)||!$i(i))return null;var R=a+(ur(N)?N:0),T=i+(ur(S)?S:0),_;switch(v){case"start":_=j5("calc(".concat(d,")"));break;case"middle":_=j5("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:_=j5("calc(".concat(j.length-1," * -").concat(l,")"));break}var B=[];if(f){var U=j[0].width,H=y.width;B.push("scale(".concat((ur(H)?H/U:1)/U,")"))}return E&&B.push("rotate(".concat(E,", ").concat(R,", ").concat(T,")")),B.length&&(D.transform=B.join(" ")),ft.createElement("text",N4({},$n(D,!0),{x:R,y:T,className:la("recharts-text",A),textAnchor:m,fill:w.includes("url")?mT:w}),j.map(function(Y,J){var re=Y.words.join(P?"":" ");return ft.createElement("tspan",{x:R,dy:J===0?_:l,key:"".concat(re,"-").concat(J)},re)}))};function v0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _S(e){let t,r,a;e.length!==2?(t=v0,r=(l,c)=>v0(e(l),c),a=(l,c)=>e(l)-c):(t=e===v0||e===QW?e:ZW,r=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=s(l,c,d,u-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function ZW(){return 0}function KL(e){return e===null?NaN:+e}function*eV(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const tV=_S(v0),jg=tV.right;_S(KL).center;class pT extends Map{constructor(t,r=aV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(xT(this,t))}has(t){return super.has(xT(this,t))}set(t,r){return super.set(rV(this,t),r)}delete(t){return super.delete(nV(this,t))}}function xT({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function rV({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function nV({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function aV(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sV(e=v0){if(e===v0)return XL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function XL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const iV=Math.sqrt(50),oV=Math.sqrt(10),lV=Math.sqrt(2);function A1(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=iV?10:i>=oV?5:i>=lV?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?A1(e,t,r*2):[l,c,d]}function j4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?A1(t,e,r):A1(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function k4(e,t,r){return t=+t,e=+e,r=+r,A1(e,t,r)[2]}function S4(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?k4(t,e,r):k4(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function gT(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function vT(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function YL(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?XL:sV(s);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*f/c+p)),b=Math.min(a,Math.floor(t+(c-d)*f/c+p));YL(e,t,m,b,s)}const i=e[t];let o=r,l=a;for(Pp(e,r,t),s(e[a],i)>0&&Pp(e,r,a);o<l;){for(Pp(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Pp(e,r,l):(++l,Pp(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Pp(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function cV(e,t,r){if(e=Float64Array.from(eV(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return vT(e);if(t>=1)return gT(e);var a,s=(a-1)*t,i=Math.floor(s),o=gT(YL(e,i).subarray(0,i+1)),l=vT(e.subarray(i+1));return o+(l-o)*(s-i)}}function dV(e,t,r=KL){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function uV(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function yd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Mf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _4=Symbol("implicit");function CS(){var e=new pT,t=[],r=[],a=_4;function s(i){let o=e.get(i);if(o===void 0){if(a!==_4)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new pT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return CS(t,r).unknown(a)},yd.apply(s,arguments),s}function Ax(){var e=CS().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,m=s<a,b=m?s:a,v=m?a:s;i=(v-b)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),b+=(v-b-i*(p-c))*u,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var g=uV(p).map(function(w){return b+i*w});return r(m?g.reverse():g)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return Ax(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},yd.apply(f(),arguments)}function JL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return JL(t())},e}function sx(){return JL(Ax.apply(null,arguments).paddingInner(1))}function AS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function QL(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function kg(){}var Ex=.7,E1=1/Ex,jm="\\s*([+-]?\\d+)\\s*",Tx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fV=/^#([0-9a-f]{3,8})$/,hV=new RegExp(`^rgb\\(${jm},${jm},${jm}\\)$`),mV=new RegExp(`^rgb\\(${Uu},${Uu},${Uu}\\)$`),pV=new RegExp(`^rgba\\(${jm},${jm},${jm},${Tx}\\)$`),xV=new RegExp(`^rgba\\(${Uu},${Uu},${Uu},${Tx}\\)$`),gV=new RegExp(`^hsl\\(${Tx},${Uu},${Uu}\\)$`),vV=new RegExp(`^hsla\\(${Tx},${Uu},${Uu},${Tx}\\)$`),bT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AS(kg,Ox,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yT,formatHex:yT,formatHex8:bV,formatHsl:yV,formatRgb:wT,toString:wT});function yT(){return this.rgb().formatHex()}function bV(){return this.rgb().formatHex8()}function yV(){return ZL(this).formatHsl()}function wT(){return this.rgb().formatRgb()}function Ox(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=fV.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?NT(t):r===3?new rc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?pv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?pv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hV.exec(e))?new rc(t[1],t[2],t[3],1):(t=mV.exec(e))?new rc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pV.exec(e))?pv(t[1],t[2],t[3],t[4]):(t=xV.exec(e))?pv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gV.exec(e))?ST(t[1],t[2]/100,t[3]/100,1):(t=vV.exec(e))?ST(t[1],t[2]/100,t[3]/100,t[4]):bT.hasOwnProperty(e)?NT(bT[e]):e==="transparent"?new rc(NaN,NaN,NaN,0):null}function NT(e){return new rc(e>>16&255,e>>8&255,e&255,1)}function pv(e,t,r,a){return a<=0&&(e=t=r=NaN),new rc(e,t,r,a)}function wV(e){return e instanceof kg||(e=Ox(e)),e?(e=e.rgb(),new rc(e.r,e.g,e.b,e.opacity)):new rc}function C4(e,t,r,a){return arguments.length===1?wV(e):new rc(e,t,r,a??1)}function rc(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}AS(rc,C4,QL(kg,{brighter(e){return e=e==null?E1:Math.pow(E1,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ex:Math.pow(Ex,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rc(ph(this.r),ph(this.g),ph(this.b),T1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jT,formatHex:jT,formatHex8:NV,formatRgb:kT,toString:kT}));function jT(){return`#${oh(this.r)}${oh(this.g)}${oh(this.b)}`}function NV(){return`#${oh(this.r)}${oh(this.g)}${oh(this.b)}${oh((isNaN(this.opacity)?1:this.opacity)*255)}`}function kT(){const e=T1(this.opacity);return`${e===1?"rgb(":"rgba("}${ph(this.r)}, ${ph(this.g)}, ${ph(this.b)}${e===1?")":`, ${e})`}`}function T1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ph(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oh(e){return e=ph(e),(e<16?"0":"")+e.toString(16)}function ST(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qd(e,t,r,a)}function ZL(e){if(e instanceof Qd)return new Qd(e.h,e.s,e.l,e.opacity);if(e instanceof kg||(e=Ox(e)),!e)return new Qd;if(e instanceof Qd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Qd(o,l,c,e.opacity)}function jV(e,t,r,a){return arguments.length===1?ZL(e):new Qd(e,t,r,a??1)}function Qd(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}AS(Qd,jV,QL(kg,{brighter(e){return e=e==null?E1:Math.pow(E1,e),new Qd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ex:Math.pow(Ex,e),new Qd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new rc(k5(e>=240?e-240:e+120,s,a),k5(e,s,a),k5(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Qd(_T(this.h),xv(this.s),xv(this.l),T1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=T1(this.opacity);return`${e===1?"hsl(":"hsla("}${_T(this.h)}, ${xv(this.s)*100}%, ${xv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _T(e){return e=(e||0)%360,e<0?e+360:e}function xv(e){return Math.max(0,Math.min(1,e||0))}function k5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ES=e=>()=>e;function kV(e,t){return function(r){return e+r*t}}function SV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function _V(e){return(e=+e)==1?eF:function(t,r){return r-t?SV(t,r,e):ES(isNaN(t)?r:t)}}function eF(e,t){var r=t-e;return r?kV(e,r):ES(isNaN(e)?t:e)}const CT=(function e(t){var r=_V(t);function a(s,i){var o=r((s=C4(s)).r,(i=C4(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=eF(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a})(1);function CV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function AV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EV(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=up(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function TV(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function O1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function OV(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=up(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var A4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,S5=new RegExp(A4.source,"g");function PV(e){return function(){return e}}function IV(e){return function(t){return e(t)+""}}function DV(e,t){var r=A4.lastIndex=S5.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=A4.exec(e))&&(s=S5.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:O1(a,s)})),r=S5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?IV(c[0].x):PV(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function up(e,t){var r=typeof t,a;return t==null||r==="boolean"?ES(t):(r==="number"?O1:r==="string"?(a=Ox(t))?(t=a,CT):DV:t instanceof Ox?CT:t instanceof Date?TV:AV(t)?CV:Array.isArray(t)?EV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OV:O1)(e,t)}function TS(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function LV(e,t){t===void 0&&(t=e,e=up);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function FV(e){return function(){return e}}function P1(e){return+e}var AT=[0,1];function Cl(e){return e}function E4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:FV(isNaN(t)?NaN:.5)}function MV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function RV(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=E4(s,a),i=r(o,i)):(a=E4(a,s),i=r(i,o)),function(l){return i(a(l))}}function BV(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=E4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=jg(e,l,1,a)-1;return i[c](s[c](l))}}function Sg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jb(){var e=AT,t=AT,r=up,a,s,i,o=Cl,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==Cl&&(o=MV(e[0],e[p-1])),l=p>2?BV:RV,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(a),t,r)))(a(o(p)))}return f.invert=function(p){return o(s((d||(d=l(t,e.map(a),O1)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,P1),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=TS,u()},f.clamp=function(p){return arguments.length?(o=p?!0:Cl,u()):o!==Cl},f.interpolate=function(p){return arguments.length?(r=p,u()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,m){return a=p,s=m,u()}}function OS(){return Jb()(Cl,Cl)}function UV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function I1(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Rm(e){return e=I1(Math.abs(e)),e?e[1]:NaN}function qV(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function $V(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var zV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Px(e){if(!(t=zV.exec(e)))throw new Error("invalid format: "+e);var t;return new PS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Px.prototype=PS.prototype;function PS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}PS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HV(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var D1;function WV(e,t){var r=I1(e,t);if(!r)return D1=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(D1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+I1(e,Math.max(0,t+i-1))[0]}function ET(e,t){var r=I1(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const TT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ET(e*100,t),r:ET,s:WV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OT(e){return e}var PT=Array.prototype.map,IT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function VV(e){var t=e.grouping===void 0||e.thousands===void 0?OT:qV(PT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?OT:$V(PT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f,p){f=Px(f);var m=f.fill,b=f.align,v=f.sign,g=f.symbol,w=f.zero,y=f.width,j=f.comma,N=f.precision,S=f.trim,E=f.type;E==="n"?(j=!0,E="g"):TT[E]||(N===void 0&&(N=12),S=!0,E="g"),(w||m==="0"&&b==="=")&&(w=!0,m="0",b="=");var A=(p&&p.prefix!==void 0?p.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),P=(g==="$"?a:/[%p]/.test(E)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),D=TT[E],R=/[defgprs%]/.test(E);N=N===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(_){var B=A,U=P,H,Y,J;if(E==="c")U=D(_)+U,_="";else{_=+_;var re=_<0||1/_<0;if(_=isNaN(_)?c:D(Math.abs(_),N),S&&(_=HV(_)),re&&+_==0&&v!=="+"&&(re=!1),B=(re?v==="("?v:l:v==="-"||v==="("?"":v)+B,U=(E==="s"&&!isNaN(_)&&D1!==void 0?IT[8+D1/3]:"")+U+(re&&v==="("?")":""),R){for(H=-1,Y=_.length;++H<Y;)if(J=_.charCodeAt(H),48>J||J>57){U=(J===46?s+_.slice(H+1):_.slice(H))+U,_=_.slice(0,H);break}}}j&&!w&&(_=t(_,1/0));var X=B.length+_.length+U.length,ee=X<y?new Array(y-X+1).join(m):"";switch(j&&w&&(_=t(ee+_,ee.length?y-U.length:1/0),ee=""),b){case"<":_=B+_+U+ee;break;case"=":_=B+ee+_+U;break;case"^":_=ee.slice(0,X=ee.length>>1)+B+_+U+ee.slice(X);break;default:_=ee+B+_+U;break}return i(_)}return T.toString=function(){return f+""},T}function u(f,p){var m=Math.max(-8,Math.min(8,Math.floor(Rm(p)/3)))*3,b=Math.pow(10,-m),v=d((f=Px(f),f.type="f",f),{suffix:IT[8+m/3]});return function(g){return v(b*g)}}return{format:d,formatPrefix:u}}var gv,IS,tF;GV({thousands:",",grouping:[3],currency:["$",""]});function GV(e){return gv=VV(e),IS=gv.format,tF=gv.formatPrefix,gv}function KV(e){return Math.max(0,-Rm(Math.abs(e)))}function XV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rm(t)/3)))*3-Rm(Math.abs(e)))}function YV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rm(t)-Rm(e))+1}function rF(e,t,r,a){var s=S4(e,t,r),i;switch(a=Px(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=XV(s,o))&&(a.precision=i),tF(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=YV(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=KV(s))&&(a.precision=i-(a.type==="%")*2);break}}return IS(a)}function T0(e){var t=e.domain;return e.ticks=function(r){var a=t();return j4(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return rF(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=k4(o,l,r),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function L1(){var e=OS();return e.copy=function(){return Sg(e,L1())},yd.apply(e,arguments),T0(e)}function nF(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,P1),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return nF(e).unknown(t)},e=arguments.length?Array.from(e,P1):[0,1],T0(r)}function aF(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function DT(e){return Math.log(e)}function LT(e){return Math.exp(e)}function JV(e){return-Math.log(-e)}function QV(e){return-Math.exp(-e)}function ZV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eG(e){return e===10?ZV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FT(e){return(t,r)=>-e(-t,r)}function DS(e){const t=e(DT,LT),r=t.domain;let a=10,s,i;function o(){return s=tG(a),i=eG(a),r()[0]<0?(s=FT(s),i=FT(i),e(JV,QV)):e(DT,LT),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=s(d),m=s(u),b,v;const g=l==null?10:+l;let w=[];if(!(a%1)&&m-p<g){if(p=Math.floor(p),m=Math.ceil(m),d>0){for(;p<=m;++p)for(b=1;b<a;++b)if(v=p<0?b/i(-p):b*i(p),!(v<d)){if(v>u)break;w.push(v)}}else for(;p<=m;++p)for(b=a-1;b>=1;--b)if(v=p>0?b/i(-p):b*i(p),!(v<d)){if(v>u)break;w.push(v)}w.length*2<g&&(w=j4(d,u,g))}else w=j4(p,m,Math.min(m-p,g)).map(i);return f?w.reverse():w},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Px(c)).precision==null&&(c.trim=!0),c=IS(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let f=u/i(Math.round(s(u)));return f*a<a-.5&&(f*=a),f<=d?c(u):""}},t.nice=()=>r(aF(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function sF(){const e=DS(Jb()).domain([1,10]);return e.copy=()=>Sg(e,sF()).base(e.base()),yd.apply(e,arguments),e}function MT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function RT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LS(e){var t=1,r=e(MT(t),RT(t));return r.constant=function(a){return arguments.length?e(MT(t=+a),RT(t)):t},T0(r)}function iF(){var e=LS(Jb());return e.copy=function(){return Sg(e,iF()).constant(e.constant())},yd.apply(e,arguments)}function BT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nG(e){return e<0?-e*e:e*e}function FS(e){var t=e(Cl,Cl),r=1;function a(){return r===1?e(Cl,Cl):r===.5?e(rG,nG):e(BT(r),BT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},T0(t)}function MS(){var e=FS(Jb());return e.copy=function(){return Sg(e,MS()).exponent(e.exponent())},yd.apply(e,arguments),e}function aG(){return MS.apply(null,arguments).exponent(.5)}function UT(e){return Math.sign(e)*e*e}function sG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function oF(){var e=OS(),t=[0,1],r=!1,a;function s(i){var o=sG(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(UT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,P1)).map(UT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return oF(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},yd.apply(s,arguments),T0(s)}function lF(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=dV(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[jg(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(v0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return lF().domain(e).range(t).unknown(a)},yd.apply(i,arguments)}function cF(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[jg(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return cF().domain([e,t]).range(s).unknown(i)},yd.apply(T0(o),arguments)}function dF(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[jg(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return dF().domain(e).range(t).unknown(r)},yd.apply(s,arguments)}const _5=new Date,C5=new Date;function Hi(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>Hi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(_5.setTime(+i),C5.setTime(+o),e(_5),e(C5),Math.floor(r(_5,C5))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const F1=Hi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);F1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):F1);F1.range;const xf=1e3,dd=xf*60,gf=dd*60,Tf=gf*24,RS=Tf*7,qT=Tf*30,A5=Tf*365,lh=Hi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xf)},(e,t)=>(t-e)/xf,e=>e.getUTCSeconds());lh.range;const BS=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xf)},(e,t)=>{e.setTime(+e+t*dd)},(e,t)=>(t-e)/dd,e=>e.getMinutes());BS.range;const US=Hi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*dd)},(e,t)=>(t-e)/dd,e=>e.getUTCMinutes());US.range;const qS=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xf-e.getMinutes()*dd)},(e,t)=>{e.setTime(+e+t*gf)},(e,t)=>(t-e)/gf,e=>e.getHours());qS.range;const $S=Hi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*gf)},(e,t)=>(t-e)/gf,e=>e.getUTCHours());$S.range;const _g=Hi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*dd)/Tf,e=>e.getDate()-1);_g.range;const Qb=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Tf,e=>e.getUTCDate()-1);Qb.range;const uF=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Tf,e=>Math.floor(e/Tf));uF.range;function Rh(e){return Hi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*dd)/RS)}const Zb=Rh(0),M1=Rh(1),iG=Rh(2),oG=Rh(3),Bm=Rh(4),lG=Rh(5),cG=Rh(6);Zb.range;M1.range;iG.range;oG.range;Bm.range;lG.range;cG.range;function Bh(e){return Hi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/RS)}const ey=Bh(0),R1=Bh(1),dG=Bh(2),uG=Bh(3),Um=Bh(4),fG=Bh(5),hG=Bh(6);ey.range;R1.range;dG.range;uG.range;Um.range;fG.range;hG.range;const zS=Hi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zS.range;const HS=Hi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());HS.range;const Of=Hi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Of.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Of.range;const Pf=Hi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Pf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Pf.range;function fF(e,t,r,a,s,i){const o=[[lh,1,xf],[lh,5,5*xf],[lh,15,15*xf],[lh,30,30*xf],[i,1,dd],[i,5,5*dd],[i,15,15*dd],[i,30,30*dd],[s,1,gf],[s,3,3*gf],[s,6,6*gf],[s,12,12*gf],[a,1,Tf],[a,2,2*Tf],[r,1,RS],[t,1,qT],[t,3,3*qT],[e,1,A5]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const m=f&&typeof f.range=="function"?f:c(d,u,f),b=m?m.range(d,+u+1):[];return p?b.reverse():b}function c(d,u,f){const p=Math.abs(u-d)/f,m=_S(([,,g])=>g).right(o,p);if(m===o.length)return e.every(S4(d/A5,u/A5,f));if(m===0)return F1.every(Math.max(S4(d,u,f),1));const[b,v]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return b.every(v)}return[l,c]}const[mG,pG]=fF(Pf,HS,ey,uF,$S,US),[xG,gG]=fF(Of,zS,Zb,_g,qS,BS);function E5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function T5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ip(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vG(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Dp(s),u=Lp(s),f=Dp(i),p=Lp(i),m=Dp(o),b=Lp(o),v=Dp(l),g=Lp(l),w=Dp(c),y=Lp(c),j={a:J,A:re,b:X,B:ee,c:null,d:GT,e:GT,f:qG,g:JG,G:ZG,H:RG,I:BG,j:UG,L:hF,m:$G,M:zG,p:W,q:O,Q:YT,s:JT,S:HG,u:WG,U:VG,V:GG,w:KG,W:XG,x:null,X:null,y:YG,Y:QG,Z:eK,"%":XT},N={a:z,A:V,b:q,B:K,c:null,d:KT,e:KT,f:aK,g:mK,G:xK,H:tK,I:rK,j:nK,L:pF,m:sK,M:iK,p:se,q:pe,Q:YT,s:JT,S:oK,u:lK,U:cK,V:dK,w:uK,W:fK,x:null,X:null,y:hK,Y:pK,Z:gK,"%":XT},S={a:R,A:T,b:_,B,c:U,d:WT,e:WT,f:DG,g:HT,G:zT,H:VT,I:VT,j:TG,L:IG,m:EG,M:OG,p:D,q:AG,Q:FG,s:MG,S:PG,u:jG,U:kG,V:SG,w:NG,W:_G,x:H,X:Y,y:HT,Y:zT,Z:CG,"%":LG};j.x=E(r,j),j.X=E(a,j),j.c=E(t,j),N.x=E(r,N),N.X=E(a,N),N.c=E(t,N);function E(ie,le){return function($e){var he=[],Ue=-1,Te=0,oe=ie.length,te,Pe,je;for($e instanceof Date||($e=new Date(+$e));++Ue<oe;)ie.charCodeAt(Ue)===37&&(he.push(ie.slice(Te,Ue)),(Pe=$T[te=ie.charAt(++Ue)])!=null?te=ie.charAt(++Ue):Pe=te==="e"?" ":"0",(je=le[te])&&(te=je($e,Pe)),he.push(te),Te=Ue+1);return he.push(ie.slice(Te,Ue)),he.join("")}}function A(ie,le){return function($e){var he=Ip(1900,void 0,1),Ue=P(he,ie,$e+="",0),Te,oe;if(Ue!=$e.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(le&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Te=T5(Ip(he.y,0,1)),oe=Te.getUTCDay(),Te=oe>4||oe===0?R1.ceil(Te):R1(Te),Te=Qb.offset(Te,(he.V-1)*7),he.y=Te.getUTCFullYear(),he.m=Te.getUTCMonth(),he.d=Te.getUTCDate()+(he.w+6)%7):(Te=E5(Ip(he.y,0,1)),oe=Te.getDay(),Te=oe>4||oe===0?M1.ceil(Te):M1(Te),Te=_g.offset(Te,(he.V-1)*7),he.y=Te.getFullYear(),he.m=Te.getMonth(),he.d=Te.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),oe="Z"in he?T5(Ip(he.y,0,1)).getUTCDay():E5(Ip(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(oe+5)%7:he.w+he.U*7-(oe+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,T5(he)):E5(he)}}function P(ie,le,$e,he){for(var Ue=0,Te=le.length,oe=$e.length,te,Pe;Ue<Te;){if(he>=oe)return-1;if(te=le.charCodeAt(Ue++),te===37){if(te=le.charAt(Ue++),Pe=S[te in $T?le.charAt(Ue++):te],!Pe||(he=Pe(ie,$e,he))<0)return-1}else if(te!=$e.charCodeAt(he++))return-1}return he}function D(ie,le,$e){var he=d.exec(le.slice($e));return he?(ie.p=u.get(he[0].toLowerCase()),$e+he[0].length):-1}function R(ie,le,$e){var he=m.exec(le.slice($e));return he?(ie.w=b.get(he[0].toLowerCase()),$e+he[0].length):-1}function T(ie,le,$e){var he=f.exec(le.slice($e));return he?(ie.w=p.get(he[0].toLowerCase()),$e+he[0].length):-1}function _(ie,le,$e){var he=w.exec(le.slice($e));return he?(ie.m=y.get(he[0].toLowerCase()),$e+he[0].length):-1}function B(ie,le,$e){var he=v.exec(le.slice($e));return he?(ie.m=g.get(he[0].toLowerCase()),$e+he[0].length):-1}function U(ie,le,$e){return P(ie,t,le,$e)}function H(ie,le,$e){return P(ie,r,le,$e)}function Y(ie,le,$e){return P(ie,a,le,$e)}function J(ie){return o[ie.getDay()]}function re(ie){return i[ie.getDay()]}function X(ie){return c[ie.getMonth()]}function ee(ie){return l[ie.getMonth()]}function W(ie){return s[+(ie.getHours()>=12)]}function O(ie){return 1+~~(ie.getMonth()/3)}function z(ie){return o[ie.getUTCDay()]}function V(ie){return i[ie.getUTCDay()]}function q(ie){return c[ie.getUTCMonth()]}function K(ie){return l[ie.getUTCMonth()]}function se(ie){return s[+(ie.getUTCHours()>=12)]}function pe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var le=E(ie+="",j);return le.toString=function(){return ie},le},parse:function(ie){var le=A(ie+="",!1);return le.toString=function(){return ie},le},utcFormat:function(ie){var le=E(ie+="",N);return le.toString=function(){return ie},le},utcParse:function(ie){var le=A(ie+="",!0);return le.toString=function(){return ie},le}}}var $T={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,bG=/^%/,yG=/[\\^$*+?|[\]().{}]/g;function pa(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function wG(e){return e.replace(yG,"\\$&")}function Dp(e){return new RegExp("^(?:"+e.map(wG).join("|")+")","i")}function Lp(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function NG(e,t,r){var a=mo.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function jG(e,t,r){var a=mo.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function kG(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function SG(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function _G(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function zT(e,t,r){var a=mo.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function HT(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function CG(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function AG(e,t,r){var a=mo.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function EG(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function WT(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function TG(e,t,r){var a=mo.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function VT(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function OG(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function PG(e,t,r){var a=mo.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function IG(e,t,r){var a=mo.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function DG(e,t,r){var a=mo.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function LG(e,t,r){var a=bG.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function FG(e,t,r){var a=mo.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function MG(e,t,r){var a=mo.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function GT(e,t){return pa(e.getDate(),t,2)}function RG(e,t){return pa(e.getHours(),t,2)}function BG(e,t){return pa(e.getHours()%12||12,t,2)}function UG(e,t){return pa(1+_g.count(Of(e),e),t,3)}function hF(e,t){return pa(e.getMilliseconds(),t,3)}function qG(e,t){return hF(e,t)+"000"}function $G(e,t){return pa(e.getMonth()+1,t,2)}function zG(e,t){return pa(e.getMinutes(),t,2)}function HG(e,t){return pa(e.getSeconds(),t,2)}function WG(e){var t=e.getDay();return t===0?7:t}function VG(e,t){return pa(Zb.count(Of(e)-1,e),t,2)}function mF(e){var t=e.getDay();return t>=4||t===0?Bm(e):Bm.ceil(e)}function GG(e,t){return e=mF(e),pa(Bm.count(Of(e),e)+(Of(e).getDay()===4),t,2)}function KG(e){return e.getDay()}function XG(e,t){return pa(M1.count(Of(e)-1,e),t,2)}function YG(e,t){return pa(e.getFullYear()%100,t,2)}function JG(e,t){return e=mF(e),pa(e.getFullYear()%100,t,2)}function QG(e,t){return pa(e.getFullYear()%1e4,t,4)}function ZG(e,t){var r=e.getDay();return e=r>=4||r===0?Bm(e):Bm.ceil(e),pa(e.getFullYear()%1e4,t,4)}function eK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pa(t/60|0,"0",2)+pa(t%60,"0",2)}function KT(e,t){return pa(e.getUTCDate(),t,2)}function tK(e,t){return pa(e.getUTCHours(),t,2)}function rK(e,t){return pa(e.getUTCHours()%12||12,t,2)}function nK(e,t){return pa(1+Qb.count(Pf(e),e),t,3)}function pF(e,t){return pa(e.getUTCMilliseconds(),t,3)}function aK(e,t){return pF(e,t)+"000"}function sK(e,t){return pa(e.getUTCMonth()+1,t,2)}function iK(e,t){return pa(e.getUTCMinutes(),t,2)}function oK(e,t){return pa(e.getUTCSeconds(),t,2)}function lK(e){var t=e.getUTCDay();return t===0?7:t}function cK(e,t){return pa(ey.count(Pf(e)-1,e),t,2)}function xF(e){var t=e.getUTCDay();return t>=4||t===0?Um(e):Um.ceil(e)}function dK(e,t){return e=xF(e),pa(Um.count(Pf(e),e)+(Pf(e).getUTCDay()===4),t,2)}function uK(e){return e.getUTCDay()}function fK(e,t){return pa(R1.count(Pf(e)-1,e),t,2)}function hK(e,t){return pa(e.getUTCFullYear()%100,t,2)}function mK(e,t){return e=xF(e),pa(e.getUTCFullYear()%100,t,2)}function pK(e,t){return pa(e.getUTCFullYear()%1e4,t,4)}function xK(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Um(e):Um.ceil(e),pa(e.getUTCFullYear()%1e4,t,4)}function gK(){return"+0000"}function XT(){return"%"}function YT(e){return+e}function JT(e){return Math.floor(+e/1e3)}var im,gF,vF;vK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vK(e){return im=vG(e),gF=im.format,im.parse,vF=im.utcFormat,im.utcParse,im}function bK(e){return new Date(e)}function yK(e){return e instanceof Date?+e:+new Date(+e)}function WS(e,t,r,a,s,i,o,l,c,d){var u=OS(),f=u.invert,p=u.domain,m=d(".%L"),b=d(":%S"),v=d("%I:%M"),g=d("%I %p"),w=d("%a %d"),y=d("%b %d"),j=d("%B"),N=d("%Y");function S(E){return(c(E)<E?m:l(E)<E?b:o(E)<E?v:i(E)<E?g:a(E)<E?s(E)<E?w:y:r(E)<E?j:N)(E)}return u.invert=function(E){return new Date(f(E))},u.domain=function(E){return arguments.length?p(Array.from(E,yK)):p().map(bK)},u.ticks=function(E){var A=p();return e(A[0],A[A.length-1],E??10)},u.tickFormat=function(E,A){return A==null?S:d(A)},u.nice=function(E){var A=p();return(!E||typeof E.range!="function")&&(E=t(A[0],A[A.length-1],E??10)),E?p(aF(A,E)):u},u.copy=function(){return Sg(u,WS(e,t,r,a,s,i,o,l,c,d))},u}function wK(){return yd.apply(WS(xG,gG,Of,zS,Zb,_g,qS,BS,lh,gF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NK(){return yd.apply(WS(mG,pG,Pf,HS,ey,Qb,$S,US,lh,vF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ty(){var e=0,t=1,r,a,s,i,o=Cl,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var m,b;return arguments.length?([m,b]=p,o=f(m,b),d):[o(0),o(1)]}}return d.range=u(up),d.rangeRound=u(TS),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),d}}function O0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bF(){var e=T0(ty()(Cl));return e.copy=function(){return O0(e,bF())},Mf.apply(e,arguments)}function yF(){var e=DS(ty()).domain([1,10]);return e.copy=function(){return O0(e,yF()).base(e.base())},Mf.apply(e,arguments)}function wF(){var e=LS(ty());return e.copy=function(){return O0(e,wF()).constant(e.constant())},Mf.apply(e,arguments)}function VS(){var e=FS(ty());return e.copy=function(){return O0(e,VS()).exponent(e.exponent())},Mf.apply(e,arguments)}function jK(){return VS.apply(null,arguments).exponent(.5)}function NF(){var e=[],t=Cl;function r(a){if(a!=null&&!isNaN(a=+a))return t((jg(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(v0),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>cV(e,i/a))},r.copy=function(){return NF(t).domain(e)},Mf.apply(r,arguments)}function ry(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,d=Cl,u,f=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+u(v))-i)*(a*v<a*i?l:c),d(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,r]=v,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m):[e,t,r]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(d=v,m):d};function b(v){return function(g){var w,y,j;return arguments.length?([w,y,j]=g,d=LV(v,[w,y,j]),m):[d(0),d(.5),d(1)]}}return m.range=b(up),m.rangeRound=b(TS),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return u=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m}}function jF(){var e=T0(ry()(Cl));return e.copy=function(){return O0(e,jF())},Mf.apply(e,arguments)}function kF(){var e=DS(ry()).domain([.1,1,10]);return e.copy=function(){return O0(e,kF()).base(e.base())},Mf.apply(e,arguments)}function SF(){var e=LS(ry());return e.copy=function(){return O0(e,SF()).constant(e.constant())},Mf.apply(e,arguments)}function GS(){var e=FS(ry());return e.copy=function(){return O0(e,GS()).exponent(e.exponent())},Mf.apply(e,arguments)}function kK(){return GS.apply(null,arguments).exponent(.5)}const QT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ax,scaleDiverging:jF,scaleDivergingLog:kF,scaleDivergingPow:GS,scaleDivergingSqrt:kK,scaleDivergingSymlog:SF,scaleIdentity:nF,scaleImplicit:_4,scaleLinear:L1,scaleLog:sF,scaleOrdinal:CS,scalePoint:sx,scalePow:MS,scaleQuantile:lF,scaleQuantize:cF,scaleRadial:oF,scaleSequential:bF,scaleSequentialLog:yF,scaleSequentialPow:VS,scaleSequentialQuantile:NF,scaleSequentialSqrt:jK,scaleSequentialSymlog:wF,scaleSqrt:aG,scaleSymlog:iF,scaleThreshold:dF,scaleTime:wK,scaleUtc:NK,tickFormat:rF},Symbol.toStringTag,{value:"Module"}));var O5,ZT;function _F(){if(ZT)return O5;ZT=1;var e=ip();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a(l);if(c!=null&&(d===void 0?c===c&&!e(c):s(c,d)))var d=c,u=l}return u}return O5=t,O5}var P5,eO;function SK(){if(eO)return P5;eO=1;function e(t,r){return t>r}return P5=e,P5}var I5,tO;function _K(){if(tO)return I5;tO=1;var e=_F(),t=SK(),r=cp();function a(s){return s&&s.length?e(s,r,t):void 0}return I5=a,I5}var CK=_K();const f0=Ta(CK);var D5,rO;function AK(){if(rO)return D5;rO=1;function e(t,r){return t<r}return D5=e,D5}var L5,nO;function EK(){if(nO)return L5;nO=1;var e=_F(),t=AK(),r=cp();function a(s){return s&&s.length?e(s,r,t):void 0}return L5=a,L5}var TK=EK();const ny=Ta(TK);var F5,aO;function OK(){if(aO)return F5;aO=1;var e=cS(),t=E0(),r=LL(),a=ic();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return F5=s,F5}var M5,sO;function PK(){if(sO)return M5;sO=1;var e=IL(),t=OK();function r(a,s){return e(t(a,s),1)}return M5=r,M5}var IK=PK();const DK=Ta(IK);var R5,iO;function CF(){if(iO)return R5;iO=1;var e=NS();function t(r,a){return e(r,a)}return R5=t,R5}var LK=CF();const Ix=Ta(LK);var fp=1e9,FK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},XS,js=!0,gd="[DecimalError] ",xh=gd+"Invalid argument: ",KS=gd+"Exponent out of range: ",hp=Math.floor,th=Math.pow,MK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cc,oo=1e7,os=7,AF=9007199254740991,B1=hp(AF/os),Dr={};Dr.absoluteValue=Dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Dr.comparedTo=Dr.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Dr.decimalPlaces=Dr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*os;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Dr.dividedBy=Dr.div=function(e){return _f(this,new this.constructor(e))};Dr.dividedToIntegerBy=Dr.idiv=function(e){var t=this,r=t.constructor;return Ka(_f(t,new r(e),0,1),r.precision)};Dr.equals=Dr.eq=function(e){return!this.cmp(e)};Dr.exponent=function(){return Ci(this)};Dr.greaterThan=Dr.gt=function(e){return this.cmp(e)>0};Dr.greaterThanOrEqualTo=Dr.gte=function(e){return this.cmp(e)>=0};Dr.isInteger=Dr.isint=function(){return this.e>this.d.length-2};Dr.isNegative=Dr.isneg=function(){return this.s<0};Dr.isPositive=Dr.ispos=function(){return this.s>0};Dr.isZero=function(){return this.s===0};Dr.lessThan=Dr.lt=function(e){return this.cmp(e)<0};Dr.lessThanOrEqualTo=Dr.lte=function(e){return this.cmp(e)<1};Dr.logarithm=Dr.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Cc))throw Error(gd+"NaN");if(r.s<1)throw Error(gd+(r.s?"NaN":"-Infinity"));return r.eq(Cc)?new a(0):(js=!1,t=_f(Dx(r,i),Dx(e,i),i),js=!0,Ka(t,s))};Dr.minus=Dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OF(t,e):EF(t,(e.s=-e.s,e))};Dr.modulo=Dr.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(gd+"NaN");return r.s?(js=!1,t=_f(r,e,0,1).times(e),js=!0,r.minus(t)):Ka(new a(r),s)};Dr.naturalExponential=Dr.exp=function(){return TF(this)};Dr.naturalLogarithm=Dr.ln=function(){return Dx(this)};Dr.negated=Dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Dr.plus=Dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EF(t,e):OF(t,(e.s=-e.s,e))};Dr.precision=Dr.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xh+e);if(t=Ci(s)+1,a=s.d.length-1,r=a*os+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Dr.squareRoot=Dr.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(gd+"NaN")}for(e=Ci(l),js=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Du(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=hp((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus(_f(l,i,o+2)).times(.5),Du(i.d).slice(0,o)===(t=Du(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Ka(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return js=!0,Ka(a,r)};Dr.times=Dr.mul=function(e){var t,r,a,s,i,o,l,c,d,u=this,f=u.constructor,p=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=p.length,d=m.length,c<d&&(i=p,p=m,m=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+m[a]*p[s-a-1]+t,i[s--]=l%oo|0,t=l/oo|0;i[s]=(i[s]+t)%oo|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,js?Ka(e,f.precision):e};Dr.toDecimalPlaces=Dr.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Hu(e,0,fp),t===void 0?t=a.rounding:Hu(t,0,8),Ka(r,e+Ci(r)+1,t))};Dr.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Sh(a,!0):(Hu(e,0,fp),t===void 0?t=s.rounding:Hu(t,0,8),a=Ka(new s(a),e+1,t),r=Sh(a,!0,e+1)),r};Dr.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Sh(s):(Hu(e,0,fp),t===void 0?t=i.rounding:Hu(t,0,8),a=Ka(new i(s),e+Ci(s)+1,t),r=Sh(a.abs(),!1,e+Ci(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Dr.toInteger=Dr.toint=function(){var e=this,t=e.constructor;return Ka(new t(e),Ci(e)+1,t.rounding)};Dr.toNumber=function(){return+this};Dr.toPower=Dr.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Cc);if(l=new c(l),!l.s){if(e.s<1)throw Error(gd+"Infinity");return l}if(l.eq(Cc))return l;if(a=c.precision,e.eq(Cc))return Ka(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=AF){for(s=new c(Cc),t=Math.ceil(a/os+4),js=!1;r%2&&(s=s.times(l),lO(s.d,t)),r=hp(r/2),r!==0;)l=l.times(l),lO(l.d,t);return js=!0,e.s<0?new c(Cc).div(s):Ka(s,a)}}else if(i<0)throw Error(gd+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,js=!1,s=e.times(Dx(l,a+d)),js=!0,s=TF(s),s.s=i,s};Dr.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Ci(s),a=Sh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Hu(e,1,fp),t===void 0?t=i.rounding:Hu(t,0,8),s=Ka(new i(s),e,t),r=Ci(s),a=Sh(s,e<=r||r<=i.toExpNeg,e)),a};Dr.toSignificantDigits=Dr.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Hu(e,1,fp),t===void 0?t=a.rounding:Hu(t,0,8)),Ka(new a(r),e,t)};Dr.toString=Dr.valueOf=Dr.val=Dr.toJSON=Dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ci(e),r=e.constructor;return Sh(e,t<=r.toExpNeg||t>=r.toExpPos)};function EF(e,t){var r,a,s,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),js?Ka(t,f):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(f/os),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/oo|0,c[i]%=oo;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,js?Ka(t,f):t}function Hu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(xh+e)}function Du(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=os-a.length,r&&(i+=l0(r)),i+=a;o=e[t],a=o+"",r=os-a.length,r&&(i+=l0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var _f=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%oo|0,o=i/oo|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*oo+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,f,p,m,b,v,g,w,y,j,N,S,E,A,P,D=a.constructor,R=a.s==s.s?1:-1,T=a.d,_=s.d;if(!a.s)return new D(a);if(!s.s)throw Error(gd+"Division by zero");for(c=a.e-s.e,A=_.length,S=T.length,m=new D(R),b=m.d=[],d=0;_[d]==(T[d]||0);)++d;if(_[d]>(T[d]||0)&&--c,i==null?y=i=D.precision:o?y=i+(Ci(a)-Ci(s))+1:y=i,y<0)return new D(0);if(y=y/os+2|0,d=0,A==1)for(u=0,_=_[0],y++;(d<S||u)&&y--;d++)j=u*oo+(T[d]||0),b[d]=j/_|0,u=j%_|0;else{for(u=oo/(_[0]+1)|0,u>1&&(_=e(_,u),T=e(T,u),A=_.length,S=T.length),N=A,v=T.slice(0,A),g=v.length;g<A;)v[g++]=0;P=_.slice(),P.unshift(0),E=_[0],_[1]>=oo/2&&++E;do u=0,l=t(_,v,A,g),l<0?(w=v[0],A!=g&&(w=w*oo+(v[1]||0)),u=w/E|0,u>1?(u>=oo&&(u=oo-1),f=e(_,u),p=f.length,g=v.length,l=t(f,v,p,g),l==1&&(u--,r(f,A<p?P:_,p))):(u==0&&(l=u=1),f=_.slice()),p=f.length,p<g&&f.unshift(0),r(v,f,g),l==-1&&(g=v.length,l=t(_,v,A,g),l<1&&(u++,r(v,A<g?P:_,g))),g=v.length):l===0&&(u++,v=[0]),b[d++]=u,l&&v[0]?v[g++]=T[N]||0:(v=[T[N]],g=1);while((N++<S||v[0]!==void 0)&&y--)}return b[0]||b.shift(),m.e=c,Ka(m,o?i+Ci(m)+1:i)}})();function TF(e,t){var r,a,s,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Ci(e)>16)throw Error(KS+Ci(e));if(!e.s)return new u(Cc);for(js=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(th(2,d))/Math.LN10*2+5|0,l+=a,r=s=i=new u(Cc),u.precision=l;;){if(s=Ka(s.times(e),l),r=r.times(++c),o=i.plus(_f(s,r,l)),Du(o.d).slice(0,l)===Du(i.d).slice(0,l)){for(;d--;)i=Ka(i.times(i),l);return u.precision=f,t==null?(js=!0,Ka(i,f)):i}i=o}}function Ci(e){for(var t=e.e*os,r=e.d[0];r>=10;r/=10)t++;return t}function B5(e,t,r){if(t>e.LN10.sd())throw js=!0,r&&(e.precision=r),Error(gd+"LN10 precision limit exceeded");return Ka(new e(e.LN10),t)}function l0(e){for(var t="";e--;)t+="0";return t}function Dx(e,t){var r,a,s,i,o,l,c,d,u,f=1,p=10,m=e,b=m.d,v=m.constructor,g=v.precision;if(m.s<1)throw Error(gd+(m.s?"NaN":"-Infinity"));if(m.eq(Cc))return new v(0);if(t==null?(js=!1,d=g):d=t,m.eq(10))return t==null&&(js=!0),B5(v,d);if(d+=p,v.precision=d,r=Du(b),a=r.charAt(0),i=Ci(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)m=m.times(e),r=Du(m.d),a=r.charAt(0),f++;i=Ci(m),a>1?(m=new v("0."+r),i++):m=new v(a+"."+r.slice(1))}else return c=B5(v,d+2,g).times(i+""),m=Dx(new v(a+"."+r.slice(1)),d-p).plus(c),v.precision=g,t==null?(js=!0,Ka(m,g)):m;for(l=o=m=_f(m.minus(Cc),m.plus(Cc),d),u=Ka(m.times(m),d),s=3;;){if(o=Ka(o.times(u),d),c=l.plus(_f(o,new v(s),d)),Du(c.d).slice(0,d)===Du(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(B5(v,d+2,g).times(i+""))),l=_f(l,new v(f),d),v.precision=g,t==null?(js=!0,Ka(l,g)):l;l=c,s+=2}}function oO(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=hp(r/os),e.d=[],a=(r+1)%os,r<0&&(a+=os),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=os;a<s;)e.d.push(+t.slice(a,a+=os));t=t.slice(a),a=os-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),js&&(e.e>B1||e.e<-B1))throw Error(KS+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ka(e,t,r){var a,s,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=os,s=t,d=f[u=0];else{if(u=Math.ceil((a+1)/os),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;a%=os,s=a-os+o}if(r!==void 0&&(i=th(10,o-s-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?d/th(10,o-s):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ci(e),f.length=1,t=t-i-1,f[0]=th(10,(os-t%os)%os),e.e=hp(-t/os)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=u,i=1,u--):(f.length=u+1,i=th(10,os-a),f[u]=s>0?(d/th(10,o-s)%th(10,s)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==oo&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=oo)break;f[u--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(js&&(e.e>B1||e.e<-B1))throw Error(KS+Ci(e));return e}function OF(e,t){var r,a,s,i,o,l,c,d,u,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),js?Ka(t,m):t;if(c=e.d,f=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,a=d,l=c.length),s=Math.max(Math.ceil(m/os),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){u=c[s]<f[s];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=oo-1;--c[i],c[s]+=oo}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,js?Ka(t,m):t):new p(0)}function Sh(e,t,r){var a,s=Ci(e),i=Du(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+l0(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+l0(-s-1)+i,r&&(a=r-o)>0&&(i+=l0(a))):s>=o?(i+=l0(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+l0(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=l0(a))),e.s<0?"-"+i:i}function lO(e,t){if(e.length>t)return e.length=t,!0}function PF(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(xh+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return oO(o,i.toString())}else if(typeof i!="string")throw Error(xh+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,MK.test(i))oO(o,i);else throw Error(xh+i)}if(s.prototype=Dr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=PF,s.config=s.set=RK,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function RK(e){if(!e||typeof e!="object")throw Error(gd+"Object expected");var t,r,a,s=["precision",1,fp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(hp(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(xh+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(xh+r+": "+a);return this}var XS=PF(FK);Cc=new XS(1);const Fa=XS;function BK(e){return zK(e)||$K(e)||qK(e)||UK()}function UK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qK(e,t){if(e){if(typeof e=="string")return T4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T4(e,t)}}function $K(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zK(e){if(Array.isArray(e))return T4(e)}function T4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var HK=function(t){return t},IF={},DF=function(t){return t===IF},cO=function(t){return function r(){return arguments.length===0||arguments.length===1&&DF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},WK=function e(t,r){return t===1?r:cO(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==IF}).length;return o>=t?r.apply(void 0,s):e(t-o,cO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(f){return DF(f)?c.shift():f});return r.apply(void 0,BK(u).concat(c))}))})},ay=function(t){return WK(t.length,t)},O4=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},VK=ay(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),GK=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return HK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},P4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},LF=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function KK(e){var t;return e===0?t=1:t=Math.floor(new Fa(e).abs().log(10).toNumber())+1,t}function XK(e,t,r){for(var a=new Fa(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var YK=ay(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),JK=ay(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),QK=ay(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const sy={rangeStep:XK,getDigitCount:KK,interpolateNumber:YK,uninterpolateNumber:JK,uninterpolateTruncation:QK};function I4(e){return tX(e)||eX(e)||FF(e)||ZK()}function ZK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eX(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function tX(e){if(Array.isArray(e))return D4(e)}function Lx(e,t){return aX(e)||nX(e,t)||FF(e,t)||rX()}function rX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FF(e,t){if(e){if(typeof e=="string")return D4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D4(e,t)}}function D4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function nX(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function aX(e){if(Array.isArray(e))return e}function MF(e){var t=Lx(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function RF(e,t,r){if(e.lte(0))return new Fa(0);var a=sy.getDigitCount(e.toNumber()),s=new Fa(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new Fa(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Fa(Math.ceil(c))}function sX(e,t,r){var a=1,s=new Fa(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Fa(10).pow(sy.getDigitCount(e)-1),s=new Fa(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Fa(Math.floor(e)))}else e===0?s=new Fa(Math.floor((t-1)/2)):r||(s=new Fa(Math.floor(e)));var o=Math.floor((t-1)/2),l=GK(VK(function(c){return s.add(new Fa(c-o).mul(a)).toNumber()}),O4);return l(0,t)}function BF(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Fa(0),tickMin:new Fa(0),tickMax:new Fa(0)};var i=RF(new Fa(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new Fa(0):(o=new Fa(e).add(t).div(2),o=o.sub(new Fa(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Fa(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?BF(e,t,r,a,s+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new Fa(l).mul(i)),tickMax:o.add(new Fa(c).mul(i))})}function iX(e){var t=Lx(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=MF([r,a]),c=Lx(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(I4(O4(0,s-1).map(function(){return 1/0}))):[].concat(I4(O4(0,s-1).map(function(){return-1/0})),[u]);return r>a?P4(f):f}if(d===u)return sX(d,s,i);var p=BF(d,u,o,i),m=p.step,b=p.tickMin,v=p.tickMax,g=sy.rangeStep(b,v.add(new Fa(.1).mul(m)),m);return r>a?P4(g):g}function oX(e,t){var r=Lx(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=MF([a,s]),l=Lx(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,s];if(c===d)return[c];var u=Math.max(t,2),f=RF(new Fa(d).sub(c).div(u-1),i,0),p=[].concat(I4(sy.rangeStep(new Fa(c),new Fa(d).sub(new Fa(.99).mul(f)),f)),[d]);return a>s?P4(p):p}var lX=LF(iX),cX=LF(oX),dX="Invariant failed";function _h(e,t){throw new Error(dX)}var uX=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function U1(){return U1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U1.apply(this,arguments)}function fX(e,t){return xX(e)||pX(e,t)||mX(e,t)||hX()}function hX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mX(e,t){if(e){if(typeof e=="string")return dO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dO(e,t)}}function dO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function xX(e){if(Array.isArray(e))return e}function gX(e,t){if(e==null)return{};var r=vX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function vX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function bX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yX(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$F(a.key),a)}}function wX(e,t,r){return t&&yX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NX(e,t,r){return t=q1(t),jX(e,UF()?Reflect.construct(t,r||[],q1(e).constructor):t.apply(e,r))}function jX(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kX(e)}function kX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UF=function(){return!!e})()}function q1(e){return q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q1(e)}function SX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L4(e,t)}function L4(e,t){return L4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},L4(e,t)}function qF(e,t,r){return t=$F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $F(e){var t=_X(e,"string");return qm(t)=="symbol"?t:t+""}function _X(e,t){if(qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iy=(function(e){function t(){return bX(this,t),NX(this,t,arguments)}return SX(t,e),wX(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,u=a.xAxis,f=a.yAxis,p=gX(a,uX),m=$n(p,!1);this.props.direction==="x"&&u.type!=="number"&&_h();var b=c.map(function(v){var g=d(v,l),w=g.x,y=g.y,j=g.value,N=g.errorVal;if(!N)return null;var S=[],E,A;if(Array.isArray(N)){var P=fX(N,2);E=P[0],A=P[1]}else E=A=N;if(i==="vertical"){var D=u.scale,R=y+s,T=R+o,_=R-o,B=D(j-E),U=D(j+A);S.push({x1:U,y1:T,x2:U,y2:_}),S.push({x1:B,y1:R,x2:U,y2:R}),S.push({x1:B,y1:T,x2:B,y2:_})}else if(i==="horizontal"){var H=f.scale,Y=w+s,J=Y-o,re=Y+o,X=H(j-E),ee=H(j+A);S.push({x1:J,y1:ee,x2:re,y2:ee}),S.push({x1:Y,y1:X,x2:Y,y2:ee}),S.push({x1:J,y1:X,x2:re,y2:X})}return ft.createElement(Is,U1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},m),S.map(function(W){return ft.createElement("line",U1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return ft.createElement(Is,{className:"recharts-errorBars"},b)}}])})(ft.Component);qF(iy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});qF(iy,"displayName","ErrorBar");function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(a){CX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function CX(e,t,r){return t=AX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AX(e){var t=EX(e,"string");return Fx(t)=="symbol"?t:t+""}function EX(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zF=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=kc(r,Nm);if(!o)return null;var l=Nm.defaultProps,c=l!==void 0?Y0(Y0({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(a||[]).reduce(function(u,f){var p=f.item,m=f.props,b=m.sectors||m.data||[];return u.concat(b.map(function(v){return{type:o.props.iconType||p.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(a||[]).map(function(u){var f=u.item,p=f.type.defaultProps,m=p!==void 0?Y0(Y0({},p),f.props):{},b=m.dataKey,v=m.name,g=m.legendType,w=m.hide;return{inactive:w,dataKey:b,type:c.iconType||g||"square",color:YS(f),value:v||b,payload:m}}),Y0(Y0(Y0({},c),Nm.getWithHeight(o,s)),{},{payload:d,item:o})};function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function fO(e){return IX(e)||PX(e)||OX(e)||TX()}function TX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OX(e,t){if(e){if(typeof e=="string")return F4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F4(e,t)}}function PX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IX(e){if(Array.isArray(e))return F4(e)}function F4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hO(Object(r),!0).forEach(function(a){km(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function km(e,t,r){return t=DX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DX(e){var t=LX(e,"string");return Mx(t)=="symbol"?t:t+""}function LX(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Mx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pc(e,t,r){return zn(e)||zn(t)?r:$i(t)?md(e,t,r):En(t)?t(e):r}function ix(e,t,r,a){var s=DK(e,function(l){return Pc(l,t)});if(r==="number"){var i=s.filter(function(l){return ur(l)||parseFloat(l)});return i.length?[ny(i),f0(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!zn(l)}):s;return o.map(function(l){return $i(l)||l instanceof Date?l:""})}var FX=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,f=s[d].coordinate,p=d>=l-1?s[0].coordinate:s[d+1].coordinate,m=void 0;if(Zd(f-u)!==Zd(p-f)){var b=[];if(Zd(p-f)===Zd(c[1]-c[0])){m=p;var v=f+c[1]-c[0];b[0]=Math.min(v,(v+u)/2),b[1]=Math.max(v,(v+u)/2)}else{m=u;var g=p+c[1]-c[0];b[0]=Math.min(f,(g+f)/2),b[1]=Math.max(f,(g+f)/2)}var w=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>w[0]&&t<=w[1]||t>=b[0]&&t<=b[1]){o=s[d].index;break}}else{var y=Math.min(u,p),j=Math.max(u,p);if(t>(y+f)/2&&t<=(j+f)/2){o=s[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N>0&&N<l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N===l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2){o=a[N].index;break}return o},YS=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?$s($s({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},MX=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,f=Object.keys(u),p=0,m=f.length;p<m;p++){var b=u[f[p]],v=b.items,g=b.cateAxisId,w=v.filter(function(A){return kf(A.type).indexOf("Bar")>=0});if(w&&w.length){var y=w[0].type.defaultProps,j=y!==void 0?$s($s({},y),w[0].props):w[0].props,N=j.barSize,S=j[g];o[S]||(o[S]=[]);var E=zn(N)?r:N;o[S].push({item:w[0],stackList:w.slice(1),barSize:zn(E)?void 0:kh(E,a,0)})}}return o},RX=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=kh(r,s,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=s/c,b=o.reduce(function(N,S){return N+S.barSize||0},0);b+=(c-1)*d,b>=s&&(b-=(c-1)*d,d=0),b>=s&&m>0&&(p=!0,m*=.9,b=c*m);var v=(s-b)/2>>0,g={offset:v-d,size:0};u=o.reduce(function(N,S){var E={item:S.item,position:{offset:g.offset+g.size+d,size:p?m:S.barSize}},A=[].concat(fO(N),[E]);return g=A[A.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){A.push({item:P,position:g})}),A},f)}else{var w=kh(a,s,0,!0);s-2*w-(c-1)*d<=0&&(d=0);var y=(s-2*w-(c-1)*d)/c;y>1&&(y>>=0);var j=l===+l?Math.min(y,l):y;u=o.reduce(function(N,S,E){var A=[].concat(fO(N),[{item:S.item,position:{offset:w+(y+d)*E+(y-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){A.push({item:P,position:A[A.length-1].position})}),A},f)}return u},BX=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=zF({children:i,legendWidth:c});if(d){var u=s||{},f=u.width,p=u.height,m=d.align,b=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&m!=="center"&&ur(t[m]))return $s($s({},t),{},km({},m,t[m]+(f||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&b!=="middle"&&ur(t[b]))return $s($s({},t),{},km({},b,t[b]+(p||0)))}return t},UX=function(t,r,a){return zn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},HF=function(t,r,a,s,i){var o=r.props.children,l=su(o,iy).filter(function(d){return UX(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Pc(u,a);if(zn(f))return d;var p=Array.isArray(f)?[ny(f),f0(f)]:[f,f],m=c.reduce(function(b,v){var g=Pc(u,v,0),w=p[0]-Math.abs(Array.isArray(g)?g[0]:g),y=p[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(w,b[0]),Math.max(y,b[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},qX=function(t,r,a,s,i){var o=r.map(function(l){return HF(t,l,a,i,s)}).filter(function(l){return!zn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},WF=function(t,r,a,s,i){var o=r.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&HF(t,c,d,s)||ix(t,d,a,i)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},VF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},GF=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(a),l},vf=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?Zd(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var p=i?i.indexOf(f):f;return{coordinate:s(p)+d,value:f,offset:d}});return u.filter(function(f){return!lp(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:s(f)+d,value:f,index:p,offset:d}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+d,value:f,offset:d}}):s.domain().map(function(f,p){return{coordinate:s(f)+d,value:i?i[f]:f,index:p,offset:d}})},U5=new WeakMap,vv=function(t,r){if(typeof r!="function")return t;U5.has(t)||U5.set(t,new WeakMap);var a=U5.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},$X=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ax(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:L1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:sx(),realScaleType:"point"}:i==="category"?{scale:Ax(),realScaleType:"band"}:{scale:L1(),realScaleType:"linear"};if(jh(s)){var c="scale".concat(Hb(s));return{scale:(QT[c]||sx)(),realScaleType:QT[c]?c:"point"}}return En(s)?{scale:s}:{scale:sx(),realScaleType:"point"}},mO=1e-4,zX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-mO,o=Math.max(s[0],s[1])+mO,l=t(r[0]),c=t(r[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[a-1]])}},HX=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},WX=function(t,r){if(!r||r.length!==2||!ur(r[0])||!ur(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ur(t[0])||t[0]<a)&&(i[0]=a),(!ur(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},VX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var c=lp(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},GX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=lp(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},KX={sign:VX,expand:O$,none:Im,silhouette:P$,wiggle:I$,positive:GX},XX=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=KX[a],o=T$().keys(s).value(function(l,c){return+Pc(l,c,0)}).order(f4).offset(i);return o(t)},YX=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,p){var m,b=(m=p.type)!==null&&m!==void 0&&m.defaultProps?$s($s({},p.type.defaultProps),p.props):p.props,v=b.stackId,g=b.hide;if(g)return f;var w=b[a],y=f[w]||{hasStack:!1,stackGroups:{}};if($i(v)){var j=y.stackGroups[v]||{numericAxisId:a,cateAxisId:s,items:[]};j.items.push(p),y.hasStack=!0,y.stackGroups[v]=j}else y.stackGroups[wg("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[p]};return $s($s({},f),{},km({},w,y))},c),u={};return Object.keys(d).reduce(function(f,p){var m=d[p];if(m.hasStack){var b={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,g){var w=m.stackGroups[g];return $s($s({},v),{},km({},g,{numericAxisId:a,cateAxisId:s,items:w.items,stackedData:XX(t,w.items,i)}))},b)}return $s($s({},f),{},km({},p,m))},u)},JX=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=lX(d,i,l);return t.domain([ny(u),f0(u)]),{niceTicks:u}}if(i&&s==="number"){var f=t.domain(),p=cX(f,i,l);return{niceTicks:p}}return null};function pO(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!zn(s[t.dataKey])){var l=m1(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=Pc(s,zn(o)?t.dataKey:o);return zn(c)?null:t.scale(c)}var xO=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var c=Pc(o,r.dataKey,r.domain[l]);return zn(c)?null:r.scale(c)-i/2+s},QX=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},ZX=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?$s($s({},t.type.defaultProps),t.props):t.props,i=s.stackId;if($i(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},eY=function(t){return t.reduce(function(r,a){return[ny(a.concat([r[0]]).filter(ur)),f0(a.concat([r[1]]).filter(ur))]},[1/0,-1/0])},KF=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var f=eY(u.slice(r,a+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},gO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,M4=function(t,r,a){if(En(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(ur(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(gO.test(t[0])){var i=+gO.exec(t[0])[1];s[0]=r[0]-i}else En(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(ur(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(vO.test(t[1])){var o=+vO.exec(t[1])[1];s[1]=r[1]+o}else En(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},$1=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=kS(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},bO=function(t,r,a){return!t||!t.length||Ix(t,md(a,"type.defaultProps.domain"))?r:t},XF=function(t,r){var a=t.type.defaultProps?$s($s({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,u=a.hide;return $s($s({},$n(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:YS(t),value:Pc(r,s),type:c,payload:r,chartType:d,hide:u})};function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(a){tY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tY(e,t,r){return t=rY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return Rx(t)=="symbol"?t:t+""}function nY(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z1=Math.PI/180,aY=function(t){return t*180/Math.PI},Do=function(t,r,a,s){return{x:t+Math.cos(-z1*s)*a,y:r+Math.sin(-z1*s)*a}},sY=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},iY=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=sY({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:aY(d),angleInRadian:d}},oY=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},lY=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},NO=function(t,r){var a=t.x,s=t.y,i=iY({x:a,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=oY(r),f=u.startAngle,p=u.endAngle,m=l,b;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;b=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;b=m>=p&&m<=f}return b?wO(wO({},r),{},{radius:o,angle:lY(m,r)}):null};function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}var cY=["offset"];function dY(e){return mY(e)||hY(e)||fY(e)||uY()}function uY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fY(e,t){if(e){if(typeof e=="string")return R4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R4(e,t)}}function hY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mY(e){if(Array.isArray(e))return R4(e)}function R4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pY(e,t){if(e==null)return{};var r=xY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(a){gY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gY(e,t,r){return t=vY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vY(e){var t=bY(e,"string");return Bx(t)=="symbol"?t:t+""}function bY(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ux.apply(this,arguments)}var yY=function(t){var r=t.value,a=t.formatter,s=zn(t.children)?r:t.children;return En(a)?a(s):s},wY=function(t,r){var a=Zd(r-t),s=Math.min(Math.abs(r-t),360);return a*s},NY=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,p=c.outerRadius,m=c.startAngle,b=c.endAngle,v=c.clockWise,g=(f+p)/2,w=wY(m,b),y=w>=0?1:-1,j,N;s==="insideStart"?(j=m+y*o,N=v):s==="insideEnd"?(j=b-y*o,N=!v):s==="end"&&(j=b+y*o,N=v),N=w<=0?N:!N;var S=Do(d,u,g,j),E=Do(d,u,g,j+(N?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(E.x,",").concat(E.y),P=zn(t.id)?wg("recharts-radial-line-"):t.id;return ft.createElement("text",Ux({},a,{dominantBaseline:"central",className:la("recharts-radial-bar-label",l)}),ft.createElement("defs",null,ft.createElement("path",{id:P,d:A})),ft.createElement("textPath",{xlinkHref:"#".concat(P)},r))},jY=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,p=(u+f)/2;if(s==="outside"){var m=Do(o,l,d+a,p),b=m.x,v=m.y;return{x:b,y:v,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,w=Do(o,l,g,p),y=w.x,j=w.y;return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},kY=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,p=f*s,m=f>0?"end":"start",b=f>0?"start":"end",v=d>=0?1:-1,g=v*s,w=v>0?"end":"start",y=v>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:c-f*s,textAnchor:"middle",verticalAnchor:m};return Mi(Mi({},j),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var N={x:l+d/2,y:c+u+p,textAnchor:"middle",verticalAnchor:b};return Mi(Mi({},N),a?{height:Math.max(a.y+a.height-(c+u),0),width:d}:{})}if(i==="left"){var S={x:l-g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Mi(Mi({},S),a?{width:Math.max(S.x-a.x,0),height:u}:{})}if(i==="right"){var E={x:l+d+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Mi(Mi({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:u}:{})}var A=a?{width:d,height:u}:{};return i==="insideLeft"?Mi({x:l+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},A):i==="insideRight"?Mi({x:l+d-g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},A):i==="insideTop"?Mi({x:l+d/2,y:c+p,textAnchor:"middle",verticalAnchor:b},A):i==="insideBottom"?Mi({x:l+d/2,y:c+u-p,textAnchor:"middle",verticalAnchor:m},A):i==="insideTopLeft"?Mi({x:l+g,y:c+p,textAnchor:y,verticalAnchor:b},A):i==="insideTopRight"?Mi({x:l+d-g,y:c+p,textAnchor:w,verticalAnchor:b},A):i==="insideBottomLeft"?Mi({x:l+g,y:c+u-p,textAnchor:y,verticalAnchor:m},A):i==="insideBottomRight"?Mi({x:l+d-g,y:c+u-p,textAnchor:w,verticalAnchor:m},A):op(i)&&(ur(i.x)||ih(i.x))&&(ur(i.y)||ih(i.y))?Mi({x:l+kh(i.x,d),y:c+kh(i.y,u),textAnchor:"end",verticalAnchor:"end"},A):Mi({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},SY=function(t){return"cx"in t&&ur(t.cx)};function il(e){var t=e.offset,r=t===void 0?5:t,a=pY(e,cY),s=Mi({offset:r},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,f=u===void 0?"":u,p=s.textBreakAll;if(!i||zn(l)&&zn(c)&&!I.isValidElement(d)&&!En(d))return null;if(I.isValidElement(d))return I.cloneElement(d,s);var m;if(En(d)){if(m=I.createElement(d,s),I.isValidElement(m))return m}else m=yY(s);var b=SY(i),v=$n(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return NY(s,m,v);var g=b?jY(s):kY(s);return ft.createElement(C1,Ux({className:la("recharts-label",f)},v,g,{breakAll:p}),m)}il.displayName="Label";var YF=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,p=t.y,m=t.top,b=t.left,v=t.width,g=t.height,w=t.clockWise,y=t.labelViewBox;if(y)return y;if(ur(v)&&ur(g)){if(ur(f)&&ur(p))return{x:f,y:p,width:v,height:g};if(ur(m)&&ur(b))return{x:m,y:b,width:v,height:g}}return ur(f)&&ur(p)?{x:f,y:p,width:0,height:0}:ur(r)&&ur(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:w}:t.viewBox?t.viewBox:{}},_Y=function(t,r){return t?t===!0?ft.createElement(il,{key:"label-implicit",viewBox:r}):$i(t)?ft.createElement(il,{key:"label-implicit",viewBox:r,value:t}):I.isValidElement(t)?t.type===il?I.cloneElement(t,{key:"label-implicit",viewBox:r}):ft.createElement(il,{key:"label-implicit",content:t,viewBox:r}):En(t)?ft.createElement(il,{key:"label-implicit",content:t,viewBox:r}):op(t)?ft.createElement(il,Ux({viewBox:r},t,{key:"label-implicit"})):null:null},CY=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=YF(t),o=su(s,il).map(function(c,d){return I.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!a)return o;var l=_Y(t.label,r||i);return[l].concat(dY(o))};il.parseViewBox=YF;il.renderCallByParent=CY;var q5,kO;function AY(){if(kO)return q5;kO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return q5=e,q5}var EY=AY();const TY=Ta(EY);function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}var OY=["valueAccessor"],PY=["data","dataKey","clockWise","id","textBreakAll"];function IY(e){return MY(e)||FY(e)||LY(e)||DY()}function DY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LY(e,t){if(e){if(typeof e=="string")return B4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B4(e,t)}}function FY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MY(e){if(Array.isArray(e))return B4(e)}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H1.apply(this,arguments)}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function _O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(a){RY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function RY(e,t,r){return t=BY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=UY(e,"string");return qx(t)=="symbol"?t:t+""}function UY(e,t){if(qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CO(e,t){if(e==null)return{};var r=qY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function qY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var $Y=function(t){return Array.isArray(t.value)?TY(t.value):t.value};function b0(e){var t=e.valueAccessor,r=t===void 0?$Y:t,a=CO(e,OY),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=CO(a,PY);return!s||!s.length?null:ft.createElement(Is,{className:"recharts-label-list"},s.map(function(u,f){var p=zn(i)?r(u,f):Pc(u&&u.payload,i),m=zn(l)?{}:{id:"".concat(l,"-").concat(f)};return ft.createElement(il,H1({},$n(u,!0),d,m,{parentViewBox:u.parentViewBox,value:p,textBreakAll:c,viewBox:il.parseViewBox(zn(o)?u:_O(_O({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}b0.displayName="LabelList";function zY(e,t){return e?e===!0?ft.createElement(b0,{key:"labelList-implicit",data:t}):ft.isValidElement(e)||En(e)?ft.createElement(b0,{key:"labelList-implicit",data:t,content:e}):op(e)?ft.createElement(b0,H1({data:t},e,{key:"labelList-implicit"})):null:null}function HY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=su(a,b0).map(function(o,l){return I.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=zY(e.label,t);return[i].concat(IY(s))}b0.renderCallByParent=HY;function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function U4(){return U4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U4.apply(this,arguments)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function EO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(a){WY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WY(e,t,r){return t=VY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VY(e){var t=GY(e,"string");return $x(t)=="symbol"?t:t+""}function GY(e,t){if($x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($x(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KY=function(t,r){var a=Zd(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},bv=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+s,f=Math.asin(c/u)/z1,p=d?i:i+o*f,m=Do(r,a,u,p),b=Do(r,a,s,p),v=d?i-o*f:i,g=Do(r,a,u*Math.cos(f*z1),v);return{center:m,circleTangency:b,lineTangency:g,theta:f}},JF=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=KY(o,l),d=o+c,u=Do(r,a,i,o),f=Do(r,a,i,d),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var m=Do(r,a,s,o),b=Do(r,a,s,d);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(a," Z");return p},XY=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Zd(u-d),p=bv({cx:r,cy:a,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,b=p.lineTangency,v=p.theta,g=bv({cx:r,cy:a,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),w=g.circleTangency,y=g.lineTangency,j=g.theta,N=c?Math.abs(d-u):Math.abs(d-u)-v-j;if(N<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):JF({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var E=bv({cx:r,cy:a,radius:s,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=E.circleTangency,P=E.lineTangency,D=E.theta,R=bv({cx:r,cy:a,radius:s,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=R.circleTangency,_=R.lineTangency,B=R.theta,U=c?Math.abs(d-u):Math.abs(d-u)-D-B;if(U<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(U>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},YY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},QF=function(t){var r=EO(EO({},YY),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,p=r.className;if(o<i||u===f)return null;var m=la("recharts-sector",p),b=o-i,v=kh(l,b,0,!0),g;return v>0&&Math.abs(u-f)<360?g=XY({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):g=JF({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),ft.createElement("path",U4({},$n(r,!0),{className:m,d:g,role:"img"}))};function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function q4(){return q4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q4.apply(this,arguments)}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function OO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(a){JY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JY(e,t,r){return t=QY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QY(e){var t=ZY(e,"string");return zx(t)=="symbol"?t:t+""}function ZY(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PO={curveBasisClosed:b$,curveBasisOpen:y$,curveBasis:v$,curveBumpX:a$,curveBumpY:s$,curveLinearClosed:w$,curveLinear:Vb,curveMonotoneX:N$,curveMonotoneY:j$,curveNatural:k$,curveStep:S$,curveStepAfter:C$,curveStepBefore:_$},yv=function(t){return t.x===+t.x&&t.y===+t.y},Fp=function(t){return t.x},Mp=function(t){return t.y},eJ=function(t,r){if(En(t))return t;var a="curve".concat(Hb(t));return(a==="curveMonotone"||a==="curveBump")&&r?PO["".concat(a).concat(r==="vertical"?"Y":"X")]:PO[a]||Vb},tJ=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=eJ(a,l),f=d?i.filter(function(v){return yv(v)}):i,p;if(Array.isArray(o)){var m=d?o.filter(function(v){return yv(v)}):o,b=f.map(function(v,g){return OO(OO({},v),{},{base:m[g]})});return l==="vertical"?p=uv().y(Mp).x1(Fp).x0(function(v){return v.base.x}):p=uv().x(Fp).y1(Mp).y0(function(v){return v.base.y}),p.defined(yv).curve(u),p(b)}return l==="vertical"&&ur(o)?p=uv().y(Mp).x1(Fp).x0(o):ur(o)?p=uv().x(Fp).y1(Mp).y0(o):p=rL().x(Fp).y(Mp),p.defined(yv).curve(u),p(f)},ox=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?tJ(t):s;return I.createElement("path",q4({},$n(t,!1),p1(t),{className:la("recharts-curve",r),d:o,ref:i}))},$5={exports:{}},z5,IO;function rJ(){if(IO)return z5;IO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return z5=e,z5}var H5,DO;function nJ(){if(DO)return H5;DO=1;var e=rJ();function t(){}function r(){}return r.resetWarningCache=t,H5=function(){function a(o,l,c,d,u,f){if(f!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},H5}var LO;function aJ(){return LO||(LO=1,$5.exports=nJ()()),$5.exports}var sJ=aJ();const wa=Ta(sJ),{getOwnPropertyNames:iJ,getOwnPropertySymbols:oJ}=Object,{hasOwnProperty:lJ}=Object.prototype;function W5(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function wv(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const c=e(r,a,s);return i.delete(r),i.delete(a),c}}function cJ(e){return e?.[Symbol.toStringTag]}function FO(e){return iJ(e).concat(oJ(e))}const dJ=Object.hasOwn||((e,t)=>lJ.call(e,t));function Uh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const uJ="__v",fJ="__o",hJ="_owner",{getOwnPropertyDescriptor:MO,keys:RO}=Object;function mJ(e,t){return e.byteLength===t.byteLength&&W1(new Uint8Array(e),new Uint8Array(t))}function pJ(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function xJ(e,t){return e.byteLength===t.byteLength&&W1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function gJ(e,t){return Uh(e.getTime(),t.getTime())}function vJ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function bJ(e,t){return e===t}function BO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(s[f]){f++;continue}const p=o.value,m=l.value;if(r.equals(p[0],m[0],c,f,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1;c++}return!0}const yJ=Uh;function wJ(e,t,r){const a=RO(e);let s=a.length;if(RO(t).length!==s)return!1;for(;s-- >0;)if(!ZF(e,t,r,a[s]))return!1;return!0}function Rp(e,t,r){const a=FO(e);let s=a.length;if(FO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!ZF(e,t,r,i)||(o=MO(e,i),l=MO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function NJ(e,t){return Uh(e.valueOf(),t.valueOf())}function jJ(e,t){return e.source===t.source&&e.flags===t.flags}function UO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function W1(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function kJ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ZF(e,t,r,a){return(a===hJ||a===fJ||a===uJ)&&(e.$$typeof||t.$$typeof)?!0:dJ(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const SJ="[object ArrayBuffer]",_J="[object Arguments]",CJ="[object Boolean]",AJ="[object DataView]",EJ="[object Date]",TJ="[object Error]",OJ="[object Map]",PJ="[object Number]",IJ="[object Object]",DJ="[object RegExp]",LJ="[object Set]",FJ="[object String]",MJ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},RJ="[object URL]",BJ=Object.prototype.toString;function UJ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:b}){return function(g,w,y){if(g===w)return!0;if(g==null||w==null)return!1;const j=typeof g;if(j!==typeof w)return!1;if(j!=="object")return j==="number"?l(g,w,y):j==="function"?i(g,w,y):!1;const N=g.constructor;if(N!==w.constructor)return!1;if(N===Object)return c(g,w,y);if(Array.isArray(g))return t(g,w,y);if(N===Date)return a(g,w,y);if(N===RegExp)return u(g,w,y);if(N===Map)return o(g,w,y);if(N===Set)return f(g,w,y);const S=BJ.call(g);if(S===EJ)return a(g,w,y);if(S===DJ)return u(g,w,y);if(S===OJ)return o(g,w,y);if(S===LJ)return f(g,w,y);if(S===IJ)return typeof g.then!="function"&&typeof w.then!="function"&&c(g,w,y);if(S===RJ)return m(g,w,y);if(S===TJ)return s(g,w,y);if(S===_J)return c(g,w,y);if(MJ[S])return p(g,w,y);if(S===SJ)return e(g,w,y);if(S===AJ)return r(g,w,y);if(S===CJ||S===PJ||S===FJ)return d(g,w,y);if(b){let E=b[S];if(!E){const A=cJ(g);A&&(E=b[A])}if(E)return E(g,w,y)}return!1}}function qJ({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:mJ,areArraysEqual:r?Rp:pJ,areDataViewsEqual:xJ,areDatesEqual:gJ,areErrorsEqual:vJ,areFunctionsEqual:bJ,areMapsEqual:r?W5(BO,Rp):BO,areNumbersEqual:yJ,areObjectsEqual:r?Rp:wJ,arePrimitiveWrappersEqual:NJ,areRegExpsEqual:jJ,areSetsEqual:r?W5(UO,Rp):UO,areTypedArraysEqual:r?W5(W1,Rp):W1,areUrlsEqual:kJ,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=wv(a.areArraysEqual),i=wv(a.areMapsEqual),o=wv(a.areObjectsEqual),l=wv(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function $J(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function zJ({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=r();return t(l,c,{cache:d,equals:a,meta:u,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const HJ=P0();P0({strict:!0});P0({circular:!0});P0({circular:!0,strict:!0});P0({createInternalComparator:()=>Uh});P0({strict:!0,createInternalComparator:()=>Uh});P0({circular:!0,createInternalComparator:()=>Uh});P0({circular:!0,createInternalComparator:()=>Uh,strict:!0});function P0(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=qJ(e),o=UJ(i),l=r?r(o):$J(o);return zJ({circular:t,comparator:o,createState:a,equals:l,strict:s})}function WJ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function qO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):WJ(s)};requestAnimationFrame(a)}function $4(e){"@babel/helpers - typeof";return $4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$4(e)}function VJ(e){return YJ(e)||XJ(e)||KJ(e)||GJ()}function GJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KJ(e,t){if(e){if(typeof e=="string")return $O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $O(e,t)}}function $O(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function XJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YJ(e){if(Array.isArray(e))return e}function JJ(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=VJ(o),c=l[0],d=l.slice(1);if(typeof c=="number"){qO(s.bind(null,d),c);return}s(c),qO(s.bind(null,d));return}$4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function HO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(a){e7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function e7(e,t,r){return t=QJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QJ(e){var t=ZJ(e,"string");return Hx(t)==="symbol"?t:String(t)}function ZJ(e,t){if(Hx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hx(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eQ=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},tQ=function(t){return t},rQ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},lx=function(t,r){return Object.keys(r).reduce(function(a,s){return HO(HO({},a),{},e7({},s,t(s,r[s])))},{})},WO=function(t,r,a){return t.map(function(s){return"".concat(rQ(s)," ").concat(r,"ms ").concat(a)}).join(",")};function nQ(e,t){return iQ(e)||sQ(e,t)||t7(e,t)||aQ()}function aQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function iQ(e){if(Array.isArray(e))return e}function oQ(e){return dQ(e)||cQ(e)||t7(e)||lQ()}function lQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t7(e,t){if(e){if(typeof e=="string")return z4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z4(e,t)}}function cQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dQ(e){if(Array.isArray(e))return z4(e)}function z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var V1=1e-4,r7=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},n7=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},VO=function(t,r){return function(a){var s=r7(t,r);return n7(s,a)}},uQ=function(t,r){return function(a){var s=r7(t,r),i=[].concat(oQ(s.map(function(o,l){return o*l}).slice(1)),[0]);return n7(i,a)}},GO=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=nQ(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var f=VO(s,o),p=VO(i,l),m=uQ(s,o),b=function(w){return w>1?1:w<0?0:w},v=function(w){for(var y=w>1?1:w,j=y,N=0;N<8;++N){var S=f(j)-y,E=m(j);if(Math.abs(S-y)<V1||E<V1)return p(j);j=b(j-S/E)}return p(j)};return v.isStepper=!1,v},fQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(u,f,p){var m=-(u-f)*a,b=p*i,v=p+(m-b)*l/1e3,g=p*l/1e3+u;return Math.abs(g-f)<V1&&Math.abs(v)<V1?[f,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},hQ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GO(s);case"spring":return fQ();default:if(s.split("(")[0]==="cubic-bezier")return GO(s)}return typeof s=="function"?s:null};function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function KO(e){return xQ(e)||pQ(e)||a7(e)||mQ()}function mQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xQ(e){if(Array.isArray(e))return W4(e)}function XO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(r),!0).forEach(function(a){H4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function H4(e,t,r){return t=gQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQ(e){var t=vQ(e,"string");return Wx(t)==="symbol"?t:String(t)}function vQ(e,t){if(Wx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wx(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bQ(e,t){return NQ(e)||wQ(e,t)||a7(e,t)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a7(e,t){if(e){if(typeof e=="string")return W4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W4(e,t)}}function W4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function wQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function NQ(e){if(Array.isArray(e))return e}var G1=function(t,r,a){return t+(r-t)*a},V4=function(t){var r=t.from,a=t.to;return r!==a},jQ=function e(t,r,a){var s=lx(function(i,o){if(V4(o)){var l=t(o.from,o.to,o.velocity),c=bQ(l,2),d=c[0],u=c[1];return To(To({},o),{},{from:d,velocity:u})}return o},r);return a<1?lx(function(i,o){return V4(o)?To(To({},o),{},{velocity:G1(o.velocity,s[i].velocity,a),from:G1(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const kQ=(function(e,t,r,a,s){var i=eQ(e,t),o=i.reduce(function(g,w){return To(To({},g),{},H4({},w,[e[w],t[w]]))},{}),l=i.reduce(function(g,w){return To(To({},g),{},H4({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,d,u,f=function(){return null},p=function(){return lx(function(w,y){return y.from},l)},m=function(){return!Object.values(l).filter(V4).length},b=function(w){d||(d=w);var y=w-d,j=y/r.dt;l=jQ(r,l,j),s(To(To(To({},e),t),p())),d=w,m()||(c=requestAnimationFrame(f))},v=function(w){u||(u=w);var y=(w-u)/a,j=lx(function(S,E){return G1.apply(void 0,KO(E).concat([r(y)]))},o);if(s(To(To(To({},e),t),j)),y<1)c=requestAnimationFrame(f);else{var N=lx(function(S,E){return G1.apply(void 0,KO(E).concat([r(1)]))},o);s(To(To(To({},e),t),N))}};return f=r.isStepper?b:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}var SQ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _Q(e,t){if(e==null)return{};var r=CQ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function CQ(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function V5(e){return OQ(e)||TQ(e)||EQ(e)||AQ()}function AQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(e,t){if(e){if(typeof e=="string")return G4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G4(e,t)}}function TQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OQ(e){if(Array.isArray(e))return G4(e)}function G4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(a){Yp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yp(e,t,r){return t=s7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IQ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s7(a.key),a)}}function DQ(e,t,r){return t&&IQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s7(e){var t=LQ(e,"string");return $m(t)==="symbol"?t:String(t)}function LQ(e,t){if($m(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($m(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K4(e,t)}function K4(e,t){return K4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},K4(e,t)}function MQ(e){var t=RQ();return function(){var a=K1(e),s;if(t){var i=K1(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return X4(this,s)}}function X4(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y4(e)}function Y4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K1(e){return K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K1(e)}var If=(function(e){FQ(r,e);var t=MQ(r);function r(a,s){var i;PQ(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,p=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Y4(i)),i.changeStyle=i.changeStyle.bind(Y4(i)),!l||m<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:u}),X4(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof p=="function")return i.state={style:d},X4(i);i.state={style:c?Yp({},c,d):d}}else i.state={style:{}};return i}return DQ(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,p=this.state.style;if(l){if(!o){var m={style:c?Yp({},c,u):u};this.state&&p&&(c&&p[c]!==u||!c&&p!==u)&&this.setState(m);return}if(!(HJ(s.to,u)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||d?f:s.to;if(this.state&&p){var g={style:c?Yp({},c,v):v};(c&&p[c]!==v||!c&&p!==v)&&this.setState(g)}this.runAnimation(zd(zd({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,f=s.onAnimationEnd,p=s.onAnimationStart,m=kQ(o,l,hQ(d),c,this.changeStyle),b=function(){i.stopJSAnimation=m()};this.manager.start([p,u,b,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,f=d.duration,p=f===void 0?0:f,m=function(v,g,w){if(w===0)return v;var y=g.duration,j=g.easing,N=j===void 0?"ease":j,S=g.style,E=g.properties,A=g.onAnimationEnd,P=w>0?o[w-1]:g,D=E||Object.keys(S);if(typeof N=="function"||N==="spring")return[].concat(V5(v),[i.runJSAnimation.bind(i,{from:P.style,to:S,duration:y,easing:N}),y]);var R=WO(D,y,N),T=zd(zd(zd({},P.style),S),{},{transition:R});return[].concat(V5(v),[T,y,A]).filter(tQ)};return this.manager.start([c].concat(V5(o.reduce(m,[u,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=JJ());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,f=s.onAnimationEnd,p=s.steps,m=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var v=l?Yp({},l,c):c,g=WO(Object.keys(v),o,d);b.start([u,i,zd(zd({},v),{},{transition:g}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=_Q(s,SQ),d=I.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var f=function(m){var b=m.props,v=b.style,g=v===void 0?{}:v,w=b.className,y=I.cloneElement(m,zd(zd({},c),{},{style:zd(zd({},g),u),className:w}));return y};return d===1?f(I.Children.only(i)):ft.createElement("div",null,I.Children.map(i,function(p){return f(p)}))}}]),r})(I.PureComponent);If.displayName="Animate";If.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};If.propTypes={from:wa.oneOfType([wa.object,wa.string]),to:wa.oneOfType([wa.object,wa.string]),attributeName:wa.string,duration:wa.number,begin:wa.number,easing:wa.oneOfType([wa.string,wa.func]),steps:wa.arrayOf(wa.shape({duration:wa.number.isRequired,style:wa.object.isRequired,easing:wa.oneOfType([wa.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wa.func]),properties:wa.arrayOf("string"),onAnimationEnd:wa.func})),children:wa.oneOfType([wa.node,wa.func]),isActive:wa.bool,canBegin:wa.bool,onAnimationEnd:wa.func,shouldReAnimate:wa.bool,onAnimationStart:wa.func,onAnimationReStart:wa.func};function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X1.apply(this,arguments)}function BQ(e,t){return zQ(e)||$Q(e,t)||qQ(e,t)||UQ()}function UQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qQ(e,t){if(e){if(typeof e=="string")return JO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JO(e,t)}}function JO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $Q(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function zQ(e){if(Array.isArray(e))return e}function QO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ZO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QO(Object(r),!0).forEach(function(a){HQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HQ(e,t,r){return t=WQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WQ(e){var t=VQ(e,"string");return Vx(t)=="symbol"?t:t+""}function VQ(e,t){if(Vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eP=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,u;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=i[p]>o?o:i[p];u="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+a,",").concat(r+l*f[1])),u+="L ".concat(t+a,",").concat(r+s-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),u+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*f[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);u="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+a-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+a,",").concat(r+l*b,`
            L `).concat(t+a,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+a-c*b,",").concat(r+s,`
            L `).concat(t+c*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*b," Z")}else u="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return u},GQ=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),f=Math.min(o,o+c),p=Math.max(o,o+c);return a>=d&&a<=u&&s>=f&&s<=p}return!1},KQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JS=function(t){var r=ZO(ZO({},KQ),t),a=I.useRef(),s=I.useState(-1),i=BQ(s,2),o=i[0],l=i[1];I.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var N=a.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,p=r.radius,m=r.className,b=r.animationEasing,v=r.animationDuration,g=r.animationBegin,w=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var j=la("recharts-rectangle",m);return y?ft.createElement(If,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:v,animationEasing:b,isActive:y},function(N){var S=N.width,E=N.height,A=N.x,P=N.y;return ft.createElement(If,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:w,easing:b},ft.createElement("path",X1({},$n(r,!0),{className:j,d:eP(A,P,S,E,p),ref:a})))}):ft.createElement("path",X1({},$n(r,!0),{className:j,d:eP(c,d,u,f,p)}))};function J4(){return J4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},J4.apply(this,arguments)}var QS=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=la("recharts-dot",i);return r===+r&&a===+a&&s===+s?I.createElement("circle",J4({},$n(t,!1),p1(t),{className:o,cx:r,cy:a,r:s})):null};function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}var XQ=["x","y","top","left","width","height","className"];function Q4(){return Q4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q4.apply(this,arguments)}function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function YQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(a){JQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JQ(e,t,r){return t=QQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QQ(e){var t=ZQ(e,"string");return Gx(t)=="symbol"?t:t+""}function ZQ(e,t){if(Gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eZ(e,t){if(e==null)return{};var r=tZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var rZ=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},nZ=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,p=t.height,m=p===void 0?0:p,b=t.className,v=eZ(t,XQ),g=YQ({x:a,y:i,top:l,left:d,width:f,height:m},v);return!ur(a)||!ur(i)||!ur(f)||!ur(m)||!ur(l)||!ur(d)?null:ft.createElement("path",Q4({},$n(g,!0),{className:la("recharts-cross",b),d:rZ(a,i,f,m,l,d)}))},G5,rP;function aZ(){if(rP)return G5;rP=1;var e=SL(),t=e(Object.getPrototypeOf,Object);return G5=t,G5}var K5,nP;function sZ(){if(nP)return K5;nP=1;var e=Lf(),t=aZ(),r=Ff(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!r(u)||e(u)!=a)return!1;var f=t(u);if(f===null)return!0;var p=l.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return K5=d,K5}var iZ=sZ();const oZ=Ta(iZ);var X5,aP;function lZ(){if(aP)return X5;aP=1;var e=Lf(),t=Ff(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return X5=a,X5}var cZ=lZ();const dZ=Ta(cZ);function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y1.apply(this,arguments)}function uZ(e,t){return pZ(e)||mZ(e,t)||hZ(e,t)||fZ()}function fZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hZ(e,t){if(e){if(typeof e=="string")return sP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sP(e,t)}}function sP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function mZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function pZ(e){if(Array.isArray(e))return e}function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function oP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(r),!0).forEach(function(a){xZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xZ(e,t,r){return t=gZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gZ(e){var t=vZ(e,"string");return Kx(t)=="symbol"?t:t+""}function vZ(e,t){if(Kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lP=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},bZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yZ=function(t){var r=oP(oP({},bZ),t),a=I.useRef(),s=I.useState(-1),i=uZ(s,2),o=i[0],l=i[1];I.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var j=a.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,p=r.height,m=r.className,b=r.animationEasing,v=r.animationDuration,g=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||p!==+p||u===0&&f===0||p===0)return null;var y=la("recharts-trapezoid",m);return w?ft.createElement(If,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:p,x:c,y:d},duration:v,animationEasing:b,isActive:w},function(j){var N=j.upperWidth,S=j.lowerWidth,E=j.height,A=j.x,P=j.y;return ft.createElement(If,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:b},ft.createElement("path",Y1({},$n(r,!0),{className:y,d:lP(A,P,N,S,E),ref:a})))}):ft.createElement("g",null,ft.createElement("path",Y1({},$n(r,!0),{className:y,d:lP(c,d,u,f,p)})))},wZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function NZ(e,t){if(e==null)return{};var r=jZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function jZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function J1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(a){kZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kZ(e,t,r){return t=SZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SZ(e){var t=_Z(e,"string");return Xx(t)=="symbol"?t:t+""}function _Z(e,t){if(Xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CZ(e,t){return J1(J1({},t),e)}function AZ(e,t){return e==="symbols"}function dP(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ft.createElement(JS,r);case"trapezoid":return ft.createElement(yZ,r);case"sector":return ft.createElement(QF,r);case"symbols":if(AZ(t))return ft.createElement(xS,r);break;default:return null}}function EZ(e){return I.isValidElement(e)?e.props:e}function TZ(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?CZ:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=NZ(e,wZ),d;if(I.isValidElement(t))d=I.cloneElement(t,J1(J1({},c),EZ(t)));else if(En(t))d=t(c);else if(oZ(t)&&!dZ(t)){var u=s(t,c);d=ft.createElement(dP,{shapeType:r,elementProps:u})}else{var f=c;d=ft.createElement(dP,{shapeType:r,elementProps:f})}return l?ft.createElement(Is,{className:o},d):d}function oy(e,t){return t!=null&&"trapezoids"in e.props}function ly(e,t){return t!=null&&"sectors"in e.props}function Yx(e,t){return t!=null&&"points"in e.props}function OZ(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function PZ(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function IZ(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function DZ(e,t){var r;return oy(e,t)?r=OZ:ly(e,t)?r=PZ:Yx(e,t)&&(r=IZ),r}function LZ(e,t){var r;return oy(e,t)?r="trapezoids":ly(e,t)?r="sectors":Yx(e,t)&&(r="points"),r}function FZ(e,t){if(oy(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ly(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Yx(e,t)?t.payload:{}}function MZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=LZ(r,t),i=FZ(r,t),o=a.filter(function(c,d){var u=Ix(i,c),f=r.props[s].filter(function(b){var v=DZ(r,t);return v(b,t)}),p=r.props[s].indexOf(f[f.length-1]),m=d===p;return u&&m}),l=a.indexOf(o[o.length-1]);return l}var Y5,uP;function RZ(){if(uP)return Y5;uP=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,c=t(e((s-a)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=i;return d}return Y5=r,Y5}var J5,fP;function i7(){if(fP)return J5;fP=1;var e=qL(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return J5=a,J5}var Q5,hP;function BZ(){if(hP)return Q5;hP=1;var e=RZ(),t=Yb(),r=i7();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return Q5=a,Q5}var Z5,mP;function UZ(){if(mP)return Z5;mP=1;var e=BZ(),t=e();return Z5=t,Z5}var qZ=UZ();const Q1=Ta(qZ);function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(a){o7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function o7(e,t,r){return t=$Z(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Z(e){var t=zZ(e,"string");return Jx(t)=="symbol"?t:t+""}function zZ(e,t){if(Jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HZ=["Webkit","Moz","O","ms"],WZ=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=HZ.reduce(function(i,o){return xP(xP({},i),{},o7({},o+a,r))},{});return s[t]=r,s};function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function Z1(){return Z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Z1.apply(this,arguments)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(a){jc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c7(a.key),a)}}function GZ(e,t,r){return t&&vP(e.prototype,t),r&&vP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KZ(e,t,r){return t=eb(t),XZ(e,l7()?Reflect.construct(t,r||[],eb(e).constructor):t.apply(e,r))}function XZ(e,t){if(t&&(zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YZ(e)}function YZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l7=function(){return!!e})()}function eb(e){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eb(e)}function JZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z4(e,t)}function Z4(e,t){return Z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Z4(e,t)}function jc(e,t,r){return t=c7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c7(e){var t=QZ(e,"string");return zm(t)=="symbol"?t:t+""}function QZ(e,t){if(zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZZ=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=sx().domain(Q1(0,c)).range([i,i+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(s),scale:d,scaleValues:u}},bP=function(t){return t.changedTouches&&!!t.changedTouches.length},Hm=(function(e){function t(r){var a;return VZ(this,t),a=KZ(this,t,[r]),jc(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),jc(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),jc(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),jc(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),jc(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),jc(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),jc(a,"handleSlideDragStart",function(s){var i=bP(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return JZ(t,e),GZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(s,i),p=Math.max(s,i),m=t.getIndexInRange(o,f),b=t.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:b===u?u:b-b%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Pc(i[a],l,a);return En(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,p=c.startIndex,m=c.endIndex,b=c.onChange,v=a.pageX-i;v>0?v=Math.min(v,d+u-f-l,d+u-f-o):v<0&&(v=Math.max(v,d-o,d-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==p||g.endIndex!==m)&&b&&b(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=bP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,f=u.x,p=u.width,m=u.travellerWidth,b=u.onChange,v=u.gap,g=u.data,w={startX:this.state.startX,endX:this.state.endX},y=a.pageX-i;y>0?y=Math.min(y,f+p-m-d):y<0&&(y=Math.max(y,f-d)),w[o]=d+y;var j=this.getIndex(w),N=j.startIndex,S=j.endIndex,E=function(){var P=g.length-1;return o==="startX"&&(l>c?N%v===0:S%v===0)||l<c&&S===P||o==="endX"&&(l>c?S%v===0:N%v===0)||l>c&&S===P};this.setState(jc(jc({},o,d+y),"brushMoveStartX",a.pageX),function(){b&&E()&&b(j)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],f=l.indexOf(u);if(f!==-1){var p=f+a;if(!(p===-1||p>=l.length)){var m=l[p];s==="startX"&&m>=d||s==="endX"&&m<=c||this.setState(jc({},s,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return ft.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,d=a.children,u=a.padding,f=I.Children.only(d);return f?ft.cloneElement(f,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,p=c.traveller,m=c.ariaLabel,b=c.data,v=c.startIndex,g=c.endIndex,w=Math.max(a,this.props.x),y=ej(ej({},$n(this.props,!1)),{},{x:w,y:d,width:u,height:f}),j=m||"Min value: ".concat((i=b[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[g])===null||o===void 0?void 0:o.name);return ft.createElement(Is,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(a,s)+d,f=Math.max(Math.abs(s-a)-d,0);return ft.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,u=this.state,f=u.startX,p=u.endX,m=5,b={pointerEvents:"none",fill:d};return ft.createElement(Is,{className:"recharts-brush-texts"},ft.createElement(C1,Z1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:o+l/2},b),this.getTextOfTick(s)),ft.createElement(C1,Z1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+m,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,d=a.width,u=a.height,f=a.alwaysShowText,p=this.state,m=p.startX,b=p.endX,v=p.isTextActive,g=p.isSlideMoving,w=p.isTravellerMoving,y=p.isTravellerFocused;if(!s||!s.length||!ur(l)||!ur(c)||!ur(d)||!ur(u)||d<=0||u<=0)return null;var j=la("recharts-brush",i),N=ft.Children.count(o)===1,S=WZ("userSelect","none");return ft.createElement(Is,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,b),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(b,"endX"),(v||g||w||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(i+l/2)-1;return ft.createElement(ft.Fragment,null,ft.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),ft.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),ft.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return ft.isValidElement(a)?i=ft.cloneElement(a,s):En(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,u=a.startIndex,f=a.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return ej({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?ZZ({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var p=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])})(I.PureComponent);jc(Hm,"displayName","Brush");jc(Hm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var tj,yP;function eee(){if(yP)return tj;yP=1;var e=jS();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return tj=t,tj}var rj,wP;function tee(){if(wP)return rj;wP=1;var e=vL(),t=E0(),r=eee(),a=ic(),s=Yb();function i(o,l,c){var d=a(o)?e:r;return c&&s(o,l,c)&&(l=void 0),d(o,t(l,3))}return rj=i,rj}var ree=tee();const nee=Ta(ree);var qu=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},nj,NP;function aee(){if(NP)return nj;NP=1;var e=FL();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return nj=t,nj}var aj,jP;function see(){if(jP)return aj;jP=1;var e=aee(),t=DL(),r=E0();function a(s,i){var o={};return i=r(i,3),t(s,function(l,c,d){e(o,c,i(l,c,d))}),o}return aj=a,aj}var iee=see();const oee=Ta(iee);var sj,kP;function lee(){if(kP)return sj;kP=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return sj=e,sj}var ij,SP;function cee(){if(SP)return ij;SP=1;var e=jS();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return ij=t,ij}var oj,_P;function dee(){if(_P)return oj;_P=1;var e=lee(),t=cee(),r=E0(),a=ic(),s=Yb();function i(o,l,c){var d=a(o)?e:t;return c&&s(o,l,c)&&(l=void 0),d(o,r(l,3))}return oj=i,oj}var uee=dee();const d7=Ta(uee);var fee=["x","y"];function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ek.apply(this,arguments)}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Bp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(a){hee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hee(e,t,r){return t=mee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mee(e){var t=pee(e,"string");return Qx(t)=="symbol"?t:t+""}function pee(e,t){if(Qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xee(e,t){if(e==null)return{};var r=gee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function gee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function vee(e,t){var r=e.x,a=e.y,s=xee(e,fee),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),f="".concat(t.width||s.width),p=parseInt(f,10);return Bp(Bp(Bp(Bp(Bp({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function AP(e){return ft.createElement(TZ,ek({shapeType:"rectangle",propTransformer:vee,activeClassName:"recharts-active-bar"},e))}var bee=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=ur(a)||Sq(a);return i?t(a,s):(i||_h(),r)}},yee=["value","background"],u7;function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function wee(e,t){if(e==null)return{};var r=Nee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Nee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function tb(){return tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tb.apply(this,arguments)}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(a){h0(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,h7(a.key),a)}}function kee(e,t,r){return t&&TP(e.prototype,t),r&&TP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function See(e,t,r){return t=rb(t),_ee(e,f7()?Reflect.construct(t,r||[],rb(e).constructor):t.apply(e,r))}function _ee(e,t){if(t&&(Wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cee(e)}function Cee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f7=function(){return!!e})()}function rb(e){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(e)}function Aee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tk(e,t)}function h0(e,t,r){return t=h7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h7(e){var t=Eee(e,"string");return Wm(t)=="symbol"?t:t+""}function Eee(e,t){if(Wm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cg=(function(e){function t(){var r;jee(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=See(this,t,[].concat(s)),h0(r,"state",{isAnimationFinished:!1}),h0(r,"id",wg("recharts-bar-")),h0(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),h0(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Aee(t,e),kee(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=$n(this.props,!1);return a&&a.map(function(f,p){var m=p===c,b=m?d:o,v=Ni(Ni(Ni({},u),f),{},{isActive:m,option:b,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ft.createElement(Is,tb({className:"recharts-bar-rectangle"},x1(s.props,f,p),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(p)}),ft.createElement(AP,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,p=this.state.prevData;return ft.createElement(If,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var b=m.t,v=i.map(function(g,w){var y=p&&p[w];if(y){var j=cd(y.x,g.x),N=cd(y.y,g.y),S=cd(y.width,g.width),E=cd(y.height,g.height);return Ni(Ni({},g),{},{x:j(b),y:N(b),width:S(b),height:E(b)})}if(o==="horizontal"){var A=cd(0,g.height),P=A(b);return Ni(Ni({},g),{},{y:g.y+g.height-P,height:P})}var D=cd(0,g.width),R=D(b);return Ni(Ni({},g),{},{width:R})});return ft.createElement(Is,null,a.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Ix(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=$n(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,p=wee(d,yee);if(!f)return null;var m=Ni(Ni(Ni(Ni(Ni({},p),{},{fill:"#eee"},f),c),x1(a.props,d,u)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ft.createElement(AP,tb({key:"background-bar-".concat(u),option:a.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=su(u,iy);if(!f)return null;var p=d==="vertical"?o[0].height/2:o[0].width/2,m=function(g,w){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:Pc(g,w)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ft.createElement(Is,b,f.map(function(v){return ft.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,u=a.top,f=a.width,p=a.height,m=a.isAnimationActive,b=a.background,v=a.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,w=la("recharts-bar",o),y=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=y||j,S=zn(v)?this.id:v;return ft.createElement(Is,{className:w},y||j?ft.createElement("defs",null,ft.createElement("clipPath",{id:"clipPath-".concat(S)},ft.createElement("rect",{x:y?d:d-f/2,y:j?u:u-p/2,width:y?f:f*2,height:j?p:p*2}))):null,ft.createElement(Is,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,S),(!m||g)&&b0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(I.PureComponent);u7=Cg;h0(Cg,"displayName","Bar");h0(Cg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!dp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});h0(Cg,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,p=e.offset,m=HX(a,r);if(!m)return null;var b=t.layout,v=r.type.defaultProps,g=v!==void 0?Ni(Ni({},v),r.props):r.props,w=g.dataKey,y=g.children,j=g.minPointSize,N=b==="horizontal"?o:i,S=d?N.scale.domain():null,E=QX({numericAxis:N}),A=su(y,zL),P=f.map(function(D,R){var T,_,B,U,H,Y;d?T=WX(d[u+R],S):(T=Pc(D,w),Array.isArray(T)||(T=[E,T]));var J=bee(j,u7.defaultProps.minPointSize)(T[1],R);if(b==="horizontal"){var re,X=[o.scale(T[0]),o.scale(T[1])],ee=X[0],W=X[1];_=xO({axis:i,ticks:l,bandSize:s,offset:m.offset,entry:D,index:R}),B=(re=W??ee)!==null&&re!==void 0?re:void 0,U=m.size;var O=ee-W;if(H=Number.isNaN(O)?0:O,Y={x:_,y:o.y,width:U,height:o.height},Math.abs(J)>0&&Math.abs(H)<Math.abs(J)){var z=Zd(H||J)*(Math.abs(J)-Math.abs(H));B-=z,H+=z}}else{var V=[i.scale(T[0]),i.scale(T[1])],q=V[0],K=V[1];if(_=q,B=xO({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:D,index:R}),U=K-q,H=m.size,Y={x:i.x,y:B,width:i.width,height:H},Math.abs(J)>0&&Math.abs(U)<Math.abs(J)){var se=Zd(U||J)*(Math.abs(J)-Math.abs(U));U+=se}}return Ni(Ni(Ni({},D),{},{x:_,y:B,width:U,height:H,value:d?T:T[1],payload:D,background:Y},A&&A[R]&&A[R].props),{},{tooltipPayload:[XF(r,D)],tooltipPosition:{x:_+U/2,y:B+H/2}})});return Ni({data:P,layout:b},p)});function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function Tee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,m7(a.key),a)}}function Oee(e,t,r){return t&&OP(e.prototype,t),r&&OP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Jd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(a){cy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cy(e,t,r){return t=m7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m7(e){var t=Pee(e,"string");return Zx(t)=="symbol"?t:t+""}function Pee(e,t){if(Zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Zx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iee=function(t,r,a,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},p=!!kc(d,Cg);return u.reduce(function(m,b){var v=r[b],g=v.orientation,w=v.domain,y=v.padding,j=y===void 0?{}:y,N=v.mirror,S=v.reversed,E="".concat(g).concat(N?"Mirror":""),A,P,D,R,T;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var _=w[1]-w[0],B=1/0,U=v.categoricalDomain.sort(Aq);if(U.forEach(function(V,q){q>0&&(B=Math.min((V||0)-(U[q-1]||0),B))}),Number.isFinite(B)){var H=B/_,Y=v.layout==="vertical"?a.height:a.width;if(v.padding==="gap"&&(A=H*Y/2),v.padding==="no-gap"){var J=kh(t.barCategoryGap,H*Y),re=H*Y/2;A=re-J-(re-J)/Y*J}}}s==="xAxis"?P=[a.left+(j.left||0)+(A||0),a.left+a.width-(j.right||0)-(A||0)]:s==="yAxis"?P=c==="horizontal"?[a.top+a.height-(j.bottom||0),a.top+(j.top||0)]:[a.top+(j.top||0)+(A||0),a.top+a.height-(j.bottom||0)-(A||0)]:P=v.range,S&&(P=[P[1],P[0]]);var X=$X(v,i,p),ee=X.scale,W=X.realScaleType;ee.domain(w).range(P),zX(ee);var O=JX(ee,Jd(Jd({},v),{},{realScaleType:W}));s==="xAxis"?(T=g==="top"&&!N||g==="bottom"&&N,D=a.left,R=f[E]-T*v.height):s==="yAxis"&&(T=g==="left"&&!N||g==="right"&&N,D=f[E]-T*v.width,R=a.top);var z=Jd(Jd(Jd({},v),O),{},{realScaleType:W,x:D,y:R,scale:ee,width:s==="xAxis"?a.width:v.width,height:s==="yAxis"?a.height:v.height});return z.bandSize=$1(z,O),!v.hide&&s==="xAxis"?f[E]+=(T?-1:1)*z.height:v.hide||(f[E]+=(T?-1:1)*z.width),Jd(Jd({},m),{},cy({},b,z))},{})},p7=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},Dee=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return p7({x:r,y:a},{x:s,y:i})},x7=(function(){function e(t){Tee(this,e),this.scale=t}return Oee(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();cy(x7,"EPS",1e-4);var ZS=function(t){var r=Object.keys(t).reduce(function(a,s){return Jd(Jd({},a),{},cy({},s,x7.create(t[s])))},{});return Jd(Jd({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return oee(s,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return d7(s,function(i,o){return r[o].isInRange(i)})}})};function Lee(e){return(e%180+180)%180}var Fee=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Lee(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},lj,IP;function Mee(){if(IP)return lj;IP=1;var e=E0(),t=Ng(),r=Kb();function a(s){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(f){return d(c[f],f,c)}}var u=s(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return lj=a,lj}var cj,DP;function Ree(){if(DP)return cj;DP=1;var e=i7();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return cj=t,cj}var dj,LP;function Bee(){if(LP)return dj;LP=1;var e=EL(),t=E0(),r=Ree(),a=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=a(c+d,0)),e(i,t(o,3),d)}return dj=s,dj}var uj,FP;function Uee(){if(FP)return uj;FP=1;var e=Mee(),t=Bee(),r=e(t);return uj=r,uj}var qee=Uee();const $ee=Ta(qee);var zee=W8();const Hee=Ta(zee);var Wee=Hee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),e3=I.createContext(void 0),t3=I.createContext(void 0),g7=I.createContext(void 0),v7=I.createContext({}),b7=I.createContext(void 0),y7=I.createContext(0),w7=I.createContext(0),MP=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Wee(i);return ft.createElement(e3.Provider,{value:a},ft.createElement(t3.Provider,{value:s},ft.createElement(v7.Provider,{value:i},ft.createElement(g7.Provider,{value:u},ft.createElement(b7.Provider,{value:o},ft.createElement(y7.Provider,{value:d},ft.createElement(w7.Provider,{value:c},l)))))))},Vee=function(){return I.useContext(b7)},N7=function(t){var r=I.useContext(e3);r==null&&_h();var a=r[t];return a==null&&_h(),a},Gee=function(){var t=I.useContext(e3);return u0(t)},Kee=function(){var t=I.useContext(t3),r=$ee(t,function(a){return d7(a.domain,Number.isFinite)});return r||u0(t)},j7=function(t){var r=I.useContext(t3);r==null&&_h();var a=r[t];return a==null&&_h(),a},Xee=function(){var t=I.useContext(g7);return t},Yee=function(){return I.useContext(v7)},r3=function(){return I.useContext(w7)},n3=function(){return I.useContext(y7)};function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function Jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,S7(a.key),a)}}function Zee(e,t,r){return t&&Qee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ete(e,t,r){return t=nb(t),tte(e,k7()?Reflect.construct(t,r||[],nb(e).constructor):t.apply(e,r))}function tte(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rte(e)}function rte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k7=function(){return!!e})()}function nb(e){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nb(e)}function nte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},rk(e,t)}function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function BP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(a){a3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function a3(e,t,r){return t=S7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S7(e){var t=ate(e,"string");return Vm(t)=="symbol"?t:t+""}function ate(e,t){if(Vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ste(e,t){return cte(e)||lte(e,t)||ote(e,t)||ite()}function ite(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ote(e,t){if(e){if(typeof e=="string")return UP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UP(e,t)}}function UP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function lte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function cte(e){if(Array.isArray(e))return e}function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nk.apply(this,arguments)}var dte=function(t,r){var a;return ft.isValidElement(t)?a=ft.cloneElement(t,r):En(t)?a=t(r):a=ft.createElement("line",nk({},r,{className:"recharts-reference-line-line"})),a},ute=function(t,r,a,s,i,o,l,c,d){var u=i.x,f=i.y,p=i.width,m=i.height;if(a){var b=d.y,v=t.y.apply(b,{position:o});if(qu(d,"discard")&&!t.y.isInRange(v))return null;var g=[{x:u+p,y:v},{x:u,y:v}];return c==="left"?g.reverse():g}if(r){var w=d.x,y=t.x.apply(w,{position:o});if(qu(d,"discard")&&!t.x.isInRange(y))return null;var j=[{x:y,y:f+m},{x:y,y:f}];return l==="top"?j.reverse():j}if(s){var N=d.segment,S=N.map(function(E){return t.apply(E,{position:o})});return qu(d,"discard")&&nee(S,function(E){return!t.isInRange(E)})?null:S}return null};function fte(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Vee(),u=N7(s),f=j7(i),p=Xee();if(!d||!p)return null;Sf(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=ZS({x:u.scale,y:f.scale}),b=$i(t),v=$i(r),g=a&&a.length===2,w=ute(m,b,v,g,p,e.position,u.orientation,f.orientation,e);if(!w)return null;var y=ste(w,2),j=y[0],N=j.x,S=j.y,E=y[1],A=E.x,P=E.y,D=qu(e,"hidden")?"url(#".concat(d,")"):void 0,R=BP(BP({clipPath:D},$n(e,!0)),{},{x1:N,y1:S,x2:A,y2:P});return ft.createElement(Is,{className:la("recharts-reference-line",l)},dte(o,R),il.renderCallByParent(e,Dee({x1:N,y1:S,x2:A,y2:P})))}var s3=(function(e){function t(){return Jee(this,t),ete(this,t,arguments)}return nte(t,e),Zee(t,[{key:"render",value:function(){return ft.createElement(fte,this.props)}}])})(ft.Component);a3(s3,"displayName","ReferenceLine");a3(s3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ak.apply(this,arguments)}function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(a){dy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,C7(a.key),a)}}function pte(e,t,r){return t&&mte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xte(e,t,r){return t=ab(t),gte(e,_7()?Reflect.construct(t,r||[],ab(e).constructor):t.apply(e,r))}function gte(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vte(e)}function vte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_7=function(){return!!e})()}function ab(e){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ab(e)}function bte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sk(e,t)}function dy(e,t,r){return t=C7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C7(e){var t=yte(e,"string");return Gm(t)=="symbol"?t:t+""}function yte(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wte=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=ZS({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return qu(t,"discard")&&!o.isInRange(l)?null:l},uy=(function(e){function t(){return hte(this,t),xte(this,t,arguments)}return bte(t,e),pte(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=$i(s),u=$i(i);if(Sf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=wte(this.props);if(!f)return null;var p=f.x,m=f.y,b=this.props,v=b.shape,g=b.className,w=qu(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=$P($P({clipPath:w},$n(this.props,!0)),{},{cx:p,cy:m});return ft.createElement(Is,{className:la("recharts-reference-dot",g)},t.renderDot(v,y),il.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])})(ft.Component);dy(uy,"displayName","ReferenceDot");dy(uy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});dy(uy,"renderDot",function(e,t){var r;return ft.isValidElement(e)?r=ft.cloneElement(e,t):En(e)?r=e(t):r=ft.createElement(QS,ak({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ik.apply(this,arguments)}function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function zP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function HP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(r),!0).forEach(function(a){fy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,E7(a.key),a)}}function kte(e,t,r){return t&&jte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ste(e,t,r){return t=sb(t),_te(e,A7()?Reflect.construct(t,r||[],sb(e).constructor):t.apply(e,r))}function _te(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cte(e)}function Cte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A7=function(){return!!e})()}function sb(e){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sb(e)}function Ate(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ok(e,t)}function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ok(e,t)}function fy(e,t,r){return t=E7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E7(e){var t=Ete(e,"string");return Km(t)=="symbol"?t:t+""}function Ete(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Km(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tte=function(t,r,a,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var p=ZS({x:u.scale,y:f.scale}),m={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:a?p.y.apply(c,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(d,{position:"end"}):p.y.rangeMax};return qu(i,"discard")&&(!p.isInRange(m)||!p.isInRange(b))?null:p7(m,b)},hy=(function(e){function t(){return Nte(this,t),Ste(this,t,arguments)}return Ate(t,e),kte(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,u=a.clipPathId;Sf(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=$i(s),p=$i(i),m=$i(o),b=$i(l),v=this.props.shape;if(!f&&!p&&!m&&!b&&!v)return null;var g=Tte(f,p,m,b,this.props);if(!g&&!v)return null;var w=qu(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ft.createElement(Is,{className:la("recharts-reference-area",c)},t.renderRect(v,HP(HP({clipPath:w},$n(this.props,!0)),g)),il.renderCallByParent(this.props,g))}}])})(ft.Component);fy(hy,"displayName","ReferenceArea");fy(hy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});fy(hy,"renderRect",function(e,t){var r;return ft.isValidElement(e)?r=ft.cloneElement(e,t):En(e)?r=e(t):r=ft.createElement(JS,ik({},t,{className:"recharts-reference-area-rect"})),r});function T7(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function Ote(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Fee(a,r)}function Pte(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function ib(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function Ite(e,t){return T7(e,t+1)}function Dte(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var b=a?.[c];if(b===void 0)return{v:T7(a,d)};var v=c,g,w=function(){return g===void 0&&(g=r(b,v)),g},y=b.coordinate,j=c===0||ib(e,y,w,u,l);j||(c=0,u=o,d+=1),j&&(u=y+e*(w()/2+s),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(a){Lte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Lte(e,t,r){return t=Fte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fte(e){var t=Mte(e,"string");return eg(t)=="symbol"?t:t+""}function Mte(e,t){if(eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rte(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(p){var m=i[p],b,v=function(){return b===void 0&&(b=r(m,p)),b};if(p===o-1){var g=e*(m.coordinate+e*v()/2-c);i[p]=m=nl(nl({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate})}else i[p]=m=nl(nl({},m),{},{tickCoord:m.coordinate});var w=ib(e,m.tickCoord,v,l,c);w&&(c=m.tickCoord-e*(v()/2+s),i[p]=nl(nl({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Bte(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=a[l-1],f=r(u,l-1),p=e*(u.coordinate+e*f/2-d);o[l-1]=u=nl(nl({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate});var m=ib(e,u.tickCoord,function(){return f},c,d);m&&(d=u.tickCoord-e*(f/2+s),o[l-1]=nl(nl({},u),{},{isShow:!0}))}for(var b=i?l-1:l,v=function(y){var j=o[y],N,S=function(){return N===void 0&&(N=r(j,y)),N};if(y===0){var E=e*(j.coordinate-e*S()/2-c);o[y]=j=nl(nl({},j),{},{tickCoord:E<0?j.coordinate-E*e:j.coordinate})}else o[y]=j=nl(nl({},j),{},{tickCoord:j.coordinate});var A=ib(e,j.tickCoord,S,c,d);A&&(c=j.tickCoord+e*(S()/2+s),o[y]=nl(nl({},j),{},{isShow:!0}))},g=0;g<b;g++)v(g);return o}function i3(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(ur(c)||dp.isSsr)return Ite(s,typeof c=="number"&&ur(c)?c:0);var p=[],m=l==="top"||l==="bottom"?"width":"height",b=u&&m==="width"?ax(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,N){var S=En(d)?d(j.value,N):j.value;return m==="width"?Ote(ax(S,{fontSize:t,letterSpacing:r}),b,f):ax(S,{fontSize:t,letterSpacing:r})[m]},g=s.length>=2?Zd(s[1].coordinate-s[0].coordinate):1,w=Pte(i,g,m);return c==="equidistantPreserveStart"?Dte(g,w,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Bte(g,w,v,s,o,c==="preserveStartEnd"):p=Rte(g,w,v,s,o),p.filter(function(y){return y.isShow}))}var Ute=["viewBox"],qte=["viewBox"],$te=["ticks"];function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gm.apply(this,arguments)}function VP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(r),!0).forEach(function(a){o3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fj(e,t){if(e==null)return{};var r=zte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Hte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P7(a.key),a)}}function Wte(e,t,r){return t&&GP(e.prototype,t),r&&GP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vte(e,t,r){return t=ob(t),Gte(e,O7()?Reflect.construct(t,r||[],ob(e).constructor):t.apply(e,r))}function Gte(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kte(e)}function Kte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O7=function(){return!!e})()}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ob(e)}function Xte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lk(e,t)}function lk(e,t){return lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lk(e,t)}function o3(e,t,r){return t=P7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7(e){var t=Yte(e,"string");return Xm(t)=="symbol"?t:t+""}function Yte(e,t){if(Xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mp=(function(e){function t(r){var a;return Hte(this,t),a=Vte(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return Xte(t,e),Wte(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=fj(a,Ute),l=this.props,c=l.viewBox,d=fj(l,qte);return!wm(i,c)||!wm(o,d)||!wm(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,f=s.mirror,p=s.tickMargin,m,b,v,g,w,y,j=f?-1:1,N=a.tickSize||u,S=ur(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":m=b=a.coordinate,g=o+ +!f*c,v=g-j*N,y=v-j*p,w=S;break;case"left":v=g=a.coordinate,b=i+ +!f*l,m=b-j*N,w=m-j*p,y=S;break;case"right":v=g=a.coordinate,b=i+ +f*l,m=b+j*N,w=m+j*p,y=S;break;default:m=b=a.coordinate,g=o+ +f*c,v=g+j*N,y=v+j*p,w=S;break}return{line:{x1:m,y1:v,x2:b,y2:g},tick:{x:w,y}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,u=a.axisLine,f=Fi(Fi(Fi({},$n(this.props,!1)),$n(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!d||c==="bottom"&&d);f=Fi(Fi({},f),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);f=Fi(Fi({},f),{},{x1:s+m*o,y1:i,x2:s+m*o,y2:i+l})}return ft.createElement("line",gm({},f,{className:la("recharts-cartesian-axis-line",md(u,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,p=l.unit,m=i3(Fi(Fi({},this.props),{},{ticks:a}),s,i),b=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=$n(this.props,!1),w=$n(u,!1),y=Fi(Fi({},g),{},{fill:"none"},$n(c,!1)),j=m.map(function(N,S){var E=o.getTickLineCoord(N),A=E.line,P=E.tick,D=Fi(Fi(Fi(Fi({textAnchor:b,verticalAnchor:v},g),{},{stroke:"none",fill:d},w),P),{},{index:S,payload:N,visibleTicksCount:m.length,tickFormatter:f});return ft.createElement(Is,gm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},x1(o.props,N,S)),c&&ft.createElement("line",gm({},y,A,{className:la("recharts-cartesian-axis-tick-line",md(c,"className"))})),u&&t.renderTickItem(u,D,"".concat(En(f)?f(N.value,S):N.value).concat(p||"")))});return ft.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var f=this.props,p=f.ticks,m=fj(f,$te),b=p;return En(c)&&(b=p&&p.length>0?c(this.props):c(m)),o<=0||l<=0||!b||!b.length?null:ft.createElement(Is,{className:la("recharts-cartesian-axis",d),ref:function(g){a.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),il.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=la(s.className,"recharts-cartesian-axis-tick-value");return ft.isValidElement(a)?o=ft.cloneElement(a,Fi(Fi({},s),{},{className:l})):En(a)?o=a(Fi(Fi({},s),{},{className:l})):o=ft.createElement(C1,gm({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(I.Component);o3(mp,"displayName","CartesianAxis");o3(mp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Jte=["x1","y1","x2","y2","key"],Qte=["offset"];function Ch(e){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(a){Zte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zte(e,t,r){return t=ere(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ere(e){var t=tre(e,"string");return Ch(t)=="symbol"?t:t+""}function tre(e,t){if(Ch(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ch(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ch.apply(this,arguments)}function XP(e,t){if(e==null)return{};var r=rre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function rre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var nre=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ft.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function I7(e,t){var r;if(ft.isValidElement(e))r=ft.cloneElement(e,t);else if(En(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=XP(t,Jte),d=$n(c,!1);d.offset;var u=XP(d,Qte);r=ft.createElement("line",ch({},u,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function are(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=ol(ol({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return I7(s,d)});return ft.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function sre(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=ol(ol({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return I7(s,d)});return ft.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function ire(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,m){return p-m});s!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var b=!u[m+1],v=b?s+o-p:u[m+1]-p;if(v<=0)return null;var g=m%t.length;return ft.createElement("rect",{key:"react-".concat(m),y:p,x:a,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ft.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function ore(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!a||!a.length)return null;var u=d.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var b=!u[m+1],v=b?i+l-p:u[m+1]-p;if(v<=0)return null;var g=m%a.length;return ft.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:v,height:c,stroke:"none",fill:a[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ft.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var lre=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return GF(i3(ol(ol(ol({},mp.defaultProps),a),{},{ticks:vf(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},cre=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return GF(i3(ol(ol(ol({},mp.defaultProps),a),{},{ticks:vf(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},om={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function D7(e){var t,r,a,s,i,o,l=r3(),c=n3(),d=Yee(),u=ol(ol({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:om.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:om.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:om.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:om.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:om.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:om.verticalFill,x:ur(e.x)?e.x:d.left,y:ur(e.y)?e.y:d.top,width:ur(e.width)?e.width:d.width,height:ur(e.height)?e.height:d.height}),f=u.x,p=u.y,m=u.width,b=u.height,v=u.syncWithTicks,g=u.horizontalValues,w=u.verticalValues,y=Gee(),j=Kee();if(!ur(m)||m<=0||!ur(b)||b<=0||!ur(f)||f!==+f||!ur(p)||p!==+p)return null;var N=u.verticalCoordinatesGenerator||lre,S=u.horizontalCoordinatesGenerator||cre,E=u.horizontalPoints,A=u.verticalPoints;if((!E||!E.length)&&En(S)){var P=g&&g.length,D=S({yAxis:j?ol(ol({},j),{},{ticks:P?g:j.ticks}):void 0,width:l,height:c,offset:d},P?!0:v);Sf(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ch(D),"]")),Array.isArray(D)&&(E=D)}if((!A||!A.length)&&En(N)){var R=w&&w.length,T=N({xAxis:y?ol(ol({},y),{},{ticks:R?w:y.ticks}):void 0,width:l,height:c,offset:d},R?!0:v);Sf(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ch(T),"]")),Array.isArray(T)&&(A=T)}return ft.createElement("g",{className:"recharts-cartesian-grid"},ft.createElement(nre,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ft.createElement(are,ch({},u,{offset:d,horizontalPoints:E,xAxis:y,yAxis:j})),ft.createElement(sre,ch({},u,{offset:d,verticalPoints:A,xAxis:y,yAxis:j})),ft.createElement(ire,ch({},u,{horizontalPoints:E})),ft.createElement(ore,ch({},u,{verticalPoints:A})))}D7.displayName="CartesianGrid";var dre=["layout","type","stroke","connectNulls","isRange","ref"],ure=["key"],L7;function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function F7(e,t){if(e==null)return{};var r=fre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function dh(){return dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dh.apply(this,arguments)}function YP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function o0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(r),!0).forEach(function(a){Lu(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,R7(a.key),a)}}function mre(e,t,r){return t&&JP(e.prototype,t),r&&JP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pre(e,t,r){return t=lb(t),xre(e,M7()?Reflect.construct(t,r||[],lb(e).constructor):t.apply(e,r))}function xre(e,t){if(t&&(Ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gre(e)}function gre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M7=function(){return!!e})()}function lb(e){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(e)}function vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}function ck(e,t){return ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ck(e,t)}function Lu(e,t,r){return t=R7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7(e){var t=bre(e,"string");return Ym(t)=="symbol"?t:t+""}function bre(e,t){if(Ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var I0=(function(e){function t(){var r;hre(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=pre(this,t,[].concat(s)),Lu(r,"state",{isAnimationFinished:!0}),Lu(r,"id",wg("recharts-area-")),Lu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),En(o)&&o()}),Lu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),En(o)&&o()}),r}return vre(t,e),mre(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,f=c.dataKey,p=$n(this.props,!1),m=$n(d,!0),b=u.map(function(g,w){var y=o0(o0(o0({key:"dot-".concat(w),r:3},p),m),{},{index:w,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return t.renderDotItem(d,y)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ft.createElement(Is,dh({className:"recharts-area-dots"},v),b)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=a*Math.abs(c-d),f=f0(o.map(function(p){return p.y||0}));return ur(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(f0(i.map(function(p){return p.y||0})),f)),ur(f)?ft.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=a*Math.abs(c-d),f=f0(o.map(function(p){return p.x||0}));return ur(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(f0(i.map(function(p){return p.x||0})),f)),ur(f)?ft.createElement("rect",{x:0,y:c<d?c:c-u,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,f=l.connectNulls,p=l.isRange;l.ref;var m=F7(l,dre);return ft.createElement(Is,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ft.createElement(ox,dh({},$n(m,!0),{points:a,connectNulls:f,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ft.createElement(ox,dh({},$n(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:a})),u!=="none"&&p&&ft.createElement(ox,dh({},$n(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,p=o.animationEasing,m=o.animationId,b=this.state,v=b.prevPoints,g=b.prevBaseLine;return ft.createElement(If,{begin:u,duration:f,isActive:d,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var y=w.t;if(v){var j=v.length/l.length,N=l.map(function(P,D){var R=Math.floor(D*j);if(v[R]){var T=v[R],_=cd(T.x,P.x),B=cd(T.y,P.y);return o0(o0({},P),{},{x:_(y),y:B(y)})}return P}),S;if(ur(c)&&typeof c=="number"){var E=cd(g,c);S=E(y)}else if(zn(c)||lp(c)){var A=cd(g,0);S=A(y)}else S=c.map(function(P,D){var R=Math.floor(D*j);if(g[R]){var T=g[R],_=cd(T.x,P.x),B=cd(T.y,P.y);return o0(o0({},P),{},{x:_(y),y:B(y)})}return P});return i.renderAreaStatically(N,S,a,s)}return ft.createElement(Is,null,ft.createElement("defs",null,ft.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),ft.createElement(Is,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,p=d.totalLength;return c&&o&&o.length&&(!u&&p>0||!Ix(u,o)||!Ix(f,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,f=s.xAxis,p=s.yAxis,m=s.width,b=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var w=this.state.isAnimationFinished,y=l.length===1,j=la("recharts-area",c),N=f&&f.allowDataOverflow,S=p&&p.allowDataOverflow,E=N||S,A=zn(g)?this.id:g,P=(a=$n(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},D=P.r,R=D===void 0?3:D,T=P.strokeWidth,_=T===void 0?2:T,B=Mq(o)?o:{},U=B.clipDot,H=U===void 0?!0:U,Y=R*2+_;return ft.createElement(Is,{className:j},N||S?ft.createElement("defs",null,ft.createElement("clipPath",{id:"clipPath-".concat(A)},ft.createElement("rect",{x:N?u:u-m/2,y:S?d:d-b/2,width:N?m:m*2,height:S?b:b*2})),!H&&ft.createElement("clipPath",{id:"clipPath-dots-".concat(A)},ft.createElement("rect",{x:u-Y/2,y:d-Y/2,width:m+Y,height:b+Y}))):null,y?null:this.renderArea(E,A),(o||y)&&this.renderDots(E,H,A),(!v||w)&&b0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(I.PureComponent);L7=I0;Lu(I0,"displayName","Area");Lu(I0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!dp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Lu(I0,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(ur(l)&&typeof l=="number")return l;var c=s==="horizontal"?a:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return l==="dataMin"?f:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Lu(I0,"getComposedData",function(e){var t=e.props,r=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,p=e.offset,m=t.layout,b=d&&d.length,v=L7.getBaseValue(t,r,a,s),g=m==="horizontal",w=!1,y=f.map(function(N,S){var E;b?E=d[u+S]:(E=Pc(N,c),Array.isArray(E)?w=!0:E=[v,E]);var A=E[1]==null||b&&Pc(N,c)==null;return g?{x:pO({axis:a,ticks:i,bandSize:l,entry:N,index:S}),y:A?null:s.scale(E[1]),value:E,payload:N}:{x:A?null:a.scale(E[1]),y:pO({axis:s,ticks:o,bandSize:l,entry:N,index:S}),value:E,payload:N}}),j;return b||w?j=y.map(function(N){var S=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:S!=null&&N.y!=null?s.scale(S):null}:{x:S!=null?a.scale(S):null,y:N.y}}):j=g?s.scale(v):a.scale(v),o0({points:y,baseLine:j,layout:m,isRange:w},p)});Lu(I0,"renderDotItem",function(e,t){var r;if(ft.isValidElement(e))r=ft.cloneElement(e,t);else if(En(e))r=e(t);else{var a=la("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=F7(t,ure);r=ft.createElement(QS,dh({},i,{key:s,className:a}))}return r});function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function yre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,q7(a.key),a)}}function Nre(e,t,r){return t&&wre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jre(e,t,r){return t=cb(t),kre(e,B7()?Reflect.construct(t,r||[],cb(e).constructor):t.apply(e,r))}function kre(e,t){if(t&&(Jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sre(e)}function Sre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B7=function(){return!!e})()}function cb(e){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cb(e)}function _re(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dk(e,t)}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},dk(e,t)}function U7(e,t,r){return t=q7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q7(e){var t=Cre(e,"string");return Jm(t)=="symbol"?t:t+""}function Cre(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uk.apply(this,arguments)}function Are(e){var t=e.xAxisId,r=r3(),a=n3(),s=N7(t);return s==null?null:I.createElement(mp,uk({},s,{className:la("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return vf(o,!0)}}))}var my=(function(e){function t(){return yre(this,t),jre(this,t,arguments)}return _re(t,e),Nre(t,[{key:"render",value:function(){return I.createElement(Are,this.props)}}])})(I.Component);U7(my,"displayName","XAxis");U7(my,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function Ere(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,H7(a.key),a)}}function Ore(e,t,r){return t&&Tre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pre(e,t,r){return t=db(t),Ire(e,$7()?Reflect.construct(t,r||[],db(e).constructor):t.apply(e,r))}function Ire(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dre(e)}function Dre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($7=function(){return!!e})()}function db(e){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},db(e)}function Lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fk(e,t)}function fk(e,t){return fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},fk(e,t)}function z7(e,t,r){return t=H7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H7(e){var t=Fre(e,"string");return Qm(t)=="symbol"?t:t+""}function Fre(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hk(){return hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hk.apply(this,arguments)}var Mre=function(t){var r=t.yAxisId,a=r3(),s=n3(),i=j7(r);return i==null?null:I.createElement(mp,hk({},i,{className:la("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return vf(l,!0)}}))},py=(function(e){function t(){return Ere(this,t),Pre(this,t,arguments)}return Lre(t,e),Ore(t,[{key:"render",value:function(){return I.createElement(Mre,this.props)}}])})(I.Component);z7(py,"displayName","YAxis");z7(py,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function QP(e){return qre(e)||Ure(e)||Bre(e)||Rre()}function Rre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(e,t){if(e){if(typeof e=="string")return mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mk(e,t)}}function Ure(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qre(e){if(Array.isArray(e))return mk(e)}function mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var pk=function(t,r,a,s,i){var o=su(t,s3),l=su(t,uy),c=[].concat(QP(o),QP(l)),d=su(t,hy),u="".concat(s,"Id"),f=s[0],p=r;if(c.length&&(p=c.reduce(function(v,g){if(g.props[u]===a&&qu(g.props,"extendDomain")&&ur(g.props[f])){var w=g.props[f];return[Math.min(v[0],w),Math.max(v[1],w)]}return v},p)),d.length){var m="".concat(f,"1"),b="".concat(f,"2");p=d.reduce(function(v,g){if(g.props[u]===a&&qu(g.props,"extendDomain")&&ur(g.props[m])&&ur(g.props[b])){var w=g.props[m],y=g.props[b];return[Math.min(v[0],w,y),Math.max(v[1],w,y)]}return v},p)}return i&&i.length&&(p=i.reduce(function(v,g){return ur(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},p)),p},hj={exports:{}},ZP;function $re(){return ZP||(ZP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,f||c,p),b=r?r+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,b=new Array(m);p<m;p++)b[p]=f[p].fn;return b},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,m,b){var v=r?r+d:d;if(!this._events[v])return!1;var g=this._events[v],w=arguments.length,y,j;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),w){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,p),!0;case 5:return g.fn.call(g.context,u,f,p,m),!0;case 6:return g.fn.call(g.context,u,f,p,m,b),!0}for(j=1,y=new Array(w-1);j<w;j++)y[j-1]=arguments[j];g.fn.apply(g.context,y)}else{var N=g.length,S;for(j=0;j<N;j++)switch(g[j].once&&this.removeListener(d,g[j].fn,void 0,!0),w){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,u);break;case 3:g[j].fn.call(g[j].context,u,f);break;case 4:g[j].fn.call(g[j].context,u,f,p);break;default:if(!y)for(S=1,y=new Array(w-1);S<w;S++)y[S-1]=arguments[S];g[j].fn.apply(g[j].context,y)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===u&&(!p||b.once)&&(!f||b.context===f)&&o(this,m);else{for(var v=0,g=[],w=b.length;v<w;v++)(b[v].fn!==u||p&&!b[v].once||f&&b[v].context!==f)&&g.push(b[v]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(hj)),hj.exports}var zre=$re();const Hre=Ta(zre);var mj=new Hre,pj="recharts.syncMouseEvents";function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function Wre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,W7(a.key),a)}}function Gre(e,t,r){return t&&Vre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xj(e,t,r){return t=W7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W7(e){var t=Kre(e,"string");return tg(t)=="symbol"?t:t+""}function Kre(e,t){if(tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xre=(function(){function e(){Wre(this,e),xj(this,"activeIndex",0),xj(this,"coordinateList",[]),xj(this,"layout","horizontal")}return Gre(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+d,p=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])})();function Yre(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&ur(a)&&ur(s))return!0}return!1}function Jre(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function V7(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=Do(t,r,a,s),l=Do(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function Qre(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,p=Do(l,c,d,f),m=Do(l,c,u,f);a=p.x,s=p.y,i=m.x,o=m.y}else return V7(t);return[{x:a,y:s},{x:i,y:o}]}function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Nv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(a){Zre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zre(e,t,r){return t=ene(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ene(e){var t=tne(e,"string");return rg(t)=="symbol"?t:t+""}function tne(e,t){if(rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(rg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rne(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,m=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!m||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var b,v=ox;if(p==="ScatterChart")b=o,v=nZ;else if(p==="BarChart")b=Jre(f,o,c,u),v=JS;else if(f==="radial"){var g=V7(o),w=g.cx,y=g.cy,j=g.radius,N=g.startAngle,S=g.endAngle;b={cx:w,cy:y,startAngle:N,endAngle:S,innerRadius:j,outerRadius:j},v=QF}else b={points:Qre(f,o,c)},v=ox;var E=Nv(Nv(Nv(Nv({stroke:"#ccc",pointerEvents:"none"},c),b),$n(m,!1)),{},{payload:l,payloadIndex:d,className:la("recharts-tooltip-cursor",m.className)});return I.isValidElement(m)?I.cloneElement(m,E):I.createElement(v,E)}var nne=["item"],ane=["children","className","width","height","style","compact","title","desc"];function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vm.apply(this,arguments)}function tI(e,t){return one(e)||ine(e,t)||K7(e,t)||sne()}function sne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ine(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function one(e){if(Array.isArray(e))return e}function rI(e,t){if(e==null)return{};var r=lne(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lne(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dne(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,X7(a.key),a)}}function une(e,t,r){return t&&dne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fne(e,t,r){return t=ub(t),hne(e,G7()?Reflect.construct(t,r||[],ub(e).constructor):t.apply(e,r))}function hne(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mne(e)}function mne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G7=function(){return!!e})()}function ub(e){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ub(e)}function pne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xk(e,t)}function xk(e,t){return xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},xk(e,t)}function ep(e){return vne(e)||gne(e)||K7(e)||xne()}function xne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K7(e,t){if(e){if(typeof e=="string")return gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gk(e,t)}}function gne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vne(e){if(Array.isArray(e))return gk(e)}function gk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function nI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(r),!0).forEach(function(a){nn(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nn(e,t,r){return t=X7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X7(e){var t=bne(e,"string");return Zm(t)=="symbol"?t:t+""}function bne(e,t){if(Zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Zm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yne={xAxis:["bottom","top"],yAxis:["left","right"]},wne={width:"100%",height:"100%"},Y7={x:0,y:0};function jv(e){return e}var Nne=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},jne=function(t,r,a,s){var i=r.find(function(u){return u&&u.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Ht(Ht(Ht({},s),Do(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return Ht(Ht(Ht({},s),Do(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return Y7},xy=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(ep(l),ep(d)):l},[]);return o.length>0?o:t&&t.length&&ur(s)&&ur(i)?t.slice(s,i+1):[]};function J7(e){return e==="number"?[0,"auto"]:void 0}var vk=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=xy(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;p=m1(m,o.dataKey,s)}else p=f&&f[a]||l[a];return p?[].concat(ep(c),[XF(d,p)]):c},[])},aI=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=Nne(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=FX(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,p=vk(t,r,u,f),m=jne(a,l,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},kne=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,p=t.stackOffset,m=VF(u,i);return a.reduce(function(b,v){var g,w=v.type.defaultProps!==void 0?Ht(Ht({},v.type.defaultProps),v.props):v.props,y=w.type,j=w.dataKey,N=w.allowDataOverflow,S=w.allowDuplicatedCategory,E=w.scale,A=w.ticks,P=w.includeHidden,D=w[o];if(b[D])return b;var R=xy(t.data,{graphicalItems:s.filter(function(O){var z,V=o in O.props?O.props[o]:(z=O.type.defaultProps)===null||z===void 0?void 0:z[o];return V===D}),dataStartIndex:c,dataEndIndex:d}),T=R.length,_,B,U;Yre(w.domain,N,y)&&(_=M4(w.domain,null,N),m&&(y==="number"||E!=="auto")&&(U=ix(R,j,"category")));var H=J7(y);if(!_||_.length===0){var Y,J=(Y=w.domain)!==null&&Y!==void 0?Y:H;if(j){if(_=ix(R,j,y),y==="category"&&m){var re=Cq(_);S&&re?(B=_,_=Q1(0,T)):S||(_=bO(J,_,v).reduce(function(O,z){return O.indexOf(z)>=0?O:[].concat(ep(O),[z])},[]))}else if(y==="category")S?_=_.filter(function(O){return O!==""&&!zn(O)}):_=bO(J,_,v).reduce(function(O,z){return O.indexOf(z)>=0||z===""||zn(z)?O:[].concat(ep(O),[z])},[]);else if(y==="number"){var X=qX(R,s.filter(function(O){var z,V,q=o in O.props?O.props[o]:(z=O.type.defaultProps)===null||z===void 0?void 0:z[o],K="hide"in O.props?O.props.hide:(V=O.type.defaultProps)===null||V===void 0?void 0:V.hide;return q===D&&(P||!K)}),j,i,u);X&&(_=X)}m&&(y==="number"||E!=="auto")&&(U=ix(R,j,"category"))}else m?_=Q1(0,T):l&&l[D]&&l[D].hasStack&&y==="number"?_=p==="expand"?[0,1]:KF(l[D].stackGroups,c,d):_=WF(R,s.filter(function(O){var z=o in O.props?O.props[o]:O.type.defaultProps[o],V="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return z===D&&(P||!V)}),y,u,!0);if(y==="number")_=pk(f,_,D,i,A),J&&(_=M4(J,_,N));else if(y==="category"&&J){var ee=J,W=_.every(function(O){return ee.indexOf(O)>=0});W&&(_=ee)}}return Ht(Ht({},b),{},nn({},D,Ht(Ht({},w),{},{axisType:i,domain:_,categoricalDomain:U,duplicateDomain:B,originalDomain:(g=w.domain)!==null&&g!==void 0?g:H,isCategorical:m,layout:u})))},{})},Sne=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,p=xy(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),m=p.length,b=VF(u,i),v=-1;return a.reduce(function(g,w){var y=w.type.defaultProps!==void 0?Ht(Ht({},w.type.defaultProps),w.props):w.props,j=y[o],N=J7("number");if(!g[j]){v++;var S;return b?S=Q1(0,m):l&&l[j]&&l[j].hasStack?(S=KF(l[j].stackGroups,c,d),S=pk(f,S,j,i)):(S=M4(N,WF(p,a.filter(function(E){var A,P,D=o in E.props?E.props[o]:(A=E.type.defaultProps)===null||A===void 0?void 0:A[o],R="hide"in E.props?E.props.hide:(P=E.type.defaultProps)===null||P===void 0?void 0:P.hide;return D===j&&!R}),"number",u),s.defaultProps.allowDataOverflow),S=pk(f,S,j,i)),Ht(Ht({},g),{},nn({},j,Ht(Ht({axisType:i},s.defaultProps),{},{hide:!0,orientation:md(yne,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:N,isCategorical:b,layout:u})))}return g},{})},_ne=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(s,"Id"),p=su(u,i),m={};return p&&p.length?m=kne(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=Sne(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},Cne=function(t){var r=u0(t),a=vf(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:kS(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:$1(r,a)}},sI=function(t){var r=t.children,a=t.defaultShowTooltip,s=kc(r,Hm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},Ane=function(t){return!t||!t.length?!1:t.some(function(r){var a=kf(r&&r.type);return a&&a.indexOf("Bar")>=0})},iI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ene=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=a.width,u=a.height,f=a.children,p=a.margin||{},m=kc(f,Hm),b=kc(f,Nm),v=Object.keys(c).reduce(function(S,E){var A=c[E],P=A.orientation;return!A.mirror&&!A.hide?Ht(Ht({},S),{},nn({},P,S[P]+A.width)):S},{left:p.left||0,right:p.right||0}),g=Object.keys(o).reduce(function(S,E){var A=o[E],P=A.orientation;return!A.mirror&&!A.hide?Ht(Ht({},S),{},nn({},P,md(S,"".concat(P))+A.height)):S},{top:p.top||0,bottom:p.bottom||0}),w=Ht(Ht({},g),v),y=w.bottom;m&&(w.bottom+=m.props.height||Hm.defaultProps.height),b&&r&&(w=BX(w,s,a,r));var j=d-w.left-w.right,N=u-w.top-w.bottom;return Ht(Ht({brushBottom:y},w),{},{width:Math.max(j,0),height:Math.max(N,0)})},Tne=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},One=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,p=function(w,y){var j=y.graphicalItems,N=y.stackGroups,S=y.offset,E=y.updateId,A=y.dataStartIndex,P=y.dataEndIndex,D=w.barSize,R=w.layout,T=w.barGap,_=w.barCategoryGap,B=w.maxBarSize,U=iI(R),H=U.numericAxisName,Y=U.cateAxisName,J=Ane(j),re=[];return j.forEach(function(X,ee){var W=xy(w.data,{graphicalItems:[X],dataStartIndex:A,dataEndIndex:P}),O=X.type.defaultProps!==void 0?Ht(Ht({},X.type.defaultProps),X.props):X.props,z=O.dataKey,V=O.maxBarSize,q=O["".concat(H,"Id")],K=O["".concat(Y,"Id")],se={},pe=c.reduce(function(de,Ae){var Qe=y["".concat(Ae.axisType,"Map")],ge=O["".concat(Ae.axisType,"Id")];Qe&&Qe[ge]||Ae.axisType==="zAxis"||_h();var fe=Qe[ge];return Ht(Ht({},de),{},nn(nn({},Ae.axisType,fe),"".concat(Ae.axisType,"Ticks"),vf(fe)))},se),ie=pe[Y],le=pe["".concat(Y,"Ticks")],$e=N&&N[q]&&N[q].hasStack&&ZX(X,N[q].stackGroups),he=kf(X.type).indexOf("Bar")>=0,Ue=$1(ie,le),Te=[],oe=J&&MX({barSize:D,stackGroups:N,totalSize:Tne(pe,Y)});if(he){var te,Pe,je=zn(V)?B:V,Ie=(te=(Pe=$1(ie,le,!0))!==null&&Pe!==void 0?Pe:je)!==null&&te!==void 0?te:0;Te=RX({barGap:T,barCategoryGap:_,bandSize:Ie!==Ue?Ie:Ue,sizeList:oe[K],maxBarSize:je}),Ie!==Ue&&(Te=Te.map(function(de){return Ht(Ht({},de),{},{position:Ht(Ht({},de.position),{},{offset:de.position.offset-Ie/2})})}))}var ue=X&&X.type&&X.type.getComposedData;ue&&re.push({props:Ht(Ht({},ue(Ht(Ht({},pe),{},{displayedData:W,props:w,dataKey:z,item:X,bandSize:Ue,barPosition:Te,offset:S,stackedData:$e,layout:R,dataStartIndex:A,dataEndIndex:P}))),{},nn(nn(nn({key:X.key||"item-".concat(ee)},H,pe[H]),Y,pe[Y]),"animationId",E)),childIndex:Uq(X,w.children),item:X})}),re},m=function(w,y){var j=w.props,N=w.dataStartIndex,S=w.dataEndIndex,E=w.updateId;if(!IC({props:j}))return null;var A=j.children,P=j.layout,D=j.stackOffset,R=j.data,T=j.reverseStackOrder,_=iI(P),B=_.numericAxisName,U=_.cateAxisName,H=su(A,a),Y=YX(R,H,"".concat(B,"Id"),"".concat(U,"Id"),D,T),J=c.reduce(function(O,z){var V="".concat(z.axisType,"Map");return Ht(Ht({},O),{},nn({},V,_ne(j,Ht(Ht({},z),{},{graphicalItems:H,stackGroups:z.axisType===B&&Y,dataStartIndex:N,dataEndIndex:S}))))},{}),re=Ene(Ht(Ht({},J),{},{props:j,graphicalItems:H}),y?.legendBBox);Object.keys(J).forEach(function(O){J[O]=u(j,J[O],re,O.replace("Map",""),r)});var X=J["".concat(U,"Map")],ee=Cne(X),W=p(j,Ht(Ht({},J),{},{dataStartIndex:N,dataEndIndex:S,updateId:E,graphicalItems:H,stackGroups:Y,offset:re}));return Ht(Ht({formattedGraphicalItems:W,graphicalItems:H,offset:re,stackGroups:Y},ee),J)},b=(function(g){function w(y){var j,N,S;return cne(this,w),S=fne(this,w,[y]),nn(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),nn(S,"accessibilityManager",new Xre),nn(S,"handleLegendBBoxUpdate",function(E){if(E){var A=S.state,P=A.dataStartIndex,D=A.dataEndIndex,R=A.updateId;S.setState(Ht({legendBBox:E},m({props:S.props,dataStartIndex:P,dataEndIndex:D,updateId:R},Ht(Ht({},S.state),{},{legendBBox:E}))))}}),nn(S,"handleReceiveSyncEvent",function(E,A,P){if(S.props.syncId===E){if(P===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(A)}}),nn(S,"handleBrushChange",function(E){var A=E.startIndex,P=E.endIndex;if(A!==S.state.dataStartIndex||P!==S.state.dataEndIndex){var D=S.state.updateId;S.setState(function(){return Ht({dataStartIndex:A,dataEndIndex:P},m({props:S.props,dataStartIndex:A,dataEndIndex:P,updateId:D},S.state))}),S.triggerSyncEvent({dataStartIndex:A,dataEndIndex:P})}}),nn(S,"handleMouseEnter",function(E){var A=S.getMouseInfo(E);if(A){var P=Ht(Ht({},A),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var D=S.props.onMouseEnter;En(D)&&D(P,E)}}),nn(S,"triggeredAfterMouseMove",function(E){var A=S.getMouseInfo(E),P=A?Ht(Ht({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var D=S.props.onMouseMove;En(D)&&D(P,E)}),nn(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),nn(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),nn(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),nn(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var P=S.props.onMouseLeave;En(P)&&P(A,E)}),nn(S,"handleOuterEvent",function(E){var A=Bq(E),P=md(S.props,"".concat(A));if(A&&En(P)){var D,R;/.*touch.*/i.test(A)?R=S.getMouseInfo(E.changedTouches[0]):R=S.getMouseInfo(E),P((D=R)!==null&&D!==void 0?D:{},E)}}),nn(S,"handleClick",function(E){var A=S.getMouseInfo(E);if(A){var P=Ht(Ht({},A),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var D=S.props.onClick;En(D)&&D(P,E)}}),nn(S,"handleMouseDown",function(E){var A=S.props.onMouseDown;if(En(A)){var P=S.getMouseInfo(E);A(P,E)}}),nn(S,"handleMouseUp",function(E){var A=S.props.onMouseUp;if(En(A)){var P=S.getMouseInfo(E);A(P,E)}}),nn(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),nn(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),nn(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),nn(S,"handleDoubleClick",function(E){var A=S.props.onDoubleClick;if(En(A)){var P=S.getMouseInfo(E);A(P,E)}}),nn(S,"handleContextMenu",function(E){var A=S.props.onContextMenu;if(En(A)){var P=S.getMouseInfo(E);A(P,E)}}),nn(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&mj.emit(pj,S.props.syncId,E,S.eventEmitterSymbol)}),nn(S,"applySyncEvent",function(E){var A=S.props,P=A.layout,D=A.syncMethod,R=S.state.updateId,T=E.dataStartIndex,_=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState(Ht({dataStartIndex:T,dataEndIndex:_},m({props:S.props,dataStartIndex:T,dataEndIndex:_,updateId:R},S.state)));else if(E.activeTooltipIndex!==void 0){var B=E.chartX,U=E.chartY,H=E.activeTooltipIndex,Y=S.state,J=Y.offset,re=Y.tooltipTicks;if(!J)return;if(typeof D=="function")H=D(re,E);else if(D==="value"){H=-1;for(var X=0;X<re.length;X++)if(re[X].value===E.activeLabel){H=X;break}}var ee=Ht(Ht({},J),{},{x:J.left,y:J.top}),W=Math.min(B,ee.x+ee.width),O=Math.min(U,ee.y+ee.height),z=re[H]&&re[H].value,V=vk(S.state,S.props.data,H),q=re[H]?{x:P==="horizontal"?re[H].coordinate:W,y:P==="horizontal"?O:re[H].coordinate}:Y7;S.setState(Ht(Ht({},E),{},{activeLabel:z,activeCoordinate:q,activePayload:V,activeTooltipIndex:H}))}else S.setState(E)}),nn(S,"renderCursor",function(E){var A,P=S.state,D=P.isTooltipActive,R=P.activeCoordinate,T=P.activePayload,_=P.offset,B=P.activeTooltipIndex,U=P.tooltipAxisBandSize,H=S.getTooltipEventType(),Y=(A=E.props.active)!==null&&A!==void 0?A:D,J=S.props.layout,re=E.key||"_recharts-cursor";return ft.createElement(rne,{key:re,activeCoordinate:R,activePayload:T,activeTooltipIndex:B,chartName:r,element:E,isActive:Y,layout:J,offset:_,tooltipAxisBandSize:U,tooltipEventType:H})}),nn(S,"renderPolarAxis",function(E,A,P){var D=md(E,"type.axisType"),R=md(S.state,"".concat(D,"Map")),T=E.type.defaultProps,_=T!==void 0?Ht(Ht({},T),E.props):E.props,B=R&&R[_["".concat(D,"Id")]];return I.cloneElement(E,Ht(Ht({},B),{},{className:la(D,B.className),key:E.key||"".concat(A,"-").concat(P),ticks:vf(B,!0)}))}),nn(S,"renderPolarGrid",function(E){var A=E.props,P=A.radialLines,D=A.polarAngles,R=A.polarRadius,T=S.state,_=T.radiusAxisMap,B=T.angleAxisMap,U=u0(_),H=u0(B),Y=H.cx,J=H.cy,re=H.innerRadius,X=H.outerRadius;return I.cloneElement(E,{polarAngles:Array.isArray(D)?D:vf(H,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(R)?R:vf(U,!0).map(function(ee){return ee.coordinate}),cx:Y,cy:J,innerRadius:re,outerRadius:X,key:E.key||"polar-grid",radialLines:P})}),nn(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,A=S.props,P=A.children,D=A.width,R=A.height,T=S.props.margin||{},_=D-(T.left||0)-(T.right||0),B=zF({children:P,formattedGraphicalItems:E,legendWidth:_,legendContent:d});if(!B)return null;var U=B.item,H=rI(B,nne);return I.cloneElement(U,Ht(Ht({},H),{},{chartWidth:D,chartHeight:R,margin:T,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),nn(S,"renderTooltip",function(){var E,A=S.props,P=A.children,D=A.accessibilityLayer,R=kc(P,Ou);if(!R)return null;var T=S.state,_=T.isTooltipActive,B=T.activeCoordinate,U=T.activePayload,H=T.activeLabel,Y=T.offset,J=(E=R.props.active)!==null&&E!==void 0?E:_;return I.cloneElement(R,{viewBox:Ht(Ht({},Y),{},{x:Y.left,y:Y.top}),active:J,label:H,payload:J?U:[],coordinate:B,accessibilityLayer:D})}),nn(S,"renderBrush",function(E){var A=S.props,P=A.margin,D=A.data,R=S.state,T=R.offset,_=R.dataStartIndex,B=R.dataEndIndex,U=R.updateId;return I.cloneElement(E,{key:E.key||"_recharts-brush",onChange:vv(S.handleBrushChange,E.props.onChange),data:D,x:ur(E.props.x)?E.props.x:T.left,y:ur(E.props.y)?E.props.y:T.top+T.height+T.brushBottom-(P.bottom||0),width:ur(E.props.width)?E.props.width:T.width,startIndex:_,endIndex:B,updateId:"brush-".concat(U)})}),nn(S,"renderReferenceElement",function(E,A,P){if(!E)return null;var D=S,R=D.clipPathId,T=S.state,_=T.xAxisMap,B=T.yAxisMap,U=T.offset,H=E.type.defaultProps||{},Y=E.props,J=Y.xAxisId,re=J===void 0?H.xAxisId:J,X=Y.yAxisId,ee=X===void 0?H.yAxisId:X;return I.cloneElement(E,{key:E.key||"".concat(A,"-").concat(P),xAxis:_[re],yAxis:B[ee],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:R})}),nn(S,"renderActivePoints",function(E){var A=E.item,P=E.activePoint,D=E.basePoint,R=E.childIndex,T=E.isRange,_=[],B=A.props.key,U=A.item.type.defaultProps!==void 0?Ht(Ht({},A.item.type.defaultProps),A.item.props):A.item.props,H=U.activeDot,Y=U.dataKey,J=Ht(Ht({index:R,dataKey:Y,cx:P.x,cy:P.y,r:4,fill:YS(A.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},$n(H,!1)),p1(H));return _.push(w.renderActiveDot(H,J,"".concat(B,"-activePoint-").concat(R))),D?_.push(w.renderActiveDot(H,Ht(Ht({},J),{},{cx:D.x,cy:D.y}),"".concat(B,"-basePoint-").concat(R))):T&&_.push(null),_}),nn(S,"renderGraphicChild",function(E,A,P){var D=S.filterFormatItem(E,A,P);if(!D)return null;var R=S.getTooltipEventType(),T=S.state,_=T.isTooltipActive,B=T.tooltipAxis,U=T.activeTooltipIndex,H=T.activeLabel,Y=S.props.children,J=kc(Y,Ou),re=D.props,X=re.points,ee=re.isRange,W=re.baseLine,O=D.item.type.defaultProps!==void 0?Ht(Ht({},D.item.type.defaultProps),D.item.props):D.item.props,z=O.activeDot,V=O.hide,q=O.activeBar,K=O.activeShape,se=!!(!V&&_&&J&&(z||q||K)),pe={};R!=="axis"&&J&&J.props.trigger==="click"?pe={onClick:vv(S.handleItemMouseEnter,E.props.onClick)}:R!=="axis"&&(pe={onMouseLeave:vv(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:vv(S.handleItemMouseEnter,E.props.onMouseEnter)});var ie=I.cloneElement(E,Ht(Ht({},D.props),pe));function le(Ae){return typeof B.dataKey=="function"?B.dataKey(Ae.payload):null}if(se)if(U>=0){var $e,he;if(B.dataKey&&!B.allowDuplicatedCategory){var Ue=typeof B.dataKey=="function"?le:"payload.".concat(B.dataKey.toString());$e=m1(X,Ue,H),he=ee&&W&&m1(W,Ue,H)}else $e=X?.[U],he=ee&&W&&W[U];if(K||q){var Te=E.props.activeIndex!==void 0?E.props.activeIndex:U;return[I.cloneElement(E,Ht(Ht(Ht({},D.props),pe),{},{activeIndex:Te})),null,null]}if(!zn($e))return[ie].concat(ep(S.renderActivePoints({item:D,activePoint:$e,basePoint:he,childIndex:U,isRange:ee})))}else{var oe,te=(oe=S.getItemByXY(S.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:ie},Pe=te.graphicalItem,je=Pe.item,Ie=je===void 0?E:je,ue=Pe.childIndex,de=Ht(Ht(Ht({},D.props),pe),{},{activeIndex:ue});return[I.cloneElement(Ie,de),null,null]}return ee?[ie,null,null]:[ie,null]}),nn(S,"renderCustomized",function(E,A,P){return I.cloneElement(E,Ht(Ht({key:"recharts-customized-".concat(P)},S.props),S.state))}),nn(S,"renderMap",{CartesianGrid:{handler:jv,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:jv},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:jv},YAxis:{handler:jv},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((j=y.id)!==null&&j!==void 0?j:wg("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=$L(S.triggeredAfterMouseMove,(N=y.throttleDelay)!==null&&N!==void 0?N:1e3/60),S.state={},S}return pne(w,g),une(w,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,S=j.data,E=j.height,A=j.layout,P=kc(N,Ou);if(P){var D=P.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,T=vk(this.state,S,D,R),_=this.state.tooltipTicks[D].coordinate,B=(this.state.offset.top+E)/2,U=A==="horizontal",H=U?{x:_,y:B}:{y:_,x:B},Y=this.state.formattedGraphicalItems.find(function(re){var X=re.item;return X.type.name==="Scatter"});Y&&(H=Ht(Ht({},H),Y.props.points[D].tooltipPosition),T=Y.props.points[D].tooltipPayload);var J={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:R,activePayload:T,activeCoordinate:H};this.setState(J),this.renderCursor(P),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(j){s4([kc(j.children,Ou)],[kc(this.props.children,Ou)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=kc(this.props.children,Ou);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,S=N.getBoundingClientRect(),E=CW(S),A={chartX:Math.round(j.pageX-E.left),chartY:Math.round(j.pageY-E.top)},P=S.width/N.offsetWidth||1,D=this.inRange(A.chartX,A.chartY,P);if(!D)return null;var R=this.state,T=R.xAxisMap,_=R.yAxisMap,B=this.getTooltipEventType(),U=aI(this.state,this.props.data,this.props.layout,D);if(B!=="axis"&&T&&_){var H=u0(T).scale,Y=u0(_).scale,J=H&&H.invert?H.invert(A.chartX):null,re=Y&&Y.invert?Y.invert(A.chartY):null;return Ht(Ht({},A),{},{xValue:J,yValue:re},U)}return U?Ht(Ht({},A),U):null}},{key:"inRange",value:function(j,N){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,A=j/S,P=N/S;if(E==="horizontal"||E==="vertical"){var D=this.state.offset,R=A>=D.left&&A<=D.left+D.width&&P>=D.top&&P<=D.top+D.height;return R?{x:A,y:P}:null}var T=this.state,_=T.angleAxisMap,B=T.radiusAxisMap;if(_&&B){var U=u0(_);return NO({x:A,y:P},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),S=kc(j,Ou),E={};S&&N==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=p1(this.props,this.handleOuterEvent);return Ht(Ht({},A),E)}},{key:"addListener",value:function(){mj.on(pj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){mj.removeListener(pj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,S){for(var E=this.state.formattedGraphicalItems,A=0,P=E.length;A<P;A++){var D=E[A];if(D.item===j||D.props.key===j.key||N===kf(D.item.type)&&S===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,S=N.left,E=N.top,A=N.height,P=N.width;return ft.createElement("defs",null,ft.createElement("clipPath",{id:j},ft.createElement("rect",{x:S,y:E,height:A,width:P})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,S){var E=tI(S,2),A=E[0],P=E[1];return Ht(Ht({},N),{},nn({},A,P.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,S){var E=tI(S,2),A=E[0],P=E[1];return Ht(Ht({},N),{},nn({},A,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,S=N.formattedGraphicalItems,E=N.activeItem;if(S&&S.length)for(var A=0,P=S.length;A<P;A++){var D=S[A],R=D.props,T=D.item,_=T.type.defaultProps!==void 0?Ht(Ht({},T.type.defaultProps),T.props):T.props,B=kf(T.type);if(B==="Bar"){var U=(R.data||[]).find(function(re){return GQ(j,re)});if(U)return{graphicalItem:D,payload:U}}else if(B==="RadialBar"){var H=(R.data||[]).find(function(re){return NO(j,re)});if(H)return{graphicalItem:D,payload:H}}else if(oy(D,E)||ly(D,E)||Yx(D,E)){var Y=MZ({graphicalItem:D,activeTooltipItem:E,itemData:_.data}),J=_.activeIndex===void 0?Y:_.activeIndex;return{graphicalItem:Ht(Ht({},D),{},{childIndex:J}),payload:Yx(D,E)?_.data[Y]:D.props.data[Y]}}}return null}},{key:"render",value:function(){var j=this;if(!IC(this))return null;var N=this.props,S=N.children,E=N.className,A=N.width,P=N.height,D=N.style,R=N.compact,T=N.title,_=N.desc,B=rI(N,ane),U=$n(B,!1);if(R)return ft.createElement(MP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ft.createElement(o4,vm({},U,{width:A,height:P,title:T,desc:_}),this.renderClipPath(),LC(S,this.renderMap)));if(this.props.accessibilityLayer){var H,Y;U.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,U.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",U.onKeyDown=function(re){j.accessibilityManager.keyboardEvent(re)},U.onFocus=function(){j.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return ft.createElement(MP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ft.createElement("div",vm({className:la("recharts-wrapper",E),style:Ht({position:"relative",cursor:"default",width:A,height:P},D)},J,{ref:function(X){j.container=X}}),ft.createElement(o4,vm({},U,{width:A,height:P,title:T,desc:_,style:wne}),this.renderClipPath(),LC(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(I.Component);nn(b,"displayName",r),nn(b,"defaultProps",Ht({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),nn(b,"getDerivedStateFromProps",function(g,w){var y=g.dataKey,j=g.data,N=g.children,S=g.width,E=g.height,A=g.layout,P=g.stackOffset,D=g.margin,R=w.dataStartIndex,T=w.dataEndIndex;if(w.updateId===void 0){var _=sI(g);return Ht(Ht(Ht({},_),{},{updateId:0},m(Ht(Ht({props:g},_),{},{updateId:0}),w)),{},{prevDataKey:y,prevData:j,prevWidth:S,prevHeight:E,prevLayout:A,prevStackOffset:P,prevMargin:D,prevChildren:N})}if(y!==w.prevDataKey||j!==w.prevData||S!==w.prevWidth||E!==w.prevHeight||A!==w.prevLayout||P!==w.prevStackOffset||!wm(D,w.prevMargin)){var B=sI(g),U={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},H=Ht(Ht({},aI(w,j,A)),{},{updateId:w.updateId+1}),Y=Ht(Ht(Ht({},B),U),H);return Ht(Ht(Ht({},Y),m(Ht({props:g},Y),w)),{},{prevDataKey:y,prevData:j,prevWidth:S,prevHeight:E,prevLayout:A,prevStackOffset:P,prevMargin:D,prevChildren:N})}if(!s4(N,w.prevChildren)){var J,re,X,ee,W=kc(N,Hm),O=W&&(J=(re=W.props)===null||re===void 0?void 0:re.startIndex)!==null&&J!==void 0?J:R,z=W&&(X=(ee=W.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&X!==void 0?X:T,V=O!==R||z!==T,q=!zn(j),K=q&&!V?w.updateId:w.updateId+1;return Ht(Ht({updateId:K},m(Ht(Ht({props:g},w),{},{updateId:K,dataStartIndex:O,dataEndIndex:z}),w)),{},{prevChildren:N,dataStartIndex:O,dataEndIndex:z})}return null}),nn(b,"renderActiveDot",function(g,w,y){var j;return I.isValidElement(g)?j=I.cloneElement(g,w):En(g)?j=g(w):j=ft.createElement(QS,w),ft.createElement(Is,{className:"recharts-active-dot",key:y},j)});var v=I.forwardRef(function(w,y){return ft.createElement(b,vm({},w,{ref:y}))});return v.displayName=b.displayName,v},Pne=One({chartName:"AreaChart",GraphicalChild:I0,axisComponents:[{axisType:"xAxis",AxisComp:my},{axisType:"yAxis",AxisComp:py}],formatAxisMap:Iee});const Ine=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},Ps=({src:e,alt:t,className:r,fallbackText:a,isAvatar:s})=>{const[i,o]=I.useState(!1),[l,c]=I.useState(!1),d=I.useMemo(()=>{const g=(a||t||"").trim();if(!g)return"?";if(s){const w=g.match(/[a-zA-Z0-9]/);return w?w[0].toUpperCase():"?"}else{const w=g.split(/\s+/).filter(y=>y.length>0);if(w.length===0)return"?";if(w.length===1){const y=w[0].match(/[a-zA-Z0-9]/);return y?y[0].toUpperCase():"?"}else{const y=w[0].match(/[a-zA-Z0-9]/),j=w[1].match(/[a-zA-Z0-9]/),N=y?y[0].toUpperCase():"",S=j?j[0].toUpperCase():"";return N&&S?`${N}${S}`:N||"?"}}},[a,t,s]),u=I.useMemo(()=>Ine(d),[d]),f=()=>r?.includes("w-5")||r?.includes("h-5")?"text-[10px]":r?.includes("w-6")||r?.includes("h-6")?"text-xs":r?.includes("w-8")||r?.includes("h-8")?"text-sm":r?.includes("w-10")||r?.includes("h-10")?"text-base":r?.includes("w-12")||r?.includes("h-12")||r?.includes("w-14")||r?.includes("h-14")?"text-lg":r?.includes("w-16")||r?.includes("h-16")?"text-xl":r?.includes("w-20")||r?.includes("h-20")?"text-2xl":r?.includes("w-24")||r?.includes("h-24")?"text-3xl":"text-base",m=s?"rounded-full":r?.includes("rounded-3xl")?"rounded-3xl":r?.includes("rounded-xl")?"rounded-xl":r?.includes("rounded-lg")?"rounded-lg":r?.includes("rounded-md")?"rounded-md":r?.includes("rounded-sm")?"rounded-sm":"rounded-lg",b=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const v=`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}if(!e||i){const v=`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}return n.jsxs(n.Fragment,{children:[!l&&n.jsx("div",{className:`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:n.jsx("span",{className:f(),children:d})}),n.jsx("img",{src:e,alt:t,className:`${b} ${m} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},oI=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},kv=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},lI=async(e,t={})=>{await new Promise(o=>setTimeout(o,600));const r=t.body?JSON.parse(t.body):{},a=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${a} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const o=r.email?.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),t1.some(c=>c.email.toLowerCase().trim()===o)?{success:!0,message:"Simulated OTP sent to "+o}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const o=r.email?.toLowerCase().trim();return{success:!0,token:"v-token-123",user:t1.find(c=>c.email.toLowerCase()===o)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let o=oI("feedback",[]);if(a==="POST"){const l={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return o.unshift(l),kv("feedback",o),{success:!0,data:l,simulated:!0}}if(a==="PATCH"||a==="PUT"){const l=e.split("/").pop();return o=o.map(c=>c.id===l?{...c,...r,updatedAt:new Date().toISOString()}:c),kv("feedback",o),{success:!0,simulated:!0}}if(a==="DELETE"){const l=e.split("/").pop();return o=o.filter(c=>c.id!==l),kv("feedback",o),{success:!0,simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(a==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(a==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(o=>e.includes(o));if(i){let o=oI(i,[]);if(a==="POST"){const l={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return o.unshift(l),kv(i,o),{success:!0,data:l,simulated:!0}}if(a==="GET"&&e.split("/").length>2){const l=e.split("/").pop();return{success:!0,data:o.find(d=>d.id===l),simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&a==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return t1[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},l3=()=>"http://127.0.0.1:8050/api/v1/impactOS",c3=l3();typeof window<"u"&&console.log(`[API] Initializing with Base: ${c3}`);const dt=async(e,t={})=>{const r=localStorage.getItem("auth_token"),a=e.startsWith("/")?e:`/${e}`,s=`${c3}${a}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};console.log("[API] apiFetch called",{method:t.method||"GET",url:s,endpoint:a,hasToken:!!r});try{const o=await fetch(s,{...t,headers:i});console.log("[API] apiFetch response",{url:s,status:o.status,statusText:o.statusText,ok:o.ok});const l=await o.json().catch(()=>({}));if(!o.ok){const u=!(a.includes("google-calendar")||a.includes("/calendar/"))&&["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(m=>a.includes(m));if(o.status===404&&u)return console.warn(`[SYSTEM] Live endpoint ${a} not found. Engaging Virtual Engine fallback.`),lI(a,t);let f=`Server Error ${o.status}`;try{if(l&&typeof l=="object"){const m=l.message||l.error?.message||l.error?.error?.message||(typeof l.error=="string"?l.error:null);m&&typeof m=="string"&&m.trim()&&(f=m)}}catch{}const p=new Error(f);throw p.status=o.status,p.response=o,p.data=l,f&&f!==`Server Error ${o.status}`&&(p.message=f),l?.code&&typeof l.code=="string"?p.code=l.code:l?.error?.code&&typeof l.error.code=="string"&&(p.code=l.error.code),p}return l}catch(o){let l="Unknown error",c="Error",d,u;try{o&&typeof o=="object"?(l=o.message||String(o)||l,c=o.name||c,d=typeof o.status=="number"?o.status:void 0,u=typeof o.code=="string"?o.code:void 0):o&&(l=String(o))}catch{}const f=c==="TypeError"||l.includes("Failed to fetch"),p=d!==void 0&&d>=500,m=d!==void 0&&d>=400&&d<500;if(!(a.includes("google-calendar")||a.includes("/calendar/"))&&(f||p&&!m))return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),lI(a,t);const v=new Error(l);throw d!==void 0&&(v.status=d),u&&(v.code=u),v}},cI=e=>dt("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),Dne=e=>dt("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),dI=()=>dt("/auth/me"),Lne=async()=>{try{await dt("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},Ic=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return dt(`/users${t}`)},Fne=e=>dt("/users",{method:"POST",body:JSON.stringify(e)}),Mne=(e,t)=>dt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Rne=e=>dt(`/users/${e}/dashboard-layout`),Bne=(e,t)=>dt(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),Une=e=>dt(`/users/${e}`,{method:"DELETE"}),qne=(e,t)=>dt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),wd=e=>dt(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),$ne=e=>dt("/companies",{method:"POST",body:JSON.stringify(e)}),Q7=(e,t)=>dt(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),Z7=e=>dt(`/companies/${e}`,{method:"DELETE"}),Ah=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const a=r.toString();return dt(`/contacts${a?`?${a}`:""}`)},uI=e=>dt("/contacts",{method:"POST",body:JSON.stringify(e)}),eM=(e,t)=>dt(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),tM=e=>dt(`/contacts/${e}`,{method:"DELETE"}),zne=e=>dt(`/tags${`?entityType=${e}`}`),Hne=e=>dt(`/saved-views${`?entityType=${e}`}`),Ag=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/deals${s?`?${s}`:""}`)},Wne=e=>dt("/deals",{method:"POST",body:JSON.stringify(e)}),Sv=(e,t)=>dt(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),fI=e=>dt(`/deals/${e}`,{method:"DELETE"}),D0=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/projects${s?`?${s}`:""}`)},Vne=e=>dt(`/projects/${e}`),Gne=e=>dt("/projects",{method:"POST",body:JSON.stringify(e)}),rM=(e,t)=>dt(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),nM=e=>dt(`/projects/${e}`,{method:"DELETE"}),gy=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/tasks${s?`?${s}`:""}`)},fb=()=>dt("/tasks/categories"),aM=e=>dt("/tasks",{method:"POST",body:JSON.stringify(e)}),hb=(e,t)=>dt(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),sM=e=>dt(`/tasks/${e}`,{method:"DELETE"}),Kne=e=>dt("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),iM=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/invoices${s?`?${s}`:""}`)},Xne=e=>dt("/invoices",{method:"POST",body:JSON.stringify(e)}),_v=(e,t)=>dt(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),hI=e=>dt(`/invoices/${e}`,{method:"DELETE"}),Yne=(e,t)=>dt(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),mI=e=>dt(`/automations${e?`?userId=${e}`:""}`),Jne=e=>dt("/automations",{method:"POST",body:JSON.stringify(e)}),Qne=e=>dt(`/automations/${e}/toggle`,{method:"PATCH"}),Zne=e=>dt(`/automations/${e}`,{method:"DELETE"}),oM=(e,t)=>dt(`/notifications?userId=${e}&limitNum=${t}`),tp=e=>dt("/notifications",{method:"POST",body:JSON.stringify(e)}),lM=(e,t)=>dt(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),cM=e=>dt("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),eae=e=>dt(`/users/${e}/notification-preferences`),tae=(e,t)=>dt(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),rae=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return dt(`/satisfaction/records${t}`)},nae=e=>dt(`/satisfaction/records/${e}`),aae=e=>dt("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),bk=e=>dt(`/satisfaction/companies/${e}`),sae=e=>dt(`/satisfaction/surveys/${e}`),iae=e=>dt("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),oae=()=>dt("/satisfaction/templates/default"),lae=e=>dt("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),cae=(e,t)=>dt(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),dae=()=>dt("/satisfaction/stats"),uae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return dt(`/playbooks/templates${t}`)},fae=e=>dt(`/playbooks/templates/${e}`),hae=e=>dt("/playbooks/templates",{method:"POST",body:JSON.stringify(e)}),mae=(e,t)=>dt(`/playbooks/templates/${e}`,{method:"PUT",body:JSON.stringify(t)}),pae=e=>dt(`/playbooks/templates/${e}`,{method:"DELETE"}),xae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return dt(`/playbooks/instances${t}`)},gae=e=>dt(`/playbooks/instances/${e}`),vae=e=>dt("/playbooks/instances",{method:"POST",body:JSON.stringify(e)}),bae=(e,t)=>dt(`/playbooks/instances/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),yae=(e,t)=>dt(`/playbooks/instances/${e}/steps/${t}/complete`,{method:"POST"}),wae=e=>dt(`/playbooks/instances/${e}/completions`),Nae=(e="default")=>dt(`/data-retention/policy?workspaceId=${e}`),jae=(e,t)=>dt("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),kae=(e="default")=>dt(`/data-retention/stats?workspaceId=${e}`),Sae=(e="default",t=50)=>dt("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),_ae=(e="default",t=50)=>dt("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Cae=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),dt(`/data-retention/export?${r.toString()}`)},pI=()=>dt("/pipelines"),xI=e=>dt("/pipelines",{method:"POST",body:JSON.stringify(e)}),Cv=(e,t)=>dt(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),Aae=()=>dt("/feedback"),dM=e=>dt("/feedback",{method:"POST",body:JSON.stringify(e)}),gj=(e,t)=>dt(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),gI=e=>dt(`/feedback/${e}`,{method:"DELETE"}),Eae=e=>{const t=new URLSearchParams;e?.companyId&&t.append("companyId",e.companyId),e?.userId&&t.append("userId",e.userId);const r=t.toString();return dt(`/expenses${r?`?${r}`:""}`)},Tae=e=>dt("/expenses",{method:"POST",body:JSON.stringify(e)}),Oae=(e,t)=>dt(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),vI=e=>dt(`/expenses/${e}`,{method:"DELETE"}),uM=()=>dt("/expense-categories"),fM=e=>dt("/expense-categories",{method:"POST",body:JSON.stringify(e)}),Pae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString():"";return dt(`/budgets${t}`)},Iae=e=>dt("/budgets",{method:"POST",body:JSON.stringify(e)}),Dae=(e,t)=>dt(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),Lae=e=>dt(`/budgets/${e}`,{method:"DELETE"}),Fae=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString();return dt(`/budgets/tracking${t}`)},Mae=()=>dt("/budgets/departments"),hM=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a)).toString():"";return dt(`/contracts${t}`)},Rae=e=>dt("/contracts",{method:"POST",body:JSON.stringify(e)}),Bae=(e,t)=>dt(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Uae=e=>dt(`/contracts/${e}`,{method:"DELETE"}),qae=(e,t)=>dt(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),$ae=()=>dt("/contracts/document-types"),zae=e=>dt("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),mb=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return dt(`/contracts/google-drive/access-token${t}`)},Hae=e=>dt("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),Wae=e=>dt("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),Vae=(e,t)=>dt("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Gae=(e,t)=>dt("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Kae=()=>dt("/data-hygiene/duplicate-companies"),Xae=()=>dt("/data-hygiene/duplicate-contacts"),Yae=()=>dt("/data-hygiene/incomplete-records"),Jae=()=>dt("/data-hygiene/domain-mismatches"),Qae=()=>dt("/industries"),Zae=e=>dt("/industries",{method:"POST",body:JSON.stringify(e)}),ese=(e,t)=>dt(`/industries/${e}`,{method:"PUT",body:JSON.stringify(t)}),tse=e=>dt(`/industries/${e}`,{method:"DELETE"}),rse=async(e,t="company")=>{const r=localStorage.getItem("auth_token"),a=l3(),s=new FormData;s.append("file",e),s.append("type",t);const i=await fetch(`${a}/import/upload`,{method:"POST",headers:r?{Authorization:`Bearer ${r}`}:{},body:s});if(!i.ok){const o=await i.json().catch(()=>({message:i.statusText}));throw new Error(o.message||"Upload failed")}return i.json()},nse=async(e,t="company")=>{try{return await dt("/import/google-sheets",{method:"POST",body:JSON.stringify({url:e,type:t})})}catch(r){let a="Failed to import Google Sheets";r.data?.message?a=r.data.message:r.message&&r.message!=="Server Error 400"?a=r.message:r.error?.message&&(a=r.error.message);const s=new Error(a);throw s.response=r.response,s.data=r.data||r.response?.data,s.error=r.error||r,s.code=r.code||r.data?.code,s}},ase=(e,t)=>dt(`/import/${e}/mapping`,{method:"POST",body:JSON.stringify({mapping:t})}),sse=e=>dt(`/import/${e}/preview`),ise=(e,t,r)=>dt(`/import/${e}/execute`,{method:"POST",body:JSON.stringify({targetAccountSelections:t,...r?{companySelections:r}:{}})}),ose=e=>dt(`/import/batch/${e}`),lse=e=>{const t=new URLSearchParams;e?.userId&&t.append("userId",e.userId),e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate),t.append("limit",String(e.limit)),e?.offset&&t.append("offset",String(e.offset));const r=t.toString();return dt(`/import/batches${r?`?${r}`:""}`)},d3=e=>dt(`/google-calendar/status?userId=${e}`),mM=e=>dt(`/google-calendar/auth-url?userId=${e}`),cse=e=>dt(`/google-calendar/calendars?userId=${e}`),dse=(e,t,r,a)=>{const s=new URLSearchParams({userId:r,startDate:e,endDate:t});return a?.length&&s.set("calendarIds",a.join(",")),dt(`/google-calendar/events?${s.toString()}`)},use=e=>dt("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),bI=(e,t,r)=>dt("/google-calendar/events/create",{method:"POST",body:JSON.stringify({userId:e,calendarId:t,...r})}),fse=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),a!=null&&s.append("scopeDays",String(a)),dt(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},hse=e=>dt(`/shared-inbox/accounts?userId=${e}`),mse=(e,t)=>dt("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),pse=e=>dt(`/shared-inbox/filtered-accounts?userId=${e}`),xse=(e,t)=>dt("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),gse=(e,t)=>dt(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),pM=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.cursor&&r.append("cursor",t.cursor),t.page!==void 0&&!t.cursor&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),dt(`/shared-inbox/emails?${r.toString()}`)):dt(`/shared-inbox/emails?${r.toString()}`)},vse=(e,t)=>dt(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),bse=(e,t)=>dt(`/shared-inbox/emails/${e}?userId=${t}`),yI=(e,t,r)=>dt(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),yse=(e,t)=>dt(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),wse=e=>dt("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),Nse=e=>dt(`/shared-inbox/notes/${e}`),jse=(e,t)=>dt(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),kse=(e,t,r)=>dt("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),Sse=e=>dt("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),_se=e=>dt(`/shared-inbox/templates?userId=${e}`),Cse=(e,t)=>dt(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Ase=e=>dt("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),Ese=e=>dt("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),Tse=e=>dt("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),xM=e=>dt(`/shared-inbox/signatures?userId=${e}`),Ose=e=>dt("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),Pse=(e,t)=>dt(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),Ise=(e,t)=>dt(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),wI=(e,t)=>dt(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),NI=(e,t)=>dt(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Dse=(e,t)=>dt(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),Av=(e,t)=>dt(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),jI=(e,t,r)=>{const a=l3(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${a}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},Lse=e=>dt("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),Fse=(e,t)=>dt(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),Mse=e=>dt("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),Rse=e=>dt(`/email-sync-filter?userId=${e}`),Bse=(e,t)=>dt("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),Use=(e,t)=>dt(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),u3=(e,t)=>dt(`/shared-inbox/activity/${e}/${t}`),qse=e=>dt("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),$se=e=>dt("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),zse=e=>dt("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),Hse=e=>dt("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),Wse=e=>dt("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),Vse=e=>dt(`/shared-inbox/suggested-links?emailId=${e}`),Gse=e=>dt("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),Kse=e=>dt(`/shared-inbox/related-tasks/${e}`),Xse=e=>dt(`/shared-inbox/related-projects/${e}`),Yse=e=>dt(`/shared-inbox/related-contracts/${e}`),Jse=e=>dt(`/shared-inbox/labels?userId=${e}`),Qse=e=>dt("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),Zse=(e,t)=>dt(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),eie=(e,t)=>dt(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),tie=e=>dt("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),kI=e=>dt(`/shared-inbox/categorization-rules?userId=${e}`),rie=(e,t=30)=>dt(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),nie=e=>dt("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),aie=(e,t)=>dt(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),sie=e=>dt(`/shared-inbox/folder-mapping?userId=${e}`),iie=e=>dt("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),yk=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),a&&s.append("endDate",a),dt(`/shared-inbox/calendar-events?${s.toString()}`)},oie=e=>dt("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),lie=(e,t,r,a)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:a});return dt(`/shared-inbox/calendar-availability?${s.toString()}`)},cie=(e,t,r,a,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),a&&o.append("query",a),s&&o.append("pageToken",s),dt(`/shared-inbox/drive-files?${o.toString()}`)},SI=e=>dt("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),die=e=>dt("/calendar/events",{method:"POST",body:JSON.stringify(e)}),gM=(e,t)=>dt(`/calendar/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),uie=e=>(console.log("[API] apiDeleteEvent called with id:",e),dt(`/calendar/events/${e}`,{method:"DELETE"})),fie=(e,t,r,a)=>dt("/google-calendar/events/update",{method:"PATCH",body:JSON.stringify({userId:e,calendarId:t,eventId:r,...a})}),_I=(e,t,r)=>{const a=`/google-calendar/events/delete?userId=${encodeURIComponent(e)}&calendarId=${encodeURIComponent(t)}&eventId=${encodeURIComponent(r)}`;return console.log("[API] apiDeleteGoogleCalendarEvent called",{userId:e,calendarId:t,eventId:r,url:a}),dt(a,{method:"DELETE"})},vM=e=>dt("/lead-sources?active=true"),hie=async(e,t)=>{const r=localStorage.getItem("auth_token"),a=new FormData;a.append("file",e),a.append("userId",t);const s=await fetch(`${c3}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},mie=e=>dt("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),pie=e=>dt("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),xie=e=>dt("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),gie=({toast:e,onRemove:t})=>{I.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return n.jsx(mn,{className:"w-5 h-5 text-emerald-600"});case"error":return n.jsx(Fb,{className:"w-5 h-5 text-red-600"});case"warning":return n.jsx(Rn,{className:"w-5 h-5 text-amber-600"});case"info":return n.jsx(w0,{className:"w-5 h-5 text-blue-600"});default:return n.jsx(w0,{className:"w-5 h-5 text-blue-600"})}},a=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return n.jsxs("div",{className:`${a()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[n.jsx("div",{className:"shrink-0",children:r()}),n.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),n.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-4 h-4 text-slate-400"})})]})},vie=({toasts:e,onRemove:t})=>n.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>n.jsx("div",{className:"pointer-events-auto",children:n.jsx(gie,{toast:r,onRemove:t})},r.id))}),bM=I.createContext(void 0),jn=()=>{const e=I.useContext(bM);if(!e)throw new Error("useToast must be used within ToastProvider");return e},bie=({children:e})=>{const[t,r]=I.useState([]),a=I.useCallback(d=>{r(u=>u.filter(f=>f.id!==d))},[]),s=I.useCallback((d,u="info",f=3e3)=>{const m={id:Math.random().toString(36).substring(2,9),message:d,type:u,duration:f};r(b=>[...b,m])},[]),i=I.useCallback((d,u)=>{s(d,"success",u)},[s]),o=I.useCallback((d,u)=>{s(d,"error",u||5e3)},[s]),l=I.useCallback((d,u)=>{s(d,"warning",u)},[s]),c=I.useCallback((d,u)=>{s(d,"info",u)},[s]);return n.jsxs(bM.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,n.jsx(vie,{toasts:t,onRemove:a})]})},rp=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],Si="USD",wk=e=>rp.find(t=>t.code===e),pf=e=>e?wk(e)?.symbol||"$":rp.find(r=>r.code===Si)?.symbol||"$",bf=(e,t)=>`${pf(t)}${e.toLocaleString()}`,CI=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"},{id:"nps-average",order:7,size:"medium"},{id:"nps-needing-attention",order:8,size:"medium"},{id:"nps-recent-feedback",order:9,size:"medium"},{id:"nps-awaiting-feedback",order:10,size:"medium"}],AI=({onNavigate:e})=>{const{showError:t,showSuccess:r}=jn(),[a,s]=I.useState(null),[i,o]=I.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=I.useState([]),[d,u]=I.useState([]),[f,p]=I.useState(!0),[m,b]=I.useState("1M"),[v,g]=I.useState([]),[w,y]=I.useState(!1),[j,N]=I.useState({}),[S,E]=I.useState({}),[A,P]=I.useState(Si),[D,R]=I.useState(!1),[T,_]=I.useState(CI),[B,U]=I.useState(null),[H,Y]=I.useState(!1),[J,re]=I.useState(!1),[X,ee]=I.useState(null);I.useRef(0);const[W,O]=I.useState(null),[z,V]=I.useState(!1);I.useEffect(()=>{const ue=JSON.parse(localStorage.getItem("user_data")||"null");s(ue),ue?.id&&q(ue.id)},[]);const q=async ue=>{try{const de=await Rne(ue);if(de?.data&&Array.isArray(de.data)){const Ae=de.data.flatMap(fe=>fe.id==="stats-grid"?[{id:"stat-pipeline",order:fe.order,size:fe.size||"medium"},{id:"stat-projects",order:fe.order+.1,size:fe.size||"medium"},{id:"stat-invoices",order:fe.order+.2,size:fe.size||"medium"},{id:"stat-tasks",order:fe.order+.3,size:fe.size||"medium"}]:fe.order>0?[{...fe,order:fe.order+3,size:fe.size||"medium"}]:[{...fe,size:fe.size||"medium"}]),Qe=new Set,ge=Ae.filter(fe=>Qe.has(fe.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${fe.id}, removing duplicate`),!1):(Qe.add(fe.id),!0));_(ge)}}catch{console.log("[DASHBOARD] Using default layout")}},K=async()=>{if(a?.id){re(!0);try{await Bne(a.id,T),r("Dashboard layout saved"),Y(!1)}catch{t("Failed to save layout")}finally{re(!1)}}},se=()=>{_(CI)},pe=(ue,de)=>{_(Ae=>Ae.map(Qe=>Qe.id===ue?{...Qe,size:de}:Qe))},ie=(ue="medium",de)=>{if(de.startsWith("stat-"))return"";switch(ue){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},le=(ue,de)=>{H&&(U(de),ue.dataTransfer.effectAllowed="move",ue.dataTransfer.setData("text/html",de))},$e=ue=>{!H||!B||(ue.preventDefault(),ue.dataTransfer.dropEffect="move")},he=(ue,de)=>{if(!H||!B||B===de)return;ue.preventDefault();const Ae=[...T],Qe=Ae.findIndex(fe=>fe.id===B),ge=Ae.findIndex(fe=>fe.id===de);if(Qe!==-1&&ge!==-1){const fe=Ae[Qe];Ae.splice(Qe,1),Ae.splice(ge,0,fe),Ae.forEach((_e,ze)=>{_e.order=ze}),_(Ae)}U(null)},Ue=()=>{U(null)};I.useEffect(()=>{(async()=>{p(!0);try{const de=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!de){p(!1);return}const[Ae,Qe,ge,fe,_e,ze]=await Promise.all([Ag(de).catch(()=>({data:[]})),D0(de).catch(()=>({data:[]})),gy(de).catch(()=>({data:[]})),iM(de).catch(()=>({data:[]})),pM(de).catch(()=>({data:[]})),Ic().catch(()=>({data:[]}))]),Se=Ae?.data||Ae||[],Fe=Qe?.data||Qe||[],Me=ge?.data||ge||[],et=fe?.data||fe||[],ut=_e?.data||_e||[],bt=ze?.data||ze||[],At=Array.isArray(Se)?Se.filter(Sr=>Sr.stage!=="Won"&&Sr.stage!=="Lost"):[],qt={},Gt={};At.forEach(Sr=>{const pn=Sr.currency||Si,rr=Sr.value||0;qt[pn]=(qt[pn]||0)+rr,Gt[pn]=(Gt[pn]||0)+1});const Ye=Array.isArray(Fe)?Fe.filter(Sr=>Sr.status!=="Completed"&&Sr.status!=="Cancelled").length:0,Et=Array.isArray(et)?et.filter(Sr=>Sr.status!=="Paid"):[],Cr={};Et.forEach(Sr=>{const pn=Sr.currency||Si,rr=Sr.amount||0;Cr[pn]=(Cr[pn]||0)+rr,Gt[pn]=(Gt[pn]||0)+1});let tr=0,Or=Si;Object.keys(Gt).forEach(Sr=>{Gt[Sr]>tr&&(tr=Gt[Sr],Or=Sr)}),N(qt),E(Cr),P(Or);const pr=qt[Or]||0,rt=Cr[Or]||0,Dt=0,yr=new Date;yr.setHours(0,0,0,0);const kr=Array.isArray(Me)?Me.filter(Sr=>{if(!Sr.dueDate)return!1;const pn=new Date(Sr.dueDate);return pn.setHours(0,0,0,0),pn.getTime()===yr.getTime()&&Sr.status!=="Done"}):[],Xr=await Promise.all(kr.slice(0,2).map(async Sr=>{if(Sr.projectId)try{const pn=await Vne(Sr.projectId);return{...Sr,projectTitle:pn?.data?.title||"Software"}}catch{return{...Sr,projectTitle:"Software"}}return{...Sr,projectTitle:"Software"}}));o({openPipeline:pr,activeProjects:Ye,unpaidInvoices:rt,actionableMail:Dt}),c(Xr),u(bt.slice(0,3))}catch(de){console.error("[DASHBOARD] Failed to fetch data:",de),t("Failed to load dashboard data")}finally{p(!1)}})()},[t]),I.useEffect(()=>{(async()=>{y(!0);try{const de=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!de){y(!1);return}const Ae=await Yne(de,m),Qe=Ae?.data||Ae||[];g(Array.isArray(Qe)?Qe:[])}catch{g([])}finally{y(!1)}})()},[m]),I.useEffect(()=>{(async()=>{V(!0);try{const Ae=(await dae())?.data;Ae&&O({averageNps:Ae.averageNps??null,totalResponses:Ae.totalResponses??0,companiesNeedingAttention:Ae.companiesNeedingAttention??[],recentFeedback:Ae.recentFeedback??[],awaitingFeedback:Ae.awaitingFeedback??[]})}catch{O(null)}finally{V(!1)}})()},[]);const Te=(ue,de=A)=>{const Ae=pf(de);return ue>=1e3?`${Ae}${(ue/1e3).toFixed(1)}k`:`${Ae}${ue.toLocaleString()}`},oe=(ue,de)=>{const Ae=B===ue,Qe=T.find(ze=>ze.id===ue),ge=de||Qe?.size||"medium",fe={draggable:H,onDragStart:ze=>le(ze,ue),onDragOver:$e,onDrop:ze=>he(ze,ue),onDragEnd:Ue,className:`transition-all ${Ae?"opacity-50 scale-95":""} ${H?"cursor-move":""}`},_e=()=>{if(!H)return null;const ze=[{value:"small",icon:n.jsx(_U,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:n.jsx(PU,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:n.jsx(jU,{className:"w-3 h-3"}),label:"Large"}];return n.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:ze.map(({value:Se,icon:Fe,label:Me})=>n.jsx("button",{onClick:et=>{et.stopPropagation(),pe(ue,Se)},onMouseEnter:()=>ee(ue),onMouseLeave:()=>ee(null),className:`p-1.5 rounded transition-all ${ge===Se?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:Me,children:Fe},Se))})};switch(ue){case"stat-pipeline":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),n.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:n.jsx(au,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Te(i.openPipeline,A)})]}),n.jsx("button",{onClick:ze=>{ze.stopPropagation(),R(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(hh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},ue);case"stat-projects":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),n.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Al,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},ue);case"stat-invoices":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),n.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:n.jsx(zu,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Te(i.unpaidInvoices,A)})]}),n.jsx("button",{onClick:ze=>{ze.stopPropagation(),R(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(hh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},ue);case"stat-tasks":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),n.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:n.jsx(_i,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},ue);case"revenue-chart":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),_e()]}),n.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),n.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),n.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(ze=>n.jsx("button",{onClick:()=>b(ze),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${ze===m?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:ze},ze))})]}),n.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:w?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsx(b6,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):v.length===0?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(au,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):n.jsx(yW,{width:"100%",height:"100%",children:n.jsxs(Pne,{data:v,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),n.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),n.jsx(D7,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),n.jsx(my,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),n.jsx(py,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:ze=>`$${ze}`}),n.jsx(Ou,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),n.jsx(I0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},ue);case"inbox-card":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),_e()]}),n.jsxs("div",{onClick:()=>!H&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${H?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[n.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:n.jsx(jf,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!H&&n.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:n.jsx(Oo,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),n.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),n.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),n.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:n.jsxs("div",{className:"flex -space-x-2",children:[d.map((ze,Se)=>n.jsx(Ps,{src:ze.avatar,isAvatar:!0,fallbackText:ze.name||ze.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},ze.id||Se)),n.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),n.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:n.jsx(g0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},ue);case"tasks-card":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),n.jsx(_i,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4 lg:space-y-6",children:f?n.jsx("div",{className:"space-y-3",children:[1,2].map(ze=>n.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},ze))}):l.length>0?l.slice(0,2).map(ze=>n.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[n.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:ze.title}),n.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:ze.projectTitle||"Software"})]})]},ze.id)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),n.jsx("button",{onClick:()=>!H&&e("tasks"),disabled:H,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},ue);case"nps-average":{const ze=W?.averageNps??null,Se=ze===null?"text-slate-400":ze>=9?"text-green-600":ze>=7?"text-amber-600":"text-red-600",Fe=ze===null?"bg-slate-50":ze>=9?"bg-green-50":ze>=7?"bg-amber-50":"bg-red-50";return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Average NPS Score"})]}),_e()]}),n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full disabled:opacity-50",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:`p-2 rounded-lg lg:p-2.5 lg:rounded-xl ${Fe} ${Se}`,children:n.jsx(jf,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em]",children:"Average NPS Score"}),z?n.jsx("div",{className:"h-8 w-16 bg-slate-100 rounded mt-1 animate-pulse"}):n.jsx("h3",{className:`text-2xl lg:text-3xl font-black mt-0.5 lg:mt-1 ${Se}`,children:ze!==null?ze.toFixed(1):""})]})]})]},ue)}case"nps-needing-attention":{const ze=W?.companiesNeedingAttention??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Companies Needing Attention"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Detractors (06)"}),n.jsx(jf,{className:"w-4 h-4 text-red-400"})]}),n.jsx("div",{className:"space-y-3",children:z?[1,2,3].map(Se=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},Se)):ze.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No detractors"}):ze.map(Se=>{const Fe=Se.accountManagerId&&d?.length?d.find(Me=>Me.id===Se.accountManagerId)?.name:null;return n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex flex-col gap-0.5 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:Se.companyName}),n.jsx("span",{className:"text-xs font-bold text-red-600 shrink-0",children:Se.npsScore})]}),Fe?n.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["AM: ",Fe]}):null]},Se.companyId)})}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},ue)}case"nps-recent-feedback":{const ze=W?.recentFeedback??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Recent Feedback"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Latest 5 responses"}),n.jsx(fo,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4",children:z?[1,2,3].map(Se=>n.jsx("div",{className:"h-14 bg-slate-50 rounded animate-pulse"},Se)):ze.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No feedback yet"}):ze.map((Se,Fe)=>n.jsxs("div",{className:"border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900",children:Se.companyName}),n.jsx("span",{className:`text-xs font-bold shrink-0 ${Se.npsScore>=9?"text-green-600":Se.npsScore>=7?"text-amber-600":"text-red-600"}`,children:Se.npsScore})]}),Se.feedback?n.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2",children:Se.feedback}):null,n.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:Se.date?new Date(Se.date).toLocaleDateString():""})]},Fe))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},ue)}case"nps-awaiting-feedback":{const ze=W?.awaitingFeedback??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(Zl,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Awaiting Feedback"})]}),_e()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Survey sent, no response yet"}),n.jsx(Xa,{className:"w-4 h-4 text-amber-400"})]}),n.jsx("div",{className:"space-y-3",children:z?[1,2,3].map(Se=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},Se)):ze.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"None"}):ze.map(Se=>n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:Se.companyName}),n.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[Se.daysElapsed,"d ago"]})]},Se.companyId))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},ue)}default:return null}},te=a?.name?.split(" ")[0]||"Alex",Pe=a?.avatar||a?.photoURL||"",je=a?.name||a?.email||"Impact Member",Ie=[...T].sort((ue,de)=>ue.order-de.order);return n.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ps,{src:Pe,alt:je,fallbackText:je,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",te]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:H?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:se,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),n.jsx("button",{onClick:K,disabled:J,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:J?n.jsxs(n.Fragment,{children:[n.jsx(b6,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Layout"]})}),n.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[n.jsx(Zl,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),H&&n.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:n.jsx(Zl,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),n.jsx("div",{className:"space-y-6 lg:space-y-8",children:Ie.map((ue,de)=>{const Ae=oe(ue.id,ue.size);if(ue.id.startsWith("stat-")){const ze=Ie[de-1];if(ze&&ze.id.startsWith("stat-"))return null;{const Fe=[];for(let Me=de;Me<Ie.length&&Ie[Me].id.startsWith("stat-");Me++)Fe.push(Ie[Me]);return n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:Fe.map(Me=>oe(Me.id,Me.size))},`stat-cards-group-${de}`)}}if(ue.id==="revenue-chart"){const ze=Ie[de+1],Se=Ie[de+2],Fe=ue.size||"large";if(ze&&Se&&(ze.id==="inbox-card"&&Se.id==="tasks-card"||ze.id==="tasks-card"&&Se.id==="inbox-card")&&Fe==="large")return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:Ae}),n.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[oe(ze.id,ze.size),oe(Se.id,Se.size)]})]},"revenue-with-sidebar")}const ge=Ie[de-1],fe=Ie[de-2];if(ge?.id==="revenue-chart"&&(ue.id==="inbox-card"||ue.id==="tasks-card")){const ze=ge.size||"large",Se=Ie[de+1];if(ze==="large"&&Se&&(ue.id==="inbox-card"&&Se.id==="tasks-card"||ue.id==="tasks-card"&&Se.id==="inbox-card"))return null}if(fe?.id==="revenue-chart"&&(ue.id==="inbox-card"||ue.id==="tasks-card")&&(fe.size||"large")==="large")return null;const _e=ie(ue.size||"medium",ue.id);return _e?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:n.jsx("div",{className:_e,children:Ae})},ue.id):n.jsx("div",{children:Ae},ue.id)})}),D&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>R(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(hh,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),n.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(au,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(j).length>0?Object.entries(j).sort((ue,de)=>de[1]-ue[1]).map(([ue,de])=>{const Ae=wk(ue),Qe=ue===A;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Qe?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ae?.symbol||ue}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:ue}),Qe&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:bf(de,ue)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ae?.name||ue})]},ue)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(zu,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(S).length>0?Object.entries(S).sort((ue,de)=>de[1]-ue[1]).map(([ue,de])=>{const Ae=wk(ue),Qe=ue===A;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Qe?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ae?.symbol||ue}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:ue}),Qe&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:bf(de,ue)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ae?.name||ue})]},ue)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),n.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:n.jsxs("button",{onClick:()=>R(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},Ql=e=>{if(!e||typeof e!="string")return"";let t=e.trim();return t=t.replace(/\s+[a-zA-Z0-9]{6,}$/,""),t=t.replace(/^(test|Test|TEST)\s+/i,""),t=t.replace(/\s+(test|Test|TEST)$/i,""),t=t.replace(/\s+/g," ").trim(),t=t.toLowerCase().split(" ").map(r=>r.length<=1?r:r.charAt(0).toUpperCase()+r.slice(1)).join(" "),t=t.replace(/\bMc([a-z])/g,(r,a)=>`Mc${a.toUpperCase()}`),t=t.replace(/\bMac([a-z])/g,(r,a)=>`Mac${a.toUpperCase()}`),t=t.replace(/\bO'([a-z])/g,(r,a)=>`O'${a.toUpperCase()}`),t},yie=["gmail.com","googlemail.com","gmail.co.uk","gmail.fr","gmail.de","gmail.it","gmail.es","yahoo.com","yahoo.co.uk","yahoo.fr","yahoo.de","ymail.com","hotmail.com","hotmail.co.uk","hotmail.fr","live.com","live.co.uk","outlook.com","msn.com","icloud.com","me.com","mac.com","protonmail.com","proton.me","pm.me","aol.com","zoho.com","gamil.com","gmial.com","gmai.com","gmal.com","gnail.com","gmaill.com","gmeil.com"],wie=new Set(yie),Nie=e=>!e||!e.trim()?!1:wie.has(e.toLowerCase().trim()),EI=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const a=r[1].toLowerCase().trim();return a.includes(".")?a:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const a=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return a.includes(".")?a:null}catch{const a=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return a&&a.includes(".")?a:null}},Ev=(e,t)=>{const r=e?EI(e):null;if(r)return r;const a=t?EI(t):null;return a&&!Nie(a)?a:null},yM=({extractedData:e,suggestions:t,source:r,onConfirm:a,onCancel:s,isProcessing:i=!1,companies:o})=>{const[l,c]=I.useState(""),[d,u]=I.useState(""),[f,p]=I.useState(""),[m,b]=I.useState(""),[v,g]=I.useState(""),[w,y]=I.useState(""),[j,N]=I.useState(""),[S,E]=I.useState(null),[A,P]=I.useState({});I.useEffect(()=>{r==="business_card"?(c(e?.name?.value||""),u(e?.email?.value||""),p(e?.phone?.value||""),b(e?.title?.value||""),g(e?.linkedin?.value||""),y(e?.company?.value||""),N(e?.website?.value||"")):r==="linkedin"&&(c(e?.name||""),u(e?.email||""),p(e?.phone||""),b(e?.currentRole||e?.headline||""),g(e?.profileImageUrl||""),y(e?.currentCompany||""),N(e?.companyWebsite||"")),t?.existingCompany&&E(t.existingCompany.id)},[e,t,r]);const D=B=>B>=95?"text-green-600 bg-green-50":B>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",R=B=>B>=95?"High Confidence":B>=75?"Medium - Verify":"Low - Review",T=()=>{const B={};return l.trim()||(B.name="Name is required"),d&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)&&(B.email="Invalid email format"),!S&&!w.trim()&&(B.company="Company is required"),P(B),Object.keys(B).length===0},_=()=>{if(!T())return;const B={name:l,email:d.toLowerCase(),phone:f,role:m,linkedin:v};a(B,{name:w,website:j},S)};return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Zt,{className:"w-6 h-6"})})]}),t?.existingContact&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[n.jsx(Iu,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),n.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),n.jsx("div",{className:"mt-2 flex gap-2",children:n.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(qi,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:l,onChange:B=>c(B.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&e?.name?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${D(e.name.confidence)}`,children:R(e.name.confidence)})]}),A.name&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.name})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Xa,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",value:d,onChange:B=>u(B.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&e?.email?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${D(e.email.confidence)}`,children:R(e.email.confidence)})]}),A.email&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.email})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zj,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"tel",value:f,onChange:B=>p(B.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&e?.phone?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${D(e.phone.confidence)}`,children:R(e.phone.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Al,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:m,onChange:B=>b(B.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&e?.title?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${D(e.title.confidence)}`,children:R(e.title.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),n.jsxs("div",{className:"relative",children:[n.jsx(mh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:v,onChange:B=>g(B.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),n.jsxs("select",{value:S||"new",onChange:B=>{const U=B.target.value;if(U==="new")E(null);else{E(U);const H=o.find(Y=>Y.id===U);H&&(y(H.name),N(H.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(B=>n.jsx("option",{value:B.id,children:B.name},B.id))]}),A.company&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.company})]}),!S&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ul,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:w,onChange:B=>y(B.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),n.jsxs("div",{className:"relative",children:[n.jsx(hh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:j,onChange:B=>N(B.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:_,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(mn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},jie=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=jn(),[i,o]=I.useState("select"),[l,c]=I.useState(null),[d,u]=I.useState(null),[f,p]=I.useState(null),[m,b]=I.useState(null),[v,g]=I.useState(null),[w,y]=I.useState(!1),[j,N]=I.useState([]),[S,E]=I.useState([]),A=I.useRef(null),P=I.useRef(null),D=I.useRef(null),R=I.useRef(null);ft.useEffect(()=>{(async()=>{try{const[X,ee]=await Promise.all([wd(),vM(!0)]);N(X.data||[]),E(ee.data||[])}catch(X){console.error("Failed to load data:",X)}})()},[]);const T=async()=>{console.log("Camera button clicked - starting camera..."),g(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let re;try{console.log("Requesting rear camera..."),re=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),re=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",re),R.current=re,o("camera"),await new Promise(X=>setTimeout(X,100)),A.current){A.current.srcObject=re,console.log("Stream set to video element");try{await A.current.play(),console.log(" Camera started successfully")}catch(X){console.error("Video play error:",X)}}}catch(re){console.error(" Camera error:",re);let X="Camera access denied. Please grant camera permission or use file upload.";re.name==="NotAllowedError"?X="Camera permission denied. Please allow camera access in your browser settings.":re.name==="NotFoundError"?X="No camera found on this device. Please use file upload instead.":re.name==="NotReadableError"?X="Camera is already in use by another application.":re.name==="NotSupportedError"&&(X="Camera not supported on this browser. Please use file upload."),g(X),o("select"),_()}},_=()=>{R.current&&(R.current.getTracks().forEach(re=>re.stop()),R.current=null),A.current&&(A.current.srcObject=null)},B=()=>{if(!A.current||!P.current)return;const re=A.current,X=P.current,ee=X.getContext("2d");ee&&(X.width=re.videoWidth,X.height=re.videoHeight,ee.drawImage(re,0,0),X.toBlob(W=>{if(W){const O=new File([W],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(O),u(X.toDataURL("image/jpeg")),_(),H(O)}},"image/jpeg",.95))},U=re=>{const X=re.target.files;if(!X||X.length===0)return;const ee=X[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(ee.type)){g("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(ee.size>10*1024*1024){g("File too large. Maximum size is 10MB.");return}if(c(ee),ee.type.startsWith("image/")){const W=new FileReader;W.onload=O=>{u(O.target?.result)},W.readAsDataURL(ee)}H(ee)},H=async re=>{o("processing"),g(null),y(!0);try{const X=await hie(re,r);if(X.success)p(X.data.extractedData),b(X.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(X){console.error("Processing error:",X),g(X.message||"Failed to process business card. Please try again."),o("select")}finally{y(!1)}},Y=async(re,X,ee)=>{y(!0),g(null);try{const W=S.find(z=>z.name==="Business Card Scanner");if((await mie({contactData:re,companyData:X,linkToExistingCompany:ee,leadSourceId:W?.id||"",scanConfidenceScore:J(f),originalScanData:f,userId:r})).success)o("success"),a("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(W){console.error("Confirm error:",W),g(W.message||"Failed to create contact. Please try again."),s(W.message||"Failed to create contact")}finally{y(!1)}},J=re=>{if(!re)return 0;const X=[re.name?.confidence||0,re.email?.confidence||0,re.phone?.confidence||0,re.title?.confidence||0,re.company?.confidence||0].filter(ee=>ee>0);return X.length===0?0:Math.round(X.reduce((ee,W)=>ee+W,0)/X.length)};return ft.useEffect(()=>()=>{_()},[]),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(Zt,{className:"w-6 h-6"})})]}),v&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:v}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("button",{onClick:re=>{re.preventDefault(),console.log("Camera button clicked"),T()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[n.jsx(w6,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),n.jsxs("button",{onClick:()=>D.current?.click(),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[n.jsx(Oc,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),n.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),n.jsx("input",{ref:D,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:U,className:"hidden"})]}),i==="camera-loading"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(vt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),n.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&n.jsxs("div",{className:"relative bg-black",children:[n.jsx("video",{ref:A,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),n.jsx("canvas",{ref:P,className:"hidden"}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:n.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),n.jsx("div",{className:"absolute top-4 left-4",children:n.jsx("button",{onClick:()=>{_(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:n.jsx(eS,{className:"w-6 h-6 text-gray-700"})})}),n.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:n.jsx("button",{onClick:B,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:n.jsx(w6,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(vt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),d&&n.jsx("div",{className:"mt-6",children:n.jsx("img",{src:d,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&f&&n.jsx(yM,{extractedData:f,suggestions:m||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Y,onCancel:e,isProcessing:w,companies:j}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(mn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},kie=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=jn(),[i,o]=I.useState("input"),[l,c]=I.useState(""),[d,u]=I.useState(null),[f,p]=I.useState(null),[m,b]=I.useState(null),[v,g]=I.useState(!1),[w,y]=I.useState([]),[j,N]=I.useState([]);ft.useEffect(()=>{(async()=>{try{const[T,_]=await Promise.all([wd(),vM(!0)]);y(T.data||[]),N(_.data||[])}catch(T){console.error("Failed to load data:",T)}})()},[]);const S=R=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(R),E=R=>{let T=R.trim();return!T.startsWith("http://")&&!T.startsWith("https://")&&(T=`https://${T}`),T.includes("www.")||(T=T.replace("linkedin.com","www.linkedin.com")),T.replace(/\/$/,"")},A=R=>{c(R),b(null)},P=async()=>{if(!l.trim()){b("Please enter a LinkedIn URL");return}const R=E(l);if(!S(R)){b("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),b(null),g(!0);try{const T=await pie({linkedinUrl:R,userId:r});if(T.success)u(T.data.profile),p(T.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(T){console.error("Fetch error:",T);let _="Failed to fetch LinkedIn profile";T.message?.includes("Invalid LinkedIn URL")?_="Invalid LinkedIn URL format":T.message?.includes("private")?_="This LinkedIn profile is private and cannot be accessed":T.message?.includes("rate limit")&&(_="Rate limit exceeded. Please try again later"),b(_),o("input")}finally{g(!1)}},D=async(R,T,_)=>{g(!0),b(null);try{const B=j.find(H=>H.name==="LinkedIn Scanner");if((await xie({contactData:R,linkedinData:d?{headline:d.headline,currentRole:d.currentRole,profileImageUrl:d.profileImageUrl}:void 0,companyData:T,linkToExistingCompany:_,leadSourceId:B?.id||"",userId:r})).success)o("success"),a("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(B){console.error("Confirm error:",B),b(B.message||"Failed to create contact. Please try again."),s(B.message||"Failed to create contact")}finally{g(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(Zt,{className:"w-6 h-6"})})]}),m&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[n.jsx(Rn,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsx("div",{className:"text-red-800",children:m})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),n.jsxs("div",{className:"relative",children:[n.jsx(mh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:l,onChange:R=>A(R.target.value),onKeyPress:R=>R.key==="Enter"&&P(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Paste any public LinkedIn profile URL"}),n.jsx("li",{children:"We'll extract available contact and company information"}),n.jsx("li",{children:"Review and edit before saving to your CRM"}),n.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:P,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(mh,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(vt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&d&&n.jsx(yM,{extractedData:d,suggestions:f||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:D,onCancel:e,isProcessing:v,companies:w}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(mn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},J0=({value:e,onSave:t,type:r="text",options:a=[],placeholder:s="",disabled:i=!1,className:o="",displayValue:l,TagPicker:c,UserPicker:d,tags:u=[],assigneeId:f,users:p=[],tagsMap:m})=>{const[b,v]=I.useState(!1),[g,w]=I.useState(e||""),[y,j]=I.useState(!1),[N,S]=I.useState(!1),E=I.useRef(null),A=I.useRef(null),P=I.useRef(null),D=I.useCallback(async()=>{if(y)return;const U=g,H=e,Y=U===""?null:U;if(Y===(H===""?null:H)){v(!1);return}j(!0);try{await t(Y),v(!1),S(!0),setTimeout(()=>S(!1),2e3)}catch(re){console.error("Error saving cell:",re),j(!1)}},[y,g,e,t]),R=I.useCallback(()=>{w(e||""),v(!1)},[e]),T=U=>{if(i)return;U.stopPropagation();const H=e||"";w(H),P.current=H,v(!0)};I.useEffect(()=>{b&&E.current&&setTimeout(()=>{E.current&&(E.current.focus(),(r==="text"||r==="email"||r==="tel")&&E.current.select())},10)},[b,r]),I.useEffect(()=>{b||w(e||"")},[e,b]),I.useEffect(()=>{if(!b)return;let U;const H=J=>{if(A.current&&!A.current.contains(J.target)){const re=J.target;!re.closest("button")&&!re.closest("input")&&!re.closest("select")&&!re.closest(".editable-cell-actions")&&(clearTimeout(U),U=setTimeout(()=>{b&&!y&&D()},150))}},Y=setTimeout(()=>{document.addEventListener("mousedown",H,!0)},100);return()=>{clearTimeout(Y),clearTimeout(U),document.removeEventListener("mousedown",H,!0)}},[b,y,D]);const _=U=>{U.key==="Enter"&&!U.shiftKey?(U.preventDefault(),D()):U.key==="Escape"&&(U.preventDefault(),R())},B=l!==void 0?l:e||"-";return i?n.jsx("div",{className:`text-sm text-slate-600 ${o}`,children:B}):b?r==="select"&&a.length>0?n.jsxs("div",{ref:A,className:"relative",onClick:U=>U.stopPropagation(),children:[n.jsx("select",{ref:E,value:g,onChange:U=>{const H=U.target.value,Y=P.current||"",J=H===""?null:H,re=Y===""?null:Y;w(H),J!==re&&!y&&setTimeout(async()=>{if(!y){j(!0);try{await t(J),P.current=H,v(!1),S(!0),setTimeout(()=>S(!1),2e3)}catch(X){console.error("Error saving cell:",X),w(Y),j(!1)}}},100)},onKeyDown:_,onClick:U=>U.stopPropagation(),onBlur:U=>{const H=U.relatedTarget;(!H||!H.closest("select")&&!H.closest("option"))&&setTimeout(()=>{if(b&&!y){const Y=g===""?null:g,J=P.current===""||P.current===null?null:P.current;Y===J&&v(!1)}},200)},className:`text-sm border-2 border-indigo-500 rounded-lg px-2 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-indigo-200 ${o}`,disabled:y,autoFocus:!0,children:a.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))}),y&&n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:n.jsx(vt,{className:"w-3 h-3 animate-spin text-indigo-600"})})]}):r==="tags"&&c?n.jsx("div",{ref:A,className:"relative",children:n.jsx(c,{selectedTags:u,onTagsChange:U=>w(U),onSave:D,onCancel:R})}):r==="assignee"&&d?n.jsx("div",{ref:A,className:"relative",children:n.jsx(d,{selectedUserId:f,users:p,onUserChange:U=>w(U),onSave:D,onCancel:R})}):n.jsxs("div",{ref:A,className:"relative",onClick:U=>U.stopPropagation(),children:[n.jsx("input",{ref:E,type:r==="number"?"number":r==="email"?"email":r==="tel"?"tel":"text",value:g,onChange:U=>w(U.target.value),onKeyDown:_,onBlur:U=>{const H=U.relatedTarget;(!H||!H.closest("button")&&!H.closest(".editable-cell-actions"))&&setTimeout(()=>{b&&!y&&D()},150)},onClick:U=>U.stopPropagation(),placeholder:s,className:`text-sm border-2 border-indigo-500 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-200 ${o}`,disabled:y}),y&&n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:n.jsx(vt,{className:"w-3 h-3 animate-spin text-indigo-600"})})]}):n.jsxs("div",{onClick:T,onMouseDown:U=>U.stopPropagation(),className:`text-sm text-slate-600 cursor-pointer hover:bg-indigo-50 rounded px-2 py-1 transition-colors group relative ${o}`,title:"Click to edit",children:[N&&n.jsx("div",{className:"absolute -top-1 -right-1 animate-in zoom-in duration-200",children:n.jsx(mn,{className:"w-4 h-4 text-green-500"})}),B,n.jsx("span",{className:"opacity-0 group-hover:opacity-100 ml-2 text-xs text-indigo-500",children:""})]})},Sie=({columns:e,onColumnsChange:t,onReset:r,entityType:a})=>{const[s,i]=I.useState(e),[o,l]=I.useState(null);I.useEffect(()=>{i(e)},[e]);const c=m=>{const b=s.map(v=>v.key===m?{...v,visible:!v.visible}:v);i(b),t(b)},d=m=>{l(m)},u=(m,b)=>{if(m.preventDefault(),o===null)return;const v=s[o];if(v.locked)return;const g=[...s];g.splice(o,1),g.splice(b,0,v);const w=g.map((y,j)=>({...y,order:j}));i(w),l(b)},f=()=>{o!==null&&t(s),l(null)},p=[...s].sort((m,b)=>m.order-b.order);return n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-lg p-4 w-80 max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Columns"}),n.jsx("button",{onClick:()=>{const m=s.map(b=>({...b,visible:!0}));i(m),t(m)},className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold",children:"Show All"})]}),n.jsx("div",{className:"space-y-1 mb-4",children:p.map((m,b)=>n.jsxs("div",{draggable:!m.locked,onDragStart:()=>d(b),onDragOver:v=>u(v,b),onDragEnd:f,className:`flex items-center gap-2 p-2 rounded-lg transition-colors ${o===b?"bg-indigo-50":"hover:bg-slate-50"} ${m.locked?"opacity-60":""}`,children:[!m.locked&&n.jsx(Zl,{className:"w-4 h-4 text-slate-400 cursor-move"}),n.jsx("input",{type:"checkbox",checked:m.visible,onChange:()=>c(m.key),disabled:m.locked,className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 disabled:opacity-50"}),n.jsx("span",{className:`flex-1 text-sm ${m.locked?"font-bold":"font-medium"} text-slate-700`,children:m.label}),m.locked&&n.jsx("span",{className:"text-xs text-slate-400",children:"(locked)"})]},m.key))}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-2 text-sm font-semibold text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors",children:[n.jsx(bx,{className:"w-4 h-4"}),"Reset"]}),n.jsx("button",{onClick:()=>t(s),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply"})]})]})};var pp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_ie={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Cie=class{#e=_ie;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},uh=new Cie;function Aie(e){setTimeout(e,0)}var Eh=typeof window>"u"||"Deno"in globalThis;function jl(){}function Eie(e,t){return typeof e=="function"?e(t):e}function Nk(e){return typeof e=="number"&&e>=0&&e!==1/0}function wM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function y0(e,t){return typeof e=="function"?e(t):e}function ld(e,t){return typeof e=="function"?e(t):e}function TI(e,t){const{type:r="all",exact:a,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(a){if(t.queryHash!==f3(o,t.options))return!1}else if(!ng(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function OI(e,t){const{exact:r,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Th(t.options.mutationKey)!==Th(i))return!1}else if(!ng(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function f3(e,t){return(t?.queryKeyHashFn||Th)(e)}function Th(e){return JSON.stringify(e,(t,r)=>jk(r)?Object.keys(r).sort().reduce((a,s)=>(a[s]=r[s],a),{}):r)}function ng(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ng(e[r],t[r])):!1}var Tie=Object.prototype.hasOwnProperty;function NM(e,t,r=0){if(e===t)return e;if(r>500)return t;const a=PI(e)&&PI(t);if(!a&&!(jk(e)&&jk(t)))return t;const i=(a?e:Object.keys(e)).length,o=a?t:Object.keys(t),l=o.length,c=a?new Array(l):{};let d=0;for(let u=0;u<l;u++){const f=a?u:o[u],p=e[f],m=t[f];if(p===m){c[f]=p,(a?u<i:Tie.call(e,f))&&d++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){c[f]=m;continue}const b=NM(p,m,r+1);c[f]=b,b===p&&d++}return i===l&&d===i?e:c}function pb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function PI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function jk(e){if(!II(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!II(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function II(e){return Object.prototype.toString.call(e)==="[object Object]"}function Oie(e){return new Promise(t=>{uh.setTimeout(t,e)})}function kk(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?NM(e,t):t}function Pie(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function Iie(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var h3=Symbol();function jM(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===h3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function m3(e,t){return typeof e=="function"?e(...t):!!e}function Die(e,t,r){let a=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),a||(a=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var Lie=class extends pp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Eh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},p3=new Lie;function Sk(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function a(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},r.reject=s=>{a({status:"rejected",reason:s}),t(s)},r}var Fie=Aie;function Mie(){let e=[],t=0,r=l=>{l()},a=l=>{l()},s=Fie;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{a(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{s=l}}}var Bi=Mie(),Rie=class extends pp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Eh&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},xb=new Rie;function Bie(e){return Math.min(1e3*2**e,3e4)}function kM(e){return(e??"online")==="online"?xb.isOnline():!0}var _k=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function SM(e){let t=!1,r=0,a;const s=Sk(),i=()=>s.status!=="pending",o=v=>{if(!i()){const g=new _k(v);p(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>p3.isFocused()&&(e.networkMode==="always"||xb.isOnline())&&e.canRun(),u=()=>kM(e.networkMode)&&e.canRun(),f=v=>{i()||(a?.(),s.resolve(v))},p=v=>{i()||(a?.(),s.reject(v))},m=()=>new Promise(v=>{a=g=>{(i()||d())&&v(g)},e.onPause?.()}).then(()=>{a=void 0,i()||e.onContinue?.()}),b=()=>{if(i())return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{if(i())return;const y=e.retry??(Eh?0:3),j=e.retryDelay??Bie,N=typeof j=="function"?j(r,w):j,S=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,w);if(t||!S){p(w);return}r++,e.onFail?.(r,w),Oie(N).then(()=>d()?void 0:m()).then(()=>{t?p(w):b()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(a?.(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?b():m().then(b),s)}}var _M=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nk(this.gcTime)&&(this.#e=uh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Eh?1/0:300*1e3))}clearGcTimeout(){this.#e&&(uh.clearTimeout(this.#e),this.#e=void 0)}},Uie=class extends _M{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=LI(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=LI(this.options);t.data!==void 0&&(this.setState(DI(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=kk(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(jl).catch(jl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ld(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>y0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!wM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,a=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=jM(this.options,t),d=(()=>{const u={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return a(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=SM({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof _k&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof _k){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...CM(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,...DI(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Bi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function CM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function DI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function LI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var AM=class extends pp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=Sk(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#p;#f;#h;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),FI(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ck(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ck(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ld(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!pb(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&MI(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||ld(this.options.enabled,this.#t)!==ld(t.enabled,this.#t)||y0(this.options.staleTime,this.#t)!==y0(t.staleTime,this.#t))&&this.#x();const s=this.#g();a&&(this.#t!==r||ld(this.options.enabled,this.#t)!==ld(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return $ie(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#N();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(jl)),t}#x(){this.#y();const e=y0(this.options.staleTime,this.#t);if(Eh||this.#a.isStale||!Nk(e))return;const r=wM(this.#a.dataUpdatedAt,e)+1;this.#c=uh.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(Eh||ld(this.options.enabled,this.#t)===!1||!Nk(this.#l)||this.#l===0)&&(this.#d=uh.setInterval(()=>{(this.options.refetchIntervalInBackground||p3.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#v(this.#g())}#y(){this.#c&&(uh.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(uh.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,a=this.options,s=this.#a,i=this.#n,o=this.#i,c=e!==r?e.state:this.#r,{state:d}=e;let u={...d},f=!1,p;if(t._optimisticResults){const P=this.hasListeners(),D=!P&&FI(e,t),R=P&&MI(e,r,t,a);(D||R)&&(u={...u,...CM(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:b,status:v}=u;p=u.data;let g=!1;if(t.placeholderData!==void 0&&p===void 0&&v==="pending"){let P;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(P=s.data,g=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,P!==void 0&&(v="success",p=kk(s?.data,P,t),f=!0)}if(t.select&&p!==void 0&&!g)if(s&&p===i?.data&&t.select===this.#p)p=this.#f;else try{this.#p=t.select,p=t.select(p),p=kk(s?.data,p,t),this.#f=p,this.#s=null}catch(P){this.#s=P}this.#s&&(m=this.#s,p=this.#f,b=Date.now(),v="error");const w=u.fetchStatus==="fetching",y=v==="pending",j=v==="error",N=y&&w,S=p!==void 0,A={status:v,fetchStatus:u.fetchStatus,isPending:y,isSuccess:v==="success",isError:j,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:b,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!y,isLoadingError:j&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&S,isStale:x3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:ld(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=A.data!==void 0,D=A.status==="error"&&!P,R=B=>{D?B.reject(A.error):P&&B.resolve(A.data)},T=()=>{const B=this.#o=A.promise=Sk();R(B)},_=this.#o;switch(_.status){case"pending":e.queryHash===r.queryHash&&R(_);break;case"fulfilled":(D||A.data!==_.value)&&T();break;case"rejected":(!D||A.error!==_.reason)&&T();break}}return A}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),pb(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#j(e){Bi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function qie(e,t){return ld(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function FI(e,t){return qie(e,t)||e.state.data!==void 0&&Ck(e,t,t.refetchOnMount)}function Ck(e,t,r){if(ld(t.enabled,e)!==!1&&y0(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&x3(e,t)}return!1}function MI(e,t,r,a){return(e!==t||ld(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&x3(e,r)}function x3(e,t){return ld(t.enabled,e)!==!1&&e.isStaleByTime(y0(t.staleTime,e))}function $ie(e,t){return!pb(e.getCurrentResult(),t)}function gb(e){return{onFetch:(t,r)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const f=b=>{Die(b,()=>t.signal,()=>u=!0)},p=jM(t.options,t.fetchOptions),m=async(b,v,g)=>{if(u)return Promise.reject();if(v==null&&b.pages.length)return Promise.resolve(b);const y=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return f(E),E})(),j=await p(y),{maxPages:N}=t.options,S=g?Iie:Pie;return{pages:S(b.pages,j,N),pageParams:S(b.pageParams,v,N)}};if(s&&i.length){const b=s==="backward",v=b?EM:Ak,g={pages:i,pageParams:o},w=v(a,g);l=await m(g,w,b)}else{const b=e??i.length;do{const v=c===0?o[0]??a.initialPageParam:Ak(a,l);if(c>0&&v==null)break;l=await m(l,v),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function Ak(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function EM(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function zie(e,t){return t?Ak(e,t)!=null:!1}function Hie(e,t){return!t||!e.getPreviousPageParam?!1:EM(e,t)!=null}var Wie=class extends AM{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:gb()})}getOptimisticResult(e){return e.behavior=gb(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,a=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=a,c=r.fetchMeta?.fetchMore?.direction,d=o&&c==="forward",u=s&&c==="forward",f=o&&c==="backward",p=s&&c==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:zie(t,r.data),hasPreviousPage:Hie(t,r.data),isFetchNextPageError:d,isFetchingNextPage:u,isFetchPreviousPageError:f,isFetchingPreviousPage:p,isRefetchError:l&&!d&&!f,isRefetching:i&&!u&&!p}}},Vie=class extends _M{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||TM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=SM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",s=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Bi.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function TM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gie=class extends pp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new Vie({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=Tv(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Tv(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Tv(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=Tv(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bi.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>OI(t,r))}findAll(e={}){return this.getAll().filter(t=>OI(e,t))}notify(e){Bi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Bi.batch(()=>Promise.all(e.map(t=>t.continue().catch(jl))))}};function Tv(e){return e.options.scope?.id}var Kie=class extends pp{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),pb(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Th(r.mutationKey)!==Th(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??TM();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Bi.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,a,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,a,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},Xie=class extends pp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,s=t.queryHash??f3(a,t);let i=this.get(s);return i||(i=new Uie({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>TI(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>TI(e,r)):t}notify(e){Bi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Bi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yie=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Xie,this.#t=e.mutationCache||new Gie,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=p3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=xb.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(y0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(a.queryHash)?.state.data,o=Eie(t,i);if(o!==void 0)return this.#e.build(this,a).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Bi.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Bi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Bi.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Bi.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(a).then(jl).catch(jl)}invalidateQueries(e,t={}){return Bi.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Bi.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(jl)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(jl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(y0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(jl).catch(jl)}fetchInfiniteQuery(e){return e.behavior=gb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(jl).catch(jl)}ensureInfiniteQueryData(e){return e.behavior=gb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(Th(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{ng(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Th(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{ng(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=f3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===h3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},OM=I.createContext(void 0),Oa=e=>{const t=I.useContext(OM);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Jie=({client:e,children:t})=>(I.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(OM.Provider,{value:e,children:t})),PM=I.createContext(!1),Qie=()=>I.useContext(PM);PM.Provider;function Zie(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var eoe=I.createContext(Zie()),toe=()=>I.useContext(eoe),roe=(e,t,r)=>{const a=r?.state.error&&typeof e.throwOnError=="function"?m3(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))},noe=e=>{I.useEffect(()=>{e.clearReset()},[e])},aoe=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||m3(r,[e.error,a])),soe=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>r(a(...s)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ioe=(e,t)=>e.isLoading&&e.isFetching&&!t,ooe=(e,t)=>e?.suspense&&t.isPending,RI=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function IM(e,t,r){const a=Qie(),s=toe(),i=Oa(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",soe(o),roe(o,s,l),noe(s);const c=!i.getQueryCache().get(o.queryHash),[d]=I.useState(()=>new t(i,o)),u=d.getOptimisticResult(o),f=!a&&e.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(p=>{const m=f?d.subscribe(Bi.batchCalls(p)):jl;return d.updateResult(),m},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),I.useEffect(()=>{d.setOptions(o)},[o,d]),ooe(o,u))throw RI(o,d,s);if(aoe({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!Eh&&ioe(u,a)&&(c?RI(o,d,s):l?.promise)?.catch(jl).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?u:d.trackResult(u)}function ks(e,t){return IM(e,AM)}function ci(e,t){const r=Oa(),[a]=I.useState(()=>new Kie(r,e));I.useEffect(()=>{a.setOptions(e)},[a,e]);const s=I.useSyncExternalStore(I.useCallback(o=>a.subscribe(Bi.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=I.useCallback((o,l)=>{a.mutate(o,l).catch(jl)},[a]);if(s.error&&m3(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function loe(e,t){return IM(e,Wie)}const vy={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},coe=e=>ks({queryKey:vy.companies(e),queryFn:async()=>(await wd(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),doe=e=>ks({queryKey:vy.contacts(e),queryFn:async()=>(await Ah(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),uoe=()=>ks({queryKey:vy.deals(),queryFn:async()=>(await Ag()).data||[],staleTime:60*1e3,gcTime:600*1e3}),foe=()=>ks({queryKey:vy.users(),queryFn:async()=>(await Ic()).data||[],staleTime:300*1e3,gcTime:1800*1e3}),hoe=()=>{const e=Oa();return ci({mutationFn:async({id:t,updates:r})=>(await Q7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const a=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:a}},onError:(t,r,a)=>{a?.previousCompanies&&a.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},moe=()=>{const e=Oa();return ci({mutationFn:async({id:t,updates:r})=>(await eM(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const a=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:a}},onError:(t,r,a)=>{a?.previousContacts&&a.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},poe=()=>{const e=Oa();return ci({mutationFn:async t=>(await Z7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>a.id!==t))}})},xoe=()=>{const e=Oa();return ci({mutationFn:async t=>(await tM(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>a.id!==t))}})},goe=()=>{const e=Oa();return ci({mutationFn:async t=>(await Promise.all(t.map(r=>Z7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>!t.includes(a.id)))}})},voe=()=>{const e=Oa();return ci({mutationFn:async t=>(await Promise.all(t.map(r=>tM(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>!t.includes(a.id)))}})},boe=()=>{const e=Oa();return ci({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(a=>Q7(a,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},a=>a?.map(s=>t.includes(s.id)?{...s,...r}:s))}})},Hd=["playbooks"],Ns={templates:{all:()=>[...Hd,"templates"],lists:()=>[...Hd,"templates","list"],list:e=>[...Hd,"templates","list",e],details:()=>[...Hd,"templates","detail"],detail:e=>[...Hd,"templates","detail",e]},instances:{all:()=>[...Hd,"instances"],lists:()=>[...Hd,"instances","list"],list:e=>[...Hd,"instances","list",e],details:()=>[...Hd,"instances","detail"],detail:e=>[...Hd,"instances","detail",e],completions:e=>[...Hd,"instances","detail",e,"completions"]}},DM=e=>{const t=Oa();return I.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:Ns.templates.lists()})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[t]),ks({queryKey:Ns.templates.list(e),queryFn:async()=>{const r=await uae(e);return r.data||r||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:r=>r})},yoe=e=>ks({queryKey:Ns.templates.detail(e),queryFn:async()=>{const t=await fae(e);return t.data||t},enabled:!!e}),LM=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>{const s=await hae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Ns.templates.lists()}),e.refetchQueries({queryKey:Ns.templates.lists()}),t("Playbook template created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook template")}})},woe=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async({id:a,data:s})=>{const i=await mae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Ns.templates.lists()}),e.invalidateQueries({queryKey:Ns.templates.detail(s.id)}),e.refetchQueries({queryKey:Ns.templates.lists()}),t("Playbook template updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to update playbook template")}})},Noe=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>(await pae(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:Ns.templates.lists()}),t("Playbook template deleted successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to delete playbook template")}})},by=e=>ks({queryKey:Ns.instances.list(e),queryFn:async()=>{const t=await xae(e);return t.data||t||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:t=>t}),joe=e=>ks({queryKey:Ns.instances.detail(e),queryFn:async()=>{const t=await gae(e);return t.data||t},enabled:!!e}),koe=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>{const s=await vae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Ns.instances.lists()}),e.refetchQueries({queryKey:Ns.instances.lists()}),t("Playbook instance created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook instance")}})},Soe=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async({id:a,status:s})=>{const i=await bae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Ns.instances.lists()}),e.invalidateQueries({queryKey:Ns.instances.detail(s.id)}),t("Playbook instance status updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to update playbook instance status")}})},_oe=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async({instanceId:a,stepId:s})=>{const i=await yae(a,s);return i.data||i},onMutate:async({instanceId:a,stepId:s})=>{await e.cancelQueries({queryKey:Ns.instances.completions(a)});const i=e.getQueryData(Ns.instances.completions(a));return e.setQueryData(Ns.instances.completions(a),(o=[])=>{if(o.some(c=>c.stepId===s))return o;const l=JSON.parse(localStorage.getItem("user_data")||"{}");return[...o,{id:`temp-${Date.now()}`,instanceId:a,stepId:s,completedBy:l.id,completedAt:new Date().toISOString()}]}),{previousCompletions:i}},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Ns.instances.completions(s.instanceId)}),e.invalidateQueries({queryKey:Ns.instances.detail(s.instanceId)}),e.invalidateQueries({queryKey:Ns.instances.lists()}),t("Step marked as complete!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:(a,s,i)=>{i?.previousCompletions&&e.setQueryData(Ns.instances.completions(s.instanceId),i.previousCompletions),r(a.message||"Failed to mark step as complete")}})},Eg=e=>{const t=Oa();return I.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:Ns.instances.completions(e)})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[e,t]),ks({queryKey:Ns.instances.completions(e),queryFn:async()=>{const r=await wae(e);return r.data||r||[]},enabled:!!e,staleTime:0,refetchOnWindowFocus:!1})};const{entries:FM,setPrototypeOf:BI,isFrozen:Coe,getPrototypeOf:Aoe,getOwnPropertyDescriptor:Eoe}=Object;let{freeze:Tl,seal:vd,create:Ek}=Object,{apply:Tk,construct:Ok}=typeof Reflect<"u"&&Reflect;Tl||(Tl=function(t){return t});vd||(vd=function(t){return t});Tk||(Tk=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return t.apply(r,s)});Ok||(Ok=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return new t(...a)});const Ov=Ol(Array.prototype.forEach),Toe=Ol(Array.prototype.lastIndexOf),UI=Ol(Array.prototype.pop),Up=Ol(Array.prototype.push),Ooe=Ol(Array.prototype.splice),r1=Ol(String.prototype.toLowerCase),vj=Ol(String.prototype.toString),bj=Ol(String.prototype.match),qp=Ol(String.prototype.replace),Poe=Ol(String.prototype.indexOf),Ioe=Ol(String.prototype.trim),Xd=Ol(Object.prototype.hasOwnProperty),Nl=Ol(RegExp.prototype.test),$p=Doe(TypeError);function Ol(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return Tk(e,t,a)}}function Doe(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Ok(e,r)}}function Mn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r1;BI&&BI(e,null);let a=t.length;for(;a--;){let s=t[a];if(typeof s=="string"){const i=r(s);i!==s&&(Coe(t)||(t[a]=i),s=i)}e[s]=!0}return e}function Loe(e){for(let t=0;t<e.length;t++)Xd(e,t)||(e[t]=null);return e}function Cu(e){const t=Ek(null);for(const[r,a]of FM(e))Xd(e,r)&&(Array.isArray(a)?t[r]=Loe(a):a&&typeof a=="object"&&a.constructor===Object?t[r]=Cu(a):t[r]=a);return t}function zp(e,t){for(;e!==null;){const a=Eoe(e,t);if(a){if(a.get)return Ol(a.get);if(typeof a.value=="function")return Ol(a.value)}e=Aoe(e)}function r(){return null}return r}const qI=Tl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yj=Tl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wj=Tl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Foe=Tl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nj=Tl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Moe=Tl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$I=Tl(["#text"]),zI=Tl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),jj=Tl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),HI=Tl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pv=Tl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Roe=vd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Boe=vd(/<%[\w\W]*|[\w\W]*%>/gm),Uoe=vd(/\$\{[\w\W]*/gm),qoe=vd(/^data-[\-\w.\u00B7-\uFFFF]+$/),$oe=vd(/^aria-[\-\w]+$/),MM=vd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zoe=vd(/^(?:\w+script|data):/i),Hoe=vd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),RM=vd(/^html$/i),Woe=vd(/^[a-z][.\w]*(-[.\w]+)+$/i);var WI=Object.freeze({__proto__:null,ARIA_ATTR:$oe,ATTR_WHITESPACE:Hoe,CUSTOM_ELEMENT:Woe,DATA_ATTR:qoe,DOCTYPE_NAME:RM,ERB_EXPR:Boe,IS_ALLOWED_URI:MM,IS_SCRIPT_OR_DATA:zoe,MUSTACHE_EXPR:Roe,TMPLIT_EXPR:Uoe});const Hp={element:1,text:3,progressingInstruction:7,comment:8,document:9},Voe=function(){return typeof window>"u"?null:window},Goe=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let a=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(a=r.getAttribute(s));const i="dompurify"+(a?"#"+a:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},VI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function BM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Voe();const t=ve=>BM(ve);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Hp.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const a=r,s=a.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=e,b=c.prototype,v=zp(b,"cloneNode"),g=zp(b,"remove"),w=zp(b,"nextSibling"),y=zp(b,"childNodes"),j=zp(b,"parentNode");if(typeof o=="function"){const ve=r.createElement("template");ve.content&&ve.content.ownerDocument&&(r=ve.content.ownerDocument)}let N,S="";const{implementation:E,createNodeIterator:A,createDocumentFragment:P,getElementsByTagName:D}=r,{importNode:R}=a;let T=VI();t.isSupported=typeof FM=="function"&&typeof j=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_,ERB_EXPR:B,TMPLIT_EXPR:U,DATA_ATTR:H,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:J,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:X}=WI;let{IS_ALLOWED_URI:ee}=WI,W=null;const O=Mn({},[...qI,...yj,...wj,...Nj,...$I]);let z=null;const V=Mn({},[...zI,...jj,...HI,...Pv]);let q=Object.seal(Ek(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,se=null;const pe=Object.seal(Ek(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ie=!0,le=!0,$e=!1,he=!0,Ue=!1,Te=!0,oe=!1,te=!1,Pe=!1,je=!1,Ie=!1,ue=!1,de=!0,Ae=!1;const Qe="user-content-";let ge=!0,fe=!1,_e={},ze=null;const Se=Mn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fe=null;const Me=Mn({},["audio","video","img","source","image","track"]);let et=null;const ut=Mn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bt="http://www.w3.org/1998/Math/MathML",At="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let Gt=qt,Ye=!1,Et=null;const Cr=Mn({},[bt,At,qt],vj);let tr=Mn({},["mi","mo","mn","ms","mtext"]),Or=Mn({},["annotation-xml"]);const pr=Mn({},["title","style","font","a","script"]);let rt=null;const Dt=["application/xhtml+xml","text/html"],yr="text/html";let kr=null,Xr=null;const Sr=r.createElement("form"),pn=function(be){return be instanceof RegExp||be instanceof Function},rr=function(){let be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Xr&&Xr===be)){if((!be||typeof be!="object")&&(be={}),be=Cu(be),rt=Dt.indexOf(be.PARSER_MEDIA_TYPE)===-1?yr:be.PARSER_MEDIA_TYPE,kr=rt==="application/xhtml+xml"?vj:r1,W=Xd(be,"ALLOWED_TAGS")?Mn({},be.ALLOWED_TAGS,kr):O,z=Xd(be,"ALLOWED_ATTR")?Mn({},be.ALLOWED_ATTR,kr):V,Et=Xd(be,"ALLOWED_NAMESPACES")?Mn({},be.ALLOWED_NAMESPACES,vj):Cr,et=Xd(be,"ADD_URI_SAFE_ATTR")?Mn(Cu(ut),be.ADD_URI_SAFE_ATTR,kr):ut,Fe=Xd(be,"ADD_DATA_URI_TAGS")?Mn(Cu(Me),be.ADD_DATA_URI_TAGS,kr):Me,ze=Xd(be,"FORBID_CONTENTS")?Mn({},be.FORBID_CONTENTS,kr):Se,K=Xd(be,"FORBID_TAGS")?Mn({},be.FORBID_TAGS,kr):Cu({}),se=Xd(be,"FORBID_ATTR")?Mn({},be.FORBID_ATTR,kr):Cu({}),_e=Xd(be,"USE_PROFILES")?be.USE_PROFILES:!1,ie=be.ALLOW_ARIA_ATTR!==!1,le=be.ALLOW_DATA_ATTR!==!1,$e=be.ALLOW_UNKNOWN_PROTOCOLS||!1,he=be.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ue=be.SAFE_FOR_TEMPLATES||!1,Te=be.SAFE_FOR_XML!==!1,oe=be.WHOLE_DOCUMENT||!1,je=be.RETURN_DOM||!1,Ie=be.RETURN_DOM_FRAGMENT||!1,ue=be.RETURN_TRUSTED_TYPE||!1,Pe=be.FORCE_BODY||!1,de=be.SANITIZE_DOM!==!1,Ae=be.SANITIZE_NAMED_PROPS||!1,ge=be.KEEP_CONTENT!==!1,fe=be.IN_PLACE||!1,ee=be.ALLOWED_URI_REGEXP||MM,Gt=be.NAMESPACE||qt,tr=be.MATHML_TEXT_INTEGRATION_POINTS||tr,Or=be.HTML_INTEGRATION_POINTS||Or,q=be.CUSTOM_ELEMENT_HANDLING||{},be.CUSTOM_ELEMENT_HANDLING&&pn(be.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=be.CUSTOM_ELEMENT_HANDLING.tagNameCheck),be.CUSTOM_ELEMENT_HANDLING&&pn(be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),be.CUSTOM_ELEMENT_HANDLING&&typeof be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(le=!1),Ie&&(je=!0),_e&&(W=Mn({},$I),z=[],_e.html===!0&&(Mn(W,qI),Mn(z,zI)),_e.svg===!0&&(Mn(W,yj),Mn(z,jj),Mn(z,Pv)),_e.svgFilters===!0&&(Mn(W,wj),Mn(z,jj),Mn(z,Pv)),_e.mathMl===!0&&(Mn(W,Nj),Mn(z,HI),Mn(z,Pv))),be.ADD_TAGS&&(typeof be.ADD_TAGS=="function"?pe.tagCheck=be.ADD_TAGS:(W===O&&(W=Cu(W)),Mn(W,be.ADD_TAGS,kr))),be.ADD_ATTR&&(typeof be.ADD_ATTR=="function"?pe.attributeCheck=be.ADD_ATTR:(z===V&&(z=Cu(z)),Mn(z,be.ADD_ATTR,kr))),be.ADD_URI_SAFE_ATTR&&Mn(et,be.ADD_URI_SAFE_ATTR,kr),be.FORBID_CONTENTS&&(ze===Se&&(ze=Cu(ze)),Mn(ze,be.FORBID_CONTENTS,kr)),be.ADD_FORBID_CONTENTS&&(ze===Se&&(ze=Cu(ze)),Mn(ze,be.ADD_FORBID_CONTENTS,kr)),ge&&(W["#text"]=!0),oe&&Mn(W,["html","head","body"]),W.table&&(Mn(W,["tbody"]),delete K.tbody),be.TRUSTED_TYPES_POLICY){if(typeof be.TRUSTED_TYPES_POLICY.createHTML!="function")throw $p('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof be.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $p('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=be.TRUSTED_TYPES_POLICY,S=N.createHTML("")}else N===void 0&&(N=Goe(m,s)),N!==null&&typeof S=="string"&&(S=N.createHTML(""));Tl&&Tl(be),Xr=be}},On=Mn({},[...yj,...wj,...Foe]),Hr=Mn({},[...Nj,...Moe]),sn=function(be){let Ge=j(be);(!Ge||!Ge.tagName)&&(Ge={namespaceURI:Gt,tagName:"template"});const at=r1(be.tagName),yt=r1(Ge.tagName);return Et[be.namespaceURI]?be.namespaceURI===At?Ge.namespaceURI===qt?at==="svg":Ge.namespaceURI===bt?at==="svg"&&(yt==="annotation-xml"||tr[yt]):!!On[at]:be.namespaceURI===bt?Ge.namespaceURI===qt?at==="math":Ge.namespaceURI===At?at==="math"&&Or[yt]:!!Hr[at]:be.namespaceURI===qt?Ge.namespaceURI===At&&!Or[yt]||Ge.namespaceURI===bt&&!tr[yt]?!1:!Hr[at]&&(pr[at]||!On[at]):!!(rt==="application/xhtml+xml"&&Et[be.namespaceURI]):!1},jr=function(be){Up(t.removed,{element:be});try{j(be).removeChild(be)}catch{g(be)}},Gr=function(be,Ge){try{Up(t.removed,{attribute:Ge.getAttributeNode(be),from:Ge})}catch{Up(t.removed,{attribute:null,from:Ge})}if(Ge.removeAttribute(be),be==="is")if(je||Ie)try{jr(Ge)}catch{}else try{Ge.setAttribute(be,"")}catch{}},Ne=function(be){let Ge=null,at=null;if(Pe)be="<remove></remove>"+be;else{const Rt=bj(be,/^[\r\n\t ]+/);at=Rt&&Rt[0]}rt==="application/xhtml+xml"&&Gt===qt&&(be='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+be+"</body></html>");const yt=N?N.createHTML(be):be;if(Gt===qt)try{Ge=new p().parseFromString(yt,rt)}catch{}if(!Ge||!Ge.documentElement){Ge=E.createDocument(Gt,"template",null);try{Ge.documentElement.innerHTML=Ye?S:yt}catch{}}const wt=Ge.body||Ge.documentElement;return be&&at&&wt.insertBefore(r.createTextNode(at),wt.childNodes[0]||null),Gt===qt?D.call(Ge,oe?"html":"body")[0]:oe?Ge.documentElement:wt},He=function(be){return A.call(be.ownerDocument||be,be,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Be=function(be){return be instanceof f&&(typeof be.nodeName!="string"||typeof be.textContent!="string"||typeof be.removeChild!="function"||!(be.attributes instanceof u)||typeof be.removeAttribute!="function"||typeof be.setAttribute!="function"||typeof be.namespaceURI!="string"||typeof be.insertBefore!="function"||typeof be.hasChildNodes!="function")},xe=function(be){return typeof l=="function"&&be instanceof l};function Ce(ve,be,Ge){Ov(ve,at=>{at.call(t,be,Ge,Xr)})}const Re=function(be){let Ge=null;if(Ce(T.beforeSanitizeElements,be,null),Be(be))return jr(be),!0;const at=kr(be.nodeName);if(Ce(T.uponSanitizeElement,be,{tagName:at,allowedTags:W}),Te&&be.hasChildNodes()&&!xe(be.firstElementChild)&&Nl(/<[/\w!]/g,be.innerHTML)&&Nl(/<[/\w!]/g,be.textContent)||be.nodeType===Hp.progressingInstruction||Te&&be.nodeType===Hp.comment&&Nl(/<[/\w]/g,be.data))return jr(be),!0;if(!(pe.tagCheck instanceof Function&&pe.tagCheck(at))&&(!W[at]||K[at])){if(!K[at]&&ht(at)&&(q.tagNameCheck instanceof RegExp&&Nl(q.tagNameCheck,at)||q.tagNameCheck instanceof Function&&q.tagNameCheck(at)))return!1;if(ge&&!ze[at]){const yt=j(be)||be.parentNode,wt=y(be)||be.childNodes;if(wt&&yt){const Rt=wt.length;for(let sr=Rt-1;sr>=0;--sr){const Yt=v(wt[sr],!0);Yt.__removalCount=(be.__removalCount||0)+1,yt.insertBefore(Yt,w(be))}}}return jr(be),!0}return be instanceof c&&!sn(be)||(at==="noscript"||at==="noembed"||at==="noframes")&&Nl(/<\/no(script|embed|frames)/i,be.innerHTML)?(jr(be),!0):(Ue&&be.nodeType===Hp.text&&(Ge=be.textContent,Ov([_,B,U],yt=>{Ge=qp(Ge,yt," ")}),be.textContent!==Ge&&(Up(t.removed,{element:be.cloneNode()}),be.textContent=Ge)),Ce(T.afterSanitizeElements,be,null),!1)},tt=function(be,Ge,at){if(de&&(Ge==="id"||Ge==="name")&&(at in r||at in Sr))return!1;if(!(le&&!se[Ge]&&Nl(H,Ge))){if(!(ie&&Nl(Y,Ge))){if(!(pe.attributeCheck instanceof Function&&pe.attributeCheck(Ge,be))){if(!z[Ge]||se[Ge]){if(!(ht(be)&&(q.tagNameCheck instanceof RegExp&&Nl(q.tagNameCheck,be)||q.tagNameCheck instanceof Function&&q.tagNameCheck(be))&&(q.attributeNameCheck instanceof RegExp&&Nl(q.attributeNameCheck,Ge)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(Ge,be))||Ge==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Nl(q.tagNameCheck,at)||q.tagNameCheck instanceof Function&&q.tagNameCheck(at))))return!1}else if(!et[Ge]){if(!Nl(ee,qp(at,re,""))){if(!((Ge==="src"||Ge==="xlink:href"||Ge==="href")&&be!=="script"&&Poe(at,"data:")===0&&Fe[be])){if(!($e&&!Nl(J,qp(at,re,"")))){if(at)return!1}}}}}}}return!0},ht=function(be){return be!=="annotation-xml"&&bj(be,X)},ct=function(be){Ce(T.beforeSanitizeAttributes,be,null);const{attributes:Ge}=be;if(!Ge||Be(be))return;const at={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let yt=Ge.length;for(;yt--;){const wt=Ge[yt],{name:Rt,namespaceURI:sr,value:Yt}=wt,wr=kr(Rt),Pr=Yt;let $r=Rt==="value"?Pr:Ioe(Pr);if(at.attrName=wr,at.attrValue=$r,at.keepAttr=!0,at.forceKeepAttr=void 0,Ce(T.uponSanitizeAttribute,be,at),$r=at.attrValue,Ae&&(wr==="id"||wr==="name")&&(Gr(Rt,be),$r=Qe+$r),Te&&Nl(/((--!?|])>)|<\/(style|title|textarea)/i,$r)){Gr(Rt,be);continue}if(wr==="attributename"&&bj($r,"href")){Gr(Rt,be);continue}if(at.forceKeepAttr)continue;if(!at.keepAttr){Gr(Rt,be);continue}if(!he&&Nl(/\/>/i,$r)){Gr(Rt,be);continue}Ue&&Ov([_,B,U],Ur=>{$r=qp($r,Ur," ")});const fn=kr(be.nodeName);if(!tt(fn,wr,$r)){Gr(Rt,be);continue}if(N&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!sr)switch(m.getAttributeType(fn,wr)){case"TrustedHTML":{$r=N.createHTML($r);break}case"TrustedScriptURL":{$r=N.createScriptURL($r);break}}if($r!==Pr)try{sr?be.setAttributeNS(sr,Rt,$r):be.setAttribute(Rt,$r),Be(be)?jr(be):UI(t.removed)}catch{Gr(Rt,be)}}Ce(T.afterSanitizeAttributes,be,null)},xt=function ve(be){let Ge=null;const at=He(be);for(Ce(T.beforeSanitizeShadowDOM,be,null);Ge=at.nextNode();)Ce(T.uponSanitizeShadowNode,Ge,null),Re(Ge),ct(Ge),Ge.content instanceof i&&ve(Ge.content);Ce(T.afterSanitizeShadowDOM,be,null)};return t.sanitize=function(ve){let be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ge=null,at=null,yt=null,wt=null;if(Ye=!ve,Ye&&(ve="<!-->"),typeof ve!="string"&&!xe(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw $p("dirty is not a string, aborting")}else throw $p("toString is not a function");if(!t.isSupported)return ve;if(te||rr(be),t.removed=[],typeof ve=="string"&&(fe=!1),fe){if(ve.nodeName){const Yt=kr(ve.nodeName);if(!W[Yt]||K[Yt])throw $p("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof l)Ge=Ne("<!---->"),at=Ge.ownerDocument.importNode(ve,!0),at.nodeType===Hp.element&&at.nodeName==="BODY"||at.nodeName==="HTML"?Ge=at:Ge.appendChild(at);else{if(!je&&!Ue&&!oe&&ve.indexOf("<")===-1)return N&&ue?N.createHTML(ve):ve;if(Ge=Ne(ve),!Ge)return je?null:ue?S:""}Ge&&Pe&&jr(Ge.firstChild);const Rt=He(fe?ve:Ge);for(;yt=Rt.nextNode();)Re(yt),ct(yt),yt.content instanceof i&&xt(yt.content);if(fe)return ve;if(je){if(Ie)for(wt=P.call(Ge.ownerDocument);Ge.firstChild;)wt.appendChild(Ge.firstChild);else wt=Ge;return(z.shadowroot||z.shadowrootmode)&&(wt=R.call(a,wt,!0)),wt}let sr=oe?Ge.outerHTML:Ge.innerHTML;return oe&&W["!doctype"]&&Ge.ownerDocument&&Ge.ownerDocument.doctype&&Ge.ownerDocument.doctype.name&&Nl(RM,Ge.ownerDocument.doctype.name)&&(sr="<!DOCTYPE "+Ge.ownerDocument.doctype.name+`>
`+sr),Ue&&Ov([_,B,U],Yt=>{sr=qp(sr,Yt," ")}),N&&ue?N.createHTML(sr):sr},t.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};rr(ve),te=!0},t.clearConfig=function(){Xr=null,te=!1},t.isValidAttribute=function(ve,be,Ge){Xr||rr({});const at=kr(ve),yt=kr(be);return tt(at,yt,Ge)},t.addHook=function(ve,be){typeof be=="function"&&Up(T[ve],be)},t.removeHook=function(ve,be){if(be!==void 0){const Ge=Toe(T[ve],be);return Ge===-1?void 0:Ooe(T[ve],Ge,1)[0]}return UI(T[ve])},t.removeHooks=function(ve){T[ve]=[]},t.removeAllHooks=function(){T=VI()},t}var ag=BM();const Jp={all:["users"],lists:()=>[...Jp.all,"list"],list:e=>[...Jp.lists(),{search:e}],details:()=>[...Jp.all,"detail"],detail:e=>[...Jp.details(),e]},g3=e=>ks({queryKey:Jp.list(e),queryFn:async()=>{const t=await Ic(void 0);return Array.isArray(t)?t:t?.data&&Array.isArray(t.data)||t?.success&&t?.data&&Array.isArray(t.data)?t.data:[]},staleTime:300*1e3,refetchInterval:600*1e3,placeholderData:t=>t}),yy=({instanceId:e,isOpen:t,onClose:r})=>{const{showSuccess:a,showError:s}=jn(),[i,o]=I.useState(new Set),[l,c]=I.useState(new Set),[d,u]=I.useState(null),[f,p]=I.useState(new Map),m=I.useRef(!1),{data:b,isLoading:v}=joe(e),{data:g=[],isLoading:w}=Eg(e),{data:y=[]}=g3(),j=_oe(),N=Soe(),S=H=>y.find(J=>J.id===H)?.name||H;I.useEffect(()=>{if(b?.templateSnapshot?.sections){const H=b.templateSnapshot.sections.map(J=>String(J.id)).filter(Boolean),Y=new Set(H);o(Y)}},[b]);const E=I.useMemo(()=>{if(!b?.templateSnapshot?.sections)return{completed:0,total:0,percentage:0};let H=0;b.templateSnapshot.sections.forEach(re=>{re.steps&&(H+=re.steps.length)});const Y=g.length,J=H>0?Math.round(Y/H*100):0;return{completed:Y,total:H,percentage:J}},[b,g]);I.useEffect(()=>{b&&E.total>0&&E.completed>=E.total&&b.status!=="completed"&&!m.current&&!N.isPending&&(m.current=!0,N.mutate({id:e,status:"completed"})),b?.status==="completed"&&(m.current=!1)},[E.completed,E.total,b?.status,e,N.isPending]),I.useEffect(()=>{if(!N.isPending&&m.current){const H=setTimeout(()=>{b?.status==="completed"&&(m.current=!1)},500);return()=>clearTimeout(H)}},[N.isPending,b?.status]);const A=H=>g.some(Y=>Y.stepId===H),P=H=>g.find(Y=>Y.stepId===H),D=H=>{if(!H.steps)return{completed:0,total:0};const Y=H.steps.length;return{completed:H.steps.filter(re=>A(re.id)).length,total:Y}},R=H=>{o(Y=>{const J=new Set(Y);return J.has(H)?J.delete(H):J.add(H),J})},T=H=>{c(Y=>{const J=new Set(Y);return J.has(H)?J.delete(H):J.add(H),J})},_=async H=>{if(!A(H)){u(H);try{await j.mutateAsync({instanceId:e,stepId:H}),setTimeout(()=>{u(null)},300)}catch{u(null)}}},B=(H,Y)=>{const J=document.createElement("a");J.href=H,J.download=Y,J.target="_blank",document.body.appendChild(J),J.click(),document.body.removeChild(J)};if(!t)return null;const U=v||w;return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ii,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:b?.templateSnapshot?.name||"Loading..."}),(b?.templateSnapshot?.version||b?.templateVersion)&&n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Version ",b.templateSnapshot?.version||b.templateVersion]})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),!U&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:[E.completed," of ",E.total," steps complete"]}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[E.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all ${E.percentage===100?"bg-green-500":E.percentage>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${E.percentage}%`}})}),E.percentage===100&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(mn,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"text-xs font-semibold text-green-700",children:"All steps completed!"})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:U?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):b?.templateSnapshot?.sections?n.jsx("div",{className:"space-y-4",children:b.templateSnapshot.sections.sort((H,Y)=>(H.order||0)-(Y.order||0)).map(H=>{const Y=D(H),J=i.has(H.id);return n.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white",children:[n.jsxs("button",{onClick:()=>R(H.id),className:"w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform ${J?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:n.jsx(Ts,{className:`w-5 h-5 transition-transform ${J?"":"-rotate-90"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:H.name}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Y.completed," of ",Y.total," steps completed"]})]})]}),Y.completed===Y.total&&Y.total>0&&n.jsx(mn,{className:"w-5 h-5 text-green-500"})]}),J&&H.steps&&n.jsx("div",{className:"border-t border-slate-100 bg-slate-50/50",children:H.steps.sort((re,X)=>(re.order||0)-(X.order||0)).map(re=>{const X=A(re.id),ee=P(re.id),W=l.has(re.id);return n.jsxs("div",{className:"border-b border-slate-100 last:border-b-0",children:[n.jsxs("div",{className:"p-4 flex items-start gap-4",children:[n.jsx("div",{className:"pt-1",children:n.jsx("button",{onClick:()=>_(re.id),disabled:X||d===re.id||j.isPending,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${X?"bg-green-500 border-green-500 text-white":d===re.id?"bg-indigo-50 border-indigo-500":"bg-white border-slate-300 hover:border-indigo-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:d===re.id?n.jsx(vt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):X?n.jsx(_i,{className:"w-4 h-4"}):null})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:`text-sm font-semibold ${X?"text-slate-600 line-through":"text-slate-900"}`,children:re.name}),ee&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(qi,{className:"w-3 h-3 text-slate-400"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Completed by ",ee.completedBy?S(ee.completedBy):"Unknown"," on"," ",ee.completedAt?new Date(ee.completedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Unknown date"]})]})]}),(re.instructions||re.checklistItems?.length>0||re.attachments?.length>0)&&n.jsx("button",{onClick:()=>T(re.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(ia,{className:`w-4 h-4 text-slate-400 transition-transform ${W?"rotate-90":""}`})})]})})]}),W&&n.jsxs("div",{className:"px-4 pb-4 pl-14 space-y-4",children:[re.instructions&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2 flex items-center gap-2",children:[n.jsx(Gn,{className:"w-3.5 h-3.5"}),"Instructions"]}),n.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:ag.sanitize(re.instructions)}})]}),re.checklistItems&&re.checklistItems.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(Mb,{className:"w-3.5 h-3.5"}),"Checklist"]}),n.jsx("div",{className:"space-y-2",children:re.checklistItems.map((O,z)=>{`${re.id}${z}`;const q=(f.get(re.id)||new Set).has(z);return n.jsxs("div",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 rounded-lg p-1 -ml-1 transition-colors",onClick:()=>{const K=f.get(re.id)||new Set,se=new Set(K);q?se.delete(z):se.add(z),p(pe=>{const ie=new Map(pe);return se.size>0?ie.set(re.id,se):ie.delete(re.id),ie})},children:[n.jsx("div",{className:`w-4 h-4 rounded border-2 mt-0.5 flex-shrink-0 flex items-center justify-center transition-all ${q?"bg-green-500 border-green-500":"border-slate-300 hover:border-indigo-500"}`,children:q&&n.jsx(_i,{className:"w-3 h-3 text-white"})}),n.jsx("span",{className:`text-sm flex-1 ${q?"text-slate-500 line-through":"text-slate-700"}`,children:O})]},z)})})]}),re.attachments&&re.attachments.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(Gn,{className:"w-3.5 h-3.5"}),"Attachments"]}),n.jsx("div",{className:"space-y-2",children:re.attachments.map((O,z)=>n.jsx("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:O.type==="pdf"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center",children:n.jsx(Gn,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500",children:"PDF Document"})]}),n.jsx("button",{onClick:()=>B(O.url,O.name||"document.pdf"),className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Download PDF",children:n.jsx(Bu,{className:"w-4 h-4 text-indigo-600"})})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:n.jsx(c0,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name||"Google Drive File"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Google Drive"})]}),n.jsx("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-white rounded-lg transition-colors flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View in Google Drive",children:n.jsx(cs,{className:"w-4 h-4"})})]})},z))})]})]})]},re.id)})})]},H.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ii,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Playbook Data"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Unable to load playbook instance data."})]})}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:n.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm",children:"Close"})})]})})]})},Koe=[{value:"companyName",label:"Company Name",required:!0},{value:"domain",label:"Domain",required:!0},{value:"industry",label:"Industry",required:!1}],Xoe=[{value:"contactName",label:"Contact Name",required:!0},{value:"companyDomain",label:"Company Domain",required:!0},{value:"email",label:"Email",required:!1},{value:"phone",label:"Phone",required:!1},{value:"jobTitle",label:"Job Title",required:!1},{value:"linkedinUrl",label:"LinkedIn URL",required:!1}],Yoe={company:"companyName",organization:"companyName","business name":"companyName","company name":"companyName",website:"domain",domain:"domain",url:"domain",industry:"industry",segment:"industry",sector:"industry"},Joe={name:"contactName","contact name":"contactName","full name":"contactName","first name":"contactName","last name":"contactName","company domain":"companyDomain",domain:"companyDomain",website:"companyDomain","company website":"companyDomain",email:"email","email address":"email",phone:"phone","phone number":"phone","job title":"jobTitle",title:"jobTitle",position:"jobTitle",role:"jobTitle",linkedin:"linkedinUrl","linkedin url":"linkedinUrl","linkedin profile":"linkedinUrl"},Qoe=`Company,Website,Industry
Acme Corp,https://acme.com,Technology
Beta Inc,https://beta.io,Logistics
Gamma LLC,https://gamma.com,Healthcare
Delta Solutions,delta-solutions.com,Retail
Epsilon Group,www.epsilon-group.org,Technology`,Zoe=`Contact Name,Company Domain,Email,Phone,Job Title,LinkedIn URL
John Doe,acme.com,john.doe@acme.com,+1-555-0101,CEO,https://linkedin.com/in/johndoe
Jane Smith,beta.io,jane.smith@beta.io,+1-555-0102,CTO,https://linkedin.com/in/janesmith
Bob Johnson,gamma.com,bob.johnson@gamma.com,+1-555-0103,CFO,https://linkedin.com/in/bobjohnson`,ele=({onClose:e,onSuccess:t,type:r="company"})=>{const a=r,{showSuccess:s,showError:i}=jn(),[o,l]=I.useState(1),[c,d]=I.useState(null),[u,f]=I.useState(!1),[p,m]=I.useState(null),[b,v]=I.useState([]),[g,w]=I.useState(0),[y,j]=I.useState({}),[N,S]=I.useState(!1),[E,A]=I.useState(null),[P,D]=I.useState(!1),[R,T]=I.useState({}),[_,B]=I.useState({}),[U,H]=I.useState(!1),[Y,J]=I.useState(null),[re,X]=I.useState("all"),[ee,W]=I.useState(!1),[O,z]=I.useState(""),[V,q]=I.useState(!1),[K,se]=I.useState(null),pe=a==="contact"?Xoe:Koe,ie=a==="contact"?Joe:Yoe,le=a==="contact"?Zoe:Qoe,$e=()=>{const fe=new Blob([le],{type:"text/csv;charset=utf-8"}),_e=URL.createObjectURL(fe),ze=document.createElement("a");ze.href=_e,ze.download=`${a==="contact"?"contacts":"companies"}-sample.csv`,ze.click(),URL.revokeObjectURL(_e),s(`Sample CSV downloaded. Fill it with your ${a} data and upload.`)},he=async()=>{if(!O.trim()){se("Please enter a Google Sheets URL"),i("Please enter a Google Sheets URL");return}se(null),q(!0);try{const fe=await nse(O.trim(),a);if(!fe.success){const ze=fe.message||fe.error?.message||"Failed to load Google Sheets";console.log("[WIZARD] API returned error:",ze),se(ze),i(ze);return}const _e=fe.headers||[];if(_e.length===0){const ze="No columns found in the Google Sheet. Please ensure the first row contains column headers.";se(ze),i(ze);return}console.log("[WIZARD] Google Sheets loaded:",{uploadId:fe.uploadId,headers:_e.length,rows:fe.rowCount}),m(fe.uploadId),v(_e),w(fe.rowCount||0),se(null),l(2),s(`Google Sheets loaded successfully: ${_e.length} columns, ${fe.rowCount||0} rows`)}catch(fe){console.error("[WIZARD] Google Sheets error:",fe);let _e="Failed to load Google Sheets.";fe.data?.message&&typeof fe.data.message=="string"&&fe.data.message.trim()?_e=fe.data.message:fe.message&&typeof fe.message=="string"&&fe.message.trim()&&fe.message!=="Server Error 400"&&fe.message!=="Failed to load Google Sheets."&&fe.message!=="Failed to import Google Sheets"&&!fe.message.startsWith("Server Error")?_e=fe.message:fe.response?.data?.message?_e=fe.response.data.message:fe.response?.data?.error?.message?_e=fe.response.data.error.message:fe.data?.error?.message?_e=fe.data.error.message:fe.error?.message?_e=fe.error.message:fe.error?.data?.message?_e=fe.error.data.message:typeof fe=="string"&&(_e=fe),console.log("[WIZARD] Extracted error message:",_e),console.log("[WIZARD] Full error object:",JSON.stringify({message:fe.message,data:fe.data,response:fe.response?{status:fe.response.status,data:fe.response.data}:void 0,code:fe.code||fe.data?.code,error:fe.error},null,2)),se(_e),i(_e)}finally{q(!1)}},Ue=fe=>{const _e=fe.target.files?.[0];if(!_e)return;const ze=_e.name.toLowerCase();if(!ze.endsWith(".csv")&&!ze.endsWith(".xlsx")&&!ze.endsWith(".xls")){i("Please select a CSV or Excel (.xlsx) file.");return}d(_e)},Te=I.useCallback(async()=>{if(!c){i("Please select a file first.");return}f(!0);try{const fe=await rse(c,a);m(fe.uploadId),v(fe.headers||[]),w(fe.rowCount||0),j({}),S(!1),A(null),T({}),J(null),l(2)}catch(fe){i(fe?.message||"Upload failed")}finally{f(!1)}},[c,i]),oe=I.useCallback(()=>{const fe={};b.forEach(_e=>{const ze=(_e||"").trim().toLowerCase(),Se=ie[ze];Se&&(fe[_e]=Se)}),j(_e=>({..._e,...fe}))},[b,ie]),te=I.useCallback(async()=>{const fe=new Set(Object.values(y).filter(Boolean));if(a==="company"){if(!fe.has("companyName")||!fe.has("domain")){i("Please map both Company Name and Domain.");return}}else if(!fe.has("contactName")||!fe.has("companyDomain")){i("Please map both Contact Name and Company Domain.");return}if(p){W(!0);try{await ase(p,y),S(!0),l(3),D(!0);try{const _e=await sse(p);if(!_e.success){i(_e.message||"Failed to load preview"),A(null);return}A({summary:_e.summary||{total:0,new:0,updates:0,errors:0},rows:_e.rows||[],errors:_e.errors||[],companies:_e.companies||[]});const ze={};(_e.rows||[]).forEach(Se=>{(Se.status==="new"||Se.status==="update")&&(ze[String(Se.rowIndex-1)]=!1)}),T(ze),B({})}catch(_e){i(_e?.message||"Failed to load preview. Please try again."),A(null)}finally{D(!1)}}catch(_e){i(_e?.message||"Failed to save mapping")}finally{W(!1)}}},[p,y,i]),Pe=I.useCallback(()=>{if(!E?.errors?.length)return;const fe=["Row,Message",...E.errors.map(Fe=>`${Fe.rowIndex},${(Fe.message||"").replace(/"/g,'""')}`)],_e=new Blob([fe.join(`
`)],{type:"text/csv;charset=utf-8"}),ze=URL.createObjectURL(_e),Se=document.createElement("a");Se.href=ze,Se.download="import-errors.csv",Se.click(),URL.revokeObjectURL(ze)},[E?.errors]),je=I.useCallback(async()=>{if(p){if(a==="contact"&&E&&E.rows.some(_e=>_e.needsCompanySelection&&!_[String(_e.rowIndex-1)])){i("Please select a company for all contacts that require it.");return}if(E&&E.summary.errors>0&&E.errors.some(_e=>{const ze=E.rows.find(Se=>Se.rowIndex===_e.rowIndex);return ze&&!ze.needsCompanySelection})){i("Fix all errors before importing. Download the error report and correct your file.");return}H(!0);try{const fe=await ise(p,R,a==="contact"?_:void 0);J(fe.summary||{created:0,updated:0,targetAccounts:0,failed:0}),l(5),s(`Import complete: ${fe.summary?.created||0} created, ${fe.summary?.updated||0} updated.`),t?.()}catch(fe){i(fe?.message||"Import failed")}finally{H(!1)}}},[p,E,R,_,a,i,s,t]),Ie=E?.rows?.filter(fe=>re==="all"?!0:re==="error"?fe.status==="error"||fe.status==="needs_company_selection":fe.status===re)||[],ue=50,[de,Ae]=I.useState(0),Qe=Ie.slice(de*ue,(de+1)*ue),ge=Math.ceil(Ie.length/ue)||1;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center",children:n.jsx(ul,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Upload ",a==="contact"?"contacts":"companies"]}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Step ",o," of 5"]})]})]}),n.jsx("button",{type:"button",onClick:e,className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Upload a CSV or Excel file, or import from Google Sheets (max 1,000 rows). The first row will be used as headers."}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Need a template?"}),n.jsxs("button",{type:"button",onClick:$e,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 text-sm font-medium hover:bg-slate-50 hover:border-indigo-200 hover:text-indigo-700 transition-colors",children:[n.jsx(Bu,{className:"w-4 h-4"}),"Download sample CSV"]})]}),n.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vx,{className:"w-5 h-5 text-slate-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Import from Google Sheets"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Paste a Google Sheets URL. The sheet must be publicly accessible (Anyone with the link can view)."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"How to make your sheet publicly accessible:"}),n.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 ml-4 list-decimal",children:[n.jsx("li",{children:"Open your Google Sheet"}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:'"Share"'})," button (top right)"]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Change to anyone with the link"'})]}),n.jsxs("li",{children:["Set permission to ",n.jsx("strong",{children:'"Viewer"'})]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Done"'})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs flex-wrap",children:[n.jsx("span",{className:"text-slate-500",children:"Example URL format:"}),n.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-slate-700",children:"https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"(Make sure your sheet is publicly accessible)"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:O,onChange:fe=>{z(fe.target.value),se(null)},placeholder:"https://docs.google.com/spreadsheets/d/...",className:`flex-1 px-3 py-2 border rounded-lg text-sm ${K?"border-red-300 bg-red-50":"border-slate-200"}`}),n.jsxs("button",{type:"button",disabled:!O.trim()||V,onClick:he,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[V?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):null,"Import"]})]}),K&&n.jsx("div",{className:"p-4 bg-red-50 border-2 border-red-300 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Rn,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Sheet Not Accessible"}),n.jsx("p",{className:"text-sm text-red-800 whitespace-pre-line leading-relaxed",children:K}),(K.includes("publicly accessible")||K.includes("Access denied")||K.includes("SHEET_FETCH_FAILED"))&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[n.jsx("p",{className:"text-xs font-semibold text-red-900 mb-2",children:"Quick fix:"}),n.jsxs("ol",{className:"text-xs text-red-800 space-y-1.5 ml-4 list-decimal",children:[n.jsx("li",{children:"Open your Google Sheet in a new tab"}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:'"Share"'})," button (top right corner)"]}),n.jsxs("li",{children:['Change access from "Restricted" to ',n.jsx("strong",{children:'"Anyone with the link"'})]}),n.jsxs("li",{children:["Make sure the permission is set to ",n.jsx("strong",{children:'"Viewer"'})]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Done"'})," and try importing again"]})]})]})]}),n.jsx("button",{type:"button",onClick:()=>se(null),className:"shrink-0 p-1 hover:bg-red-100 rounded transition-colors","aria-label":"Dismiss error",children:n.jsx(Zt,{className:"w-4 h-4 text-red-600"})})]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-200"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Or"})})]}),n.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-colors",children:[n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:Ue,className:"hidden"}),c?n.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[n.jsx(vx,{className:"w-10 h-10 text-indigo-500"}),n.jsx("span",{className:"font-medium",children:c.name}),n.jsxs("span",{className:"text-slate-400 text-sm",children:["(",(c.size/1024).toFixed(1)," KB)"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Oc,{className:"w-10 h-10 text-slate-400 mb-2"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Click to select CSV or Excel file"})]})]}),n.jsxs("button",{type:"button",disabled:!c||u,onClick:Te,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[u?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):null,"Upload and continue"]})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Map your file columns to CRM fields. ",a==="contact"?"Contact Name and Company Domain":"Company Name and Domain"," are required."]}),b.length===0?n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-sm text-red-700",children:"No columns detected. Please go back and ensure your file has column headers in the first row."})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:oe,className:"text-sm font-medium text-indigo-600 hover:text-indigo-700",children:"Auto-map by column name"}),n.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"File column"}),n.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Maps to"})]})}),n.jsx("tbody",{children:b.map(fe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"p-3 text-slate-700",children:fe}),n.jsx("td",{className:"p-3",children:n.jsxs("select",{value:y[fe]||"",onChange:_e=>j(ze=>({...ze,[fe]:_e.target.value})),className:"w-full max-w-xs px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:" Ignore "}),pe.map(_e=>n.jsxs("option",{value:_e.value,children:[_e.label," ",_e.required?"(required)":""]},_e.value))]})})]},fe))})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l(1),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsxs("button",{type:"button",onClick:te,disabled:ee,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[ee&&n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Continue to preview"]})]})]}),o===3&&n.jsx("div",{className:"space-y-4",children:P?n.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-8",children:[n.jsx(vt,{className:"w-6 h-6 animate-spin"}),n.jsx("span",{children:"Validating and loading preview..."})]}):E&&E.rows&&E.rows.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total"}),n.jsx("p",{className:"text-lg font-bold text-slate-900",children:E.summary.total})]}),n.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-green-600",children:"New"}),n.jsx("p",{className:"text-lg font-bold text-green-700",children:E.summary.new})]}),n.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-blue-600",children:"Updates"}),n.jsx("p",{className:"text-lg font-bold text-blue-700",children:E.summary.updates})]}),n.jsxs("div",{className:"bg-red-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-red-600",children:"Errors"}),n.jsx("p",{className:"text-lg font-bold text-red-700",children:E.summary.errors})]})]}),E.summary.errors>0&&n.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[n.jsx(Rn,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Fix all errors before importing. Download the error report and re-upload a corrected file."})]}),n.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center gap-2 px-3 py-2 bg-white border border-red-200 rounded-lg text-red-700 text-sm font-medium",children:[n.jsx(Bu,{className:"w-4 h-4"}),"Download error report"]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Filter:"}),["all","new","update","error"].map(fe=>n.jsx("button",{type:"button",onClick:()=>{X(fe),Ae(0)},className:`px-3 py-1.5 rounded-lg text-sm font-medium ${re===fe?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:fe==="all"?"All":fe==="new"?"New":fe==="update"?"Existing":"Errors"},fe))]}),a==="contact"&&E?.rows.some(fe=>fe.needsCompanySelection)&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-xl",children:n.jsxs("p",{className:"text-sm text-amber-800",children:[n.jsx("strong",{children:"Note:"})," Some contacts need a company selected. Please select a company from the dropdown for each contact marked in red."]})}),n.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden max-h-64 overflow-y-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700 w-12",children:"Row"}),a==="contact"?n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Contact Name"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Company Domain"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Email"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Select Company"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Company"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Domain"})]}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Status"}),a==="company"&&n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Target account"})]})}),n.jsx("tbody",{children:Qe.map(fe=>{const _e=String(fe.rowIndex-1),ze=a==="contact"&&fe.needsCompanySelection,Se=_[_e]||"",Fe=fe.status==="error"||fe.status==="needs_company_selection";return n.jsxs("tr",{className:`border-t border-slate-100 ${Fe?"bg-red-50":""}`,children:[n.jsx("td",{className:"p-2 text-slate-500",children:fe.rowIndex}),a==="contact"?n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-2",children:fe.data?.contactName||""}),n.jsx("td",{className:"p-2",children:fe.originalCompanyDomain?n.jsx("span",{className:"text-red-600",title:"Company not found",children:fe.data?.companyDomain||""}):fe.data?.companyDomain||""}),n.jsx("td",{className:"p-2",children:fe.data?.email||""}),n.jsx("td",{className:"p-2",children:ze?n.jsxs("select",{value:Se,onChange:Me=>B(et=>({...et,[_e]:Me.target.value})),className:"w-full max-w-xs px-2 py-1.5 border border-red-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:" Select Company "}),E?.companies?.map(Me=>n.jsxs("option",{value:Me.id,children:[Me.name," ",Me.domain?`(${Me.domain})`:""]},Me.id))]}):n.jsx("span",{className:"text-slate-400 text-xs",children:""})})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-2",children:fe.data?.companyName||""}),n.jsx("td",{className:"p-2",children:fe.data?.domain||""})]}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Fe?"bg-red-100 text-red-700":fe.status==="new"?"bg-green-100 text-green-700":fe.status==="update"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:Fe?fe.status==="needs_company_selection"?"Needs Company":"Error":fe.status==="new"?"New":fe.status==="update"?"Existing":"Error"})}),a==="company"&&n.jsx("td",{className:"p-2",children:fe.status!=="error"&&n.jsx("input",{type:"checkbox",checked:R[_e]||!1,onChange:Me=>T(et=>({...et,[_e]:Me.target.checked})),className:"rounded border-slate-300"})})]},fe.rowIndex)})})]})}),ge>1&&n.jsxs("div",{className:"flex items-center gap-2 justify-center text-sm",children:[n.jsx("button",{type:"button",onClick:()=>Ae(fe=>Math.max(0,fe-1)),disabled:de===0,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50",children:"Prev"}),n.jsxs("span",{className:"text-slate-600",children:["Page ",de+1," of ",ge]}),n.jsx("button",{type:"button",onClick:()=>Ae(fe=>Math.min(ge-1,fe+1)),disabled:de>=ge-1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50",children:"Next"})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>l(2),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsx("button",{type:"button",disabled:a==="contact"&&E&&E.rows.some(ze=>ze.needsCompanySelection&&!_[String(ze.rowIndex-1)])?!0:E?.errors.some(_e=>{const ze=E.rows.find(Se=>Se.rowIndex===_e.rowIndex);return ze&&!ze.needsCompanySelection})||!1,onClick:()=>l(4),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50",children:"Next: Review merge rules"})]})]}):E&&E.summary?n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx(Rn,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"No rows to preview. Please check your file and try again."})]}):n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx(Rn,{className:"w-12 h-12 mx-auto mb-3 text-red-400"}),n.jsx("p",{className:"text-sm text-red-600",children:"Failed to load preview. Please go back and try again."}),n.jsx("button",{type:"button",onClick:()=>l(2),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Go Back"})]})}),o===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"How we match and merge"}),n.jsx("ul",{className:"text-sm text-slate-600 space-y-1 list-disc list-inside",children:a==="contact"?n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["Contacts are matched by ",n.jsx("strong",{children:"email + company"}),". Same email + company = update; new combination = create."]}),n.jsxs("li",{children:["We only ",n.jsx("strong",{children:"fill blank"})," fields. Existing values are never overwritten."]}),n.jsx("li",{children:"The company domain must exist in your CRM. Import companies first if needed."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["Companies are matched by ",n.jsx("strong",{children:"domain"})," (case-insensitive). Same domain = update; new domain = create."]}),n.jsxs("li",{children:["We only ",n.jsx("strong",{children:"fill blank"})," fields. Existing values are never overwritten."]}),n.jsx("li",{children:"Target account selection is applied to new and updated companies as you chose in the preview."})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l(3),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsxs("button",{type:"button",disabled:U||(E?.summary?.errors??0)>0,onClick:je,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[U?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(B8,{className:"w-4 h-4"}),"Import ",E?.summary?.total??0," companies"]})]})]}),o===5&&Y&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[n.jsx(mn,{className:"w-10 h-10 text-green-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-green-900",children:"Import completed"}),n.jsxs("p",{className:"text-sm text-green-700",children:[Y.created," created, ",Y.updated," updated, ",Y.targetAccounts," marked as target accounts."]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700",children:"Done"}),n.jsx("button",{type:"button",onClick:()=>{l(1),d(null),m(null),J(null)},className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Upload another file"})]})]})]})]})})},tle=({instance:e,deals:t,projects:r,onView:a})=>{const{data:s=[]}=Eg(e.id),i=e.templateSnapshot?.sections?.reduce((f,p)=>f+(p.steps?.length||0),0)||0,o=s.length,l=i>0?Math.round(o/i*100):0,c=e.dealId?t.find(f=>f.id===e.dealId):null,d=e.projectId?r.find(f=>f.id===e.projectId):null,u=c?{type:"Deal",name:c.title||c.name,id:c.id}:d?{type:"Project",name:d.title||d.name,id:d.id}:null;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(ii,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:e.templateSnapshot?.name||"Unknown Playbook"}),u&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.type==="Deal"?n.jsx(Al,{className:"w-3 h-3 text-slate-400"}):n.jsx(nu,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-xs text-slate-500 truncate",children:u.name})]})]})]}),l===100&&n.jsx(_i,{className:"w-5 h-5 text-green-500 shrink-0"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[o," / ",i," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[l,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${l===100?"bg-green-500":l>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${l}%`}})})]}),n.jsxs("button",{onClick:()=>{u?.type==="Deal"||u?.type,a(e.id)},className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View ",u?u.type:"Playbook",n.jsx(cs,{className:"w-3 h-3"})]})]})},rle=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:a=""})=>{const{showSuccess:s,showError:i}=jn(),o=Oa(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,d]=I.useState("companies"),[u,f]=I.useState("list"),[p,m]=I.useState(""),[b,v]=I.useState(""),[g,w]=I.useState(50),[y,j]=I.useState(1),[N,S]=I.useState([]),[E,A]=I.useState(null),[P,D]=I.useState(!1),[R,T]=I.useState(null),[_,B]=I.useState(null),[U,H]=I.useState(null),[Y,J]=I.useState(!1),{data:re=[],isLoading:X}=by({companyId:R?.id});I.useEffect(()=>{const ne=setTimeout(()=>{p.trim().length===0||p.trim().length>=2?(v(p.trim()),j(1)):(v(""),j(1))},300);return()=>clearTimeout(ne)},[p]);const{data:ee=[],isLoading:W,isError:O,refetch:z}=coe(b||void 0),{data:V=[],isLoading:q,isError:K,refetch:se}=doe(b||void 0),{data:pe=[],isLoading:ie}=uoe(),{data:le=[],isLoading:$e}=foe(),{data:he=[]}=ks({queryKey:["projects"],queryFn:async()=>{const ne=await D0();return ne.data||ne||[]},staleTime:300*1e3}),{data:Ue=[],isLoading:Te}=ks({queryKey:["tags",c],queryFn:async()=>(await zne(c==="contacts"?"contact":"company")).data||[],staleTime:300*1e3}),oe=I.useMemo(()=>{const ne=new Map;return Ue.forEach(We=>ne.set(We.id,We)),ne},[Ue]),{data:te=[],isLoading:Pe}=ks({queryKey:["savedViews",c],queryFn:async()=>(await Hne(c==="contacts"?"contact":"company")).data||[],staleTime:300*1e3});I.useEffect(()=>{S(te);const ne=te.find(We=>We.isDefault);ne&&A(ne.id)},[te]);const je=hoe(),Ie=moe(),ue=poe(),de=xoe(),Ae=goe(),Qe=voe(),ge=boe(),fe=W||q||ie||$e,[_e,ze]=I.useState([]),[Se,Fe]=I.useState([]),[Me,et]=I.useState([]),[ut,bt]=I.useState(!1),[At,qt]=I.useState(!1),[Gt,Ye]=I.useState({}),[Et,Cr]=I.useState(!1),[tr,Or]=I.useState(!1),[pr,rt]=I.useState({}),[Dt,yr]=I.useState("details"),[kr,Xr]=I.useState(!1),[Sr,pn]=I.useState(null),[rr,On]=I.useState(null),[Hr,sn]=I.useState(!1),[jr,Gr]=I.useState(!1),[Ne,He]=I.useState([]),[Be,xe]=I.useState([]),[Ce,Re]=I.useState(!1),[tt,ht]=I.useState(!1),[ct,xt]=I.useState(!1),[ve,be]=I.useState(!1),[Ge,at]=I.useState(null),[yt,wt]=I.useState({companies:[],contacts:[]}),[Rt,sr]=I.useState(null),[Yt,wr]=I.useState(!1),[Pr,$r]=I.useState(""),[fn,Ur]=I.useState(!1),[ea,Un]=I.useState(null),[gn,po]=I.useState(null),[va,Ke]=I.useState(!1),[Bt,It]=I.useState(""),[dr,Nr]=I.useState(0),[vr,Rr]=I.useState([]),[Pn,yn]=I.useState(""),[nr,fr]=I.useState(!1),[Mt,_r]=I.useState(null),[Kt,Na]=I.useState(null),[Pa,da]=I.useState(!1),[ir,en]=I.useState(""),[ja,Xn]=I.useState(0),[bn,Ar]=I.useState([]),[tn,lr]=I.useState(!1),[Hn,Wr]=I.useState(!1),[Ra,Wi]=I.useState(!1),[ui,hs]=I.useState(!1),[ms,Ai]=I.useState([{key:"name",label:"Name",locked:!0,visible:!0,order:0},{key:"email",label:"Email",visible:!0,order:1},{key:"organization",label:"Organization",visible:!0,order:2},{key:"phone",label:"Phone",visible:!0,order:3},{key:"role",label:"Role",visible:!0,order:4},{key:"tags",label:"Tags",visible:!0,order:5},{key:"assignee",label:"Assignee",visible:!0,order:6},{key:"domain",label:"Domain",visible:!0,order:7},{key:"created",label:"Created",visible:!1,order:8}]),[pl,jd]=I.useState([{key:"name",label:"Name",locked:!0,visible:!0,order:0},{key:"domain",label:"Domain",visible:!0,order:1},{key:"industry",label:"Industry",visible:!0,order:2},{key:"region",label:"Region",visible:!0,order:3},{key:"accountManager",label:"Account Manager",visible:!0,order:4},{key:"status",label:"Status",visible:!0,order:5},{key:"contactCount",label:"Contact Count",visible:!0,order:6},{key:"tags",label:"Tags",visible:!0,order:7},{key:"npsScore",label:"NPS Score",visible:!0,order:8}]),[xo,Vs]=I.useState(!1),[fi,Fo]=I.useState(!1),Mo=async()=>{Wi(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>Wi(!1),500)}};I.useEffect(()=>{a!==void 0&&m(a)},[a]),I.useEffect(()=>{He([]),xe([])},[c,p]),I.useEffect(()=>{const ne=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",ne),()=>window.removeEventListener("refresh-crm",ne)},[o]),I.useEffect(()=>{const ne=localStorage.getItem("crm_contact_columns"),We=localStorage.getItem("crm_company_columns");if(ne)try{Ai(JSON.parse(ne))}catch(Xe){console.error("Failed to load contact column preferences:",Xe)}if(We)try{jd(JSON.parse(We))}catch(Xe){console.error("Failed to load company column preferences:",Xe)}},[]);const Pl=async ne=>{if(R)try{await je.mutateAsync({id:R.id,updates:ne}),T({...R,...ne}),qt(!1),Fo(!1),s("Account updated")}catch{i("Update failed")}},Ss=async(ne,We,Xe,gt)=>{try{gt==="contact"?(await Ie.mutateAsync({id:Xe,updates:{[ne]:We}}),o.invalidateQueries({queryKey:["contacts"]}),_?.id===Xe&&B({..._,[ne]:We})):(await je.mutateAsync({id:Xe,updates:{[ne]:We}}),o.invalidateQueries({queryKey:["companies"]}),R?.id===Xe&&T({...R,[ne]:We})),s(`${ne} updated successfully`)}catch(jt){throw console.error("Inline cell save error:",jt),i(jt.message||"Failed to update"),jt}},lc=async()=>{if(!(!_||kr)){if(!pr.name||!pr.email){i("Name and Email are required fields");return}Xr(!0);try{const ne={...pr,companyId:pr.companyId===""?null:pr.companyId,phone:pr.phone===""?null:pr.phone,linkedin:pr.linkedin===""?null:pr.linkedin,role:pr.role===""?null:pr.role};await Ie.mutateAsync({id:_.id,updates:ne});const We={..._,...ne};B(We),Or(!1),Vs(!1),s("Contact profile updated successfully")}catch(ne){console.error("Contact update error:",ne),i(ne.message||"Failed to update contact. Please try again.")}finally{Xr(!1)}}};I.useEffect(()=>{if(!_||!tr){Vs(!1);return}const ne=JSON.stringify(pr)!==JSON.stringify(_);Vs(ne)},[pr,_,tr]),I.useEffect(()=>{if(!R||!At){Fo(!1);return}const ne=JSON.stringify(Gt)!==JSON.stringify(R);Fo(ne)},[Gt,R,At]);const Il=async ne=>{sn(!0);try{await ue.mutateAsync(ne),R?.id===ne&&(T(null),qt(!1)),pn(null),s("Company deleted successfully")}catch(We){i(We.message||"Failed to delete company")}finally{sn(!1)}},cc=async ne=>{Gr(!0);try{await de.mutateAsync(ne),_?.id===ne&&(B(null),Or(!1)),On(null),s("Contact deleted successfully")}catch(We){i(We.message||"Failed to delete contact")}finally{Gr(!1)}};I.useEffect(()=>{R?.id?(async()=>{try{wr(!0);const We=await bk(R.id);We.success&&sr(We.data)}catch{sr(null)}finally{wr(!1)}})():sr(null)},[R?.id]);const hi=()=>{T(null),qt(!1),$r(""),Ke(!1),sr(null)},Gs=()=>{B(null),Or(!1),yn(""),da(!1)},Ks=ne=>{const We=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Xe=[];let gt;for(;(gt=We.exec(ne))!==null;){const jt=gt[1].trim(),Tt=le.find(br=>br.name.toLowerCase()===jt.toLowerCase());Tt&&Xe.push(Tt.id)}return[...new Set(Xe)]},kd=ne=>{const We=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Xe=[];let gt=0,jt;for(;(jt=We.exec(ne))!==null;){jt.index>gt&&Xe.push(ne.substring(gt,jt.index));const Tt=jt[1].trim(),br=le.find(qr=>qr.name.toLowerCase()===Tt.toLowerCase());br?Xe.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",br.name]},jt.index)):Xe.push(`@${Tt}`),gt=jt.index+jt[0].length}return gt<ne.length&&Xe.push(ne.substring(gt)),Xe.length>0?Xe:ne},mi=ne=>{const We=ne.target.value,Xe=ne.target.selectionStart;$r(We),Nr(Xe);const gt=We.substring(0,Xe),jt=gt.lastIndexOf("@");if(jt!==-1){const Tt=gt.substring(jt+1),br=jt>0?gt[jt-1]:" ";if((br===" "||br===`
`||jt===0)&&!Tt.includes(" ")&&!Tt.includes(`
`)){It(Tt);const qr=le.filter(Kr=>Kr.name.toLowerCase().includes(Tt.toLowerCase())||Kr.email.toLowerCase().includes(Tt.toLowerCase()));Rr(qr.slice(0,5)),Ke(!0);return}}Ke(!1)},Xs=ne=>{const Xe=Pr.substring(0,dr).lastIndexOf("@"),gt=Pr.substring(dr),Tt=`${Pr.substring(0,Xe)}@${ne.name} ${gt}`;$r(Tt),Ke(!1)},Ro=async()=>{if(!(!R||!Pr.trim())){Ur(!0);try{const ne=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",We=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Xe={id:`note_${Date.now()}`,userId:ne,userName:We,text:Pr.trim(),createdAt:new Date().toISOString()},gt=[...R.notes||[],Xe];await je.mutateAsync({id:R.id,updates:{notes:gt}}),T({...R,notes:gt}),o.invalidateQueries({queryKey:["companies"]});const jt=Ks(Pr);for(const br of jt)try{await tp({userId:br,type:"mention",title:"You were mentioned in a company note",message:`${We} mentioned you in ${R.name}`,relatedId:R.id,relatedType:"company",read:!1})}catch(qr){console.error("Failed to send notification:",qr)}$r("");const Tt=jt.length>0?`Note added and ${jt.length} user(s) notified`:"Note added successfully";s(Tt)}catch(ne){i(ne.message||"Failed to add note")}finally{Ur(!1)}}},Ya=async()=>{if(!(!R||!l||!gn))try{Un(gn);const ne=R.notes?.filter(We=>We.id!==gn)||[];await je.mutateAsync({id:R.id,updates:{notes:ne}}),T({...R,notes:ne}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),po(null)}catch(ne){i(ne.message||"Failed to delete note")}finally{Un(null)}},Ei=ne=>{const We=ne.target.value,Xe=ne.target.selectionStart;yn(We),Xn(Xe);const gt=We.substring(0,Xe),jt=gt.lastIndexOf("@");if(jt!==-1){const Tt=gt.substring(jt+1),br=jt>0?gt[jt-1]:" ";if((br===" "||br===`
`||jt===0)&&!Tt.includes(" ")&&!Tt.includes(`
`)){en(Tt);const qr=le.filter(Kr=>Kr.name.toLowerCase().includes(Tt.toLowerCase())||Kr.email.toLowerCase().includes(Tt.toLowerCase()));Ar(qr.slice(0,5)),da(!0);return}}da(!1)},Vi=ne=>{const Xe=Pn.substring(0,ja).lastIndexOf("@"),gt=Pn.substring(ja),Tt=`${Pn.substring(0,Xe)}@${ne.name} ${gt}`;yn(Tt),da(!1)},dc=async()=>{if(!(!_||!Pn.trim())){fr(!0);try{const ne=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",We=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Xe={id:`note_${Date.now()}`,userId:ne,userName:We,text:Pn.trim(),createdAt:new Date().toISOString()},gt=[..._.notes||[],Xe];await Ie.mutateAsync({id:_.id,updates:{notes:gt}}),B({..._,notes:gt}),o.invalidateQueries({queryKey:["contacts"]});const jt=Ks(Pn);for(const br of jt)try{await tp({userId:br,type:"mention",title:"You were mentioned in a contact note",message:`${We} mentioned you in ${_.name}`,relatedId:_.id,relatedType:"contact",read:!1})}catch(qr){console.error("Failed to send notification:",qr)}yn("");const Tt=jt.length>0?`Note added and ${jt.length} user(s) notified`:"Note added successfully";s(Tt)}catch(ne){i(ne.message||"Failed to add note")}finally{fr(!1)}}},Dl=async()=>{if(!(!_||!l||!Kt))try{_r(Kt);const ne=_.notes?.filter(We=>We.id!==Kt)||[];await Ie.mutateAsync({id:_.id,updates:{notes:ne}}),B({..._,notes:ne}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),Na(null)}catch(ne){i(ne.message||"Failed to delete note")}finally{_r(null)}},go=I.useCallback(ne=>pe.some(We=>We.companyId===ne),[pe]),Dn=I.useMemo(()=>ee.filter(ne=>{if(_e.length>0){const We=_e.includes("target")&&ne.isTargetAccount,Xe=_e.includes("non-target")&&!ne.isTargetAccount;if(!We&&!Xe)return!1}if(Se.length>0){const We=Se.includes("assigned")&&ne.ownerId,Xe=Se.includes("unassigned")&&!ne.ownerId;if(!We&&!Xe)return!1}if(Me.length>0){const We=Me.includes("has-deals")&&go(ne.id),Xe=Me.includes("no-deals")&&!go(ne.id);if(!We&&!Xe)return!1}return!0}),[ee,_e,Se,Me,go]),_s=I.useMemo(()=>_e.length>0||Se.length>0||Me.length>0,[_e,Se,Me]),Gi=()=>{ze([]),Fe([]),et([])},Ki=(ne,We)=>{ne==="target"?ze(Xe=>Xe.includes(We)?Xe.filter(gt=>gt!==We):[...Xe,We]):ne==="assigned"?Fe(Xe=>Xe.includes(We)?Xe.filter(gt=>gt!==We):[...Xe,We]):ne==="deals"&&et(Xe=>Xe.includes(We)?Xe.filter(gt=>gt!==We):[...Xe,We])},Lc=()=>{Ne.length===Dn.length&&Dn.length>0?He([]):He(Dn.map(ne=>ne.id))},uc=()=>{Be.length===V.length?xe([]):xe(V.map(ne=>ne.id))},Ll=async()=>{Re(!0);try{const ne=[...Ne];await Ae.mutateAsync(ne),R&&ne.includes(R.id)&&(T(null),qt(!1)),He([]),wt({companies:[],contacts:[]}),at(null),s(`Successfully deleted ${ne.length} compan${ne.length>1?"ies":"y"}`)}catch(ne){i(ne.message||"Failed to delete companies")}finally{Re(!1)}},ua=async()=>{ht(!0);try{const ne=[...Be];await Qe.mutateAsync(ne),_&&ne.includes(_.id)&&(B(null),Or(!1)),xe([]),wt({companies:[],contacts:[]}),at(null),s(`Successfully deleted ${ne.length} contact${ne.length>1?"s":""}`)}catch(ne){i(ne.message||"Failed to delete contacts")}finally{ht(!1)}},Sd=async()=>{if(Ne.length!==0){xt(!0);try{const ne=[...Ne];await ge.mutateAsync({ids:ne,updates:{isTargetAccount:!0}}),R&&ne.includes(R.id)&&T({...R,isTargetAccount:!0}),He([]),s(`Successfully marked ${ne.length} compan${ne.length>1?"ies":"y"} as target account${ne.length>1?"s":""}`)}catch(ne){i(ne.message||"Failed to mark companies as target accounts")}finally{xt(!1)}}},xl=async()=>{if(Ne.length!==0){be(!0);try{const ne=[...Ne];await ge.mutateAsync({ids:ne,updates:{isTargetAccount:!1}}),R&&ne.includes(R.id)&&T({...R,isTargetAccount:!1}),He([]),s(`Successfully unmarked ${ne.length} compan${ne.length>1?"ies":"y"} as target account${ne.length>1?"s":""}`)}catch(ne){i(ne.message||"Failed to unmark companies as target accounts")}finally{be(!1)}}},Fc=async()=>{R&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},G=ne=>pe.filter(We=>We.companyId===ne&&We.stage!=="Won"&&We.stage!=="Lost").length,ke=ne=>ne?le.find(We=>We.id===ne)?.name||"Unknown":"Unassigned";return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),n.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[n.jsxs("button",{onClick:()=>{d("companies"),He([]),xe([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?Dn.length:ee.length,")"]}),n.jsxs("button",{onClick:()=>{d("contacts"),He([]),xe([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",V.length,")"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n.jsxs("button",{onClick:Mo,disabled:Ra,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[n.jsx(fd,{className:`w-4 h-4 ${Ra?"animate-spin":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),n.jsxs("button",{onClick:()=>J(!0),className:"px-3 sm:px-4 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm shrink-0",title:`Upload ${c==="companies"?"companies":"contacts"} from CSV, Excel, or Google Sheets`,children:[n.jsx(Oc,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Upload"})]}),n.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[n.jsx(Zr,{className:"w-4 h-4 shrink-0"})," ",n.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>lr(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[n.jsx(TU,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),n.jsxs("button",{onClick:()=>Wr(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[n.jsx(mh,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 border-b border-slate-200",children:[n.jsxs("button",{onClick:()=>{A(null)},className:`px-4 py-2 text-sm font-semibold rounded-lg whitespace-nowrap transition-colors ${E===null?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["All ",c==="companies"?"Companies":"Contacts"]}),N.map(ne=>n.jsx("button",{onClick:()=>{A(ne.id)},className:`px-4 py-2 text-sm font-semibold rounded-lg whitespace-nowrap transition-colors ${E===ne.id?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:ne.name},ne.id)),n.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 text-sm font-semibold rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors whitespace-nowrap flex items-center gap-1",children:[n.jsx(Zr,{className:"w-4 h-4"}),"New View"]})]}),n.jsxs("div",{className:"flex items-center gap-3 w-full min-w-0",children:[n.jsxs("div",{className:"relative group flex-1 min-w-0",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),n.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:p,onChange:ne=>{m(ne.target.value),j(1)},className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"}),p&&n.jsx("button",{onClick:()=>{m(""),j(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-100 rounded-lg transition-colors",title:"Clear search",children:n.jsx(Zt,{className:"w-4 h-4 text-slate-400"})}),(W||q)&&!p&&n.jsx(vt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-600 animate-spin"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>hs(!ui),className:"px-3 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all flex items-center gap-2 shrink-0",title:"Customize columns",children:[n.jsx(t4,{className:"w-4 h-4 text-slate-600"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700 hidden sm:inline",children:"Columns"})]}),ui&&n.jsx("div",{className:"absolute right-0 top-full mt-2 z-50",children:n.jsx(Sie,{columns:c==="contacts"?ms:pl,onColumnsChange:ne=>{c==="contacts"?(Ai(ne),localStorage.setItem("crm_contact_columns",JSON.stringify(ne))):(jd(ne),localStorage.setItem("crm_company_columns",JSON.stringify(ne)))},onReset:()=>{c==="contacts"?(Ai([{key:"name",label:"Name",locked:!0,visible:!0,order:0},{key:"email",label:"Email",visible:!0,order:1},{key:"organization",label:"Organization",visible:!0,order:2},{key:"phone",label:"Phone",visible:!0,order:3},{key:"role",label:"Role",visible:!0,order:4},{key:"tags",label:"Tags",visible:!0,order:5},{key:"assignee",label:"Assignee",visible:!0,order:6},{key:"domain",label:"Domain",visible:!0,order:7},{key:"created",label:"Created",visible:!1,order:8}]),localStorage.removeItem("crm_contact_columns")):(jd([{key:"name",label:"Name",locked:!0,visible:!0,order:0},{key:"domain",label:"Domain",visible:!0,order:1},{key:"industry",label:"Industry",visible:!0,order:2},{key:"region",label:"Region",visible:!0,order:3},{key:"accountManager",label:"Account Manager",visible:!0,order:4},{key:"status",label:"Status",visible:!0,order:5},{key:"contactCount",label:"Contact Count",visible:!0,order:6},{key:"tags",label:"Tags",visible:!0,order:7},{key:"npsScore",label:"NPS Score",visible:!0,order:8}]),localStorage.removeItem("crm_company_columns"))},entityType:c})})]}),n.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm shrink-0",children:[n.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded-lg transition-colors ${u==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400 hover:text-slate-600"}`,title:"Table View",children:n.jsx(M8,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>f("card"),className:`p-2 rounded-lg transition-colors ${u==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400 hover:text-slate-600"}`,title:"Card View",children:n.jsx(F8,{className:"w-4 h-4"})})]})]}),c==="companies"&&O||c==="contacts"&&K?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("p",{className:"text-sm text-amber-800",children:[c==="companies"?"Companies":"Contacts"," could not be loaded. Check your connection and try again."]}),n.jsxs("button",{type:"button",onClick:()=>{c==="companies"?z():se()},className:"shrink-0 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(fd,{className:"w-4 h-4"}),"Retry"]})]}):null,n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:fe,checked:c==="companies"?Dn.length>0&&Ne.length===Dn.length&&Dn.every(ne=>Ne.includes(ne.id)):V.length>0&&Be.length===V.length,onChange:c==="companies"?Lc:uc}),n.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>bt(!0),disabled:fe,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${_s?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[n.jsx(Nf,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"text-sm font-bold",children:"Filters"}),_s&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:_e.length+Se.length+Me.length})]}),n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:fe?"Loading...":`Showing ${Dn.length} of ${ee.length} companies`})]}):n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:fe?"Loading...":`Showing ${V.length} contact${V.length!==1?"s":""}`})}),ut&&c==="companies"&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[n.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(Nf,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),n.jsx("button",{onClick:()=>bt(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(am,{className:"w-4 h-4"}),"Target Account"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:_e.includes("target"),onChange:()=>Ki("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(am,{className:"w-4 h-4 text-amber-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[ee.filter(ne=>ne.isTargetAccount).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:_e.includes("non-target"),onChange:()=>Ki("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(ul,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[ee.filter(ne=>!ne.isTargetAccount).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ep,{className:"w-4 h-4"}),"Assignment"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Se.includes("assigned"),onChange:()=>Ki("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Ep,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[ee.filter(ne=>ne.ownerId).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Se.includes("unassigned"),onChange:()=>Ki("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Ru,{className:"w-4 h-4 text-orange-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[ee.filter(ne=>!ne.ownerId).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Al,{className:"w-4 h-4"}),"Deals"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Me.includes("has-deals"),onChange:()=>Ki("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Al,{className:"w-4 h-4 text-purple-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[ee.filter(ne=>go(ne.id)).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Me.includes("no-deals"),onChange:()=>Ki("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Al,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[ee.filter(ne=>!go(ne.id)).length," companies"]})]})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:Gi,disabled:!_s,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[n.jsx(Zt,{className:"w-4 h-4"}),"Clear All Filters"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Dn.length," of ",ee.length," companies"]}),n.jsx("button",{onClick:()=>bt(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),u==="list"?n.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[n.jsx("th",{className:"px-6 py-4 w-10",children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:c==="companies"?Dn.length>0&&Ne.length===Dn.length&&Dn.every(ne=>Ne.includes(ne.id)):V.length>0&&Be.length===V.length,onChange:c==="companies"?Lc:uc,disabled:fe})}),c==="companies"?n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Name"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Domain"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Region"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Account Manager"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Contact Count"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Tags"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"NPS Score"}),n.jsx("th",{className:"px-6 py-4 text-right"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Name"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Email"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Organization"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Phone"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Role"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Tags"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Assignee"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Domain"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Created"}),n.jsx("th",{className:"px-6 py-4 text-right"})]})]})}),n.jsx("tbody",{className:"divide-y divide-slate-50",children:fe?n.jsx("tr",{children:n.jsx("td",{colSpan:11,className:"py-10 text-center",children:n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):(c==="companies"?Dn:V).length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:11,className:"py-10 text-center text-slate-400 text-sm font-medium",children:["No ",c," found."]})}):(c==="companies"?Dn:V).map(ne=>{const We=c==="companies"?Ne.includes(ne.id):Be.includes(ne.id);if(c==="companies"){const Xe=ne,gt=le.find(jt=>jt.id===Xe.ownerId);return n.jsxs("tr",{onClick:()=>T(Xe),className:`group transition-colors cursor-pointer ${We?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-6 py-4",onClick:jt=>jt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:We,onChange:()=>He(jt=>We?jt.filter(Tt=>Tt!==Xe.id):[...jt,Xe.id])})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ps,{src:Xe.logo,fallbackText:Xe.name,className:"w-8 h-8 border border-slate-100 rounded-lg",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",title:Xe.name,children:Ql(Xe.name)||"-"}),Xe.isTargetAccount&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-amber-100 text-amber-700 text-[9px] font-black uppercase rounded",children:[n.jsx(am,{className:"w-2.5 h-2.5"})," Target"]})]})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Xe.domain||"-"}),n.jsx("td",{className:"px-6 py-4",onClick:jt=>jt.stopPropagation(),children:n.jsx(J0,{value:Xe.industry||"",onSave:async jt=>await Ss("industry",jt,Xe.id,"company"),type:"text",placeholder:"Industry",className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4",onClick:jt=>jt.stopPropagation(),children:n.jsx(J0,{value:Xe.region||"",onSave:async jt=>await Ss("region",jt||null,Xe.id,"company"),type:"select",options:[{value:"",label:"No Region"},{value:"North America",label:"North America"},{value:"South America",label:"South America"},{value:"Europe",label:"Europe"},{value:"Asia",label:"Asia"},{value:"Africa",label:"Africa"},{value:"Middle East",label:"Middle East"},{value:"Oceania",label:"Oceania"},{value:"Central America",label:"Central America"},{value:"Caribbean",label:"Caribbean"},{value:"Eastern Europe",label:"Eastern Europe"},{value:"Western Europe",label:"Western Europe"},{value:"Northern Europe",label:"Northern Europe"},{value:"Southern Europe",label:"Southern Europe"},{value:"Southeast Asia",label:"Southeast Asia"},{value:"East Asia",label:"East Asia"},{value:"South Asia",label:"South Asia"},{value:"Central Asia",label:"Central Asia"},{value:"North Africa",label:"North Africa"},{value:"Sub-Saharan Africa",label:"Sub-Saharan Africa"},{value:"Latin America",label:"Latin America"},{value:"United States",label:"United States"},{value:"Canada",label:"Canada"},{value:"Mexico",label:"Mexico"},{value:"United Kingdom",label:"United Kingdom"},{value:"Germany",label:"Germany"},{value:"France",label:"France"},{value:"Italy",label:"Italy"},{value:"Spain",label:"Spain"},{value:"Netherlands",label:"Netherlands"},{value:"Belgium",label:"Belgium"},{value:"Switzerland",label:"Switzerland"},{value:"Austria",label:"Austria"},{value:"Sweden",label:"Sweden"},{value:"Norway",label:"Norway"},{value:"Denmark",label:"Denmark"},{value:"Finland",label:"Finland"},{value:"Poland",label:"Poland"},{value:"Russia",label:"Russia"},{value:"China",label:"China"},{value:"Japan",label:"Japan"},{value:"India",label:"India"},{value:"South Korea",label:"South Korea"},{value:"Singapore",label:"Singapore"},{value:"Australia",label:"Australia"},{value:"New Zealand",label:"New Zealand"},{value:"Brazil",label:"Brazil"},{value:"Argentina",label:"Argentina"},{value:"Chile",label:"Chile"},{value:"United Arab Emirates",label:"United Arab Emirates"},{value:"Saudi Arabia",label:"Saudi Arabia"},{value:"Israel",label:"Israel"},{value:"South Africa",label:"South Africa"},{value:"Global",label:"Global"},{value:"International",label:"International"}],className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4",onClick:jt=>jt.stopPropagation(),children:n.jsx(J0,{value:Xe.ownerId||"",displayValue:gt?.name?Ql(gt.name):"Unassigned",onSave:async jt=>await Ss("ownerId",jt||null,Xe.id,"company"),type:"select",options:[{value:"",label:"Unassigned"},...le.map(jt=>({value:jt.id,label:Ql(jt.name)}))],className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-700",children:Xe.status||"Active"})}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Xe.contactCount||0}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[(Xe.tags||[]).length>0?(Xe.tags||[]).slice(0,3).map(jt=>{const Tt=oe.get(jt);return Tt?n.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded text-white",style:{backgroundColor:Tt.color},children:Tt.name},jt):null}).filter(Boolean):n.jsx("span",{className:"text-xs text-slate-400",children:"-"}),(Xe.tags||[]).length>3&&n.jsxs("span",{className:"text-xs text-slate-400",children:["+",(Xe.tags||[]).length-3]})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Xe.npsScore||"-"}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsx(ia,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 transition-colors"})})]},Xe.id)}else{const Xe=ne,gt=ee.find(Tt=>Tt.id===Xe.companyId),jt=le.find(Tt=>Tt.id===Xe.assigneeId);return n.jsxs("tr",{onClick:()=>B(Xe),className:`group transition-colors cursor-pointer ${We?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-6 py-4",onClick:Tt=>Tt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:We,onChange:()=>xe(Tt=>We?Tt.filter(br=>br!==Xe.id):[...Tt,Xe.id])})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:Ql(Xe.name).charAt(0)||"?"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",title:Xe.name,children:Ql(Xe.name)||"-"})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Xe.email||"-"}),n.jsx("td",{className:"px-6 py-4",onClick:Tt=>Tt.stopPropagation(),children:n.jsx(J0,{value:Xe.companyId||"",displayValue:gt?.name||Xe.organization||"-",onSave:async Tt=>{const br=ee.find(qr=>qr.id===Tt);await Ss("companyId",Tt||null,Xe.id,"contact"),br?await Ss("organization",br.name,Xe.id,"contact"):await Ss("organization",null,Xe.id,"contact")},type:"select",options:[{value:"",label:"No Organization"},...ee.map(Tt=>({value:Tt.id,label:Tt.name}))],className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4",onClick:Tt=>Tt.stopPropagation(),children:n.jsx(J0,{value:Xe.phone||"",onSave:async Tt=>await Ss("phone",Tt,Xe.id,"contact"),type:"tel",placeholder:"Phone",className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4",onClick:Tt=>Tt.stopPropagation(),children:n.jsx(J0,{value:Xe.role||"",onSave:async Tt=>await Ss("role",Tt,Xe.id,"contact"),type:"text",placeholder:"Role",className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[(Xe.tags||[]).length>0?(Xe.tags||[]).slice(0,3).map(Tt=>{const br=oe.get(Tt);return br?n.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded text-white",style:{backgroundColor:br.color},children:br.name},Tt):null}).filter(Boolean):n.jsx("span",{className:"text-xs text-slate-400",children:"-"}),(Xe.tags||[]).length>3&&n.jsxs("span",{className:"text-xs text-slate-400",children:["+",(Xe.tags||[]).length-3]})]})}),n.jsx("td",{className:"px-6 py-4",onClick:Tt=>Tt.stopPropagation(),children:n.jsx(J0,{value:Xe.assigneeId||"",displayValue:jt?.name?Ql(jt.name):"Unassigned",onSave:async Tt=>await Ss("assigneeId",Tt||null,Xe.id,"contact"),type:"select",options:[{value:"",label:"Unassigned"},...le.map(Tt=>({value:Tt.id,label:Ql(Tt.name)}))],className:"text-sm"})}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Xe.domain||"-"}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Xe.createdAt?new Date(Xe.createdAt).toLocaleDateString():"-"}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsx(ia,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 transition-colors"})})]},Xe.id)}})})]})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:fe?Array.from({length:8}).map((ne,We)=>n.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${We}`)):c==="companies"?Dn.map(ne=>{const We=le.find(gt=>gt.id===ne.ownerId),Xe=Ne.includes(ne.id);return n.jsxs("div",{onClick:()=>T(ne),className:`bg-white p-6 rounded-2xl border ${Xe?"border-indigo-400 bg-indigo-50/30":ne.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[ne.isTargetAccount&&n.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[n.jsx(am,{className:"w-2.5 h-2.5"})," Target Account"]}),n.jsx("div",{className:"absolute top-4 right-4",onClick:gt=>gt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Xe,onChange:()=>He(gt=>Xe?gt.filter(jt=>jt!==ne.id):[...gt,ne.id])})}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Ps,{src:ne.logo,fallbackText:ne.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",title:ne.name,children:Ql(ne.name)||"-"}),n.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ne.industry})]})]}),n.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hh,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate",children:ne.website||"No website"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qi,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate font-medium",children:We?.name?Ql(We.name):"Unassigned"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[G(ne.id)," Active Deals"]}),n.jsx(ia,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},ne.id)}):V.map(ne=>{const We=ee.find(gt=>gt.id===ne.companyId),Xe=Be.includes(ne.id);return n.jsxs("div",{onClick:()=>B(ne),className:`bg-white p-5 rounded-2xl border ${Xe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[n.jsx("div",{className:"absolute top-4 right-4",onClick:gt=>gt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Xe,onChange:()=>xe(gt=>Xe?gt.filter(jt=>jt!==ne.id):[...gt,ne.id])})}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:Ql(ne.name).charAt(0)||"?"}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",title:ne.name,children:Ql(ne.name)||"-"}),n.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[ne.role," @ ",Ql(We?.name)||"Partner"]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xa,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:ne.email})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zj,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-[13px]",children:ne.phone})]})]}),ne.linkedin&&n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsxs("a",{href:ne.linkedin,target:"_blank",rel:"noreferrer",onClick:gt=>gt.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[n.jsx(mh,{className:"w-4 h-4"}),"LinkedIn"]})})]},ne.id)})}),!fe&&(c==="companies"?Dn:V).length>0&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:["Showing ",Math.min((y-1)*g+1,(c==="companies"?Dn:V).length)," - ",Math.min(y*g,(c==="companies"?Dn:V).length)," of ",(c==="companies"?Dn:V).length]}),n.jsxs("select",{value:g,onChange:ne=>{w(Number(ne.target.value)),j(1)},className:"px-3 py-1.5 text-sm border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[n.jsx("option",{value:25,children:"25 per page"}),n.jsx("option",{value:50,children:"50 per page"}),n.jsx("option",{value:100,children:"100 per page"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>j(ne=>Math.max(1,ne-1)),disabled:y===1,className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),n.jsxs("span",{className:"px-4 py-2 text-sm font-semibold text-slate-700",children:["Page ",y," of ",Math.ceil((c==="companies"?Dn:V).length/g)||1]}),n.jsx("button",{onClick:()=>j(ne=>Math.min(Math.ceil((c==="companies"?Dn:V).length/g)||1,ne+1)),disabled:y>=Math.ceil((c==="companies"?Dn:V).length/g),className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]}),(c==="companies"&&Ne.length>0||c==="contacts"&&Be.length>0)&&n.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?Ne.length:Be.length}),"Selected"]}),n.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[n.jsxs("button",{onClick:ne=>{ne.stopPropagation(),showInfo("Assign owner feature - coming soon")},className:"px-3 sm:px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 shrink-0",title:"Assign Owner",children:[n.jsx(Ep,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Assign Owner"})]}),c==="companies"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:ne=>{ne.stopPropagation(),Sd()},disabled:ct||ve,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[ct?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(am,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),n.jsxs("button",{onClick:ne=>{ne.stopPropagation(),xl()},disabled:ct||ve,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[ve?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Ru,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),n.jsxs("button",{onClick:ne=>{ne.stopPropagation(),showInfo("Edit field feature - coming in Phase 3")},className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 shrink-0",title:"Edit Field",children:[n.jsx(Zv,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Edit Field"})]}),n.jsxs("button",{onClick:ne=>{ne.stopPropagation(),wt(c==="companies"?{companies:ee.filter(We=>Ne.includes(We.id)),contacts:[]}:{companies:[],contacts:V.filter(We=>Be.includes(We.id))}),at(c)},disabled:c==="companies"?Ce:tt,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?Ce:tt)?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Lr,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),n.jsx("button",{onClick:()=>{c==="companies"?He([]):xe([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]})}),R&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:hi}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Ps,{src:R.logo,fallbackText:R.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:R.name}),n.jsx("button",{onClick:()=>Pl({isTargetAccount:!R.isTargetAccount}),className:`p-1 rounded-lg transition-all ${R.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:n.jsx(am,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-500",children:R.industry})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[At?null:n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{Ye({...R}),qt(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:n.jsx(Zv,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>pn(R),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:n.jsx(Lr,{className:"w-5 h-5"})})]}),n.jsx("button",{onClick:hi,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),At&&fi&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t-2 border-indigo-500 shadow-2xl p-4 animate-in slide-in-from-bottom duration-300",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Iu,{className:"w-5 h-5 text-amber-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Unsaved changes"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{qt(!1),Ye({...R}),Fo(!1)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2",children:[n.jsx(Zt,{className:"w-3.5 h-3.5"})," Cancel"]}),n.jsxs("button",{onClick:async()=>{await Pl(Gt)},className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[n.jsx(oi,{className:"w-3.5 h-3.5"})," Save Changes"]})]})]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[At?n.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),n.jsx("input",{type:"text",value:Gt.name,onChange:ne=>Ye({...Gt,name:ne.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),n.jsx("input",{type:"text",value:Gt.industry,onChange:ne=>Ye({...Gt,industry:ne.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),n.jsxs("select",{value:Gt.ownerId,onChange:ne=>Ye({...Gt,ownerId:ne.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"",children:"Unassigned"}),le.map(ne=>n.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),n.jsx("input",{type:"text",value:Gt.website,onChange:ne=>Ye({...Gt,website:ne.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),n.jsx("input",{type:"text",value:Gt.linkedin,onChange:ne=>Ye({...Gt,linkedin:ne.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),n.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[n.jsx(qi,{className:"w-4 h-4"})," ",ke(R.ownerId)]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),n.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${R.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:R.isTargetAccount?"Target Account":"Standard Account"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(au,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),n.jsxs("button",{onClick:Fc,disabled:Et,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[Et?n.jsx(vt,{className:"w-3 h-3 animate-spin"}):n.jsx(FU,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),n.jsxs("div",{className:"space-y-3",children:[Et&&n.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),n.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!R.socialSignals||R.socialSignals.length===0)&&!Et?n.jsxs("div",{className:"py-12 text-center text-slate-400",children:[n.jsx(au,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),n.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(R.socialSignals||[]).map(ne=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${ne.type==="funding"?"bg-emerald-50 text-emerald-600":ne.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[ne.type==="funding"&&n.jsx(B8,{className:"w-4 h-4"}),ne.type==="hiring"&&n.jsx(hd,{className:"w-4 h-4"}),ne.type==="acquisition"&&n.jsx(h1,{className:"w-4 h-4"}),ne.type==="news"&&n.jsx(CU,{className:"w-4 h-4"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-sm text-slate-900",children:ne.title}),ne.isAiGenerated&&n.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[n.jsx(Ri,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:ne.date})]}),n.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:ne.description})]},ne.id))]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(jf,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),Rt&&n.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",n.jsx(ia,{className:"w-3 h-3"})]})]}),Yt?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(vt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):Rt?n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-2xl border-2 ${Rt.latestNpsScore>=9?"bg-green-50 border-green-200":Rt.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":Rt.latestNpsScore!==void 0&&Rt.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),Rt.latestNpsScore!==void 0&&Rt.latestNpsScore!==null?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-2xl font-black ${Rt.latestNpsScore>=9?"text-green-600":Rt.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:Rt.latestNpsScore}),Rt.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${Rt.npsCategory==="Promoter"?"bg-green-100 text-green-700":Rt.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Rt.npsCategory})]}):n.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),Rt.lastSurveyDate?n.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[n.jsx(Kn,{className:"w-4 h-4"}),new Date(Rt.lastSurveyDate).toLocaleDateString()]}):n.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):n.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:n.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ii,{className:"w-4 h-4 text-indigo-500"}),"Playbooks",re.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:re.length})]}),X?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(vt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):re.length>0?n.jsx("div",{className:"space-y-3",children:re.map(ne=>n.jsx(tle,{instance:ne,deals:pe,projects:he,onView:We=>H(We)},ne.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(ii,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to deals or projects for this company."})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",R.notes&&R.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:R.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:3,value:Pr,onChange:mi,onBlur:()=>setTimeout(()=>Ke(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),va&&vr.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(Nh,{className:"w-3 h-3"}),"Mention User"]}),vr.map(ne=>n.jsxs("button",{onClick:()=>Xs(ne),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ne.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ne.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:ne.email})]})]},ne.id))]})})]}),n.jsx("button",{onClick:Ro,disabled:fn||!Pr.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:fn?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-4 h-4"}),"Send"]})})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:R.notes&&R.notes.length>0?[...R.notes].reverse().map(ne=>{const We=l?.role==="Admin"||ne.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:ne.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ne.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ne.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),We&&n.jsx("button",{onClick:()=>po(ne.id),disabled:ea===ne.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:ea===ne.id?n.jsx(vt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ne.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:kd(ne.text)})]},ne.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),n.jsx("div",{className:"space-y-3",children:V.filter(ne=>ne.companyId===R.id).map(ne=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>B(ne),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:Ql(ne.name).charAt(0)||"?"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",title:ne.name,children:Ql(ne.name)||"-"}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:ne.role})]})]}),n.jsx(ia,{className:"w-4 h-4 text-slate-300"})]},ne.id))})]})]})]})]}),_&&n.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Gs}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Gs,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:_.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:_.name}),n.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[_.role," @ ",ee.find(ne=>ne.id===_.companyId)?.name||"Direct Contact"]}),n.jsx("div",{className:"flex gap-2 mt-4",children:tr?null:n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{rt({..._}),Or(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[n.jsx(Zv,{className:"w-3.5 h-3.5"})," Edit Profile"]}),n.jsx("a",{href:`mailto:${_.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:n.jsx(Xa,{className:"w-4 h-4"})}),_.linkedin&&n.jsx("a",{href:_.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:n.jsx(mh,{className:"w-4 h-4"})})]})}),tr&&xo&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t-2 border-indigo-500 shadow-2xl p-4 animate-in slide-in-from-bottom duration-300",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Iu,{className:"w-5 h-5 text-amber-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Unsaved changes"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{Or(!1),rt({..._}),Vs(!1)},disabled:kr,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Zt,{className:"w-3.5 h-3.5"})," Cancel"]}),n.jsx("button",{onClick:lc,disabled:kr,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:kr?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-3.5 h-3.5"})," Save Changes"]})})]})]})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:n.jsx(w0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:n.jsx(Gn,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:n.jsx(ud,{className:"w-3.5 h-3.5"})}].map(ne=>n.jsxs("button",{onClick:()=>{yr(ne.id),Or(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${Dt===ne.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[ne.icon," ",ne.label]},ne.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[Dt==="details"&&n.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:tr?n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"text",value:pr.name||"",onChange:ne=>rt({...pr,name:ne.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),n.jsx("input",{type:"text",value:pr.role||"",onChange:ne=>rt({...pr,role:ne.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),n.jsxs("select",{value:pr.companyId||"",onChange:ne=>rt({...pr,companyId:ne.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"No Organization"}),ee.map(ne=>n.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[n.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"email",value:pr.email||"",onChange:ne=>rt({...pr,email:ne.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),n.jsx("input",{type:"tel",value:pr.phone||"",onChange:ne=>rt({...pr,phone:ne.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),n.jsx("input",{type:"url",value:pr.linkedin||"",onChange:ne=>rt({...pr,linkedin:ne.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),n.jsx(Xa,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:_.email}),n.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),n.jsx(Zj,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:_.phone||"Registry Pending"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ul,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),n.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[n.jsx(Ps,{src:ee.find(ne=>ne.id===_.companyId)?.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:ee.find(ne=>ne.id===_.companyId)?.name||"Independent Partner"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:ee.find(ne=>ne.id===_.companyId)?.industry||"Uncategorized"}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),n.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),n.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:n.jsx(cs,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[n.jsx(Ep,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),n.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[n.jsx(f1,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),Dt==="notes"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",_.notes&&_.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:_.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:4,value:Pn,onChange:Ei,onBlur:()=>setTimeout(()=>da(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),Pa&&bn.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(Nh,{className:"w-3 h-3"}),"Mention User"]}),bn.map(ne=>n.jsxs("button",{onClick:()=>Vi(ne),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ne.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ne.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:ne.email})]})]},ne.id))]})})]}),n.jsx("button",{onClick:dc,disabled:nr||!Pn.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:nr?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-4 h-4"}),"Send"]})})]}),_.legacyNotes&&n.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(w0,{className:"w-4 h-4 text-amber-600"}),n.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),n.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:_.legacyNotes})]}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:_.notes&&_.notes.length>0?[..._.notes].reverse().map(ne=>{const We=l?.role==="Admin"||ne.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:ne.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ne.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ne.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),We&&n.jsx("button",{onClick:()=>Na(ne.id),disabled:Mt===ne.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Mt===ne.id?n.jsx(vt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ne.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:kd(ne.text)})]},ne.id)}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),Dt==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),n.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[n.jsx(gU,{className:"w-3 h-3"})," Audit Log"]})]}),n.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>On(_),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>{B(null),Or(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(Ep,{className:"w-5 h-5"})," Save"]})]})]})]}),Sr&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Ps,{src:Sr.logo,fallbackText:Sr.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Sr.name}),n.jsx("p",{className:"text-xs text-slate-500",children:Sr.industry})]})]})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>pn(null),disabled:Hr,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Il(Sr.id),disabled:Hr,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Hr?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),rr&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:rr.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:rr.name}),n.jsx("p",{className:"text-xs text-slate-500",children:rr.email}),rr.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:rr.role})]})]}),ee.find(ne=>ne.id===rr.companyId)&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(ul,{className:"w-4 h-4 text-slate-400"}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:ee.find(ne=>ne.id===rr.companyId)?.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>On(null),disabled:jr,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>cc(rr.id),disabled:jr,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:jr?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),Ge&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:(()=>{const ne=Ge==="companies"?yt.companies.length>0?yt.companies.length:Ne.length:yt.contacts.length>0?yt.contacts.length:Be.length;return`Delete ${ne} ${Ge==="companies"?"Compan":"Contact"}${Ge==="companies"?ne>1?"ies":"y":ne>1?"s":""}?`})()}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",Ge==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(Ge==="companies"?yt.companies.length>0?yt.companies:ee.filter(ne=>Ne.includes(ne.id)):yt.contacts.length>0?yt.contacts:V.filter(ne=>Be.includes(ne.id))).slice(0,5).map(ne=>n.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:Ge==="companies"?n.jsxs(n.Fragment,{children:[n.jsx(Ps,{src:ne.logo,fallbackText:ne.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ne.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:ne.industry})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:ne.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ne.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:ne.email})]})]})},ne.id)),(()=>{const ne=Ge==="companies"?yt.companies.length>0?yt.companies.length:Ne.length:yt.contacts.length>0?yt.contacts.length:Be.length;return ne>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",ne-5," more"]})})()]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{at(null),wt({companies:[],contacts:[]})},disabled:Ge==="companies"?Ce:tt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>{Ge==="companies"?Ll():ua()},disabled:Ge==="companies"?Ce:tt,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(Ge==="companies"?Ce:tt)?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(()=>{const ne=Ge==="companies"?yt.companies.length>0?yt.companies.length:Ne.length:yt.contacts.length>0?yt.contacts.length:Be.length;return`Delete ${ne} ${Ge==="companies"?"Compan":"Contact"}${Ge==="companies"?ne>1?"ies":"y":ne>1?"s":""}`})()})]})]})}),gn&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(Iu,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>po(null),disabled:ea===gn,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ya,disabled:ea===gn,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ea===gn?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Kt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(Iu,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>Na(null),disabled:Mt===Kt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Dl,disabled:Mt===Kt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Mt===Kt?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),tn&&n.jsx(jie,{onClose:()=>lr(!1),onSuccess:()=>{lr(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),Hn&&n.jsx(kie,{onClose:()=>Wr(!1),onSuccess:()=>{Wr(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),Y&&n.jsx(ele,{type:c==="contacts"?"contact":"company",onClose:()=>J(!1),onSuccess:()=>{c==="contacts"?o.invalidateQueries({queryKey:["contacts"]}):o.invalidateQueries({queryKey:["companies"]})}}),U&&n.jsx(yy,{instanceId:U,isOpen:!!U,onClose:()=>H(null)})]})},v3=({isOpen:e,dealId:t,projectId:r,preSelectedTemplateId:a,onClose:s,onSuccess:i})=>{const{showError:o}=jn(),[l,c]=I.useState(""),[d,u]=I.useState(null),[f,p]=I.useState(!1);I.useEffect(()=>{e&&a?u(a):e||(u(null),c(""))},[e,a]);const{data:m=[],isLoading:b}=DM(),v=koe();if(!e)return null;const g=m.filter(N=>{if(!l)return!0;const S=l.toLowerCase();return N.name?.toLowerCase().includes(S)||N.description?.toLowerCase().includes(S)||N.category?.toLowerCase().includes(S)}),w=N=>!N.sections||!Array.isArray(N.sections)?0:N.sections.reduce((S,E)=>S+(E.steps?.length||0),0),y=N=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[N]||"bg-slate-100 text-slate-700",j=async()=>{if(!d){o("Please select a playbook template");return}if(!t&&!r){o("Either dealId or projectId must be provided");return}p(!0);try{await v.mutateAsync({templateId:d,dealId:t||void 0,projectId:r||void 0}),i?.(),s(),u(null),c("")}catch(N){o(N.message||"Failed to attach playbook")}finally{p(!1)}};return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:s}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ii,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:a?"Activate Onboarding Playbook?":"Attach Playbook"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:a?"The Client Onboarding Playbook is ready to activate for this deal.":"Select a playbook template to attach"})]})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:l,onChange:N=>c(N.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]})}),b?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):g.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ii,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Templates Found"}),n.jsx("p",{className:"text-sm text-slate-500",children:l?"No templates match your search. Try a different query.":"No playbook templates available. Create one first."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(N=>{const S=w(N),E=N.sections?.length||0,A=d===N.id;return n.jsxs("div",{onClick:()=>u(N.id),className:`p-6 border-2 rounded-xl cursor-pointer transition-all ${A?"border-indigo-500 bg-indigo-50 shadow-lg":"border-slate-200 hover:border-slate-300 hover:shadow-md bg-white"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:N.name}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${y(N.category||"Custom")}`,children:N.category||"Custom"})]}),A&&n.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),N.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:N.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Gn,{className:"w-4 h-4"}),n.jsxs("span",{children:[E," section",E!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Mb,{className:"w-4 h-4"}),n.jsxs("span",{children:[S," step",S!==1?"s":""]})]})]})]},N.id)})})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:a&&d===a?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("button",{onClick:j,disabled:f,className:"w-full px-6 py-3 bg-green-600 text-white text-sm font-semibold rounded-xl hover:bg-green-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Activating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_i,{className:"w-4 h-4"}),"Yes, Activate Onboarding Playbook"]})}),n.jsx("button",{onClick:s,disabled:f,className:"w-full px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Maybe Later"})]}):n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:s,disabled:f,className:"px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:j,disabled:!d||f,className:"px-6 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Attaching..."]}):"Attach Playbook"})]})})]})})]})},GI=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],nle=({instance:e,onView:t})=>{const{data:r=[]}=Eg(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(ii,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:["Version ",e.templateSnapshot.version]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${e.status==="completed"?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700"}`,children:e.status==="completed"?"Completed":"Active"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Progress"}),n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:[s," / ",a," steps"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:t,className:"w-full px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 text-xs font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[n.jsx(ii,{className:"w-4 h-4"}),"View Playbook"]})]})},ale=({onNavigate:e,onNewDeal:t,currentUser:r})=>{const{showSuccess:a,showError:s,showInfo:i}=jn(),[o,l]=I.useState([]),[c,d]=I.useState([]),[u,f]=I.useState([]),[p,m]=I.useState([]),[b,v]=I.useState(!0),[g,w]=I.useState(null),[y,j]=I.useState("overview"),[N,S]=I.useState(!1),[E,A]=I.useState(null),{data:P=[],isLoading:D}=by({dealId:g?.id}),[R,T]=I.useState(!1),[_,B]=I.useState(null),[U,H]=I.useState(null),[Y,J]=I.useState(""),[re,X]=I.useState(null),[ee,W]=I.useState(!1),[O,z]=I.useState(!1),[V,q]=I.useState(!1),[K,se]=I.useState({title:"",companyId:"",value:"",currency:Si,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[pe,ie]=I.useState([]),[le,$e]=I.useState(!1),[he,Ue]=I.useState(!1),[Te,oe]=I.useState([]),[te,Pe]=I.useState(!1),[je,Ie]=I.useState([]),[ue,de]=I.useState(""),[Ae]=I.useState("sales"),[Qe,ge]=I.useState(!1),[fe,_e]=I.useState(!1),[ze,Se]=I.useState(!0),[Fe,Me]=I.useState(!1),[et,ut]=I.useState(null),[bt,At]=I.useState(""),[qt,Gt]=I.useState(""),Ye=je.find(xe=>xe.id===ue)||null,[Et,Cr]=I.useState(null),tr=async()=>{try{Se(!0);const Re=((await pI())?.data||[]).filter(tt=>tt.type==="sales");if(Re.length===0)try{const tt=await xI({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});tt?.data?.id&&await Cv(tt.data.id,{isActive:!0});const xt=((await pI())?.data||[]).filter(be=>be.type==="sales");Ie(xt);const ve=xt.find(be=>be.isActive)||xt[0];ve&&de(ve.id)}catch(tt){console.error("[PIPELINE] Failed to create default sales pipeline:",tt);const ht=GI.filter(ct=>ct.type==="sales");Ie(ht),ht.length>0&&de(ht[0].id)}else{Ie(Re);const tt=Re.find(ht=>ht.isActive)||Re[0];tt&&de(tt.id)}}catch(xe){console.error("[PIPELINE] Failed to fetch pipelines:",xe);const Ce=GI.filter(Re=>Re.type==="sales");Ie(Ce),Ce.length>0&&de(Ce[0].id)}finally{Se(!1)}};I.useEffect(()=>{tr()},[]);const Or=async()=>{v(!0);try{const[xe,Ce,Re,tt]=await Promise.all([Ag(),wd(),Ic(),Ah()]),ct=(Array.isArray(xe)?xe:xe?.data||[]).filter(xt=>xt.pipelineType?xt.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(xt.stage));l(ct),d(Ce?.data||[]),f(Re?.data||[]),m(tt?.data||[])}catch{s("Failed to load pipeline data")}finally{v(!1)}};I.useEffect(()=>{Or()},[r,Ae]),I.useEffect(()=>{const xe=()=>Or();return window.addEventListener("refresh-pipeline",xe),()=>window.removeEventListener("refresh-pipeline",xe)},[]);const pr=(xe,Ce)=>{Cr(Ce),xe.dataTransfer.setData("dealId",Ce)},rt=async(xe,Ce)=>{xe.preventDefault();const Re=xe.dataTransfer.getData("dealId"),tt=o.find(ht=>ht.id===Re);if(!(!tt||tt.stage===Ce))try{await Sv(Re,{stage:Ce,pipelineType:"sales"}),l(ht=>ht.map(ct=>ct.id===Re?{...ct,stage:Ce}:ct)),a(`Deal moved to ${Ce}`),tt.ownerId&&tt.ownerId!==r?.id&&await tp({userId:tt.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${tt.title}" was moved to ${Ce}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{Cr(null)}},Dt=async()=>{if(!(!bt.trim()||!ue||Fe))try{Me(!0);const xe=je.find(Re=>Re.id===ue);if(!xe)return;const Ce=[...xe.stages,bt.trim()];await Cv(ue,{stages:Ce}),Ie(Re=>Re.map(tt=>tt.id===ue?{...tt,stages:Ce}:tt)),At(""),a("Stage added successfully")}catch(xe){s(xe.message||"Failed to add stage")}finally{Me(!1)}},yr=async xe=>{if(ue)try{const Ce=je.find(tt=>tt.id===ue);if(!Ce)return;const Re=Ce.stages.filter((tt,ht)=>ht!==xe);await Cv(ue,{stages:Re}),Ie(tt=>tt.map(ht=>ht.id===ue?{...ht,stages:Re}:ht)),a("Stage removed successfully")}catch(Ce){s(Ce.message||"Failed to remove stage")}},kr=async()=>{if(qt.trim())try{const xe=await xI({name:qt.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});xe?.data&&(await tr(),de(xe.data.id),Gt(""),ge(!1),a("Sales pipeline created successfully"))}catch(xe){s(xe.message||"Failed to create pipeline")}},Xr=async xe=>{try{const Ce=je.find(Re=>Re.id===xe);if(!Ce)return;await Cv(xe,{isActive:!0}),de(xe),await tr(),await Or(),a(`Switched to ${Ce.name}`)}catch(Ce){s(Ce.message||"Failed to switch pipeline")}},Sr=async xe=>{W(!0);try{await fI(xe),l(Ce=>Ce.filter(Re=>Re.id!==xe)),g?.id===xe&&w(null),X(null),a("Opportunity removed from pipeline")}catch(Ce){s(Ce.message||"Failed to delete opportunity")}finally{W(!1)}},pn=()=>{pe.length===o.length?ie([]):ie(o.map(xe=>xe.id))},rr=async()=>{$e(!0);try{const xe=[...pe];await Promise.all(xe.map(Ce=>fI(Ce))),l(Ce=>Ce.filter(Re=>!xe.includes(Re.id))),g&&xe.includes(g.id)&&w(null),ie([]),Ue(!1),a(`Successfully deleted ${xe.length} opportunit${xe.length>1?"ies":"y"}`)}catch(xe){s(xe.message||"Failed to delete opportunities")}finally{$e(!1)}},On=async xe=>{if(!g)return;if(g.stakeholderIds?.includes(xe)){s("Stakeholder already linked");return}B(xe);const Ce=[...g.stakeholderIds||[],xe];try{await Sv(g.id,{stakeholderIds:Ce});const Re={...g,stakeholderIds:Ce};w(Re),l(tt=>tt.map(ht=>ht.id===g.id?Re:ht)),T(!1),J(""),a("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{B(null)}},Hr=c.find(xe=>xe.id===g?.companyId),sn=u.find(xe=>xe.id===g?.ownerId),jr=p.filter(xe=>g?.stakeholderIds?.includes(xe.id)),Gr=p.filter(xe=>!g?.stakeholderIds?.includes(xe.id)&&(xe.name.toLowerCase().includes(Y.toLowerCase())||xe.email.toLowerCase().includes(Y.toLowerCase())));I.useEffect(()=>{g&&!O&&se({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||Si,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},[g]);const Ne=async()=>{if(g){if(!K.title.trim()){s("Deal title is required");return}if(!K.ownerId){s("Opportunity lead is required");return}q(!0);try{const xe={title:K.title.trim(),companyId:K.companyId&&K.companyId.trim()!==""?K.companyId:null,value:parseFloat(K.value)||0,currency:K.currency||Si,stage:K.stage,pipelineType:"sales",ownerId:K.ownerId,expectedCloseDate:K.expectedCloseDate&&K.expectedCloseDate.trim()!==""?K.expectedCloseDate:null,description:K.description.trim()||null};await Sv(g.id,xe);const Ce={...g,...xe};l(Re=>Re.map(tt=>tt.id===g.id?Ce:tt)),w(Ce),z(!1),a("Deal updated successfully")}catch(xe){s(xe.message||"Failed to update deal")}finally{q(!1)}}},He=async()=>{if(!(!g||y!=="activity")){Pe(!0);try{const xe=await u3("deal",g.id);oe(xe?.data||[])}catch(xe){console.error("[PIPELINE] Failed to fetch deal activities:",xe),oe([])}finally{Pe(!1)}}};I.useEffect(()=>{g&&y==="activity"?He():oe([])},[g?.id,y]);const Be=()=>{if(!g)return[];const xe=[];return g.createdAt&&xe.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${g.title}" was created${sn?` by ${sn.name}`:""}`,date:g.createdAt,icon:n.jsx(Zr,{className:"w-4 h-4"}),color:"indigo"}),xe.push({id:"stage",type:"stage",title:`Current Stage: ${g.stage}`,description:`Opportunity is currently in the ${g.stage} stage`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(au,{className:"w-4 h-4"}),color:g.stage==="Won"?"emerald":g.stage==="Lost"?"red":"blue"}),g.value>0&&xe.push({id:"value",type:"value",title:`Deal Value: ${bf(g.value,g.currency)}`,description:`Gross contract revenue for this opportunity: ${bf(g.value,g.currency)}`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(zu,{className:"w-4 h-4"}),color:"emerald"}),g.expectedCloseDate&&xe.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${g.expectedCloseDate}`,description:"Target date for closing this opportunity",date:g.expectedCloseDate,icon:n.jsx(Kn,{className:"w-4 h-4"}),color:"amber"}),jr.length>0&&xe.push({id:"stakeholders",type:"stakeholder",title:`${jr.length} Stakeholder${jr.length>1?"s":""} Linked`,description:jr.map(Ce=>Ce.name).join(", "),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(g0,{className:"w-4 h-4"}),color:"purple"}),g.description&&xe.push({id:"description",type:"description",title:"Strategic Context Added",description:g.description.substring(0,100)+(g.description.length>100?"...":""),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(fo,{className:"w-4 h-4"}),color:"slate"}),Te.forEach(Ce=>{Ce.activityType==="email_linked"&&xe.push({id:Ce.id||`email-${Ce.emailId}`,type:"email_linked",title:Ce.title||"Email Linked",description:Ce.description||`Email "${Ce.emailSubject||"Untitled"}" from ${Ce.emailSender||"Unknown"}`,date:Ce.createdAt,icon:n.jsx(Xa,{className:"w-4 h-4"}),color:"indigo",emailId:Ce.emailId})}),xe.sort((Ce,Re)=>new Date(Re.date).getTime()-new Date(Ce.date).getTime())};return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[n.jsx(Qj,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-900",children:Ye?.name||"Loading..."}),n.jsx(Ts,{className:"w-4 h-4 text-slate-400"})]}),n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[je.length>0?je.map(xe=>n.jsxs("button",{onClick:()=>Xr(xe.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${ue===xe.id?"text-indigo-600":"text-slate-600"}`,children:[xe.name," ",ue===xe.id&&n.jsx(xd,{className:"w-4 h-4"})]},xe.id)):n.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsxs("button",{onClick:()=>ge(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[n.jsx(Zr,{className:"w-3 h-3"}),"Manage Pipelines"]})}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:qt,onChange:xe=>Gt(xe.target.value),onKeyDown:xe=>xe.key==="Enter"&&kr(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),n.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),n.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[n.jsx("button",{onClick:()=>ge(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:n.jsx(t4,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[n.jsx(Zr,{className:"w-4 h-4"})," New Deal"]})]})]}),!b&&o.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&pe.length===o.length,onChange:pn}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),n.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:b||ze||!Ye?n.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:n.jsx(vt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Ye.stages.map(xe=>{const Ce=o.filter(Re=>Re.stage===xe);return n.jsxs("div",{onDragOver:Re=>Re.preventDefault(),onDrop:Re=>rt(Re,xe),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:xe}),n.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:Ce.length})]}),n.jsx(Zr,{onClick:()=>t(xe),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),n.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:Ce.map(Re=>{const tt=c.find(ct=>ct.id===Re.companyId),ht=pe.includes(Re.id);return n.jsxs("div",{onClick:()=>w(Re),draggable:!0,onDragStart:ct=>pr(ct,Re.id),className:`bg-white p-5 rounded-2xl border ${ht?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${Et===Re.id?"opacity-30":""}`,children:[n.jsx("div",{className:"absolute top-3 right-3",onClick:ct=>ct.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ht,onChange:()=>ie(ct=>ht?ct.filter(xt=>xt!==Re.id):[...ct,Re.id])})}),n.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[n.jsx(Ps,{src:tt?.logo,fallbackText:tt?.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),n.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Re.title})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:tt?.name||"Independent"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-indigo-600 font-black text-xs",children:bf(Re.value,Re.currency)}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Re.expectedCloseDate}),n.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Re.id)})})]},xe)})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{w(null),T(!1)}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:n.jsx(Al,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[O?n.jsx("input",{type:"text",value:K.title,onChange:xe=>se(Ce=>({...Ce,title:xe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:g.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[O?n.jsx("select",{value:K.stage,onChange:xe=>se(Ce=>({...Ce,stage:xe.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:Ye?.stages?.map(xe=>n.jsx("option",{value:xe,children:xe},xe))||[]}):n.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:g.stage}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",g.id.substring(0,8)]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[O?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{z(!1),se({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||Si,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},disabled:V,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Ne,disabled:V||!K.title.trim()||!K.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:V?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"}),"Edit Deal"]}),n.jsx("button",{onClick:()=>{w(null),T(!1),z(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:n.jsx(Zt,{className:"w-6 h-6"})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:n.jsx(w0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:n.jsx(ud,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:n.jsx(g0,{className:"w-4 h-4"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(ii,{className:"w-4 h-4"})}].map(xe=>n.jsxs("button",{onClick:()=>{j(xe.id),T(!1),z(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${y===xe.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[xe.icon," ",xe.label]},xe.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[y==="overview"&&n.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[O?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(rx,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("select",{value:K.currency||Si,onChange:xe=>se(Ce=>({...Ce,currency:xe.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:rp.map(xe=>n.jsxs("option",{value:xe.code,children:[xe.code," (",xe.symbol,")"]},xe.code))}),n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:pf(K.currency||Si)}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:K.value||"",onChange:xe=>se(Ce=>({...Ce,value:xe.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(Kn,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("input",{type:"date",value:K.expectedCloseDate,onChange:xe=>se(Ce=>({...Ce,expectedCloseDate:xe.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(rx,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:bf(g.value,g.currency)}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(Kn,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:g.expectedCloseDate||"Not set"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ul,{className:"w-4 h-4"})," Account Association"]}),O?n.jsxs("select",{value:K.companyId,onChange:xe=>se(Ce=>({...Ce,companyId:xe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[n.jsx("option",{value:"",children:"Independent/Direct"}),c.map(xe=>n.jsx("option",{value:xe.id,children:xe.name},xe.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[n.jsx(Ps,{src:Hr?.logo,className:"w-14 h-14",fallbackText:Hr?.name||"A",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:Hr?.name||"Independent/Direct"}),n.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:Hr?.industry||"Uncategorized"})]}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:n.jsx(cs,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Rb,{className:"w-4 h-4"})," Opportunity Lead"]}),O?n.jsxs("select",{value:K.ownerId,onChange:xe=>se(Ce=>({...Ce,ownerId:xe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[n.jsx("option",{value:"",children:"Select Owner"}),u.map(xe=>n.jsxs("option",{value:xe.id,children:[xe.name," (",xe.role,")"]},xe.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[n.jsx(Ps,{src:sn?.avatar,className:"w-14 h-14",fallbackText:sn?.name||"U",isAvatar:!0}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:sn?.name||"Unassigned"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:sn?.role||"Teammate"})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4"})," Strategic Context"]}),O?n.jsx("textarea",{value:K.description,onChange:xe=>se(Ce=>({...Ce,description:xe.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[n.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:g.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),n.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[n.jsx(Ri,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),n.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(Gn,{className:"w-6 h-6"})}),n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),n.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),n.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),y==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(ud,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),te?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(vt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const xe=Be();return xe.length===0?n.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[n.jsx(ud,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),n.jsx("div",{className:"space-y-6",children:xe.map((Ce,Re)=>{const tt=ve=>{const be={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return be[ve]||be.slate},ht=new Date(Ce.date),ct=ht.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),xt=ht.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"relative flex items-start gap-4",children:[n.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${tt(Ce.color)} flex items-center justify-center flex-shrink-0`,children:Ce.icon}),n.jsx("div",{className:"flex-1 pb-6",children:n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-black text-slate-900 text-sm",children:Ce.title}),n.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[ct," ",xt]})]}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:Ce.description}),Ce.type==="email_linked"&&Ce.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Ce.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(cs,{className:"w-3 h-3"})," View Email"]})]})})]},Ce.id)})})]})})()]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.createdAt?Math.floor((new Date().getTime()-new Date(g.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.stage})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:jr.length})]})]})]}),y==="stakeholders"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!R&&n.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(hd,{className:"w-3 h-3"})," Link Person"]})]}),R?n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),n.jsx("button",{onClick:()=>T(!1),className:"p-1 hover:bg-white rounded-lg",children:n.jsx(Zt,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search global registry...",value:Y,onChange:xe=>J(xe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:Gr.length>0?Gr.map(xe=>{const Ce=_===xe.id;return n.jsxs("button",{onClick:()=>On(xe.id),disabled:Ce||!!_,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:xe.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:xe.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:xe.role})]}),Ce?n.jsx(vt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):n.jsx(Zr,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},xe.id)}):n.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):jr.length>0?n.jsx("div",{className:"grid grid-cols-1 gap-3",children:jr.map(xe=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:xe.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:xe.name}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:xe.role})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(g){H(xe.id);try{const Ce=(g.stakeholderIds||[]).filter(tt=>tt!==xe.id);await Sv(g.id,{stakeholderIds:Ce});const Re={...g,stakeholderIds:Ce};w(Re),l(tt=>tt.map(ht=>ht.id===g.id?Re:ht)),a("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{H(null)}}},disabled:U===xe.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:U===xe.id?n.jsx(vt,{className:"w-4 h-4 animate-spin text-red-500"}):n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:n.jsx(ia,{className:"w-5 h-5"})})]})]},xe.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(g0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]}),y==="playbooks"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ii,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(Zr,{className:"w-3 h-3"})," Attach Playbook"]})]}),D?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(vt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):P.length>0?n.jsx("div",{className:"space-y-3",children:P.map(xe=>n.jsx(nle,{instance:xe,onView:()=>A(xe.id)},xe.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(ii,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this deal yet."})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>X(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(_i,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),re&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Al,{className:"w-5 h-5 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:re.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:re.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",re.value.toLocaleString()]})]})]})]}),Hr&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(Ps,{src:Hr.logo,fallbackText:Hr.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:Hr.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(null),disabled:ee,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Sr(re.id),disabled:ee,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),pe.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:pe.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:xe=>{xe.stopPropagation(),Ue(!0)},disabled:le,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[le?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>ie([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]})}),he&&pe.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",pe.length," Opportunit",pe.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(xe=>pe.includes(xe.id)).slice(0,5).map(xe=>(c.find(Ce=>Ce.id===xe.companyId),n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(Al,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:xe.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:xe.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",xe.value.toLocaleString()]})]})]})]},xe.id))),pe.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",pe.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ue(!1),disabled:le,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:rr,disabled:le,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:le?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${pe.length} Opportunit${pe.length>1?"ies":"y"}`})]})]})}),fe&&n.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[n.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>_e(!1)}),n.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(t4,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),n.jsx("button",{onClick:()=>_e(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),n.jsx("div",{className:"space-y-2",children:je.map(xe=>n.jsx("button",{onClick:()=>Xr(xe.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${ue===xe.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:xe.name}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[xe.stages.length," stages"]})]}),ue===xe.id&&n.jsx(xd,{className:"w-5 h-5 text-indigo-600"})]})},xe.id))})]}),Ye&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Ye.stages.length," stages"]})]}),n.jsx("div",{className:"space-y-2",children:Ye.stages.map((xe,Ce)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:Ce+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-sm text-slate-900",children:xe}),n.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Re=>Re.stage===xe).length," deals"]})]})]},xe))})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(rx,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),n.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),n.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((xe,Ce)=>xe+(Ce.value||0),0).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>{_e(!1),ge(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(Qj,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),n.jsx(ia,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),n.jsxs("button",{onClick:()=>{_e(!1),Or(),a("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(fd,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),n.jsx(ia,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),Qe&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),n.jsx("button",{onClick:()=>ge(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),n.jsx("div",{className:"space-y-2",children:je.map(xe=>n.jsx("button",{onClick:()=>Xr(xe.id),className:`w-full p-3 rounded-xl border-2 text-left ${ue===xe.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:n.jsx("p",{className:"font-bold",children:xe.name})},xe.id))})]}),Ye&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),n.jsx("div",{className:"space-y-2",children:Ye.stages.map((xe,Ce)=>n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:xe}),n.jsx("button",{onClick:()=>yr(Ce),disabled:et!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:et===Ce?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]},Ce))}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("input",{type:"text",placeholder:"New stage name...",value:bt,onChange:xe=>At(xe.target.value),onKeyDown:xe=>{xe.key==="Enter"&&bt.trim()&&!Fe&&Dt()},disabled:Fe,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),n.jsx("button",{onClick:Dt,disabled:Fe||!bt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Fe?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Pipeline name...",value:qt,onChange:xe=>Gt(xe.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),n.jsx("button",{onClick:kr,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:n.jsx("button",{onClick:()=>ge(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})}),n.jsx(v3,{isOpen:N,dealId:g?.id,onClose:()=>S(!1),onSuccess:()=>{S(!1)}}),E&&n.jsx(yy,{instanceId:E,isOpen:!!E,onClose:()=>A(null)})]})},qh={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},sle=e=>ks({queryKey:qh.projects(e||""),queryFn:async()=>(await D0()).data||[],enabled:!0,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),ile=()=>ks({queryKey:qh.companies,queryFn:async()=>(await wd()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),ole=()=>ks({queryKey:qh.users,queryFn:async()=>(await Ic()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),lle=e=>ks({queryKey:qh.tasks(e||""),queryFn:async()=>e?(await gy(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),cle=e=>ks({queryKey:qh.projectActivities(e||""),queryFn:async()=>e?(await u3("project",e))?.data||[]:[],enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),dle=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async({id:a,data:s})=>await rM(a,s),onSuccess:async(a,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:qh.projectActivities(s.id),type:"active"})])},onError:a=>{console.error("Failed to update project:",a),r(a?.message||"Failed to update project")}})},ule=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>await nM(a),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to delete project:",a),r(a?.message||"Failed to delete project")}})},fle=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async({id:a,archived:s})=>await rM(a,{archived:s}),onSuccess:async(a,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:qh.projectActivities(s.id)})},onError:a=>{console.error("Failed to archive/restore project:",a),r(a?.message||"Failed to update project")}})},hle=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>{await Promise.all(a.map(s=>nM(s)))},onSuccess:async(a,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to bulk delete projects:",a),r(a?.message||"Failed to delete projects")}})},mle=({instance:e,onView:t})=>{const{data:r=[]}=Eg(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(ii,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["v",e.templateSnapshot.version]})]})]}),i===100&&n.jsx(_i,{className:"w-5 h-5 text-green-500"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[s," / ",a," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[i,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${i===100?"bg-green-500":i>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:()=>t(e.id),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Playbook",n.jsx(cs,{className:"w-3 h-3"})]})]})},ple=({onNavigate:e,onCreateProject:t,currentUser:r})=>{const{showSuccess:a,showError:s}=jn(),i=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=sle(i),{data:c=[]}=ile(),{data:d=[]}=ole(),{data:u=[]}=lle(i),[f,p]=I.useState(null),{data:m=[],isLoading:b}=cle(f?.id||null),[v,g]=I.useState(null),[w,y]=I.useState(!1),{data:j=[],isLoading:N}=by({projectId:f?.id}),[S,E]=I.useState("active"),A=l,P=dle(),D=ule(),R=fle(),T=hle(),_=Fe=>{const Me=u.filter(ut=>ut.projectId===Fe);if(Me.length===0)return 0;const et=Me.filter(ut=>ut.status==="Done").length;return Math.round(et/Me.length*100)},[B,U]=I.useState(null),[H,Y]=I.useState(null),[J,re]=I.useState(null),[X,ee]=I.useState(null),[W,O]=I.useState([]),[z,V]=I.useState(!1),[q,K]=I.useState(!1),[se,pe]=I.useState(!1),[ie,le]=I.useState(!1),[$e,he]=I.useState(!1),[Ue,Te]=I.useState(""),[oe,te]=I.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Pe,je]=I.useState(null),Ie=async Fe=>{if(o.find(et=>et.id===Fe)){Y(Fe);try{await R.mutateAsync({id:Fe,archived:S==="active"}),re(null),f?.id===Fe&&p(null)}finally{Y(null)}}},ue=async Fe=>{U(Fe);try{await D.mutateAsync(Fe),ee(null),f?.id===Fe&&p(null)}finally{U(null)}},de=()=>{W.length===Se.length?O([]):O(Se.map(Fe=>Fe.id))},Ae=async()=>{V(!0);try{const Fe=[...W];await T.mutateAsync(Fe),O([]),K(!1),f&&Fe.includes(f.id)&&p(null),a(`Successfully deleted ${Fe.length} project${Fe.length>1?"s":""}`)}catch(Fe){s(Fe.message||"Failed to delete projects")}finally{V(!1)}},Qe=Fe=>{if(!Fe)return"";try{const Me=new Date(Fe);if(isNaN(Me.getTime()))return"";const et=Me.getFullYear(),ut=String(Me.getMonth()+1).padStart(2,"0"),bt=String(Me.getDate()).padStart(2,"0");return`${et}-${ut}-${bt}`}catch{return""}},ge=Fe=>{p(Fe),te({title:Fe.title,description:Fe.description||"",companyId:Fe.companyId||"",status:Fe.status,engagement:Fe.engagement||"",startDate:Qe(Fe.startDate),endDate:Qe(Fe.endDate)}),pe(!1)},fe=async()=>{if(f){if(!oe.title.trim()){s("Project title is required");return}le(!0);try{const Fe={title:oe.title.trim(),description:oe.description.trim(),status:oe.status,companyId:oe.companyId&&oe.companyId.trim()!==""?oe.companyId:null};await P.mutateAsync({id:f.id,data:Fe});const Me={...f,...Fe};p(Me),pe(!1)}catch{}finally{le(!1)}}},_e=async Fe=>{if(f){le(!0);try{await P.mutateAsync({id:f.id,data:{status:Fe}});const Me={...f,status:Fe};p(Me),te(et=>({...et,status:Fe}))}catch{}finally{le(!1)}}},ze=async(Fe,Me)=>{je(Fe);try{const et=Me==="Done"?"Todo":"Done";await hb(Fe,{status:et}),setTasks(At=>At.map(qt=>qt.id===Fe?{...qt,status:et}:qt));const ut=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,bt=await apiGetTasks(ut);setTasks(bt.data||[]),a(et==="Done"?"Task marked as done":"Task marked as todo")}catch(et){s(et.message||"Failed to update task status")}finally{je(null)}},Se=I.useMemo(()=>o.filter(Fe=>{const Me=Fe.archived===!0;return S==="archived"?Me:!Me}),[o,S]);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{E("active"),O([])},className:`text-sm font-bold pb-1 transition-all ${S==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{E("archived"),O([])},className:`text-sm font-bold pb-1 transition-all ${S==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(Fe=>Fe.archived).length,")"]})]})]}),n.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[n.jsx(Zr,{className:"w-4 h-4"})," Create Project"]})]}),!A&&Se.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Se.length>0&&W.length===Se.length,onChange:de}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),A?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(vt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Se.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[n.jsx(d1,{className:"w-16 h-16 text-slate-200 mb-6"}),n.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",S," projects found"]}),n.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Se.map(Fe=>{const Me=c.find(bt=>bt.id===Fe.companyId),et=_(Fe.id),ut=W.includes(Fe.id);return n.jsxs("div",{onClick:bt=>{!Fe.archived&&!ut&&(bt.stopPropagation(),ge(Fe))},className:`bg-white rounded-3xl border ${ut?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${Fe.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[n.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[n.jsx("button",{onClick:bt=>{bt.stopPropagation(),re(Fe)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:S==="active"?"Archive":"Restore",children:S==="active"?n.jsx(Pu,{className:"w-4 h-4"}):n.jsx(bx,{className:"w-4 h-4"})}),n.jsx("button",{onClick:bt=>{bt.stopPropagation(),ee(Fe)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("div",{onClick:bt=>bt.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${ut?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:ut,onChange:()=>O(bt=>ut?bt.filter(At=>At!==Fe.id):[...bt,Fe.id])})})]}),n.jsxs("div",{className:"p-7",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:n.jsx(nu,{className:"w-6 h-6"})}),n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:Fe.title}),n.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:Me?.name||"Standalone Project"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[n.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),n.jsxs("span",{className:"text-indigo-600",children:[et,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:n.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${et}%`}})})]})]}),n.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[n.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[n.jsx(es,{className:"w-3.5 h-3.5"})," ",Fe.status]}),!Fe.archived&&n.jsx(ia,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Fe.id)})}),J&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:J.archived?n.jsx(bx,{className:"w-6 h-6"}):n.jsx(Pu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:J.archived?"Restore Project?":"Archive Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:J.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:J.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Fe=>Fe.id===J.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>re(null),disabled:H===J.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Ie(J.id),disabled:H===J.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H===J.id?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),J.archived?"Restoring...":"Archiving..."]}):J.archived?"Restore Project":"Archive Project"})]})]})}),X&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:X.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Fe=>Fe.id===X.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ee(null),disabled:B===X.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>ue(X.id),disabled:B===X.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:B===X.id?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),W.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:W.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),K(!0)},disabled:z,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[z?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>O([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]})}),q&&W.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",W.length," Project",W.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Fe=>W.includes(Fe.id)).slice(0,5).map(Fe=>{const Me=c.find(et=>et.id===Fe.companyId);return n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(nu,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Fe.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:Me?.name||"Standalone Project"})]})]},Fe.id)}),W.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",W.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>K(!1),disabled:z,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ae,disabled:z,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:z?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${W.length} Project${W.length>1?"s":""}`})]})]})}),f&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!se&&!ie&&(p(null),pe(!1))}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[n.jsx("button",{onClick:()=>{!se&&!ie&&(p(null),pe(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:ie,children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(nu,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[se?n.jsxs("div",{children:[n.jsx("input",{type:"text",value:oe.title,onChange:Fe=>te(Me=>({...Me,title:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),n.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[n.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:f.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${f.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":f.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":f.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:f.status}),n.jsx("span",{className:"text-xs text-slate-400",children:c.find(Fe=>Fe.id===f.companyId)?.name||"Standalone Project"})]})]})]}),n.jsx("div",{className:"flex gap-3",children:se?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{pe(!1),te({title:f.title,description:f.description||"",companyId:f.companyId||"",status:f.status,engagement:f.engagement||"",startDate:Qe(f.startDate),endDate:Qe(f.endDate)})},disabled:ie,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:fe,disabled:ie||!oe.title.trim()||!oe.engagement.trim()||!oe.startDate.trim()||!oe.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ie?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>pe(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"}),"Edit Project"]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),n.jsx("div",{className:"space-y-4",children:se?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:oe.engagement,onChange:Fe=>te(Me=>({...Me,engagement:Fe.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:oe.startDate,onChange:Fe=>{if(te(Me=>({...Me,startDate:Fe.target.value})),Fe.target.value&&oe.endDate){const Me=new Date(Fe.target.value),et=new Date(oe.endDate);!isNaN(Me.getTime())&&!isNaN(et.getTime())&&Me>=et}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:oe.endDate,onChange:Fe=>{if(te(Me=>({...Me,endDate:Fe.target.value})),oe.startDate&&Fe.target.value){const Me=new Date(oe.startDate),et=new Date(Fe.target.value);!isNaN(Me.getTime())&&!isNaN(et.getTime())&&Me>=et}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{value:oe.description,onChange:Fe=>te(Me=>({...Me,description:Fe.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),n.jsxs("select",{value:oe.companyId,onChange:Fe=>te(Me=>({...Me,companyId:Fe.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"Standalone Project"}),c.map(Fe=>n.jsx("option",{value:Fe.id,children:Fe.name},Fe.id))]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.title})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.engagement||""})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.startDate?new Date(f.startDate).toLocaleDateString():""})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.endDate?new Date(f.endDate).toLocaleDateString():""})]})]}),f.description&&n.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:f.description})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.find(Fe=>Fe.id===f.companyId)?.name||"Standalone Project"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[_(f.id),"%"]})]})]}),f.noteImage&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Gn,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),f.noteImageMimeType?.includes("pdf")?n.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:n.jsx(Gn,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:f.noteImageName||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),n.jsxs("button",{onClick:()=>{const Fe=window.open();Fe&&Fe.document.write(`
                                        <html>
                                          <head>
                                            <title>${f.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${f.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[n.jsx(ru,{className:"w-4 h-4"}),"View PDF"]})]})}):n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:f.noteImage,alt:f.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{Te(f.noteImage||""),he(!0)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:n.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:n.jsx(ru,{className:"w-5 h-5 text-indigo-600"})})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ii,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(Zr,{className:"w-3 h-3"})," Attach"]})]}),N?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(vt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):j.length>0?n.jsx("div",{className:"space-y-3",children:j.map(Fe=>n.jsx(mle,{instance:Fe,onView:Me=>g(Me)},Fe.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(ii,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this project yet."})]})]})]})})]}),!se&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(es,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(Fe=>n.jsxs("button",{onClick:()=>_e(Fe),disabled:ie||f.status===Fe,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${f.status===Fe?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[f.status===Fe?n.jsx(mn,{className:"w-4 h-4"}):n.jsx(Ru,{className:"w-4 h-4"}),Fe]},Fe))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Mb,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),n.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",f.id),e("tasks"),p(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",n.jsx(ia,{className:"w-3 h-3"})]})]}),(()=>{const Fe=u.filter(Me=>Me.projectId===f.id);return Fe.length===0?n.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[n.jsx(d1,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):n.jsx("div",{className:"space-y-2",children:Fe.map(Me=>{const et=d.find(bt=>bt.id===Me.assigneeId),ut=Pe===Me.id;return n.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("button",{onClick:bt=>{bt.stopPropagation(),ut||ze(Me.id,Me.status)},disabled:ut,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:ut?n.jsx(vt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):Me.status==="Done"?n.jsx(mn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):n.jsx(Ru,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),n.jsx("p",{className:`text-sm font-bold ${Me.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Me.title})]}),Me.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:Me.description}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${Me.priority==="High"?"bg-red-50 text-red-600":Me.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Me.priority}),n.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:Me.status}),Me.dueDate&&n.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[n.jsx(Kn,{className:"w-3 h-3"}),Me.dueDate]})]})]}),et&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:et.name.charAt(0)})})]})},Me.id)})})})()]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ud,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),b?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):m.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(Xa,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:m.map((Fe,Me)=>{const et=new Date(Fe.createdAt),bt=new Date().getTime()-et.getTime(),At=Math.floor(bt/(1e3*60*60*24));let qt="";At===0?qt="Today":At===1?qt="Yesterday":At<7?qt=`${At} days ago`:At<30?qt=`${Math.floor(At/7)} week${Math.floor(At/7)>1?"s":""} ago`:qt=`${Math.floor(At/30)} month${Math.floor(At/30)>1?"s":""} ago`;const Gt=Fe.activityType==="email_linked",Ye=Gt?"border-indigo-600":"border-slate-200",Et=Gt?"bg-indigo-600":"bg-slate-300",Cr=Gt?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${Ye} shadow-xl flex items-center justify-center`,children:Gt?n.jsx(Xa,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${Et}`})}),n.jsxs("p",{className:`text-[10px] font-black ${Cr} uppercase mb-1 tracking-widest`,children:[Gt?"Email Linked":Fe.activityType||"Activity","  ",qt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Fe.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Fe.description||Fe.title}),Fe.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Fe.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(cs,{className:"w-3 h-3"})," View Email"]})]},Fe.id||Me)})})]})]}),n.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:n.jsxs("button",{onClick:()=>{!se&&!ie&&(p(null),pe(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:ie,children:[n.jsx(mn,{className:"w-5 h-5"})," Close"]})})]})]}),$e&&n.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>he(!1)}),n.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[n.jsx("button",{onClick:()=>he(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:n.jsx(Zt,{className:"w-6 h-6"})}),n.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:n.jsx("img",{src:Ue,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:Fe=>Fe.stopPropagation()})})]})]}),n.jsx(v3,{isOpen:w,projectId:f?.id,onClose:()=>y(!1),onSuccess:()=>{y(!1)}}),v&&n.jsx(yy,{instanceId:v,isOpen:!!v,onClose:()=>g(null)})]})};var n1={exports:{}};var xle=n1.exports,KI;function gle(){return KI||(KI=1,(function(e,t){(function(a,s){e.exports=s()})(typeof self<"u"?self:xle,function(){return(function(r){var a={};function s(i){if(a[i])return a[i].exports;var o=a[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=a,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)})([(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),d=s(46),u=s(47),f=s(48),p=s(49),m=s(12),b=s(32),v=s(33),g=s(31),w=s(1),y={Scope:w.Scope,create:w.create,find:w.find,query:w.query,register:w.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:f.default,Scroll:c.default,Block:u.default,Inline:d.default,Text:p.default,Attributor:{Attribute:m.default,Class:b.default,Style:v.default,Store:g.default}};a.default=y}),(function(r,a,s){var i=this&&this.__extends||(function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,y){w.__proto__=y}||function(w,y){for(var j in y)y.hasOwnProperty(j)&&(w[j]=y[j])};return function(w,y){g(w,y);function j(){this.constructor=w}w.prototype=y===null?Object.create(y):(j.prototype=y.prototype,new j)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=(function(g){i(w,g);function w(y){var j=this;return y="[Parchment] "+y,j=g.call(this,y)||this,j.message=y,j.name=j.constructor.name,j}return w})(Error);a.ParchmentError=o;var l={},c={},d={},u={};a.DATA_KEY="__blot";var f;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(f=a.Scope||(a.Scope={}));function p(g,w){var y=b(g);if(y==null)throw new o("Unable to create "+g+" blot");var j=y,N=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:j.create(w);return new j(N,w)}a.create=p;function m(g,w){return w===void 0&&(w=!1),g==null?null:g[a.DATA_KEY]!=null?g[a.DATA_KEY].blot:w?m(g.parentNode,w):null}a.find=m;function b(g,w){w===void 0&&(w=f.ANY);var y;if(typeof g=="string")y=u[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)y=u.text;else if(typeof g=="number")g&f.LEVEL&f.BLOCK?y=u.block:g&f.LEVEL&f.INLINE&&(y=u.inline);else if(g instanceof HTMLElement){var j=(g.getAttribute("class")||"").split(/\s+/);for(var N in j)if(y=c[j[N]],y)break;y=y||d[g.tagName]}return y==null?null:w&f.LEVEL&y.scope&&w&f.TYPE&y.scope?y:null}a.query=b;function v(){for(var g=[],w=0;w<arguments.length;w++)g[w]=arguments[w];if(g.length>1)return g.map(function(N){return v(N)});var y=g[0];if(typeof y.blotName!="string"&&typeof y.attrName!="string")throw new o("Invalid definition");if(y.blotName==="abstract")throw new o("Cannot register abstract class");if(u[y.blotName||y.attrName]=y,typeof y.keyName=="string")l[y.keyName]=y;else if(y.className!=null&&(c[y.className]=y),y.tagName!=null){Array.isArray(y.tagName)?y.tagName=y.tagName.map(function(N){return N.toUpperCase()}):y.tagName=y.tagName.toUpperCase();var j=Array.isArray(y.tagName)?y.tagName:[y.tagName];j.forEach(function(N){(d[N]==null||y.className==null)&&(d[N]=y)})}return y}a.register=v}),(function(r,a,s){var i=s(51),o=s(11),l=s(3),c=s(20),d="\0",u=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};u.prototype.insert=function(f,p){var m={};return f.length===0?this:(m.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m))},u.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},u.prototype.retain=function(f,p){if(f<=0)return this;var m={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m)},u.prototype.push=function(f){var p=this.ops.length,m=this.ops[p-1];if(f=l(!0,{},f),typeof m=="object"){if(typeof f.delete=="number"&&typeof m.delete=="number")return this.ops[p-1]={delete:m.delete+f.delete},this;if(typeof m.delete=="number"&&f.insert!=null&&(p-=1,m=this.ops[p-1],typeof m!="object"))return this.ops.unshift(f),this;if(o(f.attributes,m.attributes)){if(typeof f.insert=="string"&&typeof m.insert=="string")return this.ops[p-1]={insert:m.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof m.retain=="number")return this.ops[p-1]={retain:m.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this},u.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},u.prototype.filter=function(f){return this.ops.filter(f)},u.prototype.forEach=function(f){this.ops.forEach(f)},u.prototype.map=function(f){return this.ops.map(f)},u.prototype.partition=function(f){var p=[],m=[];return this.forEach(function(b){var v=f(b)?p:m;v.push(b)}),[p,m]},u.prototype.reduce=function(f,p){return this.ops.reduce(f,p)},u.prototype.changeLength=function(){return this.reduce(function(f,p){return p.insert?f+c.length(p):p.delete?f-p.delete:f},0)},u.prototype.length=function(){return this.reduce(function(f,p){return f+c.length(p)},0)},u.prototype.slice=function(f,p){f=f||0,typeof p!="number"&&(p=1/0);for(var m=[],b=c.iterator(this.ops),v=0;v<p&&b.hasNext();){var g;v<f?g=b.next(f-v):(g=b.next(p-v),m.push(g)),v+=c.length(g)}return new u(m)},u.prototype.compose=function(f){var p=c.iterator(this.ops),m=c.iterator(f.ops),b=[],v=m.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var g=v.retain;p.peekType()==="insert"&&p.peekLength()<=g;)g-=p.peekLength(),b.push(p.next());v.retain-g>0&&m.next(v.retain-g)}for(var w=new u(b);p.hasNext()||m.hasNext();)if(m.peekType()==="insert")w.push(m.next());else if(p.peekType()==="delete")w.push(p.next());else{var y=Math.min(p.peekLength(),m.peekLength()),j=p.next(y),N=m.next(y);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=y:S.insert=j.insert;var E=c.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(E&&(S.attributes=E),w.push(S),!m.hasNext()&&o(w.ops[w.ops.length-1],S)){var A=new u(p.rest());return w.concat(A).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&w.push(N)}return w.chop()},u.prototype.concat=function(f){var p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p},u.prototype.diff=function(f,p){if(this.ops===f.ops)return new u;var m=[this,f].map(function(y){return y.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:d;var N=y===f?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),b=new u,v=i(m[0],m[1],p),g=c.iterator(this.ops),w=c.iterator(f.ops);return v.forEach(function(y){for(var j=y[1].length;j>0;){var N=0;switch(y[0]){case i.INSERT:N=Math.min(w.peekLength(),j),b.push(w.next(N));break;case i.DELETE:N=Math.min(j,g.peekLength()),g.next(N),b.delete(N);break;case i.EQUAL:N=Math.min(g.peekLength(),w.peekLength(),j);var S=g.next(N),E=w.next(N);o(S.insert,E.insert)?b.retain(N,c.attributes.diff(S.attributes,E.attributes)):b.push(E).delete(N);break}j-=N}}),b.chop()},u.prototype.eachLine=function(f,p){p=p||`
`;for(var m=c.iterator(this.ops),b=new u,v=0;m.hasNext();){if(m.peekType()!=="insert")return;var g=m.peek(),w=c.length(g)-m.peekLength(),y=typeof g.insert=="string"?g.insert.indexOf(p,w)-w:-1;if(y<0)b.push(m.next());else if(y>0)b.push(m.next(y));else{if(f(b,m.next(1).attributes||{},v)===!1)return;v+=1,b=new u}}b.length()>0&&f(b,{},v)},u.prototype.transform=function(f,p){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);for(var m=c.iterator(this.ops),b=c.iterator(f.ops),v=new u;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))v.retain(c.length(m.next()));else if(b.peekType()==="insert")v.push(b.next());else{var g=Math.min(m.peekLength(),b.peekLength()),w=m.next(g),y=b.next(g);if(w.delete)continue;y.delete?v.push(y):v.retain(g,c.attributes.transform(w.attributes,y.attributes,p))}return v.chop()},u.prototype.transformPosition=function(f,p){p=!!p;for(var m=c.iterator(this.ops),b=0;m.hasNext()&&b<=f;){var v=m.peekLength(),g=m.peekType();if(m.next(),g==="delete"){f-=Math.min(v,f-b);continue}else g==="insert"&&(b<f||!p)&&(f+=v);b+=v}return f},r.exports=u}),(function(r,a){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(m){return typeof Array.isArray=="function"?Array.isArray(m):i.call(m)==="[object Array]"},d=function(m){if(!m||i.call(m)!=="[object Object]")return!1;var b=s.call(m,"constructor"),v=m.constructor&&m.constructor.prototype&&s.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!b&&!v)return!1;var g;for(g in m);return typeof g>"u"||s.call(m,g)},u=function(m,b){o&&b.name==="__proto__"?o(m,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):m[b.name]=b.newValue},f=function(m,b){if(b==="__proto__")if(s.call(m,b)){if(l)return l(m,b).value}else return;return m[b]};r.exports=function p(){var m,b,v,g,w,y,j=arguments[0],N=1,S=arguments.length,E=!1;for(typeof j=="boolean"&&(E=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(m=arguments[N],m!=null)for(b in m)v=f(j,b),g=f(m,b),j!==g&&(E&&g&&(d(g)||(w=c(g)))?(w?(w=!1,y=v&&c(v)?v:[]):y=v&&d(v)?v:{},u(j,{name:b,newValue:p(E,y,g)})):typeof g<"u"&&u(j,{name:b,newValue:g}));return j}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BlockEmbed=a.bubbleFormats=void 0;var i=(function(){function T(_,B){for(var U=0;U<B.length;U++){var H=B[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(_,H.key,H)}}return function(_,B,U){return B&&T(_.prototype,B),U&&T(_,U),_}})(),o=function T(_,B,U){_===null&&(_=Function.prototype);var H=Object.getOwnPropertyDescriptor(_,B);if(H===void 0){var Y=Object.getPrototypeOf(_);return Y===null?void 0:T(Y,B,U)}else{if("value"in H)return H.value;var J=H.get;return J===void 0?void 0:J.call(U)}},l=s(3),c=j(l),d=s(2),u=j(d),f=s(0),p=j(f),m=s(16),b=j(m),v=s(6),g=j(v),w=s(7),y=j(w);function j(T){return T&&T.__esModule?T:{default:T}}function N(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function S(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function E(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var A=1,P=(function(T){E(_,T);function _(){return N(this,_),S(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"attach",value:function(){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(U,H){var Y=p.default.query(U,p.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,H)}},{key:"formatAt",value:function(U,H,Y,J){this.format(Y,J)}},{key:"insertAt",value:function(U,H,Y){if(typeof H=="string"&&H.endsWith(`
`)){var J=p.default.create(D.blotName);this.parent.insertBefore(J,U===0?this:this.next),J.insertAt(0,H.slice(0,-1))}else o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,U,H,Y)}}]),_})(p.default.Embed);P.scope=p.default.Scope.BLOCK_BLOT;var D=(function(T){E(_,T);function _(B){N(this,_);var U=S(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,B));return U.cache={},U}return i(_,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(U,H){return H.length()===0?U:U.insert(H.value(),R(H))},new u.default).insert(`
`,R(this))),this.cache.delta}},{key:"deleteAt",value:function(U,H){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,U,H),this.cache={}}},{key:"formatAt",value:function(U,H,Y,J){H<=0||(p.default.query(Y,p.default.Scope.BLOCK)?U+H===this.length()&&this.format(Y,J):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,U,Math.min(H,this.length()-U-1),Y,J),this.cache={})}},{key:"insertAt",value:function(U,H,Y){if(Y!=null)return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,U,H,Y);if(H.length!==0){var J=H.split(`
`),re=J.shift();re.length>0&&(U<this.length()-1||this.children.tail==null?o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,Math.min(U,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var X=this;J.reduce(function(ee,W){return X=X.split(ee,!0),X.insertAt(0,W),W.length},U+re.length)}}},{key:"insertBefore",value:function(U,H){var Y=this.children.head;o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,U,H),Y instanceof b.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(U,H){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"moveChildren",this).call(this,U,H),this.cache={}}},{key:"optimize",value:function(U){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,U),this.cache={}}},{key:"path",value:function(U){return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,U,!0)}},{key:"removeChild",value:function(U){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"removeChild",this).call(this,U),this.cache={}}},{key:"split",value:function(U){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H&&(U===0||U>=this.length()-A)){var Y=this.clone();return U===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var J=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"split",this).call(this,U,H);return this.cache={},J}}}]),_})(p.default.Block);D.blotName="block",D.tagName="P",D.defaultChild="break",D.allowedChildren=[g.default,p.default.Embed,y.default];function R(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(_=(0,c.default)(_,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?_:R(T.parent,_)}a.bubbleFormats=R,a.BlockEmbed=P,a.default=D}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.overload=a.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(ee,W){var O=[],z=!0,V=!1,q=void 0;try{for(var K=ee[Symbol.iterator](),se;!(z=(se=K.next()).done)&&(O.push(se.value),!(W&&O.length===W));z=!0);}catch(pe){V=!0,q=pe}finally{try{!z&&K.return&&K.return()}finally{if(V)throw q}}return O}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(ee,W){for(var O=0;O<W.length;O++){var z=W[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ee,z.key,z)}}return function(ee,W,O){return W&&X(ee.prototype,W),O&&X(ee,O),ee}})();s(50);var c=s(2),d=R(c),u=s(14),f=R(u),p=s(8),m=R(p),b=s(9),v=R(b),g=s(0),w=R(g),y=s(15),j=R(y),N=s(3),S=R(N),E=s(10),A=R(E),P=s(34),D=R(P);function R(X){return X&&X.__esModule?X:{default:X}}function T(X,ee,W){return ee in X?Object.defineProperty(X,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[ee]=W,X}function _(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}var B=(0,A.default)("quill"),U=(function(){l(X,null,[{key:"debug",value:function(W){W===!0&&(W="log"),A.default.level(W)}},{key:"find",value:function(W){return W.__quill||w.default.find(W)}},{key:"import",value:function(W){return this.imports[W]==null&&B.error("Cannot import "+W+". Are you sure it was registered?"),this.imports[W]}},{key:"register",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof W!="string"){var q=W.attrName||W.blotName;typeof q=="string"?this.register("formats/"+q,W,O):Object.keys(W).forEach(function(K){z.register(K,W[K],O)})}else this.imports[W]!=null&&!V&&B.warn("Overwriting "+W+" with",O),this.imports[W]=O,(W.startsWith("blots/")||W.startsWith("formats/"))&&O.blotName!=="abstract"?w.default.register(O):W.startsWith("modules")&&typeof O.register=="function"&&O.register()}}]);function X(ee){var W=this,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_(this,X),this.options=H(ee,O),this.container=this.options.container,this.container==null)return B.error("Invalid Quill container",ee);this.options.debug&&X.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(q){q===m.default.events.TEXT_CHANGE&&W.root.classList.toggle("ql-blank",W.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(q,K){var se=W.selection.lastRange,pe=se&&se.length===0?se.index:void 0;Y.call(W,function(){return W.editor.update(null,K,pe)},q)});var V=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(V),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(X,[{key:"addContainer",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof W=="string"){var z=W;W=document.createElement("div"),W.classList.add(z)}return this.container.insertBefore(W,O),W}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(W,O,z){var V=this,q=J(W,O,z),K=o(q,4);return W=K[0],O=K[1],z=K[3],Y.call(this,function(){return V.editor.deleteText(W,O)},z,W,-1*O)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(W),this.container.classList.toggle("ql-disabled",!W)}},{key:"focus",value:function(){var W=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=W,this.scrollIntoView()}},{key:"format",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return Y.call(this,function(){var q=z.getSelection(!0),K=new d.default;if(q==null)return K;if(w.default.query(W,w.default.Scope.BLOCK))K=z.editor.formatLine(q.index,q.length,T({},W,O));else{if(q.length===0)return z.selection.format(W,O),K;K=z.editor.formatText(q.index,q.length,T({},W,O))}return z.setSelection(q,m.default.sources.SILENT),K},V)}},{key:"formatLine",value:function(W,O,z,V,q){var K=this,se=void 0,pe=J(W,O,z,V,q),ie=o(pe,4);return W=ie[0],O=ie[1],se=ie[2],q=ie[3],Y.call(this,function(){return K.editor.formatLine(W,O,se)},q,W,0)}},{key:"formatText",value:function(W,O,z,V,q){var K=this,se=void 0,pe=J(W,O,z,V,q),ie=o(pe,4);return W=ie[0],O=ie[1],se=ie[2],q=ie[3],Y.call(this,function(){return K.editor.formatText(W,O,se)},q,W,0)}},{key:"getBounds",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof W=="number"?z=this.selection.getBounds(W,O):z=this.selection.getBounds(W.index,W.length);var V=this.container.getBoundingClientRect();return{bottom:z.bottom-V.top,height:z.height,left:z.left-V.left,right:z.right-V.left,top:z.top-V.top,width:z.width}}},{key:"getContents",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,z=J(W,O),V=o(z,2);return W=V[0],O=V[1],this.editor.getContents(W,O)}},{key:"getFormat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof W=="number"?this.editor.getFormat(W,O):this.editor.getFormat(W.index,W.length)}},{key:"getIndex",value:function(W){return W.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(W){return this.scroll.leaf(W)}},{key:"getLine",value:function(W){return this.scroll.line(W)}},{key:"getLines",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof W!="number"?this.scroll.lines(W.index,W.length):this.scroll.lines(W,O)}},{key:"getModule",value:function(W){return this.theme.modules[W]}},{key:"getSelection",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return W&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,z=J(W,O),V=o(z,2);return W=V[0],O=V[1],this.editor.getText(W,O)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(W,O,z){var V=this,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return Y.call(this,function(){return V.editor.insertEmbed(W,O,z)},q,W)}},{key:"insertText",value:function(W,O,z,V,q){var K=this,se=void 0,pe=J(W,0,z,V,q),ie=o(pe,4);return W=ie[0],se=ie[2],q=ie[3],Y.call(this,function(){return K.editor.insertText(W,O,se)},q,W,O.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(W,O,z){this.clipboard.dangerouslyPasteHTML(W,O,z)}},{key:"removeFormat",value:function(W,O,z){var V=this,q=J(W,O,z),K=o(q,4);return W=K[0],O=K[1],z=K[3],Y.call(this,function(){return V.editor.removeFormat(W,O)},z,W)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(W){var O=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return Y.call(this,function(){W=new d.default(W);var V=O.getLength(),q=O.editor.deleteText(0,V),K=O.editor.applyDelta(W),se=K.ops[K.ops.length-1];se!=null&&typeof se.insert=="string"&&se.insert[se.insert.length-1]===`
`&&(O.editor.deleteText(O.getLength()-1,1),K.delete(1));var pe=q.compose(K);return pe},z)}},{key:"setSelection",value:function(W,O,z){if(W==null)this.selection.setRange(null,O||X.sources.API);else{var V=J(W,O,z),q=o(V,4);W=q[0],O=q[1],z=q[3],this.selection.setRange(new y.Range(W,O),z),z!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,z=new d.default().insert(W);return this.setContents(z,O)}},{key:"update",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,O=this.scroll.update(W);return this.selection.update(W),O}},{key:"updateContents",value:function(W){var O=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return Y.call(this,function(){return W=new d.default(W),O.editor.applyDelta(W,z)},z,!0)}}]),X})();U.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},U.events=m.default.events,U.sources=m.default.sources,U.version="1.3.7",U.imports={delta:d.default,parchment:w.default,"core/module":v.default,"core/theme":D.default};function H(X,ee){if(ee=(0,S.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},ee),!ee.theme||ee.theme===U.DEFAULTS.theme)ee.theme=D.default;else if(ee.theme=U.import("themes/"+ee.theme),ee.theme==null)throw new Error("Invalid theme "+ee.theme+". Did you register it?");var W=(0,S.default)(!0,{},ee.theme.DEFAULTS);[W,ee].forEach(function(V){V.modules=V.modules||{},Object.keys(V.modules).forEach(function(q){V.modules[q]===!0&&(V.modules[q]={})})});var O=Object.keys(W.modules).concat(Object.keys(ee.modules)),z=O.reduce(function(V,q){var K=U.import("modules/"+q);return K==null?B.error("Cannot load "+q+" module. Are you sure you registered it?"):V[q]=K.DEFAULTS||{},V},{});return ee.modules!=null&&ee.modules.toolbar&&ee.modules.toolbar.constructor!==Object&&(ee.modules.toolbar={container:ee.modules.toolbar}),ee=(0,S.default)(!0,{},U.DEFAULTS,{modules:z},W,ee),["bounds","container","scrollingContainer"].forEach(function(V){typeof ee[V]=="string"&&(ee[V]=document.querySelector(ee[V]))}),ee.modules=Object.keys(ee.modules).reduce(function(V,q){return ee.modules[q]&&(V[q]=ee.modules[q]),V},{}),ee}function Y(X,ee,W,O){if(this.options.strict&&!this.isEnabled()&&ee===m.default.sources.USER)return new d.default;var z=W==null?null:this.getSelection(),V=this.editor.delta,q=X();if(z!=null&&(W===!0&&(W=z.index),O==null?z=re(z,q,ee):O!==0&&(z=re(z,W,O,ee)),this.setSelection(z,m.default.sources.SILENT)),q.length()>0){var K,se=[m.default.events.TEXT_CHANGE,q,V,ee];if((K=this.emitter).emit.apply(K,[m.default.events.EDITOR_CHANGE].concat(se)),ee!==m.default.sources.SILENT){var pe;(pe=this.emitter).emit.apply(pe,se)}}return q}function J(X,ee,W,O,z){var V={};return typeof X.index=="number"&&typeof X.length=="number"?typeof ee!="number"?(z=O,O=W,W=ee,ee=X.length,X=X.index):(ee=X.length,X=X.index):typeof ee!="number"&&(z=O,O=W,W=ee,ee=0),(typeof W>"u"?"undefined":i(W))==="object"?(V=W,z=O):typeof W=="string"&&(O!=null?V[W]=O:z=W),z=z||m.default.sources.API,[X,ee,V,z]}function re(X,ee,W,O){if(X==null)return null;var z=void 0,V=void 0;if(ee instanceof d.default){var q=[X.index,X.index+X.length].map(function(ie){return ee.transformPosition(ie,O!==m.default.sources.USER)}),K=o(q,2);z=K[0],V=K[1]}else{var se=[X.index,X.index+X.length].map(function(ie){return ie<ee||ie===ee&&O===m.default.sources.USER?ie:W>=0?ie+W:Math.max(ee,ie+W)}),pe=o(se,2);z=pe[0],V=pe[1]}return new y.Range(z,V-z)}a.expandConfig=H,a.overload=J,a.default=U}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(7),c=f(l),d=s(0),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function m(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function b(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var v=(function(g){b(w,g);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"formatAt",value:function(j,N,S,E){if(w.compare(this.statics.blotName,S)<0&&u.default.query(S,u.default.Scope.BLOT)){var A=this.isolate(j,N);E&&A.wrap(S,E)}else o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,j,N,S,E)}},{key:"optimize",value:function(j){if(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,j),this.parent instanceof w&&w.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=w.order.indexOf(j),E=w.order.indexOf(N);return S>=0||E>=0?S-E:j===N?0:j<N?-1:1}}]),w})(u.default.Inline);v.allowedChildren=[v,u.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default.Text);a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(j,N){for(var S=0;S<N.length;S++){var E=N[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,N,S){return N&&y(j.prototype,N),S&&y(j,S),j}})(),o=function y(j,N,S){j===null&&(j=Function.prototype);var E=Object.getOwnPropertyDescriptor(j,N);if(E===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:y(A,N,S)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(S)}},l=s(54),c=f(l),d=s(10),u=f(d);function f(y){return y&&y.__esModule?y:{default:y}}function p(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}function m(y,j){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:y}function b(y,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);y.prototype=Object.create(j&&j.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(y,j):y.__proto__=j)}var v=(0,u.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(y){document.addEventListener(y,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(E){if(E.__quill&&E.__quill.emitter){var A;(A=E.__quill.emitter).handleDOM.apply(A,N)}})})});var w=(function(y){b(j,y);function j(){p(this,j);var N=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",v.error),N}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var E=arguments.length,A=Array(E>1?E-1:0),P=1;P<E;P++)A[P-1]=arguments[P];(this.listeners[S.type]||[]).forEach(function(D){var R=D.node,T=D.handler;(S.target===R||R.contains(S.target))&&T.apply(void 0,[S].concat(A))})}},{key:"listenDOM",value:function(S,E,A){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:E,handler:A})}}]),j})(c.default);w.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},w.sources={API:"api",SILENT:"silent",USER:"user"},a.default=w}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=d};o.DEFAULTS={},a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(d){if(i.indexOf(d)<=i.indexOf(o)){for(var u,f=arguments.length,p=Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];(u=console)[d].apply(u,p)}}function c(d){return i.reduce(function(u,f){return u[f]=l.bind(console,f,d),u},{})}l.level=c.level=function(d){o=d},a.default=c}),(function(r,a,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(p,m,b){return b||(b={}),p===m?!0:p instanceof Date&&m instanceof Date?p.getTime()===m.getTime():!p||!m||typeof p!="object"&&typeof m!="object"?b.strict?p===m:p==m:f(p,m,b)};function d(p){return p==null}function u(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function f(p,m,b){var v,g;if(d(p)||d(m)||p.prototype!==m.prototype)return!1;if(l(p))return l(m)?(p=i.call(p),m=i.call(m),c(p,m,b)):!1;if(u(p)){if(!u(m)||p.length!==m.length)return!1;for(v=0;v<p.length;v++)if(p[v]!==m[v])return!1;return!0}try{var w=o(p),y=o(m)}catch{return!1}if(w.length!=y.length)return!1;for(w.sort(),y.sort(),v=w.length-1;v>=0;v--)if(w[v]!=y[v])return!1;for(v=w.length-1;v>=0;v--)if(g=w[v],!c(p[g],m[g],b))return!1;return typeof p==typeof m}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c,d,u){u===void 0&&(u={}),this.attrName=c,this.keyName=d;var f=i.Scope.TYPE&i.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&i.Scope.LEVEL|f:this.scope=i.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},l.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},l.prototype.canAdd=function(c,d){var u=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Code=void 0;var i=(function(){function P(D,R){var T=[],_=!0,B=!1,U=void 0;try{for(var H=D[Symbol.iterator](),Y;!(_=(Y=H.next()).done)&&(T.push(Y.value),!(R&&T.length===R));_=!0);}catch(J){B=!0,U=J}finally{try{!_&&H.return&&H.return()}finally{if(B)throw U}}return T}return function(D,R){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return P(D,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(D,R){for(var T=0;T<R.length;T++){var _=R[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,_.key,_)}}return function(D,R,T){return R&&P(D.prototype,R),T&&P(D,T),D}})(),l=function P(D,R,T){D===null&&(D=Function.prototype);var _=Object.getOwnPropertyDescriptor(D,R);if(_===void 0){var B=Object.getPrototypeOf(D);return B===null?void 0:P(B,R,T)}else{if("value"in _)return _.value;var U=_.get;return U===void 0?void 0:U.call(T)}},c=s(2),d=y(c),u=s(0),f=y(u),p=s(4),m=y(p),b=s(6),v=y(b),g=s(7),w=y(g);function y(P){return P&&P.__esModule?P:{default:P}}function j(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function N(P,D){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:P}function S(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(P,D):P.__proto__=D)}var E=(function(P){S(D,P);function D(){return j(this,D),N(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return D})(v.default);E.blotName="code",E.tagName="CODE";var A=(function(P){S(D,P);function D(){return j(this,D),N(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return o(D,[{key:"delta",value:function(){var T=this,_=this.domNode.textContent;return _.endsWith(`
`)&&(_=_.slice(0,-1)),_.split(`
`).reduce(function(B,U){return B.insert(U).insert(`
`,T.formats())},new d.default)}},{key:"format",value:function(T,_){if(!(T===this.statics.blotName&&_)){var B=this.descendant(w.default,this.length()-1),U=i(B,1),H=U[0];H?.deleteAt(H.length()-1,1),l(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"format",this).call(this,T,_)}}},{key:"formatAt",value:function(T,_,B,U){if(_!==0&&!(f.default.query(B,f.default.Scope.BLOCK)==null||B===this.statics.blotName&&U===this.statics.formats(this.domNode))){var H=this.newlineIndex(T);if(!(H<0||H>=T+_)){var Y=this.newlineIndex(T,!0)+1,J=H-Y+1,re=this.isolate(Y,J),X=re.next;re.format(B,U),X instanceof D&&X.formatAt(0,T-Y+_-J,B,U)}}}},{key:"insertAt",value:function(T,_,B){if(B==null){var U=this.descendant(w.default,T),H=i(U,2),Y=H[0],J=H[1];Y.insertAt(J,_)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(_)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var B=this.domNode.textContent.slice(T).indexOf(`
`);return B>-1?T+B:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),l(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,T);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===_.statics.formats(_.domNode)&&(_.optimize(T),_.moveChildren(this),_.remove())}},{key:"replace",value:function(T){l(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(_){var B=f.default.find(_);B==null?_.parentNode.removeChild(_):B instanceof f.default.Embed?B.remove():B.unwrap()})}}],[{key:"create",value:function(T){var _=l(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,T);return _.setAttribute("spellcheck",!1),_}},{key:"formats",value:function(){return!0}}]),D})(m.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",a.Code=E,a.default=A}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(ee,W){var O=[],z=!0,V=!1,q=void 0;try{for(var K=ee[Symbol.iterator](),se;!(z=(se=K.next()).done)&&(O.push(se.value),!(W&&O.length===W));z=!0);}catch(pe){V=!0,q=pe}finally{try{!z&&K.return&&K.return()}finally{if(V)throw q}}return O}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(ee,W){for(var O=0;O<W.length;O++){var z=W[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ee,z.key,z)}}return function(ee,W,O){return W&&X(ee.prototype,W),O&&X(ee,O),ee}})(),c=s(2),d=_(c),u=s(20),f=_(u),p=s(0),m=_(p),b=s(13),v=_(b),g=s(24),w=_(g),y=s(4),j=_(y),N=s(16),S=_(N),E=s(21),A=_(E),P=s(11),D=_(P),R=s(3),T=_(R);function _(X){return X&&X.__esModule?X:{default:X}}function B(X,ee,W){return ee in X?Object.defineProperty(X,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[ee]=W,X}function U(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}var H=/^[ -~]*$/,Y=(function(){function X(ee){U(this,X),this.scroll=ee,this.delta=this.getDelta()}return l(X,[{key:"applyDelta",value:function(W){var O=this,z=!1;this.scroll.update();var V=this.scroll.length();return this.scroll.batchStart(),W=re(W),W.reduce(function(q,K){var se=K.retain||K.delete||K.insert.length||1,pe=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var ie=K.insert;ie.endsWith(`
`)&&z&&(z=!1,ie=ie.slice(0,-1)),q>=V&&!ie.endsWith(`
`)&&(z=!0),O.scroll.insertAt(q,ie);var le=O.scroll.line(q),$e=o(le,2),he=$e[0],Ue=$e[1],Te=(0,T.default)({},(0,y.bubbleFormats)(he));if(he instanceof j.default){var oe=he.descendant(m.default.Leaf,Ue),te=o(oe,1),Pe=te[0];Te=(0,T.default)(Te,(0,y.bubbleFormats)(Pe))}pe=f.default.attributes.diff(Te,pe)||{}}else if(i(K.insert)==="object"){var je=Object.keys(K.insert)[0];if(je==null)return q;O.scroll.insertAt(q,je,K.insert[je])}V+=se}return Object.keys(pe).forEach(function(Ie){O.scroll.formatAt(q,se,Ie,pe[Ie])}),q+se},0),W.reduce(function(q,K){return typeof K.delete=="number"?(O.scroll.deleteAt(q,K.delete),q):q+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(W)}},{key:"deleteText",value:function(W,O){return this.scroll.deleteAt(W,O),this.update(new d.default().retain(W).delete(O))}},{key:"formatLine",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(V).forEach(function(q){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[q])){var K=z.scroll.lines(W,Math.max(O,1)),se=O;K.forEach(function(pe){var ie=pe.length();if(!(pe instanceof v.default))pe.format(q,V[q]);else{var le=W-pe.offset(z.scroll),$e=pe.newlineIndex(le+se)-le+1;pe.formatAt(le,$e,q,V[q])}se-=ie})}}),this.scroll.optimize(),this.update(new d.default().retain(W).retain(O,(0,A.default)(V)))}},{key:"formatText",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(V).forEach(function(q){z.scroll.formatAt(W,O,q,V[q])}),this.update(new d.default().retain(W).retain(O,(0,A.default)(V)))}},{key:"getContents",value:function(W,O){return this.delta.slice(W,W+O)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(W,O){return W.concat(O.delta())},new d.default)}},{key:"getFormat",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],V=[];O===0?this.scroll.path(W).forEach(function(K){var se=o(K,1),pe=se[0];pe instanceof j.default?z.push(pe):pe instanceof m.default.Leaf&&V.push(pe)}):(z=this.scroll.lines(W,O),V=this.scroll.descendants(m.default.Leaf,W,O));var q=[z,V].map(function(K){if(K.length===0)return{};for(var se=(0,y.bubbleFormats)(K.shift());Object.keys(se).length>0;){var pe=K.shift();if(pe==null)return se;se=J((0,y.bubbleFormats)(pe),se)}return se});return T.default.apply(T.default,q)}},{key:"getText",value:function(W,O){return this.getContents(W,O).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(W,O,z){return this.scroll.insertAt(W,O,z),this.update(new d.default().retain(W).insert(B({},O,z)))}},{key:"insertText",value:function(W,O){var z=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(W,O),Object.keys(V).forEach(function(q){z.scroll.formatAt(W,O.length,q,V[q])}),this.update(new d.default().retain(W).insert(O,(0,A.default)(V)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var W=this.scroll.children.head;return W.statics.blotName!==j.default.blotName||W.children.length>1?!1:W.children.head instanceof S.default}},{key:"removeFormat",value:function(W,O){var z=this.getText(W,O),V=this.scroll.line(W+O),q=o(V,2),K=q[0],se=q[1],pe=0,ie=new d.default;K!=null&&(K instanceof v.default?pe=K.newlineIndex(se)-se+1:pe=K.length()-se,ie=K.delta().slice(se,se+pe-1).insert(`
`));var le=this.getContents(W,O+pe),$e=le.diff(new d.default().insert(z).concat(ie)),he=new d.default().retain(W).concat($e);return this.applyDelta(he)}},{key:"update",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,V=this.delta;if(O.length===1&&O[0].type==="characterData"&&O[0].target.data.match(H)&&m.default.find(O[0].target)){var q=m.default.find(O[0].target),K=(0,y.bubbleFormats)(q),se=q.offset(this.scroll),pe=O[0].oldValue.replace(w.default.CONTENTS,""),ie=new d.default().insert(pe),le=new d.default().insert(q.value()),$e=new d.default().retain(se).concat(ie.diff(le,z));W=$e.reduce(function(he,Ue){return Ue.insert?he.insert(Ue.insert,K):he.push(Ue)},new d.default),this.delta=V.compose(W)}else this.delta=this.getDelta(),(!W||!(0,D.default)(V.compose(W),this.delta))&&(W=V.diff(this.delta,z));return W}}]),X})();function J(X,ee){return Object.keys(ee).reduce(function(W,O){return X[O]==null||(ee[O]===X[O]?W[O]=ee[O]:Array.isArray(ee[O])?ee[O].indexOf(X[O])<0&&(W[O]=ee[O].concat([X[O]])):W[O]=[ee[O],X[O]]),W},{})}function re(X){return X.reduce(function(ee,W){if(W.insert===1){var O=(0,A.default)(W.attributes);return delete O.image,ee.insert({image:W.attributes.image},O)}if(W.attributes!=null&&(W.attributes.list===!0||W.attributes.bullet===!0)&&(W=(0,A.default)(W),W.attributes.list?W.attributes.list="ordered":(W.attributes.list="bullet",delete W.attributes.bullet)),typeof W.insert=="string"){var z=W.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ee.insert(z,W.attributes)}return ee.push(W)},new d.default)}a.default=Y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Range=void 0;var i=(function(){function P(D,R){var T=[],_=!0,B=!1,U=void 0;try{for(var H=D[Symbol.iterator](),Y;!(_=(Y=H.next()).done)&&(T.push(Y.value),!(R&&T.length===R));_=!0);}catch(J){B=!0,U=J}finally{try{!_&&H.return&&H.return()}finally{if(B)throw U}}return T}return function(D,R){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return P(D,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(D,R){for(var T=0;T<R.length;T++){var _=R[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,_.key,_)}}return function(D,R,T){return R&&P(D.prototype,R),T&&P(D,T),D}})(),l=s(0),c=w(l),d=s(21),u=w(d),f=s(11),p=w(f),m=s(8),b=w(m),v=s(10),g=w(v);function w(P){return P&&P.__esModule?P:{default:P}}function y(P){if(Array.isArray(P)){for(var D=0,R=Array(P.length);D<P.length;D++)R[D]=P[D];return R}else return Array.from(P)}function j(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}var N=(0,g.default)("quill:selection"),S=function P(D){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,P),this.index=D,this.length=R},E=(function(){function P(D,R){var T=this;j(this,P),this.emitter=R,this.scroll=D,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(_,B){_===b.default.events.TEXT_CHANGE&&B.length()>0&&T.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var _=T.getNativeRange();_!=null&&_.start.node!==T.cursor.textNode&&T.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(_.start.node,_.start.offset,_.end.node,_.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(_,B){if(B.range){var U=B.range,H=U.startNode,Y=U.startOffset,J=U.endNode,re=U.endOffset;T.setNativeRange(H,Y,J,re)}}),this.update(b.default.sources.SILENT)}return o(P,[{key:"handleComposition",value:function(){var R=this;this.root.addEventListener("compositionstart",function(){R.composing=!0}),this.root.addEventListener("compositionend",function(){if(R.composing=!1,R.cursor.parent){var T=R.cursor.restore();if(!T)return;setTimeout(function(){R.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var R=this;this.emitter.listenDOM("mousedown",document.body,function(){R.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){R.mouseDown=!1,R.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(R,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[R])){this.scroll.update();var _=this.getNativeRange();if(!(_==null||!_.native.collapsed||c.default.query(R,c.default.Scope.BLOCK))){if(_.start.node!==this.cursor.textNode){var B=c.default.find(_.start.node,!1);if(B==null)return;if(B instanceof c.default.Leaf){var U=B.split(_.start.offset);B.parent.insertBefore(this.cursor,U)}else B.insertBefore(this.cursor,_.start.node);this.cursor.attach()}this.cursor.format(R,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(R){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=this.scroll.length();R=Math.min(R,_-1),T=Math.min(R+T,_-1)-R;var B=void 0,U=this.scroll.leaf(R),H=i(U,2),Y=H[0],J=H[1];if(Y==null)return null;var re=Y.position(J,!0),X=i(re,2);B=X[0],J=X[1];var ee=document.createRange();if(T>0){ee.setStart(B,J);var W=this.scroll.leaf(R+T),O=i(W,2);if(Y=O[0],J=O[1],Y==null)return null;var z=Y.position(J,!0),V=i(z,2);return B=V[0],J=V[1],ee.setEnd(B,J),ee.getBoundingClientRect()}else{var q="left",K=void 0;return B instanceof Text?(J<B.data.length?(ee.setStart(B,J),ee.setEnd(B,J+1)):(ee.setStart(B,J-1),ee.setEnd(B,J),q="right"),K=ee.getBoundingClientRect()):(K=Y.domNode.getBoundingClientRect(),J>0&&(q="right")),{bottom:K.top+K.height,height:K.height,left:K[q],right:K[q],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var R=document.getSelection();if(R==null||R.rangeCount<=0)return null;var T=R.getRangeAt(0);if(T==null)return null;var _=this.normalizeNative(T);return N.info("getNativeRange",_),_}},{key:"getRange",value:function(){var R=this.getNativeRange();if(R==null)return[null,null];var T=this.normalizedToRange(R);return[T,R]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(R){var T=this,_=[[R.start.node,R.start.offset]];R.native.collapsed||_.push([R.end.node,R.end.offset]);var B=_.map(function(Y){var J=i(Y,2),re=J[0],X=J[1],ee=c.default.find(re,!0),W=ee.offset(T.scroll);return X===0?W:ee instanceof c.default.Container?W+ee.length():W+ee.index(re,X)}),U=Math.min(Math.max.apply(Math,y(B)),this.scroll.length()-1),H=Math.min.apply(Math,[U].concat(y(B)));return new S(H,U-H)}},{key:"normalizeNative",value:function(R){if(!A(this.root,R.startContainer)||!R.collapsed&&!A(this.root,R.endContainer))return null;var T={start:{node:R.startContainer,offset:R.startOffset},end:{node:R.endContainer,offset:R.endOffset},native:R};return[T.start,T.end].forEach(function(_){for(var B=_.node,U=_.offset;!(B instanceof Text)&&B.childNodes.length>0;)if(B.childNodes.length>U)B=B.childNodes[U],U=0;else if(B.childNodes.length===U)B=B.lastChild,U=B instanceof Text?B.data.length:B.childNodes.length+1;else break;_.node=B,_.offset=U}),T}},{key:"rangeToNative",value:function(R){var T=this,_=R.collapsed?[R.index]:[R.index,R.index+R.length],B=[],U=this.scroll.length();return _.forEach(function(H,Y){H=Math.min(U-1,H);var J=void 0,re=T.scroll.leaf(H),X=i(re,2),ee=X[0],W=X[1],O=ee.position(W,Y!==0),z=i(O,2);J=z[0],W=z[1],B.push(J,W)}),B.length<2&&(B=B.concat(B)),B}},{key:"scrollIntoView",value:function(R){var T=this.lastRange;if(T!=null){var _=this.getBounds(T.index,T.length);if(_!=null){var B=this.scroll.length()-1,U=this.scroll.line(Math.min(T.index,B)),H=i(U,1),Y=H[0],J=Y;if(T.length>0){var re=this.scroll.line(Math.min(T.index+T.length,B)),X=i(re,1);J=X[0]}if(!(Y==null||J==null)){var ee=R.getBoundingClientRect();_.top<ee.top?R.scrollTop-=ee.top-_.top:_.bottom>ee.bottom&&(R.scrollTop+=_.bottom-ee.bottom)}}}}},{key:"setNativeRange",value:function(R,T){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,U=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",R,T,_,B),!(R!=null&&(this.root.parentNode==null||R.parentNode==null||_.parentNode==null))){var H=document.getSelection();if(H!=null)if(R!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||U||R!==Y.startContainer||T!==Y.startOffset||_!==Y.endContainer||B!==Y.endOffset){R.tagName=="BR"&&(T=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode),_.tagName=="BR"&&(B=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode);var J=document.createRange();J.setStart(R,T),J.setEnd(_,B),H.removeAllRanges(),H.addRange(J)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(R){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof T=="string"&&(_=T,T=!1),N.info("setRange",R),R!=null){var B=this.rangeToNative(R);this.setNativeRange.apply(this,y(B).concat([T]))}else this.setNativeRange(null);this.update(_)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,T=this.lastRange,_=this.getRange(),B=i(_,2),U=B[0],H=B[1];if(this.lastRange=U,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(T,this.lastRange)){var Y;!this.composing&&H!=null&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[b.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(T),R];if((Y=this.emitter).emit.apply(Y,[b.default.events.EDITOR_CHANGE].concat(J)),R!==b.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,J)}}}}]),P})();function A(P,D){try{D.parentNode}catch{return!1}return D instanceof Text&&(D=D.parentNode),P.contains(D)}a.Range=S,a.default=E}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(0),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(w,y){w.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,w,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);m.blotName="break",m.tagName="BR",a.default=m}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),d=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.build(),b}return p.prototype.appendChild=function(m){this.insertBefore(m)},p.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},p.prototype.build=function(){var m=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var v=u(b);m.insertBefore(v,m.children.head||void 0)}catch(g){if(g instanceof c.ParchmentError)return;throw g}})},p.prototype.deleteAt=function(m,b){if(m===0&&b===this.length())return this.remove();this.children.forEachAt(m,b,function(v,g,w){v.deleteAt(g,w)})},p.prototype.descendant=function(m,b){var v=this.children.find(b),g=v[0],w=v[1];return m.blotName==null&&m(g)||m.blotName!=null&&g instanceof m?[g,w]:g instanceof p?g.descendant(m,w):[null,-1]},p.prototype.descendants=function(m,b,v){b===void 0&&(b=0),v===void 0&&(v=Number.MAX_VALUE);var g=[],w=v;return this.children.forEachAt(b,v,function(y,j,N){(m.blotName==null&&m(y)||m.blotName!=null&&y instanceof m)&&g.push(y),y instanceof p&&(g=g.concat(y.descendants(m,j,w))),w-=N}),g},p.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),f.prototype.detach.call(this)},p.prototype.formatAt=function(m,b,v,g){this.children.forEachAt(m,b,function(w,y,j){w.formatAt(y,j,v,g)})},p.prototype.insertAt=function(m,b,v){var g=this.children.find(m),w=g[0],y=g[1];if(w)w.insertAt(y,b,v);else{var j=v==null?c.create("text",b):c.create(b,v);this.appendChild(j)}},p.prototype.insertBefore=function(m,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return m instanceof v}))throw new c.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,b)},p.prototype.length=function(){return this.children.reduce(function(m,b){return m+b.length()},0)},p.prototype.moveChildren=function(m,b){this.children.forEach(function(v){m.insertBefore(v,b)})},p.prototype.optimize=function(m){if(f.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var b=c.create(this.statics.defaultChild);this.appendChild(b),b.optimize(m)}else this.remove()},p.prototype.path=function(m,b){b===void 0&&(b=!1);var v=this.children.find(m,b),g=v[0],w=v[1],y=[[this,m]];return g instanceof p?y.concat(g.path(w,b)):(g!=null&&y.push([g,w]),y)},p.prototype.removeChild=function(m){this.children.remove(m)},p.prototype.replace=function(m){m instanceof p&&m.moveChildren(this),f.prototype.replace.call(this,m)},p.prototype.split=function(m,b){if(b===void 0&&(b=!1),!b){if(m===0)return this;if(m===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(m,this.length(),function(g,w,y){g=g.split(w,b),v.appendChild(g)}),v},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(m,b){var v=this,g=[],w=[];m.forEach(function(y){y.target===v.domNode&&y.type==="childList"&&(g.push.apply(g,y.addedNodes),w.push.apply(w,y.removedNodes))}),w.forEach(function(y){if(!(y.parentNode!=null&&y.tagName!=="IFRAME"&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=c.find(y);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),g.filter(function(y){return y.parentNode==v.domNode}).sort(function(y,j){return y===j?0:y.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var j=null;y.nextSibling!=null&&(j=c.find(y.nextSibling));var N=u(y);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,j||void 0))})},p})(l.default);function u(f){var p=c.find(f);if(p==null)try{p=c.create(f)}catch{p=c.create(c.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(b){p.domNode.appendChild(b)}),f.parentNode&&f.parentNode.replaceChild(p.domNode,f),p.attach()}return p}a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),d=s(1),u=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.attributes=new l.default(b.domNode),b}return p.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},p.prototype.format=function(m,b){var v=d.query(m);v instanceof o.default?this.attributes.attribute(v,b):b&&v!=null&&(m!==this.statics.blotName||this.formats()[m]!==b)&&this.replaceWith(m,b)},p.prototype.formats=function(){var m=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(m[this.statics.blotName]=b),m},p.prototype.replaceWith=function(m,b){var v=f.prototype.replaceWith.call(this,m,b);return this.attributes.copy(v),v},p.prototype.update=function(m,b){var v=this;f.prototype.update.call(this,m,b),m.some(function(g){return g.target===v.domNode&&g.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(m,b){var v=f.prototype.wrap.call(this,m,b);return v instanceof p&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},p})(c.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(30),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.value=function(f){return!0},u.prototype.index=function(f,p){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},u.prototype.position=function(f,p){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(m+=1),[this.parent.domNode,m]},u.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=s(11),o=s(3),l={attributes:{compose:function(d,u,f){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var p=o(!0,{},u);f||(p=Object.keys(p).reduce(function(b,v){return p[v]!=null&&(b[v]=p[v]),b},{}));for(var m in d)d[m]!==void 0&&u[m]===void 0&&(p[m]=d[m]);return Object.keys(p).length>0?p:void 0},diff:function(d,u){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var f=Object.keys(d).concat(Object.keys(u)).reduce(function(p,m){return i(d[m],u[m])||(p[m]=u[m]===void 0?null:u[m]),p},{});return Object.keys(f).length>0?f:void 0},transform:function(d,u,f){if(typeof d!="object")return u;if(typeof u=="object"){if(!f)return u;var p=Object.keys(u).reduce(function(m,b){return d[b]===void 0&&(m[b]=u[b]),m},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var u=this.ops[this.index];if(u){var f=this.offset,p=l.length(u);if(d>=p-f?(d=p-f,this.index+=1,this.offset=0):this.offset+=d,typeof u.delete=="number")return{delete:d};var m={};return u.attributes&&(m.attributes=u.attributes),typeof u.retain=="number"?m.retain=d:typeof u.insert=="string"?m.insert=u.insert.substr(f,d):m.insert=u.insert,m}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,u=this.index,f=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=u,[f].concat(p)}else return[]},r.exports=l}),(function(r,a){var s=(function(){function i(v,g){return g!=null&&v instanceof g}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(v,g,w,y,j){typeof g=="object"&&(w=g.depth,y=g.prototype,j=g.includeNonEnumerable,g=g.circular);var N=[],S=[],E=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof w>"u"&&(w=1/0);function A(P,D){if(P===null)return null;if(D===0)return P;var R,T;if(typeof P!="object")return P;if(i(P,o))R=new o;else if(i(P,l))R=new l;else if(i(P,c))R=new c(function(ee,W){P.then(function(O){ee(A(O,D-1))},function(O){W(A(O,D-1))})});else if(d.__isArray(P))R=[];else if(d.__isRegExp(P))R=new RegExp(P.source,b(P)),P.lastIndex&&(R.lastIndex=P.lastIndex);else if(d.__isDate(P))R=new Date(P.getTime());else{if(E&&Buffer.isBuffer(P))return Buffer.allocUnsafe?R=Buffer.allocUnsafe(P.length):R=new Buffer(P.length),P.copy(R),R;i(P,Error)?R=Object.create(P):typeof y>"u"?(T=Object.getPrototypeOf(P),R=Object.create(T)):(R=Object.create(y),T=y)}if(g){var _=N.indexOf(P);if(_!=-1)return S[_];N.push(P),S.push(R)}i(P,o)&&P.forEach(function(ee,W){var O=A(W,D-1),z=A(ee,D-1);R.set(O,z)}),i(P,l)&&P.forEach(function(ee){var W=A(ee,D-1);R.add(W)});for(var B in P){var U;T&&(U=Object.getOwnPropertyDescriptor(T,B)),!(U&&U.set==null)&&(R[B]=A(P[B],D-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(P),B=0;B<H.length;B++){var Y=H[B],J=Object.getOwnPropertyDescriptor(P,Y);J&&!J.enumerable&&!j||(R[Y]=A(P[Y],D-1),J.enumerable||Object.defineProperty(R,Y,{enumerable:!1}))}if(j)for(var re=Object.getOwnPropertyNames(P),B=0;B<re.length;B++){var X=re[B],J=Object.getOwnPropertyDescriptor(P,X);J&&J.enumerable||(R[X]=A(P[X],D-1),Object.defineProperty(R,X,{enumerable:!1}))}return R}return A(v,w)}d.clonePrototype=function(g){if(g===null)return null;var w=function(){};return w.prototype=g,new w};function u(v){return Object.prototype.toString.call(v)}d.__objToStr=u;function f(v){return typeof v=="object"&&u(v)==="[object Date]"}d.__isDate=f;function p(v){return typeof v=="object"&&u(v)==="[object Array]"}d.__isArray=p;function m(v){return typeof v=="object"&&u(v)==="[object RegExp]"}d.__isRegExp=m;function b(v){var g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),g}return d.__getRegExpFlags=b,d})();typeof r=="object"&&r.exports&&(r.exports=s)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function R(T,_){var B=[],U=!0,H=!1,Y=void 0;try{for(var J=T[Symbol.iterator](),re;!(U=(re=J.next()).done)&&(B.push(re.value),!(_&&B.length===_));U=!0);}catch(X){H=!0,Y=X}finally{try{!U&&J.return&&J.return()}finally{if(H)throw Y}}return B}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return R(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function R(T,_){for(var B=0;B<_.length;B++){var U=_[B];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(T,U.key,U)}}return function(T,_,B){return _&&R(T.prototype,_),B&&R(T,B),T}})(),l=function R(T,_,B){T===null&&(T=Function.prototype);var U=Object.getOwnPropertyDescriptor(T,_);if(U===void 0){var H=Object.getPrototypeOf(T);return H===null?void 0:R(H,_,B)}else{if("value"in U)return U.value;var Y=U.get;return Y===void 0?void 0:Y.call(B)}},c=s(0),d=N(c),u=s(8),f=N(u),p=s(4),m=N(p),b=s(16),v=N(b),g=s(13),w=N(g),y=s(25),j=N(y);function N(R){return R&&R.__esModule?R:{default:R}}function S(R,T){if(!(R instanceof T))throw new TypeError("Cannot call a class as a function")}function E(R,T){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:R}function A(R,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);R.prototype=Object.create(T&&T.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(R,T):R.__proto__=T)}function P(R){return R instanceof m.default||R instanceof p.BlockEmbed}var D=(function(R){A(T,R);function T(_,B){S(this,T);var U=E(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,_));return U.emitter=B.emitter,Array.isArray(B.whitelist)&&(U.whitelist=B.whitelist.reduce(function(H,Y){return H[Y]=!0,H},{})),U.domNode.addEventListener("DOMNodeInserted",function(){}),U.optimize(),U.enable(),U}return o(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(B,U){var H=this.line(B),Y=i(H,2),J=Y[0],re=Y[1],X=this.line(B+U),ee=i(X,1),W=ee[0];if(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,B,U),W!=null&&J!==W&&re>0){if(J instanceof p.BlockEmbed||W instanceof p.BlockEmbed){this.optimize();return}if(J instanceof w.default){var O=J.newlineIndex(J.length(),!0);if(O>-1&&(J=J.split(O+1),J===W)){this.optimize();return}}else if(W instanceof w.default){var z=W.newlineIndex(0);z>-1&&W.split(z+1)}var V=W.children.head instanceof v.default?null:W.children.head;J.moveChildren(W,V),J.remove()}this.optimize()}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",B)}},{key:"formatAt",value:function(B,U,H,Y){this.whitelist!=null&&!this.whitelist[H]||(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,B,U,H,Y),this.optimize())}},{key:"insertAt",value:function(B,U,H){if(!(H!=null&&this.whitelist!=null&&!this.whitelist[U])){if(B>=this.length())if(H==null||d.default.query(U,d.default.Scope.BLOCK)==null){var Y=d.default.create(this.statics.defaultChild);this.appendChild(Y),H==null&&U.endsWith(`
`)&&(U=U.slice(0,-1)),Y.insertAt(0,U,H)}else{var J=d.default.create(U,H);this.appendChild(J)}else l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,B,U,H);this.optimize()}}},{key:"insertBefore",value:function(B,U){if(B.statics.scope===d.default.Scope.INLINE_BLOT){var H=d.default.create(this.statics.defaultChild);H.appendChild(B),B=H}l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,B,U)}},{key:"leaf",value:function(B){return this.path(B).pop()||[null,-1]}},{key:"line",value:function(B){return B===this.length()?this.line(B-1):this.descendant(P,B)}},{key:"lines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,H=function Y(J,re,X){var ee=[],W=X;return J.children.forEachAt(re,X,function(O,z,V){P(O)?ee.push(O):O instanceof d.default.Container&&(ee=ee.concat(Y(O,z,W))),W-=V}),ee};return H(this,B,U)}},{key:"optimize",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,B,U),B.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,B,U))}},{key:"path",value:function(B){return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,B).slice(1)}},{key:"update",value:function(B){if(this.batch!==!0){var U=f.default.sources.USER;typeof B=="string"&&(U=B),Array.isArray(B)||(B=this.observer.takeRecords()),B.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,U,B),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,B.concat([])),B.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,U,B)}}}]),T})(d.default.Scroll);D.blotName="scroll",D.className="ql-editor",D.tagName="DIV",D.defaultChild="block",D.allowedChildren=[m.default,p.BlockEmbed,j.default],a.default=D}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SHORTKEY=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(se,pe){var ie=[],le=!0,$e=!1,he=void 0;try{for(var Ue=se[Symbol.iterator](),Te;!(le=(Te=Ue.next()).done)&&(ie.push(Te.value),!(pe&&ie.length===pe));le=!0);}catch(oe){$e=!0,he=oe}finally{try{!le&&Ue.return&&Ue.return()}finally{if($e)throw he}}return ie}return function(se,pe){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return K(se,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function K(se,pe){for(var ie=0;ie<pe.length;ie++){var le=pe[ie];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(se,le.key,le)}}return function(se,pe,ie){return pe&&K(se.prototype,pe),ie&&K(se,ie),se}})(),c=s(21),d=R(c),u=s(11),f=R(u),p=s(3),m=R(p),b=s(2),v=R(b),g=s(20),w=R(g),y=s(0),j=R(y),N=s(5),S=R(N),E=s(10),A=R(E),P=s(9),D=R(P);function R(K){return K&&K.__esModule?K:{default:K}}function T(K,se,pe){return se in K?Object.defineProperty(K,se,{value:pe,enumerable:!0,configurable:!0,writable:!0}):K[se]=pe,K}function _(K,se){if(!(K instanceof se))throw new TypeError("Cannot call a class as a function")}function B(K,se){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:K}function U(K,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);K.prototype=Object.create(se&&se.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(K,se):K.__proto__=se)}var H=(0,A.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=(function(K){U(se,K),l(se,null,[{key:"match",value:function(ie,le){return le=q(le),["altKey","ctrlKey","metaKey","shiftKey"].some(function($e){return!!le[$e]!==ie[$e]&&le[$e]!==null})?!1:le.key===(ie.which||ie.keyCode)}}]);function se(pe,ie){_(this,se);var le=B(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,pe,ie));return le.bindings={},Object.keys(le.options.bindings).forEach(function($e){$e==="list autofill"&&pe.scroll.whitelist!=null&&!pe.scroll.whitelist.list||le.options.bindings[$e]&&le.addBinding(le.options.bindings[$e])}),le.addBinding({key:se.keys.ENTER,shiftKey:null},O),le.addBinding({key:se.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(le.addBinding({key:se.keys.BACKSPACE},{collapsed:!0},X),le.addBinding({key:se.keys.DELETE},{collapsed:!0},ee)):(le.addBinding({key:se.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},X),le.addBinding({key:se.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ee)),le.addBinding({key:se.keys.BACKSPACE},{collapsed:!1},W),le.addBinding({key:se.keys.DELETE},{collapsed:!1},W),le.addBinding({key:se.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},X),le.listen(),le}return l(se,[{key:"addBinding",value:function(ie){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},he=q(ie);if(he==null||he.key==null)return H.warn("Attempted to add invalid keyboard binding",he);typeof le=="function"&&(le={handler:le}),typeof $e=="function"&&($e={handler:$e}),he=(0,m.default)(he,le,$e),this.bindings[he.key]=this.bindings[he.key]||[],this.bindings[he.key].push(he)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(le){if(!le.defaultPrevented){var $e=le.which||le.keyCode,he=(ie.bindings[$e]||[]).filter(function(Me){return se.match(le,Me)});if(he.length!==0){var Ue=ie.quill.getSelection();if(!(Ue==null||!ie.quill.hasFocus())){var Te=ie.quill.getLine(Ue.index),oe=o(Te,2),te=oe[0],Pe=oe[1],je=ie.quill.getLeaf(Ue.index),Ie=o(je,2),ue=Ie[0],de=Ie[1],Ae=Ue.length===0?[ue,de]:ie.quill.getLeaf(Ue.index+Ue.length),Qe=o(Ae,2),ge=Qe[0],fe=Qe[1],_e=ue instanceof j.default.Text?ue.value().slice(0,de):"",ze=ge instanceof j.default.Text?ge.value().slice(fe):"",Se={collapsed:Ue.length===0,empty:Ue.length===0&&te.length()<=1,format:ie.quill.getFormat(Ue),offset:Pe,prefix:_e,suffix:ze},Fe=he.some(function(Me){if(Me.collapsed!=null&&Me.collapsed!==Se.collapsed||Me.empty!=null&&Me.empty!==Se.empty||Me.offset!=null&&Me.offset!==Se.offset)return!1;if(Array.isArray(Me.format)){if(Me.format.every(function(et){return Se.format[et]==null}))return!1}else if(i(Me.format)==="object"&&!Object.keys(Me.format).every(function(et){return Me.format[et]===!0?Se.format[et]!=null:Me.format[et]===!1?Se.format[et]==null:(0,f.default)(Me.format[et],Se.format[et])}))return!1;return Me.prefix!=null&&!Me.prefix.test(Se.prefix)||Me.suffix!=null&&!Me.suffix.test(Se.suffix)?!1:Me.handler.call(ie,Ue,Se)!==!0});Fe&&le.preventDefault()}}}})}}]),se})(D.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:V("bold"),italic:V("italic"),underline:V("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(se,pe){if(pe.collapsed&&pe.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(se,pe){if(pe.collapsed&&pe.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(se,pe){pe.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):pe.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(se){this.quill.deleteText(se.index-1,1,S.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(se){this.quill.history.cutoff();var pe=new v.default().retain(se.index).delete(se.length).insert("	");this.quill.updateContents(pe,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(se.index+1,S.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(se,pe){this.quill.format("list",!1,S.default.sources.USER),pe.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(se){var pe=this.quill.getLine(se.index),ie=o(pe,2),le=ie[0],$e=ie[1],he=(0,m.default)({},le.formats(),{list:"checked"}),Ue=new v.default().retain(se.index).insert(`
`,he).retain(le.length()-$e-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(se.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(se,pe){var ie=this.quill.getLine(se.index),le=o(ie,2),$e=le[0],he=le[1],Ue=new v.default().retain(se.index).insert(`
`,pe.format).retain($e.length()-he-1).retain(1,{header:null});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(se.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(se,pe){var ie=pe.prefix.length,le=this.quill.getLine(se.index),$e=o(le,2),he=$e[0],Ue=$e[1];if(Ue>ie)return!0;var Te=void 0;switch(pe.prefix.trim()){case"[]":case"[ ]":Te="unchecked";break;case"[x]":Te="checked";break;case"-":case"*":Te="bullet";break;default:Te="ordered"}this.quill.insertText(se.index," ",S.default.sources.USER),this.quill.history.cutoff();var oe=new v.default().retain(se.index-Ue).delete(ie+1).retain(he.length()-2-Ue).retain(1,{list:Te});this.quill.updateContents(oe,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(se.index-ie,S.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(se){var pe=this.quill.getLine(se.index),ie=o(pe,2),le=ie[0],$e=ie[1],he=new v.default().retain(se.index+le.length()-$e-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(he,S.default.sources.USER)}},"embed left":re(J.keys.LEFT,!1),"embed left shift":re(J.keys.LEFT,!0),"embed right":re(J.keys.RIGHT,!1),"embed right shift":re(J.keys.RIGHT,!0)}};function re(K,se){var pe,ie=K===J.keys.LEFT?"prefix":"suffix";return pe={key:K,shiftKey:se,altKey:null},T(pe,ie,/^$/),T(pe,"handler",function($e){var he=$e.index;K===J.keys.RIGHT&&(he+=$e.length+1);var Ue=this.quill.getLeaf(he),Te=o(Ue,1),oe=Te[0];return oe instanceof j.default.Embed?(K===J.keys.LEFT?se?this.quill.setSelection($e.index-1,$e.length+1,S.default.sources.USER):this.quill.setSelection($e.index-1,S.default.sources.USER):se?this.quill.setSelection($e.index,$e.length+1,S.default.sources.USER):this.quill.setSelection($e.index+$e.length+1,S.default.sources.USER),!1):!0}),pe}function X(K,se){if(!(K.index===0||this.quill.getLength()<=1)){var pe=this.quill.getLine(K.index),ie=o(pe,1),le=ie[0],$e={};if(se.offset===0){var he=this.quill.getLine(K.index-1),Ue=o(he,1),Te=Ue[0];if(Te!=null&&Te.length()>1){var oe=le.formats(),te=this.quill.getFormat(K.index-1,1);$e=w.default.attributes.diff(oe,te)||{}}}var Pe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(se.prefix)?2:1;this.quill.deleteText(K.index-Pe,Pe,S.default.sources.USER),Object.keys($e).length>0&&this.quill.formatLine(K.index-Pe,Pe,$e,S.default.sources.USER),this.quill.focus()}}function ee(K,se){var pe=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(se.suffix)?2:1;if(!(K.index>=this.quill.getLength()-pe)){var ie={},le=0,$e=this.quill.getLine(K.index),he=o($e,1),Ue=he[0];if(se.offset>=Ue.length()-1){var Te=this.quill.getLine(K.index+1),oe=o(Te,1),te=oe[0];if(te){var Pe=Ue.formats(),je=this.quill.getFormat(K.index,1);ie=w.default.attributes.diff(Pe,je)||{},le=te.length()}}this.quill.deleteText(K.index,pe,S.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(K.index+le-1,pe,ie,S.default.sources.USER)}}function W(K){var se=this.quill.getLines(K),pe={};if(se.length>1){var ie=se[0].formats(),le=se[se.length-1].formats();pe=w.default.attributes.diff(le,ie)||{}}this.quill.deleteText(K,S.default.sources.USER),Object.keys(pe).length>0&&this.quill.formatLine(K.index,1,pe,S.default.sources.USER),this.quill.setSelection(K.index,S.default.sources.SILENT),this.quill.focus()}function O(K,se){var pe=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var ie=Object.keys(se.format).reduce(function(le,$e){return j.default.query($e,j.default.Scope.BLOCK)&&!Array.isArray(se.format[$e])&&(le[$e]=se.format[$e]),le},{});this.quill.insertText(K.index,`
`,ie,S.default.sources.USER),this.quill.setSelection(K.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(se.format).forEach(function(le){ie[le]==null&&(Array.isArray(se.format[le])||le!=="link"&&pe.quill.format(le,se.format[le],S.default.sources.USER))})}function z(K){return{key:J.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(pe){var ie=j.default.query("code-block"),le=pe.index,$e=pe.length,he=this.quill.scroll.descendant(ie,le),Ue=o(he,2),Te=Ue[0],oe=Ue[1];if(Te!=null){var te=this.quill.getIndex(Te),Pe=Te.newlineIndex(oe,!0)+1,je=Te.newlineIndex(te+oe+$e),Ie=Te.domNode.textContent.slice(Pe,je).split(`
`);oe=0,Ie.forEach(function(ue,de){K?(Te.insertAt(Pe+oe,ie.TAB),oe+=ie.TAB.length,de===0?le+=ie.TAB.length:$e+=ie.TAB.length):ue.startsWith(ie.TAB)&&(Te.deleteAt(Pe+oe,ie.TAB.length),oe-=ie.TAB.length,de===0?le-=ie.TAB.length:$e-=ie.TAB.length),oe+=ue.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(le,$e,S.default.sources.SILENT)}}}}function V(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(pe,ie){this.quill.format(K,!ie.format[K],S.default.sources.USER)}}}function q(K){if(typeof K=="string"||typeof K=="number")return q({key:K});if((typeof K>"u"?"undefined":i(K))==="object"&&(K=(0,d.default)(K,!1)),typeof K.key=="string")if(J.keys[K.key.toUpperCase()]!=null)K.key=J.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[Y]=K.shortKey,delete K.shortKey),K}a.default=J,a.SHORTKEY=Y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function w(y,j){var N=[],S=!0,E=!1,A=void 0;try{for(var P=y[Symbol.iterator](),D;!(S=(D=P.next()).done)&&(N.push(D.value),!(j&&N.length===j));S=!0);}catch(R){E=!0,A=R}finally{try{!S&&P.return&&P.return()}finally{if(E)throw A}}return N}return function(y,j){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return w(y,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function w(y,j,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,j);if(S===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:w(E,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=(function(){function w(y,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,j,N){return j&&w(y.prototype,j),N&&w(y,N),y}})(),c=s(0),d=p(c),u=s(7),f=p(u);function p(w){return w&&w.__esModule?w:{default:w}}function m(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function b(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function v(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var g=(function(w){v(y,w),l(y,null,[{key:"value",value:function(){}}]);function y(j,N){m(this,y);var S=b(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(y.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(y,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,N,S);for(var E=this,A=0;E!=null&&E.statics.scope!==d.default.Scope.BLOCK_BLOT;)A+=E.offset(E.parent),E=E.parent;E!=null&&(this._length=y.CONTENTS.length,E.optimize(),E.formatAt(A,y.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),E=void 0,A=void 0,P=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var D=[N,S.start.offset,S.end.offset];E=D[0],A=D[1],P=D[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var R=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof f.default?(E=this.next.domNode,this.next.insertAt(0,R),this.textNode.data=y.CONTENTS):(this.textNode.data=R,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var T=[A,P].map(function(B){return Math.max(0,Math.min(E.data.length,B-1))}),_=i(T,2);return A=_[0],P=_[1],{startNode:E,startOffset:A,endNode:E,endOffset:P}}}}},{key:"update",value:function(N,S){var E=this;if(N.some(function(P){return P.type==="characterData"&&P.target===E.textNode})){var A=this.restore();A&&(S.range=A)}}},{key:"value",value:function(){return""}}]),y})(d.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=d(i),l=s(4),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(o.default.Container);m.allowedChildren=[c.default,l.BlockEmbed,m],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ColorStyle=a.ColorClass=a.ColorAttributor=void 0;var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(0),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function p(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var m=(function(g){p(w,g);function w(){return u(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(j){var N=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),w})(c.default.Attributor.Style),b=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new m("color","color",{scope:c.default.Scope.INLINE});a.ColorAttributor=m,a.ColorClass=b,a.ColorStyle=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.sanitize=a.default=void 0;var i=(function(){function v(g,w){for(var y=0;y<w.length;y++){var j=w[y];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,w,y){return w&&v(g.prototype,w),y&&v(g,y),g}})(),o=function v(g,w,y){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,w);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,w,y)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(y)}},l=s(6),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m=(function(v){p(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"format",value:function(y,j){if(y!==this.statics.blotName||!j)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,y,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(y){var j=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,y);return y=this.sanitize(y),j.setAttribute("href",y),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return b(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),g})(c.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(v,g){var w=document.createElement("a");w.href=v;var y=w.href.slice(0,w.href.indexOf(":"));return g.indexOf(y)>-1}a.default=m,a.sanitize=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),l=s(23),c=f(l),d=s(107),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}var m=0;function b(g,w){g.setAttribute(w,g.getAttribute(w)!=="true")}var v=(function(){function g(w){var y=this;p(this,g),this.select=w,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){y.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case c.default.keys.ENTER:y.togglePicker();break;case c.default.keys.ESCAPE:y.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(y){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),y.hasAttribute("value")&&N.setAttribute("data-value",y.getAttribute("value")),y.textContent&&N.setAttribute("data-label",y.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case c.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case c.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var y=document.createElement("span");return y.classList.add("ql-picker-label"),y.innerHTML=u.default,y.tabIndex="0",y.setAttribute("role","button"),y.setAttribute("aria-expanded","false"),this.container.appendChild(y),y}},{key:"buildOptions",value:function(){var y=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=y.buildItem(N);j.appendChild(S),N.selected===!0&&y.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var y=this;[].slice.call(this.select.attributes).forEach(function(j){y.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var y=this;this.close(),setTimeout(function(){return y.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(y){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(y!==N&&(N?.classList.remove("ql-selected"),y!=null&&(y.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(y.parentNode.children,y),y.hasAttribute("data-value")?this.label.setAttribute("data-value",y.getAttribute("data-value")):this.label.removeAttribute("data-value"),y.hasAttribute("data-label")?this.label.setAttribute("data-label",y.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var y=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];y=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=y!=null&&y!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),g})();a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=H(i),l=s(5),c=H(l),d=s(4),u=H(d),f=s(16),p=H(f),m=s(25),b=H(m),v=s(24),g=H(v),w=s(35),y=H(w),j=s(6),N=H(j),S=s(22),E=H(S),A=s(7),P=H(A),D=s(55),R=H(D),T=s(42),_=H(T),B=s(23),U=H(B);function H(Y){return Y&&Y.__esModule?Y:{default:Y}}c.default.register({"blots/block":u.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":b.default,"blots/cursor":g.default,"blots/embed":y.default,"blots/inline":N.default,"blots/scroll":E.default,"blots/text":P.default,"modules/clipboard":R.default,"modules/history":_.default,"modules/keyboard":U.default}),o.default.register(u.default,p.default,g.default,N.default,E.default,P.default),a.default=c.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,d){var u=this.isolate(c,d);u.remove()},l.prototype.formatAt=function(c,d,u,f){var p=this.isolate(c,d);if(i.query(u,i.Scope.BLOT)!=null&&f)p.wrap(u,f);else if(i.query(u,i.Scope.ATTRIBUTE)!=null){var m=i.create(this.statics.scope);p.wrap(m),m.format(u,f)}},l.prototype.insertAt=function(c,d,u){var f=u==null?i.create("text",d):i.create(d,u),p=this.split(c);this.parent.insertBefore(f,p)},l.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var u=null;c.children.insertBefore(this,d),d!=null&&(u=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=u)&&c.domNode.insertBefore(this.domNode,u),this.parent=c,this.attach()},l.prototype.isolate=function(c,d){var u=this.split(c);return u.split(d),u},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return u.replace(this),u},l.prototype.split=function(c,d){return c===0?this:this.next},l.prototype.update=function(c,d){},l.prototype.wrap=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},l.blotName="abstract",l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),d=(function(){function u(f){this.attributes={},this.domNode=f,this.build()}return u.prototype.attribute=function(f,p){p?f.add(this.domNode,p)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},u.prototype.build=function(){var f=this;this.attributes={};var p=i.default.keys(this.domNode),m=o.default.keys(this.domNode),b=l.default.keys(this.domNode);p.concat(m).concat(b).forEach(function(v){var g=c.query(v,c.Scope.ATTRIBUTE);g instanceof i.default&&(f.attributes[g.attrName]=g)})},u.prototype.copy=function(f){var p=this;Object.keys(this.attributes).forEach(function(m){var b=p.attributes[m].value(p.domNode);f.format(m,b)})},u.prototype.move=function(f){var p=this;this.copy(f),Object.keys(this.attributes).forEach(function(m){p.attributes[m].remove(p.domNode)}),this.attributes={}},u.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(p,m){return p[m]=f.attributes[m].value(f.domNode),p},{})},u})();a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d,u){var f=d.getAttribute("class")||"";return f.split(/\s+/).filter(function(p){return p.indexOf(u+"-")===0})}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},u.prototype.add=function(f,p){return this.canAdd(f,p)?(this.remove(f),f.classList.add(this.keyName+"-"+p),!0):!1},u.prototype.remove=function(f){var p=l(f,this.keyName);p.forEach(function(m){f.classList.remove(m)}),f.classList.length===0&&f.removeAttribute("class")},u.prototype.value=function(f){var p=l(f,this.keyName)[0]||"",m=p.slice(this.keyName.length+1);return this.canAdd(f,m)?m:""},u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d){var u=d.split("-"),f=u.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return u[0]+f}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(p){var m=p.split(":");return m[0].trim()})},u.prototype.add=function(f,p){return this.canAdd(f,p)?(f.style[l(this.keyName)]=p,!0):!1},u.prototype.remove=function(f){f.style[l(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},u.prototype.value=function(f){var p=f.style[l(this.keyName)];return this.canAdd(f,p)?p:""},u})(o.default);a.default=c}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){o(this,c),this.quill=d,this.options=u,this.modules={}}return i(c,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(f){u.modules[f]==null&&u.addModule(f)})}},{key:"addModule",value:function(u){var f=this.quill.constructor.import("modules/"+u);return this.modules[u]=new f(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),c})();l.DEFAULTS={modules:{}},l.themes={default:l},a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function w(y,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,j,N){return j&&w(y.prototype,j),N&&w(y,N),y}})(),o=function w(y,j,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,j);if(S===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:w(E,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=s(0),c=f(l),d=s(7),u=f(d);function f(w){return w&&w.__esModule?w:{default:w}}function p(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function m(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function b(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var v="\uFEFF",g=(function(w){b(y,w);function y(j){p(this,y);var N=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(y,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,E=void 0,A=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof u.default){var P=this.prev.length();this.prev.insertAt(P,A),S={startNode:this.prev.domNode,startOffset:P+A.length}}else E=document.createTextNode(A),this.parent.insertBefore(c.default.create(E),this),S={startNode:E,startOffset:A.length};else N===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,A),S={startNode:this.next.domNode,startOffset:A.length}):(E=document.createTextNode(A),this.parent.insertBefore(c.default.create(E),this.next),S={startNode:E,startOffset:A.length}));return N.data=v,S}},{key:"update",value:function(N,S){var E=this;N.forEach(function(A){if(A.type==="characterData"&&(A.target===E.leftGuard||A.target===E.rightGuard)){var P=E.restore(A.target);P&&(S.range=P)}})}}]),y})(c.default.Embed);a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.AlignStyle=a.AlignClass=a.AlignAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new o.default.Attributor.Attribute("align","align",c),u=new o.default.Attributor.Class("align","ql-align",c),f=new o.default.Attributor.Style("align","text-align",c);a.AlignAttribute=d,a.AlignClass=u,a.AlignStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundStyle=a.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),u=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});a.BackgroundClass=d,a.BackgroundStyle=u}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.DirectionStyle=a.DirectionClass=a.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},d=new o.default.Attributor.Attribute("direction","dir",c),u=new o.default.Attributor.Class("direction","ql-direction",c),f=new o.default.Attributor.Style("direction","direction",c);a.DirectionAttribute=d,a.DirectionClass=u,a.DirectionStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.FontClass=a.FontStyle=void 0;var i=(function(){function w(y,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,j,N){return j&&w(y.prototype,j),N&&w(y,N),y}})(),o=function w(y,j,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,j);if(S===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:w(E,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=s(0),c=d(l);function d(w){return w&&w.__esModule?w:{default:w}}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function f(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function p(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var m={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new c.default.Attributor.Class("font","ql-font",m),v=(function(w){p(y,w);function y(){return u(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(N){return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),y})(c.default.Attributor.Style),g=new v("font","font-family",m);a.FontStyle=g,a.FontClass=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SizeStyle=a.SizeClass=void 0;var i=s(0),o=l(i);function l(u){return u&&u.__esModule?u:{default:u}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});a.SizeClass=c,a.SizeStyle=d}),(function(r,a,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.getLastChangeIndex=a.default=void 0;var i=(function(){function j(N,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,E){return S&&j(N.prototype,S),E&&j(N,E),N}})(),o=s(0),l=p(o),c=s(5),d=p(c),u=s(9),f=p(u);function p(j){return j&&j.__esModule?j:{default:j}}function m(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function b(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function v(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var g=(function(j){v(N,j);function N(S,E){m(this,N);var A=b(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,E));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(d.default.events.EDITOR_CHANGE,function(P,D,R,T){P!==d.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||T===d.default.sources.USER?A.record(D,R):A.transform(D))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return i(N,[{key:"change",value:function(E,A){if(this.stack[E].length!==0){var P=this.stack[E].pop();this.stack[A].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[E],d.default.sources.USER),this.ignoreChange=!1;var D=y(P[E]);this.quill.setSelection(D)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(E,A){if(E.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(A),D=Date.now();if(this.lastRecorded+this.options.delay>D&&this.stack.undo.length>0){var R=this.stack.undo.pop();P=P.compose(R.undo),E=R.redo.compose(E)}else this.lastRecorded=D;this.stack.undo.push({redo:E,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(E){this.stack.undo.forEach(function(A){A.undo=E.transform(A.undo,!0),A.redo=E.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=E.transform(A.undo,!0),A.redo=E.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N})(f.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function w(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function y(j){var N=j.reduce(function(E,A){return E+=A.delete||0,E},0),S=j.length()-N;return w(j)&&(S-=1),S}a.default=g,a.getLastChangeIndex=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BaseTooltip=void 0;var i=(function(){function O(z,V){for(var q=0;q<V.length;q++){var K=V[q];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(z,K.key,K)}}return function(z,V,q){return V&&O(z.prototype,V),q&&O(z,q),z}})(),o=function O(z,V,q){z===null&&(z=Function.prototype);var K=Object.getOwnPropertyDescriptor(z,V);if(K===void 0){var se=Object.getPrototypeOf(z);return se===null?void 0:O(se,V,q)}else{if("value"in K)return K.value;var pe=K.get;return pe===void 0?void 0:pe.call(q)}},l=s(3),c=D(l),d=s(2),u=D(d),f=s(8),p=D(f),m=s(23),b=D(m),v=s(34),g=D(v),w=s(59),y=D(w),j=s(60),N=D(j),S=s(28),E=D(S),A=s(61),P=D(A);function D(O){return O&&O.__esModule?O:{default:O}}function R(O,z){if(!(O instanceof z))throw new TypeError("Cannot call a class as a function")}function T(O,z){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:O}function _(O,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);O.prototype=Object.create(z&&z.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(O,z):O.__proto__=z)}var B=[!1,"center","right","justify"],U=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],Y=["1","2","3",!1],J=["small",!1,"large","huge"],re=(function(O){_(z,O);function z(V,q){R(this,z);var K=T(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,V,q)),se=function pe(ie){if(!document.body.contains(V.root))return document.body.removeEventListener("click",pe);K.tooltip!=null&&!K.tooltip.root.contains(ie.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(le){le.container.contains(ie.target)||le.close()})};return V.emitter.listenDOM("click",document.body,se),K}return i(z,[{key:"addModule",value:function(q){var K=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,q);return q==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(q,K){q.forEach(function(se){var pe=se.getAttribute("class")||"";pe.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),K[ie]!=null))if(ie==="direction")se.innerHTML=K[ie][""]+K[ie].rtl;else if(typeof K[ie]=="string")se.innerHTML=K[ie];else{var le=se.value||"";le!=null&&K[ie][le]&&(se.innerHTML=K[ie][le])}})})}},{key:"buildPickers",value:function(q,K){var se=this;this.pickers=q.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&W(ie,B),new N.default(ie,K.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var le=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&W(ie,U,le==="background"?"#ffffff":"#000000"),new y.default(ie,K[le])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?W(ie,H):ie.classList.contains("ql-header")?W(ie,Y):ie.classList.contains("ql-size")&&W(ie,J)),new E.default(ie)});var pe=function(){se.pickers.forEach(function(le){le.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,pe)}}]),z})(g.default);re.DEFAULTS=(0,c.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,V=this.container.querySelector("input.ql-image[type=file]");V==null&&(V=document.createElement("input"),V.setAttribute("type","file"),V.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),V.classList.add("ql-image"),V.addEventListener("change",function(){if(V.files!=null&&V.files[0]!=null){var q=new FileReader;q.onload=function(K){var se=z.quill.getSelection(!0);z.quill.updateContents(new u.default().retain(se.index).delete(se.length).insert({image:K.target.result}),p.default.sources.USER),z.quill.setSelection(se.index+1,p.default.sources.SILENT),V.value=""},q.readAsDataURL(V.files[0])}}),this.container.appendChild(V)),V.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var X=(function(O){_(z,O);function z(V,q){R(this,z);var K=T(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,V,q));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return i(z,[{key:"listen",value:function(){var q=this;this.textbox.addEventListener("keydown",function(K){b.default.match(K,"enter")?(q.save(),K.preventDefault()):b.default.match(K,"escape")&&(q.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+q)||""),this.root.setAttribute("data-mode",q)}},{key:"restoreFocus",value:function(){var q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=q}},{key:"save",value:function(){var q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",q,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",q,p.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":q=ee(q);case"formula":{if(!q)break;var se=this.quill.getSelection(!0);if(se!=null){var pe=se.index+se.length;this.quill.insertEmbed(pe,this.root.getAttribute("data-mode"),q,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(pe+1," ",p.default.sources.USER),this.quill.setSelection(pe+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z})(P.default);function ee(O){var z=O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=O.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":O}function W(O,z){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(q){var K=document.createElement("option");q===V?K.setAttribute("selected","selected"):K.setAttribute("value",q),O.appendChild(K)})}a.BaseTooltip=X,a.default=re}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,d=this.iterator();c=d();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,d=this.head;d!=null;){if(d===l)return c;c+=d.length(),d=d.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var d,u=this.iterator();d=u();){var f=d.length();if(l<f||c&&l===f&&(d.next==null||d.next.length()!==0))return[d,l];l-=f}return[null,0]},o.prototype.forEach=function(l){for(var c,d=this.iterator();c=d();)l(c)},o.prototype.forEachAt=function(l,c,d){if(!(c<=0))for(var u=this.find(l),f=u[0],p=u[1],m,b=l-p,v=this.iterator(f);(m=v())&&b<l+c;){var g=m.length();l>b?d(m,l-b,Math.min(c,b+g-l)):d(m,0,Math.min(g,l+c-b)),b+=g}},o.prototype.map=function(l){return this.reduce(function(c,d){return c.push(l(d)),c},[])},o.prototype.reduce=function(l,c){for(var d,u=this.iterator();d=u();)c=l(c,d);return c},o})();a.default=i}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,u=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.scroll=b,b.observer=new MutationObserver(function(v){b.update(v)}),b.observer.observe(b.domNode,c),b.attach(),b}return p.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(m,b){this.update(),m===0&&b===this.length()?this.children.forEach(function(v){v.remove()}):f.prototype.deleteAt.call(this,m,b)},p.prototype.formatAt=function(m,b,v,g){this.update(),f.prototype.formatAt.call(this,m,b,v,g)},p.prototype.insertAt=function(m,b,v){this.update(),f.prototype.insertAt.call(this,m,b,v)},p.prototype.optimize=function(m,b){var v=this;m===void 0&&(m=[]),b===void 0&&(b={}),f.prototype.optimize.call(this,b);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)m.push(g.pop());for(var w=function(S,E){E===void 0&&(E=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),E&&w(S.parent))},y=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(y),S.optimize(b))},j=m,N=0;j.length>0;N+=1){if(N>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var E=l.find(S.target,!0);E!=null&&(E.domNode===S.target&&(S.type==="childList"?(w(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(A){var P=l.find(A,!1);w(P,!1),P instanceof o.default&&P.children.forEach(function(D){w(D,!1)})})):S.type==="attributes"&&w(E.prev)),w(E))}),this.children.forEach(y),j=[].slice.call(this.observer.takeRecords()),g=j.slice();g.length>0;)m.push(g.pop())}},p.prototype.update=function(m,b){var v=this;b===void 0&&(b={}),m=m||this.observer.takeRecords(),m.map(function(g){var w=l.find(g.target,!0);return w==null?null:w.domNode[l.DATA_KEY].mutations==null?(w.domNode[l.DATA_KEY].mutations=[g],w):(w.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===v||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],b)}),this.domNode[l.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,b),this.optimize(m,b)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p})(o.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){u(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1);function c(u,f){if(Object.keys(u).length!==Object.keys(f).length)return!1;for(var p in u)if(u[p]!==f[p])return!1;return!0}var d=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(p){if(p.tagName!==f.tagName)return u.formats.call(this,p)},f.prototype.format=function(p,m){var b=this;p===this.statics.blotName&&!m?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(f.blotName,!0)),b.attributes.copy(v)}),this.unwrap()):u.prototype.format.call(this,p,m)},f.prototype.formatAt=function(p,m,b,v){if(this.formats()[b]!=null||l.query(b,l.Scope.ATTRIBUTE)){var g=this.isolate(p,m);g.format(b,v)}else u.prototype.formatAt.call(this,p,m,b,v)},f.prototype.optimize=function(p){u.prototype.optimize.call(this,p);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var b=this.next;b instanceof f&&b.prev===this&&c(m,b.formats())&&(b.moveChildren(this),b.remove())},f.blotName="inline",f.scope=l.Scope.INLINE_BLOT,f.tagName="SPAN",f})(o.default);a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.formats=function(f){var p=l.query(u.blotName).tagName;if(f.tagName!==p)return d.formats.call(this,f)},u.prototype.format=function(f,p){l.query(f,l.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!p?this.replaceWith(u.blotName):d.prototype.format.call(this,f,p))},u.prototype.formatAt=function(f,p,m,b){l.query(m,l.Scope.BLOCK)!=null?this.format(m,b):d.prototype.formatAt.call(this,f,p,m,b)},u.prototype.insertAt=function(f,p,m){if(m==null||l.query(p,l.Scope.INLINE)!=null)d.prototype.insertAt.call(this,f,p,m);else{var b=this.split(f),v=l.create(p,m);b.parent.insertBefore(v,b)}},u.prototype.update=function(f,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,f,p)},u.blotName="block",u.scope=l.Scope.BLOCK_BLOT,u.tagName="P",u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)u.hasOwnProperty(f)&&(d[f]=u[f])};return function(d,u){c(d,u);function f(){this.constructor=d}d.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=(function(c){i(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(u){},d.prototype.format=function(u,f){c.prototype.formatAt.call(this,0,this.length(),u,f)},d.prototype.formatAt=function(u,f,p,m){u===0&&f===this.length()?this.format(p,m):c.prototype.formatAt.call(this,u,f,p,m)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d})(o.default);a.default=l}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=s(1),c=(function(d){i(u,d);function u(f){var p=d.call(this,f)||this;return p.text=p.statics.value(p.domNode),p}return u.create=function(f){return document.createTextNode(f)},u.value=function(f){var p=f.data;return p.normalize&&(p=p.normalize()),p},u.prototype.deleteAt=function(f,p){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+p)},u.prototype.index=function(f,p){return this.domNode===f?p:-1},u.prototype.insertAt=function(f,p,m){m==null?(this.text=this.text.slice(0,f)+p+this.text.slice(f),this.domNode.data=this.text):d.prototype.insertAt.call(this,f,p,m)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(f){d.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(f,p){return[this.domNode,f]},u.prototype.split=function(f,p){if(p===void 0&&(p=!1),!p){if(f===0)return this;if(f===this.length())return this.next}var m=l.create(this.domNode.splitText(f));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},u.prototype.update=function(f,p){var m=this;f.some(function(b){return b.type==="characterData"&&b.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=l.length;var u=d.indexOf(l,c);return u!==-1&&u===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),u=d.length>>>0,f=arguments[1],p,m=0;m<u;m++)if(p=d[m],c.call(f,p,m,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,a){var s=-1,i=1,o=0;function l(N,S,E){if(N==S)return N?[[o,N]]:[];(E<0||N.length<E)&&(E=null);var A=f(N,S),P=N.substring(0,A);N=N.substring(A),S=S.substring(A),A=p(N,S);var D=N.substring(N.length-A);N=N.substring(0,N.length-A),S=S.substring(0,S.length-A);var R=c(N,S);return P&&R.unshift([o,P]),D&&R.push([o,D]),b(R),E!=null&&(R=w(R,E)),R=y(R),R}function c(N,S){var E;if(!N)return[[i,S]];if(!S)return[[s,N]];var A=N.length>S.length?N:S,P=N.length>S.length?S:N,D=A.indexOf(P);if(D!=-1)return E=[[i,A.substring(0,D)],[o,P],[i,A.substring(D+P.length)]],N.length>S.length&&(E[0][0]=E[2][0]=s),E;if(P.length==1)return[[s,N],[i,S]];var R=m(N,S);if(R){var T=R[0],_=R[1],B=R[2],U=R[3],H=R[4],Y=l(T,B),J=l(_,U);return Y.concat([[o,H]],J)}return d(N,S)}function d(N,S){for(var E=N.length,A=S.length,P=Math.ceil((E+A)/2),D=P,R=2*P,T=new Array(R),_=new Array(R),B=0;B<R;B++)T[B]=-1,_[B]=-1;T[D+1]=0,_[D+1]=0;for(var U=E-A,H=U%2!=0,Y=0,J=0,re=0,X=0,ee=0;ee<P;ee++){for(var W=-ee+Y;W<=ee-J;W+=2){var O=D+W,z;W==-ee||W!=ee&&T[O-1]<T[O+1]?z=T[O+1]:z=T[O-1]+1;for(var V=z-W;z<E&&V<A&&N.charAt(z)==S.charAt(V);)z++,V++;if(T[O]=z,z>E)J+=2;else if(V>A)Y+=2;else if(H){var q=D+U-W;if(q>=0&&q<R&&_[q]!=-1){var K=E-_[q];if(z>=K)return u(N,S,z,V)}}}for(var se=-ee+re;se<=ee-X;se+=2){var q=D+se,K;se==-ee||se!=ee&&_[q-1]<_[q+1]?K=_[q+1]:K=_[q-1]+1;for(var pe=K-se;K<E&&pe<A&&N.charAt(E-K-1)==S.charAt(A-pe-1);)K++,pe++;if(_[q]=K,K>E)X+=2;else if(pe>A)re+=2;else if(!H){var O=D+U-se;if(O>=0&&O<R&&T[O]!=-1){var z=T[O],V=D+z-O;if(K=E-K,z>=K)return u(N,S,z,V)}}}}return[[s,N],[i,S]]}function u(N,S,E,A){var P=N.substring(0,E),D=S.substring(0,A),R=N.substring(E),T=S.substring(A),_=l(P,D),B=l(R,T);return _.concat(B)}function f(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var E=0,A=Math.min(N.length,S.length),P=A,D=0;E<P;)N.substring(D,P)==S.substring(D,P)?(E=P,D=E):A=P,P=Math.floor((A-E)/2+E);return P}function p(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var E=0,A=Math.min(N.length,S.length),P=A,D=0;E<P;)N.substring(N.length-P,N.length-D)==S.substring(S.length-P,S.length-D)?(E=P,D=E):A=P,P=Math.floor((A-E)/2+E);return P}function m(N,S){var E=N.length>S.length?N:S,A=N.length>S.length?S:N;if(E.length<4||A.length*2<E.length)return null;function P(J,re,X){for(var ee=J.substring(X,X+Math.floor(J.length/4)),W=-1,O="",z,V,q,K;(W=re.indexOf(ee,W+1))!=-1;){var se=f(J.substring(X),re.substring(W)),pe=p(J.substring(0,X),re.substring(0,W));O.length<pe+se&&(O=re.substring(W-pe,W)+re.substring(W,W+se),z=J.substring(0,X-pe),V=J.substring(X+se),q=re.substring(0,W-pe),K=re.substring(W+se))}return O.length*2>=J.length?[z,V,q,K,O]:null}var D=P(E,A,Math.ceil(E.length/4)),R=P(E,A,Math.ceil(E.length/2)),T;if(!D&&!R)return null;R?D?T=D[4].length>R[4].length?D:R:T=R:T=D;var _,B,U,H;N.length>S.length?(_=T[0],B=T[1],U=T[2],H=T[3]):(U=T[0],H=T[1],_=T[2],B=T[3]);var Y=T[4];return[_,B,U,H,Y]}function b(N){N.push([o,""]);for(var S=0,E=0,A=0,P="",D="",R;S<N.length;)switch(N[S][0]){case i:A++,D+=N[S][1],S++;break;case s:E++,P+=N[S][1],S++;break;case o:E+A>1?(E!==0&&A!==0&&(R=f(D,P),R!==0&&(S-E-A>0&&N[S-E-A-1][0]==o?N[S-E-A-1][1]+=D.substring(0,R):(N.splice(0,0,[o,D.substring(0,R)]),S++),D=D.substring(R),P=P.substring(R)),R=p(D,P),R!==0&&(N[S][1]=D.substring(D.length-R)+N[S][1],D=D.substring(0,D.length-R),P=P.substring(0,P.length-R))),E===0?N.splice(S-A,E+A,[i,D]):A===0?N.splice(S-E,E+A,[s,P]):N.splice(S-E-A,E+A,[s,P],[i,D]),S=S-E-A+(E?1:0)+(A?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,A=0,E=0,P="",D="";break}N[N.length-1][1]===""&&N.pop();var T=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),T=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),T=!0)),S++;T&&b(N)}var v=l;v.INSERT=i,v.DELETE=s,v.EQUAL=o,r.exports=v;function g(N,S){if(S===0)return[o,N];for(var E=0,A=0;A<N.length;A++){var P=N[A];if(P[0]===s||P[0]===o){var D=E+P[1].length;if(S===D)return[A+1,N];if(S<D){N=N.slice();var R=S-E,T=[P[0],P[1].slice(0,R)],_=[P[0],P[1].slice(R)];return N.splice(A,1,T,_),[A+1,N]}else E=D}}throw new Error("cursor_pos is out of bounds!")}function w(N,S){var E=g(N,S),A=E[1],P=E[0],D=A[P],R=A[P+1];if(D==null)return N;if(D[0]!==o)return N;if(R!=null&&D[1]+R[1]===R[1]+D[1])return A.splice(P,2,R,D),j(A,P,2);if(R!=null&&R[1].indexOf(D[1])===0){A.splice(P,2,[R[0],D[1]],[0,D[1]]);var T=R[1].slice(D[1].length);return T.length>0&&A.splice(P+2,0,[R[0],T]),j(A,P,3)}else return N}function y(N){for(var S=!1,E=function(R){return R.charCodeAt(0)>=56320&&R.charCodeAt(0)<=57343},A=function(R){return R.charCodeAt(R.length-1)>=55296&&R.charCodeAt(R.length-1)<=56319},P=2;P<N.length;P+=1)N[P-2][0]===o&&A(N[P-2][1])&&N[P-1][0]===s&&E(N[P-1][1])&&N[P][0]===i&&E(N[P][1])&&(S=!0,N[P-1][1]=N[P-2][1].slice(-1)+N[P-1][1],N[P][1]=N[P-2][1].slice(-1)+N[P][1],N[P-2][1]=N[P-2][1].slice(0,-1));if(!S)return N;for(var D=[],P=0;P<N.length;P+=1)N[P][1].length>0&&D.push(N[P]);return D}function j(N,S,E){for(var A=S+E-1;A>=0&&A>=S-1;A--)if(A+1<N.length){var P=N[A],D=N[A+1];P[0]===D[1]&&N.splice(A,2,[P[0],P[1]+D[1]])}return N}}),(function(r,a){a=r.exports=typeof Object.keys=="function"?Object.keys:s,a.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,a){var s=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";a=r.exports=s?i:o,a.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}a.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,a){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)s.call(f,p)&&u.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u,f){var p=i?i+u:u,m=this._events[p];if(f)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var b=0,v=m.length,g=new Array(v);b<v;b++)g[b]=m[b].fn;return g},c.prototype.emit=function(u,f,p,m,b,v){var g=i?i+u:u;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,j,N;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,m),!0;case 5:return w.fn.call(w.context,f,p,m,b),!0;case 6:return w.fn.call(w.context,f,p,m,b,v),!0}for(N=1,j=new Array(y-1);N<y;N++)j[N-1]=arguments[N];w.fn.apply(w.context,j)}else{var S=w.length,E;for(N=0;N<S;N++)switch(w[N].once&&this.removeListener(u,w[N].fn,void 0,!0),y){case 1:w[N].fn.call(w[N].context);break;case 2:w[N].fn.call(w[N].context,f);break;case 3:w[N].fn.call(w[N].context,f,p);break;case 4:w[N].fn.call(w[N].context,f,p,m);break;default:if(!j)for(E=1,j=new Array(y-1);E<y;E++)j[E-1]=arguments[E];w[N].fn.apply(w[N].context,j)}}return!0},c.prototype.on=function(u,f,p){var m=new l(f,p||this),b=i?i+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],m]:this._events[b].push(m):(this._events[b]=m,this._eventsCount++),this},c.prototype.once=function(u,f,p){var m=new l(f,p||this,!0),b=i?i+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],m]:this._events[b].push(m):(this._events[b]=m,this._eventsCount++),this},c.prototype.removeListener=function(u,f,p,m){var b=i?i+u:u;if(!this._events[b])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[b],this;var v=this._events[b];if(v.fn)v.fn===f&&(!m||v.once)&&(!p||v.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[b]);else{for(var g=0,w=[],y=v.length;g<y;g++)(v[g].fn!==f||m&&!v[g].once||p&&v[g].context!==p)&&w.push(v[g]);w.length?this._events[b]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new o:delete this._events[b]}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=i?i+u:u,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.matchText=a.matchSpacing=a.matchNewline=a.matchBlot=a.matchAttributor=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(je){return typeof je}:function(je){return je&&typeof Symbol=="function"&&je.constructor===Symbol&&je!==Symbol.prototype?"symbol":typeof je},o=(function(){function je(Ie,ue){var de=[],Ae=!0,Qe=!1,ge=void 0;try{for(var fe=Ie[Symbol.iterator](),_e;!(Ae=(_e=fe.next()).done)&&(de.push(_e.value),!(ue&&de.length===ue));Ae=!0);}catch(ze){Qe=!0,ge=ze}finally{try{!Ae&&fe.return&&fe.return()}finally{if(Qe)throw ge}}return de}return function(Ie,ue){if(Array.isArray(Ie))return Ie;if(Symbol.iterator in Object(Ie))return je(Ie,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function je(Ie,ue){for(var de=0;de<ue.length;de++){var Ae=ue[de];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(Ie,Ae.key,Ae)}}return function(Ie,ue,de){return ue&&je(Ie.prototype,ue),de&&je(Ie,de),Ie}})(),c=s(3),d=_(c),u=s(2),f=_(u),p=s(0),m=_(p),b=s(5),v=_(b),g=s(10),w=_(g),y=s(9),j=_(y),N=s(36),S=s(37),E=s(13),A=_(E),P=s(26),D=s(38),R=s(39),T=s(40);function _(je){return je&&je.__esModule?je:{default:je}}function B(je,Ie,ue){return Ie in je?Object.defineProperty(je,Ie,{value:ue,enumerable:!0,configurable:!0,writable:!0}):je[Ie]=ue,je}function U(je,Ie){if(!(je instanceof Ie))throw new TypeError("Cannot call a class as a function")}function H(je,Ie){if(!je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:je}function Y(je,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);je.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:je,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf(je,Ie):je.__proto__=Ie)}var J=(0,w.default)("quill:clipboard"),re="__ql-matcher",X=[[Node.TEXT_NODE,Pe],[Node.TEXT_NODE,Te],["br",$e],[Node.ELEMENT_NODE,Te],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,te],["li",Ue],["b",pe.bind(pe,"bold")],["i",pe.bind(pe,"italic")],["style",he]],ee=[N.AlignAttribute,D.DirectionAttribute].reduce(function(je,Ie){return je[Ie.keyName]=Ie,je},{}),W=[N.AlignStyle,S.BackgroundStyle,P.ColorStyle,D.DirectionStyle,R.FontStyle,T.SizeStyle].reduce(function(je,Ie){return je[Ie.keyName]=Ie,je},{}),O=(function(je){Y(Ie,je);function Ie(ue,de){U(this,Ie);var Ae=H(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,ue,de));return Ae.quill.root.addEventListener("paste",Ae.onPaste.bind(Ae)),Ae.container=Ae.quill.addContainer("ql-clipboard"),Ae.container.setAttribute("contenteditable",!0),Ae.container.setAttribute("tabindex",-1),Ae.matchers=[],X.concat(Ae.options.matchers).forEach(function(Qe){var ge=o(Qe,2),fe=ge[0],_e=ge[1];!de.matchVisual&&_e===oe||Ae.addMatcher(fe,_e)}),Ae}return l(Ie,[{key:"addMatcher",value:function(de,Ae){this.matchers.push([de,Ae])}},{key:"convert",value:function(de){if(typeof de=="string")return this.container.innerHTML=de.replace(/\>\r?\n +\</g,"><"),this.convert();var Ae=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ae[A.default.blotName]){var Qe=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Qe,B({},A.default.blotName,Ae[A.default.blotName]))}var ge=this.prepareMatching(),fe=o(ge,2),_e=fe[0],ze=fe[1],Se=se(this.container,_e,ze);return q(Se,`
`)&&Se.ops[Se.ops.length-1].attributes==null&&(Se=Se.compose(new f.default().retain(Se.length()-1).delete(1))),J.log("convert",this.container.innerHTML,Se),this.container.innerHTML="",Se}},{key:"dangerouslyPasteHTML",value:function(de,Ae){var Qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof de=="string")this.quill.setContents(this.convert(de),Ae),this.quill.setSelection(0,v.default.sources.SILENT);else{var ge=this.convert(Ae);this.quill.updateContents(new f.default().retain(de).concat(ge),Qe),this.quill.setSelection(de+ge.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(de){var Ae=this;if(!(de.defaultPrevented||!this.quill.isEnabled())){var Qe=this.quill.getSelection(),ge=new f.default().retain(Qe.index),fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ge=ge.concat(Ae.convert()).delete(Qe.length),Ae.quill.updateContents(ge,v.default.sources.USER),Ae.quill.setSelection(ge.length()-Qe.length,v.default.sources.SILENT),Ae.quill.scrollingContainer.scrollTop=fe,Ae.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var de=this,Ae=[],Qe=[];return this.matchers.forEach(function(ge){var fe=o(ge,2),_e=fe[0],ze=fe[1];switch(_e){case Node.TEXT_NODE:Qe.push(ze);break;case Node.ELEMENT_NODE:Ae.push(ze);break;default:[].forEach.call(de.container.querySelectorAll(_e),function(Se){Se[re]=Se[re]||[],Se[re].push(ze)});break}}),[Ae,Qe]}}]),Ie})(j.default);O.DEFAULTS={matchers:[],matchVisual:!0};function z(je,Ie,ue){return(typeof Ie>"u"?"undefined":i(Ie))==="object"?Object.keys(Ie).reduce(function(de,Ae){return z(de,Ae,Ie[Ae])},je):je.reduce(function(de,Ae){return Ae.attributes&&Ae.attributes[Ie]?de.push(Ae):de.insert(Ae.insert,(0,d.default)({},B({},Ie,ue),Ae.attributes))},new f.default)}function V(je){if(je.nodeType!==Node.ELEMENT_NODE)return{};var Ie="__ql-computed-style";return je[Ie]||(je[Ie]=window.getComputedStyle(je))}function q(je,Ie){for(var ue="",de=je.ops.length-1;de>=0&&ue.length<Ie.length;--de){var Ae=je.ops[de];if(typeof Ae.insert!="string")break;ue=Ae.insert+ue}return ue.slice(-1*Ie.length)===Ie}function K(je){if(je.childNodes.length===0)return!1;var Ie=V(je);return["block","list-item"].indexOf(Ie.display)>-1}function se(je,Ie,ue){return je.nodeType===je.TEXT_NODE?ue.reduce(function(de,Ae){return Ae(je,de)},new f.default):je.nodeType===je.ELEMENT_NODE?[].reduce.call(je.childNodes||[],function(de,Ae){var Qe=se(Ae,Ie,ue);return Ae.nodeType===je.ELEMENT_NODE&&(Qe=Ie.reduce(function(ge,fe){return fe(Ae,ge)},Qe),Qe=(Ae[re]||[]).reduce(function(ge,fe){return fe(Ae,ge)},Qe)),de.concat(Qe)},new f.default):new f.default}function pe(je,Ie,ue){return z(ue,je,!0)}function ie(je,Ie){var ue=m.default.Attributor.Attribute.keys(je),de=m.default.Attributor.Class.keys(je),Ae=m.default.Attributor.Style.keys(je),Qe={};return ue.concat(de).concat(Ae).forEach(function(ge){var fe=m.default.query(ge,m.default.Scope.ATTRIBUTE);fe!=null&&(Qe[fe.attrName]=fe.value(je),Qe[fe.attrName])||(fe=ee[ge],fe!=null&&(fe.attrName===ge||fe.keyName===ge)&&(Qe[fe.attrName]=fe.value(je)||void 0),fe=W[ge],fe!=null&&(fe.attrName===ge||fe.keyName===ge)&&(fe=W[ge],Qe[fe.attrName]=fe.value(je)||void 0))}),Object.keys(Qe).length>0&&(Ie=z(Ie,Qe)),Ie}function le(je,Ie){var ue=m.default.query(je);if(ue==null)return Ie;if(ue.prototype instanceof m.default.Embed){var de={},Ae=ue.value(je);Ae!=null&&(de[ue.blotName]=Ae,Ie=new f.default().insert(de,ue.formats(je)))}else typeof ue.formats=="function"&&(Ie=z(Ie,ue.blotName,ue.formats(je)));return Ie}function $e(je,Ie){return q(Ie,`
`)||Ie.insert(`
`),Ie}function he(){return new f.default}function Ue(je,Ie){var ue=m.default.query(je);if(ue==null||ue.blotName!=="list-item"||!q(Ie,`
`))return Ie;for(var de=-1,Ae=je.parentNode;!Ae.classList.contains("ql-clipboard");)(m.default.query(Ae)||{}).blotName==="list"&&(de+=1),Ae=Ae.parentNode;return de<=0?Ie:Ie.compose(new f.default().retain(Ie.length()-1).retain(1,{indent:de}))}function Te(je,Ie){return q(Ie,`
`)||(K(je)||Ie.length()>0&&je.nextSibling&&K(je.nextSibling))&&Ie.insert(`
`),Ie}function oe(je,Ie){if(K(je)&&je.nextElementSibling!=null&&!q(Ie,`

`)){var ue=je.offsetHeight+parseFloat(V(je).marginTop)+parseFloat(V(je).marginBottom);je.nextElementSibling.offsetTop>je.offsetTop+ue*1.5&&Ie.insert(`
`)}return Ie}function te(je,Ie){var ue={},de=je.style||{};return de.fontStyle&&V(je).fontStyle==="italic"&&(ue.italic=!0),de.fontWeight&&(V(je).fontWeight.startsWith("bold")||parseInt(V(je).fontWeight)>=700)&&(ue.bold=!0),Object.keys(ue).length>0&&(Ie=z(Ie,ue)),parseFloat(de.textIndent||0)>0&&(Ie=new f.default().insert("	").concat(Ie)),Ie}function Pe(je,Ie){var ue=je.data;if(je.parentNode.tagName==="O:P")return Ie.insert(ue.trim());if(ue.trim().length===0&&je.parentNode.classList.contains("ql-clipboard"))return Ie;if(!V(je.parentNode).whiteSpace.startsWith("pre")){var de=function(Qe,ge){return ge=ge.replace(/[^\u00a0]/g,""),ge.length<1&&Qe?" ":ge};ue=ue.replace(/\r\n/g," ").replace(/\n/g," "),ue=ue.replace(/\s\s+/g,de.bind(de,!0)),(je.previousSibling==null&&K(je.parentNode)||je.previousSibling!=null&&K(je.previousSibling))&&(ue=ue.replace(/^\s+/,de.bind(de,!1))),(je.nextSibling==null&&K(je.parentNode)||je.nextSibling!=null&&K(je.nextSibling))&&(ue=ue.replace(/\s+$/,de.bind(de,!1)))}return Ie.insert(ue)}a.default=O,a.matchAttributor=ie,a.matchBlot=le,a.matchNewline=Te,a.matchSpacing=oe,a.matchText=Pe}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(6),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,w),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);m.blotName="bold",m.tagName=["STRONG","B"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.addControls=a.default=void 0;var i=(function(){function T(_,B){var U=[],H=!0,Y=!1,J=void 0;try{for(var re=_[Symbol.iterator](),X;!(H=(X=re.next()).done)&&(U.push(X.value),!(B&&U.length===B));H=!0);}catch(ee){Y=!0,J=ee}finally{try{!H&&re.return&&re.return()}finally{if(Y)throw J}}return U}return function(_,B){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return T(_,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(_,B){for(var U=0;U<B.length;U++){var H=B[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(_,H.key,H)}}return function(_,B,U){return B&&T(_.prototype,B),U&&T(_,U),_}})(),l=s(2),c=w(l),d=s(0),u=w(d),f=s(5),p=w(f),m=s(10),b=w(m),v=s(9),g=w(v);function w(T){return T&&T.__esModule?T:{default:T}}function y(T,_,B){return _ in T?Object.defineProperty(T,_,{value:B,enumerable:!0,configurable:!0,writable:!0}):T[_]=B,T}function j(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function N(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function S(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var E=(0,b.default)("quill:toolbar"),A=(function(T){S(_,T);function _(B,U){j(this,_);var H=N(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,B,U));if(Array.isArray(H.options.container)){var Y=document.createElement("div");D(Y,H.options.container),B.container.parentNode.insertBefore(Y,B.container),H.container=Y}else typeof H.options.container=="string"?H.container=document.querySelector(H.options.container):H.container=H.options.container;if(!(H.container instanceof HTMLElement)){var J;return J=E.error("Container required for toolbar",H.options),N(H,J)}return H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(re){H.addHandler(re,H.options.handlers[re])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(re){H.attach(re)}),H.quill.on(p.default.events.EDITOR_CHANGE,function(re,X){re===p.default.events.SELECTION_CHANGE&&H.update(X)}),H.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var re=H.quill.selection.getRange(),X=i(re,1),ee=X[0];H.update(ee)}),H}return o(_,[{key:"addHandler",value:function(U,H){this.handlers[U]=H}},{key:"attach",value:function(U){var H=this,Y=[].find.call(U.classList,function(re){return re.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),U.tagName==="BUTTON"&&U.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){E.warn("ignoring attaching to disabled format",Y,U);return}if(u.default.query(Y)==null){E.warn("ignoring attaching to nonexistent format",Y,U);return}}var J=U.tagName==="SELECT"?"change":"click";U.addEventListener(J,function(re){var X=void 0;if(U.tagName==="SELECT"){if(U.selectedIndex<0)return;var ee=U.options[U.selectedIndex];ee.hasAttribute("selected")?X=!1:X=ee.value||!1}else U.classList.contains("ql-active")?X=!1:X=U.value||!U.hasAttribute("value"),re.preventDefault();H.quill.focus();var W=H.quill.selection.getRange(),O=i(W,1),z=O[0];if(H.handlers[Y]!=null)H.handlers[Y].call(H,X);else if(u.default.query(Y).prototype instanceof u.default.Embed){if(X=prompt("Enter "+Y),!X)return;H.quill.updateContents(new c.default().retain(z.index).delete(z.length).insert(y({},Y,X)),p.default.sources.USER)}else H.quill.format(Y,X,p.default.sources.USER);H.update(z)}),this.controls.push([Y,U])}}},{key:"update",value:function(U){var H=U==null?{}:this.quill.getFormat(U);this.controls.forEach(function(Y){var J=i(Y,2),re=J[0],X=J[1];if(X.tagName==="SELECT"){var ee=void 0;if(U==null)ee=null;else if(H[re]==null)ee=X.querySelector("option[selected]");else if(!Array.isArray(H[re])){var W=H[re];typeof W=="string"&&(W=W.replace(/\"/g,'\\"')),ee=X.querySelector('option[value="'+W+'"]')}ee==null?(X.value="",X.selectedIndex=-1):ee.selected=!0}else if(U==null)X.classList.remove("ql-active");else if(X.hasAttribute("value")){var O=H[re]===X.getAttribute("value")||H[re]!=null&&H[re].toString()===X.getAttribute("value")||H[re]==null&&!X.getAttribute("value");X.classList.toggle("ql-active",O)}else X.classList.toggle("ql-active",H[re]!=null)})}}]),_})(g.default);A.DEFAULTS={};function P(T,_,B){var U=document.createElement("button");U.setAttribute("type","button"),U.classList.add("ql-"+_),B!=null&&(U.value=B),T.appendChild(U)}function D(T,_){Array.isArray(_[0])||(_=[_]),_.forEach(function(B){var U=document.createElement("span");U.classList.add("ql-formats"),B.forEach(function(H){if(typeof H=="string")P(U,H);else{var Y=Object.keys(H)[0],J=H[Y];Array.isArray(J)?R(U,Y,J):P(U,Y,J)}}),T.appendChild(U)})}function R(T,_,B){var U=document.createElement("select");U.classList.add("ql-"+_),B.forEach(function(H){var Y=document.createElement("option");H!==!1?Y.setAttribute("value",H):Y.setAttribute("selected","selected"),U.appendChild(Y)}),T.appendChild(U)}A.DEFAULTS={container:null,handlers:{clean:function(){var _=this,B=this.quill.getSelection();if(B!=null)if(B.length==0){var U=this.quill.getFormat();Object.keys(U).forEach(function(H){u.default.query(H,u.default.Scope.INLINE)!=null&&_.quill.format(H,!1)})}else this.quill.removeFormat(B,p.default.sources.USER)},direction:function(_){var B=this.quill.getFormat().align;_==="rtl"&&B==null?this.quill.format("align","right",p.default.sources.USER):!_&&B==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",_,p.default.sources.USER)},indent:function(_){var B=this.quill.getSelection(),U=this.quill.getFormat(B),H=parseInt(U.indent||0);if(_==="+1"||_==="-1"){var Y=_==="+1"?1:-1;U.direction==="rtl"&&(Y*=-1),this.quill.format("indent",H+Y,p.default.sources.USER)}},link:function(_){_===!0&&(_=prompt("Enter link URL:")),this.quill.format("link",_,p.default.sources.USER)},list:function(_){var B=this.quill.getSelection(),U=this.quill.getFormat(B);_==="check"?U.list==="checked"||U.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",_,p.default.sources.USER)}}},a.default=A,a.addControls=D}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(28),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(g,w){u(this,v);var y=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return y.label.innerHTML=w,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),y}return i(v,[{key:"buildItem",value:function(w){var y=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,w);return y.style.backgroundColor=w.getAttribute("value")||"",y}},{key:"selectItem",value:function(w,y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,w,y);var j=this.label.querySelector(".ql-color-label"),N=w&&w.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),v})(c.default);a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(28),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(g,w){u(this,v);var y=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=w[j.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return i(v,[{key:"selectItem",value:function(w,y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,w,y),w=w||this.defaultItem,this.label.innerHTML=w.innerHTML}}]),v})(c.default);a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){var f=this;o(this,c),this.quill=d,this.boundsContainer=u||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var f=u.left+u.width/2-this.root.offsetWidth/2,p=u.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),v=0;if(b.right>m.right&&(v=m.right-b.right,this.root.style.left=f+v+"px"),b.left<m.left&&(v=m.left-b.left,this.root.style.left=f+v+"px"),b.bottom>m.bottom){var g=b.bottom-b.top,w=u.bottom-u.top+g;this.root.style.top=p-w+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function R(T,_){var B=[],U=!0,H=!1,Y=void 0;try{for(var J=T[Symbol.iterator](),re;!(U=(re=J.next()).done)&&(B.push(re.value),!(_&&B.length===_));U=!0);}catch(X){H=!0,Y=X}finally{try{!U&&J.return&&J.return()}finally{if(H)throw Y}}return B}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return R(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function R(T,_,B){T===null&&(T=Function.prototype);var U=Object.getOwnPropertyDescriptor(T,_);if(U===void 0){var H=Object.getPrototypeOf(T);return H===null?void 0:R(H,_,B)}else{if("value"in U)return U.value;var Y=U.get;return Y===void 0?void 0:Y.call(B)}},l=(function(){function R(T,_){for(var B=0;B<_.length;B++){var U=_[B];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(T,U.key,U)}}return function(T,_,B){return _&&R(T.prototype,_),B&&R(T,B),T}})(),c=s(3),d=j(c),u=s(8),f=j(u),p=s(43),m=j(p),b=s(27),v=j(b),g=s(15),w=s(41),y=j(w);function j(R){return R&&R.__esModule?R:{default:R}}function N(R,T){if(!(R instanceof T))throw new TypeError("Cannot call a class as a function")}function S(R,T){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:R}function E(R,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);R.prototype=Object.create(T&&T.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(R,T):R.__proto__=T)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=(function(R){E(T,R);function T(_,B){N(this,T),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=A);var U=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,_,B));return U.quill.container.classList.add("ql-snow"),U}return l(T,[{key:"extendToolbar",value:function(B){B.container.classList.add("ql-snow"),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),y.default),this.tooltip=new D(this.quill,this.options.bounds),B.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(U,H){B.handlers.link.call(B,!H.format.link)})}}]),T})(m.default);P.DEFAULTS=(0,d.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var _=this.quill.getSelection();if(_==null||_.length==0)return;var B=this.quill.getText(_);/^\S+@\S+\.\S+$/.test(B)&&B.indexOf("mailto:")!==0&&(B="mailto:"+B);var U=this.quill.theme.tooltip;U.edit("link",B)}else this.quill.format("link",!1)}}}}});var D=(function(R){E(T,R);function T(_,B){N(this,T);var U=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,_,B));return U.preview=U.root.querySelector("a.ql-preview"),U}return l(T,[{key:"listen",value:function(){var B=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(U){B.root.classList.contains("ql-editing")?B.save():B.edit("link",B.preview.textContent),U.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(U){if(B.linkRange!=null){var H=B.linkRange;B.restoreFocus(),B.quill.formatText(H,"link",!1,f.default.sources.USER),delete B.linkRange}U.preventDefault(),B.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(U,H,Y){if(U!=null){if(U.length===0&&Y===f.default.sources.USER){var J=B.quill.scroll.descendant(v.default,U.index),re=i(J,2),X=re[0],ee=re[1];if(X!=null){B.linkRange=new g.Range(U.index-ee,X.length());var W=v.default.formats(X.domNode);B.preview.textContent=W,B.preview.setAttribute("href",W),B.show(),B.position(B.quill.getBounds(B.linkRange));return}}else delete B.linkRange;B.hide()}})}},{key:"show",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T})(p.BaseTooltip);D.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),a.default=P}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(29),o=Ae(i),l=s(36),c=s(38),d=s(64),u=s(65),f=Ae(u),p=s(66),m=Ae(p),b=s(67),v=Ae(b),g=s(37),w=s(26),y=s(39),j=s(40),N=s(56),S=Ae(N),E=s(68),A=Ae(E),P=s(27),D=Ae(P),R=s(69),T=Ae(R),_=s(70),B=Ae(_),U=s(71),H=Ae(U),Y=s(72),J=Ae(Y),re=s(73),X=Ae(re),ee=s(13),W=Ae(ee),O=s(74),z=Ae(O),V=s(75),q=Ae(V),K=s(57),se=Ae(K),pe=s(41),ie=Ae(pe),le=s(28),$e=Ae(le),he=s(59),Ue=Ae(he),Te=s(60),oe=Ae(Te),te=s(61),Pe=Ae(te),je=s(108),Ie=Ae(je),ue=s(62),de=Ae(ue);function Ae(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":y.FontClass,"formats/size":j.SizeClass,"formats/blockquote":f.default,"formats/code-block":W.default,"formats/header":m.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":ee.Code,"formats/italic":A.default,"formats/link":D.default,"formats/script":T.default,"formats/strike":B.default,"formats/underline":H.default,"formats/image":J.default,"formats/video":X.default,"formats/list/item":b.ListItem,"modules/formula":z.default,"modules/syntax":q.default,"modules/toolbar":se.default,"themes/bubble":Ie.default,"themes/snow":de.default,"ui/icons":ie.default,"ui/picker":$e.default,"ui/icon-picker":oe.default,"ui/color-picker":Ue.default,"ui/tooltip":Pe.default},!0),a.default=o.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.IndentClass=void 0;var i=(function(){function v(g,w){for(var y=0;y<w.length;y++){var j=w[y];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,w,y){return w&&v(g.prototype,w),y&&v(g,y),g}})(),o=function v(g,w,y){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,w);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,w,y)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(y)}},l=s(0),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m=(function(v){p(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"add",value:function(y,j){if(j==="+1"||j==="-1"){var N=this.value(y)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(y),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,y,j)}},{key:"canAdd",value:function(y,j){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,y,j)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,y,parseInt(j))}},{key:"value",value:function(y){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,y))||void 0}}]),g})(c.default.Attributor.Class),b=new m("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});a.IndentClass=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(4),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="blockquote",f.tagName="blockquote",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function m(b,v){for(var g=0;g<v.length;g++){var w=v[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,v,g){return v&&m(b.prototype,v),g&&m(b,g),b}})(),o=s(4),l=c(o);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function u(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function f(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var p=(function(m){f(b,m);function b(){return d(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),b})(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.ListItem=void 0;var i=(function(){function N(S,E){for(var A=0;A<E.length;A++){var P=E[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,E,A){return E&&N(S.prototype,E),A&&N(S,A),S}})(),o=function N(S,E,A){S===null&&(S=Function.prototype);var P=Object.getOwnPropertyDescriptor(S,E);if(P===void 0){var D=Object.getPrototypeOf(S);return D===null?void 0:N(D,E,A)}else{if("value"in P)return P.value;var R=P.get;return R===void 0?void 0:R.call(A)}},l=s(0),c=m(l),d=s(4),u=m(d),f=s(25),p=m(f);function m(N){return N&&N.__esModule?N:{default:N}}function b(N,S,E){return S in N?Object.defineProperty(N,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):N[S]=E,N}function v(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function g(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function w(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var y=(function(N){w(S,N);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(A,P){A===j.blotName&&!P?this.replaceWith(c.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,A,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,P){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,P),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,A,P))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,A)}}]),S})(u.default);y.blotName="list-item",y.tagName="LI";var j=(function(N){w(S,N),i(S,null,[{key:"create",value:function(A){var P=A==="ordered"?"OL":"UL",D=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,P);return(A==="checked"||A==="unchecked")&&D.setAttribute("data-checked",A==="checked"),D}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(E){v(this,S);var A=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E)),P=function(R){if(R.target.parentNode===E){var T=A.statics.formats(E),_=c.default.find(R.target);T==="checked"?_.format("list","unchecked"):T==="unchecked"&&_.format("list","checked")}};return E.addEventListener("touchstart",P),E.addEventListener("mousedown",P),A}return i(S,[{key:"format",value:function(A,P){this.children.length>0&&this.children.tail.format(A,P)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,P){if(A instanceof y)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,A,P);else{var D=P==null?this.length():P.offset(this),R=this.split(D);R.parent.insertBefore(A,R)}}},{key:"optimize",value:function(A){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,A);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var P=c.default.create(this.statics.defaultChild);A.moveChildren(P),this.appendChild(P)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,A)}}]),S})(p.default);j.blotName="list",j.scope=c.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[y],a.ListItem=y,a.default=j}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(56),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="italic",f.tagName=["EM","I"],a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(6),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(w){return w==="super"?document.createElement("sup"):w==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w)}},{key:"formats",value:function(w){if(w.tagName==="SUB")return"sub";if(w.tagName==="SUP")return"super"}}]),v})(c.default);m.blotName="script",m.tagName=["SUB","SUP"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="strike",f.tagName="S",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="underline",f.tagName="U",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(0),c=u(l),d=s(27);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function p(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function m(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var b=["alt","height","width"],v=(function(g){m(w,g);function w(){return f(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(j,N){b.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return b.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,d.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),w})(c.default.Embed);v.blotName="image",v.tagName="IMG",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(4),c=s(27),d=u(c);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function p(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function m(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var b=["height","width"],v=(function(g){m(w,g);function w(){return f(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(j,N){b.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return b.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return d.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),w})(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.FormulaBlot=void 0;var i=(function(){function j(N,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,E){return S&&j(N.prototype,S),E&&j(N,E),N}})(),o=function j(N,S,E){N===null&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,S);if(A===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:j(P,S,E)}else{if("value"in A)return A.value;var D=A.get;return D===void 0?void 0:D.call(E)}},l=s(35),c=m(l),d=s(5),u=m(d),f=s(9),p=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function b(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function v(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function g(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var w=(function(j){g(N,j);function N(){return b(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(E){var A=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,E);return typeof E=="string"&&(window.katex.render(E,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",E)),A}},{key:"value",value:function(E){return E.getAttribute("data-value")}}]),N})(c.default);w.blotName="formula",w.className="ql-formula",w.tagName="SPAN";var y=(function(j){g(N,j),i(N,null,[{key:"register",value:function(){u.default.register(w,!0)}}]);function N(){b(this,N);var S=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N})(p.default);a.FormulaBlot=w,a.default=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.CodeToken=a.CodeBlock=void 0;var i=(function(){function E(A,P){for(var D=0;D<P.length;D++){var R=P[D];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,P,D){return P&&E(A.prototype,P),D&&E(A,D),A}})(),o=function E(A,P,D){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,P);if(R===void 0){var T=Object.getPrototypeOf(A);return T===null?void 0:E(T,P,D)}else{if("value"in R)return R.value;var _=R.get;return _===void 0?void 0:_.call(D)}},l=s(0),c=v(l),d=s(5),u=v(d),f=s(9),p=v(f),m=s(13),b=v(m);function v(E){return E&&E.__esModule?E:{default:E}}function g(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function w(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function y(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var j=(function(E){y(A,E);function A(){return g(this,A),w(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,[{key:"replaceWith",value:function(D){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,D)}},{key:"highlight",value:function(D){var R=this.domNode.textContent;this.cachedText!==R&&((R.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=D(R),this.domNode.normalize(),this.attach()),this.cachedText=R)}}]),A})(b.default);j.className="ql-syntax";var N=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),S=(function(E){y(A,E),i(A,null,[{key:"register",value:function(){u.default.register(N,!0),u.default.register(j,!0)}}]);function A(P,D){g(this,A);var R=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,P,D));if(typeof R.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return R.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){R.highlight(),T=null},R.options.interval)}),R.highlight(),R}return i(A,[{key:"highlight",value:function(){var D=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var R=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(T){T.highlight(D.options.highlight)}),this.quill.update(u.default.sources.SILENT),R!=null&&this.quill.setSelection(R,u.default.sources.SILENT)}}}]),A})(p.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(E){var A=window.hljs.highlightAuto(E);return A.value}})(),interval:1e3},a.CodeBlock=j,a.CodeToken=N,a.default=S}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BubbleTooltip=void 0;var i=function A(P,D,R){P===null&&(P=Function.prototype);var T=Object.getOwnPropertyDescriptor(P,D);if(T===void 0){var _=Object.getPrototypeOf(P);return _===null?void 0:A(_,D,R)}else{if("value"in T)return T.value;var B=T.get;return B===void 0?void 0:B.call(R)}},o=(function(){function A(P,D){for(var R=0;R<D.length;R++){var T=D[R];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(P,T.key,T)}}return function(P,D,R){return D&&A(P.prototype,D),R&&A(P,R),P}})(),l=s(3),c=g(l),d=s(8),u=g(d),f=s(43),p=g(f),m=s(15),b=s(41),v=g(b);function g(A){return A&&A.__esModule?A:{default:A}}function w(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function y(A,P){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:A}function j(A,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(A){j(P,A);function P(D,R){w(this,P),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=N);var T=y(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,D,R));return T.quill.container.classList.add("ql-bubble"),T}return o(P,[{key:"extendToolbar",value:function(R){this.tooltip=new E(this.quill,this.options.bounds),this.tooltip.root.appendChild(R.container),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),v.default)}}]),P})(p.default);S.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var E=(function(A){j(P,A);function P(D,R){w(this,P);var T=y(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,D,R));return T.quill.on(u.default.events.EDITOR_CHANGE,function(_,B,U,H){if(_===u.default.events.SELECTION_CHANGE)if(B!=null&&B.length>0&&H===u.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var Y=T.quill.getLines(B.index,B.length);if(Y.length===1)T.position(T.quill.getBounds(B));else{var J=Y[Y.length-1],re=T.quill.getIndex(J),X=Math.min(J.length()-1,B.index+B.length-re),ee=T.quill.getBounds(new m.Range(re,X));T.position(ee)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return o(P,[{key:"listen",value:function(){var R=this;i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){R.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!R.root.classList.contains("ql-hidden")){var T=R.quill.getSelection();T!=null&&R.position(R.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(R){var T=i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,R),_=this.root.querySelector(".ql-tooltip-arrow");if(_.style.marginLeft="",T===0)return T;_.style.marginLeft=-1*T-_.offsetWidth/2+"px"}}]),P})(f.BaseTooltip);E.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),a.BubbleTooltip=E,a.default=S}),(function(r,a,s){r.exports=s(63)})]).default})})(n1)),n1.exports}var Wd,XI;function vle(){if(XI)return Wd;XI=1;var e=Wd&&Wd.__extends||(function(){var u=function(f,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var v in b)b.hasOwnProperty(v)&&(m[v]=b[v])},u(f,p)};return function(f,p){u(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),t=Wd&&Wd.__assign||function(){return t=Object.assign||function(u){for(var f,p=1,m=arguments.length;p<m;p++){f=arguments[p];for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(u[b]=f[b])}return u},t.apply(this,arguments)},r=Wd&&Wd.__spreadArrays||function(){for(var u=0,f=0,p=arguments.length;f<p;f++)u+=arguments[f].length;for(var m=Array(u),b=0,f=0;f<p;f++)for(var v=arguments[f],g=0,w=v.length;g<w;g++,b++)m[b]=v[g];return m},a=Wd&&Wd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},s=a(Db()),i=a(T8()),o=a(CF()),l=a(gle()),c=(function(u){e(f,u);function f(p){var m=u.call(this,p)||this;m.dirtyProps=["modules","formats","bounds","theme","children"],m.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],m.state={generation:0},m.selection=null,m.onEditorChange=function(v,g,w,y){var j,N,S,E;v==="text-change"?(N=(j=m).onEditorChangeText)===null||N===void 0||N.call(j,m.editor.root.innerHTML,g,y,m.unprivilegedEditor):v==="selection-change"&&((E=(S=m).onEditorChangeSelection)===null||E===void 0||E.call(S,g,y,m.unprivilegedEditor))};var b=m.isControlled()?p.value:p.defaultValue;return m.value=b??"",m}return f.prototype.validateProps=function(p){var m;if(s.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(p.children)){var b=s.default.Children.only(p.children);if(((m=b)===null||m===void 0?void 0:m.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(p,m){var b=this,v;if(this.validateProps(p),!this.editor||this.state.generation!==m.generation)return!0;if("value"in p){var g=this.getEditorContents(),w=(v=p.value,v??"");this.isEqualValue(w,g)||this.setEditorContents(this.editor,w)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),r(this.cleanProps,this.dirtyProps).some(function(y){return!o.default(p[y],b.props[y])})},f.prototype.shouldComponentRegenerate=function(p){var m=this;return this.dirtyProps.some(function(b){return!o.default(p[b],m.props[b])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(p,m){var b=this;if(this.editor&&this.shouldComponentRegenerate(p)){var v=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==m.generation){var w=this.regenerationSnapshot,v=w.delta,y=w.selection;delete this.regenerationSnapshot,this.instantiateEditor();var j=this.editor;j.setContents(v),d(function(){return b.setEditorSelection(j,y)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(p,m){var b=new l.default(p,m);return m.tabIndex!=null&&this.setEditorTabIndex(b,m.tabIndex),this.hookEditor(b),b},f.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(p){return p&&p.ops},f.prototype.isEqualValue=function(p,m){return this.isDelta(p)&&this.isDelta(m)?o.default(p.ops,m.ops):o.default(p,m)},f.prototype.setEditorContents=function(p,m){var b=this;this.value=m;var v=this.getEditorSelection();typeof m=="string"?p.setContents(p.clipboard.convert(m)):p.setContents(m),d(function(){return b.setEditorSelection(p,v)})},f.prototype.setEditorSelection=function(p,m){if(this.selection=m,m){var b=p.getLength();m.index=Math.max(0,Math.min(m.index,b-1)),m.length=Math.max(0,Math.min(m.length,b-1-m.index)),p.setSelection(m)}},f.prototype.setEditorTabIndex=function(p,m){var b,v;!((v=(b=p)===null||b===void 0?void 0:b.scroll)===null||v===void 0)&&v.domNode&&(p.scroll.domNode.tabIndex=m)},f.prototype.setEditorReadOnly=function(p,m){m?p.disable():p.enable()},f.prototype.makeUnprivilegedEditor=function(p){var m=p;return{getHTML:function(){return m.root.innerHTML},getLength:m.getLength.bind(m),getText:m.getText.bind(m),getContents:m.getContents.bind(m),getSelection:m.getSelection.bind(m),getBounds:m.getBounds.bind(m)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=i.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},f.prototype.renderEditingArea=function(){var p=this,m=this.props,b=m.children,v=m.preserveWhitespace,g=this.state.generation,w={key:g,ref:function(y){p.editingArea=y}};return s.default.Children.count(b)?s.default.cloneElement(s.default.Children.only(b),w):v?s.default.createElement("pre",t({},w)):s.default.createElement("div",t({},w))},f.prototype.render=function(){var p;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(p,m,b,v){var g,w;if(this.editor){var y=this.isDelta(this.value)?v.getContents():v.getHTML();y!==this.getEditorContents()&&(this.lastDeltaChangeSet=m,this.value=y,(w=(g=this.props).onChange)===null||w===void 0||w.call(g,p,m,b,v))}},f.prototype.onEditorChangeSelection=function(p,m,b){var v,g,w,y,j,N;if(this.editor){var S=this.getEditorSelection(),E=!S&&p,A=S&&!p;o.default(p,S)||(this.selection=p,(g=(v=this.props).onChangeSelection)===null||g===void 0||g.call(v,p,m,b),E?(y=(w=this.props).onFocus)===null||y===void 0||y.call(w,p,m,b):A&&((N=(j=this.props).onBlur)===null||N===void 0||N.call(j,S,m,b)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=l.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f})(s.default.Component);function d(u){Promise.resolve().then(u)}return Wd=c,Wd}var ble=vle();const b3=Ta(ble),yle=({isOpen:e,templateId:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=jn();Oa();const o=JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:l,isLoading:c}=yoe(t||""),d=LM(),u=woe(),[f,p]=I.useState(""),[m,b]=I.useState("Custom"),[v,g]=I.useState(""),[w,y]=I.useState(!1),[j,N]=I.useState(""),[S,E]=I.useState([]),[A,P]=I.useState(!1),[D,R]=I.useState(new Set),[T,_]=I.useState(new Set),[B,U]=I.useState(null),[H,Y]=I.useState(""),[J,re]=I.useState(!1),[X,ee]=I.useState(!1),W=I.useRef({});I.useEffect(()=>{t&&l&&e?(p(l.name||""),b(l.category||"Custom"),N(l.description||""),l.sections&&Array.isArray(l.sections)?E(l.sections.map((ge,fe)=>({id:ge.id||`section_${Date.now()}_${fe}`,name:ge.name||`Section ${fe+1}`,order:ge.order!==void 0?ge.order:fe,steps:(ge.steps||[]).map((_e,ze)=>({id:_e.id||`step_${Date.now()}_${fe}_${ze}`,name:_e.name||"",instructions:_e.instructions||"",checklistItems:Array.isArray(_e.checklistItems)?_e.checklistItems:[],attachments:Array.isArray(_e.attachments)?_e.attachments:[],order:_e.order!==void 0?_e.order:ze}))}))):E([])):!t&&e&&(p(""),b("Custom"),g(""),y(!1),N(""),E([]),R(new Set),_(new Set))},[t,l,e]),I.useEffect(()=>{e&&(async()=>{if(o)try{await mb({userId:o}),ee(!0)}catch{ee(!1)}})()},[o,e]);const O={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},z=["header","bold","italic","underline","strike","list","bullet","link"],V=()=>{const ge={id:`section_${Date.now()}`,name:`Section ${S.length+1}`,order:S.length,steps:[]};E([...S,ge]),R(fe=>new Set([...fe,ge.id]))},q=ge=>{E(S.filter(fe=>fe.id!==ge)),R(fe=>{const _e=new Set(fe);return _e.delete(ge),_e})},K=(ge,fe)=>{E(S.map(_e=>_e.id===ge?{..._e,name:fe}:_e))},se=(ge,fe)=>{const _e=S.findIndex(Fe=>Fe.id===ge);if(_e===-1)return;const ze=fe==="up"?_e-1:_e+1;if(ze<0||ze>=S.length)return;const Se=[...S];[Se[_e],Se[ze]]=[Se[ze],Se[_e]],Se.forEach((Fe,Me)=>{Fe.order=Me}),E(Se)},pe=ge=>{R(fe=>{const _e=new Set(fe);return _e.has(ge)?_e.delete(ge):_e.add(ge),_e})},ie=ge=>{const fe=S.find(ze=>ze.id===ge);if(!fe)return;const _e={id:`step_${Date.now()}`,name:`Step ${fe.steps.length+1}`,instructions:"",checklistItems:[],attachments:[],order:fe.steps.length};E(S.map(ze=>ze.id===ge?{...ze,steps:[...ze.steps,_e]}:ze)),_(ze=>new Set([...ze,_e.id]))},le=(ge,fe)=>{E(S.map(_e=>_e.id===ge?{..._e,steps:_e.steps.filter(ze=>ze.id!==fe)}:_e)),_(_e=>{const ze=new Set(_e);return ze.delete(fe),ze}),U(null)},$e=(ge,fe,_e)=>{E(S.map(ze=>ze.id===ge?{...ze,steps:ze.steps.map(Se=>Se.id===fe?{...Se,name:_e}:Se)}:ze))},he=(ge,fe,_e)=>{const ze=S.find(et=>et.id===ge);if(!ze)return;const Se=ze.steps.findIndex(et=>et.id===fe);if(Se===-1)return;const Fe=_e==="up"?Se-1:Se+1;if(Fe<0||Fe>=ze.steps.length)return;const Me=[...ze.steps];[Me[Se],Me[Fe]]=[Me[Fe],Me[Se]],Me.forEach((et,ut)=>{et.order=ut}),E(S.map(et=>et.id===ge?{...et,steps:Me}:et))},Ue=ge=>{_(fe=>{const _e=new Set(fe);return _e.has(ge)?(_e.delete(ge),U(null)):_e.add(ge),_e})},Te=(ge,fe)=>{const ze=S.find(Se=>Se.id===ge)?.steps.find(Se=>Se.id===fe);ze&&(U(fe),Y(ze.instructions))},oe=(ge,fe)=>{E(S.map(_e=>_e.id===ge?{..._e,steps:_e.steps.map(ze=>ze.id===fe?{...ze,instructions:H}:ze)}:_e)),U(null),Y("")},te=(ge,fe)=>{E(S.map(_e=>_e.id===ge?{..._e,steps:_e.steps.map(ze=>ze.id===fe?{...ze,checklistItems:[...ze.checklistItems,""]}:ze)}:_e))},Pe=(ge,fe,_e,ze)=>{E(S.map(Se=>Se.id===ge?{...Se,steps:Se.steps.map(Fe=>Fe.id===fe?{...Fe,checklistItems:Fe.checklistItems.map((Me,et)=>et===_e?ze:Me)}:Fe)}:Se))},je=(ge,fe,_e)=>{E(S.map(ze=>ze.id===ge?{...ze,steps:ze.steps.map(Se=>Se.id===fe?{...Se,checklistItems:Se.checklistItems.filter((Fe,Me)=>Me!==_e)}:Se)}:ze))},Ie=(ge,fe,_e)=>{const ze=_e.target.files?.[0];if(!ze)return;if(ze.type!=="application/pdf"){i("Please select a PDF file");return}if(ze.size>10*1024*1024){i("File size must be less than 10MB");return}const Se=new FileReader;Se.onload=()=>{const Me={type:"pdf",url:Se.result,name:ze.name};E(S.map(et=>et.id===ge?{...et,steps:et.steps.map(ut=>ut.id===fe?{...ut,attachments:[...ut.attachments,Me]}:ut)}:et)),s("PDF attached successfully")},Se.readAsDataURL(ze)},ue=async(ge,fe)=>{if(!o){i("User not authenticated");return}re(!0);try{const _e=await mb({userId:o}),{accessToken:ze}=_e?.data||{};if(!ze)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");await new Promise((Me,et)=>{let ut=0;const bt=50,At=setInterval(()=>{ut++,window.google&&window.google.picker?(clearInterval(At),Me()):ut>=bt&&(clearInterval(At),et(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Se=window.google.picker;new Se.PickerBuilder().setOAuthToken(ze).setCallback(Me=>{if(re(!1),Me[Se.Response.ACTION]===Se.Action.PICKED){const et=Me[Se.Response.DOCUMENTS];if(et&&et.length>0){const ut=et[0],bt={type:"gdrive",url:ut.url||ut.embedUrl||"",name:ut.name||"Untitled",fileId:ut.id};E(S.map(At=>At.id===ge?{...At,steps:At.steps.map(qt=>qt.id===fe?{...qt,attachments:[...qt.attachments,bt]}:qt)}:At)),s("File attached from Google Drive")}}else Me[Se.Response.ACTION]===Se.Action.CANCEL&&re(!1)}).addView(Se.ViewId.DOCS).enableFeature(Se.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(_e){re(!1),i(_e.message||"Failed to open Google Drive picker")}},de=(ge,fe,_e)=>{E(S.map(ze=>ze.id===ge?{...ze,steps:ze.steps.map(Se=>Se.id===fe?{...Se,attachments:Se.attachments.filter((Fe,Me)=>Me!==_e)}:Se)}:ze))},Ae=()=>{if(!f.trim())return"Template name is required";if(S.length===0)return"At least one section is required";for(const ge of S){if(!ge.name.trim())return`Section "${ge.name||"Unnamed"}" must have a name`;if(ge.steps.length===0)return`Section "${ge.name}" must have at least one step`;for(const fe of ge.steps)if(!fe.name.trim())return"All steps must have a name"}return null},Qe=async()=>{const ge=Ae();if(ge){i(ge);return}P(!0);try{const fe=w&&v.trim()?v.trim():m,_e={name:f.trim(),category:fe,description:j,sections:S.map(ze=>({id:ze.id,name:ze.name.trim(),order:ze.order,steps:ze.steps.map(Se=>({id:Se.id,name:Se.name.trim(),instructions:Se.instructions,checklistItems:Se.checklistItems.filter(Fe=>Fe.trim()!==""),attachments:Se.attachments,order:Se.order}))}))};t?await u.mutateAsync({id:t,data:_e}):await d.mutateAsync(_e),a?.(),r()}catch(fe){i(fe.message||"Failed to save template")}finally{P(!1)}};return e?n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t?"Edit Playbook Template":"Create New Playbook Template"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"Update your playbook template":"Build a reusable workflow template"})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c&&t?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:f,onChange:ge=>p(ge.target.value),placeholder:"e.g., Sales Playbook",className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),n.jsx("div",{className:"flex items-center gap-2",children:w?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",value:v,onChange:ge=>g(ge.target.value),placeholder:"Enter category name",className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>{y(!1),g("")},className:"px-3 py-2.5 text-slate-500 hover:text-slate-700",children:n.jsx(Zt,{className:"w-4 h-4"})})]}):n.jsx(n.Fragment,{children:n.jsxs("select",{value:m,onChange:ge=>{ge.target.value==="custom"?y(!0):b(ge.target.value)},className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"Sales",children:"Sales"}),n.jsx("option",{value:"Onboarding",children:"Onboarding"}),n.jsx("option",{value:"Custom",children:"Custom"}),n.jsx("option",{value:"custom",children:"+ Create New Category"})]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{value:j,onChange:ge=>N(ge.target.value),placeholder:"Brief description of this playbook...",rows:3,className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Sections & Steps"}),n.jsxs("button",{onClick:V,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add Section"]})]}),S.length===0?n.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl",children:[n.jsx(ii,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No sections yet. Add your first section to get started."})]}):n.jsx("div",{className:"space-y-3",children:S.map((ge,fe)=>n.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-slate-50 p-4 flex items-center gap-3",children:[n.jsx("button",{onClick:()=>pe(ge.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(Ts,{className:`w-4 h-4 text-slate-400 transition-transform ${D.has(ge.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:ge.name,onChange:_e=>K(ge.id,_e.target.value),placeholder:"Section name",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-semibold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>se(ge.id,"up"),disabled:fe===0,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(u1,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>se(ge.id,"down"),disabled:fe===S.length-1,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(Ts,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>q(ge.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]}),D.has(ge.id)&&n.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase",children:[ge.steps.length," Step",ge.steps.length!==1?"s":""]}),n.jsxs("button",{onClick:()=>ie(ge.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(Zr,{className:"w-3 h-3"}),"Add Step"]})]}),ge.steps.length===0?n.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[n.jsx(Gn,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-500",children:"No steps yet. Add your first step."})]}):n.jsx("div",{className:"space-y-3",children:ge.steps.map((_e,ze)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-white p-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Ue(_e.id),className:"p-1 hover:bg-slate-50 rounded transition-colors",children:n.jsx(Ts,{className:`w-3.5 h-3.5 text-slate-400 transition-transform ${T.has(_e.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:_e.name,onChange:Se=>$e(ge.id,_e.id,Se.target.value),placeholder:"Step name",className:"flex-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>he(ge.id,_e.id,"up"),disabled:ze===0,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(u1,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>he(ge.id,_e.id,"down"),disabled:ze===ge.steps.length-1,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(Ts,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>le(ge.id,_e.id),className:"p-1 hover:bg-red-50 rounded transition-colors text-red-600",children:n.jsx(Lr,{className:"w-3 h-3"})})]})]}),T.has(_e.id)&&n.jsxs("div",{className:"p-4 bg-slate-50 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Instructions"}),B===_e.id?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-white border border-slate-200 rounded-lg",children:n.jsx(b3,{theme:"snow",value:H,onChange:Y,modules:O,formats:z,placeholder:"Add instructions, best practices, talking points...",className:"text-sm"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>oe(ge.id,_e.id),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold rounded-lg transition-colors",children:"Save Instructions"}),n.jsx("button",{onClick:()=>{U(null),Y("")},className:"px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-2",children:[_e.instructions?n.jsx("div",{className:"p-3 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:ag.sanitize(_e.instructions)}}):n.jsx("div",{className:"p-3 bg-white border-2 border-dashed border-slate-200 rounded-lg text-sm text-slate-400 text-center",children:"No instructions added"}),n.jsxs("button",{onClick:()=>Te(ge.id,_e.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(Lo,{className:"w-3 h-3"}),_e.instructions?"Edit Instructions":"Add Instructions"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Checklist Items"}),n.jsxs("div",{className:"space-y-2",children:[_e.checklistItems.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No checklist items"}):_e.checklistItems.map((Se,Fe)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:Se,onChange:Me=>Pe(ge.id,_e.id,Fe,Me.target.value),placeholder:"Checklist item",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>je(ge.id,_e.id,Fe),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",children:n.jsx(Zt,{className:"w-3.5 h-3.5"})})]},Fe)),n.jsxs("button",{onClick:()=>te(ge.id,_e.id),className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Zr,{className:"w-3 h-3"}),"Add Checklist Item"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"space-y-2",children:[_e.attachments.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No attachments"}):_e.attachments.map((Se,Fe)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[Se.type==="pdf"?n.jsx(Gn,{className:"w-4 h-4 text-red-600 shrink-0"}):n.jsx(c0,{className:"w-4 h-4 text-blue-600 shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:Se.name}),Se.type==="gdrive"&&n.jsx("span",{className:"text-xs text-blue-600 font-semibold shrink-0",children:"Google Drive"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[Se.type==="gdrive"&&n.jsx("a",{href:Se.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-blue-50 rounded text-blue-600",children:n.jsx(cs,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>de(ge.id,_e.id,Fe),className:"p-1 hover:bg-red-50 rounded text-red-600",children:n.jsx(Zt,{className:"w-3.5 h-3.5"})})]})]},Fe)),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:Se=>{W.current[`${ge.id}_${_e.id}_pdf`]=Se},type:"file",accept:".pdf",onChange:Se=>Ie(ge.id,_e.id,Se),className:"hidden"}),n.jsxs("button",{onClick:()=>W.current[`${ge.id}_${_e.id}_pdf`]?.click(),className:"flex-1 px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Z0,{className:"w-3 h-3"}),"Upload PDF"]}),n.jsx("button",{onClick:()=>ue(ge.id,_e.id),disabled:J||!X,className:"flex-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:J?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3 h-3 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(c0,{className:"w-3 h-3"}),"Google Drive"]})})]})]})]})]})]},_e.id))})]})]},ge.id))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex items-center justify-end gap-3 shrink-0",children:[n.jsx("button",{onClick:r,className:"px-4 py-2.5 text-slate-600 hover:bg-slate-50 text-sm font-semibold rounded-xl transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Qe,disabled:A||c,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),t?"Update Template":"Create Template"]})})]})]})})]}):null},wle=({instance:e,getCompanyName:t,getDealName:r,getProjectName:a,getUserName:s,onView:i})=>{const{data:o=[]}=Eg(e.id),l=e.templateSnapshot?.sections?.reduce((p,m)=>p+(m.steps?.length||0),0)||0,c=o.length,d=l>0?Math.round(c/l*100):0,u=e.dealId?{type:"Deal",name:r(e.dealId),id:e.dealId}:e.projectId?{type:"Project",name:a(e.projectId),id:e.projectId}:null,f=p=>{if(!p)return"";const m=new Date(p),b=new Date,v=new Date(b);return v.setDate(v.getDate()-1),m.toDateString()===b.toDateString()?"Today":m.toDateString()===v.toDateString()?"Yesterday":m.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})};return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ii,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("span",{className:"text-xs text-slate-400",children:["v",e.templateSnapshot.version]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u?n.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="Deal"?n.jsx(Al,{className:"w-4 h-4 text-slate-400"}):n.jsx(nu,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:u.name})]}):n.jsx("span",{className:"text-sm text-slate-400",children:""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ul,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:e.companyId?t(e.companyId):""})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-[120px]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[c," / ",l]}),n.jsxs("span",{className:"text-xs text-slate-500",children:[d,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${d===100?"bg-green-500":d>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${d}%`}})})]}),d===100&&n.jsx(mn,{className:"w-4 h-4 text-green-500"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-slate-600",children:e.activatedBy?s(e.activatedBy):""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kn,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:f(e.activatedAt)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("button",{onClick:()=>i(e.id),className:"text-indigo-600 hover:text-indigo-700 text-sm font-semibold flex items-center gap-1.5 transition-colors",children:["View",n.jsx(cs,{className:"w-3.5 h-3.5"})]})})]})},Nle=({onNavigate:e,currentUser:t,playbookPrompt:r,onClearPlaybookPrompt:a})=>{const{showSuccess:s,showError:i}=jn(),[o,l]=I.useState("templates"),[c,d]=I.useState(""),[u,f]=I.useState("all"),[p,m]=I.useState(null),[b,v]=I.useState(!1),[g,w]=I.useState([]),[y,j]=I.useState(!1),[N,S]=I.useState(null),[E,A]=I.useState(!1),[P,D]=I.useState(null),[R,T]=I.useState(!1),[_,B]=I.useState(void 0),[U,H]=I.useState(void 0),[Y,J]=I.useState(""),[re,X]=I.useState("all"),[ee,W]=I.useState("all"),{data:O=[],isLoading:z,error:V}=DM({category:u!=="all"?u:void 0,search:c||void 0}),q=Noe(),K=LM(),{data:se=[],isLoading:pe}=by({companyId:re!=="all"?re:void 0,status:ee!=="all"?ee:void 0}),{data:ie=[]}=ks({queryKey:["companies"],queryFn:async()=>{const fe=await wd();return fe.data||fe||[]},staleTime:300*1e3}),{data:le=[]}=ks({queryKey:["deals"],queryFn:async()=>{const fe=await Ag();return fe.data||fe||[]},staleTime:300*1e3}),{data:$e=[]}=ks({queryKey:["projects"],queryFn:async()=>{const fe=await D0();return fe.data||fe||[]},staleTime:300*1e3}),{data:he=[]}=g3(),Ue=I.useRef("");I.useEffect(()=>{const fe=new Set;O.forEach(Se=>{Se.category&&fe.add(Se.category)});const _e=Array.from(fe).sort(),ze=_e.join(",");ze!==Ue.current&&(Ue.current=ze,w(_e))},[O.length]),I.useEffect(()=>{const fe=()=>{window.dispatchEvent(new Event("refresh-playbooks-queries"))};return window.addEventListener("refresh-playbooks",fe),()=>window.removeEventListener("refresh-playbooks",fe)},[]),I.useEffect(()=>{r&&r.dealId&&(l("templates"),B(r.dealId),H(r.templateId),T(!0),a&&a())},[r,a]),I.useEffect(()=>{E||z||A(!0)},[O.length,z]);const Te=async fe=>{v(!0);try{await q.mutateAsync(fe.id),m(null)}catch(_e){i(_e.message||"Failed to delete template")}finally{v(!1)}},oe=async fe=>{try{await K.mutateAsync({name:`${fe.name} (Copy)`,category:fe.category||"Custom",description:fe.description||"",sections:fe.sections||[]}),s("Template duplicated successfully!")}catch(_e){i(_e.message||"Failed to duplicate template")}},te=fe=>!fe.sections||!Array.isArray(fe.sections)?0:fe.sections.reduce((_e,ze)=>_e+(ze.steps?.length||0),0),Pe=fe=>{if(!fe)return"Never";const _e=new Date(fe),Se=new Date().getTime()-_e.getTime(),Fe=Math.floor(Se/(1e3*60*60*24));return Fe===0?"Today":Fe===1?"Yesterday":Fe<7?`${Fe} days ago`:Fe<30?`${Math.floor(Fe/7)} weeks ago`:_e.toLocaleDateString()},je=fe=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[fe]||"bg-slate-100 text-slate-700",Ie=I.useMemo(()=>{if(!c)return O;const fe=c.toLowerCase();return O.filter(_e=>_e.name?.toLowerCase().includes(fe)||_e.description?.toLowerCase().includes(fe))},[O,c]),ue=fe=>ie.find(ze=>ze.id===fe)?.name||"Unknown Company",de=fe=>{const _e=le.find(ze=>ze.id===fe);return _e?.title||_e?.name||"Unknown Deal"},Ae=fe=>{const _e=$e.find(ze=>ze.id===fe);return _e?.title||_e?.name||"Unknown Project"},Qe=fe=>he.find(ze=>ze.id===fe)?.name||fe,ge=I.useMemo(()=>{let fe=se;if(Y){const _e=Y.toLowerCase();fe=fe.filter(ze=>{const Se=ze.templateSnapshot?.name||"",Fe=ze.companyId?ue(ze.companyId).toLowerCase():"",Me=ze.dealId?de(ze.dealId).toLowerCase():"",et=ze.projectId?Ae(ze.projectId).toLowerCase():"";return Se.toLowerCase().includes(_e)||Fe.includes(_e)||Me.includes(_e)||et.includes(_e)})}return fe},[se,Y,ie,le,$e]);return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shrink-0",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Playbooks"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Create and manage standardized workflows for your team"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>l("templates"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="templates"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Template Library"}),n.jsx("button",{onClick:()=>l("active"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="active"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Active Playbooks"})]})]}),o==="templates"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[V&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("p",{className:"text-red-800 text-sm font-medium",children:["Error loading playbooks: ",V instanceof Error?V.message:"Unknown error"]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:c,onChange:fe=>d(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Nf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:u,onChange:fe=>f(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Categories"}),g.map(fe=>n.jsx("option",{value:fe,children:fe},fe))]}),n.jsx(ia,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Create New Playbook"]})]}),z?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(vt,{className:"w-8 h-8 text-indigo-600 animate-spin"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading playbooks..."})]})}):Ie.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(ii,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No playbooks found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:c||u!=="all"?"Try adjusting your search or filters":"Get started by creating your first playbook template"}),!c&&u==="all"&&n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Create Your First Playbook"]})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:Ie.map(fe=>{const _e=te(fe),ze=fe.sections?.length||0;return n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:border-indigo-300 hover:shadow-lg transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ii,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-1",children:fe.name})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${je(fe.category||"Custom")}`,children:fe.category||"Custom"})]}),n.jsx("div",{className:"relative",children:n.jsx("button",{onClick:Se=>{Se.stopPropagation()},className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(tS,{className:"w-4 h-4 text-slate-400"})})})]}),fe.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:fe.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Gn,{className:"w-4 h-4"}),n.jsxs("span",{children:[ze," section",ze!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Mb,{className:"w-4 h-4"}),n.jsxs("span",{children:[_e," step",_e!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(Kn,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:["Updated ",Pe(fe.updatedAt||fe.createdAt)]})]}),n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["v",fe.version||1]})})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:Se=>{Se.stopPropagation(),S(fe.id),j(!0)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Lo,{className:"w-3.5 h-3.5"}),"Edit"]}),n.jsxs("button",{onClick:Se=>{Se.stopPropagation(),oe(fe)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Xj,{className:"w-3.5 h-3.5"}),"Duplicate"]}),n.jsx("button",{onClick:Se=>{Se.stopPropagation(),m(fe)},className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]})]},fe.id)})})})]}),o==="active"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by playbook name, company, deal, or project...",value:Y,onChange:fe=>J(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Nf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:re,onChange:fe=>X(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Companies"}),ie.map(fe=>n.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),n.jsx(ia,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Nf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:ee,onChange:fe=>W(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Completed"})]}),n.jsx(ia,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]})]}),pe?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ge.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(nu,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Active Playbooks"}),n.jsx("p",{className:"text-sm text-slate-500",children:Y||re!=="all"||ee!=="all"?"No playbooks match your filters. Try adjusting your search criteria.":"No active playbook instances found. Attach a playbook to a Deal or Project to get started."})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Playbook Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Attached To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Progress"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:ge.map(fe=>n.jsx(wle,{instance:fe,getCompanyName:ue,getDealName:de,getProjectName:Ae,getUserName:Qe,onView:_e=>D(_e)},fe.id))})]})})})})]}),p&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Playbook Template"}),n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:['Are you sure you want to delete "',p.name,'"? This action cannot be undone.']})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>m(null),className:"flex-1 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-xl transition-colors border border-slate-200",disabled:b,children:"Cancel"}),n.jsx("button",{onClick:()=>Te(p),disabled:b,className:"flex-1 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50",children:b?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}),n.jsx(yle,{isOpen:y,templateId:N,onClose:()=>{j(!1),S(null)},onSuccess:()=>{}}),n.jsx(v3,{isOpen:R,dealId:_,preSelectedTemplateId:U,onClose:()=>{T(!1),B(void 0),H(void 0)},onSuccess:()=>{T(!1),B(void 0),H(void 0)}}),P&&n.jsx(yy,{instanceId:P,isOpen:!!P,onClose:()=>D(null)})]})},jle=({onNavigate:e,companyIdFromUrl:t,onClearCompanyIdFromUrl:r})=>{const{showSuccess:a,showError:s}=jn(),i=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[o,l]=I.useState([]),[c,d]=I.useState(!0),[u,f]=I.useState(""),[p,m]=I.useState(null),[b,v]=I.useState("date"),[g,w]=I.useState("desc"),[y,j]=I.useState([]),[N,S]=I.useState(!1),[E,A]=I.useState(!1),[P,D]=I.useState(null),[R,T]=I.useState([]),[_,B]=I.useState([]),[U,H]=I.useState("email"),[Y,J]=I.useState(!1),[re,X]=I.useState(!1),[ee,W]=I.useState(null),[O,z]=I.useState(!1),[V,q]=I.useState({}),[K,se]=I.useState([]),[pe,ie]=I.useState({}),le=I.useRef(!1),$e=async()=>{try{z(!0);const ge=await oae();console.log("[SATISFACTION] Template response:",ge),ge&&ge.success&&ge.data?W(ge.data):(console.error("[SATISFACTION] Invalid response format:",ge),s(ge?.error?.message||ge?.message||"Failed to load survey template"))}catch(ge){console.error("[SATISFACTION] Error loading template:",ge),s(ge.message||"Failed to load survey template")}finally{z(!1)}};I.useEffect(()=>{re&&!ee&&$e()},[re]),I.useEffect(()=>{(async()=>{try{const fe=await Ic(),_e=fe?.data||fe||[];Array.isArray(_e)&&se(_e)}catch(fe){console.error("[SATISFACTION] Failed to load users",fe)}})()},[]),I.useEffect(()=>{(async()=>{try{const fe=await wd(),_e=fe?.data||fe||[];if(Array.isArray(_e)){const ze={};_e.forEach(Se=>{Se.id&&(ze[Se.id]=Se)}),ie(ze)}}catch(fe){console.error("[SATISFACTION] Failed to load companies",fe)}})()},[]),I.useEffect(()=>{he()},[]),I.useEffect(()=>{p&&te(p.id)},[p]),I.useEffect(()=>{(async()=>{if(p?.companyId)try{const fe=await Ah("",p.companyId);if(fe.success&&fe.data){const _e={};fe.data.forEach(ze=>{ze.id&&(_e[ze.id]=ze)}),q(_e)}}catch(fe){console.error("[SATISFACTION] Failed to load contacts for timeline",fe)}})()},[p?.companyId]),I.useEffect(()=>{if(!t||le.current||!r)return;le.current=!0;const ge=t;(async()=>{try{const _e=(await bk(ge))?.data?.satisfactionRecordId;_e&&m({id:_e,companyId:ge,createdAt:"",createdBy:"",source:"manual"}),await Ae(ge)}catch{await Ae(ge)}finally{r()}})()},[t,r]);const he=async()=>{try{d(!0);const ge=await rae(u);if(ge.success&&ge.data){const fe=ge.data.map(_e=>({companyId:_e.companyId,companyName:_e.company?.name||"Unknown Company",latestNpsScore:_e.latestNpsScore,npsCategory:_e.npsCategory,accountManagerId:_e.company?.ownerId,accountManagerName:null,lastSurveyDate:_e.lastSurveyDate,status:_e.status||"not_yet_sent",satisfactionRecordId:_e.id}));l(fe)}}catch(ge){s(ge.message||"Failed to load satisfaction records")}finally{d(!1)}},Ue=ge=>ge==null?null:ge>=9?"Promoter":ge>=7?"Passive":"Detractor",Te=I.useMemo(()=>{const ge=[];return y.forEach(fe=>{(fe.responses||[]).forEach(_e=>{const ze=_e.contactId?V[_e.contactId]:null;let Se="";if(_e.answers&&Array.isArray(_e.answers)){const Fe=_e.answers.find(Me=>typeof Me.answer=="string"&&Me.questionText&&(Me.questionText.toLowerCase().includes("improve")||Me.questionText.toLowerCase().includes("additional")))||_e.answers.find(Me=>typeof Me.answer=="string");Fe&&typeof Fe.answer=="string"&&(Se=Fe.answer)}ge.push({id:_e.id,submittedAt:_e.submittedAt,npsScore:_e.npsScore,contactId:_e.contactId,contactName:ze?.name,feedback:Se})})}),ge.sort((fe,_e)=>{const ze=fe.submittedAt?new Date(fe.submittedAt).getTime():0;return(_e.submittedAt?new Date(_e.submittedAt).getTime():0)-ze}),ge},[y,V]),oe=ge=>!ge.accountManagerId||!K||K.length===0?null:K.find(_e=>_e.id===ge.accountManagerId)?.name||null,te=async ge=>{try{S(!0);const fe=await nae(ge);fe.success&&fe.data&&j(fe.data.surveys||[])}catch(fe){s(fe.message||"Failed to load record details")}finally{S(!1)}},Pe=ge=>ge==null?"text-slate-400":ge>=9?"text-green-600":ge>=7?"text-yellow-600":"text-red-600",je=ge=>ge==null?"bg-slate-100":ge>=9?"bg-green-50":ge>=7?"bg-yellow-50":"bg-red-50",Ie=ge=>{const _e={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[ge];return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${_e.color}`,children:_e.label})},ue=I.useMemo(()=>[...o.filter(fe=>fe.companyName.toLowerCase().includes(u.toLowerCase()))].sort((fe,_e)=>{let ze=0;if(b==="score"){const Se=fe.latestNpsScore??-1,Fe=_e.latestNpsScore??-1;ze=Se-Fe}else if(b==="date"){const Se=fe.lastSurveyDate?new Date(fe.lastSurveyDate).getTime():0,Fe=_e.lastSurveyDate?new Date(_e.lastSurveyDate).getTime():0;ze=Se-Fe}else b==="status"&&(ze=fe.status.localeCompare(_e.status));return g==="asc"?ze:-ze}),[o,u,b,g]),de=async()=>{if(!P||_.length===0){s("Please select a company and at least one contact");return}try{J(!0);let fe=(await bk(P)).data?.satisfactionRecordId;fe||(fe=(await aae({companyId:P,source:"manual"})).data.id);const _e=await iae({satisfactionRecordId:fe,contactIds:_,deliveryMethod:U});if(U==="link"&&_e.data?.surveyUrl){const ze=_e.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText(ze).then(()=>{a(`Survey link copied to clipboard! Share: ${ze}`)}).catch(()=>{a(`Survey created! Copy this link: ${ze}`)}):a(`Survey created! Copy this link: ${ze}`)}else a("Survey sent successfully");A(!1),B([]),he()}catch(ge){s(ge.message||"Failed to send survey")}finally{J(!1)}},Ae=async ge=>{D(ge),A(!0);try{const fe=await Ah("",ge);if(fe.success&&fe.data){const _e=fe.data.filter(ze=>ze.email);T(_e)}}catch(fe){s(fe.message||"Failed to load contacts")}},Qe=ge=>{if(!i)return!1;const fe=i.role==="Admin",_e=i.id===ge.accountManagerId;return fe||_e};return n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),!!i&&(i.role==="Admin"||o.some(fe=>fe.accountManagerId===i.id))?n.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[n.jsx(Zv,{className:"w-4 h-4"}),"Survey Builder"]}):null]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search companies...",value:u,onChange:ge=>f(ge.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:b,onChange:ge=>v(ge.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Sort by Date"}),n.jsx("option",{value:"score",children:"Sort by Score"}),n.jsx("option",{value:"status",children:"Sort by Status"})]}),n.jsx("button",{onClick:()=>w(g==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:n.jsx(hU,{className:"w-4 h-4"})})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ue.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(jf,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):n.jsx("div",{className:"space-y-4",children:ue.map(ge=>n.jsx("div",{onClick:()=>{const fe={id:ge.satisfactionRecordId,companyId:ge.companyId,createdAt:"",createdBy:"",source:"manual"};m(fe)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(Ps,{src:pe[ge.companyId]?.logo,fallbackText:pe[ge.companyId]?.name||ge.companyName,className:"w-16 h-16 border border-slate-200",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:pe[ge.companyId]?.name||ge.companyName}),ge.latestNpsScore!==void 0&&ge.latestNpsScore!==null&&n.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-sm font-bold ${ge.latestNpsScore>=9?"bg-green-100 text-green-700":ge.latestNpsScore>=7?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["NPS ",ge.latestNpsScore]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[ge.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ge.npsCategory==="Promoter"?"bg-green-100 text-green-700":ge.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:ge.npsCategory}),Ie(ge.status),ge.lastSurveyDate&&n.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(Kn,{className:"w-3 h-3"}),new Date(ge.lastSurveyDate).toLocaleDateString()]})]}),oe(ge)&&n.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Account Manager: ",oe(ge)]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Qe(ge)&&n.jsxs("button",{onClick:fe=>{fe.stopPropagation(),Ae(ge.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(tc,{className:"w-4 h-4"}),"Send Survey"]}),n.jsx(ia,{className:"w-5 h-5 text-slate-400"})]})]})},ge.satisfactionRecordId))})}),p&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),n.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:N?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border border-slate-200 rounded-2xl p-4 bg-slate-50/60",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Current NPS Score"}),Te.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"No responses yet"}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${je(Te[0].npsScore)}`,children:n.jsx("span",{className:`text-3xl font-black ${Pe(Te[0].npsScore)}`,children:Te[0].npsScore})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[Ue(Te[0].npsScore)&&n.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${Ue(Te[0].npsScore)==="Promoter"?"bg-green-100 text-green-700":Ue(Te[0].npsScore)==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Ue(Te[0].npsScore)}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Last response on"," ",Te[0].submittedAt?new Date(Te[0].submittedAt).toLocaleDateString():""]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Historical Timeline"}),Te.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No responses yet"}):n.jsx("div",{className:"space-y-3",children:Te.map(ge=>n.jsxs("div",{className:"flex items-start gap-3 border-l-2 border-slate-200 pl-4 relative",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 absolute -left-[5px] mt-2"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:["NPS ",ge.npsScore]}),ge.contactName&&n.jsx("span",{className:"text-[11px] text-slate-500",children:ge.contactName})]}),n.jsx("span",{className:"text-[10px] text-slate-400",children:ge.submittedAt?new Date(ge.submittedAt).toLocaleDateString():""})]}),ge.feedback&&n.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:ge.feedback})]})]},ge.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),y.length===0?n.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):n.jsx("div",{className:"space-y-4",children:y.map(ge=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",ge.sentAt?new Date(ge.sentAt).toLocaleDateString():""]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ge.status==="completed"?"bg-green-100 text-green-700":ge.status==="sent"?"bg-yellow-100 text-yellow-700":ge.status==="expired"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-700"}`,children:ge.status==="sent"?"Sent":ge.status==="completed"?"Completed":ge.status==="expired"?"Expired":ge.status})]}),n.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[ge.recipients?.length||0," recipient(s)  ",ge.responses?.length||0," response(s)"]}),ge.recipients&&ge.recipients.length>0&&n.jsxs("div",{className:"text-[11px] text-slate-500 mb-2",children:["Recipients:"," ",ge.recipients.slice(0,3).map(fe=>fe.email||fe.contactId).join(", "),ge.recipients.length>3&&n.jsxs("span",{className:"text-slate-400",children:[" ","+",ge.recipients.length-3," more"]})]}),ge.responses&&ge.responses.length>0&&n.jsx("div",{className:"mt-3 space-y-3",children:ge.responses.map(fe=>n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",fe.npsScore]}),n.jsx("span",{className:"text-xs text-slate-500",children:new Date(fe.submittedAt).toLocaleDateString()})]}),fe.answers.map((_e,ze)=>_e.questionText&&_e.answer&&n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsx("span",{className:"font-medium text-slate-700",children:_e.questionText}),n.jsx("p",{className:"text-slate-600 mt-1",children:String(_e.answer)})]},ze))]},fe.id))})]},ge.id))})]})]})})]})]}),E&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>A(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:ge=>ge.stopPropagation(),children:[n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),n.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:R.map(ge=>n.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[n.jsx("input",{type:"checkbox",checked:_.includes(ge.id),onChange:fe=>{fe.target.checked?B([..._,ge.id]):B(_.filter(_e=>_e!==ge.id))},className:"w-4 h-4 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:ge.name}),n.jsx("div",{className:"text-xs text-slate-500",children:ge.email})]})]},ge.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:U==="email",onChange:()=>H("email"),className:"w-4 h-4 text-indigo-600"}),n.jsx(Xa,{className:"w-4 h-4"}),n.jsx("span",{children:"Email"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:U==="link",onChange:()=>H("link"),className:"w-4 h-4 text-indigo-600"}),n.jsx(Jj,{className:"w-4 h-4"}),n.jsx("span",{children:"Copy Link"})]})]}),U==="link"&&n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:de,disabled:Y||_.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Y&&n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),re&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>X(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:ge=>ge.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),n.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:O?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ee?n.jsx(kle,{template:ee,setTemplate:W,onClose:()=>X(!1),showSuccess:a,showError:s}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Rn,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),n.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),n.jsx("button",{onClick:()=>{$e()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},kle=({template:e,setTemplate:t,onClose:r,showSuccess:a,showError:s})=>{const[i,o]=I.useState(e),[l,c]=I.useState(!1),d=async()=>{try{c(!0),(await lae({questions:i.questions,name:i.name})).success&&(a("Survey template updated successfully"),t(i),r())}catch(b){s(b.message||"Failed to update survey template")}finally{c(!1)}},u=()=>{const b={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,b]})},f=b=>{const v=i.questions.find(g=>g.order===1);if(v&&v.id===b){s("Cannot delete Q1 (the first NPS question)");return}o({...i,questions:i.questions.filter(g=>g.id!==b).map((g,w)=>({...g,order:w+1}))})},p=(b,v)=>{o({...i,questions:i.questions.map(g=>g.id===b?{...g,...v}:g)})},m=(b,v)=>{const g=[...i.questions],w=g.findIndex(S=>S.id===b);if(w===-1)return;const y=g.find(S=>S.order===1);if(y&&y.id===b){s("Q1 must remain first");return}if(v==="up"&&w<=0){s("Cannot move question before Q1");return}const j=v==="up"?w-1:w+1;if(j<0||j>=g.length)return;[g[w],g[j]]=[g[j],g[w]];const N=g.map((S,E)=>({...S,order:E+1}));o({...i,questions:N})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:i.name||"",onChange:b=>o({...i,name:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),n.jsxs("button",{onClick:u,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add Question"]})]}),n.jsx("div",{className:"space-y-4",children:i.questions.map((b,v)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",b.order]}),n.jsxs("div",{className:"flex items-center gap-2",children:[v>0&&b.type!=="nps"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>m(b.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:n.jsx(au,{className:"w-4 h-4 text-slate-500"})}),n.jsx("button",{onClick:()=>m(b.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:n.jsx(LU,{className:"w-4 h-4 text-slate-500"})})]}),!(b.order===1&&b.type==="nps")&&n.jsx("button",{onClick:()=>f(b.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:n.jsx(Zt,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),n.jsxs("select",{value:b.type,onChange:g=>p(b.id,{type:g.target.value}),disabled:b.order===1&&b.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[n.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),n.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),n.jsx("option",{value:"free_text",children:"Free Text"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),n.jsx("input",{type:"text",value:b.text,onChange:g=>p(b.id,{text:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),b.type==="multiple_choice"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Options"}),n.jsxs("div",{className:"space-y-2",children:[(b.options||[]).map((g,w)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:g,onChange:y=>{const j=[...b.options||[]];j[w]=y.target.value,p(b.id,{options:j})},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${w+1}`}),n.jsx("button",{onClick:()=>{const y=[...b.options||[]];y.splice(w,1),p(b.id,{options:y})},className:"p-2 hover:bg-red-50 rounded-lg text-red-500 transition-colors",title:"Remove option",children:n.jsx(Zt,{className:"w-4 h-4"})})]},w)),n.jsxs("button",{onClick:()=>{const g=b.options||[];p(b.id,{options:[...g,""]})},className:"w-full px-3 py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-600 hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add Option"]}),(!b.options||b.options.length===0)&&n.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:'No options yet. Click "Add Option" to add choices.'})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:b.required,onChange:g=>p(b.id,{required:g.target.checked}),disabled:b.order===1&&b.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),n.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},b.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},Sle=({surveyId:e})=>{const[t,r]=I.useState(null),[a,s]=I.useState(!0),[i,o]=I.useState(!1),[l,c]=I.useState(!1),[d,u]=I.useState(null),[f,p]=I.useState({}),[m,b]=I.useState(null);I.useEffect(()=>{v()},[e]);const v=async()=>{try{s(!0);const y=await sae(e);if(y.success&&y.data){r(y.data);const j={};y.data.templateSnapshot.forEach(E=>{E.type==="nps"?j[E.id]=null:(E.type,j[E.id]="")}),p(j);const S=new URLSearchParams(window.location.search).get("contact");S?b(S):y.data.recipients&&y.data.recipients.length>0&&b(y.data.recipients[0].contactId)}else u("Survey not found")}catch(y){u(y.message||"Failed to load survey")}finally{s(!1)}},g=(y,j)=>{p(N=>({...N,[y]:j}))},w=async()=>{if(!m){u("Contact information is missing");return}const y=t.templateSnapshot.find(j=>j.type==="nps");if(y&&(f[y.id]===null||f[y.id]===void 0)){u("Please answer the NPS question (required)");return}for(const j of t.templateSnapshot)if(j.required&&(!f[j.id]||f[j.id]==="")){u(`Please answer: ${j.text}`);return}try{o(!0),u(null);const j=Object.entries(f).filter(([N,S])=>S!==null&&S!=="").map(([N,S])=>({questionId:N,answer:S}));await cae(e,{contactId:m,answers:j}),c(!0)}catch(j){u(j.message||"Failed to submit survey")}finally{o(!1)}};return a?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx(vt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):d&&!t?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Rn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),n.jsx("p",{className:"text-slate-600",children:d})]})}):l?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[n.jsx(mn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),n.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(y=>y.type==="nps"),n.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),n.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),d&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-700 text-sm",children:d})}),n.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((y,j)=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[y.text,y.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),y.type==="nps"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>n.jsx("button",{type:"button",onClick:()=>g(y.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${f[y.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[n.jsx("span",{children:"Not at all likely"}),n.jsx("span",{children:"Extremely likely"})]})]}),y.type==="multiple_choice"&&n.jsx("div",{className:"space-y-2",children:y.options?.map(N=>n.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:y.id,value:N,checked:f[y.id]===N,onChange:S=>g(y.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-700",children:N})]},N))}),y.type==="free_text"&&n.jsx("textarea",{value:f[y.id]||"",onChange:N=>g(y.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},y.id))}),n.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:n.jsx("button",{onClick:w,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};var vb={};vb.version="0.18.5";var UM=1252,_le=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],y3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},w3=function(e){_le.indexOf(e)!=-1&&(UM=y3[0]=e)};function Cle(){w3(1252)}var eu=function(e){w3(e)};function N3(){eu(1200),Cle()}function YI(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Ale(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function qM(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Qp=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Ale(e.slice(2)):t==254&&r==255?qM(e.slice(2)):t==65279?e.slice(1):e},Iv=function(t){return String.fromCharCode(t)},JI=function(t){return String.fromCharCode(t)},sg,m0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ig(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,s=e.charCodeAt(d++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=m0.charAt(i)+m0.charAt(o)+m0.charAt(l)+m0.charAt(c);return t}function Dc(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=m0.indexOf(e.charAt(d++)),o=m0.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=m0.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=m0.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var In=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Rf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function N0(e){return In?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function QI(e){return In?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ac=function(t){return In?Rf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function wy(e){if(typeof ArrayBuffer>"u")return Ac(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function L0(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Ele(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function j3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return j3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var uo=In?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Rf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Tle(e){for(var t=[],r=0,a=e.length+250,s=N0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=N0(65535),a=65530)}return t.push(s.slice(0,r)),uo(t)}var El=/\u0000/g,Zp=/[\u0001-\u0006]/g;function Sm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function tu(e,t){var r=""+e;return r.length>=t?r:zs("0",t-r.length)+r}function k3(e,t){var r=""+e;return r.length>=t?r:zs(" ",t-r.length)+r}function bb(e,t){var r=""+e;return r.length>=t?r:r+zs(" ",t-r.length)}function Ole(e,t){var r=""+Math.round(e);return r.length>=t?r:zs("0",t-r.length)+r}function Ple(e,t){var r=""+e;return r.length>=t?r:zs("0",t-r.length)+r}var ZI=Math.pow(2,32);function lm(e,t){if(e>ZI||e<-ZI)return Ole(e,t);var r=Math.round(e);return Ple(r,t)}function yb(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var eD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],kj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Ile(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var an={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},tD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Dle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function wb(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,d=0,u=0,f=Math.floor(s);d<t&&(f=Math.floor(s),l=f*o+i,u=f*d+c,!(s-f<5e-8));)s=1/(s-f),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var p=Math.floor(a*l/u);return[p,a*l-p*u,u]}function fh(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Ule(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var $M=new Date(1899,11,31,0,0,0),Lle=$M.getTime(),Fle=new Date(1900,2,1,0,0,0);function zM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Fle&&(r+=1440*60*1e3),(r-(Lle+(e.getTimezoneOffset()-$M.getTimezoneOffset())*6e4))/(1440*60*1e3)}function S3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Mle(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Rle(e){var t=e<0?12:11,r=S3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ble(e){var t=S3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function og(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Rle(e):t===10?r=e.toFixed(10).substr(0,12):r=Ble(e),S3(Mle(r.toUpperCase()))}function Oh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):og(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return bd(14,zM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ule(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function qle(e,t,r,a){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return kj[r.m-1][1];case 5:return kj[r.m-1][0];default:return kj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return eD[r.q][0];default:return eD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?tu(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=tu(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?tu(c,d):"";return u}function p0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var HM=/%/g;function $le(e,t,r){var a=t.replace(HM,""),s=t.length-a.length;return Cf(e,a,r*Math.pow(10,2*s))+zs("%",s)}function zle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Cf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function WM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+WM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var VM=/# (\?+)( ?)\/( ?)(\d+)/;function Hle(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?zs(" ",e[1].length+1+e[4].length):k3(o,e[1].length)+e[2]+"/"+e[3]+tu(l,e[4].length))}function Wle(e,t,r){return r+(t===0?"":""+t)+zs(" ",e[1].length+2+e[4].length)}var GM=/^#*0*\.([0#]+)/,KM=/\).*[0#]/,XM=/\(###\) ###\\?-####/;function kl(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function rD(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function nD(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Vle(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Gle(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function nd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(KM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?nd("n",a,r):"("+nd("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return zle(e,t,r);if(t.indexOf("%")!==-1)return $le(e,t,r);if(t.indexOf("E")!==-1)return WM(t,r);if(t.charCodeAt(0)===36)return"$"+nd(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+lm(c,t.length);if(t.match(/^[#?]+$/))return s=lm(r,0),s==="0"&&(s=""),s.length>t.length?s:kl(t.substr(0,t.length-s.length))+s;if(i=t.match(VM))return Hle(i,c,d);if(t.match(/^#+0+$/))return d+lm(c,t.length-t.indexOf("0"));if(i=t.match(GM))return s=rD(r,i[1].length).replace(/^([^\.]+)$/,"$1."+kl(i[1])).replace(/\.$/,"."+kl(i[1])).replace(/\.(\d*)$/,function(b,v){return"."+v+zs("0",kl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+rD(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+p0(lm(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+nd(e,t,-r):p0(""+(Math.floor(r)+Vle(r,i[1].length)))+"."+tu(nD(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return nd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Sm(nd(e,t.replace(/[\\-]/g,""),r)),o=0,Sm(Sm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(XM))return s=nd(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=wb(c,Math.pow(10,o)-1,!1),s=""+d,u=Cf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=bb(l[2],o),u.length<i[4].length&&(u=kl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=wb(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?k3(l[1],o)+i[2]+"/"+i[3]+bb(l[2],o):zs(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=lm(r,0),t.length<=s.length?s:kl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,p=t.length-s.length-f;return kl(t.substr(0,f)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=nD(r,i[1].length),r<0?"-"+nd(e,t,-r):p0(Gle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?tu(0,3-b.length):"")+b})+"."+tu(o,i[1].length);switch(t){case"###,##0.00":return nd(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=p0(lm(c,0));return m!=="0"?d+m:"";case"###,###.00":return nd(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return nd(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Kle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Cf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Xle(e,t,r){var a=t.replace(HM,""),s=t.length-a.length;return Cf(e,a,r*Math.pow(10,2*s))+zs("%",s)}function YM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+YM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Au(e,t,r){if(e.charCodeAt(0)===40&&!t.match(KM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Au("n",a,r):"("+Au("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Kle(e,t,r);if(t.indexOf("%")!==-1)return Xle(e,t,r);if(t.indexOf("E")!==-1)return YM(t,r);if(t.charCodeAt(0)===36)return"$"+Au(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+tu(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:kl(t.substr(0,t.length-s.length))+s;if(i=t.match(VM))return Wle(i,c,d);if(t.match(/^#+0+$/))return d+tu(c,t.length-t.indexOf("0"));if(i=t.match(GM))return s=(""+r).replace(/^([^\.]+)$/,"$1."+kl(i[1])).replace(/\.$/,"."+kl(i[1])),s=s.replace(/\.(\d*)$/,function(b,v){return"."+v+zs("0",kl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+p0(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Au(e,t,-r):p0(""+r)+"."+zs("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Au(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Sm(Au(e,t.replace(/[\\-]/g,""),r)),o=0,Sm(Sm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(XM))return s=Au(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=wb(c,Math.pow(10,o)-1,!1),s=""+d,u=Cf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=bb(l[2],o),u.length<i[4].length&&(u=kl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=wb(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?k3(l[1],o)+i[2]+"/"+i[3]+bb(l[2],o):zs(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:kl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,p=t.length-s.length-f;return kl(t.substr(0,f)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Au(e,t,-r):p0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?tu(0,3-b.length):"")+b})+"."+tu(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=p0(""+c);return m!=="0"?d+m:"";default:if(t.match(/\.[0#?]*$/))return Au(e,t.slice(0,t.lastIndexOf(".")),r)+kl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Cf(e,t,r){return(r|0)===r?Au(e,t,r):nd(e,t,r)}function Yle(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var JM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function xp(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":yb(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(JM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Jle(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",d,u,f,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!yb(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),b=m==="("||m===")"?m:"t";s[s.length]={t:b,v:m},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=fh(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=fh(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var v={t:l,v:l};if(d==null&&(d=fh(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(v.v=d.H>=12?"P":"A"),v.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(v.v=d.H>=12?"PM":"AM"),v.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(v.v=d.H>=12?"":""),v.t="T",o+=5,p="h"):(v.t="t",++o),d==null&&v.t==="T")return"";s[s.length]=v,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(JM)){if(d==null&&(d=fh(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",xp(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var g=0,w=0,y;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,c="h",g<1&&(g=1);break;case"s":(y=s[o].v.match(/\.0+$/))&&(w=Math.max(w,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[o].v.match(/[Hh]/)&&(g=1),g<2&&s[o].v.match(/[Mm]/)&&(g=2),g<3&&s[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",N;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=qle(s[o].t.charCodeAt(0),s[o].v,d,w),s[o].t="t";break;case"n":case"?":for(N=o+1;s[N]!=null&&((l=s[N].t)==="?"||l==="D"||(l===" "||l==="t")&&s[N+1]!=null&&(s[N+1].t==="?"||s[N+1].t==="t"&&s[N+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[N].v==="/"||s[N].v===" "&&s[N+1]!=null&&s[N+1].t=="?"));)s[o].v+=s[N].v,s[N]={v:"",t:";"},++N;j+=s[o].v,o=N-1;break;case"G":s[o].t="t",s[o].v=Oh(t,r);break}var S="",E,A;if(j.length>0){j.charCodeAt(0)==40?(E=t<0&&j.charCodeAt(0)===45?-t:t,A=Cf("n",j,E)):(E=t<0&&a>1?-t:t,A=Cf("n",j,E),E<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),N=A.length-1;var P=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){P=o;break}var D=s.length;if(P===s.length&&A.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(N>=s[o].v.length-1?(N-=s[o].v.length,s[o].v=A.substr(N+1,s[o].v.length)):N<0?s[o].v="":(s[o].v=A.substr(0,N+1),N=-1),s[o].t="t",D=o);N>=0&&D<s.length&&(s[D].v=A.substr(0,N+1)+s[D].v)}else if(P!==s.length&&A.indexOf("E")===-1){for(N=A.indexOf(".")-1,o=P;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)N>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=A.charAt(N--)+S);s[o].v=S,s[o].t="t",D=o}for(N>=0&&D<s.length&&(s[D].v=A.substr(0,N+1)+s[D].v),N=A.indexOf(".")+1,o=P;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==P)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)N<A.length&&(S+=A.charAt(N++));s[o].v=S,s[o].t="t",D=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(E=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Cf(s[o].t,s[o].v,E),s[o].t="t");var R="";for(o=0;o!==s.length;++o)s[o]!=null&&(R+=s[o].v);return R}var aD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function sD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Qle(e,t){var r=Yle(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(aD),l=r[1].match(aD);return sD(t,o)?[a,r[0]]:sD(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function bd(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:an)[e],a==null&&(a=r.table&&r.table[tD[e]]||an[tD[e]]),a==null&&(a=Dle[e]||"General");break}if(yb(a,0))return Oh(t,r);t instanceof Date&&(t=zM(t,r.date1904));var s=Qle(a,t);if(yb(s[1]))return Oh(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Jle(s[1],t,r,s[0])}function Af(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(an[r]==null){t<0&&(t=r);continue}if(an[r]==e){t=r;break}}t<0&&(t=391)}return an[t]=e,t}function Ny(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Af(e[t],t)}function gp(){an=Ile()}var Zle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},QM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ece(e){var t=typeof e=="number"?an[e]:e;return t=t.replace(QM,"(\\d+)"),new RegExp("^"+t+"$")}function tce(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(QM)||[]).forEach(function(f,p){var m=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=m;break;case"d":i=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:s=m;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&s==-1&&i==-1?u:d+"T"+u}var rce=(function(){var e={};e.version="1.2.0";function t(){for(var A=0,P=new Array(256),D=0;D!=256;++D)A=D,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,P[D]=A;return typeof Int32Array<"u"?new Int32Array(P):P}var r=t();function a(A){var P=0,D=0,R=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)T[R]=A[R];for(R=0;R!=256;++R)for(D=A[R],P=256+R;P<4096;P+=256)D=T[P]=D>>>8^A[D&255];var _=[];for(R=1;R!=16;++R)_[R-1]=typeof Int32Array<"u"?T.subarray(R*256,R*256+256):T.slice(R*256,R*256+256);return _}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],f=s[6],p=s[7],m=s[8],b=s[9],v=s[10],g=s[11],w=s[12],y=s[13],j=s[14];function N(A,P){for(var D=P^-1,R=0,T=A.length;R<T;)D=D>>>8^r[(D^A.charCodeAt(R++))&255];return~D}function S(A,P){for(var D=P^-1,R=A.length-15,T=0;T<R;)D=j[A[T++]^D&255]^y[A[T++]^D>>8&255]^w[A[T++]^D>>16&255]^g[A[T++]^D>>>24]^v[A[T++]]^b[A[T++]]^m[A[T++]]^p[A[T++]]^f[A[T++]]^u[A[T++]]^d[A[T++]]^c[A[T++]]^l[A[T++]]^o[A[T++]]^i[A[T++]]^r[A[T++]];for(R+=15;T<R;)D=D>>>8^r[(D^A[T++])&255];return~D}function E(A,P){for(var D=P^-1,R=0,T=A.length,_=0,B=0;R<T;)_=A.charCodeAt(R++),_<128?D=D>>>8^r[(D^_)&255]:_<2048?(D=D>>>8^r[(D^(192|_>>6&31))&255],D=D>>>8^r[(D^(128|_&63))&255]):_>=55296&&_<57344?(_=(_&1023)+64,B=A.charCodeAt(R++)&1023,D=D>>>8^r[(D^(240|_>>8&7))&255],D=D>>>8^r[(D^(128|_>>2&63))&255],D=D>>>8^r[(D^(128|B>>6&15|(_&3)<<4))&255],D=D>>>8^r[(D^(128|B&63))&255]):(D=D>>>8^r[(D^(224|_>>12&15))&255],D=D>>>8^r[(D^(128|_>>6&63))&255],D=D>>>8^r[(D^(128|_&63))&255]);return~D}return e.table=r,e.bstr=N,e.buf=S,e.str=E,e})(),Yr=(function(){var t={};t.version="1.2.1";function r(Ne,He){for(var Be=Ne.split("/"),xe=He.split("/"),Ce=0,Re=0,tt=Math.min(Be.length,xe.length);Ce<tt;++Ce){if(Re=Be[Ce].length-xe[Ce].length)return Re;if(Be[Ce]!=xe[Ce])return Be[Ce]<xe[Ce]?-1:1}return Be.length-xe.length}function a(Ne){if(Ne.charAt(Ne.length-1)=="/")return Ne.slice(0,-1).indexOf("/")===-1?Ne:a(Ne.slice(0,-1));var He=Ne.lastIndexOf("/");return He===-1?Ne:Ne.slice(0,He+1)}function s(Ne){if(Ne.charAt(Ne.length-1)=="/")return s(Ne.slice(0,-1));var He=Ne.lastIndexOf("/");return He===-1?Ne:Ne.slice(He+1)}function i(Ne,He){typeof He=="string"&&(He=new Date(He));var Be=He.getHours();Be=Be<<6|He.getMinutes(),Be=Be<<5|He.getSeconds()>>>1,Ne.write_shift(2,Be);var xe=He.getFullYear()-1980;xe=xe<<4|He.getMonth()+1,xe=xe<<5|He.getDate(),Ne.write_shift(2,xe)}function o(Ne){var He=Ne.read_shift(2)&65535,Be=Ne.read_shift(2)&65535,xe=new Date,Ce=Be&31;Be>>>=5;var Re=Be&15;Be>>>=4,xe.setMilliseconds(0),xe.setFullYear(Be+1980),xe.setMonth(Re-1),xe.setDate(Ce);var tt=He&31;He>>>=5;var ht=He&63;return He>>>=6,xe.setHours(He),xe.setMinutes(ht),xe.setSeconds(tt<<1),xe}function l(Ne){Po(Ne,0);for(var He={},Be=0;Ne.l<=Ne.length-4;){var xe=Ne.read_shift(2),Ce=Ne.read_shift(2),Re=Ne.l+Ce,tt={};xe===21589&&(Be=Ne.read_shift(1),Be&1&&(tt.mtime=Ne.read_shift(4)),Ce>5&&(Be&2&&(tt.atime=Ne.read_shift(4)),Be&4&&(tt.ctime=Ne.read_shift(4))),tt.mtime&&(tt.mt=new Date(tt.mtime*1e3))),Ne.l=Re,He[xe]=tt}return He}var c;function d(){return c||(c={})}function u(Ne,He){if(Ne[0]==80&&Ne[1]==75)return tr(Ne,He);if((Ne[0]|32)==109&&(Ne[1]|32)==105)return pn(Ne,He);if(Ne.length<512)throw new Error("CFB file size "+Ne.length+" < 512");var Be=3,xe=512,Ce=0,Re=0,tt=0,ht=0,ct=0,xt=[],ve=Ne.slice(0,512);Po(ve,0);var be=f(ve);switch(Be=be[0],Be){case 3:xe=512;break;case 4:xe=4096;break;case 0:if(be[1]==0)return tr(Ne,He);default:throw new Error("Major Version: Expected 3 or 4 saw "+Be)}xe!==512&&(ve=Ne.slice(0,xe),Po(ve,28));var Ge=Ne.slice(0,xe);p(ve,Be);var at=ve.read_shift(4,"i");if(Be===3&&at!==0)throw new Error("# Directory Sectors: Expected 0 saw "+at);ve.l+=4,tt=ve.read_shift(4,"i"),ve.l+=4,ve.chk("00100000","Mini Stream Cutoff Size: "),ht=ve.read_shift(4,"i"),Ce=ve.read_shift(4,"i"),ct=ve.read_shift(4,"i"),Re=ve.read_shift(4,"i");for(var yt=-1,wt=0;wt<109&&(yt=ve.read_shift(4,"i"),!(yt<0));++wt)xt[wt]=yt;var Rt=m(Ne,xe);g(ct,Re,Rt,xe,xt);var sr=y(Rt,tt,xt,xe);sr[tt].name="!Directory",Ce>0&&ht!==B&&(sr[ht].name="!MiniFAT"),sr[xt[0]].name="!FAT",sr.fat_addrs=xt,sr.ssz=xe;var Yt={},wr=[],Pr=[],$r=[];j(tt,sr,Rt,wr,Ce,Yt,Pr,ht),b(Pr,$r,wr),wr.shift();var fn={FileIndex:Pr,FullPaths:$r};return He&&He.raw&&(fn.raw={header:Ge,sectors:Rt}),fn}function f(Ne){if(Ne[Ne.l]==80&&Ne[Ne.l+1]==75)return[0,0];Ne.chk(U,"Header Signature: "),Ne.l+=16;var He=Ne.read_shift(2,"u");return[Ne.read_shift(2,"u"),He]}function p(Ne,He){var Be=9;switch(Ne.l+=2,Be=Ne.read_shift(2)){case 9:if(He!=3)throw new Error("Sector Shift: Expected 9 saw "+Be);break;case 12:if(He!=4)throw new Error("Sector Shift: Expected 12 saw "+Be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Be)}Ne.chk("0600","Mini Sector Shift: "),Ne.chk("000000000000","Reserved: ")}function m(Ne,He){for(var Be=Math.ceil(Ne.length/He)-1,xe=[],Ce=1;Ce<Be;++Ce)xe[Ce-1]=Ne.slice(Ce*He,(Ce+1)*He);return xe[Be-1]=Ne.slice(Be*He),xe}function b(Ne,He,Be){for(var xe=0,Ce=0,Re=0,tt=0,ht=0,ct=Be.length,xt=[],ve=[];xe<ct;++xe)xt[xe]=ve[xe]=xe,He[xe]=Be[xe];for(;ht<ve.length;++ht)xe=ve[ht],Ce=Ne[xe].L,Re=Ne[xe].R,tt=Ne[xe].C,xt[xe]===xe&&(Ce!==-1&&xt[Ce]!==Ce&&(xt[xe]=xt[Ce]),Re!==-1&&xt[Re]!==Re&&(xt[xe]=xt[Re])),tt!==-1&&(xt[tt]=xe),Ce!==-1&&xe!=xt[xe]&&(xt[Ce]=xt[xe],ve.lastIndexOf(Ce)<ht&&ve.push(Ce)),Re!==-1&&xe!=xt[xe]&&(xt[Re]=xt[xe],ve.lastIndexOf(Re)<ht&&ve.push(Re));for(xe=1;xe<ct;++xe)xt[xe]===xe&&(Re!==-1&&xt[Re]!==Re?xt[xe]=xt[Re]:Ce!==-1&&xt[Ce]!==Ce&&(xt[xe]=xt[Ce]));for(xe=1;xe<ct;++xe)if(Ne[xe].type!==0){if(ht=xe,ht!=xt[ht])do ht=xt[ht],He[xe]=He[ht]+"/"+He[xe];while(ht!==0&&xt[ht]!==-1&&ht!=xt[ht]);xt[xe]=-1}for(He[0]+="/",xe=1;xe<ct;++xe)Ne[xe].type!==2&&(He[xe]+="/")}function v(Ne,He,Be){for(var xe=Ne.start,Ce=Ne.size,Re=[],tt=xe;Be&&Ce>0&&tt>=0;)Re.push(He.slice(tt*_,tt*_+_)),Ce-=_,tt=nh(Be,tt*4);return Re.length===0?zt(0):uo(Re).slice(0,Ne.size)}function g(Ne,He,Be,xe,Ce){var Re=B;if(Ne===B){if(He!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ne!==-1){var tt=Be[Ne],ht=(xe>>>2)-1;if(!tt)return;for(var ct=0;ct<ht&&(Re=nh(tt,ct*4))!==B;++ct)Ce.push(Re);g(nh(tt,xe-4),He-1,Be,xe,Ce)}}function w(Ne,He,Be,xe,Ce){var Re=[],tt=[];Ce||(Ce=[]);var ht=xe-1,ct=0,xt=0;for(ct=He;ct>=0;){Ce[ct]=!0,Re[Re.length]=ct,tt.push(Ne[ct]);var ve=Be[Math.floor(ct*4/xe)];if(xt=ct*4&ht,xe<4+xt)throw new Error("FAT boundary crossed: "+ct+" 4 "+xe);if(!Ne[ve])break;ct=nh(Ne[ve],xt)}return{nodes:Re,data:gD([tt])}}function y(Ne,He,Be,xe){var Ce=Ne.length,Re=[],tt=[],ht=[],ct=[],xt=xe-1,ve=0,be=0,Ge=0,at=0;for(ve=0;ve<Ce;++ve)if(ht=[],Ge=ve+He,Ge>=Ce&&(Ge-=Ce),!tt[Ge]){ct=[];var yt=[];for(be=Ge;be>=0;){yt[be]=!0,tt[be]=!0,ht[ht.length]=be,ct.push(Ne[be]);var wt=Be[Math.floor(be*4/xe)];if(at=be*4&xt,xe<4+at)throw new Error("FAT boundary crossed: "+be+" 4 "+xe);if(!Ne[wt]||(be=nh(Ne[wt],at),yt[be]))break}Re[Ge]={nodes:ht,data:gD([ct])}}return Re}function j(Ne,He,Be,xe,Ce,Re,tt,ht){for(var ct=0,xt=xe.length?2:0,ve=He[Ne].data,be=0,Ge=0,at;be<ve.length;be+=128){var yt=ve.slice(be,be+128);Po(yt,64),Ge=yt.read_shift(2),at=P3(yt,0,Ge-xt),xe.push(at);var wt={name:at,type:yt.read_shift(1),color:yt.read_shift(1),L:yt.read_shift(4,"i"),R:yt.read_shift(4,"i"),C:yt.read_shift(4,"i"),clsid:yt.read_shift(16),state:yt.read_shift(4,"i"),start:0,size:0},Rt=yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2);Rt!==0&&(wt.ct=N(yt,yt.l-8));var sr=yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2);sr!==0&&(wt.mt=N(yt,yt.l-8)),wt.start=yt.read_shift(4,"i"),wt.size=yt.read_shift(4,"i"),wt.size<0&&wt.start<0&&(wt.size=wt.type=0,wt.start=B,wt.name=""),wt.type===5?(ct=wt.start,Ce>0&&ct!==B&&(He[ct].name="!StreamData")):wt.size>=4096?(wt.storage="fat",He[wt.start]===void 0&&(He[wt.start]=w(Be,wt.start,He.fat_addrs,He.ssz)),He[wt.start].name=wt.name,wt.content=He[wt.start].data.slice(0,wt.size)):(wt.storage="minifat",wt.size<0?wt.size=0:ct!==B&&wt.start!==B&&He[ct]&&(wt.content=v(wt,He[ct].data,(He[ht]||{}).data))),wt.content&&Po(wt.content,0),Re[at]=wt,tt.push(wt)}}function N(Ne,He){return new Date((_c(Ne,He+4)/1e7*Math.pow(2,32)+_c(Ne,He)/1e7-11644473600)*1e3)}function S(Ne,He){return d(),u(c.readFileSync(Ne),He)}function E(Ne,He){var Be=He&&He.type;switch(Be||In&&Buffer.isBuffer(Ne)&&(Be="buffer"),Be||"base64"){case"file":return S(Ne,He);case"base64":return u(Ac(Dc(Ne)),He);case"binary":return u(Ac(Ne),He)}return u(Ne,He)}function A(Ne,He){var Be=He||{},xe=Be.root||"Root Entry";if(Ne.FullPaths||(Ne.FullPaths=[]),Ne.FileIndex||(Ne.FileIndex=[]),Ne.FullPaths.length!==Ne.FileIndex.length)throw new Error("inconsistent CFB structure");Ne.FullPaths.length===0&&(Ne.FullPaths[0]=xe+"/",Ne.FileIndex[0]={name:xe,type:5}),Be.CLSID&&(Ne.FileIndex[0].clsid=Be.CLSID),P(Ne)}function P(Ne){var He="Sh33tJ5";if(!Yr.find(Ne,"/"+He)){var Be=zt(4);Be[0]=55,Be[1]=Be[3]=50,Be[2]=54,Ne.FileIndex.push({name:He,type:2,content:Be,size:4,L:69,R:69,C:69}),Ne.FullPaths.push(Ne.FullPaths[0]+He),D(Ne)}}function D(Ne,He){A(Ne);for(var Be=!1,xe=!1,Ce=Ne.FullPaths.length-1;Ce>=0;--Ce){var Re=Ne.FileIndex[Ce];switch(Re.type){case 0:xe?Be=!0:(Ne.FileIndex.pop(),Ne.FullPaths.pop());break;case 1:case 2:case 5:xe=!0,isNaN(Re.R*Re.L*Re.C)&&(Be=!0),Re.R>-1&&Re.L>-1&&Re.R==Re.L&&(Be=!0);break;default:Be=!0;break}}if(!(!Be&&!He)){var tt=new Date(1987,1,19),ht=0,ct=Object.create?Object.create(null):{},xt=[];for(Ce=0;Ce<Ne.FullPaths.length;++Ce)ct[Ne.FullPaths[Ce]]=!0,Ne.FileIndex[Ce].type!==0&&xt.push([Ne.FullPaths[Ce],Ne.FileIndex[Ce]]);for(Ce=0;Ce<xt.length;++Ce){var ve=a(xt[Ce][0]);xe=ct[ve],xe||(xt.push([ve,{name:s(ve).replace("/",""),type:1,clsid:Y,ct:tt,mt:tt,content:null}]),ct[ve]=!0)}for(xt.sort(function(at,yt){return r(at[0],yt[0])}),Ne.FullPaths=[],Ne.FileIndex=[],Ce=0;Ce<xt.length;++Ce)Ne.FullPaths[Ce]=xt[Ce][0],Ne.FileIndex[Ce]=xt[Ce][1];for(Ce=0;Ce<xt.length;++Ce){var be=Ne.FileIndex[Ce],Ge=Ne.FullPaths[Ce];if(be.name=s(Ge).replace("/",""),be.L=be.R=be.C=-(be.color=1),be.size=be.content?be.content.length:0,be.start=0,be.clsid=be.clsid||Y,Ce===0)be.C=xt.length>1?1:-1,be.size=0,be.type=5;else if(Ge.slice(-1)=="/"){for(ht=Ce+1;ht<xt.length&&a(Ne.FullPaths[ht])!=Ge;++ht);for(be.C=ht>=xt.length?-1:ht,ht=Ce+1;ht<xt.length&&a(Ne.FullPaths[ht])!=a(Ge);++ht);be.R=ht>=xt.length?-1:ht,be.type=1}else a(Ne.FullPaths[Ce+1]||"")==a(Ge)&&(be.R=Ce+1),be.type=2}}}function R(Ne,He){var Be=He||{};if(Be.fileType=="mad")return rr(Ne,Be);if(D(Ne),Be.fileType==="zip")return pr(Ne,Be);var xe=(function(at){for(var yt=0,wt=0,Rt=0;Rt<at.FileIndex.length;++Rt){var sr=at.FileIndex[Rt];if(sr.content){var Yt=sr.content.length;Yt>0&&(Yt<4096?yt+=Yt+63>>6:wt+=Yt+511>>9)}}for(var wr=at.FullPaths.length+3>>2,Pr=yt+7>>3,$r=yt+127>>7,fn=Pr+wt+wr+$r,Ur=fn+127>>7,ea=Ur<=109?0:Math.ceil((Ur-109)/127);fn+Ur+ea+127>>7>Ur;)ea=++Ur<=109?0:Math.ceil((Ur-109)/127);var Un=[1,ea,Ur,$r,wr,wt,yt,0];return at.FileIndex[0].size=yt<<6,Un[7]=(at.FileIndex[0].start=Un[0]+Un[1]+Un[2]+Un[3]+Un[4]+Un[5])+(Un[6]+7>>3),Un})(Ne),Ce=zt(xe[7]<<9),Re=0,tt=0;{for(Re=0;Re<8;++Re)Ce.write_shift(1,H[Re]);for(Re=0;Re<8;++Re)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),Re=0;Re<3;++Re)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,xe[2]),Ce.write_shift(4,xe[0]+xe[1]+xe[2]+xe[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,4096),Ce.write_shift(4,xe[3]?xe[0]+xe[1]+xe[2]-1:B),Ce.write_shift(4,xe[3]),Ce.write_shift(-4,xe[1]?xe[0]-1:B),Ce.write_shift(4,xe[1]),Re=0;Re<109;++Re)Ce.write_shift(-4,Re<xe[2]?xe[1]+Re:-1)}if(xe[1])for(tt=0;tt<xe[1];++tt){for(;Re<236+tt*127;++Re)Ce.write_shift(-4,Re<xe[2]?xe[1]+Re:-1);Ce.write_shift(-4,tt===xe[1]-1?B:tt+1)}var ht=function(at){for(tt+=at;Re<tt-1;++Re)Ce.write_shift(-4,Re+1);at&&(++Re,Ce.write_shift(-4,B))};for(tt=Re=0,tt+=xe[1];Re<tt;++Re)Ce.write_shift(-4,J.DIFSECT);for(tt+=xe[2];Re<tt;++Re)Ce.write_shift(-4,J.FATSECT);ht(xe[3]),ht(xe[4]);for(var ct=0,xt=0,ve=Ne.FileIndex[0];ct<Ne.FileIndex.length;++ct)ve=Ne.FileIndex[ct],ve.content&&(xt=ve.content.length,!(xt<4096)&&(ve.start=tt,ht(xt+511>>9)));for(ht(xe[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,J.ENDOFCHAIN);for(tt=Re=0,ct=0;ct<Ne.FileIndex.length;++ct)ve=Ne.FileIndex[ct],ve.content&&(xt=ve.content.length,!(!xt||xt>=4096)&&(ve.start=tt,ht(xt+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,J.ENDOFCHAIN);for(Re=0;Re<xe[4]<<2;++Re){var be=Ne.FullPaths[Re];if(!be||be.length===0){for(ct=0;ct<17;++ct)Ce.write_shift(4,0);for(ct=0;ct<3;++ct)Ce.write_shift(4,-1);for(ct=0;ct<12;++ct)Ce.write_shift(4,0);continue}ve=Ne.FileIndex[Re],Re===0&&(ve.start=ve.size?ve.start-1:B);var Ge=Re===0&&Be.root||ve.name;if(xt=2*(Ge.length+1),Ce.write_shift(64,Ge,"utf16le"),Ce.write_shift(2,xt),Ce.write_shift(1,ve.type),Ce.write_shift(1,ve.color),Ce.write_shift(-4,ve.L),Ce.write_shift(-4,ve.R),Ce.write_shift(-4,ve.C),ve.clsid)Ce.write_shift(16,ve.clsid,"hex");else for(ct=0;ct<4;++ct)Ce.write_shift(4,0);Ce.write_shift(4,ve.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,ve.start),Ce.write_shift(4,ve.size),Ce.write_shift(4,0)}for(Re=1;Re<Ne.FileIndex.length;++Re)if(ve=Ne.FileIndex[Re],ve.size>=4096)if(Ce.l=ve.start+1<<9,In&&Buffer.isBuffer(ve.content))ve.content.copy(Ce,Ce.l,0,ve.size),Ce.l+=ve.size+511&-512;else{for(ct=0;ct<ve.size;++ct)Ce.write_shift(1,ve.content[ct]);for(;ct&511;++ct)Ce.write_shift(1,0)}for(Re=1;Re<Ne.FileIndex.length;++Re)if(ve=Ne.FileIndex[Re],ve.size>0&&ve.size<4096)if(In&&Buffer.isBuffer(ve.content))ve.content.copy(Ce,Ce.l,0,ve.size),Ce.l+=ve.size+63&-64;else{for(ct=0;ct<ve.size;++ct)Ce.write_shift(1,ve.content[ct]);for(;ct&63;++ct)Ce.write_shift(1,0)}if(In)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function T(Ne,He){var Be=Ne.FullPaths.map(function(ct){return ct.toUpperCase()}),xe=Be.map(function(ct){var xt=ct.split("/");return xt[xt.length-(ct.slice(-1)=="/"?2:1)]}),Ce=!1;He.charCodeAt(0)===47?(Ce=!0,He=Be[0].slice(0,-1)+He):Ce=He.indexOf("/")!==-1;var Re=He.toUpperCase(),tt=Ce===!0?Be.indexOf(Re):xe.indexOf(Re);if(tt!==-1)return Ne.FileIndex[tt];var ht=!Re.match(Zp);for(Re=Re.replace(El,""),ht&&(Re=Re.replace(Zp,"!")),tt=0;tt<Be.length;++tt)if((ht?Be[tt].replace(Zp,"!"):Be[tt]).replace(El,"")==Re||(ht?xe[tt].replace(Zp,"!"):xe[tt]).replace(El,"")==Re)return Ne.FileIndex[tt];return null}var _=64,B=-2,U="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:B,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(Ne,He,Be){d();var xe=R(Ne,Be);c.writeFileSync(He,xe)}function X(Ne){for(var He=new Array(Ne.length),Be=0;Be<Ne.length;++Be)He[Be]=String.fromCharCode(Ne[Be]);return He.join("")}function ee(Ne,He){var Be=R(Ne,He);switch(He&&He.type||"buffer"){case"file":return d(),c.writeFileSync(He.filename,Be),Be;case"binary":return typeof Be=="string"?Be:X(Be);case"base64":return ig(typeof Be=="string"?Be:X(Be));case"buffer":if(In)return Buffer.isBuffer(Be)?Be:Rf(Be);case"array":return typeof Be=="string"?Ac(Be):Be}return Be}var W;function O(Ne){try{var He=Ne.InflateRaw,Be=new He;if(Be._processChunk(new Uint8Array([3,0]),Be._finishFlushFlag),Be.bytesRead)W=Ne;else throw new Error("zlib does not expose bytesRead")}catch(xe){console.error("cannot use native zlib: "+(xe.message||xe))}}function z(Ne,He){if(!W)return Et(Ne,He);var Be=W.InflateRaw,xe=new Be,Ce=xe._processChunk(Ne.slice(Ne.l),xe._finishFlushFlag);return Ne.l+=xe.bytesRead,Ce}function V(Ne){return W?W.deflateRawSync(Ne):Me(Ne)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(Ne){var He=(Ne<<1|Ne<<11)&139536|(Ne<<5|Ne<<15)&558144;return(He>>16|He>>8|He)&255}for(var ie=typeof Uint8Array<"u",le=ie?new Uint8Array(256):[],$e=0;$e<256;++$e)le[$e]=pe($e);function he(Ne,He){var Be=le[Ne&255];return He<=8?Be>>>8-He:(Be=Be<<8|le[Ne>>8&255],He<=16?Be>>>16-He:(Be=Be<<8|le[Ne>>16&255],Be>>>24-He))}function Ue(Ne,He){var Be=He&7,xe=He>>>3;return(Ne[xe]|(Be<=6?0:Ne[xe+1]<<8))>>>Be&3}function Te(Ne,He){var Be=He&7,xe=He>>>3;return(Ne[xe]|(Be<=5?0:Ne[xe+1]<<8))>>>Be&7}function oe(Ne,He){var Be=He&7,xe=He>>>3;return(Ne[xe]|(Be<=4?0:Ne[xe+1]<<8))>>>Be&15}function te(Ne,He){var Be=He&7,xe=He>>>3;return(Ne[xe]|(Be<=3?0:Ne[xe+1]<<8))>>>Be&31}function Pe(Ne,He){var Be=He&7,xe=He>>>3;return(Ne[xe]|(Be<=1?0:Ne[xe+1]<<8))>>>Be&127}function je(Ne,He,Be){var xe=He&7,Ce=He>>>3,Re=(1<<Be)-1,tt=Ne[Ce]>>>xe;return Be<8-xe||(tt|=Ne[Ce+1]<<8-xe,Be<16-xe)||(tt|=Ne[Ce+2]<<16-xe,Be<24-xe)||(tt|=Ne[Ce+3]<<24-xe),tt&Re}function Ie(Ne,He,Be){var xe=He&7,Ce=He>>>3;return xe<=5?Ne[Ce]|=(Be&7)<<xe:(Ne[Ce]|=Be<<xe&255,Ne[Ce+1]=(Be&7)>>8-xe),He+3}function ue(Ne,He,Be){var xe=He&7,Ce=He>>>3;return Be=(Be&1)<<xe,Ne[Ce]|=Be,He+1}function de(Ne,He,Be){var xe=He&7,Ce=He>>>3;return Be<<=xe,Ne[Ce]|=Be&255,Be>>>=8,Ne[Ce+1]=Be,He+8}function Ae(Ne,He,Be){var xe=He&7,Ce=He>>>3;return Be<<=xe,Ne[Ce]|=Be&255,Be>>>=8,Ne[Ce+1]=Be&255,Ne[Ce+2]=Be>>>8,He+16}function Qe(Ne,He){var Be=Ne.length,xe=2*Be>He?2*Be:He+5,Ce=0;if(Be>=He)return Ne;if(In){var Re=QI(xe);if(Ne.copy)Ne.copy(Re);else for(;Ce<Ne.length;++Ce)Re[Ce]=Ne[Ce];return Re}else if(ie){var tt=new Uint8Array(xe);if(tt.set)tt.set(Ne);else for(;Ce<Be;++Ce)tt[Ce]=Ne[Ce];return tt}return Ne.length=xe,Ne}function ge(Ne){for(var He=new Array(Ne),Be=0;Be<Ne;++Be)He[Be]=0;return He}function fe(Ne,He,Be){var xe=1,Ce=0,Re=0,tt=0,ht=0,ct=Ne.length,xt=ie?new Uint16Array(32):ge(32);for(Re=0;Re<32;++Re)xt[Re]=0;for(Re=ct;Re<Be;++Re)Ne[Re]=0;ct=Ne.length;var ve=ie?new Uint16Array(ct):ge(ct);for(Re=0;Re<ct;++Re)xt[Ce=Ne[Re]]++,xe<Ce&&(xe=Ce),ve[Re]=0;for(xt[0]=0,Re=1;Re<=xe;++Re)xt[Re+16]=ht=ht+xt[Re-1]<<1;for(Re=0;Re<ct;++Re)ht=Ne[Re],ht!=0&&(ve[Re]=xt[ht+16]++);var be=0;for(Re=0;Re<ct;++Re)if(be=Ne[Re],be!=0)for(ht=he(ve[Re],xe)>>xe-be,tt=(1<<xe+4-be)-1;tt>=0;--tt)He[ht|tt<<be]=be&15|Re<<4;return xe}var _e=ie?new Uint16Array(512):ge(512),ze=ie?new Uint16Array(32):ge(32);if(!ie){for(var Se=0;Se<512;++Se)_e[Se]=0;for(Se=0;Se<32;++Se)ze[Se]=0}(function(){for(var Ne=[],He=0;He<32;He++)Ne.push(5);fe(Ne,ze,32);var Be=[];for(He=0;He<=143;He++)Be.push(8);for(;He<=255;He++)Be.push(9);for(;He<=279;He++)Be.push(7);for(;He<=287;He++)Be.push(8);fe(Be,_e,288)})();var Fe=(function(){for(var He=ie?new Uint8Array(32768):[],Be=0,xe=0;Be<se.length-1;++Be)for(;xe<se[Be+1];++xe)He[xe]=Be;for(;xe<32768;++xe)He[xe]=29;var Ce=ie?new Uint8Array(259):[];for(Be=0,xe=0;Be<K.length-1;++Be)for(;xe<K[Be+1];++xe)Ce[xe]=Be;function Re(ht,ct){for(var xt=0;xt<ht.length;){var ve=Math.min(65535,ht.length-xt),be=xt+ve==ht.length;for(ct.write_shift(1,+be),ct.write_shift(2,ve),ct.write_shift(2,~ve&65535);ve-- >0;)ct[ct.l++]=ht[xt++]}return ct.l}function tt(ht,ct){for(var xt=0,ve=0,be=ie?new Uint16Array(32768):[];ve<ht.length;){var Ge=Math.min(65535,ht.length-ve);if(Ge<10){for(xt=Ie(ct,xt,+(ve+Ge==ht.length)),xt&7&&(xt+=8-(xt&7)),ct.l=xt/8|0,ct.write_shift(2,Ge),ct.write_shift(2,~Ge&65535);Ge-- >0;)ct[ct.l++]=ht[ve++];xt=ct.l*8;continue}xt=Ie(ct,xt,+(ve+Ge==ht.length)+2);for(var at=0;Ge-- >0;){var yt=ht[ve];at=(at<<5^yt)&32767;var wt=-1,Rt=0;if((wt=be[at])&&(wt|=ve&-32768,wt>ve&&(wt-=32768),wt<ve))for(;ht[wt+Rt]==ht[ve+Rt]&&Rt<250;)++Rt;if(Rt>2){yt=Ce[Rt],yt<=22?xt=de(ct,xt,le[yt+1]>>1)-1:(de(ct,xt,3),xt+=5,de(ct,xt,le[yt-23]>>5),xt+=3);var sr=yt<8?0:yt-4>>2;sr>0&&(Ae(ct,xt,Rt-K[yt]),xt+=sr),yt=He[ve-wt],xt=de(ct,xt,le[yt]>>3),xt-=3;var Yt=yt<4?0:yt-2>>1;Yt>0&&(Ae(ct,xt,ve-wt-se[yt]),xt+=Yt);for(var wr=0;wr<Rt;++wr)be[at]=ve&32767,at=(at<<5^ht[ve])&32767,++ve;Ge-=Rt-1}else yt<=143?yt=yt+48:xt=ue(ct,xt,1),xt=de(ct,xt,le[yt]),be[at]=ve&32767,++ve}xt=de(ct,xt,0)-1}return ct.l=(xt+7)/8|0,ct.l}return function(ct,xt){return ct.length<8?Re(ct,xt):tt(ct,xt)}})();function Me(Ne){var He=zt(50+Math.floor(Ne.length*1.1)),Be=Fe(Ne,He);return He.slice(0,Be)}var et=ie?new Uint16Array(32768):ge(32768),ut=ie?new Uint16Array(32768):ge(32768),bt=ie?new Uint16Array(128):ge(128),At=1,qt=1;function Gt(Ne,He){var Be=te(Ne,He)+257;He+=5;var xe=te(Ne,He)+1;He+=5;var Ce=oe(Ne,He)+4;He+=4;for(var Re=0,tt=ie?new Uint8Array(19):ge(19),ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ct=1,xt=ie?new Uint8Array(8):ge(8),ve=ie?new Uint8Array(8):ge(8),be=tt.length,Ge=0;Ge<Ce;++Ge)tt[q[Ge]]=Re=Te(Ne,He),ct<Re&&(ct=Re),xt[Re]++,He+=3;var at=0;for(xt[0]=0,Ge=1;Ge<=ct;++Ge)ve[Ge]=at=at+xt[Ge-1]<<1;for(Ge=0;Ge<be;++Ge)(at=tt[Ge])!=0&&(ht[Ge]=ve[at]++);var yt=0;for(Ge=0;Ge<be;++Ge)if(yt=tt[Ge],yt!=0){at=le[ht[Ge]]>>8-yt;for(var wt=(1<<7-yt)-1;wt>=0;--wt)bt[at|wt<<yt]=yt&7|Ge<<3}var Rt=[];for(ct=1;Rt.length<Be+xe;)switch(at=bt[Pe(Ne,He)],He+=at&7,at>>>=3){case 16:for(Re=3+Ue(Ne,He),He+=2,at=Rt[Rt.length-1];Re-- >0;)Rt.push(at);break;case 17:for(Re=3+Te(Ne,He),He+=3;Re-- >0;)Rt.push(0);break;case 18:for(Re=11+Pe(Ne,He),He+=7;Re-- >0;)Rt.push(0);break;default:Rt.push(at),ct<at&&(ct=at);break}var sr=Rt.slice(0,Be),Yt=Rt.slice(Be);for(Ge=Be;Ge<286;++Ge)sr[Ge]=0;for(Ge=xe;Ge<30;++Ge)Yt[Ge]=0;return At=fe(sr,et,286),qt=fe(Yt,ut,30),He}function Ye(Ne,He){if(Ne[0]==3&&!(Ne[1]&3))return[N0(He),2];for(var Be=0,xe=0,Ce=QI(He||1<<18),Re=0,tt=Ce.length>>>0,ht=0,ct=0;(xe&1)==0;){if(xe=Te(Ne,Be),Be+=3,xe>>>1)xe>>1==1?(ht=9,ct=5):(Be=Gt(Ne,Be),ht=At,ct=qt);else{Be&7&&(Be+=8-(Be&7));var xt=Ne[Be>>>3]|Ne[(Be>>>3)+1]<<8;if(Be+=32,xt>0)for(!He&&tt<Re+xt&&(Ce=Qe(Ce,Re+xt),tt=Ce.length);xt-- >0;)Ce[Re++]=Ne[Be>>>3],Be+=8;continue}for(;;){!He&&tt<Re+32767&&(Ce=Qe(Ce,Re+32767),tt=Ce.length);var ve=je(Ne,Be,ht),be=xe>>>1==1?_e[ve]:et[ve];if(Be+=be&15,be>>>=4,(be>>>8&255)===0)Ce[Re++]=be;else{if(be==256)break;be-=257;var Ge=be<8?0:be-4>>2;Ge>5&&(Ge=0);var at=Re+K[be];Ge>0&&(at+=je(Ne,Be,Ge),Be+=Ge),ve=je(Ne,Be,ct),be=xe>>>1==1?ze[ve]:ut[ve],Be+=be&15,be>>>=4;var yt=be<4?0:be-2>>1,wt=se[be];for(yt>0&&(wt+=je(Ne,Be,yt),Be+=yt),!He&&tt<at&&(Ce=Qe(Ce,at+100),tt=Ce.length);Re<at;)Ce[Re]=Ce[Re-wt],++Re}}}return He?[Ce,Be+7>>>3]:[Ce.slice(0,Re),Be+7>>>3]}function Et(Ne,He){var Be=Ne.slice(Ne.l||0),xe=Ye(Be,He);return Ne.l+=xe[1],xe[0]}function Cr(Ne,He){if(Ne)typeof console<"u"&&console.error(He);else throw new Error(He)}function tr(Ne,He){var Be=Ne;Po(Be,0);var xe=[],Ce=[],Re={FileIndex:xe,FullPaths:Ce};A(Re,{root:He.root});for(var tt=Be.length-4;(Be[tt]!=80||Be[tt+1]!=75||Be[tt+2]!=5||Be[tt+3]!=6)&&tt>=0;)--tt;Be.l=tt+4,Be.l+=4;var ht=Be.read_shift(2);Be.l+=6;var ct=Be.read_shift(4);for(Be.l=ct,tt=0;tt<ht;++tt){Be.l+=20;var xt=Be.read_shift(4),ve=Be.read_shift(4),be=Be.read_shift(2),Ge=Be.read_shift(2),at=Be.read_shift(2);Be.l+=8;var yt=Be.read_shift(4),wt=l(Be.slice(Be.l+be,Be.l+be+Ge));Be.l+=be+Ge+at;var Rt=Be.l;Be.l=yt+4,Or(Be,xt,ve,Re,wt),Be.l=Rt}return Re}function Or(Ne,He,Be,xe,Ce){Ne.l+=2;var Re=Ne.read_shift(2),tt=Ne.read_shift(2),ht=o(Ne);if(Re&8257)throw new Error("Unsupported ZIP encryption");for(var ct=Ne.read_shift(4),xt=Ne.read_shift(4),ve=Ne.read_shift(4),be=Ne.read_shift(2),Ge=Ne.read_shift(2),at="",yt=0;yt<be;++yt)at+=String.fromCharCode(Ne[Ne.l++]);if(Ge){var wt=l(Ne.slice(Ne.l,Ne.l+Ge));(wt[21589]||{}).mt&&(ht=wt[21589].mt),((Ce||{})[21589]||{}).mt&&(ht=Ce[21589].mt)}Ne.l+=Ge;var Rt=Ne.slice(Ne.l,Ne.l+xt);switch(tt){case 8:Rt=z(Ne,ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+tt)}var sr=!1;Re&8&&(ct=Ne.read_shift(4),ct==134695760&&(ct=Ne.read_shift(4),sr=!0),xt=Ne.read_shift(4),ve=Ne.read_shift(4)),xt!=He&&Cr(sr,"Bad compressed size: "+He+" != "+xt),ve!=Be&&Cr(sr,"Bad uncompressed size: "+Be+" != "+ve),Hr(xe,at,Rt,{unsafe:!0,mt:ht})}function pr(Ne,He){var Be=He||{},xe=[],Ce=[],Re=zt(1),tt=Be.compression?8:0,ht=0,ct=0,xt=0,ve=0,be=0,Ge=Ne.FullPaths[0],at=Ge,yt=Ne.FileIndex[0],wt=[],Rt=0;for(ct=1;ct<Ne.FullPaths.length;++ct)if(at=Ne.FullPaths[ct].slice(Ge.length),yt=Ne.FileIndex[ct],!(!yt.size||!yt.content||at=="Sh33tJ5")){var sr=ve,Yt=zt(at.length);for(xt=0;xt<at.length;++xt)Yt.write_shift(1,at.charCodeAt(xt)&127);Yt=Yt.slice(0,Yt.l),wt[be]=rce.buf(yt.content,0);var wr=yt.content;tt==8&&(wr=V(wr)),Re=zt(30),Re.write_shift(4,67324752),Re.write_shift(2,20),Re.write_shift(2,ht),Re.write_shift(2,tt),yt.mt?i(Re,yt.mt):Re.write_shift(4,0),Re.write_shift(-4,wt[be]),Re.write_shift(4,wr.length),Re.write_shift(4,yt.content.length),Re.write_shift(2,Yt.length),Re.write_shift(2,0),ve+=Re.length,xe.push(Re),ve+=Yt.length,xe.push(Yt),ve+=wr.length,xe.push(wr),Re=zt(46),Re.write_shift(4,33639248),Re.write_shift(2,0),Re.write_shift(2,20),Re.write_shift(2,ht),Re.write_shift(2,tt),Re.write_shift(4,0),Re.write_shift(-4,wt[be]),Re.write_shift(4,wr.length),Re.write_shift(4,yt.content.length),Re.write_shift(2,Yt.length),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(4,0),Re.write_shift(4,sr),Rt+=Re.l,Ce.push(Re),Rt+=Yt.length,Ce.push(Yt),++be}return Re=zt(22),Re.write_shift(4,101010256),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(2,be),Re.write_shift(2,be),Re.write_shift(4,Rt),Re.write_shift(4,ve),Re.write_shift(2,0),uo([uo(xe),uo(Ce),Re])}var rt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(Ne,He){if(Ne.ctype)return Ne.ctype;var Be=Ne.name||"",xe=Be.match(/\.([^\.]+)$/);return xe&&rt[xe[1]]||He&&(xe=(Be=He).match(/[\.\\]([^\.\\])+$/),xe&&rt[xe[1]])?rt[xe[1]]:"application/octet-stream"}function yr(Ne){for(var He=ig(Ne),Be=[],xe=0;xe<He.length;xe+=76)Be.push(He.slice(xe,xe+76));return Be.join(`\r
`)+`\r
`}function kr(Ne){var He=Ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xt){var ve=xt.charCodeAt(0).toString(16).toUpperCase();return"="+(ve.length==1?"0"+ve:ve)});He=He.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),He.charAt(0)==`
`&&(He="=0D"+He.slice(1)),He=He.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Be=[],xe=He.split(`\r
`),Ce=0;Ce<xe.length;++Ce){var Re=xe[Ce];if(Re.length==0){Be.push("");continue}for(var tt=0;tt<Re.length;){var ht=76,ct=Re.slice(tt,tt+ht);ct.charAt(ht-1)=="="?ht--:ct.charAt(ht-2)=="="?ht-=2:ct.charAt(ht-3)=="="&&(ht-=3),ct=Re.slice(tt,tt+ht),tt+=ht,tt<Re.length&&(ct+="="),Be.push(ct)}}return Be.join(`\r
`)}function Xr(Ne){for(var He=[],Be=0;Be<Ne.length;++Be){for(var xe=Ne[Be];Be<=Ne.length&&xe.charAt(xe.length-1)=="=";)xe=xe.slice(0,xe.length-1)+Ne[++Be];He.push(xe)}for(var Ce=0;Ce<He.length;++Ce)He[Ce]=He[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(Re){return String.fromCharCode(parseInt(Re.slice(1),16))});return Ac(He.join(`\r
`))}function Sr(Ne,He,Be){for(var xe="",Ce="",Re="",tt,ht=0;ht<10;++ht){var ct=He[ht];if(!ct||ct.match(/^\s*$/))break;var xt=ct.match(/^(.*?):\s*([^\s].*)$/);if(xt)switch(xt[1].toLowerCase()){case"content-location":xe=xt[2].trim();break;case"content-type":Re=xt[2].trim();break;case"content-transfer-encoding":Ce=xt[2].trim();break}}switch(++ht,Ce.toLowerCase()){case"base64":tt=Ac(Dc(He.slice(ht).join("")));break;case"quoted-printable":tt=Xr(He.slice(ht));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var ve=Hr(Ne,xe.slice(Be.length),tt,{unsafe:!0});Re&&(ve.ctype=Re)}function pn(Ne,He){if(X(Ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Be=He&&He.root||"",xe=(In&&Buffer.isBuffer(Ne)?Ne.toString("binary"):X(Ne)).split(`\r
`),Ce=0,Re="";for(Ce=0;Ce<xe.length;++Ce)if(Re=xe[Ce],!!/^Content-Location:/i.test(Re)&&(Re=Re.slice(Re.indexOf("file")),Be||(Be=Re.slice(0,Re.lastIndexOf("/")+1)),Re.slice(0,Be.length)!=Be))for(;Be.length>0&&(Be=Be.slice(0,Be.length-1),Be=Be.slice(0,Be.lastIndexOf("/")+1),Re.slice(0,Be.length)!=Be););var tt=(xe[1]||"").match(/boundary="(.*?)"/);if(!tt)throw new Error("MAD cannot find boundary");var ht="--"+(tt[1]||""),ct=[],xt=[],ve={FileIndex:ct,FullPaths:xt};A(ve);var be,Ge=0;for(Ce=0;Ce<xe.length;++Ce){var at=xe[Ce];at!==ht&&at!==ht+"--"||(Ge++&&Sr(ve,xe.slice(be,Ce),Be),be=Ce)}return ve}function rr(Ne,He){var Be=He||{},xe=Be.boundary||"SheetJS";xe="------="+xe;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+xe.slice(2)+'"',"","",""],Re=Ne.FullPaths[0],tt=Re,ht=Ne.FileIndex[0],ct=1;ct<Ne.FullPaths.length;++ct)if(tt=Ne.FullPaths[ct].slice(Re.length),ht=Ne.FileIndex[ct],!(!ht.size||!ht.content||tt=="Sh33tJ5")){tt=tt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Rt){return"_x"+Rt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Rt){return"_u"+Rt.charCodeAt(0).toString(16)+"_"});for(var xt=ht.content,ve=In&&Buffer.isBuffer(xt)?xt.toString("binary"):X(xt),be=0,Ge=Math.min(1024,ve.length),at=0,yt=0;yt<=Ge;++yt)(at=ve.charCodeAt(yt))>=32&&at<128&&++be;var wt=be>=Ge*4/5;Ce.push(xe),Ce.push("Content-Location: "+(Be.root||"file:///C:/SheetJS/")+tt),Ce.push("Content-Transfer-Encoding: "+(wt?"quoted-printable":"base64")),Ce.push("Content-Type: "+Dt(ht,tt)),Ce.push(""),Ce.push(wt?kr(ve):yr(ve))}return Ce.push(xe+`--\r
`),Ce.join(`\r
`)}function On(Ne){var He={};return A(He,Ne),He}function Hr(Ne,He,Be,xe){var Ce=xe&&xe.unsafe;Ce||A(Ne);var Re=!Ce&&Yr.find(Ne,He);if(!Re){var tt=Ne.FullPaths[0];He.slice(0,tt.length)==tt?tt=He:(tt.slice(-1)!="/"&&(tt+="/"),tt=(tt+He).replace("//","/")),Re={name:s(He),type:2},Ne.FileIndex.push(Re),Ne.FullPaths.push(tt),Ce||Yr.utils.cfb_gc(Ne)}return Re.content=Be,Re.size=Be?Be.length:0,xe&&(xe.CLSID&&(Re.clsid=xe.CLSID),xe.mt&&(Re.mt=xe.mt),xe.ct&&(Re.ct=xe.ct)),Re}function sn(Ne,He){A(Ne);var Be=Yr.find(Ne,He);if(Be){for(var xe=0;xe<Ne.FileIndex.length;++xe)if(Ne.FileIndex[xe]==Be)return Ne.FileIndex.splice(xe,1),Ne.FullPaths.splice(xe,1),!0}return!1}function jr(Ne,He,Be){A(Ne);var xe=Yr.find(Ne,He);if(xe){for(var Ce=0;Ce<Ne.FileIndex.length;++Ce)if(Ne.FileIndex[Ce]==xe)return Ne.FileIndex[Ce].name=s(Be),Ne.FullPaths[Ce]=Be,!0}return!1}function Gr(Ne){D(Ne,!0)}return t.find=T,t.read=E,t.parse=u,t.write=ee,t.writeFile=re,t.utils={cfb_new:On,cfb_add:Hr,cfb_del:sn,cfb_mov:jr,cfb_gc:Gr,ReadShift:cx,CheckField:yR,prep_blob:Po,bconcat:uo,use_zlib:O,_deflateRaw:Me,_inflateRaw:Et,consts:J},t})();function nce(e){return typeof e=="string"?wy(e):Array.isArray(e)?Ele(e):e}function Tg(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=wy(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Fu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([nce(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=L0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ace(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Ws(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function iD(e,t){for(var r=[],a=Ws(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function jy(e){for(var t=[],r=Ws(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function ky(e){for(var t=[],r=Ws(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function sce(e){for(var t=[],r=Ws(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Nb=new Date(1899,11,30,0,0,0);function zi(e,t){var r=e.getTime(),a=Nb.getTime()+(e.getTimezoneOffset()-Nb.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var ZM=new Date,ice=Nb.getTime()+(ZM.getTimezoneOffset()-Nb.getTimezoneOffset())*6e4,oD=ZM.getTimezoneOffset();function Sy(e){var t=new Date;return t.setTime(e*24*60*60*1e3+ice),t.getTimezoneOffset()!==oD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-oD)*6e4),t}function oce(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var lD=new Date("2017-02-19T19:06:09.000Z"),eR=isNaN(lD.getFullYear())?new Date("2/19/17"):lD,lce=eR.getFullYear()==2017;function us(e,t){var r=new Date(e);if(lce)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(eR.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Ph(e,t){if(In&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Fu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Fu(qM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Fu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Fu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function fs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=fs(e[r]));return t}function zs(e,t){for(var r="";r.length<t;)r+=e;return r}function iu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var cce=["january","february","march","april","may","june","july","august","september","october","november","december"];function np(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&cce.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var dce=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function tR(e){return e?e.content&&e.type?Ph(e.content,!0):e.data?Qp(e.data):e.asNodeBuffer&&In?Qp(e.asNodeBuffer().toString("binary")):e.asBinary?Qp(e.asBinary()):e._data&&e._data.getContent?Qp(Ph(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function rR(e){if(!e)return null;if(e.data)return YI(e.data);if(e.asNodeBuffer&&In)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?YI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function uce(e){return e&&e.name.slice(-4)===".bin"?rR(e):tR(e)}function id(e,t){for(var r=e.FullPaths||Ws(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function _3(e,t){var r=id(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function ji(e,t,r){if(!r)return uce(_3(e,t));if(!t)return null;try{return ji(e,t)}catch{return null}}function Ec(e,t,r){if(!r)return tR(_3(e,t));if(!t)return null;try{return Ec(e,t)}catch{return null}}function fce(e,t,r){return rR(_3(e,t))}function cD(e){for(var t=e.FullPaths||Ws(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function An(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return In?a=Rf(r):a=Tle(r),Yr.utils.cfb_add(e,t,a)}Yr.utils.cfb_add(e,t,r)}else e.file(t,r)}function C3(){return Yr.utils.cfb_new()}function nR(e,t){switch(t.type){case"base64":return Yr.read(e,{type:"base64"});case"binary":return Yr.read(e,{type:"binary"});case"buffer":case"array":return Yr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function ex(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var di=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,hce=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,dD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,mce=/<[^>]*>/g,ml=di.match(dD)?dD:mce,pce=/<\w*:/,xce=/<(\/?)\w+:/;function hn(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(hce),l=0,c="",d=0,u="",f="",p=1;if(o)for(d=0;d!=o.length;++d){for(f=o[d],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(p=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+p,f.length-p),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var m=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[m]&&u.slice(l-3,l)=="ext")continue;a[m]=c,a[m.toLowerCase()]=c}}return a}function Vu(e){return e.replace(xce,"<$1")}var aR={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},A3=jy(aR),oa=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return aR[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),E3=/[&<>'"]/g,gce=/[\u0000-\u0008\u000b-\u001f]/g;function Aa(e){var t=e+"";return t.replace(E3,function(r){return A3[r]}).replace(gce,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function uD(e){return Aa(e).replace(/ /g,"_x0020_")}var sR=/[\u0000-\u001f]/g;function T3(e){var t=e+"";return t.replace(E3,function(r){return A3[r]}).replace(/\n/g,"<br/>").replace(sR,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function vce(e){var t=e+"";return t.replace(E3,function(r){return A3[r]}).replace(sR,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var fD=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function bce(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ls(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Sj(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function hD(e){var t=N0(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function mD(e){return Rf(e,"binary").toString("utf8")}var Dv="foo bar baz",Ma=In&&(mD(Dv)==Sj(Dv)&&mD||hD(Dv)==Sj(Dv)&&hD)||Sj,Fu=In?function(e){return Rf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},lg=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),iR=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),yce=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),wce=/<\/?(?:vt:)?variant>/g,Nce=/<(?:vt:)([^>]*)>([\s\S]*)</;function pD(e,t){var r=hn(e),a=e.match(yce(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(wce,"").match(Nce);o&&s.push({v:Ma(o[2]),t:o[1]})}),s}var oR=/(^\s|\s$|\n)/;function Io(e,t){return"<"+e+(t.match(oR)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function cg(e){return Ws(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function mr(e,t,r){return"<"+e+(r!=null?cg(r):"")+(t!=null?(t.match(oR)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Pk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function jce(e,t){switch(typeof e){case"string":var r=mr("vt:lpwstr",Aa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return mr((e|0)==e?"vt:i4":"vt:r8",Aa(String(e)));case"boolean":return mr("vt:bool",e?"true":"false")}if(e instanceof Date)return mr("vt:filetime",Pk(e));throw new Error("Unable to serialize "+e)}function O3(e){if(In&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ma(L0(j3(e)));throw new Error("Bad input format: expected Buffer or string")}var dg=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ui={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},$h=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Sc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function kce(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function Sce(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var xD=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},gD=In?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Rf(t)})):xD(e)}:xD,vD=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(yf(e,s)));return a.join("").replace(El,"")},P3=In?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(El,""):vD(e,t,r)}:vD,bD=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},lR=In?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):bD(e,t,r)}:bD,yD=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(hm(e,s)));return a.join("")},Og=In?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):yD(t,r,a)}:yD,cR=function(e,t){var r=_c(e,t);return r>0?Og(e,t+4,t+4+r-1):""},dR=cR,uR=function(e,t){var r=_c(e,t);return r>0?Og(e,t+4,t+4+r-1):""},fR=uR,hR=function(e,t){var r=2*_c(e,t);return r>0?Og(e,t+4,t+4+r-1):""},mR=hR,pR=function(t,r){var a=_c(t,r);return a>0?P3(t,r+4,r+4+a):""},xR=pR,gR=function(e,t){var r=_c(e,t);return r>0?Og(e,t+4,t+4+r):""},vR=gR,bR=function(e,t){return kce(e,t)},jb=bR,I3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};In&&(dR=function(t,r){if(!Buffer.isBuffer(t))return cR(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},fR=function(t,r){if(!Buffer.isBuffer(t))return uR(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},mR=function(t,r){if(!Buffer.isBuffer(t))return hR(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},xR=function(t,r){if(!Buffer.isBuffer(t))return pR(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},vR=function(t,r){if(!Buffer.isBuffer(t))return gR(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},jb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):bR(t,r)},I3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var hm=function(e,t){return e[t]},yf=function(e,t){return e[t+1]*256+e[t]},_ce=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},_c=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},nh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Cce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function cx(e,t){var r="",a,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,In&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(yf(this,d)),d+=2;e*=2;break;case"utf8":r=Og(this,this.l,this.l+e);break;case"utf16le":e*=2,r=P3(this,this.l,this.l+e);break;case"wstr":return cx.call(this,e,"dbcs");case"lpstr-ansi":r=dR(this,this.l),e=4+_c(this,this.l);break;case"lpstr-cp":r=fR(this,this.l),e=4+_c(this,this.l);break;case"lpwstr":r=mR(this,this.l),e=4+2*_c(this,this.l);break;case"lpp4":e=4+_c(this,this.l),r=xR(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+_c(this,this.l),r=vR(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=hm(this,this.l+e++))!==0;)i.push(Iv(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=yf(this,this.l+e))!==0;)i.push(Iv(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=hm(this,d),this.l=d+1,l=cx.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Iv(yf(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=hm(this,d),this.l=d+1,l=cx.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Iv(hm(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=hm(this,this.l),this.l++,a;case 2:return a=(t==="i"?_ce:yf)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?nh:Cce)(this,this.l),this.l+=4,a):(s=_c(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=jb(this,this.l):s=jb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=lR(this,this.l,e);break}}return this.l+=e,r}var Ace=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Ece=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Tce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Oce(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Tce(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Ace(this,t,this.l);break;case 8:if(a=8,r==="f"){Sce(this,t,this.l);break}case 16:break;case-4:a=4,Ece(this,t,this.l);break}return this.l+=a,this}function yR(e,t){var r=lR(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Po(e,t){e.l=t,e.read_shift=cx,e.chk=yR,e.write_shift=Oce}function hl(e,t){e.l+=t}function zt(e){var t=N0(e);return Po(t,0),t}function Bf(e,t,r){if(e){var a,s,i;Po(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=xg[l]||xg[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function nc(){var e=[],t=In?256:2048,r=function(d){var u=zt(d);return Po(u,0),u},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(s(),a=r(Math.max(d+1,t)))},o=function(){return s(),uo(e)},l=function(d){s(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Jt(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=xg[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&I3(r)&&e.push(r)}}function dx(e,t,r){var a=fs(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function wD(e,t,r){var a=fs(e);return a.s=dx(a.s,t.s,r),a.e=dx(a.e,t.s,r),a}function ux(e,t){if(e.cRel&&e.c<0)for(e=fs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=fs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=un(e);return!e.cRel&&e.cRel!=null&&(r=Dce(r)),!e.rRel&&e.rRel!=null&&(r=Pce(r)),r}function _j(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ds(e.s.c)+":"+(e.e.cRel?"":"$")+Ds(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+li(e.s.r)+":"+(e.e.rRel?"":"$")+li(e.e.r):ux(e.s,t.biff)+":"+ux(e.e,t.biff)}function D3(e){return parseInt(Ice(e),10)-1}function li(e){return""+(e+1)}function Pce(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Ice(e){return e.replace(/\$(\d+)$/,"$1")}function L3(e){for(var t=Lce(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Ds(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Dce(e){return e.replace(/^([A-Z])/,"$$$1")}function Lce(e){return e.replace(/^\$([A-Z])/,"$1")}function Fce(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ls(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function un(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function sc(e){var t=e.indexOf(":");return t==-1?{s:Ls(e),e:Ls(e)}:{s:Ls(e.slice(0,t)),e:Ls(e.slice(t+1))}}function kn(e,t){return typeof t>"u"||typeof t=="number"?kn(e.s,e.e):(typeof e!="string"&&(e=un(e)),typeof t!="string"&&(t=un(t)),e==t?e:e+":"+t)}function ca(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function ND(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=bd(e.z,r?zi(t):t)}catch{}try{return e.w=bd((e.XF||{}).numFmtId||(r?14:0),r?zi(t):t)}catch{return""+t}}function Df(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Uf[e.v]||e.v:t==null?ND(e,e.v):ND(e,t))}function F0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function wR(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Ls(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=ca(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var m={v:t[f][p]},b=o+f,v=l+p;if(d.s.r>b&&(d.s.r=b),d.s.c>v&&(d.s.c=v),d.e.r<b&&(d.e.r=b),d.e.c<v&&(d.e.c=v),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))m=t[f][p];else if(Array.isArray(m.v)&&(m.f=t[f][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else if(a.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=a.dateNF||an[14],a.cellDates?(m.t="d",m.w=bd(m.z,zi(m.v))):(m.t="n",m.v=zi(m.v),m.w=bd(m.z,m.v))):m.t="s";if(s)i[b]||(i[b]=[]),i[b][v]&&i[b][v].z&&(m.z=i[b][v].z),i[b][v]=m;else{var g=un({c:v,r:b});i[g]&&i[g].z&&(m.z=i[g].z),i[g]=m}}}return d.s.c<1e7&&(i["!ref"]=kn(d)),i}function vp(e,t){return wR(null,e,t)}function Mce(e){return e.read_shift(4,"i")}function ou(e,t){return t||(t=zt(4)),t.write_shift(4,e),t}function fl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ho(e,t){var r=!1;return t==null&&(r=!0,t=zt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Rce(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Bce(e,t){return t||(t=zt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function F3(e,t){var r=e.l,a=e.read_shift(1),s=fl(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Rce(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Uce(e,t){var r=!1;return t==null&&(r=!0,t=zt(15+4*e.t.length)),t.write_shift(1,0),ho(e.t,t),r?t.slice(0,t.l):t}var qce=F3;function $ce(e,t){var r=!1;return t==null&&(r=!0,t=zt(23+4*e.t.length)),t.write_shift(1,1),ho(e.t,t),t.write_shift(4,1),Bce({},t),r?t.slice(0,t.l):t}function Nd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function zh(e,t){return t==null&&(t=zt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Hh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Wh(e,t){return t==null&&(t=zt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var zce=fl,NR=ho;function M3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function kb(e,t){var r=!1;return t==null&&(r=!0,t=zt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Hce=fl,Ik=M3,R3=kb;function B3(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?jb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):nh(t,0)>>2;return r?s/100:s}function jR(e,t){t==null&&(t=zt(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function kR(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Wce(e,t){return t||(t=zt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Vh=kR,bp=Wce;function cl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ih(e,t){return(t||zt(8)).write_shift(8,e,"f")}function Vce(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var d=gh[s];d&&(t.rgb=fg(d));break;case 2:t.rgb=fg([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Sb(e,t){if(t||(t=zt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Gce(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Kce(e,t){t||(t=zt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function SR(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Xce(e){return SR(e,1)}function Yce(e){return SR(e,2)}var U3=2,ec=3,Lv=11,jD=12,_b=19,Fv=64,Jce=65,Qce=71,Zce=4108,ede=4126,lo=80,_R=81,tde=[lo,_R],Dk={1:{n:"CodePage",t:U3},2:{n:"Category",t:lo},3:{n:"PresentationFormat",t:lo},4:{n:"ByteCount",t:ec},5:{n:"LineCount",t:ec},6:{n:"ParagraphCount",t:ec},7:{n:"SlideCount",t:ec},8:{n:"NoteCount",t:ec},9:{n:"HiddenCount",t:ec},10:{n:"MultimediaClipCount",t:ec},11:{n:"ScaleCrop",t:Lv},12:{n:"HeadingPairs",t:Zce},13:{n:"TitlesOfParts",t:ede},14:{n:"Manager",t:lo},15:{n:"Company",t:lo},16:{n:"LinksUpToDate",t:Lv},17:{n:"CharacterCount",t:ec},19:{n:"SharedDoc",t:Lv},22:{n:"HyperlinksChanged",t:Lv},23:{n:"AppVersion",t:ec,p:"version"},24:{n:"DigSig",t:Jce},26:{n:"ContentType",t:lo},27:{n:"ContentStatus",t:lo},28:{n:"Language",t:lo},29:{n:"Version",t:lo},255:{},2147483648:{n:"Locale",t:_b},2147483651:{n:"Behavior",t:_b},1919054434:{}},Lk={1:{n:"CodePage",t:U3},2:{n:"Title",t:lo},3:{n:"Subject",t:lo},4:{n:"Author",t:lo},5:{n:"Keywords",t:lo},6:{n:"Comments",t:lo},7:{n:"Template",t:lo},8:{n:"LastAuthor",t:lo},9:{n:"RevNumber",t:lo},10:{n:"EditTime",t:Fv},11:{n:"LastPrinted",t:Fv},12:{n:"CreatedDate",t:Fv},13:{n:"ModifiedDate",t:Fv},14:{n:"PageCount",t:ec},15:{n:"WordCount",t:ec},16:{n:"CharCount",t:ec},17:{n:"Thumbnail",t:Qce},18:{n:"Application",t:lo},19:{n:"DocSecurity",t:ec},255:{},2147483648:{n:"Locale",t:_b},2147483651:{n:"Behavior",t:_b},1919054434:{}},kD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},rde=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function nde(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ade=nde([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),gh=fs(ade),Uf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},CR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Fk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Mv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function q3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function sde(e){var t=q3();if(!e||!e.match)return t;var r={};if((e.match(ml)||[]).forEach(function(a){var s=hn(a);switch(s[0].replace(pce,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Fk[s.ContentType]]!==void 0&&t[Fk[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Ui.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function AR(e,t){var r=sce(Fk),a=[],s;a[a.length]=di,a[a.length]=mr("Types",null,{xmlns:Ui.CT,"xmlns:xsd":Ui.xsd,"xmlns:xsi":Ui.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return mr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=mr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Mv[c][t.bookType]||Mv[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=mr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Mv[c][t.bookType]||Mv[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=mr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Bn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ug(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function fx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(ml)||[]).forEach(function(s){var i=hn(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:ex(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function _m(e){var t=[di,mr("Relationships",null,{xmlns:Ui.RELS})];return Ws(e["!id"]).forEach(function(r){t[t.length]=mr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ca(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[Bn.HLINK,Bn.XPATH,Bn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var ide="application/vnd.oasis.opendocument.spreadsheet";function ode(e,t){for(var r=O3(e),a,s;a=dg.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=hn(a[0],!1),s.path=="/"&&s.type!==ide)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function lde(e){var t=[di];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function SD(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function cde(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function dde(e){var t=[di];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(SD(e[r][0],e[r][1])),t.push(cde("",e[r][0]));return t.push(SD("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function ER(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+vb.version+"</meta:generator></office:meta></office:document-meta>"}var pd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ude=(function(){for(var e=new Array(pd.length),t=0;t<pd.length;++t){var r=pd[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function TR(e){var t={};e=Ma(e);for(var r=0;r<pd.length;++r){var a=pd[r],s=e.match(ude[r]);s!=null&&s.length>0&&(t[a[1]]=oa(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=us(t[a[1]]))}return t}function Cj(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Aa(t),a[a.length]=r?mr(e,t,r):Io(e,t))}function OR(e,t){var r=t||{},a=[di,mr("cp:coreProperties",null,{"xmlns:cp":Ui.CORE_PROPS,"xmlns:dc":Ui.dc,"xmlns:dcterms":Ui.dcterms,"xmlns:dcmitype":Ui.dcmitype,"xmlns:xsi":Ui.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Cj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Pk(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&Cj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Pk(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=pd.length;++i){var o=pd[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Cj(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var vh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function IR(e,t,r,a){var s=[];if(typeof e=="string")s=pD(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?pD(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function fde(e,t,r){var a={};return t||(t={}),e=Ma(e),vh.forEach(function(s){var i=(e.match(lg(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=oa(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&IR(a.HeadingPairs,a.TitlesOfParts,t,r),t}function DR(e){var t=[],r=mr;return e||(e={}),e.Application="SheetJS",t[t.length]=di,t[t.length]=mr("Properties",null,{xmlns:Ui.EXT_PROPS,"xmlns:vt":Ui.vt}),vh.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Aa(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Aa(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var hde=/<[^>]+>[^<]*/g;function mde(e,t){var r={},a="",s=e.match(hde);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=hn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=oa(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=oa(u);break;case"bool":r[a]=ls(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=us(u);break;case"cy":case"error":r[a]=oa(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function LR(e){var t=[di,mr("Properties",null,{xmlns:Ui.CUST_PROPS,"xmlns:vt":Ui.vt})];if(!e)return t.join("");var r=1;return Ws(e).forEach(function(s){++r,t[t.length]=mr("property",jce(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Aa(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Mk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Aj;function pde(e,t,r){Aj||(Aj=jy(Mk)),t=Aj[t]||t,e[t]=r}function xde(e,t){var r=[];return Ws(Mk).map(function(a){for(var s=0;s<pd.length;++s)if(pd[s][1]==a)return pd[s];for(s=0;s<vh.length;++s)if(vh[s][1]==a)return vh[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];a[2]==="date"&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Io(Mk[a[1]]||a[1],s))}}),mr("DocumentProperties",r.join(""),{xmlns:Sc.o})}function gde(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&Ws(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<pd.length;++o)if(i==pd[o][1])return;for(o=0;o<vh.length;++o)if(i==vh[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(mr(uD(i),l,{"dt:dt":c}))}}),t&&Ws(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(mr(uD(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Sc.o+'">'+s.join("")+"</"+a+">"}function $3(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function vde(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=zt(8);return o.write_shift(4,a),o.write_shift(4,s),o}function FR(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function MR(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function RR(e,t,r){return t===31?MR(e):FR(e,t,r)}function Rk(e,t,r){return RR(e,t,r===!1?0:4)}function bde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return RR(e,t,0)}function yde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(El,""),e.l-s&2&&(e.l+=2)}return r}function wde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(El,"");return r}function Nde(e){var t=e.l,r=Cb(e,_R);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=Cb(e,ec);return[r,a]}function jde(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(Nde(e));return r}function _D(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(El,"").replace(Zp,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function BR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function kde(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Cb(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==jD&&a!==t&&tde.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===jD?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return FR(e,a,4).replace(El,"");case 31:return MR(e);case 64:return $3(e);case 65:return BR(e);case 71:return kde(e);case 80:return Rk(e,a,!i.raw).replace(El,"");case 81:return bde(e,a).replace(El,"");case 4108:return jde(e);case 4126:case 4127:return a==4127?yde(e):wde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function CD(e,t){var r=zt(4),a=zt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=zt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=vde(t);break;case 31:case 80:for(a=zt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return uo([r,a])}function AD(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),f=e.read_shift(4);i[o]=[u,f+r]}i.sort(function(y,j){return y[1]-j[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var m=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(m=!1,e.l=i[o][1]),m)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var b=t[i[o][0]];if(p[b.n]=Cb(e,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:eu(l=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(i[o][0]===1){if(l=p.CodePage=Cb(e,U3),eu(l),c!==-1){var v=e.l;e.l=i[c][1],d=_D(e,l),e.l=v}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=_D(e,l)}else{var g=d[i[o][0]],w;switch(e[e.l]){case 65:e.l+=4,w=BR(e);break;case 30:e.l+=4,w=Rk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=Rk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=ri(e,4);break;case 64:e.l+=4,w=us($3(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[g]=w}}return e.l=r+a,p}var UR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Sde(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function ED(e,t,r){var a=zt(8),s=[],i=[],o=8,l=0,c=zt(8),d=zt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=zt(8),d.write_shift(4,0),s.unshift(d);var u=[zt(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=zt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=uo(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(UR.indexOf(e[l][0])>-1||PR.indexOf(e[l][0])>-1)&&e[l][1]!=null){var p=e[l][1],m=0;if(t){m=+t[e[l][0]];var b=r[m];if(b.p=="version"&&typeof p=="string"){var v=p.split(".");p=(+v[0]<<16)+(+v[1]||0)}c=CD(b.t,p)}else{var g=Sde(p);g==-1&&(g=31,p=String(p)),c=CD(g,p)}i.push(c),d=zt(8),d.write_shift(4,t?m:2+l),s.push(d),o+=8+c.length}var w=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,w),w+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),uo([a].concat(s).concat(i))}function TD(e,t,r){var a=e.content;if(!a)return{};Po(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==Yr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=AD(a,t),p={SystemIdentifier:d};for(var m in f)p[m]=f[m];if(p.FMTID=i,s===1)return p;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var b;try{b=AD(a,null)}catch{}for(m in b)p[m]=b[m];return p.FMTID=[i,o],p}function OD(e,t,r,a,s,i){var o=zt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Yr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=ED(e,r,a);if(l.push(c),s){var d=ED(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return uo(l)}function a0(e,t){return e.read_shift(t),null}function _de(e,t){t||(t=zt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Cde(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function ri(e,t){return e.read_shift(t)===1}function Sl(e,t){return t||(t=zt(2)),t.write_shift(2,+!!e),t}function ki(e){return e.read_shift(2,"u")}function od(e,t){return t||(t=zt(2)),t.write_shift(2,e),t}function qR(e,t){return Cde(e,t,ki)}function Ade(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function $R(e,t,r){return r||(r=zt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Pg(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function Ede(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),a&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Tde(e){var t=e.t||"",r=zt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=zt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return uo(s)}function Dh(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Ig(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Dh(e,a,r)}function Gh(e,t,r){if(r.biff>5)return Ig(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function zR(e,t,r){return r||(r=zt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Ode(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Pde(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(El,"");return a&&(e.l+=24),s}function Ide(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(El,"");return r+o}function Dde(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Pde(e);case"0303000000000000c000000000000046":return Ide(e);default:throw new Error("Unsupported Moniker "+r)}}function Rv(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(El,""):"";return r}function PD(e,t){t||(t=zt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Lde(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,f;s&16&&(i=Rv(e,r-e.l)),s&128&&(o=Rv(e,r-e.l)),(s&257)===257&&(l=Rv(e,r-e.l)),(s&257)===1&&(c=Dde(e,r-e.l)),s&8&&(d=Rv(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(f=$3(e)),e.l=r;var p=o||l||c||"";p&&d&&(p+="#"+d),p||(p="#"+d),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return u&&(m.guid=u),f&&(m.time=f),i&&(m.Tooltip=i),m}function Fde(e){var t=zt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),PD(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&PD(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function HR(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function WR(e,t){var r=HR(e);return r[3]=0,r}function Gu(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Lh(e,t,r,a){return a||(a=zt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Mde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Rde(e,t,r){return t===0?"":Gh(e,t,r)}function Bde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function VR(e){var t=e.read_shift(2),r=B3(e);return[t,r]}function Ude(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Pg(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function _y(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function GR(e,t){return t||(t=zt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function KR(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var qde=KR;function XR(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function $de(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function zde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Qo(e){e.l+=2,e.l+=e.read_shift(2)}var Hde={0:Qo,4:Qo,5:Qo,6:Qo,7:zde,8:Qo,9:Qo,10:Qo,11:Qo,12:Qo,13:$de,14:Qo,15:Qo,16:Qo,17:Qo,18:Qo,19:Qo,20:Qo,21:XR};function Wde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Hde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function Bv(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function z3(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=zt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Vde(e,t){return t===0||e.read_shift(2),1200}function Gde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=Gh(e,0,r);return e.read_shift(t+a-e.l),s}function Kde(e,t){var r=!t||t.biff==8,a=zt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Xde(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Yde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Pg(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function Jde(e,t){var r=!t||t.biff>=8?2:1,a=zt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function Qde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Ede(e));return i.Count=a,i.Unique=s,i}function Zde(e,t){var r=zt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=Tde(e[s]);var i=uo([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function eue(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function tue(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function rue(e){var t=Mde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function nue(e){return e.read_shift(2),e.read_shift(4)}function ID(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function aue(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function sue(){var e=zt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function iue(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function oue(e){var t=zt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function lue(){}function cue(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Pg(e,0,r),a}function due(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=zt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function uue(e){var t=Gu(e);return t.isst=e.read_shift(4),t}function fue(e,t,r,a){var s=zt(10);return Lh(e,t,a,s),s.write_shift(4,r),s}function hue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=Gu(e);r.biff==2&&e.l++;var i=Ig(e,a-e.l,r);return s.val=i,s}function mue(e,t,r,a,s){var i=!s||s.biff==8,o=zt(8+ +i+(1+i)*r.length);return Lh(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function pue(e,t,r){var a=e.read_shift(2),s=Gh(e,0,r);return[a,s]}function xue(e,t,r,a){var s=r&&r.biff==5;a||(a=zt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var gue=Gh;function DD(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function vue(e,t){var r=t.biff==8||!t.biff?4:2,a=zt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function bue(e){var t=e.read_shift(2),r=e.read_shift(2),a=VR(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function yue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(VR(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function wue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function Nue(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=rde[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function jue(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=Nue(e,t,a.fStyle,r),a}function LD(e,t,r,a){var s=r&&r.biff==5;a||(a=zt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function kue(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Sue(e){var t=zt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function FD(e,t,r){var a=Gu(e);(r.biff==2||t==9)&&++e.l;var s=Ade(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function _ue(e,t,r,a,s,i){var o=zt(8);return Lh(e,t,a,o),$R(r,i,o),o}function Cue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=Gu(e),s=cl(e);return a.val=s,a}function Aue(e,t,r,a){var s=zt(14);return Lh(e,t,a,s),Ih(r,s),s}var MD=Rde;function Eue(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Dh(e,i),l=[];a>e.l;)l.push(Ig(e));return[i,s,o,l]}function RD(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Ude(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Tue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function BD(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Dh(e,o,r);s&32&&(d=Tue[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var f=a==e.l||l===0||!(u>0)?[]:Wme(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:f}}function YR(e,t,r){if(r.biff<8)return Oue(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Bde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Oue(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Pg(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function Pue(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Dh(e,a,r),o=Dh(e,s,r);return[i,o]}function Iue(e,t,r){var a=KR(e);e.l++;var s=e.read_shift(1);return t-=8,[Vme(e,t,r),s,a]}function UD(e,t,r){var a=qde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,zme(e,t,r)]}function Due(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Lue(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Gh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function Fue(e,t,r){return Lue(e,t,r)}function Mue(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(_y(e));return r}function Rue(e){var t=zt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)GR(e[r],t);return t}function Bue(e,t,r){if(r&&r.biff<8)return que(e,t,r);var a=XR(e),s=Wde(e,t-22,a[1]);return{cmo:a,ft:s}}var Uue={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function que(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Uue[a]||hl)(e,t,r)),{cmo:[s,a,i],ft:o}}function $ue(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Ode(e,6,r);var l=e.read_shift(2);e.read_shift(2),ki(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],f=Dh(e,e.lens[d+1]-e.lens[d]-1);if(s+=f,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function zue(e,t){var r=_y(e);e.l+=16;var a=Lde(e,t-24);return[r,a]}function Hue(e){var t=zt(24),r=Ls(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return uo([t,Fde(e[1])])}function Wue(e,t){e.read_shift(2);var r=_y(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(El,""),[r,a]}function Vue(e){var t=e[1].Tooltip,r=zt(10+2*(t.length+1));r.write_shift(2,2048);var a=Ls(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Gue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=kD[r]||r,r=e.read_shift(2),t[1]=kD[r]||r,t}function Kue(e){return e||(e=zt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Xue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(WR(e));return r}function Yue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(WR(e));return r}function Jue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function JR(e,t,r){if(!r.cellStyles)return hl(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Que(e,t){var r=zt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Zue(e,t){var r={};return t<32||(e.l+=16,r.header=cl(e),r.footer=cl(e),e.l+=2),r}function efe(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function tfe(e){for(var t=zt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var rfe=Gu,nfe=qR,afe=Ig;function sfe(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function ife(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=Gu(e);++e.l;var s=Gh(e,t-7,r);return a.t="str",a.val=s,a}function ofe(e){var t=Gu(e);++e.l;var r=cl(e);return t.t="n",t.val=r,t}function lfe(e,t,r){var a=zt(15);return Mg(a,e,t),a.write_shift(8,r,"f"),a}function cfe(e){var t=Gu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function dfe(e,t,r){var a=zt(9);return Mg(a,e,t),a.write_shift(2,r),a}function ufe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function ffe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function hfe(e,t,r){var a=e.l+t,s=Gu(e),i=e.read_shift(2),o=Dh(e,i,r);return e.l=a,s.t="str",s.val=o,s}var mfe=[2,3,48,49,131,139,140,245],Bk=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=jy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=N0(1);switch(c.type){case"base64":u=Ac(Dc(l));break;case"binary":u=Ac(l);break;case"buffer":case"array":u=l;break}Po(u,0);var f=u.read_shift(1),p=!!(f&136),m=!1,b=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,g=521;f==2&&(v=u.read_shift(2)),u.l+=3,f!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(g=u.read_shift(2));var w=u.read_shift(2),y=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(y=e[u[u.l]]),u.l+=1,u.l+=2),b&&(u.l+=36);for(var j=[],N={},S=Math.min(u.length,f==2?521:g-10-(m?264:0)),E=b?32:11;u.l<S&&u[u.l]!=13;)switch(N={},N.name=sg.utils.decode(y,u.slice(u.l,u.l+E)).replace(/[\u0000\r\n].*$/g,""),u.l+=E,N.type=String.fromCharCode(u.read_shift(1)),f!=2&&!b&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),f==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&j.push(N),f!=2&&(u.l+=b?13:14),N.type){case"B":(!m||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var A=0,P=0;for(d[0]=[],P=0;P!=j.length;++P)d[0][P]=j[P].name;for(;v-- >0;){if(u[u.l]===42){u.l+=w;continue}for(++u.l,d[++A]=[],P=0,P=0;P!=j.length;++P){var D=u.slice(u.l,u.l+j[P].len);u.l+=j[P].len,Po(D,0);var R=sg.utils.decode(y,D);switch(j[P].type){case"C":R.trim().length&&(d[A][P]=R.replace(/\s+$/,""));break;case"D":R.length===8?d[A][P]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):d[A][P]=R;break;case"F":d[A][P]=parseFloat(R.trim());break;case"+":case"I":d[A][P]=b?D.read_shift(-4,"i")^2147483648:D.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":d[A][P]=!0;break;case"N":case"F":d[A][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));d[A][P]="##MEMO##"+(b?parseInt(R.trim(),10):D.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(d[A][P]=+R||0);break;case"@":d[A][P]=new Date(D.read_shift(-8,"f")-621356832e5);break;case"T":d[A][P]=new Date((D.read_shift(4)-2440588)*864e5+D.read_shift(4));break;case"Y":d[A][P]=D.read_shift(4,"i")/1e4+D.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[A][P]=-D.read_shift(-8,"f");break;case"B":if(m&&j[P].len==8){d[A][P]=D.read_shift(8,"f");break}case"G":case"P":D.l+=j[P].len;break;case"0":if(j[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[P].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=vp(r(l,d),d);return u["!cols"]=d.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete d.DBF,u}function s(l,c){try{return F0(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&eu(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=nc(),f=Ob(l,{header:1,raw:!0,cellDates:!0}),p=f[0],m=f.slice(1),b=l["!cols"]||[],v=0,g=0,w=0,y=1;for(v=0;v<p.length;++v){if(((b[v]||{}).DBF||{}).name){p[v]=b[v].DBF.name,++w;continue}if(p[v]!=null){if(++w,typeof p[v]=="number"&&(p[v]=p[v].toString(10)),typeof p[v]!="string")throw new Error("DBF Invalid column name "+p[v]+" |"+typeof p[v]+"|");if(p.indexOf(p[v])!==v){for(g=0;g<1024;++g)if(p.indexOf(p[v]+"_"+g)==-1){p[v]+="_"+g;break}}}}var j=ca(l["!ref"]),N=[],S=[],E=[];for(v=0;v<=j.e.c-j.s.c;++v){var A="",P="",D=0,R=[];for(g=0;g<m.length;++g)m[g][v]!=null&&R.push(m[g][v]);if(R.length==0||p[v]==null){N[v]="?";continue}for(g=0;g<R.length;++g){switch(typeof R[g]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=R[g]instanceof Date?"D":"C";break;default:P="C"}D=Math.max(D,String(R[g]).length),A=A&&A!=P?"C":P}D>250&&(D=250),P=((b[v]||{}).DBF||{}).type,P=="C"&&b[v].DBF.len>D&&(D=b[v].DBF.len),A=="B"&&P=="N"&&(A="N",E[v]=b[v].DBF.dec,D=b[v].DBF.len),S[v]=A=="C"||P=="N"?D:i[A]||0,y+=S[v],N[v]=A}var T=u.next(32);for(T.write_shift(4,318902576),T.write_shift(4,m.length),T.write_shift(2,296+32*w),T.write_shift(2,y),v=0;v<4;++v)T.write_shift(4,0);for(T.write_shift(4,0|(+t[UM]||3)<<8),v=0,g=0;v<p.length;++v)if(p[v]!=null){var _=u.next(32),B=(p[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);_.write_shift(1,B,"sbcs"),_.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),_.write_shift(4,g),_.write_shift(1,S[v]||i[N[v]]||0),_.write_shift(1,E[v]||0),_.write_shift(1,2),_.write_shift(4,0),_.write_shift(1,0),_.write_shift(4,0),_.write_shift(4,0),g+=S[v]||i[N[v]]||0}var U=u.next(264);for(U.write_shift(4,13),v=0;v<65;++v)U.write_shift(4,0);for(v=0;v<m.length;++v){var H=u.next(y);for(H.write_shift(1,0),g=0;g<p.length;++g)if(p[g]!=null)switch(N[g]){case"L":H.write_shift(1,m[v][g]==null?63:m[v][g]?84:70);break;case"B":H.write_shift(8,m[v][g]||0,"f");break;case"N":var Y="0";for(typeof m[v][g]=="number"&&(Y=m[v][g].toFixed(E[g]||0)),w=0;w<S[g]-Y.length;++w)H.write_shift(1,32);H.write_shift(1,Y,"sbcs");break;case"D":m[v][g]?(H.write_shift(4,("0000"+m[v][g].getFullYear()).slice(-4),"sbcs"),H.write_shift(2,("00"+(m[v][g].getMonth()+1)).slice(-2),"sbcs"),H.write_shift(2,("00"+m[v][g].getDate()).slice(-2),"sbcs")):H.write_shift(8,"00000000","sbcs");break;case"C":var J=String(m[v][g]!=null?m[v][g]:"").slice(0,S[g]);for(H.write_shift(1,J,"sbcs"),w=0;w<S[g]-J.length;++w)H.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}})(),QR=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ws(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var b=e[m];return typeof b=="number"?JI(b):b},a=function(p,m,b){var v=m.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return v==59?p:JI(v)};e["|"]=254;function s(p,m){switch(m.type){case"base64":return i(Dc(p),m);case"binary":return i(p,m);case"buffer":return i(In&&Buffer.isBuffer(p)?p.toString("binary"):L0(p),m);case"array":return i(Ph(p),m)}throw new Error("Unrecognized type "+m.type)}function i(p,m){var b=p.split(/[\n\r]+/),v=-1,g=-1,w=0,y=0,j=[],N=[],S=null,E={},A=[],P=[],D=[],R=0,T;for(+m.codepage>=0&&eu(+m.codepage);w!==b.length;++w){R=0;var _=b[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),B=_.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),U=B[0],H;if(_.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":B[1].charAt(0)=="P"&&N.push(_.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,J=!1,re=!1,X=!1,ee=-1,W=-1;for(y=1;y<B.length;++y)switch(B[y].charAt(0)){case"A":break;case"X":g=parseInt(B[y].slice(1))-1,J=!0;break;case"Y":for(v=parseInt(B[y].slice(1))-1,J||(g=0),T=j.length;T<=v;++T)j[T]=[];break;case"K":H=B[y].slice(1),H.charAt(0)==='"'?H=H.slice(1,H.length-1):H==="TRUE"?H=!0:H==="FALSE"?H=!1:isNaN(iu(H))?isNaN(np(H).getDate())||(H=us(H)):(H=iu(H),S!==null&&xp(S)&&(H=Sy(H))),Y=!0;break;case"E":X=!0;var O=Cm(B[y].slice(1),{r:v,c:g});j[v][g]=[j[v][g],O];break;case"S":re=!0,j[v][g]=[j[v][g],"S5S"];break;case"G":break;case"R":ee=parseInt(B[y].slice(1))-1;break;case"C":W=parseInt(B[y].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+_)}if(Y&&(j[v][g]&&j[v][g].length==2?j[v][g][0]=H:j[v][g]=H,S=null),re){if(X)throw new Error("SYLK shared formula cannot have own formula");var z=ee>-1&&j[ee][W];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");j[v][g][1]=x9(z[1],{r:v-ee,c:g-W})}break;case"F":var V=0;for(y=1;y<B.length;++y)switch(B[y].charAt(0)){case"X":g=parseInt(B[y].slice(1))-1,++V;break;case"Y":for(v=parseInt(B[y].slice(1))-1,T=j.length;T<=v;++T)j[T]=[];break;case"M":R=parseInt(B[y].slice(1))/20;break;case"F":break;case"G":break;case"P":S=N[parseInt(B[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(D=B[y].slice(1).split(" "),T=parseInt(D[0],10);T<=parseInt(D[1],10);++T)R=parseInt(D[2],10),P[T-1]=R===0?{hidden:!0}:{wch:R},j0(P[T-1]);break;case"C":g=parseInt(B[y].slice(1))-1,P[g]||(P[g]={});break;case"R":v=parseInt(B[y].slice(1))-1,A[v]||(A[v]={}),R>0?(A[v].hpt=R,A[v].hpx=sp(R)):R===0&&(A[v].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+_)}V<1&&(S=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+_)}}return A.length>0&&(E["!rows"]=A),P.length>0&&(E["!cols"]=P),m&&m.sheetRows&&(j=j.slice(0,m.sheetRows)),[j,E]}function o(p,m){var b=s(p,m),v=b[0],g=b[1],w=vp(v,m);return Ws(g).forEach(function(y){w[y]=g[y]}),w}function l(p,m){return F0(o(p,m),m)}function c(p,m,b,v){var g="C;Y"+(b+1)+";X"+(v+1)+";K";switch(p.t){case"n":g+=p.v||0,p.f&&!p.F&&(g+=";E"+X3(p.f,{r:b,c:v}));break;case"b":g+=p.v?"TRUE":"FALSE";break;case"e":g+=p.w||p.v;break;case"d":g+='"'+(p.w||p.v)+'"';break;case"s":g+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(p,m){m.forEach(function(b,v){var g="F;W"+(v+1)+" "+(v+1)+" ";b.hidden?g+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=hg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=mg(b.wpx)),typeof b.wch=="number"&&(g+=Math.round(b.wch))),g.charAt(g.length-1)!=" "&&p.push(g)})}function u(p,m){m.forEach(function(b,v){var g="F;";b.hidden?g+="M0;":b.hpt?g+="M"+20*b.hpt+";":b.hpx&&(g+="M"+20*pg(b.hpx)+";"),g.length>2&&p.push(g+"R"+(v+1))})}function f(p,m){var b=["ID;PWXL;N;E"],v=[],g=ca(p["!ref"]),w,y=Array.isArray(p),j=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&d(b,p["!cols"]),p["!rows"]&&u(b,p["!rows"]),b.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var N=g.s.r;N<=g.e.r;++N)for(var S=g.s.c;S<=g.e.c;++S){var E=un({r:N,c:S});w=y?(p[N]||[])[S]:p[E],!(!w||w.v==null&&(!w.f||w.F))&&v.push(c(w,p,N,S))}return b.join(j)+j+v.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:f}})(),ZR=(function(){function e(i,o){switch(o.type){case"base64":return t(Dc(i),o);case"binary":return t(i,o);case"buffer":return t(In&&Buffer.isBuffer(i)?i.toString("binary"):L0(i),o);case"array":return t(Ph(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,f=[];u!==l.length;++u){if(l[u].trim()==="BOT"){f[++c]=[],d=0;continue}if(!(c<0)){var p=l[u].trim().split(","),m=p[0],b=p[1];++u;for(var v=l[u]||"";(v.match(/["]/g)||[]).length&1&&u<l.length-1;)v+=`
`+l[++u];switch(v=v.trim(),+m){case-1:if(v==="BOT"){f[++c]=[],d=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[c][d]=!0:v==="FALSE"?f[c][d]=!1:isNaN(iu(b))?isNaN(np(b).getDate())?f[c][d]=b:f[c][d]=us(b):f[c][d]=iu(b),++d;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[c][d++]=v!==""?v:null;break}if(v==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return vp(e(i,o),o)}function a(i,o){return F0(r(i,o),o)}var s=(function(){var i=function(c,d,u,f,p){c.push(d),c.push(u+","+f),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,d,u,f){c.push(d+","+u),c.push(d==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var d=[],u=ca(c["!ref"]),f,p=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){o(d,-1,0,"BOT");for(var b=u.s.c;b<=u.e.c;++b){var v=un({r:m,c:b});if(f=p?(c[m]||[])[b]:c[v],!f){o(d,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(d,1,0,"="+f.f):o(d,1,0,""):o(d,0,g,"V");break;case"b":o(d,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=bd(f.z||an[14],zi(us(f.v)))),o(d,0,f.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var w=`\r
`,y=d.join(w);return y}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),e9=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var m=f.split(`
`),b=-1,v=-1,g=0,w=[];g!==m.length;++g){var y=m[g].trim().split(":");if(y[0]==="cell"){var j=Ls(y[1]);if(w.length<=j.r)for(b=w.length;b<=j.r;++b)w[b]||(w[b]=[]);switch(b=j.r,v=j.c,y[2]){case"t":w[b][v]=e(y[3]);break;case"v":w[b][v]=+y[3];break;case"vtf":var N=y[y.length-1];case"vtc":y[3]==="nl"?w[b][v]=!!+y[4]:w[b][v]=+y[4],y[2]=="vtf"&&(w[b][v]=[w[b][v],N])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function a(f,p){return vp(r(f,p),p)}function s(f,p){return F0(a(f,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(f){if(!f||!f["!ref"])return"";for(var p=[],m=[],b,v="",g=sc(f["!ref"]),w=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var j=g.s.c;j<=g.e.c;++j)if(v=un({r:y,c:j}),b=w?(f[y]||[])[j]:f[v],!(!b||b.v==null||b.t==="z")){switch(m=["cell",v,"t"],b.t){case"s":case"str":m.push(t(b.v));break;case"n":b.f?(m[2]="vtf",m[3]="n",m[4]=b.v,m[5]=t(b.f)):(m[2]="v",m[3]=b.v);break;case"b":m[2]="vt"+(b.f?"f":"c"),m[3]="nl",m[4]=b.v?"1":"0",m[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var N=zi(us(b.v));m[2]="vtc",m[3]="nd",m[4]=""+N,m[5]=b.w||bd(b.z||an[14],N);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function u(f){return[i,o,l,o,d(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:u}})(),ap=(function(){function e(u,f,p,m,b){b.raw?f[p][m]=u:u===""||(u==="TRUE"?f[p][m]=!0:u==="FALSE"?f[p][m]=!1:isNaN(iu(u))?isNaN(np(u).getDate())?f[p][m]=u:f[p][m]=us(u):f[p][m]=iu(u))}function t(u,f){var p=f||{},m=[];if(!u||u.length===0)return m;for(var b=u.split(/[\r\n]/),v=b.length-1;v>=0&&b[v].length===0;)--v;for(var g=10,w=0,y=0;y<=v;++y)w=b[y].indexOf(" "),w==-1?w=b[y].length:w++,g=Math.max(g,w);for(y=0;y<=v;++y){m[y]=[];var j=0;for(e(b[y].slice(0,g).trim(),m,y,j,p),j=1;j<=(b[y].length-g)/10+1;++j)e(b[y].slice(g+(j-1)*10,g+j*10).trim(),m,y,j,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(u){for(var f={},p=!1,m=0,b=0;m<u.length;++m)(b=u.charCodeAt(m))==34?p=!p:!p&&b in r&&(f[b]=(f[b]||0)+1);b=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.push([f[m],m]);if(!b.length){f=a;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.push([f[m],m])}return b.sort(function(v,g){return v[0]-g[0]||a[v[1]]-a[g[1]]}),r[b.pop()[1]]||44}function i(u,f){var p=f||{},m="",b=p.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=s(u.slice(0,1024)):p&&p.FS?m=p.FS:m=s(u.slice(0,1024));var g=0,w=0,y=0,j=0,N=0,S=m.charCodeAt(0),E=!1,A=0,P=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var D=p.dateNF!=null?ece(p.dateNF):null;function R(){var T=u.slice(j,N),_={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)_.t="z";else if(p.raw)_.t="s",_.v=T;else if(T.trim().length===0)_.t="s",_.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(_.t="s",_.v=T.slice(2,-1).replace(/""/g,'"')):Ehe(T)?(_.t="n",_.f=T.slice(1)):(_.t="s",_.v=T);else if(T=="TRUE")_.t="b",_.v=!0;else if(T=="FALSE")_.t="b",_.v=!1;else if(!isNaN(y=iu(T)))_.t="n",p.cellText!==!1&&(_.w=T),_.v=y;else if(!isNaN(np(T).getDate())||D&&T.match(D)){_.z=p.dateNF||an[14];var B=0;D&&T.match(D)&&(T=tce(T,p.dateNF,T.match(D)||[]),B=1),p.cellDates?(_.t="d",_.v=us(T,B)):(_.t="n",_.v=zi(us(T,B))),p.cellText!==!1&&(_.w=bd(_.z,_.v instanceof Date?zi(_.v):_.v)),p.cellNF||delete _.z}else _.t="s",_.v=T;if(_.t=="z"||(p.dense?(b[g]||(b[g]=[]),b[g][w]=_):b[un({c:w,r:g})]=_),j=N+1,P=u.charCodeAt(j),v.e.c<w&&(v.e.c=w),v.e.r<g&&(v.e.r=g),A==S)++w;else if(w=0,++g,p.sheetRows&&p.sheetRows<=g)return!0}e:for(;N<u.length;++N)switch(A=u.charCodeAt(N)){case 34:P===34&&(E=!E);break;case S:case 10:case 13:if(!E&&R())break e;break}return N-j>0&&R(),b["!ref"]=kn(v),b}function o(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):vp(t(u,f),f)}function l(u,f){var p="",m=f.type=="string"?[0,0,0,0]:n_(u,f);switch(f.type){case"base64":p=Dc(u);break;case"binary":p=u;break;case"buffer":f.codepage==65001?p=u.toString("utf8"):f.codepage&&typeof sg<"u"||(p=In&&Buffer.isBuffer(u)?u.toString("binary"):L0(u));break;case"array":p=Ph(u);break;case"string":p=u;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=Ma(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=Ma(p):f.type=="binary"&&typeof sg<"u",p.slice(0,19)=="socialcalc:version:"?e9.to_sheet(f.type=="string"?p:Ma(p),f):o(p,f)}function c(u,f){return F0(l(u,f),f)}function d(u){for(var f=[],p=ca(u["!ref"]),m,b=Array.isArray(u),v=p.s.r;v<=p.e.r;++v){for(var g=[],w=p.s.c;w<=p.e.c;++w){var y=un({r:v,c:w});if(m=b?(u[v]||[])[w]:u[y],!m||m.v==null){g.push("          ");continue}for(var j=(m.w||(Df(m),m.w)||"").slice(0,10);j.length<10;)j+=" ";g.push(j+(w===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}})();function pfe(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=QR.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return ap.to_workbook(e,t)}}var bh=(function(){function e(O,z,V){if(O){Po(O,O.l||0);for(var q=V.Enum||ee;O.l<O.length;){var K=O.read_shift(2),se=q[K]||q[65535],pe=O.read_shift(2),ie=O.l+pe,le=se.f&&se.f(O,pe,V);if(O.l=ie,z(le,se,K))return}}}function t(O,z){switch(z.type){case"base64":return r(Ac(Dc(O)),z);case"binary":return r(Ac(O),z);case"buffer":case"array":return r(O,z)}throw"Unsupported type "+z.type}function r(O,z){if(!O)return O;var V=z||{},q=V.dense?[]:{},K="Sheet1",se="",pe=0,ie={},le=[],$e=[],he={s:{r:0,c:0},e:{r:0,c:0}},Ue=V.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)V.Enum=ee,e(O,function(Pe,je,Ie){switch(Ie){case 0:V.vers=Pe,Pe>=4096&&(V.qpro=!0);break;case 6:he=Pe;break;case 204:Pe&&(se=Pe);break;case 222:se=Pe;break;case 15:case 51:V.qpro||(Pe[1].v=Pe[1].v.slice(1));case 13:case 14:case 16:Ie==14&&(Pe[2]&112)==112&&(Pe[2]&15)>1&&(Pe[2]&15)<15&&(Pe[1].z=V.dateNF||an[14],V.cellDates&&(Pe[1].t="d",Pe[1].v=Sy(Pe[1].v))),V.qpro&&Pe[3]>pe&&(q["!ref"]=kn(he),ie[K]=q,le.push(K),q=V.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},pe=Pe[3],K=se||"Sheet"+(pe+1),se="");var ue=V.dense?(q[Pe[0].r]||[])[Pe[0].c]:q[un(Pe[0])];if(ue){ue.t=Pe[1].t,ue.v=Pe[1].v,Pe[1].z!=null&&(ue.z=Pe[1].z),Pe[1].f!=null&&(ue.f=Pe[1].f);break}V.dense?(q[Pe[0].r]||(q[Pe[0].r]=[]),q[Pe[0].r][Pe[0].c]=Pe[1]):q[un(Pe[0])]=Pe[1];break}},V);else if(O[2]==26||O[2]==14)V.Enum=W,O[2]==14&&(V.qpro=!0,O.l=0),e(O,function(Pe,je,Ie){switch(Ie){case 204:K=Pe;break;case 22:Pe[1].v=Pe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Pe[3]>pe&&(q["!ref"]=kn(he),ie[K]=q,le.push(K),q=V.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},pe=Pe[3],K="Sheet"+(pe+1)),Ue>0&&Pe[0].r>=Ue)break;V.dense?(q[Pe[0].r]||(q[Pe[0].r]=[]),q[Pe[0].r][Pe[0].c]=Pe[1]):q[un(Pe[0])]=Pe[1],he.e.c<Pe[0].c&&(he.e.c=Pe[0].c),he.e.r<Pe[0].r&&(he.e.r=Pe[0].r);break;case 27:Pe[14e3]&&($e[Pe[14e3][0]]=Pe[14e3][1]);break;case 1537:$e[Pe[0]]=Pe[1],Pe[0]==pe&&(K=Pe[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(q["!ref"]=kn(he),ie[se||K]=q,le.push(se||K),!$e.length)return{SheetNames:le,Sheets:ie};for(var Te={},oe=[],te=0;te<$e.length;++te)ie[le[te]]?(oe.push($e[te]||le[te]),Te[$e[te]]=ie[$e[te]]||ie[le[te]]):(oe.push($e[te]),Te[$e[te]]={"!ref":"A1"});return{SheetNames:oe,Sheets:Te}}function a(O,z){var V=z||{};if(+V.codepage>=0&&eu(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var q=nc(),K=ca(O["!ref"]),se=Array.isArray(O),pe=[];gr(q,0,i(1030)),gr(q,6,c(K));for(var ie=Math.min(K.e.r,8191),le=K.s.r;le<=ie;++le)for(var $e=li(le),he=K.s.c;he<=K.e.c;++he){le===K.s.r&&(pe[he]=Ds(he));var Ue=pe[he]+$e,Te=se?(O[le]||[])[he]:O[Ue];if(!(!Te||Te.t=="z"))if(Te.t=="n")(Te.v|0)==Te.v&&Te.v>=-32768&&Te.v<=32767?gr(q,13,m(le,he,Te.v)):gr(q,14,v(le,he,Te.v));else{var oe=Df(Te);gr(q,15,f(le,he,oe.slice(0,239)))}}return gr(q,1),q.end()}function s(O,z){var V=z||{};if(+V.codepage>=0&&eu(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var q=nc();gr(q,0,o(O));for(var K=0,se=0;K<O.SheetNames.length;++K)(O.Sheets[O.SheetNames[K]]||{})["!ref"]&&gr(q,27,X(O.SheetNames[K],se++));var pe=0;for(K=0;K<O.SheetNames.length;++K){var ie=O.Sheets[O.SheetNames[K]];if(!(!ie||!ie["!ref"])){for(var le=ca(ie["!ref"]),$e=Array.isArray(ie),he=[],Ue=Math.min(le.e.r,8191),Te=le.s.r;Te<=Ue;++Te)for(var oe=li(Te),te=le.s.c;te<=le.e.c;++te){Te===le.s.r&&(he[te]=Ds(te));var Pe=he[te]+oe,je=$e?(ie[Te]||[])[te]:ie[Pe];if(!(!je||je.t=="z"))if(je.t=="n")gr(q,23,R(Te,te,pe,je.v));else{var Ie=Df(je);gr(q,22,A(Te,te,pe,Ie.slice(0,239)))}}++pe}}return gr(q,1),q.end()}function i(O){var z=zt(2);return z.write_shift(2,O),z}function o(O){var z=zt(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var V=0,q=0,K=0,se=0;se<O.SheetNames.length;++se){var pe=O.SheetNames[se],ie=O.Sheets[pe];if(!(!ie||!ie["!ref"])){++K;var le=sc(ie["!ref"]);V<le.e.r&&(V=le.e.r),q<le.e.c&&(q=le.e.c)}}return V>8191&&(V=8191),z.write_shift(2,V),z.write_shift(1,K),z.write_shift(1,q),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function l(O,z,V){var q={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&V.qpro?(q.s.c=O.read_shift(1),O.l++,q.s.r=O.read_shift(2),q.e.c=O.read_shift(1),O.l++,q.e.r=O.read_shift(2),q):(q.s.c=O.read_shift(2),q.s.r=O.read_shift(2),z==12&&V.qpro&&(O.l+=2),q.e.c=O.read_shift(2),q.e.r=O.read_shift(2),z==12&&V.qpro&&(O.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function c(O){var z=zt(8);return z.write_shift(2,O.s.c),z.write_shift(2,O.s.r),z.write_shift(2,O.e.c),z.write_shift(2,O.e.r),z}function d(O,z,V){var q=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(q[0].c=O.read_shift(1),q[3]=O.read_shift(1),q[0].r=O.read_shift(2),O.l+=2):(q[2]=O.read_shift(1),q[0].c=O.read_shift(2),q[0].r=O.read_shift(2)),q}function u(O,z,V){var q=O.l+z,K=d(O,z,V);if(K[1].t="s",V.vers==20768){O.l++;var se=O.read_shift(1);return K[1].v=O.read_shift(se,"utf8"),K}return V.qpro&&O.l++,K[1].v=O.read_shift(q-O.l,"cstr"),K}function f(O,z,V){var q=zt(7+V.length);q.write_shift(1,255),q.write_shift(2,z),q.write_shift(2,O),q.write_shift(1,39);for(var K=0;K<q.length;++K){var se=V.charCodeAt(K);q.write_shift(1,se>=128?95:se)}return q.write_shift(1,0),q}function p(O,z,V){var q=d(O,z,V);return q[1].v=O.read_shift(2,"i"),q}function m(O,z,V){var q=zt(7);return q.write_shift(1,255),q.write_shift(2,z),q.write_shift(2,O),q.write_shift(2,V,"i"),q}function b(O,z,V){var q=d(O,z,V);return q[1].v=O.read_shift(8,"f"),q}function v(O,z,V){var q=zt(13);return q.write_shift(1,255),q.write_shift(2,z),q.write_shift(2,O),q.write_shift(8,V,"f"),q}function g(O,z,V){var q=O.l+z,K=d(O,z,V);if(K[1].v=O.read_shift(8,"f"),V.qpro)O.l=q;else{var se=O.read_shift(2);N(O.slice(O.l,O.l+se),K),O.l+=se}return K}function w(O,z,V){var q=z&32768;return z&=-32769,z=(q?O:0)+(z>=8192?z-16384:z),(q?"":"$")+(V?Ds(z):li(z))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(O,z){Po(O,0);for(var V=[],q=0,K="",se="",pe="",ie="";O.l<O.length;){var le=O[O.l++];switch(le){case 0:V.push(O.read_shift(8,"f"));break;case 1:se=w(z[0].c,O.read_shift(2),!0),K=w(z[0].r,O.read_shift(2),!1),V.push(se+K);break;case 2:{var $e=w(z[0].c,O.read_shift(2),!0),he=w(z[0].r,O.read_shift(2),!1);se=w(z[0].c,O.read_shift(2),!0),K=w(z[0].r,O.read_shift(2),!1),V.push($e+he+":"+se+K)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(O.read_shift(2));break;case 6:{for(var Ue="";le=O[O.l++];)Ue+=String.fromCharCode(le);V.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ie=V.pop(),pe=V.pop(),V.push(["AND","OR"][le-20]+"("+pe+","+ie+")");break;default:if(le<32&&j[le])ie=V.pop(),pe=V.pop(),V.push(pe+j[le]+ie);else if(y[le]){if(q=y[le][1],q==69&&(q=O[O.l++]),q>V.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+V.join("|")+"|");return}var Te=V.slice(-q);V.length-=q,V.push(y[le][0]+"("+Te.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}V.length==1?z[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function S(O){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=O.read_shift(2),z[3]=O[O.l++],z[0].c=O[O.l++],z}function E(O,z){var V=S(O);return V[1].t="s",V[1].v=O.read_shift(z-4,"cstr"),V}function A(O,z,V,q){var K=zt(6+q.length);K.write_shift(2,O),K.write_shift(1,V),K.write_shift(1,z),K.write_shift(1,39);for(var se=0;se<q.length;++se){var pe=q.charCodeAt(se);K.write_shift(1,pe>=128?95:pe)}return K.write_shift(1,0),K}function P(O,z){var V=S(O);V[1].v=O.read_shift(2);var q=V[1].v>>1;if(V[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return V[1].v=q,V}function D(O,z){var V=S(O),q=O.read_shift(4),K=O.read_shift(4),se=O.read_shift(2);if(se==65535)return q===0&&K===3221225472?(V[1].t="e",V[1].v=15):q===0&&K===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var pe=se&32768;return se=(se&32767)-16446,V[1].v=(1-pe*2)*(K*Math.pow(2,se+32)+q*Math.pow(2,se)),V}function R(O,z,V,q){var K=zt(14);if(K.write_shift(2,O),K.write_shift(1,V),K.write_shift(1,z),q==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var se=0,pe=0,ie=0,le=0;return q<0&&(se=1,q=-q),pe=Math.log2(q)|0,q/=Math.pow(2,pe-31),le=q>>>0,(le&2147483648)==0&&(q/=2,++pe,le=q>>>0),q-=le,le|=2147483648,le>>>=0,q*=Math.pow(2,32),ie=q>>>0,K.write_shift(4,ie),K.write_shift(4,le),pe+=16383+(se?32768:0),K.write_shift(2,pe),K}function T(O,z){var V=D(O);return O.l+=z-14,V}function _(O,z){var V=S(O),q=O.read_shift(4);return V[1].v=q>>6,V}function B(O,z){var V=S(O),q=O.read_shift(8,"f");return V[1].v=q,V}function U(O,z){var V=B(O);return O.l+=z-10,V}function H(O,z){return O[O.l+z-1]==0?O.read_shift(z,"cstr"):""}function Y(O,z){var V=O[O.l++];V>z-1&&(V=z-1);for(var q="";q.length<V;)q+=String.fromCharCode(O[O.l++]);return q}function J(O,z,V){if(!(!V.qpro||z<21)){var q=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var K=O.read_shift(z-21,"cstr");return[q,K]}}function re(O,z){for(var V={},q=O.l+z;O.l<q;){var K=O.read_shift(2);if(K==14e3){for(V[K]=[0,""],V[K][0]=O.read_shift(2);O[O.l];)V[K][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return V}function X(O,z){var V=zt(5+O.length);V.write_shift(2,14e3),V.write_shift(2,z);for(var q=0;q<O.length;++q){var K=O.charCodeAt(q);V[V.l++]=K>127?95:K}return V[V.l++]=0,V}var ee={0:{n:"BOF",f:ki},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:H},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:D},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:_},38:{n:"??"},39:{n:"NUMBER27",f:B},40:{n:"FORMULA28",f:U},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:H},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function xfe(e){var t={},r=e.match(ml),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=hn(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=y3[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var gfe=(function(){var e=lg("t"),t=lg("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:oa(o[1])},c=i.match(t);return c&&(l.s=xfe(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}})(),vfe=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),bfe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,yfe=/<(?:\w+:)?r>/,wfe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function H3(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=oa(Ma(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Ma(e),r&&(a.h=T3(a.t))):e.match(yfe)&&(a.r=Ma(e),a.t=oa(Ma((e.replace(wfe,"").match(bfe)||[]).join("").replace(ml,""))),r&&(a.h=vfe(gfe(a.r)))),a):{t:""}}var Nfe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,jfe=/<(?:\w+:)?(?:si|sstItem)>/g,kfe=/<\/(?:\w+:)?(?:si|sstItem)>/;function Sfe(e,t){var r=[],a="";if(!e)return r;var s=e.match(Nfe);if(s){a=s[2].replace(jfe,"").split(kfe);for(var i=0;i!=a.length;++i){var o=H3(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=hn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var _fe=/^\s|\s$|[\t\n\r]/;function t9(e,t){if(!t.bookSST)return"";var r=[di];r[r.length]=mr("sst",null,{xmlns:$h[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(_fe)&&(i+=' xml:space="preserve"'),i+=">"+Aa(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Cfe(e){return[e.read_shift(4),e.read_shift(4)]}function Afe(e,t){var r=[],a=!1;return Bf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Efe(e,t){return t||(t=zt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Tfe=Uce;function Ofe(e){var t=nc();Jt(t,159,Efe(e));for(var r=0;r<e.length;++r)Jt(t,19,Tfe(e[r]));return Jt(t,160),t.end()}function r9(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Ef(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Pfe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Ef(e,4),t.U=Ef(e,4),t.W=Ef(e,4),t}function Ife(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function Dfe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Ife(e));return t}function Lfe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Ffe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Ef(e,4),t.U=Ef(e,4),t.W=Ef(e,4),t}function Mfe(e){var t=Ffe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function n9(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function a9(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function Rfe(e){var t=Ef(e);switch(t.Minor){case 2:return[t.Minor,Bfe(e)];case 3:return[t.Minor,Ufe()];case 4:return[t.Minor,qfe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Bfe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=n9(e,r),s=a9(e,e.length-e.l);return{t:"Std",h:a,v:s}}function Ufe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function qfe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(ml,function(i){var o=hn(i);switch(Vu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function $fe(e,t){var r={},a=r.EncryptionVersionInfo=Ef(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=n9(e,s),t-=s,r.EncryptionVerifier=a9(e,t),r}function zfe(e){var t={},r=t.EncryptionVersionInfo=Ef(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function W3(e){var t=0,r,a=r9(e),s=a.length+1,i,o,l,c,d;for(r=N0(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var s9=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],f=0;f!=7;++f)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=r9(o),c=i(l),d=l.length,u=N0(16),f=0;f!=16;++f)u[f]=0;var p,m,b;for((d&1)===1&&(p=c>>8,u[d]=s(e[0],p),--d,p=c&255,m=l[l.length-1],u[d]=s(m,p));d>0;)--d,p=c>>8,u[d]=s(l[d],p),--d,p=c&255,u[d]=s(l[d],p);for(d=15,b=15-l.length;b>0;)p=c>>8,u[d]=s(e[b],p),--d,--b,p=c&255,u[d]=s(l[d],p),--d,--b;return u}})(),Hfe=function(e,t,r,a,s){s||(s=t),a||(a=s9(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},Wfe=function(e){var t=0,r=s9(e);return function(a){var s=Hfe("",a,t,r);return t=s[1],s[0]}};function Vfe(e,t,r,a){var s={key:ki(e),verificationBytes:ki(e)};return r.password&&(s.verifier=W3(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=Wfe(r.password)),s}function Gfe(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=zfe(e):a.Data=$fe(e,t),a}function Kfe(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?Gfe(e,t-2,a):Vfe(e,r.biff>=8?t:t-2,r,a),a}var i9=(function(){function e(s,i){switch(i.type){case"base64":return t(Dc(s),i);case"binary":return t(s,i);case"buffer":return t(In&&Buffer.isBuffer(s)?s.toString("binary"):L0(s),i);case"array":return t(Ph(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,f){Array.isArray(l)&&(l[f]=[]);for(var p=/\\\w+\b/g,m=0,b,v=-1;b=p.exec(u);){switch(b[0]){case"\\cell":var g=u.slice(m,p.lastIndex-b[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var w={v:g,t:"s"};Array.isArray(l)?l[f][v]=w:l[un({r:f,c:v})]=w}break}m=p.lastIndex}v>d.e.c&&(d.e.c=v)}),l["!ref"]=kn(d),l}function r(s,i){return F0(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=ca(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var f=un({r:d,c:u});l=c?(s[d]||[])[u]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Df(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function Xfe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function fg(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Yfe(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function Jfe(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Ab(e,t){if(t===0)return e;var r=Yfe(Xfe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),fg(Jfe(r))}var o9=6,Qfe=15,Zfe=1,ll=o9;function hg(e){return Math.floor((e+Math.round(128/ll)/256)*ll)}function mg(e){return Math.floor((e-5)/ll*100+.5)/100}function Eb(e){return Math.round((e*ll+5)/ll*256)/256}function Ej(e){return Eb(mg(hg(e)))}function V3(e){var t=Math.abs(e-Ej(e)),r=ll;if(t>.005)for(ll=Zfe;ll<Qfe;++ll)Math.abs(e-Ej(e))<=t&&(t=Math.abs(e-Ej(e)),r=ll);ll=r}function j0(e){e.width?(e.wpx=hg(e.width),e.wch=mg(e.wpx),e.MDW=ll):e.wpx?(e.wch=mg(e.wpx),e.width=Eb(e.wch),e.MDW=ll):typeof e.wch=="number"&&(e.width=Eb(e.wch),e.wpx=hg(e.width),e.MDW=ll),e.customWidth&&delete e.customWidth}var e0e=96,l9=e0e;function pg(e){return e*96/l9}function sp(e){return e*l9/96}var t0e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function r0e(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(ml)||[]).forEach(function(o){var l=hn(o);switch(Vu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=ls(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=ls(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function n0e(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(ml)||[]).forEach(function(o){var l=hn(o);switch(Vu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function a0e(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(ml)||[]).forEach(function(o){var l=hn(o);switch(Vu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ma(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?ls(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?ls(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?ls(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?ls(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?ls(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?ls(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?ls(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=y3[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=ls(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=gh[s.color.index];s.color.index==81&&(c=gh[1]),c||(c=gh[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Ab(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function s0e(e,t,r){t.NumberFmt=[];for(var a=Ws(an),s=0;s<a.length;++s)t.NumberFmt[a[s]]=an[a[s]];var i=e[0].match(ml);if(i)for(s=0;s<i.length;++s){var o=hn(i[s]);switch(Vu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=oa(Ma(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Af(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function i0e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=mr("numFmt",null,{numFmtId:a,formatCode:Aa(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=mr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Uv=["numFmtId","fillId","fontId","borderId","xfId"],qv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function o0e(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(ml)||[]).forEach(function(i){var o=hn(i),l=0;switch(Vu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Uv.length;++l)a[Uv[l]]&&(a[Uv[l]]=parseInt(a[Uv[l]],10));for(l=0;l<qv.length;++l)a[qv[l]]&&(a[qv[l]]=ls(a[qv[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ls(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function l0e(e){var t=[];return t[t.length]=mr("cellXfs",null),e.forEach(function(r){t[t.length]=mr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=mr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var c0e=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&s0e(f,u,d),(f=l.match(s))&&a0e(f,u,c,d),(f=l.match(a))&&n0e(f,u,c,d),(f=l.match(i))&&r0e(f,u,c,d),(f=l.match(r))&&o0e(f,u,d),u}})();function c9(e,t){var r=[di,mr("styleSheet",null,{xmlns:$h[0],"xmlns:vt":Ui.vt})],a;return e.SSF&&(a=i0e(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=l0e(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function d0e(e,t){var r=e.read_shift(2),a=fl(e);return[r,a]}function u0e(e,t,r){r||(r=zt(6+4*t.length)),r.write_shift(2,e),ho(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function f0e(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Gce(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=Vce(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=fl(e),a}function h0e(e,t){t||(t=zt(153)),t.write_shift(2,e.sz*20),Kce(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Sb(e.color,t);var a=0;return a=2,t.write_shift(1,a),ho(e.name,t),t.length>t.l?t.slice(0,t.l):t}var m0e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Tj,p0e=hl;function qD(e,t){t||(t=zt(84)),Tj||(Tj=jy(m0e));var r=Tj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Sb({auto:1},t),Sb({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function x0e(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function d9(e,t,r){r||(r=zt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Wp(e,t){return t||(t=zt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var g0e=hl;function v0e(e,t){return t||(t=zt(51)),t.write_shift(1,0),Wp(null,t),Wp(null,t),Wp(null,t),Wp(null,t),Wp(null,t),t.length>t.l?t.slice(0,t.l):t}function b0e(e,t){return t||(t=zt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),kb(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function y0e(e,t,r){var a=zt(2052);return a.write_shift(4,e),kb(t,a),kb(r,a),a.length>a.l?a.slice(0,a.l):a}function w0e(e,t,r){var a={};a.NumberFmt=[];for(var s in an)a.NumberFmt[s]=an[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return Bf(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Af(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Ab(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function N0e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(Jt(e,615,ou(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Jt(e,44,u0e(s,t[s]))}),Jt(e,616))}}function j0e(e){var t=1;Jt(e,611,ou(t)),Jt(e,43,h0e({sz:12,color:{theme:1},name:"Calibri",family:2})),Jt(e,612)}function k0e(e){var t=2;Jt(e,603,ou(t)),Jt(e,45,qD({patternType:"none"})),Jt(e,45,qD({patternType:"gray125"})),Jt(e,604)}function S0e(e){var t=1;Jt(e,613,ou(t)),Jt(e,46,v0e()),Jt(e,614)}function _0e(e){var t=1;Jt(e,626,ou(t)),Jt(e,47,d9({numFmtId:0},65535)),Jt(e,627)}function C0e(e,t){Jt(e,617,ou(t.length)),t.forEach(function(r){Jt(e,47,d9(r,0))}),Jt(e,618)}function A0e(e){var t=1;Jt(e,619,ou(t)),Jt(e,48,b0e({xfId:0,name:"Normal"})),Jt(e,620)}function E0e(e){var t=0;Jt(e,505,ou(t)),Jt(e,506)}function T0e(e){var t=0;Jt(e,508,y0e(t,"TableStyleMedium9","PivotStyleMedium4")),Jt(e,509)}function O0e(e,t){var r=nc();return Jt(r,278),N0e(r,e.SSF),j0e(r),k0e(r),S0e(r),_0e(r),C0e(r,t.cellXfs),A0e(r),E0e(r),T0e(r),Jt(r,279),r.end()}var P0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function I0e(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(ml)||[]).forEach(function(s){var i=hn(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[P0e.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function D0e(){}function L0e(){}var F0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,M0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,R0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function B0e(e,t,r){t.themeElements={};var a;[["clrScheme",F0e,I0e],["fontScheme",M0e,D0e],["fmtScheme",R0e,L0e]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var U0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function u9(e,t){(!e||e.length===0)&&(e=G3());var r,a={};if(!(r=e.match(U0e)))throw new Error("themeElements not found in theme");return B0e(r[0],a,t),a.raw=e,a}function G3(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[di];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function q0e(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=nR(i,{type:"array"})}catch{return}var l=Ec(o,"theme/theme/theme1.xml",!0);if(l)return u9(l,r)}}function $0e(e){return e.read_shift(4)}function z0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=H0e(e,4);break;case 2:t.xclrValue=HR(e);break;case 3:t.xclrValue=$0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function H0e(e,t){return hl(e,t)}function W0e(e,t){return hl(e,t)}function V0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=z0e(e);break;case 6:a[1]=W0e(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function G0e(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(V0e(e,r-e.l));return{ixfe:a,ext:i}}function K0e(e,t){t.forEach(function(r){r[0]})}function X0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:fl(e)}}function Y0e(e){var t=zt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ho(e.name,t),t.slice(0,t.l)}function J0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Q0e(e){var t=zt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Z0e(e,t){var r=zt(8+2*t.length);return r.write_shift(4,e),ho(t,r),r.slice(0,r.l)}function ehe(e){return e.l+=4,e.read_shift(4)!=0}function the(e,t){var r=zt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function rhe(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Bf(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function nhe(){var e=nc();return Jt(e,332),Jt(e,334,ou(1)),Jt(e,335,Y0e({name:"XLDAPR",version:12e4,flags:3496657072})),Jt(e,336),Jt(e,339,Z0e(1,"XLDAPR")),Jt(e,52),Jt(e,35,ou(514)),Jt(e,4096,ou(0)),Jt(e,4097,od(1)),Jt(e,36),Jt(e,53),Jt(e,340),Jt(e,337,the(1)),Jt(e,51,Q0e([[1,0]])),Jt(e,338),Jt(e,333),e.end()}function ahe(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(ml,function(l){var c=hn(l);switch(Vu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function f9(){var e=[di];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function she(e){var t=[];if(!e)return t;var r=1;return(e.match(ml)||[]).forEach(function(a){var s=hn(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function ihe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=un(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function ohe(e,t,r){var a=[];return Bf(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function lhe(e,t,r,a){if(!e)return e;var s=a||{},i=!1;Bf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function che(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var bm=1024;function h9(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[mr("xml",null,{"xmlns:v":Sc.v,"xmlns:o":Sc.o,"xmlns:x":Sc.x,"xmlns:mv":Sc.mv}).replace(/\/>/,">"),mr("o:shapelayout",mr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),mr("v:shapetype",[mr("v:stroke",null,{joinstyle:"miter"}),mr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];bm<e*1e3;)bm+=1e3;return t.forEach(function(i){var o=Ls(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?mr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=mr("v:fill",c,l),u={on:"t",obscured:"t"};++bm,s=s.concat(["<v:shape"+cg({id:"_x0000_s"+bm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,mr("v:shadow",null,u),mr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Io("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Io("x:AutoFill","False"),Io("x:Row",String(o.r)),Io("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function $D(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=Ls(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=ca(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=kn(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(u.a==a[f].id){u.a=a[f].name||u.a;break}}i.c.push(u)})}function dhe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=hn(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Ls(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!f&&!!f[1]&&H3(f[1])||{r:"",t:"",h:""};d.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),d.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=p.h),a.push(d)}}}}),a}function m9(e){var t=[di,mr("comments",null,{xmlns:$h[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Aa(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(Aa(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Io("t",Aa(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Io("t",Aa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function uhe(e,t){var r=[],a=!1,s={},i=0;return e.replace(ml,function(l,c){var d=hn(l);switch(Vu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function fhe(e,t,r){var a=[di,mr("ThreadedComments",null,{xmlns:Ui.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(mr("threadedComment",Io("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function hhe(e,t){var r=[],a=!1;return e.replace(ml,function(i){var o=hn(i);switch(Vu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function mhe(e){var t=[di,mr("personList",null,{xmlns:Ui.TCMNT,"xmlns:x":$h[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(mr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function phe(e){var t={};t.iauthor=e.read_shift(4);var r=Vh(e);return t.rfx=r.s,t.ref=un(r.s),e.l+=16,t}function xhe(e,t){return t==null&&(t=zt(36)),t.write_shift(4,e[1].iauthor),bp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var ghe=fl;function vhe(e){return ho(e.slice(0,54))}function bhe(e,t){var r=[],a=[],s={},i=!1;return Bf(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function yhe(e){var t=nc(),r=[];return Jt(t,628),Jt(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Jt(t,632,vhe(s.a)))})}),Jt(t,631),Jt(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Ls(a[0]),e:Ls(a[0])};Jt(t,635,xhe([i,s])),s.t&&s.t.length>0&&Jt(t,637,$ce(s)),Jt(t,636),delete s.iauthor})}),Jt(t,634),Jt(t,629),t.end()}var whe="application/vnd.ms-office.vbaProject";function Nhe(e){var t=Yr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Yr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Yr.write(t)}function jhe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Yr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var p9=["xlsb","xlsm","xlam","biff8","xla"];function khe(){return{"!type":"dialog"}}function She(){return{"!type":"dialog"}}function _he(){return{"!type":"macro"}}function Che(){return{"!type":"macro"}}var Cm=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+Ds(u)+(c?"":"$")+li(d)}return function(s,i){return t=i,s.replace(e,r)}})(),K3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,X3=(function(){return function(t,r){return t.replace(K3,function(a,s,i,o,l,c){var d=L3(o)-(i?0:r.c),u=D3(c)-(l?0:r.r),f=u==0?"":l?u+1:"["+u+"]",p=d==0?"":i?d+1:"["+d+"]";return s+"R"+f+"C"+p})}})();function x9(e,t){return e.replace(K3,function(r,a,s,i,o,l){return a+(s=="$"?s+i:Ds(L3(i)+t.c))+(o=="$"?o+l:li(D3(l)+t.r))})}function Ahe(e,t,r){var a=sc(t),s=a.s,i=Ls(r),o={r:i.r-s.r,c:i.c-s.c};return x9(e,o)}function Ehe(e){return e.length!=1}function zD(e){return e.replace(/_xlfn\./g,"")}function wi(e){e.l+=1}function k0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function g9(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return v9(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=k0(e),l=k0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function v9(e){var t=k0(e),r=k0(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function The(e,t,r){if(r.biff<8)return v9(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=k0(e),o=k0(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function b9(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Ohe(e);var a=e.read_shift(r&&r.biff==12?4:2),s=k0(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function Ohe(e){var t=k0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Phe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Ihe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return Dhe(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Dhe(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function Lhe(e,t,r){var a=(e[e.l++]&96)>>5,s=g9(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function Fhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=g9(e,i,r);return[a,s,o]}function Mhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Rhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function Bhe(e,t,r){var a=(e[e.l++]&96)>>5,s=The(e,t-1,r);return[a,s]}function Uhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function HD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function qhe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function $he(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function zhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Hhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Whe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function y9(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Vhe(e){return e.read_shift(2),y9(e)}function Ghe(e){return e.read_shift(2),y9(e)}function Khe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=b9(e,0,r);return[a,s]}function Xhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=Ihe(e,0,r);return[a,s]}function Yhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=b9(e,0,r);return[a,s,i]}function Jhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[epe[s],j9[s],a]}function Qhe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Zhe(e);return[s,(i[0]===0?j9:Zme)[i[1]]]}function Zhe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function eme(e,t,r){e.l+=r&&r.biff==2?3:4}function tme(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function rme(e){return e.l++,Uf[e.read_shift(1)]}function nme(e){return e.l++,e.read_shift(2)}function ame(e){return e.l++,e.read_shift(1)!==0}function sme(e){return e.l++,cl(e)}function ime(e,t,r){return e.l++,Pg(e,t-1,r)}function ome(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ri(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Uf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=cl(e);break;case 2:r[1]=Gh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function lme(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?Vh:_y)(e));return s}function cme(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=ome(e,r.biff);return o}function dme(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function ume(e,t,r){if(r.biff==5)return fme(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function fme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function hme(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function mme(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function pme(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function xme(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var gme=hl,vme=hl,bme=hl;function Dg(e,t,r){return e.l+=2,[Phe(e)]}function Y3(e){return e.l+=6,[]}var yme=Dg,wme=Y3,Nme=Y3,jme=Dg;function w9(e){return e.l+=2,[ki(e),e.read_shift(2)&1]}var kme=Dg,Sme=w9,_me=Y3,Cme=Dg,Ame=Dg,Eme=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Tme(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Eme[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function Ome(e){return e.l+=2,[e.read_shift(4)]}function Pme(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Ime(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Dme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Lme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Fme(e){return e.l+=4,[0,0]}var WD={1:{n:"PtgExp",f:tme},2:{n:"PtgTbl",f:bme},3:{n:"PtgAdd",f:wi},4:{n:"PtgSub",f:wi},5:{n:"PtgMul",f:wi},6:{n:"PtgDiv",f:wi},7:{n:"PtgPower",f:wi},8:{n:"PtgConcat",f:wi},9:{n:"PtgLt",f:wi},10:{n:"PtgLe",f:wi},11:{n:"PtgEq",f:wi},12:{n:"PtgGe",f:wi},13:{n:"PtgGt",f:wi},14:{n:"PtgNe",f:wi},15:{n:"PtgIsect",f:wi},16:{n:"PtgUnion",f:wi},17:{n:"PtgRange",f:wi},18:{n:"PtgUplus",f:wi},19:{n:"PtgUminus",f:wi},20:{n:"PtgPercent",f:wi},21:{n:"PtgParen",f:wi},22:{n:"PtgMissArg",f:wi},23:{n:"PtgStr",f:ime},26:{n:"PtgSheet",f:Pme},27:{n:"PtgEndSheet",f:Ime},28:{n:"PtgErr",f:rme},29:{n:"PtgBool",f:ame},30:{n:"PtgInt",f:nme},31:{n:"PtgNum",f:sme},32:{n:"PtgArray",f:Uhe},33:{n:"PtgFunc",f:Jhe},34:{n:"PtgFuncVar",f:Qhe},35:{n:"PtgName",f:dme},36:{n:"PtgRef",f:Khe},37:{n:"PtgArea",f:Lhe},38:{n:"PtgMemArea",f:hme},39:{n:"PtgMemErr",f:gme},40:{n:"PtgMemNoMem",f:vme},41:{n:"PtgMemFunc",f:mme},42:{n:"PtgRefErr",f:pme},43:{n:"PtgAreaErr",f:Mhe},44:{n:"PtgRefN",f:Xhe},45:{n:"PtgAreaN",f:Bhe},46:{n:"PtgMemAreaN",f:Dme},47:{n:"PtgMemNoMemN",f:Lme},57:{n:"PtgNameX",f:ume},58:{n:"PtgRef3d",f:Yhe},59:{n:"PtgArea3d",f:Fhe},60:{n:"PtgRefErr3d",f:xme},61:{n:"PtgAreaErr3d",f:Rhe},255:{}},Mme={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Rme={1:{n:"PtgElfLel",f:w9},2:{n:"PtgElfRw",f:Cme},3:{n:"PtgElfCol",f:yme},6:{n:"PtgElfRwV",f:Ame},7:{n:"PtgElfColV",f:jme},10:{n:"PtgElfRadical",f:kme},11:{n:"PtgElfRadicalS",f:_me},13:{n:"PtgElfColS",f:wme},15:{n:"PtgElfColSV",f:Nme},16:{n:"PtgElfRadicalLel",f:Sme},25:{n:"PtgList",f:Tme},29:{n:"PtgSxName",f:Ome},255:{}},Bme={0:{n:"PtgAttrNoop",f:Fme},1:{n:"PtgAttrSemi",f:Whe},2:{n:"PtgAttrIf",f:zhe},4:{n:"PtgAttrChoose",f:qhe},8:{n:"PtgAttrGoto",f:$he},16:{n:"PtgAttrSum",f:eme},32:{n:"PtgAttrBaxcel",f:HD},33:{n:"PtgAttrBaxcel",f:HD},64:{n:"PtgAttrSpace",f:Vhe},65:{n:"PtgAttrSpaceSemi",f:Ghe},128:{n:"PtgAttrIfError",f:Hhe},255:{}};function Lg(e,t,r,a){if(a.biff<8)return hl(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=cme(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=lme(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(hl(e,t)),i}function Fg(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=WD[i]||WD[Mme[i]],(i===24||i===25)&&(s=(i===24?Rme:Bme)[e[e.l+1]]),!s||!s.f?hl(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Ume(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}t.push(s.join(","))}return t.join(";")}var qme={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function $me(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function N9(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function VD(e,t,r){var a=N9(e,t,r);return a=="#REF"?a:$me(a,r)}function sl(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,f=0,p=0,m,b="";if(!e[0]||!e[0][0])return"";for(var v=-1,g="",w=0,y=e[0].length;w<y;++w){var j=e[0][w];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),v>=0){switch(e[0][v][1][0]){case 0:g=zs(" ",e[0][v][1][1]);break;case 1:g=zs("\r",e[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}d=d+g,v=-1}l.push(d+qme[j[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=dx(j[1][1],o,s),l.push(ux(u,i));break;case"PtgRefN":u=r?dx(j[1][1],r,s):j[1][1],l.push(ux(u,i));break;case"PtgRef3d":f=j[1][1],u=dx(j[1][2],o,s),b=VD(a,f,s),l.push(b+"!"+ux(u,i));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],S=j[1][1];N||(N=0),N&=127;var E=N==0?[]:l.slice(-N);l.length-=N,S==="User"&&(S=E.shift()),l.push(S+"("+E.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":m=wD(j[1][1],r?{s:r}:o,s),l.push(_j(m,s));break;case"PtgArea":m=wD(j[1][1],o,s),l.push(_j(m,s));break;case"PtgArea3d":f=j[1][1],m=j[1][2],b=VD(a,f,s),l.push(b+"!"+_j(m,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=j[1][2];var A=(a.names||[])[p-1]||(a[0]||[])[p],P=A?A.Name:"SH33TJSNAME"+String(p);P&&P.slice(0,6)=="_xlfn."&&!s.xlfn&&(P=P.slice(6)),l.push(P);break;case"PtgNameX":var D=j[1][1];p=j[1][2];var R;if(s.biff<=5)D<0&&(D=-D),a[D]&&(R=a[D][p]);else{var T="";if(((a[D]||[])[0]||[])[0]==14849||(((a[D]||[])[0]||[])[0]==1025?a[D][p]&&a[D][p].itab>0&&(T=a.SheetNames[a[D][p].itab-1]+"!"):T=a.SheetNames[p-1]+"!"),a[D]&&a[D][p])T+=a[D][p].Name;else if(a[0]&&a[0][p])T+=a[0][p].Name;else{var _=(N9(a,D,s)||"").split(";;");_[p-1]?T=_[p-1]:T+="SH33TJSERRX"}l.push(T);break}R||(R={Name:"SH33TJSERRY"}),l.push(R.Name);break;case"PtgParen":var B="(",U=")";if(v>=0){switch(g="",e[0][v][1][0]){case 2:B=zs(" ",e[0][v][1][1])+B;break;case 3:B=zs("\r",e[0][v][1][1])+B;break;case 4:U=zs(" ",e[0][v][1][1])+U;break;case 5:U=zs("\r",e[0][v][1][1])+U;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}l.push(B+l.pop()+U);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var H={c:r.c,r:r.r};if(a.sharedf[un(u)]){var Y=a.sharedf[un(u)];l.push(sl(Y,o,H,a,s))}else{var J=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(sl(d[1],o,H,a,s)),J=!0;break}J||l.push(j[1])}break;case"PtgArray":l.push("{"+Ume(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&re.indexOf(e[0][w][0])==-1){j=e[0][v];var X=!0;switch(j[1][0]){case 4:X=!1;case 0:g=zs(" ",j[1][1]);break;case 5:X=!1;case 1:g=zs("\r",j[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((X?g:"")+l.pop()+(X?"":g)),v=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function zme(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],hl(e,t-2)];var l=Fg(e,o,r);return t!==o+s&&(i=Lg(e,t-o-s,l,r)),e.l=a,[l,i]}function Hme(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],hl(e,t-2)];var l=Fg(e,o,r);return t!==o+s&&(i=Lg(e,t-o-s,l,r)),e.l=a,[l,i]}function Wme(e,t,r,a){var s=e.l+t,i=Fg(e,a,r),o;return s!==e.l&&(o=Lg(e,s-e.l,i,r)),[i,o]}function Vme(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=Fg(e,i,r);return i==65535?[[],hl(e,t-2)]:(t!==i+2&&(s=Lg(e,a-i-2,o,r)),[o,s])}function Gme(e){var t;if(yf(e,e.l+6)!==65535)return[cl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Kme(e){if(e==null){var t=zt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Ih(e);return Ih(0)}function Oj(e,t,r){var a=e.l+t,s=Gu(e);r.biff==2&&++e.l;var i=Gme(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Hme(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Xme(e,t,r,a,s){var i=Lh(t,r,s),o=Kme(e.v),l=zt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=zt(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var f=uo([i,o,l,d]);return f}function Cy(e,t,r){var a=e.read_shift(4),s=Fg(e,a,r),i=e.read_shift(4),o=i>0?Lg(e,i,s,r):null;return[s,o]}var Yme=Cy,Ay=Cy,Jme=Cy,Qme=Cy,Zme={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},j9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},epe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function GD(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function tpe(e){var t="of:="+e.replace(K3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Pj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function rpe(e){return e.replace(/\./,"!")}var hx={},Am={},mx=typeof Map<"u";function J3(e,t,r){var a=0,s=e.length;if(r){if(mx?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=mx?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(mx?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function Ey(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(ll=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=mg(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=Eb(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function yh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function M0(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Af(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function k9(e,t,r,a,s,i){try{a.cellNF&&(e.z=an[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=us(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(an[t]==null&&Af(Zle[t]||"General",t),e.t==="e")e.w=e.w||Uf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=og(e.v);else if(e.t==="d"){var o=zi(e.v);(o|0)===o?e.w=o.toString(10):e.w=og(o)}else{if(e.v===void 0)return"";e.w=Oh(e.v,Am)}else e.t==="d"?e.w=bd(t,zi(e.v),Am):e.w=bd(t,e.v,Am)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Ab(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Ab(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function npe(e,t,r){if(e&&e["!ref"]){var a=ca(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function ape(e,t){var r=ca(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=kn(r))}var spe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ipe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ope=/<(?:\w:)?hyperlink [^>]*>/mg,lpe=/"(\w*:\w*)"/,cpe=/<(?:\w:)?col\b[^>]*[\/]?>/g,dpe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,upe=/<(?:\w:)?pageMargins[^>]*\/>/g,S9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,fpe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,hpe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function mpe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",f=e.match(ipe);f?(d=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):d=u=e;var p=d.match(S9);p?Q3(p[0],l,s,r):(p=d.match(fpe))&&xpe(p[0],p[1]||"",l,s,r);var m=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var b=d.slice(m,m+50).match(lpe);b&&ape(l,b[1])}var v=d.match(hpe);v&&v[1]&&Epe(v[1],s);var g=[];if(t.cellStyles){var w=d.match(cpe);w&&kpe(g,w)}f&&Ppe(f[1],l,t,c,i,o);var y=u.match(dpe);y&&(l["!autofilter"]=_pe(y[0]));var j=[],N=u.match(spe);if(N)for(m=0;m!=N.length;++m)j[m]=ca(N[m].slice(N[m].indexOf('"')+1));var S=u.match(ope);S&&wpe(l,S,a);var E=u.match(upe);if(E&&(l["!margins"]=Npe(hn(E[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=kn(c)),t.sheetRows>0&&l["!ref"]){var A=ca(l["!ref"]);t.sheetRows<=+A.e.r&&(A.e.r=t.sheetRows-1,A.e.r>c.e.r&&(A.e.r=c.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>c.e.c&&(A.e.c=c.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),l["!fullref"]=l["!ref"],l["!ref"]=kn(A))}return g.length>0&&(l["!cols"]=g),j.length>0&&(l["!merges"]=j),l}function ppe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+kn(e[r])+'"/>';return t+"</mergeCells>"}function Q3(e,t,r,a){var s=hn(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=oa(Ma(s.codeName)))}function xpe(e,t,r,a,s){Q3(e.slice(0,e.indexOf(">")),r,a,s)}function gpe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Fu(Aa(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+mr("outlinePr",null,d)}!i&&!l||(s[s.length]=mr("sheetPr",l,o))}var vpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],bpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function ype(e){var t={sheet:1};return vpe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),bpe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=W3(e.password).toString(16).toUpperCase()),mr("sheetProtection",null,t)}function wpe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=hn(Ma(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+oa(i.location))):(i.Target="#"+oa(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=ca(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=un({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function Npe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function jpe(e){return yh(e),mr("pageMargins",null,e)}function kpe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=hn(t[a],!0);s.hidden&&(s.hidden=ls(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,V3(s.width)),j0(s);i<=o;)e[i++]=fs(s)}}function Spe(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=mr("col",null,Ey(s,a)));return r[r.length]="</cols>",r.join("")}function _pe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Cpe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:kn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=sc(s);o.s.r==o.e.r&&(o.e.r=sc(t["!ref"]).e.r,s=kn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),mr("autoFilter",null,{ref:s})}var Ape=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Epe(e,t){t.Views||(t.Views=[{}]),(e.match(Ape)||[]).forEach(function(r,a){var s=hn(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),ls(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function Tpe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),mr("sheetViews",mr("sheetView",null,s),{})}function Ope(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Uf[e.v];break;case"d":a&&a.cellDates?s=us(e.v,-1).toISOString():(e=fs(e),e.t="n",s=""+(e.v=zi(us(e.v)))),typeof e.z>"u"&&(e.z=an[14]);break;default:s=e.v;break}var l=Io("v",Aa(s)),c={r:t},d=M0(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=Io("v",""+J3(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=mr("f",Aa(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),mr("c",l,c)}var Ppe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=lg("v"),o=lg("f");return function(c,d,u,f,p,m){for(var b=0,v="",g=[],w=[],y=0,j=0,N=0,S="",E,A,P=0,D=0,R,T,_=0,B=0,U=Array.isArray(m.CellXf),H,Y=[],J=[],re=Array.isArray(d),X=[],ee={},W=!1,O=!!u.sheetStubs,z=c.split(t),V=0,q=z.length;V!=q;++V){v=z[V].trim();var K=v.length;if(K!==0){var se=0;e:for(b=0;b<K;++b)switch(v[b]){case">":if(v[b-1]!="/"){++b;break e}if(u&&u.cellStyles){if(A=hn(v.slice(se,b),!0),P=A.r!=null?parseInt(A.r,10):P+1,D=-1,u.sheetRows&&u.sheetRows<P)continue;ee={},W=!1,A.ht&&(W=!0,ee.hpt=parseFloat(A.ht),ee.hpx=sp(ee.hpt)),A.hidden=="1"&&(W=!0,ee.hidden=!0),A.outlineLevel!=null&&(W=!0,ee.level=+A.outlineLevel),W&&(X[P-1]=ee)}break;case"<":se=b;break}if(se>=b)break;if(A=hn(v.slice(se,b),!0),P=A.r!=null?parseInt(A.r,10):P+1,D=-1,!(u.sheetRows&&u.sheetRows<P)){f.s.r>P-1&&(f.s.r=P-1),f.e.r<P-1&&(f.e.r=P-1),u&&u.cellStyles&&(ee={},W=!1,A.ht&&(W=!0,ee.hpt=parseFloat(A.ht),ee.hpx=sp(ee.hpt)),A.hidden=="1"&&(W=!0,ee.hidden=!0),A.outlineLevel!=null&&(W=!0,ee.level=+A.outlineLevel),W&&(X[P-1]=ee)),g=v.slice(b).split(e);for(var pe=0;pe!=g.length&&g[pe].trim().charAt(0)=="<";++pe);for(g=g.slice(pe),b=0;b!=g.length;++b)if(v=g[b].trim(),v.length!==0){if(w=v.match(r),y=b,j=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,w!=null&&w.length===2){for(y=0,S=w[1],j=0;j!=S.length&&!((N=S.charCodeAt(j)-64)<1||N>26);++j)y=26*y+N;--y,D=y}else++D;for(j=0;j!=v.length&&v.charCodeAt(j)!==62;++j);if(++j,A=hn(v.slice(0,j),!0),A.r||(A.r=un({r:P-1,c:D})),S=v.slice(j),E={t:""},(w=S.match(i))!=null&&w[1]!==""&&(E.v=oa(w[1])),u.cellFormula){if((w=S.match(o))!=null&&w[1]!==""){if(E.f=oa(Ma(w[1])).replace(/\r\n/g,`
`),u.xlfn||(E.f=zD(E.f)),w[0].indexOf('t="array"')>-1)E.F=(S.match(s)||[])[1],E.F.indexOf(":")>-1&&Y.push([ca(E.F),E.F]);else if(w[0].indexOf('t="shared"')>-1){T=hn(w[0]);var ie=oa(Ma(w[1]));u.xlfn||(ie=zD(ie)),J[parseInt(T.si,10)]=[T,ie,A.r]}}else(w=S.match(/<f[^>]*\/>/))&&(T=hn(w[0]),J[T.si]&&(E.f=Ahe(J[T.si][1],J[T.si][2],A.r)));var le=Ls(A.r);for(j=0;j<Y.length;++j)le.r>=Y[j][0].s.r&&le.r<=Y[j][0].e.r&&le.c>=Y[j][0].s.c&&le.c<=Y[j][0].e.c&&(E.F=Y[j][1])}if(A.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(O)E.t="z";else continue;else E.t=A.t||"n";switch(f.s.c>D&&(f.s.c=D),f.e.c<D&&(f.e.c=D),E.t){case"n":if(E.v==""||E.v==null){if(!O)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!O)continue;E.t="z"}else R=hx[parseInt(E.v,10)],E.v=R.t,E.r=R.r,u.cellHTML&&(E.h=R.h);break;case"str":E.t="s",E.v=E.v!=null?Ma(E.v):"",u.cellHTML&&(E.h=T3(E.v));break;case"inlineStr":w=S.match(a),E.t="s",w!=null&&(R=H3(w[1]))?(E.v=R.t,u.cellHTML&&(E.h=R.h)):E.v="";break;case"b":E.v=ls(E.v);break;case"d":u.cellDates?E.v=us(E.v,1):(E.v=zi(us(E.v,1)),E.t="n");break;case"e":(!u||u.cellText!==!1)&&(E.w=E.v),E.v=CR[E.v];break}if(_=B=0,H=null,U&&A.s!==void 0&&(H=m.CellXf[A.s],H!=null&&(H.numFmtId!=null&&(_=H.numFmtId),u.cellStyles&&H.fillId!=null&&(B=H.fillId))),k9(E,_,B,u,p,m),u.cellDates&&U&&E.t=="n"&&xp(an[_])&&(E.t="d",E.v=Sy(E.v)),A.cm&&u.xlmeta){var $e=(u.xlmeta.Cell||[])[+A.cm-1];$e&&$e.type=="XLDAPR"&&(E.D=!0)}if(re){var he=Ls(A.r);d[he.r]||(d[he.r]=[]),d[he.r][he.c]=E}else d[A.r]=E}}}}X.length>0&&(d["!rows"]=X)}})();function Ipe(e,t,r,a){var s=[],i=[],o=ca(e["!ref"]),l="",c,d="",u=[],f=0,p=0,m=e["!rows"],b=Array.isArray(e),v={r:d},g,w=-1;for(p=o.s.c;p<=o.e.c;++p)u[p]=Ds(p);for(f=o.s.r;f<=o.e.r;++f){for(i=[],d=li(f),p=o.s.c;p<=o.e.c;++p){c=u[p]+d;var y=b?(e[f]||[])[p]:e[c];y!==void 0&&(l=Ope(y,c,e,t))!=null&&i.push(l)}(i.length>0||m&&m[f])&&(v={r:d},m&&m[f]&&(g=m[f],g.hidden&&(v.hidden=1),w=-1,g.hpx?w=pg(g.hpx):g.hpt&&(w=g.hpt),w>-1&&(v.ht=w,v.customHeight=1),g.level&&(v.outlineLevel=g.level)),s[s.length]=mr("row",i.join(""),v))}if(m)for(;f<m.length;++f)m&&m[f]&&(v={r:f+1},g=m[f],g.hidden&&(v.hidden=1),w=-1,g.hpx?w=pg(g.hpx):g.hpt&&(w=g.hpt),w>-1&&(v.ht=w,v.customHeight=1),g.level&&(v.outlineLevel=g.level),s[s.length]=mr("row","",v));return s.join("")}function _9(e,t,r,a){var s=[di,mr("worksheet",null,{xmlns:$h[0],"xmlns:r":Ui.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=ca(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=kn(u)}a||(a={}),c["!comments"]=[];var f=[];gpe(c,r,e,t,s),s[s.length]=mr("dimension",null,{ref:d}),s[s.length]=Tpe(c,t,e,r),t.sheetFormat&&(s[s.length]=mr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Spe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Ipe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=ype(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Cpe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=ppe(c["!merges"]));var p=-1,m,b=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(m={ref:v[0]},v[1].Target.charAt(0)!="#"&&(b=Ca(a,-1,Aa(v[1].Target).replace(/#.*$/,""),Bn.HLINK),m["r:id"]="rId"+b),(p=v[1].Target.indexOf("#"))>-1&&(m.location=Aa(v[1].Target.slice(p+1))),v[1].Tooltip&&(m.tooltip=Aa(v[1].Tooltip)),s[s.length]=mr("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=jpe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Io("ignoredErrors",mr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),f.length>0&&(b=Ca(a,-1,"../drawings/drawing"+(e+1)+".xml",Bn.DRAW),s[s.length]=mr("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=f),c["!comments"].length>0&&(b=Ca(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Bn.VML),s[s.length]=mr("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Dpe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function Lpe(e,t,r){var a=zt(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=pg(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var f=-1,p=-1,m=u<<10;m<u+1<<10;++m){d.c=m;var b=Array.isArray(r)?(r[d.r]||[])[d.c]:r[un(d)];b&&(f<0&&(f=m),p=m)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,p))}var v=a.l;return a.l=c,a.write_shift(4,l),a.l=v,a.length>a.l?a.slice(0,a.l):a}function Fpe(e,t,r,a){var s=Lpe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&Jt(e,0,s)}var Mpe=Vh,Rpe=bp;function Bpe(){}function Upe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=zce(e),r}function qpe(e,t,r){r==null&&(r=zt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return Sb({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),NR(e,r),r.slice(0,r.l)}function $pe(e){var t=Nd(e);return[t]}function zpe(e,t,r){return r==null&&(r=zt(8)),zh(t,r)}function Hpe(e){var t=Hh(e);return[t]}function Wpe(e,t,r){return r==null&&(r=zt(4)),Wh(t,r)}function Vpe(e){var t=Nd(e),r=e.read_shift(1);return[t,r,"b"]}function Gpe(e,t,r){return r==null&&(r=zt(9)),zh(t,r),r.write_shift(1,e.v?1:0),r}function Kpe(e){var t=Hh(e),r=e.read_shift(1);return[t,r,"b"]}function Xpe(e,t,r){return r==null&&(r=zt(5)),Wh(t,r),r.write_shift(1,e.v?1:0),r}function Ype(e){var t=Nd(e),r=e.read_shift(1);return[t,r,"e"]}function Jpe(e,t,r){return r==null&&(r=zt(9)),zh(t,r),r.write_shift(1,e.v),r}function Qpe(e){var t=Hh(e),r=e.read_shift(1);return[t,r,"e"]}function Zpe(e,t,r){return r==null&&(r=zt(8)),Wh(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function exe(e){var t=Nd(e),r=e.read_shift(4);return[t,r,"s"]}function txe(e,t,r){return r==null&&(r=zt(12)),zh(t,r),r.write_shift(4,t.v),r}function rxe(e){var t=Hh(e),r=e.read_shift(4);return[t,r,"s"]}function nxe(e,t,r){return r==null&&(r=zt(8)),Wh(t,r),r.write_shift(4,t.v),r}function axe(e){var t=Nd(e),r=cl(e);return[t,r,"n"]}function sxe(e,t,r){return r==null&&(r=zt(16)),zh(t,r),Ih(e.v,r),r}function C9(e){var t=Hh(e),r=cl(e);return[t,r,"n"]}function ixe(e,t,r){return r==null&&(r=zt(12)),Wh(t,r),Ih(e.v,r),r}function oxe(e){var t=Nd(e),r=B3(e);return[t,r,"n"]}function lxe(e,t,r){return r==null&&(r=zt(12)),zh(t,r),jR(e.v,r),r}function cxe(e){var t=Hh(e),r=B3(e);return[t,r,"n"]}function dxe(e,t,r){return r==null&&(r=zt(8)),Wh(t,r),jR(e.v,r),r}function uxe(e){var t=Nd(e),r=F3(e);return[t,r,"is"]}function fxe(e){var t=Nd(e),r=fl(e);return[t,r,"str"]}function hxe(e,t,r){return r==null&&(r=zt(12+4*e.v.length)),zh(t,r),ho(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mxe(e){var t=Hh(e),r=fl(e);return[t,r,"str"]}function pxe(e,t,r){return r==null&&(r=zt(8+4*e.v.length)),Wh(t,r),ho(e.v,r),r.length>r.l?r.slice(0,r.l):r}function xxe(e,t,r){var a=e.l+t,s=Nd(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=Ay(e,a-e.l,r);o[3]=sl(l,null,s,r.supbooks,r)}else e.l=a;return o}function gxe(e,t,r){var a=e.l+t,s=Nd(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=Ay(e,a-e.l,r);o[3]=sl(l,null,s,r.supbooks,r)}else e.l=a;return o}function vxe(e,t,r){var a=e.l+t,s=Nd(e);s.r=r["!row"];var i=cl(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=Ay(e,a-e.l,r);o[3]=sl(l,null,s,r.supbooks,r)}else e.l=a;return o}function bxe(e,t,r){var a=e.l+t,s=Nd(e);s.r=r["!row"];var i=fl(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=Ay(e,a-e.l,r);o[3]=sl(l,null,s,r.supbooks,r)}else e.l=a;return o}var yxe=Vh,wxe=bp;function Nxe(e,t){return t==null&&(t=zt(4)),t.write_shift(4,e),t}function jxe(e,t){var r=e.l+t,a=Vh(e),s=M3(e),i=fl(e),o=fl(e),l=fl(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function kxe(e,t){var r=zt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));bp({s:Ls(e[0]),e:Ls(e[0])},r),R3("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return ho(s||"",r),ho(e[1].Tooltip||"",r),ho("",r),r.slice(0,r.l)}function Sxe(){}function _xe(e,t,r){var a=e.l+t,s=kR(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Yme(e,a-e.l,r);o[1]=l}else e.l=a;return o}function Cxe(e,t,r){var a=e.l+t,s=Vh(e),i=[s];if(r.cellFormula){var o=Qme(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function Axe(e,t,r){r==null&&(r=zt(18));var a=Ey(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var A9=["left","right","top","bottom","header","footer"];function Exe(e){var t={};return A9.forEach(function(r){t[r]=cl(e)}),t}function Txe(e,t){return t==null&&(t=zt(48)),yh(e),A9.forEach(function(r){Ih(e[r],t)}),t}function Oxe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Pxe(e,t,r){r==null&&(r=zt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Ixe(e){var t=zt(24);return t.write_shift(4,4),t.write_shift(4,1),bp(e,t),t}function Dxe(e,t){return t==null&&(t=zt(66)),t.write_shift(2,e.password?W3(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Lxe(){}function Fxe(){}function Mxe(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,p=!1,m,b,v,g,w,y,j,N,S,E=[];l.biff=12,l["!row"]=0;var A=0,P=!1,D=[],R={},T=l.supbooks||s.supbooks||[[]];if(T.sharedf=R,T.arrayf=D,T.SheetNames=s.SheetNames||s.Sheets.map(function(re){return re.name}),!l.supbooks&&(l.supbooks=T,s.Names))for(var _=0;_<s.Names.length;++_)T[0][_+1]=s.Names[_];var B=[],U=[],H=!1;xg[16]={n:"BrtShortReal",f:C9};var Y;if(Bf(e,function(X,ee,W){if(!p)switch(W){case 148:d=X;break;case 0:m=X,l.sheetRows&&l.sheetRows<=m.r&&(p=!0),N=li(g=m.r),l["!row"]=m.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=sp(X.hpt)),U[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:X[2]},X[2]){case"n":b.v=X[1];break;case"s":j=hx[X[1]],b.v=j.t,b.r=j.r;break;case"b":b.v=!!X[1];break;case"e":b.v=X[1],l.cellText!==!1&&(b.w=Uf[b.v]);break;case"str":b.t="s",b.v=X[1];break;case"is":b.t="s",b.v=X[1].t;break}if((v=o.CellXf[X[0].iStyleRef])&&k9(b,v.numFmtId,null,l,i,o),w=X[0].c==-1?w+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][w]=b):c[Ds(w)+N]=b,l.cellFormula){for(P=!1,A=0;A<D.length;++A){var O=D[A];m.r>=O[0].s.r&&m.r<=O[0].e.r&&w>=O[0].s.c&&w<=O[0].e.c&&(b.F=kn(O[0]),P=!0)}!P&&X.length>3&&(b.f=X[3])}if(u.s.r>m.r&&(u.s.r=m.r),u.s.c>w&&(u.s.c=w),u.e.r<m.r&&(u.e.r=m.r),u.e.c<w&&(u.e.c=w),l.cellDates&&v&&b.t=="n"&&xp(an[v.numFmtId])){var z=fh(b.v);z&&(b.t="d",b.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}Y&&(Y.type=="XLDAPR"&&(b.D=!0),Y=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;b={t:"z",v:void 0},w=X[0].c==-1?w+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][w]=b):c[Ds(w)+N]=b,u.s.r>m.r&&(u.s.r=m.r),u.s.c>w&&(u.s.c=w),u.e.r<m.r&&(u.e.r=m.r),u.e.c<w&&(u.e.c=w),Y&&(Y.type=="XLDAPR"&&(b.D=!0),Y=void 0);break;case 176:E.push(X);break;case 49:Y=((l.xlmeta||{}).Cell||[])[X-1];break;case 494:var V=a["!id"][X.relId];for(V?(X.Target=V.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=V):X.relId==""&&(X.Target="#"+X.loc),g=X.rfx.s.r;g<=X.rfx.e.r;++g)for(w=X.rfx.s.c;w<=X.rfx.e.c;++w)l.dense?(c[g]||(c[g]=[]),c[g][w]||(c[g][w]={t:"z",v:void 0}),c[g][w].l=X):(y=un({c:w,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=X);break;case 426:if(!l.cellFormula)break;D.push(X),S=l.dense?c[g][w]:c[Ds(w)+N],S.f=sl(X[1],u,{r:m.r,c:w},T,l),S.F=kn(X[0]);break;case 427:if(!l.cellFormula)break;R[un(X[0].s)]=X[1],S=l.dense?c[g][w]:c[Ds(w)+N],S.f=sl(X[1],u,{r:m.r,c:w},T,l);break;case 60:if(!l.cellStyles)break;for(;X.e>=X.s;)B[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},H||(H=!0,V3(X.w/256)),j0(B[X.e+1]);break;case 161:c["!autofilter"]={ref:kn(X)};break;case 476:c["!margins"]=X;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),X.name&&(s.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),X.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=kn(d||u)),l.sheetRows&&c["!ref"]){var J=ca(c["!ref"]);l.sheetRows<=+J.e.r&&(J.e.r=l.sheetRows-1,J.e.r>u.e.r&&(J.e.r=u.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>u.e.c&&(J.e.c=u.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),c["!fullref"]=c["!ref"],c["!ref"]=kn(J))}return E.length>0&&(c["!merges"]=E),B.length>0&&(c["!cols"]=B),U.length>0&&(c["!rows"]=U),c}function Rxe(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=fs(t),t.z=t.z||an[14],t.v=zi(us(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=M0(s.cellXfs,t,s),t.l&&i["!links"].push([un(c),t.l]),t.c&&i["!comments"].push([un(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=J3(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Jt(e,18,nxe(t,c)):Jt(e,7,txe(t,c))):(c.t="str",o?Jt(e,17,pxe(t,c)):Jt(e,6,hxe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Jt(e,13,dxe(t,c)):Jt(e,2,lxe(t,c)):o?Jt(e,16,ixe(t,c)):Jt(e,5,sxe(t,c)),!0;case"b":return c.t="b",o?Jt(e,15,Xpe(t,c)):Jt(e,4,Gpe(t,c)),!0;case"e":return c.t="e",o?Jt(e,14,Zpe(t,c)):Jt(e,3,Jpe(t,c)),!0}return o?Jt(e,12,Wpe(t,c)):Jt(e,1,zpe(t,c)),!0}function Bxe(e,t,r,a){var s=ca(t["!ref"]||"A1"),i,o="",l=[];Jt(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=li(u),Fpe(e,t,s,u);var f=!1;if(u<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){u===s.s.r&&(l[p]=Ds(p)),i=l[p]+o;var m=c?(t[u]||[])[p]:t[i];if(!m){f=!1;continue}f=Rxe(e,m,u,p,a,t,f)}}Jt(e,146)}function Uxe(e,t){!t||!t["!merges"]||(Jt(e,177,Nxe(t["!merges"].length)),t["!merges"].forEach(function(r){Jt(e,176,wxe(r))}),Jt(e,178))}function qxe(e,t){!t||!t["!cols"]||(Jt(e,390),t["!cols"].forEach(function(r,a){r&&Jt(e,60,Axe(a,r))}),Jt(e,391))}function $xe(e,t){!t||!t["!ref"]||(Jt(e,648),Jt(e,649,Ixe(ca(t["!ref"]))),Jt(e,650))}function zxe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Ca(r,-1,a[1].Target.replace(/#.*$/,""),Bn.HLINK);Jt(e,494,kxe(a,s))}}),delete t["!links"]}function Hxe(e,t,r,a){if(t["!comments"].length>0){var s=Ca(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Bn.VML);Jt(e,551,R3("rId"+s)),t["!legacy"]=s}}function Wxe(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:kn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=sc(i);l.s.r==l.e.r&&(l.e.r=sc(t["!ref"]).e.r,i=kn(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Jt(e,161,bp(ca(i))),Jt(e,162)}}function Vxe(e,t,r){Jt(e,133),Jt(e,137,Pxe(t,r)),Jt(e,138),Jt(e,134)}function Gxe(e,t){t["!protect"]&&Jt(e,535,Dxe(t["!protect"]))}function Kxe(e,t,r,a){var s=nc(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=ca(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Jt(s,129),(r.vbaraw||o["!outline"])&&Jt(s,147,qpe(l,o["!outline"])),Jt(s,148,Rpe(c)),Vxe(s,o,r.Workbook),qxe(s,o),Bxe(s,o,e,t),Gxe(s,o),Wxe(s,o,r,e),Uxe(s,o),zxe(s,o,a),o["!margins"]&&Jt(s,476,Txe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&$xe(s,o),Hxe(s,o,e,a),Jt(s,130),s.end()}function Xxe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=oa((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function Yxe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var p=Xxe(f);u.s.r=u.s.c=0,u.e.c=l,d=Ds(l),p[0].forEach(function(m,b){o[d+li(b)]={t:"n",v:m,z:p[1]},c=b}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=kn(u)),o}function Jxe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(S9);return l&&Q3(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function Qxe(e,t){e.l+=10;var r=fl(e);return{name:r}}function Zxe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Bf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var Z3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ege=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],tge=[],rge=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function KD(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=ls(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function XD(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=ls(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function E9(e){XD(e.WBProps,Z3),XD(e.CalcPr,rge),KD(e.WBView,ege),KD(e.Sheets,tge),Am.date1904=ls(e.WBProps.date1904)}function nge(e){return!e.Workbook||!e.Workbook.WBProps?"false":ls(e.Workbook.WBProps.date1904)?"true":"false"}var age="][*?/\\".split("");function T9(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return age.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function sge(e,t,r){e.forEach(function(a,s){T9(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function ige(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];sge(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)npe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var oge=/<\w+:workbook/;function lge(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(ml,function(c,d){var u=hn(c);switch(Vu(u[0])){case"<?xml":break;case"<workbook":c.match(oge)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Z3.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ls(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Ma(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=oa(Ma(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Ma(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),ls(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=oa(Ma(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),$h.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return E9(r),r}function O9(e){var t=[di];t[t.length]=mr("workbook",null,{xmlns:$h[0],"xmlns:r":Ui.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Z3.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=mr("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Aa(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=mr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=mr("definedName",Aa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function cge(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Ik(e),r.name=fl(e),r}function dge(e,t){return t||(t=zt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),R3(e.strRelID,t),ho(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function uge(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?fl(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function fge(e,t){t||(t=zt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),NR(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function hge(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function mge(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Hce(e),o=Jme(e,0,r),l=M3(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function pge(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],xg[16]={n:"BrtFRTArchID$",f:hge},Bf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=sl(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),E9(r),r.Names=i,r.supbooks=o,r}function xge(e,t){Jt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Jt(e,156,dge(s))}Jt(e,144)}function gge(e,t){t||(t=zt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ho("SheetJS",t),ho(vb.version,t),ho(vb.version,t),ho("7262",t),t.length>t.l?t.slice(0,t.l):t}function vge(e,t){t||(t=zt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function bge(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(Jt(e,135),Jt(e,158,vge(s)),Jt(e,136))}}function yge(e,t){var r=nc();return Jt(r,131),Jt(r,128,gge()),Jt(r,153,fge(e.Workbook&&e.Workbook.WBProps||null)),bge(r,e),xge(r,e),Jt(r,132),r.end()}function wge(e,t,r){return t.slice(-4)===".bin"?pge(e,r):lge(e,r)}function Nge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Mxe(e,a,r,s,i,o,l):mpe(e,a,r,s,i,o,l)}function jge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Zxe(e,a,r,s,i):Jxe(e,a,r,s,i)}function kge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?_he():Che()}function Sge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?khe():She()}function _ge(e,t,r,a){return t.slice(-4)===".bin"?w0e(e,r,a):c0e(e,r,a)}function Cge(e,t,r){return u9(e,r)}function Age(e,t,r){return t.slice(-4)===".bin"?Afe(e,r):Sfe(e,r)}function Ege(e,t,r){return t.slice(-4)===".bin"?bhe(e,r):dhe(e,r)}function Tge(e,t,r){return t.slice(-4)===".bin"?ohe(e):she(e)}function Oge(e,t,r,a){return r.slice(-4)===".bin"?lhe(e,t,r,a):void 0}function Pge(e,t,r){return t.slice(-4)===".bin"?rhe(e,t,r):ahe(e,t,r)}function Ige(e,t,r){return(t.slice(-4)===".bin"?yge:O9)(e)}function Dge(e,t,r,a,s){return(t.slice(-4)===".bin"?Kxe:_9)(e,r,a,s)}function Lge(e,t,r){return(t.slice(-4)===".bin"?O0e:c9)(e,r)}function Fge(e,t,r){return(t.slice(-4)===".bin"?Ofe:t9)(e,r)}function Mge(e,t,r){return(t.slice(-4)===".bin"?yhe:m9)(e)}function Rge(e){return(e.slice(-4)===".bin"?nhe:f9)()}var P9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,I9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Vd(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(P9),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(I9),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Bge(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(P9),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(I9),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var px;function Uge(e,t){var r=px[e]||oa(e);return r==="General"?Oh(t):bd(r,t)}function qge(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ls(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=us(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[oa(t)]=s}function $ge(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Uf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=og(e.v):e.w=Oh(e.v):e.w=Uge(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=px[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&xp(a)){var s=fh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function zge(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=t0e[a.Pattern]||a.Pattern)}e[t.ID]=t}function Hge(e,t,r,a,s,i,o,l,c,d){var u="General",f=a.StyleID,p={};d=d||{};var m=[],b=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=ls(e);break;case"String":a.t="s",a.r=fD(oa(e)),a.v=e.indexOf("<")>-1?oa(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(us(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=oa(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=CR[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=fD(t||e));break}if($ge(a,u,d),d.cellFormula!==!1)if(a.Formula){var v=oa(a.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),a.f=Cm(v,s),delete a.Formula,a.ArrayRange=="RC"?a.F=Cm("RC:RC",s):a.ArrayRange&&(a.F=Cm(a.ArrayRange,s),c.push([ca(a.F),a.F]))}else for(b=0;b<c.length;++b)s.r>=c[b][0].s.r&&s.r<=c[b][0].e.r&&s.c>=c[b][0].s.c&&s.c<=c[b][0].e.c&&(a.F=c[b][1]);d.cellStyles&&(m.forEach(function(g){!p.patternType&&g.patternType&&(p.patternType=g.patternType)}),a.s=p),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Wge(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Ij(e,t){var r=t||{};gp();var a=Qp(O3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Ma(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=fs(r);return o.type="string",ap.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(je){s.indexOf("<"+je)>=0&&(i=!0)}),i)return Tve(a,r);px={"General Number":"General","General Date":an[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":an[15],"Short Date":an[14],"Long Time":an[19],"Medium Time":an[18],"Short Time":an[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:an[2],Standard:an[4],Percent:an[10],Scientific:an[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},f=[],p=r.dense?[]:{},m="",b={},v={},g=Vd('<Data ss:Type="String">'),w=0,y=0,j=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},E={},A="",P=0,D=[],R={},T={},_=0,B=[],U=[],H={},Y=[],J,re=!1,X=[],ee=[],W={},O=0,z=0,V={Sheets:[],WBProps:{date1904:!1}},q={};dg.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=dg.exec(a);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Hge(a.slice(w,l.index),A,g,c[c.length-1][0]=="comment"?H:b,{c:y,r:j},S,Y[y],v,X,r):(A="",g=Vd(l[0]),w=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(U.length>0&&(b.c=U),(!r.sheetRows||r.sheetRows>j)&&b.v!==void 0&&(r.dense?(p[j]||(p[j]=[]),p[j][y]=b):p[Ds(y)+li(j)]=b),b.HRef&&(b.l={Target:oa(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(O=y+(parseInt(b.MergeAcross,10)|0),z=j+(parseInt(b.MergeDown,10)|0),D.push({s:{c:y,r:j},e:{c:O,r:z}})),!r.sheetStubs)b.MergeAcross?y=O+1:++y;else if(b.MergeAcross||b.MergeDown){for(var se=y;se<=O;++se)for(var pe=j;pe<=z;++pe)(se>y||pe>j)&&(r.dense?(p[pe]||(p[pe]=[]),p[pe][se]={t:"z"}):p[Ds(se)+li(pe)]={t:"z"});y=O+1}else++y;else b=Bge(l[0]),b.Index&&(y=+b.Index-1),y<N.s.c&&(N.s.c=y),y>N.e.c&&(N.e.c=y),l[0].slice(-2)==="/>"&&++y,U=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<N.s.r&&(N.s.r=j),j>N.e.r&&(N.e.r=j),l[0].slice(-2)==="/>"&&(v=Vd(l[0]),v.Index&&(j=+v.Index-1)),y=0,++j):(v=Vd(l[0]),v.Index&&(j=+v.Index-1),W={},(v.AutoFitHeight=="0"||v.Height)&&(W.hpx=parseInt(v.Height,10),W.hpt=pg(W.hpx),ee[j]=W),v.Hidden=="1"&&(W.hidden=!0,ee[j]=W));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));f.push(m),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(p["!ref"]=kn(N),r.sheetRows&&r.sheetRows<=N.e.r&&(p["!fullref"]=p["!ref"],N.e.r=r.sheetRows-1,p["!ref"]=kn(N))),D.length&&(p["!merges"]=D),Y.length>0&&(p["!cols"]=Y),ee.length>0&&(p["!rows"]=ee),u[m]=p}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=y=0,c.push([l[3],!1]),d=Vd(l[0]),m=oa(d.Name),p=r.dense?[]:{},D=[],X=[],ee=[],q={name:m,Hidden:0},V.Sheets.push(q);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Y=[],re=!1}break;case"style":l[1]==="/"?zge(S,E,r):E=Vd(l[0]);break;case"numberformat":E.nf=oa(Vd(l[0]).Format||"General"),px[E.nf]&&(E.nf=px[E.nf]);for(var ie=0;ie!=392&&an[ie]!=E.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(an[ie]==null){Af(E.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(J=Vd(l[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!re&&J.wpx>10){re=!0,ll=o9;for(var le=0;le<Y.length;++le)Y[le]&&j0(Y[le])}re&&j0(J),Y[J.Index-1||Y.length]=J;for(var $e=0;$e<+J.Span;++$e)Y[Y.length]=fs(J);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var he=hn(l[0]),Ue={Name:he.Name,Ref:Cm(he.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(Ue.Sheet=V.Sheets.length-1),V.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?A+=a.slice(P,l.index):P=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=Vd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?pde(R,K,a.slice(_,l.index)):_=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));Wge(H),U.push(H)}else c.push([l[3],!1]),d=Vd(l[0]),H={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Te=Vd(l[0]);p["!autofilter"]={ref:Cm(Te.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return e8(a,r);var oe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:oe=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:oe=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:oe=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:oe=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(_,l.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else _=l.index+l[0].length;break;case"header":p["!margins"]||yh(p["!margins"]={},"xlml"),isNaN(+hn(l[0]).Margin)||(p["!margins"].header=+hn(l[0]).Margin);break;case"footer":p["!margins"]||yh(p["!margins"]={},"xlml"),isNaN(+hn(l[0]).Margin)||(p["!margins"].footer=+hn(l[0]).Margin);break;case"pagemargins":var te=hn(l[0]);p["!margins"]||yh(p["!margins"]={},"xlml"),isNaN(+te.Top)||(p["!margins"].top=+te.Top),isNaN(+te.Left)||(p["!margins"].left=+te.Left),isNaN(+te.Right)||(p["!margins"].right=+te.Right),isNaN(+te.Bottom)||(p["!margins"].bottom=+te.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:oe=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:oe=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:oe=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:oe=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:oe=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:oe=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:oe=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:oe=!1}break;case"smarttags":break;default:oe=!1;break}if(oe||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?qge(T,K,B,a.slice(_,l.index)):(B=l,_=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Pe={};return!r.bookSheets&&!r.bookProps&&(Pe.Sheets=u),Pe.SheetNames=f,Pe.Workbook=V,Pe.SSF=fs(an),Pe.Props=R,Pe.Custprops=T,Pe}function Uk(e,t){switch(t_(t=t||{}),t.type||"base64"){case"base64":return Ij(Dc(e),t);case"binary":case"buffer":case"file":return Ij(e,t);case"array":return Ij(L0(e),t)}}function Vge(e,t){var r=[];return e.Props&&r.push(xde(e.Props,t)),e.Custprops&&r.push(gde(e.Props,e.Custprops)),r.join("")}function Gge(){return""}function Kge(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(mr("NumberFormat",null,{"ss:Format":Aa(an[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(mr("Style",i.join(""),o))}),mr("Styles",r.join(""))}function D9(e){return mr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+X3(e.Ref,{r:0,c:0})})}function Xge(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(D9(s)))}return mr("Names",r.join(""))}function Yge(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(D9(l)))}return i.join("")}function Jge(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(mr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(mr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(mr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(mr("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Io("ProtectContents","True")),e["!protect"].objects&&s.push(Io("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Io("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Io("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Io("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":mr("WorksheetOptions",s.join(""),{xmlns:Sc.x})}function Qge(e){return e.map(function(t){var r=bce(t.t||""),a=mr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return mr("Comment",a,{"ss:Author":t.a})}).join("")}function Zge(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Aa(X3(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Ls(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Aa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Aa(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var f="",p="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=Uf[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||an[14]);break;case"s":f="String",p=vce(e.v||"");break}var m=M0(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var b=e.v!=null?p:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+b+"</Data>";return(e.c||[]).length>0&&(v+=Qge(e.c)),mr("Cell",v,l)}function eve(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=sp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function tve(e,t,r,a){if(!e["!ref"])return"";var s=ca(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,w){j0(g);var y=!!g.width,j=Ey(w,g),N={"ss:Index":w+1};y&&(N["ss:Width"]=hg(j.width)),g.hidden&&(N["ss:Hidden"]="1"),l.push(mr("Column",null,N))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[eve(d,(e["!rows"]||[])[d])],f=s.s.c;f<=s.e.c;++f){var p=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>d)&&!(i[o].e.c<f)&&!(i[o].e.r<d)){(i[o].s.c!=f||i[o].s.r!=d)&&(p=!0);break}if(!p){var m={r:d,c:f},b=un(m),v=c?(e[d]||[])[f]:e[b];u.push(Zge(v,b,e,t,r,a,m))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function rve(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?Yge(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?tve(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(Jge(i,t,e,r)),a.join("")}function nve(e,t){t||(t={}),e.SSF||(e.SSF=fs(an)),e.SSF&&(gp(),Ny(e.SSF),t.revssf=ky(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],M0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Vge(e,t)),r.push(Gge()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(mr("Worksheet",rve(a,t,e),{"ss:Name":Aa(e.SheetNames[a])}));return r[2]=Kge(e,t),r[3]=Xge(e),di+mr("Workbook",r.join(""),{xmlns:Sc.ss,"xmlns:o":Sc.o,"xmlns:x":Sc.x,"xmlns:ss":Sc.ss,"xmlns:dt":Sc.dt,"xmlns:html":Sc.html})}function ave(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Xce(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=Yce(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var sve=[60,1084,2066,2165,2175];function ive(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=yf(r,r.l),d=qk[c],u=0;d!=null&&sve.indexOf(c)>-1;)i=yf(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=qk[c=yf(r,r.l)];var f=uo(o);Po(f,0);var p=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(p),p+=o[m].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function _u(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=an[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Uf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=og(e.v):e.w=Oh(e.v):e.w=bd(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&xp(an[a]||String(a))){var s=fh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function $v(e,t,r){return{v:e,ixfe:t,t:r}}function ove(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},f,p="",m,b,v,g,w={},y=[],j,N,S=[],E=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},D=function(Me){return Me<8?gh[Me]:Me<64&&E[Me-8]||gh[Me]},R=function(Me,et,ut){var bt=et.XF.data;if(!(!bt||!bt.patternType||!ut||!ut.cellStyles)){et.s={},et.s.patternType=bt.patternType;var At;(At=fg(D(bt.icvFore)))&&(et.s.fgColor={rgb:At}),(At=fg(D(bt.icvBack)))&&(et.s.bgColor={rgb:At})}},T=function(Me,et,ut){if(!(W>1)&&!(ut.sheetRows&&Me.r>=ut.sheetRows)){if(ut.cellStyles&&et.XF&&et.XF.data&&R(Me,et,ut),delete et.ixfe,delete et.XF,f=Me,p=un(Me),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Me.r<o.s.r&&(o.s.r=Me.r),Me.c<o.s.c&&(o.s.c=Me.c),Me.r+1>o.e.r&&(o.e.r=Me.r+1),Me.c+1>o.e.c&&(o.e.c=Me.c+1),ut.cellFormula&&et.f){for(var bt=0;bt<y.length;++bt)if(!(y[bt][0].s.c>Me.c||y[bt][0].s.r>Me.r)&&!(y[bt][0].e.c<Me.c||y[bt][0].e.r<Me.r)){et.F=kn(y[bt][0]),(y[bt][0].s.c!=Me.c||y[bt][0].s.r!=Me.r)&&delete et.f,et.f&&(et.f=""+sl(y[bt][1],o,Me,X,_));break}}ut.dense?(s[Me.r]||(s[Me.r]=[]),s[Me.r][Me.c]=et):s[p]=et}},_={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(_.password=t.password);var B,U=[],H=[],Y=[],J=[],re=!1,X=[];X.SheetNames=_.snames,X.sharedf=_.sharedf,X.arrayf=_.arrayf,X.names=[],X.XTI=[];var ee=0,W=0,O=0,z=[],V=[],q;_.codepage=1200,eu(1200);for(var K=!1;e.l<e.length-1;){var se=e.l,pe=e.read_shift(2);if(pe===0&&ee===10)break;var ie=e.l===e.length?0:e.read_shift(2),le=qk[pe];if(le&&le.f){if(t.bookSheets&&ee===133&&pe!==133)break;if(ee=pe,le.r===2||le.r==12){var $e=e.read_shift(2);if(ie-=2,!_.enc&&$e!==pe&&(($e&255)<<8|$e>>8)!==pe)throw new Error("rt mismatch: "+$e+"!="+pe);le.r==12&&(e.l+=10,ie-=10)}var he={};if(pe===10?he=le.f(e,ie,_):he=ive(pe,le,e,ie,_),W==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(pe){case 34:r.opts.Date1904=A.WBProps.date1904=he;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(_.enc||(e.l=0),_.enc=he,!t.password)throw new Error("File is password-protected");if(he.valid==null)throw new Error("Encryption scheme unsupported");if(!he.valid)throw new Error("Password is incorrect");break;case 92:_.lastuser=he;break;case 66:var Ue=Number(he);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}eu(_.codepage=Ue),K=!0;break;case 317:_.rrtabid=he;break;case 25:_.winlocked=he;break;case 439:r.opts.RefreshAll=he;break;case 12:r.opts.CalcCount=he;break;case 16:r.opts.CalcDelta=he;break;case 17:r.opts.CalcIter=he;break;case 13:r.opts.CalcMode=he;break;case 14:r.opts.CalcPrecision=he;break;case 95:r.opts.CalcSaveRecalc=he;break;case 15:_.CalcRefMode=he;break;case 2211:r.opts.FullCalc=he;break;case 129:he.fDialog&&(s["!type"]="dialog"),he.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),he.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(he);break;case 430:X.push([he]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(he);break;case 24:case 536:q={Name:he.Name,Ref:sl(he.rgce,o,null,X,_)},he.itab>0&&(q.Sheet=he.itab-1),X.names.push(q),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(he),he.Name=="_xlnm._FilterDatabase"&&he.itab>0&&he.rgce&&he.rgce[0]&&he.rgce[0][0]&&he.rgce[0][0][0]=="PtgArea3d"&&(V[he.itab-1]={ref:kn(he.rgce[0][0][1][2])});break;case 22:_.ExternCount=he;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(he),X.XTI=X.XTI.concat(he);break;case 2196:if(_.biff<8)break;q!=null&&(q.Comment=he[1]);break;case 18:s["!protect"]=he;break;case 19:he!==0&&_.WTF&&console.error("Password verifier: "+he);break;case 133:i[he.pos]=he,_.snames.push(he.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=kn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Te=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=kn(o),o.e.r=Te}o.e.r++,o.e.c++}U.length>0&&(s["!merges"]=U),H.length>0&&(s["!objects"]=H),Y.length>0&&(s["!cols"]=Y),J.length>0&&(s["!rows"]=J),A.Sheets.push(P)}d===""?u=s:a[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(_.biff===8&&(_.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[he.BIFFVer]||8),_.biffguess=he.BIFFVer==0,he.BIFFVer==0&&he.dt==4096&&(_.biff=5,K=!0,eu(_.codepage=28591)),_.biff==8&&he.BIFFVer==0&&he.dt==16&&(_.biff=2),W++)break;if(s=t.dense?[]:{},_.biff<8&&!K&&(K=!0,eu(_.codepage=t.codepage||1252)),_.biff<5||he.BIFFVer==0&&he.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var oe={pos:e.l-ie,name:d};i[oe.pos]=oe,_.snames.push(d)}else d=(i[se]||{name:""}).name;he.dt==32&&(s["!type"]="chart"),he.dt==64&&(s["!type"]="macro"),U=[],H=[],_.arrayf=y=[],Y=[],J=[],re=!1,P={Hidden:(i[se]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[he.r]||[])[he.c]:s[un({c:he.c,r:he.r})])&&++he.c,j={ixfe:he.ixfe,XF:S[he.ixfe]||{},v:he.val,t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:he.c,r:he.r},j,t);break;case 5:case 517:j={ixfe:he.ixfe,XF:S[he.ixfe],v:he.val,t:he.t},O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:he.c,r:he.r},j,t);break;case 638:j={ixfe:he.ixfe,XF:S[he.ixfe],v:he.rknum,t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:he.c,r:he.r},j,t);break;case 189:for(var te=he.c;te<=he.C;++te){var Pe=he.rkrec[te-he.c][0];j={ixfe:Pe,XF:S[Pe],v:he.rkrec[te-he.c][1],t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:te,r:he.r},j,t)}break;case 6:case 518:case 1030:{if(he.val=="String"){l=he;break}if(j=$v(he.val,he.cell.ixfe,he.tt),j.XF=S[j.ixfe],t.cellFormula){var je=he.formula;if(je&&je[0]&&je[0][0]&&je[0][0][0]=="PtgExp"){var Ie=je[0][0][1][0],ue=je[0][0][1][1],de=un({r:Ie,c:ue});w[de]?j.f=""+sl(he.formula,o,he.cell,X,_):j.F=((t.dense?(s[Ie]||[])[ue]:s[de])||{}).F}else j.f=""+sl(he.formula,o,he.cell,X,_)}O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T(he.cell,j,t),l=he}break;case 7:case 519:if(l)l.val=he,j=$v(he,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+sl(l.formula,o,l.cell,X,_)),O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(he);var Ae=un(he[0].s);if(m=t.dense?(s[he[0].s.r]||[])[he[0].s.c]:s[Ae],t.cellFormula&&m){if(!l||!Ae||!m)break;m.f=""+sl(he[1],o,he[0],X,_),m.F=kn(he[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;w[un(l.cell)]=he[0],m=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[un(l.cell)],(m||{}).f=""+sl(he[0],o,f,X,_)}}break;case 253:j=$v(c[he.isst].t,he.ixfe,"s"),c[he.isst].h&&(j.h=c[he.isst].h),j.XF=S[j.ixfe],O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:he.c,r:he.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:he.ixfe,XF:S[he.ixfe],t:"z"},O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:he.c,r:he.r},j,t));break;case 190:if(t.sheetStubs)for(var Qe=he.c;Qe<=he.C;++Qe){var ge=he.ixfe[Qe-he.c];j={ixfe:ge,XF:S[ge],t:"z"},O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:Qe,r:he.r},j,t)}break;case 214:case 516:case 4:j=$v(he.val,he.ixfe,"s"),j.XF=S[j.ixfe],O>0&&(j.z=z[j.ixfe>>8&63]),_u(j,t,r.opts.Date1904),T({c:he.c,r:he.r},j,t);break;case 0:case 512:W===1&&(o=he);break;case 252:c=he;break;case 1054:if(_.biff==4){z[O++]=he[1];for(var fe=0;fe<O+163&&an[fe]!=he[1];++fe);fe>=163&&Af(he[1],O+163)}else Af(he[1],he[0]);break;case 30:{z[O++]=he;for(var _e=0;_e<O+163&&an[_e]!=he;++_e);_e>=163&&Af(he,O+163)}break;case 229:U=U.concat(he);break;case 93:H[he.cmo[0]]=_.lastobj=he;break;case 438:_.lastobj.TxO=he;break;case 127:_.lastobj.ImData=he;break;case 440:for(g=he[0].s.r;g<=he[0].e.r;++g)for(v=he[0].s.c;v<=he[0].e.c;++v)m=t.dense?(s[g]||[])[v]:s[un({c:v,r:g})],m&&(m.l=he[1]);break;case 2048:for(g=he[0].s.r;g<=he[0].e.r;++g)for(v=he[0].s.c;v<=he[0].e.c;++v)m=t.dense?(s[g]||[])[v]:s[un({c:v,r:g})],m&&m.l&&(m.l.Tooltip=he[1]);break;case 28:{if(_.biff<=5&&_.biff>=2)break;m=t.dense?(s[he[0].r]||[])[he[0].c]:s[un(he[0])];var ze=H[he[2]];m||(t.dense?(s[he[0].r]||(s[he[0].r]=[]),m=s[he[0].r][he[0].c]={t:"z"}):m=s[un(he[0])]={t:"z"},o.e.r=Math.max(o.e.r,he[0].r),o.s.r=Math.min(o.s.r,he[0].r),o.e.c=Math.max(o.e.c,he[0].c),o.s.c=Math.min(o.s.c,he[0].c)),m.c||(m.c=[]),b={a:he[1],t:ze.TxO.t},m.c.push(b)}break;case 2173:K0e(S[he.ixfe],he.ext);break;case 125:{if(!_.cellStyles)break;for(;he.e>=he.s;)Y[he.e--]={width:he.w/256,level:he.level||0,hidden:!!(he.flags&1)},re||(re=!0,V3(he.w/256)),j0(Y[he.e+1])}break;case 520:{var Se={};he.level!=null&&(J[he.r]=Se,Se.level=he.level),he.hidden&&(J[he.r]=Se,Se.hidden=!0),he.hpt&&(J[he.r]=Se,Se.hpt=he.hpt,Se.hpx=sp(he.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||yh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=he;break;case 161:s["!margins"]||yh(s["!margins"]={}),s["!margins"].header=he.header,s["!margins"].footer=he.footer;break;case 574:he.RTL&&(A.Views[0].RTL=!0);break;case 146:E=he;break;case 2198:B=he;break;case 140:N=he;break;case 442:d?P.CodeName=he||P.name:A.WBProps.CodeName=he||"ThisWorkbook";break}}else le||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),e.l+=ie}return r.SheetNames=Ws(i).sort(function(Fe,Me){return Number(Fe)-Number(Me)}).map(function(Fe){return i[Fe].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&V.forEach(function(Fe,Me){r.Sheets[r.SheetNames[Me]]["!autofilter"]=Fe}),r.Strings=c,r.SSF=fs(an),_.enc&&(r.Encryption=_.enc),B&&(r.Themes=B),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),X.names.length>0&&(A.Names=X.names),r.Workbook=A,r}var xx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function lve(e,t,r){var a=Yr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=TD(a,Dk,xx.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Yr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=TD(o,Lk,xx.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(IR(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function cve(e,t){var r=[],a=[],s=[],i=0,o,l=iD(Dk,"n"),c=iD(Lk,"n");if(e.Props)for(o=Ws(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Ws(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)UR.indexOf(s[i][0])>-1||PR.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);a.length&&Yr.utils.cfb_add(t,"/SummaryInformation",OD(a,xx.SI,c,Lk)),(r.length||d.length)&&Yr.utils.cfb_add(t,"/DocumentSummaryInformation",OD(r,xx.DSI,l,Dk,d.length?d:null,xx.UDI))}function L9(e,t){t||(t={}),t_(t),N3(),t.codepage&&w3(t.codepage);var r,a;if(e.FullPaths){if(Yr.find(e,"/encryption"))throw new Error("File is password-protected");r=Yr.find(e,"!CompObj"),a=Yr.find(e,"/Workbook")||Yr.find(e,"/Book")}else{switch(t.type){case"base64":e=Ac(Dc(e));break;case"binary":e=Ac(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Po(e,0),a={content:e}}var s,i;if(r&&ave(r),t.bookProps&&!t.bookSheets)s={};else{var o=In?"buffer":"array";if(a&&a.content)s=ove(a.content,t);else if((i=Yr.find(e,"PerfectOffice_MAIN"))&&i.content)s=bh.to_workbook(i.content,(t.type=o,t));else if((i=Yr.find(e,"NativeContent_MAIN"))&&i.content)s=bh.to_workbook(i.content,(t.type=o,t));else throw(i=Yr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Yr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Nhe(e))}var l={};return e.FullPaths&&lve(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function dve(e,t){var r=t||{},a=Yr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Yr.utils.cfb_add(a,s,F9(e,r)),r.biff==8&&(e.Props||e.Custprops)&&cve(e,a),r.biff==8&&e.vbaraw&&jhe(a,Yr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var xg={0:{f:Dpe},1:{f:$pe},2:{f:oxe},3:{f:Ype},4:{f:Vpe},5:{f:axe},6:{f:fxe},7:{f:exe},8:{f:bxe},9:{f:vxe},10:{f:xxe},11:{f:gxe},12:{f:Hpe},13:{f:cxe},14:{f:Qpe},15:{f:Kpe},16:{f:C9},17:{f:mxe},18:{f:rxe},19:{f:F3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mge},40:{},42:{},43:{f:f0e},44:{f:d0e},45:{f:p0e},46:{f:g0e},47:{f:x0e},48:{},49:{f:Mce},50:{},51:{f:J0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:JR},62:{f:uxe},63:{f:ihe},64:{f:Lxe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:hl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Oxe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Upe},148:{f:Mpe,p:16},151:{f:Sxe},152:{},153:{f:uge},154:{},155:{},156:{f:cge},157:{},158:{},159:{T:1,f:Cfe},160:{T:-1},161:{T:1,f:Vh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:yxe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:X0e},336:{T:-1},337:{f:ehe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Ik},357:{},358:{},359:{},360:{T:1},361:{},362:{f:YR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:_xe},427:{f:Cxe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Exe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Bpe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:jxe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Ik},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ghe},633:{T:1},634:{T:-1},635:{T:1,f:phe},636:{T:-1},637:{f:qce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Qxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Fxe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},qk={6:{f:Oj},10:{f:a0},12:{f:ki},13:{f:ki},14:{f:ri},15:{f:ri},16:{f:cl},17:{f:ri},18:{f:ri},19:{f:ki},20:{f:MD},21:{f:MD},23:{f:YR},24:{f:BD},25:{f:ri},26:{},27:{},28:{f:Fue},29:{},34:{f:ri},35:{f:RD},38:{f:cl},39:{f:cl},40:{f:cl},41:{f:cl},42:{f:ri},43:{f:ri},47:{f:Kfe},49:{f:cue},51:{f:ki},60:{},61:{f:aue},64:{f:ri},65:{f:lue},66:{f:ki},77:{},80:{},81:{},82:{},85:{f:ki},89:{},90:{},91:{},92:{f:Gde},93:{f:Bue},94:{},95:{f:ri},96:{},97:{},99:{f:ri},125:{f:JR},128:{f:kue},129:{f:Xde},130:{f:ki},131:{f:ri},132:{f:ri},133:{f:Yde},134:{},140:{f:Gue},141:{f:ki},144:{},146:{f:Yue},151:{},152:{},153:{},154:{},155:{},156:{f:ki},157:{},158:{},160:{f:nfe},161:{f:Zue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:yue},190:{f:wue},193:{f:a0},197:{},198:{},199:{},200:{},201:{},202:{f:ri},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ki},220:{},221:{f:ri},222:{},224:{f:jue},225:{f:Vde},226:{f:a0},227:{},229:{f:Mue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Qde},253:{f:uue},255:{f:eue},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:qR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ri},353:{f:a0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Eue},431:{f:ri},432:{},433:{},434:{},437:{},438:{f:$ue},439:{f:ri},440:{f:zue},441:{},442:{f:Ig},443:{},444:{f:ki},445:{},446:{},448:{f:a0},449:{f:nue,r:2},450:{f:a0},512:{f:DD},513:{f:rfe},515:{f:Cue},516:{f:hue},517:{f:FD},519:{f:afe},520:{f:tue},523:{},545:{f:UD},549:{f:ID},566:{},574:{f:iue},638:{f:bue},659:{},1048:{},1054:{f:pue},1084:{},1212:{f:Iue},2048:{f:Wue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Bv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:a0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Jue,r:12},2173:{f:G0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ri,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Pue,r:12},2197:{},2198:{f:q0e,r:12},2199:{},2200:{},2201:{},2202:{f:Due,r:12},2203:{f:a0},2204:{},2205:{},2206:{},2207:{},2211:{f:rue},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ki},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:efe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Xue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:DD},1:{},2:{f:cfe},3:{f:ofe},4:{f:ife},5:{f:FD},7:{f:ufe},8:{},9:{f:Bv},11:{},22:{f:ki},30:{f:gue},31:{},32:{},33:{f:UD},36:{},37:{f:ID},50:{f:ffe},62:{},52:{},67:{},68:{f:ki},69:{},86:{},126:{},127:{f:sfe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:hfe},223:{},234:{},354:{},421:{},518:{f:Oj},521:{f:Bv},536:{f:BD},547:{f:RD},561:{},579:{},1030:{f:Oj},1033:{f:Bv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function gr(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&I3(r)&&e.push(r)}}function uve(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return gr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function Mg(e,t,r){return e||(e=zt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function fve(e,t,r,a){var s=zt(9);return Mg(s,e,t),$R(r,a||"b",s),s}function hve(e,t,r){var a=zt(8+2*r.length);return Mg(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function mve(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?zi(us(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?gr(e,2,dfe(r,a,s)):gr(e,3,lfe(r,a,s));return;case"b":case"e":gr(e,5,fve(r,a,t.v,t.t));return;case"s":case"str":gr(e,4,hve(r,a,(t.v||"").slice(0,255)));return}gr(e,1,Mg(null,r,a))}function pve(e,t,r,a){var s=Array.isArray(t),i=ca(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=kn(i)}for(var d=i.s.r;d<=i.e.r;++d){l=li(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=Ds(u)),o=c[u]+l;var f=s?(t[d]||[])[u]:t[o];f&&mve(e,f,d,u)}}}function xve(e,t){for(var r=t||{},a=nc(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return gr(a,r.biff==4?1033:r.biff==3?521:9,z3(e,16,r)),pve(a,e.Sheets[e.SheetNames[s]],s,r),gr(a,10),a.end()}function gve(e,t,r){gr(e,49,due({sz:12,name:"Arial"},r))}function vve(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&gr(e,1054,xue(s,t[s],r))})}function bve(e,t){var r=zt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),gr(e,2151,r),r=zt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),GR(ca(t["!ref"]||"A1"),r),r.write_shift(4,4),gr(e,2152,r)}function yve(e,t){for(var r=0;r<16;++r)gr(e,224,LD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){gr(e,224,LD(a,0,t))})}function wve(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];gr(e,440,Hue(a)),a[1].Tooltip&&gr(e,2048,Vue(a))}delete t["!links"]}function Nve(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&gr(e,125,Que(Ey(s,a),s))})}}function jve(e,t,r,a,s){var i=16+M0(s.cellXfs,t,s);if(t.v==null&&!t.bf){gr(e,513,Lh(r,a,i));return}if(t.bf)gr(e,6,Xme(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?zi(us(t.v)):t.v;gr(e,515,Aue(r,a,o,i));break;case"b":case"e":gr(e,517,_ue(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=J3(s.Strings,t.v,s.revStrings);gr(e,253,fue(r,a,l,i))}else gr(e,516,mue(r,a,(t.v||"").slice(0,255),i,s));break;default:gr(e,513,Lh(r,a,i))}}function kve(e,t,r){var a=nc(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,f="",p=[],m=ca(i["!ref"]||"A1"),b=d?65536:16384;if(m.e.c>255||m.e.r>=b){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,b-1)}gr(a,2057,z3(r,16,t)),gr(a,13,od(1)),gr(a,12,od(100)),gr(a,15,Sl(!0)),gr(a,17,Sl(!1)),gr(a,16,Ih(.001)),gr(a,95,Sl(!0)),gr(a,42,Sl(!1)),gr(a,43,Sl(!1)),gr(a,130,od(1)),gr(a,128,Sue()),gr(a,131,Sl(!1)),gr(a,132,Sl(!1)),d&&Nve(a,i["!cols"]),gr(a,512,vue(m,t)),d&&(i["!links"]=[]);for(var v=m.s.r;v<=m.e.r;++v){f=li(v);for(var g=m.s.c;g<=m.e.c;++g){v===m.s.r&&(p[g]=Ds(g)),u=p[g]+f;var w=c?(i[v]||[])[g]:i[u];w&&(jve(a,w,v,g,t),d&&w.l&&i["!links"].push([u,w.l]))}}var y=l.CodeName||l.name||s;return d&&gr(a,574,oue((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&gr(a,229,Rue(i["!merges"])),d&&wve(a,i),gr(a,442,zR(y)),d&&bve(a,i),gr(a,10),a.end()}function Sve(e,t,r){var a=nc(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(gr(a,2057,z3(e,5,r)),r.bookType=="xla"&&gr(a,135),gr(a,225,l?od(1200):null),gr(a,193,_de(2)),c&&gr(a,191),c&&gr(a,192),gr(a,226),gr(a,92,Kde("SheetJS",r)),gr(a,66,od(l?1200:1252)),l&&gr(a,353,od(0)),l&&gr(a,448),gr(a,317,tfe(e.SheetNames.length)),l&&e.vbaraw&&gr(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";gr(a,442,zR(d))}gr(a,156,od(17)),gr(a,25,Sl(!1)),gr(a,18,Sl(!1)),gr(a,19,od(0)),l&&gr(a,431,Sl(!1)),l&&gr(a,444,od(0)),gr(a,61,sue()),gr(a,64,Sl(!1)),gr(a,141,od(0)),gr(a,34,Sl(nge(e)=="true")),gr(a,14,Sl(!0)),l&&gr(a,439,Sl(!1)),gr(a,218,od(0)),gve(a,e,r),vve(a,e.SSF,r),yve(a,r),l&&gr(a,352,Sl(!1));var u=a.end(),f=nc();l&&gr(f,140,Kue()),l&&r.Strings&&uve(f,252,Zde(r.Strings)),gr(f,10);var p=f.end(),m=nc(),b=0,v=0;for(v=0;v<e.SheetNames.length;++v)b+=(l?12:11)+(l?2:1)*e.SheetNames[v].length;var g=u.length+b+p.length;for(v=0;v<e.SheetNames.length;++v){var w=i[v]||{};gr(m,133,Jde({pos:g,hs:w.Hidden||0,dt:0,name:e.SheetNames[v]},r)),g+=t[v].length}var y=m.end();if(b!=y.length)throw new Error("BS8 "+b+" != "+y.length);var j=[];return u.length&&j.push(u),y.length&&j.push(y),p.length&&j.push(p),uo(j)}function _ve(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=fs(an)),e&&e.SSF&&(gp(),Ny(e.SSF),r.revssf=ky(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,r_(r),r.cellXfs=[],M0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=kve(s,r,e);return a.unshift(Sve(e,a,r)),uo(a)}function F9(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=sc(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return _ve(e,t);case 4:case 3:case 2:return xve(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function YD(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=dce(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,f=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(o=0;o<c.length;++o){var v=c[o].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var w=v.split(/<\/t[dh]>/i);for(l=0;l<w.length;++l){var y=w[l].trim();if(y.match(/<t[dh]/i)){for(var j=y,N=0;j.charAt(0)=="<"&&(N=j.indexOf(">"))>-1;)j=j.slice(N+1);for(var S=0;S<b.length;++S){var E=b[S];E.s.c==u&&E.s.r<d&&d<=E.e.r&&(u=E.e.c+1,S=-1)}var A=hn(y.slice(0,y.indexOf(">")));p=A.colspan?+A.colspan:1,((f=+A.rowspan)>1||p>1)&&b.push({s:{r:d,c:u},e:{r:d+(f||1)-1,c:u+p-1}});var P=A.t||A["data-t"]||"";if(!j.length){u+=p;continue}if(j=iR(j),m.s.r>d&&(m.s.r=d),m.e.r<d&&(m.e.r=d),m.s.c>u&&(m.s.c=u),m.e.c<u&&(m.e.c=u),!j.length){u+=p;continue}var D={t:"s",v:j};r.raw||!j.trim().length||P=="s"||(j==="TRUE"?D={t:"b",v:!0}:j==="FALSE"?D={t:"b",v:!1}:isNaN(iu(j))?isNaN(np(j).getDate())||(D={t:"d",v:us(j)},r.cellDates||(D={t:"n",v:zi(D.v)}),D.z=r.dateNF||an[14]):D={t:"n",v:iu(j)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=D):a[un({r:d,c:u})]=D,u+=p}}}}return a["!ref"]=kn(m),b.length&&(a["!merges"]=b),a}function Cve(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=un({r,c:o}),f=a.dense?(e[r]||[])[o]:e[u],p=f&&f.v!=null&&(f.h||T3(f.w||(Df(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),a.editable?p='<span contenteditable="true">'+p+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),m.id=(a.id||"sjs")+"-"+u,i.push(mr("td",p,m))}}var b="<tr>";return b+i.join("")+"</tr>"}var Ave='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Eve="</body></html>";function Tve(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return F0(YD(r[0],t),t);var a=s_();return r.forEach(function(s,i){i_(a,YD(s,t),"Sheet"+(i+1))}),a}function Ove(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function M9(e,t){var r=t||{},a=r.header!=null?r.header:Ave,s=r.footer!=null?r.footer:Eve,i=[a],o=sc(e["!ref"]);r.dense=Array.isArray(e),i.push(Ove(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Cve(e,o,l,r));return i.push("</table>"+s),i.join("")}function R9(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?Ls(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=sc(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var f=[],p=0,m=e["!rows"]||(e["!rows"]=[]),b=0,v=0,g=0,w=0,y=0,j=0;for(e["!cols"]||(e["!cols"]=[]);b<l.length&&v<c;++b){var N=l[b];if(JD(N)){if(a.display)continue;m[v]={hidden:!0}}var S=N.children;for(g=w=0;g<S.length;++g){var E=S[g];if(!(a.display&&JD(E))){var A=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):iR(E.innerHTML),P=E.getAttribute("data-z")||E.getAttribute("z");for(p=0;p<f.length;++p){var D=f[p];D.s.c==w+i&&D.s.r<v+s&&v+s<=D.e.r&&(w=D.e.c+1-i,p=-1)}j=+E.getAttribute("colspan")||1,((y=+E.getAttribute("rowspan")||1)>1||j>1)&&f.push({s:{r:v+s,c:w+i},e:{r:v+s+(y||1)-1,c:w+i+(j||1)-1}});var R={t:"s",v:A},T=E.getAttribute("data-t")||E.getAttribute("t")||"";A!=null&&(A.length==0?R.t=T||"z":a.raw||A.trim().length==0||T=="s"||(A==="TRUE"?R={t:"b",v:!0}:A==="FALSE"?R={t:"b",v:!1}:isNaN(iu(A))?isNaN(np(A).getDate())||(R={t:"d",v:us(A)},a.cellDates||(R={t:"n",v:zi(R.v)}),R.z=a.dateNF||an[14]):R={t:"n",v:iu(A)})),R.z===void 0&&P!=null&&(R.z=P);var _="",B=E.getElementsByTagName("A");if(B&&B.length)for(var U=0;U<B.length&&!(B[U].hasAttribute("href")&&(_=B[U].getAttribute("href"),_.charAt(0)!="#"));++U);_&&_.charAt(0)!="#"&&(R.l={Target:_}),a.dense?(e[v+s]||(e[v+s]=[]),e[v+s][w+i]=R):e[un({c:w+i,r:v+s})]=R,d.e.c<w+i&&(d.e.c=w+i),w+=j}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),d.e.r=Math.max(d.e.r,v-1+s),e["!ref"]=kn(d),v>=c&&(e["!fullref"]=kn((d.e.r=l.length-b+v-1+s,d))),e}function B9(e,t){var r=t||{},a=r.dense?[]:{};return R9(a,e,t)}function Pve(e,t){return F0(B9(e,t),t)}function JD(e){var t="",r=Ive(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Ive(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Dve(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=oa(t.replace(/<[^>]*>/g,""));return[r]}var QD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function U9(e,t){var r=t||{},a=O3(e),s=[],i,o,l={name:""},c="",d=0,u,f,p={},m=[],b=r.dense?[]:{},v,g,w={value:""},y="",j=0,N=[],S=-1,E=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,D={},R=[],T={},_=0,B=0,U=[],H=1,Y=1,J=[],re={Names:[]},X={},ee=["",""],W=[],O={},z="",V=0,q=!1,K=!1,se=0;for(dg.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=dg.exec(a);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?b["!ref"]=kn(A):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=A.e.r&&(b["!fullref"]=b["!ref"],A.e.r=r.sheetRows-1,b["!ref"]=kn(A)),R.length&&(b["!merges"]=R),U.length&&(b["!rows"]=U),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),m.push(u.name),p[u.name]=b,K=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=hn(v[0],!1),S=E=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,b=r.dense?[]:{},R=[],U=[],K=!0);break;case"table-row-group":v[1]==="/"?--P:++P;break;case"table-row":case"":if(v[1]==="/"){S+=H,H=1;break}if(f=hn(v[0],!1),f.?S=f.-1:S==-1&&(S=0),H=+f["number-rows-repeated"]||1,H<10)for(se=0;se<H;++se)P>0&&(U[S+se]={level:P});E=-1;break;case"covered-table-cell":v[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(b[S]||(b[S]=[]),b[S][E]={t:"z"}):b[un({r:S,c:E})]={t:"z"}),y="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++E,w=hn(v[0],!1),Y=parseInt(w["number-columns-repeated"]||"1",10),g={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(g.f=GD(oa(w.formula))),(w.||w["value-type"])=="string"&&(g.t="s",g.v=oa(w["string-value"]||""),r.dense?(b[S]||(b[S]=[]),b[S][E]=g):b[un({r:S,c:E})]=g),E+=Y-1;else if(v[1]!=="/"){++E,y="",j=0,N=[],Y=1;var pe=H?S+H-1:S;if(E>A.e.c&&(A.e.c=E),E<A.s.c&&(A.s.c=E),S<A.s.r&&(A.s.r=S),pe>A.e.r&&(A.e.r=pe),w=hn(v[0],!1),W=[],O={},g={t:w.||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=oa(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(_=parseInt(w["number-matrix-rows-spanned"],10)||0,B=parseInt(w["number-matrix-columns-spanned"],10)||0,T={s:{r:S,c:E},e:{r:S+_-1,c:E+B-1}},g.F=kn(T),J.push([T,g.F])),w.formula)g.f=GD(w.formula);else for(se=0;se<J.length;++se)S>=J[se][0].s.r&&S<=J[se][0].e.r&&E>=J[se][0].s.c&&E<=J[se][0].e.c&&(g.F=J[se][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(_=parseInt(w["number-rows-spanned"],10)||0,B=parseInt(w["number-columns-spanned"],10)||0,T={s:{r:S,c:E},e:{r:S+_-1,c:E+B-1}},R.push(T)),w["number-columns-repeated"]&&(Y=parseInt(w["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ls(w["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(w.value);break;case"percentage":g.t="n",g.v=parseFloat(w.value);break;case"currency":g.t="n",g.v=parseFloat(w.value);break;case"date":g.t="d",g.v=us(w["date-value"]),r.cellDates||(g.t="n",g.v=zi(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=oce(w["time-value"])/86400,r.cellDates&&(g.t="d",g.v=Sy(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(w.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",w["string-value"]!=null&&(y=oa(w["string-value"]),N=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(q=!1,g.t==="s"&&(g.v=y||"",N.length&&(g.R=N),q=j==0),X.Target&&(g.l=X),W.length>0&&(g.c=W,W=[]),y&&r.cellText!==!1&&(g.w=y),q&&(g.t="z",delete g.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ie=0;ie<H;++ie){if(Y=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(b[S+ie]||(b[S+ie]=[]),b[S+ie][E]=ie==0?g:fs(g);--Y>0;)b[S+ie][E+Y]=fs(g);else for(b[un({r:S+ie,c:E})]=g;--Y>0;)b[un({r:S+ie,c:E+Y})]=fs(g);A.e.c<=E&&(A.e.c=E)}Y=parseInt(w["number-columns-repeated"]||"1",10),E+=Y-1,Y=0,g={},y="",N=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;O.t=y,N.length&&(O.R=N),O.a=z,W.push(O)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);z="",V=0,y="",j=0,N=[];break;case"creator":v[1]==="/"?z=a.slice(V,v.index):V=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);y="",j=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(D[l.name]=c,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(c="",l=hn(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=hn(v[0],!1),c+=QD[v[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=hn(v[0],!1),c+=QD[v[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,v.index);break}else d=v.index+v[0].length;break;case"named-range":o=hn(v[0],!1),ee=Pj(o["cell-range-address"]);var le={Name:o.name,Ref:ee[0]+"!"+ee[1]};K&&(le.Sheet=m.length),re.Names.push(le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!w||!w["string-value"])){var $e=Dve(a.slice(j,v.index));y=(y.length>0?y+`
`:"")+$e[0]}else hn(v[0],!1),j=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{ee=Pj(hn(v[0])["target-range-address"]),p[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(X=hn(v[0],!1),!X.href)break;X.Target=oa(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(ee=Pj(X.Target.slice(1)),X.Target="#"+ee[0]+"!"+ee[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var he={Sheets:p,SheetNames:m,Workbook:re};return r.bookSheets&&delete he.Sheets,he}function ZD(e,t){t=t||{},id(e,"META-INF/manifest.xml")&&ode(ji(e,"META-INF/manifest.xml"),t);var r=Ec(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=U9(Ma(r),t);return id(e,"meta.xml")&&(a.Props=TR(ji(e,"meta.xml"))),a}function e8(e,t){return U9(e,t)}var Lve=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+cg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return di+t}})(),t8=(function(){var e=function(i){return Aa(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Aa(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,f=sc(i["!ref"]||"A1"),p=i["!merges"]||[],m=0,b=Array.isArray(i);if(i["!cols"])for(u=0;u<=f.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var v="",g=i["!rows"]||[];for(d=0;d<f.s.r;++d)v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;d<=f.e.r;++d){for(v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`>
`),u=0;u<f.s.c;++u)c.push(t);for(;u<=f.e.c;++u){var w=!1,y={},j="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>u)&&!(p[m].s.r>d)&&!(p[m].e.c<u)&&!(p[m].e.r<d)){(p[m].s.c!=u||p[m].s.r!=d)&&(w=!0),y["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,y["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(w){c.push(r);continue}var N=un({r:d,c:u}),S=b?(i[d]||[])[u]:i[N];if(S&&S.f&&(y["table:formula"]=Aa(tpe(S.f)),S.F&&S.F.slice(0,N.length)==N)){var E=sc(S.F);y["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,y["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":j=S.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=S.v?"true":"false";break;case"n":j=S.w||String(S.v||0),y["office:value-type"]="float",y["office:value"]=S.v||0;break;case"s":case"str":j=S.v==null?"":S.v,y["office:value-type"]="string";break;case"d":j=S.w||us(S.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=us(S.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(t);continue}var A=e(j);if(S.l&&S.l.Target){var P=S.l.Target;P=P.charAt(0)=="#"?"#"+rpe(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),A=mr("text:a",A,{"xlink:href":P.replace(/&/g,"&amp;")})}c.push("          "+mr("table:table-cell",mr("text:p",A,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var f=d["!cols"][u];if(f.width==null&&f.wpx==null&&f.wch==null)continue;j0(f),f.ods=l;var p=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var f=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[di],d=cg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=cg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(ER().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function q9(e,t){if(t.bookType=="fods")return t8(e,t);var r=C3(),a="",s=[],i=[];return a="mimetype",An(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",An(r,a,t8(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",An(r,a,Lve(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",An(r,a,di+ER()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",An(r,a,dde(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",An(r,a,lde(s)),r}function Fh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function $k(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ma(L0(e))}function Fve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ac(Fu(e))}function Mve(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function S0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function r8(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Rve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function Bve(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function gg(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function _a(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Hs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ma(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=gg(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=gg(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Eo(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(_a(a*8+s.type)),s.type==2&&t.push(_a(s.data.length)),t.push(s.data))})}),S0(t)}function e_(e,t){return e?.map(function(r){return t(r.data)})||[]}function ad(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=gg(e,a),i=ma(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:Hs(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ma(l.data),d=Hs(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Hs(i[3][0].data)>>>0>0),r.push(o)}return r}function cm(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:_a(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:_a(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:_a(o.data.length)}],a[2].push({data:Eo(o.meta),type:2})});var i=Eo(a);t.push(_a(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),S0(t)}function Uve(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=gg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[S0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=S0(s);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function sd(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Uve(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return S0(t)}function dm(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=_a(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return S0(t)}function qve(e,t,r,a){var s=Fh(e),i=s.getUint32(4,!0),o=(a>1?12:8)+r8(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=r8(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(d))f={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function $ve(e,t,r){var a=Fh(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=Rve(e,i),i+=16),s&2&&(d=a.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Dj(e,t){var r=new Uint8Array(32),a=Fh(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Bve(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Lj(e,t){var r=new Uint8Array(32),a=Fh(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function zve(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return qve(e,t,r,e[0]);case 5:return $ve(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function al(e){var t=ma(e);return gg(t[1][0].data)}function n8(e,t){var r=ma(t.data),a=Hs(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=ma(o.data),c=Hs(l[1][0].data)>>>0;switch(a){case 1:i[c]=$k(l[3][0].data);break;case 8:{var d=e[al(l[9][0].data)][0],u=ma(d.data),f=e[al(u[1][0].data)][0],p=Hs(f.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=ma(f.data);i[c]=m[3].map(function(b){return $k(b.data)}).join("")}break}}),i}function Hve(e,t){var r,a,s,i,o,l,c,d,u,f,p,m,b,v,g=ma(e),w=Hs(g[1][0].data)>>>0,y=Hs(g[2][0].data)>>>0,j=((a=(r=g[8])==null?void 0:r[0])==null?void 0:a.data)&&Hs(g[8][0].data)>0||!1,N,S;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&t!=0)N=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=g[6])==null?void 0:c[0])==null?void 0:d.data;else if((f=(u=g[4])==null?void 0:u[0])!=null&&f.data&&t!=1)N=(m=(p=g[4])==null?void 0:p[0])==null?void 0:m.data,S=(v=(b=g[3])==null?void 0:b[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var E=j?4:1,A=Fh(N),P=[],D=0;D<N.length/2;++D){var R=A.getUint16(D*2,!0);R<65535&&P.push([D,R])}if(P.length!=y)throw"Expected ".concat(y," cells, found ").concat(P.length);var T=[];for(D=0;D<P.length-1;++D)T[P[D][0]]=S.subarray(P[D][1]*E,P[D+1][1]*E);return P.length>=1&&(T[P[P.length-1][0]]=S.subarray(P[P.length-1][1]*E)),{R:w,cells:T}}function Wve(e,t){var r,a=ma(t.data),s=(r=a?.[7])!=null&&r[0]?Hs(a[7][0].data)>>>0>0?1:0:-1,i=e_(a[5],function(o){return Hve(o,s)});return{nrows:Hs(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function Vve(e,t,r){var a,s=ma(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Hs(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Hs(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=kn(i);var o=ma(s[4][0].data),l=n8(e,e[al(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?n8(e,e[al(o[17][0].data)][0]):[],d=ma(o[3][0].data),u=0;d[1].forEach(function(f){var p=ma(f.data),m=e[al(p[2][0].data)][0],b=Hs(m.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var v=Wve(e,m);v.data.forEach(function(g,w){g.forEach(function(y,j){var N=un({r:u+w,c:j}),S=zve(y,l,c);S&&(r[N]=S)})}),u+=v.nrows})}function Gve(e,t){var r=ma(t.data),a={"!ref":"A1"},s=e[al(r[2][0].data)],i=Hs(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Vve(e,s[0],a),a}function Kve(e,t){var r,a=ma(t.data),s={name:(r=a[1])!=null&&r[0]?$k(a[1][0].data):"",sheets:[]},i=e_(a[2],al);return i.forEach(function(o){e[o].forEach(function(l){var c=Hs(l.meta[1][0].data);c==6e3&&s.sheets.push(Gve(e,l))})}),s}function Xve(e,t){var r=s_(),a=ma(t.data),s=e_(a[1],al);if(s.forEach(function(i){e[i].forEach(function(o){var l=Hs(o.meta[1][0].data);if(l==2){var c=Kve(e,o);c.sheets.forEach(function(d,u){i_(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Fj(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=sd(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var u;try{u=ad(d)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&Hs(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Hs(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Xve(i,l)}function Yve(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Hs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Fh(e[7][0].data),u=0,f=[],p=Fh(e[4][0].data),m=0,b=[],v=0;v<t.length;++v){if(t[v]==null){d.setUint16(v*2,65535,!0),p.setUint16(v*2,65535);continue}d.setUint16(v*2,u,!0),p.setUint16(v*2,m,!0);var g,w;switch(typeof t[v]){case"string":g=Dj({t:"s",v:t[v]},r),w=Lj({t:"s",v:t[v]},r);break;case"number":g=Dj({t:"n",v:t[v]},r),w=Lj({t:"n",v:t[v]},r);break;case"boolean":g=Dj({t:"b",v:t[v]},r),w=Lj({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(g),u+=g.length,b.push(w),m+=w.length,++c}for(e[2][0].data=_a(c);v<e[7][0].data.length/2;++v)d.setUint16(v*2,65535,!0),p.setUint16(v*2,65535,!0);return e[6][0].data=S0(f),e[3][0].data=S0(b),c}function Jve(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=sc(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(kn(a)));var i=Ob(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(z){return z.forEach(function(V){typeof V=="string"&&o.push(V)})});var l={},c=[],d=Yr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(z,V){return[z,d.FullPaths[V]]}).forEach(function(z){var V=z[0],q=z[1];if(V.type==2&&V.name.match(/\.iwa/)){var K=V.content,se=sd(K),pe=ad(se);pe.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:q,type:Hs(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(z,V){return z-V});var u=c.filter(function(z){return z>1}).map(function(z){return[z,_a(z)]});d.FileIndex.map(function(z,V){return[z,d.FullPaths[V]]}).forEach(function(z){var V=z[0];if(z[1],!!V.name.match(/\.iwa/)){var q=ad(sd(V.content));q.forEach(function(K){K.messages.forEach(function(se){u.forEach(function(pe){K.messages.some(function(ie){return Hs(ie.meta[1][0].data)!=11006&&Mve(ie.data,pe[1])})&&l[pe[0]].deps.push(K.id)})})})}});for(var f=Yr.find(d,l[1].location),p=ad(sd(f.content)),m,b=0;b<p.length;++b){var v=p[b];v.id==1&&(m=v)}var g=al(ma(m.messages[0].data)[1][0].data);for(f=Yr.find(d,l[g].location),p=ad(sd(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);for(g=al(ma(m.messages[0].data)[2][0].data),f=Yr.find(d,l[g].location),p=ad(sd(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);for(g=al(ma(m.messages[0].data)[2][0].data),f=Yr.find(d,l[g].location),p=ad(sd(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);var w=ma(m.messages[0].data);{w[6][0].data=_a(a.e.r+1),w[7][0].data=_a(a.e.c+1);var y=al(w[46][0].data),j=Yr.find(d,l[y].location),N=ad(sd(j.content));{for(var S=0;S<N.length&&N[S].id!=y;++S);if(N[S].id!=y)throw"Bad ColumnRowUIDMapArchive";var E=ma(N[S].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var A=0;A<=a.e.c;++A){var P=[];P[1]=P[2]=[{type:0,data:_a(A+420690)}],E[1].push({type:2,data:Eo(P)}),E[2].push({type:0,data:_a(A)}),E[3].push({type:0,data:_a(A)})}E[4]=[],E[5]=[],E[6]=[];for(var D=0;D<=a.e.r;++D)P=[],P[1]=P[2]=[{type:0,data:_a(D+726270)}],E[4].push({type:2,data:Eo(P)}),E[5].push({type:0,data:_a(D)}),E[6].push({type:0,data:_a(D)});N[S].messages[0].data=Eo(E)}j.content=dm(cm(N)),j.size=j.content.length,delete w[46];var R=ma(w[4][0].data);{R[7][0].data=_a(a.e.r+1);var T=ma(R[1][0].data),_=al(T[2][0].data);j=Yr.find(d,l[_].location),N=ad(sd(j.content));{if(N[0].id!=_)throw"Bad HeaderStorageBucket";var B=ma(N[0].messages[0].data);for(D=0;D<i.length;++D){var U=ma(B[2][0].data);U[1][0].data=_a(D),U[4][0].data=_a(i[D].length),B[2][D]={type:B[2][0].type,data:Eo(U)}}N[0].messages[0].data=Eo(B)}j.content=dm(cm(N)),j.size=j.content.length;var H=al(R[2][0].data);j=Yr.find(d,l[H].location),N=ad(sd(j.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";for(B=ma(N[0].messages[0].data),A=0;A<=a.e.c;++A)U=ma(B[2][0].data),U[1][0].data=_a(A),U[4][0].data=_a(a.e.r+1),B[2][A]={type:B[2][0].type,data:Eo(U)};N[0].messages[0].data=Eo(B)}j.content=dm(cm(N)),j.size=j.content.length;var Y=al(R[4][0].data);(function(){for(var z=Yr.find(d,l[Y].location),V=ad(sd(z.content)),q,K=0;K<V.length;++K){var se=V[K];se.id==Y&&(q=se)}var pe=ma(q.messages[0].data);{pe[3]=[];var ie=[];o.forEach(function(he,Ue){ie[1]=[{type:0,data:_a(Ue)}],ie[2]=[{type:0,data:_a(1)}],ie[3]=[{type:2,data:Fve(he)}],pe[3].push({type:2,data:Eo(ie)})})}q.messages[0].data=Eo(pe);var le=cm(V),$e=dm(le);z.content=$e,z.size=z.content.length})();var J=ma(R[3][0].data);{var re=J[1][0];delete J[2];var X=ma(re.data);{var ee=al(X[2][0].data);(function(){for(var z=Yr.find(d,l[ee].location),V=ad(sd(z.content)),q,K=0;K<V.length;++K){var se=V[K];se.id==ee&&(q=se)}var pe=ma(q.messages[0].data);{delete pe[6],delete J[7];var ie=new Uint8Array(pe[5][0].data);pe[5]=[];for(var le=0,$e=0;$e<=a.e.r;++$e){var he=ma(ie);le+=Yve(he,i[$e],o),he[1][0].data=_a($e),pe[5].push({data:Eo(he),type:2})}pe[1]=[{type:0,data:_a(a.e.c+1)}],pe[2]=[{type:0,data:_a(a.e.r+1)}],pe[3]=[{type:0,data:_a(le)}],pe[4]=[{type:0,data:_a(a.e.r+1)}]}q.messages[0].data=Eo(pe);var Ue=cm(V),Te=dm(Ue);z.content=Te,z.size=z.content.length})()}re.data=Eo(X)}R[3][0].data=Eo(J)}w[4][0].data=Eo(R)}m.messages[0].data=Eo(w);var W=cm(p),O=dm(W);return f.content=O,f.size=f.content.length,d}function $9(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function t_(e){$9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function r_(e){$9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Qve(e){return Bn.WS.indexOf(e)>-1?"sheet":e==Bn.CS?"chart":e==Bn.DS?"dialog":e==Bn.MS?"macro":e&&e.length?e:"sheet"}function Zve(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Qve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function e1e(e,t,r,a,s,i,o,l,c,d,u,f){try{i[a]=fx(Ec(e,r,!0),t);var p=ji(e,t),m;switch(l){case"sheet":m=Nge(p,t,s,c,i[a],d,u,f);break;case"chart":if(m=jge(p,t,s,c,i[a],d,u,f),!m||!m["!drawel"])break;var b=ex(m["!drawel"].Target,t),v=ug(b),g=che(Ec(e,b,!0),fx(Ec(e,v,!0),b)),w=ex(g,b),y=ug(w);m=Yxe(Ec(e,w,!0),w,c,fx(Ec(e,y,!0),w),d,m);break;case"macro":m=kge(p,t,s,c,i[a],d,u,f);break;case"dialog":m=Sge(p,t,s,c,i[a],d,u,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=m;var j=[];i&&i[a]&&Ws(i[a]).forEach(function(N){var S="";if(i[a][N].Type==Bn.CMNT){S=ex(i[a][N].Target,t);var E=Ege(ji(e,S,!0),S,c);if(!E||!E.length)return;$D(m,E,!1)}i[a][N].Type==Bn.TCMNT&&(S=ex(i[a][N].Target,t),j=j.concat(uhe(ji(e,S,!0),c)))}),j&&j.length&&$D(m,j,!0,c.people||[])}catch(N){if(c.WTF)throw N}}function td(e){return e.charAt(0)=="/"?e.slice(1):e}function t1e(e,t){if(gp(),t=t||{},t_(t),id(e,"META-INF/manifest.xml")||id(e,"objectdata.xml"))return ZD(e,t);if(id(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Fj<"u"){if(e.FileIndex)return Fj(e);var r=Yr.utils.cfb_new();return cD(e).forEach(function(U){An(r,U,fce(e,U))}),Fj(r)}throw new Error("Unsupported NUMBERS file")}if(!id(e,"[Content_Types].xml"))throw id(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):id(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=cD(e),s=sde(Ec(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",ji(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!ji(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(hx=[],s.sst)try{hx=Age(ji(e,td(s.sst)),s.sst,t)}catch(U){if(t.WTF)throw U}t.cellStyles&&s.themes.length&&(c=Cge(Ec(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=_ge(ji(e,td(s.style)),s.style,c,t))}s.links.map(function(U){try{var H=fx(Ec(e,ug(td(U))),U);return Oge(ji(e,td(U)),H,U,t)}catch{}});var u=wge(ji(e,td(s.workbooks[0])),s.workbooks[0],t),f={},p="";s.coreprops.length&&(p=ji(e,td(s.coreprops[0]),!0),p&&(f=TR(p)),s.extprops.length!==0&&(p=ji(e,td(s.extprops[0]),!0),p&&fde(p,f,t)));var m={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=Ec(e,td(s.custprops[0]),!0),p&&(m=mde(p,t)));var b={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(H){return H.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(b.Props=f,b.Custprops=m),t.bookSheets&&typeof o<"u"&&(b.SheetNames=o),t.bookSheets?b.SheetNames:t.bookProps))return b;o={};var v={};t.bookDeps&&s.calcchain&&(v=Tge(ji(e,td(s.calcchain)),s.calcchain));var g=0,w={},y,j;{var N=u.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var S=0;S!=N.length;++S)f.SheetNames[S]=N[S].name}var E=i?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),P=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");id(e,P)||(P="xl/_rels/workbook."+E+".rels");var D=fx(Ec(e,P,!0),P.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Pge(ji(e,td(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=hhe(ji(e,td(s.people[0])),t)),D&&(D=Zve(D,u.Sheets));var R=ji(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var T="sheet";if(D&&D[g]?(y="xl/"+D[g][1].replace(/[\/]?xl\//,""),id(e,y)||(y=D[g][1]),id(e,y)||(y=P.replace(/_rels\/.*$/,"")+D[g][1]),T=D[g][2]):(y="xl/worksheets/sheet"+(g+1-R)+"."+E,y=y.replace(/sheet0\./,"sheet.")),j=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var _=!1,B=0;B!=t.sheets.length;++B)typeof t.sheets[B]=="number"&&t.sheets[B]==g&&(_=1),typeof t.sheets[B]=="string"&&t.sheets[B].toLowerCase()==f.SheetNames[g].toLowerCase()&&(_=1);if(!_)continue e}}e1e(e,y,j,f.SheetNames[g],g,w,o,T,t,u,c,d)}return b={Directory:s,Workbook:u,Props:f,Custprops:m,Deps:v,Sheets:o,SheetNames:f.SheetNames,Strings:hx,Styles:d,Themes:c,SSF:fs(an)},t&&t.bookFiles&&(e.files?(b.keys=a,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(U,H){U=U.replace(/^Root Entry[\/]/,""),b.keys.push(U),b.files[U]=e.FileIndex[H]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=ji(e,td(s.vba[0]),!0):s.defaults&&s.defaults.bin===whe&&(b.vbaraw=ji(e,"xl/vbaProject.bin",!0))),b}function r1e(e,t){var r=t||{},a="Workbook",s=Yr.find(e,a);try{if(a="/!DataSpaces/Version",s=Yr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(Pfe(s.content),a="/!DataSpaces/DataSpaceMap",s=Yr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=Dfe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Yr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=Lfe(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Yr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);Mfe(s.content)}catch{}if(a="/EncryptionInfo",s=Yr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=Rfe(s.content);if(a="/EncryptedPackage",s=Yr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function n1e(e,t){return t.bookType=="ods"?q9(e,t):t.bookType=="numbers"?Jve(e,t):t.bookType=="xlsb"?a1e(e,t):s1e(e,t)}function a1e(e,t){bm=1024,e&&!e.SSF&&(e.SSF=fs(an)),e&&e.SSF&&(gp(),Ny(e.SSF),t.revssf=ky(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=p9.indexOf(t.bookType)>-1,s=q3();r_(t=t||{});var i=C3(),o="",l=0;if(t.cellXfs=[],M0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",An(i,o,OR(e.Props,t)),s.coreprops.push(o),Ca(t.rels,2,o,Bn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,An(i,o,DR(e.Props)),s.extprops.push(o),Ca(t.rels,3,o,Bn.EXT_PROPS),e.Custprops!==e.Props&&Ws(e.Custprops||{}).length>0&&(o="docProps/custom.xml",An(i,o,LR(e.Custprops)),s.custprops.push(o),Ca(t.rels,4,o,Bn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,An(i,o,Dge(l-1,o,t,e,u)),s.sheets.push(o),Ca(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Bn.WS[0]),f){var m=f["!comments"],b=!1,v="";m&&m.length>0&&(v="xl/comments"+l+"."+r,An(i,v,Mge(m,v)),s.comments.push(v),Ca(u,-1,"../comments"+l+"."+r,Bn.CMNT),b=!0),f["!legacy"]&&b&&An(i,"xl/drawings/vmlDrawing"+l+".vml",h9(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&An(i,ug(o),_m(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,An(i,o,Fge(t.Strings,o,t)),s.strs.push(o),Ca(t.wbrels,-1,"sharedStrings."+r,Bn.SST)),o="xl/workbook."+r,An(i,o,Ige(e,o)),s.workbooks.push(o),Ca(t.rels,1,o,Bn.WB),o="xl/theme/theme1.xml",An(i,o,G3(e.Themes,t)),s.themes.push(o),Ca(t.wbrels,-1,"theme/theme1.xml",Bn.THEME),o="xl/styles."+r,An(i,o,Lge(e,o,t)),s.styles.push(o),Ca(t.wbrels,-1,"styles."+r,Bn.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",An(i,o,e.vbaraw),s.vba.push(o),Ca(t.wbrels,-1,"vbaProject.bin",Bn.VBA)),o="xl/metadata."+r,An(i,o,Rge(o)),s.metadata.push(o),Ca(t.wbrels,-1,"metadata."+r,Bn.XLMETA),An(i,"[Content_Types].xml",AR(s,t)),An(i,"_rels/.rels",_m(t.rels)),An(i,"xl/_rels/workbook."+r+".rels",_m(t.wbrels)),delete t.revssf,delete t.ssf,i}function s1e(e,t){bm=1024,e&&!e.SSF&&(e.SSF=fs(an)),e&&e.SSF&&(gp(),Ny(e.SSF),t.revssf=ky(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=p9.indexOf(t.bookType)>-1,s=q3();r_(t=t||{});var i=C3(),o="",l=0;if(t.cellXfs=[],M0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",An(i,o,OR(e.Props,t)),s.coreprops.push(o),Ca(t.rels,2,o,Bn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,An(i,o,DR(e.Props)),s.extprops.push(o),Ca(t.rels,3,o,Bn.EXT_PROPS),e.Custprops!==e.Props&&Ws(e.Custprops||{}).length>0&&(o="docProps/custom.xml",An(i,o,LR(e.Custprops)),s.custprops.push(o),Ca(t.rels,4,o,Bn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},p=e.Sheets[e.SheetNames[l-1]],m=(p||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,An(i,o,_9(l-1,t,e,f)),s.sheets.push(o),Ca(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Bn.WS[0]),p){var b=p["!comments"],v=!1,g="";if(b&&b.length>0){var w=!1;b.forEach(function(y){y[1].forEach(function(j){j.T==!0&&(w=!0)})}),w&&(g="xl/threadedComments/threadedComment"+l+"."+r,An(i,g,fhe(b,u,t)),s.threadedcomments.push(g),Ca(f,-1,"../threadedComments/threadedComment"+l+"."+r,Bn.TCMNT)),g="xl/comments"+l+"."+r,An(i,g,m9(b)),s.comments.push(g),Ca(f,-1,"../comments"+l+"."+r,Bn.CMNT),v=!0}p["!legacy"]&&v&&An(i,"xl/drawings/vmlDrawing"+l+".vml",h9(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&An(i,ug(o),_m(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,An(i,o,t9(t.Strings,t)),s.strs.push(o),Ca(t.wbrels,-1,"sharedStrings."+r,Bn.SST)),o="xl/workbook."+r,An(i,o,O9(e)),s.workbooks.push(o),Ca(t.rels,1,o,Bn.WB),o="xl/theme/theme1.xml",An(i,o,G3(e.Themes,t)),s.themes.push(o),Ca(t.wbrels,-1,"theme/theme1.xml",Bn.THEME),o="xl/styles."+r,An(i,o,c9(e,t)),s.styles.push(o),Ca(t.wbrels,-1,"styles."+r,Bn.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",An(i,o,e.vbaraw),s.vba.push(o),Ca(t.wbrels,-1,"vbaProject.bin",Bn.VBA)),o="xl/metadata."+r,An(i,o,f9()),s.metadata.push(o),Ca(t.wbrels,-1,"metadata."+r,Bn.XLMETA),u.length>1&&(o="xl/persons/person.xml",An(i,o,mhe(u)),s.people.push(o),Ca(t.wbrels,-1,"persons/person.xml",Bn.PEOPLE)),An(i,"[Content_Types].xml",AR(s,t)),An(i,"_rels/.rels",_m(t.rels)),An(i,"xl/_rels/workbook."+r+".rels",_m(t.wbrels)),delete t.revssf,delete t.ssf,i}function n_(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Dc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function i1e(e,t){return Yr.find(e,"EncryptedPackage")?r1e(e,t):L9(e,t)}function o1e(e,t){var r,a=e,s=t||{};return s.type||(s.type=In&&Buffer.isBuffer(e)?"buffer":"base64"),r=nR(a,s),t1e(r,s)}function z9(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Uk(e.slice(r),t);default:break e}return ap.to_workbook(e,t)}function l1e(e,t){var r="",a=n_(e,t);switch(t.type){case"base64":r=Dc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Ph(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Ma(r)),t.type="binary",z9(r,t)}function c1e(e,t){var r=e;return t.type=="base64"&&(r=Dc(r)),r=sg.utils.decode(1200,r.slice(2),"str"),t.type="binary",z9(r,t)}function d1e(e){return e.match(/[^\x00-\x7F]/)?Fu(e):e}function Mj(e,t,r,a){return a?(r.type="string",ap.to_workbook(e,r)):ap.to_workbook(t,r)}function Tb(e,t){N3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Tb(new Uint8Array(e),(r=fs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Am={},r.dateNF&&(Am.dateNF=r.dateNF),r.type||(r.type=In&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=In?"buffer":"binary",a=ace(e),typeof Uint8Array<"u"&&!In&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=d1e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=fs(r),r.type="array",Tb(j3(a),r)}switch((s=n_(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return i1e(Yr.read(a,r),r);break;case 9:if(s[1]<=8)return L9(a,r);break;case 60:return Uk(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return pfe(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return ZR.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?o1e(a,r):Mj(e,a,r,i);case 239:return s[3]===60?Uk(a,r):Mj(e,a,r,i);case 255:if(s[1]===254)return c1e(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return bh.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return bh.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return Bk.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return i9.to_workbook(a,r);break;case 10:case 13:case 32:return l1e(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return mfe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Bk.to_workbook(a,r):Mj(e,a,r,i)}function H9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Tg(t.file,Yr.write(e,{type:In?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Yr.write(e,t)}function u1e(e,t){var r=fs(t||{}),a=n1e(e,r);return f1e(a,r)}function f1e(e,t){var r={},a=In?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Yr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(wy(s))}return t.password&&typeof encrypt_agile<"u"?H9(encrypt_agile(s,t.password),t):t.type==="file"?Tg(t.file,s):t.type=="string"?Ma(s):s}function h1e(e,t){var r=t||{},a=dve(e,r);return H9(a,r)}function Eu(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return ig(Fu(a));case"binary":return Fu(a);case"string":return e;case"file":return Tg(t.file,a,"utf8");case"buffer":return In?Rf(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):Eu(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function m1e(e,t){switch(t.type){case"base64":return ig(e);case"binary":return e;case"string":return e;case"file":return Tg(t.file,e,"binary");case"buffer":return In?Rf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function zv(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?ig(r):t.type=="string"?Ma(r):r;case"file":return Tg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function W9(e,t){N3(),ige(e);var r=fs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=W9(e,r);return r.type="array",wy(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Eu(nve(e,r),r);case"slk":case"sylk":return Eu(QR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Eu(M9(e.Sheets[e.SheetNames[s]],r),r);case"txt":return m1e(V9(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Eu(a_(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Eu(ZR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return zv(Bk.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Eu(ap.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Eu(i9.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Eu(e9.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Eu(q9(e,r),r);case"wk1":return zv(bh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return zv(bh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),zv(F9(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),h1e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return u1e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function p1e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function x1e(e,t,r){var a={};return a.type="file",a.file=t,p1e(a),W9(e,a)}function g1e(e,t,r,a,s,i,o,l){var c=li(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var b=o?e[r][m]:e[a[m]+c];if(b===void 0||b.t===void 0){if(d===void 0)continue;i[m]!=null&&(p[i[m]]=d);continue}var v=b.v;switch(b.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[m]!=null){if(v==null)if(b.t=="e"&&v===null)p[i[m]]=null;else if(d!==void 0)p[i[m]]=d;else if(u&&v===null)p[i[m]]=null;else continue;else p[i[m]]=u&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?v:Df(b,v,l);v!=null&&(f=!1)}}return{row:p,isempty:f}}function Ob(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=ca(u);break;case"number":c=ca(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(s=0);var f=li(c.s.r),p=[],m=[],b=0,v=0,g=Array.isArray(e),w=c.s.r,y=0,j={};g&&!e[w]&&(e[w]=[]);var N=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(N[y]||{}).hidden)switch(p[y]=Ds(y),r=g?e[w][y]:e[p[y]+f],a){case 1:i[y]=y-c.s.c;break;case 2:i[y]=p[y];break;case 3:i[y]=d.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Df(r,null,d),v=j[o]||0,!v)j[o]=1;else{do l=o+"_"+v++;while(j[l]);j[o]=v,j[l]=1}i[y]=l}for(w=c.s.r+s;w<=c.e.r;++w)if(!(S[w]||{}).hidden){var E=g1e(e,c,w,p,a,i,g,d);(E.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(m[b++]=E.row)}return m.length=b,m}var a8=/"/g;function v1e(e,t,r,a,s,i,o,l){for(var c=!0,d=[],u="",f=li(r),p=t.s.c;p<=t.e.c;++p)if(a[p]){var m=l.dense?(e[r]||[])[p]:e[a[p]+f];if(m==null)u="";else if(m.v!=null){c=!1,u=""+(l.rawNumbers&&m.t=="n"?m.v:Df(m,null,l));for(var b=0,v=0;b!==u.length;++b)if((v=u.charCodeAt(b))===s||v===i||v===34||l.forceQuotes){u='"'+u.replace(a8,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(c=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(a8,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function a_(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=ca(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];a.dense=Array.isArray(e);for(var p=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(p[b]||{}).hidden||(f[b]=Ds(b));for(var v=0,g=s.s.r;g<=s.e.r;++g)(m[g]||{}).hidden||(u=v1e(e,s,g,f,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((v++?l:"")+u)));return delete a.dense,r.join("")}function V9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=a_(e,t);return r}function b1e(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=ca(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Ds(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=li(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function G9(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Ls(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var f=ca(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var p=a.header||[],m=0;t.forEach(function(v,g){Ws(v).forEach(function(w){(m=p.indexOf(w))==-1&&(p[m=p.length]=w);var y=v[w],j="z",N="",S=un({c:l+m,r:o+g+s});d=vg(i,S),y&&typeof y=="object"&&!(y instanceof Date)?i[S]=y:(typeof y=="number"?j="n":typeof y=="boolean"?j="b":typeof y=="string"?j="s":y instanceof Date?(j="d",a.cellDates||(j="n",y=zi(y)),N=a.dateNF||an[14]):y===null&&a.nullError&&(j="e",y=0),d?(d.t=j,d.v=y,delete d.w,delete d.R,N&&(d.z=N)):i[S]=d={t:j,v:y},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,l+p.length-1);var b=li(o);if(s)for(m=0;m<p.length;++m)i[Ds(m+l)+b]={t:"s",v:p[m]};return i["!ref"]=kn(u),i}function y1e(e,t){return G9(null,e,t)}function vg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Ls(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?vg(e,un(t)):vg(e,un({r:t,c:r||0}))}function w1e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function s_(){return{SheetNames:[],Sheets:{}}}function i_(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(T9(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function N1e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=w1e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function j1e(e,t){return e.z=t,e}function K9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function k1e(e,t,r){return K9(e,"#"+t,r)}function S1e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function _1e(e,t,r,a){for(var s=typeof t!="string"?t:ca(t),i=typeof t=="string"?t:kn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=vg(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Q0={encode_col:Ds,encode_row:li,encode_cell:un,encode_range:kn,decode_col:L3,decode_row:D3,split_cell:Fce,decode_cell:Ls,decode_range:sc,format_cell:Df,sheet_add_aoa:wR,sheet_add_json:G9,sheet_add_dom:R9,aoa_to_sheet:vp,json_to_sheet:y1e,table_to_sheet:B9,table_to_book:Pve,sheet_to_csv:a_,sheet_to_txt:V9,sheet_to_json:Ob,sheet_to_html:M9,sheet_to_formulae:b1e,sheet_to_row_object_array:Ob,sheet_get_cell:vg,book_new:s_,book_append_sheet:i_,book_set_sheet_visibility:N1e,cell_set_number_format:j1e,cell_set_hyperlink:K9,cell_set_internal_link:k1e,cell_add_comment:S1e,sheet_set_array_formula:_1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const C1e={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},A1e=["header","bold","italic","underline","list","bullet","link","image"],o_=({value:e,onChange:t,placeholder:r="Enter text...",readOnly:a=!1,className:s=""})=>n.jsx("div",{className:s,children:n.jsx(b3,{theme:"snow",value:e||"",onChange:t,modules:a?{toolbar:!1}:C1e,formats:A1e,readOnly:a,placeholder:r})}),X9=({content:e,className:t=""})=>{if(!e||e.trim()==="")return null;const r=ag.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","ul","ol","li","a","img","h1","h2","h3"],ALLOWED_ATTR:["href","src","alt","class","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});return n.jsx("div",{className:t+" [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1",dangerouslySetInnerHTML:{__html:r}})},wf={all:["tasks"],lists:()=>[...wf.all,"list"],list:e=>[...wf.lists(),e],details:()=>[...wf.all,"detail"],detail:e=>[...wf.details(),e]},E1e=(e,t,r)=>ks({queryKey:wf.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const a=await gy(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:a=>a}),T1e=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>{const s=await aM(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:wf.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to create task")}})},O1e=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async({id:a,data:s})=>{const i=await hb(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:wf.lists()}),e.invalidateQueries({queryKey:wf.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to update task")}})},P1e=()=>{const e=Oa(),{showSuccess:t,showError:r}=jn();return ci({mutationFn:async a=>(await sM(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:wf.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to delete task")}})},tx={all:["projects"],lists:()=>[...tx.all,"list"],list:e=>[...tx.lists(),e],details:()=>[...tx.all,"detail"],detail:e=>[...tx.details(),e]},I1e=(e,t,r)=>ks({queryKey:tx.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const a=await D0(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:60*1e3,refetchInterval:120*1e3,placeholderData:a=>a}),D1e=({onCreateTask:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=jn(),i=Oa(),{data:o=[],isLoading:l,error:c}=E1e(),{data:d=[],isLoading:u}=I1e(),{data:f=[],isLoading:p}=g3(),m=O1e(),b=P1e();T1e();const v=l||u||p,[g,w]=I.useState(""),[y,j]=I.useState("active"),[N,S]=I.useState("list"),[E,A]=I.useState("none"),[P,D]=I.useState(!1),[R,T]=I.useState("upload"),[_,B]=I.useState([]),[U,H]=I.useState([]),[Y,J]=I.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[re,X]=I.useState(!1),[ee,W]=I.useState(null),[O,z]=I.useState(null),[V,q]=I.useState(null),[K,se]=I.useState(null),[pe,ie]=I.useState(null),[le,$e]=I.useState(null),[he,Ue]=I.useState(!1),[Te,oe]=I.useState(!1),[te,Pe]=I.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[je,Ie]=I.useState([]),[ue,de]=I.useState(!1),[Ae,Qe]=I.useState(!1),[ge,fe]=I.useState(!1),[_e,ze]=I.useState(!1),[Se,Fe]=I.useState(""),[Me,et]=I.useState(""),[ut,bt]=I.useState(""),[At,qt]=I.useState(null),[Gt,Ye]=I.useState(!1),[Et,Cr]=I.useState(null),[tr,Or]=I.useState(null),[pr,rt]=I.useState(!1),[Dt,yr]=I.useState(""),[kr,Xr]=I.useState(0),[Sr,pn]=I.useState([]),[rr,On]=I.useState(!1),[Hr,sn]=I.useState([]),[jr,Gr]=I.useState(!1),Ne=I.useRef(null),He=I.useRef(null),Be=I.useRef(null),xe=Ke=>{const Bt=Ke.getFullYear(),It=Ke.getMonth(),dr=Ke.getDate();return`${Bt}-${String(It+1).padStart(2,"0")}-${String(dr).padStart(2,"0")}`},Ce=Ke=>{if(!Ke||!/^\d{4}-\d{2}-\d{2}$/.test(Ke))return Ke;const[Bt,It,dr]=Ke.split("-").map(Number);return new Date(Bt,It-1,dr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Re=Ke=>{const Bt=new Date(Ke),It=Bt.getDay(),dr=Bt.getDate()-It+(It===0?-6:1);return new Date(Bt.setDate(dr))},tt=Ke=>{const Bt=new Date(Ke);Bt.setHours(0,0,0,0);const It=new Date(Bt);return It.setDate(Bt.getDate()+6),It.setHours(23,59,59,999),{start:Bt,end:It}},ht=Ke=>{if(!Ke||!/^\d{4}-\d{2}-\d{2}$/.test(Ke))return null;const[Bt,It,dr]=Ke.split("-").map(Number),Nr=new Date(Bt,It-1,dr),vr=Re(Nr);return`${vr.getFullYear()}-${String(vr.getMonth()+1).padStart(2,"0")}-${String(vr.getDate()).padStart(2,"0")}`};I.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),a("Failed to load tasks"))},[c,a]),I.useEffect(()=>{le&&!he&&Pe({title:le.title,category:le.category||"",description:le.description||"",dueDate:le.dueDate||"",priority:le.priority||"Medium",status:le.status||"Todo",assigneeId:le.assigneeId,projectId:le.projectId||""})},[le,he]),I.useEffect(()=>{if(!le)return;let Ke=!1;return(async()=>{try{const Bt=await fb(),It=Array.isArray(Bt?.data)?Bt.data:[];Ke||sn(It)}catch{Ke||sn([])}})(),()=>{Ke=!0}},[le?.id]),I.useEffect(()=>{if(!he){Gr(!1);return}te.category&&Hr.includes(te.category)?Gr(!1):te.category&&!Hr.includes(te.category)&&Gr(!0)},[he,te.category,Hr]);const ct=async Ke=>{if(o.find(It=>It.id===Ke)){z(Ke);try{await m.mutateAsync({id:Ke,data:{archived:y==="active"}}),se(null)}catch{}finally{z(null)}}},xt=async Ke=>{W(Ke);try{await b.mutateAsync(Ke),ie(null)}catch{}finally{W(null)}},ve=()=>{je.length===va.length?Ie([]):Ie(va.map(Ke=>Ke.id))},be=async()=>{de(!0);try{const Ke=[...je];await Promise.all(Ke.map(Bt=>b.mutateAsync(Bt))),Ie([]),Qe(!1),r(`Successfully deleted ${Ke.length} task${Ke.length>1?"s":""}`)}catch(Ke){a(Ke.message||"Failed to delete tasks")}finally{de(!1)}},Ge=async()=>{if(!Se){a("Please select a project");return}ze(!0);try{const Ke=[...je];await Promise.all(Ke.map(Bt=>m.mutateAsync({id:Bt,data:{projectId:Se==="__none__"?null:Se}}))),Ie([]),fe(!1),Fe(""),r(`Assigned ${Ke.length} task${Ke.length>1?"s":""} to ${Se==="__none__"?"No project":d.find(Bt=>Bt.id===Se)?.title||"project"}`)}catch(Ke){a(Ke.message||"Failed to assign project")}finally{ze(!1)}},at=()=>{const Ke=new Date;Ke.setDate(Ke.getDate()+30);const Bt=Ke.getDate(),It=Ke.getMonth()+1,dr=Ke.getFullYear(),Nr=`${Bt}-${It}-${dr}`,vr=Q0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",Nr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Rr=Q0.book_new();Q0.book_append_sheet(Rr,vr,"Tasks"),x1e(Rr,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},yt=async()=>{if(!Y.title){a("Please map the required field: Title");return}if(U.length===0){a("No data to import");return}X(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Y),console.log("[IMPORT] Parsed data rows:",U.length),console.log("[IMPORT] Sample parsed row:",U[0]);const Ke=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ke){a("Please log in to import tasks"),X(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:U.length,columnMapping:Y,usersCount:f.length,currentUserId:Ke});const Bt=U.map((nr,fr)=>{console.log(`[IMPORT] Processing row ${fr}:`,nr),console.log("[IMPORT] Column mapping:",Y);const Mt=String(nr[Y.title]||"").trim(),_r=Y.category?String(nr[Y.category]||"").trim():"",Kt=String(nr[Y.dueDate]||"").trim(),Na=Y.description?String(nr[Y.description]||"").trim():"",Pa=Y.priority?String(nr[Y.priority]||"").trim():"Medium",da=Y.owner?String(nr[Y.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${fr}:`,{title:Mt,category:_r,dueDateRaw:Kt,description:Na,priorityRaw:Pa,ownerRaw:da,rowKeys:Object.keys(nr),mappedTitleKey:Y.title,mappedDueDateKey:Y.dueDate});let ir="";if(Kt&&Kt.toLowerCase().trim()==="ongoing")ir="";else if(Kt)if(/^\d+$/.test(Kt)&&parseFloat(Kt)>25569){const Ar=new Date(1900,0,1),tn=parseFloat(Kt)-2,lr=new Date(Ar.getTime()+tn*24*60*60*1e3);isNaN(lr.getTime())||(ir=xe(lr))}else{let Ar=null;if(/^\d{4}-\d{2}-\d{2}$/.test(Kt))ir=Kt,Ar=new Date(0);else if(Kt.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(Kt)){const tn=Kt.split("-").map(lr=>lr.trim());if(tn.length===3){const lr=parseInt(tn[0],10),Hn=parseInt(tn[1],10)-1,Wr=parseInt(tn[2],10);!isNaN(lr)&&!isNaN(Hn)&&!isNaN(Wr)&&lr>=1&&lr<=31&&Hn>=0&&Hn<=11&&(Ar=new Date(Wr,Hn,lr),console.log(`[IMPORT] Parsed hyphen-separated date "${Kt}" as day-month-year -> ${xe(Ar)}`))}}else if(Kt.includes("/")){const tn=Kt.split("/").map(lr=>lr.trim());if(tn.length===3){const lr=parseInt(tn[0],10),Hn=parseInt(tn[1],10)-1;let Wr=parseInt(tn[2],10);Wr<100&&(Wr+=2e3),!isNaN(lr)&&!isNaN(Hn)&&!isNaN(Wr)&&(Ar=new Date(Wr,Hn,lr))}}else if(Kt.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const tn=Kt.split("/"),lr=parseInt(tn[0],10)-1,Hn=parseInt(tn[1],10),Wr=parseInt(tn[2],10);!isNaN(Hn)&&!isNaN(lr)&&!isNaN(Wr)&&(Ar=new Date(Wr,lr,Hn))}else if(!Ar||isNaN(Ar.getTime())){const tn=Kt.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(tn){const[,lr,Hn,Wr]=tn,Ra=["january","february","march","april","may","june","july","august","september","october","november","december"],Wi=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],ui=lr.toLowerCase().trim();let hs=-1;for(let ms=0;ms<Ra.length;ms++)if(ui.startsWith(Ra[ms])||ui.startsWith(Wi[ms])){hs=ms;break}if(hs>=0){const ms=parseInt(Hn,10),Ai=parseInt(Wr,10);Ar=new Date(Ai,hs,ms),Ar.getFullYear()!==Ai||Ar.getMonth()!==hs||Ar.getDate()!==ms?(console.warn(`[IMPORT] Invalid date parsed from "${Kt}": year=${Ai}, month=${hs}, day=${ms}`),Ar=null):console.log(`[IMPORT] Successfully parsed date "${Kt}" -> ${xe(Ar)}`)}else console.warn(`[IMPORT] Could not match month name in "${Kt}"`)}}if(!Ar||isNaN(Ar.getTime())){const tn=new Date(Kt);if(!isNaN(tn.getTime())){const lr=tn.getFullYear(),Hn=tn.getMonth(),Wr=tn.getDate();Ar=new Date(lr,Hn,Wr),console.log(`[IMPORT] Used fallback date parsing for "${Kt}" -> ${xe(Ar)}`)}}Ar&&!isNaN(Ar.getTime())&&!ir?(ir=xe(Ar),console.log(`[IMPORT] Final dueDate for row ${fr}: "${Kt}" -> "${ir}"`)):Kt&&!ir&&console.error(`[IMPORT] Failed to parse date "${Kt}" for row ${fr}`)}const ja={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[Pa.toLowerCase()]||"Medium";let Xn=Ke;if(da&&f.length>0){const Ar=da.toLowerCase().trim(),tn=f.find(lr=>lr.name.toLowerCase().trim()===Ar||lr.email.toLowerCase().trim()===Ar||lr.name.toLowerCase().trim().includes(Ar)||lr.email.toLowerCase().trim().includes(Ar));tn?(Xn=tn.id,console.log(`[IMPORT] Matched owner "${da}" to user:`,tn.name,tn.id)):console.warn(`[IMPORT] Could not match owner "${da}", using current user`)}Xn||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),Xn=Ke);const bn={title:Mt.trim(),category:_r||void 0,dueDate:ir||null,description:Na.trim()||"",priority:ja,status:"Todo",assigneeId:Xn,_rowIndex:fr,_rawDate:Kt};return(!bn.title||!bn.assigneeId)&&console.error(`[IMPORT] Row ${fr} missing required fields:`,{hasTitle:!!bn.title,hasAssigneeId:!!bn.assigneeId,taskData:bn}),Xn||console.warn(`[IMPORT] Row ${fr}: No assigneeId found, using current user:`,{title:Mt,ownerRaw:da,userId:Ke}),console.log(`[IMPORT] Task data for row ${fr}:`,bn),bn}).filter(nr=>{const fr=nr.title&&nr.assigneeId;return fr?console.log("[IMPORT] Valid task:",{title:nr.title,dueDate:nr.dueDate||"Not set",assigneeId:nr.assigneeId,priority:nr.priority,status:nr.status}):console.error("[IMPORT] Filtered out invalid task:",{title:nr.title,dueDate:nr.dueDate,assigneeId:nr.assigneeId,rawDate:nr._rawDate,rowIndex:nr._rowIndex,fullTask:nr,missingFields:{title:!nr.title,assigneeId:!nr.assigneeId}}),fr}).map(({_rowIndex:nr,_rawDate:fr,...Mt})=>(Mt.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",Mt),Mt.assigneeId=Ke),Mt));if(console.log("[IMPORT] Final tasks to import:",Bt),console.log("[IMPORT] Tasks count:",Bt.length),Bt.length===0){const nr=U[0],fr=nr?String(nr[Y.title]||"").trim():"N/A",Mt=nr?String(nr[Y.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:U.length,columnMapping:Y,mappedTitle:Y.title,mappedDueDate:Y.dueDate,sampleRow:nr,sampleTitle:fr,sampleDate:Mt,sampleRowKeys:nr?Object.keys(nr):[],parsedData:U.slice(0,3)}),a(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Y.title}")
2. Due Date column is mapped correctly (current: "${Y.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${fr}", Date: "${Mt}"

Available columns: ${_.join(", ")}`),X(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const It=Bt.map(({_rowIndex:nr,_rawDate:fr,...Mt})=>Mt);console.log("[IMPORT] Tasks to import count:",It.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(It,null,2)),console.log("[IMPORT] Sample task structure:",{title:It[0]?.title,dueDate:It[0]?.dueDate,assigneeId:It[0]?.assigneeId,priority:It[0]?.priority,status:It[0]?.status,description:It[0]?.description,hasProjectId:!!It[0]?.projectId});const dr=It.filter(nr=>!nr.title||!nr.assigneeId);if(dr.length>0){console.error("[IMPORT] Invalid tasks found:",dr),a(`Cannot import: ${dr.length} task(s) missing required fields (title or assigneeId)`),X(!1);return}let Nr;try{Nr=await Kne(It),console.log("[IMPORT] API call successful")}catch(nr){console.error("[IMPORT] API call failed:",nr),console.error("[IMPORT] Error details:",{message:nr.message,status:nr.status,code:nr.code,stack:nr.stack}),a(`Failed to import tasks: ${nr.message||"Unknown error"}`),X(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(Nr,null,2)),console.log("[IMPORT] Response type:",typeof Nr),console.log("[IMPORT] Response keys:",Nr?Object.keys(Nr):"null");let vr={},Rr=[];if(Nr)Nr.success&&Nr.data?(vr=Nr.data,Rr=vr.created||[]):Nr.data&&Array.isArray(Nr.data.created)?(vr=Nr.data,Rr=vr.created||[]):Nr.created&&Array.isArray(Nr.created)?(vr=Nr,Rr=vr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),vr=Nr.data||Nr,Rr=vr.created||vr.data?.created||[]),console.log("[IMPORT] Extracted importData:",vr),console.log("[IMPORT] Created tasks:",Rr),console.log("[IMPORT] Created tasks count:",Rr.length),console.log("[IMPORT] Created task IDs:",Rr.map(nr=>nr?.id)),console.log("[IMPORT] Created task details:",Rr.map(nr=>({id:nr.id,title:nr.title,assigneeId:nr.assigneeId})));else{console.error("[IMPORT] No response received from API"),a("No response received from server. Please check your connection."),X(!1);return}const Pn=vr.successful??Rr.length??0,yn=vr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:Pn,failedCount:yn,total:Bt.length,createdTasks:Rr.length,createdTaskIds:Rr.map(nr=>nr.id),errors:vr.errors}),Rr&&Rr.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",Rr.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",Rr),console.error("[IMPORT] Response structure:",Nr),console.error("[IMPORT] Import data:",vr)),yn>0){const nr=vr.errors?.map(fr=>`Row ${fr.index+1}: ${fr.error}`).join(`
`)||"";a(`Imported ${Pn} task(s), but ${yn} failed.
${nr}`)}else r(`Successfully imported ${Pn} task(s)`);H([]),B([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),Ne.current&&(Ne.current.value=""),D(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(Ke){console.error("Import error:",Ke),a(Ke.message||"Failed to import tasks. Please check your data format.")}finally{X(!1)}},wt=Ke=>{if(!Ke||Ke.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",Ke),console.log("[IMPORT] Header detection - firstRow length:",Ke.length),console.log("[IMPORT] Header detection - firstRow values:",Ke.map((vr,Rr)=>`[${Rr}]: "${vr}"`));const Bt=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let It=0;const dr=Ke.filter(vr=>vr&&String(vr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",dr);for(const vr of dr){const Rr=String(vr).toLowerCase().trim();Bt.some(Pn=>Rr.includes(Pn))&&(It++,console.log(`[IMPORT] Header detection - matched keyword in: "${vr}"`)),Rr.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(It++,console.log(`[IMPORT] Header detection - matched pattern in: "${vr}"`))}const Nr=dr.length>0?It/dr.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:Ke,totalCells:Ke.length,cellsToCheck:dr.length,matchCount:It,matchRatio:Nr,isHeader:Nr>=.4}),Nr>=.4},Rt=async Ke=>{const Bt=Ke.target.files?.[0];if(Bt)try{const It=Bt.name.split(".").pop()?.toLowerCase();if(It==="csv"){const dr=new FileReader;dr.onload=Nr=>{try{const vr=new Uint8Array(Nr.target?.result),Rr=Tb(vr,{type:"array",sheetStubs:!0}),Pn=Rr.SheetNames[0],yn=Rr.Sheets[Pn],nr=Q0.decode_range(yn["!ref"]||"A1"),fr=nr.e.c-nr.s.c+1;console.log("[IMPORT] CSV worksheet range:",yn["!ref"]),console.log("[IMPORT] CSV number of columns from range:",fr);const Mt=Q0.sheet_to_json(yn,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Mt.length),console.log("[IMPORT] CSV first row length:",Mt[0]?.length),console.log("[IMPORT] CSV first row:",Mt[0]),Mt.length===0){a("File is empty");return}if(Mt[0]&&Mt[0].length<fr)for(console.log(`[IMPORT] CSV: Padding first row from ${Mt[0].length} to ${fr} columns`);Mt[0].length<fr;)Mt[0].push("");const _r=wt(Mt[0]);console.log("[IMPORT] CSV Header detection result:",_r);let Kt,Na;if(_r?(Kt=Mt[0].map((ir,en)=>String(ir||"").trim()||`Column ${en+1}`),Na=1,console.log("[IMPORT] CSV raw first row:",Mt[0]),console.log("[IMPORT] CSV processed headers:",Kt)):(Kt=Mt[0].map((ir,en)=>`Column ${en+1}`),Na=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),Kt.length===0){a("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",Kt),console.log("[IMPORT] CSV detected headers count:",Kt.length),console.log("[IMPORT] CSV detected headers array:",Kt),B(Kt),console.log("[IMPORT] CSV setDetectedColumns called with:",Kt);const Pa=[];for(let ir=Na;ir<Mt.length;ir++){const en={},ja=Mt[ir]||[];for(;ja.length<Kt.length;)ja.push("");Kt.forEach((Xn,bn)=>{const Ar=ja[bn];if(typeof Ar=="number"&&Ar>25569&&Xn.toLowerCase().includes("date")){const tn=new Date(1900,0,1),lr=Ar-2,Hn=new Date(tn.getTime()+lr*24*60*60*1e3);en[Xn]=Hn.toISOString().split("T")[0]}else en[Xn]=Ar!=null?String(Ar).trim():""}),Object.values(en).some(Xn=>Xn)&&Pa.push(en)}console.log("[IMPORT] CSV parsed rows:",Pa),console.log("[IMPORT] CSV parsed rows count:",Pa.length),H(Pa);const da={title:Kt.find(ir=>ir.toLowerCase().includes("title")||ir.toLowerCase().includes("task")&&ir.toLowerCase().includes("name")||!ir.toLowerCase().includes("category")&&ir.toLowerCase().includes("name"))||"",category:Kt.find(ir=>ir.toLowerCase().includes("category")||ir.toLowerCase().includes("task")&&ir.toLowerCase().includes("cat"))||"",dueDate:Kt.find(ir=>ir.toLowerCase().includes("due")||ir.toLowerCase().includes("date")&&!ir.toLowerCase().includes("created")&&!ir.toLowerCase().includes("updated"))||"",description:Kt.find(ir=>ir.toLowerCase().includes("description")||ir.toLowerCase().includes("desc"))||"",priority:Kt.find(ir=>ir.toLowerCase().includes("priority")||ir.toLowerCase().includes("prio"))||"",owner:Kt.find(ir=>ir.toLowerCase().includes("owner")||ir.toLowerCase().includes("assignee")||ir.toLowerCase().includes("assigned")||ir.toLowerCase().includes("task")&&ir.toLowerCase().includes("owner"))||""};J(da),T("mapping")}catch(vr){console.error("CSV parse error:",vr),a("Failed to parse CSV file: "+(vr.message||"Unknown error"))}},dr.readAsArrayBuffer(Bt)}else if(It==="xlsx"||It==="xls"){const dr=new FileReader;dr.onload=Nr=>{const vr=new Uint8Array(Nr.target?.result),Rr=Tb(vr,{type:"array"}),Pn=Rr.SheetNames[0],yn=Rr.Sheets[Pn],nr=Q0.decode_range(yn["!ref"]||"A1"),fr=nr.e.c-nr.s.c+1;console.log("[IMPORT] Excel worksheet range:",yn["!ref"]),console.log("[IMPORT] Excel number of columns from range:",fr);const Mt=Q0.sheet_to_json(yn,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",Mt.length),console.log("[IMPORT] Excel first row length:",Mt[0]?.length),console.log("[IMPORT] Excel first row:",Mt[0]),Mt.length===0){a("File is empty");return}if(Mt[0]&&Mt[0].length<fr)for(console.log(`[IMPORT] Padding first row from ${Mt[0].length} to ${fr} columns`);Mt[0].length<fr;)Mt[0].push("");const _r=wt(Mt[0]);console.log("[IMPORT] Excel Header detection result:",_r);let Kt,Na;_r?(Kt=Mt[0].map((ir,en)=>String(ir||"").trim()||`Column ${en+1}`),Na=1,console.log("[IMPORT] Excel raw first row:",Mt[0]),console.log("[IMPORT] Excel processed headers:",Kt)):(Kt=Mt[0].map((ir,en)=>`Column ${en+1}`),Na=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",Kt),console.log("[IMPORT] Detected headers count:",Kt.length),console.log("[IMPORT] Detected headers array:",Kt),console.log("[IMPORT] Raw JSON data:",Mt),B(Kt),console.log("[IMPORT] setDetectedColumns called with:",Kt);const Pa=[];for(let ir=Na;ir<Mt.length;ir++){const en={},ja=Mt[ir]||[];for(;ja.length<Kt.length;)ja.push("");Kt.forEach((Xn,bn)=>{const Ar=ja[bn];if(typeof Ar=="number"&&Ar>25569&&Xn.toLowerCase().includes("date")){const tn=new Date(1900,0,1),lr=Ar-2,Hn=new Date(tn.getTime()+lr*24*60*60*1e3),Wr=Hn.getFullYear(),Ra=Hn.getMonth(),Wi=Hn.getDate();en[Xn]=`${Wr}-${String(Ra+1).padStart(2,"0")}-${String(Wi).padStart(2,"0")}`}else en[Xn]=Ar!=null?String(Ar).trim():""}),Object.values(en).some(Xn=>Xn)&&Pa.push(en)}console.log("[IMPORT] Parsed rows:",Pa),console.log("[IMPORT] Parsed rows count:",Pa.length),H(Pa);const da={title:Kt.find(ir=>ir.toLowerCase().includes("title")||ir.toLowerCase().includes("task")&&ir.toLowerCase().includes("name")||!ir.toLowerCase().includes("category")&&ir.toLowerCase().includes("name"))||"",category:Kt.find(ir=>ir.toLowerCase().includes("category")||ir.toLowerCase().includes("task")&&ir.toLowerCase().includes("cat"))||"",dueDate:Kt.find(ir=>ir.toLowerCase().includes("due")||ir.toLowerCase().includes("date")&&!ir.toLowerCase().includes("created")&&!ir.toLowerCase().includes("updated"))||"",description:Kt.find(ir=>ir.toLowerCase().includes("description")||ir.toLowerCase().includes("desc"))||"",priority:Kt.find(ir=>ir.toLowerCase().includes("priority")||ir.toLowerCase().includes("prio"))||"",owner:Kt.find(ir=>ir.toLowerCase().includes("owner")||ir.toLowerCase().includes("assignee")||ir.toLowerCase().includes("assigned")||ir.toLowerCase().includes("task")&&ir.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",da),J(da),T("mapping")},dr.readAsArrayBuffer(Bt)}else a("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(It){console.error("Error parsing file:",It),a("Failed to parse file: "+(It.message||"Unknown error"))}},sr=async(Ke,Bt,It)=>{It.stopPropagation();const dr=Bt==="Done"?"Todo":"Done";q(Ke);try{await m.mutateAsync({id:Ke,data:{status:dr}}),le?.id===Ke&&$e({...le,status:dr})}catch{}finally{q(null)}},Yt=async()=>{if(le){if(!te.title.trim()){a("Task title is required");return}if(!te.assigneeId){a("Assignee is required");return}oe(!0);try{await m.mutateAsync({id:le.id,data:{title:te.title.trim(),category:te.category.trim()||void 0,description:te.description.trim()||"",dueDate:te.dueDate||null,priority:te.priority,status:te.status,assigneeId:te.assigneeId,projectId:te.projectId||null}}),$e({...le,title:te.title.trim(),category:te.category.trim()||void 0,description:te.description.trim()||"",dueDate:te.dueDate||"",priority:te.priority,status:te.status,assigneeId:te.assigneeId,projectId:te.projectId||void 0}),Ue(!1)}catch{}finally{oe(!1)}}},wr=(Ke,Bt=1200,It=1200,dr=.8)=>new Promise((Nr,vr)=>{const Rr=new FileReader;Rr.onload=Pn=>{const yn=new Image;yn.onload=()=>{let nr=yn.width,fr=yn.height;nr>fr?nr>Bt&&(fr=fr*Bt/nr,nr=Bt):fr>It&&(nr=nr*It/fr,fr=It);const Mt=document.createElement("canvas");Mt.width=nr,Mt.height=fr;const _r=Mt.getContext("2d");_r?(_r.drawImage(yn,0,0,nr,fr),Nr(Mt.toDataURL("image/jpeg",dr))):vr(new Error("Canvas context not available"))},yn.onerror=()=>vr(new Error("Failed to load image")),yn.src=Pn.target?.result},Rr.onerror=()=>vr(new Error("Failed to read file")),Rr.readAsDataURL(Ke)}),Pr=async Ke=>{const Bt=Ke.target.files?.[0];if(Bt){if(!Bt.type.startsWith("image/")){a("Please select an image file");return}if(Bt.size>10*1024*1024){a("Image size must be less than 10MB");return}try{const It=await wr(Bt,1200,1200,.8);bt(It),qt(Bt)}catch(It){a(It.message||"Failed to process image")}}},$r=Ke=>{const Bt=Ke.target.value,It=Ke.target.selectionStart;et(Bt),Xr(It);const dr=Bt.substring(0,It),Nr=dr.lastIndexOf("@");if(Nr!==-1){const vr=dr.substring(Nr+1),Rr=Nr>0?dr[Nr-1]:" ";if((Rr===" "||Rr===`
`||Nr===0)&&!vr.includes(" ")&&!vr.includes(`
`)){yr(vr);const Pn=f.filter(yn=>yn.name.toLowerCase().includes(vr.toLowerCase())||yn.email.toLowerCase().includes(vr.toLowerCase()));pn(Pn.slice(0,5)),rt(!0);return}}rt(!1)},fn=Ke=>{const It=Me.substring(0,kr).lastIndexOf("@"),dr=Me.substring(kr),vr=`${Me.substring(0,It)}@${Ke.name} ${dr}`;if(et(vr),rt(!1),Be.current){Be.current.focus();const Rr=It+Ke.name.length+2;Be.current.setSelectionRange(Rr,Rr)}},Ur=Ke=>{const Bt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,It=[];let dr;for(;(dr=Bt.exec(Ke))!==null;){const Nr=dr[1].trim(),vr=f.find(Rr=>Rr.name.toLowerCase()===Nr.toLowerCase());vr&&vr.id!==(t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&It.push(vr.id)}return[...new Set(It)]};I.useEffect(()=>{if(Be.current){const Ke=Be.current;Ke.style.height="auto";const Bt=24,It=5*Bt,dr=15*Bt,Nr=Math.min(Math.max(Ke.scrollHeight,It),dr);Ke.style.height=`${Nr}px`}},[Me]);const ea=Ke=>{const Bt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,It=[];let dr=0,Nr;for(;(Nr=Bt.exec(Ke))!==null;){Nr.index>dr&&It.push(Ke.substring(dr,Nr.index));const vr=Nr[1].trim(),Rr=f.find(Pn=>Pn.name.toLowerCase()===vr.toLowerCase());Rr?It.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Rr.name]},Nr.index)):It.push(`@${vr}`),dr=Nr.index+Nr[0].length}return dr<Ke.length&&It.push(Ke.substring(dr)),It.length>0?It:Ke},Un=async()=>{if(le){if(!Me.trim()&&!At){a("Please enter a note or upload an image");return}Ye(!0);try{const Ke=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Bt=t?.name||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",It={id:`note_${Date.now()}`,userId:Ke,userName:Bt,text:Me.trim(),imageUrl:ut||void 0,imageName:At?.name||void 0,imageMimeType:At?.type||void 0,createdAt:new Date().toISOString()},dr=[...le.notes||[],It];await m.mutateAsync({id:le.id,data:{notes:dr}}),$e({...le,notes:dr});const Nr=Ur(Me);for(const Rr of Nr)try{await tp({userId:Rr,type:"task-mention",title:"You were mentioned in a task",message:`${Bt} mentioned you in task "${le.title}"`,relatedId:le.id,relatedType:"task",read:!1})}catch(Pn){console.error("Failed to send notification:",Pn)}et(""),bt(""),qt(null),He.current&&(He.current.value="");const vr=Nr.length>0?`Note added and ${Nr.length} user(s) notified`:"Note added successfully";r(vr)}catch(Ke){a(Ke.message||"Failed to add note")}finally{Ye(!1)}}},gn=async()=>{if(!(!le||!t||!tr))try{Cr(tr);const Ke=le.notes?.filter(Bt=>Bt.id!==tr)||[];await m.mutateAsync({id:le.id,data:{notes:Ke}}),$e({...le,notes:Ke}),r("Note deleted successfully"),Or(null)}catch(Ke){a(Ke.message||"Failed to delete note")}finally{Cr(null)}},po=()=>{$e(null),Ue(!1),et(""),bt(""),qt(null),rt(!1),On(!1),He.current&&(He.current.value="")};let va=o.filter(Ke=>{if(y==="archived"){if(!Ke.archived)return!1}else if(y==="week"){if(Ke.archived)return!1}else if(Ke.archived)return!1;return g.trim()?Ke.title.toLowerCase().includes(g.toLowerCase()):!0});if(E==="dueDate")va=[...va].sort((Ke,Bt)=>!Ke.dueDate&&!Bt.dueDate?0:Ke.dueDate?Bt.dueDate?(Ke.dueDate||"").localeCompare(Bt.dueDate||""):-1:1);else if(E==="priority"){const Ke={High:1,Medium:2,Low:3};va=[...va].sort((Bt,It)=>{const dr=Ke[Bt.priority]||4,Nr=Ke[It.priority]||4;return dr-Nr})}else E==="category"?va=[...va].sort((Ke,Bt)=>{const It=(Ke.category||"Uncategorized").toLowerCase(),dr=(Bt.category||"Uncategorized").toLowerCase();return It.localeCompare(dr)}):E==="owner"&&(va=[...va].sort((Ke,Bt)=>{const It=f.find(Nr=>Nr.id===Ke.assigneeId)?.name||"Unassigned",dr=f.find(Nr=>Nr.id===Bt.assigneeId)?.name||"Unassigned";return It.localeCompare(dr)}));return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{j("active"),Ie([])},className:`text-sm font-bold pb-1 transition-all ${y==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{j("archived"),Ie([])},className:`text-sm font-bold pb-1 transition-all ${y==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(Ke=>Ke.archived).length,")"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{D(!0),T("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[n.jsx(j6,{className:"w-4 h-4"})," Bulk Import"]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[n.jsx(Zr,{className:"w-4 h-4"})," New Task"]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:Ke=>{w(Ke.target.value),Ie([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:E,onChange:Ke=>A(Ke.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[n.jsx("option",{value:"none",children:"No Sort"}),n.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),n.jsx("option",{value:"priority",children:"Sort by Priority"}),n.jsx("option",{value:"category",children:"Sort by Category"}),n.jsx("option",{value:"owner",children:"Sort by Owner"})]}),n.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:n.jsx(Ts,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[n.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${N==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(M8,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S("card"),className:`p-2 rounded-lg ${N==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(F8,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{j(y==="week"?"active":"week"),Ie([])},className:`p-2 rounded-lg ${y==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:n.jsx(Kn,{className:"w-4 h-4"})})]})]}),!v&&va.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:va.length>0&&je.length===va.length,onChange:ve}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),v?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):va.length===0?n.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[n.jsx(d1,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",y==="week"?"tasks":y," tasks found"]})]}):y==="week"?n.jsx("div",{className:"space-y-8",children:(()=>{const Ke=va.filter(fr=>!ht(fr.dueDate)),Bt=va.filter(fr=>ht(fr.dueDate)),It={};Bt.forEach(fr=>{const Mt=ht(fr.dueDate);It[Mt]||(It[Mt]=[]),It[Mt].push(fr)});const dr=Object.keys(It).sort(),Nr=(()=>{const fr=Re(new Date);return`${fr.getFullYear()}-${String(fr.getMonth()+1).padStart(2,"0")}-${String(fr.getDate()).padStart(2,"0")}`})(),vr=(()=>{const fr=Re(new Date),Mt=new Date(fr);return Mt.setDate(fr.getDate()+7),`${Mt.getFullYear()}-${String(Mt.getMonth()+1).padStart(2,"0")}-${String(Mt.getDate()).padStart(2,"0")}`})(),Rr=(fr,Mt)=>{const _r=fr.toLocaleDateString("en-US",{month:"short",day:"numeric"}),Kt=Mt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${_r} - ${Kt}`},Pn=fr=>{if(fr===Nr)return"This Week";if(fr===vr)return"Next Week";const[Mt,_r,Kt]=fr.split("-").map(Number),Na=new Date(Mt,_r-1,Kt),{start:Pa,end:da}=tt(Na);return`Week of ${Rr(Pa,da)}`},yn=fr=>{const[Mt,_r,Kt]=fr.split("-").map(Number);return tt(new Date(Mt,_r-1,Kt))};dr.forEach(fr=>{It[fr].sort((Mt,_r)=>(Mt.dueDate||"").localeCompare(_r.dueDate||""))});const nr=fr=>fr.length===0?null:N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:fr.map(Mt=>{const _r=je.includes(Mt.id);return n.jsxs("div",{onClick:()=>$e(Mt),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${_r?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:Kt=>Kt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:_r,onChange:()=>Ie(Kt=>_r?Kt.filter(Na=>Na!==Mt.id):[...Kt,Mt.id])})}),n.jsx("button",{onClick:Kt=>sr(Mt.id,Mt.status,Kt),disabled:V===Mt.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:V===Mt.id?n.jsx(vt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Mt.status==="Done"?n.jsx(mn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Ru,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${Mt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Mt.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Mt.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Mt.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(Kt=>Kt.id===Mt.projectId)?.title||"General"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Kn,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Mt.dueDate?Ce(Mt.dueDate):"Ongoing"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Mt.priority==="High"?"bg-red-50 text-red-600":Mt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Mt.priority}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[n.jsx(qi,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:f.find(Kt=>Kt.id===Mt.assigneeId)?.name||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:Kt=>{Kt.stopPropagation(),$e(Mt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(ru,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Kt=>{Kt.stopPropagation(),se(Mt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(Pu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Kt=>{Kt.stopPropagation(),ie(Mt)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})]},Mt.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:fr.map(Mt=>{const _r=je.includes(Mt.id);return n.jsxs("div",{onClick:()=>$e(Mt),className:`bg-white p-6 rounded-3xl border ${_r?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsx("div",{className:"absolute top-4 left-4",onClick:Kt=>Kt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:`${_r?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:_r,onChange:()=>Ie(Kt=>_r?Kt.filter(Na=>Na!==Mt.id):[...Kt,Mt.id])})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:`font-bold text-sm mb-3 ${Mt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Mt.title}),n.jsxs("div",{className:"space-y-2 mb-4",children:[Mt.category&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Os,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Mt.category})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(Kt=>Kt.id===Mt.projectId)?.title||"General"})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Mt.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Kn,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Ce(Mt.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Mt.priority==="High"?"bg-red-50 text-red-600":Mt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Mt.priority})]})]},Mt.id)})});return n.jsxs(n.Fragment,{children:[dr.map(fr=>{const Mt=It[fr];if(!Mt||Mt.length===0)return null;const _r=yn(fr),Kt=Pn(fr);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:Kt}),n.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Rr(_r.start,_r.end)}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Mt.length,")"]})]}),nr(Mt)]},fr)}),Ke.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Ke.length," tasks)"]})]}),nr(Ke)]})]})})()}):N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:va.map(Ke=>{const Bt=je.includes(Ke.id);return n.jsxs("div",{onClick:()=>$e(Ke),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Ke.archived?"bg-slate-50/50":""} ${Bt?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:It=>It.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Bt,onChange:()=>Ie(It=>Bt?It.filter(dr=>dr!==Ke.id):[...It,Ke.id])})}),n.jsx("button",{onClick:It=>sr(Ke.id,Ke.status,It),disabled:V===Ke.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:V===Ke.id?n.jsx(vt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Ke.status==="Done"?n.jsx(mn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Ru,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${Ke.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ke.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Ke.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ke.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(It=>It.id===Ke.projectId)?.title||"General"}),n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Kn,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Ke.dueDate?Ce(Ke.dueDate):"Ongoing"})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Ke.priority==="High"?"bg-red-50 text-red-600":Ke.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ke.priority}),Ke.assigneeId&&(()=>{const It=f.find(dr=>dr.id===Ke.assigneeId);return It?n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:It.name,children:[n.jsx(qi,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:It.name})]}):null})()]}),n.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[n.jsx("button",{onClick:It=>{It.stopPropagation(),$e(Ke)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:n.jsx(ru,{className:"w-4 h-4"})}),n.jsx("button",{onClick:It=>{It.stopPropagation(),se(Ke)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:Ke.archived?n.jsx(bx,{className:"w-4 h-4"}):n.jsx(Pu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:It=>{It.stopPropagation(),ie(Ke)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},Ke.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:va.map(Ke=>{const Bt=je.includes(Ke.id);return n.jsxs("div",{onClick:()=>$e(Ke),className:`bg-white p-6 rounded-3xl border ${Bt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:n.jsx(_i,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[n.jsx("button",{onClick:It=>{It.stopPropagation(),$e(Ke)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:n.jsx(ru,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:It=>{It.stopPropagation(),se(Ke)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:n.jsx(Pu,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:It=>{It.stopPropagation(),ie(Ke)},className:"p-1.5 text-slate-400 hover:text-red-500",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]}),n.jsx("div",{onClick:It=>It.stopPropagation(),className:`${Bt?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Bt,onChange:()=>Ie(It=>Bt?It.filter(dr=>dr!==Ke.id):[...It,Ke.id])})})]})]}),n.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${Ke.status==="Done"?"line-through opacity-40":""}`,children:Ke.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:Ke.description}),Ke.category&&n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[n.jsx(Os,{className:"w-3.5 h-3.5 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:Ke.category})]})}),Ke.assigneeId&&(()=>{const It=f.find(dr=>dr.id===Ke.assigneeId);return It?n.jsx("div",{className:"flex items-center gap-2 mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[n.jsx(qi,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:It.name})]})}):null})(),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Ke.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Kn,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Ce(Ke.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Ke.priority==="High"?"bg-red-50 text-red-600":Ke.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ke.priority})]})]},Ke.id)})}),P&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(j6,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),n.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(Zt,{className:"w-6 h-6 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:R==="upload"?n.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(w0,{className:"w-4 h-4"})," Registry Data Requirements"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-5",children:[n.jsxs("button",{onClick:()=>Ne.current?.click(),className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:n.jsx(vx,{className:"w-8 h-8"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),n.jsxs("button",{onClick:at,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[n.jsx(Bu,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),n.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),n.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",_.length," columns and ",U.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),n.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:n.jsx(Gn,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:n.jsx(Os,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:n.jsx(Kn,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:n.jsx(w0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:n.jsx(Os,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:n.jsx(qi,{className:"w-4 h-4"})}].map(Ke=>n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:Ke.icon}),n.jsx("div",{children:n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[Ke.label," ",Ke.required&&n.jsx("span",{className:"text-red-500",children:"*"})]})})]}),n.jsx(Oo,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),n.jsxs("select",{value:Y[Ke.key]||"",onChange:Bt=>J({...Y,[Ke.key]:Bt.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"-- Select Source Column --"}),_.map(Bt=>n.jsx("option",{value:Bt,children:Bt},Bt))]})]},Ke.key))}),n.jsxs("div",{className:"flex gap-4 pt-6",children:[n.jsx("button",{onClick:()=>{T("upload"),H([]),B([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),Ne.current&&(Ne.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),n.jsx("button",{onClick:yt,disabled:re||!Y.title||!Y.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:re?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),n.jsx("input",{ref:Ne,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:Rt})]})}),K&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:K.archived?n.jsx(bx,{className:"w-6 h-6"}):n.jsx(Pu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:K.archived?"Restore Task?":"Archive Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:K.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:K.title}),K.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:K.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>se(null),disabled:O===K.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>ct(K.id),disabled:O===K.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O===K.id?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),K.archived?"Restoring...":"Archiving..."]}):K.archived?"Restore Task":"Archive Task"})]})]})}),pe&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:pe.title}),pe.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:pe.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ie(null),disabled:ee===pe.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>xt(pe.id),disabled:ee===pe.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===pe.id?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),je.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:je.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),fe(!0),Fe("")},disabled:_e,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[n.jsx(nu,{className:"w-3.5 h-3.5"}),"Assign to project"]}),n.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),Qe(!0)},disabled:ue,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[ue?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>Ie([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]})}),ge&&je.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:n.jsx(nu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",je.length," selected task",je.length>1?"s":"","."]})]})]}),n.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),n.jsxs("select",{value:Se,onChange:Ke=>Fe(Ke.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"Select project..."}),n.jsx("option",{value:"__none__",children:"None (General)"}),d.filter(Ke=>!Ke.archived).map(Ke=>n.jsx("option",{value:Ke.id,children:Ke.title},Ke.id))]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{fe(!1),Fe("")},disabled:_e,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ge,disabled:_e||!Se,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_e?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${je.length} task${je.length>1?"s":""}`})]})]})}),Ae&&je.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",je.length," Task",je.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Ke=>je.includes(Ke.id)).slice(0,5).map(Ke=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(_i,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ke.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:d.find(Bt=>Bt.id===Ke.projectId)?.title||"General"})]})]},Ke.id)),je.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",je.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Qe(!1),disabled:ue,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:be,disabled:ue,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ue?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${je.length} Task${je.length>1?"s":""}`})]})]})}),le&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:po}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:po,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(_i,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[he?n.jsx("input",{type:"text",value:te.title,onChange:Ke=>Pe(Bt=>({...Bt,title:Ke.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:le.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${le.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":le.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":le.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:le.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",le.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:he?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{Ue(!1),Pe({title:le.title,description:le.description||"",dueDate:le.dueDate||"",priority:le.priority||"Medium",status:le.status||"Todo",assigneeId:le.assigneeId,projectId:le.projectId||""})},disabled:Te,className:"px-4 py-2 border border-slate-200 text-slate-500 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"CANCEL"}),n.jsx("button",{onClick:Yt,disabled:Te||!te.title.trim()||!te.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Te?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"SAVE CHANGES"]})})]}):n.jsxs("button",{onClick:()=>Ue(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"ASSIGNEE"}),he?n.jsxs("select",{value:te.assigneeId,onChange:Ke=>Pe(Bt=>({...Bt,assigneeId:Ke.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),f.map(Ke=>n.jsx("option",{value:Ke.id,children:Ke.name},Ke.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:f.find(Ke=>Ke.id===le.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.find(Ke=>Ke.id===le.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"LINKED PROJECT"}),he?n.jsxs("select",{value:te.projectId,onChange:Ke=>Pe(Bt=>({...Bt,projectId:Ke.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),d.filter(Ke=>!Ke.archived).map(Ke=>n.jsx("option",{value:Ke.id,children:Ke.title},Ke.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:le.projectId?d.find(Ke=>Ke.id===le.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] flex items-center gap-2 px-1",children:[n.jsx(Gn,{className:"w-4 h-4 text-indigo-500"})," DESCRIPTION"]}),he?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(o_,{value:te.description||"",onChange:Ke=>Pe(Bt=>({...Bt,description:Ke})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[le.description?n.jsx(X9,{content:le.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert max-w-none prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50 [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3.5 h-3.5"})," TASK CATEGORY"]}),he?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:jr?"__new__":te.category||"",onChange:Ke=>{const Bt=Ke.target.value;Bt==="__new__"?(Gr(!0),Pe(It=>({...It,category:""}))):(Gr(!1),Pe(It=>({...It,category:Bt})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),Hr.map(Ke=>n.jsx("option",{value:Ke,children:Ke},Ke)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),jr&&n.jsx("input",{type:"text",value:te.category,onChange:Ke=>Pe(Bt=>({...Bt,category:Ke.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:le.category?n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:le.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"DUE DATE"}),he?n.jsx("input",{type:"date",value:te.dueDate,onChange:Ke=>Pe(Bt=>({...Bt,dueDate:Ke.target.value})),placeholder:"dd/mm/yyyy",className:"w-full px-4 py-2 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 mt-2 [color-scheme:light]"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:le.dueDate?Ce(le.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"PRIORITY"}),he?n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200 mt-2",children:["Low","Medium","High"].map(Ke=>n.jsx("button",{onClick:()=>Pe(Bt=>({...Bt,priority:Ke})),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${te.priority===Ke?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:Ke.toUpperCase()},Ke))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${le.priority==="High"?"bg-red-50 text-red-600":le.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:le.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),he?n.jsxs("select",{value:te.status,onChange:Ke=>Pe(Bt=>({...Bt,status:Ke.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[le.status==="Done"?n.jsx(mn,{className:"w-5 h-5 text-emerald-500"}):le.status==="In Progress"?n.jsx(es,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Ru,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:le.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",le.notes&&le.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:le.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:Be,rows:5,value:Me,onChange:$r,onBlur:()=>{setTimeout(()=>rt(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),pr&&Sr.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(Nh,{className:"w-3 h-3"}),"Mention User"]}),Sr.map(Ke=>n.jsxs("button",{onClick:()=>fn(Ke),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ke.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ke.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ke.email})]})]},Ke.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:ut?n.jsx(_l,{className:"w-4 h-4"}):n.jsx(Oc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ut?At?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:He,type:"file",accept:"image/*",onChange:Pr,className:"hidden"})]}),n.jsx("button",{onClick:Un,disabled:Gt||!Me.trim()&&!At,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Gt?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-4 h-4"}),"Send"]})})]}),ut&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ut,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{bt(""),qt(null),He.current&&(He.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Zt,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:le.notes&&le.notes.length>0?[...le.notes].reverse().map(Ke=>{const Bt=t?.role==="Admin"||Ke.userId===t?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Ke.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ke.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ke.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Bt&&n.jsx("button",{onClick:()=>Or(Ke.id),disabled:Et===Ke.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Et===Ke.id?n.jsx(vt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ke.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:ea(Ke.text)}),Ke.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:Ke.imageUrl,alt:Ke.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const It=window.open();It&&It.document.write(`<img src="${Ke.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},Ke.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>On(!rr),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(ud,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(ia,{className:`w-4 h-4 text-slate-400 transition-transform ${rr?"rotate-90":""}`})]}),rr&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:le.createdAt?new Date(le.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),le.updatedAt&&le.updatedAt!==le.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(le.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),le.notes&&le.notes.map((Ke,Bt)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[Ke.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(Ke.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},Ke.id)),(!le.notes||le.notes.length===0)&&(!le.updatedAt||le.updatedAt===le.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>{ie(le),po()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:po,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(mn,{className:"w-5 h-5"})," CLOSE"]})]})]})]}),tr&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(Rn,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>Or(null),disabled:Et===tr,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:gn,disabled:Et===tr,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Et===tr?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function Ea(e){"@babel/helpers - typeof";return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ea(e)}var dl=Uint8Array,Tc=Uint16Array,l_=Int32Array,Ty=new dl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Oy=new dl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zk=new dl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Y9=function(e,t){for(var r=new Tc(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new l_(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},J9=Y9(Ty,2),Q9=J9.b,Hk=J9.r;Q9[28]=258,Hk[258]=28;var Z9=Y9(Oy,0),L1e=Z9.b,s8=Z9.r,Wk=new Tc(32768);for(var ds=0;ds<32768;++ds){var s0=(ds&43690)>>1|(ds&21845)<<1;s0=(s0&52428)>>2|(s0&13107)<<2,s0=(s0&61680)>>4|(s0&3855)<<4,Wk[ds]=((s0&65280)>>8|(s0&255)<<8)>>1}var $u=(function(e,t,r){for(var a=e.length,s=0,i=new Tc(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new Tc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new Tc(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],f=o[e[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)l[Wk[f]>>c]=d}else for(l=new Tc(a),s=0;s<a;++s)e[s]&&(l[s]=Wk[o[e[s]-1]++]>>15-e[s]);return l}),_0=new dl(288);for(var ds=0;ds<144;++ds)_0[ds]=8;for(var ds=144;ds<256;++ds)_0[ds]=9;for(var ds=256;ds<280;++ds)_0[ds]=7;for(var ds=280;ds<288;++ds)_0[ds]=8;var bg=new dl(32);for(var ds=0;ds<32;++ds)bg[ds]=5;var F1e=$u(_0,9,0),M1e=$u(_0,9,1),R1e=$u(bg,5,0),B1e=$u(bg,5,1),Rj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Gd=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},Bj=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},c_=function(e){return(e+7)/8|0},eB=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new dl(e.subarray(t,r))},U1e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Yd=function(e,t,r){var a=new Error(t||U1e[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Yd),!r)throw a;return a},q1e=function(e,t,r,a){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new dl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new dl(s*3));var d=function($e){var he=r.length;if($e>he){var Ue=new dl(Math.max(he*2,$e));Ue.set(r),r=Ue}},u=t.f||0,f=t.p||0,p=t.b||0,m=t.l,b=t.d,v=t.m,g=t.n,w=s*8;do{if(!m){u=Gd(e,f,1);var y=Gd(e,f+1,3);if(f+=3,y)if(y==1)m=M1e,b=B1e,v=9,g=5;else if(y==2){var E=Gd(e,f,31)+257,A=Gd(e,f+10,15)+4,P=E+Gd(e,f+5,31)+1;f+=14;for(var D=new dl(P),R=new dl(19),T=0;T<A;++T)R[zk[T]]=Gd(e,f+T*3,7);f+=A*3;for(var _=Rj(R),B=(1<<_)-1,U=$u(R,_,1),T=0;T<P;){var H=U[Gd(e,f,B)];f+=H&15;var j=H>>4;if(j<16)D[T++]=j;else{var Y=0,J=0;for(j==16?(J=3+Gd(e,f,3),f+=2,Y=D[T-1]):j==17?(J=3+Gd(e,f,7),f+=3):j==18&&(J=11+Gd(e,f,127),f+=7);J--;)D[T++]=Y}}var re=D.subarray(0,E),X=D.subarray(E);v=Rj(re),g=Rj(X),m=$u(re,v,1),b=$u(X,g,1)}else Yd(1);else{var j=c_(f)+4,N=e[j-4]|e[j-3]<<8,S=j+N;if(S>s){c&&Yd(0);break}l&&d(p+N),r.set(e.subarray(j,S),p),t.b=p+=N,t.p=f=S*8,t.f=u;continue}if(f>w){c&&Yd(0);break}}l&&d(p+131072);for(var ee=(1<<v)-1,W=(1<<g)-1,O=f;;O=f){var Y=m[Bj(e,f)&ee],z=Y>>4;if(f+=Y&15,f>w){c&&Yd(0);break}if(Y||Yd(2),z<256)r[p++]=z;else if(z==256){O=f,m=null;break}else{var V=z-254;if(z>264){var T=z-257,q=Ty[T];V=Gd(e,f,(1<<q)-1)+Q9[T],f+=q}var K=b[Bj(e,f)&W],se=K>>4;K||Yd(3),f+=K&15;var X=L1e[se];if(se>3){var q=Oy[se];X+=Bj(e,f)&(1<<q)-1,f+=q}if(f>w){c&&Yd(0);break}l&&d(p+131072);var pe=p+V;if(p<X){var ie=i-X,le=Math.min(X,pe);for(ie+p<0&&Yd(3);p<le;++p)r[p]=a[ie+p]}for(;p<pe;++p)r[p]=r[p-X]}}t.l=m,t.p=O,t.b=p,t.f=u,m&&(u=1,t.m=v,t.d=b,t.n=g)}while(!u);return p!=r.length&&o?eB(r,0,p):r.subarray(0,p)},hf=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},Vp=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},Uj=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:rB,l:0};if(s==1){var o=new dl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,E){return S.f-E.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[f].f?d++:f++],c=r[d!=u&&r[d].f<r[f].f?d++:f++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,a=1;a<s;++a)i[a].s>p&&(p=i[a].s);var m=new Tc(p+1),b=Vk(r[u-1],m,0);if(b>t){var a=0,v=0,g=b-t,w=1<<g;for(i.sort(function(E,A){return m[A.s]-m[E.s]||E.f-A.f});a<s;++a){var y=i[a].s;if(m[y]>t)v+=w-(1<<b-m[y]),m[y]=t;else break}for(v>>=g;v>0;){var j=i[a].s;m[j]<t?v-=1<<t-m[j]++-1:++a}for(;a>=0&&v;--a){var N=i[a].s;m[N]==t&&(--m[N],++v)}b=t}return{t:new dl(m),l:b}},Vk=function(e,t,r){return e.s==-1?Math.max(Vk(e.l,t,r+1),Vk(e.r,t,r+1)):t[e.s]=r},i8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Tc(++t),a=0,s=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},Gp=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},tB=function(e,t,r){var a=r.length,s=c_(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},o8=function(e,t,r,a,s,i,o,l,c,d,u){hf(t,u++,r),++s[256];for(var f=Uj(s,15),p=f.t,m=f.l,b=Uj(i,15),v=b.t,g=b.l,w=i8(p),y=w.c,j=w.n,N=i8(v),S=N.c,E=N.n,A=new Tc(19),P=0;P<y.length;++P)++A[y[P]&31];for(var P=0;P<S.length;++P)++A[S[P]&31];for(var D=Uj(A,7),R=D.t,T=D.l,_=19;_>4&&!R[zk[_-1]];--_);var B=d+5<<3,U=Gp(s,_0)+Gp(i,bg)+o,H=Gp(s,p)+Gp(i,v)+o+14+3*_+Gp(A,R)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&B<=U&&B<=H)return tB(t,u,e.subarray(c,c+d));var Y,J,re,X;if(hf(t,u,1+(H<U)),u+=2,H<U){Y=$u(p,m,0),J=p,re=$u(v,g,0),X=v;var ee=$u(R,T,0);hf(t,u,j-257),hf(t,u+5,E-1),hf(t,u+10,_-4),u+=14;for(var P=0;P<_;++P)hf(t,u+3*P,R[zk[P]]);u+=3*_;for(var W=[y,S],O=0;O<2;++O)for(var z=W[O],P=0;P<z.length;++P){var V=z[P]&31;hf(t,u,ee[V]),u+=R[V],V>15&&(hf(t,u,z[P]>>5&127),u+=z[P]>>12)}}else Y=F1e,J=_0,re=R1e,X=bg;for(var P=0;P<l;++P){var q=a[P];if(q>255){var V=q>>18&31;Vp(t,u,Y[V+257]),u+=J[V+257],V>7&&(hf(t,u,q>>23&31),u+=Ty[V]);var K=q&31;Vp(t,u,re[K]),u+=X[K],K>3&&(Vp(t,u,q>>5&8191),u+=Oy[K])}else Vp(t,u,Y[q]),u+=J[q]}return Vp(t,u,Y[256]),u+J[256]},$1e=new l_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rB=new dl(0),z1e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new dl(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var f=$1e[t-1],p=f>>13,m=f&8191,b=(1<<r)-1,v=i.p||new Tc(32768),g=i.h||new Tc(b+1),w=Math.ceil(r/3),y=2*w,j=function(Te){return(e[Te]^e[Te+1]<<w^e[Te+2]<<y)&b},N=new l_(25e3),S=new Tc(288),E=new Tc(32),A=0,P=0,D=i.i||0,R=0,T=i.w||0,_=0;D+2<o;++D){var B=j(D),U=D&32767,H=g[B];if(v[U]=H,g[B]=U,T<=D){var Y=o-D;if((A>7e3||R>24576)&&(Y>423||!d)){u=o8(e,c,0,N,S,E,P,R,_,D-_,u),R=A=P=0,_=D;for(var J=0;J<286;++J)S[J]=0;for(var J=0;J<30;++J)E[J]=0}var re=2,X=0,ee=m,W=U-H&32767;if(Y>2&&B==j(D-W))for(var O=Math.min(p,Y)-1,z=Math.min(32767,D),V=Math.min(258,Y);W<=z&&--ee&&U!=H;){if(e[D+re]==e[D+re-W]){for(var q=0;q<V&&e[D+q]==e[D+q-W];++q);if(q>re){if(re=q,X=W,q>O)break;for(var K=Math.min(W,q-2),se=0,J=0;J<K;++J){var pe=D-W+J&32767,ie=v[pe],le=pe-ie&32767;le>se&&(se=le,H=pe)}}}U=H,H=v[U],W+=U-H&32767}if(X){N[R++]=268435456|Hk[re]<<18|s8[X];var $e=Hk[re]&31,he=s8[X]&31;P+=Ty[$e]+Oy[he],++S[257+$e],++E[he],T=D+re,++A}else N[R++]=e[D],++S[e[D]]}}for(D=Math.max(D,T);D<o;++D)N[R++]=e[D],++S[e[D]];u=o8(e,c,d,N,S,E,P,R,_,D-_,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=v,i.i=D,i.w=T)}else{for(var D=i.w||0;D<o+d;D+=65535){var Ue=D+65535;Ue>=o&&(c[u/8|0]=d,Ue=o),u=tB(c,u+1,e.subarray(D,Ue))}i.i=o}return eB(l,0,a+c_(u)+s)},nB=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},H1e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new dl(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return z1e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},aB=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},W1e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=nB();s.p(t.dictionary),aB(e,2,s.d())}},V1e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Yd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Yd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Gk(e,t){t||(t={});var r=nB();r.p(e);var a=H1e(e,t,t.dictionary?6:2,4);return W1e(a,t),aB(a,a.length-4,r.d()),a}function G1e(e,t){return q1e(e.subarray(V1e(e),-4),{i:2},t,t)}var K1e=typeof TextDecoder<"u"&&new TextDecoder,X1e=0;try{K1e.decode(rB,{stream:!0}),X1e=1}catch{}var dn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function qj(){dn.console&&typeof dn.console.log=="function"&&dn.console.log.apply(dn.console,arguments)}var Ga={log:qj,warn:function(e){dn.console&&(typeof dn.console.warn=="function"?dn.console.warn.apply(dn.console,arguments):qj.call(null,arguments))},error:function(e){dn.console&&(typeof dn.console.error=="function"?dn.console.error.apply(dn.console,arguments):qj(e))}};function $j(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){rh(a.response,t,r)},a.onerror=function(){Ga.error("could not download file")},a.send()}function l8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Hv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var gx,Kk,rh=dn.saveAs||((typeof window>"u"?"undefined":Ea(window))!=="object"||window!==dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=dn.URL||dn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?l8(s.href)?$j(e,t,r):Hv(s,s.target="_blank"):Hv(s)):(s.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(s.href)}),4e4),setTimeout((function(){Hv(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(l8(e))$j(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){Hv(a)}))}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Ea(i)!=="object"&&(Ga.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return $j(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(dn.HTMLElement)||dn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Ea(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=dn.URL||dn.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});function sB(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}function zj(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=Zo(r,a,s,i,t[0],7,-680876936),i=Zo(i,r,a,s,t[1],12,-389564586),s=Zo(s,i,r,a,t[2],17,606105819),a=Zo(a,s,i,r,t[3],22,-1044525330),r=Zo(r,a,s,i,t[4],7,-176418897),i=Zo(i,r,a,s,t[5],12,1200080426),s=Zo(s,i,r,a,t[6],17,-1473231341),a=Zo(a,s,i,r,t[7],22,-45705983),r=Zo(r,a,s,i,t[8],7,1770035416),i=Zo(i,r,a,s,t[9],12,-1958414417),s=Zo(s,i,r,a,t[10],17,-42063),a=Zo(a,s,i,r,t[11],22,-1990404162),r=Zo(r,a,s,i,t[12],7,1804603682),i=Zo(i,r,a,s,t[13],12,-40341101),s=Zo(s,i,r,a,t[14],17,-1502002290),r=el(r,a=Zo(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=el(i,r,a,s,t[6],9,-1069501632),s=el(s,i,r,a,t[11],14,643717713),a=el(a,s,i,r,t[0],20,-373897302),r=el(r,a,s,i,t[5],5,-701558691),i=el(i,r,a,s,t[10],9,38016083),s=el(s,i,r,a,t[15],14,-660478335),a=el(a,s,i,r,t[4],20,-405537848),r=el(r,a,s,i,t[9],5,568446438),i=el(i,r,a,s,t[14],9,-1019803690),s=el(s,i,r,a,t[3],14,-187363961),a=el(a,s,i,r,t[8],20,1163531501),r=el(r,a,s,i,t[13],5,-1444681467),i=el(i,r,a,s,t[2],9,-51403784),s=el(s,i,r,a,t[7],14,1735328473),r=tl(r,a=el(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=tl(i,r,a,s,t[8],11,-2022574463),s=tl(s,i,r,a,t[11],16,1839030562),a=tl(a,s,i,r,t[14],23,-35309556),r=tl(r,a,s,i,t[1],4,-1530992060),i=tl(i,r,a,s,t[4],11,1272893353),s=tl(s,i,r,a,t[7],16,-155497632),a=tl(a,s,i,r,t[10],23,-1094730640),r=tl(r,a,s,i,t[13],4,681279174),i=tl(i,r,a,s,t[0],11,-358537222),s=tl(s,i,r,a,t[3],16,-722521979),a=tl(a,s,i,r,t[6],23,76029189),r=tl(r,a,s,i,t[9],4,-640364487),i=tl(i,r,a,s,t[12],11,-421815835),s=tl(s,i,r,a,t[15],16,530742520),r=rl(r,a=tl(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=rl(i,r,a,s,t[7],10,1126891415),s=rl(s,i,r,a,t[14],15,-1416354905),a=rl(a,s,i,r,t[5],21,-57434055),r=rl(r,a,s,i,t[12],6,1700485571),i=rl(i,r,a,s,t[3],10,-1894986606),s=rl(s,i,r,a,t[10],15,-1051523),a=rl(a,s,i,r,t[1],21,-2054922799),r=rl(r,a,s,i,t[8],6,1873313359),i=rl(i,r,a,s,t[15],10,-30611744),s=rl(s,i,r,a,t[6],15,-1560198380),a=rl(a,s,i,r,t[13],21,1309151649),r=rl(r,a,s,i,t[4],6,-145523070),i=rl(i,r,a,s,t[11],10,-1120210379),s=rl(s,i,r,a,t[2],15,718787259),a=rl(a,s,i,r,t[9],21,-343485551),e[0]=x0(r,e[0]),e[1]=x0(a,e[1]),e[2]=x0(s,e[2]),e[3]=x0(i,e[3])}function Py(e,t,r,a,s,i){return t=x0(x0(t,e),x0(a,i)),x0(t<<s|t>>>32-s,r)}function Zo(e,t,r,a,s,i,o){return Py(t&r|~t&a,e,t,s,i,o)}function el(e,t,r,a,s,i,o){return Py(t&a|r&~a,e,t,s,i,o)}function tl(e,t,r,a,s,i,o){return Py(t^r^a,e,t,s,i,o)}function rl(e,t,r,a,s,i,o){return Py(r^(t|~a),e,t,s,i,o)}function iB(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)zj(a,Y1e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(zj(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,zj(a,s),a}function Y1e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}gx=dn.atob.bind(dn),Kk=dn.btoa.bind(dn);var c8="0123456789abcdef".split("");function J1e(e){for(var t="",r=0;r<4;r++)t+=c8[e>>8*r+4&15]+c8[e>>8*r&15];return t}function Q1e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Xk(e){return iB(e).map(Q1e).join("")}var Z1e=(function(e){for(var t=0;t<e.length;t++)e[t]=J1e(e[t]);return e.join("")})(iB("hello"))!="5d41402abc4b2a76b9719d911017c592";function x0(e,t){if(Z1e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function Yk(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var f=t.length,p=0,m=0,b="";for(c=0;c<f;c++)m=(m+(u=l[p=(p+1)%256]))%256,l[p]=l[m],l[m]=u,o=l[(l[p]+l[m])%256],b+=String.fromCharCode(t.charCodeAt(c)^o);return b}var d8={print:4,modify:8,copy:16,"annot-forms":32};function mm(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach((function(l){if(d8.perm!==void 0)throw new Error("Invalid permission: "+l);s+=d8[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=Xk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Yk(this.encryptionKey,this.padding)}function pm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function u8(e){if(Ea(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){dn.console&&Ga.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Pb(e){if(!(this instanceof Pb))return new Pb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function oB(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ah(e,t,r,a,s){if(!(this instanceof ah))return new ah(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,oB.call(this,a,s)}function ym(e,t,r,a,s){if(!(this instanceof ym))return new ym(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,oB.call(this,a,s)}function cn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Ea(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=u8;var b="1.3",v=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(G){b=G};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return g};var w=m.__private__.getPageFormat=function(G){return g[G]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},j=y.COMPAT;function N(){this.saveGraphicsState(),te(new rr(et,0,0,-et,0,xl()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),d="n",j=y.ADVANCED}function S(){this.restoreGraphicsState(),d="S",j=y.COMPAT}var E=m.__private__.combineFontStyleAndFontWeight=function(G,ke){if(G=="bold"&&ke=="normal"||G=="bold"&&ke==400||G=="normal"&&ke=="italic"||G=="bold"&&ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ke&&(G=ke==400||ke==="normal"?G==="italic"?"italic":"normal":ke!=700&&ke!=="bold"||G!=="normal"?(ke==700?"bold":ke)+""+G:"bold"),G};m.advancedAPI=function(G){var ke=j===y.COMPAT;return ke&&N.call(this),typeof G!="function"||(G(this),ke&&S.call(this)),this},m.compatAPI=function(G){var ke=j===y.ADVANCED;return ke&&S.call(this),typeof G!="function"||(G(this),ke&&N.call(this)),this},m.isAdvancedAPI=function(){return j===y.ADVANCED};var A,P=function(G){if(j!==y.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=m.roundToPrecision=m.__private__.roundToPrecision=function(G,ke){var ne=t||ke;if(isNaN(G)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(ne).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof c=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return D(G,c)}:c==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return D(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return D(G,16)};var R=m.f2=m.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return D(G,2)},T=m.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return D(G,3)},_=m.scale=m.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return j===y.COMPAT?G*et:j===y.ADVANCED?G:void 0},B=function(G){return j===y.COMPAT?xl()-G:j===y.ADVANCED?G:void 0},U=function(G){return _(B(G))};m.__private__.setPrecision=m.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var H,Y="00000000000000000000000000000000",J=m.__private__.getFileId=function(){return Y},re=m.__private__.setFileId=function(G){return Y=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():Y.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),u!==null&&(bn=new mm(u.userPermissions,u.userPassword,u.ownerPassword,Y)),Y};m.setFileId=function(G){return re(G),this},m.getFileId=function(){return J()};var X=m.__private__.convertDateToPDFDate=function(G){var ke=G.getTimezoneOffset(),ne=ke<0?"+":"-",We=Math.floor(Math.abs(ke/60)),Xe=Math.abs(ke%60),gt=[ne,V(We),"'",V(Xe),"'"].join("");return["D:",G.getFullYear(),V(G.getMonth()+1),V(G.getDate()),V(G.getHours()),V(G.getMinutes()),V(G.getSeconds()),gt].join("")},ee=m.__private__.convertPDFDateToDate=function(G){var ke=parseInt(G.substr(2,4),10),ne=parseInt(G.substr(6,2),10)-1,We=parseInt(G.substr(8,2),10),Xe=parseInt(G.substr(10,2),10),gt=parseInt(G.substr(12,2),10),jt=parseInt(G.substr(14,2),10);return new Date(ke,ne,We,Xe,gt,jt,0)},W=m.__private__.setCreationDate=function(G){var ke;if(G===void 0&&(G=new Date),G instanceof Date)ke=X(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ke=G}return H=ke},O=m.__private__.getCreationDate=function(G){var ke=H;return G==="jsDate"&&(ke=ee(H)),ke};m.setCreationDate=function(G){return W(G),this},m.getCreationDate=function(G){return O(G)};var z,V=m.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},q=m.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},K=0,se=[],pe=[],ie=0,le=[],$e=[],he=!1,Ue=pe,Te=function(){K=0,ie=0,pe=[],se=[],le=[],Be=Gr(),xe=Gr()};m.__private__.setCustomOutputDestination=function(G){he=!0,Ue=G};var oe=function(G){he||(Ue=G)};m.__private__.resetCustomOutputDestination=function(){he=!1,Ue=pe};var te=m.__private__.out=function(G){return G=G.toString(),ie+=G.length+1,Ue.push(G),Ue},Pe=m.__private__.write=function(G){return te(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},je=m.__private__.getArrayBuffer=function(G){for(var ke=G.length,ne=new ArrayBuffer(ke),We=new Uint8Array(ne);ke--;)We[ke]=G.charCodeAt(ke);return ne},Ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ie};var ue=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(G){return ue=j===y.ADVANCED?G/et:G,this};var de,Ae=m.__private__.getFontSize=m.getFontSize=function(){return j===y.COMPAT?ue:ue*et},Qe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(G){return Qe=G,this},m.__private__.getR2L=m.getR2L=function(){return Qe};var ge,fe=m.__private__.setZoomMode=function(G){var ke=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))de=G;else if(isNaN(G)){if(ke.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');de=G}else de=parseInt(G,10)};m.__private__.getZoomMode=function(){return de};var _e,ze=m.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');ge=G};m.__private__.getPageMode=function(){return ge};var Se=m.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');_e=G};m.__private__.getLayoutMode=function(){return _e},m.__private__.setDisplayMode=m.setDisplayMode=function(G,ke,ne){return fe(G),Se(ke),ze(ne),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(G){if(Object.keys(Fe).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[G]},m.__private__.getDocumentProperties=function(){return Fe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(G){for(var ke in Fe)Fe.hasOwnProperty(ke)&&G[ke]&&(Fe[ke]=G[ke]);return this},m.__private__.setDocumentProperty=function(G,ke){if(Object.keys(Fe).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[G]=ke};var Me,et,ut,bt,At,qt={},Gt={},Ye=[],Et={},Cr={},tr={},Or={},pr=null,rt=0,Dt=[],yr=new u8(m),kr=e.hotfixes||[],Xr={},Sr={},pn=[],rr=function G(ke,ne,We,Xe,gt,jt){if(!(this instanceof G))return new G(ke,ne,We,Xe,gt,jt);isNaN(ke)&&(ke=1),isNaN(ne)&&(ne=0),isNaN(We)&&(We=0),isNaN(Xe)&&(Xe=1),isNaN(gt)&&(gt=0),isNaN(jt)&&(jt=0),this._matrix=[ke,ne,We,Xe,gt,jt]};Object.defineProperty(rr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(rr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(rr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(rr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(rr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(rr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(rr.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(rr.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(rr.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(rr.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(rr.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(rr.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(rr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rr.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(G)},rr.prototype.multiply=function(G){var ke=G.sx*this.sx+G.shy*this.shx,ne=G.sx*this.shy+G.shy*this.sy,We=G.shx*this.sx+G.sy*this.shx,Xe=G.shx*this.shy+G.sy*this.sy,gt=G.tx*this.sx+G.ty*this.shx+this.tx,jt=G.tx*this.shy+G.ty*this.sy+this.ty;return new rr(ke,ne,We,Xe,gt,jt)},rr.prototype.decompose=function(){var G=this.sx,ke=this.shy,ne=this.shx,We=this.sy,Xe=this.tx,gt=this.ty,jt=Math.sqrt(G*G+ke*ke),Tt=(G/=jt)*ne+(ke/=jt)*We;ne-=G*Tt,We-=ke*Tt;var br=Math.sqrt(ne*ne+We*We);return Tt/=br,G*(We/=br)<ke*(ne/=br)&&(G=-G,ke=-ke,Tt=-Tt,jt=-jt),{scale:new rr(jt,0,0,br,0,0),translate:new rr(1,0,0,1,Xe,gt),rotate:new rr(G,ke,-ke,G,0,0),skew:new rr(1,0,Tt,1,0,0)}},rr.prototype.toString=function(G){return this.join(" ")},rr.prototype.inversed=function(){var G=this.sx,ke=this.shy,ne=this.shx,We=this.sy,Xe=this.tx,gt=this.ty,jt=1/(G*We-ke*ne),Tt=We*jt,br=-ke*jt,qr=-ne*jt,Kr=G*jt;return new rr(Tt,br,qr,Kr,-Tt*Xe-qr*gt,-br*Xe-Kr*gt)},rr.prototype.applyToPoint=function(G){var ke=G.x*this.sx+G.y*this.shx+this.tx,ne=G.x*this.shy+G.y*this.sy+this.ty;return new _s(ke,ne)},rr.prototype.applyToRectangle=function(G){var ke=this.applyToPoint(G),ne=this.applyToPoint(new _s(G.x+G.w,G.y+G.h));return new Gi(ke.x,ke.y,ne.x-ke.x,ne.y-ke.y)},rr.prototype.clone=function(){var G=this.sx,ke=this.shy,ne=this.shx,We=this.sy,Xe=this.tx,gt=this.ty;return new rr(G,ke,ne,We,Xe,gt)},m.Matrix=rr;var On=m.matrixMult=function(G,ke){return ke.multiply(G)},Hr=new rr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Hr;var sn=function(G,ke){if(!Cr[G]){var ne=(ke instanceof ah?"Sh":"P")+(Object.keys(Et).length+1).toString(10);ke.id=ne,Cr[G]=ne,Et[ne]=ke,yr.publish("addPattern",ke)}};m.ShadingPattern=ah,m.TilingPattern=ym,m.addShadingPattern=function(G,ke){return P("addShadingPattern()"),sn(G,ke),this},m.beginTilingPattern=function(G){P("beginTilingPattern()"),Lc(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},m.endTilingPattern=function(G,ke){P("endTilingPattern()"),ke.stream=$e[z].join(`
`),sn(G,ke),yr.publish("endTilingPattern",ke),pn.pop().restore()};var jr=m.__private__.newObject=function(){var G=Gr();return Ne(G,!0),G},Gr=m.__private__.newObjectDeferred=function(){return K++,se[K]=function(){return ie},K},Ne=function(G,ke){return ke=typeof ke=="boolean"&&ke,se[G]=ie,ke&&te(G+" 0 obj"),G},He=m.__private__.newAdditionalObject=function(){var G={objId:Gr(),content:""};return le.push(G),G},Be=Gr(),xe=Gr(),Ce=m.__private__.decodeColorString=function(G){var ke=G.split(" ");if(ke.length!==2||ke[1]!=="g"&&ke[1]!=="G")ke.length===5&&(ke[4]==="k"||ke[4]==="K")&&(ke=[(1-ke[0])*(1-ke[3]),(1-ke[1])*(1-ke[3]),(1-ke[2])*(1-ke[3]),"r"]);else{var ne=parseFloat(ke[0]);ke=[ne,ne,ne,"r"]}for(var We="#",Xe=0;Xe<3;Xe++)We+=("0"+Math.floor(255*parseFloat(ke[Xe])).toString(16)).slice(-2);return We},Re=m.__private__.encodeColorString=function(G){var ke;typeof G=="string"&&(G={ch1:G});var ne=G.ch1,We=G.ch2,Xe=G.ch3,gt=G.ch4,jt=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var Tt=new sB(ne);if(Tt.ok)ne=Tt.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var br=parseInt(ne.substr(1),16);ne=br>>16&255,We=br>>8&255,Xe=255&br}if(We===void 0||gt===void 0&&ne===We&&We===Xe)typeof ne=="string"?ke=ne+" "+jt[0]:G.precision===2?ke=R(ne/255)+" "+jt[0]:ke=T(ne/255)+" "+jt[0];else if(gt===void 0||Ea(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return ke=["1.","1.","1.",jt[1]].join(" ");if(typeof ne=="string")ke=[ne,We,Xe,jt[1]].join(" ");else switch(G.precision){case 2:ke=[R(ne/255),R(We/255),R(Xe/255),jt[1]].join(" ");break;default:case 3:ke=[T(ne/255),T(We/255),T(Xe/255),jt[1]].join(" ")}}else typeof ne=="string"?ke=[ne,We,Xe,gt,jt[2]].join(" "):G.precision===2?ke=[R(ne),R(We),R(Xe),R(gt),jt[2]].join(" "):ke=[T(ne),T(We),T(Xe),T(gt),jt[2]].join(" ");return ke},tt=m.__private__.getFilters=function(){return o},ht=m.__private__.putStream=function(G){var ke=(G=G||{}).data||"",ne=G.filters||tt(),We=G.alreadyAppliedFilters||[],Xe=G.addLength1||!1,gt=ke.length,jt=G.objectId,Tt=function(Ys){return Ys};if(u!==null&&jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Tt=bn.encryptor(jt,0));var br={};ne===!0&&(ne=["FlateEncode"]);var qr=G.additionalKeyValues||[],Kr=(br=cn.API.processDataByFilters!==void 0?cn.API.processDataByFilters(ke,ne):{data:ke,reverseChain:[]}).reverseChain+(Array.isArray(We)?We.join(" "):We.toString());if(br.data.length!==0&&(qr.push({key:"Length",value:br.data.length}),Xe===!0&&qr.push({key:"Length1",value:gt})),Kr.length!=0)if(Kr.split("/").length-1==1)qr.push({key:"Filter",value:Kr});else{qr.push({key:"Filter",value:"["+Kr+"]"});for(var Sn=0;Sn<qr.length;Sn+=1)if(qr[Sn].key==="DecodeParms"){for(var Ba=[],Ua=0;Ua<br.reverseChain.split("/").length-1;Ua+=1)Ba.push("null");Ba.push(qr[Sn].value),qr[Sn].value="["+Ba.join(" ")+"]"}}te("<<");for(var ps=0;ps<qr.length;ps++)te("/"+qr[ps].key+" "+qr[ps].value);te(">>"),br.data.length!==0&&(te("stream"),te(Tt(br.data)),te("endstream"))},ct=m.__private__.putPage=function(G){var ke=G.number,ne=G.data,We=G.objId,Xe=G.contentsObjId;Ne(We,!0),te("<</Type /Page"),te("/Parent "+G.rootDictionaryObjId+" 0 R"),te("/Resources "+G.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(A(G.mediaBox.bottomLeftX))+" "+parseFloat(A(G.mediaBox.bottomLeftY))+" "+A(G.mediaBox.topRightX)+" "+A(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&te("/CropBox ["+A(G.cropBox.bottomLeftX)+" "+A(G.cropBox.bottomLeftY)+" "+A(G.cropBox.topRightX)+" "+A(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&te("/BleedBox ["+A(G.bleedBox.bottomLeftX)+" "+A(G.bleedBox.bottomLeftY)+" "+A(G.bleedBox.topRightX)+" "+A(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&te("/TrimBox ["+A(G.trimBox.bottomLeftX)+" "+A(G.trimBox.bottomLeftY)+" "+A(G.trimBox.topRightX)+" "+A(G.trimBox.topRightY)+"]"),G.artBox!==null&&te("/ArtBox ["+A(G.artBox.bottomLeftX)+" "+A(G.artBox.bottomLeftY)+" "+A(G.artBox.topRightX)+" "+A(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&te("/UserUnit "+G.userUnit),yr.publish("putPage",{objId:We,pageContext:Dt[ke],pageNumber:ke,page:ne}),te("/Contents "+Xe+" 0 R"),te(">>"),te("endobj");var gt=ne.join(`
`);return j===y.ADVANCED&&(gt+=`
Q`),Ne(Xe,!0),ht({data:gt,filters:tt(),objectId:Xe}),te("endobj"),We},xt=m.__private__.putPages=function(){var G,ke,ne=[];for(G=1;G<=rt;G++)Dt[G].objId=Gr(),Dt[G].contentsObjId=Gr();for(G=1;G<=rt;G++)ne.push(ct({number:G,data:$e[G],objId:Dt[G].objId,contentsObjId:Dt[G].contentsObjId,mediaBox:Dt[G].mediaBox,cropBox:Dt[G].cropBox,bleedBox:Dt[G].bleedBox,trimBox:Dt[G].trimBox,artBox:Dt[G].artBox,userUnit:Dt[G].userUnit,rootDictionaryObjId:Be,resourceDictionaryObjId:xe}));Ne(Be,!0),te("<</Type /Pages");var We="/Kids [";for(ke=0;ke<rt;ke++)We+=ne[ke]+" 0 R ";te(We+"]"),te("/Count "+rt),te(">>"),te("endobj"),yr.publish("postPutPages")},ve=function(G){yr.publish("putFont",{font:G,out:te,newObject:jr,putStream:ht}),G.isAlreadyPutted!==!0&&(G.objectNumber=jr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+pm(G.postScriptName)),te("/Subtype /Type1"),typeof G.encoding=="string"&&te("/Encoding /"+G.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},be=function(){for(var G in qt)qt.hasOwnProperty(G)&&(f===!1||f===!0&&p.hasOwnProperty(G))&&ve(qt[G])},Ge=function(G){G.objectNumber=jr();var ke=[];ke.push({key:"Type",value:"/XObject"}),ke.push({key:"Subtype",value:"/Form"}),ke.push({key:"BBox",value:"["+[A(G.x),A(G.y),A(G.x+G.width),A(G.y+G.height)].join(" ")+"]"}),ke.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var ne=G.pages[1].join(`
`);ht({data:ne,additionalKeyValues:ke,objectId:G.objectNumber}),te("endobj")},at=function(){for(var G in Xr)Xr.hasOwnProperty(G)&&Ge(Xr[G])},yt=function(G,ke){var ne,We=[],Xe=1/(ke-1);for(ne=0;ne<1;ne+=Xe)We.push(ne);if(We.push(1),G[0].offset!=0){var gt={offset:0,color:G[0].color};G.unshift(gt)}if(G[G.length-1].offset!=1){var jt={offset:1,color:G[G.length-1].color};G.push(jt)}for(var Tt="",br=0,qr=0;qr<We.length;qr++){for(ne=We[qr];ne>G[br+1].offset;)br++;var Kr=G[br].offset,Sn=(ne-Kr)/(G[br+1].offset-Kr),Ba=G[br].color,Ua=G[br+1].color;Tt+=q(Math.round((1-Sn)*Ba[0]+Sn*Ua[0]).toString(16))+q(Math.round((1-Sn)*Ba[1]+Sn*Ua[1]).toString(16))+q(Math.round((1-Sn)*Ba[2]+Sn*Ua[2]).toString(16))}return Tt.trim()},wt=function(G,ke){ke||(ke=21);var ne=jr(),We=yt(G.colors,ke),Xe=[];Xe.push({key:"FunctionType",value:"0"}),Xe.push({key:"Domain",value:"[0.0 1.0]"}),Xe.push({key:"Size",value:"["+ke+"]"}),Xe.push({key:"BitsPerSample",value:"8"}),Xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ht({data:We,additionalKeyValues:Xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),te("endobj"),G.objectNumber=jr(),te("<< /ShadingType "+G.type),te("/ColorSpace /DeviceRGB");var gt="/Coords ["+A(parseFloat(G.coords[0]))+" "+A(parseFloat(G.coords[1]))+" ";G.type===2?gt+=A(parseFloat(G.coords[2]))+" "+A(parseFloat(G.coords[3])):gt+=A(parseFloat(G.coords[2]))+" "+A(parseFloat(G.coords[3]))+" "+A(parseFloat(G.coords[4]))+" "+A(parseFloat(G.coords[5])),te(gt+="]"),G.matrix&&te("/Matrix ["+G.matrix.toString()+"]"),te("/Function "+ne+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Rt=function(G,ke){var ne=Gr(),We=jr();ke.push({resourcesOid:ne,objectOid:We}),G.objectNumber=We;var Xe=[];Xe.push({key:"Type",value:"/Pattern"}),Xe.push({key:"PatternType",value:"1"}),Xe.push({key:"PaintType",value:"1"}),Xe.push({key:"TilingType",value:"1"}),Xe.push({key:"BBox",value:"["+G.boundingBox.map(A).join(" ")+"]"}),Xe.push({key:"XStep",value:A(G.xStep)}),Xe.push({key:"YStep",value:A(G.yStep)}),Xe.push({key:"Resources",value:ne+" 0 R"}),G.matrix&&Xe.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),ht({data:G.stream,additionalKeyValues:Xe,objectId:G.objectNumber}),te("endobj")},sr=function(G){var ke;for(ke in Et)Et.hasOwnProperty(ke)&&(Et[ke]instanceof ah?wt(Et[ke]):Et[ke]instanceof ym&&Rt(Et[ke],G))},Yt=function(G){for(var ke in G.objectNumber=jr(),te("<<"),G)switch(ke){case"opacity":te("/ca "+R(G[ke]));break;case"stroke-opacity":te("/CA "+R(G[ke]))}te(">>"),te("endobj")},wr=function(){var G;for(G in tr)tr.hasOwnProperty(G)&&Yt(tr[G])},Pr=function(){for(var G in te("/XObject <<"),Xr)Xr.hasOwnProperty(G)&&Xr[G].objectNumber>=0&&te("/"+G+" "+Xr[G].objectNumber+" 0 R");yr.publish("putXobjectDict"),te(">>")},$r=function(){bn.oid=jr(),te("<<"),te("/Filter /Standard"),te("/V "+bn.v),te("/R "+bn.r),te("/U <"+bn.toHexString(bn.U)+">"),te("/O <"+bn.toHexString(bn.O)+">"),te("/P "+bn.P),te(">>"),te("endobj")},fn=function(){for(var G in te("/Font <<"),qt)qt.hasOwnProperty(G)&&(f===!1||f===!0&&p.hasOwnProperty(G))&&te("/"+G+" "+qt[G].objectNumber+" 0 R");te(">>")},Ur=function(){if(Object.keys(Et).length>0){for(var G in te("/Shading <<"),Et)Et.hasOwnProperty(G)&&Et[G]instanceof ah&&Et[G].objectNumber>=0&&te("/"+G+" "+Et[G].objectNumber+" 0 R");yr.publish("putShadingPatternDict"),te(">>")}},ea=function(G){if(Object.keys(Et).length>0){for(var ke in te("/Pattern <<"),Et)Et.hasOwnProperty(ke)&&Et[ke]instanceof m.TilingPattern&&Et[ke].objectNumber>=0&&Et[ke].objectNumber<G&&te("/"+ke+" "+Et[ke].objectNumber+" 0 R");yr.publish("putTilingPatternDict"),te(">>")}},Un=function(){if(Object.keys(tr).length>0){var G;for(G in te("/ExtGState <<"),tr)tr.hasOwnProperty(G)&&tr[G].objectNumber>=0&&te("/"+G+" "+tr[G].objectNumber+" 0 R");yr.publish("putGStateDict"),te(">>")}},gn=function(G){Ne(G.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),fn(),Ur(),ea(G.objectOid),Un(),Pr(),te(">>"),te("endobj")},po=function(){var G=[];be(),wr(),at(),sr(G),yr.publish("putResources"),G.forEach(gn),gn({resourcesOid:xe,objectOid:Number.MAX_SAFE_INTEGER}),yr.publish("postPutResources")},va=function(){yr.publish("putAdditionalObjects");for(var G=0;G<le.length;G++){var ke=le[G];Ne(ke.objId,!0),te(ke.content),te("endobj")}yr.publish("postPutAdditionalObjects")},Ke=function(G){Gt[G.fontName]=Gt[G.fontName]||{},Gt[G.fontName][G.fontStyle]=G.id},Bt=function(G,ke,ne,We,Xe){var gt={id:"F"+(Object.keys(qt).length+1).toString(10),postScriptName:G,fontName:ke,fontStyle:ne,encoding:We,isStandardFont:Xe||!1,metadata:{}};return yr.publish("addFont",{font:gt,instance:this}),qt[gt.id]=gt,Ke(gt),gt.id},It=function(G){for(var ke=0,ne=Ie.length;ke<ne;ke++){var We=Bt.call(this,G[ke][0],G[ke][1],G[ke][2],Ie[ke][3],!0);f===!1&&(p[We]=!0);var Xe=G[ke][0].split("-");Ke({id:We,fontName:Xe[0],fontStyle:Xe[1]||""})}yr.publish("addFonts",{fonts:qt,dictionary:Gt})},dr=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(We){var ke=We.stack||"";~ke.indexOf(" at ")&&(ke=ke.split(" at ")[1]);var ne="Error in function "+ke.split(`
`)[0].split("<")[0]+": "+We.message;if(!dn.console)throw new Error(ne);dn.console.error(ne,We),dn.alert&&alert(ne)}},G.foo.bar=G,G.foo},Nr=function(G,ke){var ne,We,Xe,gt,jt,Tt,br,qr,Kr;if(Xe=(ke=ke||{}).sourceEncoding||"Unicode",jt=ke.outputEncoding,(ke.autoencode||jt)&&qt[Me].metadata&&qt[Me].metadata[Xe]&&qt[Me].metadata[Xe].encoding&&(gt=qt[Me].metadata[Xe].encoding,!jt&&qt[Me].encoding&&(jt=qt[Me].encoding),!jt&&gt.codePages&&(jt=gt.codePages[0]),typeof jt=="string"&&(jt=gt[jt]),jt)){for(br=!1,Tt=[],ne=0,We=G.length;ne<We;ne++)(qr=jt[G.charCodeAt(ne)])?Tt.push(String.fromCharCode(qr)):Tt.push(G[ne]),Tt[ne].charCodeAt(0)>>8&&(br=!0);G=Tt.join("")}for(ne=G.length;br===void 0&&ne!==0;)G.charCodeAt(ne-1)>>8&&(br=!0),ne--;if(!br)return G;for(Tt=ke.noBOM?[]:[254,255],ne=0,We=G.length;ne<We;ne++){if((Kr=(qr=G.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tt.push(Kr),Tt.push(qr-(Kr<<8))}return String.fromCharCode.apply(void 0,Tt)},vr=m.__private__.pdfEscape=m.pdfEscape=function(G,ke){return Nr(G,ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rr=m.__private__.beginPage=function(G){$e[++rt]=[],Dt[rt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},nr(rt),oe($e[z])},Pn=function(G,ke){var ne,We,Xe;switch(r=ke||r,typeof G=="string"&&(ne=w(G.toLowerCase()),Array.isArray(ne)&&(We=ne[0],Xe=ne[1])),Array.isArray(G)&&(We=G[0]*et,Xe=G[1]*et),isNaN(We)&&(We=s[0],Xe=s[1]),(We>14400||Xe>14400)&&(Ga.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),We=Math.min(14400,We),Xe=Math.min(14400,Xe)),s=[We,Xe],r.substr(0,1)){case"l":Xe>We&&(s=[Xe,We]);break;case"p":We>Xe&&(s=[Xe,We])}Rr(s),lc(Pl),te(Xs),Dl!==0&&te(Dl+" J"),go!==0&&te(go+" j"),yr.publish("addPage",{pageNumber:rt})},yn=function(G){G>0&&G<=rt&&($e.splice(G,1),Dt.splice(G,1),rt--,z>rt&&(z=rt),this.setPage(z))},nr=function(G){G>0&&G<=rt&&(z=G)},fr=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return $e.length-1},Mt=function(G,ke,ne){var We,Xe=void 0;return ne=ne||{},G=G!==void 0?G:qt[Me].fontName,ke=ke!==void 0?ke:qt[Me].fontStyle,We=G.toLowerCase(),Gt[We]!==void 0&&Gt[We][ke]!==void 0?Xe=Gt[We][ke]:Gt[G]!==void 0&&Gt[G][ke]!==void 0?Xe=Gt[G][ke]:ne.disableWarning===!1&&Ga.warn("Unable to look up font label for font '"+G+"', '"+ke+"'. Refer to getFontList() for available fonts."),Xe||ne.noFallback||(Xe=Gt.times[ke])==null&&(Xe=Gt.times.normal),Xe},_r=m.__private__.putInfo=function(){var G=jr(),ke=function(We){return We};for(var ne in u!==null&&(ke=bn.encryptor(G,0)),te("<<"),te("/Producer ("+vr(ke("jsPDF "+cn.version))+")"),Fe)Fe.hasOwnProperty(ne)&&Fe[ne]&&te("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+vr(ke(Fe[ne]))+")");te("/CreationDate ("+vr(ke(H))+")"),te(">>"),te("endobj")},Kt=m.__private__.putCatalog=function(G){var ke=(G=G||{}).rootDictionaryObjId||Be;switch(jr(),te("<<"),te("/Type /Catalog"),te("/Pages "+ke+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+de;ne.substr(ne.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&te("/OpenAction [3 0 R /XYZ null null "+R(de)+"]")}switch(_e||(_e="continuous"),_e){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}ge&&te("/PageMode /"+ge),yr.publish("putCatalog"),te(">>"),te("endobj")},Na=m.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(K+1)),te("/Root "+K+" 0 R"),te("/Info "+(K-1)+" 0 R"),u!==null&&te("/Encrypt "+bn.oid+" 0 R"),te("/ID [ <"+Y+"> <"+Y+"> ]"),te(">>")},Pa=m.__private__.putHeader=function(){te("%PDF-"+b),te("%")},da=m.__private__.putXRef=function(){var G="0000000000";te("xref"),te("0 "+(K+1)),te("0000000000 65535 f ");for(var ke=1;ke<=K;ke++)typeof se[ke]=="function"?te((G+se[ke]()).slice(-10)+" 00000 n "):se[ke]!==void 0?te((G+se[ke]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},ir=m.__private__.buildDocument=function(){Te(),oe(pe),yr.publish("buildDocument"),Pa(),xt(),va(),po(),u!==null&&$r(),_r(),Kt();var G=ie;return da(),Na(),te("startxref"),te(""+G),te("%%EOF"),oe($e[z]),pe.join(`
`)},en=m.__private__.getBlob=function(G){return new Blob([je(G)],{type:"application/pdf"})},ja=m.output=m.__private__.output=dr((function(G,ke){switch(typeof(ke=ke||{})=="string"?ke={filename:ke}:ke.filename=ke.filename||"generated.pdf",G){case void 0:return ir();case"save":m.save(ke.filename);break;case"arraybuffer":return je(ir());case"blob":return en(ir());case"bloburi":case"bloburl":if(dn.URL!==void 0&&typeof dn.URL.createObjectURL=="function")return dn.URL&&dn.URL.createObjectURL(en(ir()))||void 0;Ga.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",We=ir();try{ne=Kk(We)}catch{ne=Kk(unescape(encodeURIComponent(We)))}return"data:application/pdf;filename="+ke.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var Xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ke.pdfObjectUrl&&(Xe=ke.pdfObjectUrl,gt="");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Xe+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ke)+");<\/script></body></html>",Tt=dn.open();return Tt!==null&&Tt.document.write(jt),Tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ke.filename+'" width="500px" height="400px" /></body></html>',qr=dn.open();if(qr!==null){qr.document.write(br);var Kr=this;qr.document.documentElement.querySelector("#pdfViewer").onload=function(){qr.document.title=ke.filename,qr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kr.output("bloburl"))}}return qr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ke)+'"></iframe></body></html>',Ba=dn.open();if(Ba!==null&&(Ba.document.write(Sn),Ba.document.title=ke.filename),Ba||typeof safari>"u")return Ba;break;case"datauri":case"dataurl":return dn.document.location.href=this.output("datauristring",ke);default:return null}})),Xn=function(G){return Array.isArray(kr)===!0&&kr.indexOf(G)>-1};switch(a){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=Xn("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);et=a}var bn=null;W(),re();var Ar=function(G){return u!==null?bn.encryptor(G,0):function(ke){return ke}},tn=m.__private__.getPageInfo=m.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[G].objId,pageNumber:G,pageContext:Dt[G]}},lr=m.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ke in Dt)if(Dt[ke].objId===G)break;return tn(ke)},Hn=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Dt[z].objId,pageNumber:z,pageContext:Dt[z]}};m.addPage=function(){return Pn.apply(this,arguments),this},m.setPage=function(){return nr.apply(this,arguments),oe.call(this,$e[z]),this},m.insertPage=function(G){return this.addPage(),this.movePage(z,G),this},m.movePage=function(G,ke){var ne,We;if(G>ke){ne=$e[G],We=Dt[G];for(var Xe=G;Xe>ke;Xe--)$e[Xe]=$e[Xe-1],Dt[Xe]=Dt[Xe-1];$e[ke]=ne,Dt[ke]=We,this.setPage(ke)}else if(G<ke){ne=$e[G],We=Dt[G];for(var gt=G;gt<ke;gt++)$e[gt]=$e[gt+1],Dt[gt]=Dt[gt+1];$e[ke]=ne,Dt[ke]=We,this.setPage(ke)}return this},m.deletePage=function(){return yn.apply(this,arguments),this},m.__private__.text=m.text=function(G,ke,ne,We,Xe){var gt,jt,Tt,br,qr,Kr,Sn,Ba,Ua,ps=(We=We||{}).scope||this;if(typeof G=="number"&&typeof ke=="number"&&(typeof ne=="string"||Array.isArray(ne))){var Ys=ne;ne=ke,ke=G,G=Ys}if(arguments[3]instanceof rr?(P("The transform parameter of text() with a Matrix value"),Ua=Xe):(Tt=arguments[4],br=arguments[5],Ea(Sn=arguments[3])==="object"&&Sn!==null||(typeof Tt=="string"&&(br=Tt,Tt=null),typeof Sn=="string"&&(br=Sn,Sn=null),typeof Sn=="number"&&(Tt=Sn,Sn=null),We={flags:Sn,angle:Tt,align:br})),isNaN(ke)||isNaN(ne)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return ps;var Fs="",Bo=!1,Js=typeof We.lineHeightFactor=="number"?We.lineHeightFactor:Mo,vo=ps.internal.scaleFactor;function bo(ta){return ta=ta.split("	").join(Array(We.TabLen||9).join(" ")),vr(ta,Sn)}function uu(ta){for(var Yn,_n=ta.concat(),Sa=[],$o=_n.length;$o--;)typeof(Yn=_n.shift())=="string"?Sa.push(Yn):Array.isArray(ta)&&(Yn.length===1||Yn[1]===void 0&&Yn[2]===void 0)?Sa.push(Yn[0]):Sa.push([Yn[0],Yn[1],Yn[2]]);return Sa}function fu(ta,Yn){var _n;if(typeof ta=="string")_n=Yn(ta)[0];else if(Array.isArray(ta)){for(var Sa,$o,mu=ta.concat(),zo=[],Td=mu.length;Td--;)typeof(Sa=mu.shift())=="string"?zo.push(Yn(Sa)[0]):Array.isArray(Sa)&&typeof Sa[0]=="string"&&($o=Yn(Sa[0],Sa[1],Sa[2]),zo.push([$o[0],$o[1],$o[2]]));_n=zo}return _n}var Mc=!1,_d=!0;if(typeof G=="string")Mc=!0;else if(Array.isArray(G)){var Cd=G.concat();jt=[];for(var Ad,ka=Cd.length;ka--;)(typeof(Ad=Cd.shift())!="string"||Array.isArray(Ad)&&typeof Ad[0]!="string")&&(_d=!1);Mc=_d}if(Mc===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var yo=ue/ps.internal.scaleFactor,gl=yo*(Js-1);switch(We.baseline){case"bottom":ne-=gl;break;case"top":ne+=yo-gl;break;case"hanging":ne+=yo-2*gl;break;case"middle":ne+=yo/2-gl}if((Kr=We.maxWidth||0)>0&&(typeof G=="string"?G=ps.splitTextToSize(G,Kr):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce((function(ta,Yn){return ta.concat(ps.splitTextToSize(Yn,Kr))}),[]))),gt={text:G,x:ke,y:ne,options:We,mutex:{pdfEscape:vr,activeFontKey:Me,fonts:qt,activeFontSize:ue}},yr.publish("preProcessText",gt),G=gt.text,Tt=(We=gt.options).angle,!(Ua instanceof rr)&&Tt&&typeof Tt=="number"){Tt*=Math.PI/180,We.rotationDirection===0&&(Tt=-Tt),j===y.ADVANCED&&(Tt=-Tt);var Ja=Math.cos(Tt),Rc=Math.sin(Tt);Ua=new rr(Ja,Rc,-Rc,Ja,0,0)}else Tt&&Tt instanceof rr&&(Ua=Tt);j!==y.ADVANCED||Ua||(Ua=Hr),(qr=We.charSpace||Vi)!==void 0&&(Fs+=A(_(qr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ba=We.horizontalScale)!==void 0&&(Fs+=A(100*Ba)+` Tz
`),We.lang;var on=-1,ts=We.renderingMode!==void 0?We.renderingMode:We.stroke,xa=ps.internal.getCurrentPageInfo().pageContext;switch(ts){case 0:case!1:case"fill":on=0;break;case 1:case!0:case"stroke":on=1;break;case 2:case"fillThenStroke":on=2;break;case 3:case"invisible":on=3;break;case 4:case"fillAndAddForClipping":on=4;break;case 5:case"strokeAndAddPathForClipping":on=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":on=6;break;case 7:case"addToPathForClipping":on=7}var pi=xa.usedRenderingMode!==void 0?xa.usedRenderingMode:-1;on!==-1?Fs+=on+` Tr
`:pi!==-1&&(Fs+=`0 Tr
`),on!==-1&&(xa.usedRenderingMode=on),br=We.align||"left";var qn,Ms=ue*Js,qa=ps.internal.pageSize.getWidth(),Xi=qt[Me];qr=We.charSpace||Vi,Kr=We.maxWidth||0,Sn=Object.assign({autoencode:!0,noBOM:!0},We.flags);var $a=[],xs=function(ta){return ps.getStringUnitWidth(ta,{font:Xi,charSpace:qr,fontSize:ue,doKerning:!1})*ue/vo};if(Object.prototype.toString.call(G)==="[object Array]"){var ba;jt=uu(G),br!=="left"&&(qn=jt.map(xs));var rs,Yi=0;if(br==="right"){ke-=qn[0],G=[],ka=jt.length;for(var Fl=0;Fl<ka;Fl++)Fl===0?(rs=Gs(ke),ba=Ks(ne)):(rs=_(Yi-qn[Fl]),ba=-Ms),G.push([jt[Fl],rs,ba]),Yi=qn[Fl]}else if(br==="center"){ke-=qn[0]/2,G=[],ka=jt.length;for(var Uo=0;Uo<ka;Uo++)Uo===0?(rs=Gs(ke),ba=Ks(ne)):(rs=_((Yi-qn[Uo])/2),ba=-Ms),G.push([jt[Uo],rs,ba]),Yi=qn[Uo]}else if(br==="left"){G=[],ka=jt.length;for(var hu=0;hu<ka;hu++)G.push(jt[hu])}else if(br==="justify"&&Xi.encoding==="Identity-H"){G=[],ka=jt.length,Kr=Kr!==0?Kr:qa;for(var vl=0,Wn=0;Wn<ka;Wn++)if(ba=Wn===0?Ks(ne):-Ms,rs=Wn===0?Gs(ke):vl,Wn<ka-1){var Ml=_((Kr-qn[Wn])/(jt[Wn].split(" ").length-1)),Qs=jt[Wn].split(" ");G.push([Qs[0]+" ",rs,ba]),vl=0;for(var Ti=1;Ti<Qs.length;Ti++){var Rl=(xs(Qs[Ti-1]+" "+Qs[Ti])-xs(Qs[Ti]))*vo+Ml;Ti==Qs.length-1?G.push([Qs[Ti],Rl,0]):G.push([Qs[Ti]+" ",Rl,0]),vl-=Rl}}else G.push([jt[Wn],rs,ba]);G.push(["",vl,0])}else{if(br!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],ka=jt.length,Kr=Kr!==0?Kr:qa,Wn=0;Wn<ka;Wn++)ba=Wn===0?Ks(ne):-Ms,rs=Wn===0?Gs(ke):0,Wn<ka-1?$a.push(A(_((Kr-qn[Wn])/(jt[Wn].split(" ").length-1)))):$a.push(0),G.push([jt[Wn],rs,ba])}}var Ed=typeof We.R2L=="boolean"?We.R2L:Qe;Ed===!0&&(G=fu(G,(function(ta,Yn,_n){return[ta.split("").reverse().join(""),Yn,_n]}))),gt={text:G,x:ke,y:ne,options:We,mutex:{pdfEscape:vr,activeFontKey:Me,fonts:qt,activeFontSize:ue}},yr.publish("postProcessText",gt),G=gt.text,Bo=gt.mutex.isHex||!1;var Bl=qt[Me].encoding;Bl!=="WinAnsiEncoding"&&Bl!=="StandardEncoding"||(G=fu(G,(function(ta,Yn,_n){return[bo(ta),Yn,_n]}))),jt=uu(G),G=[];for(var qo,Ji,Rs,Qi=0,Oi=1,Zi=Array.isArray(jt[0])?Oi:Qi,wo="",Bc=function(ta,Yn,_n){var Sa="";return _n instanceof rr?(_n=typeof We.angle=="number"?On(_n,new rr(1,0,0,1,ta,Yn)):On(new rr(1,0,0,1,ta,Yn),_n),j===y.ADVANCED&&(_n=On(new rr(1,0,0,-1,0,0),_n)),Sa=_n.join(" ")+` Tm
`):Sa=A(ta)+" "+A(Yn)+` Td
`,Sa},gs=0;gs<jt.length;gs++){switch(wo="",Zi){case Oi:Rs=(Bo?"<":"(")+jt[gs][0]+(Bo?">":")"),qo=parseFloat(jt[gs][1]),Ji=parseFloat(jt[gs][2]);break;case Qi:Rs=(Bo?"<":"(")+jt[gs]+(Bo?">":")"),qo=Gs(ke),Ji=Ks(ne)}$a!==void 0&&$a[gs]!==void 0&&(wo=$a[gs]+` Tw
`),gs===0?G.push(wo+Bc(qo,Ji,Ua)+Rs):Zi===Qi?G.push(wo+Rs):Zi===Oi&&G.push(wo+Bc(qo,Ji,Ua)+Rs)}G=Zi===Qi?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var vs=`BT
/`;return vs+=Me+" "+ue+` Tf
`,vs+=A(ue*Js)+` TL
`,vs+=Ya+`
`,vs+=Fs,vs+=G,te(vs+="ET"),p[Me]=!0,ps};var Wr=m.__private__.clip=m.clip=function(G){return te(G==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Wr("evenodd")},m.__private__.discardPath=m.discardPath=function(){return te("n"),this};var Ra=m.__private__.isValidStyle=function(G){var ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(ke=!0),ke};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(G){return Ra(G)&&(d=G),this};var Wi=m.__private__.getStyle=m.getStyle=function(G){var ke=d;switch(G){case"D":case"S":ke="S";break;case"F":ke="f";break;case"FD":case"DF":ke="B";break;case"f":case"f*":case"B":case"B*":ke=G}return ke},ui=m.close=function(){return te("h"),this};m.stroke=function(){return te("S"),this},m.fill=function(G){return hs("f",G),this},m.fillEvenOdd=function(G){return hs("f*",G),this},m.fillStroke=function(G){return hs("B",G),this},m.fillStrokeEvenOdd=function(G){return hs("B*",G),this};var hs=function(G,ke){Ea(ke)==="object"?pl(ke,G):te(G)},ms=function(G){G===null||j===y.ADVANCED&&G===void 0||(G=Wi(G),te(G))};function Ai(G,ke,ne,We,Xe){var gt=new ym(ke||this.boundingBox,ne||this.xStep,We||this.yStep,this.gState,Xe||this.matrix);gt.stream=this.stream;var jt=G+"$$"+this.cloneIndex+++"$$";return sn(jt,gt),gt}var pl=function(G,ke){var ne=Cr[G.key],We=Et[ne];if(We instanceof ah)te("q"),te(jd(ke)),We.gState&&m.setGState(We.gState),te(G.matrix.toString()+" cm"),te("/"+ne+" sh"),te("Q");else if(We instanceof ym){var Xe=new rr(1,0,0,-1,0,xl());G.matrix&&(Xe=Xe.multiply(G.matrix||Hr),ne=Ai.call(We,G.key,G.boundingBox,G.xStep,G.yStep,Xe).id),te("q"),te("/Pattern cs"),te("/"+ne+" scn"),We.gState&&m.setGState(We.gState),te(ke),te("Q")}},jd=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xo=m.moveTo=function(G,ke){return te(A(_(G))+" "+A(U(ke))+" m"),this},Vs=m.lineTo=function(G,ke){return te(A(_(G))+" "+A(U(ke))+" l"),this},fi=m.curveTo=function(G,ke,ne,We,Xe,gt){return te([A(_(G)),A(U(ke)),A(_(ne)),A(U(We)),A(_(Xe)),A(U(gt)),"c"].join(" ")),this};m.__private__.line=m.line=function(G,ke,ne,We,Xe){if(isNaN(G)||isNaN(ke)||isNaN(ne)||isNaN(We)||!Ra(Xe))throw new Error("Invalid arguments passed to jsPDF.line");return j===y.COMPAT?this.lines([[ne-G,We-ke]],G,ke,[1,1],Xe||"S"):this.lines([[ne-G,We-ke]],G,ke,[1,1]).stroke()},m.__private__.lines=m.lines=function(G,ke,ne,We,Xe,gt){var jt,Tt,br,qr,Kr,Sn,Ba,Ua,ps,Ys,Fs,Bo;if(typeof G=="number"&&(Bo=ne,ne=ke,ke=G,G=Bo),We=We||[1,1],gt=gt||!1,isNaN(ke)||isNaN(ne)||!Array.isArray(G)||!Array.isArray(We)||!Ra(Xe)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xo(ke,ne),jt=We[0],Tt=We[1],qr=G.length,Ys=ke,Fs=ne,br=0;br<qr;br++)(Kr=G[br]).length===2?(Ys=Kr[0]*jt+Ys,Fs=Kr[1]*Tt+Fs,Vs(Ys,Fs)):(Sn=Kr[0]*jt+Ys,Ba=Kr[1]*Tt+Fs,Ua=Kr[2]*jt+Ys,ps=Kr[3]*Tt+Fs,Ys=Kr[4]*jt+Ys,Fs=Kr[5]*Tt+Fs,fi(Sn,Ba,Ua,ps,Ys,Fs));return gt&&ui(),ms(Xe),this},m.path=function(G){for(var ke=0;ke<G.length;ke++){var ne=G[ke],We=ne.c;switch(ne.op){case"m":xo(We[0],We[1]);break;case"l":Vs(We[0],We[1]);break;case"c":fi.apply(this,We);break;case"h":ui()}}return this},m.__private__.rect=m.rect=function(G,ke,ne,We,Xe){if(isNaN(G)||isNaN(ke)||isNaN(ne)||isNaN(We)||!Ra(Xe))throw new Error("Invalid arguments passed to jsPDF.rect");return j===y.COMPAT&&(We=-We),te([A(_(G)),A(U(ke)),A(_(ne)),A(_(We)),"re"].join(" ")),ms(Xe),this},m.__private__.triangle=m.triangle=function(G,ke,ne,We,Xe,gt,jt){if(isNaN(G)||isNaN(ke)||isNaN(ne)||isNaN(We)||isNaN(Xe)||isNaN(gt)||!Ra(jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-G,We-ke],[Xe-ne,gt-We],[G-Xe,ke-gt]],G,ke,[1,1],jt,!0),this},m.__private__.roundedRect=m.roundedRect=function(G,ke,ne,We,Xe,gt,jt){if(isNaN(G)||isNaN(ke)||isNaN(ne)||isNaN(We)||isNaN(Xe)||isNaN(gt)||!Ra(jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Tt=4/3*(Math.SQRT2-1);return Xe=Math.min(Xe,.5*ne),gt=Math.min(gt,.5*We),this.lines([[ne-2*Xe,0],[Xe*Tt,0,Xe,gt-gt*Tt,Xe,gt],[0,We-2*gt],[0,gt*Tt,-Xe*Tt,gt,-Xe,gt],[2*Xe-ne,0],[-Xe*Tt,0,-Xe,-gt*Tt,-Xe,-gt],[0,2*gt-We],[0,-gt*Tt,Xe*Tt,-gt,Xe,-gt]],G+Xe,ke,[1,1],jt,!0),this},m.__private__.ellipse=m.ellipse=function(G,ke,ne,We,Xe){if(isNaN(G)||isNaN(ke)||isNaN(ne)||isNaN(We)||!Ra(Xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*ne,jt=4/3*(Math.SQRT2-1)*We;return xo(G+ne,ke),fi(G+ne,ke-jt,G+gt,ke-We,G,ke-We),fi(G-gt,ke-We,G-ne,ke-jt,G-ne,ke),fi(G-ne,ke+jt,G-gt,ke+We,G,ke+We),fi(G+gt,ke+We,G+ne,ke+jt,G+ne,ke),ms(Xe),this},m.__private__.circle=m.circle=function(G,ke,ne,We){if(isNaN(G)||isNaN(ke)||isNaN(ne)||!Ra(We))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,ke,ne,ne,We)},m.setFont=function(G,ke,ne){return ne&&(ke=E(ke,ne)),Me=Mt(G,ke,{disableWarning:!1}),this};var Fo=m.__private__.getFont=m.getFont=function(){return qt[Mt.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var G,ke,ne={};for(G in Gt)if(Gt.hasOwnProperty(G))for(ke in ne[G]=[],Gt[G])Gt[G].hasOwnProperty(ke)&&ne[G].push(ke);return ne},m.addFont=function(G,ke,ne,We,Xe){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?Xe=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(ne=E(ne,We)),Xe=Xe||"Identity-H",Bt.call(this,G,ke,ne,Xe)};var Mo,Pl=e.lineWidth||.200025,Ss=m.__private__.getLineWidth=m.getLineWidth=function(){return Pl},lc=m.__private__.setLineWidth=m.setLineWidth=function(G){return Pl=G,te(A(_(G))+" w"),this};m.__private__.setLineDash=cn.API.setLineDash=cn.API.setLineDashPattern=function(G,ke){if(G=G||[],ke=ke||0,isNaN(ke)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map((function(ne){return A(_(ne))})).join(" "),ke=A(_(ke)),te("["+G+"] "+ke+" d"),this};var Il=m.__private__.getLineHeight=m.getLineHeight=function(){return ue*Mo};m.__private__.getLineHeight=m.getLineHeight=function(){return ue*Mo};var cc=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(Mo=G),this},hi=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Mo};cc(e.lineHeight);var Gs=m.__private__.getHorizontalCoordinate=function(G){return _(G)},Ks=m.__private__.getVerticalCoordinate=function(G){return j===y.ADVANCED?G:Dt[z].mediaBox.topRightY-Dt[z].mediaBox.bottomLeftY-_(G)},kd=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(G){return A(Gs(G))},mi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(G){return A(Ks(G))},Xs=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ce(Xs)},m.__private__.setStrokeColor=m.setDrawColor=function(G,ke,ne,We){return Xs=Re({ch1:G,ch2:ke,ch3:ne,ch4:We,pdfColorType:"draw",precision:2}),te(Xs),this};var Ro=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ce(Ro)},m.__private__.setFillColor=m.setFillColor=function(G,ke,ne,We){return Ro=Re({ch1:G,ch2:ke,ch3:ne,ch4:We,pdfColorType:"fill",precision:2}),te(Ro),this};var Ya=e.textColor||"0 g",Ei=m.__private__.getTextColor=m.getTextColor=function(){return Ce(Ya)};m.__private__.setTextColor=m.setTextColor=function(G,ke,ne,We){return Ya=Re({ch1:G,ch2:ke,ch3:ne,ch4:We,pdfColorType:"text",precision:3}),this};var Vi=e.charSpace,dc=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Vi||0)};m.__private__.setCharSpace=m.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vi=G,this};var Dl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(G){var ke=m.CapJoinStyles[G];if(ke===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=ke,te(ke+" J"),this};var go=0;m.__private__.setLineJoin=m.setLineJoin=function(G){var ke=m.CapJoinStyles[G];if(ke===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return go=ke,te(ke+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(A(_(G))+" M"),this},m.GState=Pb,m.setGState=function(G){(G=typeof G=="string"?tr[Or[G]]:Dn(null,G)).equals(pr)||(te("/"+G.id+" gs"),pr=G)};var Dn=function(G,ke){if(!G||!Or[G]){var ne=!1;for(var We in tr)if(tr.hasOwnProperty(We)&&tr[We].equals(ke)){ne=!0;break}if(ne)ke=tr[We];else{var Xe="GS"+(Object.keys(tr).length+1).toString(10);tr[Xe]=ke,ke.id=Xe}return G&&(Or[G]=ke.id),yr.publish("addGState",ke),ke}};m.addGState=function(G,ke){return Dn(G,ke),this},m.saveGraphicsState=function(){return te("q"),Ye.push({key:Me,size:ue,color:Ya}),this},m.restoreGraphicsState=function(){te("Q");var G=Ye.pop();return Me=G.key,ue=G.size,Ya=G.color,pr=null,this},m.setCurrentTransformationMatrix=function(G){return te(G.toString()+" cm"),this},m.comment=function(G){return te("#"+G),this};var _s=function(G,ke){var ne=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(gt){isNaN(gt)||(ne=parseFloat(gt))}});var We=ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return We},set:function(gt){isNaN(gt)||(We=parseFloat(gt))}});var Xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Xe},set:function(gt){Xe=gt.toString()}}),this},Gi=function(G,ke,ne,We){_s.call(this,G,ke),this.type="rect";var Xe=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Xe},set:function(jt){isNaN(jt)||(Xe=parseFloat(jt))}});var gt=We||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(jt){isNaN(jt)||(gt=parseFloat(jt))}}),this},Ki=function(){this.page=rt,this.currentPage=z,this.pages=$e.slice(0),this.pagesContext=Dt.slice(0),this.x=ut,this.y=bt,this.matrix=At,this.width=ua(z),this.height=xl(z),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Ki.prototype.restore=function(){rt=this.page,z=this.currentPage,Dt=this.pagesContext,$e=this.pages,ut=this.x,bt=this.y,At=this.matrix,Sd(z,this.width),Fc(z,this.height),Ue=this.outputDestination};var Lc=function(G,ke,ne,We,Xe){pn.push(new Ki),rt=z=0,$e=[],ut=G,bt=ke,At=Xe,Rr([ne,We])},uc=function(G){if(Sr[G])pn.pop().restore();else{var ke=new Ki,ne="Xo"+(Object.keys(Xr).length+1).toString(10);ke.id=ne,Sr[G]=ne,Xr[ne]=ke,yr.publish("addFormObject",ke),pn.pop().restore()}};for(var Ll in m.beginFormObject=function(G,ke,ne,We,Xe){return Lc(G,ke,ne,We,Xe),this},m.endFormObject=function(G){return uc(G),this},m.doFormObject=function(G,ke){var ne=Xr[Sr[G]];return te("q"),te(ke.toString()+" cm"),te("/"+ne.id+" Do"),te("Q"),this},m.getFormObject=function(G){var ke=Xr[Sr[G]];return{x:ke.x,y:ke.y,width:ke.width,height:ke.height,matrix:ke.matrix}},m.save=function(G,ke){return G=G||"generated.pdf",(ke=ke||{}).returnPromise=ke.returnPromise||!1,ke.returnPromise===!1?(rh(en(ir()),G),typeof rh.unload=="function"&&dn.setTimeout&&setTimeout(rh.unload,911),this):new Promise((function(ne,We){try{var Xe=rh(en(ir()),G);typeof rh.unload=="function"&&dn.setTimeout&&setTimeout(rh.unload,911),ne(Xe)}catch(gt){We(gt.message)}}))},cn.API)cn.API.hasOwnProperty(Ll)&&(Ll==="events"&&cn.API.events.length?(function(G,ke){var ne,We,Xe;for(Xe=ke.length-1;Xe!==-1;Xe--)ne=ke[Xe][0],We=ke[Xe][1],G.subscribe.apply(G,[ne].concat(typeof We=="function"?[We]:We))})(yr,cn.API.events):m[Ll]=cn.API[Ll]);var ua=m.getPageWidth=function(G){return(Dt[G=G||z].mediaBox.topRightX-Dt[G].mediaBox.bottomLeftX)/et},Sd=m.setPageWidth=function(G,ke){Dt[G].mediaBox.topRightX=ke*et+Dt[G].mediaBox.bottomLeftX},xl=m.getPageHeight=function(G){return(Dt[G=G||z].mediaBox.topRightY-Dt[G].mediaBox.bottomLeftY)/et},Fc=m.setPageHeight=function(G,ke){Dt[G].mediaBox.topRightY=ke*et+Dt[G].mediaBox.bottomLeftY};return m.internal={pdfEscape:vr,getStyle:Wi,getFont:Fo,getFontSize:Ae,getCharSpace:dc,getTextColor:Ei,getLineHeight:Il,getLineHeightFactor:hi,getLineWidth:Ss,write:Pe,getHorizontalCoordinate:Gs,getVerticalCoordinate:Ks,getCoordinateString:kd,getVerticalCoordinateString:mi,collections:{},newObject:jr,newAdditionalObject:He,newObjectDeferred:Gr,newObjectDeferredBegin:Ne,getFilters:tt,putStream:ht,events:yr,scaleFactor:et,pageSize:{getWidth:function(){return ua(z)},setWidth:function(G){Sd(z,G)},getHeight:function(){return xl(z)},setHeight:function(G){Fc(z,G)}},encryptionOptions:u,encryption:bn,getEncryptor:Ar,output:ja,getNumberOfPages:fr,pages:$e,out:te,f2:R,f3:T,getPageInfo:tn,getPageInfoByObjId:lr,getCurrentPageInfo:Hn,getPDFVersion:v,Point:_s,Rectangle:Gi,Matrix:rr,hasHotfix:Xn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ua(z)},set:function(G){Sd(z,G)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return xl(z)},set:function(G){Fc(z,G)},enumerable:!0,configurable:!0}),It.call(m,Ie),Me="F1",Pn(s,r),yr.publish("initialized"),m}mm.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},mm.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},mm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},mm.prototype.processOwnerPassword=function(e,t){return Yk(Xk(t).substr(0,5),e)},mm.prototype.encryptor=function(e,t){var r=Xk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Yk(r,a)}},Pb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ea(e)!==Ea(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},cn.API={events:[]},cn.version="2.5.2";var qs=cn.API,d_=1,Kh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},um=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nn=function(e){return e.toFixed(2)},i0=function(e){return e.toFixed(5)};qs.__acroform__={};var oc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},f8=function(e){return e*d_},Tu=function(e){var t=new cB,r=Mr.internal.getHeight(e)||0,a=Mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Nn(a)),Number(Nn(r))],t},ebe=qs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},tbe=qs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},rbe=qs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ni=qs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rbe(e,t-1)},ai=qs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ebe(e,t-1)},si=qs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tbe(e,t-1)},nbe=qs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=a(i)||0,[Number(Nn(c.lowerLeft_X)),Number(Nn(c.lowerLeft_Y)),Number(Nn(c.upperRight_X)),Number(Nn(c.upperRight_Y))]},abe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=Jk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Nn(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Tu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Jk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(T){return T.split(`
`)})):s.map((function(T){return[T]}));var i=r,o=Mr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Mr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,_,B){if(T+1<s.length){var U=_+" "+s[T+1][0];return Wv(U,e,B).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,f=Wv("3",e,i).height,p=e.multiline?o-i:(o-f)/2,m=p+=2,b=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Wv(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var w="",y=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var N=!1;if(s[j].length!==1&&g!==s[j].length-1){if((f+2)*(y+2)+2>o)continue e;w+=s[j][g],N=!0,v=j,j--}else{w=(w+=s[j][g]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var S=parseInt(j),E=c(S,w,i),A=j>=s.length-1;if(E&&!A){w+=" ",g=0;continue}if(E||A){if(A)v=S;else if(e.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(y+2)+2>o)continue e;v=S}}for(var P="",D=b;D<=v;D++){var R=s[D];if(e.multiline){if(D===v){P+=R[g]+" ",g=(g+1)%R.length;continue}if(D===b){P+=R[R.length-1]+" ";continue}}P+=R[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,u=Wv(P,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=Nn(d)+" "+Nn(m)+` Td
`,t+="("+Kh(P)+`) Tj
`,t+=-Nn(d)+` 0 Td
`,m=-(i+2),u=0,b=N?v:v+1,y++,w=""}break}return a.text=t,a.fontSize=i,a},Wv=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},sbe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ibe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(a){return a.type===r.type&&a.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},obe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Ea(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},lbe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(cu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(sbe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");d_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new dB,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&ibe(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=nbe(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Mr.createDefaultAppearanceStream(l),Ea(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=abe(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var m=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var b=m[o];typeof b=="function"&&(b=b.call(s,l)),f+="/"+o+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(s,l)),f+="/"+o+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&obe(s.internal.acroformPlugin.xForms,s)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},lB=qs.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Ea(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Kh(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Hj=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Kh(a(e))+")"},Mu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mu.prototype.toString=function(){return this.objId+" 0 R"},Mu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Mu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:lB(s,this.objId,this.scope)}):s instanceof Mu?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var cB=function(){Mu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};oc(cB,Mu);var dB=function(){Mu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Kh(r(e))+")"}},set:function(r){e=r}})};oc(dB,Mu);var cu=function e(){Mu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');t=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ni(t,3)},set:function(w){w?this.F=ai(t,3):this.F=si(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(w){a=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(w){a[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(w){a[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(w){a[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(w){a[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ib)return;i="FieldObject"+e.FieldNum++}var w=function(y){return y};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Kh(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/d_:d},set:function(w){d=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Ib||this instanceof wh))return Hj(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof co?p:Hj(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof co?w:w.substr(0,1)==="("?um(w.substr(1,w.length-2)):um(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof co?um(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof co?"/"+w:w}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof co?m:Hj(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof co?w:w.substr(0,1)==="("?um(w.substr(1,w.length-2)):um(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof co?um(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof co?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(w){w=!!w,v=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(w){b=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,1)},set:function(w){w?this.Ff=ai(this.Ff,1):this.Ff=si(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,2)},set:function(w){w?this.Ff=ai(this.Ff,2):this.Ff=si(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,3)},set:function(w){w?this.Ff=ai(this.Ff,3):this.Ff=si(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');g=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(g){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};oc(cu,Mu);var Em=function(){cu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lB(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,18)},set:function(r){r?this.Ff=ai(this.Ff,18):this.Ff=si(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ai(this.Ff,19):this.Ff=si(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,20)},set:function(r){r?(this.Ff=ai(this.Ff,20),t.sort()):this.Ff=si(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,22)},set:function(r){r?this.Ff=ai(this.Ff,22):this.Ff=si(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(r){r?this.Ff=ai(this.Ff,23):this.Ff=si(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,27)},set:function(r){r?this.Ff=ai(this.Ff,27):this.Ff=si(this.Ff,27)}}),this.hasAppearanceStream=!1};oc(Em,cu);var Tm=function(){Em.call(this),this.fontName="helvetica",this.combo=!1};oc(Tm,Em);var Om=function(){Tm.call(this),this.combo=!0};oc(Om,Tm);var a1=function(){Om.call(this),this.edit=!0};oc(a1,Om);var co=function(){cu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,15)},set:function(r){r?this.Ff=ai(this.Ff,15):this.Ff=si(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,16)},set:function(r){r?this.Ff=ai(this.Ff,16):this.Ff=si(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,17)},set:function(r){r?this.Ff=ai(this.Ff,17):this.Ff=si(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(r){r?this.Ff=ai(this.Ff,26):this.Ff=si(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Kh(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ea(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};oc(co,cu);var s1=function(){co.call(this),this.pushButton=!0};oc(s1,co);var Pm=function(){co.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};oc(Pm,co);var Ib=function(){var e,t;cu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+Kh(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Ea(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};oc(Ib,cu),Pm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Pm.prototype.createOption=function(e){var t=new Ib;return t.Parent=this,t.optionName=e,this.Kids.push(t),cbe.call(this.scope,t),t};var i1=function(){co.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Mr.CheckBox.createAppearanceStream()};oc(i1,co);var wh=function(){cu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,13)},set:function(t){t?this.Ff=ai(this.Ff,13):this.Ff=si(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,21)},set:function(t){t?this.Ff=ai(this.Ff,21):this.Ff=si(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(t){t?this.Ff=ai(this.Ff,23):this.Ff=si(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,24)},set:function(t){t?this.Ff=ai(this.Ff,24):this.Ff=si(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,25)},set:function(t){t?this.Ff=ai(this.Ff,25):this.Ff=si(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(t){t?this.Ff=ai(this.Ff,26):this.Ff=si(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};oc(wh,cu);var o1=function(){wh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,14)},set:function(e){e?this.Ff=ai(this.Ff,14):this.Ff=si(this.Ff,14)}}),this.password=!0};oc(o1,wh);var Mr={CheckBox:{createAppearanceStream:function(){return{N:{On:Mr.CheckBox.YesNormal},D:{On:Mr.CheckBox.YesPushDown,Off:Mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Tu(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Jk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Nn(Mr.internal.getWidth(e))+" "+Nn(Mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Nn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Tu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Mr.internal.getHeight(e),o=Mr.internal.getWidth(e),l=Jk(e,e.caption);return s.push("1 g"),s.push("0 0 "+Nn(o)+" "+Nn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Nn(o-1)+" "+Nn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Nn(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Tu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nn(Mr.internal.getWidth(e))+" "+Nn(Mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Mr.RadioButton.Circle.YesNormal,t.D[e]=Mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Tu(e);t.scope=e.scope;var r=[],a=Mr.internal.getWidth(e)<=Mr.internal.getHeight(e)?Mr.internal.getWidth(e)/4:Mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Mr.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+i0(Mr.internal.getWidth(e)/2)+" "+i0(Mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Tu(e);t.scope=e.scope;var r=[],a=Mr.internal.getWidth(e)<=Mr.internal.getHeight(e)?Mr.internal.getWidth(e)/4:Mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Mr.internal.Bezier_C).toFixed(5)),o=Number((a*Mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+i0(Mr.internal.getWidth(e)/2)+" "+i0(Mr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+i0(Mr.internal.getWidth(e)/2)+" "+i0(Mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Tu(e);t.scope=e.scope;var r=[],a=Mr.internal.getWidth(e)<=Mr.internal.getHeight(e)?Mr.internal.getWidth(e)/4:Mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+i0(Mr.internal.getWidth(e)/2)+" "+i0(Mr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Mr.RadioButton.Cross.YesNormal,t.D[e]=Mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Tu(e);t.scope=e.scope;var r=[],a=Mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Nn(Mr.internal.getWidth(e)-2)+" "+Nn(Mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Nn(a.x1.x)+" "+Nn(a.x1.y)+" m"),r.push(Nn(a.x2.x)+" "+Nn(a.x2.y)+" l"),r.push(Nn(a.x4.x)+" "+Nn(a.x4.y)+" m"),r.push(Nn(a.x3.x)+" "+Nn(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Tu(e);t.scope=e.scope;var r=Mr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Nn(Mr.internal.getWidth(e))+" "+Nn(Mr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Nn(Mr.internal.getWidth(e)-2)+" "+Nn(Mr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Nn(r.x1.x)+" "+Nn(r.x1.y)+" m"),a.push(Nn(r.x2.x)+" "+Nn(r.x2.y)+" l"),a.push(Nn(r.x4.x)+" "+Nn(r.x4.y)+" m"),a.push(Nn(r.x3.x)+" "+Nn(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Tu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nn(Mr.internal.getWidth(e))+" "+Nn(Mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Mr.internal.getWidth(e),r=Mr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Mr.internal.getWidth=function(e){var t=0;return Ea(e)==="object"&&(t=f8(e.Rect[2])),t},Mr.internal.getHeight=function(e){var t=0;return Ea(e)==="object"&&(t=f8(e.Rect[3])),t};var cbe=qs.addField=function(e){if(lbe(this,e),!(e instanceof cu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};qs.AcroFormChoiceField=Em,qs.AcroFormListBox=Tm,qs.AcroFormComboBox=Om,qs.AcroFormEditBox=a1,qs.AcroFormButton=co,qs.AcroFormPushButton=s1,qs.AcroFormRadioButton=Pm,qs.AcroFormCheckBox=i1,qs.AcroFormTextField=wh,qs.AcroFormPasswordField=o1,qs.AcroFormAppearance=Mr,qs.AcroForm={ChoiceField:Em,ListBox:Tm,ComboBox:Om,EditBox:a1,Button:co,PushButton:s1,RadioButton:Pm,CheckBox:i1,TextField:wh,PasswordField:o1,Appearance:Mr},cn.AcroForm={ChoiceField:Em,ListBox:Tm,ComboBox:Om,EditBox:a1,Button:co,PushButton:s1,RadioButton:Pm,CheckBox:i1,TextField:wh,PasswordField:o1,Appearance:Mr};cn.AcroForm;function uB(e){return e.reduce((function(t,r,a){return t[r]=a,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(T,_){var B,U,H,Y,J,re=t;if((_=_||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(E(T))for(J in r)for(H=r[J],B=0;B<H.length;B+=1){for(Y=!0,U=0;U<H[B].length;U+=1)if(H[B][U]!==void 0&&H[B][U]!==T[U]){Y=!1;break}if(Y===!0){re=J;break}}else for(J in r)for(H=r[J],B=0;B<H.length;B+=1){for(Y=!0,U=0;U<H[B].length;U+=1)if(H[B][U]!==void 0&&H[B][U]!==T.charCodeAt(U)){Y=!1;break}if(Y===!0){re=J;break}}return re===t&&_!==t&&(re=_),re},s=function T(_){for(var B=this.internal.write,U=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);_.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:_.width}),Y.push({key:"Height",value:_.height}),_.colorSpace===g.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_.palette.length/3-1)+" "+("sMask"in _&&_.sMask!==void 0?_.objectId+2:_.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+_.colorSpace}),_.colorSpace===g.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:_.bitsPerComponent}),"decodeParameters"in _&&_.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+_.decodeParameters+">>"}),"transparency"in _&&Array.isArray(_.transparency)){for(var J="",re=0,X=_.transparency.length;re<X;re++)J+=_.transparency[re]+" "+_.transparency[re]+" ";Y.push({key:"Mask",value:"["+J+"]"})}_.sMask!==void 0&&Y.push({key:"SMask",value:_.objectId+1+" 0 R"});var ee=_.filter!==void 0?["/"+_.filter]:void 0;if(U({data:_.data,additionalKeyValues:Y,alreadyAppliedFilters:ee,objectId:_.objectId}),B("endobj"),"sMask"in _&&_.sMask!==void 0){var W="/Predictor "+_.predictor+" /Colors 1 /BitsPerComponent "+_.bitsPerComponent+" /Columns "+_.width,O={width:_.width,height:_.height,colorSpace:"DeviceGray",bitsPerComponent:_.bitsPerComponent,decodeParameters:W,data:_.sMask};"filter"in _&&(O.filter=_.filter),T.call(this,O)}if(_.colorSpace===g.INDEXED){var z=this.internal.newObject();U({data:P(new Uint8Array(_.palette)),objectId:z}),B("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var _ in T)s.call(this,T[_])},o=function(){var T,_=this.internal.collections.addImage_images,B=this.internal.write;for(var U in _)B("/I"+(T=_[U]).index,T.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return l.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(T){return typeof e["process"+T.toUpperCase()]=="function"},f=function(T){return Ea(T)==="object"&&T.nodeType===1},p=function(T,_){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var B=""+T.getAttribute("src");if(B.indexOf("data:image/")===0)return gx(unescape(B).split("base64,").pop());var U=e.loadFile(B,!0);if(U!==void 0)return U}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var H;switch(_){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return gx(T.toDataURL(H,1).split("base64,").pop())}},m=function(T){var _=this.internal.collections.addImage_images;if(_){for(var B in _)if(T===_[B].alias)return _[B]}},b=function(T,_,B){return T||_||(T=-96,_=-96),T<0&&(T=-1*B.width*72/T/this.internal.scaleFactor),_<0&&(_=-1*B.height*72/_/this.internal.scaleFactor),T===0&&(T=_*B.width/B.height),_===0&&(_=T*B.height/B.width),[T,_]},v=function(T,_,B,U,H,Y){var J=b.call(this,B,U,H),re=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,ee=c.call(this);if(B=J[0],U=J[1],ee[H.index]=H,Y){Y*=Math.PI/180;var W=Math.cos(Y),O=Math.sin(Y),z=function(q){return q.toFixed(4)},V=[z(W),z(O),z(-1*O),z(W),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,re(T),X(_+U),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([re(B),"0","0",re(U),"0","0","cm"].join(" "))):this.internal.write([re(B),"0","0",re(U),re(T),X(_+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(T){var _,B,U=0;if(typeof T=="string")for(B=T.length,_=0;_<B;_++)U=(U<<5)-U+T.charCodeAt(_),U|=0;else if(E(T))for(B=T.byteLength/2,_=0;_<B;_++)U=(U<<5)-U+T[_],U|=0;return U},j=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var _=!0;return T.length===0&&(_=!1),T.length%4!=0&&(_=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(_=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(_=!1),_},N=e.__addimage__.extractImageFromDataUrl=function(T){var _=(T=T||"").split("base64,"),B=null;if(_.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(_[0]);Array.isArray(U)&&(B={mimeType:U[1],charset:U[2],data:_[1]})}return B},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return S()&&T instanceof ArrayBuffer};var E=e.__addimage__.isArrayBufferView=function(T){return S()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},A=e.__addimage__.binaryStringToUint8Array=function(T){for(var _=T.length,B=new Uint8Array(_),U=0;U<_;U++)B[U]=T.charCodeAt(U);return B},P=e.__addimage__.arrayBufferToBinaryString=function(T){for(var _="",B=E(T)?T:new Uint8Array(T),U=0;U<B.length;U+=8192)_+=String.fromCharCode.apply(null,B.subarray(U,U+8192));return _};e.addImage=function(){var T,_,B,U,H,Y,J,re,X;if(typeof arguments[1]=="number"?(_=t,B=arguments[1],U=arguments[2],H=arguments[3],Y=arguments[4],J=arguments[5],re=arguments[6],X=arguments[7]):(_=arguments[1],B=arguments[2],U=arguments[3],H=arguments[4],Y=arguments[5],J=arguments[6],re=arguments[7],X=arguments[8]),Ea(T=arguments[0])==="object"&&!f(T)&&"imageData"in T){var ee=T;T=ee.imageData,_=ee.format||_||t,B=ee.x||B||0,U=ee.y||U||0,H=ee.w||ee.width||H,Y=ee.h||ee.height||Y,J=ee.alias||J,re=ee.compression||re,X=ee.rotation||ee.angle||X}var W=this.internal.getFilters();if(re===void 0&&W.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(B)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=D.call(this,T,_,J,re);return v.call(this,B,U,H,Y,O,X),this};var D=function(T,_,B,U){var H,Y,J;if(typeof T=="string"&&a(T)===t){T=unescape(T);var re=R(T,!1);(re!==""||(re=e.loadFile(T,!0))!==void 0)&&(T=re)}if(f(T)&&(T=p(T,_)),_=a(T,_),!u(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(((J=B)==null||J.length===0)&&(B=(function(X){return typeof X=="string"||E(X)?y(X):E(X.data)?y(X.data):null})(T)),(H=m.call(this,B))||(S()&&(T instanceof Uint8Array||_==="RGBA"||(Y=T,T=A(T))),H=this["process"+_.toUpperCase()](T,d.call(this),B,(function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:w.NONE})(U),Y)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},R=e.__addimage__.convertBase64ToBinaryString=function(T,_){var B;_=typeof _!="boolean"||_;var U,H="";if(typeof T=="string"){U=(B=N(T))!==null?B.data:T;try{H=gx(U)}catch(Y){if(_)throw j(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};e.getImageProperties=function(T){var _,B,U="";if(f(T)&&(T=p(T)),typeof T=="string"&&a(T)===t&&((U=R(T,!1))===""&&(U=e.loadFile(T)||""),T=U),B=a(T),!u(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!S()||T instanceof Uint8Array||(T=A(T)),!(_=this["process"+B.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return _.fileType=B,_}})(cn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};cn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((a=d[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){a=d[p];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(v.objId),y=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(w(a.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(w(y))+") >>",v.content=i;var j=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+j,a.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var N=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(b(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var S=this.annotations._nameMap[a.options.name];a.options.pageNumber=S.page,a.options.top=S.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var E=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+E+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(cn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var g=0,w=r,y="",j=0;for(g=0;g<v.length;g+=1)w[v.charCodeAt(g)]!==void 0?(j++,typeof(w=w[v.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(w),w=r,j=0),g===v.length-1&&(w=r,y+=v.charAt(g-(j-1)),g-=j-1,j=0)):(w=r,y+=v.charAt(g-j),g-=j,j=0);return y};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(v,g,w){return o(v)?i(v)===!1?-1:!d(v)||!o(g)&&!o(w)||!o(w)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:u(v)&&o(g)&&!l(g)&&o(w)&&d(w)?3:l(v)||!o(w)?1:2:-1},m=function(v){var g=0,w=0,y=0,j="",N="",S="",E=(v=v||"").split("\\s+"),A=[];for(g=0;g<E.length;g+=1){for(A.push(""),w=0;w<E[g].length;w+=1)j=E[g][w],N=E[g][w-1],S=E[g][w+1],o(j)?(y=p(j,N,S),A[g]+=y!==-1?String.fromCharCode(t[j.charCodeAt(0)][y]):j):A[g]+=j;A[g]=f(A[g])}return A.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(g)){var y=0;for(w=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?w.push([m(g[y][0]),g[y][1],g[y][2]]):w.push([m(g[y])]);v=w}else v=m(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",b])})(cn.API),cn.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform",e.variant)==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(cn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(v){b=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,m=0,b=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=d.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(j,N){return j.concat(g.splitTextToSize(N,w))}),[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)m<(v=this.getStringUnitWidth(c[y],{font:f})*u)&&(m=v);return m!==0&&(b=c.length),{w:m/=p,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,f,p){if(a.call(this),!u)throw new Error("No data for PDF table.");var m,b,v,g,w=[],y=[],j=[],N={},S={},E=[],A=[],P=(p=p||{}).autoSize||!1,D=p.printHeaders!==!1,R=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,T=p.margins||Object.assign({width:this.getPageWidth()},t),_=typeof p.padding=="number"?p.padding:3,B=p.headerBackgroundColor||"#c8c8c8",U=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=U,this.setFontSize(R),f==null)y=w=Object.keys(u[0]),j=w.map((function(){return"left"}));else if(Array.isArray(f)&&Ea(f[0])==="object")for(w=f.map((function(ee){return ee.name})),y=f.map((function(ee){return ee.prompt||ee.name||""})),j=f.map((function(ee){return ee.align||"left"})),m=0;m<f.length;m+=1)S[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(y=w=f,j=w.map((function(){return"left"})));if(P||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<w.length;m+=1){for(N[g=w[m]]=u.map((function(ee){return ee[g]})),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(y[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=N[g],this.setFont(void 0,"normal"),v=0;v<b.length;v+=1)E.push(this.getTextDimensions(b[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,E)+_+_,E=[]}if(D){var H={};for(m=0;m<w.length;m+=1)H[w[m]]={},H[w[m]].text=y[m],H[w[m]].align=j[m];var Y=l.call(this,H,S);A=w.map((function(ee){return new i(c,d,S[ee],Y,H[ee].text,void 0,H[ee].align)})),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var J=f.reduce((function(ee,W){return ee[W.name]=W.align,ee}),{});for(m=0;m<u.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:u[m]},this);var re=l.call(this,u[m],S);for(v=0;v<w.length;v+=1){var X=u[m][w[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:v,data:X},this),o.call(this,new i(c,d,S[w[v]],re,X,m+2,J[w[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map((function(m){var b=c[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,d[m]-u-u)}),this).map((function(m){return this.getLineHeightFactor()*m.length*f/p+u+u}),this).reduce((function(m,b){return Math.max(m,b)}),0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}})(cn.API);var fB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qk=uB(hB),mB=[100,200,300,400,500,600,700,800,900],dbe=uB(mB);function Zk(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return fB[i=i||"normal"]?i:"normal"})(e.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof Qk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function h8(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var ube={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},m8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function p8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function fbe(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},ube,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=Zk(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+p8(i)+"' and default family '"+a+"'.");if(o=(function(c,d){if(d[c])return d[c];var u=Qk[c],f=u<=Qk.normal?-1:1,p=h8(d,hB,u,f);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p})(i.stretch,o),o=(function(c,d){if(d[c])return d[c];for(var u=fB[c],f=0;f<u.length;++f)if(d[u[f]])return d[u[f]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=dbe[c],f=h8(d,mB,u,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+p8(i)+"'.");return o}function x8(e){return e.trimLeft()}function hbe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function mbe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Vv,g8,v8,Wj=["times"];(function(e){var t,r,a,s,i,o,l,c,d,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=O;Object.defineProperty(this,"pdf",{get:function(){return z}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(oe){V=!!oe}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(oe){q=!!oe}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(oe){isNaN(oe)||(K=oe)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(oe){isNaN(oe)||(se=oe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(oe){var te;typeof oe=="number"?te=[oe,oe,oe,oe]:((te=new Array(4))[0]=oe[0],te[1]=oe.length>=2?oe[1]:te[0],te[2]=oe.length>=3?oe[2]:te[0],te[3]=oe.length>=4?oe[3]:te[1]),d.margin=te}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(oe){pe=oe}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(oe){ie=oe}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(oe){le=oe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(oe){oe instanceof u&&(d=oe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(oe){d.path=oe}});var $e=[];Object.defineProperty(this,"ctxStack",{get:function(){return $e},set:function(oe){$e=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var te;te=p(oe),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var te=p(oe);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var he=null;function Ue(oe,te){if(he===null){var Pe=(function(je){var Ie=[];return Object.keys(je).forEach((function(ue){je[ue].forEach((function(de){var Ae=null;switch(de){case"bold":Ae={family:ue,weight:"bold"};break;case"italic":Ae={family:ue,style:"italic"};break;case"bolditalic":Ae={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":Ae={family:ue}}Ae!==null&&(Ae.ref={name:ue,style:de},Ie.push(Ae))}))})),Ie})(oe.getFontList());he=(function(je){for(var Ie={},ue=0;ue<je.length;++ue){var de=Zk(je[ue]),Ae=de.family,Qe=de.stretch,ge=de.style,fe=de.weight;Ie[Ae]=Ie[Ae]||{},Ie[Ae][Qe]=Ie[Ae][Qe]||{},Ie[Ae][Qe][ge]=Ie[Ae][Qe][ge]||{},Ie[Ae][Qe][ge][fe]=de}return Ie})(Pe.concat(te))}return he}var Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(oe){he=null,Te=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var te;if(this.ctx.font=oe,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var Pe=te[1],je=(te[2],te[3]),Ie=te[4],ue=(te[5],te[6]),de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ie)[2];Ie=Math.floor(de==="px"?parseFloat(Ie)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(Ie)*this.pdf.getFontSize():parseFloat(Ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ie);var Ae=(function(Fe){var Me,et,ut=[],bt=Fe.trim();if(bt==="")return Wj;if(bt in m8)return[m8[bt]];for(;bt!=="";){switch(et=null,Me=(bt=x8(bt)).charAt(0)){case'"':case"'":et=hbe(bt.substring(1),Me);break;default:et=mbe(bt)}if(et===null||(ut.push(et[0]),(bt=x8(et[1]))!==""&&bt.charAt(0)!==","))return Wj;bt=bt.replace(/^,/,"")}return ut})(ue);if(this.fontFaces){var Qe=fbe(Ue(this.pdf,this.fontFaces),Ae.map((function(Fe){return{family:Fe,stretch:"normal",weight:je,style:Pe}})));this.pdf.setFont(Qe.ref.name,Qe.ref.style)}else{var ge="";(je==="bold"||parseInt(je,10)>=700||Pe==="bold")&&(ge="bold"),Pe==="italic"&&(ge+="italic"),ge.length===0&&(ge="normal");for(var fe="",_e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ze=0;ze<Ae.length;ze++){if(this.pdf.internal.getFont(Ae[ze],ge,{noFallback:!0,disableWarning:!0})!==void 0){fe=Ae[ze];break}if(ge==="bolditalic"&&this.pdf.internal.getFont(Ae[ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fe=Ae[ze],ge="bold";else if(this.pdf.internal.getFont(Ae[ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fe=Ae[ze],ge="normal";break}}if(fe===""){for(var Se=0;Se<Ae.length;Se++)if(_e[Ae[Se]]){fe=_e[Ae[Se]];break}}fe=fe===""?"Times":fe,this.pdf.setFont(fe,ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,z){if(isNaN(O)||isNaN(z))throw Ga.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(O,z)},f.prototype.closePath=function(){var O=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Ea(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){O=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,z){if(isNaN(O)||isNaN(z))throw Ga.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,z,V,q){if(isNaN(V)||isNaN(q)||isNaN(O)||isNaN(z))throw Ga.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(V,q)),se=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"qct",x1:se.x,y1:se.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},f.prototype.bezierCurveTo=function(O,z,V,q,K,se){if(isNaN(K)||isNaN(se)||isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q))throw Ga.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new o(K,se)),ie=this.ctx.transform.applyToPoint(new o(O,z)),le=this.ctx.transform.applyToPoint(new o(V,q));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:le.x,y2:le.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},f.prototype.arc=function(O,z,V,q,K,se){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q)||isNaN(K))throw Ga.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new o(O,z));O=pe.x,z=pe.y;var ie=this.ctx.transform.applyToPoint(new o(0,V)),le=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(ie.x-le.x,2)+Math.pow(ie.y-le.y,2))}Math.abs(K-q)>=2*Math.PI&&(q=0,K=2*Math.PI),this.path.push({type:"arc",x:O,y:z,radius:V,startAngle:q,endAngle:K,counterclockwise:se})},f.prototype.arcTo=function(O,z,V,q,K){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,z,V,q){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q))throw Ga.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,z),this.lineTo(O+V,z),this.lineTo(O+V,z+q),this.lineTo(O,z+q),this.lineTo(O,z),this.lineTo(O+V,z),this.lineTo(O,z)},f.prototype.fillRect=function(O,z,V,q){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q))throw Ga.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,z,V,q),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},f.prototype.strokeRect=function(O,z,V,q){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q))throw Ga.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,z,V,q),this.stroke())},f.prototype.clearRect=function(O,z,V,q){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q))throw Ga.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,z,V,q))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(z),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(O){var z,V,q,K;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))z=0,V=0,q=0,K=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(se!==null)z=parseInt(se[1]),V=parseInt(se[2]),q=parseInt(se[3]),K=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)z=parseInt(se[1]),V=parseInt(se[2]),q=parseInt(se[3]),K=parseFloat(se[4]);else{if(K=1,typeof O=="string"&&O.charAt(0)!=="#"){var pe=new sB(O);O=pe.ok?pe.toHex():"#000000"}O.length===4?(z=O.substring(1,2),z+=z,V=O.substring(2,3),V+=V,q=O.substring(3,4),q+=q):(z=O.substring(1,3),V=O.substring(3,5),q=O.substring(5,7)),z=parseInt(z,16),V=parseInt(V,16),q=parseInt(q,16)}}return{r:z,g:V,b:q,a:K,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,z,V,q){if(isNaN(z)||isNaN(V)||typeof O!="string")throw Ga.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!m.call(this)){var K=re(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;_.call(this,{text:O,x:z,y:V,scale:se,angle:K,align:this.textAlign,maxWidth:q})}},f.prototype.strokeText=function(O,z,V,q){if(isNaN(z)||isNaN(V)||typeof O!="string")throw Ga.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){q=isNaN(q)?void 0:q;var K=re(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;_.call(this,{text:O,x:z,y:V,scale:se,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:q})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Ga.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,V=this.pdf.internal.scaleFactor,q=z.internal.getFontSize(),K=z.getStringUnitWidth(O)*q/z.internal.scaleFactor,se=function(pe){var ie=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new se({width:K*=Math.round(96*V/72*1e4)/1e4})},f.prototype.scale=function(O,z){if(isNaN(O)||isNaN(z))throw Ga.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(O,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.rotate=function(O){if(isNaN(O))throw Ga.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.translate=function(O,z){if(isNaN(O)||isNaN(z))throw Ga.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,O,z);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.transform=function(O,z,V,q,K,se){if(isNaN(O)||isNaN(z)||isNaN(V)||isNaN(q)||isNaN(K)||isNaN(se))throw Ga.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new c(O,z,V,q,K,se);this.ctx.transform=this.ctx.transform.multiply(pe)},f.prototype.setTransform=function(O,z,V,q,K,se){O=isNaN(O)?1:O,z=isNaN(z)?0:z,V=isNaN(V)?0:V,q=isNaN(q)?1:q,K=isNaN(K)?0:K,se=isNaN(se)?0:se,this.ctx.transform=new c(O,z,V,q,K,se)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,z,V,q,K,se,pe,ie,le){var $e=this.pdf.getImageProperties(O),he=1,Ue=1,Te=1,oe=1;q!==void 0&&ie!==void 0&&(Te=ie/q,oe=le/K,he=$e.width/q*ie/q,Ue=$e.height/K*le/K),se===void 0&&(se=z,pe=V,z=0,V=0),q!==void 0&&ie===void 0&&(ie=q,le=K),q===void 0&&ie===void 0&&(ie=$e.width,le=$e.height);for(var te,Pe=this.ctx.transform.decompose(),je=re(Pe.rotate.shx),Ie=new c,ue=(Ie=(Ie=(Ie=Ie.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale)).applyToRectangle(new l(se-z*Te,pe-V*oe,q*he,K*Ue)),de=g.call(this,ue),Ae=[],Qe=0;Qe<de.length;Qe+=1)Ae.indexOf(de[Qe])===-1&&Ae.push(de[Qe]);if(j(Ae),this.autoPaging)for(var ge=Ae[0],fe=Ae[Ae.length-1],_e=ge;_e<fe+1;_e++){this.pdf.setPage(_e);var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=_e===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=_e===1?0:Fe+(_e-2)*Me;if(this.ctx.clip_path.length!==0){var ut=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(te,this.posX+this.margin[3],-et+Se+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=ut}var bt=JSON.parse(JSON.stringify(ue));bt=y([bt],this.posX+this.margin[3],-et+Se+this.ctx.prevPageLastElemOffset)[0];var At=(_e>ge||_e<fe)&&v.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Me,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,je),At&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,je)};var g=function(O,z,V){var q=[];z=z||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":q.push(Math.floor((O.y+K)/V)+1);break;case"arc":q.push(Math.floor((O.y+K-O.radius)/V)+1),q.push(Math.floor((O.y+K+O.radius)/V)+1);break;case"qct":var se=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);q.push(Math.floor((se.y+K)/V)+1),q.push(Math.floor((se.y+se.h+K)/V)+1);break;case"bct":var pe=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);q.push(Math.floor((pe.y+K)/V)+1),q.push(Math.floor((pe.y+pe.h+K)/V)+1);break;case"rect":q.push(Math.floor((O.y+K)/V)+1),q.push(Math.floor((O.y+O.h+K)/V)+1)}for(var ie=0;ie<q.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<q[ie];)w.call(this);return q},w=function(){var O=this.fillStyle,z=this.strokeStyle,V=this.font,q=this.lineCap,K=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=z,this.font=V,this.lineCap=q,this.lineWidth=K,this.lineJoin=se},y=function(O,z,V){for(var q=0;q<O.length;q++)switch(O[q].type){case"bct":O[q].x2+=z,O[q].y2+=V;case"qct":O[q].x1+=z,O[q].y1+=V;default:O[q].x+=z,O[q].y+=V}return O},j=function(O){return O.sort((function(z,V){return z-V}))},N=function(O,z){for(var V,q,K=this.fillStyle,se=this.strokeStyle,pe=this.lineCap,ie=this.lineWidth,le=Math.abs(ie*this.ctx.transform.scaleX),$e=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),Te=[],oe=0;oe<Ue.length;oe++)if(Ue[oe].x!==void 0)for(var te=g.call(this,Ue[oe]),Pe=0;Pe<te.length;Pe+=1)Te.indexOf(te[Pe])===-1&&Te.push(te[Pe]);for(var je=0;je<Te.length;je++)for(;this.pdf.internal.getNumberOfPages()<Te[je];)w.call(this);if(j(Te),this.autoPaging)for(var Ie=Te[0],ue=Te[Te.length-1],de=Ie;de<ue+1;de++){this.pdf.setPage(de),this.fillStyle=K,this.strokeStyle=se,this.lineCap=pe,this.lineWidth=le,this.lineJoin=$e;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=de===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=de===1?0:ge+(de-2)*fe;if(this.ctx.clip_path.length!==0){var ze=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(V,this.posX+this.margin[3],-_e+Qe+this.ctx.prevPageLastElemOffset),S.call(this,O,!0),this.path=ze}if(q=JSON.parse(JSON.stringify(he)),this.path=y(q,this.posX+this.margin[3],-_e+Qe+this.ctx.prevPageLastElemOffset),z===!1||de===0){var Se=(de>Ie||de<ue)&&v.call(this);Se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,fe,null).clip().discardPath()),S.call(this,O,z),Se&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=le,S.call(this,O,z),this.lineWidth=ie;this.path=he},S=function(O,z){if((O!=="stroke"||z||!b.call(this))&&(O==="stroke"||z||!m.call(this))){for(var V,q,K=[],se=this.path,pe=0;pe<se.length;pe++){var ie=se[pe];switch(ie.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:ie,deltas:[],abs:[]});break;case"lt":var le=K.length;if(se[pe-1]&&!isNaN(se[pe-1].x)&&(V=[ie.x-se[pe-1].x,ie.y-se[pe-1].y],le>0)){for(;le>=0;le--)if(K[le-1].close!==!0&&K[le-1].begin!==!0){K[le-1].deltas.push(V),K[le-1].abs.push(ie);break}}break;case"bct":V=[ie.x1-se[pe-1].x,ie.y1-se[pe-1].y,ie.x2-se[pe-1].x,ie.y2-se[pe-1].y,ie.x-se[pe-1].x,ie.y-se[pe-1].y],K[K.length-1].deltas.push(V);break;case"qct":var $e=se[pe-1].x+2/3*(ie.x1-se[pe-1].x),he=se[pe-1].y+2/3*(ie.y1-se[pe-1].y),Ue=ie.x+2/3*(ie.x1-ie.x),Te=ie.y+2/3*(ie.y1-ie.y),oe=ie.x,te=ie.y;V=[$e-se[pe-1].x,he-se[pe-1].y,Ue-se[pe-1].x,Te-se[pe-1].y,oe-se[pe-1].x,te-se[pe-1].y],K[K.length-1].deltas.push(V);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(ie)}}q=z?null:O==="stroke"?"stroke":"fill";for(var Pe=!1,je=0;je<K.length;je++)if(K[je].arc)for(var Ie=K[je].abs,ue=0;ue<Ie.length;ue++){var de=Ie[ue];de.type==="arc"?P.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,z,!Pe):B.call(this,de.x,de.y),Pe=!0}else if(K[je].close===!0)this.pdf.internal.out("h"),Pe=!1;else if(K[je].begin!==!0){var Ae=K[je].start.x,Qe=K[je].start.y;U.call(this,K[je].deltas,Ae,Qe),Pe=!0}q&&D.call(this,q),z&&R.call(this)}},E=function(O){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-V;case"top":return O+z-V;case"hanging":return O+z-2*V;case"middle":return O+z/2-V;case"ideographic":return O;default:return O}},A=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(z,V){this.colorStops.push([z,V])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(O,z,V,q,K,se,pe,ie,le){for(var $e=Y.call(this,V,q,K,se),he=0;he<$e.length;he++){var Ue=$e[he];he===0&&(le?T.call(this,Ue.x1+O,Ue.y1+z):B.call(this,Ue.x1+O,Ue.y1+z)),H.call(this,O,z,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}ie?R.call(this):D.call(this,pe)},D=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(O,z){this.pdf.internal.out(r(O)+" "+a(z)+" m")},_=function(O){var z;switch(O.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var V=this.pdf.getTextDimensions(O.text),q=E.call(this,O.y),K=A.call(this,q)-V.h,se=this.ctx.transform.applyToPoint(new o(O.x,q)),pe=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var le,$e,he,Ue=this.ctx.transform.applyToRectangle(new l(O.x,q,V.w,V.h)),Te=ie.applyToRectangle(new l(O.x,K,V.w,V.h)),oe=g.call(this,Te),te=[],Pe=0;Pe<oe.length;Pe+=1)te.indexOf(oe[Pe])===-1&&te.push(oe[Pe]);if(j(te),this.autoPaging)for(var je=te[0],Ie=te[te.length-1],ue=je;ue<Ie+1;ue++){this.pdf.setPage(ue);var de=ue===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[2],ge=Qe-this.margin[0],fe=this.pdf.internal.pageSize.width-this.margin[1],_e=fe-this.margin[3],ze=ue===1?0:Ae+(ue-2)*ge;if(this.ctx.clip_path.length!==0){var Se=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(le,this.posX+this.margin[3],-1*ze+de),S.call(this,"fill",!0),this.path=Se}var Fe=y([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-ze+de+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&($e=this.pdf.internal.getFontSize(),this.pdf.setFontSize($e*O.scale),he=this.lineWidth,this.lineWidth=he*O.scale);var Me=this.autoPaging!=="text";if(Me||Fe.y+Fe.h<=Qe){if(Me||Fe.y>=de&&Fe.x<=fe){var et=Me?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||fe-Fe.x)[0],ut=y([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-ze+de+this.ctx.prevPageLastElemOffset)[0],bt=Me&&(ue>je||ue<Ie)&&v.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,ge,null).clip().discardPath()),this.pdf.text(et,ut.x,ut.y,{angle:O.angle,align:z,renderingMode:O.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else Fe.y<Qe&&(this.ctx.prevPageLastElemOffset+=Qe-Fe.y);O.scale>=.01&&(this.pdf.setFontSize($e),this.lineWidth=he)}else O.scale>=.01&&($e=this.pdf.internal.getFontSize(),this.pdf.setFontSize($e*O.scale),he=this.lineWidth,this.lineWidth=he*O.scale),this.pdf.text(O.text,se.x+this.posX,se.y+this.posY,{angle:O.angle,align:z,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize($e),this.lineWidth=he)},B=function(O,z,V,q){V=V||0,q=q||0,this.pdf.internal.out(r(O+V)+" "+a(z+q)+" l")},U=function(O,z,V){return this.pdf.lines(O,z,V,null,null)},H=function(O,z,V,q,K,se,pe,ie){this.pdf.internal.out([t(s(V+O)),t(i(q+z)),t(s(K+O)),t(i(se+z)),t(s(pe+O)),t(i(ie+z)),"c"].join(" "))},Y=function(O,z,V,q){for(var K=2*Math.PI,se=Math.PI/2;z>V;)z-=K;var pe=Math.abs(V-z);pe<K&&q&&(pe=K-pe);for(var ie=[],le=q?-1:1,$e=z;pe>1e-5;){var he=$e+le*Math.min(pe,se);ie.push(J.call(this,O,$e,he)),pe-=Math.abs(he-$e),$e=he}return ie},J=function(O,z,V){var q=(V-z)/2,K=O*Math.cos(q),se=O*Math.sin(q),pe=K,ie=-se,le=pe*pe+ie*ie,$e=le+pe*K+ie*se,he=4/3*(Math.sqrt(2*le*$e)-$e)/(pe*se-ie*K),Ue=pe-he*ie,Te=ie+he*pe,oe=Ue,te=-Te,Pe=q+z,je=Math.cos(Pe),Ie=Math.sin(Pe);return{x1:O*Math.cos(z),y1:O*Math.sin(z),x2:Ue*je-Te*Ie,y2:Ue*Ie+Te*je,x3:oe*je-te*Ie,y3:oe*Ie+te*je,x4:O*Math.cos(V),y4:O*Math.sin(V)}},re=function(O){return 180*O/Math.PI},X=function(O,z,V,q,K,se){var pe=O+.5*(V-O),ie=z+.5*(q-z),le=K+.5*(V-K),$e=se+.5*(q-se),he=Math.min(O,K,pe,le),Ue=Math.max(O,K,pe,le),Te=Math.min(z,se,ie,$e),oe=Math.max(z,se,ie,$e);return new l(he,Te,Ue-he,oe-Te)},ee=function(O,z,V,q,K,se,pe,ie){var le,$e,he,Ue,Te,oe,te,Pe,je,Ie,ue,de,Ae,Qe,ge=V-O,fe=q-z,_e=K-V,ze=se-q,Se=pe-K,Fe=ie-se;for($e=0;$e<41;$e++)je=(te=(he=O+(le=$e/40)*ge)+le*((Te=V+le*_e)-he))+le*(Te+le*(K+le*Se-Te)-te),Ie=(Pe=(Ue=z+le*fe)+le*((oe=q+le*ze)-Ue))+le*(oe+le*(se+le*Fe-oe)-Pe),$e==0?(ue=je,de=Ie,Ae=je,Qe=Ie):(ue=Math.min(ue,je),de=Math.min(de,Ie),Ae=Math.max(Ae,je),Qe=Math.max(Qe,Ie));return new l(Math.round(ue),Math.round(de),Math.round(Ae-ue),Math.round(Qe-de))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,z,V=(O=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:z}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(cn.API),(function(e){var t=function(i){var o,l,c,d,u,f,p,m,b,v;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(u=((u=((u=((u=(u-(v=u%85))/85)-(b=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)%85,l.push(f+33,p+33,m+33,b+33,v+33)):l.push(122);return(function(g,w){for(var y=w;y>0;y--)g.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,f=String,p="length",m=255,b="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[v](i[p]%5||5))[p];u>d;d+=5)l=52200625*(i[b](d)-33)+614125*(i[b](d+1)-33)+7225*(i[b](d+2)-33)+85*(i[b](d+3)-33)+(i[b](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return(function(w,y){for(var j=y;j>0;j--)w.pop()})(c,o[p]),f.fromCharCode.apply(f,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Gk(o)).reduce((function(c,d){return c+String.fromCharCode(d)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)})).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(cn.API),(function(e){e.loadFile=function(t,r,a){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var f=new XMLHttpRequest,p=0,m=function(b){var v=b.length,g=[],w=String.fromCharCode;for(p=0;p<v;p+=1)g.push(w(255&b.charCodeAt(p)));return g.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(m(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return m(f.responseText)})(s,i,o)}catch{}return l})(t,r,a)},e.loadImageFile=e.loadFile})(cn.API),(function(e){function t(){return(dn.html2canvas?Promise.resolve(dn.html2canvas):c1(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(dn.DOMPurify?Promise.resolve(dn.DOMPurify):c1(()=>import("./purify.es-BpVZ_uCt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var a=function(o){var l=Ea(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",(function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft}),!0)),f})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var m=d[p],b=m.src.find((function(v){return v.format==="truetype"}));b&&c.addFont(b.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then((function(){(o=o||cn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,(function(f){return c.updateProgress(null,d),f})).then(d,u).then((function(f){return c.updateProgress(1),f}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,cn.getPageSize=function(o,l,c){if(Ea(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,f=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,b=0,v=0;if(p.hasOwnProperty(f))b=p[f][1]/u,v=p[f][0]/u;else try{b=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>b&&(m=v,v=b,b=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>v&&(m=v,v=b,b=m)}return{width:v,height:b,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Zk):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(cn.API),cn.API.addJS=function(e){return v8=e,this.internal.events.subscribe("postPutResources",(function(){Vv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),g8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+v8+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){Vv!==void 0&&g8!==void 0&&this.internal.out("/Names <</JavaScript "+Vv+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var f=r.internal.newObject();u.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])})(cn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(f){for(var p,m=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,v={width:0,height:0,numcomponents:1},g=4;g<b;g+=2){if(g+=m,t.indexOf(f.charCodeAt(g+1))!==-1){p=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),v={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:p,numcomponents:f.charCodeAt(g+9)};break}m=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return u}})(cn.API);var fm,Gv,b8,y8,w8,pbe=(function(){var e,t,r;function a(i){var o,l,c,d,u,f,p,m,b,v,g,w,y,j;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),b=(function(){var N,S;for(S=[],N=0;N<4;++N)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*u/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),i=f?.data||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(y=0;0<=v?y<v:y>v;0<=v?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(g=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,g.slice(0,p)),this.text[m]=String.fromCharCode.apply(String,g.slice(p+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,p,m,b){var v,g,w,y,j,N,S,E,A,P,D,R,T,_,B,U,H,Y,J,re,X,ee=Math.ceil((d.width-f)/m),W=Math.ceil((d.height-p)/b),O=d.width==ee&&d.height==W;for(_=o*ee,R=O?l:new Uint8Array(_*W),N=i.length,T=0,g=0;T<W&&c<N;){switch(i[c++]){case 0:for(y=H=0;H<_;y=H+=1)R[g++]=i[c++];break;case 1:for(y=Y=0;Y<_;y=Y+=1)v=i[c++],j=y<o?0:R[g-o],R[g++]=(v+j)%256;break;case 2:for(y=J=0;J<_;y=J+=1)v=i[c++],w=(y-y%o)/o,B=T&&R[(T-1)*_+w*o+y%o],R[g++]=(B+v)%256;break;case 3:for(y=re=0;re<_;y=re+=1)v=i[c++],w=(y-y%o)/o,j=y<o?0:R[g-o],B=T&&R[(T-1)*_+w*o+y%o],R[g++]=(v+Math.floor((j+B)/2))%256;break;case 4:for(y=X=0;X<_;y=X+=1)v=i[c++],w=(y-y%o)/o,j=y<o?0:R[g-o],T===0?B=U=0:(B=R[(T-1)*_+w*o+y%o],U=w&&R[(T-1)*_+(w-1)*o+y%o]),S=j+B-U,E=Math.abs(S-j),P=Math.abs(S-B),D=Math.abs(S-U),A=E<=P&&E<=D?j:P<=D?B:U,R[g++]=(v+A)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!O){var z=((p+T*b)*d.width+f)*o,V=T*_;for(y=0;y<ee;y+=1){for(var q=0;q<o;q+=1)l[z++]=R[V++];z+=(m-1)*o}}T++}}return i=G1e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,f,p,m;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=f=0,p=l.length;f<p;o=f+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=u[i++])!=null?m:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,f,p,m,b,v,g,w;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),c=4,l=!0),b=(d=i.data||i).length,f=v||o,u=p=0,c===1)for(;u<b;)m=v?4*o[u/4]:p,g=f[m++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?f[m++]:255,p=m;else for(;u<b;)m=v?4*o[u/4]:p,d[u++]=f[m++],d[u++]=f[m++],d[u++]=f[m++],d[u++]=l?f[m++]:255,p=m},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(dn)==="[object Window]"){try{t=dn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,f,p,m;if(this.animation){for(m=[],l=u=0,f=(p=this.animation.frames).length;u<f;l=++u)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,f,p=this;return l=0,f=this.animation,d=f.numFrames,c=f.frames,u=f.numPlays,(o=function(){var m,b;if(m=l++%d,b=c[m],p.renderFrame(i,m),d>1&&l/d<u)return p.animation._timeout=setTimeout(o,b.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a})();function xbe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],f=0,p=null,m=0,b=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],(1&v)==0&&(p=null),m=v>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,N=e[t++],S=N>>6&1,E=1<<(7&N)+1,A=l,P=c,D=!1;N>>7&&(D=!0,A=t,P=E,t+=3*E);var R=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}u.push({x:g,y:w,width:y,height:j,has_local_palette:D,palette_offset:A,palette_size:P,data_offset:R,data_length:t-R,transparent_index:p,interlaced:!!S,delay:f,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(_){if(_<0||_>=u.length)throw new Error("Frame index out of range.");return u[_]},this.decodeAndBlitFrameBGRA=function(_,B){var U=this.frameInfo(_),H=U.width*U.height,Y=new Uint8Array(H);N8(e,U.data_offset,Y,H);var J=U.palette_offset,re=U.transparent_index;re===null&&(re=256);var X=U.width,ee=r-X,W=X,O=4*(U.y*r+U.x),z=4*((U.y+U.height)*r+U.x),V=O,q=4*ee;U.interlaced===!0&&(q+=4*r*7);for(var K=8,se=0,pe=Y.length;se<pe;++se){var ie=Y[se];if(W===0&&(W=X,(V+=q)>=z&&(q=4*ee+4*r*(K-1),V=O+(X+ee)*(K<<1),K>>=1)),ie===re)V+=4;else{var le=e[J+3*ie],$e=e[J+3*ie+1],he=e[J+3*ie+2];B[V++]=he,B[V++]=$e,B[V++]=le,B[V++]=255}--W}},this.decodeAndBlitFrameRGBA=function(_,B){var U=this.frameInfo(_),H=U.width*U.height,Y=new Uint8Array(H);N8(e,U.data_offset,Y,H);var J=U.palette_offset,re=U.transparent_index;re===null&&(re=256);var X=U.width,ee=r-X,W=X,O=4*(U.y*r+U.x),z=4*((U.y+U.height)*r+U.x),V=O,q=4*ee;U.interlaced===!0&&(q+=4*r*7);for(var K=8,se=0,pe=Y.length;se<pe;++se){var ie=Y[se];if(W===0&&(W=X,(V+=q)>=z&&(q=4*ee+4*r*(K-1),V=O+(X+ee)*(K<<1),K>>=1)),ie===re)V+=4;else{var le=e[J+3*ie],$e=e[J+3*ie+1],he=e[J+3*ie+2];B[V++]=le,B[V++]=$e,B[V++]=he,B[V++]=255}--W}}}function N8(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,f=0,p=0,m=e[t++],b=new Int32Array(4096),v=null;;){for(;u<16&&m!==0;)f|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<c)break;var g=f&d;if(f>>=c,u-=c,g!==i){if(g===o)break;for(var w=g<l?g:v,y=0,j=w;j>i;)j=b[j]>>8,++y;var N=j;if(p+y+(w!==g?1:0)>a)return void Ga.log("Warning, gif stream longer than expected.");r[p++]=N;var S=p+=y;for(w!==g&&(r[p++]=N),j=w;y--;)j=b[j],r[--S]=255&j,j>>=8;v!==null&&l<4096&&(b[l++]=v<<8|N,l>=d+1&&c<12&&(++c,d=d<<1|1)),v=g}else l=o+1,d=(1<<(c=s+1))-1,v=null}return p!==a&&Ga.log("Warning, gif stream shorter than expected."),r}function Vj(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),p=new Array(65535),m=new Array(64),b=new Array(64),v=[],g=0,w=7,y=new Array(64),j=new Array(64),N=new Array(64),S=new Array(256),E=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(O,z){for(var V=0,q=0,K=new Array,se=1;se<=16;se++){for(var pe=1;pe<=O[se];pe++)K[z[q]]=[],K[z[q]][0]=V,K[z[q]][1]=se,q++,V++;V*=2}return K}function J(O){for(var z=O[0],V=O[1]-1;V>=0;)z&1<<V&&(g|=1<<w),V--,--w<0&&(g==255?(re(255),re(0)):re(g),w=7,g=0)}function re(O){v.push(O)}function X(O){re(O>>8&255),re(255&O)}function ee(O,z,V,q,K){for(var se,pe=K[0],ie=K[240],le=(function(Ie,ue){var de,Ae,Qe,ge,fe,_e,ze,Se,Fe,Me,et=0;for(Fe=0;Fe<8;++Fe){de=Ie[et],Ae=Ie[et+1],Qe=Ie[et+2],ge=Ie[et+3],fe=Ie[et+4],_e=Ie[et+5],ze=Ie[et+6];var ut=de+(Se=Ie[et+7]),bt=de-Se,At=Ae+ze,qt=Ae-ze,Gt=Qe+_e,Ye=Qe-_e,Et=ge+fe,Cr=ge-fe,tr=ut+Et,Or=ut-Et,pr=At+Gt,rt=At-Gt;Ie[et]=tr+pr,Ie[et+4]=tr-pr;var Dt=.707106781*(rt+Or);Ie[et+2]=Or+Dt,Ie[et+6]=Or-Dt;var yr=.382683433*((tr=Cr+Ye)-(rt=qt+bt)),kr=.5411961*tr+yr,Xr=1.306562965*rt+yr,Sr=.707106781*(pr=Ye+qt),pn=bt+Sr,rr=bt-Sr;Ie[et+5]=rr+kr,Ie[et+3]=rr-kr,Ie[et+1]=pn+Xr,Ie[et+7]=pn-Xr,et+=8}for(et=0,Fe=0;Fe<8;++Fe){de=Ie[et],Ae=Ie[et+8],Qe=Ie[et+16],ge=Ie[et+24],fe=Ie[et+32],_e=Ie[et+40],ze=Ie[et+48];var On=de+(Se=Ie[et+56]),Hr=de-Se,sn=Ae+ze,jr=Ae-ze,Gr=Qe+_e,Ne=Qe-_e,He=ge+fe,Be=ge-fe,xe=On+He,Ce=On-He,Re=sn+Gr,tt=sn-Gr;Ie[et]=xe+Re,Ie[et+32]=xe-Re;var ht=.707106781*(tt+Ce);Ie[et+16]=Ce+ht,Ie[et+48]=Ce-ht;var ct=.382683433*((xe=Be+Ne)-(tt=jr+Hr)),xt=.5411961*xe+ct,ve=1.306562965*tt+ct,be=.707106781*(Re=Ne+jr),Ge=Hr+be,at=Hr-be;Ie[et+40]=at+xt,Ie[et+24]=at-xt,Ie[et+8]=Ge+ve,Ie[et+56]=Ge-ve,et++}for(Fe=0;Fe<64;++Fe)Me=Ie[Fe]*ue[Fe],m[Fe]=Me>0?Me+.5|0:Me-.5|0;return m})(O,z),$e=0;$e<64;++$e)b[A[$e]]=le[$e];var he=b[0]-V;V=b[0],he==0?J(q[0]):(J(q[p[se=32767+he]]),J(f[se]));for(var Ue=63;Ue>0&&b[Ue]==0;)Ue--;if(Ue==0)return J(pe),V;for(var Te,oe=1;oe<=Ue;){for(var te=oe;b[oe]==0&&oe<=Ue;)++oe;var Pe=oe-te;if(Pe>=16){Te=Pe>>4;for(var je=1;je<=Te;++je)J(ie);Pe&=15}se=32767+b[oe],J(K[(Pe<<4)+p[se]]),J(f[se]),oe++}return Ue!=63&&J(pe),V}function W(O){O=Math.min(Math.max(O,1),100),i!=O&&((function(z){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var K=o((V[q]*z+50)/100);K=Math.min(Math.max(K,1),255),l[A[q]]=K}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var ie=o((se[pe]*z+50)/100);ie=Math.min(Math.max(ie,1),255),c[A[pe]]=ie}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$e=0,he=0;he<8;he++)for(var Ue=0;Ue<8;Ue++)d[$e]=1/(l[A[$e]]*le[he]*le[Ue]*8),u[$e]=1/(c[A[$e]]*le[he]*le[Ue]*8),$e++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,z){z&&W(z),v=new Array,g=0,w=7,X(65496),X(65504),X(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),X(1),X(1),re(0),re(0),(function(){X(65499),X(132),re(0);for(var Ae=0;Ae<64;Ae++)re(l[Ae]);re(1);for(var Qe=0;Qe<64;Qe++)re(c[Qe])})(),(function(Ae,Qe){X(65472),X(17),re(8),X(Qe),X(Ae),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(O.width,O.height),(function(){X(65476),X(418),re(0);for(var Ae=0;Ae<16;Ae++)re(P[Ae+1]);for(var Qe=0;Qe<=11;Qe++)re(D[Qe]);re(16);for(var ge=0;ge<16;ge++)re(R[ge+1]);for(var fe=0;fe<=161;fe++)re(T[fe]);re(1);for(var _e=0;_e<16;_e++)re(_[_e+1]);for(var ze=0;ze<=11;ze++)re(B[ze]);re(17);for(var Se=0;Se<16;Se++)re(U[Se+1]);for(var Fe=0;Fe<=161;Fe++)re(H[Fe])})(),X(65498),X(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var V=0,q=0,K=0;g=0,w=7,this.encode.displayName="_encode_";for(var se,pe,ie,le,$e,he,Ue,Te,oe,te=O.data,Pe=O.width,je=O.height,Ie=4*Pe,ue=0;ue<je;){for(se=0;se<Ie;){for($e=Ie*ue+se,Ue=-1,Te=0,oe=0;oe<64;oe++)he=$e+(Te=oe>>3)*Ie+(Ue=4*(7&oe)),ue+Te>=je&&(he-=Ie*(ue+1+Te-je)),se+Ue>=Ie&&(he-=se+Ue-Ie+4),pe=te[he++],ie=te[he++],le=te[he++],y[oe]=(E[pe]+E[ie+256>>0]+E[le+512>>0]>>16)-128,j[oe]=(E[pe+768>>0]+E[ie+1024>>0]+E[le+1280>>0]>>16)-128,N[oe]=(E[pe+1280>>0]+E[ie+1536>>0]+E[le+1792>>0]>>16)-128;V=ee(y,d,V,t,a),q=ee(j,u,q,r,s),K=ee(N,u,K,r,s),se+=32}ue+=8}if(w>=0){var de=[];de[1]=w+1,de[0]=(1<<w+1)-1,J(de)}return X(65497),new Uint8Array(v)},e=e||50,(function(){for(var O=String.fromCharCode,z=0;z<256;z++)S[z]=O(z)})(),t=Y(P,D),r=Y(_,B),a=Y(R,T),s=Y(U,H),(function(){for(var O=1,z=2,V=1;V<=15;V++){for(var q=O;q<z;q++)p[32767+q]=V,f[32767+q]=[],f[32767+q][1]=V,f[32767+q][0]=q;for(var K=-(z-1);K<=-O;K++)p[32767+K]=V,f[32767+K]=[],f[32767+K][1]=V,f[32767+K][0]=z-1+K;O<<=1,z<<=1}})(),(function(){for(var O=0;O<256;O++)E[O]=19595*O,E[O+256>>0]=38470*O,E[O+512>>0]=7471*O+32768,E[O+768>>0]=-11059*O,E[O+1024>>0]=-21709*O,E[O+1280>>0]=32768*O+8421375,E[O+1536>>0]=-27439*O,E[O+1792>>0]=-5329*O})(),W(e)}function Kd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function j8(e){function t(P){if(!P)throw Error("assert :P")}function r(P,D,R){for(var T=0;4>T;T++)if(P[D+T]!=R.charCodeAt(T))return!0;return!1}function a(P,D,R,T,_){for(var B=0;B<_;B++)P[D+B]=R[T+B]}function s(P,D,R,T){for(var _=0;_<T;_++)P[D+_]=R}function i(P){return new Int32Array(P)}function o(P,D){for(var R=[],T=0;T<P;T++)R.push(new D);return R}function l(P,D){var R=[];return(function T(_,B,U){for(var H=U[B],Y=0;Y<H&&(_.push(U.length>B+1?[]:new D),!(U.length<B+1));Y++)T(_[Y],B+1,U)})(R,0,P),R}var c=function(){var P=this;function D(C,M){for(var Z=1<<M-1>>>0;C&Z;)Z>>>=1;return Z?(C&Z-1)+Z:C}function R(C,M,Z,ce,ye){t(!(ce%Z));do C[M+(ce-=Z)]=ye;while(0<ce)}function T(C,M,Z,ce,ye){if(t(2328>=ye),512>=ye)var Ee=i(512);else if((Ee=i(ye))==null)return 0;return(function(De,Le,qe,Ve,nt,Nt){var kt,pt,Vt=Le,Pt=1<<qe,lt=i(16),st=i(16);for(t(nt!=0),t(Ve!=null),t(De!=null),t(0<qe),pt=0;pt<nt;++pt){if(15<Ve[pt])return 0;++lt[Ve[pt]]}if(lt[0]==nt)return 0;for(st[1]=0,kt=1;15>kt;++kt){if(lt[kt]>1<<kt)return 0;st[kt+1]=st[kt]+lt[kt]}for(pt=0;pt<nt;++pt)kt=Ve[pt],0<Ve[pt]&&(Nt[st[kt]++]=pt);if(st[15]==1)return(Ve=new _).g=0,Ve.value=Nt[0],R(De,Vt,1,Pt,Ve),Pt;var Ft,Lt=-1,$t=Pt-1,hr=0,or=1,Vr=1,xr=1<<qe;for(pt=0,kt=1,nt=2;kt<=qe;++kt,nt<<=1){if(or+=Vr<<=1,0>(Vr-=lt[kt]))return 0;for(;0<lt[kt];--lt[kt])(Ve=new _).g=kt,Ve.value=Nt[pt++],R(De,Vt+hr,nt,xr,Ve),hr=D(hr,kt)}for(kt=qe+1,nt=2;15>=kt;++kt,nt<<=1){if(or+=Vr<<=1,0>(Vr-=lt[kt]))return 0;for(;0<lt[kt];--lt[kt]){if(Ve=new _,(hr&$t)!=Lt){for(Vt+=xr,Ft=1<<(Lt=kt)-qe;15>Lt&&!(0>=(Ft-=lt[Lt]));)++Lt,Ft<<=1;Pt+=xr=1<<(Ft=Lt-qe),De[Le+(Lt=hr&$t)].g=Ft+qe,De[Le+Lt].value=Vt-Le-Lt}Ve.g=kt-qe,Ve.value=Nt[pt++],R(De,Vt+(hr>>qe),nt,xr,Ve),hr=D(hr,kt)}}return or!=2*st[15]-1?0:Pt})(C,M,Z,ce,ye,Ee)}function _(){this.value=this.g=0}function B(){this.value=this.g=0}function U(){this.G=o(5,_),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ka,B)}function H(C,M,Z,ce){t(C!=null),t(M!=null),t(2147483648>ce),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=M,C.pa=Z,C.Jd=M,C.Yc=Z+ce,C.Zc=4<=ce?Z+ce-4+1:Z,se(C)}function Y(C,M){for(var Z=0;0<M--;)Z|=ie(C,128)<<M;return Z}function J(C,M){var Z=Y(C,M);return pe(C)?-Z:Z}function re(C,M,Z,ce){var ye,Ee=0;for(t(C!=null),t(M!=null),t(4294967288>ce),C.Sb=ce,C.Ra=0,C.u=0,C.h=0,4<ce&&(ce=4),ye=0;ye<ce;++ye)Ee+=M[Z+ye]<<8*ye;C.Ra=Ee,C.bb=ce,C.oa=M,C.pa=Z}function X(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<Ja-8>>>0,++C.bb,C.u-=8;V(C)&&(C.h=1,C.u=0)}function ee(C,M){if(t(0<=M),!C.h&&M<=gl){var Z=z(C)&yo[M];return C.u+=M,X(C),Z}return C.h=1,C.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(C){return C.Ra>>>(C.u&Ja-1)>>>0}function V(C){return t(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>Ja}function q(C,M){C.u=M,C.h=V(C)}function K(C){C.u>=Rc&&(t(C.u>=Rc),X(C))}function se(C){t(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(t(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function pe(C){return Y(C,1)}function ie(C,M){var Z=C.Ca;0>C.b&&se(C);var ce=C.b,ye=Z*M>>>8,Ee=(C.I>>>ce>ye)+0;for(Ee?(Z-=ye,C.I-=ye+1<<ce>>>0):Z=ye+1,ce=Z,ye=0;256<=ce;)ye+=8,ce>>=8;return ce=7^ye+on[ce],C.b-=ce,C.Ca=(Z<<ce)-1,Ee}function le(C,M,Z){C[M+0]=Z>>24&255,C[M+1]=Z>>16&255,C[M+2]=Z>>8&255,C[M+3]=Z>>0&255}function $e(C,M){return C[M+0]<<0|C[M+1]<<8}function he(C,M){return $e(C,M)|C[M+2]<<16}function Ue(C,M){return $e(C,M)|$e(C,M+2)<<16}function Te(C,M){var Z=1<<M;return t(C!=null),t(0<M),C.X=i(Z),C.X==null?0:(C.Mb=32-M,C.Xa=M,1)}function oe(C,M){t(C!=null),t(M!=null),t(C.Xa==M.Xa),a(M.X,0,C.X,0,1<<M.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Pe(C,M,Z,ce){t(Z!=null),t(ce!=null);var ye=Z[0],Ee=ce[0];return ye==0&&(ye=(C*Ee+M/2)/M),Ee==0&&(Ee=(M*ye+C/2)/C),0>=ye||0>=Ee?0:(Z[0]=ye,ce[0]=Ee,1)}function je(C,M){return C+(1<<M)-1>>>M}function Ie(C,M){return((4278255360&C)+(4278255360&M)>>>0&4278255360)+((16711935&C)+(16711935&M)>>>0&16711935)>>>0}function ue(C,M){P[M]=function(Z,ce,ye,Ee,De,Le,qe){var Ve;for(Ve=0;Ve<De;++Ve){var nt=P[C](Le[qe+Ve-1],ye,Ee+Ve);Le[qe+Ve]=Ie(Z[ce+Ve],nt)}}}function de(){this.ud=this.hd=this.jd=0}function Ae(C,M){return((4278124286&(C^M))>>>1)+(C&M)>>>0}function Qe(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function ge(C,M){return Qe(C+(C-M+.5>>1))}function fe(C,M,Z){return Math.abs(M-Z)-Math.abs(C-Z)}function _e(C,M,Z,ce,ye,Ee,De){for(ce=Ee[De-1],Z=0;Z<ye;++Z)Ee[De+Z]=ce=Ie(C[M+Z],ce)}function ze(C,M,Z,ce,ye){var Ee;for(Ee=0;Ee<Z;++Ee){var De=C[M+Ee],Le=De>>8&255,qe=16711935&(qe=(qe=16711935&De)+((Le<<16)+Le));ce[ye+Ee]=(4278255360&De)+qe>>>0}}function Se(C,M){M.jd=C>>0&255,M.hd=C>>8&255,M.ud=C>>16&255}function Fe(C,M,Z,ce,ye,Ee){var De;for(De=0;De<ce;++De){var Le=M[Z+De],qe=Le>>>8,Ve=Le,nt=255&(nt=(nt=Le>>>16)+((C.jd<<24>>24)*(qe<<24>>24)>>>5));Ve=255&(Ve=(Ve=Ve+((C.hd<<24>>24)*(qe<<24>>24)>>>5))+((C.ud<<24>>24)*(nt<<24>>24)>>>5)),ye[Ee+De]=(4278255360&Le)+(nt<<16)+Ve}}function Me(C,M,Z,ce,ye){P[M]=function(Ee,De,Le,qe,Ve,nt,Nt,kt,pt){for(qe=Nt;qe<kt;++qe)for(Nt=0;Nt<pt;++Nt)Ve[nt++]=ye(Le[ce(Ee[De++])])},P[C]=function(Ee,De,Le,qe,Ve,nt,Nt){var kt=8>>Ee.b,pt=Ee.Ea,Vt=Ee.K[0],Pt=Ee.w;if(8>kt)for(Ee=(1<<Ee.b)-1,Pt=(1<<kt)-1;De<Le;++De){var lt,st=0;for(lt=0;lt<pt;++lt)lt&Ee||(st=ce(qe[Ve++])),nt[Nt++]=ye(Vt[st&Pt]),st>>=kt}else P["VP8LMapColor"+Z](qe,Ve,Vt,Pt,nt,Nt,De,Le,pt)}}function et(C,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ee=C[M++];ce[ye++]=Ee>>16&255,ce[ye++]=Ee>>8&255,ce[ye++]=Ee>>0&255}}function ut(C,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ee=C[M++];ce[ye++]=Ee>>16&255,ce[ye++]=Ee>>8&255,ce[ye++]=Ee>>0&255,ce[ye++]=Ee>>24&255}}function bt(C,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ee=(De=C[M++])>>16&240|De>>12&15,De=De>>0&240|De>>28&15;ce[ye++]=Ee,ce[ye++]=De}}function At(C,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ee=(De=C[M++])>>16&248|De>>13&7,De=De>>5&224|De>>3&31;ce[ye++]=Ee,ce[ye++]=De}}function qt(C,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ee=C[M++];ce[ye++]=Ee>>0&255,ce[ye++]=Ee>>8&255,ce[ye++]=Ee>>16&255}}function Gt(C,M,Z,ce,ye,Ee){if(Ee==0)for(Z=M+Z;M<Z;)le(ce,((Ee=C[M++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),ye+=32;else a(ce,ye,C,M,Z)}function Ye(C,M){P[M][0]=P[C+"0"],P[M][1]=P[C+"1"],P[M][2]=P[C+"2"],P[M][3]=P[C+"3"],P[M][4]=P[C+"4"],P[M][5]=P[C+"5"],P[M][6]=P[C+"6"],P[M][7]=P[C+"7"],P[M][8]=P[C+"8"],P[M][9]=P[C+"9"],P[M][10]=P[C+"10"],P[M][11]=P[C+"11"],P[M][12]=P[C+"12"],P[M][13]=P[C+"13"],P[M][14]=P[C+"0"],P[M][15]=P[C+"0"]}function Et(C){return C==Uc||C==Od||C==xu||C==Ju}function Cr(){this.eb=[],this.size=this.A=this.fb=0}function tr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Or(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cr,this.f.kb=new tr,this.sd=null}function pr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function yr(C,M){var Z=C.T,ce=M.ba.f.RGBA,ye=ce.eb,Ee=ce.fb+C.ka*ce.A,De=eo[M.ba.S],Le=C.y,qe=C.O,Ve=C.f,nt=C.N,Nt=C.ea,kt=C.W,pt=M.cc,Vt=M.dc,Pt=M.Mc,lt=M.Nc,st=C.ka,Ft=C.ka+C.T,Lt=C.U,$t=Lt+1>>1;for(st==0?De(Le,qe,null,null,Ve,nt,Nt,kt,Ve,nt,Nt,kt,ye,Ee,null,null,Lt):(De(M.ec,M.fc,Le,qe,pt,Vt,Pt,lt,Ve,nt,Nt,kt,ye,Ee-ce.A,ye,Ee,Lt),++Z);st+2<Ft;st+=2)pt=Ve,Vt=nt,Pt=Nt,lt=kt,nt+=C.Rc,kt+=C.Rc,Ee+=2*ce.A,De(Le,(qe+=2*C.fa)-C.fa,Le,qe,pt,Vt,Pt,lt,Ve,nt,Nt,kt,ye,Ee-ce.A,ye,Ee,Lt);return qe+=C.fa,C.j+Ft<C.o?(a(M.ec,M.fc,Le,qe,Lt),a(M.cc,M.dc,Ve,nt,$t),a(M.Mc,M.Nc,Nt,kt,$t),Z--):1&Ft||De(Le,qe,null,null,Ve,nt,Nt,kt,Ve,nt,Nt,kt,ye,Ee+ce.A,null,null,Lt),Z}function kr(C,M,Z){var ce=C.F,ye=[C.J];if(ce!=null){var Ee=C.U,De=M.ba.S,Le=De==Yu||De==xu;M=M.ba.f.RGBA;var qe=[0],Ve=C.ka;qe[0]=C.T,C.Kb&&(Ve==0?--qe[0]:(--Ve,ye[0]-=C.width),C.j+C.ka+C.T==C.o&&(qe[0]=C.o-C.j-Ve));var nt=M.eb;Ve=M.fb+Ve*M.A,C=Yn(ce,ye[0],C.width,Ee,qe,nt,Ve+(Le?0:3),M.A),t(Z==qe),C&&Et(De)&&vs(nt,Ve,Le,Ee,qe,M.A)}return 0}function Xr(C){var M=C.ma,Z=M.ba.S,ce=11>Z,ye=Z==fc||Z==pu||Z==Yu||Z==fa||Z==12||Et(Z);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!_d(M.Oa,C,ye?11:12))return 0;if(ye&&Et(Z)&&jt(),C.da)alert("todo:use_scaling");else{if(ce){if(M.Ib=Dt,C.Kb){if(Z=C.U+1>>1,M.memory=i(C.U+2*Z),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+C.U,M.Mc=M.cc,M.Nc=M.dc+Z,M.Ib=yr,jt()}}else alert("todo:EmitYUV");ye&&(M.Jb=kr,ce&&Xe())}if(ce&&!bs){for(C=0;256>C;++C)vi[C]=89858*(C-128)+bl>>Wo,to[C]=-22014*(C-128)+bl,Dd[C]=-45773*(C-128),$l[C]=113618*(C-128)+bl>>Wo;for(C=Jn;C<ra;++C)M=76283*(C-16)+bl>>Wo,nf[C-Jn]=Js(M,255),Vf[C-Jn]=Js(M+8>>4,15);bs=1}return 1}function Sr(C){var M=C.ma,Z=C.U,ce=C.T;return t(!(1&C.ka)),0>=Z||0>=ce?0:(Z=M.Ib(C,M),M.Jb!=null&&M.Jb(C,M,Z),M.Dc+=Z,1)}function pn(C){C.ma.memory=null}function rr(C,M,Z,ce){return ee(C,8)!=47?0:(M[0]=ee(C,14)+1,Z[0]=ee(C,14)+1,ce[0]=ee(C,1),ee(C,3)!=0?0:!C.h)}function On(C,M){if(4>C)return C+1;var Z=C-2>>1;return(2+(1&C)<<Z)+ee(M,Z)+1}function Hr(C,M){return 120<M?M-120:1<=(Z=((Z=Yh[M-1])>>4)*C+(8-(15&Z)))?Z:1;var Z}function sn(C,M,Z){var ce=z(Z),ye=C[M+=255&ce].g-8;return 0<ye&&(q(Z,Z.u+8),ce=z(Z),M+=C[M].value,M+=ce&(1<<ye)-1),q(Z,Z.u+C[M].g),C[M].value}function jr(C,M,Z){return Z.g+=C.g,Z.value+=C.value<<M>>>0,t(8>=Z.g),C.g}function Gr(C,M,Z){var ce=C.xc;return t((M=ce==0?0:C.vc[C.md*(Z>>ce)+(M>>ce)])<C.Wb),C.Ya[M]}function Ne(C,M,Z,ce){var ye=C.ab,Ee=C.c*M,De=C.C;M=De+M;var Le=Z,qe=ce;for(ce=C.Ta,Z=C.Ua;0<ye--;){var Ve=C.gc[ye],nt=De,Nt=M,kt=Le,pt=qe,Vt=(qe=ce,Le=Z,Ve.Ea);switch(t(nt<Nt),t(Nt<=Ve.nc),Ve.hc){case 2:pi(kt,pt,(Nt-nt)*Vt,qe,Le);break;case 0:var Pt=nt,lt=Nt,st=qe,Ft=Le,Lt=(xr=Ve).Ea;Pt==0&&(ts(kt,pt,null,null,1,st,Ft),_e(kt,pt+1,0,0,Lt-1,st,Ft+1),pt+=Lt,Ft+=Lt,++Pt);for(var $t=1<<xr.b,hr=$t-1,or=je(Lt,xr.b),Vr=xr.K,xr=xr.w+(Pt>>xr.b)*or;Pt<lt;){var wn=Vr,Tn=xr,Cn=1;for(xa(kt,pt,st,Ft-Lt,1,st,Ft);Cn<Lt;){var ln=(Cn&~hr)+$t;ln>Lt&&(ln=Lt),(0,$a[wn[Tn++]>>8&15])(kt,pt+ +Cn,st,Ft+Cn-Lt,ln-Cn,st,Ft+Cn),Cn=ln}pt+=Lt,Ft+=Lt,++Pt&hr||(xr+=or)}Nt!=Ve.nc&&a(qe,Le-Vt,qe,Le+(Nt-nt-1)*Vt,Vt);break;case 1:for(Vt=kt,lt=pt,Lt=(kt=Ve.Ea)-(Ft=kt&~(st=(pt=1<<Ve.b)-1)),Pt=je(kt,Ve.b),$t=Ve.K,Ve=Ve.w+(nt>>Ve.b)*Pt;nt<Nt;){for(hr=$t,or=Ve,Vr=new de,xr=lt+Ft,wn=lt+kt;lt<xr;)Se(hr[or++],Vr),xs(Vr,Vt,lt,pt,qe,Le),lt+=pt,Le+=pt;lt<wn&&(Se(hr[or++],Vr),xs(Vr,Vt,lt,Lt,qe,Le),lt+=Lt,Le+=Lt),++nt&st||(Ve+=Pt)}break;case 3:if(kt==qe&&pt==Le&&0<Ve.b){for(lt=qe,kt=Vt=Le+(Nt-nt)*Vt-(Ft=(Nt-nt)*je(Ve.Ea,Ve.b)),pt=qe,st=Le,Pt=[],Ft=(Lt=Ft)-1;0<=Ft;--Ft)Pt[Ft]=pt[st+Ft];for(Ft=Lt-1;0<=Ft;--Ft)lt[kt+Ft]=Pt[Ft];qn(Ve,nt,Nt,qe,Vt,qe,Le)}else qn(Ve,nt,Nt,kt,pt,qe,Le)}Le=ce,qe=Z}qe!=Z&&a(ce,Z,Le,qe,Ee)}function He(C,M){var Z=C.V,ce=C.Ba+C.c*C.C,ye=M-C.C;if(t(M<=C.l.o),t(16>=ye),0<ye){var Ee=C.l,De=C.Ta,Le=C.Ua,qe=Ee.width;if(Ne(C,ye,Z,ce),ye=Le=[Le],t((Z=C.C)<(ce=M)),t(Ee.v<Ee.va),ce>Ee.o&&(ce=Ee.o),Z<Ee.j){var Ve=Ee.j-Z;Z=Ee.j,ye[0]+=Ve*qe}if(Z>=ce?Z=0:(ye[0]+=4*Ee.v,Ee.ka=Z-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=ce-Z,Z=1),Z){if(Le=Le[0],11>(Z=C.ca).S){var nt=Z.f.RGBA,Nt=(ce=Z.S,ye=Ee.U,Ee=Ee.T,Ve=nt.eb,nt.A),kt=Ee;for(nt=nt.fb+C.Ma*nt.A;0<kt--;){var pt=De,Vt=Le,Pt=ye,lt=Ve,st=nt;switch(ce){case Xu:ba(pt,Vt,Pt,lt,st);break;case fc:rs(pt,Vt,Pt,lt,st);break;case Uc:rs(pt,Vt,Pt,lt,st),vs(lt,st,0,Pt,1,0);break;case Xh:Uo(pt,Vt,Pt,lt,st);break;case pu:Gt(pt,Vt,Pt,lt,st,1);break;case Od:Gt(pt,Vt,Pt,lt,st,1),vs(lt,st,0,Pt,1,0);break;case Yu:Gt(pt,Vt,Pt,lt,st,0);break;case xu:Gt(pt,Vt,Pt,lt,st,0),vs(lt,st,1,Pt,1,0);break;case fa:Yi(pt,Vt,Pt,lt,st);break;case Ju:Yi(pt,Vt,Pt,lt,st),ta(lt,st,Pt,1,0);break;case qf:Fl(pt,Vt,Pt,lt,st);break;default:t(0)}Le+=qe,nt+=Nt}C.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");t(C.Ma<=Z.height)}}C.C=M,t(C.C<=C.i)}function Be(C){var M;if(0<C.ua)return 0;for(M=0;M<C.Wb;++M){var Z=C.Ya[M].G,ce=C.Ya[M].H;if(0<Z[1][ce[1]+0].g||0<Z[2][ce[2]+0].g||0<Z[3][ce[3]+0].g)return 0}return 1}function xe(C,M,Z,ce,ye,Ee){if(C.Z!=0){var De=C.qd,Le=C.rd;for(t(as[C.Z]!=null);M<Z;++M)as[C.Z](De,Le,ce,ye,ce,ye,Ee),De=ce,Le=ye,ye+=Ee;C.qd=De,C.rd=Le}}function Ce(C,M){var Z=C.l.ma,ce=Z.Z==0||Z.Z==1?C.l.j:C.C;if(ce=C.C<ce?ce:C.C,t(M<=C.l.o),M>ce){var ye=C.l.width,Ee=Z.ca,De=Z.tb+ye*ce,Le=C.V,qe=C.Ba+C.c*ce,Ve=C.gc;t(C.ab==1),t(Ve[0].hc==3),qa(Ve[0],ce,M,Le,qe,Ee,De),xe(Z,ce,M,Ee,De,ye)}C.C=C.Ma=M}function Re(C,M,Z,ce,ye,Ee,De){var Le=C.$/ce,qe=C.$%ce,Ve=C.m,nt=C.s,Nt=Z+C.$,kt=Nt;ye=Z+ce*ye;var pt=Z+ce*Ee,Vt=280+nt.ua,Pt=C.Pb?Le:16777216,lt=0<nt.ua?nt.Wa:null,st=nt.wc,Ft=Nt<pt?Gr(nt,qe,Le):null;t(C.C<Ee),t(pt<=ye);var Lt=!1;e:for(;;){for(;Lt||Nt<pt;){var $t=0;if(Le>=Pt){var hr=Nt-Z;t((Pt=C).Pb),Pt.wd=Pt.m,Pt.xd=hr,0<Pt.s.ua&&oe(Pt.s.Wa,Pt.s.vb),Pt=Le+ef}if(qe&st||(Ft=Gr(nt,qe,Le)),t(Ft!=null),Ft.Qb&&(M[Nt]=Ft.qb,Lt=!0),!Lt)if(K(Ve),Ft.jc){$t=Ve,hr=M;var or=Nt,Vr=Ft.pd[z($t)&ka-1];t(Ft.jc),256>Vr.g?(q($t,$t.u+Vr.g),hr[or]=Vr.value,$t=0):(q($t,$t.u+Vr.g-256),t(256<=Vr.value),$t=Vr.value),$t==0&&(Lt=!0)}else $t=sn(Ft.G[0],Ft.H[0],Ve);if(Ve.h)break;if(Lt||256>$t){if(!Lt)if(Ft.nd)M[Nt]=(Ft.qb|$t<<8)>>>0;else{if(K(Ve),Lt=sn(Ft.G[1],Ft.H[1],Ve),K(Ve),hr=sn(Ft.G[2],Ft.H[2],Ve),or=sn(Ft.G[3],Ft.H[3],Ve),Ve.h)break;M[Nt]=(or<<24|Lt<<16|$t<<8|hr)>>>0}if(Lt=!1,++Nt,++qe>=ce&&(qe=0,++Le,De!=null&&Le<=Ee&&!(Le%16)&&De(C,Le),lt!=null))for(;kt<Nt;)$t=M[kt++],lt.X[(506832829*$t&4294967295)>>>lt.Mb]=$t}else if(280>$t){if($t=On($t-256,Ve),hr=sn(Ft.G[4],Ft.H[4],Ve),K(Ve),hr=Hr(ce,hr=On(hr,Ve)),Ve.h)break;if(Nt-Z<hr||ye-Nt<$t)break e;for(or=0;or<$t;++or)M[Nt+or]=M[Nt+or-hr];for(Nt+=$t,qe+=$t;qe>=ce;)qe-=ce,++Le,De!=null&&Le<=Ee&&!(Le%16)&&De(C,Le);if(t(Nt<=ye),qe&st&&(Ft=Gr(nt,qe,Le)),lt!=null)for(;kt<Nt;)$t=M[kt++],lt.X[(506832829*$t&4294967295)>>>lt.Mb]=$t}else{if(!($t<Vt))break e;for(Lt=$t-280,t(lt!=null);kt<Nt;)$t=M[kt++],lt.X[(506832829*$t&4294967295)>>>lt.Mb]=$t;$t=Nt,t(!(Lt>>>(hr=lt).Xa)),M[$t]=hr.X[Lt],Lt=!0}Lt||t(Ve.h==V(Ve))}if(C.Pb&&Ve.h&&Nt<ye)t(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&oe(C.s.vb,C.s.Wa);else{if(Ve.h)break e;De?.(C,Le>Ee?Ee:Le),C.a=0,C.$=Nt-Z}return 1}return C.a=3,0}function tt(C){t(C!=null),C.vc=null,C.yc=null,C.Ya=null;var M=C.Wa;M!=null&&(M.X=null),C.vb=null,t(C!=null)}function ht(){var C=new uc;return C==null?null:(C.a=0,C.xb=bu,Ye("Predictor","VP8LPredictors"),Ye("Predictor","VP8LPredictors_C"),Ye("PredictorAdd","VP8LPredictorsAdd"),Ye("PredictorAdd","VP8LPredictorsAdd_C"),pi=ze,xs=Fe,ba=et,rs=ut,Yi=bt,Fl=At,Uo=qt,P.VP8LMapColor32b=Ms,P.VP8LMapColor8b=Xi,C)}function ct(C,M,Z,ce,ye){var Ee=1,De=[C],Le=[M],qe=ce.m,Ve=ce.s,nt=null,Nt=0;e:for(;;){if(Z)for(;Ee&&ee(qe,1);){var kt=De,pt=Le,Vt=ce,Pt=1,lt=Vt.m,st=Vt.gc[Vt.ab],Ft=ee(lt,2);if(Vt.Oc&1<<Ft)Ee=0;else{switch(Vt.Oc|=1<<Ft,st.hc=Ft,st.Ea=kt[0],st.nc=pt[0],st.K=[null],++Vt.ab,t(4>=Vt.ab),Ft){case 0:case 1:st.b=ee(lt,3)+2,Pt=ct(je(st.Ea,st.b),je(st.nc,st.b),0,Vt,st.K),st.K=st.K[0];break;case 3:var Lt,$t=ee(lt,8)+1,hr=16<$t?0:4<$t?1:2<$t?2:3;if(kt[0]=je(st.Ea,hr),st.b=hr,Lt=Pt=ct($t,1,0,Vt,st.K)){var or,Vr=$t,xr=st,wn=1<<(8>>xr.b),Tn=i(wn);if(Tn==null)Lt=0;else{var Cn=xr.K[0],ln=xr.w;for(Tn[0]=xr.K[0][0],or=1;or<1*Vr;++or)Tn[or]=Ie(Cn[ln+or],Tn[or-1]);for(;or<4*wn;++or)Tn[or]=0;xr.K[0]=null,xr.K[0]=Tn,Lt=1}}Pt=Lt;break;case 2:break;default:t(0)}Ee=Pt}}if(De=De[0],Le=Le[0],Ee&&ee(qe,1)&&!(Ee=1<=(Nt=ee(qe,4))&&11>=Nt)){ce.a=3;break e}var Qn;if(Qn=Ee)t:{var Ln,rn,za,Ii=ce,Ha=De,ys=Le,Zn=Nt,Cs=Z,bi=Ii.m,Wa=Ii.s,Da=[null],Bs=1,Di=0,Go=Zu[Zn];r:for(;;){if(Cs&&ee(bi,1)){var Va=ee(bi,3)+2,Qa=je(Ha,Va),As=je(ys,Va),Gc=Qa*As;if(!ct(Qa,As,0,Ii,Da))break r;for(Da=Da[0],Wa.xc=Va,Ln=0;Ln<Gc;++Ln){var ro=Da[Ln]>>8&65535;Da[Ln]=ro,ro>=Bs&&(Bs=ro+1)}}if(bi.h)break r;for(rn=0;5>rn;++rn){var Vn=Pd[rn];!rn&&0<Zn&&(Vn+=1<<Zn),Di<Vn&&(Di=Vn)}var zl=o(Bs*Go,_),Ld=Bs,yu=o(Ld,U);if(yu==null)var Ko=null;else t(65536>=Ld),Ko=yu;var ko=i(Di);if(Ko==null||ko==null||zl==null){Ii.a=1;break r}var pc=zl;for(Ln=za=0;Ln<Bs;++Ln){var So=Ko[Ln],Hl=So.G,Fd=So.H,wu=0,_o=1,Nu=0;for(rn=0;5>rn;++rn){Vn=Pd[rn],Hl[rn]=pc,Fd[rn]=za,!rn&&0<Zn&&(Vn+=1<<Zn);a:{var Kc,xc=Vn,ju=Ii,Wl=ko,Qh=pc,af=za,ga=0,Zs=ju.m,gc=ee(Zs,1);if(s(Wl,0,0,xc),gc){var q0=ee(Zs,1)+1,Md=ee(Zs,1),Gf=ee(Zs,Md==0?1:8);Wl[Gf]=1,q0==2&&(Wl[Gf=ee(Zs,8)]=1);var Vl=1}else{var La=i(19),ws=ee(Zs,4)+4;if(19<ws){ju.a=3;var ss=0;break a}for(Kc=0;Kc<ws;++Kc)La[$f[Kc]]=ee(Zs,3);var ku=void 0,vc=void 0,Xc=ju,$0=La,Es=xc,Kf=Wl,sf=0,Gl=Xc.m,Xo=8,no=o(128,_);n:for(;T(no,0,7,$0,19);){if(ee(Gl,1)){var of=2+2*ee(Gl,3);if((ku=2+ee(Gl,of))>Es)break n}else ku=Es;for(vc=0;vc<Es&&ku--;){K(Gl);var Xf=no[0+(127&z(Gl))];q(Gl,Gl.u+Xf.g);var bc=Xf.value;if(16>bc)Kf[vc++]=bc,bc!=0&&(Xo=bc);else{var Rd=bc==16,lf=bc-16,ao=Qu[lf],z0=ee(Gl,qc[lf])+ao;if(vc+z0>Es)break n;for(var H0=Rd?Xo:0;0<z0--;)Kf[vc++]=H0}}sf=1;break n}sf||(Xc.a=3),Vl=sf}(Vl=Vl&&!Zs.h)&&(ga=T(Qh,af,8,Wl,xc)),Vl&&ga!=0?ss=ga:(ju.a=3,ss=0)}if(ss==0)break r;if(_o&&R0[rn]==1&&(_o=pc[za].g==0),wu+=pc[za].g,za+=ss,3>=rn){var yc,cf=ko[0];for(yc=1;yc<Vn;++yc)ko[yc]>cf&&(cf=ko[yc]);Nu+=cf}}if(So.nd=_o,So.Qb=0,_o&&(So.qb=(Hl[3][Fd[3]+0].value<<24|Hl[1][Fd[1]+0].value<<16|Hl[2][Fd[2]+0].value)>>>0,wu==0&&256>Hl[0][Fd[0]+0].value&&(So.Qb=1,So.qb+=Hl[0][Fd[0]+0].value<<8)),So.jc=!So.Qb&&6>Nu,So.jc){var L,me=So;for(L=0;L<ka;++L){var we=L,Je=me.pd[we],it=me.G[0][me.H[0]+we];256<=it.value?(Je.g=it.g+256,Je.value=it.value):(Je.g=0,Je.value=0,we>>=jr(it,8,Je),we>>=jr(me.G[1][me.H[1]+we],16,Je),we>>=jr(me.G[2][me.H[2]+we],0,Je),jr(me.G[3][me.H[3]+we],24,Je))}}}Wa.vc=Da,Wa.Wb=Bs,Wa.Ya=Ko,Wa.yc=zl,Qn=1;break t}Qn=0}if(!(Ee=Qn)){ce.a=3;break e}if(0<Nt){if(Ve.ua=1<<Nt,!Te(Ve.Wa,Nt)){ce.a=1,Ee=0;break e}}else Ve.ua=0;var Ut=ce,_t=De,Xt=Le,Tr=Ut.s,vn=Tr.xc;if(Ut.c=_t,Ut.i=Xt,Tr.md=je(_t,vn),Tr.wc=vn==0?-1:(1<<vn)-1,Z){ce.xb=jo;break e}if((nt=i(De*Le))==null){ce.a=1,Ee=0;break e}Ee=(Ee=Re(ce,nt,0,De,Le,Le,null))&&!qe.h;break e}return Ee?(ye!=null?ye[0]=nt:(t(nt==null),t(Z)),ce.$=0,Z||tt(Ve)):tt(Ve),Ee}function xt(C,M){var Z=C.c*C.i,ce=Z+M+16*M;return t(C.c<=M),C.V=i(ce),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+Z+M,1)}function ve(C,M){var Z=C.C,ce=M-Z,ye=C.V,Ee=C.Ba+C.c*Z;for(t(M<=C.l.o);0<ce;){var De=16<ce?16:ce,Le=C.l.ma,qe=C.l.width,Ve=qe*De,nt=Le.ca,Nt=Le.tb+qe*Z,kt=C.Ta,pt=C.Ua;Ne(C,De,ye,Ee),_n(kt,pt,nt,Nt,Ve),xe(Le,Z,Z+De,nt,Nt,qe),ce-=De,ye+=De*C.c,Z+=De}t(Z==M),C.C=C.Ma=M}function be(){this.ub=this.yd=this.td=this.Rb=0}function Ge(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function at(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function yt(){this.Yb=(function(){var C=[];return(function M(Z,ce,ye){for(var Ee=ye[ce],De=0;De<Ee&&(Z.push(ye.length>ce+1?[]:0),!(ye.length<ce+1));De++)M(Z[De],ce+1,ye)})(C,0,[3,11]),C})()}function wt(){this.jb=i(3),this.Wc=l([4,8],yt),this.Xc=l([4,17],yt)}function Rt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function sr(){this.ld=this.La=this.dd=this.tc=0}function Yt(){this.Na=this.la=0}function wr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pr(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function $r(){this.uc=this.M=this.Nb=0,this.wa=Array(new sr),this.Y=0,this.ya=Array(new Pr),this.aa=0,this.l=new ea}function fn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ur(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new be,this.Kc=new Ge,this.ed=new Rt,this.Qa=new at,this.Ic=this.$c=this.Aa=0,this.D=new $r,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,wr),this.Pa=new wt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new fn),this.Hd=0,this.rb=Array(new Yt),this.sb=0,this.wa=Array(new sr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pr),this.L=this.aa=0,this.gd=l([4,2],sr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ea(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Un(){var C=new Ur;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,vu||(vu=Ke)),C}function gn(C,M,Z){return C.a==0&&(C.a=M,C.sc=Z,C.cb=0),0}function po(C,M,Z){return 3<=Z&&C[M+0]==157&&C[M+1]==1&&C[M+2]==42}function va(C,M){if(C==null)return 0;if(C.a=0,C.sc="OK",M==null)return gn(C,2,"null VP8Io passed to VP8GetHeaders()");var Z=M.data,ce=M.w,ye=M.ha;if(4>ye)return gn(C,7,"Truncated header.");var Ee=Z[ce+0]|Z[ce+1]<<8|Z[ce+2]<<16,De=C.Od;if(De.Rb=!(1&Ee),De.td=Ee>>1&7,De.yd=Ee>>4&1,De.ub=Ee>>5,3<De.td)return gn(C,3,"Incorrect keyframe parameters.");if(!De.yd)return gn(C,4,"Frame not displayable.");ce+=3,ye-=3;var Le=C.Kc;if(De.Rb){if(7>ye)return gn(C,7,"cannot parse picture header");if(!po(Z,ce,ye))return gn(C,3,"Bad code word");Le.c=16383&(Z[ce+4]<<8|Z[ce+3]),Le.Td=Z[ce+4]>>6,Le.i=16383&(Z[ce+6]<<8|Z[ce+5]),Le.Ud=Z[ce+6]>>6,ce+=7,ye-=7,C.za=Le.c+15>>4,C.Ub=Le.i+15>>4,M.width=Le.c,M.height=Le.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,s((Ee=C.Pa).jb,0,255,Ee.jb.length),t((Ee=C.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,s(Ee.Zb,0,0,Ee.Zb.length),s(Ee.Lb,0,0,Ee.Lb)}if(De.ub>ye)return gn(C,7,"bad partition length");H(Ee=C.m,Z,ce,De.ub),ce+=De.ub,ye-=De.ub,De.Rb&&(Le.Ld=pe(Ee),Le.Kd=pe(Ee)),Le=C.Qa;var qe,Ve=C.Pa;if(t(Ee!=null),t(Le!=null),Le.Cb=pe(Ee),Le.Cb){if(Le.Bb=pe(Ee),pe(Ee)){for(Le.Fb=pe(Ee),qe=0;4>qe;++qe)Le.Zb[qe]=pe(Ee)?J(Ee,7):0;for(qe=0;4>qe;++qe)Le.Lb[qe]=pe(Ee)?J(Ee,6):0}if(Le.Bb)for(qe=0;3>qe;++qe)Ve.jb[qe]=pe(Ee)?Y(Ee,8):255}else Le.Bb=0;if(Ee.Ka)return gn(C,3,"cannot parse segment header");if((Le=C.ed).zd=pe(Ee),Le.Tb=Y(Ee,6),Le.wb=Y(Ee,3),Le.Pc=pe(Ee),Le.Pc&&pe(Ee)){for(Ve=0;4>Ve;++Ve)pe(Ee)&&(Le.vd[Ve]=J(Ee,6));for(Ve=0;4>Ve;++Ve)pe(Ee)&&(Le.od[Ve]=J(Ee,6))}if(C.L=Le.Tb==0?0:Le.zd?1:2,Ee.Ka)return gn(C,3,"cannot parse filter header");var nt=ye;if(ye=qe=ce,ce=qe+nt,Le=nt,C.Xb=(1<<Y(C.m,2))-1,nt<3*(Ve=C.Xb))Z=7;else{for(qe+=3*Ve,Le-=3*Ve,nt=0;nt<Ve;++nt){var Nt=Z[ye+0]|Z[ye+1]<<8|Z[ye+2]<<16;Nt>Le&&(Nt=Le),H(C.Jc[+nt],Z,qe,Nt),qe+=Nt,Le-=Nt,ye+=3}H(C.Jc[+Ve],Z,qe,Le),Z=qe<ce?0:5}if(Z!=0)return gn(C,Z,"cannot parse partitions");for(Z=Y(qe=C.m,7),ye=pe(qe)?J(qe,4):0,ce=pe(qe)?J(qe,4):0,Le=pe(qe)?J(qe,4):0,Ve=pe(qe)?J(qe,4):0,qe=pe(qe)?J(qe,4):0,nt=C.Qa,Nt=0;4>Nt;++Nt){if(nt.Cb){var kt=nt.Zb[Nt];nt.Fb||(kt+=Z)}else{if(0<Nt){C.pb[Nt]=C.pb[0];continue}kt=Z}var pt=C.pb[Nt];pt.Sc[0]=hc[Js(kt+ye,127)],pt.Sc[1]=gu[Js(kt+0,127)],pt.Eb[0]=2*hc[Js(kt+ce,127)],pt.Eb[1]=101581*gu[Js(kt+Le,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=hc[Js(kt+Ve,117)],pt.Qc[1]=gu[Js(kt+qe,127)],pt.lc=kt+qe}if(!De.Rb)return gn(C,4,"Not a key frame.");for(pe(Ee),De=C.Pa,Z=0;4>Z;++Z){for(ye=0;8>ye;++ye)for(ce=0;3>ce;++ce)for(Le=0;11>Le;++Le)Ve=ie(Ee,yp[Z][ye][ce][Le])?Y(Ee,8):mc[Z][ye][ce][Le],De.Wc[Z][ye].Yb[ce][Le]=Ve;for(ye=0;17>ye;++ye)De.Xc[Z][ye]=De.Wc[Z][tf[ye]]}return C.kc=pe(Ee),C.kc&&(C.Bd=Y(Ee,8)),C.cb=1}function Ke(C,M,Z,ce,ye,Ee,De){var Le=M[ye].Yb[Z];for(Z=0;16>ye;++ye){if(!ie(C,Le[Z+0]))return ye;for(;!ie(C,Le[Z+1]);)if(Le=M[++ye].Yb[0],Z=0,ye==16)return 16;var qe=M[ye+1].Yb;if(ie(C,Le[Z+2])){var Ve=C,nt=0;if(ie(Ve,(kt=Le)[(Nt=Z)+3]))if(ie(Ve,kt[Nt+6])){for(Le=0,Nt=2*(nt=ie(Ve,kt[Nt+8]))+(kt=ie(Ve,kt[Nt+9+nt])),nt=0,kt=zf[Nt];kt[Le];++Le)nt+=nt+ie(Ve,kt[Le]);nt+=3+(8<<Nt)}else ie(Ve,kt[Nt+7])?(nt=7+2*ie(Ve,165),nt+=ie(Ve,145)):nt=5+ie(Ve,159);else nt=ie(Ve,kt[Nt+4])?3+ie(Ve,kt[Nt+5]):2;Le=qe[2]}else nt=1,Le=qe[1];qe=De+B0[ye],0>(Ve=C).b&&se(Ve);var Nt,kt=Ve.b,pt=(Nt=Ve.Ca>>1)-(Ve.I>>kt)>>31;--Ve.b,Ve.Ca+=pt,Ve.Ca|=1,Ve.I-=(Nt+1&pt)<<kt,Ee[qe]=((nt^pt)-pt)*ce[(0<ye)+0]}return 16}function Bt(C){var M=C.rb[C.sb-1];M.la=0,M.Na=0,s(C.zc,0,0,C.zc.length),C.ja=0}function It(C,M){if(C==null)return 0;if(M==null)return gn(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!va(C,M))return 0;if(t(C.cb),M.ac==null||M.ac(M)){M.ob&&(C.L=0);var Z=Vc[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=M.v-Z>>4,C.zb=M.j-Z>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=M.o+15+Z>>4,C.Hb=M.va+15+Z>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var ce=C.ed;for(Z=0;4>Z;++Z){var ye;if(C.Qa.Cb){var Ee=C.Qa.Lb[Z];C.Qa.Fb||(Ee+=ce.Tb)}else Ee=ce.Tb;for(ye=0;1>=ye;++ye){var De=C.gd[Z][ye],Le=Ee;if(ce.Pc&&(Le+=ce.vd[0],ye&&(Le+=ce.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var qe=Le;0<ce.wb&&(qe=4<ce.wb?qe>>2:qe>>1)>9-ce.wb&&(qe=9-ce.wb),1>qe&&(qe=1),De.dd=qe,De.tc=2*Le+qe,De.ld=40<=Le?2:15<=Le?1:0}else De.tc=0;De.La=ye}}}Z=0}else gn(C,6,"Frame setup failed"),Z=C.a;if(Z=Z==0){if(Z){C.$c=0,0<C.Aa||(C.Ic=Vo);e:{Z=C.Ic,ce=4*(qe=C.za);var Ve=32*qe,nt=qe+1,Nt=0<C.L?qe*(0<C.Aa?2:1):0,kt=(C.Aa==2?2:1)*qe;if((De=ce+832+(ye=3*(16*Z+Vc[C.L])/2*Ve)+(Ee=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=De)Z=0;else{if(De>C.Vb){if(C.Vb=0,C.Ec=i(De),C.Fc=0,C.Ec==null){Z=gn(C,1,"no memory during frame initialization.");break e}C.Vb=De}De=C.Ec,Le=C.Fc,C.Ac=De,C.Bc=Le,Le+=ce,C.Gd=o(Ve,fn),C.Hd=0,C.rb=o(nt+1,Yt),C.sb=1,C.wa=Nt?o(Nt,sr):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=qe),t(!0),C.oc=De,C.pc=Le,Le+=832,C.ya=o(kt,Pr),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=qe),C.R=16*qe,C.B=8*qe,qe=(Ve=Vc[C.L])*C.R,Ve=Ve/2*C.B,C.sa=De,C.ta=Le+qe,C.qa=C.sa,C.ra=C.ta+16*Z*C.R+Ve,C.Ha=C.qa,C.Ia=C.ra+8*Z*C.B+Ve,C.$c=0,Le+=ye,C.mb=Ee?De:null,C.nb=Ee?Le:null,t(Le+Ee<=C.Fc+C.Vb),Bt(C),s(C.Ac,C.Bc,0,ce),Z=1}}if(Z){if(M.ka=0,M.y=C.sa,M.O=C.ta,M.f=C.qa,M.N=C.ra,M.ea=C.Ha,M.Vd=C.Ia,M.fa=C.R,M.Rc=C.B,M.F=null,M.J=0,!Td){for(Z=-255;255>=Z;++Z)Sa[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)$o[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)mu[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)zo[255+Z]=0>Z?0:255<Z?255:Z;Td=1}hu=_r,vl=yn,Ml=nr,Qs=fr,Ti=Mt,Wn=Pn,Rl=Ro,Ed=Ya,Bl=dc,qo=Dl,Ji=Ei,Rs=Vi,Qi=go,Oi=Dn,Zi=hi,wo=Gs,Bc=Ks,gs=kd,No[0]=Ra,No[1]=Na,No[2]=Hn,No[3]=Wr,No[4]=Wi,No[5]=hs,No[6]=ui,No[7]=ms,No[8]=pl,No[9]=Ai,ns[0]=Xn,ns[1]=da,ns[2]=ir,ns[3]=en,ns[4]=bn,ns[5]=Ar,ns[6]=tn,Pi[0]=fi,Pi[1]=Pa,Pi[2]=jd,Pi[3]=xo,Pi[4]=Mo,Pi[5]=Fo,Pi[6]=Pl,Z=1}else Z=0}Z&&(Z=(function(pt,Vt){for(pt.M=0;pt.M<pt.Va;++pt.M){var Pt,lt=pt.Jc[pt.M&pt.Xb],st=pt.m,Ft=pt;for(Pt=0;Pt<Ft.za;++Pt){var Lt=st,$t=Ft,hr=$t.Ac,or=$t.Bc+4*Pt,Vr=$t.zc,xr=$t.ya[$t.aa+Pt];if($t.Qa.Bb?xr.$b=ie(Lt,$t.Pa.jb[0])?2+ie(Lt,$t.Pa.jb[2]):ie(Lt,$t.Pa.jb[1]):xr.$b=0,$t.kc&&(xr.Ad=ie(Lt,$t.Bd)),xr.Za=!ie(Lt,145)+0,xr.Za){var wn=xr.Ob,Tn=0;for($t=0;4>$t;++$t){var Cn,ln=Vr[0+$t];for(Cn=0;4>Cn;++Cn){ln=Id[hr[or+Cn]][ln];for(var Qn=$c[ie(Lt,ln[0])];0<Qn;)Qn=$c[2*Qn+ie(Lt,ln[Qn])];ln=-Qn,hr[or+Cn]=ln}a(wn,Tn,hr,or,4),Tn+=4,Vr[0+$t]=ln}}else ln=ie(Lt,156)?ie(Lt,128)?1:3:ie(Lt,163)?2:0,xr.Ob[0]=ln,s(hr,or,ln,4),s(Vr,0,ln,4);xr.Dd=ie(Lt,142)?ie(Lt,114)?ie(Lt,183)?1:3:2:0}if(Ft.m.Ka)return gn(pt,7,"Premature end-of-partition0 encountered.");for(;pt.ja<pt.za;++pt.ja){if(Ft=lt,Lt=(st=pt).rb[st.sb-1],hr=st.rb[st.sb+st.ja],Pt=st.ya[st.aa+st.ja],or=st.kc?Pt.Ad:0)Lt.la=hr.la=0,Pt.Za||(Lt.Na=hr.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var Ln,rn;if(Lt=hr,hr=Ft,or=st.Pa.Xc,Vr=st.ya[st.aa+st.ja],xr=st.pb[Vr.$b],$t=Vr.ad,wn=0,Tn=st.rb[st.sb-1],ln=Cn=0,s($t,wn,0,384),Vr.Za)var za=0,Ii=or[3];else{Qn=i(16);var Ha=Lt.Na+Tn.Na;if(Ha=vu(hr,or[1],Ha,xr.Eb,0,Qn,0),Lt.Na=Tn.Na=(0<Ha)+0,1<Ha)hu(Qn,0,$t,wn);else{var ys=Qn[0]+3>>3;for(Qn=0;256>Qn;Qn+=16)$t[wn+Qn]=ys}za=1,Ii=or[0]}var Zn=15&Lt.la,Cs=15&Tn.la;for(Qn=0;4>Qn;++Qn){var bi=1&Cs;for(ys=rn=0;4>ys;++ys)Zn=Zn>>1|(bi=(Ha=vu(hr,Ii,Ha=bi+(1&Zn),xr.Sc,za,$t,wn))>za)<<7,rn=rn<<2|(3<Ha?3:1<Ha?2:$t[wn+0]!=0),wn+=16;Zn>>=4,Cs=Cs>>1|bi<<7,Cn=(Cn<<8|rn)>>>0}for(Ii=Zn,za=Cs>>4,Ln=0;4>Ln;Ln+=2){for(rn=0,Zn=Lt.la>>4+Ln,Cs=Tn.la>>4+Ln,Qn=0;2>Qn;++Qn){for(bi=1&Cs,ys=0;2>ys;++ys)Ha=bi+(1&Zn),Zn=Zn>>1|(bi=0<(Ha=vu(hr,or[2],Ha,xr.Qc,0,$t,wn)))<<3,rn=rn<<2|(3<Ha?3:1<Ha?2:$t[wn+0]!=0),wn+=16;Zn>>=2,Cs=Cs>>1|bi<<5}ln|=rn<<4*Ln,Ii|=Zn<<4<<Ln,za|=(240&Cs)<<Ln}Lt.la=Ii,Tn.la=za,Vr.Hc=Cn,Vr.Gc=ln,Vr.ia=43690&ln?0:xr.ia,or=!(Cn|ln)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[Pt.$b][Pt.Za],st.wa[st.Y+st.ja].La|=!or),Ft.Ka)return gn(pt,7,"Premature end-of-file encountered.")}if(Bt(pt),st=Vt,Ft=1,Pt=(lt=pt).D,Lt=0<lt.L&&lt.M>=lt.zb&&lt.M<=lt.Va,lt.Aa==0)e:{if(Pt.M=lt.M,Pt.uc=Lt,fu(lt,Pt),Ft=1,Pt=(rn=lt.D).Nb,Lt=(ln=Vc[lt.L])*lt.R,hr=ln/2*lt.B,Qn=16*Pt*lt.R,ys=8*Pt*lt.B,or=lt.sa,Vr=lt.ta-Lt+Qn,xr=lt.qa,$t=lt.ra-hr+ys,wn=lt.Ha,Tn=lt.Ia-hr+ys,Cs=(Zn=rn.M)==0,Cn=Zn>=lt.Va-1,lt.Aa==2&&fu(lt,rn),rn.uc)for(bi=(Ha=lt).D.M,t(Ha.D.uc),rn=Ha.yb;rn<Ha.Hb;++rn){za=rn,Ii=bi;var Wa=(Da=(Vn=Ha).D).Nb;Ln=Vn.R;var Da=Da.wa[Da.Y+za],Bs=Vn.sa,Di=Vn.ta+16*Wa*Ln+16*za,Go=Da.dd,Va=Da.tc;if(Va!=0)if(t(3<=Va),Vn.L==1)0<za&&wo(Bs,Di,Ln,Va+4),Da.La&&gs(Bs,Di,Ln,Va),0<Ii&&Zi(Bs,Di,Ln,Va+4),Da.La&&Bc(Bs,Di,Ln,Va);else{var Qa=Vn.B,As=Vn.qa,Gc=Vn.ra+8*Wa*Qa+8*za,ro=Vn.Ha,Vn=Vn.Ia+8*Wa*Qa+8*za;Wa=Da.ld,0<za&&(Ed(Bs,Di,Ln,Va+4,Go,Wa),qo(As,Gc,ro,Vn,Qa,Va+4,Go,Wa)),Da.La&&(Rs(Bs,Di,Ln,Va,Go,Wa),Oi(As,Gc,ro,Vn,Qa,Va,Go,Wa)),0<Ii&&(Rl(Bs,Di,Ln,Va+4,Go,Wa),Bl(As,Gc,ro,Vn,Qa,Va+4,Go,Wa)),Da.La&&(Ji(Bs,Di,Ln,Va,Go,Wa),Qi(As,Gc,ro,Vn,Qa,Va,Go,Wa))}}if(lt.ia&&alert("todo:DitherRow"),st.put!=null){if(rn=16*Zn,Zn=16*(Zn+1),Cs?(st.y=lt.sa,st.O=lt.ta+Qn,st.f=lt.qa,st.N=lt.ra+ys,st.ea=lt.Ha,st.W=lt.Ia+ys):(rn-=ln,st.y=or,st.O=Vr,st.f=xr,st.N=$t,st.ea=wn,st.W=Tn),Cn||(Zn-=ln),Zn>st.o&&(Zn=st.o),st.F=null,st.J=null,lt.Fa!=null&&0<lt.Fa.length&&rn<Zn&&(st.J=Fc(lt,st,rn,Zn-rn),st.F=lt.mb,st.F==null&&st.F.length==0)){Ft=gn(lt,3,"Could not decode alpha data.");break e}rn<st.j&&(ln=st.j-rn,rn=st.j,t(!(1&ln)),st.O+=lt.R*ln,st.N+=lt.B*(ln>>1),st.W+=lt.B*(ln>>1),st.F!=null&&(st.J+=st.width*ln)),rn<Zn&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=rn-st.j,st.U=st.va-st.v,st.T=Zn-rn,Ft=st.put(st))}Pt+1!=lt.Ic||Cn||(a(lt.sa,lt.ta-Lt,or,Vr+16*lt.R,Lt),a(lt.qa,lt.ra-hr,xr,$t+8*lt.B,hr),a(lt.Ha,lt.Ia-hr,wn,Tn+8*lt.B,hr))}if(!Ft)return gn(pt,6,"Output aborted.")}return 1})(C,M)),M.bc!=null&&M.bc(M),Z&=1}return Z?(C.cb=0,Z):0}function dr(C,M,Z,ce,ye){ye=C[M+Z+32*ce]+(ye>>3),C[M+Z+32*ce]=-256&ye?0>ye?0:255:ye}function Nr(C,M,Z,ce,ye,Ee){dr(C,M,0,Z,ce+ye),dr(C,M,1,Z,ce+Ee),dr(C,M,2,Z,ce-Ee),dr(C,M,3,Z,ce-ye)}function vr(C){return(20091*C>>16)+C}function Rr(C,M,Z,ce){var ye,Ee=0,De=i(16);for(ye=0;4>ye;++ye){var Le=C[M+0]+C[M+8],qe=C[M+0]-C[M+8],Ve=(35468*C[M+4]>>16)-vr(C[M+12]),nt=vr(C[M+4])+(35468*C[M+12]>>16);De[Ee+0]=Le+nt,De[Ee+1]=qe+Ve,De[Ee+2]=qe-Ve,De[Ee+3]=Le-nt,Ee+=4,M++}for(ye=Ee=0;4>ye;++ye)Le=(C=De[Ee+0]+4)+De[Ee+8],qe=C-De[Ee+8],Ve=(35468*De[Ee+4]>>16)-vr(De[Ee+12]),dr(Z,ce,0,0,Le+(nt=vr(De[Ee+4])+(35468*De[Ee+12]>>16))),dr(Z,ce,1,0,qe+Ve),dr(Z,ce,2,0,qe-Ve),dr(Z,ce,3,0,Le-nt),Ee++,ce+=32}function Pn(C,M,Z,ce){var ye=C[M+0]+4,Ee=35468*C[M+4]>>16,De=vr(C[M+4]),Le=35468*C[M+1]>>16;Nr(Z,ce,0,ye+De,C=vr(C[M+1]),Le),Nr(Z,ce,1,ye+Ee,C,Le),Nr(Z,ce,2,ye-Ee,C,Le),Nr(Z,ce,3,ye-De,C,Le)}function yn(C,M,Z,ce,ye){Rr(C,M,Z,ce),ye&&Rr(C,M+16,Z,ce+4)}function nr(C,M,Z,ce){vl(C,M+0,Z,ce,1),vl(C,M+32,Z,ce+128,1)}function fr(C,M,Z,ce){var ye;for(C=C[M+0]+4,ye=0;4>ye;++ye)for(M=0;4>M;++M)dr(Z,ce,M,ye,C)}function Mt(C,M,Z,ce){C[M+0]&&Qs(C,M+0,Z,ce),C[M+16]&&Qs(C,M+16,Z,ce+4),C[M+32]&&Qs(C,M+32,Z,ce+128),C[M+48]&&Qs(C,M+48,Z,ce+128+4)}function _r(C,M,Z,ce){var ye,Ee=i(16);for(ye=0;4>ye;++ye){var De=C[M+0+ye]+C[M+12+ye],Le=C[M+4+ye]+C[M+8+ye],qe=C[M+4+ye]-C[M+8+ye],Ve=C[M+0+ye]-C[M+12+ye];Ee[0+ye]=De+Le,Ee[8+ye]=De-Le,Ee[4+ye]=Ve+qe,Ee[12+ye]=Ve-qe}for(ye=0;4>ye;++ye)De=(C=Ee[0+4*ye]+3)+Ee[3+4*ye],Le=Ee[1+4*ye]+Ee[2+4*ye],qe=Ee[1+4*ye]-Ee[2+4*ye],Ve=C-Ee[3+4*ye],Z[ce+0]=De+Le>>3,Z[ce+16]=Ve+qe>>3,Z[ce+32]=De-Le>>3,Z[ce+48]=Ve-qe>>3,ce+=64}function Kt(C,M,Z){var ce,ye=M-32,Ee=xi,De=255-C[ye-1];for(ce=0;ce<Z;++ce){var Le,qe=Ee,Ve=De+C[M-1];for(Le=0;Le<Z;++Le)C[M+Le]=qe[Ve+C[ye+Le]];M+=32}}function Na(C,M){Kt(C,M,4)}function Pa(C,M){Kt(C,M,8)}function da(C,M){Kt(C,M,16)}function ir(C,M){var Z;for(Z=0;16>Z;++Z)a(C,M+32*Z,C,M-32,16)}function en(C,M){var Z;for(Z=16;0<Z;--Z)s(C,M,C[M-1],16),M+=32}function ja(C,M,Z){var ce;for(ce=0;16>ce;++ce)s(M,Z+32*ce,C,16)}function Xn(C,M){var Z,ce=16;for(Z=0;16>Z;++Z)ce+=C[M-1+32*Z]+C[M+Z-32];ja(ce>>5,C,M)}function bn(C,M){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=C[M-1+32*Z];ja(ce>>4,C,M)}function Ar(C,M){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=C[M+Z-32];ja(ce>>4,C,M)}function tn(C,M){ja(128,C,M)}function lr(C,M,Z){return C+2*M+Z+2>>2}function Hn(C,M){var Z,ce=M-32;for(ce=new Uint8Array([lr(C[ce-1],C[ce+0],C[ce+1]),lr(C[ce+0],C[ce+1],C[ce+2]),lr(C[ce+1],C[ce+2],C[ce+3]),lr(C[ce+2],C[ce+3],C[ce+4])]),Z=0;4>Z;++Z)a(C,M+32*Z,ce,0,ce.length)}function Wr(C,M){var Z=C[M-1],ce=C[M-1+32],ye=C[M-1+64],Ee=C[M-1+96];le(C,M+0,16843009*lr(C[M-1-32],Z,ce)),le(C,M+32,16843009*lr(Z,ce,ye)),le(C,M+64,16843009*lr(ce,ye,Ee)),le(C,M+96,16843009*lr(ye,Ee,Ee))}function Ra(C,M){var Z,ce=4;for(Z=0;4>Z;++Z)ce+=C[M+Z-32]+C[M-1+32*Z];for(ce>>=3,Z=0;4>Z;++Z)s(C,M+32*Z,ce,4)}function Wi(C,M){var Z=C[M-1+0],ce=C[M-1+32],ye=C[M-1+64],Ee=C[M-1-32],De=C[M+0-32],Le=C[M+1-32],qe=C[M+2-32],Ve=C[M+3-32];C[M+0+96]=lr(ce,ye,C[M-1+96]),C[M+1+96]=C[M+0+64]=lr(Z,ce,ye),C[M+2+96]=C[M+1+64]=C[M+0+32]=lr(Ee,Z,ce),C[M+3+96]=C[M+2+64]=C[M+1+32]=C[M+0+0]=lr(De,Ee,Z),C[M+3+64]=C[M+2+32]=C[M+1+0]=lr(Le,De,Ee),C[M+3+32]=C[M+2+0]=lr(qe,Le,De),C[M+3+0]=lr(Ve,qe,Le)}function ui(C,M){var Z=C[M+1-32],ce=C[M+2-32],ye=C[M+3-32],Ee=C[M+4-32],De=C[M+5-32],Le=C[M+6-32],qe=C[M+7-32];C[M+0+0]=lr(C[M+0-32],Z,ce),C[M+1+0]=C[M+0+32]=lr(Z,ce,ye),C[M+2+0]=C[M+1+32]=C[M+0+64]=lr(ce,ye,Ee),C[M+3+0]=C[M+2+32]=C[M+1+64]=C[M+0+96]=lr(ye,Ee,De),C[M+3+32]=C[M+2+64]=C[M+1+96]=lr(Ee,De,Le),C[M+3+64]=C[M+2+96]=lr(De,Le,qe),C[M+3+96]=lr(Le,qe,qe)}function hs(C,M){var Z=C[M-1+0],ce=C[M-1+32],ye=C[M-1+64],Ee=C[M-1-32],De=C[M+0-32],Le=C[M+1-32],qe=C[M+2-32],Ve=C[M+3-32];C[M+0+0]=C[M+1+64]=Ee+De+1>>1,C[M+1+0]=C[M+2+64]=De+Le+1>>1,C[M+2+0]=C[M+3+64]=Le+qe+1>>1,C[M+3+0]=qe+Ve+1>>1,C[M+0+96]=lr(ye,ce,Z),C[M+0+64]=lr(ce,Z,Ee),C[M+0+32]=C[M+1+96]=lr(Z,Ee,De),C[M+1+32]=C[M+2+96]=lr(Ee,De,Le),C[M+2+32]=C[M+3+96]=lr(De,Le,qe),C[M+3+32]=lr(Le,qe,Ve)}function ms(C,M){var Z=C[M+0-32],ce=C[M+1-32],ye=C[M+2-32],Ee=C[M+3-32],De=C[M+4-32],Le=C[M+5-32],qe=C[M+6-32],Ve=C[M+7-32];C[M+0+0]=Z+ce+1>>1,C[M+1+0]=C[M+0+64]=ce+ye+1>>1,C[M+2+0]=C[M+1+64]=ye+Ee+1>>1,C[M+3+0]=C[M+2+64]=Ee+De+1>>1,C[M+0+32]=lr(Z,ce,ye),C[M+1+32]=C[M+0+96]=lr(ce,ye,Ee),C[M+2+32]=C[M+1+96]=lr(ye,Ee,De),C[M+3+32]=C[M+2+96]=lr(Ee,De,Le),C[M+3+64]=lr(De,Le,qe),C[M+3+96]=lr(Le,qe,Ve)}function Ai(C,M){var Z=C[M-1+0],ce=C[M-1+32],ye=C[M-1+64],Ee=C[M-1+96];C[M+0+0]=Z+ce+1>>1,C[M+2+0]=C[M+0+32]=ce+ye+1>>1,C[M+2+32]=C[M+0+64]=ye+Ee+1>>1,C[M+1+0]=lr(Z,ce,ye),C[M+3+0]=C[M+1+32]=lr(ce,ye,Ee),C[M+3+32]=C[M+1+64]=lr(ye,Ee,Ee),C[M+3+64]=C[M+2+64]=C[M+0+96]=C[M+1+96]=C[M+2+96]=C[M+3+96]=Ee}function pl(C,M){var Z=C[M-1+0],ce=C[M-1+32],ye=C[M-1+64],Ee=C[M-1+96],De=C[M-1-32],Le=C[M+0-32],qe=C[M+1-32],Ve=C[M+2-32];C[M+0+0]=C[M+2+32]=Z+De+1>>1,C[M+0+32]=C[M+2+64]=ce+Z+1>>1,C[M+0+64]=C[M+2+96]=ye+ce+1>>1,C[M+0+96]=Ee+ye+1>>1,C[M+3+0]=lr(Le,qe,Ve),C[M+2+0]=lr(De,Le,qe),C[M+1+0]=C[M+3+32]=lr(Z,De,Le),C[M+1+32]=C[M+3+64]=lr(ce,Z,De),C[M+1+64]=C[M+3+96]=lr(ye,ce,Z),C[M+1+96]=lr(Ee,ye,ce)}function jd(C,M){var Z;for(Z=0;8>Z;++Z)a(C,M+32*Z,C,M-32,8)}function xo(C,M){var Z;for(Z=0;8>Z;++Z)s(C,M,C[M-1],8),M+=32}function Vs(C,M,Z){var ce;for(ce=0;8>ce;++ce)s(M,Z+32*ce,C,8)}function fi(C,M){var Z,ce=8;for(Z=0;8>Z;++Z)ce+=C[M+Z-32]+C[M-1+32*Z];Vs(ce>>4,C,M)}function Fo(C,M){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=C[M+Z-32];Vs(ce>>3,C,M)}function Mo(C,M){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=C[M-1+32*Z];Vs(ce>>3,C,M)}function Pl(C,M){Vs(128,C,M)}function Ss(C,M,Z){var ce=C[M-Z],ye=C[M+0],Ee=3*(ye-ce)+Ho[1020+C[M-2*Z]-C[M+Z]],De=Ul[112+(Ee+4>>3)];C[M-Z]=xi[255+ce+Ul[112+(Ee+3>>3)]],C[M+0]=xi[255+ye-De]}function lc(C,M,Z,ce){var ye=C[M+0],Ee=C[M+Z];return gi[255+C[M-2*Z]-C[M-Z]]>ce||gi[255+Ee-ye]>ce}function Il(C,M,Z,ce){return 4*gi[255+C[M-Z]-C[M+0]]+gi[255+C[M-2*Z]-C[M+Z]]<=ce}function cc(C,M,Z,ce,ye){var Ee=C[M-3*Z],De=C[M-2*Z],Le=C[M-Z],qe=C[M+0],Ve=C[M+Z],nt=C[M+2*Z],Nt=C[M+3*Z];return 4*gi[255+Le-qe]+gi[255+De-Ve]>ce?0:gi[255+C[M-4*Z]-Ee]<=ye&&gi[255+Ee-De]<=ye&&gi[255+De-Le]<=ye&&gi[255+Nt-nt]<=ye&&gi[255+nt-Ve]<=ye&&gi[255+Ve-qe]<=ye}function hi(C,M,Z,ce){var ye=2*ce+1;for(ce=0;16>ce;++ce)Il(C,M+ce,Z,ye)&&Ss(C,M+ce,Z)}function Gs(C,M,Z,ce){var ye=2*ce+1;for(ce=0;16>ce;++ce)Il(C,M+ce*Z,1,ye)&&Ss(C,M+ce*Z,1)}function Ks(C,M,Z,ce){var ye;for(ye=3;0<ye;--ye)hi(C,M+=4*Z,Z,ce)}function kd(C,M,Z,ce){var ye;for(ye=3;0<ye;--ye)Gs(C,M+=4,Z,ce)}function mi(C,M,Z,ce,ye,Ee,De,Le){for(Ee=2*Ee+1;0<ye--;){if(cc(C,M,Z,Ee,De))if(lc(C,M,Z,Le))Ss(C,M,Z);else{var qe=C,Ve=M,nt=Z,Nt=qe[Ve-2*nt],kt=qe[Ve-nt],pt=qe[Ve+0],Vt=qe[Ve+nt],Pt=qe[Ve+2*nt],lt=27*(Ft=Ho[1020+3*(pt-kt)+Ho[1020+Nt-Vt]])+63>>7,st=18*Ft+63>>7,Ft=9*Ft+63>>7;qe[Ve-3*nt]=xi[255+qe[Ve-3*nt]+Ft],qe[Ve-2*nt]=xi[255+Nt+st],qe[Ve-nt]=xi[255+kt+lt],qe[Ve+0]=xi[255+pt-lt],qe[Ve+nt]=xi[255+Vt-st],qe[Ve+2*nt]=xi[255+Pt-Ft]}M+=ce}}function Xs(C,M,Z,ce,ye,Ee,De,Le){for(Ee=2*Ee+1;0<ye--;){if(cc(C,M,Z,Ee,De))if(lc(C,M,Z,Le))Ss(C,M,Z);else{var qe=C,Ve=M,nt=Z,Nt=qe[Ve-nt],kt=qe[Ve+0],pt=qe[Ve+nt],Vt=Ul[112+((Pt=3*(kt-Nt))+4>>3)],Pt=Ul[112+(Pt+3>>3)],lt=Vt+1>>1;qe[Ve-2*nt]=xi[255+qe[Ve-2*nt]+lt],qe[Ve-nt]=xi[255+Nt+Pt],qe[Ve+0]=xi[255+kt-Vt],qe[Ve+nt]=xi[255+pt-lt]}M+=ce}}function Ro(C,M,Z,ce,ye,Ee){mi(C,M,Z,1,16,ce,ye,Ee)}function Ya(C,M,Z,ce,ye,Ee){mi(C,M,1,Z,16,ce,ye,Ee)}function Ei(C,M,Z,ce,ye,Ee){var De;for(De=3;0<De;--De)Xs(C,M+=4*Z,Z,1,16,ce,ye,Ee)}function Vi(C,M,Z,ce,ye,Ee){var De;for(De=3;0<De;--De)Xs(C,M+=4,1,Z,16,ce,ye,Ee)}function dc(C,M,Z,ce,ye,Ee,De,Le){mi(C,M,ye,1,8,Ee,De,Le),mi(Z,ce,ye,1,8,Ee,De,Le)}function Dl(C,M,Z,ce,ye,Ee,De,Le){mi(C,M,1,ye,8,Ee,De,Le),mi(Z,ce,1,ye,8,Ee,De,Le)}function go(C,M,Z,ce,ye,Ee,De,Le){Xs(C,M+4*ye,ye,1,8,Ee,De,Le),Xs(Z,ce+4*ye,ye,1,8,Ee,De,Le)}function Dn(C,M,Z,ce,ye,Ee,De,Le){Xs(C,M+4,1,ye,8,Ee,De,Le),Xs(Z,ce+4,1,ye,8,Ee,De,Le)}function _s(){this.ba=new Or,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ki(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Lc(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new _}function uc(){this.xb=this.a=0,this.l=new ea,this.ca=new Or,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Lc,this.ab=0,this.gc=o(4,Ki),this.Oc=0}function Ll(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ea,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ua(C,M,Z,ce,ye,Ee,De){for(C=C==null?0:C[M+0],M=0;M<De;++M)ye[Ee+M]=C+Z[ce+M]&255,C=ye[Ee+M]}function Sd(C,M,Z,ce,ye,Ee,De){var Le;if(C==null)ua(null,null,Z,ce,ye,Ee,De);else for(Le=0;Le<De;++Le)ye[Ee+Le]=C[M+Le]+Z[ce+Le]&255}function xl(C,M,Z,ce,ye,Ee,De){if(C==null)ua(null,null,Z,ce,ye,Ee,De);else{var Le,qe=C[M+0],Ve=qe,nt=qe;for(Le=0;Le<De;++Le)Ve=nt+(qe=C[M+Le])-Ve,nt=Z[ce+Le]+(-256&Ve?0>Ve?0:255:Ve)&255,Ve=qe,ye[Ee+Le]=nt}}function Fc(C,M,Z,ce){var ye=M.width,Ee=M.o;if(t(C!=null&&M!=null),0>Z||0>=ce||Z+ce>Ee)return null;if(!C.Cc){if(C.ga==null){var De;if(C.ga=new Ll,(De=C.ga==null)||(De=M.width*M.o,t(C.Gb.length==0),C.Gb=i(De),C.Uc=0,C.Gb==null?De=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,De=1),De=!De),!De){De=C.ga;var Le=C.Fa,qe=C.P,Ve=C.qc,nt=C.mb,Nt=C.nb,kt=qe+1,pt=Ve-1,Vt=De.l;if(t(Le!=null&&nt!=null&&M!=null),as[0]=null,as[1]=ua,as[2]=Sd,as[3]=xl,De.ca=nt,De.tb=Nt,De.c=M.width,De.i=M.height,t(0<De.c&&0<De.i),1>=Ve)M=0;else if(De.$a=Le[qe+0]>>0&3,De.Z=Le[qe+0]>>2&3,De.Lc=Le[qe+0]>>4&3,qe=Le[qe+0]>>6&3,0>De.$a||1<De.$a||4<=De.Z||1<De.Lc||qe)M=0;else if(Vt.put=Sr,Vt.ac=Xr,Vt.bc=pn,Vt.ma=De,Vt.width=M.width,Vt.height=M.height,Vt.Da=M.Da,Vt.v=M.v,Vt.va=M.va,Vt.j=M.j,Vt.o=M.o,De.$a)e:{t(De.$a==1),M=ht();t:for(;;){if(M==null){M=0;break e}if(t(De!=null),De.mc=M,M.c=De.c,M.i=De.i,M.l=De.l,M.l.ma=De,M.l.width=De.c,M.l.height=De.i,M.a=0,re(M.m,Le,kt,pt),!ct(De.c,De.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Be(M.s)?(De.ic=1,Le=M.c*M.i,M.Ta=null,M.Ua=0,M.V=i(Le),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(De.ic=0,M=xt(M,De.c)),!M))break t;M=1;break e}De.mc=null,M=0}else M=pt>=De.c*De.i;De=!M}if(De)return null;C.ga.Lc!=1?C.Ga=0:ce=Ee-Z}t(C.ga!=null),t(Z+ce<=Ee);e:{if(M=(Le=C.ga).c,Ee=Le.l.o,Le.$a==0){if(kt=C.rc,pt=C.Vc,Vt=C.Fa,qe=C.P+1+Z*M,Ve=C.mb,nt=C.nb+Z*M,t(qe<=C.P+C.qc),Le.Z!=0)for(t(as[Le.Z]!=null),De=0;De<ce;++De)as[Le.Z](kt,pt,Vt,qe,Ve,nt,M),kt=Ve,pt=nt,nt+=M,qe+=M;else for(De=0;De<ce;++De)a(Ve,nt,Vt,qe,M),kt=Ve,pt=nt,nt+=M,qe+=M;C.rc=kt,C.Vc=pt}else{if(t(Le.mc!=null),M=Z+ce,t((De=Le.mc)!=null),t(M<=De.i),De.C>=M)M=1;else if(Le.ic||Xe(),Le.ic){Le=De.V,kt=De.Ba,pt=De.c;var Pt=De.i,lt=(Vt=1,qe=De.$/pt,Ve=De.$%pt,nt=De.m,Nt=De.s,De.$),st=pt*Pt,Ft=pt*M,Lt=Nt.wc,$t=lt<Ft?Gr(Nt,Ve,qe):null;t(lt<=st),t(M<=Pt),t(Be(Nt));t:for(;;){for(;!nt.h&&lt<Ft;){if(Ve&Lt||($t=Gr(Nt,Ve,qe)),t($t!=null),K(nt),256>(Pt=sn($t.G[0],$t.H[0],nt)))Le[kt+lt]=Pt,++lt,++Ve>=pt&&(Ve=0,++qe<=M&&!(qe%16)&&Ce(De,qe));else{if(!(280>Pt)){Vt=0;break t}Pt=On(Pt-256,nt);var hr,or=sn($t.G[4],$t.H[4],nt);if(K(nt),!(lt>=(or=Hr(pt,or=On(or,nt)))&&st-lt>=Pt)){Vt=0;break t}for(hr=0;hr<Pt;++hr)Le[kt+lt+hr]=Le[kt+lt+hr-or];for(lt+=Pt,Ve+=Pt;Ve>=pt;)Ve-=pt,++qe<=M&&!(qe%16)&&Ce(De,qe);lt<Ft&&Ve&Lt&&($t=Gr(Nt,Ve,qe))}t(nt.h==V(nt))}Ce(De,qe>M?M:qe);break t}!Vt||nt.h&&lt<st?(Vt=0,De.a=nt.h?5:3):De.$=lt,M=Vt}else M=Re(De,De.V,De.Ba,De.c,De.i,M,ve);if(!M){ce=0;break e}}Z+ce>=Ee&&(C.Cc=1),ce=1}if(!ce)return null;if(C.Cc&&((ce=C.ga)!=null&&(ce.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+Z*ye}function G(C,M,Z,ce,ye,Ee){for(;0<ye--;){var De,Le=C,qe=M+(Z?1:0),Ve=C,nt=M+(Z?0:3);for(De=0;De<ce;++De){var Nt=Ve[nt+4*De];Nt!=255&&(Nt*=32897,Le[qe+4*De+0]=Le[qe+4*De+0]*Nt>>23,Le[qe+4*De+1]=Le[qe+4*De+1]*Nt>>23,Le[qe+4*De+2]=Le[qe+4*De+2]*Nt>>23)}M+=Ee}}function ke(C,M,Z,ce,ye){for(;0<ce--;){var Ee;for(Ee=0;Ee<Z;++Ee){var De=C[M+2*Ee+0],Le=15&(Ve=C[M+2*Ee+1]),qe=4369*Le,Ve=(240&Ve|Ve>>4)*qe>>16;C[M+2*Ee+0]=(240&De|De>>4)*qe>>16&240|(15&De|De<<4)*qe>>16>>4&15,C[M+2*Ee+1]=240&Ve|Le}M+=ye}}function ne(C,M,Z,ce,ye,Ee,De,Le){var qe,Ve,nt=255;for(Ve=0;Ve<ye;++Ve){for(qe=0;qe<ce;++qe){var Nt=C[M+qe];Ee[De+4*qe]=Nt,nt&=Nt}M+=Z,De+=Le}return nt!=255}function We(C,M,Z,ce,ye){var Ee;for(Ee=0;Ee<ye;++Ee)Z[ce+Ee]=C[M+Ee]>>8}function Xe(){vs=G,ta=ke,Yn=ne,_n=We}function gt(C,M,Z){P[C]=function(ce,ye,Ee,De,Le,qe,Ve,nt,Nt,kt,pt,Vt,Pt,lt,st,Ft,Lt){var $t,hr=Lt-1>>1,or=Le[qe+0]|Ve[nt+0]<<16,Vr=Nt[kt+0]|pt[Vt+0]<<16;t(ce!=null);var xr=3*or+Vr+131074>>2;for(M(ce[ye+0],255&xr,xr>>16,Pt,lt),Ee!=null&&(xr=3*Vr+or+131074>>2,M(Ee[De+0],255&xr,xr>>16,st,Ft)),$t=1;$t<=hr;++$t){var wn=Le[qe+$t]|Ve[nt+$t]<<16,Tn=Nt[kt+$t]|pt[Vt+$t]<<16,Cn=or+wn+Vr+Tn+524296,ln=Cn+2*(wn+Vr)>>3;xr=ln+or>>1,or=(Cn=Cn+2*(or+Tn)>>3)+wn>>1,M(ce[ye+2*$t-1],255&xr,xr>>16,Pt,lt+(2*$t-1)*Z),M(ce[ye+2*$t-0],255&or,or>>16,Pt,lt+(2*$t-0)*Z),Ee!=null&&(xr=Cn+Vr>>1,or=ln+Tn>>1,M(Ee[De+2*$t-1],255&xr,xr>>16,st,Ft+(2*$t-1)*Z),M(Ee[De+2*$t+0],255&or,or>>16,st,Ft+(2*$t+0)*Z)),or=wn,Vr=Tn}1&Lt||(xr=3*or+Vr+131074>>2,M(ce[ye+Lt-1],255&xr,xr>>16,Pt,lt+(Lt-1)*Z),Ee!=null&&(xr=3*Vr+or+131074>>2,M(Ee[De+Lt-1],255&xr,xr>>16,st,Ft+(Lt-1)*Z)))}}function jt(){eo[Xu]=wp,eo[fc]=zc,eo[Xh]=Hf,eo[pu]=ql,eo[Yu]=Hc,eo[fa]=rf,eo[qf]=Wf,eo[Uc]=zc,eo[Od]=ql,eo[xu]=Hc,eo[Ju]=rf}function Tt(C){return C&-16384?0>C?0:255:C>>Wc}function br(C,M){return Tt((19077*C>>8)+(26149*M>>8)-14234)}function qr(C,M,Z){return Tt((19077*C>>8)-(6419*M>>8)-(13320*Z>>8)+8708)}function Kr(C,M){return Tt((19077*C>>8)+(33050*M>>8)-17685)}function Sn(C,M,Z,ce,ye){ce[ye+0]=br(C,Z),ce[ye+1]=qr(C,M,Z),ce[ye+2]=Kr(C,M)}function Ba(C,M,Z,ce,ye){ce[ye+0]=Kr(C,M),ce[ye+1]=qr(C,M,Z),ce[ye+2]=br(C,Z)}function Ua(C,M,Z,ce,ye){var Ee=qr(C,M,Z);M=Ee<<3&224|Kr(C,M)>>3,ce[ye+0]=248&br(C,Z)|Ee>>5,ce[ye+1]=M}function ps(C,M,Z,ce,ye){var Ee=240&Kr(C,M)|15;ce[ye+0]=240&br(C,Z)|qr(C,M,Z)>>4,ce[ye+1]=Ee}function Ys(C,M,Z,ce,ye){ce[ye+0]=255,Sn(C,M,Z,ce,ye+1)}function Fs(C,M,Z,ce,ye){Ba(C,M,Z,ce,ye),ce[ye+3]=255}function Bo(C,M,Z,ce,ye){Sn(C,M,Z,ce,ye),ce[ye+3]=255}function Js(C,M){return 0>C?0:C>M?M:C}function vo(C,M,Z){P[C]=function(ce,ye,Ee,De,Le,qe,Ve,nt,Nt){for(var kt=nt+(-2&Nt)*Z;nt!=kt;)M(ce[ye+0],Ee[De+0],Le[qe+0],Ve,nt),M(ce[ye+1],Ee[De+0],Le[qe+0],Ve,nt+Z),ye+=2,++De,++qe,nt+=2*Z;1&Nt&&M(ce[ye+0],Ee[De+0],Le[qe+0],Ve,nt)}}function bo(C,M,Z){return Z==0?C==0?M==0?6:5:M==0?4:0:Z}function uu(C,M,Z,ce,ye){switch(C>>>30){case 3:vl(M,Z,ce,ye,0);break;case 2:Wn(M,Z,ce,ye);break;case 1:Qs(M,Z,ce,ye)}}function fu(C,M){var Z,ce,ye=M.M,Ee=M.Nb,De=C.oc,Le=C.pc+40,qe=C.oc,Ve=C.pc+584,nt=C.oc,Nt=C.pc+600;for(Z=0;16>Z;++Z)De[Le+32*Z-1]=129;for(Z=0;8>Z;++Z)qe[Ve+32*Z-1]=129,nt[Nt+32*Z-1]=129;for(0<ye?De[Le-1-32]=qe[Ve-1-32]=nt[Nt-1-32]=129:(s(De,Le-32-1,127,21),s(qe,Ve-32-1,127,9),s(nt,Nt-32-1,127,9)),ce=0;ce<C.za;++ce){var kt=M.ya[M.aa+ce];if(0<ce){for(Z=-1;16>Z;++Z)a(De,Le+32*Z-4,De,Le+32*Z+12,4);for(Z=-1;8>Z;++Z)a(qe,Ve+32*Z-4,qe,Ve+32*Z+4,4),a(nt,Nt+32*Z-4,nt,Nt+32*Z+4,4)}var pt=C.Gd,Vt=C.Hd+ce,Pt=kt.ad,lt=kt.Hc;if(0<ye&&(a(De,Le-32,pt[Vt].y,0,16),a(qe,Ve-32,pt[Vt].f,0,8),a(nt,Nt-32,pt[Vt].ea,0,8)),kt.Za){var st=De,Ft=Le-32+16;for(0<ye&&(ce>=C.za-1?s(st,Ft,pt[Vt].y[15],4):a(st,Ft,pt[Vt+1].y,0,4)),Z=0;4>Z;Z++)st[Ft+128+Z]=st[Ft+256+Z]=st[Ft+384+Z]=st[Ft+0+Z];for(Z=0;16>Z;++Z,lt<<=2)st=De,Ft=Le+U0[Z],No[kt.Ob[Z]](st,Ft),uu(lt,Pt,16*+Z,st,Ft)}else if(st=bo(ce,ye,kt.Ob[0]),ns[st](De,Le),lt!=0)for(Z=0;16>Z;++Z,lt<<=2)uu(lt,Pt,16*+Z,De,Le+U0[Z]);for(Z=kt.Gc,st=bo(ce,ye,kt.Dd),Pi[st](qe,Ve),Pi[st](nt,Nt),lt=Pt,st=qe,Ft=Ve,255&(kt=Z>>0)&&(170&kt?Ml(lt,256,st,Ft):Ti(lt,256,st,Ft)),kt=nt,lt=Nt,255&(Z>>=8)&&(170&Z?Ml(Pt,320,kt,lt):Ti(Pt,320,kt,lt)),ye<C.Ub-1&&(a(pt[Vt].y,0,De,Le+480,16),a(pt[Vt].f,0,qe,Ve+224,8),a(pt[Vt].ea,0,nt,Nt+224,8)),Z=8*Ee*C.B,pt=C.sa,Vt=C.ta+16*ce+16*Ee*C.R,Pt=C.qa,kt=C.ra+8*ce+Z,lt=C.Ha,st=C.Ia+8*ce+Z,Z=0;16>Z;++Z)a(pt,Vt+Z*C.R,De,Le+32*Z,16);for(Z=0;8>Z;++Z)a(Pt,kt+Z*C.B,qe,Ve+32*Z,8),a(lt,st+Z*C.B,nt,Nt+32*Z,8)}}function Mc(C,M,Z,ce,ye,Ee,De,Le,qe){var Ve=[0],nt=[0],Nt=0,kt=qe!=null?qe.kd:0,pt=qe??new Gi;if(C==null||12>Z)return 7;pt.data=C,pt.w=M,pt.ha=Z,M=[M],Z=[Z],pt.gb=[pt.gb];e:{var Vt=M,Pt=Z,lt=pt.gb;if(t(C!=null),t(Pt!=null),t(lt!=null),lt[0]=0,12<=Pt[0]&&!r(C,Vt[0],"RIFF")){if(r(C,Vt[0]+8,"WEBP")){lt=3;break e}var st=Ue(C,Vt[0]+4);if(12>st||4294967286<st){lt=3;break e}if(kt&&st>Pt[0]-8){lt=7;break e}lt[0]=st,Vt[0]+=12,Pt[0]-=12}lt=0}if(lt!=0)return lt;for(st=0<pt.gb[0],Z=Z[0];;){e:{var Ft=C;Pt=M,lt=Z;var Lt=Ve,$t=nt,hr=Vt=[0];if((xr=Nt=[Nt])[0]=0,8>lt[0])lt=7;else{if(!r(Ft,Pt[0],"VP8X")){if(Ue(Ft,Pt[0]+4)!=10){lt=3;break e}if(18>lt[0]){lt=7;break e}var or=Ue(Ft,Pt[0]+8),Vr=1+he(Ft,Pt[0]+12);if(2147483648<=Vr*(Ft=1+he(Ft,Pt[0]+15))){lt=3;break e}hr!=null&&(hr[0]=or),Lt!=null&&(Lt[0]=Vr),$t!=null&&($t[0]=Ft),Pt[0]+=18,lt[0]-=18,xr[0]=1}lt=0}}if(Nt=Nt[0],Vt=Vt[0],lt!=0)return lt;if(Pt=!!(2&Vt),!st&&Nt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Vt)),De!=null&&(De[0]=Pt),Le!=null&&(Le[0]=0),De=Ve[0],Vt=nt[0],Nt&&Pt&&qe==null){lt=0;break}if(4>Z){lt=7;break}if(st&&Nt||!st&&!Nt&&!r(C,M[0],"ALPH")){Z=[Z],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{or=C,lt=M,st=Z;var xr=pt.gb;Lt=pt.na,$t=pt.P,hr=pt.Sa,Vr=22,t(or!=null),t(st!=null),Ft=lt[0];var wn=st[0];for(t(Lt!=null),t(hr!=null),Lt[0]=null,$t[0]=null,hr[0]=0;;){if(lt[0]=Ft,st[0]=wn,8>wn){lt=7;break e}var Tn=Ue(or,Ft+4);if(4294967286<Tn){lt=3;break e}var Cn=8+Tn+1&-2;if(Vr+=Cn,0<xr&&Vr>xr){lt=3;break e}if(!r(or,Ft,"VP8 ")||!r(or,Ft,"VP8L")){lt=0;break e}if(wn[0]<Cn){lt=7;break e}r(or,Ft,"ALPH")||(Lt[0]=or,$t[0]=Ft+8,hr[0]=Tn),Ft+=Cn,wn-=Cn}}if(Z=Z[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],lt!=0)break}Z=[Z],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(xr=C,lt=M,st=Z,Lt=pt.gb[0],$t=pt.Ja,hr=pt.xa,or=lt[0],Ft=!r(xr,or,"VP8 "),Vr=!r(xr,or,"VP8L"),t(xr!=null),t(st!=null),t($t!=null),t(hr!=null),8>st[0])lt=7;else{if(Ft||Vr){if(xr=Ue(xr,or+4),12<=Lt&&xr>Lt-12){lt=3;break e}if(kt&&xr>st[0]-8){lt=7;break e}$t[0]=xr,lt[0]+=8,st[0]-=8,hr[0]=Vr}else hr[0]=5<=st[0]&&xr[or+0]==47&&!(xr[or+4]>>5),$t[0]=st[0];lt=0}if(Z=Z[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],M=M[0],lt!=0)break;if(4294967286<pt.Ja)return 3;if(Le==null||Pt||(Le[0]=pt.xa?2:1),De=[De],Vt=[Vt],pt.xa){if(5>Z){lt=7;break}Le=De,kt=Vt,Pt=Ee,C==null||5>Z?C=0:5<=Z&&C[M+0]==47&&!(C[M+4]>>5)?(st=[0],xr=[0],Lt=[0],re($t=new O,C,M,Z),rr($t,st,xr,Lt)?(Le!=null&&(Le[0]=st[0]),kt!=null&&(kt[0]=xr[0]),Pt!=null&&(Pt[0]=Lt[0]),C=1):C=0):C=0}else{if(10>Z){lt=7;break}Le=Vt,C==null||10>Z||!po(C,M+3,Z-3)?C=0:(kt=C[M+0]|C[M+1]<<8|C[M+2]<<16,Pt=16383&(C[M+7]<<8|C[M+6]),C=16383&(C[M+9]<<8|C[M+8]),1&kt||3<(kt>>1&7)||!(kt>>4&1)||kt>>5>=pt.Ja||!Pt||!C?C=0:(De&&(De[0]=Pt),Le&&(Le[0]=C),C=1))}if(!C||(De=De[0],Vt=Vt[0],Nt&&(Ve[0]!=De||nt[0]!=Vt)))return 3;qe!=null&&(qe[0]=pt,qe.offset=M-qe.w,t(4294967286>M-qe.w),t(qe.offset==qe.ha-Z));break}return lt==0||lt==7&&Nt&&qe==null?(Ee!=null&&(Ee[0]|=pt.na!=null&&0<pt.na.length),ce!=null&&(ce[0]=De),ye!=null&&(ye[0]=Vt),0):lt}function _d(C,M,Z){var ce=M.width,ye=M.height,Ee=0,De=0,Le=ce,qe=ye;if(M.Da=C!=null&&0<C.Da,M.Da&&(Le=C.cd,qe=C.bd,Ee=C.v,De=C.j,11>Z||(Ee&=-2,De&=-2),0>Ee||0>De||0>=Le||0>=qe||Ee+Le>ce||De+qe>ye))return 0;if(M.v=Ee,M.j=De,M.va=Ee+Le,M.o=De+qe,M.U=Le,M.T=qe,M.da=C!=null&&0<C.da,M.da){if(!Pe(Le,qe,Z=[C.ib],Ee=[C.hb]))return 0;M.ib=Z[0],M.hb=Ee[0]}return M.ob=C!=null&&C.ob,M.Kb=C==null||!C.Sd,M.da&&(M.ob=M.ib<3*ce/4&&M.hb<3*ye/4,M.Kb=0),1}function Cd(C){if(C==null)return 2;if(11>C.S){var M=C.f.RGBA;M.fb+=(C.height-1)*M.A,M.A=-M.A}else M=C.f.kb,C=C.height,M.O+=(C-1)*M.fa,M.fa=-M.fa,M.N+=(C-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(C-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(C-1)*M.lb,M.lb=-M.lb);return 0}function Ad(C,M,Z,ce){if(ce==null||0>=C||0>=M)return 2;if(Z!=null){if(Z.Da){var ye=Z.cd,Ee=Z.bd,De=-2&Z.v,Le=-2&Z.j;if(0>De||0>Le||0>=ye||0>=Ee||De+ye>C||Le+Ee>M)return 2;C=ye,M=Ee}if(Z.da){if(!Pe(C,M,ye=[Z.ib],Ee=[Z.hb]))return 2;C=ye[0],M=Ee[0]}}ce.width=C,ce.height=M;e:{var qe=ce.width,Ve=ce.height;if(C=ce.S,0>=qe||0>=Ve||!(C>=Xu&&13>C))C=2;else{if(0>=ce.Rd&&ce.sd==null){De=Ee=ye=M=0;var nt=(Le=qe*Ia[C])*Ve;if(11>C||(Ee=(Ve+1)/2*(M=(qe+1)/2),C==12&&(De=(ye=qe)*Ve)),(Ve=i(nt+2*Ee+De))==null){C=1;break e}ce.sd=Ve,11>C?((qe=ce.f.RGBA).eb=Ve,qe.fb=0,qe.A=Le,qe.size=nt):((qe=ce.f.kb).y=Ve,qe.O=0,qe.fa=Le,qe.Fd=nt,qe.f=Ve,qe.N=0+nt,qe.Ab=M,qe.Cd=Ee,qe.ea=Ve,qe.W=0+nt+Ee,qe.Db=M,qe.Ed=Ee,C==12&&(qe.F=Ve,qe.J=0+nt+2*Ee),qe.Tc=De,qe.lb=ye)}if(M=1,ye=ce.S,Ee=ce.width,De=ce.height,ye>=Xu&&13>ye)if(11>ye)C=ce.f.RGBA,M&=(Le=Math.abs(C.A))*(De-1)+Ee<=C.size,M&=Le>=Ee*Ia[ye],M&=C.eb!=null;else{C=ce.f.kb,Le=(Ee+1)/2,nt=(De+1)/2,qe=Math.abs(C.fa),Ve=Math.abs(C.Ab);var Nt=Math.abs(C.Db),kt=Math.abs(C.lb),pt=kt*(De-1)+Ee;M&=qe*(De-1)+Ee<=C.Fd,M&=Ve*(nt-1)+Le<=C.Cd,M=(M&=Nt*(nt-1)+Le<=C.Ed)&qe>=Ee&Ve>=Le&Nt>=Le,M&=C.y!=null,M&=C.f!=null,M&=C.ea!=null,ye==12&&(M&=kt>=Ee,M&=pt<=C.Tc,M&=C.F!=null)}else M=0;C=M?0:2}}return C!=0||Z!=null&&Z.fd&&(C=Cd(ce)),C}var ka=64,yo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gl=24,Ja=32,Rc=8,on=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ue("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(C){return C},P.Predictor2=function(C,M,Z){return M[Z+0]},P.Predictor3=function(C,M,Z){return M[Z+1]},P.Predictor4=function(C,M,Z){return M[Z-1]},P.Predictor5=function(C,M,Z){return Ae(Ae(C,M[Z+1]),M[Z+0])},P.Predictor6=function(C,M,Z){return Ae(C,M[Z-1])},P.Predictor7=function(C,M,Z){return Ae(C,M[Z+0])},P.Predictor8=function(C,M,Z){return Ae(M[Z-1],M[Z+0])},P.Predictor9=function(C,M,Z){return Ae(M[Z+0],M[Z+1])},P.Predictor10=function(C,M,Z){return Ae(Ae(C,M[Z-1]),Ae(M[Z+0],M[Z+1]))},P.Predictor11=function(C,M,Z){var ce=M[Z+0];return 0>=fe(ce>>24&255,C>>24&255,(M=M[Z-1])>>24&255)+fe(ce>>16&255,C>>16&255,M>>16&255)+fe(ce>>8&255,C>>8&255,M>>8&255)+fe(255&ce,255&C,255&M)?ce:C},P.Predictor12=function(C,M,Z){var ce=M[Z+0];return(Qe((C>>24&255)+(ce>>24&255)-((M=M[Z-1])>>24&255))<<24|Qe((C>>16&255)+(ce>>16&255)-(M>>16&255))<<16|Qe((C>>8&255)+(ce>>8&255)-(M>>8&255))<<8|Qe((255&C)+(255&ce)-(255&M)))>>>0},P.Predictor13=function(C,M,Z){var ce=M[Z-1];return(ge((C=Ae(C,M[Z+0]))>>24&255,ce>>24&255)<<24|ge(C>>16&255,ce>>16&255)<<16|ge(C>>8&255,ce>>8&255)<<8|ge(C>>0&255,ce>>0&255))>>>0};var ts=P.PredictorAdd0;P.PredictorAdd1=_e,ue("Predictor2","PredictorAdd2"),ue("Predictor3","PredictorAdd3"),ue("Predictor4","PredictorAdd4"),ue("Predictor5","PredictorAdd5"),ue("Predictor6","PredictorAdd6"),ue("Predictor7","PredictorAdd7"),ue("Predictor8","PredictorAdd8"),ue("Predictor9","PredictorAdd9"),ue("Predictor10","PredictorAdd10"),ue("Predictor11","PredictorAdd11"),ue("Predictor12","PredictorAdd12"),ue("Predictor13","PredictorAdd13");var xa=P.PredictorAdd2;Me("ColorIndexInverseTransform","MapARGB","32b",(function(C){return C>>8&255}),(function(C){return C})),Me("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(C){return C}),(function(C){return C>>8&255}));var pi,qn=P.ColorIndexInverseTransform,Ms=P.MapARGB,qa=P.VP8LColorIndexInverseTransformAlpha,Xi=P.MapAlpha,$a=P.VP8LPredictorsAdd=[];$a.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var xs,ba,rs,Yi,Fl,Uo,hu,vl,Wn,Ml,Qs,Ti,Rl,Ed,Bl,qo,Ji,Rs,Qi,Oi,Zi,wo,Bc,gs,vs,ta,Yn,_n,Sa=i(511),$o=i(2041),mu=i(225),zo=i(767),Td=0,Ho=$o,Ul=mu,xi=zo,gi=Sa,Xu=0,fc=1,Xh=2,pu=3,Yu=4,fa=5,qf=6,Uc=7,Od=8,xu=9,Ju=10,qc=[2,3,7],Qu=[3,3,11],Pd=[280,256,256,256,40],R0=[0,1,1,1,0],$f=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ef=8,hc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vu=null,zf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],B0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$c=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Id=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ns=[],No=[],Pi=[],jo=1,bu=2,as=[],eo=[];gt("UpsampleRgbLinePair",Sn,3),gt("UpsampleBgrLinePair",Ba,3),gt("UpsampleRgbaLinePair",Bo,4),gt("UpsampleBgraLinePair",Fs,4),gt("UpsampleArgbLinePair",Ys,4),gt("UpsampleRgba4444LinePair",ps,2),gt("UpsampleRgb565LinePair",Ua,2);var wp=P.UpsampleRgbLinePair,Hf=P.UpsampleBgrLinePair,zc=P.UpsampleRgbaLinePair,ql=P.UpsampleBgraLinePair,Hc=P.UpsampleArgbLinePair,rf=P.UpsampleRgba4444LinePair,Wf=P.UpsampleRgb565LinePair,Wo=16,bl=1<<Wo-1,Jn=-227,ra=482,Wc=6,bs=0,vi=i(256),$l=i(256),Dd=i(256),to=i(256),nf=i(ra-Jn),Vf=i(ra-Jn);vo("YuvToRgbRow",Sn,3),vo("YuvToBgrRow",Ba,3),vo("YuvToRgbaRow",Bo,4),vo("YuvToBgraRow",Fs,4),vo("YuvToArgbRow",Ys,4),vo("YuvToRgba4444Row",ps,2),vo("YuvToRgb565Row",Ua,2);var U0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vc=[0,2,8],Jh=[8,7,6,4,4,2,2,2,1,1,1,1],Vo=1;this.WebPDecodeRGBA=function(C,M,Z,ce,ye){var Ee=fc,De=new _s,Le=new Or;De.ba=Le,Le.S=Ee,Le.width=[Le.width],Le.height=[Le.height];var qe=Le.width,Ve=Le.height,nt=new pr;if(nt==null||C==null)var Nt=2;else t(nt!=null),Nt=Mc(C,M,Z,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(Nt!=0?qe=0:(qe!=null&&(qe[0]=nt.width[0]),Ve!=null&&(Ve[0]=nt.height[0]),qe=1),qe){Le.width=Le.width[0],Le.height=Le.height[0],ce!=null&&(ce[0]=Le.width),ye!=null&&(ye[0]=Le.height);e:{if(ce=new ea,(ye=new Gi).data=C,ye.w=M,ye.ha=Z,ye.kd=1,M=[0],t(ye!=null),((C=Mc(ye.data,ye.w,ye.ha,null,null,null,M,null,ye))==0||C==7)&&M[0]&&(C=4),(M=C)==0){if(t(De!=null),ce.data=ye.data,ce.w=ye.w+ye.offset,ce.ha=ye.ha-ye.offset,ce.put=Sr,ce.ac=Xr,ce.bc=pn,ce.ma=De,ye.xa){if((C=ht())==null){De=1;break e}if((function(kt,pt){var Vt=[0],Pt=[0],lt=[0];t:for(;;){if(kt==null)return 0;if(pt==null)return kt.a=2,0;if(kt.l=pt,kt.a=0,re(kt.m,pt.data,pt.w,pt.ha),!rr(kt.m,Vt,Pt,lt)){kt.a=3;break t}if(kt.xb=bu,pt.width=Vt[0],pt.height=Pt[0],!ct(Vt[0],Pt[0],1,kt,null))break t;return 1}return t(kt.a!=0),0})(C,ce)){if(ce=(M=Ad(ce.width,ce.height,De.Oa,De.ba))==0){t:{ce=C;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((Z=ce.l)!=null),t((ye=Z.ma)!=null),ce.xb!=0){if(ce.ca=ye.ba,ce.tb=ye.tb,t(ce.ca!=null),!_d(ye.Oa,Z,pu)){ce.a=2;break r}if(!xt(ce,Z.width)||Z.da)break r;if((Z.da||Et(ce.ca.S))&&Xe(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&Xe()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!Te(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!Re(ce,ce.V,ce.Ba,ce.c,ce.i,Z.o,He))break r;ye.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(M=C.a)}else M=C.a}else{if((C=new Un)==null){De=1;break e}if(C.Fa=ye.na,C.P=ye.P,C.qc=ye.Sa,va(C,ce)){if((M=Ad(ce.width,ce.height,De.Oa,De.ba))==0){if(C.Aa=0,Z=De.Oa,t((ye=C)!=null),Z!=null){if(0<(qe=0>(qe=Z.Md)?0:100<qe?255:255*qe/100)){for(Ve=nt=0;4>Ve;++Ve)12>(Nt=ye.pb[Ve]).lc&&(Nt.ia=qe*Jh[0>Nt.lc?0:Nt.lc]>>3),nt|=Nt.ia;nt&&(alert("todo:VP8InitRandom"),ye.ia=1)}ye.Ga=Z.Id,100<ye.Ga?ye.Ga=100:0>ye.Ga&&(ye.Ga=0)}It(C,ce)||(M=C.a)}}else M=C.a}M==0&&De.Oa!=null&&De.Oa.fd&&(M=Cd(De.ba))}De=M}Ee=De!=0?null:11>Ee?Le.f.RGBA.eb:Le.f.kb.y}else Ee=null;return Ee};var Ia=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,D){for(var R="",T=0;T<4;T++)R+=String.fromCharCode(P[D++]);return R}function u(P,D){return(P[D+0]<<0|P[D+1]<<8|P[D+2]<<16)>>>0}function f(P,D){return(P[D+0]<<0|P[D+1]<<8|P[D+2]<<16|P[D+3]<<24)>>>0}new c;var p=[0],m=[0],b=[],v=new c,g=e,w=(function(P,D){var R={},T=0,_=!1,B=0,U=0;if(R.frames=[],!(function(z,V,q,K){for(var se=0;se<K;se++)if(z[V+se]!=q.charCodeAt(se))return!0;return!1})(P,D,"RIFF",4)){var H,Y;for(f(P,D+=4),D+=8;D<P.length;){var J=d(P,D),re=f(P,D+=4);D+=4;var X=re+(1&re);switch(J){case"VP8 ":case"VP8L":R.frames[T]===void 0&&(R.frames[T]={}),(O=R.frames[T]).src_off=_?U:D-8,O.src_size=B+re+8,T++,_&&(_=!1,B=0,U=0);break;case"VP8X":(O=R.header={}).feature_flags=P[D];var ee=D+4;O.canvas_width=1+u(P,ee),ee+=3,O.canvas_height=1+u(P,ee),ee+=3;break;case"ALPH":_=!0,B=X+8,U=D-8;break;case"ANIM":(O=R.header).bgcolor=f(P,D),ee=D+4,O.loop_count=(H=P)[(Y=ee)+0]<<0|H[Y+1]<<8,ee+=2;break;case"ANMF":var W,O;(O=R.frames[T]={}).offset_x=2*u(P,D),D+=3,O.offset_y=2*u(P,D),D+=3,O.width=1+u(P,D),D+=3,O.height=1+u(P,D),D+=3,O.duration=u(P,D),D+=3,W=P[D++],O.dispose=1&W,O.blend=W>>1&1}J!="ANMF"&&(D+=X)}return R}})(g,0);w.response=g,w.rgbaoutput=!0,w.dataurl=!1;var y=w.header?w.header:null,j=w.frames?w.frames:null;if(y){y.loop_counter=y.loop_count,p=[y.canvas_height],m=[y.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var S=j[0],E=v.WebPDecodeRGBA(g,S.src_off,S.src_size,m,p);S.rgba=E,S.imgwidth=m[0],S.imgheight=p[0];for(var A=0;A<m[0]*p[0]*4;A++)b[A]=E[A];return this.width=m,this.height=p,this.data=b,this}(function(e){var t=function(){return typeof Gk=="function"},r=function(p,m,b,v){var g=4,w=o;switch(v){case e.image_compression.FAST:g=1,w=i;break;case e.image_compression.MEDIUM:g=6,w=l;break;case e.image_compression.SLOW:g=9,w=c}p=a(p,m,b,w);var y=Gk(p,{level:g});return e.__addimage__.arrayBufferToBinaryString(y)},a=function(p,m,b,v){for(var g,w,y,j=p.length/m,N=new Uint8Array(p.length+j),S=u(),E=0;E<j;E+=1){if(y=E*m,g=p.subarray(y,y+m),v)N.set(v(g,b,w),y+E);else{for(var A,P=S.length,D=[];A<P;A+=1)D[A]=S[A](g,b,w);var R=f(D.concat());N.set(D[R],y+E)}w=g}return N},s=function(p){var m=Array.apply([],p);return m.unshift(0),m},i=function(p,m){var b,v=[],g=p.length;v[0]=1;for(var w=0;w<g;w+=1)b=p[w-m]||0,v[w+1]=p[w]-b+256&255;return v},o=function(p,m,b){var v,g=[],w=p.length;g[0]=2;for(var y=0;y<w;y+=1)v=b&&b[y]||0,g[y+1]=p[y]-v+256&255;return g},l=function(p,m,b){var v,g,w=[],y=p.length;w[0]=3;for(var j=0;j<y;j+=1)v=p[j-m]||0,g=b&&b[j]||0,w[j+1]=p[j]+256-(v+g>>>1)&255;return w},c=function(p,m,b){var v,g,w,y,j=[],N=p.length;j[0]=4;for(var S=0;S<N;S+=1)v=p[S-m]||0,g=b&&b[S]||0,w=b&&b[S-m]||0,y=d(v,g,w),j[S+1]=p[S]-y+256&255;return j},d=function(p,m,b){if(p===m&&m===b)return p;var v=Math.abs(m-b),g=Math.abs(p-b),w=Math.abs(p+m-b-b);return v<=g&&v<=w?p:g<=w?m:b},u=function(){return[s,i,o,l,c]},f=function(p){var m=p.map((function(b){return b.reduce((function(v,g){return v+Math.abs(g)}),0)}));return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(p,m,b,v){var g,w,y,j,N,S,E,A,P,D,R,T,_,B,U,H=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(y=new pbe(p)).imgData,w=y.bits,g=y.colorSpace,N=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){P=(A=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,R=new Uint8Array(P*y.colors),D=new Uint8Array(P);var J,re=y.pixelBitlength-y.bits;for(B=0,U=0;B<P;B++){for(_=A[B],J=0;J<re;)R[U++]=_>>>J&255,J+=y.bits;D[B]=_>>>J&255}}if(y.bits===16){P=(A=new Uint32Array(y.decodePixels().buffer)).length,R=new Uint8Array(P*(32/y.pixelBitlength)*y.colors),D=new Uint8Array(P*(32/y.pixelBitlength)),T=y.colors>1,B=0,U=0;for(var X=0;B<P;)_=A[B++],R[U++]=_>>>0&255,T&&(R[U++]=_>>>16&255,_=A[B++],R[U++]=_>>>0&255),D[X++]=_>>>16&255;w=8}v!==e.image_compression.NONE&&t()?(p=r(R,y.width*y.colors,y.colors,v),E=r(D,y.width,1,v)):(p=R,E=D,H=void 0)}if(y.colorType===3&&(g=this.color_spaces.INDEXED,S=y.palette,y.transparency.indexed)){var ee=y.transparency.indexed,W=0;for(B=0,P=ee.length;B<P;++B)W+=ee[B];if((W/=255)===P-1&&ee.indexOf(0)!==-1)j=[ee.indexOf(0)];else if(W!==P){for(A=y.decodePixels(),D=new Uint8Array(A.length),B=0,P=A.length;B<P;B++)D[B]=ee[A[B]];E=r(D,y.width,1)}}var O=(function(z){var V;switch(z){case e.image_compression.FAST:V=11;break;case e.image_compression.MEDIUM:V=13;break;case e.image_compression.SLOW:V=14;break;default:V=12}return V})(v);return H===this.decode.FLATE_DECODE&&(Y="/Predictor "+O+" "),Y+="/Colors "+N+" /BitsPerComponent "+w+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:b,data:p,index:m,filter:H,decodeParameters:Y,transparency:j,palette:S,sMask:E,predictor:O,width:y.width,height:y.height,bitsPerComponent:w,colorSpace:g}}}})(cn.API),(function(e){e.processGIF89A=function(t,r,a,s){var i=new xbe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new Vj(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)},e.processGIF87A=e.processGIF89A})(cn.API),Kd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Kd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ga.log("bit decode error:"+r)}},Kd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Kd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Kd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Kd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Kd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Kd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Kd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},Kd.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,a,s){var i=new Kd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Vj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(cn.API),j8.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,a,s){var i=new j8(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Vj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(cn.API),cn.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=a[d],f=a[d+1],p=a[d+2],m=a[d+3];i[l++]=u,i[l++]=f,i[l++]=p,o[c++]=m}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},cn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},fm=cn.API,Gv=fm.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=t.doKerning!==!1,p=0,m=e.length,b=0,v=l[0]||c,g=[];for(r=0;r<m;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(p=f&&Ea(d[a])==="object"&&!isNaN(parseInt(d[a][b],10))?d[a][b]/u:0,g.push((l[a]||v)/c+p)),b=a;return g},b8=fm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return fm.processArabic&&(e=fm.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:Gv.apply(this,arguments).reduce((function(i,o){return i+o}),0)},y8=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},w8=function(e,t,r){r||(r={});var a,s,i,o,l,c,d,u=[],f=[u],p=r.textIndent||0,m=0,b=0,v=e.split(" "),g=Gv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var w=Array(c).join(" "),y=[];v.map((function(N){(N=N.split(/\s*\n/)).length>1?y=y.concat(N.map((function(S,E){return(E&&S.length?`
`:"")+S}))):y.push(N[0])})),v=y,c=b8.apply(this,[w,r])}for(i=0,o=v.length;i<o;i++){var j=0;if(a=v[i],c&&a[0]==`
`&&(a=a.substr(1),j=1),p+m+(b=(s=Gv.apply(this,[a,r])).reduce((function(N,S){return N+S}),0))>t||j){if(b>t){for(l=y8.apply(this,[a,s,t-(p+m),t]),u.push(l.shift()),u=[l.pop()];l.length;)f.push([l.shift()]);b=s.slice(a.length-(u[0]?u[0].length:0)).reduce((function(N,S){return N+S}),0)}else u=[a];f.push(u),p=b+c,m=g}else u.push(a),p+=m+b,m=g}return d=c?function(N,S){return(S?w:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(d)},fm.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(w8.apply(this,[a[l],o,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var p,m,b,v,g=["{"];for(var w in f){if(p=f[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=i(w).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof p=="number")p<0?(b=i(p).slice(3),v="-"):(b=i(p).slice(2),v=""),b=v+b.slice(0,-1)+a[b.slice(-1)];else{if(Ea(p)!=="object")throw new Error("Don't know what to do with value type "+Ea(p)+".");b=o(p)}g.push(m+b)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,m,b,v,g={},w=1,y=g,j=[],N="",S="",E=f.length-1,A=1;A<E;A+=1)(v=f[A])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(v):v=="{"?(j.push([y,b]),y={},b=void 0):v=="}"?((m=j.pop())[0][m[1]]=y,b=void 0,y=m[0]):v=="-"?w=-1:b===void 0?r.hasOwnProperty(v)?(N+=r[v],b=parseInt(N,16)*w,w=1,N=""):N+=v:r.hasOwnProperty(v)?(S+=r[v],y[b]=parseInt(S,16)*w,w=1,b=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var p=f.font,m=u.Unicode[p.postScriptName];m&&(p.metadata.Unicode={},p.metadata.Unicode.widths=m.widths,p.metadata.Unicode.kerning=m.kerning);var b=d.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])})(cn.API),(function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(gx(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])})(cn),(function(e){function t(){return(dn.canvg?Promise.resolve(dn.canvg):c1(()=>import("./index.es-DzkEWv93.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}cn.API.addSvgAsImage=function(r,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw Ga.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ga.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then((function(b){return b.fromString(f,r,p)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(b){return b.render(p)})).then((function(){m.addImage(u.toDataURL("image/jpeg",1),a,s,i,o,c,d)}))}})(),cn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},cn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,f=0;function p(b,v){var g,w=!1;for(g=0;g<b.length;g+=1)b[g]===v&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Ea(e)==="object"){for(s in e)if(i=e[s],p(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var b,v=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?v.push("/"+b+" /"+r[b].value):v.push("/"+b+" "+r[b].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(cn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,p=i.length;f<p;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,f,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(i).sort((function(m,b){return m-b}))).length;f<p;f++)o=l[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",b=0;b<p.length;b++)m+=String.fromCharCode(p[b]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var w=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+pm(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+pm(l.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+pm(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var b=d();u({data:p,addLength1:!0,objectId:b}),c("endobj");var v=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+pm(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+pm(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},f=i.mutex||{},p=f.pdfEscape,m=f.activeFontKey,b=f.fonts,v=m,g="",w=0,y="",j=b[v].encoding;if(b[v].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:f};for(y=l,v=m,Array.isArray(l)&&(y=l[0]),w=0;w<y.length;w+=1)b[v].metadata.hasOwnProperty("cmap")&&(o=b[v].metadata.cmap.unicode.codeMap[y[w].charCodeAt(0)]),o||y[w].charCodeAt(0)<256&&b[v].metadata.hasOwnProperty("Unicode")?g+=y[w]:g+="";var N="";return parseInt(v.slice(1))<14||j==="WinAnsiEncoding"?N=p(g,v).split("").map((function(S){return S.charCodeAt(0).toString(16)})).join(""):j==="Identity-H"&&(N=r(g,b[v])),f.isHex=!0,{text:N,x:c,y:d,options:u,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])})(cn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(cn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,u,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,j=0;this.__bidiEngine__={};var N=function(T){var _=T.charCodeAt(),B=_>>8,U=v[B];return U!==void 0?f[256*U+(255&_)]:B===252||B===253?"AL":w.test(B)?"L":B===8?"R":"N"},S=function(T){for(var _,B=0;B<T.length;B++){if((_=N(T.charAt(B)))==="L")return!1;if(_==="R")return!0}return!1},E=function(T,_,B,U){var H,Y,J,re,X=_[U];switch(X){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(X="AN");break;case"AL":y=!0,X="R";break;case"WS":X="N";break;case"CS":U<1||U+1>=_.length||(H=B[U-1])!=="EN"&&H!=="AN"||(Y=_[U+1])!=="EN"&&Y!=="AN"?X="N":y&&(Y="AN"),X=Y===H?Y:"N";break;case"ES":X=(H=U>0?B[U-1]:"B")==="EN"&&U+1<_.length&&_[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&B[U-1]==="EN"){X="EN";break}if(y){X="N";break}for(J=U+1,re=_.length;J<re&&_[J]==="ET";)J++;X=J<re&&_[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(re=_.length,J=U+1;J<re&&_[J]==="NSM";)J++;if(J<re){var ee=T[U],W=ee>=1425&&ee<=2303||ee===64286;if(H=_[J],W&&(H==="R"||H==="AL")){X="R";break}}}X=U<1||(H=_[U-1])==="B"?"N":B[U-1];break;case"B":y=!1,s=!0,X=j;break;case"S":i=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":X="N"}return X},A=function(T,_,B){var U=T.split("");return B&&P(U,B,{hiLevel:j}),U.reverse(),_&&_.reverse(),U.join("")},P=function(T,_,B){var U,H,Y,J,re,X=-1,ee=T.length,W=0,O=[],z=j?m:p,V=[];for(y=!1,s=!1,i=!1,H=0;H<ee;H++)V[H]=N(T[H]);for(Y=0;Y<ee;Y++){if(re=W,O[Y]=E(T,V,O,Y),U=240&(W=z[re][b[O[Y]]]),W&=15,_[Y]=J=z[W][5],U>0)if(U===16){for(H=X;H<Y;H++)_[H]=1;X=-1}else X=-1;if(z[W][6])X===-1&&(X=Y);else if(X>-1){for(H=X;H<Y;H++)_[H]=J;X=-1}V[Y]==="B"&&(_[Y]=0),B.hiLevel|=J}i&&(function(q,K,se){for(var pe=0;pe<se;pe++)if(q[pe]==="S"){K[pe]=j;for(var ie=pe-1;ie>=0&&q[ie]==="WS";ie--)K[ie]=j}})(V,_,ee)},D=function(T,_,B,U,H){if(!(H.hiLevel<T)){if(T===1&&j===1&&!s)return _.reverse(),void(B&&B.reverse());for(var Y,J,re,X,ee=_.length,W=0;W<ee;){if(U[W]>=T){for(re=W+1;re<ee&&U[re]>=T;)re++;for(X=W,J=re-1;X<J;X++,J--)Y=_[X],_[X]=_[J],_[J]=Y,B&&(Y=B[X],B[X]=B[J],B[J]=Y);W=re}W++}}},R=function(T,_,B){var U=T.split(""),H={hiLevel:j};return B||(B=[]),P(U,B,H),(function(Y,J,re){if(re.hiLevel!==0&&u)for(var X,ee=0;ee<Y.length;ee++)J[ee]===1&&(X=g.indexOf(Y[ee]))>=0&&(Y[ee]=g[X+1])})(U,B,H),D(2,U,_,B,H),D(1,U,_,B,H),U.join("")};return this.__bidiEngine__.doBidiReorder=function(T,_,B){if((function(H,Y){if(Y)for(var J=0;J<H.length;J++)Y[J]=J;l===void 0&&(l=S(H)),d===void 0&&(d=S(H))})(T,_),o||!c||d)if(o&&c&&l^d)j=l?1:0,T=A(T,_,B);else if(!o&&c&&d)j=l?1:0,T=R(T,_,B),T=A(T,_);else if(!o||l||c||d){if(o&&!c&&l^d)T=A(T,_),l?(j=0,T=R(T,_,B)):(j=1,T=R(T,_,B),T=A(T,_));else if(o&&l&&!c&&d)j=1,T=R(T,_,B),T=A(T,_);else if(!o&&!c&&l^d){var U=u;l?(j=1,T=R(T,_,B),j=0,u=!1,T=R(T,_,B),u=U):(j=0,T=R(T,_,B),T=A(T,_),j=1,u=!1,T=R(T,_,B),u=U,T=A(T,_))}}else j=0,T=R(T,_,B);else j=l?1:0,T=R(T,_,B);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(cn),cn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new C0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Obe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new gbe(this.contents),this.head=new bbe(this),this.name=new kbe(this),this.cmap=new pB(this),this.toUnicode={},this.hhea=new ybe(this),this.maxp=new Sbe(this),this.hmtx=new _be(this),this.post=new Nbe(this),this.os2=new wbe(this),this.loca=new Tbe(this),this.glyf=new Cbe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e})();var du,C0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e})(),gbe=(function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,c,d,u,f,p,m,b,v;for(v in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),u=16*m-f,(s=new C0).writeInt(this.scalarType),s.writeShort(m),s.writeShort(f),s.writeShort(o),s.writeShort(u),i=16*m,d=s.pos+i,l=null,b=[],r)for(p=r[v],s.writeString(v),s.writeInt(e(p)),s.writeInt(d),s.writeInt(p.length),b=b.concat(p),v==="head"&&(l=d),d+=p.length;d%4;)b.push(0),d++;return s.write(b),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=xB.call(r);r.length%4;)r.push(0);for(i=new C0(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t})(),vbe={}.hasOwnProperty,Ku=function(e,t){for(var r in t)vbe.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};du=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var bbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new C0).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t})(),k8=(function(){function e(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,w,y,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),p=m/2,t.pos+=6,i=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),d=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),u=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var N,S;for(S=[],c=N=0;0<=s?N<s:N>s;c=0<=s?++N:--N)S.push(t.readUInt16());return S})(),c=w=0,j=i.length;w<j;c=++w)for(g=i[c],a=y=b=v[c];b<=g?y<=g:y>=g;a=b<=g?++y:--y)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-b)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,w,y,j,N,S,E,A,P,D,R,T,_,B,U,H,Y,J,re,X,ee,W,O,z,V,q,K,se,pe,ie,le,$e,he;switch(U=new C0,o=Object.keys(t).sort((function(Ue,Te){return Ue-Te})),r){case"macroman":for(v=0,g=(function(){var Ue=[];for(b=0;b<256;++b)Ue.push(0);return Ue})(),y={0:0},i={},H=0,X=o.length;H<X;H++)y[ie=t[s=o[H]]]==null&&(y[ie]=++v),i[s]={old:t[s],new:y[t[s]]},g[s]=y[t[s]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(g),{charMap:i,subtable:U.data,maxGlyphID:v+1};case"unicode":for(_=[],f=[],j=0,y={},a={},w=d=null,Y=0,ee=o.length;Y<ee;Y++)y[S=t[s=o[Y]]]==null&&(y[S]=++j),a[s]={old:S,new:y[S]},l=y[S]-s,w!=null&&l===d||(w&&f.push(w),_.push(s),d=l),w=s;for(w&&f.push(w),f.push(65535),_.push(65535),R=2*(D=_.length),P=2*Math.pow(Math.log(D)/Math.LN2,2),p=Math.log(P/2)/Math.LN2,A=2*D-P,c=[],E=[],m=[],b=J=0,W=_.length;J<W;b=++J){if(T=_[b],u=f[b],T===65535){c.push(0),E.push(0);break}if(T-(B=a[T].new)>=32768)for(c.push(0),E.push(2*(m.length+D-b)),s=re=T;T<=u?re<=u:re>=u;s=T<=u?++re:--re)m.push(a[s].new);else c.push(B-T),E.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*D+2*m.length),U.writeUInt16(0),U.writeUInt16(R),U.writeUInt16(P),U.writeUInt16(p),U.writeUInt16(A),se=0,O=f.length;se<O;se++)s=f[se],U.writeUInt16(s);for(U.writeUInt16(0),pe=0,z=_.length;pe<z;pe++)s=_[pe],U.writeUInt16(s);for(le=0,V=c.length;le<V;le++)l=c[le],U.writeUInt16(l);for($e=0,q=E.length;$e<q;$e++)N=E[$e],U.writeUInt16(N);for(he=0,K=m.length;he<K;he++)v=m[he],U.writeUInt16(v);return{charMap:a,subtable:U.data,maxGlyphID:j+1}}},e})(),pB=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new k8(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var s,i;return a==null&&(a="macroman"),s=k8.encode(r,a),(i=new C0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t})(),ybe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),wbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s})(),this.charRange=(function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),Nbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="post",t.prototype.parse=function(r){var a,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t})(),jbe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},kbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="name",t.prototype.parse=function(r){var a,s,i,o,l,c,d,u,f,p,m;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=f=0,p=s.length;f<p;o=++f)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new jbe(u,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),Sbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),_be=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)f.push(r.readInt16());return f})(),this.widths=(function(){var u,f,p,m;for(m=[],u=0,f=(p=this.metrics).length;u<f;u++)o=p[u],m.push(o.advance);return m}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),xB=[].slice,Cbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,s,i,o,l,c,d,u,f,p;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,l=(c=new C0(a.read(i))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new Ebe(c,u,p,d,f):new Abe(c,l,u,p,d,f),this.cache[r]))},t.prototype.encode=function(r,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t})(),Abe=(function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Ebe=(function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new C0(xB.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),Tbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ku(t,du),t.prototype.tag="loca",t.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),f=0;f<s.length;++f)u[4*f+3]=255&s[f],u[4*f+2]=(65280&s[f])>>8,u[4*f+1]=(16711680&s[f])>>16,u[4*f]=(4278190080&s[f])>>24;return u},t})(),Obe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,w;for(s in a=pB.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},w=a.charMap)m[(c=w[s]).old]=c.new;for(b in p=a.maxGlyphID,o)b in m||(m[b]=p++);return u=(function(y){var j,N;for(j in N={},y)N[y[j]]=j;return N})(m),f=Object.keys(u).sort((function(y,j){return y-j})),v=(function(){var y,j,N;for(N=[],y=0,j=f.length;y<j;y++)l=f[y],N.push(u[l]);return N})(),i=this.font.glyf.encode(o,v,m),d=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();cn.API.PDFObject=(function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+(function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const Pbe=({onCreateInvoice:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=jn(),[i,o]=I.useState([]),[l,c]=I.useState([]),[d,u]=I.useState(null),[f,p]=I.useState(!0),[m,b]=I.useState(!1),[v,g]=I.useState(!1),[w,y]=I.useState([]),[j,N]=I.useState(!1),[S,E]=I.useState(!1),[A,P]=I.useState(!1),[D,R]=I.useState(!1),[T,_]=I.useState([]),[B,U]=I.useState(null),[H,Y]=I.useState({description:"",quantity:1,rate:0}),[J,re]=I.useState(!1),[X,ee]=I.useState(!1),[W,O]=I.useState(Si),z=I.useCallback(async()=>{p(!0);try{const Te=await iM(),oe=Te?.data||Te||[];o(Array.isArray(oe)?oe:[]);try{const te=await wd();c(te?.data||te||[])}catch{c([])}}catch(Te){a(Te.message||"Failed to load invoices")}finally{p(!1)}},[t,a]);I.useEffect(()=>{z()},[z]),I.useEffect(()=>{const Te=()=>z();return window.addEventListener("refresh-invoices",Te),()=>window.removeEventListener("refresh-invoices",Te)},[z]);const V=Te=>l.find(oe=>oe.id===Te),q=Te=>{switch(Te){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},K={totalOutstanding:i.filter(Te=>Te.status!=="Paid").reduce((Te,oe)=>Te+(oe.amount||0),0),awaitingPayment:i.filter(Te=>Te.status!=="Paid").reduce((Te,oe)=>Te+(oe.amount||0),0),paidThisMonth:i.filter(Te=>Te.status==="Paid").reduce((Te,oe)=>Te+(oe.amount||0),0)},se=()=>{w.length===i.length?y([]):y(i.map(Te=>Te.id))},pe=async()=>{const Te=[...w];if(Te.length!==0){N(!0),s(`Processing payment status for ${Te.length} items...`);try{await Promise.all(Te.map(oe=>_v(oe,{status:"Paid"}))),o(oe=>oe.map(te=>Te.includes(te.id)?{...te,status:"Paid"}:te)),r(`Successfully marked ${Te.length} invoices as paid`),y([]),z()}catch{a("Bulk update failed. Some items may not have been updated.")}finally{N(!1)}}},ie=async()=>{[...w].length!==0&&P(!0)},le=async()=>{const Te=[...w];if(Te.length!==0){N(!0),P(!1),s(`Executing batch deletion for ${Te.length} registry entries...`);try{await Promise.all(Te.map(oe=>hI(oe))),o(oe=>oe.filter(te=>!Te.includes(te.id))),r(`Successfully removed ${Te.length} invoices from registry`),y([]),z()}catch{a("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{N(!1)}}};I.useEffect(()=>{if(d){const Te=d.lineItems||d.items||[];_(Te),R(!1),U(null),Y({description:"",quantity:1,rate:0}),O(d.currency||Si),ee(!1)}},[d]);const $e=async()=>{if(d){b(!0);try{await _v(d.id,{items:T,lineItems:T}),o(Te=>Te.map(oe=>oe.id===d.id?{...oe,items:T,lineItems:T}:oe)),u({...d,items:T,lineItems:T}),R(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Te){console.error("Failed to save breakdown:",Te),a(Te.message||"Failed to save breakdown")}finally{b(!1)}}},he=async()=>{if(d){b(!0);try{await _v(d.id,{status:"Paid"}),o(Te=>Te.map(oe=>oe.id===d.id?{...oe,status:"Paid"}:oe)),u({...d,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Te){console.error("Failed to update invoice:",Te),a(Te.message||"Failed to update invoice")}finally{b(!1)}}},Ue=async()=>{if(d){g(!0);try{await hI(d.id),o(Te=>Te.filter(oe=>oe.id!==d.id)),u(null),E(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Te){console.error("Failed to delete invoice:",Te),a(Te.message||"Failed to delete invoice")}finally{g(!1)}}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(Zr,{className:"w-4 h-4"})," Create Invoice"]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${K.totalOutstanding.toLocaleString()}`,icon:n.jsx(zu,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${K.awaitingPayment.toLocaleString()}`,icon:n.jsx(es,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${K.paidThisMonth.toLocaleString()}`,icon:n.jsx(mn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((Te,oe)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl ${Te.bg} ${Te.color} flex items-center justify-center`,children:ft.cloneElement(Te.icon,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Te.label}),n.jsx("h3",{className:"text-xl font-black text-slate-900",children:Te.value})]})]},oe))}),n.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[n.jsx("th",{className:"px-6 py-4 w-10",children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&w.length===i.length,onChange:se})}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-right"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-50",children:f?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center",children:n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(Te=>{const oe=w.includes(Te.id);return n.jsxs("tr",{onClick:()=>u(Te),className:`group transition-colors cursor-pointer ${oe?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-6 py-4",onClick:te=>te.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:oe,onChange:()=>y(te=>oe?te.filter(Pe=>Pe!==Te.id):[...te,Te.id])})}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Te.number}),n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",Te.id.substring(0,8)]})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ps,{src:V(Te.companyId)?.logo,fallbackText:V(Te.companyId)?.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:V(Te.companyId)?.name||"Unknown Partner"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm font-bold text-slate-900",children:bf(Te.amount,Te.currency)})}),n.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:Te.dueDate}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${q(Te.status)}`,children:Te.status})}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsx(ia,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},Te.id)})})]})})}),w.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:w.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Te=>{Te.stopPropagation(),pe()},disabled:j,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(mn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),n.jsxs("button",{onClick:Te=>{Te.stopPropagation(),ie()},disabled:j,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>y([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]})}),d&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>u(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:n.jsx(Gn,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:d.number}),n.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${q(d.status)}`,children:d.status})]}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[n.jsx(Ps,{src:V(d.companyId)?.logo,fallbackText:V(d.companyId)?.name||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:V(d.companyId)?.name||"Unknown Company"}),n.jsx("p",{className:"text-xs text-slate-500",children:V(d.companyId)?.website||""})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),X?n.jsx("button",{onClick:async()=>{b(!0);try{await _v(d.id,{currency:W}),o(Te=>Te.map(oe=>oe.id===d.id?{...oe,currency:W}:oe)),u({...d,currency:W}),ee(!1),r("Currency updated successfully!")}catch(Te){a(Te.message||"Failed to update currency")}finally{b(!1)}},disabled:m,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:n.jsx(oi,{className:"w-3 h-3"})}):n.jsx("button",{onClick:()=>ee(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:n.jsx(Lo,{className:"w-3 h-3"})})]}),X?n.jsx("select",{value:W,onChange:Te=>O(Te.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:rp.map(Te=>n.jsxs("option",{value:Te.code,children:[Te.code," (",Te.symbol,")"]},Te.code))}):n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:bf(d.amount,d.currency)})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:d.dueDate})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),n.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:d.description||"No additional strategic description provided for this statement."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),D?n.jsxs("button",{onClick:$e,disabled:m,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[n.jsx(oi,{className:"w-3 h-3"})," ",m?"Saving...":"Save"]}):n.jsxs("button",{onClick:()=>R(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[n.jsx(Lo,{className:"w-3 h-3"})," Edit"]})]}),n.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[T.map(Te=>n.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:Te.description}),n.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",Te.quantity," @ ",pf(d.currency),Te.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:bf(Te.amount,d.currency)})]},Te.id)),T.length===0&&n.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[d.status!=="Paid"&&n.jsxs("button",{onClick:he,disabled:m,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[m?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(mn,{className:"w-4 h-4"})," Confirm Receipt"]}),n.jsx("button",{onClick:()=>E(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:n.jsx(Lr,{className:"w-5 h-5"})})]})]})]}),S&&d&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>E(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),n.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>E(!1),disabled:v,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:Ue,disabled:v,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),A&&w.length>0&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",w.length," Invoice",w.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",w.length," invoice",w.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>P(!1),disabled:j,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:le,disabled:j,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${w.length} Invoice${w.length>1?"s":""}`})]})]})})]})]})},Ibe=()=>n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),n.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(hd,{className:"w-4 h-4"})," Invite Member"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),n.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),n.jsx("div",{className:"divide-y divide-slate-100",children:t1.map(e=>n.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ps,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&n.jsx(Rb,{className:"w-4 h-4 text-indigo-600"})]}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[n.jsx(Xa,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),n.jsxs("div",{className:"flex items-center gap-12",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),n.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:n.jsx(tS,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),Dbe=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:a=1,circularCrop:s=!0})=>{const[i,o]=I.useState({x:0,y:0}),[l,c]=I.useState(.5),[d,u]=I.useState(!1),[f,p]=I.useState({x:0,y:0}),[m,b]=I.useState(!1),[v,g]=I.useState(!1),w=I.useRef(null),y=I.useRef(null),j=I.useRef(300),N=I.useCallback(()=>{if(!y.current||!w.current)return null;const R=y.current.getBoundingClientRect(),T=j.current,_=R.width/2,B=R.height/2,U=w.current.getBoundingClientRect(),H=U.left-R.left,Y=U.top-R.top,J=(_-T/2-H-i.x)/l,re=(B-T/2-Y-i.y)/l,X=T/l;return{x:Math.max(0,J*(w.current.naturalWidth/w.current.width)),y:Math.max(0,re*(w.current.naturalHeight/w.current.height)),width:Math.min(w.current.naturalWidth,X*(w.current.naturalWidth/w.current.width)),height:Math.min(w.current.naturalHeight,X*(w.current.naturalHeight/w.current.height))}},[i,l]),S=I.useCallback(async()=>{if(w.current){b(!0);try{const D=N();if(!D)throw new Error("Failed to calculate crop area");const R=w.current,T=document.createElement("canvas"),_=T.getContext("2d");if(!_)throw new Error("Failed to create canvas context");const B=Math.min(D.width,D.height);T.width=B,T.height=B,s&&(_.beginPath(),_.arc(B/2,B/2,B/2,0,2*Math.PI),_.clip()),_.drawImage(R,D.x,D.y,D.width,D.height,0,0,B,B);const U=T.toDataURL("image/jpeg",.9);t(U)}catch(D){console.error("Error cropping image:",D)}finally{b(!1)}}},[N,s,t]),E=I.useCallback(D=>{D.preventDefault(),u(!0),p({x:D.clientX-i.x,y:D.clientY-i.y})},[i]),A=I.useCallback(D=>{if(!d||!y.current||!w.current)return;const R=y.current,T=w.current,_=R.getBoundingClientRect(),B=T.getBoundingClientRect(),U=D.clientX-f.x,H=D.clientY-f.y,Y=B.width*l,J=B.height*l,re=Math.max(0,(Y-_.width)/2),X=Math.max(0,(J-_.height)/2);l<=1?o({x:U,y:H}):o({x:Math.max(-re,Math.min(re,U)),y:Math.max(-X,Math.min(X,H))})},[d,f,l]),P=I.useCallback(()=>{u(!1)},[]);return I.useEffect(()=>{if(d)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",P)}},[d,A,P]),I.useEffect(()=>{if(y.current){const R=y.current.getBoundingClientRect();j.current=Math.min(R.width*.8,R.height*.8,300)}},[]),n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),n.jsx("button",{onClick:r,disabled:m,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{ref:y,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:d?"grabbing":"grab"},children:[n.jsx("img",{ref:w,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(g(!0),y.current&&w.current){const R=y.current.getBoundingClientRect();j.current=Math.min(R.width*.8,R.height*.8,300)}},draggable:!1}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:E,style:{pointerEvents:m?"none":"auto",cursor:d?"grabbing":"grab"},children:[n.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${j.current}px`,height:`${j.current}px`,aspectRatio:a.toString()}}),n.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${j.current/2}px at 50% 50%)`:`inset(calc(50% - ${j.current/2}px))`}})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),n.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:D=>{const R=parseFloat(D.target.value);c(R),R<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:m}),n.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[n.jsx("span",{children:"30%"}),n.jsx("span",{children:"300%"})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:r,disabled:m,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:S,disabled:m||!v,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xd,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},Lbe=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=I.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=I.useState(null),[l,c]=I.useState(!1),[d,u]=I.useState(!1),[f,p]=I.useState(!1),[m,b]=I.useState(!1),[v,g]=I.useState(!1),[w,y]=I.useState(!1);I.useEffect(()=>{j(),N()},[]);const j=async()=>{c(!0);try{const D=await Nae("default");D.success&&D.data&&s(D.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},N=async()=>{p(!0);try{const D=await kae("default");D.success&&D.data&&o(D.data)}catch(D){console.error("Failed to load retention stats:",D)}finally{p(!1)}},S=async()=>{u(!0);try{const D=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await jae("default",{...a,updatedBy:D})).success&&(t("Retention policy updated successfully"),await N())}catch(D){r(D.message||"Failed to update retention policy")}finally{u(!1)}},E=async()=>{b(!0);try{const D=await Sae("default",50);D.success&&(t(`Archive completed: ${D.data.archived} emails archived`),await N())}catch(D){r(D.message||"Failed to trigger archive")}finally{b(!1)}},A=async()=>{g(!0);try{const D=await _ae("default",50);D.success&&(t(`Cleanup completed: ${D.data.deleted} emails deleted`),await N())}catch(D){r(D.message||"Failed to trigger cleanup")}finally{g(!1)}},P=async()=>{y(!0);try{const D=await Cae("default",{format:"csv"});if(typeof D=="string"){const R=new Blob([D],{type:"text/csv"}),T=window.URL.createObjectURL(R),_=document.createElement("a");_.href=T,_.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(T),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(D){r(D.message||"Failed to export archived emails")}finally{y(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(L8,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?n.jsx("div",{className:"p-8 text-center",children:n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),n.jsx("input",{type:"number",min:"1",max:"20",value:a.retentionYears,onChange:D=>s({...a,retentionYears:parseInt(D.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),n.jsx("input",{type:"number",min:"0",max:a.retentionYears,value:a.coldStorageYears,onChange:D=>s({...a,coldStorageYears:parseInt(D.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),n.jsx("button",{onClick:()=>s({...a,archiveEnabled:!a.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),n.jsx("button",{onClick:()=>s({...a,autoCleanupEnabled:!a.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsx("button",{onClick:S,disabled:d,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:d?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Pu,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),f?n.jsx("div",{className:"p-8 text-center",children:n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(fd,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:E,disabled:m,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[m?n.jsx(vt,{className:"w-5 h-5 animate-spin text-indigo-600"}):n.jsx(Pu,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),n.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),n.jsxs("button",{onClick:A,disabled:v,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?n.jsx(vt,{className:"w-5 h-5 animate-spin text-red-600"}):n.jsx(DU,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),n.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),n.jsxs("button",{onClick:P,disabled:w,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[w?n.jsx(vt,{className:"w-5 h-5 animate-spin text-green-600"}):n.jsx(Bu,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),n.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},Fbe=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=I.useState([]),[i,o]=I.useState(!1),[l,c]=I.useState(!1),[d,u]=I.useState(null),[f,p]=I.useState({name:"",content:"",isDefault:!1}),[m,b]=I.useState(!1),[v,g]=I.useState(null),[w,y]=I.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});I.useEffect(()=>{j(),N()},[]);const j=async()=>{o(!0);try{const D=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!D)return;const R=await xM(D);s(R.data||[])}catch(D){console.error("Failed to load signatures:",D)}finally{o(!1)}},N=()=>{try{const D=localStorage.getItem("user_display_preferences");D&&y(JSON.parse(D))}catch(D){console.error("Failed to load display preferences:",D)}},S=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(w)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},E=async()=>{if(!f.name||!f.content){r("Name and content are required");return}b(!0);try{const D=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!D){r("Please log in to save signature");return}d?(await Pse(d.id,{userId:D,...f}),t("Signature updated successfully")):(await Ose({userId:D,...f}),t("Signature created successfully")),c(!1),u(null),p({name:"",content:"",isDefault:!1}),await j()}catch(D){r(D.message||"Failed to save signature")}finally{b(!1)}},A=async D=>{if(confirm("Are you sure you want to delete this signature?")){g(D);try{const R=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await Ise(D,R),t("Signature deleted successfully"),await j()}catch(R){r(R.message||"Failed to delete signature")}finally{g(null)}}},P=D=>{D?(u(D),p({name:D.name||"",content:D.content||"",isDefault:D.isDefault||!1})):(u(null),p({name:"",content:"",isDefault:!1})),c(!0)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(Gn,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),n.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add Signature"]})]}),i?n.jsx("div",{className:"p-8 text-center",children:n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(Gn,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),n.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),n.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):n.jsx("div",{className:"space-y-3",children:a.map(D=>n.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:D.name}),D.isDefault&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),n.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:D.content}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>P(D),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:n.jsx(Lo,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>A(D.id),disabled:v===D.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:v===D.id?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]})]})},D.id))})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Qj,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(D=>n.jsx("button",{onClick:()=>y({...w,layout:D}),className:`p-4 rounded-xl border-2 transition-all ${w.layout===D?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:D})},D))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(D=>n.jsx("button",{onClick:()=>y({...w,density:D}),className:`p-4 rounded-xl border-2 transition-all ${w.density===D?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:D})},D))})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(ru,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),n.jsxs("select",{value:w.emailFormat,onChange:D=>y({...w,emailFormat:D.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),n.jsx("option",{value:"plain",children:"Plain Text"}),n.jsx("option",{value:"rich",children:"Rich Text"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),n.jsx("button",{onClick:()=>y({...w,showPreview:!w.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${w.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${w.showPreview?"translate-x-6":"translate-x-0"}`})})]}),w.showPreview&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),n.jsx("input",{type:"number",min:"1",max:"10",value:w.previewLines,onChange:D=>y({...w,previewLines:parseInt(D.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:d?"Edit Signature":"Create Signature"}),n.jsx("button",{onClick:()=>{c(!1),u(null),p({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),n.jsx("input",{type:"text",value:f.name,onChange:D=>p({...f,name:D.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),n.jsx("textarea",{value:f.content,onChange:D=>p({...f,content:D.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),n.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),n.jsx("button",{onClick:()=>p({...f,isDefault:!f.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${f.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${f.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>{c(!1),u(null),p({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:E,disabled:m||!f.name||!f.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),d?"Update":"Create"," Signature"]})})]})]})})]})},Mbe=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:a}=jn(),[s,i]=I.useState("profile"),[o,l]=I.useState(dv),[c,d]=I.useState(!1),[u,f]=I.useState([]),[p,m]=I.useState(""),[b,v]=I.useState(!1),[g,w]=I.useState(!1),[y,j]=I.useState(!1),[N,S]=I.useState(null),[E,A]=I.useState(!1),[P,D]=I.useState(!1),[R,T]=I.useState([]),[_,B]=I.useState(!1),[U,H]=I.useState(""),[Y,J]=I.useState(!1),[re,X]=I.useState(null),[ee,W]=I.useState(null),[O,z]=I.useState(null),[V,q]=I.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Tp(),language:"English"}),[K,se]=I.useState(!1),[pe,ie]=I.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[le,$e]=I.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:Tp(),language:"English"}),[he,Ue]=I.useState(!1),[Te,oe]=I.useState(null),[te,Pe]=I.useState(""),[je,Ie]=I.useState(!1),[ue,de]=I.useState(!1),[Ae,Qe]=I.useState(""),ge=I.useRef(null),[fe,_e]=I.useState([]),[ze,Se]=I.useState(!1),[Fe,Me]=I.useState({open:!1,name:""}),[et,ut]=I.useState(!1),bt=(rt,Dt)=>{l(yr=>yr.map(kr=>kr.id===rt?{...kr,[Dt]:!kr[Dt]}:kr))};I.useEffect(()=>{s==="connections"&&(async()=>{const Dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(Dt)try{const yr=await d3(Dt);j(yr.connected||!1),S(yr.userEmail||null)}catch{j(!1)}})()},[s,e]);const At=async()=>{B(!0);try{const rt=await Ic(U||void 0);T(rt.data||[])}catch{T([])}finally{B(!1)}};I.useEffect(()=>{s==="users"&&At()},[s,U]);const qt=async()=>{Se(!0);try{const rt=await Qae();_e(rt?.data||[])}catch{_e([])}finally{Se(!1)}};I.useEffect(()=>{s==="crm"&&qt()},[s]),I.useEffect(()=>{(async()=>{if(s==="notifications")try{const Dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Dt)return;const kr=(await eae(Dt)).data||[];if(kr.length>0){const Xr=dv.map(Sr=>kr.find(rr=>rr.id===Sr.id)||Sr);l(Xr)}else l(dv)}catch(Dt){console.error("[SETTINGS] Failed to load notification preferences:",Dt),l(dv)}})()},[s,e]);const Gt=async()=>{A(!0);try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Dt=await mM(rt);Dt.authUrl&&(window.location.href=Dt.authUrl)}catch{a("Failed to connect Google Calendar"),A(!1)}},Ye=async()=>{D(!0);try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await use(rt),j(!1),S(null),r("Google account disconnected successfully")}catch{a("Failed to disconnect Google account")}finally{D(!1)}};I.useEffect(()=>{(async()=>{let Dt=e||JSON.parse(localStorage.getItem("user_data")||"null");if(Dt){const yr=Tp();$e({name:Dt.name||"",email:Dt.email||"",avatar:Dt.avatar||"",phone:Dt.phone||"",jobTitle:Dt.jobTitle||"",department:Dt.department||"",bio:Dt.bio||"",timezone:Dt.timezone||yr,language:Dt.language||"English"}),Pe(Dt.avatar||"")}})()},[e]);const Et=(rt,Dt=400,yr=400,kr=.8)=>new Promise((Xr,Sr)=>{if(rt.size>5242880){Sr(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const rr=new FileReader;rr.onload=On=>{const Hr=new Image;Hr.onload=()=>{let sn=Hr.width,jr=Hr.height;sn>jr?sn>Dt&&(jr=jr*Dt/sn,sn=Dt):jr>yr&&(sn=sn*yr/jr,jr=yr);const Gr=document.createElement("canvas");Gr.width=sn,Gr.height=jr;const Ne=Gr.getContext("2d");if(!Ne){Sr(new Error("Failed to create canvas context"));return}Ne.drawImage(Hr,0,0,sn,jr);const He=Gr.toDataURL("image/jpeg",kr);if(He.length>9e5)if(kr>.5){Et(rt,Dt,yr,kr-.1).then(Xr).catch(Sr);return}else{Sr(new Error("Image is too large even after compression. Please use a smaller image."));return}Xr(He)},Hr.onerror=()=>Sr(new Error("Failed to load image")),Hr.src=On.target?.result},rr.onerror=()=>Sr(new Error("Failed to read file")),rr.readAsDataURL(rt)}),Cr=async rt=>{const Dt=rt.target.files?.[0];if(Dt){if(!Dt.type.startsWith("image/")){a("Please select a valid image file.");return}oe(null);try{const yr=new FileReader;yr.onload=kr=>{const Xr=kr.target?.result;Qe(Xr),de(!0)},yr.onerror=()=>{a("Failed to read image file.")},yr.readAsDataURL(Dt)}catch(yr){const kr=yr.message||"Failed to load image. Please try a different image.";a(kr),oe(kr),ge.current&&(ge.current.value="")}}},tr=async rt=>{de(!1),Ie(!0);try{const yr=await(await fetch(rt)).blob(),kr=new File([yr],"cropped-image.jpg",{type:"image/jpeg"}),Xr=await Et(kr,400,400,.8);Pe(Xr),$e(Sr=>({...Sr,avatar:Xr})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch(Dt){const yr=Dt.message||"Failed to process cropped image.";a(yr),oe(yr)}finally{Ie(!1),ge.current&&(ge.current.value="")}},Or=()=>{de(!1),Qe(""),ge.current&&(ge.current.value="")},pr=async()=>{if(!le.name.trim()){oe("Full name is required.");return}Ue(!0);try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Dt=await qne(rt,le),yr=Dt.data||Dt;localStorage.setItem("user_data",JSON.stringify(yr)),t(yr),r("Profile updated successfully!"),oe(null)}catch{a("Failed to update profile.")}finally{Ue(!1)}};return n.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&n.jsxs("button",{onClick:pr,disabled:he,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[he?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(oi,{className:"w-4 h-4"}),"Save Changes"]})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[n.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:n.jsx(qi,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:n.jsx(Lb,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:n.jsx(r4,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:n.jsx(Jj,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:n.jsx(g0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:n.jsx(L8,{className:"w-4 h-4"})},{id:"crm",label:"CRM",icon:n.jsx(ul,{className:"w-4 h-4"})}].map(rt=>n.jsxs("button",{onClick:()=>i(rt.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===rt.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[rt.icon,rt.label]},rt.id))}),n.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Te&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Te}),n.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[n.jsxs("div",{className:"relative group",children:[n.jsx(Ps,{src:te,alt:le.name||"User",fallbackText:le.name||le.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),je&&n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:n.jsx(vt,{className:"w-6 h-6 text-white animate-spin"})}),n.jsx("button",{onClick:()=>ge.current?.click(),disabled:je,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:n.jsx(Oc,{className:"w-6 h-6"})}),n.jsx("input",{ref:ge,type:"file",accept:"image/*",onChange:Cr,className:"hidden",disabled:je})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900",children:le.name||"Set Name"}),n.jsxs("p",{className:"text-slate-500 text-sm",children:[le.jobTitle||"No Title","  ",le.department||"No Dept"]}),n.jsx("p",{className:"text-slate-400 text-xs mt-1",children:le.email})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:le.name,onChange:rt=>$e({...le,name:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Al,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:le.jobTitle,onChange:rt=>$e({...le,jobTitle:rt.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:le.department,onChange:rt=>$e({...le,department:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:le.phone,onChange:rt=>$e({...le,phone:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),n.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:le.bio,onChange:rt=>$e({...le,bio:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(N6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:le.timezone,onChange:rt=>$e({...le,timezone:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:nx.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),n.jsx("select",{value:le.language,onChange:rt=>$e({...le,language:rt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:k6.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]})]})]}),s==="notifications"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),n.jsx("div",{className:"space-y-4",children:o.map(rt=>n.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:rt.label}),n.jsx("p",{className:"text-xs text-slate-500",children:rt.description})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),n.jsx("button",{onClick:()=>bt(rt.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${rt.inApp?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${rt.inApp?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),n.jsx("button",{onClick:()=>bt(rt.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${rt.email?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${rt.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},rt.id))}),n.jsx("div",{className:"pt-4 border-t border-slate-100",children:n.jsxs("button",{onClick:async()=>{try{const rt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!rt){a("Please log in to save preferences.");return}await tae(rt,o),r("Notification preferences saved successfully!")}catch(rt){console.error("[SETTINGS] Failed to save notification preferences:",rt),a(rt.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[n.jsx(oi,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:n.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),n.jsx("div",{className:"p-6",children:y?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(mn,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),N&&n.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:N})]})]}),n.jsx("button",{onClick:Ye,disabled:P,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:P?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Kn,{className:"w-4 h-4 text-blue-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:n.jsx(Xa,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),n.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(yx,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),n.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[n.jsx("li",{children:" View and manage calendar events"}),n.jsx("li",{children:" Create, view, and manage files in Google Drive"}),n.jsx("li",{children:" Create and edit documents in Google Docs"}),n.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:n.jsx(Jj,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),n.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),n.jsx("button",{onClick:Gt,disabled:E,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:E?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(Kn,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(Xa,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),n.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(yx,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),n.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[n.jsx("li",{children:" Your data is encrypted and securely stored"}),n.jsx("li",{children:" We only request the minimum permissions needed"}),n.jsx("li",{children:" You can disconnect at any time"}),n.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),n.jsxs("button",{onClick:()=>{X(null),q({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Tp(),language:"English"}),J(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[n.jsx(hd,{className:"w-4 h-4"})," Add User"]})]}),n.jsx("div",{className:"p-4 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:U,onChange:rt=>H(rt.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:_?n.jsx("div",{className:"p-8 text-center",children:n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):R.map(rt=>n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ps,{src:rt.avatar,alt:rt.name||"",fallbackText:rt.name||rt.email||"U",className:"w-10 h-10 border",isAvatar:!0}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900 text-sm",children:rt.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[rt.email,"  ",n.jsx("span",{className:"font-bold text-indigo-600",children:rt.role})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{X(rt),q({email:rt.email,name:rt.name,role:rt.role||"User",jobTitle:rt.jobTitle||"",department:rt.department||"",phone:rt.phone||"",bio:rt.bio||"",timezone:rt.timezone||Tp(),language:rt.language||"English"}),J(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:n.jsx(Lo,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>z(rt),className:"p-2 text-slate-400 hover:text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},rt.id))})]}),s==="preferences"&&n.jsx(Fbe,{currentUser:e,showSuccess:r,showError:a}),s==="workspace"&&n.jsx(Lbe,{currentUser:e,showSuccess:r,showError:a}),s==="crm"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-indigo-50/30",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center",children:n.jsx(ul,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CRM Settings"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Manage industries for company imports and CRM data."})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Industries"}),n.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Industries are used when uploading companies. Add any industry that may appear in your company import files. Only admins can add, edit, or delete."}),ze?n.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-6",children:[n.jsx(vt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading industries..."})]}):n.jsxs("div",{className:"space-y-2",children:[e?.role==="Admin"&&n.jsxs("button",{type:"button",onClick:()=>Me({open:!0,name:""}),className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-semibold hover:bg-indigo-700 transition-colors",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add industry"]}),fe.length===0?n.jsx("p",{className:"text-sm text-slate-500 py-4",children:"No industries yet. Add one to use with company uploads."}):n.jsx("ul",{className:"divide-y divide-slate-100",children:fe.map(rt=>n.jsxs("li",{className:"flex items-center justify-between py-3 px-3 rounded-lg hover:bg-slate-50",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:rt.name}),rt.usageCount!==void 0&&n.jsxs("span",{className:"text-xs text-slate-400 ml-2",children:["(",rt.usageCount," companies)"]})]}),e?.role==="Admin"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Me({open:!0,industry:rt,name:rt.name}),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:n.jsx(Lo,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:async()=>{if((rt.usageCount||0)>0){a("Cannot delete: this industry is in use by companies.");return}try{await tse(rt.id),r("Industry deleted"),qt()}catch(Dt){a(Dt?.message||"Failed to delete industry")}},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},rt.id))})]})]})]})}),Fe.open&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:Fe.industry?"Edit industry":"Add industry"}),n.jsx("input",{type:"text",value:Fe.name,onChange:rt=>Me(Dt=>({...Dt,name:rt.target.value})),placeholder:"Industry name",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm mb-4"}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Me({open:!1,name:""}),className:"px-4 py-2 rounded-xl text-slate-600 hover:bg-slate-100 font-medium text-sm",children:"Cancel"}),n.jsxs("button",{type:"button",disabled:et,onClick:async()=>{const rt=Fe.name.trim();if(!rt){a("Name is required");return}ut(!0);try{Fe.industry?(await ese(Fe.industry.id,{name:rt}),r("Industry updated")):(await Zae({name:rt}),r("Industry added")),Me({open:!1,name:""}),qt()}catch(Dt){a(Dt?.message||"Failed to save industry")}finally{ut(!1)}},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[et&&n.jsx(vt,{className:"w-4 h-4 animate-spin"}),Fe.industry?"Save":"Add"]})]})]})})]})]}),Y&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:re?"Edit User":"Add New User"}),n.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:V.name,onChange:rt=>q({...V,name:rt.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),n.jsx("input",{type:"email",value:V.email,onChange:rt=>q({...V,email:rt.target.value}),placeholder:"Email Address",disabled:!!re,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),n.jsxs("select",{value:V.role,onChange:rt=>q({...V,role:rt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),n.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),n.jsx("option",{value:"Admin",children:"Admin - Full access"}),n.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[V.role==="Viewer"&&"Read-only access to shared inbox",V.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",V.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",V.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Al,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:V.jobTitle,onChange:rt=>q({...V,jobTitle:rt.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:V.department,onChange:rt=>q({...V,department:rt.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:V.phone,onChange:rt=>q({...V,phone:rt.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:V.bio,onChange:rt=>q({...V,bio:rt.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(N6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:V.timezone,onChange:rt=>q({...V,timezone:rt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:nx.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),n.jsx("select",{value:V.language,onChange:rt=>q({...V,language:rt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:k6.map(rt=>n.jsx("option",{value:rt.value,children:rt.label},rt.value))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>J(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{se(!0);try{re?await Mne(re.id,V):await Fne(V),J(!1),At(),r(re?"User updated successfully!":"User created successfully!")}catch(rt){a(rt.message||"Failed to save user")}finally{se(!1)}},disabled:K||!V.name||!V.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:K?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),re?"Updating...":"Creating..."]}):re?"Update":"Invite"})]})]})}),O&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:O.name}),n.jsx("p",{className:"text-xs text-slate-500",children:O.email}),O.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:O.role})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>z(null),disabled:ee===O.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:async()=>{W(O.id);try{await Une(O.id),await At(),z(null),r("User deleted successfully")}catch(rt){a(rt.message||"Failed to delete user")}finally{W(null)}},disabled:ee===O.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===O.id?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),ue&&Ae&&n.jsx(Dbe,{imageSrc:Ae,onCrop:tr,onCancel:Or,aspectRatio:1,circularCrop:!0})]})},Rbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),a=e?.role==="Admin",[s,i]=I.useState("companies"),[o,l]=I.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,d]=I.useState({groups:[],totalDuplicates:0}),[u,f]=I.useState({groups:[],totalDuplicates:0}),[p,m]=I.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[b,v]=I.useState({mismatches:[],count:0}),[g,w]=I.useState(null),[y,j]=I.useState(!1),[N,S]=I.useState({}),E=I.useCallback(async()=>{l(J=>({...J,companies:!0}));try{const J=await Kae(),re=J?.data??J;d({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),d({groups:[],totalDuplicates:0})}finally{l(J=>({...J,companies:!1}))}},[r]),A=I.useCallback(async()=>{l(J=>({...J,contacts:!0}));try{const J=await Xae(),re=J?.data??J;f({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),f({groups:[],totalDuplicates:0})}finally{l(J=>({...J,contacts:!1}))}},[r]),P=I.useCallback(async()=>{l(J=>({...J,incomplete:!0}));try{const J=await Yae(),re=J?.data??J;m({companies:re.companies||[],contacts:re.contacts||[],deals:re.deals||[],projects:re.projects||[],invoices:re.invoices||[]})}catch{r("Failed to load incomplete records"),m({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(J=>({...J,incomplete:!1}))}},[r]),D=I.useCallback(async()=>{l(J=>({...J,mismatches:!0}));try{const J=await Jae(),re=J?.data??J;v({mismatches:re.mismatches||[],count:re.count??0})}catch{r("Failed to load domain mismatches"),v({mismatches:[],count:0})}finally{l(J=>({...J,mismatches:!1}))}},[r]);I.useEffect(()=>{a&&(s==="companies"?E():s==="contacts"?A():s==="incomplete"?P():s==="mismatches"&&D())},[a,s,E,A,P,D]);const R=()=>{s==="companies"?E():s==="contacts"?A():s==="incomplete"?P():D()},T=(J,re,X,ee,W,O)=>{w({open:!0,type:J,primaryId:re,secondaryId:X,primaryName:ee,secondaryName:W,groupKey:O})},_=()=>{y||w(null)},B=async()=>{if(g){j(!0);try{g.type==="company"?(await Vae(g.primaryId,g.secondaryId),t("Companies merged successfully"),E()):(await Gae(g.primaryId,g.secondaryId),t("Contacts merged successfully"),A()),w(null)}catch(J){r(J?.message||"Merge failed")}finally{j(!1)}}},U=J=>{S(re=>({...re,[J]:!re[J]}))};if(!a)return n.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[n.jsx(OU,{className:"w-12 h-12 text-amber-600 mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const H=[{id:"companies",label:"Duplicate Companies",icon:n.jsx(ul,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:n.jsx(qi,{className:"w-4 h-4"}),count:u.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:n.jsx(bU,{className:"w-4 h-4"}),count:p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:n.jsx(hh,{className:"w-4 h-4"}),count:b.count}],Y=o[s];return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),n.jsxs("button",{onClick:R,disabled:Y,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Y?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(fd,{className:"w-4 h-4"}),"Refresh"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:H.map(J=>n.jsxs("button",{onClick:()=>i(J.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===J.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[J.icon,J.label,J.count!=null&&J.count>0&&n.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===J.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:J.count})]},J.id))}),n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Y&&n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsx(vt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Y&&s==="companies"&&n.jsx("div",{className:"p-6",children:c.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):n.jsx("ul",{className:"space-y-4",children:c.groups.map(J=>{const re=`company-${J.domain}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>U(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.domain}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," companies"]}),X?n.jsx(Ts,{className:"w-5 h-5"}):n.jsx(ia,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.companies.map((ee,W)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),ee.industry&&n.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",ee.industry,")"]})]}),J.companies.length>=2&&n.jsx("div",{className:"flex gap-2",children:J.companies.filter(O=>O.id!==ee.id).map(O=>n.jsxs("button",{onClick:()=>T("company",ee.id,O.id,ee.name||ee.id,O.name||O.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Qv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},O.id))})]},ee.id))})]},re)})})}),!Y&&s==="contacts"&&n.jsx("div",{className:"p-6",children:u.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):n.jsx("ul",{className:"space-y-4",children:u.groups.map(J=>{const re=`contact-${J.email}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>U(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.email}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," contacts"]}),X?n.jsx(Ts,{className:"w-5 h-5"}):n.jsx(ia,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.contacts.map(ee=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),n.jsx("span",{className:"text-slate-500 text-sm ml-2",children:ee.email})]}),J.contacts.filter(W=>W.id!==ee.id).map(W=>n.jsxs("button",{onClick:()=>T("contact",ee.id,W.id,ee.name||ee.id,W.name||W.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Qv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},W.id))]},ee.id))})]},re)})})}),!Y&&s==="incomplete"&&n.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:p.companies,recordLabel:J=>J.name||J.id},{key:"contacts",label:"Contacts",items:p.contacts,recordLabel:J=>J.name||J.email||J.id},{key:"deals",label:"Deals",items:p.deals,recordLabel:J=>J.name||J.title||J.id},{key:"projects",label:"Projects",items:p.projects,recordLabel:J=>J.name||J.title||J.id},{key:"invoices",label:"Invoices",items:p.invoices,recordLabel:J=>J.id}].map(({key:J,label:re,items:X,recordLabel:ee})=>X.length===0?null:n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:re}),n.jsx("ul",{className:"space-y-2",children:X.map(W=>n.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx(Rn,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900",children:ee(W.record)}),n.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:W.errors.map((O,z)=>n.jsx("li",{children:O},z))})]})]},W.record.id))})]},J)),p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length===0&&n.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Y&&s==="mismatches"&&n.jsx("div",{className:"p-6",children:b.mismatches.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):n.jsx("ul",{className:"space-y-3",children:b.mismatches.map((J,re)=>n.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx(Rn,{className:"w-5 h-5 text-amber-600 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("p",{className:"font-medium text-slate-900",children:[J.contact?.name," (",J.contact?.email,")"]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",n.jsx("strong",{children:J.contactDomain}),"  Company domain: ",n.jsx("strong",{children:J.companyDomain})," (",J.company?.name,")"]})]})]},re))})})]}),g&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:_}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),n.jsx("button",{onClick:_,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:y,children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",n.jsx("strong",{children:g.secondaryName})," into ",n.jsx("strong",{children:g.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:_,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:y,children:"Cancel"}),n.jsxs("button",{onClick:B,disabled:y,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[y?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):n.jsx(Qv,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},Bbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),[a,s]=I.useState([]),[i,o]=I.useState(!1),[l,c]=I.useState(null),[d,u]=I.useState(null),[f,p]=I.useState(!1),[m,b]=I.useState([]),v=e?.role==="Admin",[g,w]=I.useState(()=>{const _=!v&&e?.id?e.id:void 0;return _?{userId:_}:{}}),[y,j]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const B=await Ic();b(B?.data||[])}catch(B){console.error("Failed to load users:",B)}})()},[]);const N=I.useCallback(async()=>{o(!0);try{const B=(await lse({...g,limit:100}))?.data||[];s(B)}catch(_){r(_.message||"Failed to load import history"),s([])}finally{o(!1)}},[g,r]);I.useEffect(()=>{N()},[N]);const S=async _=>{c(_),p(!0);try{const B=await ose(_.id);u(B?.data||B)}catch(B){r(B.message||"Failed to load batch details"),u(null)}finally{p(!1)}},E=_=>{if(!_)return"N/A";try{return(_.toDate?_.toDate():new Date(_)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},A=_=>m.find(U=>U.id===_)?.name||_||"Unknown",P=_=>{switch(_){case"completed":return n.jsx(mn,{className:"w-5 h-5 text-green-600"});case"failed":return n.jsx(Fb,{className:"w-5 h-5 text-red-600"});case"processing":return n.jsx(es,{className:"w-5 h-5 text-yellow-600"});default:return n.jsx(es,{className:"w-5 h-5 text-slate-400"})}},D=_=>{const B="px-2 py-1 rounded-full text-xs font-medium";switch(_){case"completed":return`${B} bg-green-100 text-green-700`;case"failed":return`${B} bg-red-100 text-red-700`;case"processing":return`${B} bg-yellow-100 text-yellow-700`;default:return`${B} bg-slate-100 text-slate-700`}},R=()=>{w({})},T=Object.keys(g).length>0;return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(ud,{className:"w-6 h-6 text-indigo-600"}),"Import History"]}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"View and manage past import batches"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>j(!y),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${y||T?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50"}`,children:[n.jsx(Nf,{className:"w-4 h-4"}),"Filters",T&&n.jsx("span",{className:"bg-white text-indigo-600 rounded-full px-2 py-0.5 text-xs font-bold",children:Object.keys(g).length})]}),n.jsxs("button",{onClick:N,disabled:i,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-50 flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fd,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]})]})]}),y&&n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Filter Imports"}),n.jsx("button",{onClick:R,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear all"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"User"}),n.jsxs("select",{value:g.userId||"",onChange:_=>w(B=>({...B,userId:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All users"}),m.map(_=>n.jsx("option",{value:_.id,children:_.name||_.email},_.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Type"}),n.jsxs("select",{value:g.type||"",onChange:_=>w(B=>({...B,type:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All types"}),n.jsx("option",{value:"company",children:"Companies"}),n.jsx("option",{value:"contact",children:"Contacts"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Status"}),n.jsxs("select",{value:g.status||"",onChange:_=>w(B=>({...B,status:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All statuses"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"processing",children:"Processing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:g.startDate||"",onChange:_=>w(B=>({...B,startDate:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:g.endDate||"",onChange:_=>w(B=>({...B,endDate:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[P(l.status),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Import Batch Details"}),n.jsx("p",{className:"text-sm text-slate-500",children:l.fileName})]})]}),n.jsx("button",{onClick:()=>{c(null),u(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Rows"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.totalRows})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Successful"}),n.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.successfulImports})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Failed"}),n.jsx("p",{className:"text-2xl font-bold text-red-700",children:l.failedRows})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-indigo-600 mb-1",children:"Status"}),n.jsx("span",{className:D(l.status),children:l.status})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Type"}),n.jsxs("p",{className:"text-sm text-slate-900 capitalize flex items-center gap-2",children:[l.type==="company"?n.jsx(ul,{className:"w-4 h-4"}):n.jsx(qi,{className:"w-4 h-4"}),l.type]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Uploaded By"}),n.jsx("p",{className:"text-sm text-slate-900",children:A(l.uploadedBy)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Date"}),n.jsxs("p",{className:"text-sm text-slate-900 flex items-center gap-2",children:[n.jsx(Kn,{className:"w-4 h-4"}),E(l.createdAt)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"File Name"}),n.jsxs("p",{className:"text-sm text-slate-900 flex items-center gap-2",children:[n.jsx(vx,{className:"w-4 h-4"}),l.fileName]})]})]}),l.type==="company"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Created Companies"}),n.jsx("p",{className:"text-xl font-bold text-blue-700",children:l.createdCompanies||0})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Updated Companies"}),n.jsx("p",{className:"text-xl font-bold text-purple-700",children:l.updatedCompanies||0})]})]}),l.type==="contact"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Created Contacts"}),n.jsx("p",{className:"text-xl font-bold text-blue-700",children:l.createdContacts||0})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Updated Contacts"}),n.jsx("p",{className:"text-xl font-bold text-purple-700",children:l.updatedContacts||0})]})]}),d&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-2",children:"Batch ID"}),n.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-slate-700",children:l.id})]})]})]})})]})}),n.jsx("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:i?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(ud,{className:"w-12 h-12 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"No import batches found"}),n.jsx("p",{className:"text-sm text-slate-400 mt-1",children:T?"Try adjusting your filters":"Import batches will appear here after you upload companies or contacts"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"File Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Results"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Uploaded By"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200",children:a.map(_=>n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vx,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:_.fileName})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[_.type==="company"?n.jsx(ul,{className:"w-3 h-3"}):n.jsx(qi,{className:"w-3 h-3"}),_.type]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:D(_.status),children:_.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("span",{className:"text-green-600 font-medium",children:_.successfulImports})," / ",n.jsx("span",{className:"text-slate-900",children:_.totalRows}),_.failedRows>0&&n.jsxs(n.Fragment,{children:[" ",n.jsxs("span",{className:"text-red-600",children:["(",_.failedRows," failed)"]})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-slate-600",children:A(_.uploadedBy)})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-slate-600",children:E(_.createdAt)})}),n.jsx("td",{className:"px-4 py-3 text-right",children:n.jsxs("button",{onClick:()=>S(_),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors",children:[n.jsx(ru,{className:"w-4 h-4"}),"View"]})})]},_.id))})]})})})]})},mf={meet:/https?:\/\/(?:www\.)?(?:meet\.google\.com|meeting\.google\.com)\/[^\s<>"']+/gi,zoom:/https?:\/\/(?:[a-z0-9.-]+\.)?zoom\.us\/(?:j\/)?[^\s<>"']+/gi,teams:/https?:\/\/(?:teams\.microsoft\.com|.*\.teams\.microsoft\.com)\/[^\s<>"']+/gi,webex:/https?:\/\/(?:[a-z0-9.-]+\.)?webex\.com\/[^\s<>"']+/gi,generic:/https?:\/\/[^\s<>"']+/gi};function Ube(e){const t=e.conferenceData?.entryPoints;if(t?.length){const i=t.find(o=>o.entryPointType==="video"||o.uri?.includes("meet.")||o.uri?.includes("zoom")||o.uri?.includes("teams")||o.uri?.includes("webex"))||t[0];if(i?.uri){const o=i.uri;return o.includes("meet.")||o.includes("meeting.google")?{url:o,platform:"google_meet"}:o.includes("zoom")?{url:o,platform:"zoom"}:o.includes("teams")?{url:o,platform:"teams"}:o.includes("webex")?{url:o,platform:"webex"}:{url:o,platform:"generic"}}}const r=e.location||"";let a=r.match(mf.meet);if(a?.[0])return{url:a[0],platform:"google_meet"};if(a=r.match(mf.zoom),a?.[0])return{url:a[0],platform:"zoom"};if(a=r.match(mf.teams),a?.[0])return{url:a[0],platform:"teams"};if(a=r.match(mf.webex),a?.[0])return{url:a[0],platform:"webex"};const s=e.description||"";if(a=s.match(mf.meet),a?.[0])return{url:a[0],platform:"google_meet"};if(a=s.match(mf.zoom),a?.[0])return{url:a[0],platform:"zoom"};if(a=s.match(mf.teams),a?.[0])return{url:a[0],platform:"teams"};if(a=s.match(mf.webex),a?.[0])return{url:a[0],platform:"webex"};if(a=s.match(mf.generic),a?.[0]&&(a[0].includes("meet")||a[0].includes("zoom")||a[0].includes("teams")||a[0].includes("webex"))){if(a[0].includes("meet"))return{url:a[0],platform:"google_meet"};if(a[0].includes("zoom"))return{url:a[0],platform:"zoom"};if(a[0].includes("teams"))return{url:a[0],platform:"teams"};if(a[0].includes("webex"))return{url:a[0],platform:"webex"}}return null}function qbe(e){try{const t=Date.now(),r=new Date(e.start).getTime(),a=new Date(e.end).getTime(),s=(r-t)/6e4,i=(t-a)/6e4;return s<=15&&i<=30?"Join Now":i>30?"Rejoin Meeting":s>15?`Join Meeting (starts in ${Math.floor(s)} min)`:"Join Meeting"}catch{return"Join Meeting"}}function $be(e){switch(e){case"google_meet":return"Google Meet";case"zoom":return"Zoom";case"teams":return"Microsoft Teams";case"webex":return"Webex";default:return"Video Call"}}const Gj=4;function S8(e){const t=typeof e=="string"?new Date(e):e,r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${r}-${a}-${s}T${i}:${o}`}function _8(e){const t=typeof e=="string"?new Date(e):e,r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${r}-${a}-${s}`}const zbe=({isOpen:e,event:t,onClose:r,onEdit:a,onDelete:s,onEventUpdated:i,onEventDeleted:o,calendarSource:l,calendars:c=[],currentUserId:d})=>{const{showSuccess:u,showError:f}=jn(),[p,m]=I.useState(!1),[b,v]=I.useState(!1),[g,w]=I.useState(null),[y,j]=I.useState(null),[N,S]=I.useState(!1),[E,A]=I.useState(!1),[P,D]=I.useState("idle"),[R,T]=I.useState(!1),[_,B]=I.useState(!1),[U,H]=I.useState(""),[Y,J]=I.useState(""),re=I.useRef(null),X=l?.accessRole==="reader"||l?.accessRole==="freeBusyReader";I.useEffect(()=>{t&&(w(t),j(t),T(!1),J(""),re.current=null)},[t?.id,t?.updatedAt]);const ee=N&&y&&g&&(y.title!==g.title||y.description!==g.description||y.location!==g.location||y.start!==g.start||y.end!==g.end||y.isAllDay!==g.isAllDay),W=I.useMemo(()=>y?Ube(y):null,[y]),O=y?qbe(y):"",z=W?$be(W.platform):"",V=()=>{W?.url&&navigator.clipboard.writeText(W.url).then(()=>{m(!0),setTimeout(()=>m(!1),2e3)})},q=()=>{W?.url&&window.open(W.url,"_blank","noopener,noreferrer")},K=()=>{if(ee){B(!0);return}r()},se=async(ut=!1)=>{if(!y||!d)return;T(!1);const bt={title:y.title,description:y.description??"",start:y.start,end:y.end,location:y.location??"",isAllDay:y.isAllDay??!1};A(!0),D("syncing"),ut||i?.(y);try{if(y.source==="google"&&y.googleEventId){const At=y.calendarId||"primary",qt=await fie(d,At,y.googleEventId,{summary:bt.title,description:bt.description,start:bt.start,end:bt.end,location:bt.location,isAllDay:bt.isAllDay,attendees:y.attendees?.map(Ye=>typeof Ye=="string"?{email:Ye}:{email:Ye.email}),reminders:y.reminders?.minutesBefore?.length?{minutesBefore:y.reminders.minutesBefore}:void 0}),Gt=qt?.data??qt;w(Gt),j(Gt),u("Event updated"),i?.(Gt)}else{const At=await gM(y.id,{...bt,type:y.type||"meeting",color:y.color,participants:y.participants??y.attendees?.map(Ye=>typeof Ye=="string"?Ye:Ye.email)??[]}),qt=At?.data??At,Gt={...y,...qt};w(Gt),j(Gt),u("Event updated"),i?.(Gt)}S(!1),D("success")}catch(At){D("error");const qt=At?.status??At?.response?.status,Gt=At?.code??At?.data?.code;qt===409||Gt==="CONFLICT"?(T(!0),j(g),i?.(g??null)):(j(g),i?.(g??null),f(At?.message??"Failed to save event"))}finally{A(!1)}},pe=()=>{T(!1),se(!0)},ie=()=>{T(!1),i?.(null),r()},le=async()=>{console.log("[EventDetailDrawer] handleDelete called");const ut=re.current??y;if(console.log("[EventDetailDrawer] eventToDelete:",{id:ut?.id,source:ut?.source,googleEventId:ut?.googleEventId,calendarId:ut?.calendarId,fullEvent:ut}),re.current=null,!ut){console.error("[EventDetailDrawer] No event to delete"),f("Event not found");return}if(!d){console.error("[EventDetailDrawer] No currentUserId"),f("Please sign in to delete events");return}const bt=ut.googleEventId??(ut.source==="google"&&ut.id?.startsWith("gcal_")?ut.id.replace(/^gcal_/,""):void 0);if(console.log("[EventDetailDrawer] Extracted googleEventId:",bt),ut.source==="google"&&!bt){console.error("[EventDetailDrawer] Google event but no googleEventId"),f("Cannot delete: event ID missing");return}A(!0);try{ut.source==="google"&&bt?(console.log("[EventDetailDrawer] Calling apiDeleteGoogleCalendarEvent",{userId:d,calendarId:ut.calendarId||"primary",eventId:bt}),await _I(d,ut.calendarId||"primary",bt),console.log("[EventDetailDrawer] apiDeleteGoogleCalendarEvent completed successfully")):(console.log("[EventDetailDrawer] Calling apiDeleteEvent",{id:ut.id}),await uie(ut.id),console.log("[EventDetailDrawer] apiDeleteEvent completed successfully")),u("Event deleted"),o?.(ut),r()}catch(At){console.error("[EventDetailDrawer] Delete error:",At);const qt=At?.message??At?.data?.message??"Failed to delete event";f(qt)}finally{A(!1)}},$e=async()=>{if(!y||!d||y.source!=="google")return;const ut=y.calendarId||"primary",bt=new Date(y.start),At=new Date(y.end);bt.setHours(bt.getHours()+1),At.setHours(At.getHours()+1),A(!0);try{const qt=await bI(d,ut,{summary:(y.title||"Untitled")+" (copy)",description:y.description,start:bt.toISOString(),end:At.toISOString(),location:y.location,isAllDay:y.isAllDay,attendees:y.attendees?.map(Ye=>({email:Ye.email}))}),Gt=qt?.data??qt;u("Event duplicated"),i?.(Gt),r()}catch(qt){f(qt?.message??"Failed to duplicate event")}finally{A(!1)}},he=async()=>{if(!y||!d||!Y||y.source!=="google"||!y.googleEventId)return;const ut=y.calendarId||"primary";A(!0);try{const bt=await bI(d,Y,{summary:y.title||"Untitled",description:y.description,start:y.start,end:y.end,location:y.location,isAllDay:y.isAllDay,attendees:y.attendees?.map(qt=>({email:qt.email}))}),At=bt?.data??bt;await _I(d,ut,y.googleEventId),u("Event moved to calendar"),o?.(y),i?.(At),J(""),r()}catch(bt){f(bt?.message??"Failed to move event")}finally{A(!1)}},Ue=I.useRef(K),Te=I.useRef(se),oe=I.useRef(le);if(Ue.current=K,Te.current=se,oe.current=le,I.useEffect(()=>{if(!e)return;const ut=bt=>{const At=bt.target,qt=At.tagName==="INPUT"||At.tagName==="TEXTAREA"||At.isContentEditable;if(bt.key==="Escape"){Ue.current();return}if(bt.key==="e"&&!bt.ctrlKey&&!bt.metaKey&&!bt.altKey&&!qt){bt.preventDefault(),X||S(Gt=>!Gt);return}if((bt.metaKey||bt.ctrlKey)&&bt.key==="s"&&!qt){bt.preventDefault(),ee&&Te.current();return}if((bt.metaKey||bt.ctrlKey)&&bt.key==="Enter"&&!qt){bt.preventDefault(),ee&&Te.current().then(()=>r());return}bt.key==="Delete"&&!qt&&(bt.preventDefault(),oe.current())};return window.addEventListener("keydown",ut),()=>window.removeEventListener("keydown",ut)},[e,X,ee,r]),!e||!t)return null;const te=y??t,Pe=Intl.DateTimeFormat().resolvedOptions().timeZone;let je="",Ie="",ue="";try{const ut=new Date(te.start),bt=new Date(te.end);if(je=ut.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),te.isAllDay){Ie="All day";const At=Math.round((bt.getTime()-ut.getTime())/(1440*60*1e3));ue=At<=1?"All day":`${At} days`}else{Ie=`${ut.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${bt.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;const At=Math.round((bt.getTime()-ut.getTime())/6e4);At<60?ue=`${At} minutes`:At%60===0?ue=`${At/60} hour${At/60!==1?"s":""}`:ue=`${Math.floor(At/60)}h ${At%60}m`}}catch{je=te.start,Ie=te.end,ue=""}const de=(te.status||"confirmed").toLowerCase(),Ae=de==="cancelled"?"bg-red-50 text-red-600 border-red-100":de==="tentative"?"bg-amber-50 text-amber-600 border-amber-100":"bg-emerald-50 text-emerald-600 border-emerald-100",Qe=de==="cancelled"?"Cancelled":de==="tentative"?"Tentative":"Confirmed",ge=l||{name:te.source==="google"?"Google Calendar":"Calendar",color:te.color||"#6366f1"},fe=te.attendees?.length?te.attendees:te.participants?.map(ut=>({email:ut,responseStatus:void 0}))||[],_e=(te.description||"").split(`
`).length>Gj,ze=_e&&!b,Se=te.reminders?.minutesBefore?.length&&te.reminders.minutesBefore.length>0?te.reminders.minutesBefore.map(ut=>`${ut} min before`).join(", "):null,Fe=te.recurrence?.length?(te.recurrence[0]||"").replace(/^RRULE:/i,""):null,Me=y?.start?S8(y.start):"",et=y?.end?S8(y.end):"";return n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:K,"aria-hidden":!0}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-[480px] bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-300 ease-out flex flex-col",role:"dialog","aria-modal":"true","aria-labelledby":"event-drawer-title",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[n.jsx("button",{type:"button",onClick:K,className:"absolute top-5 right-5 min-h-[48px] min-w-[48px] flex items-center justify-center p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all shadow-sm z-10","aria-label":"Close",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"pr-10",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border ${Ae}`,children:Qe}),X&&n.jsx("span",{className:"px-2.5 py-0.5 rounded-full text-[10px] font-medium bg-slate-100 text-slate-600 border border-slate-200",children:"Read-only"}),n.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-slate-500",style:{color:ge.color},children:[n.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:ge.color}}),ge.name]})]}),N&&y?n.jsx("input",{id:"event-drawer-title",value:y.title,onChange:ut=>j({...y,title:ut.target.value}),className:"mt-2 w-full text-xl font-bold text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-100",placeholder:"Event title"}):n.jsx("h2",{id:"event-drawer-title",className:"text-xl font-bold text-slate-900 mt-2 leading-tight",children:te.title||"No title"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[W&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{type:"button",onClick:q,className:"w-full flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-indigo-100 transition-all",children:[n.jsx(sh,{className:"w-5 h-5 shrink-0"}),O,"  ",z]}),n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 transition-colors",children:[p?n.jsx(xd,{className:"w-4 h-4 text-emerald-600"}):n.jsx(Xj,{className:"w-4 h-4"}),p?"Copied!":"Copy meeting link"]})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(es,{className:"w-3 h-3"})," Time & duration"]}),N&&y?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:y.isAllDay??!1,onChange:ut=>j({...y,isAllDay:ut.target.checked}),className:"rounded border-slate-300"}),"All day"]}),!y.isAllDay&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"Start"}),n.jsx("input",{type:"datetime-local",value:Me,onChange:ut=>j({...y,start:ut.target.value?new Date(ut.target.value).toISOString():y.start}),className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"End"}),n.jsx("input",{type:"datetime-local",value:et,onChange:ut=>j({...y,end:ut.target.value?new Date(ut.target.value).toISOString():y.end}),className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]}),y.isAllDay&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"Start date"}),n.jsx("input",{type:"date",value:y.start?_8(y.start):"",onChange:ut=>{const bt=ut.target.value;if(!bt)return;const At=new Date(bt),qt=y.end?new Date(y.end):new Date(At);qt.setDate(At.getDate()),qt<=At&&qt.setDate(At.getDate()+1),j({...y,start:At.toISOString(),end:qt.toISOString()})},className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"End date"}),n.jsx("input",{type:"date",value:y.end?_8(y.end):"",onChange:ut=>{const bt=ut.target.value;bt&&j({...y,end:new Date(bt).toISOString()})},className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]}),n.jsx("p",{className:"text-[10px] text-slate-400",children:Pe})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-slate-900 font-medium",children:je}),n.jsx("p",{className:"text-sm text-slate-700",children:Ie}),ue&&n.jsx("p",{className:"text-xs text-slate-500",children:ue}),n.jsx("p",{className:"text-[10px] text-slate-400",children:Pe})]})]}),(fe.length>0||N)&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(qi,{className:"w-3 h-3"})," People"]}),n.jsx("ul",{className:"space-y-1.5",children:fe.map((ut,bt)=>{const At=typeof ut=="string"?ut:ut.email,qt=typeof ut=="object"&&ut.displayName?ut.displayName:At,Gt=typeof ut=="object"?ut.responseStatus:void 0,Ye=(qt||At).charAt(0).toUpperCase(),Et=Gt==="accepted"?n.jsx(xd,{className:"w-3.5 h-3.5 text-emerald-500"}):Gt==="declined"?n.jsx(Fb,{className:"w-3.5 h-3.5 text-red-400"}):Gt==="tentative"?n.jsx(I8,{className:"w-3.5 h-3.5 text-amber-500"}):null;return n.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-200 text-slate-700 flex items-center justify-center text-xs font-bold shrink-0",children:Ye}),n.jsx("span",{className:"truncate text-slate-900 flex-1 min-w-0",children:qt||At}),Et&&n.jsx("span",{className:"shrink-0",children:Et}),N&&y&&n.jsx("button",{type:"button",onClick:()=>{const Cr=(y.attendees||y.participants?.map(tr=>({email:tr}))||[]).filter((tr,Or)=>Or!==bt);j({...y,attendees:Cr.length?Cr:void 0,participants:Cr.map(tr=>typeof tr=="string"?tr:tr.email)})},className:"p-1 rounded text-slate-400 hover:text-red-500 hover:bg-red-50 transition-colors shrink-0","aria-label":`Remove ${At}`,children:n.jsx(Zt,{className:"w-4 h-4"})})]},bt)})}),N&&y&&n.jsxs("div",{className:"flex gap-2 pt-1",children:[n.jsx("input",{type:"email",value:U,onChange:ut=>H(ut.target.value),placeholder:"Add guest email",className:"flex-1 min-w-0 px-3 py-2 border border-slate-200 rounded-lg text-sm",onKeyDown:ut=>{if(ut.key==="Enter"){ut.preventDefault();const bt=U.trim();if(!bt)return;const At=y.attendees||y.participants?.map(qt=>({email:qt}))||[];if(At.some(qt=>(typeof qt=="string"?qt:qt.email).toLowerCase()===bt.toLowerCase()))return;j({...y,attendees:[...At,{email:bt}],participants:[...y.participants||[],bt]}),H("")}}}),n.jsx("button",{type:"button",onClick:()=>{const ut=U.trim();if(!ut)return;const bt=y.attendees||y.participants?.map(At=>({email:At}))||[];if(bt.some(At=>(typeof At=="string"?At:At.email).toLowerCase()===ut.toLowerCase())){H("");return}j({...y,attendees:[...bt,{email:ut}],participants:[...y.participants||[],ut]}),H("")},className:"px-3 py-2 bg-slate-100 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-200 transition-colors shrink-0",children:"Add"})]})]}),(te.location||W?.url||N)&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(rS,{className:"w-3 h-3"})," Location"]}),N&&y?n.jsx("input",{type:"text",value:y.location??"",onChange:ut=>j({...y,location:ut.target.value}),placeholder:"Location or video link",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"}):te.location?n.jsx("p",{className:"text-sm text-slate-700",children:te.location.startsWith("http")?n.jsx("a",{href:te.location,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline truncate block",children:te.location}):te.location}):W?.url?n.jsx("a",{href:W.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline truncate block",children:W.url}):null]}),(te.description||N)&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(Gn,{className:"w-3 h-3"})," Description"]}),N&&y?n.jsx("textarea",{value:y.description??"",onChange:ut=>j({...y,description:ut.target.value}),placeholder:"Description",rows:4,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm resize-y"}):te.description?.includes("<")?n.jsx("div",{className:"text-sm text-slate-700 break-words prose prose-sm max-w-none",style:ze?{display:"-webkit-box",WebkitLineClamp:Gj,WebkitBoxOrient:"vertical",overflow:"hidden"}:void 0,dangerouslySetInnerHTML:{__html:te.description}}):te.description?n.jsx("div",{className:"text-sm text-slate-700 whitespace-pre-wrap break-words",style:ze?{display:"-webkit-box",WebkitLineClamp:Gj,WebkitBoxOrient:"vertical",overflow:"hidden"}:void 0,children:te.description}):null,!N&&_e&&n.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-1 text-xs text-indigo-600 hover:underline mt-1",children:[b?n.jsx(u1,{className:"w-3 h-3"}):n.jsx(Ts,{className:"w-3 h-3"}),b?"Show less":"Show more"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Kn,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:ge.color}}),n.jsxs("span",{children:["Calendar: ",ge.name]})]}),(Se||Fe)&&n.jsxs("div",{className:"space-y-1 text-xs text-slate-500",children:[Se&&n.jsxs("p",{children:["Reminders: ",Se]}),Fe&&n.jsxs("p",{children:["Repeats: ",Fe]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/30 space-y-2 shrink-0",children:N?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{S(!1),j(g)},disabled:E,className:"flex-1 flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsxs("button",{type:"button",onClick:()=>se(),disabled:E||!y?.title?.trim(),className:"flex-1 flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-colors disabled:opacity-50",children:[E?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(oi,{className:"w-4 h-4"}),"Save"]})]}):n.jsxs(n.Fragment,{children:[te.htmlLink&&n.jsxs("a",{href:te.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-colors",children:[n.jsx(cs,{className:"w-4 h-4"}),"Open in Google Calendar"]}),c&&c.length>1&&!X&&te.source==="google"&&n.jsx("div",{className:"flex flex-col gap-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:Y,onChange:ut=>J(ut.target.value),className:"flex-1 min-h-[48px] py-2 px-3 border border-slate-200 rounded-xl text-sm text-slate-700 bg-white","aria-label":"Move to calendar",children:[n.jsx("option",{value:"",children:"Move to calendar..."}),c.filter(ut=>ut.id!==(te.calendarId||"primary")).map(ut=>n.jsx("option",{value:ut.id,children:ut.summary},ut.id))]}),n.jsx("button",{type:"button",onClick:he,disabled:!Y||E,className:"flex items-center justify-center gap-2 min-h-[48px] min-w-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 disabled:opacity-50",children:"Move"})]})}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:!X&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>S(!0),className:"flex-1 min-w-[48px] flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors",children:[n.jsx(Lo,{className:"w-4 h-4"}),"Edit"]}),te.source==="google"&&n.jsxs("button",{type:"button",onClick:$e,disabled:E,className:"flex items-center justify-center gap-2 min-h-[48px] min-w-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50",title:"Duplicate event",children:[n.jsx(Xj,{className:"w-4 h-4"}),"Duplicate"]}),n.jsxs("button",{type:"button",onClick:ut=>{ut.preventDefault(),ut.stopPropagation(),y&&(re.current=y),le()},disabled:E,className:"flex items-center justify-center gap-2 min-h-[48px] min-w-[48px] py-3 px-4 border border-red-200 text-red-600 font-medium rounded-xl hover:bg-red-50 transition-colors disabled:opacity-50",children:[E?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})]})})]})})]}),R&&n.jsx("div",{className:"absolute inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/40",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full space-y-4",children:[n.jsx("p",{className:"text-slate-800 font-medium",children:"This event was changed elsewhere. Overwrite with your version or reload the latest?"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:ie,className:"flex-1 min-h-[48px] py-3 px-4 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50",children:"Reload"}),n.jsx("button",{type:"button",onClick:pe,disabled:E,className:"flex-1 min-h-[48px] py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-50",children:"Overwrite"})]})]})}),_&&n.jsx("div",{className:"absolute inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/40",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full space-y-4",children:[n.jsx("p",{className:"text-slate-800 font-medium",children:"Discard unsaved changes?"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{B(!1),r()},className:"flex-1 min-h-[48px] py-3 px-4 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50",children:"Discard"}),n.jsx("button",{type:"button",onClick:()=>B(!1),className:"flex-1 min-h-[48px] py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700",children:"Keep editing"})]})]})})]})},Hbe=({currentUser:e,onNavigate:t,onNewEvent:r,onEditEvent:a})=>{const{showError:s,showSuccess:i}=jn(),[o,l]=I.useState(new Date),[c,d]=I.useState("daily"),[u,f]=I.useState([]),[p,m]=I.useState([]),[b,v]=I.useState([]),[g,w]=I.useState([]),[y,j]=I.useState([]),[N,S]=I.useState(!1),[E,A]=I.useState([]),[P,D]=I.useState([]),[R,T]=I.useState(!1),[_,B]=I.useState(null),[U,H]=I.useState(null),[Y,J]=I.useState(0),[re,X]=I.useState(!1),[ee,W]=I.useState(!1),[O,z]=I.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[V,q]=I.useState([]),[K,se]=I.useState(!1),[pe,ie]=I.useState(""),[le,$e]=I.useState(""),[he,Ue]=I.useState(null),[Te,oe]=I.useState(!1),[te,Pe]=I.useState(null),[je,Ie]=I.useState(null),[ue,de]=I.useState(!1),[Ae,Qe]=I.useState(""),[ge,fe]=I.useState(0),[_e,ze]=I.useState([]),[Se,Fe]=I.useState(!1),[Me,et]=I.useState(null),[ut,bt]=I.useState(!0),[At,qt]=I.useState(!0),Gt=I.useRef(null),Ye=I.useRef(null),Et=Array.from({length:24},(ve,be)=>be),Cr=I.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),tr=I.useMemo(()=>{const ve=o.getFullYear(),be=String(o.getMonth()+1).padStart(2,"0"),Ge=String(o.getDate()).padStart(2,"0");return`${ve}-${be}-${Ge}`},[o]);I.useEffect(()=>{(async()=>{if(e?.id)try{const be=await d3(e.id);if(S(be.connected||!1),be.connected){const Ge=await cse(e.id),at=Array.isArray(Ge?.data)?Ge.data:[];A(at)}else A([])}catch{S(!1),A([])}})()},[e]);const Or=ve=>ve.filter(be=>{if(be.recurringEventId){const Ge=(be.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(wt=>Ge.includes(wt)))return!1}return!0});I.useEffect(()=>{(async()=>{T(!0);const be=new Date(o),Ge=new Date(o);if(c==="monthly")be.setDate(1),be.setHours(0,0,0,0),Ge.setMonth(Ge.getMonth()+1),Ge.setDate(0),Ge.setHours(23,59,59,999);else if(c==="weekly"){const Yt=new Date(o),wr=Yt.getDay(),Pr=Yt.getDate()-wr+(wr===0?-6:1),$r=new Date(Yt.setDate(Pr));be.setTime($r.getTime()),be.setHours(0,0,0,0);const fn=new Date($r);fn.setDate($r.getDate()+6),Ge.setTime(fn.getTime()),Ge.setHours(23,59,59,999)}else be.setHours(0,0,0,0),Ge.setHours(23,59,59,999);const at=Yt=>{const wr=Yt.getFullYear(),Pr=String(Yt.getMonth()+1).padStart(2,"0"),$r=String(Yt.getDate()).padStart(2,"0");return`${wr}-${Pr}-${$r}`},yt=at(be),wt=at(Ge),Rt=[];if(N&&e?.id)try{const Yt=P.length>0?P:void 0,Pr=(await dse(yt,wt,e.id,Yt)).data||[],$r=Or(Pr);Rt.push(...$r)}catch(Yt){console.warn("[Schedule] Failed to fetch Google Calendar events:",Yt.message)}if(e?.id)try{const Yt=await yk(e.id,void 0,yt,wt);if(Yt.success&&Yt.data){const wr=Yt.data.map(Pr=>({id:Pr.id,title:Pr.title,description:Pr.description||"",start:Pr.start,end:Pr.end,type:Pr.type||"meeting",location:Pr.location||"",participants:Pr.participants||[],color:Pr.color||"#4f46e5",isAllDay:Pr.isAllDay||!1,source:"firestore",googleEventId:Pr.googleEventId||null,htmlLink:Pr.htmlLink||null,relatedEntity:Pr.relatedEntity||null}));Rt.push(...wr)}}catch(Yt){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Yt.message)}const sr=new Map;Rt.forEach(Yt=>{const wr=Yt.googleEventId||Yt.id;sr.has(wr)||sr.set(wr,Yt)}),f(Array.from(sr.values()));try{const Yt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Yt){v([]),m([]);return}const wr=await gy(Yt),$r=(Array.isArray(wr?.data||wr)?wr?.data||wr:[]).filter(Ur=>{const ea=Ur.dueDate&&Ur.dueDate!==null&&Ur.dueDate!==void 0&&String(Ur.dueDate).trim()!==""&&String(Ur.dueDate).trim().toLowerCase()!=="ongoing";return!Ur.archived&&ea});v($r);const fn=$r.filter(Ur=>Ur.dueDate===tr);m(fn)}catch{v([]),m([])}try{const[Yt,wr,Pr]=await Promise.all([D0(e?.id),Ic(),fb()]);w(Array.isArray(Yt?.data||Yt)?Yt?.data||Yt:[]),j(Array.isArray(wr?.data||wr)?wr?.data||wr:[]),q(Array.isArray(Pr?.data)?Pr.data:[])}catch{w([]),j([]),q([])}T(!1)})()},[tr,N,e,c,o,Y,P]),I.useEffect(()=>{if(!N||!e?.id)return;const ve=setInterval(()=>J(be=>be+1),300*1e3);return()=>clearInterval(ve)},[N,e?.id]);const pr=()=>{const ve=new Date(o);c==="daily"?ve.setDate(ve.getDate()-1):c==="weekly"?ve.setDate(ve.getDate()-7):ve.setMonth(ve.getMonth()-1),l(ve)},rt=()=>{const ve=new Date(o);c==="daily"?ve.setDate(ve.getDate()+1):c==="weekly"?ve.setDate(ve.getDate()+7):ve.setMonth(ve.getMonth()+1),l(ve)},Dt=()=>{const ve=new Date;return o.toDateString()===ve.toDateString()},yr=ve=>{let be=new Date(ve.start),Ge=new Date(ve.end);const at=new Date(o);at.setHours(0,0,0,0);const yt=(be.getTime()-at.getTime())/(1e3*60),wt=(Ge.getTime()-be.getTime())/(1e3*60),Rt=yt*(80/60)+20,sr=wt*(80/60);return{top:Rt,height:Math.max(sr,50)}},kr=ve=>{try{return new Date(ve).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ve}},Xr=ve=>{switch(ve){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},Sr=ve=>{if(ve.calendarId&&(ve.calendarName||ve.calendarColor)){const Ge=E.find(at=>at.id===ve.calendarId);return{id:ve.calendarId,name:ve.calendarName||Ge?.summary||ve.calendarId,color:ve.calendarColor||Ge?.backgroundColor||ve.color||"#6366f1",accessRole:Ge?.accessRole}}const be=E.find(Ge=>Ge.primary)||E[0];return{id:be?.id||"primary",name:ve.source==="google"?be?.summary||"Google Calendar":(ve.source==="firestore","Calendar"),color:ve.color||be?.backgroundColor||"#6366f1",accessRole:be?.accessRole}},pn=ve=>{const be=new Date(ve),Ge=be.getDay(),at=be.getDate()-Ge+(Ge===0?-6:1);return new Date(be.setDate(at))},rr=ve=>{const be=pn(ve);return Array.from({length:7},(Ge,at)=>{const yt=new Date(be);return yt.setDate(be.getDate()+at),yt})},On=ve=>{const be=ve.getFullYear(),Ge=ve.getMonth(),at=new Date(be,Ge,1),yt=new Date(be,Ge+1,0),wt=new Date(at);wt.setDate(wt.getDate()-wt.getDay());const Rt=[],sr=new Date(wt);for(;(sr<=yt||Rt.length<42)&&(Rt.push(new Date(sr)),sr.setDate(sr.getDate()+1),!(Rt.length>=42)););return Rt},Hr=ve=>{const be=ve.getFullYear(),Ge=String(ve.getMonth()+1).padStart(2,"0"),at=String(ve.getDate()).padStart(2,"0");return`${be}-${Ge}-${at}`},sn=ve=>b.filter(be=>be.dueDate===ve),jr=ve=>{Hr(ve);const be=new Date(ve);be.setHours(0,0,0,0);const Ge=new Date(ve);return Ge.setHours(23,59,59,999),u.filter(at=>{const yt=new Date(at.start),wt=at.end?new Date(at.end):yt;return yt<=Ge&&wt>=be})},Gr=ve=>{if(!ve||!/^\d{4}-\d{2}-\d{2}$/.test(ve))return ve;const[be,Ge,at]=ve.split("-").map(Number);return new Date(be,Ge-1,at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};I.useEffect(()=>{_&&!re&&z({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},[_,re]),I.useEffect(()=>{if(!re){se(!1);return}_?.category&&!V.includes(_.category)?se(!0):O.category&&V.includes(O.category)?se(!1):O.category&&!V.includes(O.category)&&se(!0)},[re,O.category,V]),I.useEffect(()=>{if(!_)return;let ve=!1;return(async()=>{try{const be=await fb(),Ge=Array.isArray(be?.data)?be.data:[];ve||q(Ge)}catch{ve||q([])}})(),()=>{ve=!0}},[_?.id]);const Ne=()=>{B(null),X(!1),ie(""),$e(""),Ue(null),de(!1),Fe(!1),Ye.current&&(Ye.current.value="")},He=async()=>{if(_){if(!O.title.trim()){s("Task title is required");return}if(!O.assigneeId){s("Assignee is required");return}W(!0);try{await hb(_.id,{title:O.title.trim(),category:O.category.trim()||void 0,description:O.description.trim()||"",dueDate:O.dueDate||null,priority:O.priority,status:O.status,assigneeId:O.assigneeId,projectId:O.projectId||null}),v(ve=>ve.map(be=>be.id===_.id?{...be,title:O.title.trim(),category:O.category.trim()||void 0,description:O.description.trim()||"",dueDate:O.dueDate||"",priority:O.priority,status:O.status,assigneeId:O.assigneeId,projectId:O.projectId||void 0}:be)),B({..._,title:O.title.trim(),category:O.category.trim()||void 0,description:O.description.trim()||"",dueDate:O.dueDate||"",priority:O.priority,status:O.status,assigneeId:O.assigneeId,projectId:O.projectId||void 0,updatedAt:new Date().toISOString()}),X(!1),i("Task updated successfully")}catch(ve){s(ve.message||"Failed to update task")}finally{W(!1)}}},Be=(ve,be=1200,Ge=1200,at=.8)=>new Promise((yt,wt)=>{const Rt=new FileReader;Rt.onload=sr=>{const Yt=new Image;Yt.onload=()=>{let wr=Yt.width,Pr=Yt.height;wr>Pr?wr>be&&(Pr=Pr*be/wr,wr=be):Pr>Ge&&(wr=wr*Ge/Pr,Pr=Ge);const $r=document.createElement("canvas");$r.width=wr,$r.height=Pr;const fn=$r.getContext("2d");fn?(fn.drawImage(Yt,0,0,wr,Pr),yt($r.toDataURL("image/jpeg",at))):wt(new Error("Canvas context not available"))},Yt.onerror=()=>wt(new Error("Failed to load image")),Yt.src=sr.target?.result},Rt.onerror=()=>wt(new Error("Failed to read file")),Rt.readAsDataURL(ve)}),xe=async ve=>{const be=ve.target.files?.[0];if(be){if(!be.type.startsWith("image/")){s("Please select an image file");return}if(be.size>10*1024*1024){s("Image size must be less than 10MB");return}try{const Ge=await Be(be,1200,1200,.8);$e(Ge),Ue(be)}catch(Ge){s(Ge.message||"Failed to process image")}}},Ce=ve=>{const be=ve.target.value,Ge=ve.target.selectionStart;ie(be),fe(Ge);const at=be.substring(0,Ge),yt=at.lastIndexOf("@");if(yt!==-1){const wt=at.substring(yt+1),Rt=yt>0?at[yt-1]:" ";if((Rt===" "||Rt===`
`||yt===0)&&!wt.includes(" ")&&!wt.includes(`
`)){Qe(wt);const sr=y.filter(Yt=>Yt.name.toLowerCase().includes(wt.toLowerCase())||Yt.email.toLowerCase().includes(wt.toLowerCase()));ze(sr.slice(0,5)),de(!0);return}}de(!1)},Re=ve=>{const Ge=pe.substring(0,ge).lastIndexOf("@"),at=pe.substring(ge),wt=`${pe.substring(0,Ge)}@${ve.name} ${at}`;if(ie(wt),de(!1),Gt.current){Gt.current.focus();const Rt=Ge+ve.name.length+2;Gt.current.setSelectionRange(Rt,Rt)}},tt=ve=>{const be=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ge=[];let at;for(;(at=be.exec(ve))!==null;){const yt=at[1].trim(),wt=y.find(Rt=>Rt.name.toLowerCase()===yt.toLowerCase());wt&&wt.id!==(e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Ge.push(wt.id)}return[...new Set(Ge)]};I.useEffect(()=>{if(Gt.current){const ve=Gt.current;ve.style.height="auto";const be=24,Ge=5*be,at=15*be,yt=Math.min(Math.max(ve.scrollHeight,Ge),at);ve.style.height=`${yt}px`}},[pe]);const ht=ve=>{const be=[],Ge=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let at=0,yt,wt=0;for(;(yt=Ge.exec(ve))!==null;){yt.index>at&&be.push(ve.substring(at,yt.index));const Rt=yt[1].trim();y.find(Yt=>Yt.name.toLowerCase()===Rt.toLowerCase())?be.push(n.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Rt]},wt++)):be.push(`@${Rt}`),at=Ge.lastIndex}return at<ve.length&&be.push(ve.substring(at)),be.length>0?be:ve},ct=async()=>{if(_){if(!pe.trim()&&!he){s("Please add a note or attach an image");return}oe(!0);try{const ve=JSON.parse(localStorage.getItem("user_data")||"{}"),be={id:`note_${Date.now()}`,userId:ve.id,userName:ve.name||"Unknown User",text:pe.trim(),createdAt:new Date().toISOString()};le&&he&&(be.imageUrl=le,be.imageName=he.name,be.imageMimeType=he.type);const Ge=[..._.notes||[],be];await hb(_.id,{notes:Ge});const at=tt(pe);if(at.length>0)for(const yt of at)try{await tp({userId:yt,notificationType:"task-mention",title:"You were mentioned in a task",message:`${ve.name||"Someone"} mentioned you in task: "${_.title}"`,link:`/?tab=tasks&task=${_.id}`})}catch(wt){console.error("Failed to send mention notification:",wt)}B({..._,notes:Ge}),v(yt=>yt.map(wt=>wt.id===_.id?{...wt,notes:Ge}:wt)),ie(""),$e(""),Ue(null),Ye.current&&(Ye.current.value=""),i("Note added successfully")}catch(ve){s(ve.message||"Failed to add note")}finally{oe(!1)}}},xt=()=>{if(c==="daily")return n.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[Et.map(ve=>{const be=ve*80+20;return n.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${be}px`},children:[n.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:ve===0?"12 AM":ve===12?"12 PM":ve>12?`${ve-12} PM`:`${ve} AM`}),n.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),n.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},ve)}),ut&&u.map(ve=>{const be=yr(ve);return n.jsxs("div",{role:"button",tabIndex:0,onClick:()=>H(ve),onKeyDown:Ge=>Ge.key==="Enter"&&H(ve),className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100 cursor-pointer",style:{top:`${be.top}px`,height:`${be.height}px`},children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 group-hover:w-2 transition-all rounded-l",style:{backgroundColor:(ve.calendarColor||ve.color||"#6366f1")+"40"}}),n.jsxs("div",{className:"flex justify-between items-start gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:ve.title}),n.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:n.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[n.jsx(es,{className:"w-3 h-3 text-indigo-400"})," ",kr(ve.start)," - ",kr(ve.end)]})})]}),ve.htmlLink&&n.jsx("a",{href:ve.htmlLink,target:"_blank",rel:"noopener noreferrer",onClick:Ge=>Ge.stopPropagation(),className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95","aria-label":"Open in Google Calendar",children:n.jsx(cs,{className:"w-3.5 h-3.5"})})]})]},ve.id)}),!R&&(ut&&u.length===0||!ut&&(!At||p.length===0))&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[n.jsx(Kn,{className:"w-16 h-16 text-slate-200 mb-4"}),n.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(c==="weekly"){const ve=rr(o),be=new Date;return be.setHours(0,0,0,0),n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((Ge,at)=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Ge})},Ge))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:ve.map((Ge,at)=>{const yt=Hr(Ge),wt=At?sn(yt):[],Rt=ut?jr(Ge):[];let sr=[],Yt=[];At&&ut?wt.length>0&&Rt.length>0?(sr=wt.slice(0,1),Yt=Rt.slice(0,1)):wt.length>0?sr=wt.slice(0,2):Rt.length>0&&(Yt=Rt.slice(0,2)):At?sr=wt.slice(0,2):ut&&(Yt=Rt.slice(0,2));const wr=[...wt,...Rt],Pr=Ge.toDateString()===be.toDateString(),$r=Ge.getMonth()===o.getMonth();return n.jsxs("div",{onClick:()=>{l(new Date(Ge)),d("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${Pr?"bg-indigo-50 border-indigo-300":$r?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-xs font-black mb-2 ${Pr?"text-indigo-600":$r?"text-slate-900":"text-slate-400"}`,children:Ge.getDate()}),n.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[At&&sr.map(fn=>n.jsx("div",{onClick:Ur=>{Ur.stopPropagation(),B(fn)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${fn.priority==="High"?"bg-red-100 text-red-700":fn.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:fn.title,children:fn.title},fn.id)),ut&&Yt.map(fn=>n.jsx("div",{onClick:Ur=>{Ur.stopPropagation(),H(fn)},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:fn.title,children:fn.title},fn.id)),sr.length+Yt.length<wr.length&&n.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",wr.length-(sr.length+Yt.length)," more"]})]})]},at)})})]})}if(c==="monthly"){const ve=On(o),be=new Date;be.setHours(0,0,0,0);const Ge=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Ge.map(at=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:at})},at))}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:ve.map((at,yt)=>{const wt=Hr(at),Rt=At?sn(wt):[],sr=ut?jr(at):[];let Yt=[],wr=[];At&&ut?Rt.length>0&&sr.length>0?(Yt=Rt.slice(0,1),wr=sr.slice(0,1)):Rt.length>0?Yt=Rt.slice(0,1):sr.length>0&&(wr=sr.slice(0,1)):At?Yt=Rt.slice(0,1):ut&&(wr=sr.slice(0,1));const Pr=[...Rt,...sr],$r=at.toDateString()===be.toDateString(),fn=at.getMonth()===o.getMonth();return n.jsxs("div",{onClick:()=>{l(new Date(at)),d("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${$r?"bg-indigo-50 border-indigo-300":fn?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-[10px] font-black mb-1 ${$r?"text-indigo-600":fn?"text-slate-900":"text-slate-400"}`,children:at.getDate()}),n.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[At&&Yt.map(Ur=>n.jsx("div",{onClick:ea=>{ea.stopPropagation(),B(Ur)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${Ur.priority==="High"?"bg-red-100 text-red-700":Ur.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:Ur.title,children:Ur.title},Ur.id)),ut&&wr.map(Ur=>n.jsx("div",{onClick:ea=>{ea.stopPropagation(),H(Ur)},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:Ur.title,children:Ur.title},Ur.id)),Yt.length+wr.length<Pr.length&&n.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",Pr.length-(Yt.length+wr.length)]})]})]},yt)})})]})}};return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[c==="monthly"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{const ve=new Date(o);ve.setMonth(ve.getMonth()-1),l(ve)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:n.jsx(Kj,{className:"w-4 h-4"})}),n.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>{const ve=new Date(o);ve.setMonth(ve.getMonth()+1),l(ve)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:n.jsx(ia,{className:"w-4 h-4"})})]}):c==="weekly"?n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const ve=rr(o),be=ve[0],Ge=ve[6];return`${be.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Ge.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:o.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[n.jsx(es,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:Cr})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:ut,onChange:ve=>bt(ve.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${ut?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:ut&&n.jsx(xd,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),n.jsx("div",{className:"w-px h-4 bg-slate-200"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:At,onChange:ve=>qt(ve.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${At?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:At&&n.jsx(xd,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(ve=>n.jsx("button",{onClick:()=>d(ve),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${c===ve?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:ve},ve))}),n.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:pr,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(Kj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>l(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${Dt()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),n.jsx("button",{onClick:rt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(ia,{className:"w-5 h-5"})})]}),n.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"New Entry"]})]})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex flex-wrap justify-between items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[n.jsx(es,{className:"w-3 h-3 text-slate-500"}),n.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:Cr})]}),N&&E.length>1&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-bold text-slate-500",children:"Calendars:"}),n.jsxs("select",{value:P.length?P.join(","):"__all__",onChange:ve=>{const be=ve.target.value;D(be==="__all__"?[]:be?be.split(","):[])},className:"text-[10px] font-medium px-2 py-1 border border-slate-200 rounded-lg bg-white text-slate-700",children:[n.jsx("option",{value:"__all__",children:"All calendars"}),E.map(ve=>n.jsx("option",{value:ve.id,children:ve.summary},ve.id))]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[R&&n.jsx(vt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${N?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:N?"Google Workspace Connected":"Google Disconnected"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[c==="daily"&&At&&p.length>0&&n.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(mn,{className:"w-3 h-3"})," Today's Deliverables"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:p.map(ve=>n.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:ve.status==="Done"?n.jsx(mn,{className:"w-4 h-4 text-emerald-500"}):n.jsx(Ru,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-xs font-bold truncate ${ve.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:ve.title}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${Xr(ve.priority)}`,children:ve.priority})})]})]},ve.id))})]}),xt()]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsx(Ri,{className:"w-8 h-8 text-indigo-400 mb-6"}),n.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),n.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),n.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),n.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:n.jsx(w0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),U&&n.jsx(zbe,{isOpen:!!U,event:U,onClose:()=>H(null),onEdit:a?ve=>{H(null),a(ve)}:void 0,onEventUpdated:ve=>{if(J(be=>be+1),ve===null){H(null);return}H(ve)},onEventDeleted:()=>{J(ve=>ve+1),H(null)},calendarSource:Sr(U),calendars:E,currentUserId:e?.id}),_&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Ne}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Ne,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(mn,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[re?n.jsx("input",{type:"text",value:O.title,onChange:ve=>z(be=>({...be,title:ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:_.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${_.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":_.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":_.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:_.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",_.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:re?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{X(!1),z({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},disabled:ee,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:He,disabled:ee||!O.title.trim()||!O.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),re?n.jsxs("select",{value:O.assigneeId,onChange:ve=>z(be=>({...be,assigneeId:ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),y.map(ve=>n.jsx("option",{value:ve.id,children:ve.name},ve.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:y.find(ve=>ve.id===_.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:y.find(ve=>ve.id===_.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),re?n.jsxs("select",{value:O.projectId,onChange:ve=>z(be=>({...be,projectId:ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),g.filter(ve=>!ve.archived).map(ve=>n.jsx("option",{value:ve.id,children:ve.title},ve.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.projectId?g.find(ve=>ve.id===_.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Gn,{className:"w-4 h-4 text-indigo-500"})," Description"]}),re?n.jsx(o_,{value:O.description||"",onChange:ve=>z(be=>({...be,description:ve})),placeholder:"Add task description..."}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[_.description?n.jsx(X9,{content:_.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3.5 h-3.5"})," Task Category"]}),re?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:K?"__new__":O.category||"",onChange:ve=>{const be=ve.target.value;be==="__new__"?(se(!0),z(Ge=>({...Ge,category:""}))):(se(!1),z(Ge=>({...Ge,category:be})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),V.map(ve=>n.jsx("option",{value:ve,children:ve},ve)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),K&&n.jsx("input",{type:"text",value:O.category,onChange:ve=>z(be=>({...be,category:ve.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:_.category?n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:_.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),re?n.jsx("input",{type:"date",value:O.dueDate,onChange:ve=>z(be=>({...be,dueDate:ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.dueDate?Gr(_.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),re?n.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(ve=>n.jsx("button",{onClick:()=>z(be=>({...be,priority:ve})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${O.priority===ve?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:ve},ve))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${_.priority==="High"?"bg-red-50 text-red-600":_.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:_.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),re?n.jsxs("select",{value:O.status,onChange:ve=>z(be=>({...be,status:ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[_.status==="Done"?n.jsx(mn,{className:"w-5 h-5 text-emerald-500"}):_.status==="In Progress"?n.jsx(es,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Ru,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:_.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",_.notes&&_.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:_.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:Gt,rows:5,value:pe,onChange:Ce,onBlur:()=>{setTimeout(()=>de(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),ue&&_e.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(Nh,{className:"w-3 h-3"}),"Mention User"]}),_e.map(ve=>n.jsxs("button",{onClick:()=>Re(ve),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ve.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ve.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:ve.email})]})]},ve.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:le?n.jsx(_l,{className:"w-4 h-4"}):n.jsx(Oc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:le?he?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:Ye,type:"file",accept:"image/*",onChange:xe,className:"hidden"})]}),n.jsx("button",{onClick:ct,disabled:Te||!pe.trim()&&!he,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Te?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-4 h-4"}),"Send"]})})]}),le&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:le,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{$e(""),Ue(null),Ye.current&&(Ye.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Zt,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:_.notes&&_.notes.length>0?[..._.notes].reverse().map(ve=>{const be=e?.role==="Admin"||ve.userId===e?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:ve.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ve.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ve.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),be&&n.jsx("button",{onClick:()=>Ie(ve.id),disabled:te===ve.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:te===ve.id?n.jsx(vt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ve.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:ht(ve.text)}),ve.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:ve.imageUrl,alt:ve.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Ge=window.open();Ge&&Ge.document.write(`<img src="${ve.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},ve.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>Fe(!Se),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(ud,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(ia,{className:`w-4 h-4 text-slate-400 transition-transform ${Se?"rotate-90":""}`})]}),Se&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:_.createdAt?new Date(_.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),_.updatedAt&&_.updatedAt!==_.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(_.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),_.notes&&_.notes.map((ve,be)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[ve.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ve.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},ve.id)),(!_.notes||_.notes.length===0)&&(!_.updatedAt||_.updatedAt===_.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[n.jsx("button",{onClick:()=>{et(_),Ne()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:Ne,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(mn,{className:"w-5 h-5"})," Close"]})]})]})]}),Me&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Me.title})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>et(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(Me)try{await sM(Me.id),v(ve=>ve.filter(be=>be.id!==Me.id)),m(ve=>ve.filter(be=>be.id!==Me.id)),et(null),B(null),i("Task deleted successfully")}catch(ve){s(ve.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},Wbe=()=>{const{showSuccess:e}=jn(),[t,r]=I.useState(null),[a,s]=I.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:n.jsx(Xa,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:n.jsx(D8,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:n.jsx(hh,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[n.jsx(Rb,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=a.includes(l.id),d=t===l.id;return n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&n.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),n.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?n.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):n.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),n.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[n.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:d||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:d?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):c?n.jsxs(n.Fragment,{children:["Connected ",n.jsx(mn,{className:"w-4 h-4"})]}):l.isComingSoon?n.jsx(n.Fragment,{children:"Development in Progress"}):n.jsxs(n.Fragment,{children:["Connect ",l.name," ",n.jsx(Oo,{className:"w-4 h-4"})]})}),n.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",n.jsx(cs,{className:"w-3 h-3"})]})]})]},l.id)})}),n.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:n.jsx(f1,{className:"w-6 h-6 text-indigo-400"})}),n.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",n.jsx("br",{}),n.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),n.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),n.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),n.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:n.jsx(f1,{className:"w-full h-full text-indigo-600"})})]})]})};function Vbe(e){if(e==null||Object.keys(e).length===0)return"";const t=Object.keys(e).sort().reduce((r,a)=>(r[a]=e[a],r),{});return JSON.stringify(t)}const is={all:["shared-inbox"],emails:()=>[...is.all,"emails"],emailsList:(e,t)=>[...is.emails(),e,Vbe(t)],senders:(e,t)=>[...is.all,"senders",e,t]},Gbe=(e,t,r)=>{const a=t?.limit||50;return loe({queryKey:is.emailsList(e||"",t),queryFn:async({pageParam:s})=>{if(!e)return{data:[],hasMore:!1,total:0,nextCursor:void 0};const i={...t,limit:a};typeof s=="string"?i.cursor=s:s!=null&&s!==void 0?i.page=Number(s):i.page=0;const o=await pM(e,i),l=o?.data??o??[],c=Array.isArray(l)?l:[],d=o?.hasMore,u=typeof d=="boolean"?d:c.length>=a;return{data:c,hasMore:u,total:o?.total??c.length,nextCursor:o?.nextCursor}},getNextPageParam:(s,i)=>{if(s.hasMore)return s.nextCursor?s.nextCursor:i.length},initialPageParam:void 0,enabled:!!e&&r?.enabled!==!1,staleTime:r?.staleTime,refetchInterval:r?.refetchInterval,refetchOnWindowFocus:!1,refetchOnMount:!1,placeholderData:s=>s})},Kbe=(e,t)=>ks({queryKey:is.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await vse(e,t);return r?.data??r??[]},enabled:!!e,staleTime:300*1e3}),Xbe=()=>{const e=Oa();return ci({mutationFn:async({userId:t,accountEmail:r,scopeHours:a,scopeDays:s})=>await fse(t,r,a,s),onSuccess:()=>{e.invalidateQueries({queryKey:is.emails()})}})},Ybe=({isOpen:e,onClose:t,userId:r,emailId:a,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:d,showError:u}=jn(),[f,p]=I.useState(!1),[m,b]=I.useState(!1),[v,g]=I.useState([]),[w,y]=I.useState(!1),[j,N]=I.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});I.useEffect(()=>{if(!e)return;const A=new Date;A.setDate(A.getDate()+1),A.setHours(10,0,0,0);const P=new Date(A);P.setHours(11,0,0,0);let D=A.toISOString().substring(0,16),R=P.toISOString().substring(0,16);if(l?.date||l?.time)try{const T=l.date||"tomorrow",_=l.time||"10:00 AM";let B=new Date;if(T.toLowerCase().includes("tomorrow"))B.setDate(B.getDate()+1);else if(!T.toLowerCase().includes("today")){const H=T.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(H){const[,Y,J,re]=H;B=new Date(parseInt(re)<100?2e3+parseInt(re):parseInt(re),parseInt(Y)-1,parseInt(J))}}const U=_.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(U){let H=parseInt(U[1]);const Y=U[2]?parseInt(U[2]):0,J=U[3]?.toLowerCase();J==="pm"&&H!==12&&(H+=12),J==="am"&&H===12&&(H=0),B.setHours(H,Y,0,0),D=B.toISOString().substring(0,16);const re=new Date(B);re.setHours(re.getHours()+1),R=re.toISOString().substring(0,16)}}catch(T){console.warn("Failed to parse extracted date/time:",T)}N({title:l?.title||s||"Meeting",description:l?.description||i?.substring(0,500)||"",start:D,end:R,location:l?.location||"",participants:l?.participants||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const S=async()=>{if(!j.start||!j.end||j.participants.length===0){u("Please set date/time and add participants to check availability");return}b(!0);try{const A=new Date(j.start).toISOString().split("T")[0],P=new Date(j.end).toISOString().split("T")[0],D=await lie(r,j.participants,A,P);D.success&&D.data&&(g(D.data),y(!0))}catch(A){u(A.message||"Failed to check availability")}finally{b(!1)}},E=async A=>{if(A.preventDefault(),!j.title||!j.start||!j.end){u("Please fill in all required fields");return}if(!a){u("Email ID is required to create meeting");return}p(!0);try{(await oie({userId:r,emailId:a,title:j.title,description:j.description,start:new Date(j.start).toISOString(),end:new Date(j.end).toISOString(),location:j.location,participants:j.participants,createInGoogleCalendar:j.createInGoogleCalendar})).success&&(d("Meeting created successfully!"),c?.(),t())}catch(P){u(P.message||"Failed to create meeting")}finally{p(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(Kn,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&n.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rn,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),n.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&n.jsxs("p",{children:["Date: ",l.date]}),l.time&&n.jsxs("p",{children:["Time: ",l.time]}),l.location&&n.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),n.jsxs("form",{onSubmit:E,className:"space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:j.title,onChange:A=>N({...j,title:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(es,{className:"w-3 h-3"})," Start Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.start,onChange:A=>N({...j,start:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(es,{className:"w-3 h-3"})," End Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.end,onChange:A=>N({...j,end:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(rS,{className:"w-3 h-3"})," Location"]}),n.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:j.location,onChange:A=>N({...j,location:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(g0,{className:"w-3 h-3"})," Participants"]}),j.participants.length>0&&n.jsx("button",{type:"button",onClick:S,disabled:m||!j.start||!j.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Checking...":"Check Availability"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[j.participants.map((A,P)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[A,n.jsx("button",{type:"button",onClick:()=>N({...j,participants:j.participants.filter((D,R)=>R!==P)}),className:"hover:text-indigo-900",children:n.jsx(Zt,{className:"w-3 h-3"})})]},P)),n.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:A=>{if(A.key==="Enter"&&A.currentTarget.value.trim()){A.preventDefault();const P=A.currentTarget.value.trim();j.participants.includes(P)||N({...j,participants:[...j.participants,P]}),A.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),w&&v.length>0&&n.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),v.map((A,P)=>n.jsxs("div",{className:"text-xs text-amber-800",children:[n.jsx("p",{className:"font-medium",children:A.userId}),A.busySlots&&A.busySlots.length>0?n.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",A.busySlots.length," conflict(s)"]}):n.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},P))]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),n.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:j.description,onChange:A=>N({...j,description:A.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:j.createInGoogleCalendar,onChange:A=>N({...j,createInGoogleCalendar:A.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),n.jsx("button",{type:"button",onClick:E,disabled:f||!j.title||!j.start||!j.end||!a,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xd,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},Jbe={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},gB=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",rd=(e,t)=>{const r=gB(e);return(Jbe[t]||[]).includes(r)},Qbe=e=>gB(e)==="Admin",l1=ft.forwardRef((e,t)=>n.jsx(b3,{...e,ref:t}));l1.displayName="QuillEditor";function C8({content:e,highlightTerm:t}){const r=I.useRef(null),a=e||"No content",s=/<[a-z][\s\S]*>/i.test(a);if(I.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(d=>{d.forEach(u=>{if(u.isIntersecting){const f=u.target,p=f.getAttribute("data-src");p&&(f.src=p,f.removeAttribute("data-src"),f.loading="lazy",c.unobserve(f))}})},{rootMargin:"50px"});return l.forEach(d=>c.observe(d)),()=>{l.forEach(d=>c.unobserve(d))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),u=(s?a.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():a).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),f=ag.sanitize(u,{ALLOWED_TAGS:["mark","br"]});return n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:f}})}const i=s?ag.sanitize(a,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,d,u)=>`<img${c}data-src="${d}" loading="lazy"${u}>`)),n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:a}})}const Zbe=90*1e3;let A8=0;const vB=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),a=Oa(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s?.id,o=s?.role||"Viewer",l=rd(o,"shared-inbox:add-note"),c=rd(o,"shared-inbox:assign-email"),d=rd(o,"shared-inbox:send-email"),u=rd(o,"shared-inbox:reply-email"),f=rd(o,"shared-inbox:forward-email"),p=rd(o,"shared-inbox:star-email"),m=rd(o,"shared-inbox:archive-email"),b=rd(o,"shared-inbox:delete-email"),v=rd(o,"shared-inbox:update-metadata");rd(o,"shared-inbox:manage-accounts");const g=rd(o,"shared-inbox:sync-emails"),w=(L,me="An error occurred")=>L?typeof L=="string"?L:typeof L=="object"?typeof L.message=="string"&&L.message?L.message:L.error&&typeof L.error=="object"&&typeof L.error.message=="string"&&L.error.message?L.error.message:me:me:me,y=L=>!L||typeof L!="string"?"":L.replace(/\n/g,"<br/>"),j=async(L,me)=>{try{return await L()}catch(we){const Je=w(we,"An error occurred");return me&&me(Je),null}},[N,S]=I.useState(null),[E,A]=I.useState(!1),[P,D]=I.useState(!1),[R,T]=I.useState(!1),_=I.useRef(!1),B=I.useRef(null),U=I.useRef(null),[H,Y]=I.useState(""),[J,re]=I.useState(null),[X,ee]=I.useState(""),[W,O]=I.useState(""),[z,V]=I.useState("contains"),[q,K]=I.useState(void 0),[se,pe]=I.useState(""),[ie,le]=I.useState(""),[$e,he]=I.useState(void 0),[Ue,Te]=I.useState(void 0),[oe,te]=I.useState(""),[Pe,je]=I.useState(!1),[Ie,ue]=I.useState(!1),{data:de=[]}=Kbe(i,Pe?150:void 0),[Ae,Qe]=I.useState([]),[ge,fe]=I.useState(!1),[_e,ze]=I.useState(""),[Se,Fe]=I.useState(!1),[Me,et]=I.useState([]),[ut,bt]=I.useState([]),[At,qt]=I.useState(!1),[Gt,Ye]=I.useState(""),[Et,Cr]=I.useState(null),[tr,Or]=I.useState(null),[pr,rt]=I.useState(null),[Dt,yr]=I.useState("list"),[kr,Xr]=I.useState(new Set),[Sr,pn]=I.useState(new Set),[rr,On]=I.useState({}),[Hr,sn]=I.useState(""),[jr,Gr]=I.useState(""),[Ne,He]=I.useState(null),[Be,xe]=I.useState(!1),[Ce,Re]=I.useState(null),[tt,ht]=I.useState(null),[ct,xt]=I.useState([]),[ve,be]=I.useState(null),[Ge,at]=I.useState(!1),yt=I.useRef(null),wt=I.useRef(null),[Rt,sr]=I.useState(!1),[Yt,wr]=I.useState([]),[Pr,$r]=I.useState(null),[fn,Ur]=I.useState(!1),[ea,Un]=I.useState(""),[gn,po]=I.useState([]),[va,Ke]=I.useState(!1),[Bt,It]=I.useState(""),[dr,Nr]=I.useState(0),[vr,Rr]=I.useState([]),[Pn,yn]=I.useState(null),[nr,fr]=I.useState([]),[Mt,_r]=I.useState(!1),[Kt,Na]=I.useState(""),Pa=I.useRef(null),[da,ir]=I.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[en,ja]=I.useState(null),[Xn,bn]=I.useState({}),[Ar,tn]=I.useState([]),[lr,Hn]=I.useState(!1),[Wr,Ra]=I.useState(null),[Wi,ui]=I.useState(!1),[hs,ms]=I.useState(null),[Ai,pl]=I.useState([]),[jd,xo]=I.useState(null),[Vs,fi]=I.useState(!1),[Fo,Mo]=I.useState([]),[Pl,Ss]=I.useState(""),[lc,Il]=I.useState(!1),cc=I.useRef(null),hi=I.useRef(null),Gs=I.useRef(!1),[Ks,kd]=I.useState("domain"),[mi,Xs]=I.useState(""),[Ro,Ya]=I.useState(""),[Ei,Vi]=I.useState([]),[dc,Dl]=I.useState(!1),[go,Dn]=I.useState(!1),[_s,Gi]=I.useState(""),[Ki,Lc]=I.useState(!1),[uc,Ll]=I.useState(""),[ua,Sd]=I.useState(null),[xl,Fc]=I.useState(!1),[G,ke]=I.useState([]),[ne,We]=I.useState(!1),[Xe,gt]=I.useState(!1),[jt,Tt]=I.useState(!1),[br,qr]=I.useState(null),[Kr,Sn]=I.useState(null),[Ba,Ua]=I.useState(null),[ps,Ys]=I.useState(null),[Fs,Bo]=I.useState(null),[Js,vo]=I.useState([]),[bo,uu]=I.useState(""),[fu,Mc]=I.useState(!1),[_d,Cd]=I.useState(!1),[Ad,ka]=I.useState(!1),[yo,gl]=I.useState(!1),[Ja,Rc]=I.useState("compose"),[on,ts]=I.useState([]),[xa,pi]=I.useState([]),[qn,Ms]=I.useState([]),[qa,Xi]=I.useState(""),[$a,xs]=I.useState(""),[ba,rs]=I.useState(""),[Yi,Fl]=I.useState(""),[Uo,hu]=I.useState([]),[vl,Wn]=I.useState([]),[Ml,Qs]=I.useState(!1),[Ti,Rl]=I.useState(!1),[Ed,Bl]=I.useState(!1),[qo,Ji]=I.useState(""),[Rs,Qi]=I.useState(""),[Oi,Zi]=I.useState(""),[wo,Bc]=I.useState([]),[gs,vs]=I.useState(!1),[ta,Yn]=I.useState(0),[_n,Sa]=I.useState([]),$o=I.useRef(null),[mu,zo]=I.useState(!1),[Td,Ho]=I.useState([]),[Ul,xi]=I.useState(!1),[gi,Xu]=I.useState(""),[fc,Xh]=I.useState(null),[pu,Yu]=I.useState([]),[fa,qf]=I.useState([]),[Uc,Od]=I.useState([]),[xu,Ju]=I.useState([]),[qc,Qu]=I.useState({contacts:[],companies:[]}),[Pd,R0]=I.useState(!1),[$f,Yh]=I.useState([]),[Zu,ef]=I.useState([]),[hc,gu]=I.useState([]),[vu,zf]=I.useState(!1),[B0,$c]=I.useState(!1),[mc,Id]=I.useState(null),[yp,tf]=I.useState(!1),[ns,No]=I.useState(!1),[Pi,jo]=I.useState(null),[bu,as]=I.useState(!1),[eo,wp]=I.useState(null),[Hf,zc]=I.useState(!1),[ql,Hc]=I.useState(null),[rf,Wf]=I.useState(!1),[Wo,bl]=I.useState({}),[Jn,ra]=I.useState(!1),[Wc,bs]=I.useState(!1),[vi,$l]=I.useState(""),[Dd,to]=I.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[nf,Vf]=I.useState([]),[U0,Vc]=I.useState(!1),[Jh,Vo]=I.useState(!1),[Ia,C]=I.useState(new Set),[M,Z]=I.useState(!1),[ce,ye]=I.useState(!1),[Ee,De]=I.useState("date"),[Le,qe]=I.useState("desc"),[Ve,nt]=I.useState(!1),[Nt,kt]=I.useState(null),pt=I.useRef(null),Vt=I.useRef(null),Pt=I.useRef(null),lt=I.useRef(null),st=I.useCallback(L=>{const me={searchText:""};if(!L||typeof L!="string")return me;const we=[];let Je="",it=!1;for(let _t=0;_t<L.length;_t++){const Xt=L[_t];if(Xt==='"'){it=!it;continue}if(!it&&(Xt===" "||Xt==="	")){Je&&(we.push(Je),Je="");continue}Je+=Xt}Je&&we.push(Je);const Ut=[];for(const _t of we){const Xt=_t.match(/^from:(.+)$/i);if(Xt){me.from=Xt[1].trim();continue}const Tr=_t.match(/^subject:(.+)$/i);if(Tr){me.subject=Tr[1].trim();continue}if(/^has:attachment$/i.test(_t)){me.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(_t)||/^-has:attachment$/i.test(_t)){me.hasAttachment=!1;continue}if(/^is:read$/i.test(_t)){me.isRead=!0;continue}if(/^is:unread$/i.test(_t)){me.isRead=!1;continue}if(/^is:starred$/i.test(_t)){me.isStarred=!0;continue}if(/^is:unstarred$/i.test(_t)){me.isStarred=!1;continue}Ut.push(_t)}return me.searchText=Ut.join(" ").trim(),me},[]),Ft=I.useMemo(()=>{const L=st(H),me={};L.searchText&&(me.search=L.searchText),oe&&(me.status=oe);const we=L.from??X;we&&(me.from=we);const Je=L.subject??W;Je&&(me.subject=Je,me.subjectOperator=z);const it=L.hasAttachment!==void 0?L.hasAttachment:q;it!==void 0&&(me.hasAttachment=it),se&&(me.dateFrom=se),ie&&(me.dateTo=ie),Wr&&(me.labelId=Wr);const Ut=L.isRead!==void 0?L.isRead:$e;Ut!==void 0&&(me.isRead=Ut);const _t=L.isStarred!==void 0?L.isStarred:Ue;return _t!==void 0&&(me.isStarred=_t),me},[H,oe,X,W,z,q,se,ie,Wr,$e,Ue,st]),{data:Lt,isLoading:$t,isFetchingNextPage:hr,hasNextPage:or,fetchNextPage:Vr,error:xr,refetch:wn}=Gbe(i,Object.keys(Ft).length>0?Ft:void 0,{staleTime:60*1e3,refetchInterval:120*1e3}),Tn=I.useMemo(()=>Lt?.pages?Lt.pages.flatMap(we=>we.data||[]).filter((we,Je,it)=>we.id&&Je===it.findIndex(Ut=>Ut.id===we.id)):[],[Lt]);Lt?.pages[0]?.total??Tn.length;const Cn=Xbe(),ln=I.useCallback(()=>{Gs.current||hr||!or||!i||(Gs.current=!0,Vr())},[hr,or,Vr,i]);I.useEffect(()=>{hr||(Gs.current=!1)},[hr]),I.useEffect(()=>{if(xr){const L=xr?.message||"Failed to load inbox";rt(L),(L.toLowerCase().includes("google")||L.toLowerCase().includes("connected"))&&re(!1)}else rt(null)},[xr]),I.useEffect(()=>{const L=cc.current,me=hi.current;if(!L||!me||!or||hr)return;let we=null,Je=null,it=null;const Ut=400;try{we=new IntersectionObserver(_t=>{_t[0].isIntersecting&&or&&!hr&&ln()},{threshold:.1,rootMargin:"300px",root:me}),we.observe(L)}catch(_t){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",_t)}return Je=()=>{hr||!or||it==null&&(it=setTimeout(()=>{it=null;const _t=me,Xt=L;if(!_t||!Xt||hr||!or)return;const Tr=_t.getBoundingClientRect(),vn=Xt.getBoundingClientRect(),na=Tr.bottom-vn.top;na<500&&na>-100&&ln()},Ut))},me.addEventListener("scroll",Je,{passive:!0}),()=>{it!=null&&clearTimeout(it),we&&we.disconnect(),Je&&me&&me.removeEventListener("scroll",Je)}},[or,hr,ln,Dt,Tn.length]);const Qn=I.useCallback(async()=>{if(i)try{const L=await d3(i),me=L?.connected===!0||L?.data?.connected===!0;re(me)}catch{re(!1)}},[i]),Ln=I.useCallback(async()=>{if(i){Mc(!0);try{const L=await Rse(i),me=L?.data??L??[],we=Array.isArray(me)?me:[];vo(we.filter(Je=>Je.domain&&String(Je.domain).trim()||!1))}catch(L){console.error("[INBOX] Failed to load excluded domains:",L),r(w(L,"Failed to load excluded domains")),vo([])}finally{Mc(!1)}}},[i,r]),rn=I.useCallback(async()=>{if(!(!i||!bo.trim())){Cd(!0);try{await Bse(i,bo.trim()),uu(""),await Ln(),t("Domain added to exclusion list"),wn()}catch(L){console.error("[INBOX] Failed to add excluded domain:",L),r(w(L,"Failed to add excluded domain"))}finally{Cd(!1)}}},[i,bo,Ln,wn,t,r]),za=I.useCallback(async L=>{if(i)try{await Use(i,L),await Ln(),t("Domain removed from exclusion list"),wn()}catch(me){console.error("[INBOX] Failed to remove excluded domain:",me),r(w(me,"Failed to remove excluded domain"))}},[i,Ln,wn,t,r]),Ii=L=>L?`${L.toLowerCase().trim().replace(/[^a-z0-9\s]/g,"").split(/\s+/)[0].replace(/[^a-z0-9]/g,"")||"user"}@impact24x7.com`:"",Ha=I.useCallback(async()=>{if(i)try{let L=[],me=[];try{const Ut=await hse(i),_t=Ut?.data??Ut??[];L=Array.isArray(_t)?_t.filter((Xt,Tr,vn)=>{const na=(Xt.email||"").toLowerCase();return vn.findIndex(aa=>(aa.email||"").toLowerCase()===na&&aa.userId===Xt.userId)===Tr}):[]}catch(Ut){console.error("[INBOX] Failed to load Gmail accounts:",Ut)}try{const Ut=await Ic(),_t=Ut?.data??Ut??[];me=Array.isArray(_t)?_t.filter(Xt=>Xt.name&&Xt.id).map(Xt=>({email:Ii(Xt.name),userId:Xt.id,ownerName:Xt.name,connectedAt:Xt.createdAt||new Date().toISOString(),lastSyncedAt:Xt.updatedAt||new Date().toISOString(),isCurrentUser:Xt.id===i,isCustomEmail:!0})):[],console.log("[INBOX] Loaded custom email accounts:",me.length)}catch(Ut){console.error("[INBOX] Failed to load users for custom emails:",Ut)}const we=[...L,...me],Je=new Map;we.forEach(Ut=>{const _t=(Ut.email||"").toLowerCase(),Xt=Ut.ownerName||"";Xt.toLowerCase()==="unknown user"||Xt.trim()===""||Je.has(_t)||Je.set(_t,Ut)});const it=Array.from(Je.values());console.log("[INBOX] Total accounts loaded:",{gmail:L.length,custom:me.length,beforeDedup:we.length,afterDedup:it.length}),et(it),re(L.length>0),rs(Ut=>it.length>0&&!Ut?it[0].email:Ut)}catch(L){console.error("[INBOX] Failed to load connected accounts:",L)}},[i]),ys=async()=>{if(i)try{const L=await mM(i),me=L?.authUrl||L?.data?.authUrl;me?window.location.href=me:r("Failed to get authorization URL")}catch(L){r(L?.message||"Failed to connect account")}},Zn=async L=>{if(i){Cr(L);try{await mse(i,L),t(`Disconnected ${L}`),await Ha(),await wn()}catch(me){r(me?.message||"Failed to disconnect account")}finally{Cr(null)}}},Cs=I.useCallback(async()=>{if(i)try{const L=await pse(i),me=L?.data??L??[];bt(Array.isArray(me)?me:[])}catch(L){console.error("[INBOX] Failed to load filtered accounts:",L),bt([])}},[i]),bi=async L=>{if(i){Or(L);try{await xse(i,L),await Cs(),await a.invalidateQueries({queryKey:is.emails()}),t(`Emails from ${L} will be hidden`)}catch(me){r(me?.message||"Failed to filter account")}finally{Or(null)}}},Wa=async(L,me)=>{if(i){Or(me);try{await gse(i,L),await Cs(),await a.invalidateQueries({queryKey:is.emails()}),t(`Emails from ${me} will now be visible`)}catch(we){r(we?.message||"Failed to unfilter account")}finally{Or(null)}}};I.useEffect(()=>{if(!i){re(!1);return}Qn(),Ha(),Ln(),Cs()},[i,Qn,Ha,Ln,Cs]),I.useEffect(()=>{Me.length>0&&!ba&&rs(Me[0].email)},[Me]),I.useEffect(()=>{try{const L=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(L){const me=JSON.parse(L);Array.isArray(me)&&Qe(me)}}catch{}},[]),I.useEffect(()=>{if(Ae.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(Ae))}catch{}},[Ae]),I.useEffect(()=>{i&&(async()=>{try{const me=await Ic(),we=me?.data??me??[];po(Array.isArray(we)?we:[])}catch(me){const we=me?.message||"Failed to load users";console.error("Failed to load users:",we)}})()},[i]),I.useEffect(()=>{const L=me=>{Pa.current&&!Pa.current.contains(me.target)&&_r(!1)};if(Mt)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[Mt]),I.useEffect(()=>{i&&(async()=>{try{const me=await Ah(),we=me?.data??me??[];Wn(Array.isArray(we)?we:[])}catch(me){console.error("Failed to load contacts:",me?.message)}})()},[i]);const Da=I.useCallback(async(L=!1)=>{if(i&&!(lr&&!L))try{Hn(!0);const me=await Jse(i),we=me?.labels??me?.data;tn(Array.isArray(we)?we:[])}catch(me){console.error("Error fetching labels:",me),tn([])}finally{Hn(!1)}},[i]);I.useEffect(()=>{i&&J&&Da()},[i,J,Da]),I.useEffect(()=>{Wi&&hs&&i&&Da(!0)},[Wi,hs,i,Da]),I.useEffect(()=>{i&&yo&&(async()=>{if(i)try{const me=await xM(i),we=me?.data??me??[];hu(Array.isArray(we)?we:[]);const Je=we.find(it=>it.isDefault);Je&&Fl(Je.content||"")}catch(me){console.error("Failed to load signatures:",me?.message)}})()},[i,yo]);const Bs=async()=>{if(i){A(!0),rt(null);try{await Cn.mutateAsync({userId:i,scopeDays:"all"}),t("Syncing all emails from connected accounts")}catch(L){const me=L?.message||"Sync failed";r(me),rt(me)}finally{A(!1)}}},Di=I.useRef(Cn),Go=I.useRef(a);I.useEffect(()=>{Di.current=Cn,Go.current=a},[Cn,a]),I.useEffect(()=>{if(!i||!g){B.current&&(clearTimeout(B.current),B.current=null),U.current&&(clearInterval(U.current),U.current=null);return}B.current&&(clearTimeout(B.current),B.current=null),U.current&&(clearInterval(U.current),U.current=null);const L=()=>{const me=Date.now();me-A8<Zbe||_.current||(A8=me,_.current=!0,D(!0),Di.current.mutate({userId:i,scopeDays:"all"},{onSuccess:()=>{_.current=!1,D(!1)},onError:we=>{console.log("[INBOX] Background sync failed:",we?.message||"Unknown error"),_.current=!1,D(!1)}}))};return B.current=setTimeout(()=>{L(),B.current=null},30*1e3),U.current=setInterval(()=>{L()},1500*1e3),()=>{B.current&&(clearTimeout(B.current),B.current=null),U.current&&(clearInterval(U.current),U.current=null),_.current=!1}},[i,g]);const Va=async L=>{if(i){R0(!0);try{const me=await Vse(L);Qu(me?.data||{contacts:[],companies:[]})}catch(me){console.error("Failed to load suggested links:",me),Qu({contacts:[],companies:[]})}finally{R0(!1)}}},Qa=async L=>{if(i){zf(!0);try{const[me,we,Je]=await Promise.all([Kse(L).catch(()=>({success:!0,data:[]})),Xse(L).catch(()=>({success:!0,data:[]})),Yse(L).catch(()=>({success:!0,data:[]}))]);Yh(me?.data||[]),ef(we?.data||[]),gu(Je?.data||[])}catch(me){console.error("Failed to load related items:",me),Yh([]),ef([]),gu([])}finally{zf(!1)}}};I.useEffect(()=>{(async()=>{if(i)try{const[me,we,Je,it]=await Promise.all([wd().catch(()=>({data:[]})),Ag(i).catch(()=>({data:[]})),D0(i).catch(()=>({data:[]})),hM({userId:i}).catch(()=>({data:[]}))]);Yu(me?.data||[]),qf(we?.data||[]),Od(Je?.data||[]),Ju(it?.data||[])}catch(me){console.error("Failed to load CRM data:",me)}})()},[i]);const As=async(L,me)=>{if(!(!N?.id||!i)){No(!0);try{const we=N.id;let Je;switch(L){case"contact":await qse({emailId:we,contactId:me,userId:i}),Je="contactId";break;case"company":await $se({emailId:we,companyId:me,userId:i}),Je="companyId";break;case"deal":await zse({emailId:we,dealId:me,userId:i}),Je="dealId";break;case"project":await Hse({emailId:we,projectId:me,userId:i}),Je="projectId";break;case"contract":await Wse({emailId:we,contractId:me,userId:i}),Je="contractId";break;default:throw new Error(`Unknown link type: ${L}`)}t(`Email linked to ${L} successfully`),S(it=>it?{...it,linkedRecords:{...it.linkedRecords||{},[Je]:me}}:null),Qa(we),$c(!1),Id(null)}catch(we){r(we?.message||`Failed to link email to ${L}`)}finally{No(!1)}}},Gc=async L=>{if(!(!N?.id||!i))try{const me=await Gse({emailId:N.id,userId:i,title:L.title||N.subject||"Task from Email",description:L.description||N.body||"",dueDate:L.dueDate,priority:L.priority||"Medium",projectId:L.projectId,assigneeId:L.assigneeId});t("Task created successfully"),tf(!1),Qa(N.id)}catch(me){r(me?.message||"Failed to create task")}},ro=async L=>{if(!i)return;S(null),pl([]),xo(null),ht(null),xt([]),be(null),T(!0);const me=!L.isRead;me&&a.setQueriesData({queryKey:is.emails()},we=>{if(!we?.pages)return we;const Je=we.pages.map(it=>{const Ut=it.data.map(_t=>_t.id===L.id?{..._t,isRead:!0}:_t);return{...it,data:Ut}});return{...we,pages:Je}});try{const we=await bse(L.id,i),Je=we?.data??we??{},it={...L,...Je,body:Je.body??L.lastMessage,gmailThreadId:Je.gmailThreadId??L.gmailThreadId,isRead:!0};S(it),me&&Vn(L.id,!0,!0).catch(Ut=>{console.error("[INBOX] Failed to mark email as read:",Ut?.message),a.setQueryData(is.emailsList(i||"",Ft),_t=>_t?.pages?{..._t,pages:_t.pages.map(Xt=>({...Xt,data:Xt.data.map(Tr=>Tr.id===L.id?{...Tr,isRead:!1}:Tr)}))}:_t)}),L.id&&(Va(L.id),Qa(L.id));try{const Ut=await Nse(L.id),_t=Ut?.data??Ut??[];On(Xt=>({...Xt,[L.id]:_t.map(Tr=>({id:Tr.id,userId:Tr.userId,userName:Tr.userName,message:Tr.message,timestamp:Tr.createdAt,imageUrl:Tr.imageUrl,imageName:Tr.imageName,markedFor:Tr.markedFor||[]}))}))}catch(Ut){const _t=Ut?.message||"Failed to load notes";console.error("Failed to load notes:",_t),On(Xt=>({...Xt,[L.id]:[]}))}if(i)try{We(!0);const Ut=await yk(i,L.id);Ut.success&&Ut.data?ke(Ut.data):ke([])}catch(Ut){console.error("Failed to load calendar events:",Ut.message),ke([])}finally{We(!1)}}catch(we){r(we?.message||"Could not load email")}finally{T(!1)}},Vn=async(L,me,we=!1)=>{if(i)try{await yI(L,me,i),a.setQueriesData({queryKey:is.emails()},Je=>{if(!Je?.pages)return Je;const it=Je.pages.map(Ut=>({...Ut,data:Ut.data.map(_t=>_t.id===L?{..._t,isRead:me,syncStatus:{..._t.syncStatus||{},readStatus:"pending"}}:_t)}));return{...Je,pages:it}}),N?.id===L&&S(Je=>Je?{...Je,isRead:me,syncStatus:{...Je.syncStatus||{},readStatus:"pending"}}:null),we||t(me?"Marked as read":"Marked as unread")}catch(Je){we?console.error("[INBOX] Failed to mark email as read:",Je?.message):(r(Je?.message||"Update failed"),wn())}},zl=async(L,me)=>{try{await yse(L,me),a.setQueryData(is.emailsList(i||"",Ft),we=>we?.pages?{...we,pages:we.pages.map(Je=>({...Je,data:Je.data.map(it=>it.id===L?{...it,isStarred:me,syncStatus:{...it.syncStatus||{},starredStatus:"pending"}}:it)}))}:we),N?.id===L&&S(we=>we?{...we,isStarred:me,syncStatus:{...we.syncStatus||{},starredStatus:"pending"}}:null),a.invalidateQueries({queryKey:is.emails()}),t(me?"Starred":"Unstarred")}catch(we){r(we?.message||"Update failed"),wn()}},Ld=L=>{if(!L)return null;switch(L){case"synced":return n.jsx(mn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return n.jsx(es,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return n.jsx(Rn,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},yu=async(L,me=[],we=[],Je=!1,it)=>{try{if(await Zse(L,{addLabelIds:me,removeLabelIds:we,trackAccuracy:Je,suggestionId:it}),a.invalidateQueries({queryKey:is.emails()}),N?.id===L){const _t=[...N.labels||[]];me.forEach(Xt=>{_t.includes(Xt)||_t.push(Xt)}),we.forEach(Xt=>{const Tr=_t.indexOf(Xt);Tr>-1&&_t.splice(Tr,1)}),S({...N,labels:_t,syncStatus:{...N.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(Ut){r(Ut?.message||"Failed to update labels")}},Ko=async(L,me)=>{try{await eie(L,me),await yu(L,[],[me])}catch(we){r(we?.message||"Failed to remove label")}},ko=async(L,me)=>{if(i){Lc(!0);try{await Qse({userId:i,accountEmail:me,labelName:L,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await Da(),Gi(""),Dn(!1)}catch(we){r(we?.message||"Failed to create label")}finally{Lc(!1)}}},pc=async(L,me)=>{if(i)try{await Av(L,{userId:i,...me}),a.invalidateQueries({queryKey:is.emails()}),N?.id===L&&S(we=>we?{...we,...me}:null),t("Email updated")}catch(we){r(we?.message||"Update failed")}},So=()=>{Z(!M),C(new Set)},Hl=L=>{C(me=>{const we=new Set(me);return we.has(L)?we.delete(L):we.add(L),we})},Fd=()=>{Ia.size===ao.length?C(new Set):C(new Set(ao.map(L=>L.id)))},wu=async()=>{if(!(!i||Ia.size===0)){ye(!0);try{await Promise.all(Array.from(Ia).map(L=>yI(L,!0,i))),a.invalidateQueries({queryKey:is.emails()}),t(`${Ia.size} email(s) marked as read`),C(new Set)}catch(L){r(L?.message||"Failed to mark emails as read")}finally{ye(!1)}}},_o=async L=>{if(i)try{await wI(L,i),a.invalidateQueries({queryKey:is.emails()}),N?.id===L&&S(me=>me?{...me,threadStatus:"archived"}:null),t("Email archived")}catch(me){r(me?.message||"Failed to archive email")}},Nu=async L=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await NI(L,i),a.invalidateQueries({queryKey:is.emails()}),N?.id===L&&S(null),t("Email deleted")}catch(me){r(me?.message||"Failed to delete email")}},Kc=async L=>{if(i)try{await Dse(L,i),a.invalidateQueries({queryKey:is.emails()}),N?.id===L&&S(me=>me?{...me,threadStatus:"active"}:null),t("Email restored")}catch(me){r(me?.message||"Failed to restore email")}},xc=async L=>{if(i)try{await Av(L,{userId:i,threadStatus:"resolved"}),a.invalidateQueries({queryKey:is.emails()}),N?.id===L&&S(me=>me?{...me,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(me){r(me?.message||"Failed to resolve conversation")}},ju=async()=>{if(!(!i||Ia.size===0)){ye(!0);try{await Promise.all(Array.from(Ia).map(L=>wI(L,i))),a.invalidateQueries({queryKey:is.emails()}),t(`${Ia.size} email(s) archived`),C(new Set)}catch(L){r(L?.message||"Failed to archive emails")}finally{ye(!1)}}},Wl=async()=>{if(!(!i||Ia.size===0)&&confirm(`Are you sure you want to delete ${Ia.size} email(s)? This action cannot be undone.`)){ye(!0);try{await Promise.all(Array.from(Ia).map(me=>NI(me,i)));const L=Array.from(Ia);a.invalidateQueries({queryKey:is.emails()}),N&&Ia.has(N.id)&&S(null),t(`${L.length} email(s) deleted`),C(new Set)}catch(L){r(L?.message||"Failed to delete emails")}finally{ye(!1)}}},Qh=async(L,me,we,Je)=>{if(!i)return;const it=`${L}-${me}-view`;bn(Ut=>({...Ut,[it]:!0}));try{const Ut=await jI(L,me,i),_t=window.URL.createObjectURL(Ut);ja({isOpen:!0,emailId:L,attachmentId:me,filename:we,mimeType:Je,url:_t})}catch(Ut){r(Ut?.message||"Failed to load attachment")}finally{bn(Ut=>({...Ut,[it]:!1}))}},af=async(L,me,we)=>{if(!i)return;const Je=`${L}-${me}-download`;bn(it=>({...it,[Je]:!0}));try{const it=await jI(L,me,i),Ut=window.URL.createObjectURL(it),_t=document.createElement("a");_t.href=Ut,_t.download=we,document.body.appendChild(_t),_t.click(),window.URL.revokeObjectURL(Ut),document.body.removeChild(_t),t("Attachment downloaded")}catch(it){r(it?.message||"Failed to download attachment")}finally{bn(it=>({...it,[Je]:!1}))}},ga=L=>{if(L===0)return"0 Bytes";const me=1024,we=["Bytes","KB","MB","GB"],Je=Math.floor(Math.log(L)/Math.log(me));return Math.round(L/Math.pow(me,Je)*100)/100+" "+we[Je]},Zs=L=>L.startsWith("image/"),gc=L=>L==="application/pdf",q0=L=>{const me=L.target.files;if(!me||me.length===0)return;const we=25*1024*1024,Je=[];Array.from(me).forEach(it=>{if(it.size>we){r(`File "${it.name}" is too large. Maximum size is 25MB.`);return}const Ut=`${Date.now()}-${Math.random()}`;let _t;it.type.startsWith("image/")&&(_t=URL.createObjectURL(it)),Je.push({file:it,preview:_t,id:Ut})}),Sa([..._n,...Je]),$o.current&&($o.current.value="")},Md=async(L,me)=>{if(i){xi(!0);try{const we=await cie(i,ba||void 0,void 0,L||gi,me),Je=we?.data||we||{};Ho(me?it=>[...it,...Je.files||[]]:Je.files||[]),Xh(Je.nextPageToken||null)}catch(we){const Je=we?.message||"Failed to load Drive files";Je.includes("not connected")||we?.code==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${ba||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Je),me||Ho([])}finally{xi(!1)}}},Gf=async L=>{if(!(!i||!yo))try{const me=Ja!=="compose"&&N?.id?N.id:`draft_${Date.now()}`;if(Ja==="compose"){const we={id:`drive_${L.id}`,file:new Nc([],L.name,{type:L.mimeType}),isDriveFile:!0,driveFileId:L.id,driveWebViewLink:L.webViewLink,driveIconLink:L.iconLink,preview:L.thumbnailLink||L.iconLink};Sa([..._n,we]),zo(!1),t("Drive file added")}else await SI({userId:i,emailId:N.id,fileId:L.id,fileName:L.name,fileMimeType:L.mimeType,webViewLink:L.webViewLink,webContentLink:L.webContentLink,iconLink:L.iconLink}),zo(!1),t("Drive file attached"),N&&ro(N)}catch(me){r(me?.message||"Failed to attach Drive file")}},Vl=L=>{const me=_n.find(we=>we.id===L);me?.preview&&URL.revokeObjectURL(me.preview),bl(we=>{const Je={...we};return delete Je[L],Je}),Sa(_n.filter(we=>we.id!==L))},La=async()=>{if(!i||!ba||!qa||!$a){r("Please fill in subject and message to save draft");return}ra(!0);try{await Lse({userId:i,accountEmail:ba||Me[0]?.email,to:on.length>0?on:void 0,cc:xa.length>0?xa:void 0,bcc:qn.length>0?qn:void 0,subject:qa,body:$a}),t("Draft saved to Gmail")}catch(L){const me=w(L,"Failed to save draft");r(me)}finally{ra(!1)}},ws=async()=>{if(!(!i||!ba)){Vc(!0);try{const L=await Fse(i,ba||Me[0]?.email),me=L?.data||L||[];Vf(Array.isArray(me)?me:[])}catch(L){const me=w(L,"Failed to load drafts");r(me),Vf([])}finally{Vc(!1)}}};I.useEffect(()=>()=>{_n.forEach(L=>{L.preview&&URL.revokeObjectURL(L.preview)})},[_n]),I.useEffect(()=>{!yo&&_n.length>0&&(_n.forEach(L=>{L.preview&&URL.revokeObjectURL(L.preview)}),Sa([]))},[yo,_n]);const ss=(L,me=1200,we=1200,Je=.8)=>new Promise((it,Ut)=>{const _t=new FileReader;_t.onload=Xt=>{const Tr=new Image;Tr.onload=()=>{let vn=Tr.width,na=Tr.height;vn>na?vn>me&&(na=na*me/vn,vn=me):na>we&&(vn=vn*we/na,na=we);const aa=document.createElement("canvas");aa.width=vn,aa.height=na;const ei=aa.getContext("2d");ei?(ei.drawImage(Tr,0,0,vn,na),it(aa.toDataURL("image/jpeg",Je))):Ut(new Error("Canvas context not available"))},Tr.onerror=Ut,Tr.src=Xt.target?.result},_t.onerror=Ut,_t.readAsDataURL(L)}),ku=async L=>{const me=L.target.files?.[0];if(me){if(!me.type.startsWith("image/")){r("Please select an image file");return}if(me.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const we=await ss(me,1200,1200,.8);Gr(we),He(me)}catch(we){r(we.message||"Failed to process image")}}},vc=L=>{const me=document.createElement("div");me.innerHTML=L;const we=me.textContent||me.innerText||"",Je=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,it=[];let Ut;for(;(Ut=Je.exec(we))!==null;){const _t=Ut[1].trim(),Xt=gn.find(Tr=>Tr.name.toLowerCase()===_t.toLowerCase());Xt&&Xt.id!==i&&it.push(Xt.id)}return[...new Set(it)]},Xc=I.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),$0=["header","bold","italic","underline","strike","list","bullet","link"],Es=I.useCallback((L,me,we,Je)=>{if(sn(L),Vt.current=Je,we==="user"){const it=Je.getSelection(!0);if(it){const _t=Je.getText().substring(0,it.index),Xt=_t.lastIndexOf("@");if(Xt!==-1){const Tr=_t.substring(Xt+1),vn=Xt>0?_t[Xt-1]:" ";if(vn===" "||vn===`
`||Xt===0)if(!Tr.includes(" ")&&!Tr.includes(`
`)&&Tr.length<50){yn(Xt),It(Tr);const na=gn.filter(aa=>aa.name?.toLowerCase().includes(Tr.toLowerCase())||aa.email?.toLowerCase().includes(Tr.toLowerCase()));Rr(na),Ke(na.length>0)}else Ke(!1),yn(null);else Ke(!1),yn(null)}else Ke(!1),yn(null)}}},[gn]),Kf=I.useCallback(L=>{const me=Vt.current;if(!me){console.error("[INBOX] Quill editor not available");return}me.focus();const we=me.getText();let Je=Pn;if((Je===null||Je<0)&&(Je=we.lastIndexOf("@")),Je===-1){console.error("[INBOX] Could not find @ symbol for mention"),Ke(!1),yn(null);return}const it=we.substring(Je+1),Ut=it.indexOf(" "),_t=it.indexOf(`
`);let Xt=it.length;Ut!==-1&&(Xt=Math.min(Xt,Ut)),_t!==-1&&(Xt=Math.min(Xt,_t));const Tr=Je,vn=Je+1+Xt,na=vn-Tr;console.log("[INBOX] Inserting mention:",{atIndex:Je,deleteStartIndex:Tr,deleteEndIndex:vn,deleteLength:na,textAfterAt:it.substring(0,Xt),mentionText:`@${L.name} `}),me.setSelection(Tr,na,"api"),me.deleteText(Tr,na,"api");const aa=`@${L.name} `;me.insertText(Tr,aa,"api"),me.formatText(Tr,aa.length-1,{bold:!0,color:"#4338ca"},"api");const ei=Tr+aa.length;me.setSelection(ei,0,"api");const Yf=me.root.innerHTML;sn(Yf),Ke(!1),yn(null)},[Pn]),sf=async()=>{if(!N||!Hr.trim()&&!Ne||!i||!s){!Hr.trim()&&!Ne&&r("Please enter a note or upload an image");return}xe(!0);try{const L=N.id,me=s.name||s.email||"You",we=document.createElement("div");we.innerHTML=Hr;const it=(we.textContent||we.innerText||"").trim()?Hr.trim():"",Ut={emailId:L,userId:i,userName:me,message:it};if(nr.length>0&&(Ut.markedFor=nr),jr&&jr.trim()){if(jr.length>75e4){r("Image is too large. Please use a smaller image."),xe(!1);return}Ut.imageUrl=jr,Ne?.name&&(Ut.imageName=Ne.name)}const _t=await wse(Ut),Xt=_t?.data||{};if(!Xt.id&&!Xt.emailId)throw console.error("[INBOX] Invalid note response:",_t),new Error("Invalid response from server. Note was not created.");const Tr={id:Xt.id||`thread-${Date.now()}`,userId:i,userName:me,message:it,timestamp:Xt.createdAt||new Date().toISOString(),imageUrl:jr||void 0,imageName:Ne?.name||void 0,markedFor:Xt.markedFor||[]};On(aa=>({...aa,[L]:[Tr,...aa[L]||[]]}));const vn=vc(it);if(vn.length>0)for(const aa of vn)try{await tp({userId:aa,type:"mention",title:"You were mentioned in an email note",message:`${me} mentioned you in a note on email: "${N.subject||"Untitled"}"`,link:`/?tab=inbox&email=${L}`,read:!1})}catch(ei){const Yf=ei?.message||"Failed to send notification";console.error("Failed to send notification:",Yf)}sn(""),Gr(""),He(null),fr([]),Pt.current&&(Pt.current.value=""),Vt.current&&Vt.current.setText("");const na=_t?.message||(vn.length>0?`Note added and ${vn.length} user(s) notified`:"Internal note added");t(na)}catch(L){const me=w(L,"Failed to add note");console.error("[INBOX] Error adding note:",me),r(me)}finally{xe(!1)}},Gl=async(L,me)=>{if(!(!i||!s)){Re(me);try{await jse(me,i),On(we=>({...we,[L]:(we[L]||[]).filter(Je=>Je.id!==me)})),t("Note deleted")}catch(we){const Je=w(we,"Failed to delete note");r(Je)}finally{Re(null)}}},Xo=async L=>{if(!(!N||!i)){at(!0),xt([]),be(null),ht(null);try{const me=await kse(N.id,i,L),we=me?.data??me??{};if(we.variations&&Array.isArray(we.variations)&&we.variations.length>0)xt(we.variations),be(0),ht(y(we.variations[0].draft)),t(`Generated ${we.variations.length} draft variations`);else{let Je=we.draft;(!Je||typeof Je!="string")&&(Je=`Hi ${N.sender||"there"},

Thank you for your email regarding "${N.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${s?.name||"Team"}`),ht(y(Je)),xt([{style:"default",description:"AI-generated draft",draft:Je,confidence:75}]),be(0),t("AI draft generated")}}catch(me){const we=w(me,"Failed to generate draft");at(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",we),r(we)},0)}finally{at(!1)}}},no=async()=>{if(!i||!qa||on.length===0){r("Please enter a subject and recipient to generate AI draft");return}Wf(!0),Hc(null);try{const me=`Hi ${on[0].split("@")[0]},

${qa?`Regarding: ${qa}`:""}

[Your message here]

Best regards,
${s?.name||"Team"}`;await new Promise(we=>setTimeout(we,1e3)),Hc(y(me)),t("AI draft generated")}catch(L){const me=w(L,"Failed to generate draft");r(me)}finally{Wf(!1)}},of=()=>{if(!tt)return;let L="";try{if(wt.current&&typeof wt.current.getText=="function")L=wt.current.getText();else{const me=document.createElement("div");me.innerHTML=tt,L=me.textContent||me.innerText||""}}catch(me){const we=document.createElement("div");we.innerHTML=tt||"",L=we.textContent||we.innerText||"";const Je=me?.message||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Je)}navigator.clipboard.writeText(L).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(me=>{try{const we=document.createElement("textarea");we.value=L,document.body.appendChild(we),we.select(),document.execCommand("copy"),document.body.removeChild(we),t("Draft copied to clipboard!")}catch(we){const Je=we?.message||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Je),r("Failed to copy draft. Please select and copy manually.")}})},Xf=()=>{!tt||!i||!N||(Un(""),Ur(!0))},bc=async()=>{if(!ea||!ea.trim()||!tt||!i||!N){r("Please enter a template name");return}try{const L=typeof tt=="string"?tt:String(tt||"");await Sse({name:ea.trim(),content:L,userId:i,category:"email-response"}),t("Template saved successfully!"),Ur(!1),Un(""),Rd()}catch(L){const me=w(L,"Failed to save template");console.error("[INBOX] Error saving template:",me),r(me)}},Rd=async()=>{if(i)try{const L=await _se(i),me=L?.data??L??[];wr(Array.isArray(me)?me:[])}catch(L){const me=L?.message||"Failed to load templates";console.error("Failed to load templates:",me)}};I.useEffect(()=>{i&&Rd()},[i]),I.useEffect(()=>{i&&yo&&Rd()},[i,yo]);const lf=(L,me=100)=>{if(!L)return"";let we=L.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(we=we.replace(/https?:\/\/[^\s]+/g,"").trim(),we=we.replace(/\s+/g," ").trim(),we.length<=me)return we;const Je=we.substring(0,me),it=Je.lastIndexOf(" ");return it>me*.7?Je.substring(0,it)+"...":Je+"..."},ao=I.useMemo(()=>{let me=[...Tn.filter((we,Je,it)=>we.id&&Je===it.findIndex(Ut=>Ut.id===we.id))];return oe==="archived"?me=me.filter(we=>we.threadStatus==="archived"):oe&&oe!=="archived"?me=me.filter(we=>we.status===oe):oe||(me=me.filter(we=>we.threadStatus!=="archived")),Wr&&(me=me.filter(we=>(we.labels||[]).includes(Wr))),Ve&&i&&(me=me.filter(we=>we.owner===i)),Nt&&(me=me.filter(we=>we.owner===Nt)),me.sort((we,Je)=>{let it=0;switch(Ee){case"date":const Ut=parseInt(we.internalDate||"0")||0;it=(parseInt(Je.internalDate||"0")||0)-Ut;break;case"sender":const Xt=(we.sender||we.email||"").toLowerCase(),Tr=(Je.sender||Je.email||"").toLowerCase();it=Xt.localeCompare(Tr);break;case"subject":const vn=(we.subject||"").toLowerCase(),na=(Je.subject||"").toLowerCase();it=vn.localeCompare(na);break;case"unread":if(we.isRead===Je.isRead){const aa=parseInt(we.internalDate||"0")||0;it=(parseInt(Je.internalDate||"0")||0)-aa}else it=we.isRead?1:-1;break}return Le==="asc"?-it:it}),me},[Tn,Wr,Ve,Nt,i,Ee,Le]);I.useEffect(()=>{N?.id&&(ao.some(me=>me.id===N.id)||(S(null),pl([]),xo(null),ht(null),xt([]),be(null),ke([]),On(me=>{const we={...me};return delete we[N.id],we})))},[ao,N?.id]);const z0=ao.filter(L=>!L.isRead).length,H0=I.useMemo(()=>{if(Dt==="list")return null;const L=new Map;ao.forEach(we=>{const Je=we.gmailThreadId||we.id;L.has(Je)||L.set(Je,[]),L.get(Je).push(we)});const me=Array.from(L.entries()).map(([we,Je])=>{const it=[...Je].sort((Ut,_t)=>{const Xt=parseInt(Ut.internalDate||"0")||0;return(parseInt(_t.internalDate||"0")||0)-Xt});return{threadId:we,emails:it,latestEmail:it[0],unreadCount:it.filter(Ut=>!Ut.isRead).length}});return me.sort((we,Je)=>{let it=0;const Ut=we.latestEmail,_t=Je.latestEmail;switch(Ee){case"date":const Xt=parseInt(Ut.internalDate||"0")||0;it=(parseInt(_t.internalDate||"0")||0)-Xt;break;case"sender":const vn=(Ut.sender||Ut.email||"").toLowerCase(),na=(_t.sender||_t.email||"").toLowerCase();it=vn.localeCompare(na);break;case"subject":const aa=(Ut.subject||"").toLowerCase(),ei=(_t.subject||"").toLowerCase();it=aa.localeCompare(ei);break;case"unread":if(we.unreadCount>0&&Je.unreadCount===0)it=-1;else if(we.unreadCount===0&&Je.unreadCount>0)it=1;else if(we.unreadCount===Je.unreadCount){const Yf=parseInt(Ut.internalDate||"0")||0;it=(parseInt(_t.internalDate||"0")||0)-Yf}else it=Je.unreadCount-we.unreadCount;break}return Le==="asc"?-it:it}),me},[ao,Dt,Ee,Le]),yc=L=>{Xr(me=>{const we=new Set(me);return we.has(L)?we.delete(L):we.add(L),we})},cf=L=>{pn(me=>{const we=new Set(me);return we.has(L)?we.delete(L):we.add(L),we})};return i?n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0 relative",children:[P&&n.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-xs font-medium rounded-full shadow-lg border border-indigo-500/30 animate-in fade-in duration-200",title:"Auto-syncing emails from connected accounts",role:"status","aria-live":"polite",children:[n.jsx(vt,{className:"w-4 h-4 animate-spin flex-shrink-0"}),n.jsx("span",{children:"Auto-syncing"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),Wr&&n.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",Ar.find(L=>L.id===Wr)?.name||Wr]})]}),n.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",z0," unread",Wr&&`  ${ao.length} email${ao.length!==1?"s":""} with label`]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Ar.length>0&&n.jsx("div",{className:"relative",children:n.jsxs("select",{value:Wr||"",onChange:L=>{const me=L.target.value||null;Ra(me);const we=document.querySelector(".overflow-y-auto");we&&(we.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[n.jsx("option",{value:"",children:"All Labels"}),Ar.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})}),n.jsxs("button",{onClick:()=>yr(Dt==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Dt==="threads"?"Switch to list view":"Switch to threaded view",children:[n.jsx(fo,{className:"w-4 h-4"}),Dt==="threads"?"Threads":"List"]}),g&&n.jsxs("button",{onClick:Bs,disabled:E,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[E?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(fd,{className:"w-4 h-4"}),E?"Syncing":"Sync from Gmail"]}),Me.length>0&&n.jsxs("button",{onClick:()=>qt(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${Me.length} connected account${Me.length!==1?"s":""}`,children:[n.jsx(mn,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),n.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:Me.length})]})]})]}),J===!1&&Me.length===0&&n.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[n.jsx(Rn,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),n.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),n.jsxs("button",{onClick:ys,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),n.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:H,onChange:L=>Y(L.target.value),onKeyDown:L=>L.key==="Enter"&&wn(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),n.jsxs("button",{type:"button",onClick:()=>je(L=>!L),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${Pe?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[n.jsx(Nf,{className:"w-4 h-4"}),"Filters",(X||W||q!==void 0||se||ie||$e!==void 0||Ue!==void 0||oe||Wr)&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),Pe&&n.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[n.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),n.jsx("input",{type:"text",placeholder:"email or name",value:X,onChange:L=>{ee(L.target.value),ue(!0)},onFocus:()=>ue(!0),onBlur:()=>setTimeout(()=>ue(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),Ie&&de.length>0&&n.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:de.filter(L=>!X||[L.email,L.name].some(me=>me?.toLowerCase().includes(X.toLowerCase()))).slice(0,20).map(L=>n.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:me=>{me.preventDefault(),ee(L.email||L.name),ue(!1)},children:[n.jsx("span",{className:"font-medium text-slate-800",children:L.name||L.email}),L.email!==L.name&&n.jsx("span",{className:"text-xs text-slate-500",children:L.email})]},L.email))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:$e===void 0?"":String($e),onChange:L=>he(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"false",children:"Unread"}),n.jsx("option",{value:"true",children:"Read"})]}),n.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:se,onChange:L=>pe(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(Kn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:ie,onChange:L=>le(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(Kn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"",value:W,onChange:L=>O(L.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),n.jsxs("div",{className:"relative w-32",children:[n.jsxs("select",{value:z,onChange:L=>V(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[n.jsx("option",{value:"contains",children:"contains"}),n.jsx("option",{value:"equals",children:"equals"}),n.jsx("option",{value:"starts",children:"starts with"}),n.jsx("option",{value:"ends",children:"ends with"})]}),n.jsx(Ts,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:q===void 0?"":String(q),onChange:L=>K(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Has attachment"}),n.jsx("option",{value:"false",children:"No attachment"})]}),n.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:oe,onChange:L=>te(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"assigned",children:"Assigned to me"})]}),n.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Ue===void 0?"":String(Ue),onChange:L=>Te(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Starred"}),n.jsx("option",{value:"false",children:"Not starred"})]}),n.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),Ar.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Wr||"",onChange:L=>Ra(L.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"All labels"}),Ar.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:Ve,onChange:L=>{nt(L.target.checked),L.target.checked&&kt(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),n.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Nt||"",onChange:L=>{const me=L.target.value||null;kt(me),me&&nt(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any team member"}),gn.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>a.invalidateQueries({queryKey:is.emails()}),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),n.jsx("button",{type:"button",onClick:()=>{ee(""),O(""),V("contains"),K(void 0),pe(""),le(""),he(void 0),Te(void 0),te(""),Ra(null),nt(!1),kt(null),Y(""),setTimeout(()=>a.invalidateQueries({queryKey:is.emails()}),0)},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),n.jsxs("button",{type:"button",onClick:()=>fe(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(y6,{className:"w-4 h-4"}),"Save search"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>Fe(L=>!L),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(y6,{className:"w-4 h-4"}),"Saved (",Ae.length,")"]}),Se&&n.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ae.length===0?n.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):Ae.map(L=>n.jsxs("div",{className:"flex items-center group",children:[n.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{Y(L.filters.search??""),ee(L.filters.from??""),O(L.filters.subject??""),V(L.filters.subjectOperator??"contains"),K(L.filters.hasAttachment),pe(L.filters.dateFrom??""),le(L.filters.dateTo??""),he(L.filters.isRead),Te(L.filters.isStarred),te(L.filters.status??""),Ra(L.filters.labelId??null),Fe(!1),setTimeout(()=>a.invalidateQueries({queryKey:is.emails()}),0)},children:L.name}),n.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{Qe(me=>me.filter(we=>we.id!==L.id)),Fe(!1)},title:"Delete saved search",children:""})]},L.id))})]}),n.jsxs("button",{type:"button",onClick:()=>{Il(!0),i&&kI(i).then(L=>{const me=L?.data??L??[];Mo(Array.isArray(me)?me:[])}).catch(()=>Mo([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[n.jsx(Nf,{className:"w-4 h-4"}),"Categorization rules"]}),n.jsx("button",{type:"button",onClick:()=>{Dl(!0),i&&sie(i).then(L=>{const me=L?.data??L??[];Vi(Array.isArray(me)?me:[])}).catch(()=>Vi([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),n.jsxs("button",{type:"button",onClick:()=>{ka(!0),Js.length===0&&Ln()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[n.jsx(lv,{className:"w-4 h-4"}),"Excluded Domains ",Js.length>0&&`(${Js.length})`]})]})]}),(H||X||W||q!==void 0||se||ie||$e!==void 0||Ue!==void 0||oe||Wr)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),H&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',H.length>20?H.slice(0,20)+"":H,'"',n.jsx("button",{type:"button",onClick:()=>Y(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Wr&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",Ar.find(L=>L.id===Wr)?.name||Wr,n.jsx("button",{type:"button",onClick:()=>Ra(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),X&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",X,n.jsx("button",{type:"button",onClick:()=>ee(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),W&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",n.jsx("button",{type:"button",onClick:()=>O(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),q!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[q?"Has attachment":"No attachment",n.jsx("button",{type:"button",onClick:()=>K(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),oe&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",oe,n.jsx("button",{type:"button",onClick:()=>te(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),$e!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[$e?"Read":"Unread",n.jsx("button",{type:"button",onClick:()=>he(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Ue!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Ue?"Starred":"Not starred",n.jsx("button",{type:"button",onClick:()=>Te(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(se||ie)&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",se&&ie?`${se}  ${ie}`:se||ie,n.jsx("button",{type:"button",onClick:()=>{pe(""),le("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{te(oe==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${oe==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(cv,{className:"w-4 h-4 inline mr-1.5"}),oe==="archived"?"Show Active":"Show Archived"]}),oe==="archived"&&n.jsxs("span",{className:"text-sm text-slate-500",children:[ao.length," archived email(s)"]})]}),(M||Ia.size>0)&&n.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:Fd,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:Ia.size===ao.length?"Deselect all":"Select all"}),n.jsxs("span",{className:"text-sm text-indigo-600",children:[Ia.size," selected"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:wu,disabled:ce||Ia.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),n.jsx("button",{type:"button",onClick:ju,disabled:ce||Ia.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),n.jsx("button",{type:"button",onClick:Wl,disabled:ce||Ia.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),n.jsx("button",{type:"button",onClick:So,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[n.jsx("div",{className:"flex items-center gap-2",children:!M&&n.jsxs("button",{type:"button",onClick:So,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4"}),"Select"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),n.jsxs("select",{value:Ee,onChange:L=>De(L.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"sender",children:"Sender"}),n.jsx("option",{value:"subject",children:"Subject"}),n.jsx("option",{value:"unread",children:"Unread"})]}),n.jsx("button",{type:"button",onClick:()=>qe(Le==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:Le==="asc"?"Ascending":"Descending",children:Le==="asc"?n.jsx(u1,{className:"w-4 h-4"}):n.jsx(Ts,{className:"w-4 h-4"})})]})]}),ge&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{fe(!1),ze("")},children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:L=>L.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),n.jsx("input",{type:"text",placeholder:"Search name",value:_e,onChange:L=>ze(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{fe(!1),ze("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>{const L=_e.trim()||"Saved search",me={search:H||void 0,status:oe||void 0,from:X||void 0,subject:W||void 0,subjectOperator:z,hasAttachment:q,dateFrom:se||void 0,dateTo:ie||void 0,labelId:Wr||void 0,isRead:$e,isStarred:Ue},we={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:L,filters:me};Qe(Je=>[...Je,we]),fe(!1),ze("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),lc&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Il(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),n.jsx("button",{type:"button",onClick:async()=>{if(i){Fc(!0);try{const me=(await rie(i,30))?.data;Sd(me)}catch(L){console.error("Failed to load accuracy stats:",L)}finally{Fc(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:xl,children:xl?"Loading...":"View accuracy stats"})]}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),ua&&n.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",ua.periodDays," days)"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),n.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[ua.summary.accuracyRate,"%"]}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ua.summary.accepted," accepted / ",ua.summary.accepted+ua.summary.rejected+ua.summary.changed," resolved"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),n.jsx("p",{className:"text-lg font-semibold text-slate-700",children:ua.summary.total}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ua.summary.pending," pending"]})]})]}),n.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ua.bySource.domain.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ua.bySource.domain.accepted,"/",ua.bySource.domain.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ua.bySource.keyword.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ua.bySource.keyword.accepted,"/",ua.bySource.keyword.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ua.bySource.ai.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ua.bySource.ai.accepted,"/",ua.bySource.ai.total]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsxs("select",{value:Ks,onChange:L=>kd(L.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"domain",children:"Sender domain"}),n.jsx("option",{value:"keyword",children:"Keyword"})]}),n.jsx("input",{type:"text",placeholder:Ks==="domain"?"e.g. company.com":"e.g. invoice",value:mi,onChange:L=>Xs(L.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),n.jsxs("select",{value:Ro,onChange:L=>Ya(L.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Select label"}),Ar.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx("button",{type:"button",disabled:!mi.trim()||!Ro||!i,onClick:async()=>{if(!(!i||!mi.trim()||!Ro))try{await nie({userId:i,type:Ks,value:mi.trim(),labelId:Ro,labelName:Ar.find(we=>we.id===Ro)?.name});const L=await kI(i),me=L?.data??L??[];Mo(Array.isArray(me)?me:[]),Xs(""),Ya(""),t("Rule added")}catch(L){r(L?.message||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:Fo.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):Fo.map(L=>n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[n.jsxs("span",{className:"text-slate-700",children:[n.jsx("span",{className:"font-medium",children:L.type==="domain"?"Domain":"Keyword"}),n.jsxs("span",{className:"text-slate-500",children:[' "',L.value,'"  ']}),n.jsx("span",{className:"text-indigo-600",children:L.labelName||L.labelId})]}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await aie(L.id,i),Mo(me=>me.filter(we=>we.id!==L.id)),t("Rule removed")}catch(me){r(me?.message||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:n.jsx(Zt,{className:"w-4 h-4"})})]},L.id))}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>Il(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),Ad&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>ka(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:n.jsx(lv,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),n.jsx("button",{type:"button",onClick:()=>ka(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from domains listed below will not sync or appear in your shared inbox. To see emails from a domain again, remove it from this list."})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:bo,onChange:L=>uu(L.target.value),onKeyDown:L=>{L.key==="Enter"&&bo.trim()&&rn()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),n.jsx("button",{type:"button",onClick:rn,disabled:!bo.trim()||_d,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:_d?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add"]})})]}),fu?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(vt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):Js.length===0?n.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[n.jsx(lv,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):n.jsx("div",{className:"space-y-2",children:Js.filter(L=>L.domain&&String(L.domain).trim()).map(L=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:n.jsx(lv,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:L.domain})]}),n.jsx("button",{type:"button",onClick:()=>za(L.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:n.jsx(Lr,{className:"w-4 h-4"})})]},L.id))})]}),n.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>ka(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),dc&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Dl(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:L=>L.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:Ei.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):Ei.map((L,me)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[n.jsx("span",{className:"flex-1 text-slate-700 truncate",children:L.labelName||L.labelId}),n.jsx("input",{type:"text",placeholder:"View name",value:L.viewName??"",onChange:we=>{const Je=[...Ei];Je[me]={...Je[me],viewName:we.target.value},Vi(Je)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),n.jsx("button",{type:"button",onClick:()=>Vi(we=>we.filter((Je,it)=>it!==me)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:n.jsx(Zt,{className:"w-4 h-4"})})]},L.labelId||me))}),n.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:n.jsxs("select",{value:"",onChange:L=>{const me=L.target.value;if(!me||Ei.some(Je=>Je.labelId===me))return;const we=Ar.find(Je=>Je.id===me);Vi(Je=>[...Je,{labelId:me,labelName:we?.name,viewName:we?.name??"",sortOrder:Je.length}]),L.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Add label to mapping"}),Ar.filter(L=>!Ei.some(me=>me.labelId===L.id)).map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Dl(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await iie({userId:i,mappings:Ei}),t("Folder mapping saved"),Dl(!1)}catch(L){r(L?.message||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),pr&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:pr}),n.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[n.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${N?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:$t?n.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((L,me)=>n.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),n.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},me))}):ao.length===0?n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(Xa,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium",children:Wr?"No emails with this label":"No emails yet"}),n.jsx("p",{className:"text-slate-400 text-sm mt-1",children:Wr?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync from Gmail" to pull in your inbox (including older mail).'}),(se||ie)&&!Wr&&n.jsx("p",{className:"text-slate-500 text-xs mt-2 max-w-sm",children:"To see emails older than your date range, run Sync from Gmail first so full history is available."}),Wr&&n.jsx("button",{onClick:()=>Ra(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!Wr&&n.jsx("button",{onClick:Bs,disabled:E,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:E?"Syncing":"Sync from Gmail"})]}):Dt==="threads"&&H0?n.jsxs("ul",{ref:hi,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[H0.map(L=>{const me=kr.has(L.threadId),we=L.latestEmail,Je=L.emails.length>1;return n.jsxs("li",{children:[n.jsxs("div",{role:M?void 0:"button",tabIndex:M?void 0:0,onKeyDown:it=>{!M&&(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),Je?yc(L.threadId):ro(we))},onClick:()=>!M&&(Je?yc(L.threadId):ro(we)),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===we.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[M&&n.jsx("input",{type:"checkbox",checked:Ia.has(we.id),onChange:()=>Hl(we.id),onClick:it=>it.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Ps,{src:void 0,alt:we.sender||we.email||"",fallbackText:we.sender||we.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Je&&n.jsx("div",{role:"button",tabIndex:0,onClick:it=>{it.stopPropagation(),yc(L.threadId)},onKeyDown:it=>{(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),it.stopPropagation(),yc(L.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:me?n.jsx(Ts,{className:"w-4 h-4 text-slate-500"}):n.jsx(ia,{className:"w-4 h-4 text-slate-500"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${L.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:we.subject||"(No subject)"}),we.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(jf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),we.syncStatus?.starredStatus&&Ld(we.syncStatus.starredStatus)]}),we.attachments&&we.attachments.length>0&&n.jsx(Z0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${we.attachments.length} attachment(s)`}),we.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${we.priority==="high"?"bg-red-100 text-red-700":we.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:we.priority==="high"?"High":we.priority==="low"?"Low":"Medium"}),we.threadStatus&&we.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${we.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":we.threadStatus==="pending"?"bg-amber-100 text-amber-700":we.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:we.threadStatus.charAt(0).toUpperCase()+we.threadStatus.slice(1)}),we.owner&&gn.find(it=>it.id===we.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:gn.find(it=>it.id===we.owner)?.name||"Assigned"}),Je&&n.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:L.emails.length})]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[we.sender||we.email,Je&&`  ${L.emails.length} messages`]}),(()=>{const it=new Set;L.emails.forEach(_t=>{_t.participants&&Array.isArray(_t.participants)&&_t.participants.forEach(Xt=>it.add(Xt.toLowerCase())),_t.to&&Array.isArray(_t.to)&&_t.to.forEach(Xt=>it.add(Xt.toLowerCase())),_t.cc&&Array.isArray(_t.cc)&&_t.cc.forEach(Xt=>it.add(Xt.toLowerCase()))});const Ut=Array.from(it).slice(0,5);return Ut.length>0?n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[n.jsx("span",{className:"text-slate-500",children:"To: "}),Ut.map((_t,Xt)=>n.jsxs("span",{children:[_t.split("@")[0],Xt<Ut.length-1&&", "]},_t)),it.size>5&&` +${it.size-5} more`]}):null})(),(we.accountEmail||we.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[we.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",we.accountOwnerName]}),we.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:we.accountEmail})]}),we.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:lf(we.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:we.timestamp}),L.unreadCount>0&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!M&&n.jsx(ia,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),me&&Je&&n.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:L.emails.map((it,Ut)=>{const _t=Sr.has(it.id);return n.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[n.jsxs("button",{type:"button",onClick:()=>cf(it.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${N?.id===it.id?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:Xt=>{Xt.stopPropagation(),cf(it.id)},children:_t?n.jsx(Ts,{className:"w-3 h-3 text-slate-500"}):n.jsx(ia,{className:"w-3 h-3 text-slate-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`text-xs font-medium ${it.isRead?"text-slate-600":"text-slate-900"}`,children:it.sender||it.email}),!it.isRead&&n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(it.to?.length>0||it.cc?.length>0)&&n.jsxs("span",{className:"text-xs text-slate-400",children:[it.to?.length>0&&`To: ${it.to.slice(0,2).map(Xt=>Xt.split("@")[0]).join(", ")}${it.to.length>2?"...":""}`,it.cc?.length>0&&` CC: ${it.cc.slice(0,2).map(Xt=>Xt.split("@")[0]).join(", ")}${it.cc.length>2?"...":""}`]})]}),it.lastMessage&&!_t&&n.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:lf(it.lastMessage,100)})]}),n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:it.timestamp})]}),_t&&n.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsx("span",{className:"font-medium",children:it.sender||it.email}),n.jsx("span",{className:"text-slate-400",children:""}),n.jsx("span",{children:it.timestamp})]}),n.jsx("button",{type:"button",onClick:()=>ro(it),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),n.jsx("div",{className:"text-xs text-slate-700 mt-2",children:n.jsx(C8,{content:it.lastMessage||"No content"})}),(it.to?.length>0||it.cc?.length>0||it.bcc?.length>0)&&n.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[it.to?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"To:"})," ",it.to.join(", ")]}),it.cc?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"CC:"})," ",it.cc.join(", ")]}),it.bcc?.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BCC:"})," ",it.bcc.join(", ")]})]})]})]},it.id)})})]},L.threadId)}),or&&n.jsx("li",{className:"px-4 py-4 pb-6",ref:cc,children:hr?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(vt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:ln,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`threads-${Wr||"all"}`):n.jsxs("ul",{ref:hi,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[ao.map(L=>n.jsx("li",{children:n.jsxs("div",{role:M?void 0:"button",tabIndex:M?void 0:0,onKeyDown:me=>{!M&&(me.key==="Enter"||me.key===" ")&&(me.preventDefault(),ro(L))},onClick:()=>!M&&ro(L),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===L.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[M&&n.jsx("input",{type:"checkbox",checked:Ia.has(L.id),onChange:()=>Hl(L.id),onClick:me=>me.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Ps,{src:void 0,alt:L.sender||L.email||"",fallbackText:L.sender||L.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${L.isRead?"text-slate-600":"text-slate-900"}`,children:L.subject||"(No subject)"}),L.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(jf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),L.syncStatus?.starredStatus&&Ld(L.syncStatus.starredStatus)]}),L.attachments&&L.attachments.length>0&&n.jsx(Z0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${L.attachments.length} attachment(s)`}),L.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${L.priority==="high"?"bg-red-100 text-red-700":L.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:L.priority==="high"?"High":L.priority==="low"?"Low":"Medium"}),L.threadStatus&&L.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${L.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":L.threadStatus==="pending"?"bg-amber-100 text-amber-700":L.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:L.threadStatus.charAt(0).toUpperCase()+L.threadStatus.slice(1)}),L.owner&&gn.find(me=>me.id===L.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:gn.find(me=>me.id===L.owner)?.name||"Assigned"}),L.labels&&L.labels.length>0&&n.jsxs(n.Fragment,{children:[L.labels.slice(0,3).map(me=>{const we=Ar.find(Je=>Je.id===me);return we?n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:we.name,children:we.name},me):null}),L.labels.length>3&&n.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",L.labels.length-3]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:L.sender||L.email}),(L.accountEmail||L.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[L.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",L.accountOwnerName]}),L.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:L.accountEmail})]}),L.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:lf(L.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:L.timestamp}),!L.isRead&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!M&&n.jsx(ia,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},L.id)),or&&n.jsx("li",{ref:cc,className:"px-4 py-4 pb-6",children:hr?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(vt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:ln,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`list-${Wr||"all"}`)}),n.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:R?n.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:n.jsx(vt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):N?n.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[n.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[n.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:N.subject||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"break-words",children:N.sender||N.email}),n.jsx("span",{children:""}),n.jsx("span",{children:N.timestamp}),N.senderClassification&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${N.senderClassification==="internal"?"bg-slate-100 text-slate-700":N.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:N.senderClassification==="internal"?"Internal":N.senderClassification==="system"?"System":"Customer"})]}),(N.accountEmail||N.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[N.accountOwnerName&&n.jsxs("span",{children:["Synced via ",n.jsx("span",{className:"font-medium text-slate-600",children:N.accountOwnerName})]}),N.accountEmail&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:N.accountEmail})]})]})}),N.linkedRecords&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[N.linkedRecords.contactId&&(()=>{const L=vl.find(me=>me.id===N.linkedRecords?.contactId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[n.jsx(qi,{className:"w-3 h-3"}),L.name]}):null})(),N.linkedRecords.companyId&&(()=>{const L=pu.find(me=>me.id===N.linkedRecords?.companyId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[n.jsx(ul,{className:"w-3 h-3"}),L.name]}):null})(),N.linkedRecords.dealId&&(()=>{const L=fa.find(me=>me.id===N.linkedRecords?.dealId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[n.jsx(Al,{className:"w-3 h-3"}),L.title||L.name]}):null})(),N.linkedRecords.projectId&&(()=>{const L=Uc.find(me=>me.id===N.linkedRecords?.projectId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[n.jsx(nu,{className:"w-3 h-3"}),L.title||L.name]}):null})(),N.linkedRecords.contractId&&(()=>{const L=xu.find(me=>me.id===N.linkedRecords?.contractId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[n.jsx(Gn,{className:"w-3 h-3"}),L.title]}):null})()]}),Pd?n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(vt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(qc.contacts.length>0||qc.companies.length>0)&&n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),qc.contacts.map(L=>n.jsxs("button",{onClick:()=>As("contact",L.id),disabled:ns,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[n.jsx(qi,{className:"w-3 h-3"}),L.name,n.jsx(Zr,{className:"w-3 h-3"})]},L.id)),qc.companies.map(L=>n.jsxs("button",{onClick:()=>As("company",L.id),disabled:ns,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[n.jsx(ul,{className:"w-3 h-3"}),L.name,n.jsx(Zr,{className:"w-3 h-3"})]},L.id))]}),n.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",onClick:()=>{Id("contact"),$c(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(d0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),n.jsxs("button",{type:"button",onClick:()=>{Id("company"),$c(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(d0,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),n.jsxs("button",{type:"button",onClick:()=>{Id("deal"),$c(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(d0,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),n.jsxs("button",{type:"button",onClick:()=>{Id("project"),$c(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(d0,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),n.jsxs("button",{type:"button",onClick:()=>{Id("contract"),$c(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(d0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),n.jsxs("button",{type:"button",onClick:()=>tf(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(_i,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),N.labels&&N.labels.length>0&&n.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:N.labels.map(L=>{const me=Ar.find(we=>we.id===L);return me?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[200px]",children:me.name}),n.jsx("button",{type:"button",onClick:()=>Ko(N.id,L),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:n.jsx(Zt,{className:"w-3 h-3"})})]},L):null})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",disabled:Vs||!i,onClick:async()=>{if(!(!N?.id||!i)){fi(!0),pl([]);try{const me=(await tie({emailId:N.id,userId:i,useAi:!0,availableLabels:Ar.map(we=>({id:we.id,name:we.name}))}))?.data;me?.suggestedLabels?.length&&(pl(me.suggestedLabels),xo(me.suggestionId||null))}catch{pl([])}finally{fi(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[Vs?n.jsx(vt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):n.jsx(Ri,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),Ai.length>0&&n.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),Ai.map((L,me)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[150px]",children:L.labelName}),n.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",L.source,")"]}),L.labelId&&n.jsx("button",{type:"button",onClick:()=>{yu(N.id,[L.labelId],[],!0,jd||void 0),pl(we=>we.filter((Je,it)=>it!==me))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:n.jsx(Zr,{className:"w-3 h-3"})})]},L.labelId||me))]}),n.jsx("div",{className:"mt-1",children:n.jsxs("button",{type:"button",onClick:()=>{ms(N.id),ui(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[n.jsx(Zr,{className:"w-3 h-3"}),N.labels&&N.labels.length>0?"Manage Labels":"Add Labels"]})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(N.customTags||[]).map((L,me)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[L,n.jsx("button",{type:"button",onClick:()=>{const we=(N.customTags||[]).filter((Je,it)=>it!==me);Av(N.id,{userId:i,customTags:we}).then(()=>{S(Je=>Je?{...Je,customTags:we}:null)}).catch(()=>{})},className:"hover:text-red-600",children:n.jsx(Zt,{className:"w-3 h-3"})})]},me)),n.jsx("input",{type:"text",placeholder:"Add tag",value:Pl,onChange:L=>Ss(L.target.value),onKeyDown:L=>{if(L.key==="Enter"&&Pl.trim()){const we=[...N.customTags||[],Pl.trim()];Av(N.id,{userId:i,customTags:we}).then(()=>{S(Je=>Je?{...Je,customTags:we}:null),Ss("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[v&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("select",{value:N.priority||"medium",onChange:L=>pc(N.id,{priority:L.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]}),n.jsxs("select",{value:N.threadStatus||"active",onChange:L=>pc(N.id,{threadStatus:L.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"resolved",children:"Resolved"}),n.jsx("option",{value:"archived",children:"Archived"})]}),c&&n.jsxs("select",{value:N.owner||"",onChange:L=>pc(N.id,{owner:L.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[n.jsx("option",{value:"",children:"Unassigned"}),gn.map(L=>n.jsx("option",{value:L.id,children:L.name||L.email},L.id))]})]}),p&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>zl(N.id,!N.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:N.isStarred?"Unstar":"Star",children:N.isStarred?n.jsx(jf,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):n.jsx(IU,{className:"w-4 h-4"})}),N.syncStatus?.starredStatus&&n.jsx("div",{className:"flex-shrink-0",children:Ld(N.syncStatus.starredStatus)})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Vn(N.id,!N.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:N.isRead?"Mark unread":"Mark read"}),N.syncStatus?.readStatus&&n.jsx("div",{className:"flex-shrink-0",children:Ld(N.syncStatus.readStatus)})]}),m&&n.jsx(n.Fragment,{children:N.threadStatus==="archived"?n.jsxs("button",{type:"button",onClick:()=>Kc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[n.jsx(cv,{className:"w-3 h-3"}),"Restore"]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>_o(N.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[n.jsx(cv,{className:"w-3 h-3"}),"Archive"]}),N.threadStatus!=="resolved"&&v&&n.jsxs("button",{type:"button",onClick:()=>xc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[n.jsx(mn,{className:"w-3 h-3"}),"Resolve"]})]})}),b&&n.jsxs("button",{type:"button",onClick:()=>Nu(N.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[n.jsx(Lr,{className:"w-3 h-3"}),"Delete"]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{Rc("reply"),ts([N.email]),pi([]),Ms([]),Xi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),xs(""),rs(N.accountEmail||Me[0]?.email||""),Rl(!1),Bl(!1),gl(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(tc,{className:"w-3 h-3"}),"Reply"]}),n.jsx("button",{type:"button",onClick:()=>{Rc("replyAll");const L=(N.accountEmail||"").toLowerCase(),me=[N.email,...N.to||[],...N.cc||[]].filter((we,Je,it)=>{const Ut=we.toLowerCase();return it.findIndex(_t=>_t.toLowerCase()===Ut)===Je&&Ut!==L});ts([N.email]),pi(me.filter(we=>we.toLowerCase()!==N.email.toLowerCase())),Ms([]),Xi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),xs(""),rs(N.accountEmail||Me[0]?.email||""),Rl(!0),Bl(!1),gl(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),f&&n.jsx("button",{type:"button",onClick:()=>{Rc("forward"),ts([]),pi([]),Ms([]),Xi(N.subject?.startsWith("Fwd:")||N.subject?.startsWith("Fw:")?N.subject:`Fwd: ${N.subject||""}`);const L=N.body||N.lastMessage||"";xs(`

--- Forwarded message ---
From: ${N.sender||N.email}
Date: ${N.timestamp}
Subject: ${N.subject}
To: ${N.to?.join(", ")||N.email}

${L}`),rs(N.accountEmail||Me[0]?.email||""),Rl(!1),Bl(!1),gl(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),n.jsxs("button",{type:"button",onClick:()=>{if(!i||!N.id)return;const L=(N.body||N.lastMessage||"").replace(/<[^>]+>/g," "),me=`${N.subject||""} ${L}`.toLowerCase(),we=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Je;for(const aa of we){const ei=me.match(aa);if(ei){Je=ei[0];break}}const it=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Ut;for(const aa of it){const ei=me.match(aa);if(ei){Ut=ei[0];break}}const _t=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Xt;for(const aa of _t){const ei=me.match(aa);if(ei?.[1]){Xt=ei[1].trim();break}}const Tr=Array.isArray(N.to)?N.to:N.to?[N.to]:[],vn=N.sender||N.from||N.email,na=[...new Set([...Tr,vn].filter(Boolean))];Sn(N.id),Ua(N.subject||null),Ys(N.body||N.lastMessage||null),Bo(na.length?na:null),qr({title:N.subject||"Meeting",date:Je,time:Ut,location:Xt,participants:na,description:(N.body||N.lastMessage||"").substring(0,500)}),Tt(!0)},disabled:!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Open schedule meeting modal to review and confirm",children:[n.jsx(Kn,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),n.jsx("div",{className:"prose prose-slate max-w-none break-words",children:n.jsx(C8,{content:N.body||N.lastMessage||"No content",highlightTerm:st(H).searchText||void 0})})]}),($f.length>0||Zu.length>0||hc.length>0)&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),n.jsxs("div",{className:"space-y-3",children:[$f.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_i,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",$f.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:$f.map(L=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:L.title}),L.status&&n.jsx("span",{className:"text-xs text-slate-500",children:L.status})]},L.id))})]}),Zu.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(nu,{className:"w-4 h-4 text-amber-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",Zu.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Zu.map(L=>n.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsx("p",{className:"text-sm font-medium text-amber-900",children:L.title||L.name}),L.status&&n.jsx("span",{className:"text-xs text-amber-600",children:L.status})]},L.id))})]}),hc.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Gn,{className:"w-4 h-4 text-red-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",hc.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:hc.map(L=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[n.jsx("p",{className:"text-sm font-medium text-red-900",children:L.title}),L.status&&n.jsx("span",{className:"text-xs text-red-600",children:L.status})]},L.id))})]})]})]}),G.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Kn,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",G.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:G.map(L=>n.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:L.title}),n.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(es,{className:"w-3 h-3"}),n.jsxs("span",{children:[new Date(L.start).toLocaleString()," - ",new Date(L.end).toLocaleString()]})]}),L.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(rS,{className:"w-3 h-3"}),n.jsx("span",{children:L.location})]}),L.participants&&L.participants.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qi,{className:"w-3 h-3"}),n.jsx("span",{children:L.participants.join(", ")})]})]})]}),L.htmlLink&&n.jsx("a",{href:L.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:n.jsx(cs,{className:"w-4 h-4"})})]})},L.id))})]}),N.attachments&&N.attachments.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Z0,{className:"w-4 h-4 text-slate-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",N.attachments.length,")"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:N.attachments.map((L,me)=>{const we=L.isDriveFile||L.driveFileId;return n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${we?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[we&&L.iconUrl?n.jsx("img",{src:L.iconUrl,alt:L.filename,className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${Zs(L.mimeType)?"bg-blue-50 text-blue-600":gc(L.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Zs(L.mimeType)?n.jsx(_l,{className:"w-4 h-4"}):gc(L.mimeType)?n.jsx(Nc,{className:"w-4 h-4"}):n.jsx(Z0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.filename}),we&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:we?"Google Drive file":`${ga(L.size)}  ${L.mimeType}`})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[we&&L.previewUrl&&n.jsx("a",{href:L.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(cs,{className:"w-4 h-4"})}),!we&&(Zs(L.mimeType)||gc(L.mimeType))&&n.jsx("button",{onClick:()=>Qh(N.id,L.attachmentId,L.filename,L.mimeType),disabled:Xn[`${N.id}-${L.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:Xn[`${N.id}-${L.attachmentId}-view`]?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(ru,{className:"w-4 h-4"})}),!we&&n.jsx("button",{onClick:()=>af(N.id,L.attachmentId,L.filename),disabled:Xn[`${N.id}-${L.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:Xn[`${N.id}-${L.attachmentId}-download`]?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(Bu,{className:"w-4 h-4"})}),we&&L.downloadUrl&&n.jsx("a",{href:L.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:n.jsx(Bu,{className:"w-4 h-4"})})]})]},L.attachmentId||me)})})]}),N.attachments&&N.attachments.some(L=>(L.isDriveFile||L.driveFileId)&&L.previewUrl&&(L.mimeType?.includes("google-apps")||L.mimeType?.includes("document")||L.mimeType?.includes("spreadsheet")||L.mimeType?.includes("presentation")))&&n.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Nc,{className:"w-4 h-4 text-blue-500"}),n.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),n.jsx("div",{className:"space-y-4",children:N.attachments.filter(L=>(L.isDriveFile||L.driveFileId)&&L.previewUrl&&(L.mimeType?.includes("google-apps")||L.mimeType?.includes("document")||L.mimeType?.includes("spreadsheet")||L.mimeType?.includes("presentation"))).map((L,me)=>{const we=L.previewUrl?.replace("/edit","/preview")||L.previewUrl;return n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[L.iconUrl&&n.jsx("img",{src:L.iconUrl,alt:L.filename,className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:L.filename}),n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),L.previewUrl&&n.jsx("a",{href:L.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:n.jsx(cs,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:n.jsx("iframe",{src:we,className:"absolute top-0 left-0 w-full h-full border-0",title:L.filename,allow:"fullscreen"})})]},L.attachmentId||me)})})]}),n.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[ct.length>0&&n.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),j(()=>Xo(),me=>{})},disabled:Ge,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:Ge?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fd,{className:"w-3 h-3"}),"Regenerate"]})}),!tt&&n.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),j(()=>Xo(),me=>{})},disabled:Ge,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:Ge?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ri,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),ct.length>1&&n.jsxs("div",{className:"mb-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:ct.map((L,me)=>n.jsxs("button",{type:"button",onClick:()=>{be(me),ht(y(L.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${ve===me?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:L.style}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[L.confidence,"%"]})]}),n.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:L.description}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full ${L.confidence>=80?"bg-green-500":L.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${L.confidence}%`}})})]},me))})]}),tt?n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[ct.length>1&&ve!==null&&n.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[ct[ve].style," Variation"]}),n.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",ct[ve].description,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[ct[ve].confidence,"%"]})]})]}),n.jsx("div",{className:"quill-wrapper",children:n.jsx(l1,{ref:L=>{yt.current=L,L&&(wt.current=L.getEditor())},theme:"snow",value:tt,onChange:L=>ht(L),modules:Xc,formats:$0,placeholder:"Edit your draft..."})}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("button",{type:"button",onClick:of,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(tc,{className:"w-3 h-3"}),"Copy to Clipboard"]}),n.jsxs("button",{type:"button",onClick:Xf,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[n.jsx(Zr,{className:"w-3 h-3"}),"Save as Template"]}),n.jsx("button",{type:"button",onClick:()=>{sr(!0),Rd()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),n.jsx("button",{type:"button",onClick:()=>{ht(null),xt([]),be(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),n.jsx("button",{type:"button",onClick:()=>{sr(!0),Rd()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",N?.id&&rr[N.id]&&rr[N.id].length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:rr[N.id].length})]}),l&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",style:{position:"relative"},children:[n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),n.jsx(l1,{ref:L=>{pt.current=L,L&&(Vt.current=L.getEditor())},theme:"snow",value:Hr,onChange:Es,onBlur:()=>{setTimeout(()=>{va||yn(null)},200)},modules:Xc,formats:$0,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),va&&vr.length>0&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:L=>{L.preventDefault()},children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(Nh,{className:"w-3 h-3"}),"Mention User"]}),vr.map(L=>n.jsxs("button",{type:"button",onMouseDown:me=>{me.preventDefault(),me.stopPropagation(),Kf(L)},onClick:me=>{me.preventDefault(),me.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:L.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:L.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.email||""})]})]},L.id))]})})]}),n.jsxs("div",{className:"relative",ref:Pa,children:[n.jsxs("button",{type:"button",onClick:()=>_r(!Mt),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${nr.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hd,{className:`w-4 h-4 ${nr.length>0?"text-indigo-600":"text-slate-400"}`}),n.jsx("span",{className:`font-medium ${nr.length>0?"text-indigo-900":"text-slate-600"}`,children:nr.length>0?`Marked for ${nr.length} team member${nr.length>1?"s":""}`:"Mark for team member"})]}),nr.length>0&&n.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),fr([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:n.jsx(Zt,{className:"w-3 h-3 text-indigo-600"})})]}),Mt&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[n.jsx(hd,{className:"w-3 h-3"}),"Select Team Members"]}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:Kt,onChange:L=>Na(L.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),gn.filter(L=>L.id!==i&&(Kt===""||L.name?.toLowerCase().includes(Kt.toLowerCase())||L.email?.toLowerCase().includes(Kt.toLowerCase()))).map(L=>{const me=nr.includes(L.id);return n.jsxs("button",{type:"button",onClick:()=>{fr(me?we=>we.filter(Je=>Je!==L.id):we=>[...we,L.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${me?"bg-indigo-50":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${me?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:L.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:L.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.email||""})]}),me&&n.jsx(mn,{className:"w-4 h-4 text-indigo-600"})]},L.id)})]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:jr?n.jsx(_l,{className:"w-4 h-4"}):n.jsx(Oc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:jr?Ne?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:Pt,type:"file",accept:"image/*",onChange:ku,className:"hidden"})]}),n.jsx("button",{onClick:sf,disabled:Be||!Hr.trim()&&!Ne,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Be?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-4 h-4"}),"Send"]})})]}),jr&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:jr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{Gr(""),He(null),Pt.current&&(Pt.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Zt,{className:"w-4 h-4"})})]})]}),!l&&n.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:n.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:rr[N?.id]&&rr[N.id]?.length>0?rr[N.id].map(L=>{const me=rd(o,"shared-inbox:delete-note")&&(Qbe(o)||L.userId===i);return n.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(L.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:L.userName?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:L.userName}),(L.markedFor||[]).length>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[n.jsx(hd,{className:"w-2.5 h-2.5"}),"Marked"]})]}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(L.markedFor||[]).length>0&&n.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",gn.filter(we=>(L.markedFor||[]).includes(we.id)).map(we=>we.name).join(", ")||"Unknown"]})]})]}),me&&n.jsx("button",{onClick:()=>N?.id&&Gl(N.id,L.id),disabled:Ce===L.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ce===L.id?n.jsx(vt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),L.message&&n.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:L.message}}),L.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsxs("button",{type:"button",onClick:()=>ir({isOpen:!0,imageUrl:L.imageUrl,imageName:L.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[n.jsx(_l,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:L.imageName||"View Attachment"})]})})]},L.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(Xa,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),da.isOpen&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ir({isOpen:!1,imageUrl:"",imageName:void 0}),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>ir({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(Zt,{className:"w-6 h-6"})}),n.jsx("img",{src:da.imageUrl,alt:da.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:L=>L.stopPropagation()}),da.imageName&&n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:n.jsx("p",{className:"text-sm font-medium text-slate-900",children:da.imageName})})]})}),fn&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Ur(!1),Un("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),n.jsx("button",{onClick:()=>{Ur(!1),Un("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:ea,onChange:L=>Un(L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),bc())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[n.jsx("button",{onClick:()=>{Ur(!1),Un("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:bc,disabled:!ea||!ea.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),Rt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>sr(!1),children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),n.jsx("button",{onClick:()=>sr(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Yt.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ri,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):n.jsx("div",{className:"space-y-3",children:Yt.map(L=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:me=>{me.preventDefault(),me.stopPropagation(),N&&L.content&&(ht(L.content),sr(!1),t("Template loaded"))},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:L.name}),n.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[L.content?.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(L.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:me=>{me.preventDefault(),me.stopPropagation(),N&&L.content&&(ht(L.content),sr(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),n.jsx("button",{onClick:async me=>{me.preventDefault(),me.stopPropagation(),jo(L.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Lr,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},L.id))})})]})}),Pi&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>jo(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Rn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>jo(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const L=Pi;jo(null);try{await Cse(L,i),t("Template deleted"),Rd()}catch(me){const we=me?.message||"Failed to delete template";console.error("[INBOX] Error deleting template:",we),r(we)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),mu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>zo(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Nc,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),n.jsx("button",{onClick:()=>zo(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:gi,onChange:L=>Xu(L.target.value),onKeyDown:L=>{L.key==="Enter"&&Md(gi)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),n.jsx("button",{onClick:()=>Md(gi),disabled:Ul,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:Ul?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),Ul&&Td.length===0?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):Td.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Nc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):n.jsx("div",{className:"space-y-2",children:Td.map(L=>n.jsxs("button",{onClick:()=>Gf(L),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[L.iconLink?n.jsx("img",{src:L.iconLink,alt:L.name,className:"w-8 h-8"}):n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(Nc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[L.size?ga(L.size):"Drive file","  ",L.mimeType||"Unknown type"]})]}),n.jsx("button",{onClick:me=>{me.stopPropagation(),L.webViewLink&&window.open(L.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:n.jsx(cs,{className:"w-4 h-4 text-slate-400"})})]},L.id))}),fc&&n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx("button",{onClick:()=>Md(gi,fc),disabled:Ul,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:Ul?"Loading...":"Load More"})})]})]})})]}),bu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>as(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:n.jsx(Rn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>as(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{as(!1),gl(!1),ts([]),pi([]),Ms([]),Xi(""),xs(""),Ji(""),Qi(""),Zi("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),yo&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{as(!0)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Ja==="compose"?"Compose Email":Ja==="reply"?"Reply":Ja==="replyAll"?"Reply All":"Forward"}),n.jsx("button",{onClick:()=>{as(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[Me.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),n.jsx("select",{value:ba,onChange:L=>rs(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:Me.map((L,me)=>n.jsxs("option",{value:L.email,children:[L.email," ",L.isCurrentUser?"(You)":`(${L.ownerName})`]},`${L.email}-${L.userId}-${me}`))})]}),Me.length===0&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No email accounts available. Please connect a Gmail account or ensure users are configured."}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[on.map((L,me)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>ts(on.filter((we,Je)=>Je!==me)),className:"hover:text-indigo-900",children:n.jsx(Zt,{className:"w-3 h-3"})})]},me)),n.jsx("input",{type:"text",value:qo,onChange:L=>{const me=L.target.value;if(Ji(me),me.length>0){const we=vl.filter(Je=>Je.email?.toLowerCase().includes(me.toLowerCase())||Je.name?.toLowerCase().includes(me.toLowerCase())).slice(0,5);Bc(we),vs(!0)}else vs(!1)},onKeyDown:L=>{if(L.key==="Enter"&&qo.trim()){L.preventDefault();const me=qo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me)&&!on.includes(me)&&(ts([...on,me]),Ji(""),vs(!1))}else if(L.key==="Backspace"&&qo===""&&on.length>0)ts(on.slice(0,-1));else if(L.key==="ArrowDown"&&gs)L.preventDefault(),Yn(me=>Math.min(me+1,wo.length-1));else if(L.key==="ArrowUp"&&gs)L.preventDefault(),Yn(me=>Math.max(me-1,0));else if(L.key==="Enter"&&gs&&wo[ta]){L.preventDefault();const me=wo[ta];me.email&&!on.includes(me.email)&&(ts([...on,me.email]),Ji(""),vs(!1))}else if(L.key===","||L.key===";"){L.preventDefault();const me=qo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me)&&!on.includes(me)&&(ts([...on,me]),Ji(""),vs(!1))}},onBlur:()=>{const L=qo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!on.includes(L)&&(ts([...on,L]),Ji(""),vs(!1))},placeholder:on.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),gs&&wo.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:wo.map((L,me)=>n.jsxs("button",{type:"button",onClick:()=>{L.email&&!on.includes(L.email)&&(ts([...on,L.email]),Ji(""),vs(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${me===ta?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"font-medium text-slate-900",children:L.name}),n.jsx("div",{className:"text-xs text-slate-500",children:L.email})]},L.id))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),n.jsxs("button",{type:"button",onClick:()=>Rl(!Ti),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Ti?"Hide":"Show"," Cc"]})]}),Ti&&n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[xa.map((L,me)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>pi(xa.filter((we,Je)=>Je!==me)),className:"hover:text-slate-900",children:n.jsx(Zt,{className:"w-3 h-3"})})]},me)),n.jsx("input",{type:"text",value:Rs,onChange:L=>{Qi(L.target.value)},onKeyDown:L=>{if(L.key==="Enter"&&Rs.trim()){L.preventDefault();const me=Rs.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me)&&!xa.includes(me)&&(pi([...xa,me]),Qi(""))}else if(L.key==="Backspace"&&Rs===""&&xa.length>0)pi(xa.slice(0,-1));else if(L.key===","||L.key===";"){L.preventDefault();const me=Rs.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me)&&!xa.includes(me)&&(pi([...xa,me]),Qi(""))}},onBlur:()=>{const L=Rs.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!xa.includes(L)&&(pi([...xa,L]),Qi(""))},placeholder:xa.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),n.jsxs("button",{type:"button",onClick:()=>Bl(!Ed),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Ed?"Hide":"Show"," Bcc"]})]}),Ed&&n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[qn.map((L,me)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>Ms(qn.filter((we,Je)=>Je!==me)),className:"hover:text-slate-900",children:n.jsx(Zt,{className:"w-3 h-3"})})]},me)),n.jsx("input",{type:"text",value:Oi,onChange:L=>{Zi(L.target.value)},onKeyDown:L=>{if(L.key==="Enter"&&Oi.trim()){L.preventDefault();const me=Oi.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me)&&!qn.includes(me)&&(Ms([...qn,me]),Zi(""))}else if(L.key==="Backspace"&&Oi===""&&qn.length>0)Ms(qn.slice(0,-1));else if(L.key===","||L.key===";"){L.preventDefault();const me=Oi.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me)&&!qn.includes(me)&&(Ms([...qn,me]),Zi(""))}},onBlur:()=>{const L=Oi.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!qn.includes(L)&&(Ms([...qn,L]),Zi(""))},placeholder:qn.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:qa,onChange:L=>Xi(L.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),Yt.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:eo||"",onChange:L=>{const me=L.target.value||null;if(wp(me),me){const we=Yt.find(Je=>Je.id===me);we?.content&&(xs(we.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No template"}),Yt.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx("button",{type:"button",onClick:()=>sr(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:n.jsx(Ri,{className:"w-4 h-4"})})]})]}),Ja==="compose"&&n.jsxs("div",{children:[n.jsxs("button",{type:"button",onClick:()=>{zc(!Hf),!Hf&&!ql&&qa&&on.length>0&&no()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4"}),Hf?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),Hf&&n.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:rf?n.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):ql?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),n.jsx("button",{type:"button",onClick:no,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),n.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:ql}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{xs(ql||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),n.jsx("button",{type:"button",onClick:()=>{const L=ql?.replace(/<[^>]+>/g,"")||"";navigator.clipboard.writeText(L),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):n.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Uo.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),n.jsxs("select",{value:Uo.find(L=>L.content===Yi)?.id||"",onChange:L=>{const me=Uo.find(we=>we.id===L.target.value);Fl(me?.content||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No signature"}),Uo.map(L=>n.jsxs("option",{value:L.id,children:[L.name," ",L.isDefault?"(Default)":""]},L.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),n.jsx(l1,{ref:L=>{lt.current=L},theme:"snow",value:$a,onChange:L=>{xs(L)},modules:Xc,formats:$0,placeholder:"Compose your message..."})]}),Yi&&n.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[n.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:Yi}})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:n.jsx(Z0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),n.jsx("input",{ref:$o,type:"file",multiple:!0,onChange:q0,className:"hidden"})]}),n.jsxs("button",{type:"button",onClick:()=>{zo(!0),Xu(""),Md()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(Nc,{className:"w-4 h-4"})}),n.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),_n.length>0&&n.jsx("div",{className:"mt-3 space-y-2",children:_n.map(L=>n.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${L.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[L.isDriveFile&&L.driveIconLink?n.jsx("img",{src:L.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${Zs(L.file.type)?"bg-blue-50 text-blue-600":gc(L.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Zs(L.file.type)?n.jsx(_l,{className:"w-4 h-4"}):gc(L.file.type)?n.jsx(Nc,{className:"w-4 h-4"}):n.jsx(Z0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.file.name}),L.isDriveFile&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:L.isDriveFile?"Google Drive file":`${ga(L.file.size)}  ${L.file.type}`}),Wo[L.id]!==void 0&&Wo[L.id]<100&&n.jsxs("div",{className:"flex-1 max-w-[100px]",children:[n.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${Wo[L.id]}%`}})}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[Wo[L.id],"%"]})]})]})]}),L.isDriveFile&&L.driveWebViewLink&&n.jsx("a",{href:L.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(cs,{className:"w-4 h-4"})}),L.preview&&!L.isDriveFile&&n.jsx("button",{type:"button",onClick:()=>{ja({isOpen:!0,emailId:"",attachmentId:L.id,filename:L.file.name,mimeType:L.file.type,url:L.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:n.jsx(ru,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:()=>Vl(L.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:n.jsx(Zt,{className:"w-4 h-4"})})]},L.id))})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{as(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),Ja==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{Vo(!0),await ws()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Nc,{className:"w-4 h-4"}),"Load Drafts"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:La,disabled:Jn||!qa||!$a,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Jn?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Nc,{className:"w-4 h-4"}),"Save Draft"]})}),Ja==="compose"&&n.jsxs("button",{type:"button",onClick:()=>{if(!on.length||!qa||!$a){r("Please fill in all required fields (To, Subject, Message)");return}bs(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[n.jsx(es,{className:"w-4 h-4"}),"Schedule"]}),Ja==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{if(!i||on.length===0||!qa||!$a){r("Please fill in all required fields (To, Subject, Message)");return}const L=$a.replace(/<[^>]+>/g," ").toLowerCase(),me=`${qa} ${L}`,we=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Je;for(const Tr of we){const vn=me.match(Tr);if(vn){Je=vn[0];break}}const it=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Ut;for(const Tr of it){const vn=me.match(Tr);if(vn){Ut=vn[0];break}}const _t=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Xt;for(const Tr of _t){const vn=me.match(Tr);if(vn&&vn[1]){Xt=vn[1].trim();break}}qr({title:qa,date:Je,time:Ut,location:Xt,participants:on,description:$a.substring(0,500)}),Sn(null),Tt(!0)},disabled:Xe||!i||on.length===0||!qa,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[Xe?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(Kn,{className:"w-4 h-4"}),"Schedule Meeting"]}),d?n.jsx("button",{type:"button",onClick:async()=>{if(!i||on.length===0||!qa||!$a){r("Please fill in all required fields (To, Subject, Message)");return}Qs(!0);try{let L=$a;Yi&&(L+=`<br><br>${Yi}`);const me=await Promise.all(_n.filter(Je=>!Je.isDriveFile).map(async Je=>new Promise((it,Ut)=>{const _t=new FileReader;_t.onload=()=>{const Xt=_t.result.split(",")[1];it({filename:Je.file.name,content:Xt,type:Je.file.type})},_t.onerror=Ut,_t.readAsDataURL(Je.file)}))),we=_n.filter(Je=>Je.isDriveFile&&Je.driveWebViewLink);if(we.length>0&&Ja==="compose"){let Je='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';we.forEach(it=>{Je+=`<li style="margin-bottom: 4px;"><a href="${it.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${it.file.name}</a></li>`}),Je+="</ul></div>",L+=Je}if(Ja==="reply"||Ja==="replyAll")await Ese({emailId:N?.id||"",userId:i,accountEmail:ba||Me[0]?.email,body:L,replyAll:Ja==="replyAll",attachments:me.length>0?me:void 0}),t("Reply sent successfully");else if(Ja==="forward")await Tse({emailId:N?.id||"",userId:i,accountEmail:ba||Me[0]?.email,to:on,cc:xa.length>0?xa:void 0,bcc:qn.length>0?qn:void 0,body:L,attachments:me.length>0?me:void 0}),t("Email forwarded successfully");else{const it=(await Ase({userId:i,accountEmail:ba||Me[0]?.email,to:on,cc:xa.length>0?xa:void 0,bcc:qn.length>0?qn:void 0,subject:qa,body:L,attachments:me.length>0?me:void 0}))?.data?.id;if(it){const Ut=_n.filter(_t=>_t.isDriveFile&&_t.driveFileId);for(const _t of Ut)try{await SI({userId:i,emailId:it,fileId:_t.driveFileId,fileName:_t.file.name,fileMimeType:_t.file.type,webViewLink:_t.driveWebViewLink,webContentLink:void 0,iconLink:_t.driveIconLink})}catch(Xt){console.error("Failed to attach Drive file:",Xt)}}t("Email sent successfully")}_n.forEach(Je=>{Je.preview&&URL.revokeObjectURL(Je.preview)}),gl(!1),ts([]),pi([]),Ms([]),Xi(""),xs(""),Sa([]),Ji(""),Qi(""),Zi(""),zo(!1),await wn()}catch(L){const me=w(L,"Failed to send email");r(me)}finally{Qs(!1)}},disabled:Ml||on.length===0||!qa||!$a||Me.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ml?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-4 h-4"}),Ja==="reply"||Ja==="replyAll"?"Send Reply":Ja==="forward"?"Forward":"Send"]})}):n.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[n.jsx(tc,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),en?.isOpen&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:n.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[(Zs(en.mimeType)||gc(en.mimeType))&&n.jsx(_l,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:en.filename})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{en.url&&window.URL.revokeObjectURL(en.url),ja(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>{N&&en.url&&af(en.emailId,en.attachmentId,en.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[n.jsx(Bu,{className:"w-4 h-4"}),"Download"]})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:en.url?Zs(en.mimeType)?n.jsx("img",{src:en.url,alt:en.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):gc(en.mimeType)?n.jsx("iframe",{src:en.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:en.filename}):n.jsxs("div",{className:"text-center text-slate-500",children:[n.jsx(Nc,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),n.jsx("button",{onClick:()=>{N&&af(en.emailId,en.attachmentId,en.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),Wi&&hs&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{ui(!1),ms(null)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),n.jsx("button",{onClick:()=>{ui(!1),ms(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Me.length>0&&n.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:n.jsxs("button",{onClick:()=>Dn(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Create New Label"]})}),lr?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[n.jsx(vt,{className:"w-6 h-6 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):Ar.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>Da(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsx(fd,{className:"w-4 h-4"}),"Retry"]}),Me.length>0&&n.jsxs("button",{onClick:()=>Dn(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):n.jsx("div",{className:"space-y-2",children:Ar.map(L=>{const we=Tn.find(Je=>Je.id===hs)?.labels?.includes(L.id)||!1;return n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:we,onChange:Je=>{hs&&(Je.target.checked?yu(hs,[L.id],[]):yu(hs,[],[L.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:L.name}),L.type==="system"&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},L.id)})})]})]})}),go&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Dn(!1),Gi("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),n.jsx("button",{onClick:()=>{Dn(!1),Gi(""),Ll("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),n.jsx("input",{type:"text",value:_s,onChange:L=>Gi(L.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:L=>{if(L.key==="Enter"&&_s.trim()&&(uc||Me.length>0)){const me=uc||Me[0].email;ko(_s.trim(),me)}},autoFocus:!0})]}),Me.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),n.jsx("select",{value:uc||Me[0].email,onChange:L=>Ll(L.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Me.map(L=>n.jsx("option",{value:L.email,children:L.email},L.email))})]}),n.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[n.jsx("button",{onClick:()=>{Dn(!1),Gi(""),Ll("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{if(_s.trim()&&Me.length>0){const L=uc||Me[0].email;ko(_s.trim(),L)}},disabled:!_s.trim()||Ki||Me.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ki?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),jt&&i&&n.jsx(Ybe,{isOpen:jt,onClose:()=>{Tt(!1),qr(null),Sn(null),Ua(null),Ys(null),Bo(null)},userId:i,emailId:Kr||void 0,emailSubject:Ba??qa,emailBody:ps??$a,participants:Fs??on,extractedDetails:br||void 0,onCreateSuccess:()=>{Kr&&N?.id===Kr&&yk(i,Kr).then(L=>{L.success&&L.data&&ke(L.data)}).catch(()=>{})}}),B0&&mc&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",mc.charAt(0).toUpperCase()+mc.slice(1)]}),n.jsx("button",{onClick:()=>{$c(!1),Id(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[mc==="contact"&&n.jsx("div",{className:"space-y-2",children:vl.map(L=>n.jsxs("button",{onClick:()=>As("contact",L.id),disabled:ns,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.name}),n.jsx("p",{className:"text-xs text-slate-500",children:L.email})]},L.id))}),mc==="company"&&n.jsx("div",{className:"space-y-2",children:pu.map(L=>n.jsxs("button",{onClick:()=>As("company",L.id),disabled:ns,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.name}),L.industry&&n.jsx("p",{className:"text-xs text-slate-500",children:L.industry})]},L.id))}),mc==="deal"&&n.jsx("div",{className:"space-y-2",children:fa.map(L=>n.jsxs("button",{onClick:()=>As("deal",L.id),disabled:ns,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title||L.name}),L.stage&&n.jsx("p",{className:"text-xs text-slate-500",children:L.stage})]},L.id))}),mc==="project"&&n.jsx("div",{className:"space-y-2",children:Uc.map(L=>n.jsxs("button",{onClick:()=>As("project",L.id),disabled:ns,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title||L.name}),L.status&&n.jsx("p",{className:"text-xs text-slate-500",children:L.status})]},L.id))}),mc==="contract"&&n.jsx("div",{className:"space-y-2",children:xu.map(L=>n.jsxs("button",{onClick:()=>As("contract",L.id),disabled:ns,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title}),L.status&&n.jsx("p",{className:"text-xs text-slate-500",children:L.status})]},L.id))})]})]})}),yp&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),n.jsx("button",{onClick:()=>tf(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",defaultValue:N.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[n.jsx("option",{value:"",children:"None"}),Uc.map(L=>n.jsx("option",{value:L.id,children:L.title||L.name},L.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[n.jsx("option",{value:"",children:"Unassigned"}),gn.map(L=>n.jsx("option",{value:L.id,children:L.name||L.email},L.id))]})]}),n.jsx("button",{onClick:()=>{const L=document.getElementById("task-title"),me=document.getElementById("task-priority"),we=document.getElementById("task-project"),Je=document.getElementById("task-assignee");Gc({title:L?.value,priority:me?.value,projectId:we?.value||void 0,assigneeId:Je?.value||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),Wc&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(es,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),n.jsx("button",{onClick:()=>{bs(!1),$l("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",value:vi,onChange:L=>$l(L.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),n.jsxs("select",{value:Dd,onChange:L=>to(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[n.jsx("button",{onClick:()=>{bs(!1),$l("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(!vi){r("Please select a date and time");return}if(!i||on.length===0||!qa||!$a){r("Please fill in all required fields");return}try{const L=await Promise.all(_n.filter(we=>!we.isDriveFile).map(async we=>new Promise((Je,it)=>{const Ut=new FileReader;Ut.onload=()=>{const _t=Ut.result.split(",")[1];Je({filename:we.file.name,content:_t,type:we.file.type})},Ut.onerror=it,Ut.readAsDataURL(we.file)})));let me=$a;Yi&&(me+=`<br><br>${Yi}`),await Mse({userId:i,accountEmail:ba||Me[0]?.email,to:on,cc:xa.length>0?xa:void 0,bcc:qn.length>0?qn:void 0,subject:qa,body:me,scheduledDateTime:vi,timezone:Dd,attachments:L.length>0?L:void 0}),t("Email scheduled successfully"),bs(!1),gl(!1),ts([]),pi([]),Ms([]),Xi(""),xs(""),Sa([]),$l("")}catch(L){const me=w(L,"Failed to schedule email");r(me)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),Jh&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Nc,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),n.jsx("button",{onClick:()=>{Vo(!1),Vf([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:U0?n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx(vt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):nf.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Nc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):n.jsx("div",{className:"space-y-3",children:nf.map(L=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{if(L.payload?.headers){const me=L.payload.headers,we=me.find(_t=>_t.name==="To"),Je=me.find(_t=>_t.name==="Cc"),it=me.find(_t=>_t.name==="Bcc"),Ut=me.find(_t=>_t.name==="Subject");we?.value&&ts(we.value.split(",").map(_t=>_t.trim())),Je?.value&&pi(Je.value.split(",").map(_t=>_t.trim())),it?.value&&Ms(it.value.split(",").map(_t=>_t.trim())),Ut?.value&&Xi(Ut.value)}if(L.payload?.body?.data)try{const me=atob(L.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));xs(me)}catch(me){console.error("Failed to decode draft body:",me),r("Failed to decode draft body")}else if(L.payload?.parts){const me=L.payload.parts.find(we=>we.mimeType==="text/html");if(me?.body?.data)try{const we=atob(me.body.data.replace(/-/g,"+").replace(/_/g,"/"));xs(we)}catch(we){console.error("Failed to decode draft body:",we),r("Failed to decode draft body")}}Vo(!1),t("Draft loaded")},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:L.payload?.headers?.find(me=>me.name==="Subject")?.value||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",L.payload?.headers?.find(me=>me.name==="To")?.value||"No recipients"]}),n.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",L.message?.internalDate?new Date(parseInt(L.message.internalDate)).toLocaleString():"Unknown date"]})]}),n.jsx("button",{onClick:me=>{if(me.stopPropagation(),L.payload?.headers){const we=L.payload.headers,Je=we.find(Xt=>Xt.name==="To"),it=we.find(Xt=>Xt.name==="Cc"),Ut=we.find(Xt=>Xt.name==="Bcc"),_t=we.find(Xt=>Xt.name==="Subject");Je?.value&&ts(Je.value.split(",").map(Xt=>Xt.trim())),it?.value&&pi(it.value.split(",").map(Xt=>Xt.trim())),Ut?.value&&Ms(Ut.value.split(",").map(Xt=>Xt.trim())),_t?.value&&Xi(_t.value)}if(L.payload?.body?.data)try{const we=atob(L.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));xs(we)}catch(we){console.error("Failed to decode draft body:",we),r("Failed to decode draft body")}else if(L.payload?.parts){const we=L.payload.parts.find(Je=>Je.mimeType==="text/html");if(we?.body?.data)try{const Je=atob(we.body.data.replace(/-/g,"+").replace(/_/g,"/"));xs(Je)}catch(Je){console.error("Failed to decode draft body:",Je),r("Failed to decode draft body")}}Vo(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},L.id))})})]})}),At&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{qt(!1),Ye("")},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(mn,{className:"w-5 h-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[Me.length," account",Me.length!==1?"s":""," connected"]})]})]}),n.jsx("button",{onClick:()=>{qt(!1),Ye("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:n.jsxs("div",{className:"relative",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:Gt,onChange:L=>Ye(L.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const L=new Set(ut.map(we=>we.accountEmail.toLowerCase())),me=Me.filter((we,Je,it)=>it.findIndex(Ut=>Ut.email===we.email&&Ut.userId===we.userId)===Je).filter(we=>{if(!Gt.trim())return!0;const Je=Gt.toLowerCase();return we.email.toLowerCase().includes(Je)||we.ownerName.toLowerCase().includes(Je)});return me.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx(g0,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium text-sm",children:Gt?"No accounts found matching your search":"No accounts connected"}),Gt&&n.jsx("button",{onClick:()=>Ye(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):n.jsx("div",{className:"space-y-2",children:me.map((we,Je)=>{const it=L.has(we.email.toLowerCase()),Ut=ut.find(_t=>_t.accountEmail.toLowerCase()===we.email.toLowerCase());return n.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${we.isCurrentUser?"border-indigo-300 bg-indigo-50/30":it?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${it?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:we.email.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:we.email}),we.isCurrentUser&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),it&&n.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:we.ownerName==="Unknown User"?n.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(we.connectedAt).toLocaleDateString()]}):n.jsxs(n.Fragment,{children:[we.ownerName,"  Connected ",new Date(we.connectedAt).toLocaleDateString(),!we.hasToken&&we.ownerName!=="Unknown User"&&n.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),n.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[it?n.jsx("button",{onClick:()=>Ut&&Wa(Ut.id,we.email),disabled:tr===we.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:tr===we.email?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Unfiltering..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(ru,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Show"})]})}):n.jsx("button",{onClick:()=>bi(we.email),disabled:tr===we.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:tr===we.email?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Hiding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(pU,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Hide"})]})}),we.isCurrentUser&&we.hasToken!==!1&&n.jsx("button",{onClick:()=>Zn(we.email),disabled:Et===we.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:Et===we.email?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Disconnecting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(R8,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Remove"})]})}),we.isCurrentUser&&we.hasToken===!1&&n.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${we.email}-${we.userId}-${Je}`)})})})()}),n.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:n.jsxs("button",{onClick:()=>{qt(!1),ys()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[n.jsx(cv,{className:"w-14 h-14 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},eye=()=>{const{showSuccess:e,showError:t}=jn(),[r,a]=I.useState([]),[s,i]=I.useState(!0),[o,l]=I.useState(!1),[c,d]=I.useState({name:"",trigger:"",action:"",description:""}),[u,f]=I.useState(!1),[p,m]=I.useState(null),[b,v]=I.useState(null),[g,w]=I.useState(null),[y,j]=I.useState(null);I.useEffect(()=>{(async()=>{i(!0);try{const D=JSON.parse(localStorage.getItem("user_data")||"{}").id,R=await mI(D),T=R?.data||R||[];a(Array.isArray(T)?T:[])}catch(D){console.error("[AUTOMATIONS] Failed to fetch automations:",D),t(D.message||"Failed to load automations"),a([])}finally{i(!1)}})()},[]),I.useEffect(()=>{const P=async()=>{const D=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const R=await mI(D),T=R?.data||R||[];a(Array.isArray(T)?T:[])}catch(R){console.error("Failed to refresh automations:",R)}};return window.addEventListener("refresh-automations",P),()=>window.removeEventListener("refresh-automations",P)},[]);const N=async P=>{m(P);try{await Qne(P);const D=r.find(R=>R.id===P);a(R=>R.map(T=>T.id===P?{...T,active:!T.active}:T)),e(`Automation "${D?.name}" ${D?.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(D){console.error("Failed to toggle automation:",D),t(D.message||"Failed to toggle automation")}finally{m(null)}},S=P=>{j(P),w(P.id)},E=async()=>{if(y){v(y.id);try{await Zne(y.id),a(P=>P.filter(D=>D.id!==y.id)),w(null),j(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(P){console.error("Failed to delete automation:",P),t(P.message||"Failed to delete automation")}finally{v(null)}}},A=async P=>{P.preventDefault(),f(!0);try{const D=JSON.parse(localStorage.getItem("user_data")||"{}").id;await Jne({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:D||void 0}),f(!1),l(!1),d({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(D){console.error("Failed to create automation:",D),t(D.message||"Failed to create automation"),f(!1)}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(Zr,{className:"w-4 h-4"})," Create Recipe"]})]}),s?n.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[n.jsx(vt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(h1,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(P=>n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{onClick:()=>N(P.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${P.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:n.jsx(h1,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:P.name}),P.active&&n.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[n.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:P.description})]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),n.jsx("p",{className:"text-xs font-bold text-slate-700",children:P.trigger})]}),n.jsx(Oo,{className:"w-4 h-4 text-slate-300"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),n.jsx("p",{className:"text-xs font-bold text-indigo-600",children:P.action})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>N(P.id),disabled:p===P.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${P.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:P.active?"Pause Automation":"Activate Automation",children:p===P.id?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):P.active?n.jsx(AU,{className:"w-5 h-5 fill-indigo-600"}):n.jsx(EU,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>S(P),disabled:b===P.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:b===P.id?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):n.jsx(Lr,{className:"w-5 h-5"})})]})]})]},P.id)),n.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:n.jsx(Ri,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),n.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),n.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),n.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",n.jsx(Oo,{className:"w-4 h-4"})]})]})]}),n.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),n.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:A,className:"p-6 space-y-4 text-left",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),n.jsx("input",{required:!0,type:"text",value:c.name,onChange:P=>d({...c,name:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),n.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:P=>d({...c,trigger:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),n.jsx("input",{required:!0,type:"text",value:c.action,onChange:P=>d({...c,action:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),n.jsx("textarea",{required:!0,value:c.description,onChange:P=>d({...c,description:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(xd,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),g&&y&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Iu,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),n.jsx("button",{onClick:()=>w(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",n.jsxs("span",{className:"font-bold text-slate-900",children:['"',y.name,'"']}),"?"]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),n.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>w(null),disabled:b===y.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:E,disabled:b===y.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b===y.id?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},tye=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=jn(),[s,i]=I.useState("registry"),[o,l]=I.useState([]),[c,d]=I.useState([]),[u,f]=I.useState(!0),[p,m]=I.useState("all"),[b,v]=I.useState("open"),[g,w]=I.useState(null),[y,j]=I.useState(!1),[N,S]=I.useState(!1),[E,A]=I.useState({type:"feature",title:"",description:""}),[P,D]=I.useState({type:null,item:null}),[R,T]=I.useState(null),[_,B]=I.useState(!1),[U,H]=I.useState([]),[Y,J]=I.useState(!1),[re,X]=I.useState(!1),[ee,W]=I.useState(null),[O,z]=I.useState(!1),[V,q]=I.useState(""),[K,se]=I.useState(null),pe=e?.role==="Admin",ie=async()=>{if(s==="registry"){f(!0);try{const[de,Ae]=await Promise.all([Aae(),Ic()]),Qe=(de.data||[]).map(ge=>{const fe=ge.url||null;let _e=[];return Array.isArray(ge.attachments)&&ge.attachments.length>0&&(_e=ge.attachments.filter(ze=>ze&&(ze.source==="file"||ze.data)).map(ze=>({type:ze.type||"image",data:ze.data||"",filename:ze.filename||"attachment",mimeType:ze.mimeType||"image/jpeg",source:"file"}))),{...ge,url:fe,attachments:_e}});l(Qe),d(Ae.data||[])}catch{a("Failed to synchronize roadmap registry.")}finally{f(!1)}}};I.useEffect(()=>{ie();const de=()=>ie();return window.addEventListener("refresh-roadmap",de),()=>window.removeEventListener("refresh-roadmap",de)},[s]),I.useEffect(()=>{const de=Ae=>{Ae.key==="Escape"&&K&&se(null)};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[K]),I.useEffect(()=>{q(g&&g.description||"")},[g]);const le=async()=>{if(!(!g||!pe)){z(!0);try{await gj(g.id,{description:V.trim()}),l(de=>de.map(Ae=>Ae.id===g.id?{...Ae,description:V.trim()}:Ae)),w(de=>de&&{...de,description:V.trim()}),r("Context updated")}catch{a("Failed to update context")}finally{z(!1)}}},$e=async(de,Ae)=>{if(pe)try{await gj(de,{status:Ae}),l(Qe=>Qe.map(ge=>ge.id===de?{...ge,status:Ae}:ge)),g?.id===de&&w({...g,status:Ae}),r(`Status updated to ${Ae}`)}catch{a("Update failed.")}},he=async de=>{if(pe){B(!0);try{await gI(de),l(Ae=>Ae.filter(Qe=>Qe.id!==de)),g?.id===de&&w(null),T(null),r("Entry purged from registry.")}catch{a("Purge failed.")}finally{B(!1)}}},Ue=()=>{U.length===ue.length?H([]):H(ue.map(de=>de.id))},Te=async()=>{if(!pe){a("Only admins can delete entries");return}if(U.length===0){a("No items selected");return}J(!0);try{const de=[...U],Ae=de.map(Qe=>gI(Qe));await Promise.all(Ae),l(Qe=>Qe.filter(ge=>!de.includes(ge.id))),g&&de.includes(g.id)&&w(null),H([]),X(!1),r(`Successfully deleted ${de.length} entr${de.length>1?"ies":"y"}`)}catch(de){console.error("Bulk delete error:",de),a(de.message||"Failed to delete entries. Please try again.")}finally{J(!1)}},oe=async de=>{if(de.preventDefault(),!E.title||!E.description){a("Title and description are required");return}S(!0);try{const Ae={...E,userId:e?.id||"anonymous",status:"planned"};await dM(Ae),r("Entry added to Strategic Pipeline"),j(!1),A({type:"feature",title:"",description:""}),ie()}catch(Ae){console.error("[FEEDBACK] Creation failed:",Ae),a(`Failed to add entry: ${Ae.message||"Unknown error"}`)}finally{S(!1)}},te=async()=>{if(!P.item||!P.type)return;let de,Ae;switch(P.type){case"done":de="done",Ae="Entry marked as done";break;case"archive":de="canceled",Ae="Entry archived";break;case"in-execution":de="in-progress",Ae="Entry marked as in execution";break;default:return}try{await gj(P.item.id,{status:de}),l(Qe=>Qe.map(ge=>ge.id===P.item.id?{...ge,status:de}:ge)),g?.id===P.item.id&&w({...g,status:de}),r(Ae),D({type:null,item:null})}catch{a("Failed to update entry status")}},Pe=(de,Ae="w-4 h-4")=>{switch(de){case"done":return n.jsx(mn,{className:`${Ae} text-emerald-500`});case"in-progress":return n.jsx(es,{className:`${Ae} text-blue-500 animate-pulse`});case"postponed":return n.jsx(mU,{className:`${Ae} text-amber-500`});case"canceled":return n.jsx(Fb,{className:`${Ae} text-slate-400`});default:return n.jsx(Jv,{className:`${Ae} text-indigo-400`})}},je=de=>{switch(de){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},Ie=(de,Ae="w-4 h-4")=>{switch(de){case"bug":return n.jsx(Xv,{className:Ae});case"feature":return n.jsx(Ri,{className:Ae});case"idea":return n.jsx(Yj,{className:Ae})}},ue=o.filter(de=>(b==="open"?de.status!=="done"&&de.status!=="canceled":de.status==="done"||de.status==="canceled")?p==="all"?!0:de.type===p:!1);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),n.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[n.jsx(Jv,{className:"w-4 h-4 text-indigo-500"}),n.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),n.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:()=>{v("open"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${b==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),n.jsx("button",{onClick:()=>{v("completed"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${b==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(de=>n.jsx("button",{onClick:()=>{m(de),H([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${p===de?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:de},de)),n.jsxs("button",{onClick:()=>{const Ae=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";A({type:Ae,title:"",description:""}),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Zr,{className:"w-3 h-3"})," New Entry"]})]})]}),u?n.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[n.jsx(vt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):ue.length===0?n.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[n.jsx(d1,{className:"w-16 h-16 text-slate-100"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),n.jsxs("button",{onClick:()=>{const Ae=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";A({type:Ae,title:"",description:""}),j(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[n.jsx(Zr,{className:"w-4 h-4"})," Add Entry"]})]})]}):n.jsxs(n.Fragment,{children:[ue.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:ue.length>0&&U.length===ue.length,onChange:de=>{de.stopPropagation(),Ue()}}),n.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:de=>{de.stopPropagation(),Ue()},children:"Select All Entries"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ue.map(de=>{const Ae=c.find(ge=>ge.id===de.userId),Qe=U.includes(de.id);return n.jsxs("div",{onClick:()=>{w(de),W(null)},className:`bg-white rounded-[32px] border ${Qe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${je(de.type)} flex items-center gap-1.5`,children:[Ie(de.type,"w-2.5 h-2.5"),de.type]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[Pe(de.status,"w-2.5 h-2.5"),de.status]}),n.jsxs("div",{className:"flex items-center gap-1.5",onClick:ge=>ge.stopPropagation(),children:[n.jsx("div",{className:`${Qe?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:n.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Qe?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Qe,onChange:ge=>{ge.stopPropagation(),H(fe=>fe.includes(de.id)?fe.filter(_e=>_e!==de.id):[...fe,de.id])},onClick:ge=>{ge.stopPropagation()}})})}),(de.status==="planned"||de.status==="in-progress"||de.status==="postponed")&&n.jsxs(n.Fragment,{children:[de.status!=="in-progress"&&n.jsx("button",{onClick:ge=>{ge.stopPropagation(),D({type:"in-execution",item:de})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:n.jsx(es,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:ge=>{ge.stopPropagation(),D({type:"done",item:de})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:n.jsx(mn,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:ge=>{ge.stopPropagation(),D({type:"archive",item:de})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:n.jsx(Pu,{className:"w-3.5 h-3.5"})})]}),pe&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:ge=>{ge.stopPropagation(),W(ee===de.id?null:de.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${ee===de.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:n.jsx(tS,{className:"w-3.5 h-3.5"})}),ee===de.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-[55]",onClick:ge=>{ge.stopPropagation(),W(null)}}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),n.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(ge=>n.jsxs("button",{onClick:fe=>{fe.stopPropagation(),$e(de.id,ge),W(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${de.status===ge?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",ge]},ge)),n.jsx("button",{onClick:ge=>{ge.stopPropagation(),T(de),W(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:de.title}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',de.description,'"']}),de.url&&n.jsx("div",{className:"mb-6",children:n.jsxs("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",onClick:ge=>ge.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[de.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(_l,{className:"w-3 h-3"}):n.jsx(sh,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[120px]",children:de.url.length>30?`${de.url.substring(0,30)}...`:de.url}),n.jsx(cs,{className:"w-3 h-3"})]})}),de.attachments&&Array.isArray(de.attachments)&&de.attachments.length>0&&n.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:de.attachments.map((ge,fe)=>ge.type==="image"&&ge.data?n.jsxs("button",{type:"button",onClick:_e=>{_e.stopPropagation(),se({src:ge.data,alt:ge.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(_l,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:ge.filename||"Screenshot"})]},fe):ge.type==="video"&&ge.data?n.jsxs("a",{href:ge.data,target:"_blank",rel:"noopener noreferrer",onClick:_e=>_e.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(sh,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:ge.filename||"Video"}),n.jsx(cs,{className:"w-3 h-3"})]},fe):null)}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:Ae?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black text-slate-900",children:Ae?.name||"Observer"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(de.createdAt).toLocaleDateString()})]})]}),n.jsx(ia,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},de.id)})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:n.jsx(Jv,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(de=>de.type==="bug").length,icon:n.jsx(Xv,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(de=>de.status==="done").length,icon:n.jsx(Ri,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(de=>de.status==="in-progress").length,icon:n.jsx(es,{className:"w-4 h-4 text-blue-500"})}].map((de,Ae)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:de.icon}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:de.label}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:de.value})]})]},Ae))})]}),s==="registry"&&n.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[n.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),n.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",n.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(Xa,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),n.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:n.jsx(h1,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),n.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:n.jsx(D8,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(mh,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:n.jsx(au,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:n.jsx(P8,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:n.jsx(vU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:n.jsx(ii,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:n.jsx(yU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:n.jsx(nS,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(SU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Oo,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(vB,{currentUser:e})}),s==="automation"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(eye,{})}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>se(null),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>se(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(Zt,{className:"w-6 h-6"})}),n.jsx("img",{src:K.src,alt:K.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:de=>de.stopPropagation()})]})}),y&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Zr,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),n.jsx("button",{onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(Zt,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:oe,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Xv,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:n.jsx(Ri,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:n.jsx(Yj,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(de=>n.jsxs("button",{type:"button",onClick:()=>A({...E,type:de.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${E.type===de.id?`${de.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[de.icon," ",de.label]},de.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:E.title,onChange:de=>A({...E,title:de.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),n.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:E.description,onChange:de=>A({...E,description:de.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),n.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N||!E.title||!E.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:N?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:()=>w(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(Zt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${g.type==="bug"?"bg-red-500 shadow-red-100":g.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:Ie(g.type,"w-8 h-8")}),n.jsxs("div",{children:[n.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${je(g.type)}`,children:g.type}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:g.title})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[Pe(g.status,"w-5 h-5"),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:g.status.replace("-"," ")})]})]}),n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[n.jsx(Kn,{className:"w-5 h-5 text-indigo-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(g.createdAt).toLocaleDateString()})]})]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),pe&&n.jsx("button",{type:"button",onClick:le,disabled:O||V.trim()===(g.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:O?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-3 h-3 animate-spin"})," Saving"]}):n.jsxs(n.Fragment,{children:[n.jsx(mn,{className:"w-3 h-3"})," Save Context"]})})]}),pe?n.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[n.jsx("textarea",{rows:4,value:V,onChange:de=>q(de.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),n.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[n.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',g.description,'"']}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),g.url&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(d0,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:n.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[g.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(_l,{className:"w-4 h-4"}):n.jsx(sh,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[200px]",children:g.url.length>40?`${g.url.substring(0,40)}...`:g.url}),n.jsx(cs,{className:"w-4 h-4"})]})})]}),g.attachments&&g.attachments.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(_l,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:g.attachments.map((de,Ae)=>de.type==="image"&&de.data?n.jsxs("button",{type:"button",onClick:()=>se({src:de.data,alt:de.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(_l,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:de.filename||"Screenshot"})]},Ae):de.type==="video"&&de.data?n.jsxs("a",{href:de.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(sh,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:de.filename||"Video"}),n.jsx(cs,{className:"w-4 h-4"})]},Ae):null)})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(qi,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[n.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:c.find(de=>de.id===g.userId)?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-black text-slate-900",children:c.find(de=>de.id===g.userId)?.name||"Impact Member"}),n.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[c.find(de=>de.id===g.userId)?.role||"Stakeholder","  Enterprise Contributor"]})]})]})]}),pe&&n.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ud,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(de=>n.jsxs("button",{onClick:()=>$e(g.id,de),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${g.status===de?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[Pe(de,"w-3 h-3"),de.replace("-"," ")]},de))})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>T(g),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>w(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(mn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),P.type&&P.item&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${P.type==="done"?"bg-emerald-50 text-emerald-600":P.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:P.type==="done"?n.jsx(mn,{className:"w-6 h-6"}):P.type==="in-execution"?n.jsx(es,{className:"w-6 h-6"}):n.jsx(Pu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:P.type==="done"?"Mark as Done?":P.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:P.type==="done"?"This will move the entry to Archive & Done":P.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:P.item.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:P.item.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>D({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:te,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${P.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":P.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:P.type==="done"?"Mark Done":P.type==="in-execution"?"Start Execution":"Archive"})]})]})}),R&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:R.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:R.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>T(null),disabled:_,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>he(R.id),disabled:_,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),U.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:U.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:de=>{if(de.preventDefault(),de.stopPropagation(),!pe){a("Only admins can delete entries");return}if(U.length===0){a("No items selected");return}X(!0)},disabled:Y,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Y?n.jsx(vt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>H([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5"})})]})]})}),re&&U.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",U.length," Entr",U.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(de=>U.includes(de.id)).slice(0,5).map(de=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[Ie(de.type,"w-4 h-4"),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:de.title}),n.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:de.type})]})]},de.id)),U.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",U.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(!1),disabled:Y,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:de=>{de.preventDefault(),de.stopPropagation(),Te()},disabled:Y,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Y?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${U.length} Entr${U.length>1?"ies":"y"}`})]})]})})]})},rye=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),[a,s]=I.useState([]),[i,o]=I.useState([]),[l,c]=I.useState([]),[d,u]=I.useState(null),[f,p]=I.useState(!0),[m,b]=I.useState(!1),[v,g]=I.useState([]),[w,y]=I.useState(!1),[j,N]=I.useState("select"),[S,E]=I.useState(""),[A,P]=I.useState(!1),[D,R]=I.useState(!1),[T,_]=I.useState([]),[B,U]=I.useState(!1),[H,Y]=I.useState(!1),[J,re]=I.useState(!1),[X,ee]=I.useState(!1),[W,O]=I.useState(!1),[z,V]=I.useState(!1),[q,K]=I.useState(""),[se,pe]=I.useState(!1),ie=I.useRef(null),[le,$e]=I.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),he=I.useCallback(async()=>{try{const Se=await uM(),Fe=Se?.data||Se||[];c(Array.isArray(Fe)?Fe:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),Ue=I.useCallback(async()=>{p(!0);try{const Se={};v.length===1&&(Se.companyId=v[0]);const Fe=await Eae(Se);let Me=Fe?.data||Fe||[];Me=Array.isArray(Me)?Me:[],v.length>1&&(Me=Me.filter(et=>v.includes(et.companyId))),s(Me);try{const et=await wd();o(et?.data||et||[])}catch(et){console.error("[Expenses] Failed to fetch companies:",et),o([])}}catch(Se){console.error("[Expenses] Error fetching expenses:",Se),r(Se.message||"Failed to load expenses"),s([])}finally{p(!1)}},[e,v,r]);I.useEffect(()=>{he()},[he]),I.useEffect(()=>{Ue()},[Ue]),I.useEffect(()=>{const Se=()=>Ue();return window.addEventListener("refresh-expenses",Se),()=>window.removeEventListener("refresh-expenses",Se)},[Ue]);const Te=Se=>i.find(Fe=>Fe.id===Se),oe=Se=>{switch(Se){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},te=a,Pe={totalExpenses:te.reduce((Se,Fe)=>Se+(Fe.amount||0),0),pendingCount:te.filter(Se=>Se.status==="Pending"||!Se.status).length,approvedCount:te.filter(Se=>Se.status==="Approved").length,thisMonth:te.filter(Se=>{const Fe=new Date(Se.date),Me=new Date;return Fe.getMonth()===Me.getMonth()&&Fe.getFullYear()===Me.getFullYear()}).reduce((Se,Fe)=>Se+(Fe.amount||0),0)},je=()=>{T.length===te.length&&te.length>0?_([]):_(te.map(Se=>Se.id))},Ie=(Se,Fe=1920,Me=1080,et=.8)=>new Promise((ut,bt)=>{const At=new FileReader;At.onload=qt=>{const Gt=new Image;Gt.onload=()=>{let Ye=Gt.width,Et=Gt.height;Ye>Et?Ye>Fe&&(Et=Et*Fe/Ye,Ye=Fe):Et>Me&&(Ye=Ye*Me/Et,Et=Me);const Cr=document.createElement("canvas");Cr.width=Ye,Cr.height=Et;const tr=Cr.getContext("2d");if(!tr){bt(new Error("Failed to create canvas context"));return}tr.drawImage(Gt,0,0,Ye,Et);const Or=Cr.toDataURL("image/jpeg",et);ut(Or)},Gt.onerror=()=>bt(new Error("Failed to load image")),Gt.src=qt.target?.result},At.onerror=()=>bt(new Error("Failed to read file")),At.readAsDataURL(Se)}),ue=async Se=>{const Fe=Se.target.files?.[0];if(Fe){if(!Fe.type.startsWith("image/")&&!Fe.type.includes("pdf")){r("Please select an image or PDF file");return}if(Fe.size>10*1024*1024){r("File size must be less than 10MB");return}V(!0);try{if(Fe.type.startsWith("image/")){const Me=await Ie(Fe,1920,1080,.8);K(Me),$e(et=>({...et,receiptFile:Fe}))}else{const Me=new FileReader;Me.onload=()=>{K(Me.result),$e(et=>({...et,receiptFile:Fe}))},Me.readAsDataURL(Fe)}}catch(Me){r(Me.message||"Failed to process receipt")}finally{V(!1)}}},de=async Se=>{if(Se.preventDefault(),!le.companyId||!le.title||!le.amount||!le.category||!le.date){r("Please fill in all required fields");return}O(!0);try{const Fe=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;let Me="",et="",ut="";le.receiptFile&&(le.receiptFile.type.startsWith("image/"),Me=q,et=le.receiptFile.name,ut=le.receiptFile.type),await Tae({companyId:le.companyId,title:le.title,amount:parseFloat(le.amount),category:le.category,date:new Date(le.date).toISOString(),description:le.description,status:le.status,receiptUrl:Me||void 0,receiptFilename:et||void 0,receiptMimeType:ut||void 0,userId:Fe}),t("Expense added successfully"),ee(!1),$e({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value=""),Ue(),window.dispatchEvent(new Event("refresh-expenses"))}catch(Fe){r(Fe.message||"Failed to add expense")}finally{O(!1)}},Ae=async()=>{if(S.trim()){P(!0);try{const Se=await fM({name:S.trim()});if(Se?.data){const Fe=Se.data;c(Me=>[...Me,Fe]),$e(Me=>({...Me,category:Fe.name})),E(""),y(!1),t("Category added successfully")}}catch(Se){Se.message?.includes("already exists")||Se.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(Se.message||"Failed to add category")}finally{P(!1)}}},Qe=async(Se,Fe)=>{pe(!0);try{await Oae(Se,{status:Fe}),s(Me=>Me.map(et=>et.id===Se?{...et,status:Fe}:et)),d&&d.id===Se&&u({...d,status:Fe}),t(`Expense status updated to ${Fe}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(Me){r(Me.message||"Failed to update expense status")}finally{pe(!1)}},ge=async()=>{if(d){b(!0);try{await vI(d.id),s(Se=>Se.filter(Fe=>Fe.id!==d.id)),u(null),re(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(Se){r(Se.message||"Failed to delete expense")}finally{b(!1)}}},fe=async()=>{const Se=[...T];if(Se.length!==0){U(!0),Y(!1);try{await Promise.all(Se.map(Fe=>vI(Fe))),s(Fe=>Fe.filter(Me=>!Se.includes(Me.id))),_([]),t(`Successfully deleted ${Se.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{U(!1)}}},_e=Se=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Se),ze=Se=>new Date(Se).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return f?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(vt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{N("manage"),y(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[n.jsx(Os,{className:"w-4 h-4"}),"Manage Categories"]}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[n.jsx(Zr,{className:"w-5 h-5"}),"Add Expense"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:_e(Pe.totalExpenses),icon:n.jsx(zu,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:Pe.pendingCount.toString(),icon:n.jsx(es,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:Pe.approvedCount.toString(),icon:n.jsx(_i,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:_e(Pe.thisMonth),icon:n.jsx(Kn,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((Se,Fe)=>n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("div",{className:`p-2 rounded-lg ${Se.color}`,children:Se.icon})}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:Se.label}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:Se.value})]},Fe))}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nf,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),n.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:v.length===0?"All Companies":v.length===1?i.find(Se=>Se.id===v[0])?.name||"1 Selected":`${v.length} Companies Selected`}),v.length>0&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:v.length})]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",te.length," expense(s)"]})]}),T.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:n.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-sm font-black",children:T.length})}),n.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),n.jsx("div",{className:"w-px h-6 bg-white/20"}),n.jsx("button",{onClick:()=>Y(!0),disabled:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:B?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"DELETE"]})}),n.jsx("button",{onClick:()=>_([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:n.jsx(Zt,{className:"w-5 h-5 text-white"})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:`lg:col-span-2 space-y-4 ${d?"lg:pr-6":""}`,children:[te.length>0&&n.jsx("div",{className:"flex items-center gap-3 mb-4",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:T.length===te.length&&te.length>0,onChange:je,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),te.length===0?n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[n.jsx(e4,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[n.jsx(Zr,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):te.map(Se=>{const Fe=Te(Se.companyId),Me=T.includes(Se.id);return n.jsxs("div",{onClick:()=>u(Se),className:`bg-white rounded-2xl border ${Me?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${d?.id===Se.id?"ring-2 ring-indigo-500":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("input",{type:"checkbox",checked:Me,onChange:et=>{et.stopPropagation(),_(ut=>Me?ut.filter(bt=>bt!==Se.id):[...ut,Se.id])},onClick:et=>et.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),n.jsx(Ps,{src:Fe?.logo,fallbackText:Fe?.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:Se.title}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:Fe?.name||"Unknown Company"})]})]}),n.jsxs("div",{className:"text-right shrink-0 ml-4",children:[n.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:_e(Se.amount)}),n.jsxs("select",{value:Se.status||"Pending",onChange:et=>{et.stopPropagation(),Qe(Se.id,et.target.value)},onClick:et=>et.stopPropagation(),disabled:se,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${oe(Se.status||"Pending")} ${se?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Os,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:Se.category})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kn,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:ze(Se.date)})]}),Se.receiptUrl&&n.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[n.jsx(Gn,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),Se.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:Se.description}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:et=>{et.stopPropagation(),u(Se)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",n.jsx(ia,{className:"w-3 h-3"})]}),n.jsx("button",{onClick:et=>{et.stopPropagation(),u(Se),re(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},Se.id)})]}),d&&n.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),n.jsx("p",{className:"text-lg font-black text-slate-900",children:d.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ps,{src:Te(d.companyId)?.logo,fallbackText:Te(d.companyId)?.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Te(d.companyId)?.name||"Unknown"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),n.jsx("p",{className:"text-2xl font-black text-indigo-600",children:_e(d.amount)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),n.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:d.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsxs("select",{value:d.status||"Pending",onChange:Se=>{const Fe=Se.target.value;Qe(d.id,Fe)},disabled:se,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${oe(d.status||"Pending")} ${se?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]}),se&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(vt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:ze(d.date)})]}),d.description&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),d.receiptUrl&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),n.jsx("div",{className:"space-y-2",children:d.receiptMimeType?.startsWith("image/")?n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:d.receiptUrl,alt:d.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Se=window.open();Se&&Se.document.write(`<img src="${d.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:n.jsx(ru,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):n.jsxs("a",{href:d.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[n.jsx(Gn,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:d.receiptFilename||"Receipt"}),n.jsx(Bu,{className:"w-4 h-4 text-slate-400"})]})})]}),n.jsx("div",{className:"pt-4 border-t border-slate-200",children:n.jsx("button",{onClick:()=>{u(d),re(!0)},disabled:m,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),X&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(e4,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),n.jsx("button",{onClick:()=>{ee(!1),$e({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(Zt,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:de,className:"p-8 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),n.jsxs("select",{required:!0,value:le.companyId,onChange:Se=>$e({...le,companyId:Se.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"",children:"Select Company"}),i.map(Se=>n.jsx("option",{value:Se.id,children:Se.name},Se.id))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:le.title,onChange:Se=>$e({...le,title:Se.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),n.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:le.amount,onChange:Se=>$e({...le,amount:Se.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),n.jsxs("button",{type:"button",onClick:()=>{N("select"),y(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${le.category?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:le.category||"Select Category"}),n.jsx(ia,{className:"w-4 h-4 text-slate-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),n.jsx("input",{required:!0,type:"date",value:le.date,onChange:Se=>$e({...le,date:Se.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),n.jsxs("select",{value:le.status,onChange:Se=>$e({...le,status:Se.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{rows:3,placeholder:"Additional details...",value:le.description,onChange:Se=>$e({...le,description:Se.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),n.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:z?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):q?n.jsx(_l,{className:"w-5 h-5"}):n.jsx(Oc,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:q?le.receiptFile?.name||"Receipt uploaded":"Upload Receipt"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),n.jsx("input",{ref:ie,type:"file",accept:"image/*,.pdf",onChange:ue,disabled:z,className:"hidden"})]}),q&&le.receiptFile?.type.startsWith("image/")&&n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:q,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),q&&le.receiptFile?.type.includes("pdf")&&n.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[n.jsx(Gn,{className:"w-8 h-8 text-red-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-red-900",children:le.receiptFile.name}),n.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),n.jsx("button",{type:"button",onClick:()=>{K(""),$e(Se=>({...Se,receiptFile:null})),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:n.jsx(Zt,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{ee(!1),$e({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:W||z,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),J&&d&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:d.title}),n.jsxs("p",{className:"text-xs text-slate-500",children:[_e(d.amount),"  ",Te(d.companyId)?.name||"Unknown"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{re(!1),u(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:ge,disabled:m,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),w&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:j==="manage"?"Manage Categories":"Select Category"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:j==="manage"?"View and add expense categories":"Choose an expense category"})]}),n.jsx("button",{onClick:()=>{y(!1),E("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Os,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):j==="manage"?l.map(Se=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Os,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:Se.name})]}),n.jsx(mn,{className:"w-5 h-5 text-emerald-600"})]},Se.id)):l.map(Se=>n.jsxs("button",{type:"button",onClick:()=>{$e({...le,category:Se.name}),y(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${le.category===Se.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[n.jsx("span",{className:"font-bold text-sm",children:Se.name}),le.category===Se.name?n.jsx(mn,{className:"w-5 h-5 text-indigo-600"}):n.jsx(Ru,{className:"w-5 h-5 text-slate-300"})]},Se.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:S,onChange:Se=>E(Se.target.value),onKeyDown:Se=>{Se.key==="Enter"&&S.trim()&&!A&&(Se.preventDefault(),Ae())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ae,disabled:!S.trim()||A,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),D&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),n.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.length===0,onChange:()=>{g([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(Se=>n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.includes(Se.id),onChange:Fe=>{Fe.target.checked?g(Me=>[...Me,Se.id]):g(Me=>Me.filter(et=>et!==Se.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx(Ps,{src:Se.logo,fallbackText:Se.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:Se.name})]},Se.id))]})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:()=>{g([])},disabled:v.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(Zt,{className:"w-4 h-4"}),"Clear All"]}),n.jsxs("button",{onClick:()=>{R(!1),Ue()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",v.length===0?"All":v.length,")"]})]})]})}),H&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-8 border-b border-slate-100",children:n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",T.length," Expense(s)?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:fe,disabled:B,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:B?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},nye=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),[a,s]=I.useState([]),[i,o]=I.useState([]),[l,c]=I.useState([]),[d,u]=I.useState(new Date().getFullYear()),[f,p]=I.useState(""),[m,b]=I.useState(null),[v,g]=I.useState(!0),[w,y]=I.useState(!1),[j,N]=I.useState("yearly"),[S,E]=I.useState(!1),[A,P]=I.useState(!1),[D,R]=I.useState(null),[T,_]=I.useState(!1),[B,U]=I.useState(!1),[H,Y]=I.useState(null),[J,re]=I.useState(!1),[X,ee]=I.useState(""),[W,O]=I.useState(!1),[z,V]=I.useState({year:new Date().getFullYear(),department:"",categories:[]}),q=e?.role==="Admin",K=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,se=Array.from({length:5},(ue,de)=>new Date().getFullYear()-2+de),pe=I.useCallback(async()=>{try{const de=(await Mae())?.data||[];o(Array.isArray(de)?de:[])}catch(ue){console.error("[BUDGET] Error fetching departments:",ue)}},[]),ie=I.useCallback(async()=>{try{const de=(await uM())?.data||[];c(Array.isArray(de)?de:[])}catch(ue){console.error("[BUDGET] Error fetching categories:",ue)}},[]),le=I.useCallback(async()=>{g(!0);try{const ue={year:d};f&&(ue.department=f),console.log("[Budget] Fetching budgets with params:",ue);const Ae=(await Pae(ue))?.data||[];console.log("[Budget] Received budgets:",Ae),s(Array.isArray(Ae)?Ae:[])}catch(ue){console.error("[Budget] Error fetching budgets:",ue),r(ue.message||"Failed to load budgets")}finally{g(!1)}},[d,f,r]),$e=I.useCallback(async()=>{y(!0);try{const ue={year:d};f&&(ue.department=f),console.log("[Budget] Fetching tracking with params:",ue);const de=await Fae(ue);console.log("[Budget] Received tracking:",de?.data),b(de?.data||null)}catch(ue){console.error("[Budget] Error fetching tracking:",ue),b(null)}finally{y(!1)}},[d,f]);I.useEffect(()=>{pe(),ie()},[pe,ie]),I.useEffect(()=>{le(),$e()},[le,$e]);const he=()=>{V({year:d,department:f,categories:l.map(ue=>({categoryId:ue.id,categoryName:ue.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},Ue=async()=>{if(X.trim()){O(!0);try{const ue=await fM({name:X.trim()});if(ue?.data){const de=ue.data;c(Ae=>[...Ae,de]),ee(""),t("Category added successfully"),ie()}}catch(ue){ue.message?.includes("already exists")||ue.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(ue.message||"Failed to add category")}finally{O(!1)}}},Te=async()=>{if(!K){r("User not found");return}if(z.categories.length===0){r("Please add at least one category");return}if(z.categories.reduce((de,Ae)=>de+Ae.yearlyBudget,0)===0){r("Total budget cannot be zero");return}_(!0);try{await Iae({year:z.year,department:z.department||null,categories:z.categories,createdBy:K}),t("Budget created successfully"),E(!1),le(),$e()}catch(de){r(de.message||"Failed to create budget")}finally{_(!1)}},oe=async()=>{if(!(!D||!K)){_(!0);try{await Dae(D.id,{categories:z.categories,updatedBy:K}),t("Budget updated successfully"),P(!1),R(null),le(),$e()}catch(ue){r(ue.message||"Failed to update budget")}finally{_(!1)}}},te=async ue=>{U(!0);try{await Lae(ue.id),t("Budget deleted successfully"),Y(null),le(),$e()}catch(de){r(de.message||"Failed to delete budget")}finally{U(!1)}},Pe=ue=>ue>=1e6?`$${(ue/1e6).toFixed(1)}M`:ue>=1e3?`$${(ue/1e3).toFixed(1)}k`:`$${ue.toLocaleString()}`,je=ue=>ue>=100?"text-red-600":ue>=80?"text-amber-600":"text-emerald-600",Ie=ue=>ue>=100?"bg-red-500":ue>=80?"bg-amber-500":"bg-emerald-500";return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),q&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Os,{className:"w-4 h-4"})," Manage Categories"]}),n.jsxs("button",{onClick:()=>{he(),E(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(Zr,{className:"w-4 h-4"})," Create Budget"]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),n.jsx("select",{value:d,onChange:ue=>u(parseInt(ue.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:se.map(ue=>n.jsx("option",{value:ue,children:ue},ue))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:f,onChange:ue=>p(ue.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(ue=>n.jsx("option",{value:ue,children:ue},ue))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),n.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(ue=>n.jsx("button",{onClick:()=>N(ue),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${j===ue?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:ue},ue))})]})]})}),!v&&a.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:m&&m.hasBudget!==!1?"Current Budget":"Available Budgets"}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[a.length," budget",a.length!==1?"s":""," for selected filters"]})]}),m&&m.hasBudget!==!1&&q&&n.jsxs("button",{onClick:()=>{const ue=a[0];R(ue),V({year:ue.year,department:ue.department||"",categories:ue.categories.map(de=>({...de,q1Budget:de.q1Budget||0,q2Budget:de.q2Budget||0,q3Budget:de.q3Budget||0,q4Budget:de.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"})," Edit Budget"]})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:a.map(ue=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[ue.year," ",ue.department&&`- ${ue.department}`]}),!ue.department&&n.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),n.jsx("p",{className:"text-lg font-black text-indigo-600",children:Pe(ue.totalBudget)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),n.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[ue.categories.length," configured"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),n.jsx("p",{className:"text-xs text-slate-500 font-medium",children:ue.createdAt?new Date(ue.createdAt).toLocaleDateString():"N/A"})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:n.jsxs("details",{className:"group",children:[n.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[n.jsx(ia,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:ue.categories.map(de=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:de.categoryName}),n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",n.jsx("span",{className:"font-black",children:Pe(de.yearlyBudget)})]})]},de.categoryId))})]})})]}),q&&!(m&&m.hasBudget!==!1)&&n.jsxs("button",{onClick:()=>{R(ue),V({year:ue.year,department:ue.department||"",categories:ue.categories.map(de=>({...de,q1Budget:de.q1Budget||0,q2Budget:de.q2Budget||0,q3Budget:de.q3Budget||0,q4Budget:de.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"})," View/Edit"]})]})},ue.id))})]}),m&&m.hasBudget!==!1&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:n.jsx(zu,{className:"w-5 h-5 text-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Pe(m.totalBudget)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:n.jsx(au,{className:"w-5 h-5 text-blue-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Pe(m.totalSpent)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl ${m.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:m.totalRemaining>=0?n.jsx(mn,{className:"w-5 h-5 text-emerald-600"}):n.jsx(Rn,{className:"w-5 h-5 text-red-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),n.jsx("h3",{className:`text-2xl font-black ${m.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:Pe(Math.abs(m.totalRemaining))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:n.jsx(rx,{className:"w-5 h-5 text-purple-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),n.jsxs("h3",{className:`text-2xl font-black ${je(m.totalPercentUsed)}`,children:[m.totalPercentUsed.toFixed(1),"%"]})]})]}),m&&m.isOverBudget&&n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[n.jsx(Iu,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),n.jsxs("p",{className:"text-sm text-red-700",children:["You are ",n.jsx("span",{className:"font-black",children:Pe(m.overBudgetAmount)})," over budget (",m.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!v&&(!m||m.hasBudget===!1)&&n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(P8,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:q?`No budget has been set for ${d}${f?` - ${f}`:""}. Create one to start tracking.`:`No budget available for ${d}${f?` - ${f}`:""}.`}),q&&n.jsxs("button",{onClick:()=>{he(),E(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(Zr,{className:"w-4 h-4"})," Create Budget"]})]}),m&&m.hasBudget!==!1&&m.categories&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),n.jsx("div",{className:"divide-y divide-slate-100",children:m.categories.map(ue=>n.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:ue.categoryName}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",n.jsx("span",{className:"font-black text-slate-900",children:Pe(ue.yearlyBudget)})]}),n.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",n.jsx("span",{className:"font-black text-slate-900",children:Pe(ue.yearlySpent)})]}),n.jsxs("span",{className:`font-black ${je(ue.yearlyPercentUsed)}`,children:[ue.yearlyPercentUsed.toFixed(1),"%"]})]})]}),ue.isOverBudget&&n.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",Pe(ue.overBudgetAmount)]})]}),n.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[n.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${Ie(ue.yearlyPercentUsed)}`,style:{width:`${Math.min(ue.yearlyPercentUsed,100)}%`}}),ue.yearlyPercentUsed>100&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),j==="quarterly"&&n.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((de,Ae)=>{const Qe=ue.quarters[de];return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Ae+1]}),n.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[n.jsx("span",{className:"font-black text-slate-900",children:Pe(Qe.spent)})," "," / ",Pe(Qe.budget)]}),n.jsxs("p",{className:`text-xs font-black mt-1 ${je(Qe.percentUsed)}`,children:[Qe.percentUsed.toFixed(0),"%"]})]},de)})})]},ue.categoryId))})]}),S&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>E(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(zu,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",z.year]})]})]}),n.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:z.year,onChange:ue=>V(de=>({...de,year:parseInt(ue.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:se.map(ue=>n.jsx("option",{value:ue,children:ue},ue))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:z.department,onChange:ue=>V(de=>({...de,department:ue.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(ue=>n.jsx("option",{value:ue,children:ue},ue))]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),n.jsx("div",{className:"space-y-4",children:z.categories.map((ue,de)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:ue.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:ue.yearlyBudget||"",onChange:Ae=>{const Qe=[...z.categories];Qe[de].yearlyBudget=parseFloat(Ae.target.value)||0,V(ge=>({...ge,categories:Qe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ae,Qe)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Qe+1]}),n.jsx("input",{type:"number",value:ue[Ae]||"",onChange:ge=>{const fe=[...z.categories];fe[de][Ae]=parseFloat(ge.target.value)||0,V(_e=>({..._e,categories:fe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ae))]})]},ue.categoryId))}),n.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Pe(z.categories.reduce((ue,de)=>ue+de.yearlyBudget,0))})]})})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>E(!1),disabled:T,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Te,disabled:T,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),A&&D&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{P(!1),R(null)}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Lo,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",D.year,D.department&&` - ${D.department}`]})]})]}),n.jsx("button",{onClick:()=>{P(!1),R(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-4",children:[z.categories.map((ue,de)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:ue.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:ue.yearlyBudget||"",onChange:Ae=>{const Qe=[...z.categories];Qe[de].yearlyBudget=parseFloat(Ae.target.value)||0,V(ge=>({...ge,categories:Qe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ae,Qe)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Qe+1]}),n.jsx("input",{type:"number",value:ue[Ae]||"",onChange:ge=>{const fe=[...z.categories];fe[de][Ae]=parseFloat(ge.target.value)||0,V(_e=>({..._e,categories:fe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ae))]})]},ue.categoryId)),n.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Pe(z.categories.reduce((ue,de)=>ue+de.yearlyBudget,0))})]})})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsxs("button",{onClick:()=>Y(D),disabled:T,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Lr,{className:"w-4 h-4"})," Delete"]}),n.jsx("button",{onClick:()=>{P(!1),R(null)},disabled:T,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:oe,disabled:T,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oi,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),H&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Y(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Iu,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",H.year,H.department&&` - ${H.department}`,"? This action cannot be undone."]})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>Y(null),disabled:B,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:()=>te(H),disabled:B,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:B?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),J&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),n.jsx("button",{onClick:()=>{re(!1),ee("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Os,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(ue=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Os,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:ue.name})]}),n.jsx(mn,{className:"w-5 h-5 text-emerald-600"})]},ue.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:X,onChange:ue=>ee(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&X.trim()&&!W&&(ue.preventDefault(),Ue())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ue,disabled:!X.trim()||W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},E8=["Draft","Pending Signature","Signed","Expired","Terminated"],aye=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),[a,s]=I.useState([]),[i,o]=I.useState([]),[l,c]=I.useState([]),[d,u]=I.useState([]),[f,p]=I.useState(null),[m,b]=I.useState(!0),[v,g]=I.useState(!1),[w,y]=I.useState(!1),[j,N]=I.useState(""),[S,E]=I.useState(""),[A,P]=I.useState(""),[D,R]=I.useState(!1),[T,_]=I.useState(!1),[B,U]=I.useState(!1),[H,Y]=I.useState(!1),J=I.useRef(null),[re,X]=I.useState(!1),[ee,W]=I.useState(!1),[O,z]=I.useState(!1),[V,q]=I.useState(!1),[K,se]=I.useState(!1),[pe,ie]=I.useState(""),[le,$e]=I.useState(!1),[he,Ue]=I.useState([]),[Te,oe]=I.useState(!1),[te,Pe]=I.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),je=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Ie=I.useCallback(async()=>{b(!0);try{const[Ye,Et,Cr,tr]=await Promise.all([hM(),wd(),Ah(),$ae()]);s(Ye?.data||[]),o(Et?.data||[]),c(Cr?.data||[]),u(tr?.data||[])}catch(Ye){r(Ye.message||"Failed to load contracts")}finally{b(!1)}},[r]);I.useEffect(()=>{Ie()},[Ie]);const ue=async()=>{if(f){oe(!0);try{const Ye=await u3("contract",f.id);Ue(Ye?.data||[])}catch(Ye){console.error("[CONTRACTS] Failed to fetch contract activities:",Ye),Ue([])}finally{oe(!1)}}};I.useEffect(()=>{f?ue():Ue([])},[f?.id]),I.useEffect(()=>{(async()=>{if(je)try{await mb({userId:je}),z(!0)}catch{z(!1)}})()},[je]);const de=async()=>{if(!je){r("User not authenticated");return}q(!0);try{let Ye;try{Ye=await mb({userId:je})}catch(pr){throw pr.message?.includes("Failed to fetch")||pr.message?.includes("ERR_CONNECTION_REFUSED")||pr.message?.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):pr}const{accessToken:Et,apiKey:Cr}=Ye?.data||{};if(!Et)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",Et?"Present":"Missing"),console.log("Google Picker - API Key:",Cr?`Present (${Cr.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",Ye?.data),await new Promise((pr,rt)=>{let Dt=0;const yr=50,kr=setInterval(()=>{Dt++,window.google&&window.google.picker?(clearInterval(kr),pr()):Dt>=yr&&(clearInterval(kr),rt(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const tr=window.google.picker;new tr.PickerBuilder().setOAuthToken(Et).setCallback(pr=>{q(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(pr,null,2)),console.log("Google Picker Response Action:",pr[tr.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:tr.Action.PICKED,CANCEL:tr.Action.CANCEL}),pr[tr.Response.ACTION]===tr.Action.PICKED){const rt=pr[tr.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",rt),console.log("Google Picker - Number of documents:",rt?.length),rt&&rt.length>0){const Dt=rt[0];console.log("Google Picker - Selected file data:",JSON.stringify(Dt,null,2)),console.log("Google Picker - File ID:",Dt.id),console.log("Google Picker - File Name:",Dt.name),console.log("Google Picker - File MIME Type:",Dt.mimeType),console.log("Google Picker - File URL:",Dt.url),console.log("Google Picker - File Service ID:",Dt.serviceId),Ae(Dt)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(pr[tr.Response.ACTION]!==tr.Action.CANCEL){const rt=pr[tr.Response.ERROR];rt&&(console.error("Google Picker Error:",rt),console.error("Error details:",JSON.stringify(pr,null,2)),rt===tr.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):rt===tr.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):rt===tr.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${rt}. Check browser console for details.`))}}catch(rt){console.error("Error handling picker callback:",rt),r("Failed to process selected file")}}).addView(tr.ViewId.DOCS).enableFeature(tr.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(Ye){q(!1),console.error("Google Drive Picker Error:",Ye),Ye.message?.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):Ye.message?.includes("not connected")||Ye.message?.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):Ye.message?.includes("Failed to fetch")||Ye.message?.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(Ye.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Ae=async Ye=>{if(je){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(Ye,null,2)),console.log("File data from Google Picker:",{id:Ye.id,name:Ye.name,url:Ye.url,iconUrl:Ye.iconUrl,mimeType:Ye.mimeType,serviceId:Ye.serviceId,type:Ye.type,sizeBytes:Ye.sizeBytes});try{const Et=Ye.url||Ye.embedUrl||"",Cr=Ye.iconUrl||"",tr=Ye.sizeBytes?parseInt(Ye.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:Ye.id,publicUrl:Et,iconUrl:Cr,fileName:Ye.name,fileMimeType:Ye.mimeType}),Pe(Or=>({...Or,isGoogleDriveLinked:!0,googleDriveFileId:Ye.id,googleDriveWebViewLink:Et,googleDriveDownloadLink:Et,googleDriveIconUrl:Cr,fileName:Ye.name||"Untitled",fileMimeType:Ye.mimeType||"",fileSize:tr,fileUrl:Et,file:null})),t("File attached from Google Drive")}catch(Et){console.error("Error handling Google Drive file selection:",Et),r(Et.message||"Failed to attach file from Google Drive")}}},Qe=async()=>{if(pe.trim()){$e(!0);try{const Ye=await zae({name:pe.trim()});if(Ye?.data){const Et=Ye.data;u(Cr=>[...Cr,Et]),ie(""),t("Document type added successfully")}}catch(Ye){Ye.message?.includes("already exists")||Ye.message?.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(Ye.message||"Failed to add document type")}finally{$e(!1)}}},ge=Ye=>{const Et=Ye.target.files?.[0];if(!Et)return;if(Et.size>10*1024*1024){r("File size must be less than 10MB");return}Y(!0);const Cr=new FileReader;Cr.onload=()=>{const tr=Cr.result;Pe(Or=>({...Or,file:Et,fileUrl:tr,fileName:Et.name,fileMimeType:Et.type,fileSize:Et.size})),Y(!1)},Cr.onerror=()=>{r("Failed to read file"),Y(!1)},Cr.readAsDataURL(Et)},fe=async()=>{if(!te.fileUrl||!je){r("Please select a file first");return}X(!0);try{const Ye=await Hae({fileName:te.fileName,fileContent:te.fileUrl,fileMimeType:te.fileMimeType,userId:je});Pe(Et=>({...Et,isGoogleDriveLinked:!0,googleDriveFileId:Ye.data.id,googleDriveWebViewLink:Ye.data.webViewLink,googleDriveDownloadLink:Ye.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(Ye){r(Ye.message||"Failed to upload to Google Drive")}finally{X(!1)}},_e=async(Ye,Et)=>{W(!0);try{const Cr=await Wae({contractId:Ye,userId:je,title:Et});t("Signature document created in Google Docs"),Ie(),window.open(Cr.data.documentLink,"_blank")}catch(Cr){r(Cr.message||"Failed to create signature document")}finally{W(!1)}},ze=async()=>{if(!te.title||!te.documentType||!te.contractParty){r("Please fill in all required fields");return}U(!0);try{await Rae({title:te.title,documentType:te.documentType,contractParty:te.contractParty,companyId:te.companyId||null,contactId:te.contactId||null,expirationDate:te.expirationDate||null,renewalDate:te.renewalDate||null,signedDate:te.signedDate||null,status:te.status,description:te.description||null,tags:te.tags,requiresSignature:te.requiresSignature,signatureStatus:te.requiresSignature?"Pending":"Not Required",fileUrl:te.fileUrl||null,fileName:te.fileName||null,fileMimeType:te.fileMimeType||null,fileSize:te.fileSize||null,isGoogleDriveLinked:te.isGoogleDriveLinked,googleDriveFileId:te.googleDriveFileId||null,googleDriveWebViewLink:te.googleDriveWebViewLink||null,googleDriveDownloadLink:te.googleDriveDownloadLink||null,googleDriveIconUrl:te.googleDriveIconUrl||null,userId:je}),t("Contract created successfully"),R(!1),et(),Ie()}catch(Ye){r(Ye.message||"Failed to create contract")}finally{U(!1)}},Se=async()=>{if(f){U(!0);try{await Bae(f.id,{title:te.title,documentType:te.documentType,contractParty:te.contractParty,companyId:te.companyId||null,contactId:te.contactId||null,expirationDate:te.expirationDate||null,renewalDate:te.renewalDate||null,signedDate:te.signedDate||null,status:te.status,description:te.description||null,tags:te.tags,requiresSignature:te.requiresSignature,fileUrl:te.fileUrl||null,fileName:te.fileName||null,fileMimeType:te.fileMimeType||null,fileSize:te.fileSize||null,isGoogleDriveLinked:te.isGoogleDriveLinked,googleDriveFileId:te.googleDriveFileId||null,googleDriveWebViewLink:te.googleDriveWebViewLink||null,googleDriveDownloadLink:te.googleDriveDownloadLink||null,googleDriveIconUrl:te.googleDriveIconUrl||null}),t("Contract updated successfully"),_(!1),p(null),et(),Ie()}catch(Ye){r(Ye.message||"Failed to update contract")}finally{U(!1)}}},Fe=async()=>{if(f){g(!0);try{await Uae(f.id),t("Contract deleted successfully"),y(!1),p(null),Ie()}catch(Ye){r(Ye.message||"Failed to delete contract")}finally{g(!1)}}},Me=async Ye=>{try{await qae(Ye.id,{signedBy:je,signedDate:new Date().toISOString()}),t("Contract marked as signed"),Ie()}catch(Et){r(Et.message||"Failed to mark contract as signed")}},et=()=>{Pe({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),J.current&&(J.current.value="")},ut=Ye=>{p(Ye),Pe({title:Ye.title,documentType:Ye.documentType,contractParty:Ye.contractParty,companyId:Ye.companyId||"",contactId:Ye.contactId||"",expirationDate:Ye.expirationDate||"",renewalDate:Ye.renewalDate||"",signedDate:Ye.signedDate||"",status:Ye.status,description:Ye.description||"",tags:Ye.tags||[],requiresSignature:Ye.requiresSignature,file:null,fileUrl:Ye.fileUrl||"",fileName:Ye.fileName||"",fileMimeType:Ye.fileMimeType||"",fileSize:Ye.fileSize||0,isGoogleDriveLinked:Ye.isGoogleDriveLinked,googleDriveFileId:Ye.googleDriveFileId||"",googleDriveWebViewLink:Ye.googleDriveWebViewLink||"",googleDriveDownloadLink:Ye.googleDriveDownloadLink||"",googleDriveIconUrl:Ye.googleDriveIconUrl||""}),_(!0)},bt=Ye=>{switch(Ye){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},At=Ye=>{switch(Ye){case"Signed":return n.jsx(mn,{className:"w-4 h-4"});case"Pending Signature":return n.jsx(es,{className:"w-4 h-4"});case"Draft":return n.jsx(Gn,{className:"w-4 h-4"});case"Expired":return n.jsx(Rn,{className:"w-4 h-4"});case"Terminated":return n.jsx(Zt,{className:"w-4 h-4"});default:return n.jsx(Gn,{className:"w-4 h-4"})}},qt=a.filter(Ye=>{const Et=Ye.title.toLowerCase().includes(j.toLowerCase())||Ye.contractParty.toLowerCase().includes(j.toLowerCase())||Ye.documentType.toLowerCase().includes(j.toLowerCase()),Cr=!S||Ye.status===S,tr=!A||Ye.documentType===A;return Et&&Cr&&tr}),Gt={total:a.length,signed:a.filter(Ye=>Ye.status==="Signed").length,pending:a.filter(Ye=>Ye.status==="Pending Signature").length,expired:a.filter(Ye=>Ye.status==="Expired").length};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Os,{className:"w-4 h-4"})," Manage Document Types"]}),n.jsxs("button",{onClick:()=>{et(),R(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(Zr,{className:"w-4 h-4"})," Add Contract"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Gn,{className:"w-5 h-5 text-indigo-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Gt.total})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(mn,{className:"w-5 h-5 text-emerald-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),n.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:Gt.signed})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(es,{className:"w-5 h-5 text-amber-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),n.jsx("h3",{className:"text-2xl font-black text-amber-600",children:Gt.pending})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Rn,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),n.jsx("h3",{className:"text-2xl font-black text-red-600",children:Gt.expired})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ac,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:j,onChange:Ye=>N(Ye.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("select",{value:S,onChange:Ye=>E(Ye.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Statuses"}),E8.map(Ye=>n.jsx("option",{value:Ye,children:Ye},Ye))]}),n.jsxs("select",{value:A,onChange:Ye=>P(Ye.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Types"}),d.map(Ye=>n.jsx("option",{value:Ye.name,children:Ye.name},Ye.id))]})]})}),m?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(vt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):qt.length===0?n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(Gn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:j||S||A?"Try adjusting your filters":"Create your first contract to get started"}),!j&&!S&&!A&&n.jsxs("button",{onClick:()=>{et(),R(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(Zr,{className:"w-4 h-4"})," Add Contract"]})]}):n.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:qt.map(Ye=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p(Ye),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-base font-black text-slate-900",children:Ye.title}),n.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${bt(Ye.status)} flex items-center gap-1`,children:[At(Ye.status),Ye.status]}),Ye.isGoogleDriveLinked&&n.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[Ye.googleDriveIconUrl?n.jsx("img",{src:Ye.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:Et=>{Et.target.style.display="none"}}):n.jsx(c0,{className:"w-3 h-3"}),"Drive"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Os,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:Ye.documentType})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(qi,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:Ye.contractParty})]}),Ye.expirationDate&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Kn,{className:"w-4 h-4 text-slate-400"}),n.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(Ye.expirationDate).toLocaleDateString()]})]}),Ye.requiresSignature&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[n.jsx(Yv,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold",children:Ye.signatureStatus})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Ye.googleDriveWebViewLink&&n.jsx("a",{href:Ye.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:Et=>Et.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:n.jsx(cs,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Et=>{Et.stopPropagation(),ut(Ye)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(Lo,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Et=>{Et.stopPropagation(),p(Ye),y(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})},Ye.id))})}),(D||T)&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{R(!1),_(!1),et()}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Gn,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:D?"Add Contract":"Edit Contract"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:D?"Create a new contract with metadata and documents":"Update contract details"})]})]}),n.jsx("button",{onClick:()=>{R(!1),_(!1),et()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:te.title,onChange:Ye=>Pe(Et=>({...Et,title:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:te.documentType,onChange:Ye=>Pe(Et=>({...Et,documentType:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"Select type"}),d.map(Ye=>n.jsx("option",{value:Ye.name,children:Ye.name},Ye.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:te.contractParty,onChange:Ye=>Pe(Et=>({...Et,contractParty:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),n.jsxs("select",{value:te.companyId,onChange:Ye=>Pe(Et=>({...Et,companyId:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),i.map(Ye=>n.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),n.jsxs("select",{value:te.contactId,onChange:Ye=>Pe(Et=>({...Et,contactId:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),l.map(Ye=>n.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),n.jsx("input",{type:"date",value:te.expirationDate,onChange:Ye=>Pe(Et=>({...Et,expirationDate:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),n.jsx("input",{type:"date",value:te.renewalDate,onChange:Ye=>Pe(Et=>({...Et,renewalDate:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),n.jsx("input",{type:"date",value:te.signedDate,onChange:Ye=>Pe(Et=>({...Et,signedDate:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsx("select",{value:te.status,onChange:Ye=>Pe(Et=>({...Et,status:Ye.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:E8.map(Ye=>n.jsx("option",{value:Ye,children:Ye},Ye))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:te.requiresSignature,onChange:Ye=>Pe(Et=>({...Et,requiresSignature:Ye.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("textarea",{value:te.description,onChange:Ye=>Pe(Et=>({...Et,description:Ye.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(D||T)&&n.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Oc,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),n.jsx("input",{ref:J,type:"file",onChange:ge,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!te.fileUrl&&!te.isGoogleDriveLinked?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>J.current?.click(),disabled:H,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:H?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Oc,{className:"w-4 h-4"}),"Choose File"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 h-px bg-slate-200"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),n.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),n.jsx("button",{onClick:de,disabled:!O||V,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:V?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(c0,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[te.isGoogleDriveLinked&&te.googleDriveIconUrl?n.jsx("img",{src:te.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:Ye=>{Ye.target.style.display="none";const Et=document.createElement("div");Et.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',Ye.target.parentNode?.appendChild(Et)}}):te.isGoogleDriveLinked?n.jsx(c0,{className:"w-5 h-5 text-blue-600"}):n.jsx(xU,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:te.fileName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[te.fileSize>0&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(te.fileSize/1024).toFixed(1)," KB"]}),te.isGoogleDriveLinked&&n.jsxs(n.Fragment,{children:[te.fileSize>0&&n.jsx("span",{className:"text-slate-300",children:""}),n.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),n.jsx("button",{onClick:()=>{Pe(Ye=>({...Ye,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),J.current&&(J.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(Zt,{className:"w-4 h-4"})})]}),!te.isGoogleDriveLinked&&te.fileUrl&&n.jsx("button",{onClick:fe,disabled:re,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:re?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(c0,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),te.isGoogleDriveLinked&&te.googleDriveWebViewLink&&n.jsxs("a",{href:te.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[te.googleDriveIconUrl?n.jsx("img",{src:te.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:Ye=>{Ye.target.style.display="none"}}):n.jsx(cs,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>{R(!1),_(!1),et()},disabled:B,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:D?ze:Se,disabled:B,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:B?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),D?"Creating...":"Updating..."]}):n.jsx(n.Fragment,{children:D?"Create Contract":"Update Contract"})})]})]})})]}),f&&!T&&!w&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:f.title}),n.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${bt(f.status)} flex items-center gap-1`,children:[At(f.status),f.status]})]}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[f.documentType," - ",f.contractParty]})]}),n.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(Zt,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.expirationDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.expirationDate).toLocaleDateString()})]}),f.renewalDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.renewalDate).toLocaleDateString()})]}),f.signedDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.signedDate).toLocaleDateString()})]})]}),f.description&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:f.description})]}),(f.fileUrl||f.isGoogleDriveLinked)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),n.jsxs("div",{className:"space-y-2",children:[f.fileName&&n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[f.isGoogleDriveLinked&&f.googleDriveIconUrl?n.jsx("img",{src:f.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:Ye=>{Ye.target.style.display="none"}}):n.jsx(Gn,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.fileName}),f.fileSize&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(f.fileSize/1024).toFixed(1)," KB"]})]})]}),f.fileUrl&&n.jsx("a",{href:f.fileUrl,download:f.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(Bu,{className:"w-4 h-4"})})]}),f.isGoogleDriveLinked&&f.googleDriveWebViewLink&&n.jsx("a",{href:f.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(c0,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),n.jsx(cs,{className:"w-4 h-4 text-blue-600"})]})})]})]}),f.requiresSignature&&n.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Yv,{className:"w-5 h-5 text-amber-600"}),n.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),n.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",n.jsx("span",{className:"font-black",children:f.signatureStatus})]}),f.googleDocsSignatureLink?n.jsx("a",{href:f.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):n.jsx("button",{onClick:()=>_e(f.id,f.title),disabled:ee,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Yv,{className:"w-4 h-4"}),"Create Signature Document"]})}),f.status!=="Signed"&&n.jsxs("button",{onClick:()=>Me(f),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[n.jsx(mn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ud,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Te?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(vt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):he.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(Xa,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:he.map((Ye,Et)=>{const Cr=new Date(Ye.createdAt),Or=new Date().getTime()-Cr.getTime(),pr=Math.floor(Or/(1e3*60*60*24));let rt="";pr===0?rt="Today":pr===1?rt="Yesterday":pr<7?rt=`${pr} days ago`:pr<30?rt=`${Math.floor(pr/7)} week${Math.floor(pr/7)>1?"s":""} ago`:rt=`${Math.floor(pr/30)} month${Math.floor(pr/30)>1?"s":""} ago`;const Dt=Ye.activityType==="email_linked",yr=Dt?"border-indigo-600":"border-slate-200",kr=Dt?"bg-indigo-600":"bg-slate-300",Xr=Dt?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${yr} shadow-xl flex items-center justify-center`,children:Dt?n.jsx(Xa,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${kr}`})}),n.jsxs("p",{className:`text-[10px] font-black ${Xr} uppercase mb-1 tracking-widest`,children:[Dt?"Email Linked":Ye.activityType||"Activity","  ",rt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Ye.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Ye.description||Ye.title}),Ye.emailId&&n.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${Ye.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(cs,{className:"w-3 h-3"})," View Email"]})]},Ye.id||Et)})})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),n.jsxs("button",{onClick:()=>{ut(f)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(Lo,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),w&&f&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>y(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Rn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",n.jsx("span",{className:"font-black",children:f.title}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>y(!1),disabled:v,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Fe,disabled:v,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),n.jsx("button",{onClick:()=>{se(!1),ie("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:d.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Gn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):d.map(Ye=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Gn,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:Ye.name})]}),n.jsx(mn,{className:"w-5 h-5 text-emerald-600"})]},Ye.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New document type...",value:pe,onChange:Ye=>ie(Ye.target.value),onKeyDown:Ye=>{Ye.key==="Enter"&&pe.trim()&&!le&&(Ye.preventDefault(),Qe())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Qe,disabled:!pe.trim()||le,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:le?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},sye=()=>n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage your products and service catalog."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest border border-indigo-100",children:[n.jsx(Ri,{className:"w-4 h-4"})," Coming Soon"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-12 shadow-sm flex flex-col items-center justify-center min-h-[320px] text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-[24px] flex items-center justify-center mb-6",children:n.jsx(nS,{className:"w-10 h-10 text-indigo-600"})}),n.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 max-w-md",children:"Catalog management, pricing, and service offerings will be available here. This section is in development."})]})]}),iye=({onLogin:e})=>{const[t,r]=I.useState("initial"),[a,s]=I.useState(""),[i,o]=I.useState(["","","","","",""]),[l,c]=I.useState(!1),[d,u]=I.useState(null),f=I.useRef([]),p=async()=>{if(!a||!a.includes("@")){u("Please enter a valid email address");return}c(!0),u(null);try{const y=await cI({email:a});if(y?.status===404)throw new Error(y.message);u(null),o(["","","","","",""]),r("verify")}catch(y){console.error("[AUTH UI] Error caught:",y),y.message&&(y.message.includes("Account not found")||y.status===404)?u("Account not found - contact your Administrator"):u(y.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},m=async()=>{const y=i.join("");if(y.length===6){if(!/^\d{6}$/.test(y)){u("OTP must contain only numbers");return}c(!0),u(null);try{const j=await Dne({email:a,verificationCode:y});if(j.token&&j.user)e(j);else throw new Error("Invalid response from server.")}catch(j){console.error("[AUTH] Verification error:",j),j.message?.includes("User not registered")||j.message?.includes("USER_NOT_REGISTERED")||j.message?.includes("Account not found")?u("Account not found - contact your Administrator"):u(j.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>f.current[0]?.focus(),100)}finally{c(!1)}}},b=(y,j)=>{if(j&&!/^\d$/.test(j))return;const N=[...i];N[y]=j,o(N),d&&u(null),j&&y<5&&f.current[y+1]?.focus(),j&&y===5&&N.every(S=>S!=="")&&setTimeout(()=>m(),100)},v=(y,j)=>{if(j.key==="Backspace"||j.key==="Delete"){j.preventDefault();const N=[...i];i[y]?N[y]="":y>0&&(N[y-1]="",f.current[y-1]?.focus()),o(N),d&&u(null)}else j.key==="Enter"?(j.preventDefault(),m()):j.key==="ArrowLeft"&&y>0?(j.preventDefault(),f.current[y-1]?.focus()):j.key==="ArrowRight"&&y<5&&(j.preventDefault(),f.current[y+1]?.focus())},g=y=>{y.preventDefault();const j=y.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),N=[...i];for(let E=0;E<6;E++)N[E]=j[E]||"";o(N),d&&u(null);const S=N.findIndex(E=>E==="");f.current[S===-1?5:S]?.focus(),j.length===6&&setTimeout(()=>m(),100)};I.useEffect(()=>{t==="verify"?setTimeout(()=>f.current[0]?.focus(),100):o(["","","","","",""])},[t]);const w=y=>{y.preventDefault(),t==="initial"?p():m()};return n.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[n.jsx("div",{className:"mb-6 text-center",children:n.jsx("a",{href:"/privacy-policy",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),n.jsxs("div",{className:"flex flex-col items-center mb-10",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),n.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),n.jsxs("form",{onSubmit:w,className:"space-y-5",children:[d&&n.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx(Rn,{className:"w-4 h-4 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[d,d.includes("Administrator")&&n.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Xa,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),n.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:a,onChange:y=>s(y.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&n.jsxs("div",{className:"space-y-4 text-center",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),n.jsx("p",{className:"text-sm font-semibold text-white",children:a})]}),n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),n.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((y,j)=>n.jsx("input",{ref:N=>{f.current[j]=N},type:"text",inputMode:"numeric",maxLength:1,value:y,onChange:N=>b(j,N.target.value),onKeyDown:N=>v(j,N),onPaste:j===0?g:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},j))}),n.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[n.jsx("button",{type:"button",onClick:async()=>{u(null),o(["","","","","",""]),c(!0);try{await cI({email:a}),u(null),setTimeout(()=>f.current[0]?.focus(),100)}catch(y){u(y.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),n.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),u(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),n.jsx("button",{disabled:l||t==="verify"&&i.some(y=>y===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",n.jsx(Oo,{className:"w-4 h-4"})]})})]}),n.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(ul,{className:"w-5 h-5 text-slate-700"}),n.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[n.jsx("p",{children:"Access restricted to authorized personnel."}),n.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[n.jsx("a",{href:"/help",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),n.jsx("span",{className:"text-slate-600",children:""}),n.jsx("a",{href:"/privacy-policy",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},oye=({children:e,onUserLoaded:t})=>{const[r,a]=I.useState(!0),[s,i]=I.useState(!1);return I.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),a(!1);return}if(c)try{const d=JSON.parse(c);t(d),i(!0),a(!1),dI().then(u=>{const f=u.data||u,p=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(f)!==JSON.stringify(p)&&(localStorage.setItem("user_data",JSON.stringify(f)),t(f))}).catch(u=>{console.warn("Session expired:",u),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const d=await dI(),u=d.data||d;localStorage.setItem("user_data",JSON.stringify(u)),t(u),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{a(!1)}})()},[t]),r?n.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[n.jsx(vt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),n.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?n.jsx(n.Fragment,{children:e}):n.jsx(iye,{onLogin:o=>{localStorage.setItem("auth_token",o.token||o.data?.token);const l=o.user||o.data?.user||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},lye=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:a,isRefreshing:s=!1,onClose:i,onViewAll:o,onNavigate:l})=>{const c=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return n.jsx(hd,{className:"w-4 h-4 text-indigo-500"});if(f?.toLowerCase().includes("pipeline"))return n.jsx(au,{className:"w-4 h-4 text-purple-500"});switch(u){case"lead":return n.jsx(hd,{className:"w-4 h-4 text-blue-500"});case"deal":return n.jsx(fo,{className:"w-4 h-4 text-indigo-500"});case"task":return n.jsx(_i,{className:"w-4 h-4 text-emerald-500"});case"payment":return n.jsx(Iu,{className:"w-4 h-4 text-red-500"});case"email-routing":return n.jsx(tc,{className:"w-4 h-4 text-amber-500"});case"email-assigned":return n.jsx(Xa,{className:"w-4 h-4 text-blue-500"});case"email-mention":return n.jsx(Nh,{className:"w-4 h-4 text-violet-500"});case"new-email":return n.jsx(Xa,{className:"w-4 h-4 text-slate-600"});default:return n.jsx(yx,{className:"w-4 h-4 text-slate-400"})}},d=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return"bg-indigo-50";if(f?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(u){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}};return n.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Lb,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[a&&n.jsx("button",{onClick:a,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:n.jsx(fd,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),n.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?n.jsx("div",{className:"divide-y divide-slate-50",children:e.map(u=>n.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${u.read?"":"bg-indigo-50/10"}`,onClick:()=>{if(t(u.id),u.link)if(u.link.startsWith("/?tab=")&&l){const p=new URL(u.link,window.location.origin).searchParams.get("tab");p?(l(p),localStorage.setItem("activeTab",p),window.history.replaceState(null,"",u.link),i()):window.location.href=u.link}else u.link.startsWith("/"),window.location.href=u.link},children:[n.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${d(u.type,u.title)}`,children:c(u.type,u.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-2",children:[n.jsx("p",{className:`text-sm font-semibold truncate ${u.read?"text-slate-600":"text-slate-900"}`,children:u.title}),n.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:u.timestamp})]}),n.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${u.read?"text-slate-400":"text-slate-500"}`,children:u.message})]}),!u.read&&n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},u.id))}):n.jsxs("div",{className:"p-12 text-center text-slate-400",children:[n.jsx(xd,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),n.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),n.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:n.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Kv=20,cye=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=jn(),[s,i]=I.useState([]),[o,l]=I.useState(!0),[c,d]=I.useState(!1),[u,f]=I.useState(1),[p,m]=I.useState(1),[b,v]=I.useState(0),[g,w]=I.useState(!1),y=I.useCallback(async(U=!1)=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;U?d(!0):l(!0);const Y=await oM(H.id,500),J=Y?.data||Y||[],re=(Array.isArray(J)?J:[]).map(X=>{let ee="Just now";if(X.createdAt){const W=new Date(X.createdAt),z=new Date().getTime()-W.getTime(),V=Math.floor(z/6e4),q=Math.floor(z/36e5),K=Math.floor(z/864e5);V<1?ee="Just now":V<60?ee=`${V}m ago`:q<24?ee=`${q}h ago`:K<7?ee=`${K}d ago`:ee=W.toLocaleDateString()}return{id:X.id,userId:X.userId,type:X.type||"system",title:X.title,message:X.message,timestamp:ee,read:!!X.read,link:X.link||void 0}});i(re),v(re.length),m(Math.ceil(re.length/Kv))}catch(H){console.error("[NOTIFICATIONS] Failed to load notifications",H),a(H.message||"Failed to load notifications")}finally{l(!1),d(!1)}},[e,a]);I.useEffect(()=>{y(!1)},[y]),I.useEffect(()=>{f(1)},[g]),I.useEffect(()=>{const U=()=>{y(!0)};return window.addEventListener("refresh-notifications",U),()=>{window.removeEventListener("refresh-notifications",U)}},[y]);const j=async U=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;await lM(U,H.id),i(Y=>Y.map(J=>J.id===U?{...J,read:!0}:J)),window.dispatchEvent(new Event("refresh-notifications"))}catch(H){console.error("[NOTIFICATIONS] Failed to mark as read",H),a(H.message||"Failed to mark notification as read")}},N=async()=>{try{const U=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!U?.id)return;await cM(U.id),i(H=>H.map(Y=>({...Y,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(U){console.error("[NOTIFICATIONS] Failed to mark all as read",U),a(U.message||"Failed to mark all notifications as read")}},S=(U,H)=>{if(U==="note-marked"||H?.toLowerCase().includes("marked"))return n.jsx(hd,{className:"w-5 h-5 text-indigo-500"});if(H?.toLowerCase().includes("pipeline"))return n.jsx(au,{className:"w-5 h-5 text-purple-500"});switch(U){case"lead":return n.jsx(hd,{className:"w-5 h-5 text-blue-500"});case"deal":return n.jsx(fo,{className:"w-5 h-5 text-indigo-500"});case"task":return n.jsx(_i,{className:"w-5 h-5 text-emerald-500"});case"payment":return n.jsx(Iu,{className:"w-5 h-5 text-red-500"});case"email-routing":return n.jsx(tc,{className:"w-5 h-5 text-amber-500"});case"email-assigned":return n.jsx(Xa,{className:"w-5 h-5 text-blue-500"});case"email-mention":return n.jsx(Nh,{className:"w-5 h-5 text-violet-500"});case"new-email":return n.jsx(Xa,{className:"w-5 h-5 text-slate-600"});default:return n.jsx(yx,{className:"w-5 h-5 text-slate-400"})}},E=(U,H)=>{if(U==="note-marked"||H?.toLowerCase().includes("marked"))return"bg-indigo-50";if(H?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(U){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}},A=U=>{if(j(U.id),U.link)if(U.link.startsWith("/?tab=")){const Y=new URL(U.link,window.location.origin).searchParams.get("tab");Y&&t?t(Y):window.location.href=U.link}else U.link.startsWith("/"),window.location.href=U.link},P=g?s.filter(U=>U.type==="note-marked"||U.title?.toLowerCase().includes("marked")):s,D=(u-1)*Kv,R=D+Kv,T=P.slice(D,R),_=P.filter(U=>!U.read).length,B=Math.ceil(P.length/Kv);return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(Lb,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:_>0?`${_} unread notification${_!==1?"s":""}`:"All caught up!"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>w(!g),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[n.jsx(hd,{className:"w-4 h-4"}),g?"Show All":"Marked Notes"]}),n.jsxs("button",{onClick:()=>y(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[n.jsx(fd,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),_>0&&n.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(fd,{className:"w-8 h-8 animate-spin text-indigo-600"})}):P.length===0?n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[n.jsx(xd,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:g?"No marked notes":"All caught up!"}),n.jsx("p",{className:"text-sm text-slate-500",children:g?"No notes have been marked for you yet.":"No notifications at this time."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:T.map(U=>n.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${U.read?"":"bg-indigo-50/30"}`,onClick:()=>A(U),children:[n.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${E(U.type,U.title)}`,children:S(U.type,U.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[n.jsx("p",{className:`text-sm font-semibold ${U.read?"text-slate-600":"text-slate-900 font-bold"}`,children:U.title}),n.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 font-medium",children:U.timestamp}),!U.read&&n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),n.jsx("p",{className:`text-sm ${U.read?"text-slate-400":"text-slate-600"}`,children:U.message})]})]},U.id))})}),B>1&&n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",n.jsx("span",{className:"font-semibold",children:D+1})," to"," ",n.jsx("span",{className:"font-semibold",children:Math.min(R,P.length)})," of"," ",n.jsx("span",{className:"font-semibold",children:P.length})," notifications"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>f(U=>Math.max(1,U-1)),disabled:u===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Kj,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:B},(U,H)=>H+1).map(U=>U===1||U===p||U>=u-1&&U<=u+1?n.jsx("button",{onClick:()=>f(U),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${u===U?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:U},U):U===u-2||U===u+2?n.jsx("span",{className:"px-2 text-slate-400",children:"..."},U):null)}),n.jsx("button",{onClick:()=>f(U=>Math.min(B,U+1)),disabled:u===B,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(ia,{className:"w-5 h-5"})})]})]})]})]})},dye=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(r===a)return 1;const s=r.length,i=a.length;if(s===0||i===0)return 0;const o=[];for(let d=0;d<=s;d++)o[d]=[d];for(let d=0;d<=i;d++)o[0][d]=d;for(let d=1;d<=s;d++)for(let u=1;u<=i;u++){const f=r[d-1]===a[u-1]?0:1;o[d][u]=Math.min(o[d-1][u]+1,o[d][u-1]+1,o[d-1][u-1]+f)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},uye=(e,t)=>{const r=[];if(!e.email)return r;const a=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===a&&r.push({record:s,matchType:"exact",confidence:1})}),r},fye=(e,t,r=.8)=>{const a=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=dye(e.name||"",s.name||"");i>=r&&a.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),a},hye=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],mye=({type:e,stage:t,lockedType:r,onClose:a,onSuccess:s})=>{const[i,o]=I.useState(e),[l,c]=I.useState("form"),[d,u]=I.useState(!1),[f,p]=I.useState(null),[m,b]=I.useState({}),[v,g]=I.useState([]),[w,y]=I.useState([]),[j,N]=I.useState([]),[S,E]=I.useState([]),[A,P]=I.useState([]),[D,R]=I.useState(!1),[T,_]=I.useState(!1),[B,U]=I.useState(""),H=I.useRef(null),[Y,J]=I.useState(null),[re,X]=I.useState(!1),[ee,W]=I.useState(""),[O,z]=I.useState(null),V=I.useRef(null),[q,K]=I.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:Si,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});I.useEffect(()=>{const oe={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(oe.lineItems=[{description:"",quantity:1,rate:0,amount:0}],oe.currency=Si):(oe.lineItems=[],e!=="deal"&&(oe.currency=Si)),K(te=>({...te,...oe})),p(null),b({}),c("form"),R(!1),W(""),z(null),V.current&&(V.current.value="")},[e,t]),I.useEffect(()=>{(async()=>{try{const Pe=JSON.parse(localStorage.getItem("user_data")||"{}")?.id,[je,Ie,ue,de]=await Promise.all([Ic(),wd(),Ah(),D0(Pe)]);N(je.data||[]),g(Ie.data||[]),y(ue.data||[]);const Ae=Array.isArray(de)?de:de?.data||[];if(E(Ae.filter(Qe=>!Qe.archived)),i==="task")try{const Qe=await fb(),ge=Array.isArray(Qe?.data)?Qe.data:[];P(ge)}catch{P([])}else P([]);Pe&&K(Qe=>({...Qe,ownerId:Qe.ownerId||Pe,assigneeId:Qe.assigneeId||Pe}))}catch(te){console.error("[QUICK-CREATE] Data fetch failed:",te)}})()},[i]),I.useEffect(()=>{const oe=te=>{H.current&&!H.current.contains(te.target)&&(_(!1),U(""))};if(T)return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[T]);const se=hye.filter(oe=>oe.toLowerCase().includes(B.toLowerCase())),pe=(oe,te=1200,Pe=1200,je=.8)=>new Promise((Ie,ue)=>{const de=new FileReader;de.onload=Ae=>{const Qe=new Image;Qe.onload=()=>{let ge=Qe.width,fe=Qe.height;ge>fe?ge>te&&(fe=fe*te/ge,ge=te):fe>Pe&&(ge=ge*Pe/fe,fe=Pe);const _e=document.createElement("canvas");_e.width=ge,_e.height=fe;const ze=_e.getContext("2d");ze?(ze.drawImage(Qe,0,0,ge,fe),Ie(_e.toDataURL("image/jpeg",je))):ue(new Error("Canvas context not available"))},Qe.onerror=()=>ue(new Error("Failed to load image")),Qe.src=Ae.target?.result},de.onerror=()=>ue(new Error("Failed to read file")),de.readAsDataURL(oe)}),ie=async oe=>{const te=oe.target.files?.[0];if(te){if(!te.type.startsWith("image/")){p("Please select an image file");return}if(te.size>10*1024*1024){p("Image size must be less than 10MB");return}try{const Pe=await pe(te,1200,1200,.8);W(Pe),z(te),p(null)}catch(Pe){p(Pe.message||"Failed to process image")}}},le=()=>{W(""),z(null),V.current&&(V.current.value=""),a()},$e=()=>{const oe={};if(i==="contact")q.name?.trim()||(oe.name="Full Name is required"),q.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q.email)||(oe.email="Please enter a valid email address"):oe.email="Email Address is required";else if(i==="company")q.name?.trim()||(oe.name="Company Name is required"),(!q.region||q.region.trim()==="")&&(oe.region="Region is required"),q.ownerId?.trim()||(oe.ownerId="Assignee / Lead is required"),Ev(q.website,q.email)||(oe.domain="Company domain is required (add a company website; personal email domains like Gmail are not allowed)",oe.website="Add a company website to set domain");else if(i==="deal")q.title?.trim()||(oe.title="Deal Name is required"),q.companyId?.trim()||(oe.companyId="Organization is required"),(!q.value||parseFloat(q.value)<=0)&&(oe.value="Amount is required and must be greater than $0"),q.stage?.trim()||(oe.stage="Stage is required"),q.ownerId||(oe.ownerId="Assignee / Lead is required");else if(i==="project"){if(q.title?.trim()||(oe.title="Project Name is required"),q.engagement?.trim()||(oe.engagement="Engagement is required"),q.startDate?.trim()||(oe.startDate="Start Date is required"),q.endDate?.trim()||(oe.endDate="End Date is required"),q.startDate&&q.endDate){const te=new Date(q.startDate),Pe=new Date(q.endDate);!isNaN(te.getTime())&&!isNaN(Pe.getTime())&&te>=Pe&&(oe.endDate="End Date must be after Start Date")}q.ownerId||(oe.ownerId="Assignee / Lead is required")}else i==="task"?(q.title?.trim()||(oe.title="Task Title is required"),q.assigneeId||(oe.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(q.companyId||(oe.companyId="Client (Organization) is required"),(!q.expectedCloseDate||q.expectedCloseDate.trim()==="")&&(oe.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!q.lineItems||q.lineItems.length===0?oe.lineItems="At least one line item is required":(q.lineItems.forEach((Pe,je)=>{(!Pe.description||!Pe.description.trim())&&(oe[`lineItem_${je}_description`]=`Line item ${je+1}: Description is required`),(!Pe.quantity||Pe.quantity<=0)&&(oe[`lineItem_${je}_quantity`]=`Line item ${je+1}: Quantity must be greater than 0`),(!Pe.rate||Pe.rate<=0)&&(oe[`lineItem_${je}_rate`]=`Line item ${je+1}: Rate must be greater than 0`)}),q.lineItems.reduce((Pe,je)=>{const Ie=je.amount||je.rate*je.quantity||0;return Pe+Ie},0)<=0&&(oe.lineItems="Total amount must be greater than $0")));return b(oe),Object.keys(oe).length===0},he=async oe=>{if(oe.preventDefault(),d)return;if(p(null),!$e()){u(!1);return}u(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,q);try{const je=JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(i==="contact"){const Ie={name:q.name,email:q.email},ue=uye(Ie,w),de=fye(Ie,w,.8);if(ue.length>0||de.length>0){const Ae=new Map,Qe=new Set;ue.forEach(fe=>{const _e=fe.record,ze=_e.id||_e.email?.toLowerCase().trim()||"";ze&&!Ae.has(ze)&&(Ae.set(ze,{..._e,matchType:"exact",matchReason:"email"}),_e.email&&Qe.add(_e.email.toLowerCase().trim()))}),de.forEach(fe=>{const _e=fe.record,ze=_e.id||_e.email?.toLowerCase().trim()||"",Se=_e.email?.toLowerCase().trim();ze&&!Ae.has(ze)&&(!Se||!Qe.has(Se))&&(Ae.set(ze,{..._e,matchType:"fuzzy",matchReason:"name",similarity:fe.similarity}),Se&&Qe.add(Se))});const ge=Array.from(Ae.values());J({open:!0,duplicates:ge,newContact:{name:q.name,email:q.email,companyId:q.companyId||void 0,role:q.role,phone:q.phone,linkedin:q.linkedin||void 0}}),u(!1);return}await uI({name:q.name,companyId:q.companyId||void 0,role:q.role,email:q.email,phone:q.phone,linkedin:q.linkedin||void 0})}else if(i==="company"){const Ie=Ev(q.website,q.email)||"",ue={name:q.name?.trim(),industry:q.industry?.trim(),region:q.region?.trim()||"",website:q.website?.trim()||void 0,email:q.email?.trim()||void 0,domain:Ie||"",linkedin:q.linkedin?.trim()||void 0,ownerId:q.ownerId||je};if(!ue.region){b({region:"Region is required"}),u(!1);return}if(!ue.domain){b({domain:"Company domain is required (add a company website; personal email domains like Gmail are not allowed)"}),u(!1);return}await $ne(ue)}else if(i==="deal"){if(!q.companyId||q.companyId.trim()===""){b({companyId:"Organization is required"}),u(!1);return}if(!q.value||parseFloat(q.value)<=0){b({value:"Amount is required and must be greater than $0"}),u(!1);return}if(!q.stage||q.stage.trim()===""){b({stage:"Stage is required"}),u(!1);return}await Wne({title:q.title,companyId:q.companyId.trim(),value:parseFloat(q.value),currency:q.currency||Si,stage:q.stage,pipelineType:"sales",ownerId:q.ownerId,expectedCloseDate:q.expectedCloseDate||void 0,description:q.description||void 0})}else if(i==="project"){const Ie={};if(q.title?.trim()||(Ie.title="Project Name is required"),q.engagement?.trim()||(Ie.engagement="Engagement is required"),q.startDate?.trim()||(Ie.startDate="Start Date is required"),q.endDate?.trim()||(Ie.endDate="End Date is required"),q.ownerId?.trim()||(Ie.ownerId="Assignee / Lead is required"),q.startDate&&q.endDate){const de=new Date(q.startDate),Ae=new Date(q.endDate);!isNaN(de.getTime())&&!isNaN(Ae.getTime())&&de>=Ae&&(Ie.endDate="End Date must be after Start Date")}if(Object.keys(Ie).length>0){b(Ie),u(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:q.title,engagement:q.engagement,startDate:q.startDate,endDate:q.endDate,ownerId:q.ownerId});const ue={title:q.title.trim(),engagement:q.engagement.trim(),startDate:q.startDate,endDate:q.endDate,companyId:q.companyId&&q.companyId.trim()!==""?q.companyId:void 0,status:q.status,ownerId:q.ownerId,projectManager:q.ownerId,progress:0,description:q.description||void 0};ee&&O&&(ue.noteImage=ee,ue.noteImageName=O.name,ue.noteImageMimeType=O.type),console.debug("[QUICK-CREATE] Project payload:",ue),await Gne(ue)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:q.title,assigneeId:q.assigneeId});const Ie={title:q.title,projectId:q.projectId||void 0,description:q.description||void 0,dueDate:q.expectedCloseDate||void 0,priority:q.priority,status:"Todo",assigneeId:q.assigneeId,category:q.category&&q.category.trim()?q.category.trim():void 0};if(ee||q.description){const ue=JSON.parse(localStorage.getItem("user_data")||"{}"),de={id:`note_${Date.now()}`,userId:je||ue.id,userName:ue.name||"Unknown User",text:q.description||"",createdAt:new Date().toISOString()};ee&&O&&(de.imageUrl=ee,de.imageName=O.name,de.imageMimeType=O.type),Ie.notes=[de]}await aM(Ie),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const Ie={};if(q.companyId?.trim()||(Ie.companyId="Client (Organization) is required"),q.expectedCloseDate?.trim()||(Ie.expectedCloseDate="Due Date is required"),(!q.lineItems||q.lineItems.length===0)&&(Ie.lineItems="At least one line item is required"),q.lineItems&&q.lineItems.length>0&&q.lineItems.forEach((Ae,Qe)=>{(!Ae.description||!Ae.description.trim())&&(Ie[`lineItem_${Qe}_description`]=`Line item ${Qe+1}: Description is required`),(!Ae.quantity||Ae.quantity<=0)&&(Ie[`lineItem_${Qe}_quantity`]=`Line item ${Qe+1}: Quantity must be greater than 0`),(!Ae.rate||Ae.rate<=0)&&(Ie[`lineItem_${Qe}_rate`]=`Line item ${Qe+1}: Rate must be greater than 0`)}),Object.keys(Ie).length>0){b(Ie),u(!1);return}const ue=q.lineItems.map(Ae=>({description:Ae.description.trim(),quantity:Ae.quantity,rate:Ae.rate,amount:Ae.amount||Ae.rate*Ae.quantity})),de=ue.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0);if(de<=0){b({lineItems:"At least one line item with a valid amount is required"}),u(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:q.companyId,amount:de,dueDate:q.expectedCloseDate,lineItemsCount:ue.length,lineItems:ue,name:q.name,description:q.description}),await Xne({companyId:q.companyId,amount:de,currency:q.currency||Si,dueDate:q.expectedCloseDate,description:q.name||q.description||"",lineItems:ue,items:ue,status:"Draft",userId:je||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),W(""),z(null),V.current&&(V.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{a()},1500)}catch(Pe){if(console.error("[QUICK-CREATE] Deployment failed:",Pe),console.error("[QUICK-CREATE] Error details:",{message:Pe.message,code:Pe.code,status:Pe.status,details:Pe.details,type:i}),Pe.code==="DUPLICATE_DETECTED"&&Pe.duplicates&&i==="contact"){const je=new Map;Pe.duplicates.forEach(ue=>{if(ue.id)if(!je.has(ue.id))je.set(ue.id,ue);else{const de=je.get(ue.id);ue.matchType==="exact"&&de.matchType!=="exact"&&je.set(ue.id,ue)}});const Ie=Array.from(je.values());J({open:!0,duplicates:Ie,newContact:{name:q.name,email:q.email,companyId:q.companyId||void 0,role:q.role,phone:q.phone,linkedin:q.linkedin||void 0}}),u(!1);return}if(Pe.code==="VALIDATION_ERROR"||Pe.details&&Pe.details.errors){const je={};(Pe.details?.errors||(Pe.message?[Pe.message]:[])).forEach(ue=>{const de=ue.toLowerCase();if(de.includes("name")||de.includes("title"))je.title=ue;else if(de.includes("industry"))je.industry=ue;else if(de.includes("region"))je.region=ue;else if(de.includes("domain"))je.domain=ue;else if(de.includes("email"))je.email=ue;else if(de.includes("engagement"))je.engagement=ue;else if(de.includes("start date")||de.includes("startdate"))je.startDate=ue;else if(de.includes("end date")||de.includes("enddate"))je.endDate=ue;else if(de.includes("project manager")||de.includes("manager"))je.ownerId=ue;else if(de.includes("assignee")||de.includes("lead")||de.includes("owner"))je.ownerId=ue;else if(de.includes("client")||de.includes("company"))je.companyId=ue;else if(de.includes("due date")||de.includes("duedate"))je.expectedCloseDate=ue;else if(de.includes("line item")){const Ae=de.match(/line item (\d+):\s*(.+)/);if(Ae){const Qe=parseInt(Ae[1])-1,ge=Ae[2];ge.includes("description")?je[`lineItem_${Qe}_description`]=ue:ge.includes("quantity")?je[`lineItem_${Qe}_quantity`]=ue:(ge.includes("rate")||ge.includes("amount"))&&(je[`lineItem_${Qe}_rate`]=ue)}else je.lineItems=ue}else de.includes("amount")&&!de.includes("line item")&&(je.lineItems=ue)}),Object.keys(je).length>0?(b(je),p("Please correct the validation errors below")):p(Pe.message||"Validation failed. Please check all required fields.")}else p(Pe.message||"Operational error. Verify mandatory fields and team authorization.");u(!1)}},Ue=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Te=()=>n.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?n.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[n.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:n.jsx(mn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):n.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&n.jsx(ul,{className:"w-6 h-6"}),i==="project"&&n.jsx(nu,{className:"w-6 h-6"}),i==="task"&&n.jsx(_i,{className:"w-6 h-6"}),i==="invoice"&&n.jsx(Gn,{className:"w-6 h-6"}),i==="contact"&&n.jsx(qi,{className:"w-6 h-6"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:Ue()}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"WORKSPACE UPDATE"})]})]}),n.jsx("button",{onClick:le,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(Zt,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:he,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&n.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(oe=>n.jsx("button",{type:"button",onClick:()=>o(oe),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===oe?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:oe},oe))}),f&&Object.keys(m).length===0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx(Rn,{className:"w-5 h-5 shrink-0"}),n.jsx("span",{children:f})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",n.jsx(Te,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?q.title:q.name,onChange:oe=>{const te=i==="deal"||i==="project"||i==="task"?"title":"name";K(Pe=>({...Pe,[te]:oe.target.value})),m[te]&&b(Pe=>{const je={...Pe};return delete je[te],je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.title||m.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(m.title||m.name)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.title||m.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&n.jsx(Te,{})]}),n.jsxs("select",{required:i==="deal"||i==="invoice",value:q.companyId,onChange:oe=>{K(te=>({...te,companyId:oe.target.value})),m.companyId&&b(te=>{const Pe={...te};return delete Pe.companyId,Pe})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${m.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${m.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),v.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),m.companyId&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.companyId]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",n.jsx(Te,{})]}),n.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:q.email,onChange:oe=>{K(te=>({...te,email:oe.target.value})),m.email&&b(te=>{const Pe={...te};return delete Pe.email,Pe})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.email]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),n.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:q.role,onChange:oe=>K(te=>({...te,role:oe.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),n.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:q.phone,onChange:oe=>K(te=>({...te,phone:oe.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),n.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:q.industry,onChange:oe=>{K(te=>({...te,industry:oe.target.value})),m.industry&&b(te=>{const Pe={...te};return delete Pe.industry,Pe})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.industry&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.industry]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2 relative",ref:H,children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",n.jsx(Te,{})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>{_(!T),T||U("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${m.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${q.region?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:q.region||"Select Region"}),n.jsx(Ts,{className:`w-4 h-4 text-slate-400 transition-transform ${T?"rotate-180":""}`})]}),T&&n.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-3 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search regions...",value:B,onChange:oe=>U(oe.target.value),onClick:oe=>oe.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:se.length>0?se.map(oe=>n.jsx("button",{type:"button",onClick:()=>{const te=oe.trim();K(Pe=>({...Pe,region:te})),_(!1),U(""),b(Pe=>{const je={...Pe};return delete je.region,je}),p(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${q.region===oe?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:oe},oe)):n.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),m.region&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.region]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),n.jsx("input",{type:"url",placeholder:"https://www.example.com",value:q.website,onChange:oe=>{const te=oe.target.value;K(Pe=>{const je={...Pe,website:te};return je.domain=Ev(te,Pe.email)||"",je}),(m.domain||m.website)&&b(Pe=>{const je={...Pe};return delete je.domain,delete je.website,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.website&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.website]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),n.jsx("input",{type:"email",placeholder:"contact@company.com",value:q.email,onChange:oe=>{const te=oe.target.value;K(Pe=>{const je={...Pe,email:te};return je.domain=Ev(Pe.website,te)||"",je}),(m.email||m.domain)&&b(Pe=>{const je={...Pe};return delete je.email,delete je.domain,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.email]})]}),i==="company"&&q.domain&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",n.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),n.jsx("input",{type:"text",value:q.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${m.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),m.domain&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.domain]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),n.jsxs("select",{value:q.projectId||"",onChange:oe=>{const te=oe.target.value;K(Pe=>({...Pe,projectId:te===""?"":te}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),S.map(oe=>n.jsx("option",{value:oe.id,children:oe.title},oe.id))]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3.5 h-3.5"})," Task Category"]}),n.jsxs("select",{value:D?"__new__":q.category||"",onChange:oe=>{const te=oe.target.value;te==="__new__"?(R(!0),K(Pe=>({...Pe,category:""}))):(R(!1),K(Pe=>({...Pe,category:te})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),A.map(oe=>n.jsx("option",{value:oe,children:oe},oe)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),D&&n.jsx("div",{className:"pt-1",children:n.jsx("input",{type:"text",value:q.category,onChange:oe=>K(te=>({...te,category:oe.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["ASSIGNEE / LEAD ",n.jsx(Te,{})]}),n.jsxs("select",{required:!0,value:i==="task"?q.assigneeId:q.ownerId,onChange:oe=>{const te=i==="task"?"assigneeId":"ownerId";K(Pe=>({...Pe,[te]:oe.target.value})),m[te]&&b(Pe=>{const je={...Pe};return delete je[te],je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${m.ownerId||m.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[n.jsx("option",{value:"",children:"Select Resource Personnel"}),j.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),(m.ownerId||m.assigneeId)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.ownerId||m.assigneeId]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",n.jsx(Te,{})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"relative w-32",children:n.jsx("select",{value:q.currency||Si,onChange:oe=>{K(te=>({...te,currency:oe.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:rp.map(oe=>n.jsxs("option",{value:oe.code,children:[oe.code," (",oe.symbol,")"]},oe.code))})}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:pf(q.currency)}),n.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:q.value,onChange:oe=>{K(te=>({...te,value:oe.target.value})),m.value&&b(te=>{const Pe={...te};return delete Pe.value,Pe})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${m.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),m.value&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.value]})]}),i==="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),n.jsx("div",{className:"relative w-full",children:n.jsx("select",{value:q.currency||Si,onChange:oe=>{K(te=>({...te,currency:oe.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:rp.map(oe=>n.jsxs("option",{value:oe.code,children:[oe.code," (",oe.symbol,")"]},oe.code))})})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",n.jsx(Te,{})]}),n.jsxs("div",{className:"space-y-3",children:[q.lineItems.map((oe,te)=>n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",te+1]}),q.lineItems.length>1&&n.jsx("button",{type:"button",onClick:()=>{const Pe=q.lineItems.filter((je,Ie)=>Ie!==te);K(je=>({...je,lineItems:Pe})),b(je=>{const Ie={...je};return delete Ie[`lineItem_${te}_description`],delete Ie[`lineItem_${te}_quantity`],delete Ie[`lineItem_${te}_rate`],Ie})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Item description",value:oe.description,onChange:Pe=>{const je=[...q.lineItems];je[te]={...je[te],description:Pe.target.value},K(Ie=>({...Ie,lineItems:je})),m[`lineItem_${te}_description`]&&b(Ie=>{const ue={...Ie};return delete ue[`lineItem_${te}_description`],ue})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${te}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${te}_description`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${te}_description`]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:oe.quantity||"",onChange:Pe=>{const je=parseFloat(Pe.target.value)||0,Ie=oe.rate||0,ue=[...q.lineItems];ue[te]={...ue[te],quantity:je,amount:je*Ie},K(de=>({...de,lineItems:ue})),m[`lineItem_${te}_quantity`]&&b(de=>{const Ae={...de};return delete Ae[`lineItem_${te}_quantity`],Ae})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${te}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${te}_quantity`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${te}_quantity`]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",pf(q.currency),") ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:oe.rate||"",onChange:Pe=>{const je=parseFloat(Pe.target.value)||0,Ie=oe.quantity||0,ue=[...q.lineItems];ue[te]={...ue[te],rate:je,amount:Ie*je},K(de=>({...de,lineItems:ue})),m[`lineItem_${te}_rate`]&&b(de=>{const Ae={...de};return delete Ae[`lineItem_${te}_rate`],Ae})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${te}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${te}_rate`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${te}_rate`]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),n.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[pf(q.currency),((oe.quantity||0)*(oe.rate||0)).toFixed(2)]})})]})]},te)),n.jsxs("button",{type:"button",onClick:()=>{K(oe=>({...oe,lineItems:[...oe.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),m.lineItems&&b(oe=>{const te={...oe};return delete te.lineItems,te})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Zr,{className:"w-4 h-4"}),"Add Line Item"]}),m.lineItems&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.lineItems]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",pf(q.currency),")"]}),n.jsxs("div",{className:"relative",children:[n.jsx(zu,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[pf(q.currency),q.lineItems.reduce((oe,te)=>{const Pe=te.amount||te.rate*te.quantity||0;return oe+Pe},0).toFixed(2)]})]})]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",n.jsx(Te,{})]}),n.jsxs("select",{required:!0,value:q.stage,onChange:oe=>{K(te=>({...te,stage:oe.target.value})),m.stage&&b(te=>{const Pe={...te};return delete Pe.stage,Pe})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${m.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${m.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:"Select Stage"}),n.jsx("option",{value:"Discovery",children:"Discovery"}),n.jsx("option",{value:"Proposal",children:"Proposal"}),n.jsx("option",{value:"Negotiation",children:"Negotiation"}),n.jsx("option",{value:"Won",children:"Won"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),m.stage&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.stage]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",n.jsx(Te,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:q.engagement,onChange:oe=>{K(te=>({...te,engagement:oe.target.value})),m.engagement&&b(te=>{const Pe={...te};return delete Pe.engagement,Pe})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.engagement&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.engagement]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",n.jsx(Te,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Kn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:q.startDate,onChange:oe=>{if(K(te=>({...te,startDate:oe.target.value})),m.startDate&&b(te=>{const Pe={...te};return delete Pe.startDate,Pe}),oe.target.value&&q.endDate){const te=new Date(oe.target.value),Pe=new Date(q.endDate);!isNaN(te.getTime())&&!isNaN(Pe.getTime())&&te>=Pe?b(je=>({...je,endDate:"End Date must be after Start Date"})):m.endDate==="End Date must be after Start Date"&&b(je=>{const Ie={...je};return delete Ie.endDate,Ie})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.startDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.startDate]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",n.jsx(Te,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Kn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:q.endDate,onChange:oe=>{if(K(te=>({...te,endDate:oe.target.value})),m.endDate&&b(te=>{const Pe={...te};return delete Pe.endDate,Pe}),q.startDate&&oe.target.value){const te=new Date(q.startDate),Pe=new Date(oe.target.value);!isNaN(te.getTime())&&!isNaN(Pe.getTime())&&te>=Pe&&b(je=>({...je,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.endDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.endDate]})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",n.jsx(Te,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Kn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:q.expectedCloseDate,onChange:oe=>{K(te=>({...te,expectedCloseDate:oe.target.value})),m.expectedCloseDate&&b(te=>{const Pe={...te};return delete Pe.expectedCloseDate,Pe})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.expectedCloseDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Rn,{className:"w-3 h-3"}),m.expectedCloseDate]})]}),(i==="deal"||i==="project"||i==="task")&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"DUE DATE"}),n.jsxs("div",{className:"relative",children:[n.jsx(Kn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),n.jsx("input",{type:"date",value:q.expectedCloseDate,onChange:oe=>K(te=>({...te,expectedCloseDate:oe.target.value})),placeholder:"dd/mm/yyyy",className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 font-bold placeholder:text-slate-300 [color-scheme:light]"})]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"PRIORITY"}),n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(oe=>n.jsx("button",{type:"button",onClick:()=>K({...q,priority:oe}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${q.priority===oe?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:oe.toUpperCase()},oe))})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"DESCRIPTION"}),i==="task"?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(o_,{value:q.description||"",onChange:oe=>K(te=>({...te,description:oe})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsx("textarea",{placeholder:"Add Context or Notes...",value:q.description,onChange:oe=>K(te=>({...te,description:oe.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),n.jsxs("label",{className:"cursor-pointer group block mt-4",children:[n.jsxs("div",{className:"flex items-center gap-4 px-5 py-5 bg-slate-50/80 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all shrink-0",children:ee?n.jsx(_l,{className:"w-6 h-6"}):n.jsx(Oc,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:ee?O?.name||"Image attached":"Attach Image to Note"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),n.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:ie,className:"hidden"})]}),ee&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ee,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),n.jsx("button",{type:"button",onClick:()=>{W(""),z(null),V.current&&(V.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:n.jsx(Zt,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:le,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),n.jsxs("button",{type:"submit",disabled:d,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[d?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):n.jsx(oi,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Y&&Y.open&&n.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!re&&J(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Y.duplicates.some(oe=>oe.matchType==="exact"||oe.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),n.jsx("button",{onClick:()=>!re&&J(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:re,children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),n.jsx("p",{className:"font-semibold text-slate-900",children:Y.newContact.name||""}),Y.newContact.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Y.newContact.email}),Y.newContact.phone&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Y.newContact.phone]}),Y.newContact.role&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Y.newContact.role]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Y.duplicates.length>1?"s":""]}),n.jsx("div",{className:"space-y-3",children:Y.duplicates.map((oe,te)=>n.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:oe.name||""}),oe.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:oe.email}),n.jsxs("div",{className:"mt-2 space-y-1",children:[oe.role?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",oe.role]}):Y.newContact.role&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Y.newContact.role," (will be added)"]}),oe.phone?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",oe.phone]}):Y.newContact.phone&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Y.newContact.phone," (will be added)"]}),!oe.companyId&&Y.newContact.companyId&&n.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),oe.matchType==="fuzzy"&&oe.similarity&&n.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(oe.similarity*100),"% name similarity"]}),oe.matchType==="exact"&&n.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{const Pe={};Y.newContact.name&&(!oe.name||oe.name.trim()===""||Y.newContact.name.trim()!==oe.name.trim())&&(Pe.name=Y.newContact.name),Y.newContact.email&&(!oe.email||oe.email.trim()==="")&&(Pe.email=Y.newContact.email),Y.newContact.phone&&(!oe.phone||oe.phone.trim()==="")&&(Pe.phone=Y.newContact.phone),Y.newContact.role&&(!oe.role||oe.role.trim()==="")&&(Pe.role=Y.newContact.role),Y.newContact.companyId&&(!oe.companyId||oe.companyId.trim()==="")&&(Pe.companyId=Y.newContact.companyId),Y.newContact.linkedin&&(!oe.linkedin||oe.linkedin.trim()==="")&&(Pe.linkedin=Y.newContact.linkedin),Object.keys(Pe).length>0&&await eM(oe.id,Pe),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(Pe){console.error("[MERGE] Failed:",Pe),p(Pe.message||"Merge failed"),X(!1)}}},disabled:re,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[re?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(Qv,{className:"w-4 h-4"}),"Merge"]})]})},oe.id||te))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>J(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:re,children:"Cancel"}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{await uI(Y.newContact),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(oe){console.error("[CREATE] Failed:",oe),p(oe.message||"Failed to create contact"),X(!1),J(null)}}},disabled:re,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[re?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):n.jsx(Zr,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},pye=({event:e,selectedDate:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=jn(),[o,l]=I.useState(!1),[c,d]=I.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});I.useEffect(()=>{if(e)d({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const f=new Date(t);f.setHours(9,0,0,0);const p=new Date(t);p.setHours(10,0,0,0),d(m=>({...m,start:f.toISOString().substring(0,16),end:p.toISOString().substring(0,16)}))}},[e,t]);const u=async f=>{f.preventDefault(),l(!0);try{e?(await gM(e.id,c),s("Event updated successfully")):(await die({...c,source:"local"}),s("Event created successfully")),a(),r()}catch(p){i(p.message||"Failed to save event")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(Kn,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:f=>d({...c,title:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(es,{className:"w-3 h-3"})," Start"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:f=>d({...c,start:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(es,{className:"w-3 h-3"})," End"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:f=>d({...c,end:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3 h-3"})," Event Type"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(f=>n.jsx("button",{type:"button",onClick:()=>d({...c,type:f}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===f?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:f},f))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(fU,{className:"w-3 h-3"})," Description"]}),n.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:f=>d({...c,description:f.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(xd,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},xye=({currentUser:e})=>{const{showSuccess:t,showError:r}=jn(),[a,s]=I.useState(!1),[i,o]=I.useState(!1),[l,c]=I.useState(!1),[d,u]=I.useState(!1);I.useEffect(()=>{const H=setTimeout(()=>u(!0),500);return()=>clearTimeout(H)},[]);const[f,p]=I.useState({type:"bug",title:"",description:""}),[m,b]=I.useState([]),[v,g]=I.useState(!1),[w,y]=I.useState("upload"),[j,N]=I.useState(""),[S,E]=I.useState(!1),A=I.useRef(null),P=I.useRef(m);I.useEffect(()=>{P.current=m},[m]),I.useEffect(()=>()=>{P.current.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)})},[]);const D=(H,Y=1920,J=1080,re=.8)=>new Promise((X,ee)=>{const W=new FileReader;W.onload=O=>{const z=new Image;z.onload=()=>{let V=z.width,q=z.height;V>q?V>Y&&(q=q*Y/V,V=Y):q>J&&(V=V*J/q,q=J);const K=document.createElement("canvas");K.width=V,K.height=q;const se=K.getContext("2d");if(!se){ee(new Error("Failed to create canvas context"));return}se.drawImage(z,0,0,V,q);const pe=K.toDataURL("image/jpeg",re);X(pe)},z.onerror=()=>ee(new Error("Failed to load image")),z.src=O.target?.result},W.onerror=()=>ee(new Error("Failed to read file")),W.readAsDataURL(H)}),R=async H=>{const Y=H.target.files;if(!(!Y||Y.length===0)){g(!0);try{const J=[];for(let re=0;re<Y.length;re++){const X=Y[re];if(!X.type.startsWith("image/")&&!X.type.startsWith("video/")){r("Please select only image or video files");continue}if(X.size>10*1024*1024){r(`File "${X.name}" is too large. Maximum size is 10MB`);continue}const ee=X.type.startsWith("image/");let W="";ee?W=await D(X,1920,1080,.8):W=URL.createObjectURL(X),J.push({file:X,preview:W,type:ee?"image":"video",source:"file"})}b(re=>[...re,...J]),A.current&&(A.current.value="")}catch(J){r(J.message||"Failed to process file")}finally{g(!1)}}},T=H=>new Promise(Y=>{const J=new Image,re=document.createElement("video"),X=[".jpg",".jpeg",".png",".gif",".webp",".svg"],ee=[".mp4",".mov",".avi",".webm",".mkv"],W=H.toLowerCase(),O=X.some(V=>W.includes(V))||W.includes("image")||W.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),z=ee.some(V=>W.includes(V))||W.includes("video")||W.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!O&&!z?(J.onload=()=>Y(!0),J.onerror=()=>{re.onloadedmetadata=()=>Y(!0),re.onerror=()=>Y(!1),re.src=H},J.src=H):Y(!0)}),_=async()=>{if(!j.trim()){r("Please enter a valid URL");return}try{new URL(j.trim())}catch{r("Please enter a valid URL");return}E(!0);try{if(!await T(j.trim())){r("URL does not appear to be a valid image or video");return}const Y=j.toLowerCase(),J=Y.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Y.includes("image")||!Y.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Y.includes("video"),re={url:j.trim(),preview:j.trim(),type:J?"image":"video",source:"url"};b(X=>[...X,re]),N(""),t("URL added successfully")}catch(H){r(H.message||"Failed to validate URL")}finally{E(!1)}},B=H=>{const Y=m[H];Y.source==="file"&&Y.type==="video"&&Y.preview.startsWith("blob:")&&URL.revokeObjectURL(Y.preview),b(J=>J.filter((re,X)=>X!==H))},U=async H=>{if(H.preventDefault(),!(!f.title||!f.description)){o(!0);try{const Y=m.filter(W=>W.source==="url"),J=m.filter(W=>W.source==="file"),re=Y.length>0?Y[0].url:"",X=await Promise.all(J.map(async W=>W.type==="image"?{type:"image",data:W.preview,filename:W.file.name,mimeType:W.file.type,source:"file"}:new Promise((O,z)=>{const V=new FileReader;V.onload=()=>{O({type:"video",data:V.result,filename:W.file.name,mimeType:W.file.type,source:"file"})},V.onerror=z,V.readAsDataURL(W.file)}))),ee={...f,userId:e?.id||"anonymous",status:"planned",url:re||void 0,attachments:X.length>0?X:[]};await dM(ee),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),p({type:"bug",title:"",description:""}),m.forEach(W=>{W.type==="video"&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)}),b([])},2e3)}catch(Y){console.error("[FEEDBACK] Submission failed:",Y),r(`Submission error: ${Y.message||"Registry error"}`)}finally{o(!1)}}};return n.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[n.jsx("button",{onClick:()=>s(!a),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${d?"transition-all duration-300":""} ${a?"translate-x-full":""}`,children:n.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),n.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${d?"transition-all duration-500 ease-out":""} ${a?"translate-x-0":"translate-x-full"}`,style:d?void 0:{transform:a?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?n.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:n.jsx(mn,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):n.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[n.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:n.jsx(fo,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),n.jsx("button",{onClick:()=>{s(!1),m.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)}),b([]),N("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:n.jsx(Zt,{className:"w-4 h-4"})})]}),n.jsxs("form",{onSubmit:U,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Xv,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:n.jsx(Ri,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:n.jsx(Yj,{className:"w-3 h-3"}),label:"Idea"}].map(H=>n.jsxs("button",{type:"button",onClick:()=>p({...f,type:H.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${f.type===H.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[H.icon," ",H.label]},H.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:f.title,onChange:H=>p({...f,title:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),n.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:f.description,onChange:H=>p({...f,description:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),n.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[n.jsxs("button",{type:"button",onClick:()=>y("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${w==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(Oc,{className:"w-3 h-3"}),"Upload"]}),n.jsxs("button",{type:"button",onClick:()=>y("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${w==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(d0,{className:"w-3 h-3"}),"URL"]})]}),w==="upload"&&n.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:v?n.jsx(vt,{className:"w-5 h-5 animate-spin"}):n.jsx(Oc,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),n.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",multiple:!0,onChange:R,disabled:v,className:"hidden"})]}),w==="url"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:j,onChange:H=>N(H.target.value),onKeyDown:H=>{H.key==="Enter"&&!S&&j.trim()&&(H.preventDefault(),_())},disabled:S,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),n.jsx("button",{type:"button",onClick:_,disabled:S||!j.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:S?n.jsxs(n.Fragment,{children:[n.jsx(vt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(d0,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),m.length>0&&n.jsx("div",{className:"space-y-2",children:m.map((H,Y)=>n.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:H.type==="image"?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:H.preview,alt:`Attachment ${Y+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:J=>{J.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(_l,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Image URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/1024).toFixed(1)} KB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>B(Y),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:n.jsx(sh,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(sh,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Video URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/(1024*1024)).toFixed(2)} MB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>B(Y),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})},Y))})]}),n.jsxs("button",{type:"submit",disabled:i||v||S,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?n.jsx(vt,{className:"w-4 h-4 animate-spin"}):n.jsx(tc,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},gye=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(eS,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(I8,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Enter your professional email address in the login portal"}),n.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),n.jsx("li",{children:"Enter the 6-digit code sent to your email"}),n.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Check your spam or junk folder"}),n.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),n.jsx("li",{children:'Click "Request New Code" on the verification screen'}),n.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),n.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),n.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),n.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),n.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(Xa,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's IT administrator"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),vye=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(eS,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(yx,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),n.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsx("div",{children:n.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(Gn,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),n.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),n.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),n.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),n.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(NU,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"To authenticate your access and maintain your account"}),n.jsx("li",{children:"To personalize your experience and provide relevant features"}),n.jsx("li",{children:"To provide customer support and respond to your inquiries"}),n.jsx("li",{children:"To improve our services, features, and user experience"}),n.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),n.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),n.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),n.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),n.jsx("li",{children:"Access controls and role-based permissions"}),n.jsx("li",{children:"Regular security audits and monitoring"}),n.jsx("li",{children:"Restricted access to authorized personnel only"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),n.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Authentication and session management"}),n.jsx("li",{children:"Remembering your preferences"}),n.jsx("li",{children:"Security and fraud prevention"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),n.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),n.jsx("li",{children:"When required by law or to protect our rights and safety"}),n.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),n.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),n.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),n.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),n.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),n.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(Xa,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),bye=new Yie({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),yye=({children:e})=>n.jsx(Jie,{client:bye,children:e}),wye=()=>{const[e,t]=I.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,a]=I.useState(!1),[s,i]=I.useState(null),[o,l]=I.useState(!1),[c,d]=I.useState(!1),[u,f]=I.useState(()=>{try{const Ue=localStorage.getItem("navGroupsOpen");if(Ue){const Te=JSON.parse(Ue);return{...e1.reduce((oe,te)=>({...oe,[te.id]:!0}),{}),system:!0,...Te}}}catch{}return{...e1.reduce((Ue,Te)=>({...Ue,[Te.id]:!0}),{}),system:!0}}),p=Ue=>{f(Te=>{const oe={...Te,[Ue]:!Te[Ue]};try{localStorage.setItem("navGroupsOpen",JSON.stringify(oe))}catch{}return oe})},[m,b]=I.useState(""),[v,g]=I.useState(!1),[w,y]=I.useState({isOpen:!1,type:"deal"}),[j,N]=I.useState({isOpen:!1,event:null}),[S,E]=I.useState([]),[A,P]=I.useState(!1),[D,R]=I.useState(!1),T=S.filter(Ue=>!Ue.read).length,_=I.useRef(null),B=I.useCallback(async(Ue=!1)=>{try{const Te=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!Te?.id)return;Ue&&R(!0);const oe=await oM(Te.id,20),te=oe?.data||oe||[],Pe=(Array.isArray(te)?te:[]).map(je=>{let Ie="Just now";if(je.createdAt){const ue=new Date(je.createdAt),Ae=new Date().getTime()-ue.getTime(),Qe=Math.floor(Ae/6e4),ge=Math.floor(Ae/36e5),fe=Math.floor(Ae/864e5);Qe<1?Ie="Just now":Qe<60?Ie=`${Qe}m ago`:ge<24?Ie=`${ge}h ago`:fe<7?Ie=`${fe}d ago`:Ie=ue.toLocaleDateString()}return{id:je.id,userId:je.userId,type:je.type||"system",title:je.title,message:je.message,timestamp:Ie,read:!!je.read,link:je.link||void 0}});E(Pe)}catch(Te){console.error("[NOTIFICATIONS] Failed to load notifications",Te)}finally{Ue&&R(!1)}},[s]),U=I.useRef(null),H=I.useRef(!1);I.useEffect(()=>{const Ue=s||JSON.parse(localStorage.getItem("user_data")||"null");if(Ue?.id)return U.current=null,H.current=!1,c1(async()=>{const{getNotificationWebSocket:Te,disconnectNotificationWebSocket:oe}=await import("./notificationWebSocket-mFjRd7uM.js");return{getNotificationWebSocket:Te,disconnectNotificationWebSocket:oe}},[]).then(({getNotificationWebSocket:Te,disconnectNotificationWebSocket:oe})=>{if(H.current){oe();return}const te=Te(Ue.id);"Notification"in window&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(je=>{console.log("[NOTIFICATIONS] Browser notification permission:",je)});const Pe=je=>{const Ie={id:je.id,userId:je.userId,type:je.type||"system",title:je.title||"Notification",message:je.message||"",timestamp:"Just now",read:!1,link:je.link};if(E(ue=>ue.find(Ae=>Ae.id===je.id)?ue:[Ie,...ue].slice(0,100)),window.dispatchEvent(new Event("refresh-notifications")),"Notification"in window&&window.Notification.permission==="granted")try{const ue=new window.Notification(je.title||"Notification",{body:je.message||"",icon:"/favicon.ico",tag:je.id,requireInteraction:!1});ue.onclick=()=>{window.focus(),je.link&&(window.location.href=je.link),ue.close()},setTimeout(()=>ue.close(),5e3)}catch(ue){console.error("[NOTIFICATIONS] Error showing browser notification:",ue)}};te.on("notification",Pe),te.connect().catch(je=>{console.error("[NOTIFICATIONS] WebSocket connection failed:",je)}),U.current=()=>{te.off("notification",Pe),oe()}}),()=>{H.current=!0,U.current?.(),U.current=null}},[s]),I.useEffect(()=>{B();const Ue=setInterval(()=>{B(!1)},3e4),Te=()=>{B(!0)};return window.addEventListener("refresh-notifications",Te),()=>{clearInterval(Ue),window.removeEventListener("refresh-notifications",Te)}},[B]),I.useEffect(()=>{A&&B(!0)},[A,B]),I.useEffect(()=>{const Ue=()=>{const Te=window.innerWidth<1024;l(Te),a(!Te)};return Ue(),window.addEventListener("resize",Ue),()=>window.removeEventListener("resize",Ue)},[]);const[Y,J]=I.useState(null),[re,X]=I.useState(null);I.useEffect(()=>{const Ue=new URLSearchParams(window.location.search),Te=Ue.get("tab"),oe=Ue.get("company"),te=Ue.get("promptOnboarding"),Pe=Ue.get("deal"),je=Ue.get("templateId");if(Te&&["dashboard","schedule","crm","pipeline","projects","playbooks","tasks","invoices","roadmap","users","settings","integrations","satisfaction","inbox","expenses","budget","contracts","data-hygiene","products-services","import-history"].includes(Te)){t(Te),localStorage.setItem("activeTab",Te),Te==="satisfaction"&&oe&&J(oe),Te==="playbooks"&&te==="true"&&X({dealId:Pe||void 0,templateId:je||void 0}),Ue.delete("tab"),Ue.delete("company"),Ue.delete("promptOnboarding"),Ue.delete("deal"),Ue.delete("templateId");const ue=Ue.toString()?`${window.location.pathname}?${Ue.toString()}`:window.location.pathname;window.history.replaceState({},"",ue)}},[]),I.useEffect(()=>{const Ue=Te=>{_.current&&!_.current.contains(Te.target)&&P(!1)};return document.addEventListener("mousedown",Ue),()=>document.removeEventListener("mousedown",Ue)},[]);const ee=async()=>{await Lne(),window.location.reload()},W=async Ue=>{const Te=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Te){E(oe=>oe.map(te=>te.id===Ue?{...te,read:!0}:te));try{await lM(Ue,Te)}catch{}}},O=async()=>{const Ue=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Ue){E(Te=>Te.map(oe=>({...oe,read:!0})));try{await cM(Ue)}catch{}}},z=(Ue,Te)=>{y({isOpen:!0,type:Ue,stage:Te||void 0})},V=(Ue,Te)=>{N({isOpen:!0,event:Ue||null,selectedDate:Te})},q=()=>{N({isOpen:!1,event:null})},K=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},se=typeof window<"u"?window.location.pathname:"",[pe,ie]=I.useState(()=>se==="/privacy-policy"||se==="/privacy"?"privacy":se==="/help"?"help":se.startsWith("/survey/")?"survey":null),le=se.startsWith("/survey/")?se.replace("/survey/",""):null;if(I.useEffect(()=>{const Ue=window.location.pathname;Ue==="/privacy-policy"||Ue==="/privacy"?ie("privacy"):Ue==="/help"?ie("help"):Ue.startsWith("/survey/")?ie("survey"):ie(null)},[]),I.useEffect(()=>{const Ue=()=>{const Te=window.location.pathname;Te==="/privacy-policy"||Te==="/privacy"?ie("privacy"):Te==="/help"?ie("help"):Te.startsWith("/survey/")?ie("survey"):ie(null)};return window.addEventListener("popstate",Ue),()=>window.removeEventListener("popstate",Ue)},[]),pe==="privacy")return n.jsx(vye,{onBack:()=>{window.history.pushState({},"","/"),ie(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(pe==="help")return n.jsx(gye,{onBack:()=>{window.history.pushState({},"","/"),ie(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(pe==="survey"&&le)return n.jsx(Sle,{surveyId:le});const $e=()=>{switch(e){case"dashboard":return n.jsx(AI,{onNavigate:t});case"schedule":return n.jsx(Hbe,{currentUser:s,onNavigate:t,onNewEvent:()=>V(),onEditEvent:Ue=>V(Ue)});case"crm":return n.jsx(rle,{onNavigate:t,onAddCompany:()=>z("company"),onAddContact:()=>z("contact"),externalSearchQuery:m});case"pipeline":return n.jsx(ale,{onNavigate:t,onNewDeal:Ue=>z("deal",Ue),currentUser:s});case"projects":return n.jsx(ple,{onNavigate:t,onCreateProject:()=>z("project"),currentUser:s});case"playbooks":return n.jsx(Nle,{onNavigate:t,currentUser:s,playbookPrompt:re,onClearPlaybookPrompt:()=>X(null)});case"satisfaction":return n.jsx(jle,{onNavigate:t,companyIdFromUrl:Y,onClearCompanyIdFromUrl:()=>J(null)});case"tasks":return n.jsx(D1e,{onCreateTask:()=>z("task"),currentUser:s});case"invoices":return n.jsx(Pbe,{onCreateInvoice:()=>z("invoice"),currentUser:s});case"expenses":return n.jsx(rye,{currentUser:s});case"budget":return n.jsx(nye,{currentUser:s});case"contracts":return n.jsx(aye,{currentUser:s});case"inbox":return n.jsx(vB,{currentUser:s});case"roadmap":return n.jsx(tye,{currentUser:s,onNavigate:t});case"users":return n.jsx(Ibe,{});case"settings":return n.jsx(Mbe,{currentUser:s,onUserUpdate:i});case"data-hygiene":return n.jsx(Rbe,{currentUser:s});case"import-history":return n.jsx(Bbe,{currentUser:s});case"integrations":return n.jsx(Wbe,{});case"products-services":return n.jsx(sye,{});case"notifications":return n.jsx(cye,{currentUser:s,onNavigate:t});default:return n.jsx(AI,{onNavigate:t})}},he=Ue=>{t(Ue),localStorage.setItem("activeTab",Ue),b(""),o&&a(!1)};return I.useEffect(()=>{const Ue=setTimeout(()=>d(!0),400);return()=>clearTimeout(Ue)},[]),n.jsx(yye,{children:n.jsx(bie,{children:n.jsx(oye,{onUserLoaded:i,children:n.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&n.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>a(!1)}),n.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[n.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&n.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&n.jsx("button",{onClick:()=>a(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:n.jsx(Zt,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2 flex flex-col min-h-0",children:[U8.map(Ue=>n.jsxs("button",{onClick:()=>he(Ue.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===Ue.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:Ue.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap",children:Ue.label})]},Ue.id)),e1.map(Ue=>{const Te=u[Ue.id]!==!1;return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>p(Ue.id),"aria-expanded":Te,"aria-label":`${Te?"Collapse":"Expand"} ${Ue.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${Ue.items.some(oe=>oe.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:Ue.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:Ue.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Te?n.jsx(Ts,{className:"w-4 h-4"}):n.jsx(ia,{className:"w-4 h-4"})})]})]}),Te&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:Ue.items.map(oe=>n.jsxs("button",{onClick:()=>he(oe.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===oe.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:oe.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:oe.label})]},oe.id))})]},Ue.id)})]}),n.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0 space-y-0.5",children:[(()=>{const Ue=q8,Te=u[Ue.id]!==!1,oe=Ue.items.filter(te=>te.id!=="data-hygiene"||s?.role==="Admin");return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>p(Ue.id),"aria-expanded":Te,"aria-label":`${Te?"Collapse":"Expand"} ${Ue.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${oe.some(te=>te.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:Ue.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:Ue.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Te?n.jsx(Ts,{className:"w-4 h-4"}):n.jsx(ia,{className:"w-4 h-4"})})]})]}),Te&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:oe.map(te=>n.jsxs("button",{onClick:()=>he(te.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===te.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:te.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:te.label})]},te.id))})]})})(),n.jsxs("button",{onClick:()=>g(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[n.jsx(R8,{className:"w-5 h-5 shrink-0"}),r&&n.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[n.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[n.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[n.jsx("button",{onClick:()=>a(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(kU,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{className:"relative group hidden sm:block",children:[n.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),n.jsx("input",{type:"text",placeholder:"Search Current View...",value:m,onChange:Ue=>b(Ue.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[n.jsxs("div",{className:"relative",ref:_,children:[n.jsxs("button",{onClick:()=>P(!A),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${A?"bg-slate-100":""}`,children:[n.jsx(Lb,{className:`w-5 h-5 transition-colors ${T>0?"text-indigo-600":"text-slate-600"} ${D?"animate-pulse":""}`}),T>0&&n.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:n.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${D?"animate-pulse":""}`,children:T})})]}),A&&n.jsx(lye,{notifications:S,onMarkAsRead:W,onMarkAllAsRead:O,onRefresh:()=>B(!0),isRefreshing:D,onClose:()=>P(!1),onNavigate:t,onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),n.jsxs("button",{onClick:()=>z("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(Zr,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),n.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:n.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:$e()})}),n.jsx(xye,{currentUser:s})]}),w.isOpen&&n.jsx(mye,{type:w.type,stage:w.stage,onClose:()=>y(Ue=>({...Ue,isOpen:!1})),onSuccess:()=>{(w.type==="contact"||w.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),w.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),w.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),w.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):w.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),j.isOpen&&n.jsx(pye,{event:j.event,selectedDate:j.selectedDate,onClose:q,onSuccess:K}),v&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>g(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("div",{children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),n.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(Zt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{onClick:ee,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function Nye(){const[e,t]=I.useState("loading"),[r,a]=I.useState(!1);I.useEffect(()=>{const c=Date.now();let d=!1;const u=()=>{if(d)return;const m=Date.now()-c,b=Math.max(0,850-m);setTimeout(()=>{d||t("fading")},b)},f=()=>{if(d)return;(document.fonts?.ready??Promise.resolve()).then(()=>{d||setTimeout(u,1100)}).catch(()=>setTimeout(u,1100))};if(document.readyState==="complete")return f(),()=>{d=!0};window.addEventListener("load",f);const p=setTimeout(()=>{d||t("fading")},4500);return()=>{d=!0,window.removeEventListener("load",f),clearTimeout(p)}},[]),I.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),I.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>a(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return n.jsxs(n.Fragment,{children:[(e==="fading"||e==="done")&&n.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:n.jsx(wye,{})}),s&&n.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[n.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const bB=document.getElementById("root");if(!bB)throw new Error("Could not find root element to mount to");const jye=iU.createRoot(bB);jye.render(n.jsx(ft.StrictMode,{children:n.jsx(Nye,{})}));export{Ea as _,iv as c,Ta as g};
