var OA=e=>{throw TypeError(e)};var $N=(e,t,r)=>t.has(e)||OA("Cannot "+r);var Ke=(e,t,r)=>($N(e,t,"read from private field"),r?r.call(e):t.get(e)),Er=(e,t,r)=>t.has(e)?OA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),fr=(e,t,r,n)=>($N(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),on=(e,t,r)=>($N(e,t,"access private method"),r);var Iy=(e,t,r,n)=>({set _(s){fr(e,t,s,r)},get _(){return Ke(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hD={exports:{}},o5={},pD={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1=Symbol.for("react.element"),PU=Symbol.for("react.portal"),IU=Symbol.for("react.fragment"),DU=Symbol.for("react.strict_mode"),LU=Symbol.for("react.profiler"),FU=Symbol.for("react.provider"),MU=Symbol.for("react.context"),RU=Symbol.for("react.forward_ref"),BU=Symbol.for("react.suspense"),$U=Symbol.for("react.memo"),UU=Symbol.for("react.lazy"),PA=Symbol.iterator;function zU(e){return e===null||typeof e!="object"?null:(e=PA&&e[PA]||e["@@iterator"],typeof e=="function"?e:null)}var mD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xD=Object.assign,gD={};function jx(e,t,r){this.props=e,this.context=t,this.refs=gD,this.updater=r||mD}jx.prototype.isReactComponent={};jx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vD(){}vD.prototype=jx.prototype;function OS(e,t,r){this.props=e,this.context=t,this.refs=gD,this.updater=r||mD}var PS=OS.prototype=new vD;PS.constructor=OS;xD(PS,jx.prototype);PS.isPureReactComponent=!0;var IA=Array.isArray,yD=Object.prototype.hasOwnProperty,IS={current:null},bD={key:!0,ref:!0,__self:!0,__source:!0};function wD(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)yD.call(t,n)&&!bD.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:q1,type:e,key:i,ref:o,props:s,_owner:IS.current}}function qU(e,t){return{$$typeof:q1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function DS(e){return typeof e=="object"&&e!==null&&e.$$typeof===q1}function HU(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var DA=/\/+/g;function UN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HU(""+e.key):t.toString(36)}function Bb(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case q1:case PU:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+UN(o,0):n,IA(s)?(r="",e!=null&&(r=e.replace(DA,"$&/")+"/"),Bb(s,t,r,"",function(u){return u})):s!=null&&(DS(s)&&(s=qU(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(DA,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",IA(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+UN(i,l);o+=Bb(i,t,r,c,s)}else if(c=zU(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+UN(i,l++),o+=Bb(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Dy(e,t,r){if(e==null)return e;var n=[],s=0;return Bb(e,n,"","",function(i){return t.call(r,i,s++)}),n}function WU(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var So={current:null},$b={transition:null},VU={ReactCurrentDispatcher:So,ReactCurrentBatchConfig:$b,ReactCurrentOwner:IS};function ND(){throw Error("act(...) is not supported in production builds of React.")}yn.Children={map:Dy,forEach:function(e,t,r){Dy(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dy(e,function(){t++}),t},toArray:function(e){return Dy(e,function(t){return t})||[]},only:function(e){if(!DS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yn.Component=jx;yn.Fragment=IU;yn.Profiler=LU;yn.PureComponent=OS;yn.StrictMode=DU;yn.Suspense=BU;yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VU;yn.act=ND;yn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xD({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=IS.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)yD.call(t,c)&&!bD.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:q1,type:e.type,key:s,ref:i,props:n,_owner:o}};yn.createContext=function(e){return e={$$typeof:MU,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FU,_context:e},e.Consumer=e};yn.createElement=wD;yn.createFactory=function(e){var t=wD.bind(null,e);return t.type=e,t};yn.createRef=function(){return{current:null}};yn.forwardRef=function(e){return{$$typeof:RU,render:e}};yn.isValidElement=DS;yn.lazy=function(e){return{$$typeof:UU,_payload:{_status:-1,_result:e},_init:WU}};yn.memo=function(e,t){return{$$typeof:$U,type:e,compare:t===void 0?null:t}};yn.startTransition=function(e){var t=$b.transition;$b.transition={};try{e()}finally{$b.transition=t}};yn.unstable_act=ND;yn.useCallback=function(e,t){return So.current.useCallback(e,t)};yn.useContext=function(e){return So.current.useContext(e)};yn.useDebugValue=function(){};yn.useDeferredValue=function(e){return So.current.useDeferredValue(e)};yn.useEffect=function(e,t){return So.current.useEffect(e,t)};yn.useId=function(){return So.current.useId()};yn.useImperativeHandle=function(e,t,r){return So.current.useImperativeHandle(e,t,r)};yn.useInsertionEffect=function(e,t){return So.current.useInsertionEffect(e,t)};yn.useLayoutEffect=function(e,t){return So.current.useLayoutEffect(e,t)};yn.useMemo=function(e,t){return So.current.useMemo(e,t)};yn.useReducer=function(e,t,r){return So.current.useReducer(e,t,r)};yn.useRef=function(e){return So.current.useRef(e)};yn.useState=function(e){return So.current.useState(e)};yn.useSyncExternalStore=function(e,t,r){return So.current.useSyncExternalStore(e,t,r)};yn.useTransition=function(){return So.current.useTransition()};yn.version="18.3.1";pD.exports=yn;var D=pD.exports;const nt=sa(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GU=D,KU=Symbol.for("react.element"),XU=Symbol.for("react.fragment"),YU=Object.prototype.hasOwnProperty,JU=GU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QU={key:!0,ref:!0,__self:!0,__source:!0};function jD(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)YU.call(t,n)&&!QU.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:KU,type:e,key:i,ref:o,props:s,_owner:JU.current}}o5.Fragment=XU;o5.jsx=jD;o5.jsxs=jD;hD.exports=o5;var a=hD.exports,v4={},kD={exports:{}},Pl={},SD={exports:{}},_D={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,q){var X=Y.length;Y.push(q);e:for(;0<X;){var V=X-1>>>1,T=Y[V];if(0<s(T,q))Y[V]=q,Y[X]=T,X=V;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var q=Y[0],X=Y.pop();if(X!==q){Y[0]=X;e:for(var V=0,T=Y.length,R=T>>>1;V<R;){var z=2*(V+1)-1,L=Y[z],H=z+1,ne=Y[H];if(0>s(L,X))H<T&&0>s(ne,L)?(Y[V]=ne,Y[H]=X,V=H):(Y[V]=L,Y[z]=X,V=z);else if(H<T&&0>s(ne,X))Y[V]=ne,Y[H]=X,V=H;else break e}}return q}function s(Y,q){var X=Y.sortIndex-q.sortIndex;return X!==0?X:Y.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,p=3,h=!1,g=!1,x=!1,m=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Y){for(var q=r(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=Y)n(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(u)}}function b(Y){if(x=!1,w(Y),!g)if(r(c)!==null)g=!0,K(N);else{var q=r(u);q!==null&&G(b,q.startTime-Y)}}function N(Y,q){g=!1,x&&(x=!1,v(_),_=-1),h=!0;var X=p;try{for(w(q),d=r(c);d!==null&&(!(d.expirationTime>q)||Y&&!A());){var V=d.callback;if(typeof V=="function"){d.callback=null,p=d.priorityLevel;var T=V(d.expirationTime<=q);q=e.unstable_now(),typeof T=="function"?d.callback=T:d===r(c)&&n(c),w(q)}else n(c);d=r(c)}if(d!==null)var R=!0;else{var z=r(u);z!==null&&G(b,z.startTime-q),R=!1}return R}finally{d=null,p=X,h=!1}}var S=!1,j=null,_=-1,E=5,I=-1;function A(){return!(e.unstable_now()-I<E)}function C(){if(j!==null){var Y=e.unstable_now();I=Y;var q=!0;try{q=j(!0,Y)}finally{q?F():(S=!1,j=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(C)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=C,F=function(){B.postMessage(null)}}else F=function(){m(C,0)};function K(Y){j=Y,S||(S=!0,F())}function G(Y,q){_=m(function(){Y(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,K(N))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(Y){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var X=p;p=q;try{return Y()}finally{p=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var X=p;p=Y;try{return q()}finally{p=X}},e.unstable_scheduleCallback=function(Y,q,X){var V=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?V+X:V):X=V,Y){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=X+T,Y={id:f++,callback:q,priorityLevel:Y,startTime:X,expirationTime:T,sortIndex:-1},X>V?(Y.sortIndex=X,t(u,Y),r(c)===null&&Y===r(u)&&(x?(v(_),_=-1):x=!0,G(b,X-V))):(Y.sortIndex=T,t(c,Y),g||h||(g=!0,K(N))),Y},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(Y){var q=p;return function(){var X=p;p=q;try{return Y.apply(this,arguments)}finally{p=X}}}})(_D);SD.exports=_D;var ZU=SD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ez=D,El=ZU;function Wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AD=new Set,wv={};function Qh(e,t){qm(e,t),qm(e+"Capture",t)}function qm(e,t){for(wv[e]=t,e=0;e<t.length;e++)AD.add(t[e])}var Id=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y4=Object.prototype.hasOwnProperty,tz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LA={},FA={};function rz(e){return y4.call(FA,e)?!0:y4.call(LA,e)?!1:tz.test(e)?FA[e]=!0:(LA[e]=!0,!1)}function nz(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function az(e,t,r,n){if(t===null||typeof t>"u"||nz(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _o(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_i[e]=new _o(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_i[t]=new _o(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_i[e]=new _o(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_i[e]=new _o(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_i[e]=new _o(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_i[e]=new _o(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_i[e]=new _o(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_i[e]=new _o(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_i[e]=new _o(e,5,!1,e.toLowerCase(),null,!1,!1)});var LS=/[\-:]([a-z])/g;function FS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(LS,FS);_i[t]=new _o(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(LS,FS);_i[t]=new _o(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(LS,FS);_i[t]=new _o(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_i[e]=new _o(e,1,!1,e.toLowerCase(),null,!1,!1)});_i.xlinkHref=new _o("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_i[e]=new _o(e,1,!1,e.toLowerCase(),null,!0,!0)});function MS(e,t,r,n){var s=_i.hasOwnProperty(t)?_i[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(az(t,r,s,n)&&(r=null),n||s===null?rz(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var qd=ez.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ly=Symbol.for("react.element"),Xp=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),RS=Symbol.for("react.strict_mode"),b4=Symbol.for("react.profiler"),CD=Symbol.for("react.provider"),ED=Symbol.for("react.context"),BS=Symbol.for("react.forward_ref"),w4=Symbol.for("react.suspense"),N4=Symbol.for("react.suspense_list"),$S=Symbol.for("react.memo"),wf=Symbol.for("react.lazy"),TD=Symbol.for("react.offscreen"),MA=Symbol.iterator;function cg(e){return e===null||typeof e!="object"?null:(e=MA&&e[MA]||e["@@iterator"],typeof e=="function"?e:null)}var Ka=Object.assign,zN;function Bg(e){if(zN===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);zN=t&&t[1]||""}return`
`+zN+e}var qN=!1;function HN(e,t){if(!e||qN)return"";qN=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{qN=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bg(e):""}function sz(e){switch(e.tag){case 5:return Bg(e.type);case 16:return Bg("Lazy");case 13:return Bg("Suspense");case 19:return Bg("SuspenseList");case 0:case 2:case 15:return e=HN(e.type,!1),e;case 11:return e=HN(e.type.render,!1),e;case 1:return e=HN(e.type,!0),e;default:return""}}function j4(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yp:return"Fragment";case Xp:return"Portal";case b4:return"Profiler";case RS:return"StrictMode";case w4:return"Suspense";case N4:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ED:return(e.displayName||"Context")+".Consumer";case CD:return(e._context.displayName||"Context")+".Provider";case BS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $S:return t=e.displayName||null,t!==null?t:j4(e.type)||"Memo";case wf:t=e._payload,e=e._init;try{return j4(e(t))}catch{}}return null}function iz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j4(t);case 8:return t===RS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function n0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function OD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oz(e){var t=OD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fy(e){e._valueTracker||(e._valueTracker=oz(e))}function PD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=OD(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function c2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function k4(e,t){var r=t.checked;return Ka({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function RA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=n0(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ID(e,t){t=t.checked,t!=null&&MS(e,"checked",t,!1)}function S4(e,t){ID(e,t);var r=n0(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_4(e,t.type,r):t.hasOwnProperty("defaultValue")&&_4(e,t.type,n0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _4(e,t,r){(t!=="number"||c2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var $g=Array.isArray;function hm(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+n0(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function A4(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Wt(91));return Ka({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $A(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Wt(92));if($g(r)){if(1<r.length)throw Error(Wt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:n0(r)}}function DD(e,t){var r=n0(t.value),n=n0(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function UA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function LD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C4(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?LD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var My,FD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(My=My||document.createElement("div"),My.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=My.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nv(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lz=["Webkit","ms","Moz","O"];Object.keys(Yg).forEach(function(e){lz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yg[t]=Yg[e]})});function MD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yg.hasOwnProperty(e)&&Yg[e]?(""+t).trim():t+"px"}function RD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=MD(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var cz=Ka({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E4(e,t){if(t){if(cz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Wt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Wt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Wt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Wt(62))}}function T4(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O4=null;function US(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var P4=null,pm=null,mm=null;function zA(e){if(e=V1(e)){if(typeof P4!="function")throw Error(Wt(280));var t=e.stateNode;t&&(t=f5(t),P4(e.stateNode,e.type,t))}}function BD(e){pm?mm?mm.push(e):mm=[e]:pm=e}function $D(){if(pm){var e=pm,t=mm;if(mm=pm=null,zA(e),t)for(e=0;e<t.length;e++)zA(t[e])}}function UD(e,t){return e(t)}function zD(){}var WN=!1;function qD(e,t,r){if(WN)return e(t,r);WN=!0;try{return UD(e,t,r)}finally{WN=!1,(pm!==null||mm!==null)&&(zD(),$D())}}function jv(e,t){var r=e.stateNode;if(r===null)return null;var n=f5(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Wt(231,t,typeof r));return r}var I4=!1;if(Id)try{var ug={};Object.defineProperty(ug,"passive",{get:function(){I4=!0}}),window.addEventListener("test",ug,ug),window.removeEventListener("test",ug,ug)}catch{I4=!1}function uz(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Jg=!1,u2=null,d2=!1,D4=null,dz={onError:function(e){Jg=!0,u2=e}};function fz(e,t,r,n,s,i,o,l,c){Jg=!1,u2=null,uz.apply(dz,arguments)}function hz(e,t,r,n,s,i,o,l,c){if(fz.apply(this,arguments),Jg){if(Jg){var u=u2;Jg=!1,u2=null}else throw Error(Wt(198));d2||(d2=!0,D4=u)}}function Zh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function HD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qA(e){if(Zh(e)!==e)throw Error(Wt(188))}function pz(e){var t=e.alternate;if(!t){if(t=Zh(e),t===null)throw Error(Wt(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return qA(s),e;if(i===n)return qA(s),t;i=i.sibling}throw Error(Wt(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(Wt(189))}}if(r.alternate!==n)throw Error(Wt(190))}if(r.tag!==3)throw Error(Wt(188));return r.stateNode.current===r?e:t}function WD(e){return e=pz(e),e!==null?VD(e):null}function VD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VD(e);if(t!==null)return t;e=e.sibling}return null}var GD=El.unstable_scheduleCallback,HA=El.unstable_cancelCallback,mz=El.unstable_shouldYield,xz=El.unstable_requestPaint,ps=El.unstable_now,gz=El.unstable_getCurrentPriorityLevel,zS=El.unstable_ImmediatePriority,KD=El.unstable_UserBlockingPriority,f2=El.unstable_NormalPriority,vz=El.unstable_LowPriority,XD=El.unstable_IdlePriority,l5=null,Fu=null;function yz(e){if(Fu&&typeof Fu.onCommitFiberRoot=="function")try{Fu.onCommitFiberRoot(l5,e,void 0,(e.current.flags&128)===128)}catch{}}var Xc=Math.clz32?Math.clz32:Nz,bz=Math.log,wz=Math.LN2;function Nz(e){return e>>>=0,e===0?32:31-(bz(e)/wz|0)|0}var Ry=64,By=4194304;function Ug(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function h2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Ug(l):(i&=o,i!==0&&(n=Ug(i)))}else o=r&~s,o!==0?n=Ug(o):i!==0&&(n=Ug(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Xc(t),s=1<<r,n|=e[r],t&=~s;return n}function jz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kz(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xc(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=jz(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function L4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function YD(){var e=Ry;return Ry<<=1,!(Ry&4194240)&&(Ry=64),e}function VN(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function H1(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xc(t),e[t]=r}function Sz(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Xc(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function qS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Xc(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Qn=0;function JD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QD,HS,ZD,eL,tL,F4=!1,$y=[],Hf=null,Wf=null,Vf=null,kv=new Map,Sv=new Map,kf=[],_z="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WA(e,t){switch(e){case"focusin":case"focusout":Hf=null;break;case"dragenter":case"dragleave":Wf=null;break;case"mouseover":case"mouseout":Vf=null;break;case"pointerover":case"pointerout":kv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sv.delete(t.pointerId)}}function dg(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=V1(t),t!==null&&HS(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Az(e,t,r,n,s){switch(t){case"focusin":return Hf=dg(Hf,e,t,r,n,s),!0;case"dragenter":return Wf=dg(Wf,e,t,r,n,s),!0;case"mouseover":return Vf=dg(Vf,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return kv.set(i,dg(kv.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Sv.set(i,dg(Sv.get(i)||null,e,t,r,n,s)),!0}return!1}function rL(e){var t=th(e.target);if(t!==null){var r=Zh(t);if(r!==null){if(t=r.tag,t===13){if(t=HD(r),t!==null){e.blockedOn=t,tL(e.priority,function(){ZD(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ub(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=M4(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);O4=n,r.target.dispatchEvent(n),O4=null}else return t=V1(r),t!==null&&HS(t),e.blockedOn=r,!1;t.shift()}return!0}function VA(e,t,r){Ub(e)&&r.delete(t)}function Cz(){F4=!1,Hf!==null&&Ub(Hf)&&(Hf=null),Wf!==null&&Ub(Wf)&&(Wf=null),Vf!==null&&Ub(Vf)&&(Vf=null),kv.forEach(VA),Sv.forEach(VA)}function fg(e,t){e.blockedOn===t&&(e.blockedOn=null,F4||(F4=!0,El.unstable_scheduleCallback(El.unstable_NormalPriority,Cz)))}function _v(e){function t(s){return fg(s,e)}if(0<$y.length){fg($y[0],e);for(var r=1;r<$y.length;r++){var n=$y[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Hf!==null&&fg(Hf,e),Wf!==null&&fg(Wf,e),Vf!==null&&fg(Vf,e),kv.forEach(t),Sv.forEach(t),r=0;r<kf.length;r++)n=kf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<kf.length&&(r=kf[0],r.blockedOn===null);)rL(r),r.blockedOn===null&&kf.shift()}var xm=qd.ReactCurrentBatchConfig,p2=!0;function Ez(e,t,r,n){var s=Qn,i=xm.transition;xm.transition=null;try{Qn=1,WS(e,t,r,n)}finally{Qn=s,xm.transition=i}}function Tz(e,t,r,n){var s=Qn,i=xm.transition;xm.transition=null;try{Qn=4,WS(e,t,r,n)}finally{Qn=s,xm.transition=i}}function WS(e,t,r,n){if(p2){var s=M4(e,t,r,n);if(s===null)rj(e,t,n,m2,r),WA(e,n);else if(Az(s,e,t,r,n))n.stopPropagation();else if(WA(e,n),t&4&&-1<_z.indexOf(e)){for(;s!==null;){var i=V1(s);if(i!==null&&QD(i),i=M4(e,t,r,n),i===null&&rj(e,t,n,m2,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else rj(e,t,n,null,r)}}var m2=null;function M4(e,t,r,n){if(m2=null,e=US(n),e=th(e),e!==null)if(t=Zh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=HD(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return m2=e,null}function nL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gz()){case zS:return 1;case KD:return 4;case f2:case vz:return 16;case XD:return 536870912;default:return 16}default:return 16}}var Mf=null,VS=null,zb=null;function aL(){if(zb)return zb;var e,t=VS,r=t.length,n,s="value"in Mf?Mf.value:Mf.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return zb=s.slice(e,1<n?1-n:void 0)}function qb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Uy(){return!0}function GA(){return!1}function Il(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Uy:GA,this.isPropagationStopped=GA,this}return Ka(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Uy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Uy)},persist:function(){},isPersistent:Uy}),t}var kx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GS=Il(kx),W1=Ka({},kx,{view:0,detail:0}),Oz=Il(W1),GN,KN,hg,c5=Ka({},W1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hg&&(hg&&e.type==="mousemove"?(GN=e.screenX-hg.screenX,KN=e.screenY-hg.screenY):KN=GN=0,hg=e),GN)},movementY:function(e){return"movementY"in e?e.movementY:KN}}),KA=Il(c5),Pz=Ka({},c5,{dataTransfer:0}),Iz=Il(Pz),Dz=Ka({},W1,{relatedTarget:0}),XN=Il(Dz),Lz=Ka({},kx,{animationName:0,elapsedTime:0,pseudoElement:0}),Fz=Il(Lz),Mz=Ka({},kx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rz=Il(Mz),Bz=Ka({},kx,{data:0}),XA=Il(Bz),$z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zz[e])?!!t[e]:!1}function KS(){return qz}var Hz=Ka({},W1,{key:function(e){if(e.key){var t=$z[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KS,charCode:function(e){return e.type==="keypress"?qb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wz=Il(Hz),Vz=Ka({},c5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YA=Il(Vz),Gz=Ka({},W1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KS}),Kz=Il(Gz),Xz=Ka({},kx,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yz=Il(Xz),Jz=Ka({},c5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qz=Il(Jz),Zz=[9,13,27,32],XS=Id&&"CompositionEvent"in window,Qg=null;Id&&"documentMode"in document&&(Qg=document.documentMode);var eq=Id&&"TextEvent"in window&&!Qg,sL=Id&&(!XS||Qg&&8<Qg&&11>=Qg),JA=" ",QA=!1;function iL(e,t){switch(e){case"keyup":return Zz.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jp=!1;function tq(e,t){switch(e){case"compositionend":return oL(t);case"keypress":return t.which!==32?null:(QA=!0,JA);case"textInput":return e=t.data,e===JA&&QA?null:e;default:return null}}function rq(e,t){if(Jp)return e==="compositionend"||!XS&&iL(e,t)?(e=aL(),zb=VS=Mf=null,Jp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sL&&t.locale!=="ko"?null:t.data;default:return null}}var nq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nq[e.type]:t==="textarea"}function lL(e,t,r,n){BD(n),t=x2(t,"onChange"),0<t.length&&(r=new GS("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zg=null,Av=null;function aq(e){yL(e,0)}function u5(e){var t=em(e);if(PD(t))return e}function sq(e,t){if(e==="change")return t}var cL=!1;if(Id){var YN;if(Id){var JN="oninput"in document;if(!JN){var eC=document.createElement("div");eC.setAttribute("oninput","return;"),JN=typeof eC.oninput=="function"}YN=JN}else YN=!1;cL=YN&&(!document.documentMode||9<document.documentMode)}function tC(){Zg&&(Zg.detachEvent("onpropertychange",uL),Av=Zg=null)}function uL(e){if(e.propertyName==="value"&&u5(Av)){var t=[];lL(t,Av,e,US(e)),qD(aq,t)}}function iq(e,t,r){e==="focusin"?(tC(),Zg=t,Av=r,Zg.attachEvent("onpropertychange",uL)):e==="focusout"&&tC()}function oq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return u5(Av)}function lq(e,t){if(e==="click")return u5(t)}function cq(e,t){if(e==="input"||e==="change")return u5(t)}function uq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tu=typeof Object.is=="function"?Object.is:uq;function Cv(e,t){if(tu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!y4.call(t,s)||!tu(e[s],t[s]))return!1}return!0}function rC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nC(e,t){var r=rC(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rC(r)}}function dL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fL(){for(var e=window,t=c2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=c2(e.document)}return t}function YS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dq(e){var t=fL(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dL(r.ownerDocument.documentElement,r)){if(n!==null&&YS(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=nC(r,i);var o=nC(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fq=Id&&"documentMode"in document&&11>=document.documentMode,Qp=null,R4=null,ev=null,B4=!1;function aC(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;B4||Qp==null||Qp!==c2(n)||(n=Qp,"selectionStart"in n&&YS(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ev&&Cv(ev,n)||(ev=n,n=x2(R4,"onSelect"),0<n.length&&(t=new GS("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Qp)))}function zy(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Zp={animationend:zy("Animation","AnimationEnd"),animationiteration:zy("Animation","AnimationIteration"),animationstart:zy("Animation","AnimationStart"),transitionend:zy("Transition","TransitionEnd")},QN={},hL={};Id&&(hL=document.createElement("div").style,"AnimationEvent"in window||(delete Zp.animationend.animation,delete Zp.animationiteration.animation,delete Zp.animationstart.animation),"TransitionEvent"in window||delete Zp.transitionend.transition);function d5(e){if(QN[e])return QN[e];if(!Zp[e])return e;var t=Zp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hL)return QN[e]=t[r];return e}var pL=d5("animationend"),mL=d5("animationiteration"),xL=d5("animationstart"),gL=d5("transitionend"),vL=new Map,sC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function h0(e,t){vL.set(e,t),Qh(t,[e])}for(var ZN=0;ZN<sC.length;ZN++){var ej=sC[ZN],hq=ej.toLowerCase(),pq=ej[0].toUpperCase()+ej.slice(1);h0(hq,"on"+pq)}h0(pL,"onAnimationEnd");h0(mL,"onAnimationIteration");h0(xL,"onAnimationStart");h0("dblclick","onDoubleClick");h0("focusin","onFocus");h0("focusout","onBlur");h0(gL,"onTransitionEnd");qm("onMouseEnter",["mouseout","mouseover"]);qm("onMouseLeave",["mouseout","mouseover"]);qm("onPointerEnter",["pointerout","pointerover"]);qm("onPointerLeave",["pointerout","pointerover"]);Qh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mq=new Set("cancel close invalid load scroll toggle".split(" ").concat(zg));function iC(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,hz(n,t,void 0,e),e.currentTarget=null}function yL(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;iC(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;iC(s,l,u),i=c}}}if(d2)throw e=D4,d2=!1,D4=null,e}function Na(e,t){var r=t[H4];r===void 0&&(r=t[H4]=new Set);var n=e+"__bubble";r.has(n)||(bL(t,e,2,!1),r.add(n))}function tj(e,t,r){var n=0;t&&(n|=4),bL(r,e,n,t)}var qy="_reactListening"+Math.random().toString(36).slice(2);function Ev(e){if(!e[qy]){e[qy]=!0,AD.forEach(function(r){r!=="selectionchange"&&(mq.has(r)||tj(r,!1,e),tj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qy]||(t[qy]=!0,tj("selectionchange",!1,t))}}function bL(e,t,r,n){switch(nL(t)){case 1:var s=Ez;break;case 4:s=Tz;break;default:s=WS}r=s.bind(null,t,r,e),s=void 0,!I4||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function rj(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=th(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}qD(function(){var u=i,f=US(r),d=[];e:{var p=vL.get(e);if(p!==void 0){var h=GS,g=e;switch(e){case"keypress":if(qb(r)===0)break e;case"keydown":case"keyup":h=Wz;break;case"focusin":g="focus",h=XN;break;case"focusout":g="blur",h=XN;break;case"beforeblur":case"afterblur":h=XN;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=KA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Iz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Kz;break;case pL:case mL:case xL:h=Fz;break;case gL:h=Yz;break;case"scroll":h=Oz;break;case"wheel":h=Qz;break;case"copy":case"cut":case"paste":h=Rz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=YA}var x=(t&4)!==0,m=!x&&e==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,v!==null&&(b=jv(y,v),b!=null&&x.push(Tv(y,b,w)))),m)break;y=y.return}0<x.length&&(p=new h(p,g,null,r,f),d.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==O4&&(g=r.relatedTarget||r.fromElement)&&(th(g)||g[Dd]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=r.relatedTarget||r.toElement,h=u,g=g?th(g):null,g!==null&&(m=Zh(g),g!==m||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(x=KA,b="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=YA,b="onPointerLeave",v="onPointerEnter",y="pointer"),m=h==null?p:em(h),w=g==null?p:em(g),p=new x(b,y+"leave",h,r,f),p.target=m,p.relatedTarget=w,b=null,th(f)===u&&(x=new x(v,y+"enter",g,r,f),x.target=w,x.relatedTarget=m,b=x),m=b,h&&g)t:{for(x=h,v=g,y=0,w=x;w;w=Fp(w))y++;for(w=0,b=v;b;b=Fp(b))w++;for(;0<y-w;)x=Fp(x),y--;for(;0<w-y;)v=Fp(v),w--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=Fp(x),v=Fp(v)}x=null}else x=null;h!==null&&oC(d,p,h,x,!1),g!==null&&m!==null&&oC(d,m,g,x,!0)}}e:{if(p=u?em(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var N=sq;else if(ZA(p))if(cL)N=cq;else{N=oq;var S=iq}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=lq);if(N&&(N=N(e,u))){lL(d,N,r,f);break e}S&&S(e,p,u),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&_4(p,"number",p.value)}switch(S=u?em(u):window,e){case"focusin":(ZA(S)||S.contentEditable==="true")&&(Qp=S,R4=u,ev=null);break;case"focusout":ev=R4=Qp=null;break;case"mousedown":B4=!0;break;case"contextmenu":case"mouseup":case"dragend":B4=!1,aC(d,r,f);break;case"selectionchange":if(fq)break;case"keydown":case"keyup":aC(d,r,f)}var j;if(XS)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Jp?iL(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(sL&&r.locale!=="ko"&&(Jp||_!=="onCompositionStart"?_==="onCompositionEnd"&&Jp&&(j=aL()):(Mf=f,VS="value"in Mf?Mf.value:Mf.textContent,Jp=!0)),S=x2(u,_),0<S.length&&(_=new XA(_,e,null,r,f),d.push({event:_,listeners:S}),j?_.data=j:(j=oL(r),j!==null&&(_.data=j)))),(j=eq?tq(e,r):rq(e,r))&&(u=x2(u,"onBeforeInput"),0<u.length&&(f=new XA("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=j))}yL(d,t)})}function Tv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function x2(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jv(e,r),i!=null&&n.unshift(Tv(e,i,s)),i=jv(e,t),i!=null&&n.push(Tv(e,i,s))),e=e.return}return n}function Fp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oC(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=jv(r,i),c!=null&&o.unshift(Tv(r,c,l))):s||(c=jv(r,i),c!=null&&o.push(Tv(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var xq=/\r\n?/g,gq=/\u0000|\uFFFD/g;function lC(e){return(typeof e=="string"?e:""+e).replace(xq,`
`).replace(gq,"")}function Hy(e,t,r){if(t=lC(t),lC(e)!==t&&r)throw Error(Wt(425))}function g2(){}var $4=null,U4=null;function z4(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var q4=typeof setTimeout=="function"?setTimeout:void 0,vq=typeof clearTimeout=="function"?clearTimeout:void 0,cC=typeof Promise=="function"?Promise:void 0,yq=typeof queueMicrotask=="function"?queueMicrotask:typeof cC<"u"?function(e){return cC.resolve(null).then(e).catch(bq)}:q4;function bq(e){setTimeout(function(){throw e})}function nj(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),_v(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);_v(t)}function Gf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Sx=Math.random().toString(36).slice(2),Tu="__reactFiber$"+Sx,Ov="__reactProps$"+Sx,Dd="__reactContainer$"+Sx,H4="__reactEvents$"+Sx,wq="__reactListeners$"+Sx,Nq="__reactHandles$"+Sx;function th(e){var t=e[Tu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Dd]||r[Tu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=uC(e);e!==null;){if(r=e[Tu])return r;e=uC(e)}return t}e=r,r=e.parentNode}return null}function V1(e){return e=e[Tu]||e[Dd],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function em(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Wt(33))}function f5(e){return e[Ov]||null}var W4=[],tm=-1;function p0(e){return{current:e}}function Ca(e){0>tm||(e.current=W4[tm],W4[tm]=null,tm--)}function ma(e,t){tm++,W4[tm]=e.current,e.current=t}var a0={},eo=p0(a0),Yo=p0(!1),Ph=a0;function Hm(e,t){var r=e.type.contextTypes;if(!r)return a0;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Jo(e){return e=e.childContextTypes,e!=null}function v2(){Ca(Yo),Ca(eo)}function dC(e,t,r){if(eo.current!==a0)throw Error(Wt(168));ma(eo,t),ma(Yo,r)}function wL(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Wt(108,iz(e)||"Unknown",s));return Ka({},r,n)}function y2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||a0,Ph=eo.current,ma(eo,e),ma(Yo,Yo.current),!0}function fC(e,t,r){var n=e.stateNode;if(!n)throw Error(Wt(169));r?(e=wL(e,t,Ph),n.__reactInternalMemoizedMergedChildContext=e,Ca(Yo),Ca(eo),ma(eo,e)):Ca(Yo),ma(Yo,r)}var cd=null,h5=!1,aj=!1;function NL(e){cd===null?cd=[e]:cd.push(e)}function jq(e){h5=!0,NL(e)}function m0(){if(!aj&&cd!==null){aj=!0;var e=0,t=Qn;try{var r=cd;for(Qn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}cd=null,h5=!1}catch(s){throw cd!==null&&(cd=cd.slice(e+1)),GD(zS,m0),s}finally{Qn=t,aj=!1}}return null}var rm=[],nm=0,b2=null,w2=0,tc=[],rc=0,Ih=null,md=1,xd="";function G0(e,t){rm[nm++]=w2,rm[nm++]=b2,b2=e,w2=t}function jL(e,t,r){tc[rc++]=md,tc[rc++]=xd,tc[rc++]=Ih,Ih=e;var n=md;e=xd;var s=32-Xc(n)-1;n&=~(1<<s),r+=1;var i=32-Xc(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,md=1<<32-Xc(t)+s|r<<s|n,xd=i+e}else md=1<<i|r<<s|n,xd=e}function JS(e){e.return!==null&&(G0(e,1),jL(e,1,0))}function QS(e){for(;e===b2;)b2=rm[--nm],rm[nm]=null,w2=rm[--nm],rm[nm]=null;for(;e===Ih;)Ih=tc[--rc],tc[rc]=null,xd=tc[--rc],tc[rc]=null,md=tc[--rc],tc[rc]=null}var Al=null,Sl=null,La=!1,Hc=null;function kL(e,t){var r=ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hC(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Al=e,Sl=Gf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Al=e,Sl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ih!==null?{id:md,overflow:xd}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ac(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Al=e,Sl=null,!0):!1;default:return!1}}function V4(e){return(e.mode&1)!==0&&(e.flags&128)===0}function G4(e){if(La){var t=Sl;if(t){var r=t;if(!hC(e,t)){if(V4(e))throw Error(Wt(418));t=Gf(r.nextSibling);var n=Al;t&&hC(e,t)?kL(n,r):(e.flags=e.flags&-4097|2,La=!1,Al=e)}}else{if(V4(e))throw Error(Wt(418));e.flags=e.flags&-4097|2,La=!1,Al=e}}}function pC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Al=e}function Wy(e){if(e!==Al)return!1;if(!La)return pC(e),La=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!z4(e.type,e.memoizedProps)),t&&(t=Sl)){if(V4(e))throw SL(),Error(Wt(418));for(;t;)kL(e,t),t=Gf(t.nextSibling)}if(pC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Wt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Sl=Gf(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Sl=null}}else Sl=Al?Gf(e.stateNode.nextSibling):null;return!0}function SL(){for(var e=Sl;e;)e=Gf(e.nextSibling)}function Wm(){Sl=Al=null,La=!1}function ZS(e){Hc===null?Hc=[e]:Hc.push(e)}var kq=qd.ReactCurrentBatchConfig;function pg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Wt(309));var n=r.stateNode}if(!n)throw Error(Wt(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Wt(284));if(!r._owner)throw Error(Wt(290,e))}return e}function Vy(e,t){throw e=Object.prototype.toString.call(t),Error(Wt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mC(e){var t=e._init;return t(e._payload)}function _L(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=Jf(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,w,b){return y===null||y.tag!==6?(y=dj(w,v.mode,b),y.return=v,y):(y=s(y,w),y.return=v,y)}function c(v,y,w,b){var N=w.type;return N===Yp?f(v,y,w.props.children,b,w.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wf&&mC(N)===y.type)?(b=s(y,w.props),b.ref=pg(v,y,w),b.return=v,b):(b=Yb(w.type,w.key,w.props,null,v.mode,b),b.ref=pg(v,y,w),b.return=v,b)}function u(v,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=fj(w,v.mode,b),y.return=v,y):(y=s(y,w.children||[]),y.return=v,y)}function f(v,y,w,b,N){return y===null||y.tag!==7?(y=wh(w,v.mode,b,N),y.return=v,y):(y=s(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=dj(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ly:return w=Yb(y.type,y.key,y.props,null,v.mode,w),w.ref=pg(v,null,y),w.return=v,w;case Xp:return y=fj(y,v.mode,w),y.return=v,y;case wf:var b=y._init;return d(v,b(y._payload),w)}if($g(y)||cg(y))return y=wh(y,v.mode,w,null),y.return=v,y;Vy(v,y)}return null}function p(v,y,w,b){var N=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(v,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ly:return w.key===N?c(v,y,w,b):null;case Xp:return w.key===N?u(v,y,w,b):null;case wf:return N=w._init,p(v,y,N(w._payload),b)}if($g(w)||cg(w))return N!==null?null:f(v,y,w,b,null);Vy(v,w)}return null}function h(v,y,w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(w)||null,l(y,v,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ly:return v=v.get(b.key===null?w:b.key)||null,c(y,v,b,N);case Xp:return v=v.get(b.key===null?w:b.key)||null,u(y,v,b,N);case wf:var S=b._init;return h(v,y,w,S(b._payload),N)}if($g(b)||cg(b))return v=v.get(w)||null,f(y,v,b,N,null);Vy(y,b)}return null}function g(v,y,w,b){for(var N=null,S=null,j=y,_=y=0,E=null;j!==null&&_<w.length;_++){j.index>_?(E=j,j=null):E=j.sibling;var I=p(v,j,w[_],b);if(I===null){j===null&&(j=E);break}e&&j&&I.alternate===null&&t(v,j),y=i(I,y,_),S===null?N=I:S.sibling=I,S=I,j=E}if(_===w.length)return r(v,j),La&&G0(v,_),N;if(j===null){for(;_<w.length;_++)j=d(v,w[_],b),j!==null&&(y=i(j,y,_),S===null?N=j:S.sibling=j,S=j);return La&&G0(v,_),N}for(j=n(v,j);_<w.length;_++)E=h(j,v,_,w[_],b),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?_:E.key),y=i(E,y,_),S===null?N=E:S.sibling=E,S=E);return e&&j.forEach(function(A){return t(v,A)}),La&&G0(v,_),N}function x(v,y,w,b){var N=cg(w);if(typeof N!="function")throw Error(Wt(150));if(w=N.call(w),w==null)throw Error(Wt(151));for(var S=N=null,j=y,_=y=0,E=null,I=w.next();j!==null&&!I.done;_++,I=w.next()){j.index>_?(E=j,j=null):E=j.sibling;var A=p(v,j,I.value,b);if(A===null){j===null&&(j=E);break}e&&j&&A.alternate===null&&t(v,j),y=i(A,y,_),S===null?N=A:S.sibling=A,S=A,j=E}if(I.done)return r(v,j),La&&G0(v,_),N;if(j===null){for(;!I.done;_++,I=w.next())I=d(v,I.value,b),I!==null&&(y=i(I,y,_),S===null?N=I:S.sibling=I,S=I);return La&&G0(v,_),N}for(j=n(v,j);!I.done;_++,I=w.next())I=h(j,v,_,I.value,b),I!==null&&(e&&I.alternate!==null&&j.delete(I.key===null?_:I.key),y=i(I,y,_),S===null?N=I:S.sibling=I,S=I);return e&&j.forEach(function(C){return t(v,C)}),La&&G0(v,_),N}function m(v,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Yp&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ly:e:{for(var N=w.key,S=y;S!==null;){if(S.key===N){if(N=w.type,N===Yp){if(S.tag===7){r(v,S.sibling),y=s(S,w.props.children),y.return=v,v=y;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wf&&mC(N)===S.type){r(v,S.sibling),y=s(S,w.props),y.ref=pg(v,S,w),y.return=v,v=y;break e}r(v,S);break}else t(v,S);S=S.sibling}w.type===Yp?(y=wh(w.props.children,v.mode,b,w.key),y.return=v,v=y):(b=Yb(w.type,w.key,w.props,null,v.mode,b),b.ref=pg(v,y,w),b.return=v,v=b)}return o(v);case Xp:e:{for(S=w.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(v,y.sibling),y=s(y,w.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=fj(w,v.mode,b),y.return=v,v=y}return o(v);case wf:return S=w._init,m(v,y,S(w._payload),b)}if($g(w))return g(v,y,w,b);if(cg(w))return x(v,y,w,b);Vy(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(v,y.sibling),y=s(y,w),y.return=v,v=y):(r(v,y),y=dj(w,v.mode,b),y.return=v,v=y),o(v)):r(v,y)}return m}var Vm=_L(!0),AL=_L(!1),N2=p0(null),j2=null,am=null,e_=null;function t_(){e_=am=j2=null}function r_(e){var t=N2.current;Ca(N2),e._currentValue=t}function K4(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function gm(e,t){j2=e,e_=am=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ko=!0),e.firstContext=null)}function dc(e){var t=e._currentValue;if(e_!==e)if(e={context:e,memoizedValue:t,next:null},am===null){if(j2===null)throw Error(Wt(308));am=e,j2.dependencies={lanes:0,firstContext:e}}else am=am.next=e;return t}var rh=null;function n_(e){rh===null?rh=[e]:rh.push(e)}function CL(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,n_(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ld(e,n)}function Ld(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Nf=!1;function a_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kf(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Tn&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ld(e,r)}return s=n.interleaved,s===null?(t.next=t,n_(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ld(e,r)}function Hb(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,qS(e,r)}}function xC(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function k2(e,t,r,n){var s=e.updateQueue;Nf=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,f=u=c=null,l=i;do{var p=l.lane,h=l.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,x=l;switch(p=t,h=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){d=g.call(h,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,p=typeof g=="function"?g.call(h,d,p):g,p==null)break e;d=Ka({},d,p);break e;case 2:Nf=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=h,c=d):f=f.next=h,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Lh|=o,e.lanes=o,e.memoizedState=d}}function gC(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Wt(191,s));s.call(n)}}}var G1={},Mu=p0(G1),Pv=p0(G1),Iv=p0(G1);function nh(e){if(e===G1)throw Error(Wt(174));return e}function s_(e,t){switch(ma(Iv,t),ma(Pv,e),ma(Mu,G1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C4(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C4(t,e)}Ca(Mu),ma(Mu,t)}function Gm(){Ca(Mu),Ca(Pv),Ca(Iv)}function TL(e){nh(Iv.current);var t=nh(Mu.current),r=C4(t,e.type);t!==r&&(ma(Pv,e),ma(Mu,r))}function i_(e){Pv.current===e&&(Ca(Mu),Ca(Pv))}var Ua=p0(0);function S2(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sj=[];function o_(){for(var e=0;e<sj.length;e++)sj[e]._workInProgressVersionPrimary=null;sj.length=0}var Wb=qd.ReactCurrentDispatcher,ij=qd.ReactCurrentBatchConfig,Dh=0,Ga=null,$s=null,ii=null,_2=!1,tv=!1,Dv=0,Sq=0;function Fi(){throw Error(Wt(321))}function l_(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!tu(e[r],t[r]))return!1;return!0}function c_(e,t,r,n,s,i){if(Dh=i,Ga=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wb.current=e===null||e.memoizedState===null?Eq:Tq,e=r(n,s),tv){i=0;do{if(tv=!1,Dv=0,25<=i)throw Error(Wt(301));i+=1,ii=$s=null,t.updateQueue=null,Wb.current=Oq,e=r(n,s)}while(tv)}if(Wb.current=A2,t=$s!==null&&$s.next!==null,Dh=0,ii=$s=Ga=null,_2=!1,t)throw Error(Wt(300));return e}function u_(){var e=Dv!==0;return Dv=0,e}function Su(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Ga.memoizedState=ii=e:ii=ii.next=e,ii}function fc(){if($s===null){var e=Ga.alternate;e=e!==null?e.memoizedState:null}else e=$s.next;var t=ii===null?Ga.memoizedState:ii.next;if(t!==null)ii=t,$s=e;else{if(e===null)throw Error(Wt(310));$s=e,e={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},ii===null?Ga.memoizedState=ii=e:ii=ii.next=e}return ii}function Lv(e,t){return typeof t=="function"?t(e):t}function oj(e){var t=fc(),r=t.queue;if(r===null)throw Error(Wt(311));r.lastRenderedReducer=e;var n=$s,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var f=u.lane;if((Dh&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,Ga.lanes|=f,Lh|=f}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,tu(n,t.memoizedState)||(Ko=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ga.lanes|=i,Lh|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function lj(e){var t=fc(),r=t.queue;if(r===null)throw Error(Wt(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);tu(i,t.memoizedState)||(Ko=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function OL(){}function PL(e,t){var r=Ga,n=fc(),s=t(),i=!tu(n.memoizedState,s);if(i&&(n.memoizedState=s,Ko=!0),n=n.queue,d_(LL.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ii!==null&&ii.memoizedState.tag&1){if(r.flags|=2048,Fv(9,DL.bind(null,r,n,s,t),void 0,null),fi===null)throw Error(Wt(349));Dh&30||IL(r,t,s)}return s}function IL(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ga.updateQueue,t===null?(t={lastEffect:null,stores:null},Ga.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function DL(e,t,r,n){t.value=r,t.getSnapshot=n,FL(t)&&ML(e)}function LL(e,t,r){return r(function(){FL(t)&&ML(e)})}function FL(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tu(e,r)}catch{return!0}}function ML(e){var t=Ld(e,1);t!==null&&Yc(t,e,1,-1)}function vC(e){var t=Su();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lv,lastRenderedState:e},t.queue=e,e=e.dispatch=Cq.bind(null,Ga,e),[t.memoizedState,e]}function Fv(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ga.updateQueue,t===null?(t={lastEffect:null,stores:null},Ga.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function RL(){return fc().memoizedState}function Vb(e,t,r,n){var s=Su();Ga.flags|=e,s.memoizedState=Fv(1|t,r,void 0,n===void 0?null:n)}function p5(e,t,r,n){var s=fc();n=n===void 0?null:n;var i=void 0;if($s!==null){var o=$s.memoizedState;if(i=o.destroy,n!==null&&l_(n,o.deps)){s.memoizedState=Fv(t,r,i,n);return}}Ga.flags|=e,s.memoizedState=Fv(1|t,r,i,n)}function yC(e,t){return Vb(8390656,8,e,t)}function d_(e,t){return p5(2048,8,e,t)}function BL(e,t){return p5(4,2,e,t)}function $L(e,t){return p5(4,4,e,t)}function UL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zL(e,t,r){return r=r!=null?r.concat([e]):null,p5(4,4,UL.bind(null,t,e),r)}function f_(){}function qL(e,t){var r=fc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&l_(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function HL(e,t){var r=fc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&l_(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function WL(e,t,r){return Dh&21?(tu(r,t)||(r=YD(),Ga.lanes|=r,Lh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ko=!0),e.memoizedState=r)}function _q(e,t){var r=Qn;Qn=r!==0&&4>r?r:4,e(!0);var n=ij.transition;ij.transition={};try{e(!1),t()}finally{Qn=r,ij.transition=n}}function VL(){return fc().memoizedState}function Aq(e,t,r){var n=Yf(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},GL(e))KL(t,r);else if(r=CL(e,t,r,n),r!==null){var s=bo();Yc(r,e,n,s),XL(r,t,n)}}function Cq(e,t,r){var n=Yf(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(GL(e))KL(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,tu(l,o)){var c=t.interleaved;c===null?(s.next=s,n_(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=CL(e,t,s,n),r!==null&&(s=bo(),Yc(r,e,n,s),XL(r,t,n))}}function GL(e){var t=e.alternate;return e===Ga||t!==null&&t===Ga}function KL(e,t){tv=_2=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function XL(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,qS(e,r)}}var A2={readContext:dc,useCallback:Fi,useContext:Fi,useEffect:Fi,useImperativeHandle:Fi,useInsertionEffect:Fi,useLayoutEffect:Fi,useMemo:Fi,useReducer:Fi,useRef:Fi,useState:Fi,useDebugValue:Fi,useDeferredValue:Fi,useTransition:Fi,useMutableSource:Fi,useSyncExternalStore:Fi,useId:Fi,unstable_isNewReconciler:!1},Eq={readContext:dc,useCallback:function(e,t){return Su().memoizedState=[e,t===void 0?null:t],e},useContext:dc,useEffect:yC,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Vb(4194308,4,UL.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vb(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vb(4,2,e,t)},useMemo:function(e,t){var r=Su();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Su();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Aq.bind(null,Ga,e),[n.memoizedState,e]},useRef:function(e){var t=Su();return e={current:e},t.memoizedState=e},useState:vC,useDebugValue:f_,useDeferredValue:function(e){return Su().memoizedState=e},useTransition:function(){var e=vC(!1),t=e[0];return e=_q.bind(null,e[1]),Su().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ga,s=Su();if(La){if(r===void 0)throw Error(Wt(407));r=r()}else{if(r=t(),fi===null)throw Error(Wt(349));Dh&30||IL(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,yC(LL.bind(null,n,i,e),[e]),n.flags|=2048,Fv(9,DL.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Su(),t=fi.identifierPrefix;if(La){var r=xd,n=md;r=(n&~(1<<32-Xc(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Dv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Sq++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Tq={readContext:dc,useCallback:qL,useContext:dc,useEffect:d_,useImperativeHandle:zL,useInsertionEffect:BL,useLayoutEffect:$L,useMemo:HL,useReducer:oj,useRef:RL,useState:function(){return oj(Lv)},useDebugValue:f_,useDeferredValue:function(e){var t=fc();return WL(t,$s.memoizedState,e)},useTransition:function(){var e=oj(Lv)[0],t=fc().memoizedState;return[e,t]},useMutableSource:OL,useSyncExternalStore:PL,useId:VL,unstable_isNewReconciler:!1},Oq={readContext:dc,useCallback:qL,useContext:dc,useEffect:d_,useImperativeHandle:zL,useInsertionEffect:BL,useLayoutEffect:$L,useMemo:HL,useReducer:lj,useRef:RL,useState:function(){return lj(Lv)},useDebugValue:f_,useDeferredValue:function(e){var t=fc();return $s===null?t.memoizedState=e:WL(t,$s.memoizedState,e)},useTransition:function(){var e=lj(Lv)[0],t=fc().memoizedState;return[e,t]},useMutableSource:OL,useSyncExternalStore:PL,useId:VL,unstable_isNewReconciler:!1};function Rc(e,t){if(e&&e.defaultProps){t=Ka({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function X4(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ka({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var m5={isMounted:function(e){return(e=e._reactInternals)?Zh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=bo(),s=Yf(e),i=jd(n,s);i.payload=t,r!=null&&(i.callback=r),t=Kf(e,i,s),t!==null&&(Yc(t,e,s,n),Hb(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=bo(),s=Yf(e),i=jd(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Kf(e,i,s),t!==null&&(Yc(t,e,s,n),Hb(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bo(),n=Yf(e),s=jd(r,n);s.tag=2,t!=null&&(s.callback=t),t=Kf(e,s,n),t!==null&&(Yc(t,e,n,r),Hb(t,e,n))}};function bC(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Cv(r,n)||!Cv(s,i):!0}function YL(e,t,r){var n=!1,s=a0,i=t.contextType;return typeof i=="object"&&i!==null?i=dc(i):(s=Jo(t)?Ph:eo.current,n=t.contextTypes,i=(n=n!=null)?Hm(e,s):a0),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=m5,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function wC(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&m5.enqueueReplaceState(t,t.state,null)}function Y4(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},a_(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=dc(i):(i=Jo(t)?Ph:eo.current,s.context=Hm(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(X4(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&m5.enqueueReplaceState(s,s.state,null),k2(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Km(e,t){try{var r="",n=t;do r+=sz(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function cj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function J4(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Pq=typeof WeakMap=="function"?WeakMap:Map;function JL(e,t,r){r=jd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){E2||(E2=!0,ok=n),J4(e,t)},r}function QL(e,t,r){r=jd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){J4(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){J4(e,t),typeof n!="function"&&(Xf===null?Xf=new Set([this]):Xf.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function NC(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Pq;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Vq.bind(null,e,t,r),t.then(e,e))}function jC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kC(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=jd(-1,1),t.tag=2,Kf(r,t,1))),r.lanes|=1),e)}var Iq=qd.ReactCurrentOwner,Ko=!1;function ho(e,t,r,n){t.child=e===null?AL(t,null,r,n):Vm(t,e.child,r,n)}function SC(e,t,r,n,s){r=r.render;var i=t.ref;return gm(t,s),n=c_(e,t,r,n,i,s),r=u_(),e!==null&&!Ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fd(e,t,s)):(La&&r&&JS(t),t.flags|=1,ho(e,t,n,s),t.child)}function _C(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!b_(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ZL(e,t,i,n,s)):(e=Yb(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Cv,r(o,n)&&e.ref===t.ref)return Fd(e,t,s)}return t.flags|=1,e=Jf(i,n),e.ref=t.ref,e.return=t,t.child=e}function ZL(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Cv(i,n)&&e.ref===t.ref)if(Ko=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ko=!0);else return t.lanes=e.lanes,Fd(e,t,s)}return Q4(e,t,r,n,s)}function eF(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ma(im,gl),gl|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ma(im,gl),gl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ma(im,gl),gl|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ma(im,gl),gl|=n;return ho(e,t,s,r),t.child}function tF(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Q4(e,t,r,n,s){var i=Jo(r)?Ph:eo.current;return i=Hm(t,i),gm(t,s),r=c_(e,t,r,n,i,s),n=u_(),e!==null&&!Ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fd(e,t,s)):(La&&n&&JS(t),t.flags|=1,ho(e,t,r,s),t.child)}function AC(e,t,r,n,s){if(Jo(r)){var i=!0;y2(t)}else i=!1;if(gm(t,s),t.stateNode===null)Gb(e,t),YL(t,r,n),Y4(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=dc(u):(u=Jo(r)?Ph:eo.current,u=Hm(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&wC(t,o,n,u),Nf=!1;var p=t.memoizedState;o.state=p,k2(t,n,o,s),c=t.memoizedState,l!==n||p!==c||Yo.current||Nf?(typeof f=="function"&&(X4(t,r,f,n),c=t.memoizedState),(l=Nf||bC(t,r,l,n,p,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,EL(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Rc(t.type,l),o.props=u,d=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=dc(c):(c=Jo(r)?Ph:eo.current,c=Hm(t,c));var h=r.getDerivedStateFromProps;(f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||p!==c)&&wC(t,o,n,c),Nf=!1,p=t.memoizedState,o.state=p,k2(t,n,o,s);var g=t.memoizedState;l!==d||p!==g||Yo.current||Nf?(typeof h=="function"&&(X4(t,r,h,n),g=t.memoizedState),(u=Nf||bC(t,r,u,n,p,g,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Z4(e,t,r,n,i,s)}function Z4(e,t,r,n,s,i){tF(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&fC(t,r,!1),Fd(e,t,i);n=t.stateNode,Iq.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Vm(t,e.child,null,i),t.child=Vm(t,null,l,i)):ho(e,t,l,i),t.memoizedState=n.state,s&&fC(t,r,!0),t.child}function rF(e){var t=e.stateNode;t.pendingContext?dC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dC(e,t.context,!1),s_(e,t.containerInfo)}function CC(e,t,r,n,s){return Wm(),ZS(s),t.flags|=256,ho(e,t,r,n),t.child}var ek={dehydrated:null,treeContext:null,retryLane:0};function tk(e){return{baseLanes:e,cachePool:null,transitions:null}}function nF(e,t,r){var n=t.pendingProps,s=Ua.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ma(Ua,s&1),e===null)return G4(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=v5(o,n,0,null),e=wh(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=tk(r),t.memoizedState=ek,e):h_(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Dq(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Jf(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jf(l,i):(i=wh(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?tk(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ek,n}return i=e.child,e=i.sibling,n=Jf(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function h_(e,t){return t=v5({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gy(e,t,r,n){return n!==null&&ZS(n),Vm(t,e.child,null,r),e=h_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dq(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=cj(Error(Wt(422))),Gy(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=v5({mode:"visible",children:n.children},s,0,null),i=wh(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Vm(t,e.child,null,o),t.child.memoizedState=tk(o),t.memoizedState=ek,i);if(!(t.mode&1))return Gy(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Wt(419)),n=cj(i,n,void 0),Gy(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ko||l){if(n=fi,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ld(e,s),Yc(n,e,s,-1))}return y_(),n=cj(Error(Wt(421))),Gy(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Gq.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Sl=Gf(s.nextSibling),Al=t,La=!0,Hc=null,e!==null&&(tc[rc++]=md,tc[rc++]=xd,tc[rc++]=Ih,md=e.id,xd=e.overflow,Ih=t),t=h_(t,n.children),t.flags|=4096,t)}function EC(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),K4(e.return,t,r)}function uj(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function aF(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(ho(e,t,n.children,r),n=Ua.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&EC(e,r,t);else if(e.tag===19)EC(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ma(Ua,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&S2(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),uj(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&S2(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}uj(t,!0,r,null,i);break;case"together":uj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gb(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fd(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Lh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Wt(153));if(t.child!==null){for(e=t.child,r=Jf(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Jf(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Lq(e,t,r){switch(t.tag){case 3:rF(t),Wm();break;case 5:TL(t);break;case 1:Jo(t.type)&&y2(t);break;case 4:s_(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ma(N2,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ma(Ua,Ua.current&1),t.flags|=128,null):r&t.child.childLanes?nF(e,t,r):(ma(Ua,Ua.current&1),e=Fd(e,t,r),e!==null?e.sibling:null);ma(Ua,Ua.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return aF(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ma(Ua,Ua.current),n)break;return null;case 22:case 23:return t.lanes=0,eF(e,t,r)}return Fd(e,t,r)}var sF,rk,iF,oF;sF=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};rk=function(){};iF=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,nh(Mu.current);var i=null;switch(r){case"input":s=k4(e,s),n=k4(e,n),i=[];break;case"select":s=Ka({},s,{value:void 0}),n=Ka({},n,{value:void 0}),i=[];break;case"textarea":s=A4(e,s),n=A4(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=g2)}E4(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wv.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wv.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Na("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};oF=function(e,t,r,n){r!==n&&(t.flags|=4)};function mg(e,t){if(!La)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Mi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Fq(e,t,r){var n=t.pendingProps;switch(QS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(t),null;case 1:return Jo(t.type)&&v2(),Mi(t),null;case 3:return n=t.stateNode,Gm(),Ca(Yo),Ca(eo),o_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hc!==null&&(uk(Hc),Hc=null))),rk(e,t),Mi(t),null;case 5:i_(t);var s=nh(Iv.current);if(r=t.type,e!==null&&t.stateNode!=null)iF(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Wt(166));return Mi(t),null}if(e=nh(Mu.current),Wy(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Tu]=t,n[Ov]=i,e=(t.mode&1)!==0,r){case"dialog":Na("cancel",n),Na("close",n);break;case"iframe":case"object":case"embed":Na("load",n);break;case"video":case"audio":for(s=0;s<zg.length;s++)Na(zg[s],n);break;case"source":Na("error",n);break;case"img":case"image":case"link":Na("error",n),Na("load",n);break;case"details":Na("toggle",n);break;case"input":RA(n,i),Na("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Na("invalid",n);break;case"textarea":$A(n,i),Na("invalid",n)}E4(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Hy(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Hy(n.textContent,l,e),s=["children",""+l]):wv.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Na("scroll",n)}switch(r){case"input":Fy(n),BA(n,i,!0);break;case"textarea":Fy(n),UA(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=g2)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=LD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Tu]=t,e[Ov]=n,sF(e,t,!1,!1),t.stateNode=e;e:{switch(o=T4(r,n),r){case"dialog":Na("cancel",e),Na("close",e),s=n;break;case"iframe":case"object":case"embed":Na("load",e),s=n;break;case"video":case"audio":for(s=0;s<zg.length;s++)Na(zg[s],e);s=n;break;case"source":Na("error",e),s=n;break;case"img":case"image":case"link":Na("error",e),Na("load",e),s=n;break;case"details":Na("toggle",e),s=n;break;case"input":RA(e,n),s=k4(e,n),Na("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ka({},n,{value:void 0}),Na("invalid",e);break;case"textarea":$A(e,n),s=A4(e,n),Na("invalid",e);break;default:s=n}E4(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?RD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&FD(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Nv(e,c):typeof c=="number"&&Nv(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wv.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Na("scroll",e):c!=null&&MS(e,i,c,o))}switch(r){case"input":Fy(e),BA(e,n,!1);break;case"textarea":Fy(e),UA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+n0(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?hm(e,!!n.multiple,i,!1):n.defaultValue!=null&&hm(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=g2)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mi(t),null;case 6:if(e&&t.stateNode!=null)oF(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Wt(166));if(r=nh(Iv.current),nh(Mu.current),Wy(t)){if(n=t.stateNode,r=t.memoizedProps,n[Tu]=t,(i=n.nodeValue!==r)&&(e=Al,e!==null))switch(e.tag){case 3:Hy(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hy(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Tu]=t,t.stateNode=n}return Mi(t),null;case 13:if(Ca(Ua),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(La&&Sl!==null&&t.mode&1&&!(t.flags&128))SL(),Wm(),t.flags|=98560,i=!1;else if(i=Wy(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Wt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Wt(317));i[Tu]=t}else Wm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mi(t),i=!1}else Hc!==null&&(uk(Hc),Hc=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ua.current&1?Hs===0&&(Hs=3):y_())),t.updateQueue!==null&&(t.flags|=4),Mi(t),null);case 4:return Gm(),rk(e,t),e===null&&Ev(t.stateNode.containerInfo),Mi(t),null;case 10:return r_(t.type._context),Mi(t),null;case 17:return Jo(t.type)&&v2(),Mi(t),null;case 19:if(Ca(Ua),i=t.memoizedState,i===null)return Mi(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)mg(i,!1);else{if(Hs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=S2(e),o!==null){for(t.flags|=128,mg(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ma(Ua,Ua.current&1|2),t.child}e=e.sibling}i.tail!==null&&ps()>Xm&&(t.flags|=128,n=!0,mg(i,!1),t.lanes=4194304)}else{if(!n)if(e=S2(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mg(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!La)return Mi(t),null}else 2*ps()-i.renderingStartTime>Xm&&r!==1073741824&&(t.flags|=128,n=!0,mg(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ps(),t.sibling=null,r=Ua.current,ma(Ua,n?r&1|2:r&1),t):(Mi(t),null);case 22:case 23:return v_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?gl&1073741824&&(Mi(t),t.subtreeFlags&6&&(t.flags|=8192)):Mi(t),null;case 24:return null;case 25:return null}throw Error(Wt(156,t.tag))}function Mq(e,t){switch(QS(t),t.tag){case 1:return Jo(t.type)&&v2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gm(),Ca(Yo),Ca(eo),o_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return i_(t),null;case 13:if(Ca(Ua),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Wt(340));Wm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ca(Ua),null;case 4:return Gm(),null;case 10:return r_(t.type._context),null;case 22:case 23:return v_(),null;case 24:return null;default:return null}}var Ky=!1,Gi=!1,Rq=typeof WeakSet=="function"?WeakSet:Set,br=null;function sm(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ss(e,t,n)}else r.current=null}function nk(e,t,r){try{r()}catch(n){ss(e,t,n)}}var TC=!1;function Bq(e,t){if($4=p2,e=fL(),YS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==r||s!==0&&d.nodeType!==3||(l=o+s),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===r&&++u===s&&(l=o),p===i&&++f===n&&(c=o),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(U4={focusedElem:e,selectionRange:r},p2=!1,br=t;br!==null;)if(t=br,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,br=e;else for(;br!==null;){t=br;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,m=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:Rc(t.type,x),m);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Wt(163))}}catch(b){ss(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,br=e;break}br=t.return}return g=TC,TC=!1,g}function rv(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&nk(t,r,i)}s=s.next}while(s!==n)}}function x5(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ak(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function lF(e){var t=e.alternate;t!==null&&(e.alternate=null,lF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tu],delete t[Ov],delete t[H4],delete t[wq],delete t[Nq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cF(e){return e.tag===5||e.tag===3||e.tag===4}function OC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sk(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=g2));else if(n!==4&&(e=e.child,e!==null))for(sk(e,t,r),e=e.sibling;e!==null;)sk(e,t,r),e=e.sibling}function ik(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ik(e,t,r),e=e.sibling;e!==null;)ik(e,t,r),e=e.sibling}var bi=null,zc=!1;function pf(e,t,r){for(r=r.child;r!==null;)uF(e,t,r),r=r.sibling}function uF(e,t,r){if(Fu&&typeof Fu.onCommitFiberUnmount=="function")try{Fu.onCommitFiberUnmount(l5,r)}catch{}switch(r.tag){case 5:Gi||sm(r,t);case 6:var n=bi,s=zc;bi=null,pf(e,t,r),bi=n,zc=s,bi!==null&&(zc?(e=bi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):bi.removeChild(r.stateNode));break;case 18:bi!==null&&(zc?(e=bi,r=r.stateNode,e.nodeType===8?nj(e.parentNode,r):e.nodeType===1&&nj(e,r),_v(e)):nj(bi,r.stateNode));break;case 4:n=bi,s=zc,bi=r.stateNode.containerInfo,zc=!0,pf(e,t,r),bi=n,zc=s;break;case 0:case 11:case 14:case 15:if(!Gi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nk(r,t,o),s=s.next}while(s!==n)}pf(e,t,r);break;case 1:if(!Gi&&(sm(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ss(r,t,l)}pf(e,t,r);break;case 21:pf(e,t,r);break;case 22:r.mode&1?(Gi=(n=Gi)||r.memoizedState!==null,pf(e,t,r),Gi=n):pf(e,t,r);break;default:pf(e,t,r)}}function PC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Rq),t.forEach(function(n){var s=Kq.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Pc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:bi=l.stateNode,zc=!1;break e;case 3:bi=l.stateNode.containerInfo,zc=!0;break e;case 4:bi=l.stateNode.containerInfo,zc=!0;break e}l=l.return}if(bi===null)throw Error(Wt(160));uF(i,o,s),bi=null,zc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ss(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dF(t,e),t=t.sibling}function dF(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pc(t,e),vu(e),n&4){try{rv(3,e,e.return),x5(3,e)}catch(x){ss(e,e.return,x)}try{rv(5,e,e.return)}catch(x){ss(e,e.return,x)}}break;case 1:Pc(t,e),vu(e),n&512&&r!==null&&sm(r,r.return);break;case 5:if(Pc(t,e),vu(e),n&512&&r!==null&&sm(r,r.return),e.flags&32){var s=e.stateNode;try{Nv(s,"")}catch(x){ss(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ID(s,i),T4(l,o);var u=T4(l,i);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?RD(s,d):f==="dangerouslySetInnerHTML"?FD(s,d):f==="children"?Nv(s,d):MS(s,f,d,u)}switch(l){case"input":S4(s,i);break;case"textarea":DD(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?hm(s,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?hm(s,!!i.multiple,i.defaultValue,!0):hm(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ov]=i}catch(x){ss(e,e.return,x)}}break;case 6:if(Pc(t,e),vu(e),n&4){if(e.stateNode===null)throw Error(Wt(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){ss(e,e.return,x)}}break;case 3:if(Pc(t,e),vu(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{_v(t.containerInfo)}catch(x){ss(e,e.return,x)}break;case 4:Pc(t,e),vu(e);break;case 13:Pc(t,e),vu(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(x_=ps())),n&4&&PC(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Gi=(u=Gi)||f,Pc(t,e),Gi=u):Pc(t,e),vu(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(br=e,f=e.child;f!==null;){for(d=br=f;br!==null;){switch(p=br,h=p.child,p.tag){case 0:case 11:case 14:case 15:rv(4,p,p.return);break;case 1:sm(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){ss(n,r,x)}}break;case 5:sm(p,p.return);break;case 22:if(p.memoizedState!==null){DC(d);continue}}h!==null?(h.return=p,br=h):DC(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=MD("display",o))}catch(x){ss(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){ss(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Pc(t,e),vu(e),n&4&&PC(e);break;case 21:break;default:Pc(t,e),vu(e)}}function vu(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(cF(r)){var n=r;break e}r=r.return}throw Error(Wt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Nv(s,""),n.flags&=-33);var i=OC(e);ik(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=OC(e);sk(e,l,o);break;default:throw Error(Wt(161))}}catch(c){ss(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $q(e,t,r){br=e,fF(e)}function fF(e,t,r){for(var n=(e.mode&1)!==0;br!==null;){var s=br,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ky;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Gi;l=Ky;var u=Gi;if(Ky=o,(Gi=c)&&!u)for(br=s;br!==null;)o=br,c=o.child,o.tag===22&&o.memoizedState!==null?LC(s):c!==null?(c.return=o,br=c):LC(s);for(;i!==null;)br=i,fF(i),i=i.sibling;br=s,Ky=l,Gi=u}IC(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,br=i):IC(e)}}function IC(e){for(;br!==null;){var t=br;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gi||x5(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Gi)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Rc(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gC(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gC(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&_v(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Wt(163))}Gi||t.flags&512&&ak(t)}catch(p){ss(t,t.return,p)}}if(t===e){br=null;break}if(r=t.sibling,r!==null){r.return=t.return,br=r;break}br=t.return}}function DC(e){for(;br!==null;){var t=br;if(t===e){br=null;break}var r=t.sibling;if(r!==null){r.return=t.return,br=r;break}br=t.return}}function LC(e){for(;br!==null;){var t=br;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{x5(4,t)}catch(c){ss(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ss(t,s,c)}}var i=t.return;try{ak(t)}catch(c){ss(t,i,c)}break;case 5:var o=t.return;try{ak(t)}catch(c){ss(t,o,c)}}}catch(c){ss(t,t.return,c)}if(t===e){br=null;break}var l=t.sibling;if(l!==null){l.return=t.return,br=l;break}br=t.return}}var Uq=Math.ceil,C2=qd.ReactCurrentDispatcher,p_=qd.ReactCurrentOwner,ic=qd.ReactCurrentBatchConfig,Tn=0,fi=null,Ts=null,Si=0,gl=0,im=p0(0),Hs=0,Mv=null,Lh=0,g5=0,m_=0,nv=null,Vo=null,x_=0,Xm=1/0,ld=null,E2=!1,ok=null,Xf=null,Xy=!1,Rf=null,T2=0,av=0,lk=null,Kb=-1,Xb=0;function bo(){return Tn&6?ps():Kb!==-1?Kb:Kb=ps()}function Yf(e){return e.mode&1?Tn&2&&Si!==0?Si&-Si:kq.transition!==null?(Xb===0&&(Xb=YD()),Xb):(e=Qn,e!==0||(e=window.event,e=e===void 0?16:nL(e.type)),e):1}function Yc(e,t,r,n){if(50<av)throw av=0,lk=null,Error(Wt(185));H1(e,r,n),(!(Tn&2)||e!==fi)&&(e===fi&&(!(Tn&2)&&(g5|=r),Hs===4&&Sf(e,Si)),Qo(e,n),r===1&&Tn===0&&!(t.mode&1)&&(Xm=ps()+500,h5&&m0()))}function Qo(e,t){var r=e.callbackNode;kz(e,t);var n=h2(e,e===fi?Si:0);if(n===0)r!==null&&HA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&HA(r),t===1)e.tag===0?jq(FC.bind(null,e)):NL(FC.bind(null,e)),yq(function(){!(Tn&6)&&m0()}),r=null;else{switch(JD(n)){case 1:r=zS;break;case 4:r=KD;break;case 16:r=f2;break;case 536870912:r=XD;break;default:r=f2}r=bF(r,hF.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hF(e,t){if(Kb=-1,Xb=0,Tn&6)throw Error(Wt(327));var r=e.callbackNode;if(vm()&&e.callbackNode!==r)return null;var n=h2(e,e===fi?Si:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=O2(e,n);else{t=n;var s=Tn;Tn|=2;var i=mF();(fi!==e||Si!==t)&&(ld=null,Xm=ps()+500,bh(e,t));do try{Hq();break}catch(l){pF(e,l)}while(!0);t_(),C2.current=i,Tn=s,Ts!==null?t=0:(fi=null,Si=0,t=Hs)}if(t!==0){if(t===2&&(s=L4(e),s!==0&&(n=s,t=ck(e,s))),t===1)throw r=Mv,bh(e,0),Sf(e,n),Qo(e,ps()),r;if(t===6)Sf(e,n);else{if(s=e.current.alternate,!(n&30)&&!zq(s)&&(t=O2(e,n),t===2&&(i=L4(e),i!==0&&(n=i,t=ck(e,i))),t===1))throw r=Mv,bh(e,0),Sf(e,n),Qo(e,ps()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Wt(345));case 2:K0(e,Vo,ld);break;case 3:if(Sf(e,n),(n&130023424)===n&&(t=x_+500-ps(),10<t)){if(h2(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){bo(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=q4(K0.bind(null,e,Vo,ld),t);break}K0(e,Vo,ld);break;case 4:if(Sf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Xc(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ps()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Uq(n/1960))-n,10<n){e.timeoutHandle=q4(K0.bind(null,e,Vo,ld),n);break}K0(e,Vo,ld);break;case 5:K0(e,Vo,ld);break;default:throw Error(Wt(329))}}}return Qo(e,ps()),e.callbackNode===r?hF.bind(null,e):null}function ck(e,t){var r=nv;return e.current.memoizedState.isDehydrated&&(bh(e,t).flags|=256),e=O2(e,t),e!==2&&(t=Vo,Vo=r,t!==null&&uk(t)),e}function uk(e){Vo===null?Vo=e:Vo.push.apply(Vo,e)}function zq(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!tu(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sf(e,t){for(t&=~m_,t&=~g5,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Xc(t),n=1<<r;e[r]=-1,t&=~n}}function FC(e){if(Tn&6)throw Error(Wt(327));vm();var t=h2(e,0);if(!(t&1))return Qo(e,ps()),null;var r=O2(e,t);if(e.tag!==0&&r===2){var n=L4(e);n!==0&&(t=n,r=ck(e,n))}if(r===1)throw r=Mv,bh(e,0),Sf(e,t),Qo(e,ps()),r;if(r===6)throw Error(Wt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,K0(e,Vo,ld),Qo(e,ps()),null}function g_(e,t){var r=Tn;Tn|=1;try{return e(t)}finally{Tn=r,Tn===0&&(Xm=ps()+500,h5&&m0())}}function Fh(e){Rf!==null&&Rf.tag===0&&!(Tn&6)&&vm();var t=Tn;Tn|=1;var r=ic.transition,n=Qn;try{if(ic.transition=null,Qn=1,e)return e()}finally{Qn=n,ic.transition=r,Tn=t,!(Tn&6)&&m0()}}function v_(){gl=im.current,Ca(im)}function bh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,vq(r)),Ts!==null)for(r=Ts.return;r!==null;){var n=r;switch(QS(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&v2();break;case 3:Gm(),Ca(Yo),Ca(eo),o_();break;case 5:i_(n);break;case 4:Gm();break;case 13:Ca(Ua);break;case 19:Ca(Ua);break;case 10:r_(n.type._context);break;case 22:case 23:v_()}r=r.return}if(fi=e,Ts=e=Jf(e.current,null),Si=gl=t,Hs=0,Mv=null,m_=g5=Lh=0,Vo=nv=null,rh!==null){for(t=0;t<rh.length;t++)if(r=rh[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}rh=null}return e}function pF(e,t){do{var r=Ts;try{if(t_(),Wb.current=A2,_2){for(var n=Ga.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_2=!1}if(Dh=0,ii=$s=Ga=null,tv=!1,Dv=0,p_.current=null,r===null||r.return===null){Hs=1,Mv=t,Ts=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Si,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=jC(o);if(h!==null){h.flags&=-257,kC(h,o,l,i,t),h.mode&1&&NC(i,u,t),t=h,c=u;var g=t.updateQueue;if(g===null){var x=new Set;x.add(c),t.updateQueue=x}else g.add(c);break e}else{if(!(t&1)){NC(i,u,t),y_();break e}c=Error(Wt(426))}}else if(La&&l.mode&1){var m=jC(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),kC(m,o,l,i,t),ZS(Km(c,l));break e}}i=c=Km(c,l),Hs!==4&&(Hs=2),nv===null?nv=[i]:nv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=JL(i,c,t);xC(i,v);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xf===null||!Xf.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=QL(i,l,t);xC(i,b);break e}}i=i.return}while(i!==null)}gF(r)}catch(N){t=N,Ts===r&&r!==null&&(Ts=r=r.return);continue}break}while(!0)}function mF(){var e=C2.current;return C2.current=A2,e===null?A2:e}function y_(){(Hs===0||Hs===3||Hs===2)&&(Hs=4),fi===null||!(Lh&268435455)&&!(g5&268435455)||Sf(fi,Si)}function O2(e,t){var r=Tn;Tn|=2;var n=mF();(fi!==e||Si!==t)&&(ld=null,bh(e,t));do try{qq();break}catch(s){pF(e,s)}while(!0);if(t_(),Tn=r,C2.current=n,Ts!==null)throw Error(Wt(261));return fi=null,Si=0,Hs}function qq(){for(;Ts!==null;)xF(Ts)}function Hq(){for(;Ts!==null&&!mz();)xF(Ts)}function xF(e){var t=yF(e.alternate,e,gl);e.memoizedProps=e.pendingProps,t===null?gF(e):Ts=t,p_.current=null}function gF(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Mq(r,t),r!==null){r.flags&=32767,Ts=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Hs=6,Ts=null;return}}else if(r=Fq(r,t,gl),r!==null){Ts=r;return}if(t=t.sibling,t!==null){Ts=t;return}Ts=t=e}while(t!==null);Hs===0&&(Hs=5)}function K0(e,t,r){var n=Qn,s=ic.transition;try{ic.transition=null,Qn=1,Wq(e,t,r,n)}finally{ic.transition=s,Qn=n}return null}function Wq(e,t,r,n){do vm();while(Rf!==null);if(Tn&6)throw Error(Wt(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Wt(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Sz(e,i),e===fi&&(Ts=fi=null,Si=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xy||(Xy=!0,bF(f2,function(){return vm(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ic.transition,ic.transition=null;var o=Qn;Qn=1;var l=Tn;Tn|=4,p_.current=null,Bq(e,r),dF(r,e),dq(U4),p2=!!$4,U4=$4=null,e.current=r,$q(r),xz(),Tn=l,Qn=o,ic.transition=i}else e.current=r;if(Xy&&(Xy=!1,Rf=e,T2=s),i=e.pendingLanes,i===0&&(Xf=null),yz(r.stateNode),Qo(e,ps()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(E2)throw E2=!1,e=ok,ok=null,e;return T2&1&&e.tag!==0&&vm(),i=e.pendingLanes,i&1?e===lk?av++:(av=0,lk=e):av=0,m0(),null}function vm(){if(Rf!==null){var e=JD(T2),t=ic.transition,r=Qn;try{if(ic.transition=null,Qn=16>e?16:e,Rf===null)var n=!1;else{if(e=Rf,Rf=null,T2=0,Tn&6)throw Error(Wt(331));var s=Tn;for(Tn|=4,br=e.current;br!==null;){var i=br,o=i.child;if(br.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(br=u;br!==null;){var f=br;switch(f.tag){case 0:case 11:case 15:rv(8,f,i)}var d=f.child;if(d!==null)d.return=f,br=d;else for(;br!==null;){f=br;var p=f.sibling,h=f.return;if(lF(f),f===u){br=null;break}if(p!==null){p.return=h,br=p;break}br=h}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var m=x.sibling;x.sibling=null,x=m}while(x!==null)}}br=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,br=o;else e:for(;br!==null;){if(i=br,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rv(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,br=v;break e}br=i.return}}var y=e.current;for(br=y;br!==null;){o=br;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,br=w;else e:for(o=y;br!==null;){if(l=br,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:x5(9,l)}}catch(N){ss(l,l.return,N)}if(l===o){br=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,br=b;break e}br=l.return}}if(Tn=s,m0(),Fu&&typeof Fu.onPostCommitFiberRoot=="function")try{Fu.onPostCommitFiberRoot(l5,e)}catch{}n=!0}return n}finally{Qn=r,ic.transition=t}}return!1}function MC(e,t,r){t=Km(r,t),t=JL(e,t,1),e=Kf(e,t,1),t=bo(),e!==null&&(H1(e,1,t),Qo(e,t))}function ss(e,t,r){if(e.tag===3)MC(e,e,r);else for(;t!==null;){if(t.tag===3){MC(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xf===null||!Xf.has(n))){e=Km(r,e),e=QL(t,e,1),t=Kf(t,e,1),e=bo(),t!==null&&(H1(t,1,e),Qo(t,e));break}}t=t.return}}function Vq(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=bo(),e.pingedLanes|=e.suspendedLanes&r,fi===e&&(Si&r)===r&&(Hs===4||Hs===3&&(Si&130023424)===Si&&500>ps()-x_?bh(e,0):m_|=r),Qo(e,t)}function vF(e,t){t===0&&(e.mode&1?(t=By,By<<=1,!(By&130023424)&&(By=4194304)):t=1);var r=bo();e=Ld(e,t),e!==null&&(H1(e,t,r),Qo(e,r))}function Gq(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vF(e,r)}function Kq(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Wt(314))}n!==null&&n.delete(t),vF(e,r)}var yF;yF=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yo.current)Ko=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ko=!1,Lq(e,t,r);Ko=!!(e.flags&131072)}else Ko=!1,La&&t.flags&1048576&&jL(t,w2,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Gb(e,t),e=t.pendingProps;var s=Hm(t,eo.current);gm(t,r),s=c_(null,t,n,e,s,r);var i=u_();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jo(n)?(i=!0,y2(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,a_(t),s.updater=m5,t.stateNode=s,s._reactInternals=t,Y4(t,n,e,r),t=Z4(null,t,n,!0,i,r)):(t.tag=0,La&&i&&JS(t),ho(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Gb(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Yq(n),e=Rc(n,e),s){case 0:t=Q4(null,t,n,e,r);break e;case 1:t=AC(null,t,n,e,r);break e;case 11:t=SC(null,t,n,e,r);break e;case 14:t=_C(null,t,n,Rc(n.type,e),r);break e}throw Error(Wt(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),Q4(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),AC(e,t,n,s,r);case 3:e:{if(rF(t),e===null)throw Error(Wt(387));n=t.pendingProps,i=t.memoizedState,s=i.element,EL(e,t),k2(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Km(Error(Wt(423)),t),t=CC(e,t,n,r,s);break e}else if(n!==s){s=Km(Error(Wt(424)),t),t=CC(e,t,n,r,s);break e}else for(Sl=Gf(t.stateNode.containerInfo.firstChild),Al=t,La=!0,Hc=null,r=AL(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wm(),n===s){t=Fd(e,t,r);break e}ho(e,t,n,r)}t=t.child}return t;case 5:return TL(t),e===null&&G4(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,z4(n,s)?o=null:i!==null&&z4(n,i)&&(t.flags|=32),tF(e,t),ho(e,t,o,r),t.child;case 6:return e===null&&G4(t),null;case 13:return nF(e,t,r);case 4:return s_(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Vm(t,null,n,r):ho(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),SC(e,t,n,s,r);case 7:return ho(e,t,t.pendingProps,r),t.child;case 8:return ho(e,t,t.pendingProps.children,r),t.child;case 12:return ho(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ma(N2,n._currentValue),n._currentValue=o,i!==null)if(tu(i.value,o)){if(i.children===s.children&&!Yo.current){t=Fd(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=jd(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),K4(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Wt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),K4(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ho(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,gm(t,r),s=dc(s),n=n(s),t.flags|=1,ho(e,t,n,r),t.child;case 14:return n=t.type,s=Rc(n,t.pendingProps),s=Rc(n.type,s),_C(e,t,n,s,r);case 15:return ZL(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),Gb(e,t),t.tag=1,Jo(n)?(e=!0,y2(t)):e=!1,gm(t,r),YL(t,n,s),Y4(t,n,s,r),Z4(null,t,n,!0,e,r);case 19:return aF(e,t,r);case 22:return eF(e,t,r)}throw Error(Wt(156,t.tag))};function bF(e,t){return GD(e,t)}function Xq(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ac(e,t,r,n){return new Xq(e,t,r,n)}function b_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yq(e){if(typeof e=="function")return b_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===BS)return 11;if(e===$S)return 14}return 2}function Jf(e,t){var r=e.alternate;return r===null?(r=ac(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Yb(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")b_(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yp:return wh(r.children,s,i,t);case RS:o=8,s|=8;break;case b4:return e=ac(12,r,t,s|2),e.elementType=b4,e.lanes=i,e;case w4:return e=ac(13,r,t,s),e.elementType=w4,e.lanes=i,e;case N4:return e=ac(19,r,t,s),e.elementType=N4,e.lanes=i,e;case TD:return v5(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CD:o=10;break e;case ED:o=9;break e;case BS:o=11;break e;case $S:o=14;break e;case wf:o=16,n=null;break e}throw Error(Wt(130,e==null?e:typeof e,""))}return t=ac(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function wh(e,t,r,n){return e=ac(7,e,n,t),e.lanes=r,e}function v5(e,t,r,n){return e=ac(22,e,n,t),e.elementType=TD,e.lanes=r,e.stateNode={isHidden:!1},e}function dj(e,t,r){return e=ac(6,e,null,t),e.lanes=r,e}function fj(e,t,r){return t=ac(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jq(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=VN(0),this.expirationTimes=VN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=VN(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function w_(e,t,r,n,s,i,o,l,c){return e=new Jq(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},a_(i),e}function Qq(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function wF(e){if(!e)return a0;e=e._reactInternals;e:{if(Zh(e)!==e||e.tag!==1)throw Error(Wt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Wt(171))}if(e.tag===1){var r=e.type;if(Jo(r))return wL(e,r,t)}return t}function NF(e,t,r,n,s,i,o,l,c){return e=w_(r,n,!0,e,s,i,o,l,c),e.context=wF(null),r=e.current,n=bo(),s=Yf(r),i=jd(n,s),i.callback=t??null,Kf(r,i,s),e.current.lanes=s,H1(e,s,n),Qo(e,n),e}function y5(e,t,r,n){var s=t.current,i=bo(),o=Yf(s);return r=wF(r),t.context===null?t.context=r:t.pendingContext=r,t=jd(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Kf(s,t,o),e!==null&&(Yc(e,s,o,i),Hb(e,s,o)),o}function P2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function RC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function N_(e,t){RC(e,t),(e=e.alternate)&&RC(e,t)}function Zq(){return null}var jF=typeof reportError=="function"?reportError:function(e){console.error(e)};function j_(e){this._internalRoot=e}b5.prototype.render=j_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Wt(409));y5(e,t,null,null)};b5.prototype.unmount=j_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fh(function(){y5(null,e,null,null)}),t[Dd]=null}};function b5(e){this._internalRoot=e}b5.prototype.unstable_scheduleHydration=function(e){if(e){var t=eL();e={blockedOn:null,target:e,priority:t};for(var r=0;r<kf.length&&t!==0&&t<kf[r].priority;r++);kf.splice(r,0,e),r===0&&rL(e)}};function k_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function w5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function BC(){}function eH(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=P2(o);i.call(u)}}var o=NF(t,n,e,0,null,!1,!1,"",BC);return e._reactRootContainer=o,e[Dd]=o.current,Ev(e.nodeType===8?e.parentNode:e),Fh(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=P2(c);l.call(u)}}var c=w_(e,0,!1,null,null,!1,!1,"",BC);return e._reactRootContainer=c,e[Dd]=c.current,Ev(e.nodeType===8?e.parentNode:e),Fh(function(){y5(t,c,r,n)}),c}function N5(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=P2(o);l.call(c)}}y5(t,o,e,s)}else o=eH(r,t,e,s,n);return P2(o)}QD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ug(t.pendingLanes);r!==0&&(qS(t,r|1),Qo(t,ps()),!(Tn&6)&&(Xm=ps()+500,m0()))}break;case 13:Fh(function(){var n=Ld(e,1);if(n!==null){var s=bo();Yc(n,e,1,s)}}),N_(e,1)}};HS=function(e){if(e.tag===13){var t=Ld(e,134217728);if(t!==null){var r=bo();Yc(t,e,134217728,r)}N_(e,134217728)}};ZD=function(e){if(e.tag===13){var t=Yf(e),r=Ld(e,t);if(r!==null){var n=bo();Yc(r,e,t,n)}N_(e,t)}};eL=function(){return Qn};tL=function(e,t){var r=Qn;try{return Qn=e,t()}finally{Qn=r}};P4=function(e,t,r){switch(t){case"input":if(S4(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=f5(n);if(!s)throw Error(Wt(90));PD(n),S4(n,s)}}}break;case"textarea":DD(e,r);break;case"select":t=r.value,t!=null&&hm(e,!!r.multiple,t,!1)}};UD=g_;zD=Fh;var tH={usingClientEntryPoint:!1,Events:[V1,em,f5,BD,$D,g_]},xg={findFiberByHostInstance:th,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rH={bundleType:xg.bundleType,version:xg.version,rendererPackageName:xg.rendererPackageName,rendererConfig:xg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=WD(e),e===null?null:e.stateNode},findFiberByHostInstance:xg.findFiberByHostInstance||Zq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yy.isDisabled&&Yy.supportsFiber)try{l5=Yy.inject(rH),Fu=Yy}catch{}}Pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tH;Pl.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k_(t))throw Error(Wt(200));return Qq(e,t,null,r)};Pl.createRoot=function(e,t){if(!k_(e))throw Error(Wt(299));var r=!1,n="",s=jF;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=w_(e,1,!1,null,null,r,!1,n,s),e[Dd]=t.current,Ev(e.nodeType===8?e.parentNode:e),new j_(t)};Pl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Wt(188)):(e=Object.keys(e).join(","),Error(Wt(268,e)));return e=WD(t),e=e===null?null:e.stateNode,e};Pl.flushSync=function(e){return Fh(e)};Pl.hydrate=function(e,t,r){if(!w5(t))throw Error(Wt(200));return N5(null,e,t,!0,r)};Pl.hydrateRoot=function(e,t,r){if(!k_(e))throw Error(Wt(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=jF;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=NF(t,null,e,1,r??null,s,!1,i,o),e[Dd]=t.current,Ev(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new b5(t)};Pl.render=function(e,t,r){if(!w5(t))throw Error(Wt(200));return N5(null,e,t,!1,r)};Pl.unmountComponentAtNode=function(e){if(!w5(e))throw Error(Wt(40));return e._reactRootContainer?(Fh(function(){N5(null,null,e,!1,function(){e._reactRootContainer=null,e[Dd]=null})}),!0):!1};Pl.unstable_batchedUpdates=g_;Pl.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!w5(r))throw Error(Wt(200));if(e==null||e._reactInternals===void 0)throw Error(Wt(38));return N5(e,t,r,!1,n)};Pl.version="18.3.1-next-f1338f8080-20240426";function kF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kF)}catch(e){console.error(e)}}kF(),kD.exports=Pl;var SF=kD.exports,$C=SF;v4.createRoot=$C.createRoot,v4.hydrateRoot=$C.hydrateRoot;const nH="modulepreload",aH=function(e){return"/"+e},UC={},I2=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=aH(c),c in UC)return;UC[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":nH,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_F=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=D.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>D.createElement("svg",{ref:c,...iH,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:_F("lucide",s),...l},[...o.map(([u,f])=>D.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(e,t)=>{const r=D.forwardRef(({className:n,...s},i)=>D.createElement(oH,{ref:i,iconNode:t,className:_F(`lucide-${sH(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=_t("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=_t("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=_t("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=_t("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=_t("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=_t("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=_t("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=_t("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=_t("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=_t("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=_t("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=_t("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=_t("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=_t("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=_t("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=_t("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=_t("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=_t("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=_t("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=_t("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=_t("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=_t("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=_t("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=_t("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=_t("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=_t("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=_t("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=_t("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=_t("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=_t("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=_t("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=_t("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=_t("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=_t("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=_t("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=_t("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=_t("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=_t("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=_t("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=_t("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=_t("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=_t("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=_t("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=_t("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=_t("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=_t("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=_t("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=_t("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=_t("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=_t("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=_t("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=_t("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=_t("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=_t("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=_t("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=_t("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=_t("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=_t("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=_t("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=_t("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=_t("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=_t("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=_t("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=_t("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=_t("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=_t("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=_t("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=_t("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=_t("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=_t("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=_t("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=_t("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=_t("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=_t("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=_t("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=_t("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=_t("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=_t("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=_t("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=_t("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=_t("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=_t("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=_t("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=_t("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=_t("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=_t("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=_t("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=_t("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=_t("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=_t("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=_t("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=_t("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=_t("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=_t("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=_t("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=_t("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=_t("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=_t("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=_t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=_t("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=_t("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=_t("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=_t("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=_t("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=_t("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=_t("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=_t("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=_t("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=_t("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=_t("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=_t("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=_t("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=_t("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=_t("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=_t("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=_t("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=_t("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=_t("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=_t("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=_t("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=_t("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=_t("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=_t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=_t("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),zH=[{id:"dashboard",label:"Dashboard",icon:a.jsx(NH,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:a.jsx($n,{className:"w-5 h-5"})},{id:"inbox",label:"Shared Inbox",icon:a.jsx(xa,{className:"w-5 h-5"})},{id:"crm",label:"CRM",icon:a.jsx(Zf,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:a.jsx(oc,{className:"w-5 h-5"})},{id:"projects",label:"Projects",icon:a.jsx(pa,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:a.jsx(Sd,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:a.jsx(wo,{className:"w-5 h-5"})},{id:"invoices",label:"Billing & Invoicing",icon:a.jsx(Md,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:a.jsx(gk,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:a.jsx(sv,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:a.jsx(Qb,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:a.jsx(Zb,{className:"w-5 h-5"})},{id:"integrations",label:"Integrations",icon:a.jsx(F2,{className:"w-5 h-5"})}],t2=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],eb=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],qH=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,n=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(n+s/60)},iv=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],yg=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(iv.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),u=`UTC${t>=0?"+":"-"}${o}:${l}`;if(iv.find(f=>f.value===u))return u}const n=t;let s="UTC+0",i=1/0;return iv.forEach(o=>{const l=qH(o.value),c=Math.abs(l-n);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},KC=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function LF(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=LF(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Pn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=LF(e))&&(n&&(n+=" "),n+=t);return n}var HH=Array.isArray,tl=HH,WH=typeof kl=="object"&&kl&&kl.Object===Object&&kl,FF=WH,VH=FF,GH=typeof self=="object"&&self&&self.Object===Object&&self,KH=VH||GH||Function("return this")(),Gu=KH,XH=Gu,YH=XH.Symbol,K1=YH,XC=K1,MF=Object.prototype,JH=MF.hasOwnProperty,QH=MF.toString,bg=XC?XC.toStringTag:void 0;function ZH(e){var t=JH.call(e,bg),r=e[bg];try{e[bg]=void 0;var n=!0}catch{}var s=QH.call(e);return n&&(t?e[bg]=r:delete e[bg]),s}var eW=ZH,tW=Object.prototype,rW=tW.toString;function nW(e){return rW.call(e)}var aW=nW,YC=K1,sW=eW,iW=aW,oW="[object Null]",lW="[object Undefined]",JC=YC?YC.toStringTag:void 0;function cW(e){return e==null?e===void 0?lW:oW:JC&&JC in Object(e)?sW(e):iW(e)}var Hd=cW;function uW(e){return e!=null&&typeof e=="object"}var Wd=uW,dW=Hd,fW=Wd,hW="[object Symbol]";function pW(e){return typeof e=="symbol"||fW(e)&&dW(e)==hW}var _x=pW,mW=tl,xW=_x,gW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vW=/^\w*$/;function yW(e,t){if(mW(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||xW(e)?!0:vW.test(e)||!gW.test(e)||t!=null&&e in Object(t)}var __=yW;function bW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var x0=bW;const Ax=sa(x0);var wW=Hd,NW=x0,jW="[object AsyncFunction]",kW="[object Function]",SW="[object GeneratorFunction]",_W="[object Proxy]";function AW(e){if(!NW(e))return!1;var t=wW(e);return t==kW||t==SW||t==jW||t==_W}var A_=AW;const sn=sa(A_);var CW=Gu,EW=CW["__core-js_shared__"],TW=EW,hj=TW,QC=function(){var e=/[^.]+$/.exec(hj&&hj.keys&&hj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function OW(e){return!!QC&&QC in e}var PW=OW,IW=Function.prototype,DW=IW.toString;function LW(e){if(e!=null){try{return DW.call(e)}catch{}try{return e+""}catch{}}return""}var RF=LW,FW=A_,MW=PW,RW=x0,BW=RF,$W=/[\\^$.*+?()[\]{}|]/g,UW=/^\[object .+?Constructor\]$/,zW=Function.prototype,qW=Object.prototype,HW=zW.toString,WW=qW.hasOwnProperty,VW=RegExp("^"+HW.call(WW).replace($W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function GW(e){if(!RW(e)||MW(e))return!1;var t=FW(e)?VW:UW;return t.test(BW(e))}var KW=GW;function XW(e,t){return e==null?void 0:e[t]}var YW=XW,JW=KW,QW=YW;function ZW(e,t){var r=QW(e,t);return JW(r)?r:void 0}var ep=ZW,eV=ep,tV=eV(Object,"create"),S5=tV,ZC=S5;function rV(){this.__data__=ZC?ZC(null):{},this.size=0}var nV=rV;function aV(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sV=aV,iV=S5,oV="__lodash_hash_undefined__",lV=Object.prototype,cV=lV.hasOwnProperty;function uV(e){var t=this.__data__;if(iV){var r=t[e];return r===oV?void 0:r}return cV.call(t,e)?t[e]:void 0}var dV=uV,fV=S5,hV=Object.prototype,pV=hV.hasOwnProperty;function mV(e){var t=this.__data__;return fV?t[e]!==void 0:pV.call(t,e)}var xV=mV,gV=S5,vV="__lodash_hash_undefined__";function yV(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gV&&t===void 0?vV:t,this}var bV=yV,wV=nV,NV=sV,jV=dV,kV=xV,SV=bV;function Cx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Cx.prototype.clear=wV;Cx.prototype.delete=NV;Cx.prototype.get=jV;Cx.prototype.has=kV;Cx.prototype.set=SV;var _V=Cx;function AV(){this.__data__=[],this.size=0}var CV=AV;function EV(e,t){return e===t||e!==e&&t!==t}var C_=EV,TV=C_;function OV(e,t){for(var r=e.length;r--;)if(TV(e[r][0],t))return r;return-1}var _5=OV,PV=_5,IV=Array.prototype,DV=IV.splice;function LV(e){var t=this.__data__,r=PV(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():DV.call(t,r,1),--this.size,!0}var FV=LV,MV=_5;function RV(e){var t=this.__data__,r=MV(t,e);return r<0?void 0:t[r][1]}var BV=RV,$V=_5;function UV(e){return $V(this.__data__,e)>-1}var zV=UV,qV=_5;function HV(e,t){var r=this.__data__,n=qV(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var WV=HV,VV=CV,GV=FV,KV=BV,XV=zV,YV=WV;function Ex(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ex.prototype.clear=VV;Ex.prototype.delete=GV;Ex.prototype.get=KV;Ex.prototype.has=XV;Ex.prototype.set=YV;var A5=Ex,JV=ep,QV=Gu,ZV=JV(QV,"Map"),E_=ZV,eE=_V,eG=A5,tG=E_;function rG(){this.size=0,this.__data__={hash:new eE,map:new(tG||eG),string:new eE}}var nG=rG;function aG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var sG=aG,iG=sG;function oG(e,t){var r=e.__data__;return iG(t)?r[typeof t=="string"?"string":"hash"]:r.map}var C5=oG,lG=C5;function cG(e){var t=lG(this,e).delete(e);return this.size-=t?1:0,t}var uG=cG,dG=C5;function fG(e){return dG(this,e).get(e)}var hG=fG,pG=C5;function mG(e){return pG(this,e).has(e)}var xG=mG,gG=C5;function vG(e,t){var r=gG(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var yG=vG,bG=nG,wG=uG,NG=hG,jG=xG,kG=yG;function Tx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Tx.prototype.clear=bG;Tx.prototype.delete=wG;Tx.prototype.get=NG;Tx.prototype.has=jG;Tx.prototype.set=kG;var T_=Tx,BF=T_,SG="Expected a function";function O_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(SG);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(O_.Cache||BF),r}O_.Cache=BF;var $F=O_;const _G=sa($F);var AG=$F,CG=500;function EG(e){var t=AG(e,function(n){return r.size===CG&&r.clear(),n}),r=t.cache;return t}var TG=EG,OG=TG,PG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IG=/\\(\\)?/g,DG=OG(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(PG,function(r,n,s,i){t.push(s?i.replace(IG,"$1"):n||r)}),t}),LG=DG;function FG(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var P_=FG,tE=K1,MG=P_,RG=tl,BG=_x,rE=tE?tE.prototype:void 0,nE=rE?rE.toString:void 0;function UF(e){if(typeof e=="string")return e;if(RG(e))return MG(e,UF)+"";if(BG(e))return nE?nE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var $G=UF,UG=$G;function zG(e){return e==null?"":UG(e)}var zF=zG,qG=tl,HG=__,WG=LG,VG=zF;function GG(e,t){return qG(e)?e:HG(e,t)?[e]:WG(VG(e))}var qF=GG,KG=_x;function XG(e){if(typeof e=="string"||KG(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var E5=XG,YG=qF,JG=E5;function QG(e,t){t=YG(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[JG(t[r++])];return r&&r==n?e:void 0}var I_=QG,ZG=I_;function eK(e,t,r){var n=e==null?void 0:ZG(e,t);return n===void 0?r:n}var HF=eK;const cc=sa(HF);function tK(e){return e==null}var rK=tK;const Nn=sa(rK);var nK=Hd,aK=tl,sK=Wd,iK="[object String]";function oK(e){return typeof e=="string"||!aK(e)&&sK(e)&&nK(e)==iK}var lK=oK;const Rh=sa(lK);var WF={exports:{}},Zn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_=Symbol.for("react.element"),L_=Symbol.for("react.portal"),T5=Symbol.for("react.fragment"),O5=Symbol.for("react.strict_mode"),P5=Symbol.for("react.profiler"),I5=Symbol.for("react.provider"),D5=Symbol.for("react.context"),cK=Symbol.for("react.server_context"),L5=Symbol.for("react.forward_ref"),F5=Symbol.for("react.suspense"),M5=Symbol.for("react.suspense_list"),R5=Symbol.for("react.memo"),B5=Symbol.for("react.lazy"),uK=Symbol.for("react.offscreen"),VF;VF=Symbol.for("react.module.reference");function xc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case D_:switch(e=e.type,e){case T5:case P5:case O5:case F5:case M5:return e;default:switch(e=e&&e.$$typeof,e){case cK:case D5:case L5:case B5:case R5:case I5:return e;default:return t}}case L_:return t}}}Zn.ContextConsumer=D5;Zn.ContextProvider=I5;Zn.Element=D_;Zn.ForwardRef=L5;Zn.Fragment=T5;Zn.Lazy=B5;Zn.Memo=R5;Zn.Portal=L_;Zn.Profiler=P5;Zn.StrictMode=O5;Zn.Suspense=F5;Zn.SuspenseList=M5;Zn.isAsyncMode=function(){return!1};Zn.isConcurrentMode=function(){return!1};Zn.isContextConsumer=function(e){return xc(e)===D5};Zn.isContextProvider=function(e){return xc(e)===I5};Zn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===D_};Zn.isForwardRef=function(e){return xc(e)===L5};Zn.isFragment=function(e){return xc(e)===T5};Zn.isLazy=function(e){return xc(e)===B5};Zn.isMemo=function(e){return xc(e)===R5};Zn.isPortal=function(e){return xc(e)===L_};Zn.isProfiler=function(e){return xc(e)===P5};Zn.isStrictMode=function(e){return xc(e)===O5};Zn.isSuspense=function(e){return xc(e)===F5};Zn.isSuspenseList=function(e){return xc(e)===M5};Zn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===T5||e===P5||e===O5||e===F5||e===M5||e===uK||typeof e=="object"&&e!==null&&(e.$$typeof===B5||e.$$typeof===R5||e.$$typeof===I5||e.$$typeof===D5||e.$$typeof===L5||e.$$typeof===VF||e.getModuleId!==void 0)};Zn.typeOf=xc;WF.exports=Zn;var dK=WF.exports,fK=Hd,hK=Wd,pK="[object Number]";function mK(e){return typeof e=="number"||hK(e)&&fK(e)==pK}var GF=mK;const xK=sa(GF);var gK=GF;function vK(e){return gK(e)&&e!=+e}var yK=vK;const Ox=sa(yK);var Vc=function(t){return t===0?0:t>0?1:-1},ah=function(t){return Rh(t)&&t.indexOf("%")===t.length-1},Qt=function(t){return xK(t)&&!Ox(t)},bK=function(t){return Nn(t)},Ws=function(t){return Qt(t)||Rh(t)},wK=0,X1=function(t){var r=++wK;return"".concat(t||"").concat(r)},Bh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qt(t)&&!Rh(t))return n;var i;if(ah(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Ox(i)&&(i=n),s&&i>r&&(i=r),i},Af=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},NK=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},nc=function(t,r){return Qt(t)&&Qt(r)?function(n){return t+n*(r-t)}:function(){return r}};function R2(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):cc(n,t))===r})}var jK=function(t,r){return Qt(t)&&Qt(r)?t-r:Rh(t)&&Rh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ym(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function vk(e){"@babel/helpers - typeof";return vk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vk(e)}var kK=["viewBox","children"],SK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aE=["points","pathLength"],pj={svg:kK,polygon:aE,polyline:aE},F_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],B2=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),!Ax(n))return null;var s={};return Object.keys(n).forEach(function(i){F_.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},_K=function(t,r,n){return function(s){return t(r,n,s),null}},$2=function(t,r,n){if(!Ax(t)||vk(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];F_.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=_K(o,r,n))}),s},AK=["children"],CK=["children"];function sE(e,t){if(e==null)return{};var r=EK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yk(e){"@babel/helpers - typeof";return yk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yk(e)}var iE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},_d=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},oE=null,mj=null,M_=function e(t){if(t===oE&&Array.isArray(mj))return mj;var r=[];return D.Children.forEach(t,function(n){Nn(n)||(dK.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),mj=r,oE=t,r};function Qc(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return _d(s)}):n=[_d(t)],M_(e).forEach(function(s){var i=cc(s,"type.displayName")||cc(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function vl(e,t){var r=Qc(e,t);return r&&r[0]}var lE=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!Qt(n)||n<=0||!Qt(s)||s<=0)},TK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],OK=function(t){return t&&t.type&&Rh(t.type)&&TK.indexOf(t.type)>=0},PK=function(t){return t&&yk(t)==="object"&&"clipDot"in t},IK=function(t,r,n,s){var i,o=(i=pj==null?void 0:pj[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!sn(t)&&(s&&o.includes(r)||SK.includes(r))||n&&F_.includes(r)},vn=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(D.isValidElement(t)&&(s=t.props),!Ax(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;IK((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},bk=function e(t,r){if(t===r)return!0;var n=D.Children.count(t);if(n!==D.Children.count(r))return!1;if(n===0)return!0;if(n===1)return cE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!cE(i,o))return!1}return!0},cE=function(t,r){if(Nn(t)&&Nn(r))return!0;if(!Nn(t)&&!Nn(r)){var n=t.props||{},s=n.children,i=sE(n,AK),o=r.props||{},l=o.children,c=sE(o,CK);return s&&l?ym(i,c)&&bk(s,l):!s&&!l?ym(i,c):!1}return!1},uE=function(t,r){var n=[],s={};return M_(t).forEach(function(i,o){if(OK(i))n.push(i);else if(i){var l=_d(i.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!s[l])){var d=u(i,l,o);n.push(d),s[l]=!0}}}),n},DK=function(t){var r=t&&t.type;return r&&iE[r]?iE[r]:null},LK=function(t,r){return M_(r).indexOf(t)},FK=["children","width","height","viewBox","className","style","title","desc"];function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wk.apply(this,arguments)}function MK(e,t){if(e==null)return{};var r=RK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nk(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=MK(e,FK),f=s||{width:r,height:n,x:0,y:0},d=Pn("recharts-surface",i);return nt.createElement("svg",wk({},vn(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),nt.createElement("title",null,l),nt.createElement("desc",null,c),t)}var BK=["children","className"];function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jk.apply(this,arguments)}function $K(e,t){if(e==null)return{};var r=UK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qa=nt.forwardRef(function(e,t){var r=e.children,n=e.className,s=$K(e,BK),i=Pn("recharts-layer",n);return nt.createElement("g",jk({className:i},vn(s,!0),{ref:t}),r)}),Ad=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function zK(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var qK=zK,HK=qK;function WK(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:HK(e,t,r)}var VK=WK,GK="\\ud800-\\udfff",KK="\\u0300-\\u036f",XK="\\ufe20-\\ufe2f",YK="\\u20d0-\\u20ff",JK=KK+XK+YK,QK="\\ufe0e\\ufe0f",ZK="\\u200d",eX=RegExp("["+ZK+GK+JK+QK+"]");function tX(e){return eX.test(e)}var KF=tX;function rX(e){return e.split("")}var nX=rX,XF="\\ud800-\\udfff",aX="\\u0300-\\u036f",sX="\\ufe20-\\ufe2f",iX="\\u20d0-\\u20ff",oX=aX+sX+iX,lX="\\ufe0e\\ufe0f",cX="["+XF+"]",kk="["+oX+"]",Sk="\\ud83c[\\udffb-\\udfff]",uX="(?:"+kk+"|"+Sk+")",YF="[^"+XF+"]",JF="(?:\\ud83c[\\udde6-\\uddff]){2}",QF="[\\ud800-\\udbff][\\udc00-\\udfff]",dX="\\u200d",ZF=uX+"?",e7="["+lX+"]?",fX="(?:"+dX+"(?:"+[YF,JF,QF].join("|")+")"+e7+ZF+")*",hX=e7+ZF+fX,pX="(?:"+[YF+kk+"?",kk,JF,QF,cX].join("|")+")",mX=RegExp(Sk+"(?="+Sk+")|"+pX+hX,"g");function xX(e){return e.match(mX)||[]}var gX=xX,vX=nX,yX=KF,bX=gX;function wX(e){return yX(e)?bX(e):vX(e)}var NX=wX,jX=VK,kX=KF,SX=NX,_X=zF;function AX(e){return function(t){t=_X(t);var r=kX(t)?SX(t):void 0,n=r?r[0]:t.charAt(0),s=r?jX(r,1).join(""):t.slice(1);return n[e]()+s}}var CX=AX,EX=CX,TX=EX("toUpperCase"),OX=TX;const $5=sa(OX);function ha(e){return function(){return e}}const t7=Math.cos,U2=Math.sin,au=Math.sqrt,z2=Math.PI,U5=2*z2,_k=Math.PI,Ak=2*_k,X0=1e-6,PX=Ak-X0;function r7(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function IX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return r7;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class DX{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?r7:IX(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,f=o-t,d=l-r,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>X0)if(!(Math.abs(d*c-u*f)>X0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,g=s-l,x=c*c+u*u,m=h*h+g*g,v=Math.sqrt(x),y=Math.sqrt(p),w=i*Math.tan((_k-Math.acos((x+p-m)/(2*v*y)))/2),b=w/y,N=w/v;Math.abs(b-1)>X0&&this._append`L${t+b*f},${r+b*d}`,this._append`A${i},${i},0,0,${+(d*h>f*g)},${this._x1=t+N*c},${this._y1=r+N*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,f=r+c,d=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>X0||Math.abs(this._y1-f)>X0)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%Ak+Ak),p>PX?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:p>X0&&this._append`A${n},${n},0,${+(p>=_k)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function R_(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new DX(t)}function B_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function n7(e){this._context=e}n7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function z5(e){return new n7(e)}function a7(e){return e[0]}function s7(e){return e[1]}function i7(e,t){var r=ha(!0),n=null,s=z5,i=null,o=R_(l);e=typeof e=="function"?e:e===void 0?a7:ha(e),t=typeof t=="function"?t:t===void 0?s7:ha(t);function l(c){var u,f=(c=B_(c)).length,d,p=!1,h;for(n==null&&(i=s(h=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(d,u,c),+t(d,u,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ha(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ha(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ha(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function tb(e,t,r){var n=null,s=ha(!0),i=null,o=z5,l=null,c=R_(u);e=typeof e=="function"?e:e===void 0?a7:ha(+e),t=typeof t=="function"?t:ha(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?s7:ha(+r);function u(d){var p,h,g,x=(d=B_(d)).length,m,v=!1,y,w=new Array(x),b=new Array(x);for(i==null&&(l=o(y=c())),p=0;p<=x;++p){if(!(p<x&&s(m=d[p],p,d))===v)if(v=!v)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=p-1;g>=h;--g)l.point(w[g],b[g]);l.lineEnd(),l.areaEnd()}v&&(w[p]=+e(m,p,d),b[p]=+t(m,p,d),l.point(n?+n(m,p,d):w[p],r?+r(m,p,d):b[p]))}if(y)return l=null,y+""||null}function f(){return i7().defined(s).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ha(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:ha(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:ha(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:ha(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:ha(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:ha(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:ha(!!d),u):s},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class o7{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function LX(e){return new o7(e,!0)}function FX(e){return new o7(e,!1)}const $_={draw(e,t){const r=au(t/z2);e.moveTo(r,0),e.arc(0,0,r,0,U5)}},MX={draw(e,t){const r=au(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},l7=au(1/3),RX=l7*2,BX={draw(e,t){const r=au(t/RX),n=r*l7;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},$X={draw(e,t){const r=au(t),n=-r/2;e.rect(n,n,r,r)}},UX=.8908130915292852,c7=U2(z2/10)/U2(7*z2/10),zX=U2(U5/10)*c7,qX=-t7(U5/10)*c7,HX={draw(e,t){const r=au(t*UX),n=zX*r,s=qX*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=U5*i/5,l=t7(o),c=U2(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},xj=au(3),WX={draw(e,t){const r=-au(t/(xj*3));e.moveTo(0,r*2),e.lineTo(-xj*r,-r),e.lineTo(xj*r,-r),e.closePath()}},ql=-.5,Hl=au(3)/2,Ck=1/au(12),VX=(Ck/2+1)*3,GX={draw(e,t){const r=au(t/VX),n=r/2,s=r*Ck,i=n,o=r*Ck+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ql*n-Hl*s,Hl*n+ql*s),e.lineTo(ql*i-Hl*o,Hl*i+ql*o),e.lineTo(ql*l-Hl*c,Hl*l+ql*c),e.lineTo(ql*n+Hl*s,ql*s-Hl*n),e.lineTo(ql*i+Hl*o,ql*o-Hl*i),e.lineTo(ql*l+Hl*c,ql*c-Hl*l),e.closePath()}};function KX(e,t){let r=null,n=R_(s);e=typeof e=="function"?e:ha(e||$_),t=typeof t=="function"?t:ha(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:ha(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:ha(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function q2(){}function H2(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function u7(e){this._context=e}u7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:H2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:H2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XX(e){return new u7(e)}function d7(e){this._context=e}d7.prototype={areaStart:q2,areaEnd:q2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:H2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YX(e){return new d7(e)}function f7(e){this._context=e}f7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:H2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function JX(e){return new f7(e)}function h7(e){this._context=e}h7.prototype={areaStart:q2,areaEnd:q2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QX(e){return new h7(e)}function dE(e){return e<0?-1:1}function fE(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(dE(i)+dE(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function hE(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function gj(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function W2(e){this._context=e}W2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gj(this,this._t0,hE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gj(this,hE(this,r=fE(this,e,t)),r);break;default:gj(this,this._t0,r=fE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function p7(e){this._context=new m7(e)}(p7.prototype=Object.create(W2.prototype)).point=function(e,t){W2.prototype.point.call(this,t,e)};function m7(e){this._context=e}m7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function ZX(e){return new W2(e)}function eY(e){return new p7(e)}function x7(e){this._context=e}x7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=pE(e),s=pE(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pE(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function tY(e){return new x7(e)}function q5(e,t){this._context=e,this._t=t}q5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function rY(e){return new q5(e,.5)}function nY(e){return new q5(e,0)}function aY(e){return new q5(e,1)}function Ym(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Ek(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function sY(e,t){return e[t]}function iY(e){const t=[];return t.key=e,t}function oY(){var e=ha([]),t=Ek,r=Ym,n=sY;function s(i){var o=Array.from(e.apply(this,arguments),iY),l,c=o.length,u=-1,f;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,i)]).data=d;for(l=0,f=B_(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ha(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:ha(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Ek:typeof i=="function"?i:ha(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Ym,s):r},s}function lY(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Ym(e,t)}}function cY(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Ym(e,t)}}function uY(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[n][1]||0,p=f[n-1][1]||0,h=(d-p)/2,g=0;g<l;++g){var x=e[t[g]],m=x[n][1]||0,v=x[n-1][1]||0;h+=m-v}c+=d,u+=h*d}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,Ym(e,t)}}function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(e)}var dY=["type","size","sizeType"];function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tk.apply(this,arguments)}function mE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(r),!0).forEach(function(n){fY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fY(e,t,r){return t=hY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hY(e){var t=pY(e,"string");return $v(t)=="symbol"?t:t+""}function pY(e,t){if($v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mY(e,t){if(e==null)return{};var r=xY(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var g7={symbolCircle:$_,symbolCross:MX,symbolDiamond:BX,symbolSquare:$X,symbolStar:HX,symbolTriangle:WX,symbolWye:GX},gY=Math.PI/180,vY=function(t){var r="symbol".concat($5(t));return g7[r]||$_},yY=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*gY;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},bY=function(t,r){g7["symbol".concat($5(t))]=r},U_=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=mY(t,dY),u=xE(xE({},c),{},{type:n,size:i,sizeType:l}),f=function(){var m=vY(n),v=KX().type(m).size(yY(i,l,n));return v()},d=u.className,p=u.cx,h=u.cy,g=vn(u,!0);return p===+p&&h===+h&&i===+i?nt.createElement("path",Tk({},g,{className:Pn("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(h,")"),d:f()})):null};U_.registerSymbol=bY;function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ok.apply(this,arguments)}function gE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(r),!0).forEach(function(n){Uv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y7(n.key),n)}}function kY(e,t,r){return t&&jY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SY(e,t,r){return t=V2(t),_Y(e,v7()?Reflect.construct(t,r||[],V2(e).constructor):t.apply(e,r))}function _Y(e,t){if(t&&(Jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AY(e)}function AY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v7=function(){return!!e})()}function V2(e){return V2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V2(e)}function CY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pk(e,t)}function Pk(e,t){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Pk(e,t)}function Uv(e,t,r){return t=y7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y7(e){var t=EY(e,"string");return Jm(t)=="symbol"?t:t+""}function EY(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wl=32,z_=function(e){function t(){return NY(this,t),SY(this,t,arguments)}return CY(t,e),kY(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Wl/2,o=Wl/6,l=Wl/3,c=n.inactive?s:n.color;if(n.type==="plainline")return nt.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Wl,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return nt.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Wl,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return nt.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Wl/8,"h").concat(Wl,"v").concat(Wl*3/4,"h").concat(-Wl,"z"),className:"recharts-legend-icon"});if(nt.isValidElement(n.legendIcon)){var u=wY({},n);return delete u.legendIcon,nt.cloneElement(n.legendIcon,u)}return nt.createElement(U_,{fill:c,cx:i,cy:i,size:Wl,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:Wl,height:Wl},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,g){var x=h.formatter||c,m=Pn(Uv(Uv({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=sn(h.value)?null:h.value;Ad(!sn(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=h.inactive?u:h.color;return nt.createElement("li",Ok({className:m,style:d,key:"legend-item-".concat(g)},$2(n.props,h,g)),nt.createElement(Nk,{width:o,height:o,viewBox:f,style:p},n.renderIcon(h)),nt.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},x?x(v,h,g):v))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return nt.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(D.PureComponent);Uv(z_,"displayName","Legend");Uv(z_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var TY=A5;function OY(){this.__data__=new TY,this.size=0}var PY=OY;function IY(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var DY=IY;function LY(e){return this.__data__.get(e)}var FY=LY;function MY(e){return this.__data__.has(e)}var RY=MY,BY=A5,$Y=E_,UY=T_,zY=200;function qY(e,t){var r=this.__data__;if(r instanceof BY){var n=r.__data__;if(!$Y||n.length<zY-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new UY(n)}return r.set(e,t),this.size=r.size,this}var HY=qY,WY=A5,VY=PY,GY=DY,KY=FY,XY=RY,YY=HY;function Px(e){var t=this.__data__=new WY(e);this.size=t.size}Px.prototype.clear=VY;Px.prototype.delete=GY;Px.prototype.get=KY;Px.prototype.has=XY;Px.prototype.set=YY;var b7=Px,JY="__lodash_hash_undefined__";function QY(e){return this.__data__.set(e,JY),this}var ZY=QY;function eJ(e){return this.__data__.has(e)}var tJ=eJ,rJ=T_,nJ=ZY,aJ=tJ;function G2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new rJ;++t<r;)this.add(e[t])}G2.prototype.add=G2.prototype.push=nJ;G2.prototype.has=aJ;var w7=G2;function sJ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var N7=sJ;function iJ(e,t){return e.has(t)}var j7=iJ,oJ=w7,lJ=N7,cJ=j7,uJ=1,dJ=2;function fJ(e,t,r,n,s,i){var o=r&uJ,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,p=!0,h=r&dJ?new oJ:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var g=e[d],x=t[d];if(n)var m=o?n(x,g,d,t,e,i):n(g,x,d,e,t,i);if(m!==void 0){if(m)continue;p=!1;break}if(h){if(!lJ(t,function(v,y){if(!cJ(h,y)&&(g===v||s(g,v,r,n,i)))return h.push(y)})){p=!1;break}}else if(!(g===x||s(g,x,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var k7=fJ,hJ=Gu,pJ=hJ.Uint8Array,mJ=pJ;function xJ(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var gJ=xJ;function vJ(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var q_=vJ,vE=K1,yE=mJ,yJ=C_,bJ=k7,wJ=gJ,NJ=q_,jJ=1,kJ=2,SJ="[object Boolean]",_J="[object Date]",AJ="[object Error]",CJ="[object Map]",EJ="[object Number]",TJ="[object RegExp]",OJ="[object Set]",PJ="[object String]",IJ="[object Symbol]",DJ="[object ArrayBuffer]",LJ="[object DataView]",bE=vE?vE.prototype:void 0,vj=bE?bE.valueOf:void 0;function FJ(e,t,r,n,s,i,o){switch(r){case LJ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case DJ:return!(e.byteLength!=t.byteLength||!i(new yE(e),new yE(t)));case SJ:case _J:case EJ:return yJ(+e,+t);case AJ:return e.name==t.name&&e.message==t.message;case TJ:case PJ:return e==t+"";case CJ:var l=wJ;case OJ:var c=n&jJ;if(l||(l=NJ),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=kJ,o.set(e,t);var f=bJ(l(e),l(t),n,s,i,o);return o.delete(e),f;case IJ:if(vj)return vj.call(e)==vj.call(t)}return!1}var MJ=FJ;function RJ(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var S7=RJ,BJ=S7,$J=tl;function UJ(e,t,r){var n=t(e);return $J(e)?n:BJ(n,r(e))}var zJ=UJ;function qJ(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var HJ=qJ;function WJ(){return[]}var VJ=WJ,GJ=HJ,KJ=VJ,XJ=Object.prototype,YJ=XJ.propertyIsEnumerable,wE=Object.getOwnPropertySymbols,JJ=wE?function(e){return e==null?[]:(e=Object(e),GJ(wE(e),function(t){return YJ.call(e,t)}))}:KJ,QJ=JJ;function ZJ(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var eQ=ZJ,tQ=Hd,rQ=Wd,nQ="[object Arguments]";function aQ(e){return rQ(e)&&tQ(e)==nQ}var sQ=aQ,NE=sQ,iQ=Wd,_7=Object.prototype,oQ=_7.hasOwnProperty,lQ=_7.propertyIsEnumerable,cQ=NE(function(){return arguments}())?NE:function(e){return iQ(e)&&oQ.call(e,"callee")&&!lQ.call(e,"callee")},H_=cQ,K2={exports:{}};function uQ(){return!1}var dQ=uQ;K2.exports;(function(e,t){var r=Gu,n=dQ,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(K2,K2.exports);var A7=K2.exports,fQ=9007199254740991,hQ=/^(?:0|[1-9]\d*)$/;function pQ(e,t){var r=typeof e;return t=t??fQ,!!t&&(r=="number"||r!="symbol"&&hQ.test(e))&&e>-1&&e%1==0&&e<t}var W_=pQ,mQ=9007199254740991;function xQ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mQ}var V_=xQ,gQ=Hd,vQ=V_,yQ=Wd,bQ="[object Arguments]",wQ="[object Array]",NQ="[object Boolean]",jQ="[object Date]",kQ="[object Error]",SQ="[object Function]",_Q="[object Map]",AQ="[object Number]",CQ="[object Object]",EQ="[object RegExp]",TQ="[object Set]",OQ="[object String]",PQ="[object WeakMap]",IQ="[object ArrayBuffer]",DQ="[object DataView]",LQ="[object Float32Array]",FQ="[object Float64Array]",MQ="[object Int8Array]",RQ="[object Int16Array]",BQ="[object Int32Array]",$Q="[object Uint8Array]",UQ="[object Uint8ClampedArray]",zQ="[object Uint16Array]",qQ="[object Uint32Array]",ka={};ka[LQ]=ka[FQ]=ka[MQ]=ka[RQ]=ka[BQ]=ka[$Q]=ka[UQ]=ka[zQ]=ka[qQ]=!0;ka[bQ]=ka[wQ]=ka[IQ]=ka[NQ]=ka[DQ]=ka[jQ]=ka[kQ]=ka[SQ]=ka[_Q]=ka[AQ]=ka[CQ]=ka[EQ]=ka[TQ]=ka[OQ]=ka[PQ]=!1;function HQ(e){return yQ(e)&&vQ(e.length)&&!!ka[gQ(e)]}var WQ=HQ;function VQ(e){return function(t){return e(t)}}var C7=VQ,X2={exports:{}};X2.exports;(function(e,t){var r=FF,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(X2,X2.exports);var GQ=X2.exports,KQ=WQ,XQ=C7,jE=GQ,kE=jE&&jE.isTypedArray,YQ=kE?XQ(kE):KQ,E7=YQ,JQ=eQ,QQ=H_,ZQ=tl,eZ=A7,tZ=W_,rZ=E7,nZ=Object.prototype,aZ=nZ.hasOwnProperty;function sZ(e,t){var r=ZQ(e),n=!r&&QQ(e),s=!r&&!n&&eZ(e),i=!r&&!n&&!s&&rZ(e),o=r||n||s||i,l=o?JQ(e.length,String):[],c=l.length;for(var u in e)(t||aZ.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||tZ(u,c)))&&l.push(u);return l}var iZ=sZ,oZ=Object.prototype;function lZ(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||oZ;return e===r}var cZ=lZ;function uZ(e,t){return function(r){return e(t(r))}}var T7=uZ,dZ=T7,fZ=dZ(Object.keys,Object),hZ=fZ,pZ=cZ,mZ=hZ,xZ=Object.prototype,gZ=xZ.hasOwnProperty;function vZ(e){if(!pZ(e))return mZ(e);var t=[];for(var r in Object(e))gZ.call(e,r)&&r!="constructor"&&t.push(r);return t}var yZ=vZ,bZ=A_,wZ=V_;function NZ(e){return e!=null&&wZ(e.length)&&!bZ(e)}var Y1=NZ,jZ=iZ,kZ=yZ,SZ=Y1;function _Z(e){return SZ(e)?jZ(e):kZ(e)}var H5=_Z,AZ=zJ,CZ=QJ,EZ=H5;function TZ(e){return AZ(e,EZ,CZ)}var OZ=TZ,SE=OZ,PZ=1,IZ=Object.prototype,DZ=IZ.hasOwnProperty;function LZ(e,t,r,n,s,i){var o=r&PZ,l=SE(e),c=l.length,u=SE(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var p=l[d];if(!(o?p in t:DZ.call(t,p)))return!1}var h=i.get(e),g=i.get(t);if(h&&g)return h==t&&g==e;var x=!0;i.set(e,t),i.set(t,e);for(var m=o;++d<c;){p=l[d];var v=e[p],y=t[p];if(n)var w=o?n(y,v,p,t,e,i):n(v,y,p,e,t,i);if(!(w===void 0?v===y||s(v,y,r,n,i):w)){x=!1;break}m||(m=p=="constructor")}if(x&&!m){var b=e.constructor,N=t.constructor;b!=N&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof N=="function"&&N instanceof N)&&(x=!1)}return i.delete(e),i.delete(t),x}var FZ=LZ,MZ=ep,RZ=Gu,BZ=MZ(RZ,"DataView"),$Z=BZ,UZ=ep,zZ=Gu,qZ=UZ(zZ,"Promise"),HZ=qZ,WZ=ep,VZ=Gu,GZ=WZ(VZ,"Set"),O7=GZ,KZ=ep,XZ=Gu,YZ=KZ(XZ,"WeakMap"),JZ=YZ,Ik=$Z,Dk=E_,Lk=HZ,Fk=O7,Mk=JZ,P7=Hd,Ix=RF,_E="[object Map]",QZ="[object Object]",AE="[object Promise]",CE="[object Set]",EE="[object WeakMap]",TE="[object DataView]",ZZ=Ix(Ik),eee=Ix(Dk),tee=Ix(Lk),ree=Ix(Fk),nee=Ix(Mk),Y0=P7;(Ik&&Y0(new Ik(new ArrayBuffer(1)))!=TE||Dk&&Y0(new Dk)!=_E||Lk&&Y0(Lk.resolve())!=AE||Fk&&Y0(new Fk)!=CE||Mk&&Y0(new Mk)!=EE)&&(Y0=function(e){var t=P7(e),r=t==QZ?e.constructor:void 0,n=r?Ix(r):"";if(n)switch(n){case ZZ:return TE;case eee:return _E;case tee:return AE;case ree:return CE;case nee:return EE}return t});var aee=Y0,yj=b7,see=k7,iee=MJ,oee=FZ,OE=aee,PE=tl,IE=A7,lee=E7,cee=1,DE="[object Arguments]",LE="[object Array]",rb="[object Object]",uee=Object.prototype,FE=uee.hasOwnProperty;function dee(e,t,r,n,s,i){var o=PE(e),l=PE(t),c=o?LE:OE(e),u=l?LE:OE(t);c=c==DE?rb:c,u=u==DE?rb:u;var f=c==rb,d=u==rb,p=c==u;if(p&&IE(e)){if(!IE(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new yj),o||lee(e)?see(e,t,r,n,s,i):iee(e,t,c,r,n,s,i);if(!(r&cee)){var h=f&&FE.call(e,"__wrapped__"),g=d&&FE.call(t,"__wrapped__");if(h||g){var x=h?e.value():e,m=g?t.value():t;return i||(i=new yj),s(x,m,r,n,i)}}return p?(i||(i=new yj),oee(e,t,r,n,s,i)):!1}var fee=dee,hee=fee,ME=Wd;function I7(e,t,r,n,s){return e===t?!0:e==null||t==null||!ME(e)&&!ME(t)?e!==e&&t!==t:hee(e,t,r,n,I7,s)}var G_=I7,pee=b7,mee=G_,xee=1,gee=2;function vee(e,t,r,n){var s=r.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new pee;if(n)var p=n(u,f,c,e,t,d);if(!(p===void 0?mee(f,u,xee|gee,n,d):p))return!1}}return!0}var yee=vee,bee=x0;function wee(e){return e===e&&!bee(e)}var D7=wee,Nee=D7,jee=H5;function kee(e){for(var t=jee(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,Nee(s)]}return t}var See=kee;function _ee(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var L7=_ee,Aee=yee,Cee=See,Eee=L7;function Tee(e){var t=Cee(e);return t.length==1&&t[0][2]?Eee(t[0][0],t[0][1]):function(r){return r===e||Aee(r,e,t)}}var Oee=Tee;function Pee(e,t){return e!=null&&t in Object(e)}var Iee=Pee,Dee=qF,Lee=H_,Fee=tl,Mee=W_,Ree=V_,Bee=E5;function $ee(e,t,r){t=Dee(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=Bee(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&Ree(s)&&Mee(o,s)&&(Fee(e)||Lee(e)))}var Uee=$ee,zee=Iee,qee=Uee;function Hee(e,t){return e!=null&&qee(e,t,zee)}var Wee=Hee,Vee=G_,Gee=HF,Kee=Wee,Xee=__,Yee=D7,Jee=L7,Qee=E5,Zee=1,ete=2;function tte(e,t){return Xee(e)&&Yee(t)?Jee(Qee(e),t):function(r){var n=Gee(r,e);return n===void 0&&n===t?Kee(r,e):Vee(t,n,Zee|ete)}}var rte=tte;function nte(e){return e}var Dx=nte;function ate(e){return function(t){return t==null?void 0:t[e]}}var ste=ate,ite=I_;function ote(e){return function(t){return ite(t,e)}}var lte=ote,cte=ste,ute=lte,dte=__,fte=E5;function hte(e){return dte(e)?cte(fte(e)):ute(e)}var pte=hte,mte=Oee,xte=rte,gte=Dx,vte=tl,yte=pte;function bte(e){return typeof e=="function"?e:e==null?gte:typeof e=="object"?vte(e)?xte(e[0],e[1]):mte(e):yte(e)}var g0=bte;function wte(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var F7=wte;function Nte(e){return e!==e}var jte=Nte;function kte(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var Ste=kte,_te=F7,Ate=jte,Cte=Ste;function Ete(e,t,r){return t===t?Cte(e,t,r):_te(e,Ate,r)}var Tte=Ete,Ote=Tte;function Pte(e,t){var r=e==null?0:e.length;return!!r&&Ote(e,t,0)>-1}var Ite=Pte;function Dte(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var Lte=Dte;function Fte(){}var Mte=Fte,bj=O7,Rte=Mte,Bte=q_,$te=1/0,Ute=bj&&1/Bte(new bj([,-0]))[1]==$te?function(e){return new bj(e)}:Rte,zte=Ute,qte=w7,Hte=Ite,Wte=Lte,Vte=j7,Gte=zte,Kte=q_,Xte=200;function Yte(e,t,r){var n=-1,s=Hte,i=e.length,o=!0,l=[],c=l;if(r)o=!1,s=Wte;else if(i>=Xte){var u=t?null:Gte(e);if(u)return Kte(u);o=!1,s=Vte,c=new qte}else c=t?[]:l;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),l.push(f)}else s(c,d,r)||(c!==l&&c.push(d),l.push(f))}return l}var Jte=Yte,Qte=g0,Zte=Jte;function ere(e,t){return e&&e.length?Zte(e,Qte(t)):[]}var tre=ere;const RE=sa(tre);function M7(e,t,r){return t===!0?RE(e,r):sn(t)?RE(e,t):e}function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}var rre=["ref"];function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){W5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B7(n.key),n)}}function are(e,t,r){return t&&$E(e.prototype,t),r&&$E(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sre(e,t,r){return t=Y2(t),ire(e,R7()?Reflect.construct(t,r||[],Y2(e).constructor):t.apply(e,r))}function ire(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ore(e)}function ore(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R7=function(){return!!e})()}function Y2(e){return Y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y2(e)}function lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rk(e,t)}function Rk(e,t){return Rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Rk(e,t)}function W5(e,t,r){return t=B7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B7(e){var t=cre(e,"string");return Qm(t)=="symbol"?t:t+""}function cre(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ure(e,t){if(e==null)return{};var r=dre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fre(e){return e.value}function hre(e,t){if(nt.isValidElement(e))return nt.cloneElement(e,t);if(typeof e=="function")return nt.createElement(e,t);t.ref;var r=ure(t,rre);return nt.createElement(z_,r)}var UE=1,bm=function(e){function t(){var r;nre(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=sre(this,t,[].concat(s)),W5(r,"lastBoundingBox",{width:-1,height:-1}),r}return lre(t,e),are(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>UE||Math.abs(s.height-this.lastBoundingBox.height)>UE)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?sd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,f=s.chartHeight,d,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();d={left:((u||0)-h.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();p={top:((f||0)-g.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return sd(sd({},d),p)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,d=sd(sd({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return nt.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){n.wrapperNode=h}},hre(i,sd(sd({},this.props),{},{payload:M7(f,u,fre)})))}}],[{key:"getWithHeight",value:function(n,s){var i=sd(sd({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Qt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(D.PureComponent);W5(bm,"displayName","Legend");W5(bm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var zE=K1,pre=H_,mre=tl,qE=zE?zE.isConcatSpreadable:void 0;function xre(e){return mre(e)||pre(e)||!!(qE&&e&&e[qE])}var gre=xre,vre=S7,yre=gre;function $7(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=yre),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?$7(l,t-1,r,n,s):vre(s,l):n||(s[s.length]=l)}return s}var U7=$7;function bre(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var wre=bre,Nre=wre,jre=Nre(),kre=jre,Sre=kre,_re=H5;function Are(e,t){return e&&Sre(e,t,_re)}var z7=Are,Cre=Y1;function Ere(e,t){return function(r,n){if(r==null)return r;if(!Cre(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var Tre=Ere,Ore=z7,Pre=Tre,Ire=Pre(Ore),K_=Ire,Dre=K_,Lre=Y1;function Fre(e,t){var r=-1,n=Lre(e)?Array(e.length):[];return Dre(e,function(s,i,o){n[++r]=t(s,i,o)}),n}var q7=Fre;function Mre(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Rre=Mre,HE=_x;function Bre(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,i=HE(e),o=t!==void 0,l=t===null,c=t===t,u=HE(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!u&&e<t||u&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var $re=Bre,Ure=$re;function zre(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++n<o;){var c=Ure(s[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var qre=zre,wj=P_,Hre=I_,Wre=g0,Vre=q7,Gre=Rre,Kre=C7,Xre=qre,Yre=Dx,Jre=tl;function Qre(e,t,r){t.length?t=wj(t,function(i){return Jre(i)?function(o){return Hre(o,i.length===1?i[0]:i)}:i}):t=[Yre];var n=-1;t=wj(t,Kre(Wre));var s=Vre(e,function(i,o,l){var c=wj(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Gre(s,function(i,o){return Xre(i,o,r)})}var Zre=Qre;function ene(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var tne=ene,rne=tne,WE=Math.max;function nne(e,t,r){return t=WE(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=WE(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),rne(e,this,l)}}var ane=nne;function sne(e){return function(){return e}}var ine=sne,one=ep,lne=function(){try{var e=one(Object,"defineProperty");return e({},"",{}),e}catch{}}(),H7=lne,cne=ine,VE=H7,une=Dx,dne=VE?function(e,t){return VE(e,"toString",{configurable:!0,enumerable:!1,value:cne(t),writable:!0})}:une,fne=dne,hne=800,pne=16,mne=Date.now;function xne(e){var t=0,r=0;return function(){var n=mne(),s=pne-(n-r);if(r=n,s>0){if(++t>=hne)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var gne=xne,vne=fne,yne=gne,bne=yne(vne),wne=bne,Nne=Dx,jne=ane,kne=wne;function Sne(e,t){return kne(jne(e,t,Nne),e+"")}var _ne=Sne,Ane=C_,Cne=Y1,Ene=W_,Tne=x0;function One(e,t,r){if(!Tne(r))return!1;var n=typeof t;return(n=="number"?Cne(r)&&Ene(t,r.length):n=="string"&&t in r)?Ane(r[t],e):!1}var V5=One,Pne=U7,Ine=Zre,Dne=_ne,GE=V5,Lne=Dne(function(e,t){if(e==null)return[];var r=t.length;return r>1&&GE(e,t[0],t[1])?t=[]:r>2&&GE(t[0],t[1],t[2])&&(t=[t[0]]),Ine(e,Pne(t,1),[])}),Fne=Lne;const X_=sa(Fne);function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function Bk(){return Bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bk.apply(this,arguments)}function Mne(e,t){return Une(e)||$ne(e,t)||Bne(e,t)||Rne()}function Rne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bne(e,t){if(e){if(typeof e=="string")return KE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KE(e,t)}}function KE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $ne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Une(e){if(Array.isArray(e))return e}function XE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(r),!0).forEach(function(n){zne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zne(e,t,r){return t=qne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qne(e){var t=Hne(e,"string");return zv(t)=="symbol"?t:t+""}function Hne(e,t){if(zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wne(e){return Array.isArray(e)&&Ws(e[0])&&Ws(e[1])?e.join(" ~ "):e}var Vne=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,p=t.itemSorter,h=t.wrapperClassName,g=t.labelClassName,x=t.label,m=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,w=function(){if(f&&f.length){var C={padding:0,margin:0},F=(p?X_(f,p):f).map(function(M,B){if(M.type==="none")return null;var K=Nj({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),G=M.formatter||d||Wne,Y=M.value,q=M.name,X=Y,V=q;if(G&&X!=null&&V!=null){var T=G(Y,q,M,B,f);if(Array.isArray(T)){var R=Mne(T,2);X=R[0],V=R[1]}else X=T}return nt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:K},Ws(V)?nt.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Ws(V)?nt.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,nt.createElement("span",{className:"recharts-tooltip-item-value"},X),nt.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return nt.createElement("ul",{className:"recharts-tooltip-item-list",style:C},F)}return null},b=Nj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=Nj({margin:0},u),S=!Nn(x),j=S?x:"",_=Pn("recharts-default-tooltip",h),E=Pn("recharts-tooltip-label",g);S&&m&&f!==void 0&&f!==null&&(j=m(x,f));var I=y?{role:"status","aria-live":"assertive"}:{};return nt.createElement("div",Bk({className:_,style:b},I),nt.createElement("p",{className:E,style:N},nt.isValidElement(j)?j:"".concat(j)),w())};function qv(e){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(e)}function nb(e,t,r){return t=Gne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gne(e){var t=Kne(e,"string");return qv(t)=="symbol"?t:t+""}function Kne(e,t){if(qv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wg="recharts-tooltip-wrapper",Xne={visibility:"hidden"};function Yne(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Pn(wg,nb(nb(nb(nb({},"".concat(wg,"-right"),Qt(r)&&t&&Qt(t.x)&&r>=t.x),"".concat(wg,"-left"),Qt(r)&&t&&Qt(t.x)&&r<t.x),"".concat(wg,"-bottom"),Qt(n)&&t&&Qt(t.y)&&n>=t.y),"".concat(wg,"-top"),Qt(n)&&t&&Qt(t.y)&&n<t.y))}function YE(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Qt(i[n]))return i[n];var f=r[n]-l-s,d=r[n]+s;if(t[n])return o[n]?f:d;if(o[n]){var p=f,h=c[n];return p<h?Math.max(d,c[n]):Math.max(f,c[n])}var g=d+l,x=c[n]+u;return g>x?Math.max(f,c[n]):Math.max(d,c[n])}function Jne(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Qne(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=YE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=YE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Jne({translateX:f,translateY:d,useTranslate3d:l})):u=Xne,{cssProperties:u,cssClasses:Yne({translateX:f,translateY:d,coordinate:r})}}function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(n){Uk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V7(n.key),n)}}function tae(e,t,r){return t&&eae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rae(e,t,r){return t=J2(t),nae(e,W7()?Reflect.construct(t,r||[],J2(e).constructor):t.apply(e,r))}function nae(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aae(e)}function aae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W7=function(){return!!e})()}function J2(e){return J2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J2(e)}function sae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$k(e,t)}function $k(e,t){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},$k(e,t)}function Uk(e,t,r){return t=V7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V7(e){var t=iae(e,"string");return Zm(t)=="symbol"?t:t+""}function iae(e,t){if(Zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZE=1,oae=function(e){function t(){var r;Zne(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=rae(this,t,[].concat(s)),Uk(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Uk(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return sae(t,e),tae(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>ZE||Math.abs(n.height-this.state.lastBoundingBox.height)>ZE)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,f=s.coordinate,d=s.hasPayload,p=s.isAnimationActive,h=s.offset,g=s.position,x=s.reverseDirection,m=s.useTranslate3d,v=s.viewBox,y=s.wrapperStyle,w=Qne({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:h,position:g,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),b=w.cssClasses,N=w.cssProperties,S=QE(QE({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return nt.createElement("div",{tabIndex:-1,className:b,style:S,ref:function(_){n.wrapperNode=_}},u)}}])}(D.PureComponent),lae=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Lx={isSsr:lae()};function ex(e){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ex(e)}function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(r),!0).forEach(function(n){Y_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K7(n.key),n)}}function dae(e,t,r){return t&&uae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fae(e,t,r){return t=Q2(t),hae(e,G7()?Reflect.construct(t,r||[],Q2(e).constructor):t.apply(e,r))}function hae(e,t){if(t&&(ex(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pae(e)}function pae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G7=function(){return!!e})()}function Q2(e){return Q2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q2(e)}function mae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zk(e,t)}function zk(e,t){return zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},zk(e,t)}function Y_(e,t,r){return t=K7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K7(e){var t=xae(e,"string");return ex(t)=="symbol"?t:t+""}function xae(e,t){if(ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gae(e){return e.dataKey}function vae(e,t){return nt.isValidElement(e)?nt.cloneElement(e,t):typeof e=="function"?nt.createElement(e,t):nt.createElement(Vne,t)}var _u=function(e){function t(){return cae(this,t),fae(this,t,arguments)}return mae(t,e),dae(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,f=s.coordinate,d=s.filterNull,p=s.isAnimationActive,h=s.offset,g=s.payload,x=s.payloadUniqBy,m=s.position,v=s.reverseDirection,y=s.useTranslate3d,w=s.viewBox,b=s.wrapperStyle,N=g??[];d&&N.length&&(N=M7(g.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),x,gae));var S=N.length>0;return nt.createElement(oae,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:f,hasPayload:S,offset:h,position:m,reverseDirection:v,useTranslate3d:y,viewBox:w,wrapperStyle:b},vae(u,tT(tT({},this.props),{},{payload:N})))}}])}(D.PureComponent);Y_(_u,"displayName","Tooltip");Y_(_u,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Lx.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var yae=Gu,bae=function(){return yae.Date.now()},wae=bae,Nae=/\s/;function jae(e){for(var t=e.length;t--&&Nae.test(e.charAt(t)););return t}var kae=jae,Sae=kae,_ae=/^\s+/;function Aae(e){return e&&e.slice(0,Sae(e)+1).replace(_ae,"")}var Cae=Aae,Eae=Cae,rT=x0,Tae=_x,nT=NaN,Oae=/^[-+]0x[0-9a-f]+$/i,Pae=/^0b[01]+$/i,Iae=/^0o[0-7]+$/i,Dae=parseInt;function Lae(e){if(typeof e=="number")return e;if(Tae(e))return nT;if(rT(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rT(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Eae(e);var r=Pae.test(e);return r||Iae.test(e)?Dae(e.slice(2),r?2:8):Oae.test(e)?nT:+e}var X7=Lae,Fae=x0,jj=wae,aT=X7,Mae="Expected a function",Rae=Math.max,Bae=Math.min;function $ae(e,t,r){var n,s,i,o,l,c,u=0,f=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(Mae);t=aT(t)||0,Fae(r)&&(f=!!r.leading,d="maxWait"in r,i=d?Rae(aT(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function h(S){var j=n,_=s;return n=s=void 0,u=S,o=e.apply(_,j),o}function g(S){return u=S,l=setTimeout(v,t),f?h(S):o}function x(S){var j=S-c,_=S-u,E=t-j;return d?Bae(E,i-_):E}function m(S){var j=S-c,_=S-u;return c===void 0||j>=t||j<0||d&&_>=i}function v(){var S=jj();if(m(S))return y(S);l=setTimeout(v,x(S))}function y(S){return l=void 0,p&&n?h(S):(n=s=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=s=l=void 0}function b(){return l===void 0?o:y(jj())}function N(){var S=jj(),j=m(S);if(n=arguments,s=this,c=S,j){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(v,t),h(c)}return l===void 0&&(l=setTimeout(v,t)),o}return N.cancel=w,N.flush=b,N}var Uae=$ae,zae=Uae,qae=x0,Hae="Expected a function";function Wae(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(Hae);return qae(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),zae(e,t,{leading:n,maxWait:t,trailing:s})}var Vae=Wae;const Y7=sa(Vae);function Hv(e){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hv(e)}function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ab(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(n){Gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gae(e,t,r){return t=Kae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kae(e){var t=Xae(e,"string");return Hv(t)=="symbol"?t:t+""}function Xae(e,t){if(Hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yae(e,t){return ese(e)||Zae(e,t)||Qae(e,t)||Jae()}function Jae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qae(e,t){if(e){if(typeof e=="string")return iT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iT(e,t)}}function iT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ese(e){if(Array.isArray(e))return e}var tse=D.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,p=e.maxHeight,h=e.children,g=e.debounce,x=g===void 0?0:g,m=e.id,v=e.className,y=e.onResize,w=e.style,b=w===void 0?{}:w,N=D.useRef(null),S=D.useRef();S.current=y,D.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var j=D.useState({containerWidth:s.width,containerHeight:s.height}),_=Yae(j,2),E=_[0],I=_[1],A=D.useCallback(function(F,M){I(function(B){var K=Math.round(F),G=Math.round(M);return B.containerWidth===K&&B.containerHeight===G?B:{containerWidth:K,containerHeight:G}})},[]);D.useEffect(function(){var F=function(q){var X,V=q[0].contentRect,T=V.width,R=V.height;A(T,R),(X=S.current)===null||X===void 0||X.call(S,T,R)};x>0&&(F=Y7(F,x,{trailing:!0,leading:!1}));var M=new ResizeObserver(F),B=N.current.getBoundingClientRect(),K=B.width,G=B.height;return A(K,G),M.observe(N.current),function(){M.disconnect()}},[A,x]);var C=D.useMemo(function(){var F=E.containerWidth,M=E.containerHeight;if(F<0||M<0)return null;Ad(ah(o)||ah(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ad(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=ah(o)?F:o,K=ah(c)?M:c;r&&r>0&&(B?K=B/r:K&&(B=K*r),p&&K>p&&(K=p)),Ad(B>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,K,o,c,f,d,r);var G=!Array.isArray(h)&&_d(h.type).endsWith("Chart");return nt.Children.map(h,function(Y){return nt.isValidElement(Y)?D.cloneElement(Y,ab({width:B,height:K},G?{style:ab({height:"100%",width:"100%",maxHeight:K,maxWidth:B},Y.props.style)}:{})):Y})},[r,h,c,p,d,f,E,o]);return nt.createElement("div",{id:m?"".concat(m):void 0,className:Pn("recharts-responsive-container",v),style:ab(ab({},b),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:p}),ref:N},C)}),J7=function(t){return null};J7.displayName="Cell";function Wv(e){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function oT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(r),!0).forEach(function(n){rse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rse(e,t,r){return t=nse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nse(e){var t=ase(e,"string");return Wv(t)=="symbol"?t:t+""}function ase(e,t){if(Wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rp={widthCache:{},cacheCount:0},sse=2e3,ise={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lT="recharts_measurement_span";function ose(e){var t=qk({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ov=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lx.isSsr)return{width:0,height:0};var n=ose(r),s=JSON.stringify({text:t,copyStyle:n});if(Rp.widthCache[s])return Rp.widthCache[s];try{var i=document.getElementById(lT);i||(i=document.createElement("span"),i.setAttribute("id",lT),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=qk(qk({},ise),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Rp.widthCache[s]=c,++Rp.cacheCount>sse&&(Rp.cacheCount=0,Rp.widthCache={}),c}catch{return{width:0,height:0}}},lse=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function Z2(e,t){return fse(e)||dse(e,t)||use(e,t)||cse()}function cse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function use(e,t){if(e){if(typeof e=="string")return cT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cT(e,t)}}function cT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function fse(e){if(Array.isArray(e))return e}function hse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mse(n.key),n)}}function pse(e,t,r){return t&&uT(e.prototype,t),r&&uT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mse(e){var t=xse(e,"string");return Vv(t)=="symbol"?t:t+""}function xse(e,t){if(Vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Q7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},yse=Object.keys(Q7),lm="NaN";function bse(e,t){return e*Q7[t]}var sb=function(){function e(t,r){hse(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!gse.test(r)&&(this.num=NaN,this.unit=""),yse.includes(r)&&(this.num=bse(t,r),this.unit="px")}return pse(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=vse.exec(r))!==null&&n!==void 0?n:[],i=Z2(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function Z7(e){if(e.includes(lm))return lm;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=dT.exec(t))!==null&&r!==void 0?r:[],s=Z2(n,4),i=s[1],o=s[2],l=s[3],c=sb.parse(i??""),u=sb.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return lm;t=t.replace(dT,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,p=(d=fT.exec(t))!==null&&d!==void 0?d:[],h=Z2(p,4),g=h[1],x=h[2],m=h[3],v=sb.parse(g??""),y=sb.parse(m??""),w=x==="+"?v.add(y):v.subtract(y);if(w.isNaN())return lm;t=t.replace(fT,w.toString())}return t}var hT=/\(([^()]*)\)/;function wse(e){for(var t=e;t.includes("(");){var r=hT.exec(t),n=Z2(r,2),s=n[1];t=t.replace(hT,Z7(s))}return t}function Nse(e){var t=e.replace(/\s+/g,"");return t=wse(t),t=Z7(t),t}function jse(e){try{return Nse(e)}catch{return lm}}function kj(e){var t=jse(e.slice(5,-1));return t===lm?"":t}var kse=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Sse=["dx","dy","angle","className","breakAll"];function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hk.apply(this,arguments)}function pT(e,t){if(e==null)return{};var r=_se(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _se(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mT(e,t){return Tse(e)||Ese(e,t)||Cse(e,t)||Ase()}function Ase(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cse(e,t){if(e){if(typeof e=="string")return xT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xT(e,t)}}function xT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ese(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Tse(e){if(Array.isArray(e))return e}var eM=/[ \f\n\r\t\v\u2028\u2029]+/,tM=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];Nn(r)||(n?i=r.toString().split(""):i=r.toString().split(eM));var o=i.map(function(c){return{word:c,width:ov(c,s).width}}),l=n?0:ov("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Ose=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=Qt(o),d=l,p=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(K,G){var Y=G.word,q=G.width,X=K[K.length-1];if(X&&(s==null||i||X.width+q+n<Number(s)))X.words.push(Y),X.width+=q+n;else{var V={words:[Y],width:q};K.push(V)}return K},[])},h=p(r),g=function(B){return B.reduce(function(K,G){return K.width>G.width?K:G})};if(!f)return h;for(var x="",m=function(B){var K=d.slice(0,B),G=tM({breakAll:u,style:c,children:K+x}).wordsWithComputedWidth,Y=p(G),q=Y.length>o||g(Y).width>Number(s);return[q,Y]},v=0,y=d.length-1,w=0,b;v<=y&&w<=d.length-1;){var N=Math.floor((v+y)/2),S=N-1,j=m(S),_=mT(j,2),E=_[0],I=_[1],A=m(N),C=mT(A,1),F=C[0];if(!E&&!F&&(v=N+1),E&&F&&(y=N-1),!E&&F){b=I;break}w++}return b||h},gT=function(t){var r=Nn(t)?[]:t.toString().split(eM);return[{words:r}]},Pse=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Lx.isSsr){var c,u,f=tM({breakAll:o,children:s,style:i});if(f){var d=f.wordsWithComputedWidth,p=f.spaceWidth;c=d,u=p}else return gT(s);return Ose({breakAll:o,children:s,maxLines:l,style:i},c,u,r,n)}return gT(s)},vT="#808080",ew=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,p=t.textAnchor,h=p===void 0?"start":p,g=t.verticalAnchor,x=g===void 0?"end":g,m=t.fill,v=m===void 0?vT:m,y=pT(t,kse),w=D.useMemo(function(){return Pse({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),b=y.dx,N=y.dy,S=y.angle,j=y.className,_=y.breakAll,E=pT(y,Sse);if(!Ws(n)||!Ws(i))return null;var I=n+(Qt(b)?b:0),A=i+(Qt(N)?N:0),C;switch(x){case"start":C=kj("calc(".concat(u,")"));break;case"middle":C=kj("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:C=kj("calc(".concat(w.length-1," * -").concat(l,")"));break}var F=[];if(d){var M=w[0].width,B=y.width;F.push("scale(".concat((Qt(B)?B/M:1)/M,")"))}return S&&F.push("rotate(".concat(S,", ").concat(I,", ").concat(A,")")),F.length&&(E.transform=F.join(" ")),nt.createElement("text",Hk({},vn(E,!0),{x:I,y:A,className:Pn("recharts-text",j),textAnchor:h,fill:v.includes("url")?vT:v}),w.map(function(K,G){var Y=K.words.join(_?"":" ");return nt.createElement("tspan",{x:I,dy:G===0?C:l,key:"".concat(Y,"-").concat(G)},Y)}))};function e0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ise(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function J_(e){let t,r,n;e.length!==2?(t=e0,r=(l,c)=>e0(e(l),c),n=(l,c)=>e(l)-c):(t=e===e0||e===Ise?e:Dse,r=e,n=e);function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=s(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:s,center:o,right:i}}function Dse(){return 0}function rM(e){return e===null?NaN:+e}function*Lse(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Fse=J_(e0),J1=Fse.right;J_(rM).center;class yT extends Map{constructor(t,r=Bse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(bT(this,t))}has(t){return super.has(bT(this,t))}set(t,r){return super.set(Mse(this,t),r)}delete(t){return super.delete(Rse(this,t))}}function bT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Mse({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Rse({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Bse(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $se(e=e0){if(e===e0)return nM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function nM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Use=Math.sqrt(50),zse=Math.sqrt(10),qse=Math.sqrt(2);function tw(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Use?10:i>=zse?5:i>=qse?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?tw(e,t,r*2):[l,c,u]}function Wk(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?tw(t,e,r):tw(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function Vk(e,t,r){return t=+t,e=+e,r=+r,tw(e,t,r)[2]}function Gk(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Vk(t,e,r):Vk(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function wT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function NT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aM(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?nM:$se(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*d/c+p)),g=Math.min(n,Math.floor(t+(c-u)*d/c+p));aM(e,t,h,g,s)}const i=e[t];let o=r,l=n;for(Ng(e,r,t),s(e[n],i)>0&&Ng(e,r,n);o<l;){for(Ng(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Ng(e,r,l):(++l,Ng(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ng(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Hse(e,t,r){if(e=Float64Array.from(Lse(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return NT(e);if(t>=1)return wT(e);var n,s=(n-1)*t,i=Math.floor(s),o=wT(aM(e,i).subarray(0,i+1)),l=NT(e.subarray(i+1));return o+(l-o)*(s-i)}}function Wse(e,t,r=rM){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function Vse(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function gc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Kk=Symbol("implicit");function Q_(){var e=new yT,t=[],r=[],n=Kk;function s(i){let o=e.get(i);if(o===void 0){if(n!==Kk)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new yT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Q_(t,r).unknown(n)},gc.apply(s,arguments),s}function Gv(){var e=Q_().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var p=t().length,h=s<n,g=h?s:n,x=h?n:s;i=(x-g)/Math.max(1,p-c+u*2),l&&(i=Math.floor(i)),g+=(x-g-i*(p-c))*f,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var m=Vse(p).map(function(v){return g+i*v});return r(h?m.reverse():m)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([n,s]=p,n=+n,s=+s,d()):[n,s]},e.rangeRound=function(p){return[n,s]=p,n=+n,s=+s,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,d()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),d()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),d()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},e.copy=function(){return Gv(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(f)},gc.apply(d(),arguments)}function sM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sM(t())},e}function lv(){return sM(Gv.apply(null,arguments).paddingInner(1))}function Z_(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function iM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Q1(){}var Kv=.7,rw=1/Kv,wm="\\s*([+-]?\\d+)\\s*",Xv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gse=/^#([0-9a-f]{3,8})$/,Kse=new RegExp(`^rgb\\(${wm},${wm},${wm}\\)$`),Xse=new RegExp(`^rgb\\(${zu},${zu},${zu}\\)$`),Yse=new RegExp(`^rgba\\(${wm},${wm},${wm},${Xv}\\)$`),Jse=new RegExp(`^rgba\\(${zu},${zu},${zu},${Xv}\\)$`),Qse=new RegExp(`^hsl\\(${Xv},${zu},${zu}\\)$`),Zse=new RegExp(`^hsla\\(${Xv},${zu},${zu},${Xv}\\)$`),jT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Z_(Q1,Yv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kT,formatHex:kT,formatHex8:eie,formatHsl:tie,formatRgb:ST,toString:ST});function kT(){return this.rgb().formatHex()}function eie(){return this.rgb().formatHex8()}function tie(){return oM(this).formatHsl()}function ST(){return this.rgb().formatRgb()}function Yv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Gse.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_T(t):r===3?new Xo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ib(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ib(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kse.exec(e))?new Xo(t[1],t[2],t[3],1):(t=Xse.exec(e))?new Xo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yse.exec(e))?ib(t[1],t[2],t[3],t[4]):(t=Jse.exec(e))?ib(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qse.exec(e))?ET(t[1],t[2]/100,t[3]/100,1):(t=Zse.exec(e))?ET(t[1],t[2]/100,t[3]/100,t[4]):jT.hasOwnProperty(e)?_T(jT[e]):e==="transparent"?new Xo(NaN,NaN,NaN,0):null}function _T(e){return new Xo(e>>16&255,e>>8&255,e&255,1)}function ib(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xo(e,t,r,n)}function rie(e){return e instanceof Q1||(e=Yv(e)),e?(e=e.rgb(),new Xo(e.r,e.g,e.b,e.opacity)):new Xo}function Xk(e,t,r,n){return arguments.length===1?rie(e):new Xo(e,t,r,n??1)}function Xo(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Z_(Xo,Xk,iM(Q1,{brighter(e){return e=e==null?rw:Math.pow(rw,e),new Xo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kv:Math.pow(Kv,e),new Xo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xo(Sh(this.r),Sh(this.g),Sh(this.b),nw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AT,formatHex:AT,formatHex8:nie,formatRgb:CT,toString:CT}));function AT(){return`#${sh(this.r)}${sh(this.g)}${sh(this.b)}`}function nie(){return`#${sh(this.r)}${sh(this.g)}${sh(this.b)}${sh((isNaN(this.opacity)?1:this.opacity)*255)}`}function CT(){const e=nw(this.opacity);return`${e===1?"rgb(":"rgba("}${Sh(this.r)}, ${Sh(this.g)}, ${Sh(this.b)}${e===1?")":`, ${e})`}`}function nw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sh(e){return e=Sh(e),(e<16?"0":"")+e.toString(16)}function ET(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Wc(e,t,r,n)}function oM(e){if(e instanceof Wc)return new Wc(e.h,e.s,e.l,e.opacity);if(e instanceof Q1||(e=Yv(e)),!e)return new Wc;if(e instanceof Wc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Wc(o,l,c,e.opacity)}function aie(e,t,r,n){return arguments.length===1?oM(e):new Wc(e,t,r,n??1)}function Wc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Z_(Wc,aie,iM(Q1,{brighter(e){return e=e==null?rw:Math.pow(rw,e),new Wc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kv:Math.pow(Kv,e),new Wc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Xo(Sj(e>=240?e-240:e+120,s,n),Sj(e,s,n),Sj(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Wc(TT(this.h),ob(this.s),ob(this.l),nw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nw(this.opacity);return`${e===1?"hsl(":"hsla("}${TT(this.h)}, ${ob(this.s)*100}%, ${ob(this.l)*100}%${e===1?")":`, ${e})`}`}}));function TT(e){return e=(e||0)%360,e<0?e+360:e}function ob(e){return Math.max(0,Math.min(1,e||0))}function Sj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const e6=e=>()=>e;function sie(e,t){return function(r){return e+r*t}}function iie(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function oie(e){return(e=+e)==1?lM:function(t,r){return r-t?iie(t,r,e):e6(isNaN(t)?r:t)}}function lM(e,t){var r=t-e;return r?sie(e,r):e6(isNaN(e)?t:e)}const OT=function e(t){var r=oie(t);function n(s,i){var o=r((s=Xk(s)).r,(i=Xk(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=lM(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=u(f),s+""}}return n.gamma=e,n}(1);function lie(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function cie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uie(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Fx(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function die(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function aw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function fie(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Fx(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var Yk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_j=new RegExp(Yk.source,"g");function hie(e){return function(){return e}}function pie(e){return function(t){return e(t)+""}}function mie(e,t){var r=Yk.lastIndex=_j.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Yk.exec(e))&&(s=_j.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:aw(n,s)})),r=_j.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?pie(c[0].x):hie(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function Fx(e,t){var r=typeof t,n;return t==null||r==="boolean"?e6(t):(r==="number"?aw:r==="string"?(n=Yv(t))?(t=n,OT):mie:t instanceof Yv?OT:t instanceof Date?die:cie(t)?lie:Array.isArray(t)?uie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?fie:aw)(e,t)}function t6(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function xie(e,t){t===void 0&&(t=e,e=Fx);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function gie(e){return function(){return e}}function sw(e){return+e}var PT=[0,1];function yo(e){return e}function Jk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:gie(isNaN(t)?NaN:.5)}function vie(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function yie(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Jk(s,n),i=r(o,i)):(n=Jk(n,s),i=r(i,o)),function(l){return i(n(l))}}function bie(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Jk(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=J1(e,l,1,n)-1;return i[c](s[c](l))}}function Z1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function G5(){var e=PT,t=PT,r=Fx,n,s,i,o=yo,l,c,u;function f(){var p=Math.min(e.length,t.length);return o!==yo&&(o=vie(e[0],e[p-1])),l=p>2?bie:yie,c=u=null,d}function d(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(n),t,r)))(n(o(p)))}return d.invert=function(p){return o(s((u||(u=l(t,e.map(n),aw)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,sw),f()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),r=t6,f()},d.clamp=function(p){return arguments.length?(o=p?!0:yo,f()):o!==yo},d.interpolate=function(p){return arguments.length?(r=p,f()):r},d.unknown=function(p){return arguments.length?(i=p,d):i},function(p,h){return n=p,s=h,f()}}function r6(){return G5()(yo,yo)}function wie(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function iw(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function tx(e){return e=iw(Math.abs(e)),e?e[1]:NaN}function Nie(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function jie(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var kie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jv(e){if(!(t=kie.exec(e)))throw new Error("invalid format: "+e);var t;return new n6({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jv.prototype=n6.prototype;function n6(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}n6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sie(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var ow;function _ie(e,t){var r=iw(e,t);if(!r)return ow=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(ow=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+iw(e,Math.max(0,t+i-1))[0]}function IT(e,t){var r=iw(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const DT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wie,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>IT(e*100,t),r:IT,s:_ie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function LT(e){return e}var FT=Array.prototype.map,MT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Aie(e){var t=e.grouping===void 0||e.thousands===void 0?LT:Nie(FT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?LT:jie(FT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d,p){d=Jv(d);var h=d.fill,g=d.align,x=d.sign,m=d.symbol,v=d.zero,y=d.width,w=d.comma,b=d.precision,N=d.trim,S=d.type;S==="n"?(w=!0,S="g"):DT[S]||(b===void 0&&(b=12),N=!0,S="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var j=(p&&p.prefix!==void 0?p.prefix:"")+(m==="$"?r:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),_=(m==="$"?n:/[%p]/.test(S)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),E=DT[S],I=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(C){var F=j,M=_,B,K,G;if(S==="c")M=E(C)+M,C="";else{C=+C;var Y=C<0||1/C<0;if(C=isNaN(C)?c:E(Math.abs(C),b),N&&(C=Sie(C)),Y&&+C==0&&x!=="+"&&(Y=!1),F=(Y?x==="("?x:l:x==="-"||x==="("?"":x)+F,M=(S==="s"&&!isNaN(C)&&ow!==void 0?MT[8+ow/3]:"")+M+(Y&&x==="("?")":""),I){for(B=-1,K=C.length;++B<K;)if(G=C.charCodeAt(B),48>G||G>57){M=(G===46?s+C.slice(B+1):C.slice(B))+M,C=C.slice(0,B);break}}}w&&!v&&(C=t(C,1/0));var q=F.length+C.length+M.length,X=q<y?new Array(y-q+1).join(h):"";switch(w&&v&&(C=t(X+C,X.length?y-M.length:1/0),X=""),g){case"<":C=F+C+M+X;break;case"=":C=F+X+C+M;break;case"^":C=X.slice(0,q=X.length>>1)+F+C+M+X.slice(q);break;default:C=X+F+C+M;break}return i(C)}return A.toString=function(){return d+""},A}function f(d,p){var h=Math.max(-8,Math.min(8,Math.floor(tx(p)/3)))*3,g=Math.pow(10,-h),x=u((d=Jv(d),d.type="f",d),{suffix:MT[8+h/3]});return function(m){return x(g*m)}}return{format:u,formatPrefix:f}}var lb,a6,cM;Cie({thousands:",",grouping:[3],currency:["$",""]});function Cie(e){return lb=Aie(e),a6=lb.format,cM=lb.formatPrefix,lb}function Eie(e){return Math.max(0,-tx(Math.abs(e)))}function Tie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tx(t)/3)))*3-tx(Math.abs(e)))}function Oie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tx(t)-tx(e))+1}function uM(e,t,r,n){var s=Gk(e,t,r),i;switch(n=Jv(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Tie(s,o))&&(n.precision=i),cM(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Oie(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Eie(s))&&(n.precision=i-(n.type==="%")*2);break}}return a6(n)}function v0(e){var t=e.domain;return e.ticks=function(r){var n=t();return Wk(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return uM(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=Vk(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function lw(){var e=r6();return e.copy=function(){return Z1(e,lw())},gc.apply(e,arguments),v0(e)}function dM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,sw),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return dM(e).unknown(t)},e=arguments.length?Array.from(e,sw):[0,1],v0(r)}function fM(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function RT(e){return Math.log(e)}function BT(e){return Math.exp(e)}function Pie(e){return-Math.log(-e)}function Iie(e){return-Math.exp(-e)}function Die(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Lie(e){return e===10?Die:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Fie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $T(e){return(t,r)=>-e(-t,r)}function s6(e){const t=e(RT,BT),r=t.domain;let n=10,s,i;function o(){return s=Fie(n),i=Lie(n),r()[0]<0?(s=$T(s),i=$T(i),e(Pie,Iie)):e(RT,BT),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=s(u),h=s(f),g,x;const m=l==null?10:+l;let v=[];if(!(n%1)&&h-p<m){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<n;++g)if(x=p<0?g/i(-p):g*i(p),!(x<u)){if(x>f)break;v.push(x)}}else for(;p<=h;++p)for(g=n-1;g>=1;--g)if(x=p>0?g/i(-p):g*i(p),!(x<u)){if(x>f)break;v.push(x)}v.length*2<m&&(v=Wk(u,f,m))}else v=Wk(p,h,Math.min(h-p,m)).map(i);return d?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Jv(c)).precision==null&&(c.trim=!0),c=a6(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/i(Math.round(s(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(fM(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function hM(){const e=s6(G5()).domain([1,10]);return e.copy=()=>Z1(e,hM()).base(e.base()),gc.apply(e,arguments),e}function UT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function i6(e){var t=1,r=e(UT(t),zT(t));return r.constant=function(n){return arguments.length?e(UT(t=+n),zT(t)):t},v0(r)}function pM(){var e=i6(G5());return e.copy=function(){return Z1(e,pM()).constant(e.constant())},gc.apply(e,arguments)}function qT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Rie(e){return e<0?-e*e:e*e}function o6(e){var t=e(yo,yo),r=1;function n(){return r===1?e(yo,yo):r===.5?e(Mie,Rie):e(qT(r),qT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},v0(t)}function l6(){var e=o6(G5());return e.copy=function(){return Z1(e,l6()).exponent(e.exponent())},gc.apply(e,arguments),e}function Bie(){return l6.apply(null,arguments).exponent(.5)}function HT(e){return Math.sign(e)*e*e}function $ie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function mM(){var e=r6(),t=[0,1],r=!1,n;function s(i){var o=$ie(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(HT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,sw)).map(HT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return mM(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},gc.apply(s,arguments),v0(s)}function xM(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Wse(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[J1(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(e0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return xM().domain(e).range(t).unknown(n)},gc.apply(i,arguments)}function gM(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[J1(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return gM().domain([e,t]).range(s).unknown(i)},gc.apply(v0(o),arguments)}function vM(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[J1(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return vM().domain(e).range(t).unknown(r)},gc.apply(s,arguments)}const Aj=new Date,Cj=new Date;function Ks(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Ks(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Aj.setTime(+i),Cj.setTime(+o),e(Aj),e(Cj),Math.floor(r(Aj,Cj))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const cw=Ks(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ks(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):cw);cw.range;const gd=1e3,sc=gd*60,vd=sc*60,Rd=vd*24,c6=Rd*7,WT=Rd*30,Ej=Rd*365,ih=Ks(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gd)},(e,t)=>(t-e)/gd,e=>e.getUTCSeconds());ih.range;const u6=Ks(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gd)},(e,t)=>{e.setTime(+e+t*sc)},(e,t)=>(t-e)/sc,e=>e.getMinutes());u6.range;const d6=Ks(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*sc)},(e,t)=>(t-e)/sc,e=>e.getUTCMinutes());d6.range;const f6=Ks(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gd-e.getMinutes()*sc)},(e,t)=>{e.setTime(+e+t*vd)},(e,t)=>(t-e)/vd,e=>e.getHours());f6.range;const h6=Ks(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*vd)},(e,t)=>(t-e)/vd,e=>e.getUTCHours());h6.range;const ey=Ks(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*sc)/Rd,e=>e.getDate()-1);ey.range;const K5=Ks(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rd,e=>e.getUTCDate()-1);K5.range;const yM=Ks(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rd,e=>Math.floor(e/Rd));yM.range;function tp(e){return Ks(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*sc)/c6)}const X5=tp(0),uw=tp(1),Uie=tp(2),zie=tp(3),rx=tp(4),qie=tp(5),Hie=tp(6);X5.range;uw.range;Uie.range;zie.range;rx.range;qie.range;Hie.range;function rp(e){return Ks(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/c6)}const Y5=rp(0),dw=rp(1),Wie=rp(2),Vie=rp(3),nx=rp(4),Gie=rp(5),Kie=rp(6);Y5.range;dw.range;Wie.range;Vie.range;nx.range;Gie.range;Kie.range;const p6=Ks(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p6.range;const m6=Ks(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());m6.range;const Bd=Ks(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ks(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Bd.range;const $d=Ks(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$d.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ks(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});$d.range;function bM(e,t,r,n,s,i){const o=[[ih,1,gd],[ih,5,5*gd],[ih,15,15*gd],[ih,30,30*gd],[i,1,sc],[i,5,5*sc],[i,15,15*sc],[i,30,30*sc],[s,1,vd],[s,3,3*vd],[s,6,6*vd],[s,12,12*vd],[n,1,Rd],[n,2,2*Rd],[r,1,c6],[t,1,WT],[t,3,3*WT],[e,1,Ej]];function l(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const h=d&&typeof d.range=="function"?d:c(u,f,d),g=h?h.range(u,+f+1):[];return p?g.reverse():g}function c(u,f,d){const p=Math.abs(f-u)/d,h=J_(([,,m])=>m).right(o,p);if(h===o.length)return e.every(Gk(u/Ej,f/Ej,d));if(h===0)return cw.every(Math.max(Gk(u,f,d),1));const[g,x]=o[p/o[h-1][2]<o[h][2]/p?h-1:h];return g.every(x)}return[l,c]}const[Xie,Yie]=bM($d,m6,Y5,yM,h6,d6),[Jie,Qie]=bM(Bd,p6,X5,ey,f6,u6);function Tj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Oj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function jg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Zie(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=kg(s),f=Sg(s),d=kg(i),p=Sg(i),h=kg(o),g=Sg(o),x=kg(l),m=Sg(l),v=kg(c),y=Sg(c),w={a:G,A:Y,b:q,B:X,c:null,d:JT,e:JT,f:Noe,g:Poe,G:Doe,H:yoe,I:boe,j:woe,L:wM,m:joe,M:koe,p:V,q:T,Q:eO,s:tO,S:Soe,u:_oe,U:Aoe,V:Coe,w:Eoe,W:Toe,x:null,X:null,y:Ooe,Y:Ioe,Z:Loe,"%":ZT},b={a:R,A:z,b:L,B:H,c:null,d:QT,e:QT,f:Boe,g:Xoe,G:Joe,H:Foe,I:Moe,j:Roe,L:jM,m:$oe,M:Uoe,p:ne,q:se,Q:eO,s:tO,S:zoe,u:qoe,U:Hoe,V:Woe,w:Voe,W:Goe,x:null,X:null,y:Koe,Y:Yoe,Z:Qoe,"%":ZT},N={a:I,A,b:C,B:F,c:M,d:XT,e:XT,f:moe,g:KT,G:GT,H:YT,I:YT,j:doe,L:poe,m:uoe,M:foe,p:E,q:coe,Q:goe,s:voe,S:hoe,u:aoe,U:soe,V:ioe,w:noe,W:ooe,x:B,X:K,y:KT,Y:GT,Z:loe,"%":xoe};w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),b.x=S(r,b),b.X=S(n,b),b.c=S(t,b);function S(Q,re){return function(Ae){var ee=[],Me=-1,ze=0,oe=Q.length,J,je,ce;for(Ae instanceof Date||(Ae=new Date(+Ae));++Me<oe;)Q.charCodeAt(Me)===37&&(ee.push(Q.slice(ze,Me)),(je=VT[J=Q.charAt(++Me)])!=null?J=Q.charAt(++Me):je=J==="e"?" ":"0",(ce=re[J])&&(J=ce(Ae,je)),ee.push(J),ze=Me+1);return ee.push(Q.slice(ze,Me)),ee.join("")}}function j(Q,re){return function(Ae){var ee=jg(1900,void 0,1),Me=_(ee,Q,Ae+="",0),ze,oe;if(Me!=Ae.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(re&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(ze=Oj(jg(ee.y,0,1)),oe=ze.getUTCDay(),ze=oe>4||oe===0?dw.ceil(ze):dw(ze),ze=K5.offset(ze,(ee.V-1)*7),ee.y=ze.getUTCFullYear(),ee.m=ze.getUTCMonth(),ee.d=ze.getUTCDate()+(ee.w+6)%7):(ze=Tj(jg(ee.y,0,1)),oe=ze.getDay(),ze=oe>4||oe===0?uw.ceil(ze):uw(ze),ze=ey.offset(ze,(ee.V-1)*7),ee.y=ze.getFullYear(),ee.m=ze.getMonth(),ee.d=ze.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),oe="Z"in ee?Oj(jg(ee.y,0,1)).getUTCDay():Tj(jg(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(oe+5)%7:ee.w+ee.U*7-(oe+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,Oj(ee)):Tj(ee)}}function _(Q,re,Ae,ee){for(var Me=0,ze=re.length,oe=Ae.length,J,je;Me<ze;){if(ee>=oe)return-1;if(J=re.charCodeAt(Me++),J===37){if(J=re.charAt(Me++),je=N[J in VT?re.charAt(Me++):J],!je||(ee=je(Q,Ae,ee))<0)return-1}else if(J!=Ae.charCodeAt(ee++))return-1}return ee}function E(Q,re,Ae){var ee=u.exec(re.slice(Ae));return ee?(Q.p=f.get(ee[0].toLowerCase()),Ae+ee[0].length):-1}function I(Q,re,Ae){var ee=h.exec(re.slice(Ae));return ee?(Q.w=g.get(ee[0].toLowerCase()),Ae+ee[0].length):-1}function A(Q,re,Ae){var ee=d.exec(re.slice(Ae));return ee?(Q.w=p.get(ee[0].toLowerCase()),Ae+ee[0].length):-1}function C(Q,re,Ae){var ee=v.exec(re.slice(Ae));return ee?(Q.m=y.get(ee[0].toLowerCase()),Ae+ee[0].length):-1}function F(Q,re,Ae){var ee=x.exec(re.slice(Ae));return ee?(Q.m=m.get(ee[0].toLowerCase()),Ae+ee[0].length):-1}function M(Q,re,Ae){return _(Q,t,re,Ae)}function B(Q,re,Ae){return _(Q,r,re,Ae)}function K(Q,re,Ae){return _(Q,n,re,Ae)}function G(Q){return o[Q.getDay()]}function Y(Q){return i[Q.getDay()]}function q(Q){return c[Q.getMonth()]}function X(Q){return l[Q.getMonth()]}function V(Q){return s[+(Q.getHours()>=12)]}function T(Q){return 1+~~(Q.getMonth()/3)}function R(Q){return o[Q.getUTCDay()]}function z(Q){return i[Q.getUTCDay()]}function L(Q){return c[Q.getUTCMonth()]}function H(Q){return l[Q.getUTCMonth()]}function ne(Q){return s[+(Q.getUTCHours()>=12)]}function se(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var re=S(Q+="",w);return re.toString=function(){return Q},re},parse:function(Q){var re=j(Q+="",!1);return re.toString=function(){return Q},re},utcFormat:function(Q){var re=S(Q+="",b);return re.toString=function(){return Q},re},utcParse:function(Q){var re=j(Q+="",!0);return re.toString=function(){return Q},re}}}var VT={"-":"",_:" ",0:"0"},hi=/^\s*\d+/,eoe=/^%/,toe=/[\\^$*+?|[\]().{}]/g;function Mn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function roe(e){return e.replace(toe,"\\$&")}function kg(e){return new RegExp("^(?:"+e.map(roe).join("|")+")","i")}function Sg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function noe(e,t,r){var n=hi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aoe(e,t,r){var n=hi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function soe(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ioe(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ooe(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function GT(e,t,r){var n=hi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function KT(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function loe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function coe(e,t,r){var n=hi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function uoe(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function XT(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function doe(e,t,r){var n=hi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function YT(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function foe(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function hoe(e,t,r){var n=hi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function poe(e,t,r){var n=hi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function moe(e,t,r){var n=hi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function xoe(e,t,r){var n=eoe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function goe(e,t,r){var n=hi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function voe(e,t,r){var n=hi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function JT(e,t){return Mn(e.getDate(),t,2)}function yoe(e,t){return Mn(e.getHours(),t,2)}function boe(e,t){return Mn(e.getHours()%12||12,t,2)}function woe(e,t){return Mn(1+ey.count(Bd(e),e),t,3)}function wM(e,t){return Mn(e.getMilliseconds(),t,3)}function Noe(e,t){return wM(e,t)+"000"}function joe(e,t){return Mn(e.getMonth()+1,t,2)}function koe(e,t){return Mn(e.getMinutes(),t,2)}function Soe(e,t){return Mn(e.getSeconds(),t,2)}function _oe(e){var t=e.getDay();return t===0?7:t}function Aoe(e,t){return Mn(X5.count(Bd(e)-1,e),t,2)}function NM(e){var t=e.getDay();return t>=4||t===0?rx(e):rx.ceil(e)}function Coe(e,t){return e=NM(e),Mn(rx.count(Bd(e),e)+(Bd(e).getDay()===4),t,2)}function Eoe(e){return e.getDay()}function Toe(e,t){return Mn(uw.count(Bd(e)-1,e),t,2)}function Ooe(e,t){return Mn(e.getFullYear()%100,t,2)}function Poe(e,t){return e=NM(e),Mn(e.getFullYear()%100,t,2)}function Ioe(e,t){return Mn(e.getFullYear()%1e4,t,4)}function Doe(e,t){var r=e.getDay();return e=r>=4||r===0?rx(e):rx.ceil(e),Mn(e.getFullYear()%1e4,t,4)}function Loe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Mn(t/60|0,"0",2)+Mn(t%60,"0",2)}function QT(e,t){return Mn(e.getUTCDate(),t,2)}function Foe(e,t){return Mn(e.getUTCHours(),t,2)}function Moe(e,t){return Mn(e.getUTCHours()%12||12,t,2)}function Roe(e,t){return Mn(1+K5.count($d(e),e),t,3)}function jM(e,t){return Mn(e.getUTCMilliseconds(),t,3)}function Boe(e,t){return jM(e,t)+"000"}function $oe(e,t){return Mn(e.getUTCMonth()+1,t,2)}function Uoe(e,t){return Mn(e.getUTCMinutes(),t,2)}function zoe(e,t){return Mn(e.getUTCSeconds(),t,2)}function qoe(e){var t=e.getUTCDay();return t===0?7:t}function Hoe(e,t){return Mn(Y5.count($d(e)-1,e),t,2)}function kM(e){var t=e.getUTCDay();return t>=4||t===0?nx(e):nx.ceil(e)}function Woe(e,t){return e=kM(e),Mn(nx.count($d(e),e)+($d(e).getUTCDay()===4),t,2)}function Voe(e){return e.getUTCDay()}function Goe(e,t){return Mn(dw.count($d(e)-1,e),t,2)}function Koe(e,t){return Mn(e.getUTCFullYear()%100,t,2)}function Xoe(e,t){return e=kM(e),Mn(e.getUTCFullYear()%100,t,2)}function Yoe(e,t){return Mn(e.getUTCFullYear()%1e4,t,4)}function Joe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?nx(e):nx.ceil(e),Mn(e.getUTCFullYear()%1e4,t,4)}function Qoe(){return"+0000"}function ZT(){return"%"}function eO(e){return+e}function tO(e){return Math.floor(+e/1e3)}var Bp,SM,_M;Zoe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zoe(e){return Bp=Zie(e),SM=Bp.format,Bp.parse,_M=Bp.utcFormat,Bp.utcParse,Bp}function ele(e){return new Date(e)}function tle(e){return e instanceof Date?+e:+new Date(+e)}function x6(e,t,r,n,s,i,o,l,c,u){var f=r6(),d=f.invert,p=f.domain,h=u(".%L"),g=u(":%S"),x=u("%I:%M"),m=u("%I %p"),v=u("%a %d"),y=u("%b %d"),w=u("%B"),b=u("%Y");function N(S){return(c(S)<S?h:l(S)<S?g:o(S)<S?x:i(S)<S?m:n(S)<S?s(S)<S?v:y:r(S)<S?w:b)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,tle)):p().map(ele)},f.ticks=function(S){var j=p();return e(j[0],j[j.length-1],S??10)},f.tickFormat=function(S,j){return j==null?N:u(j)},f.nice=function(S){var j=p();return(!S||typeof S.range!="function")&&(S=t(j[0],j[j.length-1],S??10)),S?p(fM(j,S)):f},f.copy=function(){return Z1(f,x6(e,t,r,n,s,i,o,l,c,u))},f}function rle(){return gc.apply(x6(Jie,Qie,Bd,p6,X5,ey,f6,u6,ih,SM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nle(){return gc.apply(x6(Xie,Yie,$d,m6,Y5,K5,h6,d6,ih,_M).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J5(){var e=0,t=1,r,n,s,i,o=yo,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(s===0?.5:(d=(i(d)-r)*s,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(p){var h,g;return arguments.length?([h,g]=p,o=d(h,g),u):[o(0),o(1)]}}return u.range=f(Fx),u.rangeRound=f(t6),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),s=r===n?0:1/(n-r),u}}function y0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AM(){var e=v0(J5()(yo));return e.copy=function(){return y0(e,AM())},Vd.apply(e,arguments)}function CM(){var e=s6(J5()).domain([1,10]);return e.copy=function(){return y0(e,CM()).base(e.base())},Vd.apply(e,arguments)}function EM(){var e=i6(J5());return e.copy=function(){return y0(e,EM()).constant(e.constant())},Vd.apply(e,arguments)}function g6(){var e=o6(J5());return e.copy=function(){return y0(e,g6()).exponent(e.exponent())},Vd.apply(e,arguments)}function ale(){return g6.apply(null,arguments).exponent(.5)}function TM(){var e=[],t=yo;function r(n){if(n!=null&&!isNaN(n=+n))return t((J1(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(e0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Hse(e,i/n))},r.copy=function(){return TM(t).domain(e)},Vd.apply(r,arguments)}function Q5(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=yo,f,d=!1,p;function h(x){return isNaN(x=+x)?p:(x=.5+((x=+f(x))-i)*(n*x<n*i?l:c),u(d?Math.max(0,Math.min(1,x)):x))}h.domain=function(x){return arguments.length?([e,t,r]=x,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h):[e,t,r]},h.clamp=function(x){return arguments.length?(d=!!x,h):d},h.interpolator=function(x){return arguments.length?(u=x,h):u};function g(x){return function(m){var v,y,w;return arguments.length?([v,y,w]=m,u=xie(x,[v,y,w]),h):[u(0),u(.5),u(1)]}}return h.range=g(Fx),h.rangeRound=g(t6),h.unknown=function(x){return arguments.length?(p=x,h):p},function(x){return f=x,s=x(e),i=x(t),o=x(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h}}function OM(){var e=v0(Q5()(yo));return e.copy=function(){return y0(e,OM())},Vd.apply(e,arguments)}function PM(){var e=s6(Q5()).domain([.1,1,10]);return e.copy=function(){return y0(e,PM()).base(e.base())},Vd.apply(e,arguments)}function IM(){var e=i6(Q5());return e.copy=function(){return y0(e,IM()).constant(e.constant())},Vd.apply(e,arguments)}function v6(){var e=o6(Q5());return e.copy=function(){return y0(e,v6()).exponent(e.exponent())},Vd.apply(e,arguments)}function sle(){return v6.apply(null,arguments).exponent(.5)}const rO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Gv,scaleDiverging:OM,scaleDivergingLog:PM,scaleDivergingPow:v6,scaleDivergingSqrt:sle,scaleDivergingSymlog:IM,scaleIdentity:dM,scaleImplicit:Kk,scaleLinear:lw,scaleLog:hM,scaleOrdinal:Q_,scalePoint:lv,scalePow:l6,scaleQuantile:xM,scaleQuantize:gM,scaleRadial:mM,scaleSequential:AM,scaleSequentialLog:CM,scaleSequentialPow:g6,scaleSequentialQuantile:TM,scaleSequentialSqrt:ale,scaleSequentialSymlog:EM,scaleSqrt:Bie,scaleSymlog:pM,scaleThreshold:vM,scaleTime:rle,scaleUtc:nle,tickFormat:uM},Symbol.toStringTag,{value:"Module"}));var ile=_x;function ole(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!ile(o):r(o,l)))var l=o,c=i}return c}var DM=ole;function lle(e,t){return e>t}var cle=lle,ule=DM,dle=cle,fle=Dx;function hle(e){return e&&e.length?ule(e,fle,dle):void 0}var ple=hle;const Bf=sa(ple);function mle(e,t){return e<t}var xle=mle,gle=DM,vle=xle,yle=Dx;function ble(e){return e&&e.length?gle(e,yle,vle):void 0}var wle=ble;const Z5=sa(wle);var Nle=P_,jle=g0,kle=q7,Sle=tl;function _le(e,t){var r=Sle(e)?Nle:kle;return r(e,jle(t))}var Ale=_le,Cle=U7,Ele=Ale;function Tle(e,t){return Cle(Ele(e,t),1)}var Ole=Tle;const Ple=sa(Ole);var Ile=G_;function Dle(e,t){return Ile(e,t)}var LM=Dle;const Qv=sa(LM);var Mx=1e9,Lle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},b6,Fa=!0,hc="[DecimalError] ",_h=hc+"Invalid argument: ",y6=hc+"Exponent out of range: ",Rx=Math.floor,J0=Math.pow,Fle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wl,ai=1e7,Sa=7,FM=9007199254740991,fw=Rx(FM/Sa),wr={};wr.absoluteValue=wr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};wr.comparedTo=wr.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};wr.decimalPlaces=wr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Sa;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};wr.dividedBy=wr.div=function(e){return Cd(this,new this.constructor(e))};wr.dividedToIntegerBy=wr.idiv=function(e){var t=this,r=t.constructor;return oa(Cd(t,new r(e),0,1),r.precision)};wr.equals=wr.eq=function(e){return!this.cmp(e)};wr.exponent=function(){return Os(this)};wr.greaterThan=wr.gt=function(e){return this.cmp(e)>0};wr.greaterThanOrEqualTo=wr.gte=function(e){return this.cmp(e)>=0};wr.isInteger=wr.isint=function(){return this.e>this.d.length-2};wr.isNegative=wr.isneg=function(){return this.s<0};wr.isPositive=wr.ispos=function(){return this.s>0};wr.isZero=function(){return this.s===0};wr.lessThan=wr.lt=function(e){return this.cmp(e)<0};wr.lessThanOrEqualTo=wr.lte=function(e){return this.cmp(e)<1};wr.logarithm=wr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(wl))throw Error(hc+"NaN");if(r.s<1)throw Error(hc+(r.s?"NaN":"-Infinity"));return r.eq(wl)?new n(0):(Fa=!1,t=Cd(Zv(r,i),Zv(e,i),i),Fa=!0,oa(t,s))};wr.minus=wr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?BM(t,e):MM(t,(e.s=-e.s,e))};wr.modulo=wr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(hc+"NaN");return r.s?(Fa=!1,t=Cd(r,e,0,1).times(e),Fa=!0,r.minus(t)):oa(new n(r),s)};wr.naturalExponential=wr.exp=function(){return RM(this)};wr.naturalLogarithm=wr.ln=function(){return Zv(this)};wr.negated=wr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};wr.plus=wr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MM(t,e):BM(t,(e.s=-e.s,e))};wr.precision=wr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(_h+e);if(t=Os(s)+1,n=s.d.length-1,r=n*Sa+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};wr.squareRoot=wr.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(hc+"NaN")}for(e=Os(l),Fa=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Pu(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Rx((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Cd(l,i,o+2)).times(.5),Pu(i.d).slice(0,o)===(t=Pu(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(oa(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Fa=!0,oa(n,r)};wr.times=wr.mul=function(e){var t,r,n,s,i,o,l,c,u,f=this,d=f.constructor,p=f.d,h=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=p.length,u=h.length,c<u&&(i=p,p=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+h[n]*p[s-n-1]+t,i[s--]=l%ai|0,t=l/ai|0;i[s]=(i[s]+t)%ai|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Fa?oa(e,d.precision):e};wr.toDecimalPlaces=wr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Vu(e,0,Mx),t===void 0?t=n.rounding:Vu(t,0,8),oa(r,e+Os(r)+1,t))};wr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=$h(n,!0):(Vu(e,0,Mx),t===void 0?t=s.rounding:Vu(t,0,8),n=oa(new s(n),e+1,t),r=$h(n,!0,e+1)),r};wr.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?$h(s):(Vu(e,0,Mx),t===void 0?t=i.rounding:Vu(t,0,8),n=oa(new i(s),e+Os(s)+1,t),r=$h(n.abs(),!1,e+Os(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};wr.toInteger=wr.toint=function(){var e=this,t=e.constructor;return oa(new t(e),Os(e)+1,t.rounding)};wr.toNumber=function(){return+this};wr.toPower=wr.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(wl);if(l=new c(l),!l.s){if(e.s<1)throw Error(hc+"Infinity");return l}if(l.eq(wl))return l;if(n=c.precision,e.eq(wl))return oa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=FM){for(s=new c(wl),t=Math.ceil(n/Sa+4),Fa=!1;r%2&&(s=s.times(l),aO(s.d,t)),r=Rx(r/2),r!==0;)l=l.times(l),aO(l.d,t);return Fa=!0,e.s<0?new c(wl).div(s):oa(s,n)}}else if(i<0)throw Error(hc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Fa=!1,s=e.times(Zv(l,n+u)),Fa=!0,s=RM(s),s.s=i,s};wr.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Os(s),n=$h(s,r<=i.toExpNeg||r>=i.toExpPos)):(Vu(e,1,Mx),t===void 0?t=i.rounding:Vu(t,0,8),s=oa(new i(s),e,t),r=Os(s),n=$h(s,e<=r||r<=i.toExpNeg,e)),n};wr.toSignificantDigits=wr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Vu(e,1,Mx),t===void 0?t=n.rounding:Vu(t,0,8)),oa(new n(r),e,t)};wr.toString=wr.valueOf=wr.val=wr.toJSON=wr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Os(e),r=e.constructor;return $h(e,t<=r.toExpNeg||t>=r.toExpPos)};function MM(e,t){var r,n,s,i,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Fa?oa(t,d):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(d/Sa),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/ai|0,c[i]%=ai;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Fa?oa(t,d):t}function Vu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(_h+e)}function Pu(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Sa-n.length,r&&(i+=jf(r)),i+=n;o=e[t],n=o+"",r=Sa-n.length,r&&(i+=jf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Cd=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%ai|0,o=i/ai|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*ai+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,f,d,p,h,g,x,m,v,y,w,b,N,S,j,_,E=n.constructor,I=n.s==s.s?1:-1,A=n.d,C=s.d;if(!n.s)return new E(n);if(!s.s)throw Error(hc+"Division by zero");for(c=n.e-s.e,j=C.length,N=A.length,h=new E(I),g=h.d=[],u=0;C[u]==(A[u]||0);)++u;if(C[u]>(A[u]||0)&&--c,i==null?y=i=E.precision:o?y=i+(Os(n)-Os(s))+1:y=i,y<0)return new E(0);if(y=y/Sa+2|0,u=0,j==1)for(f=0,C=C[0],y++;(u<N||f)&&y--;u++)w=f*ai+(A[u]||0),g[u]=w/C|0,f=w%C|0;else{for(f=ai/(C[0]+1)|0,f>1&&(C=e(C,f),A=e(A,f),j=C.length,N=A.length),b=j,x=A.slice(0,j),m=x.length;m<j;)x[m++]=0;_=C.slice(),_.unshift(0),S=C[0],C[1]>=ai/2&&++S;do f=0,l=t(C,x,j,m),l<0?(v=x[0],j!=m&&(v=v*ai+(x[1]||0)),f=v/S|0,f>1?(f>=ai&&(f=ai-1),d=e(C,f),p=d.length,m=x.length,l=t(d,x,p,m),l==1&&(f--,r(d,j<p?_:C,p))):(f==0&&(l=f=1),d=C.slice()),p=d.length,p<m&&d.unshift(0),r(x,d,m),l==-1&&(m=x.length,l=t(C,x,j,m),l<1&&(f++,r(x,j<m?_:C,m))),m=x.length):l===0&&(f++,x=[0]),g[u++]=f,l&&x[0]?x[m++]=A[b]||0:(x=[A[b]],m=1);while((b++<N||x[0]!==void 0)&&y--)}return g[0]||g.shift(),h.e=c,oa(h,o?i+Os(h)+1:i)}}();function RM(e,t){var r,n,s,i,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(Os(e)>16)throw Error(y6+Os(e));if(!e.s)return new f(wl);for(Fa=!1,l=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(J0(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new f(wl),f.precision=l;;){if(s=oa(s.times(e),l),r=r.times(++c),o=i.plus(Cd(s,r,l)),Pu(o.d).slice(0,l)===Pu(i.d).slice(0,l)){for(;u--;)i=oa(i.times(i),l);return f.precision=d,t==null?(Fa=!0,oa(i,d)):i}i=o}}function Os(e){for(var t=e.e*Sa,r=e.d[0];r>=10;r/=10)t++;return t}function Pj(e,t,r){if(t>e.LN10.sd())throw Fa=!0,r&&(e.precision=r),Error(hc+"LN10 precision limit exceeded");return oa(new e(e.LN10),t)}function jf(e){for(var t="";e--;)t+="0";return t}function Zv(e,t){var r,n,s,i,o,l,c,u,f,d=1,p=10,h=e,g=h.d,x=h.constructor,m=x.precision;if(h.s<1)throw Error(hc+(h.s?"NaN":"-Infinity"));if(h.eq(wl))return new x(0);if(t==null?(Fa=!1,u=m):u=t,h.eq(10))return t==null&&(Fa=!0),Pj(x,u);if(u+=p,x.precision=u,r=Pu(g),n=r.charAt(0),i=Os(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Pu(h.d),n=r.charAt(0),d++;i=Os(h),n>1?(h=new x("0."+r),i++):h=new x(n+"."+r.slice(1))}else return c=Pj(x,u+2,m).times(i+""),h=Zv(new x(n+"."+r.slice(1)),u-p).plus(c),x.precision=m,t==null?(Fa=!0,oa(h,m)):h;for(l=o=h=Cd(h.minus(wl),h.plus(wl),u),f=oa(h.times(h),u),s=3;;){if(o=oa(o.times(f),u),c=l.plus(Cd(o,new x(s),u)),Pu(c.d).slice(0,u)===Pu(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Pj(x,u+2,m).times(i+""))),l=Cd(l,new x(d),u),x.precision=m,t==null?(Fa=!0,oa(l,m)):l;l=c,s+=2}}function nO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Rx(r/Sa),e.d=[],n=(r+1)%Sa,r<0&&(n+=Sa),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Sa;n<s;)e.d.push(+t.slice(n,n+=Sa));t=t.slice(n),n=Sa-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Fa&&(e.e>fw||e.e<-fw))throw Error(y6+r)}else e.s=0,e.e=0,e.d=[0];return e}function oa(e,t,r){var n,s,i,o,l,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Sa,s=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Sa),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Sa,s=n-Sa+o}if(r!==void 0&&(i=J0(10,o-s-1),l=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/J0(10,o-s):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=Os(e),d.length=1,t=t-i-1,d[0]=J0(10,(Sa-t%Sa)%Sa),e.e=Rx(-t/Sa)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=J0(10,Sa-n),d[f]=s>0?(u/J0(10,o-s)%J0(10,s)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==ai&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=ai)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(Fa&&(e.e>fw||e.e<-fw))throw Error(y6+Os(e));return e}function BM(e,t){var r,n,s,i,o,l,c,u,f,d,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Fa?oa(t,h):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),s=Math.max(Math.ceil(h/Sa),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=d.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=d[s]){f=c[s]<d[s];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,s=d.length-l;s>0;--s)c[l++]=0;for(s=d.length;s>o;){if(c[--s]<d[s]){for(i=s;i&&c[--i]===0;)c[i]=ai-1;--c[i],c[s]+=ai}c[s]-=d[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Fa?oa(t,h):t):new p(0)}function $h(e,t,r){var n,s=Os(e),i=Pu(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+jf(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+jf(-s-1)+i,r&&(n=r-o)>0&&(i+=jf(n))):s>=o?(i+=jf(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+jf(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=jf(n))),e.s<0?"-"+i:i}function aO(e,t){if(e.length>t)return e.length=t,!0}function $M(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(_h+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return nO(o,i.toString())}else if(typeof i!="string")throw Error(_h+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Fle.test(i))nO(o,i);else throw Error(_h+i)}if(s.prototype=wr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=$M,s.config=s.set=Mle,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Mle(e){if(!e||typeof e!="object")throw Error(hc+"Object expected");var t,r,n,s=["precision",1,Mx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Rx(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(_h+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(_h+r+": "+n);return this}var b6=$M(Lle);wl=new b6(1);const na=b6;function Rle(e){return zle(e)||Ule(e)||$le(e)||Ble()}function Ble(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $le(e,t){if(e){if(typeof e=="string")return Qk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qk(e,t)}}function Ule(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zle(e){if(Array.isArray(e))return Qk(e)}function Qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qle=function(t){return t},UM={},zM=function(t){return t===UM},sO=function(t){return function r(){return arguments.length===0||arguments.length===1&&zM(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Hle=function e(t,r){return t===1?r:sO(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==UM}).length;return o>=t?r.apply(void 0,s):e(t-o,sO(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=s.map(function(d){return zM(d)?c.shift():d});return r.apply(void 0,Rle(f).concat(c))}))})},eN=function(t){return Hle(t.length,t)},Zk=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},Wle=eN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Vle=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return qle;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},e3=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},qM=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Gle(e){var t;return e===0?t=1:t=Math.floor(new na(e).abs().log(10).toNumber())+1,t}function Kle(e,t,r){for(var n=new na(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var Xle=eN(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),Yle=eN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Jle=eN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const tN={rangeStep:Kle,getDigitCount:Gle,interpolateNumber:Xle,uninterpolateNumber:Yle,uninterpolateTruncation:Jle};function t3(e){return ece(e)||Zle(e)||HM(e)||Qle()}function Qle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zle(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ece(e){if(Array.isArray(e))return r3(e)}function e1(e,t){return nce(e)||rce(e,t)||HM(e,t)||tce()}function tce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HM(e,t){if(e){if(typeof e=="string")return r3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r3(e,t)}}function r3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rce(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function nce(e){if(Array.isArray(e))return e}function WM(e){var t=e1(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function VM(e,t,r){if(e.lte(0))return new na(0);var n=tN.getDigitCount(e.toNumber()),s=new na(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new na(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new na(Math.ceil(c))}function ace(e,t,r){var n=1,s=new na(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new na(10).pow(tN.getDigitCount(e)-1),s=new na(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new na(Math.floor(e)))}else e===0?s=new na(Math.floor((t-1)/2)):r||(s=new na(Math.floor(e)));var o=Math.floor((t-1)/2),l=Vle(Wle(function(c){return s.add(new na(c-o).mul(n)).toNumber()}),Zk);return l(0,t)}function GM(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new na(0),tickMin:new na(0),tickMax:new na(0)};var i=VM(new na(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new na(0):(o=new na(e).add(t).div(2),o=o.sub(new na(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new na(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?GM(e,t,r,n,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new na(l).mul(i)),tickMax:o.add(new na(c).mul(i))})}function sce(e){var t=e1(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=WM([r,n]),c=e1(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(t3(Zk(0,s-1).map(function(){return 1/0}))):[].concat(t3(Zk(0,s-1).map(function(){return-1/0})),[f]);return r>n?e3(d):d}if(u===f)return ace(u,s,i);var p=GM(u,f,o,i),h=p.step,g=p.tickMin,x=p.tickMax,m=tN.rangeStep(g,x.add(new na(.1).mul(h)),h);return r>n?e3(m):m}function ice(e,t){var r=e1(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=WM([n,s]),l=e1(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var f=Math.max(t,2),d=VM(new na(u).sub(c).div(f-1),i,0),p=[].concat(t3(tN.rangeStep(new na(c),new na(u).sub(new na(.99).mul(d)),d)),[u]);return n>s?e3(p):p}var oce=qM(sce),lce=qM(ice),cce="Invariant failed";function Uh(e,t){throw new Error(cce)}var uce=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ax(e){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(e)}function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hw.apply(this,arguments)}function dce(e,t){return mce(e)||pce(e,t)||hce(e,t)||fce()}function fce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hce(e,t){if(e){if(typeof e=="string")return iO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iO(e,t)}}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pce(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mce(e){if(Array.isArray(e))return e}function xce(e,t){if(e==null)return{};var r=gce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YM(n.key),n)}}function bce(e,t,r){return t&&yce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wce(e,t,r){return t=pw(t),Nce(e,KM()?Reflect.construct(t,r||[],pw(e).constructor):t.apply(e,r))}function Nce(e,t){if(t&&(ax(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jce(e)}function jce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KM=function(){return!!e})()}function pw(e){return pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pw(e)}function kce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n3(e,t)}function n3(e,t){return n3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},n3(e,t)}function XM(e,t,r){return t=YM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YM(e){var t=Sce(e,"string");return ax(t)=="symbol"?t:t+""}function Sce(e,t){if(ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rN=function(e){function t(){return vce(this,t),wce(this,t,arguments)}return kce(t,e),bce(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,p=xce(n,uce),h=vn(p,!1);this.props.direction==="x"&&f.type!=="number"&&Uh();var g=c.map(function(x){var m=u(x,l),v=m.x,y=m.y,w=m.value,b=m.errorVal;if(!b)return null;var N=[],S,j;if(Array.isArray(b)){var _=dce(b,2);S=_[0],j=_[1]}else S=j=b;if(i==="vertical"){var E=f.scale,I=y+s,A=I+o,C=I-o,F=E(w-S),M=E(w+j);N.push({x1:M,y1:A,x2:M,y2:C}),N.push({x1:F,y1:I,x2:M,y2:I}),N.push({x1:F,y1:A,x2:F,y2:C})}else if(i==="horizontal"){var B=d.scale,K=v+s,G=K-o,Y=K+o,q=B(w-S),X=B(w+j);N.push({x1:G,y1:X,x2:Y,y2:X}),N.push({x1:K,y1:q,x2:K,y2:X}),N.push({x1:G,y1:q,x2:Y,y2:q})}return nt.createElement(qa,hw({className:"recharts-errorBar",key:"bar-".concat(N.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},h),N.map(function(V){return nt.createElement("line",hw({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return nt.createElement(qa,{className:"recharts-errorBars"},g)}}])}(nt.Component);XM(rN,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});XM(rN,"displayName","ErrorBar");function t1(e){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t1(e)}function oO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(r),!0).forEach(function(n){_ce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ce(e,t,r){return t=Ace(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ace(e){var t=Cce(e,"string");return t1(t)=="symbol"?t:t+""}function Cce(e,t){if(t1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(t1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JM=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=vl(r,bm);if(!o)return null;var l=bm.defaultProps,c=l!==void 0?W0(W0({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var p=d.item,h=d.props,g=h.sectors||h.data||[];return f.concat(g.map(function(x){return{type:o.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(n||[]).map(function(f){var d=f.item,p=d.type.defaultProps,h=p!==void 0?W0(W0({},p),d.props):{},g=h.dataKey,x=h.name,m=h.legendType,v=h.hide;return{inactive:v,dataKey:g,type:c.iconType||m||"square",color:w6(d),value:x||g,payload:h}}),W0(W0(W0({},c),bm.getWithHeight(o,s)),{},{payload:u,item:o})};function r1(e){"@babel/helpers - typeof";return r1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r1(e)}function lO(e){return Pce(e)||Oce(e)||Tce(e)||Ece()}function Ece(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tce(e,t){if(e){if(typeof e=="string")return a3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a3(e,t)}}function Oce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pce(e){if(Array.isArray(e))return a3(e)}function a3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){Nm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nm(e,t,r){return t=Ice(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ice(e){var t=Dce(e,"string");return r1(t)=="symbol"?t:t+""}function Dce(e,t){if(r1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(r1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tl(e,t,r){return Nn(e)||Nn(t)?r:Ws(t)?cc(e,t,r):sn(t)?t(e):r}function cv(e,t,r,n){var s=Ple(e,function(l){return Tl(l,t)});if(r==="number"){var i=s.filter(function(l){return Qt(l)||parseFloat(l)});return i.length?[Z5(i),Bf(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Nn(l)}):s;return o.map(function(l){return Ws(l)||l instanceof Date?l:""})}var Lce=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,d=s[u].coordinate,p=u>=l-1?s[0].coordinate:s[u+1].coordinate,h=void 0;if(Vc(d-f)!==Vc(p-d)){var g=[];if(Vc(p-d)===Vc(c[1]-c[0])){h=p;var x=d+c[1]-c[0];g[0]=Math.min(x,(x+f)/2),g[1]=Math.max(x,(x+f)/2)}else{h=f;var m=p+c[1]-c[0];g[0]=Math.min(d,(m+d)/2),g[1]=Math.max(d,(m+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(t>v[0]&&t<=v[1]||t>=g[0]&&t<=g[1]){o=s[u].index;break}}else{var y=Math.min(f,p),w=Math.max(f,p);if(t>(y+d)/2&&t<=(w+d)/2){o=s[u].index;break}}}else for(var b=0;b<l;b++)if(b===0&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<l-1&&t>(n[b].coordinate+n[b-1].coordinate)/2&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b===l-1&&t>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}return o},w6=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?is(is({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Fce=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var f=i[l[c]].stackGroups,d=Object.keys(f),p=0,h=d.length;p<h;p++){var g=f[d[p]],x=g.items,m=g.cateAxisId,v=x.filter(function(j){return _d(j.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,w=y!==void 0?is(is({},y),v[0].props):v[0].props,b=w.barSize,N=w[m];o[N]||(o[N]=[]);var S=Nn(b)?r:b;o[N].push({item:v[0],stackList:v.slice(1),barSize:Nn(S)?void 0:Bh(S,n,0)})}}return o},Mce=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Bh(r,s,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,h=s/c,g=o.reduce(function(b,N){return b+N.barSize||0},0);g+=(c-1)*u,g>=s&&(g-=(c-1)*u,u=0),g>=s&&h>0&&(p=!0,h*=.9,g=c*h);var x=(s-g)/2>>0,m={offset:x-u,size:0};f=o.reduce(function(b,N){var S={item:N.item,position:{offset:m.offset+m.size+u,size:p?h:N.barSize}},j=[].concat(lO(b),[S]);return m=j[j.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(_){j.push({item:_,position:m})}),j},d)}else{var v=Bh(n,s,0,!0);s-2*v-(c-1)*u<=0&&(u=0);var y=(s-2*v-(c-1)*u)/c;y>1&&(y>>=0);var w=l===+l?Math.min(y,l):y;f=o.reduce(function(b,N,S){var j=[].concat(lO(b),[{item:N.item,position:{offset:v+(y+u)*S+(y-w)/2,size:w}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(_){j.push({item:_,position:j[j.length-1].position})}),j},d)}return f},Rce=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=JM({children:i,legendWidth:c});if(u){var f=s||{},d=f.width,p=f.height,h=u.align,g=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&g==="middle")&&h!=="center"&&Qt(t[h]))return is(is({},t),{},Nm({},h,t[h]+(d||0)));if((x==="horizontal"||x==="vertical"&&h==="center")&&g!=="middle"&&Qt(t[g]))return is(is({},t),{},Nm({},g,t[g]+(p||0)))}return t},Bce=function(t,r,n){return Nn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},QM=function(t,r,n,s,i){var o=r.props.children,l=Qc(o,rN).filter(function(u){return Bce(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Tl(f,n);if(Nn(d))return u;var p=Array.isArray(d)?[Z5(d),Bf(d)]:[d,d],h=c.reduce(function(g,x){var m=Tl(f,x,0),v=p[0]-Math.abs(Array.isArray(m)?m[0]:m),y=p[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},$ce=function(t,r,n,s,i){var o=r.map(function(l){return QM(t,l,n,i,s)}).filter(function(l){return!Nn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},ZM=function(t,r,n,s,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&QM(t,c,u,s)||cv(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},e9=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},t9=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},yd=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Vc(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var p=i?i.indexOf(d):d;return{coordinate:s(p)+u,value:d,offset:u}});return f.filter(function(d){return!Ox(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,p){return{coordinate:s(d)+u,value:d,index:p,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,p){return{coordinate:s(d)+u,value:i?i[d]:d,index:p,offset:u}})},Ij=new WeakMap,cb=function(t,r){if(typeof r!="function")return t;Ij.has(t)||Ij.set(t,new WeakMap);var n=Ij.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},Uce=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Gv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:lw(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:lv(),realScaleType:"point"}:i==="category"?{scale:Gv(),realScaleType:"band"}:{scale:lw(),realScaleType:"linear"};if(Rh(s)){var c="scale".concat($5(s));return{scale:(rO[c]||lv)(),realScaleType:rO[c]?c:"point"}}return sn(s)?{scale:s}:{scale:lv(),realScaleType:"point"}},uO=1e-4,zce=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-uO,o=Math.max(s[0],s[1])+uO,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},qce=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},Hce=function(t,r){if(!r||r.length!==2||!Qt(r[0])||!Qt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Qt(t[0])||t[0]<n)&&(i[0]=n),(!Qt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},Wce=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Ox(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},Vce=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Ox(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Gce={sign:Wce,expand:lY,none:Ym,silhouette:cY,wiggle:uY,positive:Vce},Kce=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=Gce[n],o=oY().keys(s).value(function(l,c){return+Tl(l,c,0)}).order(Ek).offset(i);return o(t)},Xce=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,p){var h,g=(h=p.type)!==null&&h!==void 0&&h.defaultProps?is(is({},p.type.defaultProps),p.props):p.props,x=g.stackId,m=g.hide;if(m)return d;var v=g[n],y=d[v]||{hasStack:!1,stackGroups:{}};if(Ws(x)){var w=y.stackGroups[x]||{numericAxisId:n,cateAxisId:s,items:[]};w.items.push(p),y.hasStack=!0,y.stackGroups[x]=w}else y.stackGroups[X1("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[p]};return is(is({},d),{},Nm({},v,y))},c),f={};return Object.keys(u).reduce(function(d,p){var h=u[p];if(h.hasStack){var g={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(x,m){var v=h.stackGroups[m];return is(is({},x),{},Nm({},m,{numericAxisId:n,cateAxisId:s,items:v.items,stackedData:Kce(t,v.items,i)}))},g)}return is(is({},d),{},Nm({},p,h))},f)},Yce=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=oce(u,i,l);return t.domain([Z5(f),Bf(f)]),{niceTicks:f}}if(i&&s==="number"){var d=t.domain(),p=lce(d,i,l);return{niceTicks:p}}return null};function dO(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Nn(s[t.dataKey])){var l=R2(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Tl(s,Nn(o)?t.dataKey:o);return Nn(c)?null:t.scale(c)}var fO=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=Tl(o,r.dataKey,r.domain[l]);return Nn(c)?null:r.scale(c)-i/2+s},Jce=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},Qce=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?is(is({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Ws(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Zce=function(t){return t.reduce(function(r,n){return[Z5(n.concat([r[0]]).filter(Qt)),Bf(n.concat([r[1]]).filter(Qt))]},[1/0,-1/0])},r9=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,f){var d=Zce(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},hO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,s3=function(t,r,n){if(sn(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(Qt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(hO.test(t[0])){var i=+hO.exec(t[0])[1];s[0]=r[0]-i}else sn(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Qt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(pO.test(t[1])){var o=+pO.exec(t[1])[1];s[1]=r[1]+o}else sn(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},mw=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=X_(r,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},mO=function(t,r,n){return!t||!t.length||Qv(t,cc(n,"type.defaultProps.domain"))?r:t},n9=function(t,r){var n=t.type.defaultProps?is(is({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return is(is({},vn(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:w6(t),value:Tl(r,s),type:c,payload:r,chartType:u,hide:f})};function n1(e){"@babel/helpers - typeof";return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n1(e)}function xO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(r),!0).forEach(function(n){eue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eue(e,t,r){return t=tue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tue(e){var t=rue(e,"string");return n1(t)=="symbol"?t:t+""}function rue(e,t){if(n1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(n1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xw=Math.PI/180,nue=function(t){return t*180/Math.PI},ki=function(t,r,n,s){return{x:t+Math.cos(-xw*s)*n,y:r+Math.sin(-xw*s)*n}},aue=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},sue=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=aue({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:nue(u),angleInRadian:u}},iue=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},oue=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},vO=function(t,r){var n=t.x,s=t.y,i=sue({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=iue(r),d=f.startAngle,p=f.endAngle,h=l,g;if(d<=p){for(;h>p;)h-=360;for(;h<d;)h+=360;g=h>=d&&h<=p}else{for(;h>d;)h-=360;for(;h<p;)h+=360;g=h>=p&&h<=d}return g?gO(gO({},r),{},{radius:o,angle:oue(h,r)}):null};function a1(e){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a1(e)}var lue=["offset"];function cue(e){return hue(e)||fue(e)||due(e)||uue()}function uue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function due(e,t){if(e){if(typeof e=="string")return i3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i3(e,t)}}function fue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hue(e){if(Array.isArray(e))return i3(e)}function i3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pue(e,t){if(e==null)return{};var r=mue(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(n){xue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xue(e,t,r){return t=gue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gue(e){var t=vue(e,"string");return a1(t)=="symbol"?t:t+""}function vue(e,t){if(a1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(a1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s1.apply(this,arguments)}var yue=function(t){var r=t.value,n=t.formatter,s=Nn(t.children)?r:t.children;return sn(n)?n(s):s},bue=function(t,r){var n=Vc(r-t),s=Math.min(Math.abs(r-t),360);return n*s},wue=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,p=c.outerRadius,h=c.startAngle,g=c.endAngle,x=c.clockWise,m=(d+p)/2,v=bue(h,g),y=v>=0?1:-1,w,b;s==="insideStart"?(w=h+y*o,b=x):s==="insideEnd"?(w=g-y*o,b=!x):s==="end"&&(w=g+y*o,b=x),b=v<=0?b:!b;var N=ki(u,f,m,w),S=ki(u,f,m,w+(b?1:-1)*359),j="M".concat(N.x,",").concat(N.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(b?0:1,`,
    `).concat(S.x,",").concat(S.y),_=Nn(t.id)?X1("recharts-radial-line-"):t.id;return nt.createElement("text",s1({},n,{dominantBaseline:"central",className:Pn("recharts-radial-bar-label",l)}),nt.createElement("defs",null,nt.createElement("path",{id:_,d:j})),nt.createElement("textPath",{xlinkHref:"#".concat(_)},r))},Nue=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,p=(f+d)/2;if(s==="outside"){var h=ki(o,l,u+n,p),g=h.x,x=h.y;return{x:g,y:x,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var m=(c+u)/2,v=ki(o,l,m,p),y=v.x,w=v.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},jue=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,p=d*s,h=d>0?"end":"start",g=d>0?"start":"end",x=u>=0?1:-1,m=x*s,v=x>0?"end":"start",y=x>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-d*s,textAnchor:"middle",verticalAnchor:h};return Bs(Bs({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var b={x:l+u/2,y:c+f+p,textAnchor:"middle",verticalAnchor:g};return Bs(Bs({},b),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var N={x:l-m,y:c+f/2,textAnchor:v,verticalAnchor:"middle"};return Bs(Bs({},N),n?{width:Math.max(N.x-n.x,0),height:f}:{})}if(i==="right"){var S={x:l+u+m,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return Bs(Bs({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:f}:{})}var j=n?{width:u,height:f}:{};return i==="insideLeft"?Bs({x:l+m,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},j):i==="insideRight"?Bs({x:l+u-m,y:c+f/2,textAnchor:v,verticalAnchor:"middle"},j):i==="insideTop"?Bs({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:g},j):i==="insideBottom"?Bs({x:l+u/2,y:c+f-p,textAnchor:"middle",verticalAnchor:h},j):i==="insideTopLeft"?Bs({x:l+m,y:c+p,textAnchor:y,verticalAnchor:g},j):i==="insideTopRight"?Bs({x:l+u-m,y:c+p,textAnchor:v,verticalAnchor:g},j):i==="insideBottomLeft"?Bs({x:l+m,y:c+f-p,textAnchor:y,verticalAnchor:h},j):i==="insideBottomRight"?Bs({x:l+u-m,y:c+f-p,textAnchor:v,verticalAnchor:h},j):Ax(i)&&(Qt(i.x)||ah(i.x))&&(Qt(i.y)||ah(i.y))?Bs({x:l+Bh(i.x,u),y:c+Bh(i.y,f),textAnchor:"end",verticalAnchor:"end"},j):Bs({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},j)},kue=function(t){return"cx"in t&&Qt(t.cx)};function Ki(e){var t=e.offset,r=t===void 0?5:t,n=pue(e,lue),s=Bs({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,f=s.className,d=f===void 0?"":f,p=s.textBreakAll;if(!i||Nn(l)&&Nn(c)&&!D.isValidElement(u)&&!sn(u))return null;if(D.isValidElement(u))return D.cloneElement(u,s);var h;if(sn(u)){if(h=D.createElement(u,s),D.isValidElement(h))return h}else h=yue(s);var g=kue(i),x=vn(s,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return wue(s,h,x);var m=g?Nue(s):jue(s);return nt.createElement(ew,s1({className:Pn("recharts-label",d)},x,m,{breakAll:p}),h)}Ki.displayName="Label";var a9=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,p=t.y,h=t.top,g=t.left,x=t.width,m=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(Qt(x)&&Qt(m)){if(Qt(d)&&Qt(p))return{x:d,y:p,width:x,height:m};if(Qt(h)&&Qt(g))return{x:h,y:g,width:x,height:m}}return Qt(d)&&Qt(p)?{x:d,y:p,width:0,height:0}:Qt(r)&&Qt(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Sue=function(t,r){return t?t===!0?nt.createElement(Ki,{key:"label-implicit",viewBox:r}):Ws(t)?nt.createElement(Ki,{key:"label-implicit",viewBox:r,value:t}):D.isValidElement(t)?t.type===Ki?D.cloneElement(t,{key:"label-implicit",viewBox:r}):nt.createElement(Ki,{key:"label-implicit",content:t,viewBox:r}):sn(t)?nt.createElement(Ki,{key:"label-implicit",content:t,viewBox:r}):Ax(t)?nt.createElement(Ki,s1({viewBox:r},t,{key:"label-implicit"})):null:null},_ue=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=a9(t),o=Qc(s,Ki).map(function(c,u){return D.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=Sue(t.label,r||i);return[l].concat(cue(o))};Ki.parseViewBox=a9;Ki.renderCallByParent=_ue;function Aue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Cue=Aue;const Eue=sa(Cue);function i1(e){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i1(e)}var Tue=["valueAccessor"],Oue=["data","dataKey","clockWise","id","textBreakAll"];function Pue(e){return Fue(e)||Lue(e)||Due(e)||Iue()}function Iue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Due(e,t){if(e){if(typeof e=="string")return o3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o3(e,t)}}function Lue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fue(e){if(Array.isArray(e))return o3(e)}function o3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gw.apply(this,arguments)}function bO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(r),!0).forEach(function(n){Mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mue(e,t,r){return t=Rue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rue(e){var t=Bue(e,"string");return i1(t)=="symbol"?t:t+""}function Bue(e,t){if(i1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(i1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NO(e,t){if(e==null)return{};var r=$ue(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Uue=function(t){return Array.isArray(t.value)?Eue(t.value):t.value};function t0(e){var t=e.valueAccessor,r=t===void 0?Uue:t,n=NO(e,Tue),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=NO(n,Oue);return!s||!s.length?null:nt.createElement(qa,{className:"recharts-label-list"},s.map(function(f,d){var p=Nn(i)?r(f,d):Tl(f&&f.payload,i),h=Nn(l)?{}:{id:"".concat(l,"-").concat(d)};return nt.createElement(Ki,gw({},vn(f,!0),u,h,{parentViewBox:f.parentViewBox,value:p,textBreakAll:c,viewBox:Ki.parseViewBox(Nn(o)?f:wO(wO({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}t0.displayName="LabelList";function zue(e,t){return e?e===!0?nt.createElement(t0,{key:"labelList-implicit",data:t}):nt.isValidElement(e)||sn(e)?nt.createElement(t0,{key:"labelList-implicit",data:t,content:e}):Ax(e)?nt.createElement(t0,gw({data:t},e,{key:"labelList-implicit"})):null:null}function que(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Qc(n,t0).map(function(o,l){return D.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=zue(e.label,t);return[i].concat(Pue(s))}t0.renderCallByParent=que;function o1(e){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o1(e)}function l3(){return l3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l3.apply(this,arguments)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(n){Hue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hue(e,t,r){return t=Wue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wue(e){var t=Vue(e,"string");return o1(t)=="symbol"?t:t+""}function Vue(e,t){if(o1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(o1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gue=function(t,r){var n=Vc(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},ub=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+s,d=Math.asin(c/f)/xw,p=u?i:i+o*d,h=ki(r,n,f,p),g=ki(r,n,s,p),x=u?i-o*d:i,m=ki(r,n,f*Math.cos(d*xw),x);return{center:h,circleTangency:g,lineTangency:m,theta:d}},s9=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Gue(o,l),u=o+c,f=ki(r,n,i,o),d=ki(r,n,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var h=ki(r,n,s,o),g=ki(r,n,s,u);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},Kue=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Vc(f-u),p=ub({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),h=p.circleTangency,g=p.lineTangency,x=p.theta,m=ub({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),v=m.circleTangency,y=m.lineTangency,w=m.theta,b=c?Math.abs(u-f):Math.abs(u-f)-x-w;if(b<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):s9({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var N="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var S=ub({cx:r,cy:n,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=S.circleTangency,_=S.lineTangency,E=S.theta,I=ub({cx:r,cy:n,radius:s,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=I.circleTangency,C=I.lineTangency,F=I.theta,M=c?Math.abs(u-f):Math.abs(u-f)-E-F;if(M<0&&o===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},Xue={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},i9=function(t){var r=kO(kO({},Xue),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,p=r.className;if(o<i||f===d)return null;var h=Pn("recharts-sector",p),g=o-i,x=Bh(l,g,0,!0),m;return x>0&&Math.abs(f-d)<360?m=Kue({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):m=s9({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),nt.createElement("path",l3({},vn(r,!0),{className:h,d:m,role:"img"}))};function l1(e){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l1(e)}function c3(){return c3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c3.apply(this,arguments)}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(n){Yue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yue(e,t,r){return t=Jue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jue(e){var t=Que(e,"string");return l1(t)=="symbol"?t:t+""}function Que(e,t){if(l1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(l1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AO={curveBasisClosed:YX,curveBasisOpen:JX,curveBasis:XX,curveBumpX:LX,curveBumpY:FX,curveLinearClosed:QX,curveLinear:z5,curveMonotoneX:ZX,curveMonotoneY:eY,curveNatural:tY,curveStep:rY,curveStepAfter:aY,curveStepBefore:nY},db=function(t){return t.x===+t.x&&t.y===+t.y},_g=function(t){return t.x},Ag=function(t){return t.y},Zue=function(t,r){if(sn(t))return t;var n="curve".concat($5(t));return(n==="curveMonotone"||n==="curveBump")&&r?AO["".concat(n).concat(r==="vertical"?"Y":"X")]:AO[n]||z5},ede=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=Zue(n,l),d=u?i.filter(function(x){return db(x)}):i,p;if(Array.isArray(o)){var h=u?o.filter(function(x){return db(x)}):o,g=d.map(function(x,m){return _O(_O({},x),{},{base:h[m]})});return l==="vertical"?p=tb().y(Ag).x1(_g).x0(function(x){return x.base.x}):p=tb().x(_g).y1(Ag).y0(function(x){return x.base.y}),p.defined(db).curve(f),p(g)}return l==="vertical"&&Qt(o)?p=tb().y(Ag).x1(_g).x0(o):Qt(o)?p=tb().x(_g).y1(Ag).y0(o):p=i7().x(_g).y(Ag),p.defined(db).curve(f),p(d)},uv=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?ede(t):s;return D.createElement("path",c3({},vn(t,!1),B2(t),{className:Pn("recharts-curve",r),d:o,ref:i}))},o9={exports:{}},tde="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rde=tde,nde=rde;function l9(){}function c9(){}c9.resetWarningCache=l9;var ade=function(){function e(n,s,i,o,l,c){if(c!==nde){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:c9,resetWarningCache:l9};return r.PropTypes=r,r};o9.exports=ade();var sde=o9.exports;const qn=sa(sde),{getOwnPropertyNames:ide,getOwnPropertySymbols:ode}=Object,{hasOwnProperty:lde}=Object.prototype;function Dj(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function fb(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function cde(e){return e!=null?e[Symbol.toStringTag]:void 0}function CO(e){return ide(e).concat(ode(e))}const ude=Object.hasOwn||((e,t)=>lde.call(e,t));function np(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const dde="__v",fde="__o",hde="_owner",{getOwnPropertyDescriptor:EO,keys:TO}=Object;function pde(e,t){return e.byteLength===t.byteLength&&vw(new Uint8Array(e),new Uint8Array(t))}function mde(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function xde(e,t){return e.byteLength===t.byteLength&&vw(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function gde(e,t){return np(e.getTime(),t.getTime())}function vde(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function yde(e,t){return e===t}function OO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(l=u.next())&&!l.done;){if(s[d]){d++;continue}const p=o.value,h=l.value;if(r.equals(p[0],h[0],c,d,e,t,r)&&r.equals(p[1],h[1],p[0],h[0],e,t,r)){f=s[d]=!0;break}d++}if(!f)return!1;c++}return!0}const bde=np;function wde(e,t,r){const n=TO(e);let s=n.length;if(TO(t).length!==s)return!1;for(;s-- >0;)if(!u9(e,t,r,n[s]))return!1;return!0}function Cg(e,t,r){const n=CO(e);let s=n.length;if(CO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!u9(e,t,r,i)||(o=EO(e,i),l=EO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Nde(e,t){return np(e.valueOf(),t.valueOf())}function jde(e,t){return e.source===t.source&&e.flags===t.flags}function PO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function vw(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function kde(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function u9(e,t,r,n){return(n===hde||n===fde||n===dde)&&(e.$$typeof||t.$$typeof)?!0:ude(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const Sde="[object ArrayBuffer]",_de="[object Arguments]",Ade="[object Boolean]",Cde="[object DataView]",Ede="[object Date]",Tde="[object Error]",Ode="[object Map]",Pde="[object Number]",Ide="[object Object]",Dde="[object RegExp]",Lde="[object Set]",Fde="[object String]",Mde={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Rde="[object URL]",Bde=Object.prototype.toString;function $de({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:p,areUrlsEqual:h,unknownTagComparators:g}){return function(m,v,y){if(m===v)return!0;if(m==null||v==null)return!1;const w=typeof m;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?l(m,v,y):w==="function"?i(m,v,y):!1;const b=m.constructor;if(b!==v.constructor)return!1;if(b===Object)return c(m,v,y);if(Array.isArray(m))return t(m,v,y);if(b===Date)return n(m,v,y);if(b===RegExp)return f(m,v,y);if(b===Map)return o(m,v,y);if(b===Set)return d(m,v,y);const N=Bde.call(m);if(N===Ede)return n(m,v,y);if(N===Dde)return f(m,v,y);if(N===Ode)return o(m,v,y);if(N===Lde)return d(m,v,y);if(N===Ide)return typeof m.then!="function"&&typeof v.then!="function"&&c(m,v,y);if(N===Rde)return h(m,v,y);if(N===Tde)return s(m,v,y);if(N===_de)return c(m,v,y);if(Mde[N])return p(m,v,y);if(N===Sde)return e(m,v,y);if(N===Cde)return r(m,v,y);if(N===Ade||N===Pde||N===Fde)return u(m,v,y);if(g){let S=g[N];if(!S){const j=cde(m);j&&(S=g[j])}if(S)return S(m,v,y)}return!1}}function Ude({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:pde,areArraysEqual:r?Cg:mde,areDataViewsEqual:xde,areDatesEqual:gde,areErrorsEqual:vde,areFunctionsEqual:yde,areMapsEqual:r?Dj(OO,Cg):OO,areNumbersEqual:bde,areObjectsEqual:r?Cg:wde,arePrimitiveWrappersEqual:Nde,areRegExpsEqual:jde,areSetsEqual:r?Dj(PO,Cg):PO,areTypedArraysEqual:r?Dj(vw,Cg):vw,areUrlsEqual:kde,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=fb(n.areArraysEqual),i=fb(n.areMapsEqual),o=fb(n.areObjectsEqual),l=fb(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function zde(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function qde({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,c,{cache:u,equals:n,meta:f,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const Hde=b0();b0({strict:!0});b0({circular:!0});b0({circular:!0,strict:!0});b0({createInternalComparator:()=>np});b0({strict:!0,createInternalComparator:()=>np});b0({circular:!0,createInternalComparator:()=>np});b0({circular:!0,createInternalComparator:()=>np,strict:!0});function b0(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=Ude(e),o=$de(i),l=r?r(o):zde(o);return qde({circular:t,comparator:o,createState:n,equals:l,strict:s})}function Wde(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function IO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Wde(s)};requestAnimationFrame(n)}function u3(e){"@babel/helpers - typeof";return u3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u3(e)}function Vde(e){return Yde(e)||Xde(e)||Kde(e)||Gde()}function Gde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kde(e,t){if(e){if(typeof e=="string")return DO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DO(e,t)}}function DO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yde(e){if(Array.isArray(e))return e}function Jde(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Vde(o),c=l[0],u=l.slice(1);if(typeof c=="number"){IO(s.bind(null,u),c);return}s(c),IO(s.bind(null,u));return}u3(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function c1(e){"@babel/helpers - typeof";return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c1(e)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){d9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d9(e,t,r){return t=Qde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qde(e){var t=Zde(e,"string");return c1(t)==="symbol"?t:String(t)}function Zde(e,t){if(c1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(c1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var efe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},tfe=function(t){return t},rfe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},dv=function(t,r){return Object.keys(r).reduce(function(n,s){return FO(FO({},n),{},d9({},s,t(s,r[s])))},{})},MO=function(t,r,n){return t.map(function(s){return"".concat(rfe(s)," ").concat(r,"ms ").concat(n)}).join(",")};function nfe(e,t){return ife(e)||sfe(e,t)||f9(e,t)||afe()}function afe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ife(e){if(Array.isArray(e))return e}function ofe(e){return ufe(e)||cfe(e)||f9(e)||lfe()}function lfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f9(e,t){if(e){if(typeof e=="string")return d3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d3(e,t)}}function cfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ufe(e){if(Array.isArray(e))return d3(e)}function d3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yw=1e-4,h9=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},p9=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},RO=function(t,r){return function(n){var s=h9(t,r);return p9(s,n)}},dfe=function(t,r){return function(n){var s=h9(t,r),i=[].concat(ofe(s.map(function(o,l){return o*l}).slice(1)),[0]);return p9(i,n)}},BO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),f=nfe(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var d=RO(s,o),p=RO(i,l),h=dfe(s,o),g=function(v){return v>1?1:v<0?0:v},x=function(v){for(var y=v>1?1:v,w=y,b=0;b<8;++b){var N=d(w)-y,S=h(w);if(Math.abs(N-y)<yw||S<yw)return p(w);w=g(w-N/S)}return p(w)};return x.isStepper=!1,x},ffe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,d,p){var h=-(f-d)*n,g=p*i,x=p+(h-g)*l/1e3,m=p*l/1e3+f;return Math.abs(m-d)<yw&&Math.abs(x)<yw?[d,0]:[m,x]};return c.isStepper=!0,c.dt=l,c},hfe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return BO(s);case"spring":return ffe();default:if(s.split("(")[0]==="cubic-bezier")return BO(s)}return typeof s=="function"?s:null};function u1(e){"@babel/helpers - typeof";return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u1(e)}function $O(e){return xfe(e)||mfe(e)||m9(e)||pfe()}function pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xfe(e){if(Array.isArray(e))return h3(e)}function UO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(r),!0).forEach(function(n){f3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f3(e,t,r){return t=gfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gfe(e){var t=vfe(e,"string");return u1(t)==="symbol"?t:String(t)}function vfe(e,t){if(u1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(u1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yfe(e,t){return Nfe(e)||wfe(e,t)||m9(e,t)||bfe()}function bfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m9(e,t){if(e){if(typeof e=="string")return h3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h3(e,t)}}function h3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Nfe(e){if(Array.isArray(e))return e}var bw=function(t,r,n){return t+(r-t)*n},p3=function(t){var r=t.from,n=t.to;return r!==n},jfe=function e(t,r,n){var s=dv(function(i,o){if(p3(o)){var l=t(o.from,o.to,o.velocity),c=yfe(l,2),u=c[0],f=c[1];return yi(yi({},o),{},{from:u,velocity:f})}return o},r);return n<1?dv(function(i,o){return p3(o)?yi(yi({},o),{},{velocity:bw(o.velocity,s[i].velocity,n),from:bw(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const kfe=function(e,t,r,n,s){var i=efe(e,t),o=i.reduce(function(m,v){return yi(yi({},m),{},f3({},v,[e[v],t[v]]))},{}),l=i.reduce(function(m,v){return yi(yi({},m),{},f3({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,f,d=function(){return null},p=function(){return dv(function(v,y){return y.from},l)},h=function(){return!Object.values(l).filter(p3).length},g=function(v){u||(u=v);var y=v-u,w=y/r.dt;l=jfe(r,l,w),s(yi(yi(yi({},e),t),p())),u=v,h()||(c=requestAnimationFrame(d))},x=function(v){f||(f=v);var y=(v-f)/n,w=dv(function(N,S){return bw.apply(void 0,$O(S).concat([r(y)]))},o);if(s(yi(yi(yi({},e),t),w)),y<1)c=requestAnimationFrame(d);else{var b=dv(function(N,S){return bw.apply(void 0,$O(S).concat([r(1)]))},o);s(yi(yi(yi({},e),t),b))}};return d=r.isStepper?g:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function sx(e){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}var Sfe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _fe(e,t){if(e==null)return{};var r=Afe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Afe(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Lj(e){return Ofe(e)||Tfe(e)||Efe(e)||Cfe()}function Cfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Efe(e,t){if(e){if(typeof e=="string")return m3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m3(e,t)}}function Tfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ofe(e){if(Array.isArray(e))return m3(e)}function m3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(n){qg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qg(e,t,r){return t=x9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ife(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x9(n.key),n)}}function Dfe(e,t,r){return t&&Ife(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x9(e){var t=Lfe(e,"string");return sx(t)==="symbol"?t:String(t)}function Lfe(e,t){if(sx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ffe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x3(e,t)}function x3(e,t){return x3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},x3(e,t)}function Mfe(e){var t=Rfe();return function(){var n=ww(e),s;if(t){var i=ww(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return g3(this,s)}}function g3(e,t){if(t&&(sx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v3(e)}function v3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ww(e){return ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ww(e)}var Ud=function(e){Ffe(r,e);var t=Mfe(r);function r(n,s){var i;Pfe(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,p=o.children,h=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(v3(i)),i.changeStyle=i.changeStyle.bind(v3(i)),!l||h<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),g3(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof p=="function")return i.state={style:u},g3(i);i.state={style:c?qg({},c,u):u}}else i.state={style:{}};return i}return Dfe(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,p=this.state.style;if(l){if(!o){var h={style:c?qg({},c,f):f};this.state&&p&&(c&&p[c]!==f||!c&&p!==f)&&this.setState(h);return}if(!(Hde(s.to,f)&&s.canBegin&&s.isActive)){var g=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=g||u?d:s.to;if(this.state&&p){var m={style:c?qg({},c,x):x};(c&&p[c]!==x||!c&&p!==x)&&this.setState(m)}this.runAnimation(Ic(Ic({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,f=s.begin,d=s.onAnimationEnd,p=s.onAnimationStart,h=kfe(o,l,hfe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=h()};this.manager.start([p,f,g,c,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],f=u.style,d=u.duration,p=d===void 0?0:d,h=function(x,m,v){if(v===0)return x;var y=m.duration,w=m.easing,b=w===void 0?"ease":w,N=m.style,S=m.properties,j=m.onAnimationEnd,_=v>0?o[v-1]:m,E=S||Object.keys(N);if(typeof b=="function"||b==="spring")return[].concat(Lj(x),[i.runJSAnimation.bind(i,{from:_.style,to:N,duration:y,easing:b}),y]);var I=MO(E,y,b),A=Ic(Ic(Ic({},_.style),N),{},{transition:I});return[].concat(Lj(x),[A,y,j]).filter(tfe)};return this.manager.start([c].concat(Lj(o.reduce(h,[f,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Jde());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,f=s.onAnimationStart,d=s.onAnimationEnd,p=s.steps,h=s.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var x=l?qg({},l,c):c,m=MO(Object.keys(x),o,u);g.start([f,i,Ic(Ic({},x),{},{transition:m}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=_fe(s,Sfe),u=D.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var d=function(h){var g=h.props,x=g.style,m=x===void 0?{}:x,v=g.className,y=D.cloneElement(h,Ic(Ic({},c),{},{style:Ic(Ic({},m),f),className:v}));return y};return u===1?d(D.Children.only(i)):nt.createElement("div",null,D.Children.map(i,function(p){return d(p)}))}}]),r}(D.PureComponent);Ud.displayName="Animate";Ud.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ud.propTypes={from:qn.oneOfType([qn.object,qn.string]),to:qn.oneOfType([qn.object,qn.string]),attributeName:qn.string,duration:qn.number,begin:qn.number,easing:qn.oneOfType([qn.string,qn.func]),steps:qn.arrayOf(qn.shape({duration:qn.number.isRequired,style:qn.object.isRequired,easing:qn.oneOfType([qn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),qn.func]),properties:qn.arrayOf("string"),onAnimationEnd:qn.func})),children:qn.oneOfType([qn.node,qn.func]),isActive:qn.bool,canBegin:qn.bool,onAnimationEnd:qn.func,shouldReAnimate:qn.bool,onAnimationStart:qn.func,onAnimationReStart:qn.func};function d1(e){"@babel/helpers - typeof";return d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d1(e)}function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nw.apply(this,arguments)}function Bfe(e,t){return qfe(e)||zfe(e,t)||Ufe(e,t)||$fe()}function $fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ufe(e,t){if(e){if(typeof e=="string")return qO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qO(e,t)}}function qO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qfe(e){if(Array.isArray(e))return e}function HO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HO(Object(r),!0).forEach(function(n){Hfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hfe(e,t,r){return t=Wfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wfe(e){var t=Vfe(e,"string");return d1(t)=="symbol"?t:t+""}function Vfe(e,t){if(d1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(d1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VO=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,h=4;p<h;p++)d[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+s-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+s)),f+="L ".concat(t+c*d[3],",").concat(r+s),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);f="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+s-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+s,`
            L `).concat(t+c*g,",").concat(r+s,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*g," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},Gfe=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),d=Math.min(o,o+c),p=Math.max(o,o+c);return n>=u&&n<=f&&s>=d&&s<=p}return!1},Kfe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},N6=function(t){var r=WO(WO({},Kfe),t),n=D.useRef(),s=D.useState(-1),i=Bfe(s,2),o=i[0],l=i[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,p=r.radius,h=r.className,g=r.animationEasing,x=r.animationDuration,m=r.animationBegin,v=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=Pn("recharts-rectangle",h);return y?nt.createElement(Ud,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:x,animationEasing:g,isActive:y},function(b){var N=b.width,S=b.height,j=b.x,_=b.y;return nt.createElement(Ud,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:x,isActive:v,easing:g},nt.createElement("path",Nw({},vn(r,!0),{className:w,d:VO(j,_,N,S,p),ref:n})))}):nt.createElement("path",Nw({},vn(r,!0),{className:w,d:VO(c,u,f,d,p)}))};function y3(){return y3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y3.apply(this,arguments)}var j6=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=Pn("recharts-dot",i);return r===+r&&n===+n&&s===+s?D.createElement("circle",y3({},vn(t,!1),B2(t),{className:o,cx:r,cy:n,r:s})):null};function f1(e){"@babel/helpers - typeof";return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f1(e)}var Xfe=["x","y","top","left","width","height","className"];function b3(){return b3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b3.apply(this,arguments)}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yfe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(n){Jfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jfe(e,t,r){return t=Qfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qfe(e){var t=Zfe(e,"string");return f1(t)=="symbol"?t:t+""}function Zfe(e,t){if(f1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(f1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e0e(e,t){if(e==null)return{};var r=t0e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function t0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var r0e=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},n0e=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,p=t.height,h=p===void 0?0:p,g=t.className,x=e0e(t,Xfe),m=Yfe({x:n,y:i,top:l,left:u,width:d,height:h},x);return!Qt(n)||!Qt(i)||!Qt(d)||!Qt(h)||!Qt(l)||!Qt(u)?null:nt.createElement("path",b3({},vn(m,!0),{className:Pn("recharts-cross",g),d:r0e(n,i,d,h,l,u)}))},a0e=T7,s0e=a0e(Object.getPrototypeOf,Object),i0e=s0e,o0e=Hd,l0e=i0e,c0e=Wd,u0e="[object Object]",d0e=Function.prototype,f0e=Object.prototype,g9=d0e.toString,h0e=f0e.hasOwnProperty,p0e=g9.call(Object);function m0e(e){if(!c0e(e)||o0e(e)!=u0e)return!1;var t=l0e(e);if(t===null)return!0;var r=h0e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&g9.call(r)==p0e}var x0e=m0e;const g0e=sa(x0e);var v0e=Hd,y0e=Wd,b0e="[object Boolean]";function w0e(e){return e===!0||e===!1||y0e(e)&&v0e(e)==b0e}var N0e=w0e;const j0e=sa(N0e);function h1(e){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h1(e)}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(this,arguments)}function k0e(e,t){return C0e(e)||A0e(e,t)||_0e(e,t)||S0e()}function S0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _0e(e,t){if(e){if(typeof e=="string")return KO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KO(e,t)}}function KO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function C0e(e){if(Array.isArray(e))return e}function XO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function YO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(r),!0).forEach(function(n){E0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E0e(e,t,r){return t=T0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T0e(e){var t=O0e(e,"string");return h1(t)=="symbol"?t:t+""}function O0e(e,t){if(h1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(h1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JO=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},P0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I0e=function(t){var r=YO(YO({},P0e),t),n=D.useRef(),s=D.useState(-1),i=k0e(s,2),o=i[0],l=i[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,p=r.height,h=r.className,g=r.animationEasing,x=r.animationDuration,m=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||p!==+p||f===0&&d===0||p===0)return null;var y=Pn("recharts-trapezoid",h);return v?nt.createElement(Ud,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:p,x:c,y:u},duration:x,animationEasing:g,isActive:v},function(w){var b=w.upperWidth,N=w.lowerWidth,S=w.height,j=w.x,_=w.y;return nt.createElement(Ud,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:x,easing:g},nt.createElement("path",jw({},vn(r,!0),{className:y,d:JO(j,_,b,N,S),ref:n})))}):nt.createElement("g",null,nt.createElement("path",jw({},vn(r,!0),{className:y,d:JO(c,u,f,d,p)})))},D0e=["option","shapeType","propTransformer","activeClassName","isActive"];function p1(e){"@babel/helpers - typeof";return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p1(e)}function L0e(e,t){if(e==null)return{};var r=F0e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function QO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QO(Object(r),!0).forEach(function(n){M0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M0e(e,t,r){return t=R0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R0e(e){var t=B0e(e,"string");return p1(t)=="symbol"?t:t+""}function B0e(e,t){if(p1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(p1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $0e(e,t){return kw(kw({},t),e)}function U0e(e,t){return e==="symbols"}function ZO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return nt.createElement(N6,r);case"trapezoid":return nt.createElement(I0e,r);case"sector":return nt.createElement(i9,r);case"symbols":if(U0e(t))return nt.createElement(U_,r);break;default:return null}}function z0e(e){return D.isValidElement(e)?e.props:e}function q0e(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?$0e:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=L0e(e,D0e),u;if(D.isValidElement(t))u=D.cloneElement(t,kw(kw({},c),z0e(t)));else if(sn(t))u=t(c);else if(g0e(t)&&!j0e(t)){var f=s(t,c);u=nt.createElement(ZO,{shapeType:r,elementProps:f})}else{var d=c;u=nt.createElement(ZO,{shapeType:r,elementProps:d})}return l?nt.createElement(qa,{className:o},u):u}function nN(e,t){return t!=null&&"trapezoids"in e.props}function aN(e,t){return t!=null&&"sectors"in e.props}function m1(e,t){return t!=null&&"points"in e.props}function H0e(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function W0e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function V0e(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function G0e(e,t){var r;return nN(e,t)?r=H0e:aN(e,t)?r=W0e:m1(e,t)&&(r=V0e),r}function K0e(e,t){var r;return nN(e,t)?r="trapezoids":aN(e,t)?r="sectors":m1(e,t)&&(r="points"),r}function X0e(e,t){if(nN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(aN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return m1(e,t)?t.payload:{}}function Y0e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=K0e(r,t),i=X0e(r,t),o=n.filter(function(c,u){var f=Qv(i,c),d=r.props[s].filter(function(g){var x=G0e(r,t);return x(g,t)}),p=r.props[s].indexOf(d[d.length-1]),h=u===p;return f&&h}),l=n.indexOf(o[o.length-1]);return l}var J0e=Math.ceil,Q0e=Math.max;function Z0e(e,t,r,n){for(var s=-1,i=Q0e(J0e((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}var ehe=Z0e,the=X7,eP=1/0,rhe=17976931348623157e292;function nhe(e){if(!e)return e===0?e:0;if(e=the(e),e===eP||e===-eP){var t=e<0?-1:1;return t*rhe}return e===e?e:0}var v9=nhe,ahe=ehe,she=V5,Fj=v9;function ihe(e){return function(t,r,n){return n&&typeof n!="number"&&she(t,r,n)&&(r=n=void 0),t=Fj(t),r===void 0?(r=t,t=0):r=Fj(r),n=n===void 0?t<r?1:-1:Fj(n),ahe(t,r,n,e)}}var ohe=ihe,lhe=ohe,che=lhe(),uhe=che;const Sw=sa(uhe);function x1(e){"@babel/helpers - typeof";return x1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x1(e)}function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(n){y9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y9(e,t,r){return t=dhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dhe(e){var t=fhe(e,"string");return x1(t)=="symbol"?t:t+""}function fhe(e,t){if(x1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(x1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hhe=["Webkit","Moz","O","ms"],phe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=hhe.reduce(function(i,o){return rP(rP({},i),{},y9({},o+n,r))},{});return s[t]=r,s};function ix(e){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_w.apply(this,arguments)}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Mj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(n){xl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w9(n.key),n)}}function xhe(e,t,r){return t&&aP(e.prototype,t),r&&aP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ghe(e,t,r){return t=Aw(t),vhe(e,b9()?Reflect.construct(t,r||[],Aw(e).constructor):t.apply(e,r))}function vhe(e,t){if(t&&(ix(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yhe(e)}function yhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b9=function(){return!!e})()}function Aw(e){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Aw(e)}function bhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w3(e,t)}function w3(e,t){return w3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},w3(e,t)}function xl(e,t,r){return t=w9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w9(e){var t=whe(e,"string");return ix(t)=="symbol"?t:t+""}function whe(e,t){if(ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ix(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nhe=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=lv().domain(Sw(0,c)).range([i,i+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:f}},sP=function(t){return t.changedTouches&&!!t.changedTouches.length},ox=function(e){function t(r){var n;return mhe(this,t),n=ghe(this,t,[r]),xl(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),xl(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),xl(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),xl(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),xl(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),xl(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),xl(n,"handleSlideDragStart",function(s){var i=sP(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return bhe(t,e),xhe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(s,i),p=Math.max(s,i),h=t.getIndexInRange(o,d),g=t.getIndexInRange(o,p);return{startIndex:h-h%c,endIndex:g===f?f:g-g%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Tl(i[n],l,n);return sn(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,p=c.startIndex,h=c.endIndex,g=c.onChange,x=n.pageX-i;x>0?x=Math.min(x,u+f-d-l,u+f-d-o):x<0&&(x=Math.max(x,u-o,u-l));var m=this.getIndex({startX:o+x,endX:l+x});(m.startIndex!==p||m.endIndex!==h)&&g&&g(m),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=sP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],f=this.props,d=f.x,p=f.width,h=f.travellerWidth,g=f.onChange,x=f.gap,m=f.data,v={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,d+p-h-u):y<0&&(y=Math.max(y,d-u)),v[o]=u+y;var w=this.getIndex(v),b=w.startIndex,N=w.endIndex,S=function(){var _=m.length-1;return o==="startX"&&(l>c?b%x===0:N%x===0)||l<c&&N===_||o==="endX"&&(l>c?N%x===0:b%x===0)||l>c&&N===_};this.setState(xl(xl({},o,u+y),"brushMoveStartX",n.pageX),function(){g&&S()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[s],d=l.indexOf(f);if(d!==-1){var p=d+n;if(!(p===-1||p>=l.length)){var h=l[p];s==="startX"&&h>=u||s==="endX"&&h<=c||this.setState(xl({},s,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return nt.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=D.Children.only(u);return d?nt.cloneElement(d,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,p=c.traveller,h=c.ariaLabel,g=c.data,x=c.startIndex,m=c.endIndex,v=Math.max(n,this.props.x),y=Mj(Mj({},vn(this.props,!1)),{},{x:v,y:u,width:f,height:d}),w=h||"Min value: ".concat((i=g[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[m])===null||o===void 0?void 0:o.name);return nt.createElement(qa,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,s)+u,d=Math.max(Math.abs(s-n)-u,0);return nt.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,p=f.endX,h=5,g={pointerEvents:"none",fill:u};return nt.createElement(qa,{className:"recharts-brush-texts"},nt.createElement(ew,_w({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-h,y:o+l/2},g),this.getTextOfTick(s)),nt.createElement(ew,_w({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+c+h,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,p=this.state,h=p.startX,g=p.endX,x=p.isTextActive,m=p.isSlideMoving,v=p.isTravellerMoving,y=p.isTravellerFocused;if(!s||!s.length||!Qt(l)||!Qt(c)||!Qt(u)||!Qt(f)||u<=0||f<=0)return null;var w=Pn("recharts-brush",i),b=nt.Children.count(o)===1,N=phe("userSelect","none");return nt.createElement(qa,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(h,g),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(g,"endX"),(x||m||v||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return nt.createElement(nt.Fragment,null,nt.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),nt.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),nt.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return nt.isValidElement(n)?i=nt.cloneElement(n,s):sn(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Mj({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Nhe({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var p=s.scale.domain().map(function(h){return s.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(D.PureComponent);xl(ox,"displayName","Brush");xl(ox,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var jhe=K_;function khe(e,t){var r;return jhe(e,function(n,s,i){return r=t(n,s,i),!r}),!!r}var She=khe,_he=N7,Ahe=g0,Che=She,Ehe=tl,The=V5;function Ohe(e,t,r){var n=Ehe(e)?_he:Che;return r&&The(e,t,r)&&(t=void 0),n(e,Ahe(t))}var Phe=Ohe;const Ihe=sa(Phe);var qu=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},iP=H7;function Dhe(e,t,r){t=="__proto__"&&iP?iP(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Lhe=Dhe,Fhe=Lhe,Mhe=z7,Rhe=g0;function Bhe(e,t){var r={};return t=Rhe(t),Mhe(e,function(n,s,i){Fhe(r,s,t(n,s,i))}),r}var $he=Bhe;const Uhe=sa($he);function zhe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var qhe=zhe,Hhe=K_;function Whe(e,t){var r=!0;return Hhe(e,function(n,s,i){return r=!!t(n,s,i),r}),r}var Vhe=Whe,Ghe=qhe,Khe=Vhe,Xhe=g0,Yhe=tl,Jhe=V5;function Qhe(e,t,r){var n=Yhe(e)?Ghe:Khe;return r&&Jhe(e,t,r)&&(t=void 0),n(e,Xhe(t))}var Zhe=Qhe;const N9=sa(Zhe);var epe=["x","y"];function g1(e){"@babel/helpers - typeof";return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g1(e)}function N3(){return N3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N3.apply(this,arguments)}function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(n){tpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tpe(e,t,r){return t=rpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rpe(e){var t=npe(e,"string");return g1(t)=="symbol"?t:t+""}function npe(e,t){if(g1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(g1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ape(e,t){if(e==null)return{};var r=spe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function spe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ipe(e,t){var r=e.x,n=e.y,s=ape(e,epe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),d="".concat(t.width||s.width),p=parseInt(d,10);return Eg(Eg(Eg(Eg(Eg({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function lP(e){return nt.createElement(q0e,N3({shapeType:"rectangle",propTransformer:ipe,activeClassName:"recharts-active-bar"},e))}var ope=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=Qt(n)||bK(n);return i?t(n,s):(i||Uh(),r)}},lpe=["value","background"],j9;function lx(e){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lx(e)}function cpe(e,t){if(e==null)return{};var r=upe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function upe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(this,arguments)}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(n){$f(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S9(n.key),n)}}function fpe(e,t,r){return t&&uP(e.prototype,t),r&&uP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hpe(e,t,r){return t=Ew(t),ppe(e,k9()?Reflect.construct(t,r||[],Ew(e).constructor):t.apply(e,r))}function ppe(e,t){if(t&&(lx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mpe(e)}function mpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k9=function(){return!!e})()}function Ew(e){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ew(e)}function xpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j3(e,t)}function j3(e,t){return j3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},j3(e,t)}function $f(e,t,r){return t=S9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S9(e){var t=gpe(e,"string");return lx(t)=="symbol"?t:t+""}function gpe(e,t){if(lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ty=function(e){function t(){var r;dpe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=hpe(this,t,[].concat(s)),$f(r,"state",{isAnimationFinished:!1}),$f(r,"id",X1("recharts-bar-")),$f(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),$f(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return xpe(t,e),fpe(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,f=vn(this.props,!1);return n&&n.map(function(d,p){var h=p===c,g=h?u:o,x=_s(_s(_s({},f),d),{},{isActive:h,option:g,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return nt.createElement(qa,Cw({className:"recharts-bar-rectangle"},$2(s.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),nt.createElement(lP,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,f=s.animationEasing,d=s.animationId,p=this.state.prevData;return nt.createElement(Ud,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var g=h.t,x=i.map(function(m,v){var y=p&&p[v];if(y){var w=nc(y.x,m.x),b=nc(y.y,m.y),N=nc(y.width,m.width),S=nc(y.height,m.height);return _s(_s({},m),{},{x:w(g),y:b(g),width:N(g),height:S(g)})}if(o==="horizontal"){var j=nc(0,m.height),_=j(g);return _s(_s({},m),{},{y:m.y+m.height-_,height:_})}var E=nc(0,m.width),I=E(g);return _s(_s({},m),{},{width:I})});return nt.createElement(qa,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Qv(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=vn(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,p=cpe(u,lpe);if(!d)return null;var h=_s(_s(_s(_s(_s({},p),{},{fill:"#eee"},d),c),$2(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return nt.createElement(lP,Cw({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},h))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Qc(f,rN);if(!d)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,h=function(m,v){var y=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:y,errorVal:Tl(m,v)}},g={clipPath:n?"url(#clipPath-".concat(s,")"):null};return nt.createElement(qa,g,d.map(function(x){return nt.cloneElement(x,{key:"error-bar-".concat(s,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,p=n.height,h=n.isAnimationActive,g=n.background,x=n.id;if(s||!i||!i.length)return null;var m=this.state.isAnimationFinished,v=Pn("recharts-bar",o),y=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,b=y||w,N=Nn(x)?this.id:x;return nt.createElement(qa,{className:v},y||w?nt.createElement("defs",null,nt.createElement("clipPath",{id:"clipPath-".concat(N)},nt.createElement("rect",{x:y?u:u-d/2,y:w?f:f-p/2,width:y?d:d*2,height:w?p:p*2}))):null,nt.createElement(qa,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(N,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,N),(!h||m)&&t0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(D.PureComponent);j9=ty;$f(ty,"displayName","Bar");$f(ty,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Lx.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$f(ty,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,h=qce(n,r);if(!h)return null;var g=t.layout,x=r.type.defaultProps,m=x!==void 0?_s(_s({},x),r.props):r.props,v=m.dataKey,y=m.children,w=m.minPointSize,b=g==="horizontal"?o:i,N=u?b.scale.domain():null,S=Jce({numericAxis:b}),j=Qc(y,J7),_=d.map(function(E,I){var A,C,F,M,B,K;u?A=Hce(u[f+I],N):(A=Tl(E,v),Array.isArray(A)||(A=[S,A]));var G=ope(w,j9.defaultProps.minPointSize)(A[1],I);if(g==="horizontal"){var Y,q=[o.scale(A[0]),o.scale(A[1])],X=q[0],V=q[1];C=fO({axis:i,ticks:l,bandSize:s,offset:h.offset,entry:E,index:I}),F=(Y=V??X)!==null&&Y!==void 0?Y:void 0,M=h.size;var T=X-V;if(B=Number.isNaN(T)?0:T,K={x:C,y:o.y,width:M,height:o.height},Math.abs(G)>0&&Math.abs(B)<Math.abs(G)){var R=Vc(B||G)*(Math.abs(G)-Math.abs(B));F-=R,B+=R}}else{var z=[i.scale(A[0]),i.scale(A[1])],L=z[0],H=z[1];if(C=L,F=fO({axis:o,ticks:c,bandSize:s,offset:h.offset,entry:E,index:I}),M=H-L,B=h.size,K={x:i.x,y:F,width:i.width,height:B},Math.abs(G)>0&&Math.abs(M)<Math.abs(G)){var ne=Vc(M||G)*(Math.abs(G)-Math.abs(M));M+=ne}}return _s(_s(_s({},E),{},{x:C,y:F,width:M,height:B,value:u?A:A[1],payload:E,background:K},j&&j[I]&&j[I].props),{},{tooltipPayload:[n9(r,E)],tooltipPosition:{x:C+M/2,y:F+B/2}})});return _s({data:_,layout:g},p)});function v1(e){"@babel/helpers - typeof";return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v1(e)}function vpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_9(n.key),n)}}function ype(e,t,r){return t&&dP(e.prototype,t),r&&dP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(r),!0).forEach(function(n){sN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sN(e,t,r){return t=_9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _9(e){var t=bpe(e,"string");return v1(t)=="symbol"?t:t+""}function bpe(e,t){if(v1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(v1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wpe=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!vl(u,ty);return f.reduce(function(h,g){var x=r[g],m=x.orientation,v=x.domain,y=x.padding,w=y===void 0?{}:y,b=x.mirror,N=x.reversed,S="".concat(m).concat(b?"Mirror":""),j,_,E,I,A;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var C=v[1]-v[0],F=1/0,M=x.categoricalDomain.sort(jK);if(M.forEach(function(z,L){L>0&&(F=Math.min((z||0)-(M[L-1]||0),F))}),Number.isFinite(F)){var B=F/C,K=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(j=B*K/2),x.padding==="no-gap"){var G=Bh(t.barCategoryGap,B*K),Y=B*K/2;j=Y-G-(Y-G)/K*G}}}s==="xAxis"?_=[n.left+(w.left||0)+(j||0),n.left+n.width-(w.right||0)-(j||0)]:s==="yAxis"?_=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(j||0),n.top+n.height-(w.bottom||0)-(j||0)]:_=x.range,N&&(_=[_[1],_[0]]);var q=Uce(x,i,p),X=q.scale,V=q.realScaleType;X.domain(v).range(_),zce(X);var T=Yce(X,qc(qc({},x),{},{realScaleType:V}));s==="xAxis"?(A=m==="top"&&!b||m==="bottom"&&b,E=n.left,I=d[S]-A*x.height):s==="yAxis"&&(A=m==="left"&&!b||m==="right"&&b,E=d[S]-A*x.width,I=n.top);var R=qc(qc(qc({},x),T),{},{realScaleType:V,x:E,y:I,scale:X,width:s==="xAxis"?n.width:x.width,height:s==="yAxis"?n.height:x.height});return R.bandSize=mw(R,T),!x.hide&&s==="xAxis"?d[S]+=(A?-1:1)*R.height:x.hide||(d[S]+=(A?-1:1)*R.width),qc(qc({},h),{},sN({},g,R))},{})},A9=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},Npe=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return A9({x:r,y:n},{x:s,y:i})},C9=function(){function e(t){vpe(this,e),this.scale=t}return ype(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();sN(C9,"EPS",1e-4);var k6=function(t){var r=Object.keys(t).reduce(function(n,s){return qc(qc({},n),{},sN({},s,C9.create(t[s])))},{});return qc(qc({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Uhe(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return N9(s,function(i,o){return r[o].isInRange(i)})}})};function jpe(e){return(e%180+180)%180}var kpe=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=jpe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Spe=g0,_pe=Y1,Ape=H5;function Cpe(e){return function(t,r,n){var s=Object(t);if(!_pe(t)){var i=Spe(r);t=Ape(t),r=function(l){return i(s[l],l,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:void 0}}var Epe=Cpe,Tpe=v9;function Ope(e){var t=Tpe(e),r=t%1;return t===t?r?t-r:t:0}var Ppe=Ope,Ipe=F7,Dpe=g0,Lpe=Ppe,Fpe=Math.max;function Mpe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:Lpe(r);return s<0&&(s=Fpe(n+s,0)),Ipe(e,Dpe(t),s)}var Rpe=Mpe,Bpe=Epe,$pe=Rpe,Upe=Bpe($pe),zpe=Upe;const qpe=sa(zpe);var Hpe=_G(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),S6=D.createContext(void 0),_6=D.createContext(void 0),E9=D.createContext(void 0),T9=D.createContext({}),O9=D.createContext(void 0),P9=D.createContext(0),I9=D.createContext(0),hP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=Hpe(i);return nt.createElement(S6.Provider,{value:n},nt.createElement(_6.Provider,{value:s},nt.createElement(T9.Provider,{value:i},nt.createElement(E9.Provider,{value:f},nt.createElement(O9.Provider,{value:o},nt.createElement(P9.Provider,{value:u},nt.createElement(I9.Provider,{value:c},l)))))))},Wpe=function(){return D.useContext(O9)},D9=function(t){var r=D.useContext(S6);r==null&&Uh();var n=r[t];return n==null&&Uh(),n},Vpe=function(){var t=D.useContext(S6);return Af(t)},Gpe=function(){var t=D.useContext(_6),r=qpe(t,function(n){return N9(n.domain,Number.isFinite)});return r||Af(t)},L9=function(t){var r=D.useContext(_6);r==null&&Uh();var n=r[t];return n==null&&Uh(),n},Kpe=function(){var t=D.useContext(E9);return t},Xpe=function(){return D.useContext(T9)},A6=function(){return D.useContext(I9)},C6=function(){return D.useContext(P9)};function cx(e){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cx(e)}function Ype(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M9(n.key),n)}}function Qpe(e,t,r){return t&&Jpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zpe(e,t,r){return t=Tw(t),eme(e,F9()?Reflect.construct(t,r||[],Tw(e).constructor):t.apply(e,r))}function eme(e,t){if(t&&(cx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tme(e)}function tme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F9=function(){return!!e})()}function Tw(e){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tw(e)}function rme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k3(e,t)}function k3(e,t){return k3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},k3(e,t)}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(n){E6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E6(e,t,r){return t=M9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M9(e){var t=nme(e,"string");return cx(t)=="symbol"?t:t+""}function nme(e,t){if(cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ame(e,t){return lme(e)||ome(e,t)||ime(e,t)||sme()}function sme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ime(e,t){if(e){if(typeof e=="string")return xP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xP(e,t)}}function xP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ome(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lme(e){if(Array.isArray(e))return e}function S3(){return S3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S3.apply(this,arguments)}var cme=function(t,r){var n;return nt.isValidElement(t)?n=nt.cloneElement(t,r):sn(t)?n=t(r):n=nt.createElement("line",S3({},r,{className:"recharts-reference-line-line"})),n},ume=function(t,r,n,s,i,o,l,c,u){var f=i.x,d=i.y,p=i.width,h=i.height;if(n){var g=u.y,x=t.y.apply(g,{position:o});if(qu(u,"discard")&&!t.y.isInRange(x))return null;var m=[{x:f+p,y:x},{x:f,y:x}];return c==="left"?m.reverse():m}if(r){var v=u.x,y=t.x.apply(v,{position:o});if(qu(u,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:d+h},{x:y,y:d}];return l==="top"?w.reverse():w}if(s){var b=u.segment,N=b.map(function(S){return t.apply(S,{position:o})});return qu(u,"discard")&&Ihe(N,function(S){return!t.isInRange(S)})?null:N}return null};function dme(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Wpe(),f=D9(s),d=L9(i),p=Kpe();if(!u||!p)return null;Ad(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=k6({x:f.scale,y:d.scale}),g=Ws(t),x=Ws(r),m=n&&n.length===2,v=ume(h,g,x,m,p,e.position,f.orientation,d.orientation,e);if(!v)return null;var y=ame(v,2),w=y[0],b=w.x,N=w.y,S=y[1],j=S.x,_=S.y,E=qu(e,"hidden")?"url(#".concat(u,")"):void 0,I=mP(mP({clipPath:E},vn(e,!0)),{},{x1:b,y1:N,x2:j,y2:_});return nt.createElement(qa,{className:Pn("recharts-reference-line",l)},cme(o,I),Ki.renderCallByParent(e,Npe({x1:b,y1:N,x2:j,y2:_})))}var T6=function(e){function t(){return Ype(this,t),Zpe(this,t,arguments)}return rme(t,e),Qpe(t,[{key:"render",value:function(){return nt.createElement(dme,this.props)}}])}(nt.Component);E6(T6,"displayName","ReferenceLine");E6(T6,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _3(){return _3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_3.apply(this,arguments)}function ux(e){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){iN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B9(n.key),n)}}function pme(e,t,r){return t&&hme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mme(e,t,r){return t=Ow(t),xme(e,R9()?Reflect.construct(t,r||[],Ow(e).constructor):t.apply(e,r))}function xme(e,t){if(t&&(ux(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gme(e)}function gme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R9=function(){return!!e})()}function Ow(e){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ow(e)}function vme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A3(e,t)}function A3(e,t){return A3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},A3(e,t)}function iN(e,t,r){return t=B9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B9(e){var t=yme(e,"string");return ux(t)=="symbol"?t:t+""}function yme(e,t){if(ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bme=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=k6({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return qu(t,"discard")&&!o.isInRange(l)?null:l},oN=function(e){function t(){return fme(this,t),mme(this,t,arguments)}return vme(t,e),pme(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Ws(s),f=Ws(i);if(Ad(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=bme(this.props);if(!d)return null;var p=d.x,h=d.y,g=this.props,x=g.shape,m=g.className,v=qu(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=vP(vP({clipPath:v},vn(this.props,!0)),{},{cx:p,cy:h});return nt.createElement(qa,{className:Pn("recharts-reference-dot",m)},t.renderDot(x,y),Ki.renderCallByParent(this.props,{x:p-o,y:h-o,width:2*o,height:2*o}))}}])}(nt.Component);iN(oN,"displayName","ReferenceDot");iN(oN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});iN(oN,"renderDot",function(e,t){var r;return nt.isValidElement(e)?r=nt.cloneElement(e,t):sn(e)?r=e(t):r=nt.createElement(j6,_3({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function C3(){return C3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C3.apply(this,arguments)}function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(n){lN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U9(n.key),n)}}function jme(e,t,r){return t&&Nme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kme(e,t,r){return t=Pw(t),Sme(e,$9()?Reflect.construct(t,r||[],Pw(e).constructor):t.apply(e,r))}function Sme(e,t){if(t&&(dx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _me(e)}function _me(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($9=function(){return!!e})()}function Pw(e){return Pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pw(e)}function Ame(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E3(e,t)}function E3(e,t){return E3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},E3(e,t)}function lN(e,t,r){return t=U9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U9(e){var t=Cme(e,"string");return dx(t)=="symbol"?t:t+""}function Cme(e,t){if(dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eme=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var p=k6({x:f.scale,y:d.scale}),h={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},g={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(u,{position:"end"}):p.y.rangeMax};return qu(i,"discard")&&(!p.isInRange(h)||!p.isInRange(g))?null:A9(h,g)},cN=function(e){function t(){return wme(this,t),kme(this,t,arguments)}return Ame(t,e),jme(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;Ad(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Ws(s),p=Ws(i),h=Ws(o),g=Ws(l),x=this.props.shape;if(!d&&!p&&!h&&!g&&!x)return null;var m=Eme(d,p,h,g,this.props);if(!m&&!x)return null;var v=qu(this.props,"hidden")?"url(#".concat(f,")"):void 0;return nt.createElement(qa,{className:Pn("recharts-reference-area",c)},t.renderRect(x,bP(bP({clipPath:v},vn(this.props,!0)),m)),Ki.renderCallByParent(this.props,m))}}])}(nt.Component);lN(cN,"displayName","ReferenceArea");lN(cN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});lN(cN,"renderRect",function(e,t){var r;return nt.isValidElement(e)?r=nt.cloneElement(e,t):sn(e)?r=e(t):r=nt.createElement(N6,C3({},t,{className:"recharts-reference-area-rect"})),r});function z9(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Tme(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return kpe(n,r)}function Ome(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Iw(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Pme(e,t){return z9(e,t+1)}function Ime(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:z9(n,u)};var x=c,m,v=function(){return m===void 0&&(m=r(g,x)),m},y=g.coordinate,w=c===0||Iw(e,y,v,f,l);w||(c=0,f=o,u+=1),w&&(f=y+e*(v()/2+s),c+=u)},p;u<=i.length;)if(p=d(),p)return p.v;return[]}function y1(e){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y1(e)}function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(n){Dme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dme(e,t,r){return t=Lme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lme(e){var t=Fme(e,"string");return y1(t)=="symbol"?t:t+""}function Fme(e,t){if(y1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(y1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mme(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(p){var h=i[p],g,x=function(){return g===void 0&&(g=r(h,p)),g};if(p===o-1){var m=e*(h.coordinate+e*x()/2-c);i[p]=h=Hi(Hi({},h),{},{tickCoord:m>0?h.coordinate-m*e:h.coordinate})}else i[p]=h=Hi(Hi({},h),{},{tickCoord:h.coordinate});var v=Iw(e,h.tickCoord,x,l,c);v&&(c=h.tickCoord-e*(x()/2+s),i[p]=Hi(Hi({},h),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function Rme(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var f=n[l-1],d=r(f,l-1),p=e*(f.coordinate+e*d/2-u);o[l-1]=f=Hi(Hi({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var h=Iw(e,f.tickCoord,function(){return d},c,u);h&&(u=f.tickCoord-e*(d/2+s),o[l-1]=Hi(Hi({},f),{},{isShow:!0}))}for(var g=i?l-1:l,x=function(y){var w=o[y],b,N=function(){return b===void 0&&(b=r(w,y)),b};if(y===0){var S=e*(w.coordinate-e*N()/2-c);o[y]=w=Hi(Hi({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[y]=w=Hi(Hi({},w),{},{tickCoord:w.coordinate});var j=Iw(e,w.tickCoord,N,c,u);j&&(c=w.tickCoord+e*(N()/2+s),o[y]=Hi(Hi({},w),{},{isShow:!0}))},m=0;m<g;m++)x(m);return o}function O6(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!s||!s.length||!n)return[];if(Qt(c)||Lx.isSsr)return Pme(s,typeof c=="number"&&Qt(c)?c:0);var p=[],h=l==="top"||l==="bottom"?"width":"height",g=f&&h==="width"?ov(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=function(w,b){var N=sn(u)?u(w.value,b):w.value;return h==="width"?Tme(ov(N,{fontSize:t,letterSpacing:r}),g,d):ov(N,{fontSize:t,letterSpacing:r})[h]},m=s.length>=2?Vc(s[1].coordinate-s[0].coordinate):1,v=Ome(i,m,h);return c==="equidistantPreserveStart"?Ime(m,v,x,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Rme(m,v,x,s,o,c==="preserveStartEnd"):p=Mme(m,v,x,s,o),p.filter(function(y){return y.isShow}))}var Bme=["viewBox"],$me=["viewBox"],Ume=["ticks"];function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}function cm(){return cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cm.apply(this,arguments)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){P6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rj(e,t){if(e==null)return{};var r=zme(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H9(n.key),n)}}function Hme(e,t,r){return t&&jP(e.prototype,t),r&&jP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wme(e,t,r){return t=Dw(t),Vme(e,q9()?Reflect.construct(t,r||[],Dw(e).constructor):t.apply(e,r))}function Vme(e,t){if(t&&(fx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gme(e)}function Gme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q9=function(){return!!e})()}function Dw(e){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dw(e)}function Kme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T3(e,t)}function T3(e,t){return T3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},T3(e,t)}function P6(e,t,r){return t=H9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H9(e){var t=Xme(e,"string");return fx(t)=="symbol"?t:t+""}function Xme(e,t){if(fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bx=function(e){function t(r){var n;return qme(this,t),n=Wme(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Kme(t,e),Hme(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=Rj(n,Bme),l=this.props,c=l.viewBox,u=Rj(l,$me);return!ym(i,c)||!ym(o,u)||!ym(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,f=s.tickSize,d=s.mirror,p=s.tickMargin,h,g,x,m,v,y,w=d?-1:1,b=n.tickSize||f,N=Qt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=g=n.coordinate,m=o+ +!d*c,x=m-w*b,y=x-w*p,v=N;break;case"left":x=m=n.coordinate,g=i+ +!d*l,h=g-w*b,v=h-w*p,y=N;break;case"right":x=m=n.coordinate,g=i+ +d*l,h=g+w*b,v=h+w*p,y=N;break;default:h=g=n.coordinate,m=o+ +d*c,x=m+w*b,y=x+w*p,v=N;break}return{line:{x1:h,y1:x,x2:g,y2:m},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=Rs(Rs(Rs({},vn(this.props,!1)),vn(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);d=Rs(Rs({},d),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var h=+(c==="left"&&!u||c==="right"&&u);d=Rs(Rs({},d),{},{x1:s+h*o,y1:i,x2:s+h*o,y2:i+l})}return nt.createElement("line",cm({},d,{className:Pn("recharts-cartesian-axis-line",cc(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,p=l.unit,h=O6(Rs(Rs({},this.props),{},{ticks:n}),s,i),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),m=vn(this.props,!1),v=vn(f,!1),y=Rs(Rs({},m),{},{fill:"none"},vn(c,!1)),w=h.map(function(b,N){var S=o.getTickLineCoord(b),j=S.line,_=S.tick,E=Rs(Rs(Rs(Rs({textAnchor:g,verticalAnchor:x},m),{},{stroke:"none",fill:u},v),_),{},{index:N,payload:b,visibleTicksCount:h.length,tickFormatter:d});return nt.createElement(qa,cm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},$2(o.props,b,N)),c&&nt.createElement("line",cm({},y,j,{className:Pn("recharts-cartesian-axis-tick-line",cc(c,"className"))})),f&&t.renderTickItem(f,E,"".concat(sn(d)?d(b.value,N):b.value).concat(p||"")))});return nt.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var d=this.props,p=d.ticks,h=Rj(d,Ume),g=p;return sn(c)&&(g=p&&p.length>0?c(this.props):c(h)),o<=0||l<=0||!g||!g.length?null:nt.createElement(qa,{className:Pn("recharts-cartesian-axis",u),ref:function(m){n.layerReference=m}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Ki.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=Pn(s.className,"recharts-cartesian-axis-tick-value");return nt.isValidElement(n)?o=nt.cloneElement(n,Rs(Rs({},s),{},{className:l})):sn(n)?o=n(Rs(Rs({},s),{},{className:l})):o=nt.createElement(ew,cm({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(D.Component);P6(Bx,"displayName","CartesianAxis");P6(Bx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Yme=["x1","y1","x2","y2","key"],Jme=["offset"];function zh(e){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function kP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(r),!0).forEach(function(n){Qme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qme(e,t,r){return t=Zme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zme(e){var t=exe(e,"string");return zh(t)=="symbol"?t:t+""}function exe(e,t){if(zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(this,arguments)}function SP(e,t){if(e==null)return{};var r=txe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function txe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var rxe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return nt.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function W9(e,t){var r;if(nt.isValidElement(e))r=nt.cloneElement(e,t);else if(sn(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=SP(t,Yme),u=vn(c,!1);u.offset;var f=SP(u,Jme);r=nt.createElement("line",oh({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function nxe(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Xi(Xi({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return W9(s,u)});return nt.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function axe(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Xi(Xi({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return W9(s,u)});return nt.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function sxe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,h){return p-h});s!==f[0]&&f.unshift(0);var d=f.map(function(p,h){var g=!f[h+1],x=g?s+o-p:f[h+1]-p;if(x<=0)return null;var m=h%t.length;return nt.createElement("rect",{key:"react-".concat(h),y:p,x:n,height:x,width:i,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return nt.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function ixe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==f[0]&&f.unshift(0);var d=f.map(function(p,h){var g=!f[h+1],x=g?i+l-p:f[h+1]-p;if(x<=0)return null;var m=h%n.length;return nt.createElement("rect",{key:"react-".concat(h),x:p,y:o,width:x,height:c,stroke:"none",fill:n[m],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return nt.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var oxe=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return t9(O6(Xi(Xi(Xi({},Bx.defaultProps),n),{},{ticks:yd(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},lxe=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return t9(O6(Xi(Xi(Xi({},Bx.defaultProps),n),{},{ticks:yd(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},$p={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function V9(e){var t,r,n,s,i,o,l=A6(),c=C6(),u=Xpe(),f=Xi(Xi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:$p.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:$p.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:$p.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:$p.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:$p.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:$p.verticalFill,x:Qt(e.x)?e.x:u.left,y:Qt(e.y)?e.y:u.top,width:Qt(e.width)?e.width:u.width,height:Qt(e.height)?e.height:u.height}),d=f.x,p=f.y,h=f.width,g=f.height,x=f.syncWithTicks,m=f.horizontalValues,v=f.verticalValues,y=Vpe(),w=Gpe();if(!Qt(h)||h<=0||!Qt(g)||g<=0||!Qt(d)||d!==+d||!Qt(p)||p!==+p)return null;var b=f.verticalCoordinatesGenerator||oxe,N=f.horizontalCoordinatesGenerator||lxe,S=f.horizontalPoints,j=f.verticalPoints;if((!S||!S.length)&&sn(N)){var _=m&&m.length,E=N({yAxis:w?Xi(Xi({},w),{},{ticks:_?m:w.ticks}):void 0,width:l,height:c,offset:u},_?!0:x);Ad(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(zh(E),"]")),Array.isArray(E)&&(S=E)}if((!j||!j.length)&&sn(b)){var I=v&&v.length,A=b({xAxis:y?Xi(Xi({},y),{},{ticks:I?v:y.ticks}):void 0,width:l,height:c,offset:u},I?!0:x);Ad(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(zh(A),"]")),Array.isArray(A)&&(j=A)}return nt.createElement("g",{className:"recharts-cartesian-grid"},nt.createElement(rxe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),nt.createElement(nxe,oh({},f,{offset:u,horizontalPoints:S,xAxis:y,yAxis:w})),nt.createElement(axe,oh({},f,{offset:u,verticalPoints:j,xAxis:y,yAxis:w})),nt.createElement(sxe,oh({},f,{horizontalPoints:S})),nt.createElement(ixe,oh({},f,{verticalPoints:j})))}V9.displayName="CartesianGrid";var cxe=["layout","type","stroke","connectNulls","isRange","ref"],uxe=["key"],G9;function hx(e){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hx(e)}function K9(e,t){if(e==null)return{};var r=dxe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(this,arguments)}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){Iu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y9(n.key),n)}}function hxe(e,t,r){return t&&AP(e.prototype,t),r&&AP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pxe(e,t,r){return t=Lw(t),mxe(e,X9()?Reflect.construct(t,r||[],Lw(e).constructor):t.apply(e,r))}function mxe(e,t){if(t&&(hx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xxe(e)}function xxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X9=function(){return!!e})()}function Lw(e){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lw(e)}function gxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O3(e,t)}function O3(e,t){return O3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},O3(e,t)}function Iu(e,t,r){return t=Y9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y9(e){var t=vxe(e,"string");return hx(t)=="symbol"?t:t+""}function vxe(e,t){if(hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var w0=function(e){function t(){var r;fxe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=pxe(this,t,[].concat(s)),Iu(r,"state",{isAnimationFinished:!0}),Iu(r,"id",X1("recharts-area-")),Iu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),sn(o)&&o()}),Iu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),sn(o)&&o()}),r}return gxe(t,e),hxe(t,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,f=c.points,d=c.dataKey,p=vn(this.props,!1),h=vn(u,!0),g=f.map(function(m,v){var y=yf(yf(yf({key:"dot-".concat(v),r:3},p),h),{},{index:v,cx:m.x,cy:m.y,dataKey:d,value:m.value,payload:m.payload,points:f});return t.renderDotItem(u,y)}),x={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return nt.createElement(qa,lh({className:"recharts-area-dots"},x),g)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=n*Math.abs(c-u),d=Bf(o.map(function(p){return p.y||0}));return Qt(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Bf(i.map(function(p){return p.y||0})),d)),Qt(d)?nt.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(d+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=n*Math.abs(c-u),d=Bf(o.map(function(p){return p.x||0}));return Qt(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Bf(i.map(function(p){return p.x||0})),d)),Qt(d)?nt.createElement("rect",{x:0,y:c<u?c:c-f,width:d+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,c=l.layout,u=l.type,f=l.stroke,d=l.connectNulls,p=l.isRange;l.ref;var h=K9(l,cxe);return nt.createElement(qa,{clipPath:i?"url(#clipPath-".concat(o,")"):null},nt.createElement(uv,lh({},vn(h,!0),{points:n,connectNulls:d,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&nt.createElement(uv,lh({},vn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&p&&nt.createElement(uv,lh({},vn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,h=o.animationId,g=this.state,x=g.prevPoints,m=g.prevBaseLine;return nt.createElement(Ud,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(x){var w=x.length/l.length,b=l.map(function(_,E){var I=Math.floor(E*w);if(x[I]){var A=x[I],C=nc(A.x,_.x),F=nc(A.y,_.y);return yf(yf({},_),{},{x:C(y),y:F(y)})}return _}),N;if(Qt(c)&&typeof c=="number"){var S=nc(m,c);N=S(y)}else if(Nn(c)||Ox(c)){var j=nc(m,0);N=j(y)}else N=c.map(function(_,E){var I=Math.floor(E*w);if(m[I]){var A=m[I],C=nc(A.x,_.x),F=nc(A.y,_.y);return yf(yf({},_),{},{x:C(y),y:F(y)})}return _});return i.renderAreaStatically(b,N,n,s)}return nt.createElement(qa,null,nt.createElement("defs",null,nt.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),nt.createElement(qa,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,p=u.totalLength;return c&&o&&o.length&&(!f&&p>0||!Qv(f,o)||!Qv(d,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,f=s.left,d=s.xAxis,p=s.yAxis,h=s.width,g=s.height,x=s.isAnimationActive,m=s.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,y=l.length===1,w=Pn("recharts-area",c),b=d&&d.allowDataOverflow,N=p&&p.allowDataOverflow,S=b||N,j=Nn(m)?this.id:m,_=(n=vn(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},E=_.r,I=E===void 0?3:E,A=_.strokeWidth,C=A===void 0?2:A,F=PK(o)?o:{},M=F.clipDot,B=M===void 0?!0:M,K=I*2+C;return nt.createElement(qa,{className:w},b||N?nt.createElement("defs",null,nt.createElement("clipPath",{id:"clipPath-".concat(j)},nt.createElement("rect",{x:b?f:f-h/2,y:N?u:u-g/2,width:b?h:h*2,height:N?g:g*2})),!B&&nt.createElement("clipPath",{id:"clipPath-dots-".concat(j)},nt.createElement("rect",{x:f-K/2,y:u-K/2,width:h+K,height:g+K}))):null,y?null:this.renderArea(S,j),(o||y)&&this.renderDots(S,B,j),(!x||v)&&t0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(D.PureComponent);G9=w0;Iu(w0,"displayName","Area");Iu(w0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Lx.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Iu(w0,"getBaseValue",function(e,t,r,n){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Qt(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return l==="dataMin"?d:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Iu(w0,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,h=t.layout,g=u&&u.length,x=G9.getBaseValue(t,r,n,s),m=h==="horizontal",v=!1,y=d.map(function(b,N){var S;g?S=u[f+N]:(S=Tl(b,c),Array.isArray(S)?v=!0:S=[x,S]);var j=S[1]==null||g&&Tl(b,c)==null;return m?{x:dO({axis:n,ticks:i,bandSize:l,entry:b,index:N}),y:j?null:s.scale(S[1]),value:S,payload:b}:{x:j?null:n.scale(S[1]),y:dO({axis:s,ticks:o,bandSize:l,entry:b,index:N}),value:S,payload:b}}),w;return g||v?w=y.map(function(b){var N=Array.isArray(b.value)?b.value[0]:null;return m?{x:b.x,y:N!=null&&b.y!=null?s.scale(N):null}:{x:N!=null?n.scale(N):null,y:b.y}}):w=m?s.scale(x):n.scale(x),yf({points:y,baseLine:w,layout:h,isRange:v},p)});Iu(w0,"renderDotItem",function(e,t){var r;if(nt.isValidElement(e))r=nt.cloneElement(e,t);else if(sn(e))r=e(t);else{var n=Pn("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=K9(t,uxe);r=nt.createElement(j6,lh({},i,{key:s,className:n}))}return r});function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function yxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z9(n.key),n)}}function wxe(e,t,r){return t&&bxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nxe(e,t,r){return t=Fw(t),jxe(e,J9()?Reflect.construct(t,r||[],Fw(e).constructor):t.apply(e,r))}function jxe(e,t){if(t&&(px(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kxe(e)}function kxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J9=function(){return!!e})()}function Fw(e){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fw(e)}function Sxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P3(e,t)}function P3(e,t){return P3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},P3(e,t)}function Q9(e,t,r){return t=Z9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z9(e){var t=_xe(e,"string");return px(t)=="symbol"?t:t+""}function _xe(e,t){if(px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function I3(){return I3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I3.apply(this,arguments)}function Axe(e){var t=e.xAxisId,r=A6(),n=C6(),s=D9(t);return s==null?null:D.createElement(Bx,I3({},s,{className:Pn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return yd(o,!0)}}))}var uN=function(e){function t(){return yxe(this,t),Nxe(this,t,arguments)}return Sxe(t,e),wxe(t,[{key:"render",value:function(){return D.createElement(Axe,this.props)}}])}(D.Component);Q9(uN,"displayName","XAxis");Q9(uN,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function mx(e){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mx(e)}function Cxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Exe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rR(n.key),n)}}function Txe(e,t,r){return t&&Exe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oxe(e,t,r){return t=Mw(t),Pxe(e,eR()?Reflect.construct(t,r||[],Mw(e).constructor):t.apply(e,r))}function Pxe(e,t){if(t&&(mx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ixe(e)}function Ixe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eR=function(){return!!e})()}function Mw(e){return Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mw(e)}function Dxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D3(e,t)}function D3(e,t){return D3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},D3(e,t)}function tR(e,t,r){return t=rR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rR(e){var t=Lxe(e,"string");return mx(t)=="symbol"?t:t+""}function Lxe(e,t){if(mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function L3(){return L3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L3.apply(this,arguments)}var Fxe=function(t){var r=t.yAxisId,n=A6(),s=C6(),i=L9(r);return i==null?null:D.createElement(Bx,L3({},i,{className:Pn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return yd(l,!0)}}))},dN=function(e){function t(){return Cxe(this,t),Oxe(this,t,arguments)}return Dxe(t,e),Txe(t,[{key:"render",value:function(){return D.createElement(Fxe,this.props)}}])}(D.Component);tR(dN,"displayName","YAxis");tR(dN,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function CP(e){return $xe(e)||Bxe(e)||Rxe(e)||Mxe()}function Mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rxe(e,t){if(e){if(typeof e=="string")return F3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F3(e,t)}}function Bxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $xe(e){if(Array.isArray(e))return F3(e)}function F3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M3=function(t,r,n,s,i){var o=Qc(t,T6),l=Qc(t,oN),c=[].concat(CP(o),CP(l)),u=Qc(t,cN),f="".concat(s,"Id"),d=s[0],p=r;if(c.length&&(p=c.reduce(function(x,m){if(m.props[f]===n&&qu(m.props,"extendDomain")&&Qt(m.props[d])){var v=m.props[d];return[Math.min(x[0],v),Math.max(x[1],v)]}return x},p)),u.length){var h="".concat(d,"1"),g="".concat(d,"2");p=u.reduce(function(x,m){if(m.props[f]===n&&qu(m.props,"extendDomain")&&Qt(m.props[h])&&Qt(m.props[g])){var v=m.props[h],y=m.props[g];return[Math.min(x[0],v,y),Math.max(x[1],v,y)]}return x},p)}return i&&i.length&&(p=i.reduce(function(x,m){return Qt(m)?[Math.min(x[0],m),Math.max(x[1],m)]:x},p)),p},nR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var h=new s(f,d||c,p),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,h=d.length,g=new Array(h);p<h;p++)g[p]=d[p].fn;return g},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,p,h,g){var x=r?r+u:u;if(!this._events[x])return!1;var m=this._events[x],v=arguments.length,y,w;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,d),!0;case 4:return m.fn.call(m.context,f,d,p),!0;case 5:return m.fn.call(m.context,f,d,p,h),!0;case 6:return m.fn.call(m.context,f,d,p,h,g),!0}for(w=1,y=new Array(v-1);w<v;w++)y[w-1]=arguments[w];m.fn.apply(m.context,y)}else{var b=m.length,N;for(w=0;w<b;w++)switch(m[w].once&&this.removeListener(u,m[w].fn,void 0,!0),v){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,f);break;case 3:m[w].fn.call(m[w].context,f,d);break;case 4:m[w].fn.call(m[w].context,f,d,p);break;default:if(!y)for(N=1,y=new Array(v-1);N<v;N++)y[N-1]=arguments[N];m[w].fn.apply(m[w].context,y)}}return!0},l.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,p){var h=r?r+u:u;if(!this._events[h])return this;if(!f)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===f&&(!p||g.once)&&(!d||g.context===d)&&o(this,h);else{for(var x=0,m=[],v=g.length;x<v;x++)(g[x].fn!==f||p&&!g[x].once||d&&g[x].context!==d)&&m.push(g[x]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(nR);var Uxe=nR.exports;const zxe=sa(Uxe);var Bj=new zxe,$j="recharts.syncMouseEvents";function b1(e){"@babel/helpers - typeof";return b1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b1(e)}function qxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aR(n.key),n)}}function Wxe(e,t,r){return t&&Hxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uj(e,t,r){return t=aR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aR(e){var t=Vxe(e,"string");return b1(t)=="symbol"?t:t+""}function Vxe(e,t){if(b1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(b1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gxe=function(){function e(){qxe(this,e),Uj(this,"activeIndex",0),Uj(this,"coordinateList",[]),Uj(this,"layout","horizontal")}return Wxe(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,p=r.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Kxe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&Qt(n)&&Qt(s))return!0}return!1}function Xxe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function sR(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=ki(t,r,n,s),l=ki(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function Yxe(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,p=ki(l,c,u,d),h=ki(l,c,f,d);n=p.x,s=p.y,i=h.x,o=h.y}else return sR(t);return[{x:n,y:s},{x:i,y:o}]}function w1(e){"@babel/helpers - typeof";return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w1(e)}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(n){Jxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jxe(e,t,r){return t=Qxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qxe(e){var t=Zxe(e,"string");return w1(t)=="symbol"?t:t+""}function Zxe(e,t){if(w1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(w1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ege(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,p=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var g,x=uv;if(p==="ScatterChart")g=o,x=n0e;else if(p==="BarChart")g=Xxe(d,o,c,f),x=N6;else if(d==="radial"){var m=sR(o),v=m.cx,y=m.cy,w=m.radius,b=m.startAngle,N=m.endAngle;g={cx:v,cy:y,startAngle:b,endAngle:N,innerRadius:w,outerRadius:w},x=i9}else g={points:Yxe(d,o,c)},x=uv;var S=hb(hb(hb(hb({stroke:"#ccc",pointerEvents:"none"},c),g),vn(h,!1)),{},{payload:l,payloadIndex:u,className:Pn("recharts-tooltip-cursor",h.className)});return D.isValidElement(h)?D.cloneElement(h,S):D.createElement(x,S)}var tge=["item"],rge=["children","className","width","height","style","compact","title","desc"];function xx(e){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xx(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(this,arguments)}function TP(e,t){return sge(e)||age(e,t)||oR(e,t)||nge()}function nge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function age(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function sge(e){if(Array.isArray(e))return e}function OP(e,t){if(e==null)return{};var r=ige(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ige(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lR(n.key),n)}}function cge(e,t,r){return t&&lge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uge(e,t,r){return t=Rw(t),dge(e,iR()?Reflect.construct(t,r||[],Rw(e).constructor):t.apply(e,r))}function dge(e,t){if(t&&(xx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fge(e)}function fge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iR=function(){return!!e})()}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rw(e)}function hge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R3(e,t)}function R3(e,t){return R3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},R3(e,t)}function gx(e){return xge(e)||mge(e)||oR(e)||pge()}function pge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oR(e,t){if(e){if(typeof e=="string")return B3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B3(e,t)}}function mge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xge(e){if(Array.isArray(e))return B3(e)}function B3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(n){Mr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mr(e,t,r){return t=lR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lR(e){var t=gge(e,"string");return xx(t)=="symbol"?t:t+""}function gge(e,t){if(xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vge={xAxis:["bottom","top"],yAxis:["left","right"]},yge={width:"100%",height:"100%"},cR={x:0,y:0};function pb(e){return e}var bge=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},wge=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return St(St(St({},s),ki(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return St(St(St({},s),ki(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return cR},fN=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(gx(l),gx(u)):l},[]);return o.length>0?o:t&&t.length&&Qt(s)&&Qt(i)?t.slice(s,i+1):[]};function uR(e){return e==="number"?[0,"auto"]:void 0}var $3=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=fN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var h=d===void 0?l:d;p=R2(h,o.dataKey,s)}else p=d&&d[n]||l[n];return p?[].concat(gx(c),[n9(u,p)]):c},[])},IP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=bge(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=Lce(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,p=$3(t,r,f,d),h=wge(n,l,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:p,activeCoordinate:h}}return null},Nge=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=t.stackOffset,h=e9(f,i);return n.reduce(function(g,x){var m,v=x.type.defaultProps!==void 0?St(St({},x.type.defaultProps),x.props):x.props,y=v.type,w=v.dataKey,b=v.allowDataOverflow,N=v.allowDuplicatedCategory,S=v.scale,j=v.ticks,_=v.includeHidden,E=v[o];if(g[E])return g;var I=fN(t.data,{graphicalItems:s.filter(function(T){var R,z=o in T.props?T.props[o]:(R=T.type.defaultProps)===null||R===void 0?void 0:R[o];return z===E}),dataStartIndex:c,dataEndIndex:u}),A=I.length,C,F,M;Kxe(v.domain,b,y)&&(C=s3(v.domain,null,b),h&&(y==="number"||S!=="auto")&&(M=cv(I,w,"category")));var B=uR(y);if(!C||C.length===0){var K,G=(K=v.domain)!==null&&K!==void 0?K:B;if(w){if(C=cv(I,w,y),y==="category"&&h){var Y=NK(C);N&&Y?(F=C,C=Sw(0,A)):N||(C=mO(G,C,x).reduce(function(T,R){return T.indexOf(R)>=0?T:[].concat(gx(T),[R])},[]))}else if(y==="category")N?C=C.filter(function(T){return T!==""&&!Nn(T)}):C=mO(G,C,x).reduce(function(T,R){return T.indexOf(R)>=0||R===""||Nn(R)?T:[].concat(gx(T),[R])},[]);else if(y==="number"){var q=$ce(I,s.filter(function(T){var R,z,L=o in T.props?T.props[o]:(R=T.type.defaultProps)===null||R===void 0?void 0:R[o],H="hide"in T.props?T.props.hide:(z=T.type.defaultProps)===null||z===void 0?void 0:z.hide;return L===E&&(_||!H)}),w,i,f);q&&(C=q)}h&&(y==="number"||S!=="auto")&&(M=cv(I,w,"category"))}else h?C=Sw(0,A):l&&l[E]&&l[E].hasStack&&y==="number"?C=p==="expand"?[0,1]:r9(l[E].stackGroups,c,u):C=ZM(I,s.filter(function(T){var R=o in T.props?T.props[o]:T.type.defaultProps[o],z="hide"in T.props?T.props.hide:T.type.defaultProps.hide;return R===E&&(_||!z)}),y,f,!0);if(y==="number")C=M3(d,C,E,i,j),G&&(C=s3(G,C,b));else if(y==="category"&&G){var X=G,V=C.every(function(T){return X.indexOf(T)>=0});V&&(C=X)}}return St(St({},g),{},Mr({},E,St(St({},v),{},{axisType:i,domain:C,categoricalDomain:M,duplicateDomain:F,originalDomain:(m=v.domain)!==null&&m!==void 0?m:B,isCategorical:h,layout:f})))},{})},jge=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=fN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=p.length,g=e9(f,i),x=-1;return n.reduce(function(m,v){var y=v.type.defaultProps!==void 0?St(St({},v.type.defaultProps),v.props):v.props,w=y[o],b=uR("number");if(!m[w]){x++;var N;return g?N=Sw(0,h):l&&l[w]&&l[w].hasStack?(N=r9(l[w].stackGroups,c,u),N=M3(d,N,w,i)):(N=s3(b,ZM(p,n.filter(function(S){var j,_,E=o in S.props?S.props[o]:(j=S.type.defaultProps)===null||j===void 0?void 0:j[o],I="hide"in S.props?S.props.hide:(_=S.type.defaultProps)===null||_===void 0?void 0:_.hide;return E===w&&!I}),"number",f),s.defaultProps.allowDataOverflow),N=M3(d,N,w,i)),St(St({},m),{},Mr({},w,St(St({axisType:i},s.defaultProps),{},{hide:!0,orientation:cc(vge,"".concat(i,".").concat(x%2),null),domain:N,originalDomain:b,isCategorical:g,layout:f})))}return m},{})},kge=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(s,"Id"),p=Qc(f,i),h={};return p&&p.length?h=Nge(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(h=jge(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),h},Sge=function(t){var r=Af(t),n=yd(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:X_(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:mw(r,n)}},DP=function(t){var r=t.children,n=t.defaultShowTooltip,s=vl(r,ox),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},_ge=function(t){return!t||!t.length?!1:t.some(function(r){var n=_d(r&&r.type);return n&&n.indexOf("Bar")>=0})},LP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Age=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,p=n.margin||{},h=vl(d,ox),g=vl(d,bm),x=Object.keys(c).reduce(function(N,S){var j=c[S],_=j.orientation;return!j.mirror&&!j.hide?St(St({},N),{},Mr({},_,N[_]+j.width)):N},{left:p.left||0,right:p.right||0}),m=Object.keys(o).reduce(function(N,S){var j=o[S],_=j.orientation;return!j.mirror&&!j.hide?St(St({},N),{},Mr({},_,cc(N,"".concat(_))+j.height)):N},{top:p.top||0,bottom:p.bottom||0}),v=St(St({},m),x),y=v.bottom;h&&(v.bottom+=h.props.height||ox.defaultProps.height),g&&r&&(v=Rce(v,s,n,r));var w=u-v.left-v.right,b=f-v.top-v.bottom;return St(St({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(b,0)})},Cge=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ege=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,p=function(v,y){var w=y.graphicalItems,b=y.stackGroups,N=y.offset,S=y.updateId,j=y.dataStartIndex,_=y.dataEndIndex,E=v.barSize,I=v.layout,A=v.barGap,C=v.barCategoryGap,F=v.maxBarSize,M=LP(I),B=M.numericAxisName,K=M.cateAxisName,G=_ge(w),Y=[];return w.forEach(function(q,X){var V=fN(v.data,{graphicalItems:[q],dataStartIndex:j,dataEndIndex:_}),T=q.type.defaultProps!==void 0?St(St({},q.type.defaultProps),q.props):q.props,R=T.dataKey,z=T.maxBarSize,L=T["".concat(B,"Id")],H=T["".concat(K,"Id")],ne={},se=c.reduce(function(ge,Ce){var Ue=y["".concat(Ce.axisType,"Map")],Te=T["".concat(Ce.axisType,"Id")];Ue&&Ue[Te]||Ce.axisType==="zAxis"||Uh();var ue=Ue[Te];return St(St({},ge),{},Mr(Mr({},Ce.axisType,ue),"".concat(Ce.axisType,"Ticks"),yd(ue)))},ne),Q=se[K],re=se["".concat(K,"Ticks")],Ae=b&&b[L]&&b[L].hasStack&&Qce(q,b[L].stackGroups),ee=_d(q.type).indexOf("Bar")>=0,Me=mw(Q,re),ze=[],oe=G&&Fce({barSize:E,stackGroups:b,totalSize:Cge(se,K)});if(ee){var J,je,ce=Nn(z)?F:z,ye=(J=(je=mw(Q,re,!0))!==null&&je!==void 0?je:ce)!==null&&J!==void 0?J:0;ze=Mce({barGap:A,barCategoryGap:C,bandSize:ye!==Me?ye:Me,sizeList:oe[H],maxBarSize:ce}),ye!==Me&&(ze=ze.map(function(ge){return St(St({},ge),{},{position:St(St({},ge.position),{},{offset:ge.position.offset-ye/2})})}))}var me=q&&q.type&&q.type.getComposedData;me&&Y.push({props:St(St({},me(St(St({},se),{},{displayedData:V,props:v,dataKey:R,item:q,bandSize:Me,barPosition:ze,offset:N,stackedData:Ae,layout:I,dataStartIndex:j,dataEndIndex:_}))),{},Mr(Mr(Mr({key:q.key||"item-".concat(X)},B,se[B]),K,se[K]),"animationId",S)),childIndex:LK(q,v.children),item:q})}),Y},h=function(v,y){var w=v.props,b=v.dataStartIndex,N=v.dataEndIndex,S=v.updateId;if(!lE({props:w}))return null;var j=w.children,_=w.layout,E=w.stackOffset,I=w.data,A=w.reverseStackOrder,C=LP(_),F=C.numericAxisName,M=C.cateAxisName,B=Qc(j,n),K=Xce(I,B,"".concat(F,"Id"),"".concat(M,"Id"),E,A),G=c.reduce(function(T,R){var z="".concat(R.axisType,"Map");return St(St({},T),{},Mr({},z,kge(w,St(St({},R),{},{graphicalItems:B,stackGroups:R.axisType===F&&K,dataStartIndex:b,dataEndIndex:N}))))},{}),Y=Age(St(St({},G),{},{props:w,graphicalItems:B}),y==null?void 0:y.legendBBox);Object.keys(G).forEach(function(T){G[T]=f(w,G[T],Y,T.replace("Map",""),r)});var q=G["".concat(M,"Map")],X=Sge(q),V=p(w,St(St({},G),{},{dataStartIndex:b,dataEndIndex:N,updateId:S,graphicalItems:B,stackGroups:K,offset:Y}));return St(St({formattedGraphicalItems:V,graphicalItems:B,offset:Y,stackGroups:K},X),G)},g=function(m){function v(y){var w,b,N;return oge(this,v),N=uge(this,v,[y]),Mr(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Mr(N,"accessibilityManager",new Gxe),Mr(N,"handleLegendBBoxUpdate",function(S){if(S){var j=N.state,_=j.dataStartIndex,E=j.dataEndIndex,I=j.updateId;N.setState(St({legendBBox:S},h({props:N.props,dataStartIndex:_,dataEndIndex:E,updateId:I},St(St({},N.state),{},{legendBBox:S}))))}}),Mr(N,"handleReceiveSyncEvent",function(S,j,_){if(N.props.syncId===S){if(_===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(j)}}),Mr(N,"handleBrushChange",function(S){var j=S.startIndex,_=S.endIndex;if(j!==N.state.dataStartIndex||_!==N.state.dataEndIndex){var E=N.state.updateId;N.setState(function(){return St({dataStartIndex:j,dataEndIndex:_},h({props:N.props,dataStartIndex:j,dataEndIndex:_,updateId:E},N.state))}),N.triggerSyncEvent({dataStartIndex:j,dataEndIndex:_})}}),Mr(N,"handleMouseEnter",function(S){var j=N.getMouseInfo(S);if(j){var _=St(St({},j),{},{isTooltipActive:!0});N.setState(_),N.triggerSyncEvent(_);var E=N.props.onMouseEnter;sn(E)&&E(_,S)}}),Mr(N,"triggeredAfterMouseMove",function(S){var j=N.getMouseInfo(S),_=j?St(St({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(_),N.triggerSyncEvent(_);var E=N.props.onMouseMove;sn(E)&&E(_,S)}),Mr(N,"handleItemMouseEnter",function(S){N.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Mr(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Mr(N,"handleMouseMove",function(S){S.persist(),N.throttleTriggeredAfterMouseMove(S)}),Mr(N,"handleMouseLeave",function(S){N.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};N.setState(j),N.triggerSyncEvent(j);var _=N.props.onMouseLeave;sn(_)&&_(j,S)}),Mr(N,"handleOuterEvent",function(S){var j=DK(S),_=cc(N.props,"".concat(j));if(j&&sn(_)){var E,I;/.*touch.*/i.test(j)?I=N.getMouseInfo(S.changedTouches[0]):I=N.getMouseInfo(S),_((E=I)!==null&&E!==void 0?E:{},S)}}),Mr(N,"handleClick",function(S){var j=N.getMouseInfo(S);if(j){var _=St(St({},j),{},{isTooltipActive:!0});N.setState(_),N.triggerSyncEvent(_);var E=N.props.onClick;sn(E)&&E(_,S)}}),Mr(N,"handleMouseDown",function(S){var j=N.props.onMouseDown;if(sn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Mr(N,"handleMouseUp",function(S){var j=N.props.onMouseUp;if(sn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Mr(N,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Mr(N,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseDown(S.changedTouches[0])}),Mr(N,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseUp(S.changedTouches[0])}),Mr(N,"handleDoubleClick",function(S){var j=N.props.onDoubleClick;if(sn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Mr(N,"handleContextMenu",function(S){var j=N.props.onContextMenu;if(sn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Mr(N,"triggerSyncEvent",function(S){N.props.syncId!==void 0&&Bj.emit($j,N.props.syncId,S,N.eventEmitterSymbol)}),Mr(N,"applySyncEvent",function(S){var j=N.props,_=j.layout,E=j.syncMethod,I=N.state.updateId,A=S.dataStartIndex,C=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)N.setState(St({dataStartIndex:A,dataEndIndex:C},h({props:N.props,dataStartIndex:A,dataEndIndex:C,updateId:I},N.state)));else if(S.activeTooltipIndex!==void 0){var F=S.chartX,M=S.chartY,B=S.activeTooltipIndex,K=N.state,G=K.offset,Y=K.tooltipTicks;if(!G)return;if(typeof E=="function")B=E(Y,S);else if(E==="value"){B=-1;for(var q=0;q<Y.length;q++)if(Y[q].value===S.activeLabel){B=q;break}}var X=St(St({},G),{},{x:G.left,y:G.top}),V=Math.min(F,X.x+X.width),T=Math.min(M,X.y+X.height),R=Y[B]&&Y[B].value,z=$3(N.state,N.props.data,B),L=Y[B]?{x:_==="horizontal"?Y[B].coordinate:V,y:_==="horizontal"?T:Y[B].coordinate}:cR;N.setState(St(St({},S),{},{activeLabel:R,activeCoordinate:L,activePayload:z,activeTooltipIndex:B}))}else N.setState(S)}),Mr(N,"renderCursor",function(S){var j,_=N.state,E=_.isTooltipActive,I=_.activeCoordinate,A=_.activePayload,C=_.offset,F=_.activeTooltipIndex,M=_.tooltipAxisBandSize,B=N.getTooltipEventType(),K=(j=S.props.active)!==null&&j!==void 0?j:E,G=N.props.layout,Y=S.key||"_recharts-cursor";return nt.createElement(ege,{key:Y,activeCoordinate:I,activePayload:A,activeTooltipIndex:F,chartName:r,element:S,isActive:K,layout:G,offset:C,tooltipAxisBandSize:M,tooltipEventType:B})}),Mr(N,"renderPolarAxis",function(S,j,_){var E=cc(S,"type.axisType"),I=cc(N.state,"".concat(E,"Map")),A=S.type.defaultProps,C=A!==void 0?St(St({},A),S.props):S.props,F=I&&I[C["".concat(E,"Id")]];return D.cloneElement(S,St(St({},F),{},{className:Pn(E,F.className),key:S.key||"".concat(j,"-").concat(_),ticks:yd(F,!0)}))}),Mr(N,"renderPolarGrid",function(S){var j=S.props,_=j.radialLines,E=j.polarAngles,I=j.polarRadius,A=N.state,C=A.radiusAxisMap,F=A.angleAxisMap,M=Af(C),B=Af(F),K=B.cx,G=B.cy,Y=B.innerRadius,q=B.outerRadius;return D.cloneElement(S,{polarAngles:Array.isArray(E)?E:yd(B,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(I)?I:yd(M,!0).map(function(X){return X.coordinate}),cx:K,cy:G,innerRadius:Y,outerRadius:q,key:S.key||"polar-grid",radialLines:_})}),Mr(N,"renderLegend",function(){var S=N.state.formattedGraphicalItems,j=N.props,_=j.children,E=j.width,I=j.height,A=N.props.margin||{},C=E-(A.left||0)-(A.right||0),F=JM({children:_,formattedGraphicalItems:S,legendWidth:C,legendContent:u});if(!F)return null;var M=F.item,B=OP(F,tge);return D.cloneElement(M,St(St({},B),{},{chartWidth:E,chartHeight:I,margin:A,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Mr(N,"renderTooltip",function(){var S,j=N.props,_=j.children,E=j.accessibilityLayer,I=vl(_,_u);if(!I)return null;var A=N.state,C=A.isTooltipActive,F=A.activeCoordinate,M=A.activePayload,B=A.activeLabel,K=A.offset,G=(S=I.props.active)!==null&&S!==void 0?S:C;return D.cloneElement(I,{viewBox:St(St({},K),{},{x:K.left,y:K.top}),active:G,label:B,payload:G?M:[],coordinate:F,accessibilityLayer:E})}),Mr(N,"renderBrush",function(S){var j=N.props,_=j.margin,E=j.data,I=N.state,A=I.offset,C=I.dataStartIndex,F=I.dataEndIndex,M=I.updateId;return D.cloneElement(S,{key:S.key||"_recharts-brush",onChange:cb(N.handleBrushChange,S.props.onChange),data:E,x:Qt(S.props.x)?S.props.x:A.left,y:Qt(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(_.bottom||0),width:Qt(S.props.width)?S.props.width:A.width,startIndex:C,endIndex:F,updateId:"brush-".concat(M)})}),Mr(N,"renderReferenceElement",function(S,j,_){if(!S)return null;var E=N,I=E.clipPathId,A=N.state,C=A.xAxisMap,F=A.yAxisMap,M=A.offset,B=S.type.defaultProps||{},K=S.props,G=K.xAxisId,Y=G===void 0?B.xAxisId:G,q=K.yAxisId,X=q===void 0?B.yAxisId:q;return D.cloneElement(S,{key:S.key||"".concat(j,"-").concat(_),xAxis:C[Y],yAxis:F[X],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:I})}),Mr(N,"renderActivePoints",function(S){var j=S.item,_=S.activePoint,E=S.basePoint,I=S.childIndex,A=S.isRange,C=[],F=j.props.key,M=j.item.type.defaultProps!==void 0?St(St({},j.item.type.defaultProps),j.item.props):j.item.props,B=M.activeDot,K=M.dataKey,G=St(St({index:I,dataKey:K,cx:_.x,cy:_.y,r:4,fill:w6(j.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},vn(B,!1)),B2(B));return C.push(v.renderActiveDot(B,G,"".concat(F,"-activePoint-").concat(I))),E?C.push(v.renderActiveDot(B,St(St({},G),{},{cx:E.x,cy:E.y}),"".concat(F,"-basePoint-").concat(I))):A&&C.push(null),C}),Mr(N,"renderGraphicChild",function(S,j,_){var E=N.filterFormatItem(S,j,_);if(!E)return null;var I=N.getTooltipEventType(),A=N.state,C=A.isTooltipActive,F=A.tooltipAxis,M=A.activeTooltipIndex,B=A.activeLabel,K=N.props.children,G=vl(K,_u),Y=E.props,q=Y.points,X=Y.isRange,V=Y.baseLine,T=E.item.type.defaultProps!==void 0?St(St({},E.item.type.defaultProps),E.item.props):E.item.props,R=T.activeDot,z=T.hide,L=T.activeBar,H=T.activeShape,ne=!!(!z&&C&&G&&(R||L||H)),se={};I!=="axis"&&G&&G.props.trigger==="click"?se={onClick:cb(N.handleItemMouseEnter,S.props.onClick)}:I!=="axis"&&(se={onMouseLeave:cb(N.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:cb(N.handleItemMouseEnter,S.props.onMouseEnter)});var Q=D.cloneElement(S,St(St({},E.props),se));function re(Ce){return typeof F.dataKey=="function"?F.dataKey(Ce.payload):null}if(ne)if(M>=0){var Ae,ee;if(F.dataKey&&!F.allowDuplicatedCategory){var Me=typeof F.dataKey=="function"?re:"payload.".concat(F.dataKey.toString());Ae=R2(q,Me,B),ee=X&&V&&R2(V,Me,B)}else Ae=q==null?void 0:q[M],ee=X&&V&&V[M];if(H||L){var ze=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[D.cloneElement(S,St(St(St({},E.props),se),{},{activeIndex:ze})),null,null]}if(!Nn(Ae))return[Q].concat(gx(N.renderActivePoints({item:E,activePoint:Ae,basePoint:ee,childIndex:M,isRange:X})))}else{var oe,J=(oe=N.getItemByXY(N.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:Q},je=J.graphicalItem,ce=je.item,ye=ce===void 0?S:ce,me=je.childIndex,ge=St(St(St({},E.props),se),{},{activeIndex:me});return[D.cloneElement(ye,ge),null,null]}return X?[Q,null,null]:[Q,null]}),Mr(N,"renderCustomized",function(S,j,_){return D.cloneElement(S,St(St({key:"recharts-customized-".concat(_)},N.props),N.state))}),Mr(N,"renderMap",{CartesianGrid:{handler:pb,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:pb},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:pb},YAxis:{handler:pb},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:X1("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=Y7(N.triggeredAfterMouseMove,(b=y.throttleDelay)!==null&&b!==void 0?b:1e3/60),N.state={},N}return hge(v,m),cge(v,[{key:"componentDidMount",value:function(){var w,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,b=w.children,N=w.data,S=w.height,j=w.layout,_=vl(b,_u);if(_){var E=_.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,A=$3(this.state,N,E,I),C=this.state.tooltipTicks[E].coordinate,F=(this.state.offset.top+S)/2,M=j==="horizontal",B=M?{x:C,y:F}:{y:C,x:F},K=this.state.formattedGraphicalItems.find(function(Y){var q=Y.item;return q.type.name==="Scatter"});K&&(B=St(St({},B),K.props.points[E].tooltipPosition),A=K.props.points[E].tooltipPayload);var G={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:I,activePayload:A,activeCoordinate:B};this.setState(G),this.renderCursor(_),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var N,S;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){bk([vl(w.children,_u)],[vl(this.props.children,_u)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=vl(this.props.children,_u);if(w&&typeof w.props.shared=="boolean"){var b=w.props.shared?"axis":"item";return l.indexOf(b)>=0?b:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var b=this.container,N=b.getBoundingClientRect(),S=lse(N),j={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},_=N.width/b.offsetWidth||1,E=this.inRange(j.chartX,j.chartY,_);if(!E)return null;var I=this.state,A=I.xAxisMap,C=I.yAxisMap,F=this.getTooltipEventType(),M=IP(this.state,this.props.data,this.props.layout,E);if(F!=="axis"&&A&&C){var B=Af(A).scale,K=Af(C).scale,G=B&&B.invert?B.invert(j.chartX):null,Y=K&&K.invert?K.invert(j.chartY):null;return St(St({},j),{},{xValue:G,yValue:Y},M)}return M?St(St({},j),M):null}},{key:"inRange",value:function(w,b){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,j=w/N,_=b/N;if(S==="horizontal"||S==="vertical"){var E=this.state.offset,I=j>=E.left&&j<=E.left+E.width&&_>=E.top&&_<=E.top+E.height;return I?{x:j,y:_}:null}var A=this.state,C=A.angleAxisMap,F=A.radiusAxisMap;if(C&&F){var M=Af(C);return vO({x:j,y:_},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,b=this.getTooltipEventType(),N=vl(w,_u),S={};N&&b==="axis"&&(N.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=B2(this.props,this.handleOuterEvent);return St(St({},j),S)}},{key:"addListener",value:function(){Bj.on($j,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Bj.removeListener($j,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,b,N){for(var S=this.state.formattedGraphicalItems,j=0,_=S.length;j<_;j++){var E=S[j];if(E.item===w||E.props.key===w.key||b===_d(E.item.type)&&N===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,b=this.state.offset,N=b.left,S=b.top,j=b.height,_=b.width;return nt.createElement("defs",null,nt.createElement("clipPath",{id:w},nt.createElement("rect",{x:N,y:S,height:j,width:_})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(b,N){var S=TP(N,2),j=S[0],_=S[1];return St(St({},b),{},Mr({},j,_.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(b,N){var S=TP(N,2),j=S[0],_=S[1];return St(St({},b),{},Mr({},j,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[w])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(w){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[w])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(w){var b=this.state,N=b.formattedGraphicalItems,S=b.activeItem;if(N&&N.length)for(var j=0,_=N.length;j<_;j++){var E=N[j],I=E.props,A=E.item,C=A.type.defaultProps!==void 0?St(St({},A.type.defaultProps),A.props):A.props,F=_d(A.type);if(F==="Bar"){var M=(I.data||[]).find(function(Y){return Gfe(w,Y)});if(M)return{graphicalItem:E,payload:M}}else if(F==="RadialBar"){var B=(I.data||[]).find(function(Y){return vO(w,Y)});if(B)return{graphicalItem:E,payload:B}}else if(nN(E,S)||aN(E,S)||m1(E,S)){var K=Y0e({graphicalItem:E,activeTooltipItem:S,itemData:C.data}),G=C.activeIndex===void 0?K:C.activeIndex;return{graphicalItem:St(St({},E),{},{childIndex:G}),payload:m1(E,S)?C.data[K]:E.props.data[K]}}}return null}},{key:"render",value:function(){var w=this;if(!lE(this))return null;var b=this.props,N=b.children,S=b.className,j=b.width,_=b.height,E=b.style,I=b.compact,A=b.title,C=b.desc,F=OP(b,rge),M=vn(F,!1);if(I)return nt.createElement(hP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},nt.createElement(Nk,um({},M,{width:j,height:_,title:A,desc:C}),this.renderClipPath(),uE(N,this.renderMap)));if(this.props.accessibilityLayer){var B,K;M.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,M.role=(K=this.props.role)!==null&&K!==void 0?K:"application",M.onKeyDown=function(Y){w.accessibilityManager.keyboardEvent(Y)},M.onFocus=function(){w.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return nt.createElement(hP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},nt.createElement("div",um({className:Pn("recharts-wrapper",S),style:St({position:"relative",cursor:"default",width:j,height:_},E)},G,{ref:function(q){w.container=q}}),nt.createElement(Nk,um({},M,{width:j,height:_,title:A,desc:C,style:yge}),this.renderClipPath(),uE(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(D.Component);Mr(g,"displayName",r),Mr(g,"defaultProps",St({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Mr(g,"getDerivedStateFromProps",function(m,v){var y=m.dataKey,w=m.data,b=m.children,N=m.width,S=m.height,j=m.layout,_=m.stackOffset,E=m.margin,I=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var C=DP(m);return St(St(St({},C),{},{updateId:0},h(St(St({props:m},C),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:w,prevWidth:N,prevHeight:S,prevLayout:j,prevStackOffset:_,prevMargin:E,prevChildren:b})}if(y!==v.prevDataKey||w!==v.prevData||N!==v.prevWidth||S!==v.prevHeight||j!==v.prevLayout||_!==v.prevStackOffset||!ym(E,v.prevMargin)){var F=DP(m),M={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},B=St(St({},IP(v,w,j)),{},{updateId:v.updateId+1}),K=St(St(St({},F),M),B);return St(St(St({},K),h(St({props:m},K),v)),{},{prevDataKey:y,prevData:w,prevWidth:N,prevHeight:S,prevLayout:j,prevStackOffset:_,prevMargin:E,prevChildren:b})}if(!bk(b,v.prevChildren)){var G,Y,q,X,V=vl(b,ox),T=V&&(G=(Y=V.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&G!==void 0?G:I,R=V&&(q=(X=V.props)===null||X===void 0?void 0:X.endIndex)!==null&&q!==void 0?q:A,z=T!==I||R!==A,L=!Nn(w),H=L&&!z?v.updateId:v.updateId+1;return St(St({updateId:H},h(St(St({props:m},v),{},{updateId:H,dataStartIndex:T,dataEndIndex:R}),v)),{},{prevChildren:b,dataStartIndex:T,dataEndIndex:R})}return null}),Mr(g,"renderActiveDot",function(m,v,y){var w;return D.isValidElement(m)?w=D.cloneElement(m,v):sn(m)?w=m(v):w=nt.createElement(j6,v),nt.createElement(qa,{className:"recharts-active-dot",key:y},w)});var x=D.forwardRef(function(v,y){return nt.createElement(g,um({},v,{ref:y}))});return x.displayName=g.displayName,x},Tge=Ege({chartName:"AreaChart",GraphicalChild:w0,axisComponents:[{axisType:"xAxis",AxisComp:uN},{axisType:"yAxis",AxisComp:dN}],formatAxisMap:wpe});const Oge=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},ls=({src:e,alt:t,className:r,fallbackText:n,isAvatar:s})=>{const[i,o]=D.useState(!1),[l,c]=D.useState(!1),u=D.useMemo(()=>{const m=(n||t||"").trim();if(!m)return"?";if(s){const v=m.match(/[a-zA-Z0-9]/);return v?v[0].toUpperCase():"?"}else{const v=m.split(/\s+/).filter(y=>y.length>0);if(v.length===0)return"?";if(v.length===1){const y=v[0].match(/[a-zA-Z0-9]/);return y?y[0].toUpperCase():"?"}else{const y=v[0].match(/[a-zA-Z0-9]/),w=v[1].match(/[a-zA-Z0-9]/),b=y?y[0].toUpperCase():"",N=w?w[0].toUpperCase():"";return b&&N?`${b}${N}`:b||"?"}}},[n,t,s]),f=D.useMemo(()=>Oge(u),[u]),d=()=>r!=null&&r.includes("w-5")||r!=null&&r.includes("h-5")?"text-[10px]":r!=null&&r.includes("w-6")||r!=null&&r.includes("h-6")?"text-xs":r!=null&&r.includes("w-8")||r!=null&&r.includes("h-8")?"text-sm":r!=null&&r.includes("w-10")||r!=null&&r.includes("h-10")?"text-base":r!=null&&r.includes("w-12")||r!=null&&r.includes("h-12")||r!=null&&r.includes("w-14")||r!=null&&r.includes("h-14")?"text-lg":r!=null&&r.includes("w-16")||r!=null&&r.includes("h-16")?"text-xl":r!=null&&r.includes("w-20")||r!=null&&r.includes("h-20")?"text-2xl":r!=null&&r.includes("w-24")||r!=null&&r.includes("h-24")?"text-3xl":"text-base",h=s?"rounded-full":r!=null&&r.includes("rounded-3xl")?"rounded-3xl":r!=null&&r.includes("rounded-xl")?"rounded-xl":r!=null&&r.includes("rounded-lg")?"rounded-lg":r!=null&&r.includes("rounded-md")?"rounded-md":r!=null&&r.includes("rounded-sm")?"rounded-sm":"rounded-lg",g=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const x=`${g} ${h} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:x,children:a.jsx("span",{className:d(),children:u})})}if(!e||i){const x=`${g} ${h} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:x,children:a.jsx("span",{className:d(),children:u})})}return a.jsxs(a.Fragment,{children:[!l&&a.jsx("div",{className:`${g} ${h} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:a.jsx("span",{className:d(),children:u})}),a.jsx("img",{src:e,alt:t,className:`${g} ${h} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},FP=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},mb=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},MP=async(e,t={})=>{var o,l;await new Promise(c=>setTimeout(c,600));const r=t.body?JSON.parse(t.body):{},n=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${n} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const c=(o=r.email)==null?void 0:o.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),t2.some(f=>f.email.toLowerCase().trim()===c)?{success:!0,message:"Simulated OTP sent to "+c}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const c=(l=r.email)==null?void 0:l.toLowerCase().trim();return{success:!0,token:"v-token-123",user:t2.find(f=>f.email.toLowerCase()===c)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let c=FP("feedback",[]);if(n==="POST"){const u={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return c.unshift(u),mb("feedback",c),{success:!0,data:u,simulated:!0}}if(n==="PATCH"||n==="PUT"){const u=e.split("/").pop();return c=c.map(f=>f.id===u?{...f,...r,updatedAt:new Date().toISOString()}:f),mb("feedback",c),{success:!0,simulated:!0}}if(n==="DELETE"){const u=e.split("/").pop();return c=c.filter(f=>f.id!==u),mb("feedback",c),{success:!0,simulated:!0}}return{success:!0,data:c,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(n==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(n==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(c=>e.includes(c));if(i){let c=FP(i,[]);if(n==="POST"){const u={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return c.unshift(u),mb(i,c),{success:!0,data:u,simulated:!0}}if(n==="GET"&&e.split("/").length>2){const u=e.split("/").pop();return{success:!0,data:c.find(d=>d.id===u),simulated:!0}}return{success:!0,data:c,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&n==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return t2[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},dR=()=>"http://127.0.0.1:8050/api/v1/impactOS",I6=dR();typeof window<"u"&&console.log(`[API] Initializing with Base: ${I6}`);const lt=async(e,t={})=>{var o,l;const r=localStorage.getItem("auth_token"),n=e.startsWith("/")?e:`/${e}`,s=`${I6}${n}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};try{const c=await fetch(s,{...t,headers:i}),u=await c.json().catch(()=>({}));if(!c.ok){const d=["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(g=>n.includes(g));if(c.status===404&&d)return console.warn(`[SYSTEM] Live endpoint ${n} not found. Engaging Virtual Engine fallback.`),MP(n,t);let p=`Server Error ${c.status}`;try{u&&typeof u=="object"&&(p=u.message||((o=u.error)==null?void 0:o.message)||p)}catch{}const h=new Error(p);throw h.status=c.status,(l=u==null?void 0:u.error)!=null&&l.code&&typeof u.error.code=="string"&&(h.code=u.error.code),h}return u}catch(c){let u="Unknown error",f="Error",d,p;try{c&&typeof c=="object"?(u=c.message||String(c)||u,f=c.name||f,d=typeof c.status=="number"?c.status:void 0,p=typeof c.code=="string"?c.code:void 0):c&&(u=String(c))}catch{}const h=f==="TypeError"||u.includes("Failed to fetch"),g=d!==void 0&&d>=500,x=d!==void 0&&d>=400&&d<500;if(h||g&&!x)return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),MP(n,t);const m=new Error(u);throw d!==void 0&&(m.status=d),p&&(m.code=p),m}},RP=e=>lt("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),Pge=e=>lt("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),BP=()=>lt("/auth/me"),Ige=async()=>{try{await lt("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},su=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return lt(`/users${t}`)},Dge=e=>lt("/users",{method:"POST",body:JSON.stringify(e)}),Lge=(e,t)=>lt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Fge=e=>lt(`/users/${e}/dashboard-layout`),Mge=(e,t)=>lt(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),Rge=e=>lt(`/users/${e}`,{method:"DELETE"}),Bge=(e,t)=>lt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),iu=e=>lt(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),$ge=e=>lt("/companies",{method:"POST",body:JSON.stringify(e)}),fR=(e,t)=>lt(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),hR=e=>lt(`/companies/${e}`,{method:"DELETE"}),qh=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const n=r.toString();return lt(`/contacts${n?`?${n}`:""}`)},$P=e=>lt("/contacts",{method:"POST",body:JSON.stringify(e)}),pR=(e,t)=>lt(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),mR=e=>lt(`/contacts/${e}`,{method:"DELETE"}),hN=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return lt(`/deals${s?`?${s}`:""}`)},Uge=e=>lt("/deals",{method:"POST",body:JSON.stringify(e)}),xb=(e,t)=>lt(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),UP=e=>lt(`/deals/${e}`,{method:"DELETE"}),$x=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return lt(`/projects${s?`?${s}`:""}`)},zge=e=>lt(`/projects/${e}`),qge=e=>lt("/projects",{method:"POST",body:JSON.stringify(e)}),xR=(e,t)=>lt(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),gR=e=>lt(`/projects/${e}`,{method:"DELETE"}),pN=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return lt(`/tasks${s?`?${s}`:""}`)},Bw=()=>lt("/tasks/categories"),vR=e=>lt("/tasks",{method:"POST",body:JSON.stringify(e)}),$w=(e,t)=>lt(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),yR=e=>lt(`/tasks/${e}`,{method:"DELETE"}),Hge=e=>lt("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),bR=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return lt(`/invoices${s?`?${s}`:""}`)},Wge=e=>lt("/invoices",{method:"POST",body:JSON.stringify(e)}),gb=(e,t)=>lt(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),zP=e=>lt(`/invoices/${e}`,{method:"DELETE"}),Vge=(e,t)=>lt(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),qP=e=>lt(`/automations${e?`?userId=${e}`:""}`),Gge=e=>lt("/automations",{method:"POST",body:JSON.stringify(e)}),Kge=e=>lt(`/automations/${e}/toggle`,{method:"PATCH"}),Xge=e=>lt(`/automations/${e}`,{method:"DELETE"}),wR=(e,t)=>lt(`/notifications?userId=${e}&limitNum=${t}`),vx=e=>lt("/notifications",{method:"POST",body:JSON.stringify(e)}),NR=(e,t)=>lt(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),jR=e=>lt("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),Yge=e=>lt(`/users/${e}/notification-preferences`),Jge=(e,t)=>lt(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),Qge=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return lt(`/satisfaction/records${t}`)},Zge=e=>lt(`/satisfaction/records/${e}`),eve=e=>lt("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),U3=e=>lt(`/satisfaction/companies/${e}`),tve=e=>lt(`/satisfaction/surveys/${e}`),rve=e=>lt("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),nve=()=>lt("/satisfaction/templates/default"),ave=e=>lt("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),sve=(e,t)=>lt(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),ive=()=>lt("/satisfaction/stats"),ove=(e="default")=>lt(`/data-retention/policy?workspaceId=${e}`),lve=(e,t)=>lt("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),cve=(e="default")=>lt(`/data-retention/stats?workspaceId=${e}`),uve=(e="default",t=50)=>lt("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),dve=(e="default",t=50)=>lt("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),fve=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),lt(`/data-retention/export?${r.toString()}`)},HP=()=>lt("/pipelines"),WP=e=>lt("/pipelines",{method:"POST",body:JSON.stringify(e)}),vb=(e,t)=>lt(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),hve=()=>lt("/feedback"),kR=e=>lt("/feedback",{method:"POST",body:JSON.stringify(e)}),zj=(e,t)=>lt(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),VP=e=>lt(`/feedback/${e}`,{method:"DELETE"}),pve=e=>{const t=new URLSearchParams;e!=null&&e.companyId&&t.append("companyId",e.companyId),e!=null&&e.userId&&t.append("userId",e.userId);const r=t.toString();return lt(`/expenses${r?`?${r}`:""}`)},mve=e=>lt("/expenses",{method:"POST",body:JSON.stringify(e)}),xve=(e,t)=>lt(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),GP=e=>lt(`/expenses/${e}`,{method:"DELETE"}),SR=()=>lt("/expense-categories"),_R=e=>lt("/expense-categories",{method:"POST",body:JSON.stringify(e)}),gve=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString():"";return lt(`/budgets${t}`)},vve=e=>lt("/budgets",{method:"POST",body:JSON.stringify(e)}),yve=(e,t)=>lt(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),bve=e=>lt(`/budgets/${e}`,{method:"DELETE"}),wve=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString();return lt(`/budgets/tracking${t}`)},Nve=()=>lt("/budgets/departments"),AR=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n)).toString():"";return lt(`/contracts${t}`)},jve=e=>lt("/contracts",{method:"POST",body:JSON.stringify(e)}),kve=(e,t)=>lt(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Sve=e=>lt(`/contracts/${e}`,{method:"DELETE"}),_ve=(e,t)=>lt(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),Ave=()=>lt("/contracts/document-types"),Cve=e=>lt("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),KP=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return lt(`/contracts/google-drive/access-token${t}`)},Eve=e=>lt("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),Tve=e=>lt("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),Ove=(e,t)=>lt("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Pve=(e,t)=>lt("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Ive=()=>lt("/data-hygiene/duplicate-companies"),Dve=()=>lt("/data-hygiene/duplicate-contacts"),Lve=()=>lt("/data-hygiene/incomplete-records"),Fve=()=>lt("/data-hygiene/domain-mismatches"),D6=e=>lt(`/google-calendar/status?userId=${e}`),CR=e=>lt(`/google-calendar/auth-url?userId=${e}`),Mve=(e,t,r)=>lt(`/google-calendar/events?userId=${r}&startDate=${e}&endDate=${t}`),Rve=e=>lt("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),Bve=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),n!=null&&s.append("scopeDays",String(n)),lt(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},$ve=e=>lt(`/shared-inbox/accounts?userId=${e}`),Uve=(e,t)=>lt("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),zve=e=>lt(`/shared-inbox/filtered-accounts?userId=${e}`),qve=(e,t)=>lt("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),Hve=(e,t)=>lt(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),ER=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.cursor&&r.append("cursor",t.cursor),t.page!==void 0&&!t.cursor&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),lt(`/shared-inbox/emails?${r.toString()}`)):lt(`/shared-inbox/emails?${r.toString()}`)},Wve=(e,t)=>lt(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),Vve=(e,t)=>lt(`/shared-inbox/emails/${e}?userId=${t}`),XP=(e,t,r)=>lt(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),Gve=(e,t)=>lt(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),Kve=e=>lt("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),Xve=e=>lt(`/shared-inbox/notes/${e}`),Yve=(e,t)=>lt(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Jve=(e,t,r)=>lt("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),Qve=e=>lt("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),Zve=e=>lt(`/shared-inbox/templates?userId=${e}`),e1e=(e,t)=>lt(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),t1e=e=>lt("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),r1e=e=>lt("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),n1e=e=>lt("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),TR=e=>lt(`/shared-inbox/signatures?userId=${e}`),a1e=e=>lt("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),s1e=(e,t)=>lt(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),i1e=(e,t)=>lt(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),YP=(e,t)=>lt(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),JP=(e,t)=>lt(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),o1e=(e,t)=>lt(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),yb=(e,t)=>lt(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),QP=(e,t,r)=>{const n=dR(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${n}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},l1e=e=>lt("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),c1e=(e,t)=>lt(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),u1e=e=>lt("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),d1e=e=>lt(`/email-sync-filter?userId=${e}`),f1e=(e,t)=>lt("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),h1e=(e,t)=>lt(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),L6=(e,t)=>lt(`/shared-inbox/activity/${e}/${t}`),p1e=e=>lt("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),m1e=e=>lt("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),x1e=e=>lt("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),g1e=e=>lt("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),v1e=e=>lt("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),y1e=e=>lt(`/shared-inbox/suggested-links?emailId=${e}`),b1e=e=>lt("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),w1e=e=>lt(`/shared-inbox/related-tasks/${e}`),N1e=e=>lt(`/shared-inbox/related-projects/${e}`),j1e=e=>lt(`/shared-inbox/related-contracts/${e}`),k1e=e=>lt(`/shared-inbox/labels?userId=${e}`),S1e=e=>lt("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),_1e=(e,t)=>lt(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),A1e=(e,t)=>lt(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),C1e=e=>lt("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),ZP=e=>lt(`/shared-inbox/categorization-rules?userId=${e}`),E1e=(e,t=30)=>lt(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),T1e=e=>lt("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),O1e=(e,t)=>lt(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),P1e=e=>lt(`/shared-inbox/folder-mapping?userId=${e}`),I1e=e=>lt("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),z3=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),n&&s.append("endDate",n),lt(`/shared-inbox/calendar-events?${s.toString()}`)},D1e=e=>lt("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),L1e=(e,t,r,n)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:n});return lt(`/shared-inbox/calendar-availability?${s.toString()}`)},F1e=(e,t,r,n,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),n&&o.append("query",n),s&&o.append("pageToken",s),lt(`/shared-inbox/drive-files?${o.toString()}`)},e8=e=>lt("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),M1e=e=>lt("/events",{method:"POST",body:JSON.stringify(e)}),R1e=(e,t)=>lt(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),OR=e=>lt("/lead-sources?active=true"),B1e=async(e,t)=>{const r=localStorage.getItem("auth_token"),n=new FormData;n.append("file",e),n.append("userId",t);const s=await fetch(`${I6}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},$1e=e=>lt("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),U1e=e=>lt("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),z1e=e=>lt("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),q1e=({toast:e,onRemove:t})=>{D.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return a.jsx(tn,{className:"w-5 h-5 text-emerald-600"});case"error":return a.jsx(CF,{className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(Cn,{className:"w-5 h-5 text-amber-600"});case"info":return a.jsx(s0,{className:"w-5 h-5 text-blue-600"});default:return a.jsx(s0,{className:"w-5 h-5 text-blue-600"})}},n=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return a.jsxs("div",{className:`${n()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[a.jsx("div",{className:"shrink-0",children:r()}),a.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),a.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-4 h-4 text-slate-400"})})]})},H1e=({toasts:e,onRemove:t})=>a.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>a.jsx("div",{className:"pointer-events-auto",children:a.jsx(q1e,{toast:r,onRemove:t})},r.id))}),PR=D.createContext(void 0),Wn=()=>{const e=D.useContext(PR);if(!e)throw new Error("useToast must be used within ToastProvider");return e},W1e=({children:e})=>{const[t,r]=D.useState([]),n=D.useCallback(u=>{r(f=>f.filter(d=>d.id!==u))},[]),s=D.useCallback((u,f="info",d=3e3)=>{const h={id:Math.random().toString(36).substring(2,9),message:u,type:f,duration:d};r(g=>[...g,h])},[]),i=D.useCallback((u,f)=>{s(u,"success",f)},[s]),o=D.useCallback((u,f)=>{s(u,"error",f||5e3)},[s]),l=D.useCallback((u,f)=>{s(u,"warning",f)},[s]),c=D.useCallback((u,f)=>{s(u,"info",f)},[s]);return a.jsxs(PR.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,a.jsx(H1e,{toasts:t,onRemove:n})]})},yx=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],Es="USD",q3=e=>yx.find(t=>t.code===e),pd=e=>{var r;if(!e)return((r=yx.find(n=>n.code===Es))==null?void 0:r.symbol)||"$";const t=q3(e);return(t==null?void 0:t.symbol)||"$"},bd=(e,t)=>`${pd(t)}${e.toLocaleString()}`,t8=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"},{id:"nps-average",order:7,size:"medium"},{id:"nps-needing-attention",order:8,size:"medium"},{id:"nps-recent-feedback",order:9,size:"medium"},{id:"nps-awaiting-feedback",order:10,size:"medium"}],r8=({onNavigate:e})=>{var me;const{showError:t,showSuccess:r}=Wn(),[n,s]=D.useState(null),[i,o]=D.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=D.useState([]),[u,f]=D.useState([]),[d,p]=D.useState(!0),[h,g]=D.useState("1M"),[x,m]=D.useState([]),[v,y]=D.useState(!1),[w,b]=D.useState({}),[N,S]=D.useState({}),[j,_]=D.useState(Es),[E,I]=D.useState(!1),[A,C]=D.useState(t8),[F,M]=D.useState(null),[B,K]=D.useState(!1),[G,Y]=D.useState(!1),[q,X]=D.useState(null);D.useRef(0);const[V,T]=D.useState(null),[R,z]=D.useState(!1);D.useEffect(()=>{const ge=JSON.parse(localStorage.getItem("user_data")||"null");s(ge),ge!=null&&ge.id&&L(ge.id)},[]);const L=async ge=>{try{const Ce=await Fge(ge);if(Ce!=null&&Ce.data&&Array.isArray(Ce.data)){const Ue=Ce.data.flatMap(Oe=>Oe.id==="stats-grid"?[{id:"stat-pipeline",order:Oe.order,size:Oe.size||"medium"},{id:"stat-projects",order:Oe.order+.1,size:Oe.size||"medium"},{id:"stat-invoices",order:Oe.order+.2,size:Oe.size||"medium"},{id:"stat-tasks",order:Oe.order+.3,size:Oe.size||"medium"}]:Oe.order>0?[{...Oe,order:Oe.order+3,size:Oe.size||"medium"}]:[{...Oe,size:Oe.size||"medium"}]),Te=new Set,ue=Ue.filter(Oe=>Te.has(Oe.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${Oe.id}, removing duplicate`),!1):(Te.add(Oe.id),!0));C(ue)}}catch{console.log("[DASHBOARD] Using default layout")}},H=async()=>{if(n!=null&&n.id){Y(!0);try{await Mge(n.id,A),r("Dashboard layout saved"),K(!1)}catch{t("Failed to save layout")}finally{Y(!1)}}},ne=()=>{C(t8)},se=(ge,Ce)=>{C(Ue=>Ue.map(Te=>Te.id===ge?{...Te,size:Ce}:Te))},Q=(ge="medium",Ce)=>{if(Ce.startsWith("stat-"))return"";switch(ge){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},re=(ge,Ce)=>{B&&(M(Ce),ge.dataTransfer.effectAllowed="move",ge.dataTransfer.setData("text/html",Ce))},Ae=ge=>{!B||!F||(ge.preventDefault(),ge.dataTransfer.dropEffect="move")},ee=(ge,Ce)=>{if(!B||!F||F===Ce)return;ge.preventDefault();const Ue=[...A],Te=Ue.findIndex(Oe=>Oe.id===F),ue=Ue.findIndex(Oe=>Oe.id===Ce);if(Te!==-1&&ue!==-1){const Oe=Ue[Te];Ue.splice(Te,1),Ue.splice(ue,0,Oe),Ue.forEach((st,be)=>{st.order=be}),C(Ue)}M(null)},Me=()=>{M(null)};D.useEffect(()=>{(async()=>{p(!0);try{const Ce=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ce){p(!1);return}const[Ue,Te,ue,Oe,st,be]=await Promise.all([hN(Ce).catch(()=>({data:[]})),$x(Ce).catch(()=>({data:[]})),pN(Ce).catch(()=>({data:[]})),bR(Ce).catch(()=>({data:[]})),ER(Ce).catch(()=>({data:[]})),su().catch(()=>({data:[]}))]),De=(Ue==null?void 0:Ue.data)||Ue||[],We=(Te==null?void 0:Te.data)||Te||[],Xe=(ue==null?void 0:ue.data)||ue||[],Et=(Oe==null?void 0:Oe.data)||Oe||[],wt=(st==null?void 0:st.data)||st||[],Ve=(be==null?void 0:be.data)||be||[],xt=Array.isArray(De)?De.filter(jr=>jr.stage!=="Won"&&jr.stage!=="Lost"):[],Tt={},he={};xt.forEach(jr=>{const Dt=jr.currency||Es,Sr=jr.value||0;Tt[Dt]=(Tt[Dt]||0)+Sr,he[Dt]=(he[Dt]||0)+1});const Ge=Array.isArray(We)?We.filter(jr=>jr.status!=="Completed"&&jr.status!=="Cancelled").length:0,kt=Array.isArray(Et)?Et.filter(jr=>jr.status!=="Paid"):[],gt={};kt.forEach(jr=>{const Dt=jr.currency||Es,Sr=jr.amount||0;gt[Dt]=(gt[Dt]||0)+Sr,he[Dt]=(he[Dt]||0)+1});let Vt=0,_r=Es;Object.keys(he).forEach(jr=>{he[jr]>Vt&&(Vt=he[jr],_r=jr)}),b(Tt),S(gt),_(_r);const lr=Tt[_r]||0,Gt=gt[_r]||0,rr=0,ir=new Date;ir.setHours(0,0,0,0);const pr=Array.isArray(Xe)?Xe.filter(jr=>{if(!jr.dueDate)return!1;const Dt=new Date(jr.dueDate);return Dt.setHours(0,0,0,0),Dt.getTime()===ir.getTime()&&jr.status!=="Done"}):[],Nr=await Promise.all(pr.slice(0,2).map(async jr=>{var Dt;if(jr.projectId)try{const Sr=await zge(jr.projectId);return{...jr,projectTitle:((Dt=Sr==null?void 0:Sr.data)==null?void 0:Dt.title)||"Software"}}catch{return{...jr,projectTitle:"Software"}}return{...jr,projectTitle:"Software"}}));o({openPipeline:lr,activeProjects:Ge,unpaidInvoices:Gt,actionableMail:rr}),c(Nr),f(Ve.slice(0,3))}catch(Ce){console.error("[DASHBOARD] Failed to fetch data:",Ce),t("Failed to load dashboard data")}finally{p(!1)}})()},[t]),D.useEffect(()=>{(async()=>{y(!0);try{const Ce=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ce){y(!1);return}const Ue=await Vge(Ce,h),Te=(Ue==null?void 0:Ue.data)||Ue||[];m(Array.isArray(Te)?Te:[])}catch{m([])}finally{y(!1)}})()},[h]),D.useEffect(()=>{(async()=>{z(!0);try{const Ce=await ive(),Ue=Ce==null?void 0:Ce.data;Ue&&T({averageNps:Ue.averageNps??null,totalResponses:Ue.totalResponses??0,companiesNeedingAttention:Ue.companiesNeedingAttention??[],recentFeedback:Ue.recentFeedback??[],awaitingFeedback:Ue.awaitingFeedback??[]})}catch{T(null)}finally{z(!1)}})()},[]);const ze=(ge,Ce=j)=>{const Ue=pd(Ce);return ge>=1e3?`${Ue}${(ge/1e3).toFixed(1)}k`:`${Ue}${ge.toLocaleString()}`},oe=(ge,Ce)=>{const Ue=F===ge,Te=A.find(be=>be.id===ge),ue=Ce||(Te==null?void 0:Te.size)||"medium",Oe={draggable:B,onDragStart:be=>re(be,ge),onDragOver:Ae,onDrop:be=>ee(be,ge),onDragEnd:Me,className:`transition-all ${Ue?"opacity-50 scale-95":""} ${B?"cursor-move":""}`},st=()=>{if(!B)return null;const be=[{value:"small",icon:a.jsx(EH,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:a.jsx(MH,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:a.jsx(_H,{className:"w-3 h-3"}),label:"Large"}];return a.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:be.map(({value:De,icon:We,label:Xe})=>a.jsx("button",{onClick:Et=>{Et.stopPropagation(),se(ge,De)},onMouseEnter:()=>X(ge),onMouseLeave:()=>X(null),className:`p-1.5 rounded transition-all ${ue===De?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:Xe,children:We},De))})};switch(ge){case"stat-pipeline":return a.jsxs("div",{...Oe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),a.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:a.jsx(Jc,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:ze(i.openPipeline,j)})]}),a.jsx("button",{onClick:be=>{be.stopPropagation(),I(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(jh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},ge);case"stat-projects":return a.jsxs("div",{...Oe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),a.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:a.jsx(oc,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},ge);case"stat-invoices":return a.jsxs("div",{...Oe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),a.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:a.jsx(Md,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:ze(i.unpaidInvoices,j)})]}),a.jsx("button",{onClick:be=>{be.stopPropagation(),I(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(jh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},ge);case"stat-tasks":return a.jsxs("div",{...Oe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),a.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:a.jsx(wo,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},ge);case"revenue-chart":return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),st()]}),a.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),a.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),a.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(be=>a.jsx("button",{onClick:()=>g(be),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${be===h?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:be},be))})]}),a.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:v?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx(zC,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):x.length===0?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Jc,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):a.jsx(tse,{width:"100%",height:"100%",children:a.jsxs(Tge,{data:x,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),a.jsx(V9,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),a.jsx(uN,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),a.jsx(dN,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:be=>`$${be}`}),a.jsx(_u,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),a.jsx(w0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},ge);case"inbox-card":return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),st()]}),a.jsxs("div",{onClick:()=>!B&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${B?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[a.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:a.jsx(Sd,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!B&&a.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:a.jsx(wi,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),a.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),a.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),a.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:a.jsxs("div",{className:"flex -space-x-2",children:[u.map((be,De)=>a.jsx(ls,{src:be.avatar,isAvatar:!0,fallbackText:be.name||be.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},be.id||De)),a.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),a.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:a.jsx(Zf,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},ge);case"tasks-card":return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),st()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),a.jsx(wo,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-4 lg:space-y-6",children:d?a.jsx("div",{className:"space-y-3",children:[1,2].map(be=>a.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},be))}):l.length>0?l.slice(0,2).map(be=>a.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[a.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:be.title}),a.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:be.projectTitle||"Software"})]})]},be.id)):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),a.jsx("button",{onClick:()=>!B&&e("tasks"),disabled:B,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},ge);case"nps-average":{const be=(V==null?void 0:V.averageNps)??null,De=be===null?"text-slate-400":be>=9?"text-green-600":be>=7?"text-amber-600":"text-red-600",We=be===null?"bg-slate-50":be>=9?"bg-green-50":be>=7?"bg-amber-50":"bg-red-50";return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Average NPS Score"})]}),st()]}),a.jsxs("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full disabled:opacity-50",children:[a.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:a.jsx("div",{className:`p-2 rounded-lg lg:p-2.5 lg:rounded-xl ${We} ${De}`,children:a.jsx(Sd,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em]",children:"Average NPS Score"}),R?a.jsx("div",{className:"h-8 w-16 bg-slate-100 rounded mt-1 animate-pulse"}):a.jsx("h3",{className:`text-2xl lg:text-3xl font-black mt-0.5 lg:mt-1 ${De}`,children:be!==null?be.toFixed(1):""})]})]})]},ge)}case"nps-needing-attention":{const be=(V==null?void 0:V.companiesNeedingAttention)??[];return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Companies Needing Attention"})]}),st()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Detractors (06)"}),a.jsx(Sd,{className:"w-4 h-4 text-red-400"})]}),a.jsx("div",{className:"space-y-3",children:R?[1,2,3].map(De=>a.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},De)):be.length===0?a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No detractors"}):be.map(De=>{var Xe;const We=De.accountManagerId&&(u!=null&&u.length)?(Xe=u.find(Et=>Et.id===De.accountManagerId))==null?void 0:Xe.name:null;return a.jsxs("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full flex flex-col gap-0.5 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:De.companyName}),a.jsx("span",{className:"text-xs font-bold text-red-600 shrink-0",children:De.npsScore})]}),We?a.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["AM: ",We]}):null]},De.companyId)})}),a.jsx("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},ge)}case"nps-recent-feedback":{const be=(V==null?void 0:V.recentFeedback)??[];return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Recent Feedback"})]}),st()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Latest 5 responses"}),a.jsx(ui,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-4",children:R?[1,2,3].map(De=>a.jsx("div",{className:"h-14 bg-slate-50 rounded animate-pulse"},De)):be.length===0?a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No feedback yet"}):be.map((De,We)=>a.jsxs("div",{className:"border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-900",children:De.companyName}),a.jsx("span",{className:`text-xs font-bold shrink-0 ${De.npsScore>=9?"text-green-600":De.npsScore>=7?"text-amber-600":"text-red-600"}`,children:De.npsScore})]}),De.feedback?a.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2",children:De.feedback}):null,a.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:De.date?new Date(De.date).toLocaleDateString():""})]},We))}),a.jsx("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},ge)}case"nps-awaiting-feedback":{const be=(V==null?void 0:V.awaitingFeedback)??[];return a.jsxs("div",{...Oe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(ml,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Awaiting Feedback"})]}),st()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Survey sent, no response yet"}),a.jsx(xa,{className:"w-4 h-4 text-amber-400"})]}),a.jsx("div",{className:"space-y-3",children:R?[1,2,3].map(De=>a.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},De)):be.length===0?a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"None"}):be.map(De=>a.jsxs("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[a.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:De.companyName}),a.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[De.daysElapsed,"d ago"]})]},De.companyId))}),a.jsx("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},ge)}default:return null}},J=((me=n==null?void 0:n.name)==null?void 0:me.split(" ")[0])||"Alex",je=(n==null?void 0:n.avatar)||(n==null?void 0:n.photoURL)||"",ce=(n==null?void 0:n.name)||(n==null?void 0:n.email)||"Impact Member",ye=[...A].sort((ge,Ce)=>ge.order-Ce.order);return a.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ls,{src:je,alt:ce,fallbackText:ce,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",J]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:B?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:ne,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),a.jsx("button",{onClick:H,disabled:G,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:G?a.jsxs(a.Fragment,{children:[a.jsx(zC,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Layout"]})}),a.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):a.jsxs("button",{onClick:()=>K(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[a.jsx(ml,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),B&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:a.jsx(ml,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),a.jsx("div",{className:"space-y-6 lg:space-y-8",children:ye.map((ge,Ce)=>{const Ue=oe(ge.id,ge.size);if(ge.id.startsWith("stat-")){const be=ye[Ce-1];if(be&&be.id.startsWith("stat-"))return null;{const We=[];for(let Xe=Ce;Xe<ye.length&&ye[Xe].id.startsWith("stat-");Xe++)We.push(ye[Xe]);return a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:We.map(Xe=>oe(Xe.id,Xe.size))},`stat-cards-group-${Ce}`)}}if(ge.id==="revenue-chart"){const be=ye[Ce+1],De=ye[Ce+2],We=ge.size||"large";if(be&&De&&(be.id==="inbox-card"&&De.id==="tasks-card"||be.id==="tasks-card"&&De.id==="inbox-card")&&We==="large")return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:Ue}),a.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[oe(be.id,be.size),oe(De.id,De.size)]})]},"revenue-with-sidebar")}const ue=ye[Ce-1],Oe=ye[Ce-2];if((ue==null?void 0:ue.id)==="revenue-chart"&&(ge.id==="inbox-card"||ge.id==="tasks-card")){const be=ue.size||"large",De=ye[Ce+1];if(be==="large"&&De&&(ge.id==="inbox-card"&&De.id==="tasks-card"||ge.id==="tasks-card"&&De.id==="inbox-card"))return null}if((Oe==null?void 0:Oe.id)==="revenue-chart"&&(ge.id==="inbox-card"||ge.id==="tasks-card")&&(Oe.size||"large")==="large")return null;const st=Q(ge.size||"medium",ge.id);return st?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:a.jsx("div",{className:st,children:Ue})},ge.id):a.jsx("div",{children:Ue},ge.id)})}),E&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>I(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(jh,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),a.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(Jc,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(w).length>0?Object.entries(w).sort((ge,Ce)=>Ce[1]-ge[1]).map(([ge,Ce])=>{const Ue=q3(ge),Te=ge===j;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Te?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:(Ue==null?void 0:Ue.symbol)||ge}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:ge}),Te&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:bd(Ce,ge)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:(Ue==null?void 0:Ue.name)||ge})]},ge)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(Md,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(N).length>0?Object.entries(N).sort((ge,Ce)=>Ce[1]-ge[1]).map(([ge,Ce])=>{const Ue=q3(ge),Te=ge===j;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Te?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:(Ue==null?void 0:Ue.symbol)||ge}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:ge}),Te&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:bd(Ce,ge)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:(Ue==null?void 0:Ue.name)||ge})]},ge)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),a.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:a.jsxs("button",{onClick:()=>I(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(wo,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},IR=({extractedData:e,suggestions:t,source:r,onConfirm:n,onCancel:s,isProcessing:i=!1,companies:o})=>{var F,M,B,K;const[l,c]=D.useState(""),[u,f]=D.useState(""),[d,p]=D.useState(""),[h,g]=D.useState(""),[x,m]=D.useState(""),[v,y]=D.useState(""),[w,b]=D.useState(""),[N,S]=D.useState(null),[j,_]=D.useState({});D.useEffect(()=>{var G,Y,q,X,V,T,R;r==="business_card"?(c(((G=e==null?void 0:e.name)==null?void 0:G.value)||""),f(((Y=e==null?void 0:e.email)==null?void 0:Y.value)||""),p(((q=e==null?void 0:e.phone)==null?void 0:q.value)||""),g(((X=e==null?void 0:e.title)==null?void 0:X.value)||""),m(((V=e==null?void 0:e.linkedin)==null?void 0:V.value)||""),y(((T=e==null?void 0:e.company)==null?void 0:T.value)||""),b(((R=e==null?void 0:e.website)==null?void 0:R.value)||"")):r==="linkedin"&&(c((e==null?void 0:e.name)||""),f((e==null?void 0:e.email)||""),p((e==null?void 0:e.phone)||""),g((e==null?void 0:e.currentRole)||(e==null?void 0:e.headline)||""),m((e==null?void 0:e.profileImageUrl)||""),y((e==null?void 0:e.currentCompany)||""),b((e==null?void 0:e.companyWebsite)||"")),t!=null&&t.existingCompany&&S(t.existingCompany.id)},[e,t,r]);const E=G=>G>=95?"text-green-600 bg-green-50":G>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",I=G=>G>=95?"High Confidence":G>=75?"Medium - Verify":"Low - Review",A=()=>{const G={};return l.trim()||(G.name="Name is required"),u&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)&&(G.email="Invalid email format"),!N&&!v.trim()&&(G.company="Company is required"),_(G),Object.keys(G).length===0},C=()=>{if(!A())return;const G={name:l,email:u.toLowerCase(),phone:d,role:h,linkedin:x};n(G,{name:v,website:w},N)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Yt,{className:"w-6 h-6"})})]}),(t==null?void 0:t.existingContact)&&a.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[a.jsx(i0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),a.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),a.jsx("div",{className:"mt-2 flex gap-2",children:a.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(vo,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:l,onChange:G=>c(G.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&((F=e==null?void 0:e.name)==null?void 0:F.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${E(e.name.confidence)}`,children:I(e.name.confidence)})]}),j.name&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.name})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(xa,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:u,onChange:G=>f(G.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&((M=e==null?void 0:e.email)==null?void 0:M.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${E(e.email.confidence)}`,children:I(e.email.confidence)})]}),j.email&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.email})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsxs("div",{className:"relative",children:[a.jsx(xk,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"tel",value:d,onChange:G=>p(G.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&((B=e==null?void 0:e.phone)==null?void 0:B.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${E(e.phone.confidence)}`,children:I(e.phone.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(oc,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:h,onChange:G=>g(G.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&((K=e==null?void 0:e.title)==null?void 0:K.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${E(e.title.confidence)}`,children:I(e.title.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),a.jsxs("div",{className:"relative",children:[a.jsx(kh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:x,onChange:G=>m(G.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),a.jsxs("select",{value:N||"new",onChange:G=>{const Y=G.target.value;if(Y==="new")S(null);else{S(Y);const q=o.find(X=>X.id===Y);q&&(y(q.name),b(q.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.company?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))]}),j.company&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.company})]}),!N&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ru,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:v,onChange:G=>y(G.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),a.jsxs("div",{className:"relative",children:[a.jsx(jh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:w,onChange:G=>b(G.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:C,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(tn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},V1e=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=Wn(),[i,o]=D.useState("select"),[l,c]=D.useState(null),[u,f]=D.useState(null),[d,p]=D.useState(null),[h,g]=D.useState(null),[x,m]=D.useState(null),[v,y]=D.useState(!1),[w,b]=D.useState([]),[N,S]=D.useState([]),j=D.useRef(null),_=D.useRef(null),E=D.useRef(null),I=D.useRef(null);nt.useEffect(()=>{(async()=>{try{const[q,X]=await Promise.all([iu(),OR(!0)]);b(q.data||[]),S(X.data||[])}catch(q){console.error("Failed to load data:",q)}})()},[]);const A=async()=>{console.log("Camera button clicked - starting camera..."),m(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let Y;try{console.log("Requesting rear camera..."),Y=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),Y=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",Y),I.current=Y,o("camera"),await new Promise(q=>setTimeout(q,100)),j.current){j.current.srcObject=Y,console.log("Stream set to video element");try{await j.current.play(),console.log(" Camera started successfully")}catch(q){console.error("Video play error:",q)}}}catch(Y){console.error(" Camera error:",Y);let q="Camera access denied. Please grant camera permission or use file upload.";Y.name==="NotAllowedError"?q="Camera permission denied. Please allow camera access in your browser settings.":Y.name==="NotFoundError"?q="No camera found on this device. Please use file upload instead.":Y.name==="NotReadableError"?q="Camera is already in use by another application.":Y.name==="NotSupportedError"&&(q="Camera not supported on this browser. Please use file upload."),m(q),o("select"),C()}},C=()=>{I.current&&(I.current.getTracks().forEach(Y=>Y.stop()),I.current=null),j.current&&(j.current.srcObject=null)},F=()=>{if(!j.current||!_.current)return;const Y=j.current,q=_.current,X=q.getContext("2d");X&&(q.width=Y.videoWidth,q.height=Y.videoHeight,X.drawImage(Y,0,0),q.toBlob(V=>{if(V){const T=new File([V],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(T),f(q.toDataURL("image/jpeg")),C(),B(T)}},"image/jpeg",.95))},M=Y=>{const q=Y.target.files;if(!q||q.length===0)return;const X=q[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(X.type)){m("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(X.size>10*1024*1024){m("File too large. Maximum size is 10MB.");return}if(c(X),X.type.startsWith("image/")){const V=new FileReader;V.onload=T=>{var R;f((R=T.target)==null?void 0:R.result)},V.readAsDataURL(X)}B(X)},B=async Y=>{o("processing"),m(null),y(!0);try{const q=await B1e(Y,r);if(q.success)p(q.data.extractedData),g(q.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(q){console.error("Processing error:",q),m(q.message||"Failed to process business card. Please try again."),o("select")}finally{y(!1)}},K=async(Y,q,X)=>{y(!0),m(null);try{const V=N.find(R=>R.name==="Business Card Scanner");if((await $1e({contactData:Y,companyData:q,linkToExistingCompany:X,leadSourceId:(V==null?void 0:V.id)||"",scanConfidenceScore:G(d),originalScanData:d,userId:r})).success)o("success"),n("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(V){console.error("Confirm error:",V),m(V.message||"Failed to create contact. Please try again."),s(V.message||"Failed to create contact")}finally{y(!1)}},G=Y=>{var X,V,T,R,z;if(!Y)return 0;const q=[((X=Y.name)==null?void 0:X.confidence)||0,((V=Y.email)==null?void 0:V.confidence)||0,((T=Y.phone)==null?void 0:T.confidence)||0,((R=Y.title)==null?void 0:R.confidence)||0,((z=Y.company)==null?void 0:z.confidence)||0].filter(L=>L>0);return q.length===0?0:Math.round(q.reduce((L,H)=>L+H,0)/q.length)};return nt.useEffect(()=>()=>{C()},[]),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Yt,{className:"w-6 h-6"})})]}),x&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:x}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:Y=>{Y.preventDefault(),console.log("Camera button clicked"),A()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[a.jsx(HC,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),a.jsxs("button",{onClick:()=>{var Y;return(Y=E.current)==null?void 0:Y.click()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[a.jsx(nu,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),a.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),a.jsx("input",{ref:E,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:M,className:"hidden"})]}),i==="camera-loading"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(pt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),a.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&a.jsxs("div",{className:"relative bg-black",children:[a.jsx("video",{ref:j,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),a.jsx("canvas",{ref:_,className:"hidden"}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:a.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),a.jsx("div",{className:"absolute top-4 left-4",children:a.jsx("button",{onClick:()=>{C(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:a.jsx(S_,{className:"w-6 h-6 text-gray-700"})})}),a.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:a.jsx("button",{onClick:F,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:a.jsx(HC,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(pt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),u&&a.jsx("div",{className:"mt-6",children:a.jsx("img",{src:u,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&d&&a.jsx(IR,{extractedData:d,suggestions:h||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:K,onCancel:e,isProcessing:v,companies:w}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(tn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},G1e=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=Wn(),[i,o]=D.useState("input"),[l,c]=D.useState(""),[u,f]=D.useState(null),[d,p]=D.useState(null),[h,g]=D.useState(null),[x,m]=D.useState(!1),[v,y]=D.useState([]),[w,b]=D.useState([]);nt.useEffect(()=>{(async()=>{try{const[A,C]=await Promise.all([iu(),OR(!0)]);y(A.data||[]),b(C.data||[])}catch(A){console.error("Failed to load data:",A)}})()},[]);const N=I=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(I),S=I=>{let A=I.trim();return!A.startsWith("http://")&&!A.startsWith("https://")&&(A=`https://${A}`),A.includes("www.")||(A=A.replace("linkedin.com","www.linkedin.com")),A.replace(/\/$/,"")},j=I=>{c(I),g(null)},_=async()=>{var A,C,F;if(!l.trim()){g("Please enter a LinkedIn URL");return}const I=S(l);if(!N(I)){g("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),g(null),m(!0);try{const M=await U1e({linkedinUrl:I,userId:r});if(M.success)f(M.data.profile),p(M.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(M){console.error("Fetch error:",M);let B="Failed to fetch LinkedIn profile";(A=M.message)!=null&&A.includes("Invalid LinkedIn URL")?B="Invalid LinkedIn URL format":(C=M.message)!=null&&C.includes("private")?B="This LinkedIn profile is private and cannot be accessed":(F=M.message)!=null&&F.includes("rate limit")&&(B="Rate limit exceeded. Please try again later"),g(B),o("input")}finally{m(!1)}},E=async(I,A,C)=>{m(!0),g(null);try{const F=w.find(B=>B.name==="LinkedIn Scanner");if((await z1e({contactData:I,linkedinData:u?{headline:u.headline,currentRole:u.currentRole,profileImageUrl:u.profileImageUrl}:void 0,companyData:A,linkToExistingCompany:C,leadSourceId:(F==null?void 0:F.id)||"",userId:r})).success)o("success"),n("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(F){console.error("Confirm error:",F),g(F.message||"Failed to create contact. Please try again."),s(F.message||"Failed to create contact")}finally{m(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Yt,{className:"w-6 h-6"})})]}),h&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[a.jsx(Cn,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-red-800",children:h})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),a.jsxs("div",{className:"relative",children:[a.jsx(kh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:l,onChange:I=>j(I.target.value),onKeyPress:I=>I.key==="Enter"&&_(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Paste any public LinkedIn profile URL"}),a.jsx("li",{children:"We'll extract available contact and company information"}),a.jsx("li",{children:"Review and edit before saving to your CRM"}),a.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:_,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(kh,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(pt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&u&&a.jsx(IR,{extractedData:u,suggestions:d||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:E,onCancel:e,isProcessing:x,companies:v}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(tn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var Ux=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},K1e={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Cf,TS,rD,X1e=(rD=class{constructor(){Er(this,Cf,K1e);Er(this,TS,!1)}setTimeoutProvider(e){fr(this,Cf,e)}setTimeout(e,t){return Ke(this,Cf).setTimeout(e,t)}clearTimeout(e){Ke(this,Cf).clearTimeout(e)}setInterval(e,t){return Ke(this,Cf).setInterval(e,t)}clearInterval(e){Ke(this,Cf).clearInterval(e)}},Cf=new WeakMap,TS=new WeakMap,rD),ch=new X1e;function Y1e(e){setTimeout(e,0)}var Hh=typeof window>"u"||"Deno"in globalThis;function po(){}function J1e(e,t){return typeof e=="function"?e(t):e}function H3(e){return typeof e=="number"&&e>=0&&e!==1/0}function DR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function r0(e,t){return typeof e=="function"?e(t):e}function ec(e,t){return typeof e=="function"?e(t):e}function n8(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==F6(o,t.options))return!1}else if(!N1(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function a8(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Wh(t.options.mutationKey)!==Wh(i))return!1}else if(!N1(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function F6(e,t){return((t==null?void 0:t.queryKeyHashFn)||Wh)(e)}function Wh(e){return JSON.stringify(e,(t,r)=>W3(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function N1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>N1(e[r],t[r])):!1}var Q1e=Object.prototype.hasOwnProperty;function LR(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=s8(e)&&s8(t);if(!n&&!(W3(e)&&W3(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,c=n?new Array(l):{};let u=0;for(let f=0;f<l;f++){const d=n?f:o[f],p=e[d],h=t[d];if(p===h){c[d]=p,(n?f<i:Q1e.call(e,d))&&u++;continue}if(p===null||h===null||typeof p!="object"||typeof h!="object"){c[d]=h;continue}const g=LR(p,h,r+1);c[d]=g,g===p&&u++}return i===l&&u===i?e:c}function Uw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function s8(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function W3(e){if(!i8(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!i8(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function i8(e){return Object.prototype.toString.call(e)==="[object Object]"}function Z1e(e){return new Promise(t=>{ch.setTimeout(t,e)})}function V3(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?LR(e,t):t}function eye(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function tye(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var M6=Symbol();function FR(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===M6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function R6(e,t){return typeof e=="function"?e(...t):!!e}function rye(e,t,r){let n=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var dh,Ef,Om,nD,nye=(nD=class extends Ux{constructor(){super();Er(this,dh);Er(this,Ef);Er(this,Om);fr(this,Om,t=>{if(!Hh&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ke(this,Ef)||this.setEventListener(Ke(this,Om))}onUnsubscribe(){var t;this.hasListeners()||((t=Ke(this,Ef))==null||t.call(this),fr(this,Ef,void 0))}setEventListener(t){var r;fr(this,Om,t),(r=Ke(this,Ef))==null||r.call(this),fr(this,Ef,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ke(this,dh)!==t&&(fr(this,dh,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ke(this,dh)=="boolean"?Ke(this,dh):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dh=new WeakMap,Ef=new WeakMap,Om=new WeakMap,nD),B6=new nye;function G3(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var aye=Y1e;function sye(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=aye;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Us=sye(),Pm,Tf,Im,aD,iye=(aD=class extends Ux{constructor(){super();Er(this,Pm,!0);Er(this,Tf);Er(this,Im);fr(this,Im,t=>{if(!Hh&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ke(this,Tf)||this.setEventListener(Ke(this,Im))}onUnsubscribe(){var t;this.hasListeners()||((t=Ke(this,Tf))==null||t.call(this),fr(this,Tf,void 0))}setEventListener(t){var r;fr(this,Im,t),(r=Ke(this,Tf))==null||r.call(this),fr(this,Tf,t(this.setOnline.bind(this)))}setOnline(t){Ke(this,Pm)!==t&&(fr(this,Pm,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ke(this,Pm)}},Pm=new WeakMap,Tf=new WeakMap,Im=new WeakMap,aD),zw=new iye;function oye(e){return Math.min(1e3*2**e,3e4)}function MR(e){return(e??"online")==="online"?zw.isOnline():!0}var K3=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function RR(e){let t=!1,r=0,n;const s=G3(),i=()=>s.status!=="pending",o=x=>{var m;if(!i()){const v=new K3(x);p(v),(m=e.onCancel)==null||m.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>B6.isFocused()&&(e.networkMode==="always"||zw.isOnline())&&e.canRun(),f=()=>MR(e.networkMode)&&e.canRun(),d=x=>{i()||(n==null||n(),s.resolve(x))},p=x=>{i()||(n==null||n(),s.reject(x))},h=()=>new Promise(x=>{var m;n=v=>{(i()||u())&&x(v)},(m=e.onPause)==null||m.call(e)}).then(()=>{var x;n=void 0,i()||(x=e.onContinue)==null||x.call(e)}),g=()=>{if(i())return;let x;const m=r===0?e.initialPromise:void 0;try{x=m??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(d).catch(v=>{var S;if(i())return;const y=e.retry??(Hh?0:3),w=e.retryDelay??oye,b=typeof w=="function"?w(r,v):w,N=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!N){p(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),Z1e(b).then(()=>u()?void 0:h()).then(()=>{t?p(v):g()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():h().then(g),s)}}var fh,sD,BR=(sD=class{constructor(){Er(this,fh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),H3(this.gcTime)&&fr(this,fh,ch.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Hh?1/0:5*60*1e3))}clearGcTimeout(){Ke(this,fh)&&(ch.clearTimeout(Ke(this,fh)),fr(this,fh,void 0))}},fh=new WeakMap,sD),hh,Dm,Ql,ph,ni,R1,mh,$c,od,iD,lye=(iD=class extends BR{constructor(t){super();Er(this,$c);Er(this,hh);Er(this,Dm);Er(this,Ql);Er(this,ph);Er(this,ni);Er(this,R1);Er(this,mh);fr(this,mh,!1),fr(this,R1,t.defaultOptions),this.setOptions(t.options),this.observers=[],fr(this,ph,t.client),fr(this,Ql,Ke(this,ph).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,fr(this,hh,l8(this.options)),this.state=t.state??Ke(this,hh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ke(this,ni))==null?void 0:t.promise}setOptions(t){if(this.options={...Ke(this,R1),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=l8(this.options);r.data!==void 0&&(this.setState(o8(r.data,r.dataUpdatedAt)),fr(this,hh,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ke(this,Ql).remove(this)}setData(t,r){const n=V3(this.state.data,t,this.options);return on(this,$c,od).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){on(this,$c,od).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=Ke(this,ni))==null?void 0:n.promise;return(s=Ke(this,ni))==null||s.cancel(t),r?r.then(po).catch(po):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ke(this,hh))}isActive(){return this.observers.some(t=>ec(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===M6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>r0(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!DR(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ke(this,ni))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ke(this,ni))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ke(this,Ql).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ke(this,ni)&&(Ke(this,mh)?Ke(this,ni).cancel({revert:!0}):Ke(this,ni).cancelRetry()),this.scheduleGc()),Ke(this,Ql).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||on(this,$c,od).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,f,d,p,h,g,x,m,v,y,w;if(this.state.fetchStatus!=="idle"&&((c=Ke(this,ni))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ke(this,ni))return Ke(this,ni).continueRetry(),Ke(this,ni).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(N=>N.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(fr(this,mh,!0),n.signal)})},i=()=>{const b=FR(this.options,r),S=(()=>{const j={client:Ke(this,ph),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return fr(this,mh,!1),this.options.persister?this.options.persister(b,S,this):b(S)},l=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ke(this,ph),state:this.state,fetchFn:i};return s(b),b})();(u=this.options.behavior)==null||u.onFetch(l,this),fr(this,Dm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&on(this,$c,od).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta}),fr(this,ni,RR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:b=>{b instanceof K3&&b.revert&&this.setState({...Ke(this,Dm),fetchStatus:"idle"}),n.abort()},onFail:(b,N)=>{on(this,$c,od).call(this,{type:"failed",failureCount:b,error:N})},onPause:()=>{on(this,$c,od).call(this,{type:"pause"})},onContinue:()=>{on(this,$c,od).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const b=await Ke(this,ni).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(h=(p=Ke(this,Ql).config).onSuccess)==null||h.call(p,b,this),(x=(g=Ke(this,Ql).config).onSettled)==null||x.call(g,b,this.state.error,this),b}catch(b){if(b instanceof K3){if(b.silent)return Ke(this,ni).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw on(this,$c,od).call(this,{type:"error",error:b}),(v=(m=Ke(this,Ql).config).onError)==null||v.call(m,b,this),(w=(y=Ke(this,Ql).config).onSettled)==null||w.call(y,this.state.data,b,this),b}finally{this.scheduleGc()}}},hh=new WeakMap,Dm=new WeakMap,Ql=new WeakMap,ph=new WeakMap,ni=new WeakMap,R1=new WeakMap,mh=new WeakMap,$c=new WeakSet,od=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...$R(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...o8(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fr(this,Dm,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Us.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ke(this,Ql).notify({query:this,type:"updated",action:t})})},iD);function $R(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:MR(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function o8(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function l8(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qo,Sn,B1,uo,xh,Lm,ud,Of,$1,Fm,Mm,gh,vh,Pf,Rm,Hn,Hg,X3,Y3,J3,Q3,Z3,eS,tS,zR,oD,UR=(oD=class extends Ux{constructor(t,r){super();Er(this,Hn);Er(this,qo);Er(this,Sn);Er(this,B1);Er(this,uo);Er(this,xh);Er(this,Lm);Er(this,ud);Er(this,Of);Er(this,$1);Er(this,Fm);Er(this,Mm);Er(this,gh);Er(this,vh);Er(this,Pf);Er(this,Rm,new Set);this.options=r,fr(this,qo,t),fr(this,Of,null),fr(this,ud,G3()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ke(this,Sn).addObserver(this),c8(Ke(this,Sn),this.options)?on(this,Hn,Hg).call(this):this.updateResult(),on(this,Hn,Q3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rS(Ke(this,Sn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rS(Ke(this,Sn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,on(this,Hn,Z3).call(this),on(this,Hn,eS).call(this),Ke(this,Sn).removeObserver(this)}setOptions(t){const r=this.options,n=Ke(this,Sn);if(this.options=Ke(this,qo).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ec(this.options.enabled,Ke(this,Sn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");on(this,Hn,tS).call(this),Ke(this,Sn).setOptions(this.options),r._defaulted&&!Uw(this.options,r)&&Ke(this,qo).getQueryCache().notify({type:"observerOptionsUpdated",query:Ke(this,Sn),observer:this});const s=this.hasListeners();s&&u8(Ke(this,Sn),n,this.options,r)&&on(this,Hn,Hg).call(this),this.updateResult(),s&&(Ke(this,Sn)!==n||ec(this.options.enabled,Ke(this,Sn))!==ec(r.enabled,Ke(this,Sn))||r0(this.options.staleTime,Ke(this,Sn))!==r0(r.staleTime,Ke(this,Sn)))&&on(this,Hn,X3).call(this);const i=on(this,Hn,Y3).call(this);s&&(Ke(this,Sn)!==n||ec(this.options.enabled,Ke(this,Sn))!==ec(r.enabled,Ke(this,Sn))||i!==Ke(this,Pf))&&on(this,Hn,J3).call(this,i)}getOptimisticResult(t){const r=Ke(this,qo).getQueryCache().build(Ke(this,qo),t),n=this.createResult(r,t);return uye(this,n)&&(fr(this,uo,n),fr(this,Lm,this.options),fr(this,xh,Ke(this,Sn).state)),n}getCurrentResult(){return Ke(this,uo)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Ke(this,ud).status==="pending"&&Ke(this,ud).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){Ke(this,Rm).add(t)}getCurrentQuery(){return Ke(this,Sn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Ke(this,qo).defaultQueryOptions(t),n=Ke(this,qo).getQueryCache().build(Ke(this,qo),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return on(this,Hn,Hg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Ke(this,uo)))}createResult(t,r){var E;const n=Ke(this,Sn),s=this.options,i=Ke(this,uo),o=Ke(this,xh),l=Ke(this,Lm),u=t!==n?t.state:Ke(this,B1),{state:f}=t;let d={...f},p=!1,h;if(r._optimisticResults){const I=this.hasListeners(),A=!I&&c8(t,r),C=I&&u8(t,n,r,s);(A||C)&&(d={...d,...$R(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:m}=d;h=d.data;let v=!1;if(r.placeholderData!==void 0&&h===void 0&&m==="pending"){let I;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(I=i.data,v=!0):I=typeof r.placeholderData=="function"?r.placeholderData((E=Ke(this,Mm))==null?void 0:E.state.data,Ke(this,Mm)):r.placeholderData,I!==void 0&&(m="success",h=V3(i==null?void 0:i.data,I,r),p=!0)}if(r.select&&h!==void 0&&!v)if(i&&h===(o==null?void 0:o.data)&&r.select===Ke(this,$1))h=Ke(this,Fm);else try{fr(this,$1,r.select),h=r.select(h),h=V3(i==null?void 0:i.data,h,r),fr(this,Fm,h),fr(this,Of,null)}catch(I){fr(this,Of,I)}Ke(this,Of)&&(g=Ke(this,Of),h=Ke(this,Fm),x=Date.now(),m="error");const y=d.fetchStatus==="fetching",w=m==="pending",b=m==="error",N=w&&y,S=h!==void 0,_={status:m,fetchStatus:d.fetchStatus,isPending:w,isSuccess:m==="success",isError:b,isInitialLoading:N,isLoading:N,data:h,dataUpdatedAt:d.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:b&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:b&&S,isStale:$6(t,r),refetch:this.refetch,promise:Ke(this,ud),isEnabled:ec(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const I=_.data!==void 0,A=_.status==="error"&&!I,C=B=>{A?B.reject(_.error):I&&B.resolve(_.data)},F=()=>{const B=fr(this,ud,_.promise=G3());C(B)},M=Ke(this,ud);switch(M.status){case"pending":t.queryHash===n.queryHash&&C(M);break;case"fulfilled":(A||_.data!==M.value)&&F();break;case"rejected":(!A||_.error!==M.reason)&&F();break}}return _}updateResult(){const t=Ke(this,uo),r=this.createResult(Ke(this,Sn),this.options);if(fr(this,xh,Ke(this,Sn).state),fr(this,Lm,this.options),Ke(this,xh).data!==void 0&&fr(this,Mm,Ke(this,Sn)),Uw(r,t))return;fr(this,uo,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!Ke(this,Rm).size)return!0;const o=new Set(i??Ke(this,Rm));return this.options.throwOnError&&o.add("error"),Object.keys(Ke(this,uo)).some(l=>{const c=l;return Ke(this,uo)[c]!==t[c]&&o.has(c)})};on(this,Hn,zR).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&on(this,Hn,Q3).call(this)}},qo=new WeakMap,Sn=new WeakMap,B1=new WeakMap,uo=new WeakMap,xh=new WeakMap,Lm=new WeakMap,ud=new WeakMap,Of=new WeakMap,$1=new WeakMap,Fm=new WeakMap,Mm=new WeakMap,gh=new WeakMap,vh=new WeakMap,Pf=new WeakMap,Rm=new WeakMap,Hn=new WeakSet,Hg=function(t){on(this,Hn,tS).call(this);let r=Ke(this,Sn).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(po)),r},X3=function(){on(this,Hn,Z3).call(this);const t=r0(this.options.staleTime,Ke(this,Sn));if(Hh||Ke(this,uo).isStale||!H3(t))return;const n=DR(Ke(this,uo).dataUpdatedAt,t)+1;fr(this,gh,ch.setTimeout(()=>{Ke(this,uo).isStale||this.updateResult()},n))},Y3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ke(this,Sn)):this.options.refetchInterval)??!1},J3=function(t){on(this,Hn,eS).call(this),fr(this,Pf,t),!(Hh||ec(this.options.enabled,Ke(this,Sn))===!1||!H3(Ke(this,Pf))||Ke(this,Pf)===0)&&fr(this,vh,ch.setInterval(()=>{(this.options.refetchIntervalInBackground||B6.isFocused())&&on(this,Hn,Hg).call(this)},Ke(this,Pf)))},Q3=function(){on(this,Hn,X3).call(this),on(this,Hn,J3).call(this,on(this,Hn,Y3).call(this))},Z3=function(){Ke(this,gh)&&(ch.clearTimeout(Ke(this,gh)),fr(this,gh,void 0))},eS=function(){Ke(this,vh)&&(ch.clearInterval(Ke(this,vh)),fr(this,vh,void 0))},tS=function(){const t=Ke(this,qo).getQueryCache().build(Ke(this,qo),this.options);if(t===Ke(this,Sn))return;const r=Ke(this,Sn);fr(this,Sn,t),fr(this,B1,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},zR=function(t){Us.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Ke(this,uo))}),Ke(this,qo).getQueryCache().notify({query:Ke(this,Sn),type:"observerResultsUpdated"})})},oD);function cye(e,t){return ec(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function c8(e,t){return cye(e,t)||e.state.data!==void 0&&rS(e,t,t.refetchOnMount)}function rS(e,t,r){if(ec(t.enabled,e)!==!1&&r0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&$6(e,t)}return!1}function u8(e,t,r,n){return(e!==t||ec(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&$6(e,r)}function $6(e,t){return ec(t.enabled,e)!==!1&&e.isStaleByTime(r0(t.staleTime,e))}function uye(e,t){return!Uw(e.getCurrentResult(),t)}function qw(e){return{onFetch:(t,r)=>{var f,d,p,h,g;const n=t.options,s=(p=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:p.direction,i=((h=t.state.data)==null?void 0:h.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const m=w=>{rye(w,()=>t.signal,()=>x=!0)},v=FR(t.options,t.fetchOptions),y=async(w,b,N)=>{if(x)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const j=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:b,direction:N?"backward":"forward",meta:t.options.meta};return m(A),A})(),_=await v(j),{maxPages:E}=t.options,I=N?tye:eye;return{pages:I(w.pages,_,E),pageParams:I(w.pageParams,b,E)}};if(s&&i.length){const w=s==="backward",b=w?qR:nS,N={pages:i,pageParams:o},S=b(n,N);l=await y(N,S,w)}else{const w=e??i.length;do{const b=c===0?o[0]??n.initialPageParam:nS(n,l);if(c>0&&b==null)break;l=await y(l,b),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var x,m;return(m=(x=t.options).persister)==null?void 0:m.call(x,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function nS(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function qR(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}function dye(e,t){return t?nS(e,t)!=null:!1}function fye(e,t){return!t||!e.getPreviousPageParam?!1:qR(e,t)!=null}var hye=class extends UR{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:qw()})}getOptimisticResult(e){return e.behavior=qw(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var g,x;const{state:r}=e,n=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=n,c=(x=(g=r.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:x.direction,u=o&&c==="forward",f=s&&c==="forward",d=o&&c==="backward",p=s&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:dye(t,r.data),hasPreviousPage:fye(t,r.data),isFetchNextPageError:u,isFetchingNextPage:f,isFetchPreviousPageError:d,isFetchingPreviousPage:p,isRefetchError:l&&!u&&!d,isRefetching:i&&!f&&!p}}},U1,Au,qi,yh,Cu,bf,lD,pye=(lD=class extends BR{constructor(t){super();Er(this,Cu);Er(this,U1);Er(this,Au);Er(this,qi);Er(this,yh);fr(this,U1,t.client),this.mutationId=t.mutationId,fr(this,qi,t.mutationCache),fr(this,Au,[]),this.state=t.state||HR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ke(this,Au).includes(t)||(Ke(this,Au).push(t),this.clearGcTimeout(),Ke(this,qi).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){fr(this,Au,Ke(this,Au).filter(r=>r!==t)),this.scheduleGc(),Ke(this,qi).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ke(this,Au).length||(this.state.status==="pending"?this.scheduleGc():Ke(this,qi).remove(this))}continue(){var t;return((t=Ke(this,yh))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,f,d,p,h,g,x,m,v,y,w,b,N,S,j;const r=()=>{on(this,Cu,bf).call(this,{type:"continue"})},n={client:Ke(this,U1),meta:this.options.meta,mutationKey:this.options.mutationKey};fr(this,yh,RR({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(_,E)=>{on(this,Cu,bf).call(this,{type:"failed",failureCount:_,error:E})},onPause:()=>{on(this,Cu,bf).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ke(this,qi).canRun(this)}));const s=this.state.status==="pending",i=!Ke(this,yh).canStart();try{if(s)r();else{on(this,Cu,bf).call(this,{type:"pending",variables:t,isPaused:i}),Ke(this,qi).config.onMutate&&await Ke(this,qi).config.onMutate(t,this,n);const E=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t,n));E!==this.state.context&&on(this,Cu,bf).call(this,{type:"pending",context:E,variables:t,isPaused:i})}const _=await Ke(this,yh).start();return await((u=(c=Ke(this,qi).config).onSuccess)==null?void 0:u.call(c,_,t,this.state.context,this,n)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,_,t,this.state.context,n)),await((h=(p=Ke(this,qi).config).onSettled)==null?void 0:h.call(p,_,null,this.state.variables,this.state.context,this,n)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,_,null,t,this.state.context,n)),on(this,Cu,bf).call(this,{type:"success",data:_}),_}catch(_){try{await((v=(m=Ke(this,qi).config).onError)==null?void 0:v.call(m,_,t,this.state.context,this,n))}catch(E){Promise.reject(E)}try{await((w=(y=this.options).onError)==null?void 0:w.call(y,_,t,this.state.context,n))}catch(E){Promise.reject(E)}try{await((N=(b=Ke(this,qi).config).onSettled)==null?void 0:N.call(b,void 0,_,this.state.variables,this.state.context,this,n))}catch(E){Promise.reject(E)}try{await((j=(S=this.options).onSettled)==null?void 0:j.call(S,void 0,_,t,this.state.context,n))}catch(E){Promise.reject(E)}throw on(this,Cu,bf).call(this,{type:"error",error:_}),_}finally{Ke(this,qi).runNext(this)}}},U1=new WeakMap,Au=new WeakMap,qi=new WeakMap,yh=new WeakMap,Cu=new WeakSet,bf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Us.batch(()=>{Ke(this,Au).forEach(n=>{n.onMutationUpdate(t)}),Ke(this,qi).notify({mutation:this,type:"updated",action:t})})},lD);function HR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var dd,Uc,z1,cD,mye=(cD=class extends Ux{constructor(t={}){super();Er(this,dd);Er(this,Uc);Er(this,z1);this.config=t,fr(this,dd,new Set),fr(this,Uc,new Map),fr(this,z1,0)}build(t,r,n){const s=new pye({client:t,mutationCache:this,mutationId:++Iy(this,z1)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){Ke(this,dd).add(t);const r=bb(t);if(typeof r=="string"){const n=Ke(this,Uc).get(r);n?n.push(t):Ke(this,Uc).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ke(this,dd).delete(t)){const r=bb(t);if(typeof r=="string"){const n=Ke(this,Uc).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&Ke(this,Uc).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=bb(t);if(typeof r=="string"){const n=Ke(this,Uc).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=bb(t);if(typeof r=="string"){const s=(n=Ke(this,Uc).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Us.batch(()=>{Ke(this,dd).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ke(this,dd).clear(),Ke(this,Uc).clear()})}getAll(){return Array.from(Ke(this,dd))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>a8(r,n))}findAll(t={}){return this.getAll().filter(r=>a8(t,r))}notify(t){Us.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Us.batch(()=>Promise.all(t.map(r=>r.continue().catch(po))))}},dd=new WeakMap,Uc=new WeakMap,z1=new WeakMap,cD);function bb(e){var t;return(t=e.options.scope)==null?void 0:t.id}var fd,If,Ho,hd,Pd,r2,aS,uD,xye=(uD=class extends Ux{constructor(r,n){super();Er(this,Pd);Er(this,fd);Er(this,If);Er(this,Ho);Er(this,hd);fr(this,fd,r),this.setOptions(n),this.bindMethods(),on(this,Pd,r2).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=Ke(this,fd).defaultMutationOptions(r),Uw(this.options,n)||Ke(this,fd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ke(this,Ho),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Wh(n.mutationKey)!==Wh(this.options.mutationKey)?this.reset():((s=Ke(this,Ho))==null?void 0:s.state.status)==="pending"&&Ke(this,Ho).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ke(this,Ho))==null||r.removeObserver(this)}onMutationUpdate(r){on(this,Pd,r2).call(this),on(this,Pd,aS).call(this,r)}getCurrentResult(){return Ke(this,If)}reset(){var r;(r=Ke(this,Ho))==null||r.removeObserver(this),fr(this,Ho,void 0),on(this,Pd,r2).call(this),on(this,Pd,aS).call(this)}mutate(r,n){var s;return fr(this,hd,n),(s=Ke(this,Ho))==null||s.removeObserver(this),fr(this,Ho,Ke(this,fd).getMutationCache().build(Ke(this,fd),this.options)),Ke(this,Ho).addObserver(this),Ke(this,Ho).execute(r)}},fd=new WeakMap,If=new WeakMap,Ho=new WeakMap,hd=new WeakMap,Pd=new WeakSet,r2=function(){var n;const r=((n=Ke(this,Ho))==null?void 0:n.state)??HR();fr(this,If,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},aS=function(r){Us.batch(()=>{var n,s,i,o,l,c,u,f;if(Ke(this,hd)&&this.hasListeners()){const d=Ke(this,If).variables,p=Ke(this,If).context,h={client:Ke(this,fd),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(s=(n=Ke(this,hd)).onSuccess)==null||s.call(n,r.data,d,p,h)}catch(g){Promise.reject(g)}try{(o=(i=Ke(this,hd)).onSettled)==null||o.call(i,r.data,null,d,p,h)}catch(g){Promise.reject(g)}}else if((r==null?void 0:r.type)==="error"){try{(c=(l=Ke(this,hd)).onError)==null||c.call(l,r.error,d,p,h)}catch(g){Promise.reject(g)}try{(f=(u=Ke(this,hd)).onSettled)==null||f.call(u,void 0,r.error,d,p,h)}catch(g){Promise.reject(g)}}}this.listeners.forEach(d=>{d(Ke(this,If))})})},uD),Eu,dD,gye=(dD=class extends Ux{constructor(t={}){super();Er(this,Eu);this.config=t,fr(this,Eu,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??F6(s,r);let o=this.get(i);return o||(o=new lye({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){Ke(this,Eu).has(t.queryHash)||(Ke(this,Eu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ke(this,Eu).get(t.queryHash);r&&(t.destroy(),r===t&&Ke(this,Eu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Us.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ke(this,Eu).get(t)}getAll(){return[...Ke(this,Eu).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>n8(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>n8(t,n)):r}notify(t){Us.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Us.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Us.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Eu=new WeakMap,dD),ns,Df,Lf,Bm,$m,Ff,Um,zm,fD,vye=(fD=class{constructor(e={}){Er(this,ns);Er(this,Df);Er(this,Lf);Er(this,Bm);Er(this,$m);Er(this,Ff);Er(this,Um);Er(this,zm);fr(this,ns,e.queryCache||new gye),fr(this,Df,e.mutationCache||new mye),fr(this,Lf,e.defaultOptions||{}),fr(this,Bm,new Map),fr(this,$m,new Map),fr(this,Ff,0)}mount(){Iy(this,Ff)._++,Ke(this,Ff)===1&&(fr(this,Um,B6.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ke(this,ns).onFocus())})),fr(this,zm,zw.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ke(this,ns).onOnline())})))}unmount(){var e,t;Iy(this,Ff)._--,Ke(this,Ff)===0&&((e=Ke(this,Um))==null||e.call(this),fr(this,Um,void 0),(t=Ke(this,zm))==null||t.call(this),fr(this,zm,void 0))}isFetching(e){return Ke(this,ns).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ke(this,Df).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ke(this,ns).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ke(this,ns).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(r0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ke(this,ns).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=Ke(this,ns).get(n.queryHash),i=s==null?void 0:s.state.data,o=J1e(t,i);if(o!==void 0)return Ke(this,ns).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Us.batch(()=>Ke(this,ns).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ke(this,ns).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ke(this,ns);Us.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ke(this,ns);return Us.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Us.batch(()=>Ke(this,ns).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(po).catch(po)}invalidateQueries(e,t={}){return Us.batch(()=>(Ke(this,ns).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Us.batch(()=>Ke(this,ns).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(po)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(po)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ke(this,ns).build(this,t);return r.isStaleByTime(r0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(po).catch(po)}fetchInfiniteQuery(e){return e.behavior=qw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(po).catch(po)}ensureInfiniteQueryData(e){return e.behavior=qw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zw.isOnline()?Ke(this,Df).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ke(this,ns)}getMutationCache(){return Ke(this,Df)}getDefaultOptions(){return Ke(this,Lf)}setDefaultOptions(e){fr(this,Lf,e)}setQueryDefaults(e,t){Ke(this,Bm).set(Wh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ke(this,Bm).values()],r={};return t.forEach(n=>{N1(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ke(this,$m).set(Wh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ke(this,$m).values()],r={};return t.forEach(n=>{N1(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ke(this,Lf).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=F6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===M6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ke(this,Lf).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ke(this,ns).clear(),Ke(this,Df).clear()}},ns=new WeakMap,Df=new WeakMap,Lf=new WeakMap,Bm=new WeakMap,$m=new WeakMap,Ff=new WeakMap,Um=new WeakMap,zm=new WeakMap,fD),WR=D.createContext(void 0),Ps=e=>{const t=D.useContext(WR);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},yye=({client:e,children:t})=>(D.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(WR.Provider,{value:e,children:t})),VR=D.createContext(!1),bye=()=>D.useContext(VR);VR.Provider;function wye(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Nye=D.createContext(wye()),jye=()=>D.useContext(Nye),kye=(e,t,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?R6(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},Sye=e=>{D.useEffect(()=>{e.clearReset()},[e])},_ye=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||R6(r,[e.error,n])),Aye=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Cye=(e,t)=>e.isLoading&&e.isFetching&&!t,Eye=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,d8=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function GR(e,t,r){var p,h,g,x;const n=bye(),s=jye(),i=Ps(),o=i.defaultQueryOptions(e);(h=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||h.call(p,o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",Aye(o),kye(o,s,l),Sye(s);const c=!i.getQueryCache().get(o.queryHash),[u]=D.useState(()=>new t(i,o)),f=u.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(m=>{const v=d?u.subscribe(Us.batchCalls(m)):po;return u.updateResult(),v},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),D.useEffect(()=>{u.setOptions(o)},[o,u]),Eye(o,f))throw d8(o,u,s);if(_ye({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((x=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||x.call(g,o,f),o.experimental_prefetchInRender&&!Hh&&Cye(f,n)){const m=c?d8(o,u,s):l==null?void 0:l.promise;m==null||m.catch(po).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function Dl(e,t){return GR(e,UR)}function Ao(e,t){const r=Ps(),[n]=D.useState(()=>new xye(r,e));D.useEffect(()=>{n.setOptions(e)},[n,e]);const s=D.useSyncExternalStore(D.useCallback(o=>n.subscribe(Us.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=D.useCallback((o,l)=>{n.mutate(o,l).catch(po)},[n]);if(s.error&&R6(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Tye(e,t){return GR(e,hye)}const mN={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},Oye=e=>Dl({queryKey:mN.companies(e),queryFn:async()=>(await iu((e==null?void 0:e.trim())||void 0)).data||[],staleTime:10*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Pye=e=>Dl({queryKey:mN.contacts(e),queryFn:async()=>(await qh((e==null?void 0:e.trim())||void 0)).data||[],staleTime:10*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Iye=()=>Dl({queryKey:mN.deals(),queryFn:async()=>(await hN()).data||[],staleTime:60*1e3,gcTime:10*60*1e3}),Dye=()=>Dl({queryKey:mN.users(),queryFn:async()=>(await su()).data||[],staleTime:5*60*1e3,gcTime:30*60*1e3}),Lye=()=>{const e=Ps();return Ao({mutationFn:async({id:t,updates:r})=>(await fR(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const n=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s==null?void 0:s.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:n}},onError:(t,r,n)=>{n!=null&&n.previousCompanies&&n.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},Fye=()=>{const e=Ps();return Ao({mutationFn:async({id:t,updates:r})=>(await pR(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const n=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s==null?void 0:s.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:n}},onError:(t,r,n)=>{n!=null&&n.previousContacts&&n.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},Mye=()=>{const e=Ps();return Ao({mutationFn:async t=>(await hR(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r==null?void 0:r.filter(n=>n.id!==t))}})},Rye=()=>{const e=Ps();return Ao({mutationFn:async t=>(await mR(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r==null?void 0:r.filter(n=>n.id!==t))}})},Bye=()=>{const e=Ps();return Ao({mutationFn:async t=>(await Promise.all(t.map(r=>hR(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r==null?void 0:r.filter(n=>!t.includes(n.id)))}})},$ye=()=>{const e=Ps();return Ao({mutationFn:async t=>(await Promise.all(t.map(r=>mR(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r==null?void 0:r.filter(n=>!t.includes(n.id)))}})},Uye=()=>{const e=Ps();return Ao({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(n=>fR(n,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},n=>n==null?void 0:n.map(s=>t.includes(s.id)?{...s,...r}:s))}})},zye=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:n=""})=>{var ua,Ya,dn,pi,no;const{showSuccess:s,showError:i}=Wn(),o=Ps(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,u]=D.useState("companies"),[f,d]=D.useState(""),[p,h]=D.useState(null),[g,x]=D.useState(null),{data:m=[],isLoading:v}=Oye(f),{data:y=[],isLoading:w}=Pye(f),{data:b=[],isLoading:N}=Iye(),{data:S=[],isLoading:j}=Dye(),_=Lye(),E=Fye(),I=Mye(),A=Rye(),C=Bye(),F=$ye(),M=Uye(),B=v||w||N||j,[K,G]=D.useState([]),[Y,q]=D.useState([]),[X,V]=D.useState([]),[T,R]=D.useState(!1),[z,L]=D.useState(!1),[H,ne]=D.useState({}),[se,Q]=D.useState(!1),[re,Ae]=D.useState(!1),[ee,Me]=D.useState({}),[ze,oe]=D.useState("details"),[J,je]=D.useState(!1),[ce,ye]=D.useState(null),[me,ge]=D.useState(null),[Ce,Ue]=D.useState(!1),[Te,ue]=D.useState(!1),[Oe,st]=D.useState([]),[be,De]=D.useState([]),[We,Xe]=D.useState(!1),[Et,wt]=D.useState(!1),[Ve,xt]=D.useState(!1),[Tt,he]=D.useState(!1),[Ge,kt]=D.useState(null),[gt,Vt]=D.useState(null),[_r,lr]=D.useState(!1),[Gt,rr]=D.useState(""),[ir,pr]=D.useState(!1),[Nr,jr]=D.useState(null),[Dt,Sr]=D.useState(null),[Gr,cn]=D.useState(!1),[qe,mt]=D.useState(""),[le,_e]=D.useState(0),[we,Se]=D.useState([]),[ae,pe]=D.useState(""),[Re,Ye]=D.useState(!1),[Je,Qe]=D.useState(null),[Be,ke]=D.useState(null),[He,at]=D.useState(!1),[ht,jt]=D.useState(""),[Bt,Jt]=D.useState(0),[Tr,En]=D.useState([]),[bs,_n]=D.useState(!1),[Is,la]=D.useState(!1),[Xa,ga]=D.useState(!1),un=async()=>{ga(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>ga(!1),500)}};D.useEffect(()=>{n!==void 0&&d(n)},[n]),D.useEffect(()=>{st([]),De([])},[c,f]),D.useEffect(()=>{const Pe=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",Pe),()=>window.removeEventListener("refresh-crm",Pe)},[o]);const Co=async Pe=>{if(p)try{await _.mutateAsync({id:p.id,updates:Pe}),h({...p,...Pe}),s("Account updated")}catch{i("Update failed")}},ea=async()=>{if(!(!g||J)){if(!ee.name||!ee.email){i("Name and Email are required fields");return}je(!0);try{const Pe={...ee,companyId:ee.companyId===""?null:ee.companyId,phone:ee.phone===""?null:ee.phone,linkedin:ee.linkedin===""?null:ee.linkedin,role:ee.role===""?null:ee.role};await E.mutateAsync({id:g.id,updates:Pe});const Ht={...g,...Pe};x(Ht),Ae(!1),s("Contact profile updated successfully")}catch(Pe){console.error("Contact update error:",Pe),i(Pe.message||"Failed to update contact. Please try again.")}finally{je(!1)}}},Ai=async Pe=>{Ue(!0);try{await I.mutateAsync(Pe),(p==null?void 0:p.id)===Pe&&(h(null),L(!1)),ye(null),s("Company deleted successfully")}catch(Ht){i(Ht.message||"Failed to delete company")}finally{Ue(!1)}},yc=async Pe=>{ue(!0);try{await A.mutateAsync(Pe),(g==null?void 0:g.id)===Pe&&(x(null),Ae(!1)),ge(null),s("Contact deleted successfully")}catch(Ht){i(Ht.message||"Failed to delete contact")}finally{ue(!1)}};D.useEffect(()=>{p!=null&&p.id?(async()=>{try{lr(!0);const Ht=await U3(p.id);Ht.success&&Vt(Ht.data)}catch{Vt(null)}finally{lr(!1)}})():Vt(null)},[p==null?void 0:p.id]);const bc=()=>{h(null),L(!1),rr(""),cn(!1),Vt(null)},Xs=()=>{x(null),Ae(!1),pe(""),at(!1)},Fe=Pe=>{const Ht=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,$t=[];let Kt;for(;(Kt=Ht.exec(Pe))!==null;){const dr=Kt[1].trim(),Wr=S.find(Zr=>Zr.name.toLowerCase()===dr.toLowerCase());Wr&&$t.push(Wr.id)}return[...new Set($t)]},vt=Pe=>{const Ht=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,$t=[];let Kt=0,dr;for(;(dr=Ht.exec(Pe))!==null;){dr.index>Kt&&$t.push(Pe.substring(Kt,dr.index));const Wr=dr[1].trim(),Zr=S.find(Ja=>Ja.name.toLowerCase()===Wr.toLowerCase());Zr?$t.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Zr.name]},dr.index)):$t.push(`@${Wr}`),Kt=dr.index+dr[0].length}return Kt<Pe.length&&$t.push(Pe.substring(Kt)),$t.length>0?$t:Pe},Lt=Pe=>{const Ht=Pe.target.value,$t=Pe.target.selectionStart;rr(Ht),_e($t);const Kt=Ht.substring(0,$t),dr=Kt.lastIndexOf("@");if(dr!==-1){const Wr=Kt.substring(dr+1),Zr=dr>0?Kt[dr-1]:" ";if((Zr===" "||Zr===`
`||dr===0)&&!Wr.includes(" ")&&!Wr.includes(`
`)){mt(Wr);const Ja=S.filter(mi=>mi.name.toLowerCase().includes(Wr.toLowerCase())||mi.email.toLowerCase().includes(Wr.toLowerCase()));Se(Ja.slice(0,5)),cn(!0);return}}cn(!1)},qt=Pe=>{const $t=Gt.substring(0,le).lastIndexOf("@"),Kt=Gt.substring(le),Wr=`${Gt.substring(0,$t)}@${Pe.name} ${Kt}`;rr(Wr),cn(!1)},vr=async()=>{if(!(!p||!Gt.trim())){pr(!0);try{const Pe=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",Ht=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",$t={id:`note_${Date.now()}`,userId:Pe,userName:Ht,text:Gt.trim(),createdAt:new Date().toISOString()},Kt=[...p.notes||[],$t];await _.mutateAsync({id:p.id,updates:{notes:Kt}}),h({...p,notes:Kt}),o.invalidateQueries({queryKey:["companies"]});const dr=Fe(Gt);for(const Zr of dr)try{await vx({userId:Zr,type:"mention",title:"You were mentioned in a company note",message:`${Ht} mentioned you in ${p.name}`,relatedId:p.id,relatedType:"company",read:!1})}catch(Ja){console.error("Failed to send notification:",Ja)}rr("");const Wr=dr.length>0?`Note added and ${dr.length} user(s) notified`:"Note added successfully";s(Wr)}catch(Pe){i(Pe.message||"Failed to add note")}finally{pr(!1)}}},gr=async()=>{var Pe;if(!(!p||!l||!Dt))try{jr(Dt);const Ht=((Pe=p.notes)==null?void 0:Pe.filter($t=>$t.id!==Dt))||[];await _.mutateAsync({id:p.id,updates:{notes:Ht}}),h({...p,notes:Ht}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),Sr(null)}catch(Ht){i(Ht.message||"Failed to delete note")}finally{jr(null)}},Br=Pe=>{const Ht=Pe.target.value,$t=Pe.target.selectionStart;pe(Ht),Jt($t);const Kt=Ht.substring(0,$t),dr=Kt.lastIndexOf("@");if(dr!==-1){const Wr=Kt.substring(dr+1),Zr=dr>0?Kt[dr-1]:" ";if((Zr===" "||Zr===`
`||dr===0)&&!Wr.includes(" ")&&!Wr.includes(`
`)){jt(Wr);const Ja=S.filter(mi=>mi.name.toLowerCase().includes(Wr.toLowerCase())||mi.email.toLowerCase().includes(Wr.toLowerCase()));En(Ja.slice(0,5)),at(!0);return}}at(!1)},Rn=Pe=>{const $t=ae.substring(0,Bt).lastIndexOf("@"),Kt=ae.substring(Bt),Wr=`${ae.substring(0,$t)}@${Pe.name} ${Kt}`;pe(Wr),at(!1)},Vn=async()=>{if(!(!g||!ae.trim())){Ye(!0);try{const Pe=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",Ht=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",$t={id:`note_${Date.now()}`,userId:Pe,userName:Ht,text:ae.trim(),createdAt:new Date().toISOString()},Kt=[...g.notes||[],$t];await E.mutateAsync({id:g.id,updates:{notes:Kt}}),x({...g,notes:Kt}),o.invalidateQueries({queryKey:["contacts"]});const dr=Fe(ae);for(const Zr of dr)try{await vx({userId:Zr,type:"mention",title:"You were mentioned in a contact note",message:`${Ht} mentioned you in ${g.name}`,relatedId:g.id,relatedType:"contact",read:!1})}catch(Ja){console.error("Failed to send notification:",Ja)}pe("");const Wr=dr.length>0?`Note added and ${dr.length} user(s) notified`:"Note added successfully";s(Wr)}catch(Pe){i(Pe.message||"Failed to add note")}finally{Ye(!1)}}},jn=async()=>{var Pe;if(!(!g||!l||!Be))try{Qe(Be);const Ht=((Pe=g.notes)==null?void 0:Pe.filter($t=>$t.id!==Be))||[];await E.mutateAsync({id:g.id,updates:{notes:Ht}}),x({...g,notes:Ht}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),ke(null)}catch(Ht){i(Ht.message||"Failed to delete note")}finally{Qe(null)}},yr=D.useCallback(Pe=>b.some(Ht=>Ht.companyId===Pe),[b]),Ft=D.useMemo(()=>m.filter(Pe=>{if(K.length>0){const Ht=K.includes("target")&&Pe.isTargetAccount,$t=K.includes("non-target")&&!Pe.isTargetAccount;if(!Ht&&!$t)return!1}if(Y.length>0){const Ht=Y.includes("assigned")&&Pe.ownerId,$t=Y.includes("unassigned")&&!Pe.ownerId;if(!Ht&&!$t)return!1}if(X.length>0){const Ht=X.includes("has-deals")&&yr(Pe.id),$t=X.includes("no-deals")&&!yr(Pe.id);if(!Ht&&!$t)return!1}return!0}),[m,K,Y,X,yr]),Dr=D.useMemo(()=>K.length>0||Y.length>0||X.length>0,[K,Y,X]),mr=()=>{G([]),q([]),V([])},hr=(Pe,Ht)=>{Pe==="target"?G($t=>$t.includes(Ht)?$t.filter(Kt=>Kt!==Ht):[...$t,Ht]):Pe==="assigned"?q($t=>$t.includes(Ht)?$t.filter(Kt=>Kt!==Ht):[...$t,Ht]):Pe==="deals"&&V($t=>$t.includes(Ht)?$t.filter(Kt=>Kt!==Ht):[...$t,Ht])},nr=()=>{Oe.length===Ft.length&&Ft.length>0?st([]):st(Ft.map(Pe=>Pe.id))},ca=()=>{be.length===y.length?De([]):De(y.map(Pe=>Pe.id))},Fr=async()=>{Xe(!0);try{const Pe=[...Oe];await C.mutateAsync(Pe),p&&Pe.includes(p.id)&&(h(null),L(!1)),st([]),kt(null),s(`Successfully deleted ${Pe.length} compan${Pe.length>1?"ies":"y"}`)}catch(Pe){i(Pe.message||"Failed to delete companies")}finally{Xe(!1)}},Zt=async()=>{wt(!0);try{const Pe=[...be];await F.mutateAsync(Pe),g&&Pe.includes(g.id)&&(x(null),Ae(!1)),De([]),kt(null),s(`Successfully deleted ${Pe.length} contact${Pe.length>1?"s":""}`)}catch(Pe){i(Pe.message||"Failed to delete contacts")}finally{wt(!1)}},gn=async()=>{if(Oe.length!==0){xt(!0);try{const Pe=[...Oe];await M.mutateAsync({ids:Pe,updates:{isTargetAccount:!0}}),p&&Pe.includes(p.id)&&h({...p,isTargetAccount:!0}),st([]),s(`Successfully marked ${Pe.length} compan${Pe.length>1?"ies":"y"} as target account${Pe.length>1?"s":""}`)}catch(Pe){i(Pe.message||"Failed to mark companies as target accounts")}finally{xt(!1)}}},xr=async()=>{if(Oe.length!==0){he(!0);try{const Pe=[...Oe];await M.mutateAsync({ids:Pe,updates:{isTargetAccount:!1}}),p&&Pe.includes(p.id)&&h({...p,isTargetAccount:!1}),st([]),s(`Successfully unmarked ${Pe.length} compan${Pe.length>1?"ies":"y"} as target account${Pe.length>1?"s":""}`)}catch(Pe){i(Pe.message||"Failed to unmark companies as target accounts")}finally{he(!1)}}},or=async()=>{p&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},cr=Pe=>b.filter(Ht=>Ht.companyId===Pe&&Ht.stage!=="Won"&&Ht.stage!=="Lost").length,Dn=Pe=>{var Ht;return Pe?((Ht=S.find($t=>$t.id===Pe))==null?void 0:Ht.name)||"Unknown":"Unassigned"};return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),a.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[a.jsxs("button",{onClick:()=>{u("companies"),st([]),De([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?Ft.length:m.length,")"]}),a.jsxs("button",{onClick:()=>{u("contacts"),st([]),De([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",y.length,")"]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:un,disabled:Xa,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[a.jsx(Uu,{className:`w-4 h-4 ${Xa?"animate-spin":""}`}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),a.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[a.jsx(Qr,{className:"w-4 h-4 shrink-0"})," ",a.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>_n(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[a.jsx(LH,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),a.jsxs("button",{onClick:()=>la(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[a.jsx(kh,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[a.jsx("div",{className:"w-full min-w-0",children:a.jsxs("div",{className:"relative group w-full min-w-0",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),a.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:f,onChange:Pe=>d(Pe.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:B,checked:c==="companies"?Ft.length>0&&Oe.length===Ft.length&&Ft.every(Pe=>Oe.includes(Pe.id)):y.length>0&&be.length===y.length,onChange:c==="companies"?nr:ca}),a.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>R(!0),disabled:B,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${Dr?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(Rv,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"text-sm font-bold",children:"Filters"}),Dr&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:K.length+Y.length+X.length})]}),a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:B?"Loading...":`Showing ${Ft.length} of ${m.length} companies`})]}):a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:B?"Loading...":`Showing ${y.length} contact${y.length!==1?"s":""}`})}),T&&c==="companies"&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:a.jsx(Rv,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),a.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vg,{className:"w-4 h-4"}),"Target Account"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:K.includes("target"),onChange:()=>hr("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(vg,{className:"w-4 h-4 text-amber-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[m.filter(Pe=>Pe.isTargetAccount).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:K.includes("non-target"),onChange:()=>hr("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Ru,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[m.filter(Pe=>!Pe.isTargetAccount).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Zy,{className:"w-4 h-4"}),"Assignment"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:Y.includes("assigned"),onChange:()=>hr("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Zy,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[m.filter(Pe=>Pe.ownerId).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:Y.includes("unassigned"),onChange:()=>hr("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Bu,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[m.filter(Pe=>!Pe.ownerId).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(oc,{className:"w-4 h-4"}),"Deals"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:X.includes("has-deals"),onChange:()=>hr("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(oc,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[m.filter(Pe=>yr(Pe.id)).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:X.includes("no-deals"),onChange:()=>hr("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(oc,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[m.filter(Pe=>!yr(Pe.id)).length," companies"]})]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:mr,disabled:!Dr,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[a.jsx(Yt,{className:"w-4 h-4"}),"Clear All Filters"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Ft.length," of ",m.length," companies"]}),a.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:B?Array.from({length:8}).map((Pe,Ht)=>a.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${Ht}`)):c==="companies"?Ft.map(Pe=>{const Ht=S.find(Kt=>Kt.id===Pe.ownerId),$t=Oe.includes(Pe.id);return a.jsxs("div",{onClick:()=>h(Pe),className:`bg-white p-6 rounded-2xl border ${$t?"border-indigo-400 bg-indigo-50/30":Pe.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[Pe.isTargetAccount&&a.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[a.jsx(vg,{className:"w-2.5 h-2.5"})," Target Account"]}),a.jsx("div",{className:"absolute top-4 right-4",onClick:Kt=>Kt.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:$t,onChange:()=>st(Kt=>$t?Kt.filter(dr=>dr!==Pe.id):[...Kt,Pe.id])})}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(ls,{src:Pe.logo,fallbackText:Pe.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:Pe.name}),a.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:Pe.industry})]})]}),a.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jh,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate",children:Pe.website||"No website"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vo,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate font-medium",children:(Ht==null?void 0:Ht.name)||"Unassigned"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[cr(Pe.id)," Active Deals"]}),a.jsx(Ea,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Pe.id)}):y.map(Pe=>{const Ht=m.find(Kt=>Kt.id===Pe.companyId),$t=be.includes(Pe.id);return a.jsxs("div",{onClick:()=>x(Pe),className:`bg-white p-5 rounded-2xl border ${$t?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[a.jsx("div",{className:"absolute top-4 right-4",onClick:Kt=>Kt.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:$t,onChange:()=>De(Kt=>$t?Kt.filter(dr=>dr!==Pe.id):[...Kt,Pe.id])})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:Pe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:Pe.name}),a.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[Pe.role," @ ",(Ht==null?void 0:Ht.name)||"Partner"]})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xa,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:Pe.email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xk,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-[13px]",children:Pe.phone})]})]}),Pe.linkedin&&a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsxs("a",{href:Pe.linkedin,target:"_blank",rel:"noreferrer",onClick:Kt=>Kt.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[a.jsx(kh,{className:"w-4 h-4"}),"LinkedIn"]})})]},Pe.id)})})]}),(c==="companies"&&Oe.length>0||c==="contacts"&&be.length>0)&&a.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?Oe.length:be.length}),"Selected"]}),a.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),gn()},disabled:Ve||Tt,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[Ve?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(vg,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),a.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),xr()},disabled:Ve||Tt,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[Tt?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(Bu,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),a.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),kt(c)},disabled:c==="companies"?We:Et,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?We:Et)?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(Ar,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),a.jsx("button",{onClick:()=>{c==="companies"?st([]):De([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]})}),p&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:bc}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ls,{src:p.logo,fallbackText:p.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:p.name}),a.jsx("button",{onClick:()=>Co({isTargetAccount:!p.isTargetAccount}),className:`p-1 rounded-lg transition-all ${p.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:a.jsx(vg,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-500",children:p.industry})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[z?a.jsx("button",{onClick:async()=>{await Co(H),L(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:a.jsx(Vs,{className:"w-5 h-5"})}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{ne({...p}),L(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:a.jsx(mk,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>ye(p),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:a.jsx(Ar,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:bc,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[z?a.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),a.jsx("input",{type:"text",value:H.name,onChange:Pe=>ne({...H,name:Pe.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),a.jsx("input",{type:"text",value:H.industry,onChange:Pe=>ne({...H,industry:Pe.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),a.jsxs("select",{value:H.ownerId,onChange:Pe=>ne({...H,ownerId:Pe.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"",children:"Unassigned"}),S.map(Pe=>a.jsx("option",{value:Pe.id,children:Pe.name},Pe.id))]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),a.jsx("input",{type:"text",value:H.website,onChange:Pe=>ne({...H,website:Pe.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),a.jsx("input",{type:"text",value:H.linkedin,onChange:Pe=>ne({...H,linkedin:Pe.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),a.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[a.jsx(vo,{className:"w-4 h-4"})," ",Dn(p.ownerId)]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),a.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${p.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:p.isTargetAccount?"Target Account":"Standard Account"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Jc,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),a.jsxs("button",{onClick:or,disabled:se,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[se?a.jsx(pt,{className:"w-3 h-3 animate-spin"}):a.jsx(UH,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),a.jsxs("div",{className:"space-y-3",children:[se&&a.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),a.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!p.socialSignals||p.socialSignals.length===0)&&!se?a.jsxs("div",{className:"py-12 text-center text-slate-400",children:[a.jsx(Jc,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),a.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(p.socialSignals||[]).map(Pe=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Pe.type==="funding"?"bg-emerald-50 text-emerald-600":Pe.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[Pe.type==="funding"&&a.jsx(DH,{className:"w-4 h-4"}),Pe.type==="hiring"&&a.jsx(lc,{className:"w-4 h-4"}),Pe.type==="acquisition"&&a.jsx(M2,{className:"w-4 h-4"}),Pe.type==="news"&&a.jsx(TH,{className:"w-4 h-4"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-slate-900",children:Pe.title}),Pe.isAiGenerated&&a.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[a.jsx(oi,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:Pe.date})]}),a.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:Pe.description})]},Pe.id))]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Sd,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),gt&&a.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",a.jsx(Ea,{className:"w-3 h-3"})]})]}),_r?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):gt?a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-2xl border-2 ${gt.latestNpsScore>=9?"bg-green-50 border-green-200":gt.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":gt.latestNpsScore!==void 0&&gt.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),gt.latestNpsScore!==void 0&&gt.latestNpsScore!==null?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-2xl font-black ${gt.latestNpsScore>=9?"text-green-600":gt.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:gt.latestNpsScore}),gt.npsCategory&&a.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${gt.npsCategory==="Promoter"?"bg-green-100 text-green-700":gt.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:gt.npsCategory})]}):a.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),gt.lastSurveyDate?a.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[a.jsx($n,{className:"w-4 h-4"}),new Date(gt.lastSurveyDate).toLocaleDateString()]}):a.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):a.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:a.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",p.notes&&p.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:p.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:3,value:Gt,onChange:Lt,onBlur:()=>setTimeout(()=>cn(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),Gr&&we.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Mh,{className:"w-3 h-3"}),"Mention User"]}),we.map(Pe=>a.jsxs("button",{onClick:()=>qt(Pe),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Pe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Pe.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Pe.email})]})]},Pe.id))]})})]}),a.jsx("button",{onClick:vr,disabled:ir||!Gt.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ir?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-4 h-4"}),"Send"]})})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:p.notes&&p.notes.length>0?[...p.notes].reverse().map(Pe=>{var $t;const Ht=(l==null?void 0:l.role)==="Admin"||Pe.userId===(l==null?void 0:l.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:(($t=Pe.userName)==null?void 0:$t.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Pe.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Pe.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Ht&&a.jsx("button",{onClick:()=>Sr(Pe.id),disabled:Nr===Pe.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Nr===Pe.id?a.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Pe.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:vt(Pe.text)})]},Pe.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ui,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),a.jsx("div",{className:"space-y-3",children:y.filter(Pe=>Pe.companyId===p.id).map(Pe=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>x(Pe),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:Pe.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Pe.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:Pe.role})]})]}),a.jsx(Ea,{className:"w-4 h-4 text-slate-300"})]},Pe.id))})]})]})]})]}),g&&a.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Xs}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:Xs,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(Yt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:g.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:g.name}),a.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[g.role," @ ",((ua=m.find(Pe=>Pe.id===g.companyId))==null?void 0:ua.name)||"Direct Contact"]}),a.jsx("div",{className:"flex gap-2 mt-4",children:re?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:ea,disabled:J,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:J?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-3.5 h-3.5"})," Save Changes"]})}),a.jsxs("button",{onClick:()=>{Ae(!1),Me({...g})},disabled:J,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Yt,{className:"w-3.5 h-3.5"})," Cancel"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{Me({...g}),Ae(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[a.jsx(mk,{className:"w-3.5 h-3.5"})," Edit Profile"]}),a.jsx("a",{href:`mailto:${g.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:a.jsx(xa,{className:"w-4 h-4"})}),g.linkedin&&a.jsx("a",{href:g.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:a.jsx(kh,{className:"w-4 h-4"})})]})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:a.jsx(s0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:a.jsx(pa,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:a.jsx(kd,{className:"w-3.5 h-3.5"})}].map(Pe=>a.jsxs("button",{onClick:()=>{oe(Pe.id),Ae(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${ze===Pe.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[Pe.icon," ",Pe.label]},Pe.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[ze==="details"&&a.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:re?a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"text",value:ee.name||"",onChange:Pe=>Me({...ee,name:Pe.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),a.jsx("input",{type:"text",value:ee.role||"",onChange:Pe=>Me({...ee,role:Pe.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),a.jsxs("select",{value:ee.companyId||"",onChange:Pe=>Me({...ee,companyId:Pe.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"No Organization"}),m.map(Pe=>a.jsx("option",{value:Pe.id,children:Pe.name},Pe.id))]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[a.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"email",value:ee.email||"",onChange:Pe=>Me({...ee,email:Pe.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),a.jsx("input",{type:"tel",value:ee.phone||"",onChange:Pe=>Me({...ee,phone:Pe.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),a.jsx("input",{type:"url",value:ee.linkedin||"",onChange:Pe=>Me({...ee,linkedin:Pe.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),a.jsx(xa,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:g.email}),a.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),a.jsx(xk,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:g.phone||"Registry Pending"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ru,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),a.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[a.jsx(ls,{src:(Ya=m.find(Pe=>Pe.id===g.companyId))==null?void 0:Ya.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:((dn=m.find(Pe=>Pe.id===g.companyId))==null?void 0:dn.name)||"Independent Partner"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:((pi=m.find(Pe=>Pe.id===g.companyId))==null?void 0:pi.industry)||"Uncategorized"}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),a.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),a.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:a.jsx(zs,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(oi,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[a.jsx(Zy,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[a.jsx(F2,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),ze==="notes"&&a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",g.notes&&g.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:g.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:4,value:ae,onChange:Br,onBlur:()=>setTimeout(()=>at(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),He&&Tr.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Mh,{className:"w-3 h-3"}),"Mention User"]}),Tr.map(Pe=>a.jsxs("button",{onClick:()=>Rn(Pe),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Pe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Pe.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Pe.email})]})]},Pe.id))]})})]}),a.jsx("button",{onClick:Vn,disabled:Re||!ae.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Re?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-4 h-4"}),"Send"]})})]}),g.legacyNotes&&a.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(s0,{className:"w-4 h-4 text-amber-600"}),a.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),a.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:g.legacyNotes})]}),a.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:g.notes&&g.notes.length>0?[...g.notes].reverse().map(Pe=>{var $t;const Ht=(l==null?void 0:l.role)==="Admin"||Pe.userId===(l==null?void 0:l.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:(($t=Pe.userName)==null?void 0:$t.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Pe.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Pe.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Ht&&a.jsx("button",{onClick:()=>ke(Pe.id),disabled:Je===Pe.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Je===Pe.id?a.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Pe.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:vt(Pe.text)})]},Pe.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ui,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),ze==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),a.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[a.jsx(xH,{className:"w-3 h-3"})," Audit Log"]})]}),a.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>ge(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ar,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>{x(null),Ae(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Zy,{className:"w-5 h-5"})," Save"]})]})]})]}),ce&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(ls,{src:ce.logo,fallbackText:ce.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:ce.name}),a.jsx("p",{className:"text-xs text-slate-500",children:ce.industry})]})]})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ye(null),disabled:Ce,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Ai(ce.id),disabled:Ce,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ce?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),me&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:me.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:me.name}),a.jsx("p",{className:"text-xs text-slate-500",children:me.email}),me.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:me.role})]})]}),m.find(Pe=>Pe.id===me.companyId)&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(Ru,{className:"w-4 h-4 text-slate-400"}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:(no=m.find(Pe=>Pe.id===me.companyId))==null?void 0:no.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ge(null),disabled:Te,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>yc(me.id),disabled:Te,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Te?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),Ge&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",Ge==="companies"?Oe.length:be.length," ",Ge==="companies"?"Compan":"Contact",Ge==="companies"?Oe.length>1?"ies":"y":be.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",Ge==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(Ge==="companies"?m.filter(Pe=>Oe.includes(Pe.id)):y.filter(Pe=>be.includes(Pe.id))).slice(0,5).map(Pe=>a.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:Ge==="companies"?a.jsxs(a.Fragment,{children:[a.jsx(ls,{src:Pe.logo,fallbackText:Pe.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Pe.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Pe.industry})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:Pe.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Pe.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Pe.email})]})]})},Pe.id)),(Ge==="companies"?Oe.length:be.length)>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(Ge==="companies"?Oe.length:be.length)-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>kt(null),disabled:Ge==="companies"?We:Et,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>{Ge==="companies"?Fr():Zt()},disabled:Ge==="companies"?We:Et,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(Ge==="companies"?We:Et)?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${Ge==="companies"?Oe.length:be.length} ${Ge==="companies"?"Compan":"Contact"}${Ge==="companies"?Oe.length>1?"ies":"y":be.length>1?"s":""}`})]})]})}),Dt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(i0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Sr(null),disabled:Nr===Dt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:gr,disabled:Nr===Dt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Nr===Dt?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Be&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(i0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>ke(null),disabled:Je===Be,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:jn,disabled:Je===Be,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Je===Be?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete"]})})]})]})}),bs&&a.jsx(V1e,{onClose:()=>_n(!1),onSuccess:()=>{_n(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:(l==null?void 0:l.id)||""}),Is&&a.jsx(G1e,{onClose:()=>la(!1),onSuccess:()=>{la(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:(l==null?void 0:l.id)||""})]})},f8=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],qye=({onNavigate:e,onNewDeal:t,currentUser:r})=>{var cn;const{showSuccess:n,showError:s,showInfo:i}=Wn(),[o,l]=D.useState([]),[c,u]=D.useState([]),[f,d]=D.useState([]),[p,h]=D.useState([]),[g,x]=D.useState(!0),[m,v]=D.useState(null),[y,w]=D.useState("overview"),[b,N]=D.useState(!1),[S,j]=D.useState(null),[_,E]=D.useState(null),[I,A]=D.useState(""),[C,F]=D.useState(null),[M,B]=D.useState(!1),[K,G]=D.useState(!1),[Y,q]=D.useState(!1),[X,V]=D.useState({title:"",companyId:"",value:"",currency:Es,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[T,R]=D.useState([]),[z,L]=D.useState(!1),[H,ne]=D.useState(!1),[se,Q]=D.useState([]),[re,Ae]=D.useState(!1),[ee,Me]=D.useState([]),[ze,oe]=D.useState(""),[J]=D.useState("sales"),[je,ce]=D.useState(!1),[ye,me]=D.useState(!1),[ge,Ce]=D.useState(!0),[Ue,Te]=D.useState(!1),[ue,Oe]=D.useState(null),[st,be]=D.useState(""),[De,We]=D.useState(""),Xe=ee.find(qe=>qe.id===ze)||null,[Et,wt]=D.useState(null),Ve=async()=>{var qe;try{Ce(!0);const mt=await HP(),_e=((mt==null?void 0:mt.data)||[]).filter(we=>we.type==="sales");if(_e.length===0)try{const we=await WP({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});(qe=we==null?void 0:we.data)!=null&&qe.id&&await vb(we.data.id,{isActive:!0});const Se=await HP(),pe=((Se==null?void 0:Se.data)||[]).filter(Ye=>Ye.type==="sales");Me(pe);const Re=pe.find(Ye=>Ye.isActive)||pe[0];Re&&oe(Re.id)}catch(we){console.error("[PIPELINE] Failed to create default sales pipeline:",we);const Se=f8.filter(ae=>ae.type==="sales");Me(Se),Se.length>0&&oe(Se[0].id)}else{Me(_e);const we=_e.find(Se=>Se.isActive)||_e[0];we&&oe(we.id)}}catch(mt){console.error("[PIPELINE] Failed to fetch pipelines:",mt);const le=f8.filter(_e=>_e.type==="sales");Me(le),le.length>0&&oe(le[0].id)}finally{Ce(!1)}};D.useEffect(()=>{Ve()},[]);const xt=async()=>{x(!0);try{const qe=(r==null?void 0:r.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,[mt,le,_e,we]=await Promise.all([hN(qe),iu(),su(),qh()]),ae=(Array.isArray(mt)?mt:(mt==null?void 0:mt.data)||[]).filter(pe=>pe.pipelineType?pe.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(pe.stage));l(ae),u((le==null?void 0:le.data)||[]),d((_e==null?void 0:_e.data)||[]),h((we==null?void 0:we.data)||[])}catch{s("Failed to load pipeline data")}finally{x(!1)}};D.useEffect(()=>{xt()},[r,J]),D.useEffect(()=>{const qe=()=>xt();return window.addEventListener("refresh-pipeline",qe),()=>window.removeEventListener("refresh-pipeline",qe)},[]);const Tt=(qe,mt)=>{wt(mt),qe.dataTransfer.setData("dealId",mt)},he=async(qe,mt)=>{qe.preventDefault();const le=qe.dataTransfer.getData("dealId"),_e=o.find(we=>we.id===le);if(!(!_e||_e.stage===mt))try{await xb(le,{stage:mt,pipelineType:"sales"}),l(we=>we.map(Se=>Se.id===le?{...Se,stage:mt}:Se)),n(`Deal moved to ${mt}`),_e.ownerId&&_e.ownerId!==(r==null?void 0:r.id)&&await vx({userId:_e.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${_e.title}" was moved to ${mt}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{wt(null)}},Ge=async()=>{if(!(!st.trim()||!ze||Ue))try{Te(!0);const qe=ee.find(le=>le.id===ze);if(!qe)return;const mt=[...qe.stages,st.trim()];await vb(ze,{stages:mt}),Me(le=>le.map(_e=>_e.id===ze?{..._e,stages:mt}:_e)),be(""),n("Stage added successfully")}catch(qe){s(qe.message||"Failed to add stage")}finally{Te(!1)}},kt=async qe=>{if(ze)try{const mt=ee.find(_e=>_e.id===ze);if(!mt)return;const le=mt.stages.filter((_e,we)=>we!==qe);await vb(ze,{stages:le}),Me(_e=>_e.map(we=>we.id===ze?{...we,stages:le}:we)),n("Stage removed successfully")}catch(mt){s(mt.message||"Failed to remove stage")}},gt=async()=>{if(De.trim())try{const qe=await WP({name:De.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});qe!=null&&qe.data&&(await Ve(),oe(qe.data.id),We(""),ce(!1),n("Sales pipeline created successfully"))}catch(qe){s(qe.message||"Failed to create pipeline")}},Vt=async qe=>{try{const mt=ee.find(le=>le.id===qe);if(!mt)return;await vb(qe,{isActive:!0}),oe(qe),await Ve(),await xt(),n(`Switched to ${mt.name}`)}catch(mt){s(mt.message||"Failed to switch pipeline")}},_r=async qe=>{B(!0);try{await UP(qe),l(mt=>mt.filter(le=>le.id!==qe)),(m==null?void 0:m.id)===qe&&v(null),F(null),n("Opportunity removed from pipeline")}catch(mt){s(mt.message||"Failed to delete opportunity")}finally{B(!1)}},lr=()=>{T.length===o.length?R([]):R(o.map(qe=>qe.id))},Gt=async()=>{L(!0);try{const qe=[...T];await Promise.all(qe.map(mt=>UP(mt))),l(mt=>mt.filter(le=>!qe.includes(le.id))),m&&qe.includes(m.id)&&v(null),R([]),ne(!1),n(`Successfully deleted ${qe.length} opportunit${qe.length>1?"ies":"y"}`)}catch(qe){s(qe.message||"Failed to delete opportunities")}finally{L(!1)}},rr=async qe=>{var le;if(!m)return;if((le=m.stakeholderIds)!=null&&le.includes(qe)){s("Stakeholder already linked");return}j(qe);const mt=[...m.stakeholderIds||[],qe];try{await xb(m.id,{stakeholderIds:mt});const _e={...m,stakeholderIds:mt};v(_e),l(we=>we.map(Se=>Se.id===m.id?_e:Se)),N(!1),A(""),n("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{j(null)}},ir=c.find(qe=>qe.id===(m==null?void 0:m.companyId)),pr=f.find(qe=>qe.id===(m==null?void 0:m.ownerId)),Nr=p.filter(qe=>{var mt;return(mt=m==null?void 0:m.stakeholderIds)==null?void 0:mt.includes(qe.id)}),jr=p.filter(qe=>{var mt;return!((mt=m==null?void 0:m.stakeholderIds)!=null&&mt.includes(qe.id))&&(qe.name.toLowerCase().includes(I.toLowerCase())||qe.email.toLowerCase().includes(I.toLowerCase()))});D.useEffect(()=>{m&&!K&&V({title:m.title,companyId:m.companyId||"",value:m.value?m.value.toString():"",currency:m.currency||Es,stage:m.stage,ownerId:m.ownerId,expectedCloseDate:m.expectedCloseDate||"",description:m.description||""})},[m]);const Dt=async()=>{if(m){if(!X.title.trim()){s("Deal title is required");return}if(!X.ownerId){s("Opportunity lead is required");return}q(!0);try{const qe={title:X.title.trim(),companyId:X.companyId&&X.companyId.trim()!==""?X.companyId:null,value:parseFloat(X.value)||0,currency:X.currency||Es,stage:X.stage,pipelineType:"sales",ownerId:X.ownerId,expectedCloseDate:X.expectedCloseDate&&X.expectedCloseDate.trim()!==""?X.expectedCloseDate:null,description:X.description.trim()||null};await xb(m.id,qe);const mt={...m,...qe};l(le=>le.map(_e=>_e.id===m.id?mt:_e)),v(mt),G(!1),n("Deal updated successfully")}catch(qe){s(qe.message||"Failed to update deal")}finally{q(!1)}}},Sr=async()=>{if(!(!m||y!=="activity")){Ae(!0);try{const qe=await L6("deal",m.id);Q((qe==null?void 0:qe.data)||[])}catch(qe){console.error("[PIPELINE] Failed to fetch deal activities:",qe),Q([])}finally{Ae(!1)}}};D.useEffect(()=>{m&&y==="activity"?Sr():Q([])},[m==null?void 0:m.id,y]);const Gr=()=>{if(!m)return[];const qe=[];return m.createdAt&&qe.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${m.title}" was created${pr?` by ${pr.name}`:""}`,date:m.createdAt,icon:a.jsx(Qr,{className:"w-4 h-4"}),color:"indigo"}),qe.push({id:"stage",type:"stage",title:`Current Stage: ${m.stage}`,description:`Opportunity is currently in the ${m.stage} stage`,date:m.updatedAt||m.createdAt||new Date().toISOString(),icon:a.jsx(Jc,{className:"w-4 h-4"}),color:m.stage==="Won"?"emerald":m.stage==="Lost"?"red":"blue"}),m.value>0&&qe.push({id:"value",type:"value",title:`Deal Value: ${bd(m.value,m.currency)}`,description:`Gross contract revenue for this opportunity: ${bd(m.value,m.currency)}`,date:m.updatedAt||m.createdAt||new Date().toISOString(),icon:a.jsx(Md,{className:"w-4 h-4"}),color:"emerald"}),m.expectedCloseDate&&qe.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${m.expectedCloseDate}`,description:"Target date for closing this opportunity",date:m.expectedCloseDate,icon:a.jsx($n,{className:"w-4 h-4"}),color:"amber"}),Nr.length>0&&qe.push({id:"stakeholders",type:"stakeholder",title:`${Nr.length} Stakeholder${Nr.length>1?"s":""} Linked`,description:Nr.map(mt=>mt.name).join(", "),date:m.updatedAt||m.createdAt||new Date().toISOString(),icon:a.jsx(Zf,{className:"w-4 h-4"}),color:"purple"}),m.description&&qe.push({id:"description",type:"description",title:"Strategic Context Added",description:m.description.substring(0,100)+(m.description.length>100?"...":""),date:m.updatedAt||m.createdAt||new Date().toISOString(),icon:a.jsx(ui,{className:"w-4 h-4"}),color:"slate"}),se.forEach(mt=>{mt.activityType==="email_linked"&&qe.push({id:mt.id||`email-${mt.emailId}`,type:"email_linked",title:mt.title||"Email Linked",description:mt.description||`Email "${mt.emailSubject||"Untitled"}" from ${mt.emailSender||"Unknown"}`,date:mt.createdAt,icon:a.jsx(xa,{className:"w-4 h-4"}),color:"indigo",emailId:mt.emailId})}),qe.sort((mt,le)=>new Date(le.date).getTime()-new Date(mt.date).getTime())};return a.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[a.jsx(pk,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-900",children:(Xe==null?void 0:Xe.name)||"Loading..."}),a.jsx(fo,{className:"w-4 h-4 text-slate-400"})]}),a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[ee.length>0?ee.map(qe=>a.jsxs("button",{onClick:()=>Vt(qe.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${ze===qe.id?"text-indigo-600":"text-slate-600"}`,children:[qe.name," ",ze===qe.id&&a.jsx(Wu,{className:"w-4 h-4"})]},qe.id)):a.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsxs("button",{onClick:()=>ce(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[a.jsx(Qr,{className:"w-3 h-3"}),"Manage Pipelines"]})}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:De,onChange:qe=>We(qe.target.value),onKeyDown:qe=>qe.key==="Enter"&&gt(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),a.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsx("button",{onClick:()=>ce(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:a.jsx(GC,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[a.jsx(Qr,{className:"w-4 h-4"})," New Deal"]})]})]}),!g&&o.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&T.length===o.length,onChange:lr}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),a.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:g||ge||!Xe?a.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:a.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Xe.stages.map(qe=>{const mt=o.filter(le=>le.stage===qe);return a.jsxs("div",{onDragOver:le=>le.preventDefault(),onDrop:le=>he(le,qe),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:qe}),a.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:mt.length})]}),a.jsx(Qr,{onClick:()=>t(qe),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),a.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:mt.map(le=>{const _e=c.find(Se=>Se.id===le.companyId),we=T.includes(le.id);return a.jsxs("div",{onClick:()=>v(le),draggable:!0,onDragStart:Se=>Tt(Se,le.id),className:`bg-white p-5 rounded-2xl border ${we?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${Et===le.id?"opacity-30":""}`,children:[a.jsx("div",{className:"absolute top-3 right-3",onClick:Se=>Se.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:we,onChange:()=>R(Se=>we?Se.filter(ae=>ae!==le.id):[...Se,le.id])})}),a.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[a.jsx(ls,{src:_e==null?void 0:_e.logo,fallbackText:_e==null?void 0:_e.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),a.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:le.title})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:(_e==null?void 0:_e.name)||"Independent"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-indigo-600 font-black text-xs",children:bd(le.value,le.currency)}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:le.expectedCloseDate}),a.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},le.id)})})]},qe)})}),m&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{v(null),N(!1)}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:a.jsx(oc,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[K?a.jsx("input",{type:"text",value:X.title,onChange:qe=>V(mt=>({...mt,title:qe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:m.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[K?a.jsx("select",{value:X.stage,onChange:qe=>V(mt=>({...mt,stage:qe.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:((cn=Xe==null?void 0:Xe.stages)==null?void 0:cn.map(qe=>a.jsx("option",{value:qe,children:qe},qe)))||[]}):a.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:m.stage}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",m.id.substring(0,8)]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[K?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{G(!1),V({title:m.title,companyId:m.companyId||"",value:m.value?m.value.toString():"",currency:m.currency||Es,stage:m.stage,ownerId:m.ownerId,expectedCloseDate:m.expectedCloseDate||"",description:m.description||""})},disabled:Y,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Dt,disabled:Y||!X.title.trim()||!X.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Y?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"}),"Edit Deal"]}),a.jsx("button",{onClick:()=>{v(null),N(!1),G(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:a.jsx(Yt,{className:"w-6 h-6"})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:a.jsx(s0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:a.jsx(kd,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:a.jsx(Zf,{className:"w-4 h-4"})}].map(qe=>a.jsxs("button",{onClick:()=>{w(qe.id),N(!1),G(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${y===qe.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[qe.icon," ",qe.label]},qe.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[y==="overview"&&a.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[K?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(sv,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("select",{value:X.currency||Es,onChange:qe=>V(mt=>({...mt,currency:qe.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:yx.map(qe=>a.jsxs("option",{value:qe.code,children:[qe.code," (",qe.symbol,")"]},qe.code))}),a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:pd(X.currency||Es)}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:X.value||"",onChange:qe=>V(mt=>({...mt,value:qe.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx($n,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("input",{type:"date",value:X.expectedCloseDate,onChange:qe=>V(mt=>({...mt,expectedCloseDate:qe.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(sv,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:bd(m.value,m.currency)}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx($n,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:m.expectedCloseDate||"Not set"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ru,{className:"w-4 h-4"})," Account Association"]}),K?a.jsxs("select",{value:X.companyId,onChange:qe=>V(mt=>({...mt,companyId:qe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[a.jsx("option",{value:"",children:"Independent/Direct"}),c.map(qe=>a.jsx("option",{value:qe.id,children:qe.name},qe.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[a.jsx(ls,{src:ir==null?void 0:ir.logo,className:"w-14 h-14",fallbackText:(ir==null?void 0:ir.name)||"A",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:(ir==null?void 0:ir.name)||"Independent/Direct"}),a.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:(ir==null?void 0:ir.industry)||"Uncategorized"})]}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:a.jsx(zs,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(k5,{className:"w-4 h-4"})," Opportunity Lead"]}),K?a.jsxs("select",{value:X.ownerId,onChange:qe=>V(mt=>({...mt,ownerId:qe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[a.jsx("option",{value:"",children:"Select Owner"}),f.map(qe=>a.jsxs("option",{value:qe.id,children:[qe.name," (",qe.role,")"]},qe.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[a.jsx(ls,{src:pr==null?void 0:pr.avatar,className:"w-14 h-14",fallbackText:(pr==null?void 0:pr.name)||"U",isAvatar:!0}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:(pr==null?void 0:pr.name)||"Unassigned"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:(pr==null?void 0:pr.role)||"Teammate"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4"})," Strategic Context"]}),K?a.jsx("textarea",{value:X.description,onChange:qe=>V(mt=>({...mt,description:qe.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:m.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),a.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[a.jsx(oi,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),a.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(pa,{className:"w-6 h-6"})}),a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),a.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),a.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),y==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(kd,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),re?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const qe=Gr();return qe.length===0?a.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[a.jsx(kd,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),a.jsx("div",{className:"space-y-6",children:qe.map((mt,le)=>{const _e=pe=>{const Re={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return Re[pe]||Re.slate},we=new Date(mt.date),Se=we.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ae=we.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"relative flex items-start gap-4",children:[a.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${_e(mt.color)} flex items-center justify-center flex-shrink-0`,children:mt.icon}),a.jsx("div",{className:"flex-1 pb-6",children:a.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-black text-slate-900 text-sm",children:mt.title}),a.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[Se," ",ae]})]}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:mt.description}),mt.type==="email_linked"&&mt.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${mt.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(zs,{className:"w-3 h-3"})," View Email"]})]})})]},mt.id)})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:m.createdAt?Math.floor((new Date().getTime()-new Date(m.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:m.stage})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:Nr.length})]})]})]}),y==="stakeholders"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!b&&a.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[a.jsx(lc,{className:"w-3 h-3"})," Link Person"]})]}),b?a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),a.jsx("button",{onClick:()=>N(!1),className:"p-1 hover:bg-white rounded-lg",children:a.jsx(Yt,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search global registry...",value:I,onChange:qe=>A(qe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),a.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:jr.length>0?jr.map(qe=>{const mt=S===qe.id;return a.jsxs("button",{onClick:()=>rr(qe.id),disabled:mt||!!S,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:qe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:qe.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:qe.role})]}),mt?a.jsx(pt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):a.jsx(Qr,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},qe.id)}):a.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):Nr.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-3",children:Nr.map(qe=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:qe.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:qe.name}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:qe.role})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(m){E(qe.id);try{const mt=(m.stakeholderIds||[]).filter(_e=>_e!==qe.id);await xb(m.id,{stakeholderIds:mt});const le={...m,stakeholderIds:mt};v(le),l(_e=>_e.map(we=>we.id===m.id?le:we)),n("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{E(null)}}},disabled:_===qe.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:_===qe.id?a.jsx(pt,{className:"w-4 h-4 animate-spin text-red-500"}):a.jsx(Ar,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:a.jsx(Ea,{className:"w-5 h-5"})})]})]},qe.id))}):a.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[a.jsx(Zf,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>F(m),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:a.jsx(Ar,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(wo,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),C&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(oc,{className:"w-5 h-5 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:C.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:C.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",C.value.toLocaleString()]})]})]})]}),ir&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(ls,{src:ir.logo,fallbackText:ir.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:ir.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>F(null),disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>_r(C.id),disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),T.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:T.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:qe=>{qe.stopPropagation(),ne(!0)},disabled:z,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[z?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ar,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>R([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]})}),H&&T.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",T.length," Opportunit",T.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(qe=>T.includes(qe.id)).slice(0,5).map(qe=>(c.find(mt=>mt.id===qe.companyId),a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(oc,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:qe.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:qe.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",qe.value.toLocaleString()]})]})]})]},qe.id))),T.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",T.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ne(!1),disabled:z,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Gt,disabled:z,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:z?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${T.length} Opportunit${T.length>1?"ies":"y"}`})]})]})}),ye&&a.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[a.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>me(!1)}),a.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(GC,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),a.jsx("button",{onClick:()=>me(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),a.jsx("div",{className:"space-y-2",children:ee.map(qe=>a.jsx("button",{onClick:()=>Vt(qe.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${ze===qe.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:qe.name}),a.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[qe.stages.length," stages"]})]}),ze===qe.id&&a.jsx(Wu,{className:"w-5 h-5 text-indigo-600"})]})},qe.id))})]}),Xe&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Xe.stages.length," stages"]})]}),a.jsx("div",{className:"space-y-2",children:Xe.stages.map((qe,mt)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:mt+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold text-sm text-slate-900",children:qe}),a.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(le=>le.stage===qe).length," deals"]})]})]},qe))})]}),a.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(sv,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),a.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),a.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((qe,mt)=>qe+(mt.value||0),0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{me(!1),ce(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(pk,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),a.jsx(Ea,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),a.jsxs("button",{onClick:()=>{me(!1),xt(),n("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(Uu,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),a.jsx(Ea,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),je&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),a.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),a.jsx("div",{className:"space-y-2",children:ee.map(qe=>a.jsx("button",{onClick:()=>Vt(qe.id),className:`w-full p-3 rounded-xl border-2 text-left ${ze===qe.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:a.jsx("p",{className:"font-bold",children:qe.name})},qe.id))})]}),Xe&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),a.jsx("div",{className:"space-y-2",children:Xe.stages.map((qe,mt)=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:qe}),a.jsx("button",{onClick:()=>kt(mt),disabled:ue!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:ue===mt?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4"})})]},mt))}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("input",{type:"text",placeholder:"New stage name...",value:st,onChange:qe=>be(qe.target.value),onKeyDown:qe=>{qe.key==="Enter"&&st.trim()&&!Ue&&Ge()},disabled:Ue,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),a.jsx("button",{onClick:Ge,disabled:Ue||!st.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Ue?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Pipeline name...",value:De,onChange:qe=>We(qe.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),a.jsx("button",{onClick:gt,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),a.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:a.jsx("button",{onClick:()=>ce(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})})]})},ap={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},Hye=e=>Dl({queryKey:ap.projects(e||""),queryFn:async()=>e?(await $x(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Wye=()=>Dl({queryKey:ap.companies,queryFn:async()=>(await iu()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Vye=()=>Dl({queryKey:ap.users,queryFn:async()=>(await su()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Gye=e=>Dl({queryKey:ap.tasks(e||""),queryFn:async()=>e?(await pN(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Kye=e=>Dl({queryKey:ap.projectActivities(e||""),queryFn:async()=>{if(!e)return[];const t=await L6("project",e);return(t==null?void 0:t.data)||[]},enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),Xye=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async({id:n,data:s})=>await xR(n,s),onSuccess:async(n,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:ap.projectActivities(s.id),type:"active"})])},onError:n=>{console.error("Failed to update project:",n),r((n==null?void 0:n.message)||"Failed to update project")}})},Yye=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async n=>await gR(n),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to delete project:",n),r((n==null?void 0:n.message)||"Failed to delete project")}})},Jye=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async({id:n,archived:s})=>await xR(n,{archived:s}),onSuccess:async(n,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:ap.projectActivities(s.id)})},onError:n=>{console.error("Failed to archive/restore project:",n),r((n==null?void 0:n.message)||"Failed to update project")}})},Qye=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async n=>{await Promise.all(n.map(s=>gR(s)))},onSuccess:async(n,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to bulk delete projects:",n),r((n==null?void 0:n.message)||"Failed to delete projects")}})},Zye=({onNavigate:e,onCreateProject:t,currentUser:r})=>{var Ue,Te,ue,Oe,st;const{showSuccess:n,showError:s}=Wn(),i=(r==null?void 0:r.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=Hye(i),{data:c=[]}=Wye(),{data:u=[]}=Vye(),{data:f=[]}=Gye(i),[d,p]=D.useState(null),{data:h=[],isLoading:g}=Kye((d==null?void 0:d.id)||null),[x,m]=D.useState("active"),v=l,y=Xye(),w=Yye(),b=Jye(),N=Qye(),S=be=>{const De=f.filter(Xe=>Xe.projectId===be);if(De.length===0)return 0;const We=De.filter(Xe=>Xe.status==="Done").length;return Math.round(We/De.length*100)},[j,_]=D.useState(null),[E,I]=D.useState(null),[A,C]=D.useState(null),[F,M]=D.useState(null),[B,K]=D.useState([]),[G,Y]=D.useState(!1),[q,X]=D.useState(!1),[V,T]=D.useState(!1),[R,z]=D.useState(!1),[L,H]=D.useState(!1),[ne,se]=D.useState(""),[Q,re]=D.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Ae,ee]=D.useState(null),Me=async be=>{if(o.find(We=>We.id===be)){I(be);try{await b.mutateAsync({id:be,archived:x==="active"}),C(null),(d==null?void 0:d.id)===be&&p(null)}finally{I(null)}}},ze=async be=>{_(be);try{await w.mutateAsync(be),M(null),(d==null?void 0:d.id)===be&&p(null)}finally{_(null)}},oe=()=>{B.length===Ce.length?K([]):K(Ce.map(be=>be.id))},J=async()=>{Y(!0);try{const be=[...B];await N.mutateAsync(be),K([]),X(!1),d&&be.includes(d.id)&&p(null),n(`Successfully deleted ${be.length} project${be.length>1?"s":""}`)}catch(be){s(be.message||"Failed to delete projects")}finally{Y(!1)}},je=be=>{if(!be)return"";try{const De=new Date(be);if(isNaN(De.getTime()))return"";const We=De.getFullYear(),Xe=String(De.getMonth()+1).padStart(2,"0"),Et=String(De.getDate()).padStart(2,"0");return`${We}-${Xe}-${Et}`}catch{return""}},ce=be=>{p(be),re({title:be.title,description:be.description||"",companyId:be.companyId||"",status:be.status,engagement:be.engagement||"",startDate:je(be.startDate),endDate:je(be.endDate)}),T(!1)},ye=async()=>{if(d){if(!Q.title.trim()){s("Project title is required");return}z(!0);try{const be={title:Q.title.trim(),description:Q.description.trim(),status:Q.status,companyId:Q.companyId&&Q.companyId.trim()!==""?Q.companyId:null};await y.mutateAsync({id:d.id,data:be});const De={...d,...be};p(De),T(!1)}catch{}finally{z(!1)}}},me=async be=>{if(d){z(!0);try{await y.mutateAsync({id:d.id,data:{status:be}});const De={...d,status:be};p(De),re(We=>({...We,status:be}))}catch{}finally{z(!1)}}},ge=async(be,De)=>{ee(be);try{const We=De==="Done"?"Todo":"Done";await $w(be,{status:We}),setTasks(wt=>wt.map(Ve=>Ve.id===be?{...Ve,status:We}:Ve));const Xe=(r==null?void 0:r.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,Et=await apiGetTasks(Xe);setTasks(Et.data||[]),n(We==="Done"?"Task marked as done":"Task marked as todo")}catch(We){s(We.message||"Failed to update task status")}finally{ee(null)}},Ce=D.useMemo(()=>o.filter(be=>{const De=be.archived===!0;return x==="archived"?De:!De}),[o,x]);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{m("active"),K([])},className:`text-sm font-bold pb-1 transition-all ${x==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{m("archived"),K([])},className:`text-sm font-bold pb-1 transition-all ${x==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(be=>be.archived).length,")"]})]})]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[a.jsx(Qr,{className:"w-4 h-4"})," Create Project"]})]}),!v&&Ce.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Ce.length>0&&B.length===Ce.length,onChange:oe}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),v?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Ce.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[a.jsx(D2,{className:"w-16 h-16 text-slate-200 mb-6"}),a.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",x," projects found"]}),a.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ce.map(be=>{const De=c.find(Et=>Et.id===be.companyId),We=S(be.id),Xe=B.includes(be.id);return a.jsxs("div",{onClick:Et=>{!be.archived&&!Xe&&(Et.stopPropagation(),ce(be))},className:`bg-white rounded-3xl border ${Xe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${be.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[a.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[a.jsx("button",{onClick:Et=>{Et.stopPropagation(),C(be)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:x==="active"?"Archive":"Restore",children:x==="active"?a.jsx(Ou,{className:"w-4 h-4"}):a.jsx(L2,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Et=>{Et.stopPropagation(),M(be)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:a.jsx(Ar,{className:"w-4 h-4"})}),a.jsx("div",{onClick:Et=>Et.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${Xe?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Xe,onChange:()=>K(Et=>Xe?Et.filter(wt=>wt!==be.id):[...Et,be.id])})})]}),a.jsxs("div",{className:"p-7",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:a.jsx(Qf,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:be.title}),a.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:(De==null?void 0:De.name)||"Standalone Project"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[a.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),a.jsxs("span",{className:"text-indigo-600",children:[We,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${We}%`}})})]})]}),a.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[a.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[a.jsx(Ha,{className:"w-3.5 h-3.5"})," ",be.status]}),!be.archived&&a.jsx(Ea,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},be.id)})}),A&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:A.archived?a.jsx(L2,{className:"w-6 h-6"}):a.jsx(Ou,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:A.archived?"Restore Project?":"Archive Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:A.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:A.title}),a.jsx("p",{className:"text-xs text-slate-500",children:((Ue=c.find(be=>be.id===A.companyId))==null?void 0:Ue.name)||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>C(null),disabled:E===A.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Me(A.id),disabled:E===A.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E===A.id?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),A.archived?"Restoring...":"Archiving..."]}):A.archived?"Restore Project":"Archive Project"})]})]})}),F&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:F.title}),a.jsx("p",{className:"text-xs text-slate-500",children:((Te=c.find(be=>be.id===F.companyId))==null?void 0:Te.name)||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>M(null),disabled:j===F.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>ze(F.id),disabled:j===F.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j===F.id?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),B.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:B.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:be=>{be.stopPropagation(),X(!0)},disabled:G,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[G?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ar,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>K([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]})}),q&&B.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",B.length," Project",B.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(be=>B.includes(be.id)).slice(0,5).map(be=>{const De=c.find(We=>We.id===be.companyId);return a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(Qf,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:be.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:(De==null?void 0:De.name)||"Standalone Project"})]})]},be.id)}),B.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",B.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>X(!1),disabled:G,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:J,disabled:G,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:G?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${B.length} Project${B.length>1?"s":""}`})]})]})}),d&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!V&&!R&&(p(null),T(!1))}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[a.jsx("button",{onClick:()=>{!V&&!R&&(p(null),T(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:R,children:a.jsx(Yt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Qf,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[V?a.jsxs("div",{children:[a.jsx("input",{type:"text",value:Q.title,onChange:be=>re(De=>({...De,title:be.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),a.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[a.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:d.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${d.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":d.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":d.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:d.status}),a.jsx("span",{className:"text-xs text-slate-400",children:((ue=c.find(be=>be.id===d.companyId))==null?void 0:ue.name)||"Standalone Project"})]})]})]}),a.jsx("div",{className:"flex gap-3",children:V?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{T(!1),re({title:d.title,description:d.description||"",companyId:d.companyId||"",status:d.status,engagement:d.engagement||"",startDate:je(d.startDate),endDate:je(d.endDate)})},disabled:R,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:ye,disabled:R||!Q.title.trim()||!Q.engagement.trim()||!Q.startDate.trim()||!Q.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:R?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"}),"Edit Project"]})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(za,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),a.jsx("div",{className:"space-y-4",children:V?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Q.engagement,onChange:be=>re(De=>({...De,engagement:be.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:Q.startDate,onChange:be=>{if(re(De=>({...De,startDate:be.target.value})),be.target.value&&Q.endDate){const De=new Date(be.target.value),We=new Date(Q.endDate);!isNaN(De.getTime())&&!isNaN(We.getTime())&&De>=We}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:Q.endDate,onChange:be=>{if(re(De=>({...De,endDate:be.target.value})),Q.startDate&&be.target.value){const De=new Date(Q.startDate),We=new Date(be.target.value);!isNaN(De.getTime())&&!isNaN(We.getTime())&&De>=We}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{value:Q.description,onChange:be=>re(De=>({...De,description:be.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),a.jsxs("select",{value:Q.companyId,onChange:be=>re(De=>({...De,companyId:be.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"Standalone Project"}),c.map(be=>a.jsx("option",{value:be.id,children:be.name},be.id))]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.title})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.engagement||""})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.startDate?new Date(d.startDate).toLocaleDateString():""})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.endDate?new Date(d.endDate).toLocaleDateString():""})]})]}),d.description&&a.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:d.description})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((Oe=c.find(be=>be.id===d.companyId))==null?void 0:Oe.name)||"Standalone Project"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),a.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[S(d.id),"%"]})]})]}),d.noteImage&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(pa,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),(st=d.noteImageMimeType)!=null&&st.includes("pdf")?a.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:a.jsx(pa,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:d.noteImageName||"Document.pdf"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),a.jsxs("button",{onClick:()=>{const be=window.open();be&&be.document.write(`
                                        <html>
                                          <head>
                                            <title>${d.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${d.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[a.jsx($u,{className:"w-4 h-4"}),"View PDF"]})]})}):a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:d.noteImage,alt:d.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{se(d.noteImage||""),H(!0)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:a.jsx($u,{className:"w-5 h-5 text-indigo-600"})})})]})]})]})})]}),!V&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ha,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(be=>a.jsxs("button",{onClick:()=>me(be),disabled:R||d.status===be,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${d.status===be?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[d.status===be?a.jsx(tn,{className:"w-4 h-4"}):a.jsx(Bu,{className:"w-4 h-4"}),be]},be))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(jH,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),a.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",d.id),e("tasks"),p(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",a.jsx(Ea,{className:"w-3 h-3"})]})]}),(()=>{const be=f.filter(De=>De.projectId===d.id);return be.length===0?a.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[a.jsx(D2,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):a.jsx("div",{className:"space-y-2",children:be.map(De=>{const We=u.find(Et=>Et.id===De.assigneeId),Xe=Ae===De.id;return a.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("button",{onClick:Et=>{Et.stopPropagation(),Xe||ge(De.id,De.status)},disabled:Xe,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:Xe?a.jsx(pt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):De.status==="Done"?a.jsx(tn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):a.jsx(Bu,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),a.jsx("p",{className:`text-sm font-bold ${De.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:De.title})]}),De.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:De.description}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${De.priority==="High"?"bg-red-50 text-red-600":De.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:De.priority}),a.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:De.status}),De.dueDate&&a.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[a.jsx($n,{className:"w-3 h-3"}),De.dueDate]})]})]}),We&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:We.name.charAt(0)})})]})},De.id)})})})()]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(kd,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),g?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):h.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(xa,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:h.map((be,De)=>{const We=new Date(be.createdAt),Et=new Date().getTime()-We.getTime(),wt=Math.floor(Et/(1e3*60*60*24));let Ve="";wt===0?Ve="Today":wt===1?Ve="Yesterday":wt<7?Ve=`${wt} days ago`:wt<30?Ve=`${Math.floor(wt/7)} week${Math.floor(wt/7)>1?"s":""} ago`:Ve=`${Math.floor(wt/30)} month${Math.floor(wt/30)>1?"s":""} ago`;const xt=be.activityType==="email_linked",Tt=xt?"border-indigo-600":"border-slate-200",he=xt?"bg-indigo-600":"bg-slate-300",Ge=xt?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${Tt} shadow-xl flex items-center justify-center`,children:xt?a.jsx(xa,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${he}`})}),a.jsxs("p",{className:`text-[10px] font-black ${Ge} uppercase mb-1 tracking-widest`,children:[xt?"Email Linked":be.activityType||"Activity","  ",Ve]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:be.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:be.description||be.title}),be.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${be.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(zs,{className:"w-3 h-3"})," View Email"]})]},be.id||De)})})]})]}),a.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:a.jsxs("button",{onClick:()=>{!V&&!R&&(p(null),T(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:R,children:[a.jsx(tn,{className:"w-5 h-5"})," Close"]})})]})]}),L&&a.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>H(!1)}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[a.jsx("button",{onClick:()=>H(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:a.jsx(Yt,{className:"w-6 h-6"})}),a.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:a.jsx("img",{src:ne,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:be=>be.stopPropagation()})})]})]})]})},ebe=({onNavigate:e,companyIdFromUrl:t,onClearCompanyIdFromUrl:r})=>{const{showSuccess:n,showError:s}=Wn(),i=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[o,l]=D.useState([]),[c,u]=D.useState(!0),[f,d]=D.useState(""),[p,h]=D.useState(null),[g,x]=D.useState("date"),[m,v]=D.useState("desc"),[y,w]=D.useState([]),[b,N]=D.useState(!1),[S,j]=D.useState(!1),[_,E]=D.useState(null),[I,A]=D.useState([]),[C,F]=D.useState([]),[M,B]=D.useState("email"),[K,G]=D.useState(!1),[Y,q]=D.useState(!1),[X,V]=D.useState(null),[T,R]=D.useState(!1),[z,L]=D.useState({}),[H,ne]=D.useState([]),[se,Q]=D.useState({}),re=D.useRef(!1),Ae=async()=>{var Te;try{R(!0);const ue=await nve();console.log("[SATISFACTION] Template response:",ue),ue&&ue.success&&ue.data?V(ue.data):(console.error("[SATISFACTION] Invalid response format:",ue),s(((Te=ue==null?void 0:ue.error)==null?void 0:Te.message)||(ue==null?void 0:ue.message)||"Failed to load survey template"))}catch(ue){console.error("[SATISFACTION] Error loading template:",ue),s(ue.message||"Failed to load survey template")}finally{R(!1)}};D.useEffect(()=>{Y&&!X&&Ae()},[Y]),D.useEffect(()=>{(async()=>{try{const ue=await su(),Oe=(ue==null?void 0:ue.data)||ue||[];Array.isArray(Oe)&&ne(Oe)}catch(ue){console.error("[SATISFACTION] Failed to load users",ue)}})()},[]),D.useEffect(()=>{(async()=>{try{const ue=await iu(),Oe=(ue==null?void 0:ue.data)||ue||[];if(Array.isArray(Oe)){const st={};Oe.forEach(be=>{be.id&&(st[be.id]=be)}),Q(st)}}catch(ue){console.error("[SATISFACTION] Failed to load companies",ue)}})()},[]),D.useEffect(()=>{ee()},[]),D.useEffect(()=>{p&&J(p.id)},[p]),D.useEffect(()=>{(async()=>{if(p!=null&&p.companyId)try{const ue=await qh("",p.companyId);if(ue.success&&ue.data){const Oe={};ue.data.forEach(st=>{st.id&&(Oe[st.id]=st)}),L(Oe)}}catch(ue){console.error("[SATISFACTION] Failed to load contacts for timeline",ue)}})()},[p==null?void 0:p.companyId]),D.useEffect(()=>{if(!t||re.current||!r)return;re.current=!0;const Te=t;(async()=>{var ue;try{const Oe=await U3(Te),st=(ue=Oe==null?void 0:Oe.data)==null?void 0:ue.satisfactionRecordId;st&&h({id:st,companyId:Te,createdAt:"",createdBy:"",source:"manual"}),await Ce(Te)}catch{await Ce(Te)}finally{r()}})()},[t,r]);const ee=async()=>{try{u(!0);const Te=await Qge(f);if(Te.success&&Te.data){const ue=Te.data.map(Oe=>{var st,be;return{companyId:Oe.companyId,companyName:((st=Oe.company)==null?void 0:st.name)||"Unknown Company",latestNpsScore:Oe.latestNpsScore,npsCategory:Oe.npsCategory,accountManagerId:(be=Oe.company)==null?void 0:be.ownerId,accountManagerName:null,lastSurveyDate:Oe.lastSurveyDate,status:Oe.status||"not_yet_sent",satisfactionRecordId:Oe.id}});l(ue)}}catch(Te){s(Te.message||"Failed to load satisfaction records")}finally{u(!1)}},Me=Te=>Te==null?null:Te>=9?"Promoter":Te>=7?"Passive":"Detractor",ze=D.useMemo(()=>{const Te=[];return y.forEach(ue=>{(ue.responses||[]).forEach(Oe=>{const st=Oe.contactId?z[Oe.contactId]:null;let be="";if(Oe.answers&&Array.isArray(Oe.answers)){const De=Oe.answers.find(We=>typeof We.answer=="string"&&We.questionText&&(We.questionText.toLowerCase().includes("improve")||We.questionText.toLowerCase().includes("additional")))||Oe.answers.find(We=>typeof We.answer=="string");De&&typeof De.answer=="string"&&(be=De.answer)}Te.push({id:Oe.id,submittedAt:Oe.submittedAt,npsScore:Oe.npsScore,contactId:Oe.contactId,contactName:st==null?void 0:st.name,feedback:be})})}),Te.sort((ue,Oe)=>{const st=ue.submittedAt?new Date(ue.submittedAt).getTime():0;return(Oe.submittedAt?new Date(Oe.submittedAt).getTime():0)-st}),Te},[y,z]),oe=Te=>{if(!Te.accountManagerId||!H||H.length===0)return null;const ue=H.find(Oe=>Oe.id===Te.accountManagerId);return(ue==null?void 0:ue.name)||null},J=async Te=>{try{N(!0);const ue=await Zge(Te);ue.success&&ue.data&&w(ue.data.surveys||[])}catch(ue){s(ue.message||"Failed to load record details")}finally{N(!1)}},je=Te=>Te==null?"text-slate-400":Te>=9?"text-green-600":Te>=7?"text-yellow-600":"text-red-600",ce=Te=>Te==null?"bg-slate-100":Te>=9?"bg-green-50":Te>=7?"bg-yellow-50":"bg-red-50",ye=Te=>{const Oe={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[Te];return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Oe.color}`,children:Oe.label})},me=D.useMemo(()=>[...o.filter(ue=>ue.companyName.toLowerCase().includes(f.toLowerCase()))].sort((ue,Oe)=>{let st=0;if(g==="score"){const be=ue.latestNpsScore??-1,De=Oe.latestNpsScore??-1;st=be-De}else if(g==="date"){const be=ue.lastSurveyDate?new Date(ue.lastSurveyDate).getTime():0,De=Oe.lastSurveyDate?new Date(Oe.lastSurveyDate).getTime():0;st=be-De}else g==="status"&&(st=ue.status.localeCompare(Oe.status));return m==="asc"?st:-st}),[o,f,g,m]),ge=async()=>{var Te,ue;if(!_||C.length===0){s("Please select a company and at least one contact");return}try{G(!0);let st=(Te=(await U3(_)).data)==null?void 0:Te.satisfactionRecordId;st||(st=(await eve({companyId:_,source:"manual"})).data.id);const be=await rve({satisfactionRecordId:st,contactIds:C,deliveryMethod:M});if(M==="link"&&((ue=be.data)!=null&&ue.surveyUrl)){const De=be.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText(De).then(()=>{n(`Survey link copied to clipboard! Share: ${De}`)}).catch(()=>{n(`Survey created! Copy this link: ${De}`)}):n(`Survey created! Copy this link: ${De}`)}else n("Survey sent successfully");j(!1),F([]),ee()}catch(Oe){s(Oe.message||"Failed to send survey")}finally{G(!1)}},Ce=async Te=>{E(Te),j(!0);try{const ue=await qh("",Te);if(ue.success&&ue.data){const Oe=ue.data.filter(st=>st.email);A(Oe)}}catch(ue){s(ue.message||"Failed to load contacts")}},Ue=Te=>{if(!i)return!1;const ue=i.role==="Admin",Oe=i.id===Te.accountManagerId;return ue||Oe};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),!!i&&(i.role==="Admin"||o.some(ue=>ue.accountManagerId===i.id))?a.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[a.jsx(mk,{className:"w-4 h-4"}),"Survey Builder"]}):null]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search companies...",value:f,onChange:Te=>d(Te.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:g,onChange:Te=>x(Te.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Sort by Date"}),a.jsx("option",{value:"score",children:"Sort by Score"}),a.jsx("option",{value:"status",children:"Sort by Status"})]}),a.jsx("button",{onClick:()=>v(m==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:a.jsx(cH,{className:"w-4 h-4"})})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):me.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Sd,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):a.jsx("div",{className:"space-y-4",children:me.map(Te=>{var ue,Oe,st;return a.jsx("div",{onClick:()=>{const be={id:Te.satisfactionRecordId,companyId:Te.companyId,createdAt:"",createdBy:"",source:"manual"};h(be)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx(ls,{src:(ue=se[Te.companyId])==null?void 0:ue.logo,fallbackText:((Oe=se[Te.companyId])==null?void 0:Oe.name)||Te.companyName,className:"w-16 h-16 border border-slate-200",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:((st=se[Te.companyId])==null?void 0:st.name)||Te.companyName}),Te.latestNpsScore!==void 0&&Te.latestNpsScore!==null&&a.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-sm font-bold ${Te.latestNpsScore>=9?"bg-green-100 text-green-700":Te.latestNpsScore>=7?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["NPS ",Te.latestNpsScore]})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Te.npsCategory&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Te.npsCategory==="Promoter"?"bg-green-100 text-green-700":Te.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Te.npsCategory}),ye(Te.status),Te.lastSurveyDate&&a.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[a.jsx($n,{className:"w-3 h-3"}),new Date(Te.lastSurveyDate).toLocaleDateString()]})]}),oe(Te)&&a.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Account Manager: ",oe(Te)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Ue(Te)&&a.jsxs("button",{onClick:be=>{be.stopPropagation(),Ce(Te.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[a.jsx(Go,{className:"w-4 h-4"}),"Send Survey"]}),a.jsx(Ea,{className:"w-5 h-5 text-slate-400"})]})]})},Te.satisfactionRecordId)})})}),p&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>h(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),a.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:b?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-slate-200 rounded-2xl p-4 bg-slate-50/60",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Current NPS Score"}),ze.length===0?a.jsx("p",{className:"text-sm text-slate-500",children:"No responses yet"}):a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${ce(ze[0].npsScore)}`,children:a.jsx("span",{className:`text-3xl font-black ${je(ze[0].npsScore)}`,children:ze[0].npsScore})}),a.jsxs("div",{className:"flex flex-col gap-1",children:[Me(ze[0].npsScore)&&a.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${Me(ze[0].npsScore)==="Promoter"?"bg-green-100 text-green-700":Me(ze[0].npsScore)==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Me(ze[0].npsScore)}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Last response on"," ",ze[0].submittedAt?new Date(ze[0].submittedAt).toLocaleDateString():""]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Historical Timeline"}),ze.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No responses yet"}):a.jsx("div",{className:"space-y-3",children:ze.map(Te=>a.jsxs("div",{className:"flex items-start gap-3 border-l-2 border-slate-200 pl-4 relative",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 absolute -left-[5px] mt-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:["NPS ",Te.npsScore]}),Te.contactName&&a.jsx("span",{className:"text-[11px] text-slate-500",children:Te.contactName})]}),a.jsx("span",{className:"text-[10px] text-slate-400",children:Te.submittedAt?new Date(Te.submittedAt).toLocaleDateString():""})]}),Te.feedback&&a.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:Te.feedback})]})]},Te.id))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),y.length===0?a.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):a.jsx("div",{className:"space-y-4",children:y.map(Te=>{var ue,Oe;return a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",Te.sentAt?new Date(Te.sentAt).toLocaleDateString():""]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Te.status==="completed"?"bg-green-100 text-green-700":Te.status==="sent"?"bg-yellow-100 text-yellow-700":Te.status==="expired"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-700"}`,children:Te.status==="sent"?"Sent":Te.status==="completed"?"Completed":Te.status==="expired"?"Expired":Te.status})]}),a.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[((ue=Te.recipients)==null?void 0:ue.length)||0," recipient(s)  ",((Oe=Te.responses)==null?void 0:Oe.length)||0," response(s)"]}),Te.recipients&&Te.recipients.length>0&&a.jsxs("div",{className:"text-[11px] text-slate-500 mb-2",children:["Recipients:"," ",Te.recipients.slice(0,3).map(st=>st.email||st.contactId).join(", "),Te.recipients.length>3&&a.jsxs("span",{className:"text-slate-400",children:[" ","+",Te.recipients.length-3," more"]})]}),Te.responses&&Te.responses.length>0&&a.jsx("div",{className:"mt-3 space-y-3",children:Te.responses.map(st=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",st.npsScore]}),a.jsx("span",{className:"text-xs text-slate-500",children:new Date(st.submittedAt).toLocaleDateString()})]}),st.answers.map((be,De)=>be.questionText&&be.answer&&a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsx("span",{className:"font-medium text-slate-700",children:be.questionText}),a.jsx("p",{className:"text-slate-600 mt-1",children:String(be.answer)})]},De))]},st.id))})]},Te.id)})})]})]})})]})]}),S&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>j(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:Te=>Te.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-slate-200",children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),a.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:I.map(Te=>a.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:C.includes(Te.id),onChange:ue=>{ue.target.checked?F([...C,Te.id]):F(C.filter(Oe=>Oe!==Te.id))},className:"w-4 h-4 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:Te.name}),a.jsx("div",{className:"text-xs text-slate-500",children:Te.email})]})]},Te.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",checked:M==="email",onChange:()=>B("email"),className:"w-4 h-4 text-indigo-600"}),a.jsx(xa,{className:"w-4 h-4"}),a.jsx("span",{children:"Email"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",checked:M==="link",onChange:()=>B("link"),className:"w-4 h-4 text-indigo-600"}),a.jsx(hk,{className:"w-4 h-4"}),a.jsx("span",{children:"Copy Link"})]})]}),M==="link"&&a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),a.jsxs("button",{onClick:ge,disabled:K||C.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[K&&a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),Y&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>q(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:Te=>Te.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),a.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:T?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):X?a.jsx(tbe,{template:X,setTemplate:V,onClose:()=>q(!1),showSuccess:n,showError:s}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Cn,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),a.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),a.jsx("button",{onClick:()=>{Ae()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},tbe=({template:e,setTemplate:t,onClose:r,showSuccess:n,showError:s})=>{const[i,o]=D.useState(e),[l,c]=D.useState(!1),u=async()=>{try{c(!0),(await ave({questions:i.questions,name:i.name})).success&&(n("Survey template updated successfully"),t(i),r())}catch(g){s(g.message||"Failed to update survey template")}finally{c(!1)}},f=()=>{const g={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,g]})},d=g=>{const x=i.questions.find(m=>m.order===1);if(x&&x.id===g){s("Cannot delete Q1 (the first NPS question)");return}o({...i,questions:i.questions.filter(m=>m.id!==g).map((m,v)=>({...m,order:v+1}))})},p=(g,x)=>{o({...i,questions:i.questions.map(m=>m.id===g?{...m,...x}:m)})},h=(g,x)=>{const m=[...i.questions],v=m.findIndex(N=>N.id===g);if(v===-1)return;const y=m.find(N=>N.order===1);if(y&&y.id===g){s("Q1 must remain first");return}if(x==="up"&&v<=0){s("Cannot move question before Q1");return}const w=x==="up"?v-1:v+1;if(w<0||w>=m.length)return;[m[v],m[w]]=[m[w],m[v]];const b=m.map((N,S)=>({...N,order:S+1}));o({...i,questions:b})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:i.name||"",onChange:g=>o({...i,name:g.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),a.jsxs("button",{onClick:f,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add Question"]})]}),a.jsx("div",{className:"space-y-4",children:i.questions.map((g,x)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",g.order]}),a.jsxs("div",{className:"flex items-center gap-2",children:[x>0&&g.type!=="nps"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>h(g.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:a.jsx(Jc,{className:"w-4 h-4 text-slate-500"})}),a.jsx("button",{onClick:()=>h(g.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:a.jsx($H,{className:"w-4 h-4 text-slate-500"})})]}),!(g.order===1&&g.type==="nps")&&a.jsx("button",{onClick:()=>d(g.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:a.jsx(Yt,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),a.jsxs("select",{value:g.type,onChange:m=>p(g.id,{type:m.target.value}),disabled:g.order===1&&g.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[a.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),a.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),a.jsx("option",{value:"free_text",children:"Free Text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),a.jsx("input",{type:"text",value:g.text,onChange:m=>p(g.id,{text:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),g.type==="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Options"}),a.jsxs("div",{className:"space-y-2",children:[(g.options||[]).map((m,v)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:m,onChange:y=>{const w=[...g.options||[]];w[v]=y.target.value,p(g.id,{options:w})},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${v+1}`}),a.jsx("button",{onClick:()=>{const y=[...g.options||[]];y.splice(v,1),p(g.id,{options:y})},className:"p-2 hover:bg-red-50 rounded-lg text-red-500 transition-colors",title:"Remove option",children:a.jsx(Yt,{className:"w-4 h-4"})})]},v)),a.jsxs("button",{onClick:()=>{const m=g.options||[];p(g.id,{options:[...m,""]})},className:"w-full px-3 py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-600 hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add Option"]}),(!g.options||g.options.length===0)&&a.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:'No options yet. Click "Add Option" to add choices.'})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:g.required,onChange:m=>p(g.id,{required:m.target.checked}),disabled:g.order===1&&g.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),a.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},g.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),a.jsxs("button",{onClick:u,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},rbe=({surveyId:e})=>{const[t,r]=D.useState(null),[n,s]=D.useState(!0),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[u,f]=D.useState(null),[d,p]=D.useState({}),[h,g]=D.useState(null);D.useEffect(()=>{x()},[e]);const x=async()=>{try{s(!0);const y=await tve(e);if(y.success&&y.data){r(y.data);const w={};y.data.templateSnapshot.forEach(S=>{S.type==="nps"?w[S.id]=null:(S.type,w[S.id]="")}),p(w);const N=new URLSearchParams(window.location.search).get("contact");N?g(N):y.data.recipients&&y.data.recipients.length>0&&g(y.data.recipients[0].contactId)}else f("Survey not found")}catch(y){f(y.message||"Failed to load survey")}finally{s(!1)}},m=(y,w)=>{p(b=>({...b,[y]:w}))},v=async()=>{if(!h){f("Contact information is missing");return}const y=t.templateSnapshot.find(w=>w.type==="nps");if(y&&(d[y.id]===null||d[y.id]===void 0)){f("Please answer the NPS question (required)");return}for(const w of t.templateSnapshot)if(w.required&&(!d[w.id]||d[w.id]==="")){f(`Please answer: ${w.text}`);return}try{o(!0),f(null);const w=Object.entries(d).filter(([b,N])=>N!==null&&N!=="").map(([b,N])=>({questionId:b,answer:N}));await sve(e,{contactId:h,answers:w}),c(!0)}catch(w){f(w.message||"Failed to submit survey")}finally{o(!1)}};return n?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(pt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):u&&!t?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx(Cn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),a.jsx("p",{className:"text-slate-600",children:u})]})}):l?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[a.jsx(tn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),a.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(y=>y.type==="nps"),a.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),a.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),u&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:u})}),a.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((y,w)=>{var b;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[y.text,y.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),y.type==="nps"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>a.jsx("button",{type:"button",onClick:()=>m(y.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${d[y.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[a.jsx("span",{children:"Not at all likely"}),a.jsx("span",{children:"Extremely likely"})]})]}),y.type==="multiple_choice"&&a.jsx("div",{className:"space-y-2",children:(b=y.options)==null?void 0:b.map(N=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:y.id,value:N,checked:d[y.id]===N,onChange:S=>m(y.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-700",children:N})]},N))}),y.type==="free_text"&&a.jsx("textarea",{value:d[y.id]||"",onChange:N=>m(y.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},y.id)})}),a.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:a.jsx("button",{onClick:v,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Hw={};Hw.version="0.18.5";var KR=1252,nbe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],U6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},z6=function(e){nbe.indexOf(e)!=-1&&(KR=U6[0]=e)};function abe(){z6(1252)}var Gc=function(e){z6(e)};function q6(){Gc(1200),abe()}function h8(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function sbe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function XR(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Wg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?sbe(e.slice(2)):t==254&&r==255?XR(e.slice(2)):t==65279?e.slice(1):e},wb=function(t){return String.fromCharCode(t)},p8=function(t){return String.fromCharCode(t)},j1,Uf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function k1(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,s=e.charCodeAt(u++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Uf.charAt(i)+Uf.charAt(o)+Uf.charAt(l)+Uf.charAt(c);return t}function Ol(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Uf.indexOf(e.charAt(u++)),o=Uf.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Uf.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Uf.indexOf(e.charAt(u++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var ln=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Gd=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function o0(e){return ln?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function m8(e){return ln?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Nl=function(t){return ln?Gd(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function xN(e){if(typeof ArrayBuffer>"u")return Nl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function N0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function ibe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function H6(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return H6(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ci=ln?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Gd(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function obe(e){for(var t=[],r=0,n=e.length+250,s=o0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=o0(65535),n=65530)}return t.push(s.slice(0,r)),ci(t)}var No=/\u0000/g,Vg=/[\u0001-\u0006]/g;function jm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Kc(e,t){var r=""+e;return r.length>=t?r:os("0",t-r.length)+r}function W6(e,t){var r=""+e;return r.length>=t?r:os(" ",t-r.length)+r}function Ww(e,t){var r=""+e;return r.length>=t?r:r+os(" ",t-r.length)}function lbe(e,t){var r=""+Math.round(e);return r.length>=t?r:os("0",t-r.length)+r}function cbe(e,t){var r=""+e;return r.length>=t?r:os("0",t-r.length)+r}var x8=Math.pow(2,32);function Up(e,t){if(e>x8||e<-x8)return lbe(e,t);var r=Math.round(e);return cbe(r,t)}function Vw(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var g8=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],qj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ube(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Rr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},v8={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},dbe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Gw(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,u=0,f=0,d=Math.floor(s);u<t&&(d=Math.floor(s),l=d*o+i,f=d*u+c,!(s-d<5e-8));)s=1/(s-d),i=o,o=l,c=u,u=f;if(f>t&&(u>t?(f=c,l=i):(f=u,l=o)),!r)return[0,n*l,f];var p=Math.floor(n*l/f);return[p,n*l-p*f,f]}function uh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=gbe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var YR=new Date(1899,11,31,0,0,0),fbe=YR.getTime(),hbe=new Date(1900,2,1,0,0,0);function JR(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=hbe&&(r+=24*60*60*1e3),(r-(fbe+(e.getTimezoneOffset()-YR.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function V6(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function pbe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function mbe(e){var t=e<0?12:11,r=V6(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function xbe(e){var t=V6(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function S1(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=mbe(e):t===10?r=e.toFixed(10).substr(0,12):r=xbe(e),V6(pbe(r.toUpperCase()))}function Vh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):S1(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return pc(14,JR(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function gbe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function vbe(e,t,r,n){var s="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return qj[r.m-1][1];case 5:return qj[r.m-1][0];default:return qj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return g8[r.q][0];default:return g8[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Kc(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Kc(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var f=u>0?Kc(c,u):"";return f}function zf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var QR=/%/g;function ybe(e,t,r){var n=t.replace(QR,""),s=t.length-n.length;return Ed(e,n,r*Math.pow(10,2*s))+os("%",s)}function bbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ed(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function ZR(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+ZR(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,f){return c+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var eB=/# (\?+)( ?)\/( ?)(\d+)/;function wbe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?os(" ",e[1].length+1+e[4].length):W6(o,e[1].length)+e[2]+"/"+e[3]+Kc(l,e[4].length))}function Nbe(e,t,r){return r+(t===0?"":""+t)+os(" ",e[1].length+2+e[4].length)}var tB=/^#*0*\.([0#]+)/,rB=/\).*[0#]/,nB=/\(###\) ###\\?-####/;function mo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function y8(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function b8(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function jbe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function kbe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Kl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(rB)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Kl("n",n,r):"("+Kl("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return bbe(e,t,r);if(t.indexOf("%")!==-1)return ybe(e,t,r);if(t.indexOf("E")!==-1)return ZR(t,r);if(t.charCodeAt(0)===36)return"$"+Kl(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Up(c,t.length);if(t.match(/^[#?]+$/))return s=Up(r,0),s==="0"&&(s=""),s.length>t.length?s:mo(t.substr(0,t.length-s.length))+s;if(i=t.match(eB))return wbe(i,c,u);if(t.match(/^#+0+$/))return u+Up(c,t.length-t.indexOf("0"));if(i=t.match(tB))return s=y8(r,i[1].length).replace(/^([^\.]+)$/,"$1."+mo(i[1])).replace(/\.$/,"."+mo(i[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+os("0",mo(i[1]).length-x.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+y8(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+zf(Up(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Kl(e,t,-r):zf(""+(Math.floor(r)+jbe(r,i[1].length)))+"."+Kc(b8(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Kl(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jm(Kl(e,t.replace(/[\\-]/g,""),r)),o=0,jm(jm(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<s.length?s.charAt(o++):g==="0"?"0":""}));if(t.match(nB))return s=Kl(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Gw(c,Math.pow(10,o)-1,!1),s=""+u,f=Ed("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Ww(l[2],o),f.length<i[4].length&&(f=mo(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Gw(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?W6(l[1],o)+i[2]+"/"+i[3]+Ww(l[2],o):os(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Up(r,0),t.length<=s.length?s:mo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var d=t.indexOf(".")-o,p=t.length-s.length-d;return mo(t.substr(0,d)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=b8(r,i[1].length),r<0?"-"+Kl(e,t,-r):zf(kbe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Kc(0,3-g.length):"")+g})+"."+Kc(o,i[1].length);switch(t){case"###,##0.00":return Kl(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=zf(Up(c,0));return h!=="0"?u+h:"";case"###,###.00":return Kl(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Kl(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Sbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ed(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function _be(e,t,r){var n=t.replace(QR,""),s=t.length-n.length;return Ed(e,n,r*Math.pow(10,2*s))+os("%",s)}function aB(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+aB(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,f){return c+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function wu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(rB)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wu("n",n,r):"("+wu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Sbe(e,t,r);if(t.indexOf("%")!==-1)return _be(e,t,r);if(t.indexOf("E")!==-1)return aB(t,r);if(t.charCodeAt(0)===36)return"$"+wu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Kc(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:mo(t.substr(0,t.length-s.length))+s;if(i=t.match(eB))return Nbe(i,c,u);if(t.match(/^#+0+$/))return u+Kc(c,t.length-t.indexOf("0"));if(i=t.match(tB))return s=(""+r).replace(/^([^\.]+)$/,"$1."+mo(i[1])).replace(/\.$/,"."+mo(i[1])),s=s.replace(/\.(\d*)$/,function(g,x){return"."+x+os("0",mo(i[1]).length-x.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+zf(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wu(e,t,-r):zf(""+r)+"."+os("0",i[1].length);if(i=t.match(/^#,#*,#0/))return wu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jm(wu(e,t.replace(/[\\-]/g,""),r)),o=0,jm(jm(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<s.length?s.charAt(o++):g==="0"?"0":""}));if(t.match(nB))return s=wu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Gw(c,Math.pow(10,o)-1,!1),s=""+u,f=Ed("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Ww(l[2],o),f.length<i[4].length&&(f=mo(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Gw(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?W6(l[1],o)+i[2]+"/"+i[3]+Ww(l[2],o):os(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:mo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var d=t.indexOf(".")-o,p=t.length-s.length-d;return mo(t.substr(0,d)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+wu(e,t,-r):zf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Kc(0,3-g.length):"")+g})+"."+Kc(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=zf(""+c);return h!=="0"?u+h:"";default:if(t.match(/\.[0#?]*$/))return wu(e,t.slice(0,t.lastIndexOf(".")),r)+mo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ed(e,t,r){return(r|0)===r?wu(e,t,r):Kl(e,t,r)}function Abe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var sB=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function zx(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Vw(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(sB))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Cbe(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",u,f,d,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Vw(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(d=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++o;break;case"\\":var h=e.charAt(++o),g=h==="("||h===")"?h:"t";s[s.length]={t:g,v:h},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=uh(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=uh(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var x={t:l,v:l};if(u==null&&(u=uh(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",o+=5,p="h"):(x.t="t",++o),u==null&&x.t==="T")return"";s[s.length]=x,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(sB)){if(u==null&&(u=uh(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",zx(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var m=0,v=0,y;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,c="h",m<1&&(m=1);break;case"s":(y=s[o].v.match(/\.0+$/))&&(v=Math.max(v,y[0].length-1)),m<3&&(m=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&s[o].v.match(/[Hh]/)&&(m=1),m<2&&s[o].v.match(/[Mm]/)&&(m=2),m<3&&s[o].v.match(/[Ss]/)&&(m=3)}switch(m){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",b;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=vbe(s[o].t.charCodeAt(0),s[o].v,u,v),s[o].t="t";break;case"n":case"?":for(b=o+1;s[b]!=null&&((l=s[b].t)==="?"||l==="D"||(l===" "||l==="t")&&s[b+1]!=null&&(s[b+1].t==="?"||s[b+1].t==="t"&&s[b+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[b].v==="/"||s[b].v===" "&&s[b+1]!=null&&s[b+1].t=="?"));)s[o].v+=s[b].v,s[b]={v:"",t:";"},++b;w+=s[o].v,o=b-1;break;case"G":s[o].t="t",s[o].v=Vh(t,r);break}var N="",S,j;if(w.length>0){w.charCodeAt(0)==40?(S=t<0&&w.charCodeAt(0)===45?-t:t,j=Ed("n",w,S)):(S=t<0&&n>1?-t:t,j=Ed("n",w,S),S<0&&s[0]&&s[0].t=="t"&&(j=j.substr(1),s[0].v="-"+s[0].v)),b=j.length-1;var _=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){_=o;break}var E=s.length;if(_===s.length&&j.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(b>=s[o].v.length-1?(b-=s[o].v.length,s[o].v=j.substr(b+1,s[o].v.length)):b<0?s[o].v="":(s[o].v=j.substr(0,b+1),b=-1),s[o].t="t",E=o);b>=0&&E<s.length&&(s[E].v=j.substr(0,b+1)+s[E].v)}else if(_!==s.length&&j.indexOf("E")===-1){for(b=j.indexOf(".")-1,o=_;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===_?s[o].v.indexOf(".")-1:s[o].v.length-1,N=s[o].v.substr(f+1);f>=0;--f)b>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(N=j.charAt(b--)+N);s[o].v=N,s[o].t="t",E=o}for(b>=0&&E<s.length&&(s[E].v=j.substr(0,b+1)+s[E].v),b=j.indexOf(".")+1,o=_;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==_)){for(f=s[o].v.indexOf(".")>-1&&o===_?s[o].v.indexOf(".")+1:0,N=s[o].v.substr(0,f);f<s[o].v.length;++f)b<j.length&&(N+=j.charAt(b++));s[o].v=N,s[o].t="t",E=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(S=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Ed(s[o].t,s[o].v,S),s[o].t="t");var I="";for(o=0;o!==s.length;++o)s[o]!=null&&(I+=s[o].v);return I}var w8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function N8(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Ebe(e,t){var r=Abe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(w8),l=r[1].match(w8);return N8(t,o)?[n,r[0]]:N8(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function pc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Rr)[e],n==null&&(n=r.table&&r.table[v8[e]]||Rr[v8[e]]),n==null&&(n=dbe[e]||"General");break}if(Vw(n,0))return Vh(t,r);t instanceof Date&&(t=JR(t,r.date1904));var s=Ebe(n,t);if(Vw(s[1]))return Vh(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Cbe(s[1],t,r,s[0])}function Td(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Rr[r]==null){t<0&&(t=r);continue}if(Rr[r]==e){t=r;break}}t<0&&(t=391)}return Rr[t]=e,t}function gN(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Td(e[t],t)}function qx(){Rr=ube()}var Tbe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},iB=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Obe(e){var t=typeof e=="number"?Rr[e]:e;return t=t.replace(iB,"(\\d+)"),new RegExp("^"+t+"$")}function Pbe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(iB)||[]).forEach(function(d,p){var h=parseInt(r[p+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:s=h;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&s==-1&&i==-1?f:u+"T"+f}var Ibe=function(){var e={};e.version="1.2.0";function t(){for(var j=0,_=new Array(256),E=0;E!=256;++E)j=E,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,_[E]=j;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function n(j){var _=0,E=0,I=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(I=0;I!=256;++I)A[I]=j[I];for(I=0;I!=256;++I)for(E=j[I],_=256+I;_<4096;_+=256)E=A[_]=E>>>8^j[E&255];var C=[];for(I=1;I!=16;++I)C[I-1]=typeof Int32Array<"u"?A.subarray(I*256,I*256+256):A.slice(I*256,I*256+256);return C}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],u=s[4],f=s[5],d=s[6],p=s[7],h=s[8],g=s[9],x=s[10],m=s[11],v=s[12],y=s[13],w=s[14];function b(j,_){for(var E=_^-1,I=0,A=j.length;I<A;)E=E>>>8^r[(E^j.charCodeAt(I++))&255];return~E}function N(j,_){for(var E=_^-1,I=j.length-15,A=0;A<I;)E=w[j[A++]^E&255]^y[j[A++]^E>>8&255]^v[j[A++]^E>>16&255]^m[j[A++]^E>>>24]^x[j[A++]]^g[j[A++]]^h[j[A++]]^p[j[A++]]^d[j[A++]]^f[j[A++]]^u[j[A++]]^c[j[A++]]^l[j[A++]]^o[j[A++]]^i[j[A++]]^r[j[A++]];for(I+=15;A<I;)E=E>>>8^r[(E^j[A++])&255];return~E}function S(j,_){for(var E=_^-1,I=0,A=j.length,C=0,F=0;I<A;)C=j.charCodeAt(I++),C<128?E=E>>>8^r[(E^C)&255]:C<2048?(E=E>>>8^r[(E^(192|C>>6&31))&255],E=E>>>8^r[(E^(128|C&63))&255]):C>=55296&&C<57344?(C=(C&1023)+64,F=j.charCodeAt(I++)&1023,E=E>>>8^r[(E^(240|C>>8&7))&255],E=E>>>8^r[(E^(128|C>>2&63))&255],E=E>>>8^r[(E^(128|F>>6&15|(C&3)<<4))&255],E=E>>>8^r[(E^(128|F&63))&255]):(E=E>>>8^r[(E^(224|C>>12&15))&255],E=E>>>8^r[(E^(128|C>>6&63))&255],E=E>>>8^r[(E^(128|C&63))&255]);return~E}return e.table=r,e.bstr=b,e.buf=N,e.str=S,e}(),Pr=function(){var t={};t.version="1.2.1";function r(le,_e){for(var we=le.split("/"),Se=_e.split("/"),ae=0,pe=0,Re=Math.min(we.length,Se.length);ae<Re;++ae){if(pe=we[ae].length-Se[ae].length)return pe;if(we[ae]!=Se[ae])return we[ae]<Se[ae]?-1:1}return we.length-Se.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var _e=le.lastIndexOf("/");return _e===-1?le:le.slice(0,_e+1)}function s(le){if(le.charAt(le.length-1)=="/")return s(le.slice(0,-1));var _e=le.lastIndexOf("/");return _e===-1?le:le.slice(_e+1)}function i(le,_e){typeof _e=="string"&&(_e=new Date(_e));var we=_e.getHours();we=we<<6|_e.getMinutes(),we=we<<5|_e.getSeconds()>>>1,le.write_shift(2,we);var Se=_e.getFullYear()-1980;Se=Se<<4|_e.getMonth()+1,Se=Se<<5|_e.getDate(),le.write_shift(2,Se)}function o(le){var _e=le.read_shift(2)&65535,we=le.read_shift(2)&65535,Se=new Date,ae=we&31;we>>>=5;var pe=we&15;we>>>=4,Se.setMilliseconds(0),Se.setFullYear(we+1980),Se.setMonth(pe-1),Se.setDate(ae);var Re=_e&31;_e>>>=5;var Ye=_e&63;return _e>>>=6,Se.setHours(_e),Se.setMinutes(Ye),Se.setSeconds(Re<<1),Se}function l(le){Ni(le,0);for(var _e={},we=0;le.l<=le.length-4;){var Se=le.read_shift(2),ae=le.read_shift(2),pe=le.l+ae,Re={};switch(Se){case 21589:we=le.read_shift(1),we&1&&(Re.mtime=le.read_shift(4)),ae>5&&(we&2&&(Re.atime=le.read_shift(4)),we&4&&(Re.ctime=le.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}le.l=pe,_e[Se]=Re}return _e}var c;function u(){return c||(c={})}function f(le,_e){if(le[0]==80&&le[1]==75)return gt(le,_e);if((le[0]|32)==109&&(le[1]|32)==105)return jr(le,_e);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var we=3,Se=512,ae=0,pe=0,Re=0,Ye=0,Je=0,Qe=[],Be=le.slice(0,512);Ni(Be,0);var ke=d(Be);switch(we=ke[0],we){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(ke[1]==0)return gt(le,_e);default:throw new Error("Major Version: Expected 3 or 4 saw "+we)}Se!==512&&(Be=le.slice(0,Se),Ni(Be,28));var He=le.slice(0,Se);p(Be,we);var at=Be.read_shift(4,"i");if(we===3&&at!==0)throw new Error("# Directory Sectors: Expected 0 saw "+at);Be.l+=4,Re=Be.read_shift(4,"i"),Be.l+=4,Be.chk("00100000","Mini Stream Cutoff Size: "),Ye=Be.read_shift(4,"i"),ae=Be.read_shift(4,"i"),Je=Be.read_shift(4,"i"),pe=Be.read_shift(4,"i");for(var ht=-1,jt=0;jt<109&&(ht=Be.read_shift(4,"i"),!(ht<0));++jt)Qe[jt]=ht;var Bt=h(le,Se);m(Je,pe,Bt,Se,Qe);var Jt=y(Bt,Re,Qe,Se);Jt[Re].name="!Directory",ae>0&&Ye!==F&&(Jt[Ye].name="!MiniFAT"),Jt[Qe[0]].name="!FAT",Jt.fat_addrs=Qe,Jt.ssz=Se;var Tr={},En=[],bs=[],_n=[];w(Re,Jt,Bt,En,ae,Tr,bs,Ye),g(bs,_n,En),En.shift();var Is={FileIndex:bs,FullPaths:_n};return _e&&_e.raw&&(Is.raw={header:He,sectors:Bt}),Is}function d(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(M,"Header Signature: "),le.l+=16;var _e=le.read_shift(2,"u");return[le.read_shift(2,"u"),_e]}function p(le,_e){var we=9;switch(le.l+=2,we=le.read_shift(2)){case 9:if(_e!=3)throw new Error("Sector Shift: Expected 9 saw "+we);break;case 12:if(_e!=4)throw new Error("Sector Shift: Expected 12 saw "+we);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+we)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function h(le,_e){for(var we=Math.ceil(le.length/_e)-1,Se=[],ae=1;ae<we;++ae)Se[ae-1]=le.slice(ae*_e,(ae+1)*_e);return Se[we-1]=le.slice(we*_e),Se}function g(le,_e,we){for(var Se=0,ae=0,pe=0,Re=0,Ye=0,Je=we.length,Qe=[],Be=[];Se<Je;++Se)Qe[Se]=Be[Se]=Se,_e[Se]=we[Se];for(;Ye<Be.length;++Ye)Se=Be[Ye],ae=le[Se].L,pe=le[Se].R,Re=le[Se].C,Qe[Se]===Se&&(ae!==-1&&Qe[ae]!==ae&&(Qe[Se]=Qe[ae]),pe!==-1&&Qe[pe]!==pe&&(Qe[Se]=Qe[pe])),Re!==-1&&(Qe[Re]=Se),ae!==-1&&Se!=Qe[Se]&&(Qe[ae]=Qe[Se],Be.lastIndexOf(ae)<Ye&&Be.push(ae)),pe!==-1&&Se!=Qe[Se]&&(Qe[pe]=Qe[Se],Be.lastIndexOf(pe)<Ye&&Be.push(pe));for(Se=1;Se<Je;++Se)Qe[Se]===Se&&(pe!==-1&&Qe[pe]!==pe?Qe[Se]=Qe[pe]:ae!==-1&&Qe[ae]!==ae&&(Qe[Se]=Qe[ae]));for(Se=1;Se<Je;++Se)if(le[Se].type!==0){if(Ye=Se,Ye!=Qe[Ye])do Ye=Qe[Ye],_e[Se]=_e[Ye]+"/"+_e[Se];while(Ye!==0&&Qe[Ye]!==-1&&Ye!=Qe[Ye]);Qe[Se]=-1}for(_e[0]+="/",Se=1;Se<Je;++Se)le[Se].type!==2&&(_e[Se]+="/")}function x(le,_e,we){for(var Se=le.start,ae=le.size,pe=[],Re=Se;we&&ae>0&&Re>=0;)pe.push(_e.slice(Re*C,Re*C+C)),ae-=C,Re=Z0(we,Re*4);return pe.length===0?Nt(0):ci(pe).slice(0,le.size)}function m(le,_e,we,Se,ae){var pe=F;if(le===F){if(_e!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Re=we[le],Ye=(Se>>>2)-1;if(!Re)return;for(var Je=0;Je<Ye&&(pe=Z0(Re,Je*4))!==F;++Je)ae.push(pe);m(Z0(Re,Se-4),_e-1,we,Se,ae)}}function v(le,_e,we,Se,ae){var pe=[],Re=[];ae||(ae=[]);var Ye=Se-1,Je=0,Qe=0;for(Je=_e;Je>=0;){ae[Je]=!0,pe[pe.length]=Je,Re.push(le[Je]);var Be=we[Math.floor(Je*4/Se)];if(Qe=Je*4&Ye,Se<4+Qe)throw new Error("FAT boundary crossed: "+Je+" 4 "+Se);if(!le[Be])break;Je=Z0(le[Be],Qe)}return{nodes:pe,data:D8([Re])}}function y(le,_e,we,Se){var ae=le.length,pe=[],Re=[],Ye=[],Je=[],Qe=Se-1,Be=0,ke=0,He=0,at=0;for(Be=0;Be<ae;++Be)if(Ye=[],He=Be+_e,He>=ae&&(He-=ae),!Re[He]){Je=[];var ht=[];for(ke=He;ke>=0;){ht[ke]=!0,Re[ke]=!0,Ye[Ye.length]=ke,Je.push(le[ke]);var jt=we[Math.floor(ke*4/Se)];if(at=ke*4&Qe,Se<4+at)throw new Error("FAT boundary crossed: "+ke+" 4 "+Se);if(!le[jt]||(ke=Z0(le[jt],at),ht[ke]))break}pe[He]={nodes:Ye,data:D8([Je])}}return pe}function w(le,_e,we,Se,ae,pe,Re,Ye){for(var Je=0,Qe=Se.length?2:0,Be=_e[le].data,ke=0,He=0,at;ke<Be.length;ke+=128){var ht=Be.slice(ke,ke+128);Ni(ht,64),He=ht.read_shift(2),at=Z6(ht,0,He-Qe),Se.push(at);var jt={name:at,type:ht.read_shift(1),color:ht.read_shift(1),L:ht.read_shift(4,"i"),R:ht.read_shift(4,"i"),C:ht.read_shift(4,"i"),clsid:ht.read_shift(16),state:ht.read_shift(4,"i"),start:0,size:0},Bt=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Bt!==0&&(jt.ct=b(ht,ht.l-8));var Jt=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Jt!==0&&(jt.mt=b(ht,ht.l-8)),jt.start=ht.read_shift(4,"i"),jt.size=ht.read_shift(4,"i"),jt.size<0&&jt.start<0&&(jt.size=jt.type=0,jt.start=F,jt.name=""),jt.type===5?(Je=jt.start,ae>0&&Je!==F&&(_e[Je].name="!StreamData")):jt.size>=4096?(jt.storage="fat",_e[jt.start]===void 0&&(_e[jt.start]=v(we,jt.start,_e.fat_addrs,_e.ssz)),_e[jt.start].name=jt.name,jt.content=_e[jt.start].data.slice(0,jt.size)):(jt.storage="minifat",jt.size<0?jt.size=0:Je!==F&&jt.start!==F&&_e[Je]&&(jt.content=x(jt,_e[Je].data,(_e[Ye]||{}).data))),jt.content&&Ni(jt.content,0),pe[at]=jt,Re.push(jt)}}function b(le,_e){return new Date((bl(le,_e+4)/1e7*Math.pow(2,32)+bl(le,_e)/1e7-11644473600)*1e3)}function N(le,_e){return u(),f(c.readFileSync(le),_e)}function S(le,_e){var we=_e&&_e.type;switch(we||ln&&Buffer.isBuffer(le)&&(we="buffer"),we||"base64"){case"file":return N(le,_e);case"base64":return f(Nl(Ol(le)),_e);case"binary":return f(Nl(le),_e)}return f(le,_e)}function j(le,_e){var we=_e||{},Se=we.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=Se+"/",le.FileIndex[0]={name:Se,type:5}),we.CLSID&&(le.FileIndex[0].clsid=we.CLSID),_(le)}function _(le){var _e="Sh33tJ5";if(!Pr.find(le,"/"+_e)){var we=Nt(4);we[0]=55,we[1]=we[3]=50,we[2]=54,le.FileIndex.push({name:_e,type:2,content:we,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+_e),E(le)}}function E(le,_e){j(le);for(var we=!1,Se=!1,ae=le.FullPaths.length-1;ae>=0;--ae){var pe=le.FileIndex[ae];switch(pe.type){case 0:Se?we=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(pe.R*pe.L*pe.C)&&(we=!0),pe.R>-1&&pe.L>-1&&pe.R==pe.L&&(we=!0);break;default:we=!0;break}}if(!(!we&&!_e)){var Re=new Date(1987,1,19),Ye=0,Je=Object.create?Object.create(null):{},Qe=[];for(ae=0;ae<le.FullPaths.length;++ae)Je[le.FullPaths[ae]]=!0,le.FileIndex[ae].type!==0&&Qe.push([le.FullPaths[ae],le.FileIndex[ae]]);for(ae=0;ae<Qe.length;++ae){var Be=n(Qe[ae][0]);Se=Je[Be],Se||(Qe.push([Be,{name:s(Be).replace("/",""),type:1,clsid:K,ct:Re,mt:Re,content:null}]),Je[Be]=!0)}for(Qe.sort(function(at,ht){return r(at[0],ht[0])}),le.FullPaths=[],le.FileIndex=[],ae=0;ae<Qe.length;++ae)le.FullPaths[ae]=Qe[ae][0],le.FileIndex[ae]=Qe[ae][1];for(ae=0;ae<Qe.length;++ae){var ke=le.FileIndex[ae],He=le.FullPaths[ae];if(ke.name=s(He).replace("/",""),ke.L=ke.R=ke.C=-(ke.color=1),ke.size=ke.content?ke.content.length:0,ke.start=0,ke.clsid=ke.clsid||K,ae===0)ke.C=Qe.length>1?1:-1,ke.size=0,ke.type=5;else if(He.slice(-1)=="/"){for(Ye=ae+1;Ye<Qe.length&&n(le.FullPaths[Ye])!=He;++Ye);for(ke.C=Ye>=Qe.length?-1:Ye,Ye=ae+1;Ye<Qe.length&&n(le.FullPaths[Ye])!=n(He);++Ye);ke.R=Ye>=Qe.length?-1:Ye,ke.type=1}else n(le.FullPaths[ae+1]||"")==n(He)&&(ke.R=ae+1),ke.type=2}}}function I(le,_e){var we=_e||{};if(we.fileType=="mad")return Dt(le,we);switch(E(le),we.fileType){case"zip":return _r(le,we)}var Se=function(at){for(var ht=0,jt=0,Bt=0;Bt<at.FileIndex.length;++Bt){var Jt=at.FileIndex[Bt];if(Jt.content){var Tr=Jt.content.length;Tr>0&&(Tr<4096?ht+=Tr+63>>6:jt+=Tr+511>>9)}}for(var En=at.FullPaths.length+3>>2,bs=ht+7>>3,_n=ht+127>>7,Is=bs+jt+En+_n,la=Is+127>>7,Xa=la<=109?0:Math.ceil((la-109)/127);Is+la+Xa+127>>7>la;)Xa=++la<=109?0:Math.ceil((la-109)/127);var ga=[1,Xa,la,_n,En,jt,ht,0];return at.FileIndex[0].size=ht<<6,ga[7]=(at.FileIndex[0].start=ga[0]+ga[1]+ga[2]+ga[3]+ga[4]+ga[5])+(ga[6]+7>>3),ga}(le),ae=Nt(Se[7]<<9),pe=0,Re=0;{for(pe=0;pe<8;++pe)ae.write_shift(1,B[pe]);for(pe=0;pe<8;++pe)ae.write_shift(2,0);for(ae.write_shift(2,62),ae.write_shift(2,3),ae.write_shift(2,65534),ae.write_shift(2,9),ae.write_shift(2,6),pe=0;pe<3;++pe)ae.write_shift(2,0);for(ae.write_shift(4,0),ae.write_shift(4,Se[2]),ae.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),ae.write_shift(4,0),ae.write_shift(4,4096),ae.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:F),ae.write_shift(4,Se[3]),ae.write_shift(-4,Se[1]?Se[0]-1:F),ae.write_shift(4,Se[1]),pe=0;pe<109;++pe)ae.write_shift(-4,pe<Se[2]?Se[1]+pe:-1)}if(Se[1])for(Re=0;Re<Se[1];++Re){for(;pe<236+Re*127;++pe)ae.write_shift(-4,pe<Se[2]?Se[1]+pe:-1);ae.write_shift(-4,Re===Se[1]-1?F:Re+1)}var Ye=function(at){for(Re+=at;pe<Re-1;++pe)ae.write_shift(-4,pe+1);at&&(++pe,ae.write_shift(-4,F))};for(Re=pe=0,Re+=Se[1];pe<Re;++pe)ae.write_shift(-4,G.DIFSECT);for(Re+=Se[2];pe<Re;++pe)ae.write_shift(-4,G.FATSECT);Ye(Se[3]),Ye(Se[4]);for(var Je=0,Qe=0,Be=le.FileIndex[0];Je<le.FileIndex.length;++Je)Be=le.FileIndex[Je],Be.content&&(Qe=Be.content.length,!(Qe<4096)&&(Be.start=Re,Ye(Qe+511>>9)));for(Ye(Se[6]+7>>3);ae.l&511;)ae.write_shift(-4,G.ENDOFCHAIN);for(Re=pe=0,Je=0;Je<le.FileIndex.length;++Je)Be=le.FileIndex[Je],Be.content&&(Qe=Be.content.length,!(!Qe||Qe>=4096)&&(Be.start=Re,Ye(Qe+63>>6)));for(;ae.l&511;)ae.write_shift(-4,G.ENDOFCHAIN);for(pe=0;pe<Se[4]<<2;++pe){var ke=le.FullPaths[pe];if(!ke||ke.length===0){for(Je=0;Je<17;++Je)ae.write_shift(4,0);for(Je=0;Je<3;++Je)ae.write_shift(4,-1);for(Je=0;Je<12;++Je)ae.write_shift(4,0);continue}Be=le.FileIndex[pe],pe===0&&(Be.start=Be.size?Be.start-1:F);var He=pe===0&&we.root||Be.name;if(Qe=2*(He.length+1),ae.write_shift(64,He,"utf16le"),ae.write_shift(2,Qe),ae.write_shift(1,Be.type),ae.write_shift(1,Be.color),ae.write_shift(-4,Be.L),ae.write_shift(-4,Be.R),ae.write_shift(-4,Be.C),Be.clsid)ae.write_shift(16,Be.clsid,"hex");else for(Je=0;Je<4;++Je)ae.write_shift(4,0);ae.write_shift(4,Be.state||0),ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(4,Be.start),ae.write_shift(4,Be.size),ae.write_shift(4,0)}for(pe=1;pe<le.FileIndex.length;++pe)if(Be=le.FileIndex[pe],Be.size>=4096)if(ae.l=Be.start+1<<9,ln&&Buffer.isBuffer(Be.content))Be.content.copy(ae,ae.l,0,Be.size),ae.l+=Be.size+511&-512;else{for(Je=0;Je<Be.size;++Je)ae.write_shift(1,Be.content[Je]);for(;Je&511;++Je)ae.write_shift(1,0)}for(pe=1;pe<le.FileIndex.length;++pe)if(Be=le.FileIndex[pe],Be.size>0&&Be.size<4096)if(ln&&Buffer.isBuffer(Be.content))Be.content.copy(ae,ae.l,0,Be.size),ae.l+=Be.size+63&-64;else{for(Je=0;Je<Be.size;++Je)ae.write_shift(1,Be.content[Je]);for(;Je&63;++Je)ae.write_shift(1,0)}if(ln)ae.l=ae.length;else for(;ae.l<ae.length;)ae.write_shift(1,0);return ae}function A(le,_e){var we=le.FullPaths.map(function(Je){return Je.toUpperCase()}),Se=we.map(function(Je){var Qe=Je.split("/");return Qe[Qe.length-(Je.slice(-1)=="/"?2:1)]}),ae=!1;_e.charCodeAt(0)===47?(ae=!0,_e=we[0].slice(0,-1)+_e):ae=_e.indexOf("/")!==-1;var pe=_e.toUpperCase(),Re=ae===!0?we.indexOf(pe):Se.indexOf(pe);if(Re!==-1)return le.FileIndex[Re];var Ye=!pe.match(Vg);for(pe=pe.replace(No,""),Ye&&(pe=pe.replace(Vg,"!")),Re=0;Re<we.length;++Re)if((Ye?we[Re].replace(Vg,"!"):we[Re]).replace(No,"")==pe||(Ye?Se[Re].replace(Vg,"!"):Se[Re]).replace(No,"")==pe)return le.FileIndex[Re];return null}var C=64,F=-2,M="d0cf11e0a1b11ae1",B=[208,207,17,224,161,177,26,225],K="00000000000000000000000000000000",G={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:K,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Y(le,_e,we){u();var Se=I(le,we);c.writeFileSync(_e,Se)}function q(le){for(var _e=new Array(le.length),we=0;we<le.length;++we)_e[we]=String.fromCharCode(le[we]);return _e.join("")}function X(le,_e){var we=I(le,_e);switch(_e&&_e.type||"buffer"){case"file":return u(),c.writeFileSync(_e.filename,we),we;case"binary":return typeof we=="string"?we:q(we);case"base64":return k1(typeof we=="string"?we:q(we));case"buffer":if(ln)return Buffer.isBuffer(we)?we:Gd(we);case"array":return typeof we=="string"?Nl(we):we}return we}var V;function T(le){try{var _e=le.InflateRaw,we=new _e;if(we._processChunk(new Uint8Array([3,0]),we._finishFlushFlag),we.bytesRead)V=le;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function R(le,_e){if(!V)return Ge(le,_e);var we=V.InflateRaw,Se=new we,ae=Se._processChunk(le.slice(le.l),Se._finishFlushFlag);return le.l+=Se.bytesRead,ae}function z(le){return V?V.deflateRawSync(le):We(le)}var L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(le){var _e=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(_e>>16|_e>>8|_e)&255}for(var Q=typeof Uint8Array<"u",re=Q?new Uint8Array(256):[],Ae=0;Ae<256;++Ae)re[Ae]=se(Ae);function ee(le,_e){var we=re[le&255];return _e<=8?we>>>8-_e:(we=we<<8|re[le>>8&255],_e<=16?we>>>16-_e:(we=we<<8|re[le>>16&255],we>>>24-_e))}function Me(le,_e){var we=_e&7,Se=_e>>>3;return(le[Se]|(we<=6?0:le[Se+1]<<8))>>>we&3}function ze(le,_e){var we=_e&7,Se=_e>>>3;return(le[Se]|(we<=5?0:le[Se+1]<<8))>>>we&7}function oe(le,_e){var we=_e&7,Se=_e>>>3;return(le[Se]|(we<=4?0:le[Se+1]<<8))>>>we&15}function J(le,_e){var we=_e&7,Se=_e>>>3;return(le[Se]|(we<=3?0:le[Se+1]<<8))>>>we&31}function je(le,_e){var we=_e&7,Se=_e>>>3;return(le[Se]|(we<=1?0:le[Se+1]<<8))>>>we&127}function ce(le,_e,we){var Se=_e&7,ae=_e>>>3,pe=(1<<we)-1,Re=le[ae]>>>Se;return we<8-Se||(Re|=le[ae+1]<<8-Se,we<16-Se)||(Re|=le[ae+2]<<16-Se,we<24-Se)||(Re|=le[ae+3]<<24-Se),Re&pe}function ye(le,_e,we){var Se=_e&7,ae=_e>>>3;return Se<=5?le[ae]|=(we&7)<<Se:(le[ae]|=we<<Se&255,le[ae+1]=(we&7)>>8-Se),_e+3}function me(le,_e,we){var Se=_e&7,ae=_e>>>3;return we=(we&1)<<Se,le[ae]|=we,_e+1}function ge(le,_e,we){var Se=_e&7,ae=_e>>>3;return we<<=Se,le[ae]|=we&255,we>>>=8,le[ae+1]=we,_e+8}function Ce(le,_e,we){var Se=_e&7,ae=_e>>>3;return we<<=Se,le[ae]|=we&255,we>>>=8,le[ae+1]=we&255,le[ae+2]=we>>>8,_e+16}function Ue(le,_e){var we=le.length,Se=2*we>_e?2*we:_e+5,ae=0;if(we>=_e)return le;if(ln){var pe=m8(Se);if(le.copy)le.copy(pe);else for(;ae<le.length;++ae)pe[ae]=le[ae];return pe}else if(Q){var Re=new Uint8Array(Se);if(Re.set)Re.set(le);else for(;ae<we;++ae)Re[ae]=le[ae];return Re}return le.length=Se,le}function Te(le){for(var _e=new Array(le),we=0;we<le;++we)_e[we]=0;return _e}function ue(le,_e,we){var Se=1,ae=0,pe=0,Re=0,Ye=0,Je=le.length,Qe=Q?new Uint16Array(32):Te(32);for(pe=0;pe<32;++pe)Qe[pe]=0;for(pe=Je;pe<we;++pe)le[pe]=0;Je=le.length;var Be=Q?new Uint16Array(Je):Te(Je);for(pe=0;pe<Je;++pe)Qe[ae=le[pe]]++,Se<ae&&(Se=ae),Be[pe]=0;for(Qe[0]=0,pe=1;pe<=Se;++pe)Qe[pe+16]=Ye=Ye+Qe[pe-1]<<1;for(pe=0;pe<Je;++pe)Ye=le[pe],Ye!=0&&(Be[pe]=Qe[Ye+16]++);var ke=0;for(pe=0;pe<Je;++pe)if(ke=le[pe],ke!=0)for(Ye=ee(Be[pe],Se)>>Se-ke,Re=(1<<Se+4-ke)-1;Re>=0;--Re)_e[Ye|Re<<ke]=ke&15|pe<<4;return Se}var Oe=Q?new Uint16Array(512):Te(512),st=Q?new Uint16Array(32):Te(32);if(!Q){for(var be=0;be<512;++be)Oe[be]=0;for(be=0;be<32;++be)st[be]=0}(function(){for(var le=[],_e=0;_e<32;_e++)le.push(5);ue(le,st,32);var we=[];for(_e=0;_e<=143;_e++)we.push(8);for(;_e<=255;_e++)we.push(9);for(;_e<=279;_e++)we.push(7);for(;_e<=287;_e++)we.push(8);ue(we,Oe,288)})();var De=function(){for(var _e=Q?new Uint8Array(32768):[],we=0,Se=0;we<ne.length-1;++we)for(;Se<ne[we+1];++Se)_e[Se]=we;for(;Se<32768;++Se)_e[Se]=29;var ae=Q?new Uint8Array(259):[];for(we=0,Se=0;we<H.length-1;++we)for(;Se<H[we+1];++Se)ae[Se]=we;function pe(Ye,Je){for(var Qe=0;Qe<Ye.length;){var Be=Math.min(65535,Ye.length-Qe),ke=Qe+Be==Ye.length;for(Je.write_shift(1,+ke),Je.write_shift(2,Be),Je.write_shift(2,~Be&65535);Be-- >0;)Je[Je.l++]=Ye[Qe++]}return Je.l}function Re(Ye,Je){for(var Qe=0,Be=0,ke=Q?new Uint16Array(32768):[];Be<Ye.length;){var He=Math.min(65535,Ye.length-Be);if(He<10){for(Qe=ye(Je,Qe,+(Be+He==Ye.length)),Qe&7&&(Qe+=8-(Qe&7)),Je.l=Qe/8|0,Je.write_shift(2,He),Je.write_shift(2,~He&65535);He-- >0;)Je[Je.l++]=Ye[Be++];Qe=Je.l*8;continue}Qe=ye(Je,Qe,+(Be+He==Ye.length)+2);for(var at=0;He-- >0;){var ht=Ye[Be];at=(at<<5^ht)&32767;var jt=-1,Bt=0;if((jt=ke[at])&&(jt|=Be&-32768,jt>Be&&(jt-=32768),jt<Be))for(;Ye[jt+Bt]==Ye[Be+Bt]&&Bt<250;)++Bt;if(Bt>2){ht=ae[Bt],ht<=22?Qe=ge(Je,Qe,re[ht+1]>>1)-1:(ge(Je,Qe,3),Qe+=5,ge(Je,Qe,re[ht-23]>>5),Qe+=3);var Jt=ht<8?0:ht-4>>2;Jt>0&&(Ce(Je,Qe,Bt-H[ht]),Qe+=Jt),ht=_e[Be-jt],Qe=ge(Je,Qe,re[ht]>>3),Qe-=3;var Tr=ht<4?0:ht-2>>1;Tr>0&&(Ce(Je,Qe,Be-jt-ne[ht]),Qe+=Tr);for(var En=0;En<Bt;++En)ke[at]=Be&32767,at=(at<<5^Ye[Be])&32767,++Be;He-=Bt-1}else ht<=143?ht=ht+48:Qe=me(Je,Qe,1),Qe=ge(Je,Qe,re[ht]),ke[at]=Be&32767,++Be}Qe=ge(Je,Qe,0)-1}return Je.l=(Qe+7)/8|0,Je.l}return function(Je,Qe){return Je.length<8?pe(Je,Qe):Re(Je,Qe)}}();function We(le){var _e=Nt(50+Math.floor(le.length*1.1)),we=De(le,_e);return _e.slice(0,we)}var Xe=Q?new Uint16Array(32768):Te(32768),Et=Q?new Uint16Array(32768):Te(32768),wt=Q?new Uint16Array(128):Te(128),Ve=1,xt=1;function Tt(le,_e){var we=J(le,_e)+257;_e+=5;var Se=J(le,_e)+1;_e+=5;var ae=oe(le,_e)+4;_e+=4;for(var pe=0,Re=Q?new Uint8Array(19):Te(19),Ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Je=1,Qe=Q?new Uint8Array(8):Te(8),Be=Q?new Uint8Array(8):Te(8),ke=Re.length,He=0;He<ae;++He)Re[L[He]]=pe=ze(le,_e),Je<pe&&(Je=pe),Qe[pe]++,_e+=3;var at=0;for(Qe[0]=0,He=1;He<=Je;++He)Be[He]=at=at+Qe[He-1]<<1;for(He=0;He<ke;++He)(at=Re[He])!=0&&(Ye[He]=Be[at]++);var ht=0;for(He=0;He<ke;++He)if(ht=Re[He],ht!=0){at=re[Ye[He]]>>8-ht;for(var jt=(1<<7-ht)-1;jt>=0;--jt)wt[at|jt<<ht]=ht&7|He<<3}var Bt=[];for(Je=1;Bt.length<we+Se;)switch(at=wt[je(le,_e)],_e+=at&7,at>>>=3){case 16:for(pe=3+Me(le,_e),_e+=2,at=Bt[Bt.length-1];pe-- >0;)Bt.push(at);break;case 17:for(pe=3+ze(le,_e),_e+=3;pe-- >0;)Bt.push(0);break;case 18:for(pe=11+je(le,_e),_e+=7;pe-- >0;)Bt.push(0);break;default:Bt.push(at),Je<at&&(Je=at);break}var Jt=Bt.slice(0,we),Tr=Bt.slice(we);for(He=we;He<286;++He)Jt[He]=0;for(He=Se;He<30;++He)Tr[He]=0;return Ve=ue(Jt,Xe,286),xt=ue(Tr,Et,30),_e}function he(le,_e){if(le[0]==3&&!(le[1]&3))return[o0(_e),2];for(var we=0,Se=0,ae=m8(_e||1<<18),pe=0,Re=ae.length>>>0,Ye=0,Je=0;!(Se&1);){if(Se=ze(le,we),we+=3,Se>>>1)Se>>1==1?(Ye=9,Je=5):(we=Tt(le,we),Ye=Ve,Je=xt);else{we&7&&(we+=8-(we&7));var Qe=le[we>>>3]|le[(we>>>3)+1]<<8;if(we+=32,Qe>0)for(!_e&&Re<pe+Qe&&(ae=Ue(ae,pe+Qe),Re=ae.length);Qe-- >0;)ae[pe++]=le[we>>>3],we+=8;continue}for(;;){!_e&&Re<pe+32767&&(ae=Ue(ae,pe+32767),Re=ae.length);var Be=ce(le,we,Ye),ke=Se>>>1==1?Oe[Be]:Xe[Be];if(we+=ke&15,ke>>>=4,!(ke>>>8&255))ae[pe++]=ke;else{if(ke==256)break;ke-=257;var He=ke<8?0:ke-4>>2;He>5&&(He=0);var at=pe+H[ke];He>0&&(at+=ce(le,we,He),we+=He),Be=ce(le,we,Je),ke=Se>>>1==1?st[Be]:Et[Be],we+=ke&15,ke>>>=4;var ht=ke<4?0:ke-2>>1,jt=ne[ke];for(ht>0&&(jt+=ce(le,we,ht),we+=ht),!_e&&Re<at&&(ae=Ue(ae,at+100),Re=ae.length);pe<at;)ae[pe]=ae[pe-jt],++pe}}}return _e?[ae,we+7>>>3]:[ae.slice(0,pe),we+7>>>3]}function Ge(le,_e){var we=le.slice(le.l||0),Se=he(we,_e);return le.l+=Se[1],Se[0]}function kt(le,_e){if(le)typeof console<"u"&&console.error(_e);else throw new Error(_e)}function gt(le,_e){var we=le;Ni(we,0);var Se=[],ae=[],pe={FileIndex:Se,FullPaths:ae};j(pe,{root:_e.root});for(var Re=we.length-4;(we[Re]!=80||we[Re+1]!=75||we[Re+2]!=5||we[Re+3]!=6)&&Re>=0;)--Re;we.l=Re+4,we.l+=4;var Ye=we.read_shift(2);we.l+=6;var Je=we.read_shift(4);for(we.l=Je,Re=0;Re<Ye;++Re){we.l+=20;var Qe=we.read_shift(4),Be=we.read_shift(4),ke=we.read_shift(2),He=we.read_shift(2),at=we.read_shift(2);we.l+=8;var ht=we.read_shift(4),jt=l(we.slice(we.l+ke,we.l+ke+He));we.l+=ke+He+at;var Bt=we.l;we.l=ht+4,Vt(we,Qe,Be,pe,jt),we.l=Bt}return pe}function Vt(le,_e,we,Se,ae){le.l+=2;var pe=le.read_shift(2),Re=le.read_shift(2),Ye=o(le);if(pe&8257)throw new Error("Unsupported ZIP encryption");for(var Je=le.read_shift(4),Qe=le.read_shift(4),Be=le.read_shift(4),ke=le.read_shift(2),He=le.read_shift(2),at="",ht=0;ht<ke;++ht)at+=String.fromCharCode(le[le.l++]);if(He){var jt=l(le.slice(le.l,le.l+He));(jt[21589]||{}).mt&&(Ye=jt[21589].mt),((ae||{})[21589]||{}).mt&&(Ye=ae[21589].mt)}le.l+=He;var Bt=le.slice(le.l,le.l+Qe);switch(Re){case 8:Bt=R(le,Be);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var Jt=!1;pe&8&&(Je=le.read_shift(4),Je==134695760&&(Je=le.read_shift(4),Jt=!0),Qe=le.read_shift(4),Be=le.read_shift(4)),Qe!=_e&&kt(Jt,"Bad compressed size: "+_e+" != "+Qe),Be!=we&&kt(Jt,"Bad uncompressed size: "+we+" != "+Be),Gr(Se,at,Bt,{unsafe:!0,mt:Ye})}function _r(le,_e){var we=_e||{},Se=[],ae=[],pe=Nt(1),Re=we.compression?8:0,Ye=0,Je=0,Qe=0,Be=0,ke=0,He=le.FullPaths[0],at=He,ht=le.FileIndex[0],jt=[],Bt=0;for(Je=1;Je<le.FullPaths.length;++Je)if(at=le.FullPaths[Je].slice(He.length),ht=le.FileIndex[Je],!(!ht.size||!ht.content||at=="Sh33tJ5")){var Jt=Be,Tr=Nt(at.length);for(Qe=0;Qe<at.length;++Qe)Tr.write_shift(1,at.charCodeAt(Qe)&127);Tr=Tr.slice(0,Tr.l),jt[ke]=Ibe.buf(ht.content,0);var En=ht.content;Re==8&&(En=z(En)),pe=Nt(30),pe.write_shift(4,67324752),pe.write_shift(2,20),pe.write_shift(2,Ye),pe.write_shift(2,Re),ht.mt?i(pe,ht.mt):pe.write_shift(4,0),pe.write_shift(-4,jt[ke]),pe.write_shift(4,En.length),pe.write_shift(4,ht.content.length),pe.write_shift(2,Tr.length),pe.write_shift(2,0),Be+=pe.length,Se.push(pe),Be+=Tr.length,Se.push(Tr),Be+=En.length,Se.push(En),pe=Nt(46),pe.write_shift(4,33639248),pe.write_shift(2,0),pe.write_shift(2,20),pe.write_shift(2,Ye),pe.write_shift(2,Re),pe.write_shift(4,0),pe.write_shift(-4,jt[ke]),pe.write_shift(4,En.length),pe.write_shift(4,ht.content.length),pe.write_shift(2,Tr.length),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(4,0),pe.write_shift(4,Jt),Bt+=pe.l,ae.push(pe),Bt+=Tr.length,ae.push(Tr),++ke}return pe=Nt(22),pe.write_shift(4,101010256),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,ke),pe.write_shift(2,ke),pe.write_shift(4,Bt),pe.write_shift(4,Be),pe.write_shift(2,0),ci([ci(Se),ci(ae),pe])}var lr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Gt(le,_e){if(le.ctype)return le.ctype;var we=le.name||"",Se=we.match(/\.([^\.]+)$/);return Se&&lr[Se[1]]||_e&&(Se=(we=_e).match(/[\.\\]([^\.\\])+$/),Se&&lr[Se[1]])?lr[Se[1]]:"application/octet-stream"}function rr(le){for(var _e=k1(le),we=[],Se=0;Se<_e.length;Se+=76)we.push(_e.slice(Se,Se+76));return we.join(`\r
`)+`\r
`}function ir(le){var _e=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Qe){var Be=Qe.charCodeAt(0).toString(16).toUpperCase();return"="+(Be.length==1?"0"+Be:Be)});_e=_e.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),_e.charAt(0)==`
`&&(_e="=0D"+_e.slice(1)),_e=_e.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var we=[],Se=_e.split(`\r
`),ae=0;ae<Se.length;++ae){var pe=Se[ae];if(pe.length==0){we.push("");continue}for(var Re=0;Re<pe.length;){var Ye=76,Je=pe.slice(Re,Re+Ye);Je.charAt(Ye-1)=="="?Ye--:Je.charAt(Ye-2)=="="?Ye-=2:Je.charAt(Ye-3)=="="&&(Ye-=3),Je=pe.slice(Re,Re+Ye),Re+=Ye,Re<pe.length&&(Je+="="),we.push(Je)}}return we.join(`\r
`)}function pr(le){for(var _e=[],we=0;we<le.length;++we){for(var Se=le[we];we<=le.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+le[++we];_e.push(Se)}for(var ae=0;ae<_e.length;++ae)_e[ae]=_e[ae].replace(/[=][0-9A-Fa-f]{2}/g,function(pe){return String.fromCharCode(parseInt(pe.slice(1),16))});return Nl(_e.join(`\r
`))}function Nr(le,_e,we){for(var Se="",ae="",pe="",Re,Ye=0;Ye<10;++Ye){var Je=_e[Ye];if(!Je||Je.match(/^\s*$/))break;var Qe=Je.match(/^(.*?):\s*([^\s].*)$/);if(Qe)switch(Qe[1].toLowerCase()){case"content-location":Se=Qe[2].trim();break;case"content-type":pe=Qe[2].trim();break;case"content-transfer-encoding":ae=Qe[2].trim();break}}switch(++Ye,ae.toLowerCase()){case"base64":Re=Nl(Ol(_e.slice(Ye).join("")));break;case"quoted-printable":Re=pr(_e.slice(Ye));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ae)}var Be=Gr(le,Se.slice(we.length),Re,{unsafe:!0});pe&&(Be.ctype=pe)}function jr(le,_e){if(q(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var we=_e&&_e.root||"",Se=(ln&&Buffer.isBuffer(le)?le.toString("binary"):q(le)).split(`\r
`),ae=0,pe="";for(ae=0;ae<Se.length;++ae)if(pe=Se[ae],!!/^Content-Location:/i.test(pe)&&(pe=pe.slice(pe.indexOf("file")),we||(we=pe.slice(0,pe.lastIndexOf("/")+1)),pe.slice(0,we.length)!=we))for(;we.length>0&&(we=we.slice(0,we.length-1),we=we.slice(0,we.lastIndexOf("/")+1),pe.slice(0,we.length)!=we););var Re=(Se[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var Ye="--"+(Re[1]||""),Je=[],Qe=[],Be={FileIndex:Je,FullPaths:Qe};j(Be);var ke,He=0;for(ae=0;ae<Se.length;++ae){var at=Se[ae];at!==Ye&&at!==Ye+"--"||(He++&&Nr(Be,Se.slice(ke,ae),we),ke=ae)}return Be}function Dt(le,_e){var we=_e||{},Se=we.boundary||"SheetJS";Se="------="+Se;for(var ae=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],pe=le.FullPaths[0],Re=pe,Ye=le.FileIndex[0],Je=1;Je<le.FullPaths.length;++Je)if(Re=le.FullPaths[Je].slice(pe.length),Ye=le.FileIndex[Je],!(!Ye.size||!Ye.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Bt){return"_x"+Bt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Bt){return"_u"+Bt.charCodeAt(0).toString(16)+"_"});for(var Qe=Ye.content,Be=ln&&Buffer.isBuffer(Qe)?Qe.toString("binary"):q(Qe),ke=0,He=Math.min(1024,Be.length),at=0,ht=0;ht<=He;++ht)(at=Be.charCodeAt(ht))>=32&&at<128&&++ke;var jt=ke>=He*4/5;ae.push(Se),ae.push("Content-Location: "+(we.root||"file:///C:/SheetJS/")+Re),ae.push("Content-Transfer-Encoding: "+(jt?"quoted-printable":"base64")),ae.push("Content-Type: "+Gt(Ye,Re)),ae.push(""),ae.push(jt?ir(Be):rr(Be))}return ae.push(Se+`--\r
`),ae.join(`\r
`)}function Sr(le){var _e={};return j(_e,le),_e}function Gr(le,_e,we,Se){var ae=Se&&Se.unsafe;ae||j(le);var pe=!ae&&Pr.find(le,_e);if(!pe){var Re=le.FullPaths[0];_e.slice(0,Re.length)==Re?Re=_e:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+_e).replace("//","/")),pe={name:s(_e),type:2},le.FileIndex.push(pe),le.FullPaths.push(Re),ae||Pr.utils.cfb_gc(le)}return pe.content=we,pe.size=we?we.length:0,Se&&(Se.CLSID&&(pe.clsid=Se.CLSID),Se.mt&&(pe.mt=Se.mt),Se.ct&&(pe.ct=Se.ct)),pe}function cn(le,_e){j(le);var we=Pr.find(le,_e);if(we){for(var Se=0;Se<le.FileIndex.length;++Se)if(le.FileIndex[Se]==we)return le.FileIndex.splice(Se,1),le.FullPaths.splice(Se,1),!0}return!1}function qe(le,_e,we){j(le);var Se=Pr.find(le,_e);if(Se){for(var ae=0;ae<le.FileIndex.length;++ae)if(le.FileIndex[ae]==Se)return le.FileIndex[ae].name=s(we),le.FullPaths[ae]=we,!0}return!1}function mt(le){E(le,!0)}return t.find=A,t.read=S,t.parse=f,t.write=X,t.writeFile=Y,t.utils={cfb_new:Sr,cfb_add:Gr,cfb_del:cn,cfb_mov:qe,cfb_gc:mt,ReadShift:fv,CheckField:CB,prep_blob:Ni,bconcat:ci,use_zlib:T,_deflateRaw:We,_inflateRaw:Ge,consts:G},t}();function Dbe(e){return typeof e=="string"?xN(e):Array.isArray(e)?ibe(e):e}function ry(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=xN(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Du(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Dbe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=N0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Lbe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function us(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function j8(e,t){for(var r=[],n=us(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function vN(e){for(var t=[],r=us(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function yN(e){for(var t=[],r=us(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Fbe(e){for(var t=[],r=us(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Kw=new Date(1899,11,30,0,0,0);function Gs(e,t){var r=e.getTime(),n=Kw.getTime()+(e.getTimezoneOffset()-Kw.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var oB=new Date,Mbe=Kw.getTime()+(oB.getTimezoneOffset()-Kw.getTimezoneOffset())*6e4,k8=oB.getTimezoneOffset();function bN(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Mbe),t.getTimezoneOffset()!==k8&&t.setTime(t.getTime()+(t.getTimezoneOffset()-k8)*6e4),t}function Rbe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var S8=new Date("2017-02-19T19:06:09.000Z"),lB=isNaN(S8.getFullYear())?new Date("2/19/17"):S8,Bbe=lB.getFullYear()==2017;function Ta(e,t){var r=new Date(e);if(Bbe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(lB.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Gh(e,t){if(ln&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Du(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Du(XR(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Du(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Du(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Oa(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Oa(e[r]));return t}function os(e,t){for(var r="";r.length<t;)r+=e;return r}function Zc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var $be=["january","february","march","april","may","june","july","august","september","october","november","december"];function bx(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&$be.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Ube=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function cB(e){return e?e.content&&e.type?Gh(e.content,!0):e.data?Wg(e.data):e.asNodeBuffer&&ln?Wg(e.asNodeBuffer().toString("binary")):e.asBinary?Wg(e.asBinary()):e._data&&e._data.getContent?Wg(Gh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function uB(e){if(!e)return null;if(e.data)return h8(e.data);if(e.asNodeBuffer&&ln)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?h8(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function zbe(e){return e&&e.name.slice(-4)===".bin"?uB(e):cB(e)}function Jl(e,t){for(var r=e.FullPaths||us(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function G6(e,t){var r=Jl(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function As(e,t,r){if(!r)return zbe(G6(e,t));if(!t)return null;try{return As(e,t)}catch{return null}}function jl(e,t,r){if(!r)return cB(G6(e,t));if(!t)return null;try{return jl(e,t)}catch{return null}}function qbe(e,t,r){return uB(G6(e,t))}function _8(e){for(var t=e.FullPaths||us(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function an(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return ln?n=Gd(r):n=obe(r),Pr.utils.cfb_add(e,t,n)}Pr.utils.cfb_add(e,t,r)}else e.file(t,r)}function K6(){return Pr.utils.cfb_new()}function dB(e,t){switch(t.type){case"base64":return Pr.read(e,{type:"base64"});case"binary":return Pr.read(e,{type:"binary"});case"buffer":case"array":return Pr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Gg(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Hbe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,A8=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Wbe=/<[^>]*>/g,ro=ys.match(A8)?A8:Wbe,Vbe=/<\w*:/,Gbe=/<(\/?)\w+:/;function Hr(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(Hbe),l=0,c="",u=0,f="",d="",p=1;if(o)for(u=0;u!=o.length;++u){for(d=o[u],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(f=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(p=(s=d.charCodeAt(i+1))==34||s==39?1:0,c=d.slice(i+1+p,d.length-p),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var h=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[h]&&f.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function Ku(e){return e.replace(Gbe,"<$1")}var fB={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},X6=vN(fB),On=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return fB[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),Y6=/[&<>'"]/g,Kbe=/[\u0000-\u0008\u000b-\u001f]/g;function Yn(e){var t=e+"";return t.replace(Y6,function(r){return X6[r]}).replace(Kbe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function C8(e){return Yn(e).replace(/ /g,"_x0020_")}var hB=/[\u0000-\u001f]/g;function J6(e){var t=e+"";return t.replace(Y6,function(r){return X6[r]}).replace(/\n/g,"<br/>").replace(hB,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Xbe(e){var t=e+"";return t.replace(Y6,function(r){return X6[r]}).replace(hB,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var E8=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Ybe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function _a(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Hj(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function T8(e){var t=o0(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function O8(e){return Gd(e,"binary").toString("utf8")}var Nb="foo bar baz",aa=ln&&(O8(Nb)==Hj(Nb)&&O8||T8(Nb)==Hj(Nb)&&T8)||Hj,Du=ln?function(e){return Gd(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},_1=function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),pB=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),Jbe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Qbe=/<\/?(?:vt:)?variant>/g,Zbe=/<(?:vt:)([^>]*)>([\s\S]*)</;function P8(e,t){var r=Hr(e),n=e.match(Jbe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Qbe,"").match(Zbe);o&&s.push({v:aa(o[2]),t:o[1]})}),s}var mB=/(^\s|\s$|\n)/;function ji(e,t){return"<"+e+(t.match(mB)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function A1(e){return us(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function er(e,t,r){return"<"+e+(r!=null?A1(r):"")+(t!=null?(t.match(mB)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function sS(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function e2e(e,t){switch(typeof e){case"string":var r=er("vt:lpwstr",Yn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return er((e|0)==e?"vt:i4":"vt:r8",Yn(String(e)));case"boolean":return er("vt:bool",e?"true":"false")}if(e instanceof Date)return er("vt:filetime",sS(e));throw new Error("Unable to serialize "+e)}function Q6(e){if(ln&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return aa(N0(H6(e)));throw new Error("Bad input format: expected Buffer or string")}var C1=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,qs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},sp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],yl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function t2e(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function r2e(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var I8=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},D8=ln?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Gd(t)})):I8(e)}:I8,L8=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(wd(e,s)));return n.join("").replace(No,"")},Z6=ln?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(No,""):L8(e,t,r)}:L8,F8=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},xB=ln?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):F8(e,t,r)}:F8,M8=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Vp(e,s)));return n.join("")},ny=ln?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):M8(t,r,n)}:M8,gB=function(e,t){var r=bl(e,t);return r>0?ny(e,t+4,t+4+r-1):""},vB=gB,yB=function(e,t){var r=bl(e,t);return r>0?ny(e,t+4,t+4+r-1):""},bB=yB,wB=function(e,t){var r=2*bl(e,t);return r>0?ny(e,t+4,t+4+r-1):""},NB=wB,jB=function(t,r){var n=bl(t,r);return n>0?Z6(t,r+4,r+4+n):""},kB=jB,SB=function(e,t){var r=bl(e,t);return r>0?ny(e,t+4,t+4+r):""},_B=SB,AB=function(e,t){return t2e(e,t)},Xw=AB,eA=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};ln&&(vB=function(t,r){if(!Buffer.isBuffer(t))return gB(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},bB=function(t,r){if(!Buffer.isBuffer(t))return yB(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},NB=function(t,r){if(!Buffer.isBuffer(t))return wB(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},kB=function(t,r){if(!Buffer.isBuffer(t))return jB(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},_B=function(t,r){if(!Buffer.isBuffer(t))return SB(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Xw=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):AB(t,r)},eA=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Vp=function(e,t){return e[t]},wd=function(e,t){return e[t+1]*256+e[t]},n2e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},bl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Z0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},a2e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function fv(e,t){var r="",n,s,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,ln&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(wd(this,u)),u+=2;e*=2;break;case"utf8":r=ny(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Z6(this,this.l,this.l+e);break;case"wstr":return fv.call(this,e,"dbcs");case"lpstr-ansi":r=vB(this,this.l),e=4+bl(this,this.l);break;case"lpstr-cp":r=bB(this,this.l),e=4+bl(this,this.l);break;case"lpwstr":r=NB(this,this.l),e=4+2*bl(this,this.l);break;case"lpp4":e=4+bl(this,this.l),r=kB(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+bl(this,this.l),r=_B(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Vp(this,this.l+e++))!==0;)i.push(wb(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=wd(this,this.l+e))!==0;)i.push(wb(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Vp(this,u),this.l=u+1,l=fv.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(wb(wd(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Vp(this,u),this.l=u+1,l=fv.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(wb(Vp(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Vp(this,this.l),this.l++,n;case 2:return n=(t==="i"?n2e:wd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Z0:a2e)(this,this.l),this.l+=4,n):(s=bl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Xw(this,this.l):s=Xw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=xB(this,this.l,e);break}}return this.l+=e,r}var s2e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},i2e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},o2e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function l2e(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)o2e(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,s2e(this,t,this.l);break;case 8:if(n=8,r==="f"){r2e(this,t,this.l);break}case 16:break;case-4:n=4,i2e(this,t,this.l);break}return this.l+=n,this}function CB(e,t){var r=xB(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ni(e,t){e.l=t,e.read_shift=fv,e.chk=CB,e.write_shift=l2e}function to(e,t){e.l+=t}function Nt(e){var t=o0(e);return Ni(t,0),t}function Kd(e,t,r){if(e){var n,s,i;Ni(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=D1[l]||D1[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=c,t(f,u,l))return}}}function Zo(){var e=[],t=ln?256:2048,r=function(u){var f=Nt(u);return Ni(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},o=function(){return s(),ci(e)},l=function(u){s(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Mt(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=D1[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&eA(r)&&e.push(r)}}function hv(e,t,r){var n=Oa(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function R8(e,t,r){var n=Oa(e);return n.s=hv(n.s,t.s,r),n.e=hv(n.e,t.s,r),n}function pv(e,t){if(e.cRel&&e.c<0)for(e=Oa(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Oa(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=qr(e);return!e.cRel&&e.cRel!=null&&(r=d2e(r)),!e.rRel&&e.rRel!=null&&(r=c2e(r)),r}function Wj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Wa(e.s.c)+":"+(e.e.cRel?"":"$")+Wa(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+vs(e.s.r)+":"+(e.e.rRel?"":"$")+vs(e.e.r):pv(e.s,t.biff)+":"+pv(e.e,t.biff)}function tA(e){return parseInt(u2e(e),10)-1}function vs(e){return""+(e+1)}function c2e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function u2e(e){return e.replace(/\$(\d+)$/,"$1")}function rA(e){for(var t=f2e(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Wa(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function d2e(e){return e.replace(/^([A-Z])/,"$$$1")}function f2e(e){return e.replace(/^\$([A-Z])/,"$1")}function h2e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Va(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function qr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function el(e){var t=e.indexOf(":");return t==-1?{s:Va(e),e:Va(e)}:{s:Va(e.slice(0,t)),e:Va(e.slice(t+1))}}function rn(e,t){return typeof t>"u"||typeof t=="number"?rn(e.s,e.e):(typeof e!="string"&&(e=qr(e)),typeof t!="string"&&(t=qr(t)),e==t?e:e+":"+t)}function In(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function B8(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=pc(e.z,r?Gs(t):t)}catch{}try{return e.w=pc((e.XF||{}).numFmtId||(r?14:0),r?Gs(t):t)}catch{return""+t}}function zd(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Xd[e.v]||e.v:t==null?B8(e,e.v):B8(e,t))}function j0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function EB(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Va(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=In(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(u.e.r=o=f.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[d].length;++p)if(!(typeof t[d][p]>"u")){var h={v:t[d][p]},g=o+d,x=l+p;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[d][p]&&typeof t[d][p]=="object"&&!Array.isArray(t[d][p])&&!(t[d][p]instanceof Date))h=t[d][p];else if(Array.isArray(h.v)&&(h.f=t[d][p][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Rr[14],n.cellDates?(h.t="d",h.w=pc(h.z,Gs(h.v))):(h.t="n",h.v=Gs(h.v),h.w=pc(h.z,h.v))):h.t="s";if(s)i[g]||(i[g]=[]),i[g][x]&&i[g][x].z&&(h.z=i[g][x].z),i[g][x]=h;else{var m=qr({c:x,r:g});i[m]&&i[m].z&&(h.z=i[m].z),i[m]=h}}}return u.s.c<1e7&&(i["!ref"]=rn(u)),i}function Hx(e,t){return EB(null,e,t)}function p2e(e){return e.read_shift(4,"i")}function eu(e,t){return t||(t=Nt(4)),t.write_shift(4,e),t}function Zi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function di(e,t){var r=!1;return t==null&&(r=!0,t=Nt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function m2e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function x2e(e,t){return t||(t=Nt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function nA(e,t){var r=e.l,n=e.read_shift(1),s=Zi(e),i=[],o={t:s,h:s};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(m2e(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function g2e(e,t){var r=!1;return t==null&&(r=!0,t=Nt(15+4*e.t.length)),t.write_shift(1,0),di(e.t,t),r?t.slice(0,t.l):t}var v2e=nA;function y2e(e,t){var r=!1;return t==null&&(r=!0,t=Nt(23+4*e.t.length)),t.write_shift(1,1),di(e.t,t),t.write_shift(4,1),x2e({},t),r?t.slice(0,t.l):t}function vc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function ip(e,t){return t==null&&(t=Nt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function op(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function lp(e,t){return t==null&&(t=Nt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var b2e=Zi,TB=di;function aA(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Yw(e,t){var r=!1;return t==null&&(r=!0,t=Nt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var w2e=Zi,iS=aA,sA=Yw;function iA(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?Xw([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Z0(t,0)>>2;return r?s/100:s}function OB(e,t){t==null&&(t=Nt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function PB(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function N2e(e,t){return t||(t=Nt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var cp=PB,Wx=N2e;function Ji(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Kh(e,t){return(t||Nt(8)).write_shift(8,e,"f")}function j2e(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=Ah[s];u&&(t.rgb=T1(u));break;case 2:t.rgb=T1([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Jw(e,t){if(t||(t=Nt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function k2e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function S2e(e,t){t||(t=Nt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function IB(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function _2e(e){return IB(e,1)}function A2e(e){return IB(e,2)}var oA=2,Wo=3,jb=11,$8=12,Qw=19,kb=64,C2e=65,E2e=71,T2e=4108,O2e=4126,si=80,DB=81,P2e=[si,DB],oS={1:{n:"CodePage",t:oA},2:{n:"Category",t:si},3:{n:"PresentationFormat",t:si},4:{n:"ByteCount",t:Wo},5:{n:"LineCount",t:Wo},6:{n:"ParagraphCount",t:Wo},7:{n:"SlideCount",t:Wo},8:{n:"NoteCount",t:Wo},9:{n:"HiddenCount",t:Wo},10:{n:"MultimediaClipCount",t:Wo},11:{n:"ScaleCrop",t:jb},12:{n:"HeadingPairs",t:T2e},13:{n:"TitlesOfParts",t:O2e},14:{n:"Manager",t:si},15:{n:"Company",t:si},16:{n:"LinksUpToDate",t:jb},17:{n:"CharacterCount",t:Wo},19:{n:"SharedDoc",t:jb},22:{n:"HyperlinksChanged",t:jb},23:{n:"AppVersion",t:Wo,p:"version"},24:{n:"DigSig",t:C2e},26:{n:"ContentType",t:si},27:{n:"ContentStatus",t:si},28:{n:"Language",t:si},29:{n:"Version",t:si},255:{},2147483648:{n:"Locale",t:Qw},2147483651:{n:"Behavior",t:Qw},1919054434:{}},lS={1:{n:"CodePage",t:oA},2:{n:"Title",t:si},3:{n:"Subject",t:si},4:{n:"Author",t:si},5:{n:"Keywords",t:si},6:{n:"Comments",t:si},7:{n:"Template",t:si},8:{n:"LastAuthor",t:si},9:{n:"RevNumber",t:si},10:{n:"EditTime",t:kb},11:{n:"LastPrinted",t:kb},12:{n:"CreatedDate",t:kb},13:{n:"ModifiedDate",t:kb},14:{n:"PageCount",t:Wo},15:{n:"WordCount",t:Wo},16:{n:"CharCount",t:Wo},17:{n:"Thumbnail",t:E2e},18:{n:"Application",t:si},19:{n:"DocSecurity",t:Wo},255:{},2147483648:{n:"Locale",t:Qw},2147483651:{n:"Behavior",t:Qw},1919054434:{}},U8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},I2e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function D2e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var L2e=D2e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ah=Oa(L2e),Xd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},LB={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},cS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Sb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function lA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function F2e(e){var t=lA();if(!e||!e.match)return t;var r={};if((e.match(ro)||[]).forEach(function(n){var s=Hr(n);switch(s[0].replace(Vbe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[cS[s.ContentType]]!==void 0&&t[cS[s.ContentType]].push(s.PartName);break}}),t.xmlns!==qs.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function FB(e,t){var r=Fbe(cS),n=[],s;n[n.length]=ys,n[n.length]=er("Types",null,{xmlns:qs.CT,"xmlns:xsd":qs.xsd,"xmlns:xsi":qs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return er("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=er("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Sb[c][t.bookType]||Sb[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=er("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Sb[c][t.bookType]||Sb[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=er("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var xn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function E1(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function mv(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ro)||[]).forEach(function(s){var i=Hr(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Gg(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function km(e){var t=[ys,er("Relationships",null,{xmlns:qs.RELS})];return us(e["!id"]).forEach(function(r){t[t.length]=er("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Xn(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[xn.HLINK,xn.XPATH,xn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var M2e="application/vnd.oasis.opendocument.spreadsheet";function R2e(e,t){for(var r=Q6(e),n,s;n=C1.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Hr(n[0],!1),s.path=="/"&&s.type!==M2e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function B2e(e){var t=[ys];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function z8(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function $2e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function U2e(e){var t=[ys];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(z8(e[r][0],e[r][1])),t.push($2e("",e[r][0]));return t.push(z8("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function MB(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Hw.version+"</meta:generator></office:meta></office:document-meta>"}var uc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],z2e=function(){for(var e=new Array(uc.length),t=0;t<uc.length;++t){var r=uc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function RB(e){var t={};e=aa(e);for(var r=0;r<uc.length;++r){var n=uc[r],s=e.match(z2e[r]);s!=null&&s.length>0&&(t[n[1]]=On(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ta(t[n[1]]))}return t}function Vj(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Yn(t),n[n.length]=r?er(e,t,r):ji(e,t))}function BB(e,t){var r=t||{},n=[ys,er("cp:coreProperties",null,{"xmlns:cp":qs.CORE_PROPS,"xmlns:dc":qs.dc,"xmlns:dcterms":qs.dcterms,"xmlns:dcmitype":qs.dcmitype,"xmlns:xsi":qs.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&Vj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:sS(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&Vj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:sS(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=uc.length;++i){var o=uc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Vj(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Ch=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],$B=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function UB(e,t,r,n){var s=[];if(typeof e=="string")s=P8(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?P8(t,n).map(function(f){return f.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function q2e(e,t,r){var n={};return t||(t={}),e=aa(e),Ch.forEach(function(s){var i=(e.match(_1(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=On(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&UB(n.HeadingPairs,n.TitlesOfParts,t,r),t}function zB(e){var t=[],r=er;return e||(e={}),e.Application="SheetJS",t[t.length]=ys,t[t.length]=er("Properties",null,{xmlns:qs.EXT_PROPS,"xmlns:vt":qs.vt}),Ch.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Yn(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Yn(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var H2e=/<[^>]+>[^<]*/g;function W2e(e,t){var r={},n="",s=e.match(H2e);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Hr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=On(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),f=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=On(f);break;case"bool":r[n]=_a(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=Ta(f);break;case"cy":case"error":r[n]=On(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function qB(e){var t=[ys,er("Properties",null,{xmlns:qs.CUST_PROPS,"xmlns:vt":qs.vt})];if(!e)return t.join("");var r=1;return us(e).forEach(function(s){++r,t[t.length]=er("property",e2e(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Yn(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var uS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Gj;function V2e(e,t,r){Gj||(Gj=vN(uS)),t=Gj[t]||t,e[t]=r}function G2e(e,t){var r=[];return us(uS).map(function(n){for(var s=0;s<uc.length;++s)if(uc[s][1]==n)return uc[s];for(s=0;s<Ch.length;++s)if(Ch[s][1]==n)return Ch[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(ji(uS[n[1]]||n[1],s))}}),er("DocumentProperties",r.join(""),{xmlns:yl.o})}function K2e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&us(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<uc.length;++o)if(i==uc[o][1])return;for(o=0;o<Ch.length;++o)if(i==Ch[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(er(C8(i),l,{"dt:dt":c}))}}),t&&us(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(er(C8(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+yl.o+'">'+s.join("")+"</"+n+">"}function cA(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function X2e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Nt(8);return o.write_shift(4,n),o.write_shift(4,s),o}function HB(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function WB(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function VB(e,t,r){return t===31?WB(e):HB(e,t,r)}function dS(e,t,r){return VB(e,t,r===!1?0:4)}function Y2e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return VB(e,t,0)}function J2e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(No,""),e.l-s&2&&(e.l+=2)}return r}function Q2e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(No,"");return r}function Z2e(e){var t=e.l,r=Zw(e,DB);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Zw(e,Wo);return[r,n]}function ewe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Z2e(e));return r}function q8(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(No,"").replace(Vg,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function GB(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function twe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Zw(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==$8&&n!==t&&P2e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===$8?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return HB(e,n,4).replace(No,"");case 31:return WB(e);case 64:return cA(e);case 65:return GB(e);case 71:return twe(e);case 80:return dS(e,n,!i.raw).replace(No,"");case 81:return Y2e(e,n).replace(No,"");case 4108:return ewe(e);case 4126:case 4127:return n==4127?J2e(e):Q2e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function H8(e,t){var r=Nt(4),n=Nt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Nt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=X2e(t);break;case 31:case 80:for(n=Nt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ci([r,n])}function W8(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,u={};for(o=0;o!=s;++o){var f=e.read_shift(4),d=e.read_shift(4);i[o]=[f,d+r]}i.sort(function(y,w){return y[1]-w[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var h=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,h=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],h=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],h=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(h=!1,e.l=i[o][1]),h)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[i[o][0]];if(p[g.n]=Zw(e,g.t,{raw:!0}),g.p==="version"&&(p[g.n]=String(p[g.n]>>16)+"."+("0000"+String(p[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(p[g.n]){case 0:p[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Gc(l=p[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[g.n])}}else if(i[o][0]===1){if(l=p.CodePage=Zw(e,oA),Gc(l),c!==-1){var x=e.l;e.l=i[c][1],u=q8(e,l),e.l=x}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}u=q8(e,l)}else{var m=u[i[o][0]],v;switch(e[e.l]){case 65:e.l+=4,v=GB(e);break;case 30:e.l+=4,v=dS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,v=dS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,v=e.read_shift(4,"i");break;case 19:e.l+=4,v=e.read_shift(4);break;case 5:e.l+=4,v=e.read_shift(8,"f");break;case 11:e.l+=4,v=hs(e,4);break;case 64:e.l+=4,v=Ta(cA(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[m]=v}}return e.l=r+n,p}var KB=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function rwe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function V8(e,t,r){var n=Nt(8),s=[],i=[],o=8,l=0,c=Nt(8),u=Nt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),s.push(u),o+=8+c.length,!t){u=Nt(8),u.write_shift(4,0),s.unshift(u);var f=[Nt(4)];for(f[0].write_shift(4,e.length),l=0;l<e.length;++l){var d=e[l][0];for(c=Nt(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=ci(f),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(KB.indexOf(e[l][0])>-1||$B.indexOf(e[l][0])>-1)&&e[l][1]!=null){var p=e[l][1],h=0;if(t){h=+t[e[l][0]];var g=r[h];if(g.p=="version"&&typeof p=="string"){var x=p.split(".");p=(+x[0]<<16)+(+x[1]||0)}c=H8(g.t,p)}else{var m=rwe(p);m==-1&&(m=31,p=String(p)),c=H8(m,p)}i.push(c),u=Nt(8),u.write_shift(4,t?h:2+l),s.push(u),o+=8+c.length}var v=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,v),v+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),ci([n].concat(s).concat(i))}function G8(e,t,r){var n=e.content;if(!n)return{};Ni(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),f=n.read_shift(16);if(f!==Pr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var d=W8(n,t),p={SystemIdentifier:u};for(var h in d)p[h]=d[h];if(p.FMTID=i,s===1)return p;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=W8(n,null)}catch{}for(h in g)p[h]=g[h];return p.FMTID=[i,o],p}function K8(e,t,r,n,s,i){var o=Nt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Pr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=V8(e,r,n);if(l.push(c),s){var u=V8(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return ci(l)}function mf(e,t){return e.read_shift(t),null}function nwe(e,t){t||(t=Nt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function awe(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function hs(e,t){return e.read_shift(t)===1}function xo(e,t){return t||(t=Nt(2)),t.write_shift(2,+!!e),t}function Cs(e){return e.read_shift(2,"u")}function Zl(e,t){return t||(t=Nt(2)),t.write_shift(2,e),t}function XB(e,t){return awe(e,t,Cs)}function swe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function YB(e,t,r){return r||(r=Nt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function ay(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function iwe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=f,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function owe(e){var t=e.t||"",r=Nt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Nt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return ci(s)}function Xh(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function sy(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Xh(e,n,r)}function up(e,t,r){if(r.biff>5)return sy(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function JB(e,t,r){return r||(r=Nt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function lwe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function cwe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(No,"");return n&&(e.l+=24),s}function uwe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(No,"");return r+o}function dwe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return cwe(e);case"0303000000000000c000000000000046":return uwe(e);default:throw new Error("Unsupported Moniker "+r)}}function _b(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(No,""):"";return r}function X8(e,t){t||(t=Nt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function fwe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,u="",f,d;s&16&&(i=_b(e,r-e.l)),s&128&&(o=_b(e,r-e.l)),(s&257)===257&&(l=_b(e,r-e.l)),(s&257)===1&&(c=dwe(e,r-e.l)),s&8&&(u=_b(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(d=cA(e)),e.l=r;var p=o||l||c||"";p&&u&&(p+="#"+u),p||(p="#"+u),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var h={Target:p};return f&&(h.guid=f),d&&(h.time=d),i&&(h.Tooltip=i),h}function hwe(e){var t=Nt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),X8(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&X8(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function QB(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function ZB(e,t){var r=QB(e);return r[3]=0,r}function Xu(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Yh(e,t,r,n){return n||(n=Nt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function pwe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function mwe(e,t,r){return t===0?"":up(e,t,r)}function xwe(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function e$(e){var t=e.read_shift(2),r=iA(e);return[t,r]}function gwe(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=ay(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function wN(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function t$(e,t){return t||(t=Nt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function r$(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var vwe=r$;function n$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function ywe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function bwe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ri(e){e.l+=2,e.l+=e.read_shift(2)}var wwe={0:Ri,4:Ri,5:Ri,6:Ri,7:bwe,8:Ri,9:Ri,10:Ri,11:Ri,12:Ri,13:ywe,14:Ri,15:Ri,16:Ri,17:Ri,18:Ri,19:Ri,20:Ri,21:n$};function Nwe(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(wwe[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Ab(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function uA(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Nt(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function jwe(e,t){return t===0||e.read_shift(2),1200}function kwe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=up(e,0,r);return e.read_shift(t+n-e.l),s}function Swe(e,t){var r=!t||t.biff==8,n=Nt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function _we(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Awe(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=ay(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function Cwe(e,t){var r=!t||t.biff>=8?2:1,n=Nt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Ewe(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(iwe(e));return i.Count=n,i.Unique=s,i}function Twe(e,t){var r=Nt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=owe(e[s]);var i=ci([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function Owe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Pwe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Iwe(e){var t=pwe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Dwe(e){return e.read_shift(2),e.read_shift(4)}function Y8(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function Lwe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function Fwe(){var e=Nt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Mwe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Rwe(e){var t=Nt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Bwe(){}function $we(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=ay(e,0,r),n}function Uwe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=Nt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function zwe(e){var t=Xu(e);return t.isst=e.read_shift(4),t}function qwe(e,t,r,n){var s=Nt(10);return Yh(e,t,n,s),s.write_shift(4,r),s}function Hwe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Xu(e);r.biff==2&&e.l++;var i=sy(e,n-e.l,r);return s.val=i,s}function Wwe(e,t,r,n,s){var i=!s||s.biff==8,o=Nt(8+ +i+(1+i)*r.length);return Yh(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function Vwe(e,t,r){var n=e.read_shift(2),s=up(e,0,r);return[n,s]}function Gwe(e,t,r,n){var s=r&&r.biff==5;n||(n=Nt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var Kwe=up;function J8(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function Xwe(e,t){var r=t.biff==8||!t.biff?4:2,n=Nt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Ywe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e$(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Jwe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e$(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function Qwe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function Zwe(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=I2e[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function e5e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Zwe(e,t,n.fStyle,r),n}function Q8(e,t,r,n){var s=r&&r.biff==5;n||(n=Nt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function t5e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function r5e(e){var t=Nt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Z8(e,t,r){var n=Xu(e);(r.biff==2||t==9)&&++e.l;var s=swe(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function n5e(e,t,r,n,s,i){var o=Nt(8);return Yh(e,t,n,o),YB(r,i,o),o}function a5e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Xu(e),s=Ji(e);return n.val=s,n}function s5e(e,t,r,n){var s=Nt(14);return Yh(e,t,n,s),Kh(r,s),s}var eI=mwe;function i5e(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Xh(e,i),l=[];n>e.l;)l.push(sy(e));return[i,s,o,l]}function tI(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=gwe(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var o5e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function rI(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Xh(e,o,r);s&32&&(u=o5e[u.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var d=n==e.l||l===0||!(f>0)?[]:Nke(e,f,r,l);return{chKey:i,Name:u,itab:c,rgce:d}}function a$(e,t,r){if(r.biff<8)return l5e(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(xwe(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function l5e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=ay(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function c5e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=Xh(e,n,r),o=Xh(e,s,r);return[i,o]}function u5e(e,t,r){var n=r$(e);e.l++;var s=e.read_shift(1);return t-=8,[jke(e,t,r),s,n]}function nI(e,t,r){var n=vwe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,bke(e,t,r)]}function d5e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function f5e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=up(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function h5e(e,t,r){return f5e(e,t,r)}function p5e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(wN(e));return r}function m5e(e){var t=Nt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)t$(e[r],t);return t}function x5e(e,t,r){if(r&&r.biff<8)return v5e(e,t,r);var n=n$(e),s=Nwe(e,t-22,n[1]);return{cmo:n,ft:s}}var g5e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function v5e(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((g5e[n]||to)(e,t,r)),{cmo:[s,n,i],ft:o}}function y5e(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=lwe(e,6,r);var l=e.read_shift(2);e.read_shift(2),Cs(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],d=Xh(e,e.lens[u+1]-e.lens[u]-1);if(s+=d,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function b5e(e,t){var r=wN(e);e.l+=16;var n=fwe(e,t-24);return[r,n]}function w5e(e){var t=Nt(24),r=Va(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return ci([t,hwe(e[1])])}function N5e(e,t){e.read_shift(2);var r=wN(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(No,""),[r,n]}function j5e(e){var t=e[1].Tooltip,r=Nt(10+2*(t.length+1));r.write_shift(2,2048);var n=Va(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function k5e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=U8[r]||r,r=e.read_shift(2),t[1]=U8[r]||r,t}function S5e(e){return e||(e=Nt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function _5e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ZB(e));return r}function A5e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ZB(e));return r}function C5e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function s$(e,t,r){if(!r.cellStyles)return to(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function E5e(e,t){var r=Nt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function T5e(e,t){var r={};return t<32||(e.l+=16,r.header=Ji(e),r.footer=Ji(e),e.l+=2),r}function O5e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function P5e(e){for(var t=Nt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var I5e=Xu,D5e=XB,L5e=sy;function F5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function M5e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Xu(e);++e.l;var s=up(e,t-7,r);return n.t="str",n.val=s,n}function R5e(e){var t=Xu(e);++e.l;var r=Ji(e);return t.t="n",t.val=r,t}function B5e(e,t,r){var n=Nt(15);return cy(n,e,t),n.write_shift(8,r,"f"),n}function $5e(e){var t=Xu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function U5e(e,t,r){var n=Nt(9);return cy(n,e,t),n.write_shift(2,r),n}function z5e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function q5e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function H5e(e,t,r){var n=e.l+t,s=Xu(e),i=e.read_shift(2),o=Xh(e,i,r);return e.l=n,s.t="str",s.val=o,s}var W5e=[2,3,48,49,131,139,140,245],fS=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=vN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],f=o0(1);switch(c.type){case"base64":f=Nl(Ol(l));break;case"binary":f=Nl(l);break;case"buffer":case"array":f=l;break}Ni(f,0);var d=f.read_shift(1),p=!!(d&136),h=!1,g=!1;switch(d){case 2:break;case 3:break;case 48:h=!0,p=!0;break;case 49:h=!0,p=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var x=0,m=521;d==2&&(x=f.read_shift(2)),f.l+=3,d!=2&&(x=f.read_shift(4)),x>1048576&&(x=1e6),d!=2&&(m=f.read_shift(2));var v=f.read_shift(2),y=c.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(y=e[f[f.l]]),f.l+=1,f.l+=2),g&&(f.l+=36);for(var w=[],b={},N=Math.min(f.length,d==2?521:m-10-(h?264:0)),S=g?32:11;f.l<N&&f[f.l]!=13;)switch(b={},b.name=j1.utils.decode(y,f.slice(f.l,f.l+S)).replace(/[\u0000\r\n].*$/g,""),f.l+=S,b.type=String.fromCharCode(f.read_shift(1)),d!=2&&!g&&(b.offset=f.read_shift(4)),b.len=f.read_shift(1),d==2&&(b.offset=f.read_shift(2)),b.dec=f.read_shift(1),b.name.length&&w.push(b),d!=2&&(f.l+=g?13:14),b.type){case"B":(!h||b.len!=8)&&c.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+b.type)}if(f[f.l]!==13&&(f.l=m-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=m;var j=0,_=0;for(u[0]=[],_=0;_!=w.length;++_)u[0][_]=w[_].name;for(;x-- >0;){if(f[f.l]===42){f.l+=v;continue}for(++f.l,u[++j]=[],_=0,_=0;_!=w.length;++_){var E=f.slice(f.l,f.l+w[_].len);f.l+=w[_].len,Ni(E,0);var I=j1.utils.decode(y,E);switch(w[_].type){case"C":I.trim().length&&(u[j][_]=I.replace(/\s+$/,""));break;case"D":I.length===8?u[j][_]=new Date(+I.slice(0,4),+I.slice(4,6)-1,+I.slice(6,8)):u[j][_]=I;break;case"F":u[j][_]=parseFloat(I.trim());break;case"+":case"I":u[j][_]=g?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(I.trim().toUpperCase()){case"Y":case"T":u[j][_]=!0;break;case"N":case"F":u[j][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+I+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[j][_]="##MEMO##"+(g?parseInt(I.trim(),10):E.read_shift(4));break;case"N":I=I.replace(/\u0000/g,"").trim(),I&&I!="."&&(u[j][_]=+I||0);break;case"@":u[j][_]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[j][_]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[j][_]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][_]=-E.read_shift(-8,"f");break;case"B":if(h&&w[_].len==8){u[j][_]=E.read_shift(8,"f");break}case"G":case"P":E.l+=w[_].len;break;case"0":if(w[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[_].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=w,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var f=Hx(r(l,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function s(l,c){try{return j0(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Gc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Zo(),d=n5(l,{header:1,raw:!0,cellDates:!0}),p=d[0],h=d.slice(1),g=l["!cols"]||[],x=0,m=0,v=0,y=1;for(x=0;x<p.length;++x){if(((g[x]||{}).DBF||{}).name){p[x]=g[x].DBF.name,++v;continue}if(p[x]!=null){if(++v,typeof p[x]=="number"&&(p[x]=p[x].toString(10)),typeof p[x]!="string")throw new Error("DBF Invalid column name "+p[x]+" |"+typeof p[x]+"|");if(p.indexOf(p[x])!==x){for(m=0;m<1024;++m)if(p.indexOf(p[x]+"_"+m)==-1){p[x]+="_"+m;break}}}}var w=In(l["!ref"]),b=[],N=[],S=[];for(x=0;x<=w.e.c-w.s.c;++x){var j="",_="",E=0,I=[];for(m=0;m<h.length;++m)h[m][x]!=null&&I.push(h[m][x]);if(I.length==0||p[x]==null){b[x]="?";continue}for(m=0;m<I.length;++m){switch(typeof I[m]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=I[m]instanceof Date?"D":"C";break;default:_="C"}E=Math.max(E,String(I[m]).length),j=j&&j!=_?"C":_}E>250&&(E=250),_=((g[x]||{}).DBF||{}).type,_=="C"&&g[x].DBF.len>E&&(E=g[x].DBF.len),j=="B"&&_=="N"&&(j="N",S[x]=g[x].DBF.dec,E=g[x].DBF.len),N[x]=j=="C"||_=="N"?E:i[j]||0,y+=N[x],b[x]=j}var A=f.next(32);for(A.write_shift(4,318902576),A.write_shift(4,h.length),A.write_shift(2,296+32*v),A.write_shift(2,y),x=0;x<4;++x)A.write_shift(4,0);for(A.write_shift(4,0|(+t[KR]||3)<<8),x=0,m=0;x<p.length;++x)if(p[x]!=null){var C=f.next(32),F=(p[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,F,"sbcs"),C.write_shift(1,b[x]=="?"?"C":b[x],"sbcs"),C.write_shift(4,m),C.write_shift(1,N[x]||i[b[x]]||0),C.write_shift(1,S[x]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),m+=N[x]||i[b[x]]||0}var M=f.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<h.length;++x){var B=f.next(y);for(B.write_shift(1,0),m=0;m<p.length;++m)if(p[m]!=null)switch(b[m]){case"L":B.write_shift(1,h[x][m]==null?63:h[x][m]?84:70);break;case"B":B.write_shift(8,h[x][m]||0,"f");break;case"N":var K="0";for(typeof h[x][m]=="number"&&(K=h[x][m].toFixed(S[m]||0)),v=0;v<N[m]-K.length;++v)B.write_shift(1,32);B.write_shift(1,K,"sbcs");break;case"D":h[x][m]?(B.write_shift(4,("0000"+h[x][m].getFullYear()).slice(-4),"sbcs"),B.write_shift(2,("00"+(h[x][m].getMonth()+1)).slice(-2),"sbcs"),B.write_shift(2,("00"+h[x][m].getDate()).slice(-2),"sbcs")):B.write_shift(8,"00000000","sbcs");break;case"C":var G=String(h[x][m]!=null?h[x][m]:"").slice(0,N[m]);for(B.write_shift(1,G,"sbcs"),v=0;v<N[m]-G.length;++v)B.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),i$=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+us(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,h){var g=e[h];return typeof g=="number"?p8(g):g},n=function(p,h,g){var x=h.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?p:p8(x)};e["|"]=254;function s(p,h){switch(h.type){case"base64":return i(Ol(p),h);case"binary":return i(p,h);case"buffer":return i(ln&&Buffer.isBuffer(p)?p.toString("binary"):N0(p),h);case"array":return i(Gh(p),h)}throw new Error("Unrecognized type "+h.type)}function i(p,h){var g=p.split(/[\n\r]+/),x=-1,m=-1,v=0,y=0,w=[],b=[],N=null,S={},j=[],_=[],E=[],I=0,A;for(+h.codepage>=0&&Gc(+h.codepage);v!==g.length;++v){I=0;var C=g[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),F=C.replace(/;;/g,"\0").split(";").map(function(L){return L.replace(/\u0000/g,";")}),M=F[0],B;if(C.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&b.push(C.slice(3).replace(/;;/g,";"));break;case"C":var K=!1,G=!1,Y=!1,q=!1,X=-1,V=-1;for(y=1;y<F.length;++y)switch(F[y].charAt(0)){case"A":break;case"X":m=parseInt(F[y].slice(1))-1,G=!0;break;case"Y":for(x=parseInt(F[y].slice(1))-1,G||(m=0),A=w.length;A<=x;++A)w[A]=[];break;case"K":B=F[y].slice(1),B.charAt(0)==='"'?B=B.slice(1,B.length-1):B==="TRUE"?B=!0:B==="FALSE"?B=!1:isNaN(Zc(B))?isNaN(bx(B).getDate())||(B=Ta(B)):(B=Zc(B),N!==null&&zx(N)&&(B=bN(B))),K=!0;break;case"E":q=!0;var T=Sm(F[y].slice(1),{r:x,c:m});w[x][m]=[w[x][m],T];break;case"S":Y=!0,w[x][m]=[w[x][m],"S5S"];break;case"G":break;case"R":X=parseInt(F[y].slice(1))-1;break;case"C":V=parseInt(F[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+C)}if(K&&(w[x][m]&&w[x][m].length==2?w[x][m][0]=B:w[x][m]=B,N=null),Y){if(q)throw new Error("SYLK shared formula cannot have own formula");var R=X>-1&&w[X][V];if(!R||!R[1])throw new Error("SYLK shared formula cannot find base");w[x][m][1]=k$(R[1],{r:x-X,c:m-V})}break;case"F":var z=0;for(y=1;y<F.length;++y)switch(F[y].charAt(0)){case"X":m=parseInt(F[y].slice(1))-1,++z;break;case"Y":for(x=parseInt(F[y].slice(1))-1,A=w.length;A<=x;++A)w[A]=[];break;case"M":I=parseInt(F[y].slice(1))/20;break;case"F":break;case"G":break;case"P":N=b[parseInt(F[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=F[y].slice(1).split(" "),A=parseInt(E[0],10);A<=parseInt(E[1],10);++A)I=parseInt(E[2],10),_[A-1]=I===0?{hidden:!0}:{wch:I},l0(_[A-1]);break;case"C":m=parseInt(F[y].slice(1))-1,_[m]||(_[m]={});break;case"R":x=parseInt(F[y].slice(1))-1,j[x]||(j[x]={}),I>0?(j[x].hpt=I,j[x].hpx=Nx(I)):I===0&&(j[x].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+C)}z<1&&(N=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+C)}}return j.length>0&&(S["!rows"]=j),_.length>0&&(S["!cols"]=_),h&&h.sheetRows&&(w=w.slice(0,h.sheetRows)),[w,S]}function o(p,h){var g=s(p,h),x=g[0],m=g[1],v=Hx(x,h);return us(m).forEach(function(y){v[y]=m[y]}),v}function l(p,h){return j0(o(p,h),h)}function c(p,h,g,x){var m="C;Y"+(g+1)+";X"+(x+1)+";K";switch(p.t){case"n":m+=p.v||0,p.f&&!p.F&&(m+=";E"+xA(p.f,{r:g,c:x}));break;case"b":m+=p.v?"TRUE":"FALSE";break;case"e":m+=p.w||p.v;break;case"d":m+='"'+(p.w||p.v)+'"';break;case"s":m+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return m}function u(p,h){h.forEach(function(g,x){var m="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?m+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=O1(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=P1(g.wpx)),typeof g.wch=="number"&&(m+=Math.round(g.wch))),m.charAt(m.length-1)!=" "&&p.push(m)})}function f(p,h){h.forEach(function(g,x){var m="F;";g.hidden?m+="M0;":g.hpt?m+="M"+20*g.hpt+";":g.hpx&&(m+="M"+20*I1(g.hpx)+";"),m.length>2&&p.push(m+"R"+(x+1))})}function d(p,h){var g=["ID;PWXL;N;E"],x=[],m=In(p["!ref"]),v,y=Array.isArray(p),w=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),p["!cols"]&&u(g,p["!cols"]),p["!rows"]&&f(g,p["!rows"]),g.push("B;Y"+(m.e.r-m.s.r+1)+";X"+(m.e.c-m.s.c+1)+";D"+[m.s.c,m.s.r,m.e.c,m.e.r].join(" "));for(var b=m.s.r;b<=m.e.r;++b)for(var N=m.s.c;N<=m.e.c;++N){var S=qr({r:b,c:N});v=y?(p[b]||[])[N]:p[S],!(!v||v.v==null&&(!v.f||v.F))&&x.push(c(v,p,b,N))}return g.join(w)+w+x.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:d}}(),o$=function(){function e(i,o){switch(o.type){case"base64":return t(Ol(i),o);case"binary":return t(i,o);case"buffer":return t(ln&&Buffer.isBuffer(i)?i.toString("binary"):N0(i),o);case"array":return t(Gh(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,f=0,d=[];f!==l.length;++f){if(l[f].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var p=l[f].trim().split(","),h=p[0],g=p[1];++f;for(var x=l[f]||"";(x.match(/["]/g)||[]).length&1&&f<l.length-1;)x+=`
`+l[++f];switch(x=x.trim(),+h){case-1:if(x==="BOT"){d[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[c][u]=!0:x==="FALSE"?d[c][u]=!1:isNaN(Zc(g))?isNaN(bx(g).getDate())?d[c][u]=g:d[c][u]=Ta(g):d[c][u]=Zc(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function r(i,o){return Hx(e(i,o),o)}function n(i,o){return j0(r(i,o),o)}var s=function(){var i=function(c,u,f,d,p){c.push(u),c.push(f+","+d),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,u,f,d){c.push(u+","+f),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],f=In(c["!ref"]),d,p=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var h=f.s.r;h<=f.e.r;++h){o(u,-1,0,"BOT");for(var g=f.s.c;g<=f.e.c;++g){var x=qr({r:h,c:g});if(d=p?(c[h]||[])[g]:c[x],!d){o(u,1,0,"");continue}switch(d.t){case"n":var m=d.w;!m&&d.v!=null&&(m=d.v),m==null?d.f&&!d.F?o(u,1,0,"="+d.f):o(u,1,0,""):o(u,0,m,"V");break;case"b":o(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=pc(d.z||Rr[14],Gs(Ta(d.v)))),o(u,0,d.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var v=`\r
`,y=u.join(v);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),l$=function(){function e(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,p){for(var h=d.split(`
`),g=-1,x=-1,m=0,v=[];m!==h.length;++m){var y=h[m].trim().split(":");if(y[0]==="cell"){var w=Va(y[1]);if(v.length<=w.r)for(g=v.length;g<=w.r;++g)v[g]||(v[g]=[]);switch(g=w.r,x=w.c,y[2]){case"t":v[g][x]=e(y[3]);break;case"v":v[g][x]=+y[3];break;case"vtf":var b=y[y.length-1];case"vtc":switch(y[3]){case"nl":v[g][x]=!!+y[4];break;default:v[g][x]=+y[4];break}y[2]=="vtf"&&(v[g][x]=[v[g][x],b])}}}return p&&p.sheetRows&&(v=v.slice(0,p.sheetRows)),v}function n(d,p){return Hx(r(d,p),p)}function s(d,p){return j0(n(d,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var p=[],h=[],g,x="",m=el(d["!ref"]),v=Array.isArray(d),y=m.s.r;y<=m.e.r;++y)for(var w=m.s.c;w<=m.e.c;++w)if(x=qr({r:y,c:w}),g=v?(d[y]||[])[w]:d[x],!(!g||g.v==null||g.t==="z")){switch(h=["cell",x,"t"],g.t){case"s":case"str":h.push(t(g.v));break;case"n":g.f?(h[2]="vtf",h[3]="n",h[4]=g.v,h[5]=t(g.f)):(h[2]="v",h[3]=g.v);break;case"b":h[2]="vt"+(g.f?"f":"c"),h[3]="nl",h[4]=g.v?"1":"0",h[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var b=Gs(Ta(g.v));h[2]="vtc",h[3]="nd",h[4]=""+b,h[5]=g.w||pc(g.z||Rr[14],b);break;case"e":continue}p.push(h.join(":"))}return p.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function f(d){return[i,o,l,o,u(d),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}}(),wx=function(){function e(f,d,p,h,g){g.raw?d[p][h]=f:f===""||(f==="TRUE"?d[p][h]=!0:f==="FALSE"?d[p][h]=!1:isNaN(Zc(f))?isNaN(bx(f).getDate())?d[p][h]=f:d[p][h]=Ta(f):d[p][h]=Zc(f))}function t(f,d){var p=d||{},h=[];if(!f||f.length===0)return h;for(var g=f.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var m=10,v=0,y=0;y<=x;++y)v=g[y].indexOf(" "),v==-1?v=g[y].length:v++,m=Math.max(m,v);for(y=0;y<=x;++y){h[y]=[];var w=0;for(e(g[y].slice(0,m).trim(),h,y,w,p),w=1;w<=(g[y].length-m)/10+1;++w)e(g[y].slice(m+(w-1)*10,m+w*10).trim(),h,y,w,p)}return p.sheetRows&&(h=h.slice(0,p.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var d={},p=!1,h=0,g=0;h<f.length;++h)(g=f.charCodeAt(h))==34?p=!p:!p&&g in r&&(d[g]=(d[g]||0)+1);g=[];for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&g.push([d[h],h]);if(!g.length){d=n;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&g.push([d[h],h])}return g.sort(function(x,m){return x[0]-m[0]||n[x[1]]-n[m[1]]}),r[g.pop()[1]]||44}function i(f,d){var p=d||{},h="",g=p.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(h=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(h=f.charAt(4),f=f.slice(6)):h=s(f.slice(0,1024)):p&&p.FS?h=p.FS:h=s(f.slice(0,1024));var m=0,v=0,y=0,w=0,b=0,N=h.charCodeAt(0),S=!1,j=0,_=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var E=p.dateNF!=null?Obe(p.dateNF):null;function I(){var A=f.slice(w,b),C={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)C.t="z";else if(p.raw)C.t="s",C.v=A;else if(A.trim().length===0)C.t="s",C.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(C.t="s",C.v=A.slice(2,-1).replace(/""/g,'"')):i4e(A)?(C.t="n",C.f=A.slice(1)):(C.t="s",C.v=A);else if(A=="TRUE")C.t="b",C.v=!0;else if(A=="FALSE")C.t="b",C.v=!1;else if(!isNaN(y=Zc(A)))C.t="n",p.cellText!==!1&&(C.w=A),C.v=y;else if(!isNaN(bx(A).getDate())||E&&A.match(E)){C.z=p.dateNF||Rr[14];var F=0;E&&A.match(E)&&(A=Pbe(A,p.dateNF,A.match(E)||[]),F=1),p.cellDates?(C.t="d",C.v=Ta(A,F)):(C.t="n",C.v=Gs(Ta(A,F))),p.cellText!==!1&&(C.w=pc(C.z,C.v instanceof Date?Gs(C.v):C.v)),p.cellNF||delete C.z}else C.t="s",C.v=A;if(C.t=="z"||(p.dense?(g[m]||(g[m]=[]),g[m][v]=C):g[qr({c:v,r:m})]=C),w=b+1,_=f.charCodeAt(w),x.e.c<v&&(x.e.c=v),x.e.r<m&&(x.e.r=m),j==N)++v;else if(v=0,++m,p.sheetRows&&p.sheetRows<=m)return!0}e:for(;b<f.length;++b)switch(j=f.charCodeAt(b)){case 34:_===34&&(S=!S);break;case N:case 10:case 13:if(!S&&I())break e;break}return b-w>0&&I(),g["!ref"]=rn(x),g}function o(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,d):Hx(t(f,d),d)}function l(f,d){var p="",h=d.type=="string"?[0,0,0,0]:kA(f,d);switch(d.type){case"base64":p=Ol(f);break;case"binary":p=f;break;case"buffer":d.codepage==65001?p=f.toString("utf8"):d.codepage&&typeof j1<"u"||(p=ln&&Buffer.isBuffer(f)?f.toString("binary"):N0(f));break;case"array":p=Gh(f);break;case"string":p=f;break;default:throw new Error("Unrecognized type "+d.type)}return h[0]==239&&h[1]==187&&h[2]==191?p=aa(p.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?p=aa(p):d.type=="binary"&&typeof j1<"u",p.slice(0,19)=="socialcalc:version:"?l$.to_sheet(d.type=="string"?p:aa(p),d):o(p,d)}function c(f,d){return j0(l(f,d),d)}function u(f){for(var d=[],p=In(f["!ref"]),h,g=Array.isArray(f),x=p.s.r;x<=p.e.r;++x){for(var m=[],v=p.s.c;v<=p.e.c;++v){var y=qr({r:x,c:v});if(h=g?(f[x]||[])[v]:f[y],!h||h.v==null){m.push("          ");continue}for(var w=(h.w||(zd(h),h.w)||"").slice(0,10);w.length<10;)w+=" ";m.push(w+(v===0?" ":""))}d.push(m.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function V5e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=i$.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return wx.to_workbook(e,t)}}var Eh=function(){function e(T,R,z){if(T){Ni(T,T.l||0);for(var L=z.Enum||X;T.l<T.length;){var H=T.read_shift(2),ne=L[H]||L[65535],se=T.read_shift(2),Q=T.l+se,re=ne.f&&ne.f(T,se,z);if(T.l=Q,R(re,ne,H))return}}}function t(T,R){switch(R.type){case"base64":return r(Nl(Ol(T)),R);case"binary":return r(Nl(T),R);case"buffer":case"array":return r(T,R)}throw"Unsupported type "+R.type}function r(T,R){if(!T)return T;var z=R||{},L=z.dense?[]:{},H="Sheet1",ne="",se=0,Q={},re=[],Ae=[],ee={s:{r:0,c:0},e:{r:0,c:0}},Me=z.sheetRows||0;if(T[2]==0&&(T[3]==8||T[3]==9)&&T.length>=16&&T[14]==5&&T[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(T[2]==2)z.Enum=X,e(T,function(je,ce,ye){switch(ye){case 0:z.vers=je,je>=4096&&(z.qpro=!0);break;case 6:ee=je;break;case 204:je&&(ne=je);break;case 222:ne=je;break;case 15:case 51:z.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:ye==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=z.dateNF||Rr[14],z.cellDates&&(je[1].t="d",je[1].v=bN(je[1].v))),z.qpro&&je[3]>se&&(L["!ref"]=rn(ee),Q[H]=L,re.push(H),L=z.dense?[]:{},ee={s:{r:0,c:0},e:{r:0,c:0}},se=je[3],H=ne||"Sheet"+(se+1),ne="");var me=z.dense?(L[je[0].r]||[])[je[0].c]:L[qr(je[0])];if(me){me.t=je[1].t,me.v=je[1].v,je[1].z!=null&&(me.z=je[1].z),je[1].f!=null&&(me.f=je[1].f);break}z.dense?(L[je[0].r]||(L[je[0].r]=[]),L[je[0].r][je[0].c]=je[1]):L[qr(je[0])]=je[1];break}},z);else if(T[2]==26||T[2]==14)z.Enum=V,T[2]==14&&(z.qpro=!0,T.l=0),e(T,function(je,ce,ye){switch(ye){case 204:H=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>se&&(L["!ref"]=rn(ee),Q[H]=L,re.push(H),L=z.dense?[]:{},ee={s:{r:0,c:0},e:{r:0,c:0}},se=je[3],H="Sheet"+(se+1)),Me>0&&je[0].r>=Me)break;z.dense?(L[je[0].r]||(L[je[0].r]=[]),L[je[0].r][je[0].c]=je[1]):L[qr(je[0])]=je[1],ee.e.c<je[0].c&&(ee.e.c=je[0].c),ee.e.r<je[0].r&&(ee.e.r=je[0].r);break;case 27:je[14e3]&&(Ae[je[14e3][0]]=je[14e3][1]);break;case 1537:Ae[je[0]]=je[1],je[0]==se&&(H=je[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+T[2]);if(L["!ref"]=rn(ee),Q[ne||H]=L,re.push(ne||H),!Ae.length)return{SheetNames:re,Sheets:Q};for(var ze={},oe=[],J=0;J<Ae.length;++J)Q[re[J]]?(oe.push(Ae[J]||re[J]),ze[Ae[J]]=Q[Ae[J]]||Q[re[J]]):(oe.push(Ae[J]),ze[Ae[J]]={"!ref":"A1"});return{SheetNames:oe,Sheets:ze}}function n(T,R){var z=R||{};if(+z.codepage>=0&&Gc(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var L=Zo(),H=In(T["!ref"]),ne=Array.isArray(T),se=[];tr(L,0,i(1030)),tr(L,6,c(H));for(var Q=Math.min(H.e.r,8191),re=H.s.r;re<=Q;++re)for(var Ae=vs(re),ee=H.s.c;ee<=H.e.c;++ee){re===H.s.r&&(se[ee]=Wa(ee));var Me=se[ee]+Ae,ze=ne?(T[re]||[])[ee]:T[Me];if(!(!ze||ze.t=="z"))if(ze.t=="n")(ze.v|0)==ze.v&&ze.v>=-32768&&ze.v<=32767?tr(L,13,h(re,ee,ze.v)):tr(L,14,x(re,ee,ze.v));else{var oe=zd(ze);tr(L,15,d(re,ee,oe.slice(0,239)))}}return tr(L,1),L.end()}function s(T,R){var z=R||{};if(+z.codepage>=0&&Gc(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var L=Zo();tr(L,0,o(T));for(var H=0,ne=0;H<T.SheetNames.length;++H)(T.Sheets[T.SheetNames[H]]||{})["!ref"]&&tr(L,27,q(T.SheetNames[H],ne++));var se=0;for(H=0;H<T.SheetNames.length;++H){var Q=T.Sheets[T.SheetNames[H]];if(!(!Q||!Q["!ref"])){for(var re=In(Q["!ref"]),Ae=Array.isArray(Q),ee=[],Me=Math.min(re.e.r,8191),ze=re.s.r;ze<=Me;++ze)for(var oe=vs(ze),J=re.s.c;J<=re.e.c;++J){ze===re.s.r&&(ee[J]=Wa(J));var je=ee[J]+oe,ce=Ae?(Q[ze]||[])[J]:Q[je];if(!(!ce||ce.t=="z"))if(ce.t=="n")tr(L,23,I(ze,J,se,ce.v));else{var ye=zd(ce);tr(L,22,j(ze,J,se,ye.slice(0,239)))}}++se}}return tr(L,1),L.end()}function i(T){var R=Nt(2);return R.write_shift(2,T),R}function o(T){var R=Nt(26);R.write_shift(2,4096),R.write_shift(2,4),R.write_shift(4,0);for(var z=0,L=0,H=0,ne=0;ne<T.SheetNames.length;++ne){var se=T.SheetNames[ne],Q=T.Sheets[se];if(!(!Q||!Q["!ref"])){++H;var re=el(Q["!ref"]);z<re.e.r&&(z=re.e.r),L<re.e.c&&(L=re.e.c)}}return z>8191&&(z=8191),R.write_shift(2,z),R.write_shift(1,H),R.write_shift(1,L),R.write_shift(2,0),R.write_shift(2,0),R.write_shift(1,1),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(4,0),R}function l(T,R,z){var L={s:{c:0,r:0},e:{c:0,r:0}};return R==8&&z.qpro?(L.s.c=T.read_shift(1),T.l++,L.s.r=T.read_shift(2),L.e.c=T.read_shift(1),T.l++,L.e.r=T.read_shift(2),L):(L.s.c=T.read_shift(2),L.s.r=T.read_shift(2),R==12&&z.qpro&&(T.l+=2),L.e.c=T.read_shift(2),L.e.r=T.read_shift(2),R==12&&z.qpro&&(T.l+=2),L.s.c==65535&&(L.s.c=L.e.c=L.s.r=L.e.r=0),L)}function c(T){var R=Nt(8);return R.write_shift(2,T.s.c),R.write_shift(2,T.s.r),R.write_shift(2,T.e.c),R.write_shift(2,T.e.r),R}function u(T,R,z){var L=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(L[0].c=T.read_shift(1),L[3]=T.read_shift(1),L[0].r=T.read_shift(2),T.l+=2):(L[2]=T.read_shift(1),L[0].c=T.read_shift(2),L[0].r=T.read_shift(2)),L}function f(T,R,z){var L=T.l+R,H=u(T,R,z);if(H[1].t="s",z.vers==20768){T.l++;var ne=T.read_shift(1);return H[1].v=T.read_shift(ne,"utf8"),H}return z.qpro&&T.l++,H[1].v=T.read_shift(L-T.l,"cstr"),H}function d(T,R,z){var L=Nt(7+z.length);L.write_shift(1,255),L.write_shift(2,R),L.write_shift(2,T),L.write_shift(1,39);for(var H=0;H<L.length;++H){var ne=z.charCodeAt(H);L.write_shift(1,ne>=128?95:ne)}return L.write_shift(1,0),L}function p(T,R,z){var L=u(T,R,z);return L[1].v=T.read_shift(2,"i"),L}function h(T,R,z){var L=Nt(7);return L.write_shift(1,255),L.write_shift(2,R),L.write_shift(2,T),L.write_shift(2,z,"i"),L}function g(T,R,z){var L=u(T,R,z);return L[1].v=T.read_shift(8,"f"),L}function x(T,R,z){var L=Nt(13);return L.write_shift(1,255),L.write_shift(2,R),L.write_shift(2,T),L.write_shift(8,z,"f"),L}function m(T,R,z){var L=T.l+R,H=u(T,R,z);if(H[1].v=T.read_shift(8,"f"),z.qpro)T.l=L;else{var ne=T.read_shift(2);b(T.slice(T.l,T.l+ne),H),T.l+=ne}return H}function v(T,R,z){var L=R&32768;return R&=-32769,R=(L?T:0)+(R>=8192?R-16384:R),(L?"":"$")+(z?Wa(R):vs(R))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function b(T,R){Ni(T,0);for(var z=[],L=0,H="",ne="",se="",Q="";T.l<T.length;){var re=T[T.l++];switch(re){case 0:z.push(T.read_shift(8,"f"));break;case 1:ne=v(R[0].c,T.read_shift(2),!0),H=v(R[0].r,T.read_shift(2),!1),z.push(ne+H);break;case 2:{var Ae=v(R[0].c,T.read_shift(2),!0),ee=v(R[0].r,T.read_shift(2),!1);ne=v(R[0].c,T.read_shift(2),!0),H=v(R[0].r,T.read_shift(2),!1),z.push(Ae+ee+":"+ne+H)}break;case 3:if(T.l<T.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(T.read_shift(2));break;case 6:{for(var Me="";re=T[T.l++];)Me+=String.fromCharCode(re);z.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:Q=z.pop(),se=z.pop(),z.push(["AND","OR"][re-20]+"("+se+","+Q+")");break;default:if(re<32&&w[re])Q=z.pop(),se=z.pop(),z.push(se+w[re]+Q);else if(y[re]){if(L=y[re][1],L==69&&(L=T[T.l++]),L>z.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+z.join("|")+"|");return}var ze=z.slice(-L);z.length-=L,z.push(y[re][0]+"("+ze.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}z.length==1?R[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function N(T){var R=[{c:0,r:0},{t:"n",v:0},0];return R[0].r=T.read_shift(2),R[3]=T[T.l++],R[0].c=T[T.l++],R}function S(T,R){var z=N(T);return z[1].t="s",z[1].v=T.read_shift(R-4,"cstr"),z}function j(T,R,z,L){var H=Nt(6+L.length);H.write_shift(2,T),H.write_shift(1,z),H.write_shift(1,R),H.write_shift(1,39);for(var ne=0;ne<L.length;++ne){var se=L.charCodeAt(ne);H.write_shift(1,se>=128?95:se)}return H.write_shift(1,0),H}function _(T,R){var z=N(T);z[1].v=T.read_shift(2);var L=z[1].v>>1;if(z[1].v&1)switch(L&7){case 0:L=(L>>3)*5e3;break;case 1:L=(L>>3)*500;break;case 2:L=(L>>3)/20;break;case 3:L=(L>>3)/200;break;case 4:L=(L>>3)/2e3;break;case 5:L=(L>>3)/2e4;break;case 6:L=(L>>3)/16;break;case 7:L=(L>>3)/64;break}return z[1].v=L,z}function E(T,R){var z=N(T),L=T.read_shift(4),H=T.read_shift(4),ne=T.read_shift(2);if(ne==65535)return L===0&&H===3221225472?(z[1].t="e",z[1].v=15):L===0&&H===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var se=ne&32768;return ne=(ne&32767)-16446,z[1].v=(1-se*2)*(H*Math.pow(2,ne+32)+L*Math.pow(2,ne)),z}function I(T,R,z,L){var H=Nt(14);if(H.write_shift(2,T),H.write_shift(1,z),H.write_shift(1,R),L==0)return H.write_shift(4,0),H.write_shift(4,0),H.write_shift(2,65535),H;var ne=0,se=0,Q=0,re=0;return L<0&&(ne=1,L=-L),se=Math.log2(L)|0,L/=Math.pow(2,se-31),re=L>>>0,re&2147483648||(L/=2,++se,re=L>>>0),L-=re,re|=2147483648,re>>>=0,L*=Math.pow(2,32),Q=L>>>0,H.write_shift(4,Q),H.write_shift(4,re),se+=16383+(ne?32768:0),H.write_shift(2,se),H}function A(T,R){var z=E(T);return T.l+=R-14,z}function C(T,R){var z=N(T),L=T.read_shift(4);return z[1].v=L>>6,z}function F(T,R){var z=N(T),L=T.read_shift(8,"f");return z[1].v=L,z}function M(T,R){var z=F(T);return T.l+=R-10,z}function B(T,R){return T[T.l+R-1]==0?T.read_shift(R,"cstr"):""}function K(T,R){var z=T[T.l++];z>R-1&&(z=R-1);for(var L="";L.length<z;)L+=String.fromCharCode(T[T.l++]);return L}function G(T,R,z){if(!(!z.qpro||R<21)){var L=T.read_shift(1);T.l+=17,T.l+=1,T.l+=2;var H=T.read_shift(R-21,"cstr");return[L,H]}}function Y(T,R){for(var z={},L=T.l+R;T.l<L;){var H=T.read_shift(2);if(H==14e3){for(z[H]=[0,""],z[H][0]=T.read_shift(2);T[T.l];)z[H][1]+=String.fromCharCode(T[T.l]),T.l++;T.l++}}return z}function q(T,R){var z=Nt(5+T.length);z.write_shift(2,14e3),z.write_shift(2,R);for(var L=0;L<T.length;++L){var H=T.charCodeAt(L);z[z.l++]=H>127?95:H}return z[z.l++]=0,z}var X={0:{n:"BOF",f:Cs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:g},15:{n:"LABEL",f},16:{n:"FORMULA",f:m},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:B},222:{n:"SHEETNAMELP",f:K},65535:{n:""}},V={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Y},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:B},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:G},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}();function G5e(e){var t={},r=e.match(ro),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Hr(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=U6[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var K5e=function(){var e=_1("t"),t=_1("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:On(o[1])},c=i.match(t);return c&&(l.s=G5e(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),X5e=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),Y5e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,J5e=/<(?:\w+:)?r>/,Q5e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function dA(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=On(aa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=aa(e),r&&(n.h=J6(n.t))):e.match(J5e)&&(n.r=aa(e),n.t=On(aa((e.replace(Q5e,"").match(Y5e)||[]).join("").replace(ro,""))),r&&(n.h=X5e(K5e(n.r)))),n):{t:""}}var Z5e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,eNe=/<(?:\w+:)?(?:si|sstItem)>/g,tNe=/<\/(?:\w+:)?(?:si|sstItem)>/;function rNe(e,t){var r=[],n="";if(!e)return r;var s=e.match(Z5e);if(s){n=s[2].replace(eNe,"").split(tNe);for(var i=0;i!=n.length;++i){var o=dA(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=Hr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var nNe=/^\s|\s$|[\t\n\r]/;function c$(e,t){if(!t.bookSST)return"";var r=[ys];r[r.length]=er("sst",null,{xmlns:sp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(nNe)&&(i+=' xml:space="preserve"'),i+=">"+Yn(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function aNe(e){return[e.read_shift(4),e.read_shift(4)]}function sNe(e,t){var r=[],n=!1;return Kd(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function iNe(e,t){return t||(t=Nt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var oNe=g2e;function lNe(e){var t=Zo();Mt(t,159,iNe(e));for(var r=0;r<e.length;++r)Mt(t,19,oNe(e[r]));return Mt(t,160),t.end()}function u$(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Od(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function cNe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Od(e,4),t.U=Od(e,4),t.W=Od(e,4),t}function uNe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function dNe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(uNe(e));return t}function fNe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function hNe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Od(e,4),t.U=Od(e,4),t.W=Od(e,4),t}function pNe(e){var t=hNe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function d$(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function f$(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function mNe(e){var t=Od(e);switch(t.Minor){case 2:return[t.Minor,xNe(e)];case 3:return[t.Minor,gNe()];case 4:return[t.Minor,vNe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function xNe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=d$(e,r),s=f$(e,e.length-e.l);return{t:"Std",h:n,v:s}}function gNe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function vNe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ro,function(i){var o=Hr(i);switch(Ku(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function yNe(e,t){var r={},n=r.EncryptionVersionInfo=Od(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=d$(e,s),t-=s,r.EncryptionVerifier=f$(e,t),r}function bNe(e){var t={},r=t.EncryptionVersionInfo=Od(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function fA(e){var t=0,r,n=u$(e),s=n.length+1,i,o,l,c,u;for(r=o0(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var h$=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var f=o[u],d=0;d!=7;++d)f&64&&(l^=r[c]),f*=2,--c;return l};return function(o){for(var l=u$(o),c=i(l),u=l.length,f=o0(16),d=0;d!=16;++d)f[d]=0;var p,h,g;for((u&1)===1&&(p=c>>8,f[u]=s(e[0],p),--u,p=c&255,h=l[l.length-1],f[u]=s(h,p));u>0;)--u,p=c>>8,f[u]=s(l[u],p),--u,p=c&255,f[u]=s(l[u],p);for(u=15,g=15-l.length;g>0;)p=c>>8,f[u]=s(e[g],p),--u,--g,p=c&255,f[u]=s(l[u],p),--u,--g;return f}}(),wNe=function(e,t,r,n,s){s||(s=t),n||(n=h$(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},NNe=function(e){var t=0,r=h$(e);return function(n){var s=wNe("",n,t,r);return t=s[1],s[0]}};function jNe(e,t,r,n){var s={key:Cs(e),verificationBytes:Cs(e)};return r.password&&(s.verifier=fA(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=NNe(r.password)),s}function kNe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=bNe(e):n.Data=yNe(e,t),n}function SNe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?kNe(e,t-2,n):jNe(e,r.biff>=8?t:t-2,r,n),n}var p$=function(){function e(s,i){switch(i.type){case"base64":return t(Ol(s),i);case"binary":return t(s,i);case"buffer":return t(ln&&Buffer.isBuffer(s)?s.toString("binary"):N0(s),i);case"array":return t(Gh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,d){Array.isArray(l)&&(l[d]=[]);for(var p=/\\\w+\b/g,h=0,g,x=-1;g=p.exec(f);){switch(g[0]){case"\\cell":var m=f.slice(h,p.lastIndex-g[0].length);if(m[0]==" "&&(m=m.slice(1)),++x,m.length){var v={v:m,t:"s"};Array.isArray(l)?l[d][x]=v:l[qr({r:d,c:x})]=v}break}h=p.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=rn(u),l}function r(s,i){return j0(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=In(s["!ref"]),l,c=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var d=qr({r:u,c:f});l=c?(s[u]||[])[f]:s[d],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(zd(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function _Ne(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function T1(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function ANe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,u=s+i;switch(c=o/(u>1?2-u:u),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function CNe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function e5(e,t){if(t===0)return e;var r=ANe(_Ne(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),T1(CNe(r))}var m$=6,ENe=15,TNe=1,Yi=m$;function O1(e){return Math.floor((e+Math.round(128/Yi)/256)*Yi)}function P1(e){return Math.floor((e-5)/Yi*100+.5)/100}function t5(e){return Math.round((e*Yi+5)/Yi*256)/256}function Kj(e){return t5(P1(O1(e)))}function hA(e){var t=Math.abs(e-Kj(e)),r=Yi;if(t>.005)for(Yi=TNe;Yi<ENe;++Yi)Math.abs(e-Kj(e))<=t&&(t=Math.abs(e-Kj(e)),r=Yi);Yi=r}function l0(e){e.width?(e.wpx=O1(e.width),e.wch=P1(e.wpx),e.MDW=Yi):e.wpx?(e.wch=P1(e.wpx),e.width=t5(e.wch),e.MDW=Yi):typeof e.wch=="number"&&(e.width=t5(e.wch),e.wpx=O1(e.width),e.MDW=Yi),e.customWidth&&delete e.customWidth}var ONe=96,x$=ONe;function I1(e){return e*96/x$}function Nx(e){return e*x$/96}var PNe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function INe(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(ro)||[]).forEach(function(o){var l=Hr(o);switch(Ku(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=_a(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=_a(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function DNe(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(ro)||[]).forEach(function(o){var l=Hr(o);switch(Ku(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function LNe(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(ro)||[]).forEach(function(o){var l=Hr(o);switch(Ku(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=aa(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?_a(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?_a(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?_a(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?_a(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?_a(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?_a(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?_a(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=U6[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=_a(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=Ah[s.color.index];s.color.index==81&&(c=Ah[1]),c||(c=Ah[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=e5(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function FNe(e,t,r){t.NumberFmt=[];for(var n=us(Rr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Rr[n[s]];var i=e[0].match(ro);if(i)for(s=0;s<i.length;++s){var o=Hr(i[s]);switch(Ku(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=On(aa(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Td(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function MNe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=er("numFmt",null,{numFmtId:n,formatCode:Yn(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=er("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Cb=["numFmtId","fillId","fontId","borderId","xfId"],Eb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function RNe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(ro)||[]).forEach(function(i){var o=Hr(i),l=0;switch(Ku(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<Cb.length;++l)n[Cb[l]]&&(n[Cb[l]]=parseInt(n[Cb[l]],10));for(l=0;l<Eb.length;++l)n[Eb[l]]&&(n[Eb[l]]=_a(n[Eb[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=_a(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function BNe(e){var t=[];return t[t.length]=er("cellXfs",null),e.forEach(function(r){t[t.length]=er("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=er("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var $Ne=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=l.match(t))&&FNe(d,f,u),(d=l.match(s))&&LNe(d,f,c,u),(d=l.match(n))&&DNe(d,f,c,u),(d=l.match(i))&&INe(d,f,c,u),(d=l.match(r))&&RNe(d,f,u),f}}();function g$(e,t){var r=[ys,er("styleSheet",null,{xmlns:sp[0],"xmlns:vt":qs.vt})],n;return e.SSF&&(n=MNe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=BNe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function UNe(e,t){var r=e.read_shift(2),n=Zi(e);return[r,n]}function zNe(e,t,r){r||(r=Nt(6+4*t.length)),r.write_shift(2,e),di(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function qNe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=k2e(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=j2e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Zi(e),n}function HNe(e,t){t||(t=Nt(25+4*32)),t.write_shift(2,e.sz*20),S2e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Jw(e.color,t);var n=0;return n=2,t.write_shift(1,n),di(e.name,t),t.length>t.l?t.slice(0,t.l):t}var WNe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Xj,VNe=to;function aI(e,t){t||(t=Nt(4*3+8*7+16*1)),Xj||(Xj=vN(WNe));var r=Xj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Jw({auto:1},t),Jw({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function GNe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function v$(e,t,r){r||(r=Nt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Tg(e,t){return t||(t=Nt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var KNe=to;function XNe(e,t){return t||(t=Nt(51)),t.write_shift(1,0),Tg(null,t),Tg(null,t),Tg(null,t),Tg(null,t),Tg(null,t),t.length>t.l?t.slice(0,t.l):t}function YNe(e,t){return t||(t=Nt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Yw(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function JNe(e,t,r){var n=Nt(2052);return n.write_shift(4,e),Yw(t,n),Yw(r,n),n.length>n.l?n.slice(0,n.l):n}function QNe(e,t,r){var n={};n.NumberFmt=[];for(var s in Rr)n.NumberFmt[s]=Rr[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Kd(e,function(c,u,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],Td(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=e5(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function ZNe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Mt(e,615,eu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Mt(e,44,zNe(s,t[s]))}),Mt(e,616))}}function eje(e){var t=1;Mt(e,611,eu(t)),Mt(e,43,HNe({sz:12,color:{theme:1},name:"Calibri",family:2})),Mt(e,612)}function tje(e){var t=2;Mt(e,603,eu(t)),Mt(e,45,aI({patternType:"none"})),Mt(e,45,aI({patternType:"gray125"})),Mt(e,604)}function rje(e){var t=1;Mt(e,613,eu(t)),Mt(e,46,XNe()),Mt(e,614)}function nje(e){var t=1;Mt(e,626,eu(t)),Mt(e,47,v$({numFmtId:0},65535)),Mt(e,627)}function aje(e,t){Mt(e,617,eu(t.length)),t.forEach(function(r){Mt(e,47,v$(r,0))}),Mt(e,618)}function sje(e){var t=1;Mt(e,619,eu(t)),Mt(e,48,YNe({xfId:0,name:"Normal"})),Mt(e,620)}function ije(e){var t=0;Mt(e,505,eu(t)),Mt(e,506)}function oje(e){var t=0;Mt(e,508,JNe(t,"TableStyleMedium9","PivotStyleMedium4")),Mt(e,509)}function lje(e,t){var r=Zo();return Mt(r,278),ZNe(r,e.SSF),eje(r),tje(r),rje(r),nje(r),aje(r,t.cellXfs),sje(r),ije(r),oje(r),Mt(r,279),r.end()}var cje=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function uje(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ro)||[]).forEach(function(s){var i=Hr(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[cje.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function dje(){}function fje(){}var hje=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,pje=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,mje=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function xje(e,t,r){t.themeElements={};var n;[["clrScheme",hje,uje],["fontScheme",pje,dje],["fmtScheme",mje,fje]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var gje=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function y$(e,t){(!e||e.length===0)&&(e=pA());var r,n={};if(!(r=e.match(gje)))throw new Error("themeElements not found in theme");return xje(r[0],n,t),n.raw=e,n}function pA(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function vje(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=dB(i,{type:"array"})}catch{return}var l=jl(o,"theme/theme/theme1.xml",!0);if(l)return y$(l,r)}}function yje(e){return e.read_shift(4)}function bje(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=wje(e,4);break;case 2:t.xclrValue=QB(e);break;case 3:t.xclrValue=yje(e);break;case 4:e.l+=4;break}return e.l+=8,t}function wje(e,t){return to(e,t)}function Nje(e,t){return to(e,t)}function jje(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=bje(e);break;case 6:n[1]=Nje(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function kje(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(jje(e,r-e.l));return{ixfe:n,ext:i}}function Sje(e,t){t.forEach(function(r){switch(r[0]){}})}function _je(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Zi(e)}}function Aje(e){var t=Nt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),di(e.name,t),t.slice(0,t.l)}function Cje(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Eje(e){var t=Nt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Tje(e,t){var r=Nt(8+2*t.length);return r.write_shift(4,e),di(t,r),r.slice(0,r.l)}function Oje(e){return e.l+=4,e.read_shift(4)!=0}function Pje(e,t){var r=Nt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Ije(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Kd(e,function(c,u,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(d){l==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):l==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function Dje(){var e=Zo();return Mt(e,332),Mt(e,334,eu(1)),Mt(e,335,Aje({name:"XLDAPR",version:12e4,flags:3496657072})),Mt(e,336),Mt(e,339,Tje(1,"XLDAPR")),Mt(e,52),Mt(e,35,eu(514)),Mt(e,4096,eu(0)),Mt(e,4097,Zl(1)),Mt(e,36),Mt(e,53),Mt(e,340),Mt(e,337,Pje(1)),Mt(e,51,Eje([[1,0]])),Mt(e,338),Mt(e,333),e.end()}function Lje(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(ro,function(l){var c=Hr(l);switch(Ku(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function b$(){var e=[ys];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Fje(e){var t=[];if(!e)return t;var r=1;return(e.match(ro)||[]).forEach(function(n){var s=Hr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Mje(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=qr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Rje(e,t,r){var n=[];return Kd(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function Bje(e,t,r,n){if(!e)return e;var s=n||{},i=!1;Kd(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function $je(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var dm=1024;function w$(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[er("xml",null,{"xmlns:v":yl.v,"xmlns:o":yl.o,"xmlns:x":yl.x,"xmlns:mv":yl.mv}).replace(/\/>/,">"),er("o:shapelayout",er("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),er("v:shapetype",[er("v:stroke",null,{joinstyle:"miter"}),er("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];dm<e*1e3;)dm+=1e3;return t.forEach(function(i){var o=Va(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?er("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=er("v:fill",c,l),f={on:"t",obscured:"t"};++dm,s=s.concat(["<v:shape"+A1({id:"_x0000_s"+dm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,er("v:shadow",null,f),er("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ji("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),ji("x:AutoFill","False"),ji("x:Row",String(o.r)),ji("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function sI(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=Va(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=In(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=rn(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(f.a==n[d].id){f.a=n[d].name||f.a;break}}i.c.push(f)})}function Uje(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Hr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Va(c.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var d=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!d&&!!d[1]&&dA(d[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=p.h),n.push(u)}}}}),n}function N$(e){var t=[ys,er("comments",null,{xmlns:sp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=Yn(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(Yn(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(ji("t",Yn(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(ji("t",Yn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function zje(e,t){var r=[],n=!1,s={},i=0;return e.replace(ro,function(l,c){var u=Hr(l);switch(Ku(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function qje(e,t,r){var n=[ys,er("ThreadedComments",null,{xmlns:qs.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(er("threadedComment",ji("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Hje(e,t){var r=[],n=!1;return e.replace(ro,function(i){var o=Hr(i);switch(Ku(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function Wje(e){var t=[ys,er("personList",null,{xmlns:qs.TCMNT,"xmlns:x":sp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(er("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Vje(e){var t={};t.iauthor=e.read_shift(4);var r=cp(e);return t.rfx=r.s,t.ref=qr(r.s),e.l+=16,t}function Gje(e,t){return t==null&&(t=Nt(36)),t.write_shift(4,e[1].iauthor),Wx(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Kje=Zi;function Xje(e){return di(e.slice(0,54))}function Yje(e,t){var r=[],n=[],s={},i=!1;return Kd(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function Jje(e){var t=Zo(),r=[];return Mt(t,628),Mt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Mt(t,632,Xje(s.a)))})}),Mt(t,631),Mt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Va(n[0]),e:Va(n[0])};Mt(t,635,Gje([i,s])),s.t&&s.t.length>0&&Mt(t,637,y2e(s)),Mt(t,636),delete s.iauthor})}),Mt(t,634),Mt(t,629),t.end()}var Qje="application/vnd.ms-office.vbaProject";function Zje(e){var t=Pr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Pr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Pr.write(t)}function e4e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Pr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var j$=["xlsb","xlsm","xlam","biff8","xla"];function t4e(){return{"!type":"dialog"}}function r4e(){return{"!type":"dialog"}}function n4e(){return{"!type":"macro"}}function a4e(){return{"!type":"macro"}}var Sm=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,c?u+=t.r:--u,s+(l?"":"$")+Wa(f)+(c?"":"$")+vs(u)}return function(s,i){return t=i,s.replace(e,r)}}(),mA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xA=function(){return function(t,r){return t.replace(mA,function(n,s,i,o,l,c){var u=rA(o)-(i?0:r.c),f=tA(c)-(l?0:r.r),d=f==0?"":l?f+1:"["+f+"]",p=u==0?"":i?u+1:"["+u+"]";return s+"R"+d+"C"+p})}}();function k$(e,t){return e.replace(mA,function(r,n,s,i,o,l){return n+(s=="$"?s+i:Wa(rA(i)+t.c))+(o=="$"?o+l:vs(tA(l)+t.r))})}function s4e(e,t,r){var n=el(t),s=n.s,i=Va(r),o={r:i.r-s.r,c:i.c-s.c};return k$(e,o)}function i4e(e){return e.length!=1}function iI(e){return e.replace(/_xlfn\./g,"")}function Ss(e){e.l+=1}function c0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function S$(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return _$(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=c0(e),l=c0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function _$(e){var t=c0(e),r=c0(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function o4e(e,t,r){if(r.biff<8)return _$(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=c0(e),o=c0(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function A$(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return l4e(e);var n=e.read_shift(r&&r.biff==12?4:2),s=c0(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function l4e(e){var t=c0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function c4e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function u4e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return d4e(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function d4e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function f4e(e,t,r){var n=(e[e.l++]&96)>>5,s=S$(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function h4e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=S$(e,i,r);return[n,s,o]}function p4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function m4e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function x4e(e,t,r){var n=(e[e.l++]&96)>>5,s=o4e(e,t-1,r);return[n,s]}function g4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function oI(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function v4e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function y4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function b4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function w4e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function N4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function C$(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function j4e(e){return e.read_shift(2),C$(e)}function k4e(e){return e.read_shift(2),C$(e)}function S4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=A$(e,0,r);return[n,s]}function _4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=u4e(e,0,r);return[n,s]}function A4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=A$(e,0,r);return[n,s,i]}function C4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Oke[s],O$[s],n]}function E4e(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:T4e(e);return[s,(i[0]===0?O$:Tke)[i[1]]]}function T4e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function O4e(e,t,r){e.l+=r&&r.biff==2?3:4}function P4e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function I4e(e){return e.l++,Xd[e.read_shift(1)]}function D4e(e){return e.l++,e.read_shift(2)}function L4e(e){return e.l++,e.read_shift(1)!==0}function F4e(e){return e.l++,Ji(e)}function M4e(e,t,r){return e.l++,ay(e,t-1,r)}function R4e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=hs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Xd[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ji(e);break;case 2:r[1]=up(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function B4e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?cp:wN)(e));return s}function $4e(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=R4e(e,r.biff);return o}function U4e(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function z4e(e,t,r){if(r.biff==5)return q4e(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function q4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function H4e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function W4e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function V4e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function G4e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var K4e=to,X4e=to,Y4e=to;function iy(e,t,r){return e.l+=2,[c4e(e)]}function gA(e){return e.l+=6,[]}var J4e=iy,Q4e=gA,Z4e=gA,eke=iy;function E$(e){return e.l+=2,[Cs(e),e.read_shift(2)&1]}var tke=iy,rke=E$,nke=gA,ake=iy,ske=iy,ike=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function oke(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=ike[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function lke(e){return e.l+=2,[e.read_shift(4)]}function cke(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function uke(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function dke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function fke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function hke(e){return e.l+=4,[0,0]}var lI={1:{n:"PtgExp",f:P4e},2:{n:"PtgTbl",f:Y4e},3:{n:"PtgAdd",f:Ss},4:{n:"PtgSub",f:Ss},5:{n:"PtgMul",f:Ss},6:{n:"PtgDiv",f:Ss},7:{n:"PtgPower",f:Ss},8:{n:"PtgConcat",f:Ss},9:{n:"PtgLt",f:Ss},10:{n:"PtgLe",f:Ss},11:{n:"PtgEq",f:Ss},12:{n:"PtgGe",f:Ss},13:{n:"PtgGt",f:Ss},14:{n:"PtgNe",f:Ss},15:{n:"PtgIsect",f:Ss},16:{n:"PtgUnion",f:Ss},17:{n:"PtgRange",f:Ss},18:{n:"PtgUplus",f:Ss},19:{n:"PtgUminus",f:Ss},20:{n:"PtgPercent",f:Ss},21:{n:"PtgParen",f:Ss},22:{n:"PtgMissArg",f:Ss},23:{n:"PtgStr",f:M4e},26:{n:"PtgSheet",f:cke},27:{n:"PtgEndSheet",f:uke},28:{n:"PtgErr",f:I4e},29:{n:"PtgBool",f:L4e},30:{n:"PtgInt",f:D4e},31:{n:"PtgNum",f:F4e},32:{n:"PtgArray",f:g4e},33:{n:"PtgFunc",f:C4e},34:{n:"PtgFuncVar",f:E4e},35:{n:"PtgName",f:U4e},36:{n:"PtgRef",f:S4e},37:{n:"PtgArea",f:f4e},38:{n:"PtgMemArea",f:H4e},39:{n:"PtgMemErr",f:K4e},40:{n:"PtgMemNoMem",f:X4e},41:{n:"PtgMemFunc",f:W4e},42:{n:"PtgRefErr",f:V4e},43:{n:"PtgAreaErr",f:p4e},44:{n:"PtgRefN",f:_4e},45:{n:"PtgAreaN",f:x4e},46:{n:"PtgMemAreaN",f:dke},47:{n:"PtgMemNoMemN",f:fke},57:{n:"PtgNameX",f:z4e},58:{n:"PtgRef3d",f:A4e},59:{n:"PtgArea3d",f:h4e},60:{n:"PtgRefErr3d",f:G4e},61:{n:"PtgAreaErr3d",f:m4e},255:{}},pke={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},mke={1:{n:"PtgElfLel",f:E$},2:{n:"PtgElfRw",f:ake},3:{n:"PtgElfCol",f:J4e},6:{n:"PtgElfRwV",f:ske},7:{n:"PtgElfColV",f:eke},10:{n:"PtgElfRadical",f:tke},11:{n:"PtgElfRadicalS",f:nke},13:{n:"PtgElfColS",f:Q4e},15:{n:"PtgElfColSV",f:Z4e},16:{n:"PtgElfRadicalLel",f:rke},25:{n:"PtgList",f:oke},29:{n:"PtgSxName",f:lke},255:{}},xke={0:{n:"PtgAttrNoop",f:hke},1:{n:"PtgAttrSemi",f:N4e},2:{n:"PtgAttrIf",f:b4e},4:{n:"PtgAttrChoose",f:v4e},8:{n:"PtgAttrGoto",f:y4e},16:{n:"PtgAttrSum",f:O4e},32:{n:"PtgAttrBaxcel",f:oI},33:{n:"PtgAttrBaxcel",f:oI},64:{n:"PtgAttrSpace",f:j4e},65:{n:"PtgAttrSpaceSemi",f:k4e},128:{n:"PtgAttrIfError",f:w4e},255:{}};function oy(e,t,r,n){if(n.biff<8)return to(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=$4e(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=B4e(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(to(e,t)),i}function ly(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=lI[i]||lI[pke[i]],(i===24||i===25)&&(s=(i===24?mke:xke)[e[e.l+1]]),!s||!s.f?to(e,t):o.push([s.n,s.f(e,t,r)]);return o}function gke(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var vke={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function yke(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function T$(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function cI(e,t,r){var n=T$(e,t,r);return n=="#REF"?n:yke(n,r)}function Vi(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,u,f,d=0,p=0,h,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,m="",v=0,y=e[0].length;v<y;++v){var w=e[0][v];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:m=os(" ",e[0][x][1][1]);break;case 1:m=os("\r",e[0][x][1][1]);break;default:if(m="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+m,x=-1}l.push(u+vke[w[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=hv(w[1][1],o,s),l.push(pv(f,i));break;case"PtgRefN":f=r?hv(w[1][1],r,s):w[1][1],l.push(pv(f,i));break;case"PtgRef3d":d=w[1][1],f=hv(w[1][2],o,s),g=cI(n,d,s),l.push(g+"!"+pv(f,i));break;case"PtgFunc":case"PtgFuncVar":var b=w[1][0],N=w[1][1];b||(b=0),b&=127;var S=b==0?[]:l.slice(-b);l.length-=b,N==="User"&&(N=S.shift()),l.push(N+"("+S.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":h=R8(w[1][1],r?{s:r}:o,s),l.push(Wj(h,s));break;case"PtgArea":h=R8(w[1][1],o,s),l.push(Wj(h,s));break;case"PtgArea3d":d=w[1][1],h=w[1][2],g=cI(n,d,s),l.push(g+"!"+Wj(h,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=w[1][2];var j=(n.names||[])[p-1]||(n[0]||[])[p],_=j?j.Name:"SH33TJSNAME"+String(p);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),l.push(_);break;case"PtgNameX":var E=w[1][1];p=w[1][2];var I;if(s.biff<=5)E<0&&(E=-E),n[E]&&(I=n[E][p]);else{var A="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][p]&&n[E][p].itab>0&&(A=n.SheetNames[n[E][p].itab-1]+"!"):A=n.SheetNames[p-1]+"!"),n[E]&&n[E][p])A+=n[E][p].Name;else if(n[0]&&n[0][p])A+=n[0][p].Name;else{var C=(T$(n,E,s)||"").split(";;");C[p-1]?A=C[p-1]:A+="SH33TJSERRX"}l.push(A);break}I||(I={Name:"SH33TJSERRY"}),l.push(I.Name);break;case"PtgParen":var F="(",M=")";if(x>=0){switch(m="",e[0][x][1][0]){case 2:F=os(" ",e[0][x][1][1])+F;break;case 3:F=os("\r",e[0][x][1][1])+F;break;case 4:M=os(" ",e[0][x][1][1])+M;break;case 5:M=os("\r",e[0][x][1][1])+M;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(F+l.pop()+M);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var B={c:r.c,r:r.r};if(n.sharedf[qr(f)]){var K=n.sharedf[qr(f)];l.push(Vi(K,o,B,n,s))}else{var G=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){l.push(Vi(u[1],o,B,n,s)),G=!0;break}G||l.push(w[1])}break;case"PtgArray":l.push("{"+gke(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&x>=0&&Y.indexOf(e[0][v][0])==-1){w=e[0][x];var q=!0;switch(w[1][0]){case 4:q=!1;case 0:m=os(" ",w[1][1]);break;case 5:q=!1;case 1:m=os("\r",w[1][1]);break;default:if(m="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((q?m:"")+l.pop()+(q?"":m)),x=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function bke(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],to(e,t-2)];var l=ly(e,o,r);return t!==o+s&&(i=oy(e,t-o-s,l,r)),e.l=n,[l,i]}function wke(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],to(e,t-2)];var l=ly(e,o,r);return t!==o+s&&(i=oy(e,t-o-s,l,r)),e.l=n,[l,i]}function Nke(e,t,r,n){var s=e.l+t,i=ly(e,n,r),o;return s!==e.l&&(o=oy(e,s-e.l,i,r)),[i,o]}function jke(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=ly(e,i,r);return i==65535?[[],to(e,t-2)]:(t!==i+2&&(s=oy(e,n-i-2,o,r)),[o,s])}function kke(e){var t;if(wd(e,e.l+6)!==65535)return[Ji(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Ske(e){if(e==null){var t=Nt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Kh(e);return Kh(0)}function Yj(e,t,r){var n=e.l+t,s=Xu(e);r.biff==2&&++e.l;var i=kke(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=wke(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function _ke(e,t,r,n,s){var i=Yh(t,r,s),o=Ske(e.v),l=Nt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Nt(e.bf.length),f=0;f<e.bf.length;++f)u[f]=e.bf[f];var d=ci([i,o,l,u]);return d}function NN(e,t,r){var n=e.read_shift(4),s=ly(e,n,r),i=e.read_shift(4),o=i>0?oy(e,i,s,r):null;return[s,o]}var Ake=NN,jN=NN,Cke=NN,Eke=NN,Tke={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},O$={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Oke={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function uI(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Pke(e){var t="of:="+e.replace(mA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Jj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Ike(e){return e.replace(/\./,"!")}var xv={},_m={},gv=typeof Map<"u";function vA(e,t,r){var n=0,s=e.length;if(r){if(gv?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=gv?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(gv?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function kN(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Yi=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=P1(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=t5(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Th(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function k0(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Td(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function P$(e,t,r,n,s,i){try{n.cellNF&&(e.z=Rr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ta(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Rr[t]==null&&Td(Tbe[t]||"General",t),e.t==="e")e.w=e.w||Xd[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=S1(e.v);else if(e.t==="d"){var o=Gs(e.v);(o|0)===o?e.w=o.toString(10):e.w=S1(o)}else{if(e.v===void 0)return"";e.w=Vh(e.v,_m)}else e.t==="d"?e.w=pc(t,Gs(e.v),_m):e.w=pc(t,e.v,_m)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=e5(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=e5(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function Dke(e,t,r){if(e&&e["!ref"]){var n=In(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Lke(e,t){var r=In(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=rn(r))}var Fke=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Mke=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Rke=/<(?:\w:)?hyperlink [^>]*>/mg,Bke=/"(\w*:\w*)"/,$ke=/<(?:\w:)?col\b[^>]*[\/]?>/g,Uke=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,zke=/<(?:\w:)?pageMargins[^>]*\/>/g,I$=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,qke=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Hke=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Wke(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",d=e.match(Mke);d?(u=e.slice(0,d.index),f=e.slice(d.index+d[0].length)):u=f=e;var p=u.match(I$);p?yA(p[0],l,s,r):(p=u.match(qke))&&Gke(p[0],p[1]||"",l,s,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var g=u.slice(h,h+50).match(Bke);g&&Lke(l,g[1])}var x=u.match(Hke);x&&x[1]&&i3e(x[1],s);var m=[];if(t.cellStyles){var v=u.match($ke);v&&t3e(m,v)}d&&c3e(d[1],l,t,c,i,o);var y=f.match(Uke);y&&(l["!autofilter"]=n3e(y[0]));var w=[],b=f.match(Fke);if(b)for(h=0;h!=b.length;++h)w[h]=In(b[h].slice(b[h].indexOf('"')+1));var N=f.match(Rke);N&&Qke(l,N,n);var S=f.match(zke);if(S&&(l["!margins"]=Zke(Hr(S[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=rn(c)),t.sheetRows>0&&l["!ref"]){var j=In(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=rn(j))}return m.length>0&&(l["!cols"]=m),w.length>0&&(l["!merges"]=w),l}function Vke(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rn(e[r])+'"/>';return t+"</mergeCells>"}function yA(e,t,r,n){var s=Hr(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=On(aa(s.codeName)))}function Gke(e,t,r,n,s){yA(e.slice(0,e.indexOf(">")),r,n,s)}function Kke(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Du(Yn(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+er("outlinePr",null,u)}!i&&!l||(s[s.length]=er("sheetPr",l,o))}var Xke=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Yke=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Jke(e){var t={sheet:1};return Xke.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Yke.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=fA(e.password).toString(16).toUpperCase()),er("sheetProtection",null,t)}function Qke(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=Hr(aa(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+On(i.location))):(i.Target="#"+On(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=In(i.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var f=qr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function Zke(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function e3e(e){return Th(e),er("pageMargins",null,e)}function t3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Hr(t[n],!0);s.hidden&&(s.hidden=_a(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,hA(s.width)),l0(s);i<=o;)e[i++]=Oa(s)}}function r3e(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=er("col",null,kN(s,n)));return r[r.length]="</cols>",r.join("")}function n3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function a3e(e,t,r,n){var s=typeof e.ref=="string"?e.ref:rn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=el(s);o.s.r==o.e.r&&(o.e.r=el(t["!ref"]).e.r,s=rn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),er("autoFilter",null,{ref:s})}var s3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function i3e(e,t){t.Views||(t.Views=[{}]),(e.match(s3e)||[]).forEach(function(r,n){var s=Hr(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),_a(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function o3e(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),er("sheetViews",er("sheetView",null,s),{})}function l3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Xd[e.v];break;case"d":n&&n.cellDates?s=Ta(e.v,-1).toISOString():(e=Oa(e),e.t="n",s=""+(e.v=Gs(Ta(e.v)))),typeof e.z>"u"&&(e.z=Rr[14]);break;default:s=e.v;break}var l=ji("v",Yn(s)),c={r:t},u=k0(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=ji("v",""+vA(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=er("f",Yn(e.f),f)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),er("c",l,c)}var c3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=_1("v"),o=_1("f");return function(c,u,f,d,p,h){for(var g=0,x="",m=[],v=[],y=0,w=0,b=0,N="",S,j,_=0,E=0,I,A,C=0,F=0,M=Array.isArray(h.CellXf),B,K=[],G=[],Y=Array.isArray(u),q=[],X={},V=!1,T=!!f.sheetStubs,R=c.split(t),z=0,L=R.length;z!=L;++z){x=R[z].trim();var H=x.length;if(H!==0){var ne=0;e:for(g=0;g<H;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(f&&f.cellStyles){if(j=Hr(x.slice(ne,g),!0),_=j.r!=null?parseInt(j.r,10):_+1,E=-1,f.sheetRows&&f.sheetRows<_)continue;X={},V=!1,j.ht&&(V=!0,X.hpt=parseFloat(j.ht),X.hpx=Nx(X.hpt)),j.hidden=="1"&&(V=!0,X.hidden=!0),j.outlineLevel!=null&&(V=!0,X.level=+j.outlineLevel),V&&(q[_-1]=X)}break;case"<":ne=g;break}if(ne>=g)break;if(j=Hr(x.slice(ne,g),!0),_=j.r!=null?parseInt(j.r,10):_+1,E=-1,!(f.sheetRows&&f.sheetRows<_)){d.s.r>_-1&&(d.s.r=_-1),d.e.r<_-1&&(d.e.r=_-1),f&&f.cellStyles&&(X={},V=!1,j.ht&&(V=!0,X.hpt=parseFloat(j.ht),X.hpx=Nx(X.hpt)),j.hidden=="1"&&(V=!0,X.hidden=!0),j.outlineLevel!=null&&(V=!0,X.level=+j.outlineLevel),V&&(q[_-1]=X)),m=x.slice(g).split(e);for(var se=0;se!=m.length&&m[se].trim().charAt(0)=="<";++se);for(m=m.slice(se),g=0;g!=m.length;++g)if(x=m[g].trim(),x.length!==0){if(v=x.match(r),y=g,w=0,b=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,v!=null&&v.length===2){for(y=0,N=v[1],w=0;w!=N.length&&!((b=N.charCodeAt(w)-64)<1||b>26);++w)y=26*y+b;--y,E=y}else++E;for(w=0;w!=x.length&&x.charCodeAt(w)!==62;++w);if(++w,j=Hr(x.slice(0,w),!0),j.r||(j.r=qr({r:_-1,c:E})),N=x.slice(w),S={t:""},(v=N.match(i))!=null&&v[1]!==""&&(S.v=On(v[1])),f.cellFormula){if((v=N.match(o))!=null&&v[1]!==""){if(S.f=On(aa(v[1])).replace(/\r\n/g,`
`),f.xlfn||(S.f=iI(S.f)),v[0].indexOf('t="array"')>-1)S.F=(N.match(s)||[])[1],S.F.indexOf(":")>-1&&K.push([In(S.F),S.F]);else if(v[0].indexOf('t="shared"')>-1){A=Hr(v[0]);var Q=On(aa(v[1]));f.xlfn||(Q=iI(Q)),G[parseInt(A.si,10)]=[A,Q,j.r]}}else(v=N.match(/<f[^>]*\/>/))&&(A=Hr(v[0]),G[A.si]&&(S.f=s4e(G[A.si][1],G[A.si][2],j.r)));var re=Va(j.r);for(w=0;w<K.length;++w)re.r>=K[w][0].s.r&&re.r<=K[w][0].e.r&&re.c>=K[w][0].s.c&&re.c<=K[w][0].e.c&&(S.F=K[w][1])}if(j.t==null&&S.v===void 0)if(S.f||S.F)S.v=0,S.t="n";else if(T)S.t="z";else continue;else S.t=j.t||"n";switch(d.s.c>E&&(d.s.c=E),d.e.c<E&&(d.e.c=E),S.t){case"n":if(S.v==""||S.v==null){if(!T)continue;S.t="z"}else S.v=parseFloat(S.v);break;case"s":if(typeof S.v>"u"){if(!T)continue;S.t="z"}else I=xv[parseInt(S.v,10)],S.v=I.t,S.r=I.r,f.cellHTML&&(S.h=I.h);break;case"str":S.t="s",S.v=S.v!=null?aa(S.v):"",f.cellHTML&&(S.h=J6(S.v));break;case"inlineStr":v=N.match(n),S.t="s",v!=null&&(I=dA(v[1]))?(S.v=I.t,f.cellHTML&&(S.h=I.h)):S.v="";break;case"b":S.v=_a(S.v);break;case"d":f.cellDates?S.v=Ta(S.v,1):(S.v=Gs(Ta(S.v,1)),S.t="n");break;case"e":(!f||f.cellText!==!1)&&(S.w=S.v),S.v=LB[S.v];break}if(C=F=0,B=null,M&&j.s!==void 0&&(B=h.CellXf[j.s],B!=null&&(B.numFmtId!=null&&(C=B.numFmtId),f.cellStyles&&B.fillId!=null&&(F=B.fillId))),P$(S,C,F,f,p,h),f.cellDates&&M&&S.t=="n"&&zx(Rr[C])&&(S.t="d",S.v=bN(S.v)),j.cm&&f.xlmeta){var Ae=(f.xlmeta.Cell||[])[+j.cm-1];Ae&&Ae.type=="XLDAPR"&&(S.D=!0)}if(Y){var ee=Va(j.r);u[ee.r]||(u[ee.r]=[]),u[ee.r][ee.c]=S}else u[j.r]=S}}}}q.length>0&&(u["!rows"]=q)}}();function u3e(e,t,r,n){var s=[],i=[],o=In(e["!ref"]),l="",c,u="",f=[],d=0,p=0,h=e["!rows"],g=Array.isArray(e),x={r:u},m,v=-1;for(p=o.s.c;p<=o.e.c;++p)f[p]=Wa(p);for(d=o.s.r;d<=o.e.r;++d){for(i=[],u=vs(d),p=o.s.c;p<=o.e.c;++p){c=f[p]+u;var y=g?(e[d]||[])[p]:e[c];y!==void 0&&(l=l3e(y,c,e,t))!=null&&i.push(l)}(i.length>0||h&&h[d])&&(x={r:u},h&&h[d]&&(m=h[d],m.hidden&&(x.hidden=1),v=-1,m.hpx?v=I1(m.hpx):m.hpt&&(v=m.hpt),v>-1&&(x.ht=v,x.customHeight=1),m.level&&(x.outlineLevel=m.level)),s[s.length]=er("row",i.join(""),x))}if(h)for(;d<h.length;++d)h&&h[d]&&(x={r:d+1},m=h[d],m.hidden&&(x.hidden=1),v=-1,m.hpx?v=I1(m.hpx):m.hpt&&(v=m.hpt),v>-1&&(x.ht=v,x.customHeight=1),m.level&&(x.outlineLevel=m.level),s[s.length]=er("row","",x));return s.join("")}function D$(e,t,r,n){var s=[ys,er("worksheet",null,{xmlns:sp[0],"xmlns:r":qs.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",f=In(u);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=rn(f)}n||(n={}),c["!comments"]=[];var d=[];Kke(c,r,e,t,s),s[s.length]=er("dimension",null,{ref:u}),s[s.length]=o3e(c,t,e,r),t.sheetFormat&&(s[s.length]=er("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=r3e(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=u3e(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=Jke(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=a3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Vke(c["!merges"]));var p=-1,h,g=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(h={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=Xn(n,-1,Yn(x[1].Target).replace(/#.*$/,""),xn.HLINK),h["r:id"]="rId"+g),(p=x[1].Target.indexOf("#"))>-1&&(h.location=Yn(x[1].Target.slice(p+1))),x[1].Tooltip&&(h.tooltip=Yn(x[1].Tooltip)),s[s.length]=er("hyperlink",null,h))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=e3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=ji("ignoredErrors",er("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(g=Xn(n,-1,"../drawings/drawing"+(e+1)+".xml",xn.DRAW),s[s.length]=er("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=d),c["!comments"].length>0&&(g=Xn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",xn.VML),s[s.length]=er("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function d3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function f3e(e,t,r){var n=Nt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=I1(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var d=-1,p=-1,h=f<<10;h<f+1<<10;++h){u.c=h;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[qr(u)];g&&(d<0&&(d=h),p=h)}d<0||(++l,n.write_shift(4,d),n.write_shift(4,p))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function h3e(e,t,r,n){var s=f3e(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Mt(e,0,s)}var p3e=cp,m3e=Wx;function x3e(){}function g3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=b2e(e),r}function v3e(e,t,r){r==null&&(r=Nt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Jw({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),TB(e,r),r.slice(0,r.l)}function y3e(e){var t=vc(e);return[t]}function b3e(e,t,r){return r==null&&(r=Nt(8)),ip(t,r)}function w3e(e){var t=op(e);return[t]}function N3e(e,t,r){return r==null&&(r=Nt(4)),lp(t,r)}function j3e(e){var t=vc(e),r=e.read_shift(1);return[t,r,"b"]}function k3e(e,t,r){return r==null&&(r=Nt(9)),ip(t,r),r.write_shift(1,e.v?1:0),r}function S3e(e){var t=op(e),r=e.read_shift(1);return[t,r,"b"]}function _3e(e,t,r){return r==null&&(r=Nt(5)),lp(t,r),r.write_shift(1,e.v?1:0),r}function A3e(e){var t=vc(e),r=e.read_shift(1);return[t,r,"e"]}function C3e(e,t,r){return r==null&&(r=Nt(9)),ip(t,r),r.write_shift(1,e.v),r}function E3e(e){var t=op(e),r=e.read_shift(1);return[t,r,"e"]}function T3e(e,t,r){return r==null&&(r=Nt(8)),lp(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function O3e(e){var t=vc(e),r=e.read_shift(4);return[t,r,"s"]}function P3e(e,t,r){return r==null&&(r=Nt(12)),ip(t,r),r.write_shift(4,t.v),r}function I3e(e){var t=op(e),r=e.read_shift(4);return[t,r,"s"]}function D3e(e,t,r){return r==null&&(r=Nt(8)),lp(t,r),r.write_shift(4,t.v),r}function L3e(e){var t=vc(e),r=Ji(e);return[t,r,"n"]}function F3e(e,t,r){return r==null&&(r=Nt(16)),ip(t,r),Kh(e.v,r),r}function L$(e){var t=op(e),r=Ji(e);return[t,r,"n"]}function M3e(e,t,r){return r==null&&(r=Nt(12)),lp(t,r),Kh(e.v,r),r}function R3e(e){var t=vc(e),r=iA(e);return[t,r,"n"]}function B3e(e,t,r){return r==null&&(r=Nt(12)),ip(t,r),OB(e.v,r),r}function $3e(e){var t=op(e),r=iA(e);return[t,r,"n"]}function U3e(e,t,r){return r==null&&(r=Nt(8)),lp(t,r),OB(e.v,r),r}function z3e(e){var t=vc(e),r=nA(e);return[t,r,"is"]}function q3e(e){var t=vc(e),r=Zi(e);return[t,r,"str"]}function H3e(e,t,r){return r==null&&(r=Nt(12+4*e.v.length)),ip(t,r),di(e.v,r),r.length>r.l?r.slice(0,r.l):r}function W3e(e){var t=op(e),r=Zi(e);return[t,r,"str"]}function V3e(e,t,r){return r==null&&(r=Nt(8+4*e.v.length)),lp(t,r),di(e.v,r),r.length>r.l?r.slice(0,r.l):r}function G3e(e,t,r){var n=e.l+t,s=vc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=jN(e,n-e.l,r);o[3]=Vi(l,null,s,r.supbooks,r)}else e.l=n;return o}function K3e(e,t,r){var n=e.l+t,s=vc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=jN(e,n-e.l,r);o[3]=Vi(l,null,s,r.supbooks,r)}else e.l=n;return o}function X3e(e,t,r){var n=e.l+t,s=vc(e);s.r=r["!row"];var i=Ji(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=jN(e,n-e.l,r);o[3]=Vi(l,null,s,r.supbooks,r)}else e.l=n;return o}function Y3e(e,t,r){var n=e.l+t,s=vc(e);s.r=r["!row"];var i=Zi(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=jN(e,n-e.l,r);o[3]=Vi(l,null,s,r.supbooks,r)}else e.l=n;return o}var J3e=cp,Q3e=Wx;function Z3e(e,t){return t==null&&(t=Nt(4)),t.write_shift(4,e),t}function eSe(e,t){var r=e.l+t,n=cp(e),s=aA(e),i=Zi(e),o=Zi(e),l=Zi(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function tSe(e,t){var r=Nt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Wx({s:Va(e[0]),e:Va(e[0])},r),sA("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return di(s||"",r),di(e[1].Tooltip||"",r),di("",r),r.slice(0,r.l)}function rSe(){}function nSe(e,t,r){var n=e.l+t,s=PB(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Ake(e,n-e.l,r);o[1]=l}else e.l=n;return o}function aSe(e,t,r){var n=e.l+t,s=cp(e),i=[s];if(r.cellFormula){var o=Eke(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function sSe(e,t,r){r==null&&(r=Nt(18));var n=kN(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var F$=["left","right","top","bottom","header","footer"];function iSe(e){var t={};return F$.forEach(function(r){t[r]=Ji(e)}),t}function oSe(e,t){return t==null&&(t=Nt(6*8)),Th(e),F$.forEach(function(r){Kh(e[r],t)}),t}function lSe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function cSe(e,t,r){r==null&&(r=Nt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function uSe(e){var t=Nt(24);return t.write_shift(4,4),t.write_shift(4,1),Wx(e,t),t}function dSe(e,t){return t==null&&(t=Nt(16*4+2)),t.write_shift(2,e.password?fA(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function fSe(){}function hSe(){}function pSe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,p=!1,h,g,x,m,v,y,w,b,N,S=[];l.biff=12,l["!row"]=0;var j=0,_=!1,E=[],I={},A=l.supbooks||s.supbooks||[[]];if(A.sharedf=I,A.arrayf=E,A.SheetNames=s.SheetNames||s.Sheets.map(function(Y){return Y.name}),!l.supbooks&&(l.supbooks=A,s.Names))for(var C=0;C<s.Names.length;++C)A[0][C+1]=s.Names[C];var F=[],M=[],B=!1;D1[16]={n:"BrtShortReal",f:L$};var K;if(Kd(e,function(q,X,V){if(!p)switch(V){case 148:u=q;break;case 0:h=q,l.sheetRows&&l.sheetRows<=h.r&&(p=!0),b=vs(m=h.r),l["!row"]=h.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=Nx(q.hpt)),M[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:q[2]},q[2]){case"n":g.v=q[1];break;case"s":w=xv[q[1]],g.v=w.t,g.r=w.r;break;case"b":g.v=!!q[1];break;case"e":g.v=q[1],l.cellText!==!1&&(g.w=Xd[g.v]);break;case"str":g.t="s",g.v=q[1];break;case"is":g.t="s",g.v=q[1].t;break}if((x=o.CellXf[q[0].iStyleRef])&&P$(g,x.numFmtId,null,l,i,o),v=q[0].c==-1?v+1:q[0].c,l.dense?(c[m]||(c[m]=[]),c[m][v]=g):c[Wa(v)+b]=g,l.cellFormula){for(_=!1,j=0;j<E.length;++j){var T=E[j];h.r>=T[0].s.r&&h.r<=T[0].e.r&&v>=T[0].s.c&&v<=T[0].e.c&&(g.F=rn(T[0]),_=!0)}!_&&q.length>3&&(g.f=q[3])}if(f.s.r>h.r&&(f.s.r=h.r),f.s.c>v&&(f.s.c=v),f.e.r<h.r&&(f.e.r=h.r),f.e.c<v&&(f.e.c=v),l.cellDates&&x&&g.t=="n"&&zx(Rr[x.numFmtId])){var R=uh(g.v);R&&(g.t="d",g.v=new Date(R.y,R.m-1,R.d,R.H,R.M,R.S,R.u))}K&&(K.type=="XLDAPR"&&(g.D=!0),K=void 0);break;case 1:case 12:if(!l.sheetStubs||d)break;g={t:"z",v:void 0},v=q[0].c==-1?v+1:q[0].c,l.dense?(c[m]||(c[m]=[]),c[m][v]=g):c[Wa(v)+b]=g,f.s.r>h.r&&(f.s.r=h.r),f.s.c>v&&(f.s.c=v),f.e.r<h.r&&(f.e.r=h.r),f.e.c<v&&(f.e.c=v),K&&(K.type=="XLDAPR"&&(g.D=!0),K=void 0);break;case 176:S.push(q);break;case 49:K=((l.xlmeta||{}).Cell||[])[q-1];break;case 494:var z=n["!id"][q.relId];for(z?(q.Target=z.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=z):q.relId==""&&(q.Target="#"+q.loc),m=q.rfx.s.r;m<=q.rfx.e.r;++m)for(v=q.rfx.s.c;v<=q.rfx.e.c;++v)l.dense?(c[m]||(c[m]=[]),c[m][v]||(c[m][v]={t:"z",v:void 0}),c[m][v].l=q):(y=qr({c:v,r:m}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=q);break;case 426:if(!l.cellFormula)break;E.push(q),N=l.dense?c[m][v]:c[Wa(v)+b],N.f=Vi(q[1],f,{r:h.r,c:v},A,l),N.F=rn(q[0]);break;case 427:if(!l.cellFormula)break;I[qr(q[0].s)]=q[1],N=l.dense?c[m][v]:c[Wa(v)+b],N.f=Vi(q[1],f,{r:h.r,c:v},A,l);break;case 60:if(!l.cellStyles)break;for(;q.e>=q.s;)F[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},B||(B=!0,hA(q.w/256)),l0(F[q.e+1]);break;case 161:c["!autofilter"]={ref:rn(q)};break;case 476:c["!margins"]=q;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),q.name&&(s.Sheets[r].CodeName=q.name),(q.above||q.left)&&(c["!outline"]={above:q.above,left:q.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),q.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!X.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+V.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=rn(u||f)),l.sheetRows&&c["!ref"]){var G=In(c["!ref"]);l.sheetRows<=+G.e.r&&(G.e.r=l.sheetRows-1,G.e.r>f.e.r&&(G.e.r=f.e.r),G.e.r<G.s.r&&(G.s.r=G.e.r),G.e.c>f.e.c&&(G.e.c=f.e.c),G.e.c<G.s.c&&(G.s.c=G.e.c),c["!fullref"]=c["!ref"],c["!ref"]=rn(G))}return S.length>0&&(c["!merges"]=S),F.length>0&&(c["!cols"]=F),M.length>0&&(c["!rows"]=M),c}function mSe(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Oa(t),t.z=t.z||Rr[14],t.v=Gs(Ta(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=k0(s.cellXfs,t,s),t.l&&i["!links"].push([qr(c),t.l]),t.c&&i["!comments"].push([qr(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=vA(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Mt(e,18,D3e(t,c)):Mt(e,7,P3e(t,c))):(c.t="str",o?Mt(e,17,V3e(t,c)):Mt(e,6,H3e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Mt(e,13,U3e(t,c)):Mt(e,2,B3e(t,c)):o?Mt(e,16,M3e(t,c)):Mt(e,5,F3e(t,c)),!0;case"b":return c.t="b",o?Mt(e,15,_3e(t,c)):Mt(e,4,k3e(t,c)),!0;case"e":return c.t="e",o?Mt(e,14,T3e(t,c)):Mt(e,3,C3e(t,c)),!0}return o?Mt(e,12,N3e(t,c)):Mt(e,1,b3e(t,c)),!0}function xSe(e,t,r,n){var s=In(t["!ref"]||"A1"),i,o="",l=[];Mt(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=u;++f){o=vs(f),h3e(e,t,s,f);var d=!1;if(f<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){f===s.s.r&&(l[p]=Wa(p)),i=l[p]+o;var h=c?(t[f]||[])[p]:t[i];if(!h){d=!1;continue}d=mSe(e,h,f,p,n,t,d)}}Mt(e,146)}function gSe(e,t){!t||!t["!merges"]||(Mt(e,177,Z3e(t["!merges"].length)),t["!merges"].forEach(function(r){Mt(e,176,Q3e(r))}),Mt(e,178))}function vSe(e,t){!t||!t["!cols"]||(Mt(e,390),t["!cols"].forEach(function(r,n){r&&Mt(e,60,sSe(n,r))}),Mt(e,391))}function ySe(e,t){!t||!t["!ref"]||(Mt(e,648),Mt(e,649,uSe(In(t["!ref"]))),Mt(e,650))}function bSe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=Xn(r,-1,n[1].Target.replace(/#.*$/,""),xn.HLINK);Mt(e,494,tSe(n,s))}}),delete t["!links"]}function wSe(e,t,r,n){if(t["!comments"].length>0){var s=Xn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",xn.VML);Mt(e,551,sA("rId"+s)),t["!legacy"]=s}}function NSe(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:rn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=el(i);l.s.r==l.e.r&&(l.e.r=el(t["!ref"]).e.r,i=rn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Mt(e,161,Wx(In(i))),Mt(e,162)}}function jSe(e,t,r){Mt(e,133),Mt(e,137,cSe(t,r)),Mt(e,138),Mt(e,134)}function kSe(e,t){t["!protect"]&&Mt(e,535,dSe(t["!protect"]))}function SSe(e,t,r,n){var s=Zo(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=In(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Mt(s,129),(r.vbaraw||o["!outline"])&&Mt(s,147,v3e(l,o["!outline"])),Mt(s,148,m3e(c)),jSe(s,o,r.Workbook),vSe(s,o),xSe(s,o,e,t),kSe(s,o),NSe(s,o,r,e),gSe(s,o),bSe(s,o,n),o["!margins"]&&Mt(s,476,oSe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&ySe(s,o),wSe(s,o,e,n),Mt(s,130),s.end()}function _Se(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=On((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function ASe(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var p=_Se(d);f.s.r=f.s.c=0,f.e.c=l,u=Wa(l),p[0].forEach(function(h,g){o[u+vs(g)]={t:"n",v:h,z:p[1]},c=g}),f.e.r<c&&(f.e.r=c),++l}),l>0&&(o["!ref"]=rn(f)),o}function CSe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(I$);return l&&yA(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function ESe(e,t){e.l+=10;var r=Zi(e);return{name:r}}function TSe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Kd(e,function(c,u,f){switch(f){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var bA=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],OSe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],PSe=[],ISe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function dI(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=_a(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function fI(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=_a(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function M$(e){fI(e.WBProps,bA),fI(e.CalcPr,ISe),dI(e.WBView,OSe),dI(e.Sheets,PSe),_m.date1904=_a(e.WBProps.date1904)}function DSe(e){return!e.Workbook||!e.Workbook.WBProps?"false":_a(e.Workbook.WBProps.date1904)?"true":"false"}var LSe="][*?/\\".split("");function R$(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return LSe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function FSe(e,t,r){e.forEach(function(n,s){R$(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function MSe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];FSe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Dke(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var RSe=/<\w+:workbook/;function BSe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(ro,function(c,u){var f=Hr(c);switch(Ku(f[0])){case"<?xml":break;case"<workbook":c.match(RSe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":bA.forEach(function(d){if(f[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=_a(f[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(f[d[0]],10);break;default:r.WBProps[d[0]]=f[d[0]]}}),f.codeName&&(r.WBProps.CodeName=aa(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=On(aa(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=aa(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),_a(f.hidden||"0")&&(i.Hidden=!0),o=u+c.length;break;case"</definedName>":i.Ref=On(aa(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),sp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return M$(r),r}function B$(e){var t=[ys];t[t.length]=er("workbook",null,{xmlns:sp[0],"xmlns:r":qs.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(bA.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=er("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Yn(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=er("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=er("definedName",Yn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function $Se(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=iS(e),r.name=Zi(e),r}function USe(e,t){return t||(t=Nt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),sA(e.strRelID,t),di(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function zSe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Zi(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function qSe(e,t){t||(t=Nt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),TB(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function HSe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function WSe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=w2e(e),o=Cke(e,0,r),l=aA(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function VSe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],D1[16]={n:"BrtFRTArchID$",f:HSe},Kd(e,function(c,u,f){switch(f){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Vi(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,c]):o[0]=[f,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),M$(r),r.Names=i,r.supbooks=o,r}function GSe(e,t){Mt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Mt(e,156,USe(s))}Mt(e,144)}function KSe(e,t){t||(t=Nt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return di("SheetJS",t),di(Hw.version,t),di(Hw.version,t),di("7262",t),t.length>t.l?t.slice(0,t.l):t}function XSe(e,t){t||(t=Nt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function YSe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(Mt(e,135),Mt(e,158,XSe(s)),Mt(e,136))}}function JSe(e,t){var r=Zo();return Mt(r,131),Mt(r,128,KSe()),Mt(r,153,qSe(e.Workbook&&e.Workbook.WBProps||null)),YSe(r,e),GSe(r,e),Mt(r,132),r.end()}function QSe(e,t,r){return t.slice(-4)===".bin"?VSe(e,r):BSe(e,r)}function ZSe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?pSe(e,n,r,s,i,o,l):Wke(e,n,r,s,i,o,l)}function e_e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?TSe(e,n,r,s,i):CSe(e,n,r,s,i)}function t_e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?n4e():a4e()}function r_e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?t4e():r4e()}function n_e(e,t,r,n){return t.slice(-4)===".bin"?QNe(e,r,n):$Ne(e,r,n)}function a_e(e,t,r){return y$(e,r)}function s_e(e,t,r){return t.slice(-4)===".bin"?sNe(e,r):rNe(e,r)}function i_e(e,t,r){return t.slice(-4)===".bin"?Yje(e,r):Uje(e,r)}function o_e(e,t,r){return t.slice(-4)===".bin"?Rje(e):Fje(e)}function l_e(e,t,r,n){return r.slice(-4)===".bin"?Bje(e,t,r,n):void 0}function c_e(e,t,r){return t.slice(-4)===".bin"?Ije(e,t,r):Lje(e,t,r)}function u_e(e,t,r){return(t.slice(-4)===".bin"?JSe:B$)(e)}function d_e(e,t,r,n,s){return(t.slice(-4)===".bin"?SSe:D$)(e,r,n,s)}function f_e(e,t,r){return(t.slice(-4)===".bin"?lje:g$)(e,r)}function h_e(e,t,r){return(t.slice(-4)===".bin"?lNe:c$)(e,r)}function p_e(e,t,r){return(t.slice(-4)===".bin"?Jje:N$)(e)}function m_e(e){return(e.slice(-4)===".bin"?Dje:b$)()}var $$=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,U$=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Dc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match($$),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(U$),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function x_e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match($$),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(U$),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var vv;function g_e(e,t){var r=vv[e]||On(e);return r==="General"?Vh(t):pc(r,t)}function v_e(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=_a(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Ta(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[On(t)]=s}function y_e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Xd[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=S1(e.v):e.w=Vh(e.v):e.w=g_e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=vv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&zx(n)){var s=uh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function b_e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=PNe[n.Pattern]||n.Pattern)}e[t.ID]=t}function w_e(e,t,r,n,s,i,o,l,c,u){var f="General",d=n.StyleID,p={};u=u||{};var h=[],g=0;for(d===void 0&&l&&(d=l.StyleID),d===void 0&&o&&(d=o.StyleID);i[d]!==void 0&&(i[d].nf&&(f=i[d].nf),i[d].Interior&&h.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=_a(e);break;case"String":n.t="s",n.r=E8(On(e)),n.v=e.indexOf("<")>-1?On(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ta(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=On(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=LB[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=E8(t||e));break}if(y_e(n,f,u),u.cellFormula!==!1)if(n.Formula){var x=On(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Sm(x,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Sm("RC:RC",s):n.ArrayRange&&(n.F=Sm(n.ArrayRange,s),c.push([In(n.F),n.F]))}else for(g=0;g<c.length;++g)s.r>=c[g][0].s.r&&s.r<=c[g][0].e.r&&s.c>=c[g][0].s.c&&s.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(h.forEach(function(m){!p.patternType&&m.patternType&&(p.patternType=m.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function N_e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Qj(e,t){var r=t||{};qx();var n=Wg(Q6(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=aa(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Oa(r);return o.type="string",wx.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ce){s.indexOf("<"+ce)>=0&&(i=!0)}),i)return o6e(n,r);vv={"General Number":"General","General Date":Rr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Rr[15],"Short Date":Rr[14],"Long Time":Rr[19],"Medium Time":Rr[18],"Short Time":Rr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Rr[2],Standard:Rr[4],Percent:Rr[10],Scientific:Rr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,f={},d=[],p=r.dense?[]:{},h="",g={},x={},m=Dc('<Data ss:Type="String">'),v=0,y=0,w=0,b={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},S={},j="",_=0,E=[],I={},A={},C=0,F=[],M=[],B={},K=[],G,Y=!1,q=[],X=[],V={},T=0,R=0,z={Sheets:[],WBProps:{date1904:!1}},L={};C1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var H="";l=C1.exec(n);)switch(l[3]=(H=l[3]).toLowerCase()){case"data":if(H=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?w_e(n.slice(v,l.index),j,m,c[c.length-1][0]=="comment"?B:g,{c:y,r:w},N,K[y],x,q,r):(j="",m=Dc(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>w)&&g.v!==void 0&&(r.dense?(p[w]||(p[w]=[]),p[w][y]=g):p[Wa(y)+vs(w)]=g),g.HRef&&(g.l={Target:On(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(T=y+(parseInt(g.MergeAcross,10)|0),R=w+(parseInt(g.MergeDown,10)|0),E.push({s:{c:y,r:w},e:{c:T,r:R}})),!r.sheetStubs)g.MergeAcross?y=T+1:++y;else if(g.MergeAcross||g.MergeDown){for(var ne=y;ne<=T;++ne)for(var se=w;se<=R;++se)(ne>y||se>w)&&(r.dense?(p[se]||(p[se]=[]),p[se][ne]={t:"z"}):p[Wa(ne)+vs(se)]={t:"z"});y=T+1}else++y;else g=x_e(l[0]),g.Index&&(y=+g.Index-1),y<b.s.c&&(b.s.c=y),y>b.e.c&&(b.e.c=y),l[0].slice(-2)==="/>"&&++y,M=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<b.s.r&&(b.s.r=w),w>b.e.r&&(b.e.r=w),l[0].slice(-2)==="/>"&&(x=Dc(l[0]),x.Index&&(w=+x.Index-1)),y=0,++w):(x=Dc(l[0]),x.Index&&(w=+x.Index-1),V={},(x.AutoFitHeight=="0"||x.Height)&&(V.hpx=parseInt(x.Height,10),V.hpt=I1(V.hpx),X[w]=V),x.Hidden=="1"&&(V.hidden=!0,X[w]=V));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));d.push(h),b.s.r<=b.e.r&&b.s.c<=b.e.c&&(p["!ref"]=rn(b),r.sheetRows&&r.sheetRows<=b.e.r&&(p["!fullref"]=p["!ref"],b.e.r=r.sheetRows-1,p["!ref"]=rn(b))),E.length&&(p["!merges"]=E),K.length>0&&(p["!cols"]=K),X.length>0&&(p["!rows"]=X),f[h]=p}else b={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=y=0,c.push([l[3],!1]),u=Dc(l[0]),h=On(u.Name),p=r.dense?[]:{},E=[],q=[],X=[],L={name:h,Hidden:0},z.Sheets.push(L);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),K=[],Y=!1}break;case"style":l[1]==="/"?b_e(N,S,r):S=Dc(l[0]);break;case"numberformat":S.nf=On(Dc(l[0]).Format||"General"),vv[S.nf]&&(S.nf=vv[S.nf]);for(var Q=0;Q!=392&&Rr[Q]!=S.nf;++Q);if(Q==392){for(Q=57;Q!=392;++Q)if(Rr[Q]==null){Td(S.nf,Q);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(G=Dc(l[0]),G.Hidden&&(G.hidden=!0,delete G.Hidden),G.Width&&(G.wpx=parseInt(G.Width,10)),!Y&&G.wpx>10){Y=!0,Yi=m$;for(var re=0;re<K.length;++re)K[re]&&l0(K[re])}Y&&l0(G),K[G.Index-1||K.length]=G;for(var Ae=0;Ae<+G.Span;++Ae)K[K.length]=Oa(G);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var ee=Hr(l[0]),Me={Name:ee.Name,Ref:Sm(ee.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Me.Sheet=z.Sheets.length-1),z.Names.push(Me);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=n.slice(_,l.index):_=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;S.Interior=Dc(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?V2e(I,H,n.slice(C,l.index)):C=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));N_e(B),M.push(B)}else c.push([l[3],!1]),u=Dc(l[0]),B={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ze=Dc(l[0]);p["!autofilter"]={ref:Sm(ze.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return gI(n,r);var oe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:oe=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:oe=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:oe=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:oe=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(C,l.index)){case"SheetHidden":L.Hidden=1;break;case"SheetVeryHidden":L.Hidden=2;break}else C=l.index+l[0].length;break;case"header":p["!margins"]||Th(p["!margins"]={},"xlml"),isNaN(+Hr(l[0]).Margin)||(p["!margins"].header=+Hr(l[0]).Margin);break;case"footer":p["!margins"]||Th(p["!margins"]={},"xlml"),isNaN(+Hr(l[0]).Margin)||(p["!margins"].footer=+Hr(l[0]).Margin);break;case"pagemargins":var J=Hr(l[0]);p["!margins"]||Th(p["!margins"]={},"xlml"),isNaN(+J.Top)||(p["!margins"].top=+J.Top),isNaN(+J.Left)||(p["!margins"].left=+J.Left),isNaN(+J.Right)||(p["!margins"].right=+J.Right),isNaN(+J.Bottom)||(p["!margins"].bottom=+J.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:oe=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:oe=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:oe=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:oe=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:oe=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:oe=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:oe=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:oe=!1}break;case"smarttags":break;default:oe=!1;break}if(oe||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?v_e(A,H,F,n.slice(C,l.index)):(F=l,C=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=f),je.SheetNames=d,je.Workbook=z,je.SSF=Oa(Rr),je.Props=I,je.Custprops=A,je}function hS(e,t){switch(NA(t=t||{}),t.type||"base64"){case"base64":return Qj(Ol(e),t);case"binary":case"buffer":case"file":return Qj(e,t);case"array":return Qj(N0(e),t)}}function j_e(e,t){var r=[];return e.Props&&r.push(G2e(e.Props,t)),e.Custprops&&r.push(K2e(e.Props,e.Custprops)),r.join("")}function k_e(){return""}function S_e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(er("NumberFormat",null,{"ss:Format":Yn(Rr[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(er("Style",i.join(""),o))}),er("Styles",r.join(""))}function z$(e){return er("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+xA(e.Ref,{r:0,c:0})})}function __e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(z$(s)))}return er("Names",r.join(""))}function A_e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(z$(l)))}return i.join("")}function C_e(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(er("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(er("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(er("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(er("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(ji("ProtectContents","True")),e["!protect"].objects&&s.push(ji("ProtectObjects","True")),e["!protect"].scenarios&&s.push(ji("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(ji("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(ji("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":er("WorksheetOptions",s.join(""),{xmlns:yl.x})}function E_e(e){return e.map(function(t){var r=Ybe(t.t||""),n=er("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return er("Comment",n,{"ss:Author":t.a})}).join("")}function T_e(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Yn(xA(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Va(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Yn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Yn(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],f=0;f!=u.length;++f)u[f].s.c!=o.c||u[f].s.r!=o.r||(u[f].e.c>u[f].s.c&&(l["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(l["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",p=String(e.v);break;case"b":d="Boolean",p=e.v?"1":"0";break;case"e":d="Error",p=Xd[e.v];break;case"d":d="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Rr[14]);break;case"s":d="String",p=Xbe(e.v||"");break}var h=k0(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var g=e.v!=null?p:"",x=e.t=="z"?"":'<Data ss:Type="'+d+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=E_e(e.c)),er("Cell",x,l)}function O_e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Nx(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function P_e(e,t,r,n){if(!e["!ref"])return"";var s=In(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(m,v){l0(m);var y=!!m.width,w=kN(v,m),b={"ss:Index":v+1};y&&(b["ss:Width"]=O1(w.width)),m.hidden&&(b["ss:Hidden"]="1"),l.push(er("Column",null,b))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var f=[O_e(u,(e["!rows"]||[])[u])],d=s.s.c;d<=s.e.c;++d){var p=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>d)&&!(i[o].s.r>u)&&!(i[o].e.c<d)&&!(i[o].e.r<u)){(i[o].s.c!=d||i[o].s.r!=u)&&(p=!0);break}if(!p){var h={r:u,c:d},g=qr(h),x=c?(e[u]||[])[d]:e[g];f.push(T_e(x,g,e,t,r,n,h))}}f.push("</Row>"),f.length>2&&l.push(f.join(""))}return l.join("")}function I_e(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?A_e(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?P_e(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(C_e(i,t,e,r)),n.join("")}function D_e(e,t){t||(t={}),e.SSF||(e.SSF=Oa(Rr)),e.SSF&&(qx(),gN(e.SSF),t.revssf=yN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],k0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(j_e(e,t)),r.push(k_e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(er("Worksheet",I_e(n,t,e),{"ss:Name":Yn(e.SheetNames[n])}));return r[2]=S_e(e,t),r[3]=__e(e),ys+er("Workbook",r.join(""),{xmlns:yl.ss,"xmlns:o":yl.o,"xmlns:x":yl.x,"xmlns:ss":yl.ss,"xmlns:dt":yl.dt,"xmlns:html":yl.html})}function L_e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=_2e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=A2e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var F_e=[60,1084,2066,2165,2175];function M_e(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=wd(r,r.l),u=pS[c],f=0;u!=null&&F_e.indexOf(c)>-1;)i=wd(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,u=pS[c=wd(r,r.l)];var d=ci(o);Ni(d,0);var p=0;d.lens=[];for(var h=0;h<o.length;++h)d.lens.push(p),p+=o[h].length;if(d.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+d.length+" < "+n;return t.f(d,d.length,s)}function yu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Rr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Xd[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=S1(e.v):e.w=Vh(e.v):e.w=pc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&zx(Rr[n]||String(n))){var s=uh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Tb(e,t,r){return{v:e,ixfe:t,t:r}}function R_e(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],u="",f={},d,p="",h,g,x,m,v={},y=[],w,b,N=[],S=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},E=function(We){return We<8?Ah[We]:We<64&&S[We-8]||Ah[We]},I=function(We,Xe,Et){var wt=Xe.XF.data;if(!(!wt||!wt.patternType||!Et||!Et.cellStyles)){Xe.s={},Xe.s.patternType=wt.patternType;var Ve;(Ve=T1(E(wt.icvFore)))&&(Xe.s.fgColor={rgb:Ve}),(Ve=T1(E(wt.icvBack)))&&(Xe.s.bgColor={rgb:Ve})}},A=function(We,Xe,Et){if(!(V>1)&&!(Et.sheetRows&&We.r>=Et.sheetRows)){if(Et.cellStyles&&Xe.XF&&Xe.XF.data&&I(We,Xe,Et),delete Xe.ixfe,delete Xe.XF,d=We,p=qr(We),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),We.r<o.s.r&&(o.s.r=We.r),We.c<o.s.c&&(o.s.c=We.c),We.r+1>o.e.r&&(o.e.r=We.r+1),We.c+1>o.e.c&&(o.e.c=We.c+1),Et.cellFormula&&Xe.f){for(var wt=0;wt<y.length;++wt)if(!(y[wt][0].s.c>We.c||y[wt][0].s.r>We.r)&&!(y[wt][0].e.c<We.c||y[wt][0].e.r<We.r)){Xe.F=rn(y[wt][0]),(y[wt][0].s.c!=We.c||y[wt][0].s.r!=We.r)&&delete Xe.f,Xe.f&&(Xe.f=""+Vi(y[wt][1],o,We,q,C));break}}Et.dense?(s[We.r]||(s[We.r]=[]),s[We.r][We.c]=Xe):s[p]=Xe}},C={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var F,M=[],B=[],K=[],G=[],Y=!1,q=[];q.SheetNames=C.snames,q.sharedf=C.sharedf,q.arrayf=C.arrayf,q.names=[],q.XTI=[];var X=0,V=0,T=0,R=[],z=[],L;C.codepage=1200,Gc(1200);for(var H=!1;e.l<e.length-1;){var ne=e.l,se=e.read_shift(2);if(se===0&&X===10)break;var Q=e.l===e.length?0:e.read_shift(2),re=pS[se];if(re&&re.f){if(t.bookSheets&&X===133&&se!==133)break;if(X=se,re.r===2||re.r==12){var Ae=e.read_shift(2);if(Q-=2,!C.enc&&Ae!==se&&((Ae&255)<<8|Ae>>8)!==se)throw new Error("rt mismatch: "+Ae+"!="+se);re.r==12&&(e.l+=10,Q-=10)}var ee={};if(se===10?ee=re.f(e,Q,C):ee=M_e(se,re,e,Q,C),V==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(se){case 34:r.opts.Date1904=j.WBProps.date1904=ee;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=ee,!t.password)throw new Error("File is password-protected");if(ee.valid==null)throw new Error("Encryption scheme unsupported");if(!ee.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=ee;break;case 66:var Me=Number(ee);switch(Me){case 21010:Me=1200;break;case 32768:Me=1e4;break;case 32769:Me=1252;break}Gc(C.codepage=Me),H=!0;break;case 317:C.rrtabid=ee;break;case 25:C.winlocked=ee;break;case 439:r.opts.RefreshAll=ee;break;case 12:r.opts.CalcCount=ee;break;case 16:r.opts.CalcDelta=ee;break;case 17:r.opts.CalcIter=ee;break;case 13:r.opts.CalcMode=ee;break;case 14:r.opts.CalcPrecision=ee;break;case 95:r.opts.CalcSaveRecalc=ee;break;case 15:C.CalcRefMode=ee;break;case 2211:r.opts.FullCalc=ee;break;case 129:ee.fDialog&&(s["!type"]="dialog"),ee.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ee.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:N.push(ee);break;case 430:q.push([ee]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(ee);break;case 24:case 536:L={Name:ee.Name,Ref:Vi(ee.rgce,o,null,q,C)},ee.itab>0&&(L.Sheet=ee.itab-1),q.names.push(L),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(ee),ee.Name=="_xlnm._FilterDatabase"&&ee.itab>0&&ee.rgce&&ee.rgce[0]&&ee.rgce[0][0]&&ee.rgce[0][0][0]=="PtgArea3d"&&(z[ee.itab-1]={ref:rn(ee.rgce[0][0][1][2])});break;case 22:C.ExternCount=ee;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(ee),q.XTI=q.XTI.concat(ee);break;case 2196:if(C.biff<8)break;L!=null&&(L.Comment=ee[1]);break;case 18:s["!protect"]=ee;break;case 19:ee!==0&&C.WTF&&console.error("Password verifier: "+ee);break;case 133:i[ee.pos]=ee,C.snames.push(ee.name);break;case 10:{if(--V)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=rn(o),t.sheetRows&&t.sheetRows<=o.e.r){var ze=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=rn(o),o.e.r=ze}o.e.r++,o.e.c++}M.length>0&&(s["!merges"]=M),B.length>0&&(s["!objects"]=B),K.length>0&&(s["!cols"]=K),G.length>0&&(s["!rows"]=G),j.Sheets.push(_)}u===""?f=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(C.biff===8&&(C.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ee.BIFFVer]||8),C.biffguess=ee.BIFFVer==0,ee.BIFFVer==0&&ee.dt==4096&&(C.biff=5,H=!0,Gc(C.codepage=28591)),C.biff==8&&ee.BIFFVer==0&&ee.dt==16&&(C.biff=2),V++)break;if(s=t.dense?[]:{},C.biff<8&&!H&&(H=!0,Gc(C.codepage=t.codepage||1252)),C.biff<5||ee.BIFFVer==0&&ee.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var oe={pos:e.l-Q,name:u};i[oe.pos]=oe,C.snames.push(u)}else u=(i[ne]||{name:""}).name;ee.dt==32&&(s["!type"]="chart"),ee.dt==64&&(s["!type"]="macro"),M=[],B=[],C.arrayf=y=[],K=[],G=[],Y=!1,_={Hidden:(i[ne]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ee.r]||[])[ee.c]:s[qr({c:ee.c,r:ee.r})])&&++ee.c,w={ixfe:ee.ixfe,XF:N[ee.ixfe]||{},v:ee.val,t:"n"},T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:ee.c,r:ee.r},w,t);break;case 5:case 517:w={ixfe:ee.ixfe,XF:N[ee.ixfe],v:ee.val,t:ee.t},T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:ee.c,r:ee.r},w,t);break;case 638:w={ixfe:ee.ixfe,XF:N[ee.ixfe],v:ee.rknum,t:"n"},T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:ee.c,r:ee.r},w,t);break;case 189:for(var J=ee.c;J<=ee.C;++J){var je=ee.rkrec[J-ee.c][0];w={ixfe:je,XF:N[je],v:ee.rkrec[J-ee.c][1],t:"n"},T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:J,r:ee.r},w,t)}break;case 6:case 518:case 1030:{if(ee.val=="String"){l=ee;break}if(w=Tb(ee.val,ee.cell.ixfe,ee.tt),w.XF=N[w.ixfe],t.cellFormula){var ce=ee.formula;if(ce&&ce[0]&&ce[0][0]&&ce[0][0][0]=="PtgExp"){var ye=ce[0][0][1][0],me=ce[0][0][1][1],ge=qr({r:ye,c:me});v[ge]?w.f=""+Vi(ee.formula,o,ee.cell,q,C):w.F=((t.dense?(s[ye]||[])[me]:s[ge])||{}).F}else w.f=""+Vi(ee.formula,o,ee.cell,q,C)}T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A(ee.cell,w,t),l=ee}break;case 7:case 519:if(l)l.val=ee,w=Tb(ee,l.cell.ixfe,"s"),w.XF=N[w.ixfe],t.cellFormula&&(w.f=""+Vi(l.formula,o,l.cell,q,C)),T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(ee);var Ce=qr(ee[0].s);if(h=t.dense?(s[ee[0].s.r]||[])[ee[0].s.c]:s[Ce],t.cellFormula&&h){if(!l||!Ce||!h)break;h.f=""+Vi(ee[1],o,ee[0],q,C),h.F=rn(ee[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;v[qr(l.cell)]=ee[0],h=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[qr(l.cell)],(h||{}).f=""+Vi(ee[0],o,d,q,C)}}break;case 253:w=Tb(c[ee.isst].t,ee.ixfe,"s"),c[ee.isst].h&&(w.h=c[ee.isst].h),w.XF=N[w.ixfe],T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:ee.c,r:ee.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:ee.ixfe,XF:N[ee.ixfe],t:"z"},T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:ee.c,r:ee.r},w,t));break;case 190:if(t.sheetStubs)for(var Ue=ee.c;Ue<=ee.C;++Ue){var Te=ee.ixfe[Ue-ee.c];w={ixfe:Te,XF:N[Te],t:"z"},T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:Ue,r:ee.r},w,t)}break;case 214:case 516:case 4:w=Tb(ee.val,ee.ixfe,"s"),w.XF=N[w.ixfe],T>0&&(w.z=R[w.ixfe>>8&63]),yu(w,t,r.opts.Date1904),A({c:ee.c,r:ee.r},w,t);break;case 0:case 512:V===1&&(o=ee);break;case 252:c=ee;break;case 1054:if(C.biff==4){R[T++]=ee[1];for(var ue=0;ue<T+163&&Rr[ue]!=ee[1];++ue);ue>=163&&Td(ee[1],T+163)}else Td(ee[1],ee[0]);break;case 30:{R[T++]=ee;for(var Oe=0;Oe<T+163&&Rr[Oe]!=ee;++Oe);Oe>=163&&Td(ee,T+163)}break;case 229:M=M.concat(ee);break;case 93:B[ee.cmo[0]]=C.lastobj=ee;break;case 438:C.lastobj.TxO=ee;break;case 127:C.lastobj.ImData=ee;break;case 440:for(m=ee[0].s.r;m<=ee[0].e.r;++m)for(x=ee[0].s.c;x<=ee[0].e.c;++x)h=t.dense?(s[m]||[])[x]:s[qr({c:x,r:m})],h&&(h.l=ee[1]);break;case 2048:for(m=ee[0].s.r;m<=ee[0].e.r;++m)for(x=ee[0].s.c;x<=ee[0].e.c;++x)h=t.dense?(s[m]||[])[x]:s[qr({c:x,r:m})],h&&h.l&&(h.l.Tooltip=ee[1]);break;case 28:{if(C.biff<=5&&C.biff>=2)break;h=t.dense?(s[ee[0].r]||[])[ee[0].c]:s[qr(ee[0])];var st=B[ee[2]];h||(t.dense?(s[ee[0].r]||(s[ee[0].r]=[]),h=s[ee[0].r][ee[0].c]={t:"z"}):h=s[qr(ee[0])]={t:"z"},o.e.r=Math.max(o.e.r,ee[0].r),o.s.r=Math.min(o.s.r,ee[0].r),o.e.c=Math.max(o.e.c,ee[0].c),o.s.c=Math.min(o.s.c,ee[0].c)),h.c||(h.c=[]),g={a:ee[1],t:st.TxO.t},h.c.push(g)}break;case 2173:Sje(N[ee.ixfe],ee.ext);break;case 125:{if(!C.cellStyles)break;for(;ee.e>=ee.s;)K[ee.e--]={width:ee.w/256,level:ee.level||0,hidden:!!(ee.flags&1)},Y||(Y=!0,hA(ee.w/256)),l0(K[ee.e+1])}break;case 520:{var be={};ee.level!=null&&(G[ee.r]=be,be.level=ee.level),ee.hidden&&(G[ee.r]=be,be.hidden=!0),ee.hpt&&(G[ee.r]=be,be.hpt=ee.hpt,be.hpx=Nx(ee.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Th(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=ee;break;case 161:s["!margins"]||Th(s["!margins"]={}),s["!margins"].header=ee.header,s["!margins"].footer=ee.footer;break;case 574:ee.RTL&&(j.Views[0].RTL=!0);break;case 146:S=ee;break;case 2198:F=ee;break;case 140:b=ee;break;case 442:u?_.CodeName=ee||_.name:j.WBProps.CodeName=ee||"ThisWorkbook";break}}else re||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=Q}return r.SheetNames=us(i).sort(function(De,We){return Number(De)-Number(We)}).map(function(De){return i[De].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&z.forEach(function(De,We){r.Sheets[r.SheetNames[We]]["!autofilter"]=De}),r.Strings=c,r.SSF=Oa(Rr),C.enc&&(r.Encryption=C.enc),F&&(r.Themes=F),r.Metadata={},b!==void 0&&(r.Metadata.Country=b),q.names.length>0&&(j.Names=q.names),r.Workbook=j,r}var yv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function B_e(e,t,r){var n=Pr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=G8(n,oS,yv.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Pr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=G8(o,lS,yv.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(UB(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function $_e(e,t){var r=[],n=[],s=[],i=0,o,l=j8(oS,"n"),c=j8(lS,"n");if(e.Props)for(o=us(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=us(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<s.length;++i)KB.indexOf(s[i][0])>-1||$B.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);n.length&&Pr.utils.cfb_add(t,"/SummaryInformation",K8(n,yv.SI,c,lS)),(r.length||u.length)&&Pr.utils.cfb_add(t,"/DocumentSummaryInformation",K8(r,yv.DSI,l,oS,u.length?u:null,yv.UDI))}function q$(e,t){t||(t={}),NA(t),q6(),t.codepage&&z6(t.codepage);var r,n;if(e.FullPaths){if(Pr.find(e,"/encryption"))throw new Error("File is password-protected");r=Pr.find(e,"!CompObj"),n=Pr.find(e,"/Workbook")||Pr.find(e,"/Book")}else{switch(t.type){case"base64":e=Nl(Ol(e));break;case"binary":e=Nl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ni(e,0),n={content:e}}var s,i;if(r&&L_e(r),t.bookProps&&!t.bookSheets)s={};else{var o=ln?"buffer":"array";if(n&&n.content)s=R_e(n.content,t);else if((i=Pr.find(e,"PerfectOffice_MAIN"))&&i.content)s=Eh.to_workbook(i.content,(t.type=o,t));else if((i=Pr.find(e,"NativeContent_MAIN"))&&i.content)s=Eh.to_workbook(i.content,(t.type=o,t));else throw(i=Pr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Pr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Zje(e))}var l={};return e.FullPaths&&B_e(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function U_e(e,t){var r=t||{},n=Pr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Pr.utils.cfb_add(n,s,H$(e,r)),r.biff==8&&(e.Props||e.Custprops)&&$_e(e,n),r.biff==8&&e.vbaraw&&e4e(n,Pr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var D1={0:{f:d3e},1:{f:y3e},2:{f:R3e},3:{f:A3e},4:{f:j3e},5:{f:L3e},6:{f:q3e},7:{f:O3e},8:{f:Y3e},9:{f:X3e},10:{f:G3e},11:{f:K3e},12:{f:w3e},13:{f:$3e},14:{f:E3e},15:{f:S3e},16:{f:L$},17:{f:W3e},18:{f:I3e},19:{f:nA},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:WSe},40:{},42:{},43:{f:qNe},44:{f:UNe},45:{f:VNe},46:{f:KNe},47:{f:GNe},48:{},49:{f:p2e},50:{},51:{f:Cje},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:s$},62:{f:z3e},63:{f:Mje},64:{f:fSe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:to,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:lSe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:g3e},148:{f:p3e,p:16},151:{f:rSe},152:{},153:{f:zSe},154:{},155:{},156:{f:$Se},157:{},158:{},159:{T:1,f:aNe},160:{T:-1},161:{T:1,f:cp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:J3e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_je},336:{T:-1},337:{f:Oje,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:iS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:a$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:nSe},427:{f:aSe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:iSe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:x3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:eSe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:iS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Kje},633:{T:1},634:{T:-1},635:{T:1,f:Vje},636:{T:-1},637:{f:v2e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ESe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:hSe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},pS={6:{f:Yj},10:{f:mf},12:{f:Cs},13:{f:Cs},14:{f:hs},15:{f:hs},16:{f:Ji},17:{f:hs},18:{f:hs},19:{f:Cs},20:{f:eI},21:{f:eI},23:{f:a$},24:{f:rI},25:{f:hs},26:{},27:{},28:{f:h5e},29:{},34:{f:hs},35:{f:tI},38:{f:Ji},39:{f:Ji},40:{f:Ji},41:{f:Ji},42:{f:hs},43:{f:hs},47:{f:SNe},49:{f:$we},51:{f:Cs},60:{},61:{f:Lwe},64:{f:hs},65:{f:Bwe},66:{f:Cs},77:{},80:{},81:{},82:{},85:{f:Cs},89:{},90:{},91:{},92:{f:kwe},93:{f:x5e},94:{},95:{f:hs},96:{},97:{},99:{f:hs},125:{f:s$},128:{f:t5e},129:{f:_we},130:{f:Cs},131:{f:hs},132:{f:hs},133:{f:Awe},134:{},140:{f:k5e},141:{f:Cs},144:{},146:{f:A5e},151:{},152:{},153:{},154:{},155:{},156:{f:Cs},157:{},158:{},160:{f:D5e},161:{f:T5e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Jwe},190:{f:Qwe},193:{f:mf},197:{},198:{},199:{},200:{},201:{},202:{f:hs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Cs},220:{},221:{f:hs},222:{},224:{f:e5e},225:{f:jwe},226:{f:mf},227:{},229:{f:p5e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Ewe},253:{f:zwe},255:{f:Owe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:XB},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:hs},353:{f:mf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:i5e},431:{f:hs},432:{},433:{},434:{},437:{},438:{f:y5e},439:{f:hs},440:{f:b5e},441:{},442:{f:sy},443:{},444:{f:Cs},445:{},446:{},448:{f:mf},449:{f:Dwe,r:2},450:{f:mf},512:{f:J8},513:{f:I5e},515:{f:a5e},516:{f:Hwe},517:{f:Z8},519:{f:L5e},520:{f:Pwe},523:{},545:{f:nI},549:{f:Y8},566:{},574:{f:Mwe},638:{f:Ywe},659:{},1048:{},1054:{f:Vwe},1084:{},1212:{f:u5e},2048:{f:N5e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ab},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:mf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:C5e,r:12},2173:{f:kje,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:hs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:c5e,r:12},2197:{},2198:{f:vje,r:12},2199:{},2200:{},2201:{},2202:{f:d5e,r:12},2203:{f:mf},2204:{},2205:{},2206:{},2207:{},2211:{f:Iwe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Cs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:O5e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:_5e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:J8},1:{},2:{f:$5e},3:{f:R5e},4:{f:M5e},5:{f:Z8},7:{f:z5e},8:{},9:{f:Ab},11:{},22:{f:Cs},30:{f:Kwe},31:{},32:{},33:{f:nI},36:{},37:{f:Y8},50:{f:q5e},62:{},52:{},67:{},68:{f:Cs},69:{},86:{},126:{},127:{f:F5e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:H5e},223:{},234:{},354:{},421:{},518:{f:Yj},521:{f:Ab},536:{f:rI},547:{f:tI},561:{},579:{},1030:{f:Yj},1033:{f:Ab},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function tr(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&eA(r)&&e.push(r)}}function z_e(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return tr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var f=e.next(4);for(f.write_shift(2,i),f.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(f=e.next(4),f.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;f.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function cy(e,t,r){return e||(e=Nt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function q_e(e,t,r,n){var s=Nt(9);return cy(s,e,t),YB(r,n||"b",s),s}function H_e(e,t,r){var n=Nt(8+2*r.length);return cy(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function W_e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Gs(Ta(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?tr(e,2,U5e(r,n,s)):tr(e,3,B5e(r,n,s));return;case"b":case"e":tr(e,5,q_e(r,n,t.v,t.t));return;case"s":case"str":tr(e,4,H_e(r,n,(t.v||"").slice(0,255)));return}tr(e,1,cy(null,r,n))}function V_e(e,t,r,n){var s=Array.isArray(t),i=In(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=rn(i)}for(var u=i.s.r;u<=i.e.r;++u){l=vs(u);for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(c[f]=Wa(f)),o=c[f]+l;var d=s?(t[u]||[])[f]:t[o];d&&W_e(e,d,u,f)}}}function G_e(e,t){for(var r=t||{},n=Zo(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return tr(n,r.biff==4?1033:r.biff==3?521:9,uA(e,16,r)),V_e(n,e.Sheets[e.SheetNames[s]],s,r),tr(n,10),n.end()}function K_e(e,t,r){tr(e,49,Uwe({sz:12,name:"Arial"},r))}function X_e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&tr(e,1054,Gwe(s,t[s],r))})}function Y_e(e,t){var r=Nt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),tr(e,2151,r),r=Nt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),t$(In(t["!ref"]||"A1"),r),r.write_shift(4,4),tr(e,2152,r)}function J_e(e,t){for(var r=0;r<16;++r)tr(e,224,Q8({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){tr(e,224,Q8(n,0,t))})}function Q_e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];tr(e,440,w5e(n)),n[1].Tooltip&&tr(e,2048,j5e(n))}delete t["!links"]}function Z_e(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&tr(e,125,E5e(kN(s,n),s))})}}function e6e(e,t,r,n,s){var i=16+k0(s.cellXfs,t,s);if(t.v==null&&!t.bf){tr(e,513,Yh(r,n,i));return}if(t.bf)tr(e,6,_ke(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Gs(Ta(t.v)):t.v;tr(e,515,s5e(r,n,o,i));break;case"b":case"e":tr(e,517,n5e(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=vA(s.Strings,t.v,s.revStrings);tr(e,253,qwe(r,n,l,i))}else tr(e,516,Wwe(r,n,(t.v||"").slice(0,255),i,s));break;default:tr(e,513,Yh(r,n,i))}}function t6e(e,t,r){var n=Zo(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,f,d="",p=[],h=In(i["!ref"]||"A1"),g=u?65536:16384;if(h.e.c>255||h.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,g-1)}tr(n,2057,uA(r,16,t)),tr(n,13,Zl(1)),tr(n,12,Zl(100)),tr(n,15,xo(!0)),tr(n,17,xo(!1)),tr(n,16,Kh(.001)),tr(n,95,xo(!0)),tr(n,42,xo(!1)),tr(n,43,xo(!1)),tr(n,130,Zl(1)),tr(n,128,r5e()),tr(n,131,xo(!1)),tr(n,132,xo(!1)),u&&Z_e(n,i["!cols"]),tr(n,512,Xwe(h,t)),u&&(i["!links"]=[]);for(var x=h.s.r;x<=h.e.r;++x){d=vs(x);for(var m=h.s.c;m<=h.e.c;++m){x===h.s.r&&(p[m]=Wa(m)),f=p[m]+d;var v=c?(i[x]||[])[m]:i[f];v&&(e6e(n,v,x,m,t),u&&v.l&&i["!links"].push([f,v.l]))}}var y=l.CodeName||l.name||s;return u&&tr(n,574,Rwe((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&tr(n,229,m5e(i["!merges"])),u&&Q_e(n,i),tr(n,442,JB(y)),u&&Y_e(n,i),tr(n,10),n.end()}function r6e(e,t,r){var n=Zo(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(tr(n,2057,uA(e,5,r)),r.bookType=="xla"&&tr(n,135),tr(n,225,l?Zl(1200):null),tr(n,193,nwe(2)),c&&tr(n,191),c&&tr(n,192),tr(n,226),tr(n,92,Swe("SheetJS",r)),tr(n,66,Zl(l?1200:1252)),l&&tr(n,353,Zl(0)),l&&tr(n,448),tr(n,317,P5e(e.SheetNames.length)),l&&e.vbaraw&&tr(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";tr(n,442,JB(u))}tr(n,156,Zl(17)),tr(n,25,xo(!1)),tr(n,18,xo(!1)),tr(n,19,Zl(0)),l&&tr(n,431,xo(!1)),l&&tr(n,444,Zl(0)),tr(n,61,Fwe()),tr(n,64,xo(!1)),tr(n,141,Zl(0)),tr(n,34,xo(DSe(e)=="true")),tr(n,14,xo(!0)),l&&tr(n,439,xo(!1)),tr(n,218,Zl(0)),K_e(n,e,r),X_e(n,e.SSF,r),J_e(n,r),l&&tr(n,352,xo(!1));var f=n.end(),d=Zo();l&&tr(d,140,S5e()),l&&r.Strings&&z_e(d,252,Twe(r.Strings)),tr(d,10);var p=d.end(),h=Zo(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var m=f.length+g+p.length;for(x=0;x<e.SheetNames.length;++x){var v=i[x]||{};tr(h,133,Cwe({pos:m,hs:v.Hidden||0,dt:0,name:e.SheetNames[x]},r)),m+=t[x].length}var y=h.end();if(g!=y.length)throw new Error("BS8 "+g+" != "+y.length);var w=[];return f.length&&w.push(f),y.length&&w.push(y),p.length&&w.push(p),ci(w)}function n6e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Oa(Rr)),e&&e.SSF&&(qx(),gN(e.SSF),r.revssf=yN(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,jA(r),r.cellXfs=[],k0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=t6e(s,r,e);return n.unshift(r6e(e,n,r)),ci(n)}function H$(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=el(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return n6e(e,t);case 4:case 3:case 2:return G_e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function hI(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=Ube(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,d=0,p=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),m=x.slice(0,3).toLowerCase();if(m=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(m!="<td"&&m!="<th")){var v=x.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var y=v[l].trim();if(y.match(/<t[dh]/i)){for(var w=y,b=0;w.charAt(0)=="<"&&(b=w.indexOf(">"))>-1;)w=w.slice(b+1);for(var N=0;N<g.length;++N){var S=g[N];S.s.c==f&&S.s.r<u&&u<=S.e.r&&(f=S.e.c+1,N=-1)}var j=Hr(y.slice(0,y.indexOf(">")));p=j.colspan?+j.colspan:1,((d=+j.rowspan)>1||p>1)&&g.push({s:{r:u,c:f},e:{r:u+(d||1)-1,c:f+p-1}});var _=j.t||j["data-t"]||"";if(!w.length){f+=p;continue}if(w=pB(w),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>f&&(h.s.c=f),h.e.c<f&&(h.e.c=f),!w.length){f+=p;continue}var E={t:"s",v:w};r.raw||!w.trim().length||_=="s"||(w==="TRUE"?E={t:"b",v:!0}:w==="FALSE"?E={t:"b",v:!1}:isNaN(Zc(w))?isNaN(bx(w).getDate())||(E={t:"d",v:Ta(w)},r.cellDates||(E={t:"n",v:Gs(E.v)}),E.z=r.dateNF||Rr[14]):E={t:"n",v:Zc(w)}),r.dense?(n[u]||(n[u]=[]),n[u][f]=E):n[qr({r:u,c:f})]=E,f+=p}}}}return n["!ref"]=rn(h),g.length&&(n["!merges"]=g),n}function a6e(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var f=qr({r,c:o}),d=n.dense?(e[r]||[])[o]:e[f],p=d&&d.v!=null&&(d.h||J6(d.w||(zd(d),d.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":d&&(h["data-t"]=d&&d.t||"z",d.v!=null&&(h["data-v"]=d.v),d.z!=null&&(h["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),h.id=(n.id||"sjs")+"-"+f,i.push(er("td",p,h))}}var g="<tr>";return g+i.join("")+"</tr>"}var s6e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',i6e="</body></html>";function o6e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return j0(hI(r[0],t),t);var n=_A();return r.forEach(function(s,i){AA(n,hI(s,t),"Sheet"+(i+1))}),n}function l6e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function W$(e,t){var r=t||{},n=r.header!=null?r.header:s6e,s=r.footer!=null?r.footer:i6e,i=[n],o=el(e["!ref"]);r.dense=Array.isArray(e),i.push(l6e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(a6e(e,o,l,r));return i.push("</table>"+s),i.join("")}function V$(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Va(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=el(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var d=[],p=0,h=e["!rows"]||(e["!rows"]=[]),g=0,x=0,m=0,v=0,y=0,w=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var b=l[g];if(pI(b)){if(n.display)continue;h[x]={hidden:!0}}var N=b.children;for(m=v=0;m<N.length;++m){var S=N[m];if(!(n.display&&pI(S))){var j=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):pB(S.innerHTML),_=S.getAttribute("data-z")||S.getAttribute("z");for(p=0;p<d.length;++p){var E=d[p];E.s.c==v+i&&E.s.r<x+s&&x+s<=E.e.r&&(v=E.e.c+1-i,p=-1)}w=+S.getAttribute("colspan")||1,((y=+S.getAttribute("rowspan")||1)>1||w>1)&&d.push({s:{r:x+s,c:v+i},e:{r:x+s+(y||1)-1,c:v+i+(w||1)-1}});var I={t:"s",v:j},A=S.getAttribute("data-t")||S.getAttribute("t")||"";j!=null&&(j.length==0?I.t=A||"z":n.raw||j.trim().length==0||A=="s"||(j==="TRUE"?I={t:"b",v:!0}:j==="FALSE"?I={t:"b",v:!1}:isNaN(Zc(j))?isNaN(bx(j).getDate())||(I={t:"d",v:Ta(j)},n.cellDates||(I={t:"n",v:Gs(I.v)}),I.z=n.dateNF||Rr[14]):I={t:"n",v:Zc(j)})),I.z===void 0&&_!=null&&(I.z=_);var C="",F=S.getElementsByTagName("A");if(F&&F.length)for(var M=0;M<F.length&&!(F[M].hasAttribute("href")&&(C=F[M].getAttribute("href"),C.charAt(0)!="#"));++M);C&&C.charAt(0)!="#"&&(I.l={Target:C}),n.dense?(e[x+s]||(e[x+s]=[]),e[x+s][v+i]=I):e[qr({c:v+i,r:x+s})]=I,u.e.c<v+i&&(u.e.c=v+i),v+=w}}++x}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,x-1+s),e["!ref"]=rn(u),x>=c&&(e["!fullref"]=rn((u.e.r=l.length-g+x-1+s,u))),e}function G$(e,t){var r=t||{},n=r.dense?[]:{};return V$(n,e,t)}function c6e(e,t){return j0(G$(e,t),t)}function pI(e){var t="",r=u6e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function u6e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function d6e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=On(t.replace(/<[^>]*>/g,""));return[r]}var mI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function K$(e,t){var r=t||{},n=Q6(e),s=[],i,o,l={name:""},c="",u=0,f,d,p={},h=[],g=r.dense?[]:{},x,m,v={value:""},y="",w=0,b=[],N=-1,S=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,E={},I=[],A={},C=0,F=0,M=[],B=1,K=1,G=[],Y={Names:[]},q={},X=["",""],V=[],T={},R="",z=0,L=!1,H=!1,ne=0;for(C1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=C1.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?g["!ref"]=rn(j):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(g["!fullref"]=g["!ref"],j.e.r=r.sheetRows-1,g["!ref"]=rn(j)),I.length&&(g["!merges"]=I),M.length&&(g["!rows"]=M),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),h.push(f.name),p[f.name]=g,H=!1):x[0].charAt(x[0].length-2)!=="/"&&(f=Hr(x[0],!1),N=S=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,g=r.dense?[]:{},I=[],M=[],H=!0);break;case"table-row-group":x[1]==="/"?--_:++_;break;case"table-row":case"":if(x[1]==="/"){N+=B,B=1;break}if(d=Hr(x[0],!1),d.?N=d.-1:N==-1&&(N=0),B=+d["number-rows-repeated"]||1,B<10)for(ne=0;ne<B;++ne)_>0&&(M[N+ne]={level:_});S=-1;break;case"covered-table-cell":x[1]!=="/"&&++S,r.sheetStubs&&(r.dense?(g[N]||(g[N]=[]),g[N][S]={t:"z"}):g[qr({r:N,c:S})]={t:"z"}),y="",b=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++S,v=Hr(x[0],!1),K=parseInt(v["number-columns-repeated"]||"1",10),m={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(m.f=uI(On(v.formula))),(v.||v["value-type"])=="string"&&(m.t="s",m.v=On(v["string-value"]||""),r.dense?(g[N]||(g[N]=[]),g[N][S]=m):g[qr({r:N,c:S})]=m),S+=K-1;else if(x[1]!=="/"){++S,y="",w=0,b=[],K=1;var se=B?N+B-1:N;if(S>j.e.c&&(j.e.c=S),S<j.s.c&&(j.s.c=S),N<j.s.r&&(j.s.r=N),se>j.e.r&&(j.e.r=se),v=Hr(x[0],!1),V=[],T={},m={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=On(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(C=parseInt(v["number-matrix-rows-spanned"],10)||0,F=parseInt(v["number-matrix-columns-spanned"],10)||0,A={s:{r:N,c:S},e:{r:N+C-1,c:S+F-1}},m.F=rn(A),G.push([A,m.F])),v.formula)m.f=uI(v.formula);else for(ne=0;ne<G.length;++ne)N>=G[ne][0].s.r&&N<=G[ne][0].e.r&&S>=G[ne][0].s.c&&S<=G[ne][0].e.c&&(m.F=G[ne][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(C=parseInt(v["number-rows-spanned"],10)||0,F=parseInt(v["number-columns-spanned"],10)||0,A={s:{r:N,c:S},e:{r:N+C-1,c:S+F-1}},I.push(A)),v["number-columns-repeated"]&&(K=parseInt(v["number-columns-repeated"],10)),m.t){case"boolean":m.t="b",m.v=_a(v["boolean-value"]);break;case"float":m.t="n",m.v=parseFloat(v.value);break;case"percentage":m.t="n",m.v=parseFloat(v.value);break;case"currency":m.t="n",m.v=parseFloat(v.value);break;case"date":m.t="d",m.v=Ta(v["date-value"]),r.cellDates||(m.t="n",m.v=Gs(m.v)),m.z="m/d/yy";break;case"time":m.t="n",m.v=Rbe(v["time-value"])/86400,r.cellDates&&(m.t="d",m.v=bN(m.v)),m.z="HH:MM:SS";break;case"number":m.t="n",m.v=parseFloat(v.);break;default:if(m.t==="string"||m.t==="text"||!m.t)m.t="s",v["string-value"]!=null&&(y=On(v["string-value"]),b=[]);else throw new Error("Unsupported value type "+m.t)}}else{if(L=!1,m.t==="s"&&(m.v=y||"",b.length&&(m.R=b),L=w==0),q.Target&&(m.l=q),V.length>0&&(m.c=V,V=[]),y&&r.cellText!==!1&&(m.w=y),L&&(m.t="z",delete m.v),(!L||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var Q=0;Q<B;++Q){if(K=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(g[N+Q]||(g[N+Q]=[]),g[N+Q][S]=Q==0?m:Oa(m);--K>0;)g[N+Q][S+K]=Oa(m);else for(g[qr({r:N+Q,c:S})]=m;--K>0;)g[qr({r:N+Q,c:S+K})]=Oa(m);j.e.c<=S&&(j.e.c=S)}K=parseInt(v["number-columns-repeated"]||"1",10),S+=K-1,K=0,m={},y="",b=[]}q={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((i=s.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((i=s.pop())[0]!==x[3])throw"Bad state: "+i;T.t=y,b.length&&(T.R=b),T.a=R,V.push(T)}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);R="",z=0,y="",w=0,b=[];break;case"creator":x[1]==="/"?R=n.slice(z,x.index):z=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((i=s.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);y="",w=0,b=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(E[l.name]=c,(i=s.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Hr(x[0],!1),s.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Hr(x[0],!1),c+=mI[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Hr(x[0],!1),c+=mI[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=Hr(x[0],!1),X=Jj(o["cell-range-address"]);var re={Name:o.name,Ref:X[0]+"!"+X[1]};H&&(re.Sheet=h.length),Y.Names.push(re);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(x[1]==="/"&&(!v||!v["string-value"])){var Ae=d6e(n.slice(w,x.index));y=(y.length>0?y+`
`:"")+Ae[0]}else Hr(x[0],!1),w=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{X=Jj(Hr(x[0])["target-range-address"]),p[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(q=Hr(x[0],!1),!q.href)break;q.Target=On(q.href),delete q.href,q.Target.charAt(0)=="#"&&q.Target.indexOf(".")>-1?(X=Jj(q.Target.slice(1)),q.Target="#"+X[0]+"!"+X[1]):q.Target.match(/^\.\.[\\\/]/)&&(q.Target=q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(x)}}var ee={Sheets:p,SheetNames:h,Workbook:Y};return r.bookSheets&&delete ee.Sheets,ee}function xI(e,t){t=t||{},Jl(e,"META-INF/manifest.xml")&&R2e(As(e,"META-INF/manifest.xml"),t);var r=jl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=K$(aa(r),t);return Jl(e,"meta.xml")&&(n.Props=RB(As(e,"meta.xml"))),n}function gI(e,t){return K$(e,t)}var f6e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+A1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ys+t}}(),vI=function(){var e=function(i){return Yn(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Yn(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,f=0,d=el(i["!ref"]||"A1"),p=i["!merges"]||[],h=0,g=Array.isArray(i);if(i["!cols"])for(f=0;f<=d.e.c;++f)c.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var x="",m=i["!rows"]||[];for(u=0;u<d.s.r;++u)x=m[u]?' table:style-name="ro'+m[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=d.e.r;++u){for(x=m[u]?' table:style-name="ro'+m[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),f=0;f<d.s.c;++f)c.push(t);for(;f<=d.e.c;++f){var v=!1,y={},w="";for(h=0;h!=p.length;++h)if(!(p[h].s.c>f)&&!(p[h].s.r>u)&&!(p[h].e.c<f)&&!(p[h].e.r<u)){(p[h].s.c!=f||p[h].s.r!=u)&&(v=!0),y["table:number-columns-spanned"]=p[h].e.c-p[h].s.c+1,y["table:number-rows-spanned"]=p[h].e.r-p[h].s.r+1;break}if(v){c.push(r);continue}var b=qr({r:u,c:f}),N=g?(i[u]||[])[f]:i[b];if(N&&N.f&&(y["table:formula"]=Yn(Pke(N.f)),N.F&&N.F.slice(0,b.length)==b)){var S=el(N.F);y["table:number-matrix-columns-spanned"]=S.e.c-S.s.c+1,y["table:number-matrix-rows-spanned"]=S.e.r-S.s.r+1}if(!N){c.push(t);continue}switch(N.t){case"b":w=N.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=N.v?"true":"false";break;case"n":w=N.w||String(N.v||0),y["office:value-type"]="float",y["office:value"]=N.v||0;break;case"s":case"str":w=N.v==null?"":N.v,y["office:value-type"]="string";break;case"d":w=N.w||Ta(N.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=Ta(N.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(w);if(N.l&&N.l.Target){var _=N.l.Target;_=_.charAt(0)=="#"?"#"+Ike(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),j=er("text:a",j,{"xlink:href":_.replace(/&/g,"&amp;")})}c.push("          "+er("table:table-cell",er("text:p",j,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;l0(d),d.ods=l;var p=u["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=c;var d=u["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ys],u=A1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=A1({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+f+`>
`),c.push(MB().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)c.push(n(o.Sheets[o.SheetNames[d]],o,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function X$(e,t){if(t.bookType=="fods")return vI(e,t);var r=K6(),n="",s=[],i=[];return n="mimetype",an(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",an(r,n,vI(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",an(r,n,f6e(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",an(r,n,ys+MB()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",an(r,n,U2e(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",an(r,n,B2e(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Jh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function mS(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):aa(N0(e))}function h6e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Nl(Du(e))}function p6e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function u0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function yI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function m6e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function x6e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function L1(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Kn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function cs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Fn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=L1(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=L1(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function vi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(Kn(n*8+s.type)),s.type==2&&t.push(Kn(s.data.length)),t.push(s.data))})}),u0(t)}function wA(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Xl(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=L1(e,n),i=Fn(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:cs(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Fn(l.data),u=cs(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=cs(i[3][0].data)>>>0>0),r.push(o)}return r}function zp(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Kn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Kn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Kn(o.data.length)}],n[2].push({data:vi(o.meta),type:2})});var i=vi(n);t.push(Kn(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),u0(t)}function g6e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=L1(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[u0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var f=u0(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Yl(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(g6e(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return u0(t)}function qp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Kn(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return u0(t)}function v6e(e,t,r,n){var s=Jh(e),i=s.getUint32(4,!0),o=(n>1?12:8)+yI(i&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=yI(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var d;switch(e[2]){case 0:break;case 2:d={t:"n",v:u};break;case 3:d={t:"s",v:t[c]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u/86400};break;case 8:d={t:"e",v:0};break;case 9:if(l>-1)d={t:"s",v:r[l]};else if(c>-1)d={t:"s",v:t[c]};else if(!isNaN(u))d={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return d}function y6e(e,t,r){var n=Jh(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(c=m6e(e,i),i+=16),s&2&&(u=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var d;switch(e[1]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t[l]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:d={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return d}function Zj(e,t){var r=new Uint8Array(32),n=Jh(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,x6e(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function e4(e,t){var r=new Uint8Array(32),n=Jh(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function b6e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return v6e(e,t,r,e[0]);case 5:return y6e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Wi(e){var t=Fn(e);return L1(t[1][0].data)}function bI(e,t){var r=Fn(t.data),n=cs(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Fn(o.data),c=cs(l[1][0].data)>>>0;switch(n){case 1:i[c]=mS(l[3][0].data);break;case 8:{var u=e[Wi(l[9][0].data)][0],f=Fn(u.data),d=e[Wi(f[1][0].data)][0],p=cs(d.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var h=Fn(d.data);i[c]=h[3].map(function(g){return mS(g.data)}).join("")}break}}),i}function w6e(e,t){var r,n,s,i,o,l,c,u,f,d,p,h,g,x,m=Fn(e),v=cs(m[1][0].data)>>>0,y=cs(m[2][0].data)>>>0,w=((n=(r=m[8])==null?void 0:r[0])==null?void 0:n.data)&&cs(m[8][0].data)>0||!1,b,N;if((i=(s=m[7])==null?void 0:s[0])!=null&&i.data&&t!=0)b=(l=(o=m[7])==null?void 0:o[0])==null?void 0:l.data,N=(u=(c=m[6])==null?void 0:c[0])==null?void 0:u.data;else if((d=(f=m[4])==null?void 0:f[0])!=null&&d.data&&t!=1)b=(h=(p=m[4])==null?void 0:p[0])==null?void 0:h.data,N=(x=(g=m[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var S=w?4:1,j=Jh(b),_=[],E=0;E<b.length/2;++E){var I=j.getUint16(E*2,!0);I<65535&&_.push([E,I])}if(_.length!=y)throw"Expected ".concat(y," cells, found ").concat(_.length);var A=[];for(E=0;E<_.length-1;++E)A[_[E][0]]=N.subarray(_[E][1]*S,_[E+1][1]*S);return _.length>=1&&(A[_[_.length-1][0]]=N.subarray(_[_.length-1][1]*S)),{R:v,cells:A}}function N6e(e,t){var r,n=Fn(t.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?cs(n[7][0].data)>>>0>0?1:0:-1,i=wA(n[5],function(o){return w6e(o,s)});return{nrows:cs(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function j6e(e,t,r){var n,s=Fn(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(cs(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(cs(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=rn(i);var o=Fn(s[4][0].data),l=bI(e,e[Wi(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?bI(e,e[Wi(o[17][0].data)][0]):[],u=Fn(o[3][0].data),f=0;u[1].forEach(function(d){var p=Fn(d.data),h=e[Wi(p[2][0].data)][0],g=cs(h.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=N6e(e,h);x.data.forEach(function(m,v){m.forEach(function(y,w){var b=qr({r:f+v,c:w}),N=b6e(y,l,c);N&&(r[b]=N)})}),f+=x.nrows})}function k6e(e,t){var r=Fn(t.data),n={"!ref":"A1"},s=e[Wi(r[2][0].data)],i=cs(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return j6e(e,s[0],n),n}function S6e(e,t){var r,n=Fn(t.data),s={name:(r=n[1])!=null&&r[0]?mS(n[1][0].data):"",sheets:[]},i=wA(n[2],Wi);return i.forEach(function(o){e[o].forEach(function(l){var c=cs(l.meta[1][0].data);c==6e3&&s.sheets.push(k6e(e,l))})}),s}function _6e(e,t){var r=_A(),n=Fn(t.data),s=wA(n[1],Wi);if(s.forEach(function(i){e[i].forEach(function(o){var l=cs(o.meta[1][0].data);if(l==2){var c=S6e(e,o);c.sheets.forEach(function(u,f){AA(r,u,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function t4(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Yl(c.content)}catch(d){return console.log("?? "+c.content.length+" "+(d.message||d))}var f;try{f=Xl(u)}catch(d){return console.log("## "+(d.message||d))}f.forEach(function(d){i[d.id]=d.messages,o.push(d.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&cs(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(u){var f=cs(u.meta[1][0].data)>>>0;if(f==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return _6e(i,l)}function A6e(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&cs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Jh(e[7][0].data),f=0,d=[],p=Jh(e[4][0].data),h=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),p.setUint16(x*2,65535);continue}u.setUint16(x*2,f,!0),p.setUint16(x*2,h,!0);var m,v;switch(typeof t[x]){case"string":m=Zj({t:"s",v:t[x]},r),v=e4({t:"s",v:t[x]},r);break;case"number":m=Zj({t:"n",v:t[x]},r),v=e4({t:"n",v:t[x]},r);break;case"boolean":m=Zj({t:"b",v:t[x]},r),v=e4({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}d.push(m),f+=m.length,g.push(v),h+=v.length,++c}for(e[2][0].data=Kn(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),p.setUint16(x*2,65535,!0);return e[6][0].data=u0(d),e[3][0].data=u0(g),c}function C6e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=el(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(rn(n)));var i=n5(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(R){return R.forEach(function(z){typeof z=="string"&&o.push(z)})});var l={},c=[],u=Pr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(R,z){return[R,u.FullPaths[z]]}).forEach(function(R){var z=R[0],L=R[1];if(z.type==2&&z.name.match(/\.iwa/)){var H=z.content,ne=Yl(H),se=Xl(ne);se.forEach(function(Q){c.push(Q.id),l[Q.id]={deps:[],location:L,type:cs(Q.messages[0].meta[1][0].data)}})}}),c.sort(function(R,z){return R-z});var f=c.filter(function(R){return R>1}).map(function(R){return[R,Kn(R)]});u.FileIndex.map(function(R,z){return[R,u.FullPaths[z]]}).forEach(function(R){var z=R[0];if(R[1],!!z.name.match(/\.iwa/)){var L=Xl(Yl(z.content));L.forEach(function(H){H.messages.forEach(function(ne){f.forEach(function(se){H.messages.some(function(Q){return cs(Q.meta[1][0].data)!=11006&&p6e(Q.data,se[1])})&&l[se[0]].deps.push(H.id)})})})}});for(var d=Pr.find(u,l[1].location),p=Xl(Yl(d.content)),h,g=0;g<p.length;++g){var x=p[g];x.id==1&&(h=x)}var m=Wi(Fn(h.messages[0].data)[1][0].data);for(d=Pr.find(u,l[m].location),p=Xl(Yl(d.content)),g=0;g<p.length;++g)x=p[g],x.id==m&&(h=x);for(m=Wi(Fn(h.messages[0].data)[2][0].data),d=Pr.find(u,l[m].location),p=Xl(Yl(d.content)),g=0;g<p.length;++g)x=p[g],x.id==m&&(h=x);for(m=Wi(Fn(h.messages[0].data)[2][0].data),d=Pr.find(u,l[m].location),p=Xl(Yl(d.content)),g=0;g<p.length;++g)x=p[g],x.id==m&&(h=x);var v=Fn(h.messages[0].data);{v[6][0].data=Kn(n.e.r+1),v[7][0].data=Kn(n.e.c+1);var y=Wi(v[46][0].data),w=Pr.find(u,l[y].location),b=Xl(Yl(w.content));{for(var N=0;N<b.length&&b[N].id!=y;++N);if(b[N].id!=y)throw"Bad ColumnRowUIDMapArchive";var S=Fn(b[N].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var j=0;j<=n.e.c;++j){var _=[];_[1]=_[2]=[{type:0,data:Kn(j+420690)}],S[1].push({type:2,data:vi(_)}),S[2].push({type:0,data:Kn(j)}),S[3].push({type:0,data:Kn(j)})}S[4]=[],S[5]=[],S[6]=[];for(var E=0;E<=n.e.r;++E)_=[],_[1]=_[2]=[{type:0,data:Kn(E+726270)}],S[4].push({type:2,data:vi(_)}),S[5].push({type:0,data:Kn(E)}),S[6].push({type:0,data:Kn(E)});b[N].messages[0].data=vi(S)}w.content=qp(zp(b)),w.size=w.content.length,delete v[46];var I=Fn(v[4][0].data);{I[7][0].data=Kn(n.e.r+1);var A=Fn(I[1][0].data),C=Wi(A[2][0].data);w=Pr.find(u,l[C].location),b=Xl(Yl(w.content));{if(b[0].id!=C)throw"Bad HeaderStorageBucket";var F=Fn(b[0].messages[0].data);for(E=0;E<i.length;++E){var M=Fn(F[2][0].data);M[1][0].data=Kn(E),M[4][0].data=Kn(i[E].length),F[2][E]={type:F[2][0].type,data:vi(M)}}b[0].messages[0].data=vi(F)}w.content=qp(zp(b)),w.size=w.content.length;var B=Wi(I[2][0].data);w=Pr.find(u,l[B].location),b=Xl(Yl(w.content));{if(b[0].id!=B)throw"Bad HeaderStorageBucket";for(F=Fn(b[0].messages[0].data),j=0;j<=n.e.c;++j)M=Fn(F[2][0].data),M[1][0].data=Kn(j),M[4][0].data=Kn(n.e.r+1),F[2][j]={type:F[2][0].type,data:vi(M)};b[0].messages[0].data=vi(F)}w.content=qp(zp(b)),w.size=w.content.length;var K=Wi(I[4][0].data);(function(){for(var R=Pr.find(u,l[K].location),z=Xl(Yl(R.content)),L,H=0;H<z.length;++H){var ne=z[H];ne.id==K&&(L=ne)}var se=Fn(L.messages[0].data);{se[3]=[];var Q=[];o.forEach(function(ee,Me){Q[1]=[{type:0,data:Kn(Me)}],Q[2]=[{type:0,data:Kn(1)}],Q[3]=[{type:2,data:h6e(ee)}],se[3].push({type:2,data:vi(Q)})})}L.messages[0].data=vi(se);var re=zp(z),Ae=qp(re);R.content=Ae,R.size=R.content.length})();var G=Fn(I[3][0].data);{var Y=G[1][0];delete G[2];var q=Fn(Y.data);{var X=Wi(q[2][0].data);(function(){for(var R=Pr.find(u,l[X].location),z=Xl(Yl(R.content)),L,H=0;H<z.length;++H){var ne=z[H];ne.id==X&&(L=ne)}var se=Fn(L.messages[0].data);{delete se[6],delete G[7];var Q=new Uint8Array(se[5][0].data);se[5]=[];for(var re=0,Ae=0;Ae<=n.e.r;++Ae){var ee=Fn(Q);re+=A6e(ee,i[Ae],o),ee[1][0].data=Kn(Ae),se[5].push({data:vi(ee),type:2})}se[1]=[{type:0,data:Kn(n.e.c+1)}],se[2]=[{type:0,data:Kn(n.e.r+1)}],se[3]=[{type:0,data:Kn(re)}],se[4]=[{type:0,data:Kn(n.e.r+1)}]}L.messages[0].data=vi(se);var Me=zp(z),ze=qp(Me);R.content=ze,R.size=R.content.length})()}Y.data=vi(q)}I[3][0].data=vi(G)}v[4][0].data=vi(I)}h.messages[0].data=vi(v);var V=zp(p),T=qp(V);return d.content=T,d.size=d.content.length,u}function Y$(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function NA(e){Y$([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function jA(e){Y$([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function E6e(e){return xn.WS.indexOf(e)>-1?"sheet":e==xn.CS?"chart":e==xn.DS?"dialog":e==xn.MS?"macro":e&&e.length?e:"sheet"}function T6e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,E6e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function O6e(e,t,r,n,s,i,o,l,c,u,f,d){try{i[n]=mv(jl(e,r,!0),t);var p=As(e,t),h;switch(l){case"sheet":h=ZSe(p,t,s,c,i[n],u,f,d);break;case"chart":if(h=e_e(p,t,s,c,i[n],u,f,d),!h||!h["!drawel"])break;var g=Gg(h["!drawel"].Target,t),x=E1(g),m=$je(jl(e,g,!0),mv(jl(e,x,!0),g)),v=Gg(m,g),y=E1(v);h=ASe(jl(e,v,!0),v,c,mv(jl(e,y,!0),v),u,h);break;case"macro":h=t_e(p,t,s,c,i[n],u,f,d);break;case"dialog":h=r_e(p,t,s,c,i[n],u,f,d);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var w=[];i&&i[n]&&us(i[n]).forEach(function(b){var N="";if(i[n][b].Type==xn.CMNT){N=Gg(i[n][b].Target,t);var S=i_e(As(e,N,!0),N,c);if(!S||!S.length)return;sI(h,S,!1)}i[n][b].Type==xn.TCMNT&&(N=Gg(i[n][b].Target,t),w=w.concat(zje(As(e,N,!0),c)))}),w&&w.length&&sI(h,w,!0,c.people||[])}catch(b){if(c.WTF)throw b}}function Vl(e){return e.charAt(0)=="/"?e.slice(1):e}function P6e(e,t){if(qx(),t=t||{},NA(t),Jl(e,"META-INF/manifest.xml")||Jl(e,"objectdata.xml"))return xI(e,t);if(Jl(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof t4<"u"){if(e.FileIndex)return t4(e);var r=Pr.utils.cfb_new();return _8(e).forEach(function(M){an(r,M,qbe(e,M))}),t4(r)}throw new Error("Unsupported NUMBERS file")}if(!Jl(e,"[Content_Types].xml"))throw Jl(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Jl(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=_8(e),s=F2e(jl(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",As(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!As(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(xv=[],s.sst)try{xv=s_e(As(e,Vl(s.sst)),s.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&s.themes.length&&(c=a_e(jl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=n_e(As(e,Vl(s.style)),s.style,c,t))}s.links.map(function(M){try{var B=mv(jl(e,E1(Vl(M))),M);return l_e(As(e,Vl(M)),B,M,t)}catch{}});var f=QSe(As(e,Vl(s.workbooks[0])),s.workbooks[0],t),d={},p="";s.coreprops.length&&(p=As(e,Vl(s.coreprops[0]),!0),p&&(d=RB(p)),s.extprops.length!==0&&(p=As(e,Vl(s.extprops[0]),!0),p&&q2e(p,d,t)));var h={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=jl(e,Vl(s.custprops[0]),!0),p&&(h=W2e(p,t)));var g={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(B){return B.name}):d.Worksheets&&d.SheetNames.length>0&&(o=d.SheetNames),t.bookProps&&(g.Props=d,g.Custprops=h),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&s.calcchain&&(x=o_e(As(e,Vl(s.calcchain)),s.calcchain));var m=0,v={},y,w;{var b=f.Sheets;d.Worksheets=b.length,d.SheetNames=[];for(var N=0;N!=b.length;++N)d.SheetNames[N]=b[N].name}var S=i?"bin":"xml",j=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,j+1)+"_rels/"+s.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");Jl(e,_)||(_="xl/_rels/workbook."+S+".rels");var E=mv(jl(e,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=c_e(As(e,Vl(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Hje(As(e,Vl(s.people[0])),t)),E&&(E=T6e(E,f.Sheets));var I=As(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(m=0;m!=d.Worksheets;++m){var A="sheet";if(E&&E[m]?(y="xl/"+E[m][1].replace(/[\/]?xl\//,""),Jl(e,y)||(y=E[m][1]),Jl(e,y)||(y=_.replace(/_rels\/.*$/,"")+E[m][1]),A=E[m][2]):(y="xl/worksheets/sheet"+(m+1-I)+"."+S,y=y.replace(/sheet0\./,"sheet.")),w=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(m!=t.sheets)continue e;break;case"string":if(d.SheetNames[m].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,F=0;F!=t.sheets.length;++F)typeof t.sheets[F]=="number"&&t.sheets[F]==m&&(C=1),typeof t.sheets[F]=="string"&&t.sheets[F].toLowerCase()==d.SheetNames[m].toLowerCase()&&(C=1);if(!C)continue e}}O6e(e,y,w,d.SheetNames[m],m,v,o,A,t,f,c,u)}return g={Directory:s,Workbook:f,Props:d,Custprops:h,Deps:x,Sheets:o,SheetNames:d.SheetNames,Strings:xv,Styles:u,Themes:c,SSF:Oa(Rr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(M,B){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=e.FileIndex[B]}))),t&&t.bookVBA&&(s.vba.length>0?g.vbaraw=As(e,Vl(s.vba[0]),!0):s.defaults&&s.defaults.bin===Qje&&(g.vbaraw=As(e,"xl/vbaProject.bin",!0))),g}function I6e(e,t){var r=t||{},n="Workbook",s=Pr.find(e,n);try{if(n="/!DataSpaces/Version",s=Pr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(cNe(s.content),n="/!DataSpaces/DataSpaceMap",s=Pr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=dNe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Pr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=fNe(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Pr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);pNe(s.content)}catch{}if(n="/EncryptionInfo",s=Pr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=mNe(s.content);if(n="/EncryptedPackage",s=Pr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function D6e(e,t){return t.bookType=="ods"?X$(e,t):t.bookType=="numbers"?C6e(e,t):t.bookType=="xlsb"?L6e(e,t):F6e(e,t)}function L6e(e,t){dm=1024,e&&!e.SSF&&(e.SSF=Oa(Rr)),e&&e.SSF&&(qx(),gN(e.SSF),t.revssf=yN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,gv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=j$.indexOf(t.bookType)>-1,s=lA();jA(t=t||{});var i=K6(),o="",l=0;if(t.cellXfs=[],k0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",an(i,o,BB(e.Props,t)),s.coreprops.push(o),Xn(t.rels,2,o,xn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,an(i,o,zB(e.Props)),s.extprops.push(o),Xn(t.rels,3,o,xn.EXT_PROPS),e.Custprops!==e.Props&&us(e.Custprops||{}).length>0&&(o="docProps/custom.xml",an(i,o,qB(e.Custprops)),s.custprops.push(o),Xn(t.rels,4,o,xn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},d=e.Sheets[e.SheetNames[l-1]],p=(d||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,an(i,o,d_e(l-1,o,t,e,f)),s.sheets.push(o),Xn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,xn.WS[0])}if(d){var h=d["!comments"],g=!1,x="";h&&h.length>0&&(x="xl/comments"+l+"."+r,an(i,x,p_e(h,x)),s.comments.push(x),Xn(f,-1,"../comments"+l+"."+r,xn.CMNT),g=!0),d["!legacy"]&&g&&an(i,"xl/drawings/vmlDrawing"+l+".vml",w$(l,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&an(i,E1(o),km(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,an(i,o,h_e(t.Strings,o,t)),s.strs.push(o),Xn(t.wbrels,-1,"sharedStrings."+r,xn.SST)),o="xl/workbook."+r,an(i,o,u_e(e,o)),s.workbooks.push(o),Xn(t.rels,1,o,xn.WB),o="xl/theme/theme1.xml",an(i,o,pA(e.Themes,t)),s.themes.push(o),Xn(t.wbrels,-1,"theme/theme1.xml",xn.THEME),o="xl/styles."+r,an(i,o,f_e(e,o,t)),s.styles.push(o),Xn(t.wbrels,-1,"styles."+r,xn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",an(i,o,e.vbaraw),s.vba.push(o),Xn(t.wbrels,-1,"vbaProject.bin",xn.VBA)),o="xl/metadata."+r,an(i,o,m_e(o)),s.metadata.push(o),Xn(t.wbrels,-1,"metadata."+r,xn.XLMETA),an(i,"[Content_Types].xml",FB(s,t)),an(i,"_rels/.rels",km(t.rels)),an(i,"xl/_rels/workbook."+r+".rels",km(t.wbrels)),delete t.revssf,delete t.ssf,i}function F6e(e,t){dm=1024,e&&!e.SSF&&(e.SSF=Oa(Rr)),e&&e.SSF&&(qx(),gN(e.SSF),t.revssf=yN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,gv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=j$.indexOf(t.bookType)>-1,s=lA();jA(t=t||{});var i=K6(),o="",l=0;if(t.cellXfs=[],k0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",an(i,o,BB(e.Props,t)),s.coreprops.push(o),Xn(t.rels,2,o,xn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,an(i,o,zB(e.Props)),s.extprops.push(o),Xn(t.rels,3,o,xn.EXT_PROPS),e.Custprops!==e.Props&&us(e.Custprops||{}).length>0&&(o="docProps/custom.xml",an(i,o,qB(e.Custprops)),s.custprops.push(o),Xn(t.rels,4,o,xn.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},p=e.Sheets[e.SheetNames[l-1]],h=(p||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,an(i,o,D$(l-1,t,e,d)),s.sheets.push(o),Xn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,xn.WS[0])}if(p){var g=p["!comments"],x=!1,m="";if(g&&g.length>0){var v=!1;g.forEach(function(y){y[1].forEach(function(w){w.T==!0&&(v=!0)})}),v&&(m="xl/threadedComments/threadedComment"+l+"."+r,an(i,m,qje(g,f,t)),s.threadedcomments.push(m),Xn(d,-1,"../threadedComments/threadedComment"+l+"."+r,xn.TCMNT)),m="xl/comments"+l+"."+r,an(i,m,N$(g)),s.comments.push(m),Xn(d,-1,"../comments"+l+"."+r,xn.CMNT),x=!0}p["!legacy"]&&x&&an(i,"xl/drawings/vmlDrawing"+l+".vml",w$(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&an(i,E1(o),km(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,an(i,o,c$(t.Strings,t)),s.strs.push(o),Xn(t.wbrels,-1,"sharedStrings."+r,xn.SST)),o="xl/workbook."+r,an(i,o,B$(e)),s.workbooks.push(o),Xn(t.rels,1,o,xn.WB),o="xl/theme/theme1.xml",an(i,o,pA(e.Themes,t)),s.themes.push(o),Xn(t.wbrels,-1,"theme/theme1.xml",xn.THEME),o="xl/styles."+r,an(i,o,g$(e,t)),s.styles.push(o),Xn(t.wbrels,-1,"styles."+r,xn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",an(i,o,e.vbaraw),s.vba.push(o),Xn(t.wbrels,-1,"vbaProject.bin",xn.VBA)),o="xl/metadata."+r,an(i,o,b$()),s.metadata.push(o),Xn(t.wbrels,-1,"metadata."+r,xn.XLMETA),f.length>1&&(o="xl/persons/person.xml",an(i,o,Wje(f)),s.people.push(o),Xn(t.wbrels,-1,"persons/person.xml",xn.PEOPLE)),an(i,"[Content_Types].xml",FB(s,t)),an(i,"_rels/.rels",km(t.rels)),an(i,"xl/_rels/workbook."+r+".rels",km(t.wbrels)),delete t.revssf,delete t.ssf,i}function kA(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ol(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function M6e(e,t){return Pr.find(e,"EncryptedPackage")?I6e(e,t):q$(e,t)}function R6e(e,t){var r,n=e,s=t||{};return s.type||(s.type=ln&&Buffer.isBuffer(e)?"buffer":"base64"),r=dB(n,s),P6e(r,s)}function J$(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return hS(e.slice(r),t);default:break e}return wx.to_workbook(e,t)}function B6e(e,t){var r="",n=kA(e,t);switch(t.type){case"base64":r=Ol(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Gh(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=aa(r)),t.type="binary",J$(r,t)}function $6e(e,t){var r=e;return t.type=="base64"&&(r=Ol(r)),r=j1.utils.decode(1200,r.slice(2),"str"),t.type="binary",J$(r,t)}function U6e(e){return e.match(/[^\x00-\x7F]/)?Du(e):e}function r4(e,t,r,n){return n?(r.type="string",wx.to_workbook(e,r)):wx.to_workbook(t,r)}function r5(e,t){q6();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return r5(new Uint8Array(e),(r=Oa(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),_m={},r.dateNF&&(_m.dateNF=r.dateNF),r.type||(r.type=ln&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=ln?"buffer":"binary",n=Lbe(e),typeof Uint8Array<"u"&&!ln&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=U6e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Oa(r),r.type="array",r5(H6(n),r)}switch((s=kA(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return M6e(Pr.read(n,r),r);break;case 9:if(s[1]<=8)return q$(n,r);break;case 60:return hS(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return V5e(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return o$.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?R6e(n,r):r4(e,n,r,i);case 239:return s[3]===60?hS(n,r):r4(e,n,r,i);case 255:if(s[1]===254)return $6e(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Eh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Eh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return fS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return p$.to_workbook(n,r);break;case 10:case 13:case 32:return B6e(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return W5e.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?fS.to_workbook(n,r):r4(e,n,r,i)}function Q$(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ry(t.file,Pr.write(e,{type:ln?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Pr.write(e,t)}function z6e(e,t){var r=Oa(t||{}),n=D6e(e,r);return q6e(n,r)}function q6e(e,t){var r={},n=ln?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Pr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(xN(s))}return t.password&&typeof encrypt_agile<"u"?Q$(encrypt_agile(s,t.password),t):t.type==="file"?ry(t.file,s):t.type=="string"?aa(s):s}function H6e(e,t){var r=t||{},n=U_e(e,r);return Q$(n,r)}function Nu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return k1(Du(n));case"binary":return Du(n);case"string":return e;case"file":return ry(t.file,n,"utf8");case"buffer":return ln?Gd(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Nu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function W6e(e,t){switch(t.type){case"base64":return k1(e);case"binary":return e;case"string":return e;case"file":return ry(t.file,e,"binary");case"buffer":return ln?Gd(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Ob(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?k1(r):t.type=="string"?aa(r):r;case"file":return ry(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Z$(e,t){q6(),MSe(e);var r=Oa(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Z$(e,r);return r.type="array",xN(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Nu(D_e(e,r),r);case"slk":case"sylk":return Nu(i$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Nu(W$(e.Sheets[e.SheetNames[s]],r),r);case"txt":return W6e(eU(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Nu(SA(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Nu(o$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Ob(fS.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Nu(wx.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Nu(p$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Nu(l$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Nu(X$(e,r),r);case"wk1":return Ob(Eh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Ob(Eh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Ob(H$(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),H6e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return z6e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function V6e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function G6e(e,t,r){var n={};return n.type="file",n.file=t,V6e(n),Z$(e,n)}function K6e(e,t,r,n,s,i,o,l){var c=vs(r),u=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),d=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var h=t.s.c;h<=t.e.c;++h){var g=o?e[r][h]:e[n[h]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;i[h]!=null&&(p[i[h]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[h]!=null){if(x==null)if(g.t=="e"&&x===null)p[i[h]]=null;else if(u!==void 0)p[i[h]]=u;else if(f&&x===null)p[i[h]]=null;else continue;else p[i[h]]=f&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:zd(g,x,l);x!=null&&(d=!1)}}return{row:p,isempty:d}}function n5(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof f){case"string":c=In(f);break;case"number":c=In(e["!ref"]),c.s.r=f;break;default:c=f}n>0&&(s=0);var d=vs(c.s.r),p=[],h=[],g=0,x=0,m=Array.isArray(e),v=c.s.r,y=0,w={};m&&!e[v]&&(e[v]=[]);var b=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(b[y]||{}).hidden)switch(p[y]=Wa(y),r=m?e[v][y]:e[p[y]+d],n){case 1:i[y]=y-c.s.c;break;case 2:i[y]=p[y];break;case 3:i[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=zd(r,null,u),x=w[o]||0,!x)w[o]=1;else{do l=o+"_"+x++;while(w[l]);w[o]=x,w[l]=1}i[y]=l}for(v=c.s.r+s;v<=c.e.r;++v)if(!(N[v]||{}).hidden){var S=K6e(e,c,v,p,n,i,m,u);(S.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[g++]=S.row)}return h.length=g,h}var wI=/"/g;function X6e(e,t,r,n,s,i,o,l){for(var c=!0,u=[],f="",d=vs(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var h=l.dense?(e[r]||[])[p]:e[n[p]+d];if(h==null)f="";else if(h.v!=null){c=!1,f=""+(l.rawNumbers&&h.t=="n"?h.v:zd(h,null,l));for(var g=0,x=0;g!==f.length;++g)if((x=f.charCodeAt(g))===s||x===i||x===34||l.forceQuotes){f='"'+f.replace(wI,'""')+'"';break}f=="ID"&&(f='"ID"')}else h.f!=null&&!h.F?(c=!1,f="="+h.f,f.indexOf(",")>=0&&(f='"'+f.replace(wI,'""')+'"')):f="";u.push(f)}return l.blankrows===!1&&c?null:u.join(o)}function SA(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=In(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",d=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],g=s.s.c;g<=s.e.c;++g)(p[g]||{}).hidden||(d[g]=Wa(g));for(var x=0,m=s.s.r;m<=s.e.r;++m)(h[m]||{}).hidden||(f=X6e(e,s,m,d,o,c,i,n),f!=null&&(n.strip&&(f=f.replace(u,"")),(f||n.blankrows!==!1)&&r.push((x++?l:"")+f)));return delete n.dense,r.join("")}function eU(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=SA(e,t);return r}function Y6e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=In(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Wa(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=vs(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function tU(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Va(n.origin):n.origin;o=c.r,l=c.c}var u,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var d=In(i["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),o==-1&&(o=d.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var p=n.header||[],h=0;t.forEach(function(x,m){us(x).forEach(function(v){(h=p.indexOf(v))==-1&&(p[h=p.length]=v);var y=x[v],w="z",b="",N=qr({c:l+h,r:o+m+s});u=F1(i,N),y&&typeof y=="object"&&!(y instanceof Date)?i[N]=y:(typeof y=="number"?w="n":typeof y=="boolean"?w="b":typeof y=="string"?w="s":y instanceof Date?(w="d",n.cellDates||(w="n",y=Gs(y)),b=n.dateNF||Rr[14]):y===null&&n.nullError&&(w="e",y=0),u?(u.t=w,u.v=y,delete u.w,delete u.R,b&&(u.z=b)):i[N]=u={t:w,v:y},b&&(u.z=b))})}),f.e.c=Math.max(f.e.c,l+p.length-1);var g=vs(o);if(s)for(h=0;h<p.length;++h)i[Wa(h+l)+g]={t:"s",v:p[h]};return i["!ref"]=rn(f),i}function J6e(e,t){return tU(null,e,t)}function F1(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Va(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?F1(e,qr(t)):F1(e,qr({r:t,c:r||0}))}function Q6e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function _A(){return{SheetNames:[],Sheets:{}}}function AA(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(R$(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Z6e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Q6e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function eAe(e,t){return e.z=t,e}function rU(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function tAe(e,t,r){return rU(e,"#"+t,r)}function rAe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function nAe(e,t,r,n){for(var s=typeof t!="string"?t:In(t),i=typeof t=="string"?t:rn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=F1(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var V0={encode_col:Wa,encode_row:vs,encode_cell:qr,encode_range:rn,decode_col:rA,decode_row:tA,split_cell:h2e,decode_cell:Va,decode_range:el,format_cell:zd,sheet_add_aoa:EB,sheet_add_json:tU,sheet_add_dom:V$,aoa_to_sheet:Hx,json_to_sheet:J6e,table_to_sheet:G$,table_to_book:c6e,sheet_to_csv:SA,sheet_to_txt:eU,sheet_to_json:n5,sheet_to_html:W$,sheet_to_formulae:Y6e,sheet_to_row_object_array:n5,sheet_get_cell:F1,book_new:_A,book_append_sheet:AA,book_set_sheet_visibility:Z6e,cell_set_number_format:eAe,cell_set_hyperlink:rU,cell_set_internal_link:tAe,cell_add_comment:rAe,sheet_set_array_formula:nAe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Nd={all:["tasks"],lists:()=>[...Nd.all,"list"],list:e=>[...Nd.lists(),e],details:()=>[...Nd.all,"detail"],detail:e=>[...Nd.details(),e]},aAe=(e,t,r)=>Dl({queryKey:Nd.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const n=await pN(e);return Array.isArray(n)?n:n!=null&&n.data&&Array.isArray(n.data)||n!=null&&n.success&&(n!=null&&n.data)&&Array.isArray(n.data)?n.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:n=>n}),sAe=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async n=>{const s=await vR(n);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Nd.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to create task")}})},iAe=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async({id:n,data:s})=>{const i=await $w(n,s);return i.data||i},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Nd.lists()}),e.invalidateQueries({queryKey:Nd.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to update task")}})},oAe=()=>{const e=Ps(),{showSuccess:t,showError:r}=Wn();return Ao({mutationFn:async n=>(await yR(n),n),onSuccess:()=>{e.invalidateQueries({queryKey:Nd.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to delete task")}})},Kg={all:["projects"],lists:()=>[...Kg.all,"list"],list:e=>[...Kg.lists(),e],details:()=>[...Kg.all,"detail"],detail:e=>[...Kg.details(),e]},lAe=(e,t,r)=>Dl({queryKey:Kg.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const n=await $x(e);return Array.isArray(n)?n:n!=null&&n.data&&Array.isArray(n.data)||n!=null&&n.success&&(n!=null&&n.data)&&Array.isArray(n.data)?n.data:[]},staleTime:1*60*1e3,refetchInterval:2*60*1e3,placeholderData:n=>n}),Xg={all:["users"],lists:()=>[...Xg.all,"list"],list:e=>[...Xg.lists(),{search:e}],details:()=>[...Xg.all,"detail"],detail:e=>[...Xg.details(),e]},cAe=e=>Dl({queryKey:Xg.list(e),queryFn:async()=>{const t=await su(void 0);return Array.isArray(t)?t:t!=null&&t.data&&Array.isArray(t.data)||t!=null&&t.success&&(t!=null&&t.data)&&Array.isArray(t.data)?t.data:[]},staleTime:5*60*1e3,refetchInterval:10*60*1e3,placeholderData:t=>t}),uAe=({onCreateTask:e,currentUser:t})=>{var Ai,yc,bc,Xs;const{showSuccess:r,showError:n,showInfo:s}=Wn(),i=Ps(),{data:o=[],isLoading:l,error:c}=aAe(),{data:u=[],isLoading:f}=lAe(),{data:d=[],isLoading:p}=cAe(),h=iAe(),g=oAe();sAe();const x=l||f||p,[m,v]=D.useState(""),[y,w]=D.useState("active"),[b,N]=D.useState("list"),[S,j]=D.useState("none"),[_,E]=D.useState(!1),[I,A]=D.useState("upload"),[C,F]=D.useState([]),[M,B]=D.useState([]),[K,G]=D.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[Y,q]=D.useState(!1),[X,V]=D.useState(null),[T,R]=D.useState(null),[z,L]=D.useState(null),[H,ne]=D.useState(null),[se,Q]=D.useState(null),[re,Ae]=D.useState(null),[ee,Me]=D.useState(!1),[ze,oe]=D.useState(!1),[J,je]=D.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[ce,ye]=D.useState([]),[me,ge]=D.useState(!1),[Ce,Ue]=D.useState(!1),[Te,ue]=D.useState(!1),[Oe,st]=D.useState(!1),[be,De]=D.useState(""),[We,Xe]=D.useState(""),[Et,wt]=D.useState(""),[Ve,xt]=D.useState(null),[Tt,he]=D.useState(!1),[Ge,kt]=D.useState(null),[gt,Vt]=D.useState(null),[_r,lr]=D.useState(!1),[Gt,rr]=D.useState(""),[ir,pr]=D.useState(0),[Nr,jr]=D.useState([]),[Dt,Sr]=D.useState(!1),[Gr,cn]=D.useState([]),[qe,mt]=D.useState(!1),le=D.useRef(null),_e=D.useRef(null),we=D.useRef(null),Se=Fe=>{const vt=Fe.getFullYear(),Lt=Fe.getMonth(),qt=Fe.getDate();return`${vt}-${String(Lt+1).padStart(2,"0")}-${String(qt).padStart(2,"0")}`},ae=Fe=>{if(!Fe||!/^\d{4}-\d{2}-\d{2}$/.test(Fe))return Fe;const[vt,Lt,qt]=Fe.split("-").map(Number);return new Date(vt,Lt-1,qt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},pe=Fe=>{const vt=new Date(Fe),Lt=vt.getDay(),qt=vt.getDate()-Lt+(Lt===0?-6:1);return new Date(vt.setDate(qt))},Re=Fe=>{const vt=new Date(Fe);vt.setHours(0,0,0,0);const Lt=new Date(vt);return Lt.setDate(vt.getDate()+6),Lt.setHours(23,59,59,999),{start:vt,end:Lt}},Ye=Fe=>{if(!Fe||!/^\d{4}-\d{2}-\d{2}$/.test(Fe))return null;const[vt,Lt,qt]=Fe.split("-").map(Number),vr=new Date(vt,Lt-1,qt),gr=pe(vr);return`${gr.getFullYear()}-${String(gr.getMonth()+1).padStart(2,"0")}-${String(gr.getDate()).padStart(2,"0")}`};D.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),n("Failed to load tasks"))},[c,n]),D.useEffect(()=>{re&&!ee&&je({title:re.title,category:re.category||"",description:re.description||"",dueDate:re.dueDate||"",priority:re.priority||"Medium",status:re.status||"Todo",assigneeId:re.assigneeId,projectId:re.projectId||""})},[re,ee]),D.useEffect(()=>{if(!re)return;let Fe=!1;return(async()=>{try{const vt=await Bw(),Lt=Array.isArray(vt==null?void 0:vt.data)?vt.data:[];Fe||cn(Lt)}catch{Fe||cn([])}})(),()=>{Fe=!0}},[re==null?void 0:re.id]),D.useEffect(()=>{if(!ee){mt(!1);return}J.category&&Gr.includes(J.category)?mt(!1):J.category&&!Gr.includes(J.category)&&mt(!0)},[ee,J.category,Gr]);const Je=async Fe=>{if(o.find(Lt=>Lt.id===Fe)){R(Fe);try{await h.mutateAsync({id:Fe,data:{archived:y==="active"}}),ne(null)}catch{}finally{R(null)}}},Qe=async Fe=>{V(Fe);try{await g.mutateAsync(Fe),Q(null)}catch{}finally{V(null)}},Be=()=>{ce.length===ea.length?ye([]):ye(ea.map(Fe=>Fe.id))},ke=async()=>{ge(!0);try{const Fe=[...ce];await Promise.all(Fe.map(vt=>g.mutateAsync(vt))),ye([]),Ue(!1),r(`Successfully deleted ${Fe.length} task${Fe.length>1?"s":""}`)}catch(Fe){n(Fe.message||"Failed to delete tasks")}finally{ge(!1)}},He=async()=>{var Fe;if(!be){n("Please select a project");return}st(!0);try{const vt=[...ce];await Promise.all(vt.map(Lt=>h.mutateAsync({id:Lt,data:{projectId:be==="__none__"?null:be}}))),ye([]),ue(!1),De(""),r(`Assigned ${vt.length} task${vt.length>1?"s":""} to ${be==="__none__"?"No project":((Fe=u.find(Lt=>Lt.id===be))==null?void 0:Fe.title)||"project"}`)}catch(vt){n(vt.message||"Failed to assign project")}finally{st(!1)}},at=()=>{const Fe=new Date;Fe.setDate(Fe.getDate()+30);const vt=Fe.getDate(),Lt=Fe.getMonth()+1,qt=Fe.getFullYear(),vr=`${vt}-${Lt}-${qt}`,gr=V0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",vr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Br=V0.book_new();V0.book_append_sheet(Br,gr,"Tasks"),G6e(Br,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},ht=async()=>{var Fe,vt,Lt,qt,vr,gr,Br,Rn,Vn;if(!K.title){n("Please map the required field: Title");return}if(M.length===0){n("No data to import");return}q(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",K),console.log("[IMPORT] Parsed data rows:",M.length),console.log("[IMPORT] Sample parsed row:",M[0]);const jn=(t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!jn){n("Please log in to import tasks"),q(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:M.length,columnMapping:K,usersCount:d.length,currentUserId:jn});const yr=M.map((Zt,gn)=>{console.log(`[IMPORT] Processing row ${gn}:`,Zt),console.log("[IMPORT] Column mapping:",K);const xr=String(Zt[K.title]||"").trim(),or=K.category?String(Zt[K.category]||"").trim():"",cr=String(Zt[K.dueDate]||"").trim(),Dn=K.description?String(Zt[K.description]||"").trim():"",ua=K.priority?String(Zt[K.priority]||"").trim():"Medium",Ya=K.owner?String(Zt[K.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${gn}:`,{title:xr,category:or,dueDateRaw:cr,description:Dn,priorityRaw:ua,ownerRaw:Ya,rowKeys:Object.keys(Zt),mappedTitleKey:K.title,mappedDueDateKey:K.dueDate});let dn="";if(cr&&cr.toLowerCase().trim()==="ongoing")dn="";else if(cr)if(/^\d+$/.test(cr)&&parseFloat(cr)>25569){const $t=new Date(1900,0,1),Kt=parseFloat(cr)-2,dr=new Date($t.getTime()+Kt*24*60*60*1e3);isNaN(dr.getTime())||(dn=Se(dr))}else{let $t=null;if(/^\d{4}-\d{2}-\d{2}$/.test(cr))dn=cr,$t=new Date(0);else if(cr.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(cr)){const Kt=cr.split("-").map(dr=>dr.trim());if(Kt.length===3){const dr=parseInt(Kt[0],10),Wr=parseInt(Kt[1],10)-1,Zr=parseInt(Kt[2],10);!isNaN(dr)&&!isNaN(Wr)&&!isNaN(Zr)&&dr>=1&&dr<=31&&Wr>=0&&Wr<=11&&($t=new Date(Zr,Wr,dr),console.log(`[IMPORT] Parsed hyphen-separated date "${cr}" as day-month-year -> ${Se($t)}`))}}else if(cr.includes("/")){const Kt=cr.split("/").map(dr=>dr.trim());if(Kt.length===3){const dr=parseInt(Kt[0],10),Wr=parseInt(Kt[1],10)-1;let Zr=parseInt(Kt[2],10);Zr<100&&(Zr+=2e3),!isNaN(dr)&&!isNaN(Wr)&&!isNaN(Zr)&&($t=new Date(Zr,Wr,dr))}}else if(cr.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const Kt=cr.split("/"),dr=parseInt(Kt[0],10)-1,Wr=parseInt(Kt[1],10),Zr=parseInt(Kt[2],10);!isNaN(Wr)&&!isNaN(dr)&&!isNaN(Zr)&&($t=new Date(Zr,dr,Wr))}else if(!$t||isNaN($t.getTime())){const Kt=cr.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(Kt){const[,dr,Wr,Zr]=Kt,Ja=["january","february","march","april","may","june","july","august","september","october","november","december"],mi=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Ju=dr.toLowerCase().trim();let Eo=-1;for(let Ys=0;Ys<Ja.length;Ys++)if(Ju.startsWith(Ja[Ys])||Ju.startsWith(mi[Ys])){Eo=Ys;break}if(Eo>=0){const Ys=parseInt(Wr,10),Ll=parseInt(Zr,10);$t=new Date(Ll,Eo,Ys),$t.getFullYear()!==Ll||$t.getMonth()!==Eo||$t.getDate()!==Ys?(console.warn(`[IMPORT] Invalid date parsed from "${cr}": year=${Ll}, month=${Eo}, day=${Ys}`),$t=null):console.log(`[IMPORT] Successfully parsed date "${cr}" -> ${Se($t)}`)}else console.warn(`[IMPORT] Could not match month name in "${cr}"`)}}if(!$t||isNaN($t.getTime())){const Kt=new Date(cr);if(!isNaN(Kt.getTime())){const dr=Kt.getFullYear(),Wr=Kt.getMonth(),Zr=Kt.getDate();$t=new Date(dr,Wr,Zr),console.log(`[IMPORT] Used fallback date parsing for "${cr}" -> ${Se($t)}`)}}$t&&!isNaN($t.getTime())&&!dn?(dn=Se($t),console.log(`[IMPORT] Final dueDate for row ${gn}: "${cr}" -> "${dn}"`)):cr&&!dn&&console.error(`[IMPORT] Failed to parse date "${cr}" for row ${gn}`)}const no={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[ua.toLowerCase()]||"Medium";let Pe=jn;if(Ya&&d.length>0){const $t=Ya.toLowerCase().trim(),Kt=d.find(dr=>dr.name.toLowerCase().trim()===$t||dr.email.toLowerCase().trim()===$t||dr.name.toLowerCase().trim().includes($t)||dr.email.toLowerCase().trim().includes($t));Kt?(Pe=Kt.id,console.log(`[IMPORT] Matched owner "${Ya}" to user:`,Kt.name,Kt.id)):console.warn(`[IMPORT] Could not match owner "${Ya}", using current user`)}Pe||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),Pe=jn);const Ht={title:xr.trim(),category:or||void 0,dueDate:dn||null,description:Dn.trim()||"",priority:no,status:"Todo",assigneeId:Pe,_rowIndex:gn,_rawDate:cr};return(!Ht.title||!Ht.assigneeId)&&console.error(`[IMPORT] Row ${gn} missing required fields:`,{hasTitle:!!Ht.title,hasAssigneeId:!!Ht.assigneeId,taskData:Ht}),Pe||console.warn(`[IMPORT] Row ${gn}: No assigneeId found, using current user:`,{title:xr,ownerRaw:Ya,userId:jn}),console.log(`[IMPORT] Task data for row ${gn}:`,Ht),Ht}).filter(Zt=>{const gn=Zt.title&&Zt.assigneeId;return gn?console.log("[IMPORT] Valid task:",{title:Zt.title,dueDate:Zt.dueDate||"Not set",assigneeId:Zt.assigneeId,priority:Zt.priority,status:Zt.status}):console.error("[IMPORT] Filtered out invalid task:",{title:Zt.title,dueDate:Zt.dueDate,assigneeId:Zt.assigneeId,rawDate:Zt._rawDate,rowIndex:Zt._rowIndex,fullTask:Zt,missingFields:{title:!Zt.title,assigneeId:!Zt.assigneeId}}),gn}).map(({_rowIndex:Zt,_rawDate:gn,...xr})=>(xr.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",xr),xr.assigneeId=jn),xr));if(console.log("[IMPORT] Final tasks to import:",yr),console.log("[IMPORT] Tasks count:",yr.length),yr.length===0){const Zt=M[0],gn=Zt?String(Zt[K.title]||"").trim():"N/A",xr=Zt?String(Zt[K.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:M.length,columnMapping:K,mappedTitle:K.title,mappedDueDate:K.dueDate,sampleRow:Zt,sampleTitle:gn,sampleDate:xr,sampleRowKeys:Zt?Object.keys(Zt):[],parsedData:M.slice(0,3)}),n(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${K.title}")
2. Due Date column is mapped correctly (current: "${K.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${gn}", Date: "${xr}"

Available columns: ${C.join(", ")}`),q(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const Ft=yr.map(({_rowIndex:Zt,_rawDate:gn,...xr})=>xr);console.log("[IMPORT] Tasks to import count:",Ft.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(Ft,null,2)),console.log("[IMPORT] Sample task structure:",{title:(Fe=Ft[0])==null?void 0:Fe.title,dueDate:(vt=Ft[0])==null?void 0:vt.dueDate,assigneeId:(Lt=Ft[0])==null?void 0:Lt.assigneeId,priority:(qt=Ft[0])==null?void 0:qt.priority,status:(vr=Ft[0])==null?void 0:vr.status,description:(gr=Ft[0])==null?void 0:gr.description,hasProjectId:!!((Br=Ft[0])!=null&&Br.projectId)});const Dr=Ft.filter(Zt=>!Zt.title||!Zt.assigneeId);if(Dr.length>0){console.error("[IMPORT] Invalid tasks found:",Dr),n(`Cannot import: ${Dr.length} task(s) missing required fields (title or assigneeId)`),q(!1);return}let mr;try{mr=await Hge(Ft),console.log("[IMPORT] API call successful")}catch(Zt){console.error("[IMPORT] API call failed:",Zt),console.error("[IMPORT] Error details:",{message:Zt.message,status:Zt.status,code:Zt.code,stack:Zt.stack}),n(`Failed to import tasks: ${Zt.message||"Unknown error"}`),q(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(mr,null,2)),console.log("[IMPORT] Response type:",typeof mr),console.log("[IMPORT] Response keys:",mr?Object.keys(mr):"null");let hr={},nr=[];if(mr)mr.success&&mr.data?(hr=mr.data,nr=hr.created||[]):mr.data&&Array.isArray(mr.data.created)?(hr=mr.data,nr=hr.created||[]):mr.created&&Array.isArray(mr.created)?(hr=mr,nr=hr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),hr=mr.data||mr,nr=hr.created||((Rn=hr.data)==null?void 0:Rn.created)||[]),console.log("[IMPORT] Extracted importData:",hr),console.log("[IMPORT] Created tasks:",nr),console.log("[IMPORT] Created tasks count:",nr.length),console.log("[IMPORT] Created task IDs:",nr.map(Zt=>Zt==null?void 0:Zt.id)),console.log("[IMPORT] Created task details:",nr.map(Zt=>({id:Zt.id,title:Zt.title,assigneeId:Zt.assigneeId})));else{console.error("[IMPORT] No response received from API"),n("No response received from server. Please check your connection."),q(!1);return}const ca=hr.successful??nr.length??0,Fr=hr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:ca,failedCount:Fr,total:yr.length,createdTasks:nr.length,createdTaskIds:nr.map(Zt=>Zt.id),errors:hr.errors}),nr&&nr.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",nr.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",nr),console.error("[IMPORT] Response structure:",mr),console.error("[IMPORT] Import data:",hr)),Fr>0){const Zt=((Vn=hr.errors)==null?void 0:Vn.map(gn=>`Row ${gn.index+1}: ${gn.error}`).join(`
`))||"";n(`Imported ${ca} task(s), but ${Fr} failed.
${Zt}`)}else r(`Successfully imported ${ca} task(s)`);B([]),F([]),G({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),le.current&&(le.current.value=""),E(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(jn){console.error("Import error:",jn),n(jn.message||"Failed to import tasks. Please check your data format.")}finally{q(!1)}},jt=Fe=>{if(!Fe||Fe.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",Fe),console.log("[IMPORT] Header detection - firstRow length:",Fe.length),console.log("[IMPORT] Header detection - firstRow values:",Fe.map((gr,Br)=>`[${Br}]: "${gr}"`));const vt=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let Lt=0;const qt=Fe.filter(gr=>gr&&String(gr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",qt);for(const gr of qt){const Br=String(gr).toLowerCase().trim();vt.some(Rn=>Br.includes(Rn))&&(Lt++,console.log(`[IMPORT] Header detection - matched keyword in: "${gr}"`)),Br.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(Lt++,console.log(`[IMPORT] Header detection - matched pattern in: "${gr}"`))}const vr=qt.length>0?Lt/qt.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:Fe,totalCells:Fe.length,cellsToCheck:qt.length,matchCount:Lt,matchRatio:vr,isHeader:vr>=.4}),vr>=.4},Bt=async Fe=>{var Lt,qt;const vt=(Lt=Fe.target.files)==null?void 0:Lt[0];if(vt)try{const vr=(qt=vt.name.split(".").pop())==null?void 0:qt.toLowerCase();if(vr==="csv"){const gr=new FileReader;gr.onload=Br=>{var Rn,Vn;try{const jn=new Uint8Array((Rn=Br.target)==null?void 0:Rn.result),yr=r5(jn,{type:"array",sheetStubs:!0}),Ft=yr.SheetNames[0],Dr=yr.Sheets[Ft],mr=V0.decode_range(Dr["!ref"]||"A1"),hr=mr.e.c-mr.s.c+1;console.log("[IMPORT] CSV worksheet range:",Dr["!ref"]),console.log("[IMPORT] CSV number of columns from range:",hr);const nr=V0.sheet_to_json(Dr,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",nr.length),console.log("[IMPORT] CSV first row length:",(Vn=nr[0])==null?void 0:Vn.length),console.log("[IMPORT] CSV first row:",nr[0]),nr.length===0){n("File is empty");return}if(nr[0]&&nr[0].length<hr)for(console.log(`[IMPORT] CSV: Padding first row from ${nr[0].length} to ${hr} columns`);nr[0].length<hr;)nr[0].push("");const ca=jt(nr[0]);console.log("[IMPORT] CSV Header detection result:",ca);let Fr,Zt;if(ca?(Fr=nr[0].map((or,cr)=>String(or||"").trim()||`Column ${cr+1}`),Zt=1,console.log("[IMPORT] CSV raw first row:",nr[0]),console.log("[IMPORT] CSV processed headers:",Fr)):(Fr=nr[0].map((or,cr)=>`Column ${cr+1}`),Zt=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),Fr.length===0){n("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",Fr),console.log("[IMPORT] CSV detected headers count:",Fr.length),console.log("[IMPORT] CSV detected headers array:",Fr),F(Fr),console.log("[IMPORT] CSV setDetectedColumns called with:",Fr);const gn=[];for(let or=Zt;or<nr.length;or++){const cr={},Dn=nr[or]||[];for(;Dn.length<Fr.length;)Dn.push("");Fr.forEach((ua,Ya)=>{const dn=Dn[Ya];if(typeof dn=="number"&&dn>25569&&ua.toLowerCase().includes("date")){const pi=new Date(1900,0,1),no=dn-2,Pe=new Date(pi.getTime()+no*24*60*60*1e3);cr[ua]=Pe.toISOString().split("T")[0]}else cr[ua]=dn!=null?String(dn).trim():""}),Object.values(cr).some(ua=>ua)&&gn.push(cr)}console.log("[IMPORT] CSV parsed rows:",gn),console.log("[IMPORT] CSV parsed rows count:",gn.length),B(gn);const xr={title:Fr.find(or=>or.toLowerCase().includes("title")||or.toLowerCase().includes("task")&&or.toLowerCase().includes("name")||!or.toLowerCase().includes("category")&&or.toLowerCase().includes("name"))||"",category:Fr.find(or=>or.toLowerCase().includes("category")||or.toLowerCase().includes("task")&&or.toLowerCase().includes("cat"))||"",dueDate:Fr.find(or=>or.toLowerCase().includes("due")||or.toLowerCase().includes("date")&&!or.toLowerCase().includes("created")&&!or.toLowerCase().includes("updated"))||"",description:Fr.find(or=>or.toLowerCase().includes("description")||or.toLowerCase().includes("desc"))||"",priority:Fr.find(or=>or.toLowerCase().includes("priority")||or.toLowerCase().includes("prio"))||"",owner:Fr.find(or=>or.toLowerCase().includes("owner")||or.toLowerCase().includes("assignee")||or.toLowerCase().includes("assigned")||or.toLowerCase().includes("task")&&or.toLowerCase().includes("owner"))||""};G(xr),A("mapping")}catch(jn){console.error("CSV parse error:",jn),n("Failed to parse CSV file: "+(jn.message||"Unknown error"))}},gr.readAsArrayBuffer(vt)}else if(vr==="xlsx"||vr==="xls"){const gr=new FileReader;gr.onload=Br=>{var gn,xr;const Rn=new Uint8Array((gn=Br.target)==null?void 0:gn.result),Vn=r5(Rn,{type:"array"}),jn=Vn.SheetNames[0],yr=Vn.Sheets[jn],Ft=V0.decode_range(yr["!ref"]||"A1"),Dr=Ft.e.c-Ft.s.c+1;console.log("[IMPORT] Excel worksheet range:",yr["!ref"]),console.log("[IMPORT] Excel number of columns from range:",Dr);const mr=V0.sheet_to_json(yr,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",mr.length),console.log("[IMPORT] Excel first row length:",(xr=mr[0])==null?void 0:xr.length),console.log("[IMPORT] Excel first row:",mr[0]),mr.length===0){n("File is empty");return}if(mr[0]&&mr[0].length<Dr)for(console.log(`[IMPORT] Padding first row from ${mr[0].length} to ${Dr} columns`);mr[0].length<Dr;)mr[0].push("");const hr=jt(mr[0]);console.log("[IMPORT] Excel Header detection result:",hr);let nr,ca;hr?(nr=mr[0].map((or,cr)=>String(or||"").trim()||`Column ${cr+1}`),ca=1,console.log("[IMPORT] Excel raw first row:",mr[0]),console.log("[IMPORT] Excel processed headers:",nr)):(nr=mr[0].map((or,cr)=>`Column ${cr+1}`),ca=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",nr),console.log("[IMPORT] Detected headers count:",nr.length),console.log("[IMPORT] Detected headers array:",nr),console.log("[IMPORT] Raw JSON data:",mr),F(nr),console.log("[IMPORT] setDetectedColumns called with:",nr);const Fr=[];for(let or=ca;or<mr.length;or++){const cr={},Dn=mr[or]||[];for(;Dn.length<nr.length;)Dn.push("");nr.forEach((ua,Ya)=>{const dn=Dn[Ya];if(typeof dn=="number"&&dn>25569&&ua.toLowerCase().includes("date")){const pi=new Date(1900,0,1),no=dn-2,Pe=new Date(pi.getTime()+no*24*60*60*1e3),Ht=Pe.getFullYear(),$t=Pe.getMonth(),Kt=Pe.getDate();cr[ua]=`${Ht}-${String($t+1).padStart(2,"0")}-${String(Kt).padStart(2,"0")}`}else cr[ua]=dn!=null?String(dn).trim():""}),Object.values(cr).some(ua=>ua)&&Fr.push(cr)}console.log("[IMPORT] Parsed rows:",Fr),console.log("[IMPORT] Parsed rows count:",Fr.length),B(Fr);const Zt={title:nr.find(or=>or.toLowerCase().includes("title")||or.toLowerCase().includes("task")&&or.toLowerCase().includes("name")||!or.toLowerCase().includes("category")&&or.toLowerCase().includes("name"))||"",category:nr.find(or=>or.toLowerCase().includes("category")||or.toLowerCase().includes("task")&&or.toLowerCase().includes("cat"))||"",dueDate:nr.find(or=>or.toLowerCase().includes("due")||or.toLowerCase().includes("date")&&!or.toLowerCase().includes("created")&&!or.toLowerCase().includes("updated"))||"",description:nr.find(or=>or.toLowerCase().includes("description")||or.toLowerCase().includes("desc"))||"",priority:nr.find(or=>or.toLowerCase().includes("priority")||or.toLowerCase().includes("prio"))||"",owner:nr.find(or=>or.toLowerCase().includes("owner")||or.toLowerCase().includes("assignee")||or.toLowerCase().includes("assigned")||or.toLowerCase().includes("task")&&or.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",Zt),G(Zt),A("mapping")},gr.readAsArrayBuffer(vt)}else n("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(vr){console.error("Error parsing file:",vr),n("Failed to parse file: "+(vr.message||"Unknown error"))}},Jt=async(Fe,vt,Lt)=>{Lt.stopPropagation();const qt=vt==="Done"?"Todo":"Done";L(Fe);try{await h.mutateAsync({id:Fe,data:{status:qt}}),(re==null?void 0:re.id)===Fe&&Ae({...re,status:qt})}catch{}finally{L(null)}},Tr=async()=>{if(re){if(!J.title.trim()){n("Task title is required");return}if(!J.assigneeId){n("Assignee is required");return}oe(!0);try{await h.mutateAsync({id:re.id,data:{title:J.title.trim(),category:J.category.trim()||void 0,description:J.description.trim()||"",dueDate:J.dueDate||null,priority:J.priority,status:J.status,assigneeId:J.assigneeId,projectId:J.projectId||null}}),Ae({...re,title:J.title.trim(),category:J.category.trim()||void 0,description:J.description.trim()||"",dueDate:J.dueDate||"",priority:J.priority,status:J.status,assigneeId:J.assigneeId,projectId:J.projectId||void 0}),Me(!1)}catch{}finally{oe(!1)}}},En=(Fe,vt=1200,Lt=1200,qt=.8)=>new Promise((vr,gr)=>{const Br=new FileReader;Br.onload=Rn=>{var jn;const Vn=new Image;Vn.onload=()=>{let yr=Vn.width,Ft=Vn.height;yr>Ft?yr>vt&&(Ft=Ft*vt/yr,yr=vt):Ft>Lt&&(yr=yr*Lt/Ft,Ft=Lt);const Dr=document.createElement("canvas");Dr.width=yr,Dr.height=Ft;const mr=Dr.getContext("2d");mr?(mr.drawImage(Vn,0,0,yr,Ft),vr(Dr.toDataURL("image/jpeg",qt))):gr(new Error("Canvas context not available"))},Vn.onerror=()=>gr(new Error("Failed to load image")),Vn.src=(jn=Rn.target)==null?void 0:jn.result},Br.onerror=()=>gr(new Error("Failed to read file")),Br.readAsDataURL(Fe)}),bs=async Fe=>{var Lt;const vt=(Lt=Fe.target.files)==null?void 0:Lt[0];if(vt){if(!vt.type.startsWith("image/")){n("Please select an image file");return}if(vt.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const qt=await En(vt,1200,1200,.8);wt(qt),xt(vt)}catch(qt){n(qt.message||"Failed to process image")}}},_n=Fe=>{const vt=Fe.target.value,Lt=Fe.target.selectionStart;Xe(vt),pr(Lt);const qt=vt.substring(0,Lt),vr=qt.lastIndexOf("@");if(vr!==-1){const gr=qt.substring(vr+1),Br=vr>0?qt[vr-1]:" ";if((Br===" "||Br===`
`||vr===0)&&!gr.includes(" ")&&!gr.includes(`
`)){rr(gr);const Rn=d.filter(Vn=>Vn.name.toLowerCase().includes(gr.toLowerCase())||Vn.email.toLowerCase().includes(gr.toLowerCase()));jr(Rn.slice(0,5)),lr(!0);return}}lr(!1)},Is=Fe=>{const Lt=We.substring(0,ir).lastIndexOf("@"),qt=We.substring(ir),gr=`${We.substring(0,Lt)}@${Fe.name} ${qt}`;if(Xe(gr),lr(!1),we.current){we.current.focus();const Br=Lt+Fe.name.length+2;we.current.setSelectionRange(Br,Br)}},la=Fe=>{const vt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Lt=[];let qt;for(;(qt=vt.exec(Fe))!==null;){const vr=qt[1].trim(),gr=d.find(Br=>Br.name.toLowerCase()===vr.toLowerCase());gr&&gr.id!==((t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Lt.push(gr.id)}return[...new Set(Lt)]},Xa=Fe=>{const vt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Lt=[];let qt=0,vr;for(;(vr=vt.exec(Fe))!==null;){vr.index>qt&&Lt.push(Fe.substring(qt,vr.index));const gr=vr[1].trim(),Br=d.find(Rn=>Rn.name.toLowerCase()===gr.toLowerCase());Br?Lt.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Br.name]},vr.index)):Lt.push(`@${gr}`),qt=vr.index+vr[0].length}return qt<Fe.length&&Lt.push(Fe.substring(qt)),Lt.length>0?Lt:Fe},ga=async()=>{if(re){if(!We.trim()&&!Ve){n("Please enter a note or upload an image");return}he(!0);try{const Fe=(t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,vt=(t==null?void 0:t.name)||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",Lt={id:`note_${Date.now()}`,userId:Fe,userName:vt,text:We.trim(),imageUrl:Et||void 0,imageName:(Ve==null?void 0:Ve.name)||void 0,imageMimeType:(Ve==null?void 0:Ve.type)||void 0,createdAt:new Date().toISOString()},qt=[...re.notes||[],Lt];await h.mutateAsync({id:re.id,data:{notes:qt}}),Ae({...re,notes:qt});const vr=la(We);for(const Br of vr)try{await vx({userId:Br,type:"mention",title:"You were mentioned in a task",message:`${vt} mentioned you in task "${re.title}"`,relatedId:re.id,relatedType:"task",read:!1})}catch(Rn){console.error("Failed to send notification:",Rn)}Xe(""),wt(""),xt(null),_e.current&&(_e.current.value="");const gr=vr.length>0?`Note added and ${vr.length} user(s) notified`:"Note added successfully";r(gr)}catch(Fe){n(Fe.message||"Failed to add note")}finally{he(!1)}}},un=async()=>{var Fe;if(!(!re||!t||!gt))try{kt(gt);const vt=((Fe=re.notes)==null?void 0:Fe.filter(Lt=>Lt.id!==gt))||[];await h.mutateAsync({id:re.id,data:{notes:vt}}),Ae({...re,notes:vt}),r("Note deleted successfully"),Vt(null)}catch(vt){n(vt.message||"Failed to delete note")}finally{kt(null)}},Co=()=>{Ae(null),Me(!1),Xe(""),wt(""),xt(null),lr(!1),Sr(!1),_e.current&&(_e.current.value="")};let ea=o.filter(Fe=>{if(y==="archived"){if(!Fe.archived)return!1}else if(y==="week"){if(Fe.archived)return!1}else if(Fe.archived)return!1;return m.trim()?Fe.title.toLowerCase().includes(m.toLowerCase()):!0});if(S==="dueDate")ea=[...ea].sort((Fe,vt)=>!Fe.dueDate&&!vt.dueDate?0:Fe.dueDate?vt.dueDate?(Fe.dueDate||"").localeCompare(vt.dueDate||""):-1:1);else if(S==="priority"){const Fe={High:1,Medium:2,Low:3};ea=[...ea].sort((vt,Lt)=>{const qt=Fe[vt.priority]||4,vr=Fe[Lt.priority]||4;return qt-vr})}else S==="category"?ea=[...ea].sort((Fe,vt)=>{const Lt=(Fe.category||"Uncategorized").toLowerCase(),qt=(vt.category||"Uncategorized").toLowerCase();return Lt.localeCompare(qt)}):S==="owner"&&(ea=[...ea].sort((Fe,vt)=>{var vr,gr;const Lt=((vr=d.find(Br=>Br.id===Fe.assigneeId))==null?void 0:vr.name)||"Unassigned",qt=((gr=d.find(Br=>Br.id===vt.assigneeId))==null?void 0:gr.name)||"Unassigned";return Lt.localeCompare(qt)}));return a.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{w("active"),ye([])},className:`text-sm font-bold pb-1 transition-all ${y==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{w("archived"),ye([])},className:`text-sm font-bold pb-1 transition-all ${y==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(Fe=>Fe.archived).length,")"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{E(!0),A("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[a.jsx(VC,{className:"w-4 h-4"})," Bulk Import"]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[a.jsx(Qr,{className:"w-4 h-4"})," New Task"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search tasks...",value:m,onChange:Fe=>{v(Fe.target.value),ye([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:S,onChange:Fe=>j(Fe.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[a.jsx("option",{value:"none",children:"No Sort"}),a.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),a.jsx("option",{value:"priority",children:"Sort by Priority"}),a.jsx("option",{value:"category",children:"Sort by Category"}),a.jsx("option",{value:"owner",children:"Sort by Owner"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:a.jsx(fo,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[a.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded-lg ${b==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(kH,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>N("card"),className:`p-2 rounded-lg ${b==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(bH,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{w(y==="week"?"active":"week"),ye([])},className:`p-2 rounded-lg ${y==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:a.jsx($n,{className:"w-4 h-4"})})]})]}),!x&&ea.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ea.length>0&&ce.length===ea.length,onChange:Be}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),x?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):ea.length===0?a.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[a.jsx(D2,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",y==="week"?"tasks":y," tasks found"]})]}):y==="week"?a.jsx("div",{className:"space-y-8",children:(()=>{const Fe=ea.filter(yr=>!Ye(yr.dueDate)),vt=ea.filter(yr=>Ye(yr.dueDate)),Lt={};vt.forEach(yr=>{const Ft=Ye(yr.dueDate);Lt[Ft]||(Lt[Ft]=[]),Lt[Ft].push(yr)});const qt=Object.keys(Lt).sort(),vr=(()=>{const yr=pe(new Date);return`${yr.getFullYear()}-${String(yr.getMonth()+1).padStart(2,"0")}-${String(yr.getDate()).padStart(2,"0")}`})(),gr=(()=>{const yr=pe(new Date),Ft=new Date(yr);return Ft.setDate(yr.getDate()+7),`${Ft.getFullYear()}-${String(Ft.getMonth()+1).padStart(2,"0")}-${String(Ft.getDate()).padStart(2,"0")}`})(),Br=(yr,Ft)=>{const Dr=yr.toLocaleDateString("en-US",{month:"short",day:"numeric"}),mr=Ft.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Dr} - ${mr}`},Rn=yr=>{if(yr===vr)return"This Week";if(yr===gr)return"Next Week";const[Ft,Dr,mr]=yr.split("-").map(Number),hr=new Date(Ft,Dr-1,mr),{start:nr,end:ca}=Re(hr);return`Week of ${Br(nr,ca)}`},Vn=yr=>{const[Ft,Dr,mr]=yr.split("-").map(Number);return Re(new Date(Ft,Dr-1,mr))};qt.forEach(yr=>{Lt[yr].sort((Ft,Dr)=>(Ft.dueDate||"").localeCompare(Dr.dueDate||""))});const jn=yr=>yr.length===0?null:b==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:yr.map(Ft=>{var mr,hr;const Dr=ce.includes(Ft.id);return a.jsxs("div",{onClick:()=>Ae(Ft),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Dr?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:nr=>nr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Dr,onChange:()=>ye(nr=>Dr?nr.filter(ca=>ca!==Ft.id):[...nr,Ft.id])})}),a.jsx("button",{onClick:nr=>Jt(Ft.id,Ft.status,nr),disabled:z===Ft.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:z===Ft.id?a.jsx(pt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Ft.status==="Done"?a.jsx(tn,{className:"w-6 h-6 text-emerald-500"}):a.jsx(Bu,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Ft.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ft.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Ft.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ft.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:((mr=u.find(nr=>nr.id===Ft.projectId))==null?void 0:mr.title)||"General"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx($n,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Ft.dueDate?ae(Ft.dueDate):"Ongoing"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Ft.priority==="High"?"bg-red-50 text-red-600":Ft.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ft.priority}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[a.jsx(vo,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:((hr=d.find(nr=>nr.id===Ft.assigneeId))==null?void 0:hr.name)||"Unassigned"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:nr=>{nr.stopPropagation(),Ae(Ft)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx($u,{className:"w-4 h-4"})}),a.jsx("button",{onClick:nr=>{nr.stopPropagation(),ne(Ft)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(Ou,{className:"w-4 h-4"})}),a.jsx("button",{onClick:nr=>{nr.stopPropagation(),Q(Ft)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:a.jsx(Ar,{className:"w-4 h-4"})})]})]})]},Ft.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:yr.map(Ft=>{var mr;const Dr=ce.includes(Ft.id);return a.jsxs("div",{onClick:()=>Ae(Ft),className:`bg-white p-6 rounded-3xl border ${Dr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsx("div",{className:"absolute top-4 left-4",onClick:hr=>hr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:`${Dr?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:Dr,onChange:()=>ye(hr=>Dr?hr.filter(nr=>nr!==Ft.id):[...hr,Ft.id])})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:`font-bold text-sm mb-3 ${Ft.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ft.title}),a.jsxs("div",{className:"space-y-2 mb-4",children:[Ft.category&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(za,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ft.category})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:((mr=u.find(hr=>hr.id===Ft.projectId))==null?void 0:mr.title)||"General"})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Ft.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx($n,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ae(Ft.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Ft.priority==="High"?"bg-red-50 text-red-600":Ft.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ft.priority})]})]},Ft.id)})});return a.jsxs(a.Fragment,{children:[qt.map(yr=>{const Ft=Lt[yr];if(!Ft||Ft.length===0)return null;const Dr=Vn(yr),mr=Rn(yr);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:mr}),a.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Br(Dr.start,Dr.end)}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Ft.length,")"]})]}),jn(Ft)]},yr)}),Fe.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Fe.length," tasks)"]})]}),jn(Fe)]})]})})()}):b==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:ea.map(Fe=>{var Lt;const vt=ce.includes(Fe.id);return a.jsxs("div",{onClick:()=>Ae(Fe),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Fe.archived?"bg-slate-50/50":""} ${vt?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:qt=>qt.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:vt,onChange:()=>ye(qt=>vt?qt.filter(vr=>vr!==Fe.id):[...qt,Fe.id])})}),a.jsx("button",{onClick:qt=>Jt(Fe.id,Fe.status,qt),disabled:z===Fe.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:z===Fe.id?a.jsx(pt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Fe.status==="Done"?a.jsx(tn,{className:"w-6 h-6 text-emerald-500"}):a.jsx(Bu,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Fe.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Fe.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Fe.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Fe.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:((Lt=u.find(qt=>qt.id===Fe.projectId))==null?void 0:Lt.title)||"General"}),a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx($n,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Fe.dueDate?ae(Fe.dueDate):"Ongoing"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Fe.priority==="High"?"bg-red-50 text-red-600":Fe.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Fe.priority}),Fe.assigneeId&&(()=>{const qt=d.find(vr=>vr.id===Fe.assigneeId);return qt?a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:qt.name,children:[a.jsx(vo,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:qt.name})]}):null})()]}),a.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[a.jsx("button",{onClick:qt=>{qt.stopPropagation(),Ae(Fe)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:a.jsx($u,{className:"w-4 h-4"})}),a.jsx("button",{onClick:qt=>{qt.stopPropagation(),ne(Fe)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:Fe.archived?a.jsx(L2,{className:"w-4 h-4"}):a.jsx(Ou,{className:"w-4 h-4"})}),a.jsx("button",{onClick:qt=>{qt.stopPropagation(),Q(Fe)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:a.jsx(Ar,{className:"w-4 h-4"})})]})]},Fe.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ea.map(Fe=>{const vt=ce.includes(Fe.id);return a.jsxs("div",{onClick:()=>Ae(Fe),className:`bg-white p-6 rounded-3xl border ${vt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:a.jsx(wo,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[a.jsx("button",{onClick:Lt=>{Lt.stopPropagation(),Ae(Fe)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:a.jsx($u,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Lt=>{Lt.stopPropagation(),ne(Fe)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:a.jsx(Ou,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Lt=>{Lt.stopPropagation(),Q(Fe)},className:"p-1.5 text-slate-400 hover:text-red-500",children:a.jsx(Ar,{className:"w-3.5 h-3.5"})})]}),a.jsx("div",{onClick:Lt=>Lt.stopPropagation(),className:`${vt?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:vt,onChange:()=>ye(Lt=>vt?Lt.filter(qt=>qt!==Fe.id):[...Lt,Fe.id])})})]})]}),a.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${Fe.status==="Done"?"line-through opacity-40":""}`,children:Fe.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:Fe.description}),Fe.category&&a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[a.jsx(za,{className:"w-3.5 h-3.5 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:Fe.category})]})}),Fe.assigneeId&&(()=>{const Lt=d.find(qt=>qt.id===Fe.assigneeId);return Lt?a.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[a.jsx(vo,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:Lt.name})]})}):null})(),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Fe.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx($n,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ae(Fe.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Fe.priority==="High"?"bg-red-50 text-red-600":Fe.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Fe.priority})]})]},Fe.id)})}),_&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(VC,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),a.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(Yt,{className:"w-6 h-6 text-slate-400"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:I==="upload"?a.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(s0,{className:"w-4 h-4"})," Registry Data Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("button",{onClick:()=>{var Fe;return(Fe=le.current)==null?void 0:Fe.click()},className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:a.jsx(gH,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),a.jsxs("button",{onClick:at,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[a.jsx(Nh,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),a.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),a.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",C.length," columns and ",M.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),a.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:a.jsx(pa,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:a.jsx(za,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:a.jsx($n,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:a.jsx(s0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:a.jsx(za,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:a.jsx(vo,{className:"w-4 h-4"})}].map(Fe=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[a.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:Fe.icon}),a.jsx("div",{children:a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[Fe.label," ",Fe.required&&a.jsx("span",{className:"text-red-500",children:"*"})]})})]}),a.jsx(wi,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),a.jsxs("select",{value:K[Fe.key]||"",onChange:vt=>G({...K,[Fe.key]:vt.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"-- Select Source Column --"}),C.map(vt=>a.jsx("option",{value:vt,children:vt},vt))]})]},Fe.key))}),a.jsxs("div",{className:"flex gap-4 pt-6",children:[a.jsx("button",{onClick:()=>{A("upload"),B([]),F([]),G({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),le.current&&(le.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),a.jsx("button",{onClick:ht,disabled:Y||!K.title||!K.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:Y?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),a.jsx("input",{ref:le,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:Bt})]})}),H&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:H.archived?a.jsx(L2,{className:"w-6 h-6"}):a.jsx(Ou,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:H.archived?"Restore Task?":"Archive Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:H.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:H.title}),H.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:H.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ne(null),disabled:T===H.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Je(H.id),disabled:T===H.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T===H.id?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),H.archived?"Restoring...":"Archiving..."]}):H.archived?"Restore Task":"Archive Task"})]})]})}),se&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:se.title}),se.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:se.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Q(null),disabled:X===se.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Qe(se.id),disabled:X===se.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:X===se.id?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),ce.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:ce.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),ue(!0),De("")},disabled:Oe,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[a.jsx(Qf,{className:"w-3.5 h-3.5"}),"Assign to project"]}),a.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),Ue(!0)},disabled:me,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[me?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ar,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>ye([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]})}),Te&&ce.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:a.jsx(Qf,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",ce.length," selected task",ce.length>1?"s":"","."]})]})]}),a.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),a.jsxs("select",{value:be,onChange:Fe=>De(Fe.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"Select project..."}),a.jsx("option",{value:"__none__",children:"None (General)"}),u.filter(Fe=>!Fe.archived).map(Fe=>a.jsx("option",{value:Fe.id,children:Fe.title},Fe.id))]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{ue(!1),De("")},disabled:Oe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:He,disabled:Oe||!be,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Oe?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${ce.length} task${ce.length>1?"s":""}`})]})]})}),Ce&&ce.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",ce.length," Task",ce.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Fe=>ce.includes(Fe.id)).slice(0,5).map(Fe=>{var vt;return a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(wo,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Fe.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:((vt=u.find(Lt=>Lt.id===Fe.projectId))==null?void 0:vt.title)||"General"})]})]},Fe.id)}),ce.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",ce.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ue(!1),disabled:me,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:ke,disabled:me,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:me?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${ce.length} Task${ce.length>1?"s":""}`})]})]})}),re&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Co}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:Co,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(Yt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(wo,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[ee?a.jsx("input",{type:"text",value:J.title,onChange:Fe=>je(vt=>({...vt,title:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:re.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${re.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":re.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":re.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:re.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",re.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:ee?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{Me(!1),je({title:re.title,description:re.description||"",dueDate:re.dueDate||"",priority:re.priority||"Medium",status:re.status||"Todo",assigneeId:re.assigneeId,projectId:re.projectId||""})},disabled:ze,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Tr,disabled:ze||!J.title.trim()||!J.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ze?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>Me(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),ee?a.jsxs("select",{value:J.assigneeId,onChange:Fe=>je(vt=>({...vt,assigneeId:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),d.map(Fe=>a.jsx("option",{value:Fe.id,children:Fe.name},Fe.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:((yc=(Ai=d.find(Fe=>Fe.id===re.assigneeId))==null?void 0:Ai.name)==null?void 0:yc.charAt(0))||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((bc=d.find(Fe=>Fe.id===re.assigneeId))==null?void 0:bc.name)||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),ee?a.jsxs("select",{value:J.projectId,onChange:Fe=>je(vt=>({...vt,projectId:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),u.filter(Fe=>!Fe.archived).map(Fe=>a.jsx("option",{value:Fe.id,children:Fe.title},Fe.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:re.projectId?((Xs=u.find(Fe=>Fe.id===re.projectId))==null?void 0:Xs.title)||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(pa,{className:"w-4 h-4 text-indigo-500"})," Description"]}),ee?a.jsx("textarea",{rows:6,value:J.description,onChange:Fe=>je(vt=>({...vt,description:Fe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-indigo-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:re.description||"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3.5 h-3.5"})," Task Category"]}),ee?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:qe?"__new__":J.category||"",onChange:Fe=>{const vt=Fe.target.value;vt==="__new__"?(mt(!0),je(Lt=>({...Lt,category:""}))):(mt(!1),je(Lt=>({...Lt,category:vt})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),Gr.map(Fe=>a.jsx("option",{value:Fe,children:Fe},Fe)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),qe&&a.jsx("input",{type:"text",value:J.category,onChange:Fe=>je(vt=>({...vt,category:Fe.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:re.category?a.jsxs(a.Fragment,{children:[a.jsx(za,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:re.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),ee?a.jsx("input",{type:"date",value:J.dueDate,onChange:Fe=>je(vt=>({...vt,dueDate:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:re.dueDate?ae(re.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),ee?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(Fe=>a.jsx("button",{onClick:()=>je(vt=>({...vt,priority:Fe})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${J.priority===Fe?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:Fe},Fe))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${re.priority==="High"?"bg-red-50 text-red-600":re.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:re.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),ee?a.jsxs("select",{value:J.status,onChange:Fe=>je(vt=>({...vt,status:Fe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[re.status==="Done"?a.jsx(tn,{className:"w-5 h-5 text-emerald-500"}):re.status==="In Progress"?a.jsx(Ha,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(Bu,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:re.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",re.notes&&re.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:re.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:we,rows:3,value:We,onChange:_n,onBlur:()=>{setTimeout(()=>lr(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),_r&&Nr.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Mh,{className:"w-3 h-3"}),"Mention User"]}),Nr.map(Fe=>a.jsxs("button",{onClick:()=>Is(Fe),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Fe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Fe.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Fe.email})]})]},Fe.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:Et?a.jsx(go,{className:"w-4 h-4"}):a.jsx(nu,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Et?(Ve==null?void 0:Ve.name)||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:_e,type:"file",accept:"image/*",onChange:bs,className:"hidden"})]}),a.jsx("button",{onClick:ga,disabled:Tt||!We.trim()&&!Ve,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Tt?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-4 h-4"}),"Send"]})})]}),Et&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:Et,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{wt(""),xt(null),_e.current&&(_e.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(Yt,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:re.notes&&re.notes.length>0?[...re.notes].reverse().map(Fe=>{var Lt;const vt=(t==null?void 0:t.role)==="Admin"||Fe.userId===(t==null?void 0:t.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((Lt=Fe.userName)==null?void 0:Lt.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Fe.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Fe.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),vt&&a.jsx("button",{onClick:()=>Vt(Fe.id),disabled:Ge===Fe.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ge===Fe.id?a.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Fe.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Xa(Fe.text)}),Fe.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:Fe.imageUrl,alt:Fe.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const qt=window.open();qt&&qt.document.write(`<img src="${Fe.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},Fe.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ui,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>Sr(!Dt),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(kd,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(Ea,{className:`w-4 h-4 text-slate-400 transition-transform ${Dt?"rotate-90":""}`})]}),Dt&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:re.createdAt?new Date(re.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),re.updatedAt&&re.updatedAt!==re.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(re.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),re.notes&&re.notes.map((Fe,vt)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[Fe.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(Fe.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},Fe.id)),(!re.notes||re.notes.length===0)&&(!re.updatedAt||re.updatedAt===re.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>{Q(re),Co()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ar,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:Co,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(tn,{className:"w-5 h-5"})," Close"]})]})]})]}),gt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(Cn,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Vt(null),disabled:Ge===gt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:un,disabled:Ge===gt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ge===gt?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function Jn(e){"@babel/helpers - typeof";return Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(e)}var Qi=Uint8Array,_l=Uint16Array,CA=Int32Array,SN=new Qi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_N=new Qi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xS=new Qi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nU=function(e,t){for(var r=new _l(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new CA(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},aU=nU(SN,2),sU=aU.b,gS=aU.r;sU[28]=258,gS[258]=28;var iU=nU(_N,0),dAe=iU.b,NI=iU.r,vS=new _l(32768);for(var Aa=0;Aa<32768;++Aa){var xf=(Aa&43690)>>1|(Aa&21845)<<1;xf=(xf&52428)>>2|(xf&13107)<<2,xf=(xf&61680)>>4|(xf&3855)<<4,vS[Aa]=((xf&65280)>>8|(xf&255)<<8)>>1}var Hu=function(e,t,r){for(var n=e.length,s=0,i=new _l(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new _l(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new _l(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var u=s<<4|e[s],f=t-e[s],d=o[e[s]-1]++<<f,p=d|(1<<f)-1;d<=p;++d)l[vS[d]>>c]=u}else for(l=new _l(n),s=0;s<n;++s)e[s]&&(l[s]=vS[o[e[s]-1]++]>>15-e[s]);return l},d0=new Qi(288);for(var Aa=0;Aa<144;++Aa)d0[Aa]=8;for(var Aa=144;Aa<256;++Aa)d0[Aa]=9;for(var Aa=256;Aa<280;++Aa)d0[Aa]=7;for(var Aa=280;Aa<288;++Aa)d0[Aa]=8;var M1=new Qi(32);for(var Aa=0;Aa<32;++Aa)M1[Aa]=5;var fAe=Hu(d0,9,0),hAe=Hu(d0,9,1),pAe=Hu(M1,5,0),mAe=Hu(M1,5,1),n4=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Lc=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},a4=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},EA=function(e){return(e+7)/8|0},oU=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Qi(e.subarray(t,r))},xAe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bc=function(e,t,r){var n=new Error(t||xAe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Bc),!r)throw n;return n},gAe=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new Qi(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Qi(s*3));var u=function(Ae){var ee=r.length;if(Ae>ee){var Me=new Qi(Math.max(ee*2,Ae));Me.set(r),r=Me}},f=t.f||0,d=t.p||0,p=t.b||0,h=t.l,g=t.d,x=t.m,m=t.n,v=s*8;do{if(!h){f=Lc(e,d,1);var y=Lc(e,d+1,3);if(d+=3,y)if(y==1)h=hAe,g=mAe,x=9,m=5;else if(y==2){var S=Lc(e,d,31)+257,j=Lc(e,d+10,15)+4,_=S+Lc(e,d+5,31)+1;d+=14;for(var E=new Qi(_),I=new Qi(19),A=0;A<j;++A)I[xS[A]]=Lc(e,d+A*3,7);d+=j*3;for(var C=n4(I),F=(1<<C)-1,M=Hu(I,C,1),A=0;A<_;){var B=M[Lc(e,d,F)];d+=B&15;var w=B>>4;if(w<16)E[A++]=w;else{var K=0,G=0;for(w==16?(G=3+Lc(e,d,3),d+=2,K=E[A-1]):w==17?(G=3+Lc(e,d,7),d+=3):w==18&&(G=11+Lc(e,d,127),d+=7);G--;)E[A++]=K}}var Y=E.subarray(0,S),q=E.subarray(S);x=n4(Y),m=n4(q),h=Hu(Y,x,1),g=Hu(q,m,1)}else Bc(1);else{var w=EA(d)+4,b=e[w-4]|e[w-3]<<8,N=w+b;if(N>s){c&&Bc(0);break}l&&u(p+b),r.set(e.subarray(w,N),p),t.b=p+=b,t.p=d=N*8,t.f=f;continue}if(d>v){c&&Bc(0);break}}l&&u(p+131072);for(var X=(1<<x)-1,V=(1<<m)-1,T=d;;T=d){var K=h[a4(e,d)&X],R=K>>4;if(d+=K&15,d>v){c&&Bc(0);break}if(K||Bc(2),R<256)r[p++]=R;else if(R==256){T=d,h=null;break}else{var z=R-254;if(R>264){var A=R-257,L=SN[A];z=Lc(e,d,(1<<L)-1)+sU[A],d+=L}var H=g[a4(e,d)&V],ne=H>>4;H||Bc(3),d+=H&15;var q=dAe[ne];if(ne>3){var L=_N[ne];q+=a4(e,d)&(1<<L)-1,d+=L}if(d>v){c&&Bc(0);break}l&&u(p+131072);var se=p+z;if(p<q){var Q=i-q,re=Math.min(q,se);for(Q+p<0&&Bc(3);p<re;++p)r[p]=n[Q+p]}for(;p<se;++p)r[p]=r[p-q]}}t.l=h,t.p=T,t.b=p,t.f=f,h&&(f=1,t.m=x,t.d=g,t.n=m)}while(!f);return p!=r.length&&o?oU(r,0,p):r.subarray(0,p)},id=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Og=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},s4=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:cU,l:0};if(s==1){var o=new Qi(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(N,S){return N.f-S.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,f=1,d=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=s-1;)l=r[r[u].f<r[d].f?u++:d++],c=r[u!=f&&r[u].f<r[d].f?u++:d++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,n=1;n<s;++n)i[n].s>p&&(p=i[n].s);var h=new _l(p+1),g=yS(r[f-1],h,0);if(g>t){var n=0,x=0,m=g-t,v=1<<m;for(i.sort(function(S,j){return h[j.s]-h[S.s]||S.f-j.f});n<s;++n){var y=i[n].s;if(h[y]>t)x+=v-(1<<g-h[y]),h[y]=t;else break}for(x>>=m;x>0;){var w=i[n].s;h[w]<t?x-=1<<t-h[w]++-1:++n}for(;n>=0&&x;--n){var b=i[n].s;h[b]==t&&(--h[b],++x)}g=t}return{t:new Qi(h),l:g}},yS=function(e,t,r){return e.s==-1?Math.max(yS(e.l,t,r+1),yS(e.r,t,r+1)):t[e.s]=r},jI=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new _l(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},Pg=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},lU=function(e,t,r){var n=r.length,s=EA(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},kI=function(e,t,r,n,s,i,o,l,c,u,f){id(t,f++,r),++s[256];for(var d=s4(s,15),p=d.t,h=d.l,g=s4(i,15),x=g.t,m=g.l,v=jI(p),y=v.c,w=v.n,b=jI(x),N=b.c,S=b.n,j=new _l(19),_=0;_<y.length;++_)++j[y[_]&31];for(var _=0;_<N.length;++_)++j[N[_]&31];for(var E=s4(j,7),I=E.t,A=E.l,C=19;C>4&&!I[xS[C-1]];--C);var F=u+5<<3,M=Pg(s,d0)+Pg(i,M1)+o,B=Pg(s,p)+Pg(i,x)+o+14+3*C+Pg(j,I)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&F<=M&&F<=B)return lU(t,f,e.subarray(c,c+u));var K,G,Y,q;if(id(t,f,1+(B<M)),f+=2,B<M){K=Hu(p,h,0),G=p,Y=Hu(x,m,0),q=x;var X=Hu(I,A,0);id(t,f,w-257),id(t,f+5,S-1),id(t,f+10,C-4),f+=14;for(var _=0;_<C;++_)id(t,f+3*_,I[xS[_]]);f+=3*C;for(var V=[y,N],T=0;T<2;++T)for(var R=V[T],_=0;_<R.length;++_){var z=R[_]&31;id(t,f,X[z]),f+=I[z],z>15&&(id(t,f,R[_]>>5&127),f+=R[_]>>12)}}else K=fAe,G=d0,Y=pAe,q=M1;for(var _=0;_<l;++_){var L=n[_];if(L>255){var z=L>>18&31;Og(t,f,K[z+257]),f+=G[z+257],z>7&&(id(t,f,L>>23&31),f+=SN[z]);var H=L&31;Og(t,f,Y[H]),f+=q[H],H>3&&(Og(t,f,L>>5&8191),f+=_N[H])}else Og(t,f,K[L]),f+=G[L]}return Og(t,f,K[256]),f+G[256]},vAe=new CA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cU=new Qi(0),yAe=function(e,t,r,n,s,i){var o=i.z||e.length,l=new Qi(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),u=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var d=vAe[t-1],p=d>>13,h=d&8191,g=(1<<r)-1,x=i.p||new _l(32768),m=i.h||new _l(g+1),v=Math.ceil(r/3),y=2*v,w=function(ze){return(e[ze]^e[ze+1]<<v^e[ze+2]<<y)&g},b=new CA(25e3),N=new _l(288),S=new _l(32),j=0,_=0,E=i.i||0,I=0,A=i.w||0,C=0;E+2<o;++E){var F=w(E),M=E&32767,B=m[F];if(x[M]=B,m[F]=M,A<=E){var K=o-E;if((j>7e3||I>24576)&&(K>423||!u)){f=kI(e,c,0,b,N,S,_,I,C,E-C,f),I=j=_=0,C=E;for(var G=0;G<286;++G)N[G]=0;for(var G=0;G<30;++G)S[G]=0}var Y=2,q=0,X=h,V=M-B&32767;if(K>2&&F==w(E-V))for(var T=Math.min(p,K)-1,R=Math.min(32767,E),z=Math.min(258,K);V<=R&&--X&&M!=B;){if(e[E+Y]==e[E+Y-V]){for(var L=0;L<z&&e[E+L]==e[E+L-V];++L);if(L>Y){if(Y=L,q=V,L>T)break;for(var H=Math.min(V,L-2),ne=0,G=0;G<H;++G){var se=E-V+G&32767,Q=x[se],re=se-Q&32767;re>ne&&(ne=re,B=se)}}}M=B,B=x[M],V+=M-B&32767}if(q){b[I++]=268435456|gS[Y]<<18|NI[q];var Ae=gS[Y]&31,ee=NI[q]&31;_+=SN[Ae]+_N[ee],++N[257+Ae],++S[ee],A=E+Y,++j}else b[I++]=e[E],++N[e[E]]}}for(E=Math.max(E,A);E<o;++E)b[I++]=e[E],++N[e[E]];f=kI(e,c,u,b,N,S,_,I,C,E-C,f),u||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=m,i.p=x,i.i=E,i.w=A)}else{for(var E=i.w||0;E<o+u;E+=65535){var Me=E+65535;Me>=o&&(c[f/8|0]=u,Me=o),f=lU(c,f+1,e.subarray(E,Me))}i.i=o}return oU(l,0,n+EA(f)+s)},uU=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},bAe=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Qi(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return yAe(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},dU=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},wAe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=uU();s.p(t.dictionary),dU(e,2,s.d())}},NAe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Bc(6,"invalid zlib data"),(e[1]>>5&1)==1&&Bc(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function bS(e,t){t||(t={});var r=uU();r.p(e);var n=bAe(e,t,t.dictionary?6:2,4);return wAe(n,t),dU(n,n.length-4,r.d()),n}function jAe(e,t){return gAe(e.subarray(NAe(e),-4),{i:2},t,t)}var kAe=typeof TextDecoder<"u"&&new TextDecoder,SAe=0;try{kAe.decode(cU,{stream:!0}),SAe=1}catch{}var zr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i4(){zr.console&&typeof zr.console.log=="function"&&zr.console.log.apply(zr.console,arguments)}var ia={log:i4,warn:function(e){zr.console&&(typeof zr.console.warn=="function"?zr.console.warn.apply(zr.console,arguments):i4.call(null,arguments))},error:function(e){zr.console&&(typeof zr.console.error=="function"?zr.console.error.apply(zr.console,arguments):i4(e))}};function o4(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Q0(n.response,t,r)},n.onerror=function(){ia.error("could not download file")},n.send()}function SI(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Pb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var bv,wS,Q0=zr.saveAs||((typeof window>"u"?"undefined":Jn(window))!=="object"||window!==zr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=zr.URL||zr.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?SI(s.href)?o4(e,t,r):Pb(s,s.target="_blank"):Pb(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Pb(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(SI(e))o4(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Pb(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Jn(i)!=="object"&&(ia.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return o4(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(zr.HTMLElement)||zr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Jn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},l.readAsDataURL(e)}else{var c=zr.URL||zr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function fU(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function l4(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=Bi(r,n,s,i,t[0],7,-680876936),i=Bi(i,r,n,s,t[1],12,-389564586),s=Bi(s,i,r,n,t[2],17,606105819),n=Bi(n,s,i,r,t[3],22,-1044525330),r=Bi(r,n,s,i,t[4],7,-176418897),i=Bi(i,r,n,s,t[5],12,1200080426),s=Bi(s,i,r,n,t[6],17,-1473231341),n=Bi(n,s,i,r,t[7],22,-45705983),r=Bi(r,n,s,i,t[8],7,1770035416),i=Bi(i,r,n,s,t[9],12,-1958414417),s=Bi(s,i,r,n,t[10],17,-42063),n=Bi(n,s,i,r,t[11],22,-1990404162),r=Bi(r,n,s,i,t[12],7,1804603682),i=Bi(i,r,n,s,t[13],12,-40341101),s=Bi(s,i,r,n,t[14],17,-1502002290),r=$i(r,n=Bi(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=$i(i,r,n,s,t[6],9,-1069501632),s=$i(s,i,r,n,t[11],14,643717713),n=$i(n,s,i,r,t[0],20,-373897302),r=$i(r,n,s,i,t[5],5,-701558691),i=$i(i,r,n,s,t[10],9,38016083),s=$i(s,i,r,n,t[15],14,-660478335),n=$i(n,s,i,r,t[4],20,-405537848),r=$i(r,n,s,i,t[9],5,568446438),i=$i(i,r,n,s,t[14],9,-1019803690),s=$i(s,i,r,n,t[3],14,-187363961),n=$i(n,s,i,r,t[8],20,1163531501),r=$i(r,n,s,i,t[13],5,-1444681467),i=$i(i,r,n,s,t[2],9,-51403784),s=$i(s,i,r,n,t[7],14,1735328473),r=Ui(r,n=$i(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Ui(i,r,n,s,t[8],11,-2022574463),s=Ui(s,i,r,n,t[11],16,1839030562),n=Ui(n,s,i,r,t[14],23,-35309556),r=Ui(r,n,s,i,t[1],4,-1530992060),i=Ui(i,r,n,s,t[4],11,1272893353),s=Ui(s,i,r,n,t[7],16,-155497632),n=Ui(n,s,i,r,t[10],23,-1094730640),r=Ui(r,n,s,i,t[13],4,681279174),i=Ui(i,r,n,s,t[0],11,-358537222),s=Ui(s,i,r,n,t[3],16,-722521979),n=Ui(n,s,i,r,t[6],23,76029189),r=Ui(r,n,s,i,t[9],4,-640364487),i=Ui(i,r,n,s,t[12],11,-421815835),s=Ui(s,i,r,n,t[15],16,530742520),r=zi(r,n=Ui(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=zi(i,r,n,s,t[7],10,1126891415),s=zi(s,i,r,n,t[14],15,-1416354905),n=zi(n,s,i,r,t[5],21,-57434055),r=zi(r,n,s,i,t[12],6,1700485571),i=zi(i,r,n,s,t[3],10,-1894986606),s=zi(s,i,r,n,t[10],15,-1051523),n=zi(n,s,i,r,t[1],21,-2054922799),r=zi(r,n,s,i,t[8],6,1873313359),i=zi(i,r,n,s,t[15],10,-30611744),s=zi(s,i,r,n,t[6],15,-1560198380),n=zi(n,s,i,r,t[13],21,1309151649),r=zi(r,n,s,i,t[4],6,-145523070),i=zi(i,r,n,s,t[11],10,-1120210379),s=zi(s,i,r,n,t[2],15,718787259),n=zi(n,s,i,r,t[9],21,-343485551),e[0]=qf(r,e[0]),e[1]=qf(n,e[1]),e[2]=qf(s,e[2]),e[3]=qf(i,e[3])}function AN(e,t,r,n,s,i){return t=qf(qf(t,e),qf(n,i)),qf(t<<s|t>>>32-s,r)}function Bi(e,t,r,n,s,i,o){return AN(t&r|~t&n,e,t,s,i,o)}function $i(e,t,r,n,s,i,o){return AN(t&n|r&~n,e,t,s,i,o)}function Ui(e,t,r,n,s,i,o){return AN(t^r^n,e,t,s,i,o)}function zi(e,t,r,n,s,i,o){return AN(r^(t|~n),e,t,s,i,o)}function hU(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)l4(n,_Ae(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(l4(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,l4(n,s),n}function _Ae(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}bv=zr.atob.bind(zr),wS=zr.btoa.bind(zr);var _I="0123456789abcdef".split("");function AAe(e){for(var t="",r=0;r<4;r++)t+=_I[e>>8*r+4&15]+_I[e>>8*r&15];return t}function CAe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function NS(e){return hU(e).map(CAe).join("")}var EAe=function(e){for(var t=0;t<e.length;t++)e[t]=AAe(e[t]);return e.join("")}(hU("hello"))!="5d41402abc4b2a76b9719d911017c592";function qf(e,t){if(EAe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function jS(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var f=l[c];u=(u+f+o.charCodeAt(c))%256,l[c]=l[u],l[u]=f}r=e,n=l}else l=n;var d=t.length,p=0,h=0,g="";for(c=0;c<d;c++)h=(h+(f=l[p=(p+1)%256]))%256,l[p]=l[h],l[h]=f,o=l[(l[p]+l[h])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var AI={print:4,modify:8,copy:16,"annot-forms":32};function Gp(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(AI.perm!==void 0)throw new Error("Invalid permission: "+l);s+=AI[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=NS(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=jS(this.encryptionKey,this.padding)}function Kp(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function CI(e){if(Jn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){zr.console&&ia.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function a5(e){if(!(this instanceof a5))return new a5(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function pU(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function eh(e,t,r,n,s){if(!(this instanceof eh))return new eh(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,pU.call(this,n,s)}function fm(e,t,r,n,s){if(!(this instanceof fm))return new fm(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,pU.call(this,n,s)}function Ur(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",f=null;Jn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=CI;var g="1.3",x=h.__private__.getPdfVersion=function(){return g};h.__private__.setPdfVersion=function(U){g=U};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return m};var v=h.__private__.getPageFormat=function(U){return m[U]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},w=y.COMPAT;function b(){this.saveGraphicsState(),J(new Dt(Xe,0,0,-Xe,0,kc()*Xe).toString()+" cm"),this.setFontSize(this.getFontSize()/Xe),u="n",w=y.ADVANCED}function N(){this.restoreGraphicsState(),u="S",w=y.COMPAT}var S=h.__private__.combineFontStyleAndFontWeight=function(U,fe){if(U=="bold"&&fe=="normal"||U=="bold"&&fe==400||U=="normal"&&fe=="italic"||U=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(U=fe==400||fe==="normal"?U==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||U!=="normal"?(fe==700?"bold":fe)+""+U:"bold"),U};h.advancedAPI=function(U){var fe=w===y.COMPAT;return fe&&b.call(this),typeof U!="function"||(U(this),fe&&N.call(this)),this},h.compatAPI=function(U){var fe=w===y.ADVANCED;return fe&&N.call(this),typeof U!="function"||(U(this),fe&&b.call(this)),this},h.isAdvancedAPI=function(){return w===y.ADVANCED};var j,_=function(U){if(w!==y.ADVANCED)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=h.roundToPrecision=h.__private__.roundToPrecision=function(U,fe){var $e=t||fe;if(isNaN(U)||isNaN($e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed($e).replace(/0+$/,"")};j=h.hpf=h.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return E(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return E(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return E(U,16)};var I=h.f2=h.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return E(U,2)},A=h.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return E(U,3)},C=h.scale=h.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return w===y.COMPAT?U*Xe:w===y.ADVANCED?U:void 0},F=function(U){return w===y.COMPAT?kc()-U:w===y.ADVANCED?U:void 0},M=function(U){return C(F(U))};h.__private__.setPrecision=h.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(t=parseInt(U,10))};var B,K="00000000000000000000000000000000",G=h.__private__.getFileId=function(){return K},Y=h.__private__.setFileId=function(U){return K=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Fr=new Gp(f.userPermissions,f.userPassword,f.ownerPassword,K)),K};h.setFileId=function(U){return Y(U),this},h.getFileId=function(){return G()};var q=h.__private__.convertDateToPDFDate=function(U){var fe=U.getTimezoneOffset(),$e=fe<0?"+":"-",Ze=Math.floor(Math.abs(fe/60)),ot=Math.abs(fe%60),bt=[$e,z(Ze),"'",z(ot),"'"].join("");return["D:",U.getFullYear(),z(U.getMonth()+1),z(U.getDate()),z(U.getHours()),z(U.getMinutes()),z(U.getSeconds()),bt].join("")},X=h.__private__.convertPDFDateToDate=function(U){var fe=parseInt(U.substr(2,4),10),$e=parseInt(U.substr(6,2),10)-1,Ze=parseInt(U.substr(8,2),10),ot=parseInt(U.substr(10,2),10),bt=parseInt(U.substr(12,2),10),Rt=parseInt(U.substr(14,2),10);return new Date(fe,$e,Ze,ot,bt,Rt,0)},V=h.__private__.setCreationDate=function(U){var fe;if(U===void 0&&(U=new Date),U instanceof Date)fe=q(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=U}return B=fe},T=h.__private__.getCreationDate=function(U){var fe=B;return U==="jsDate"&&(fe=X(B)),fe};h.setCreationDate=function(U){return V(U),this},h.getCreationDate=function(U){return T(U)};var R,z=h.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},L=h.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},H=0,ne=[],se=[],Q=0,re=[],Ae=[],ee=!1,Me=se,ze=function(){H=0,Q=0,se=[],ne=[],re=[],we=mt(),Se=mt()};h.__private__.setCustomOutputDestination=function(U){ee=!0,Me=U};var oe=function(U){ee||(Me=U)};h.__private__.resetCustomOutputDestination=function(){ee=!1,Me=se};var J=h.__private__.out=function(U){return U=U.toString(),Q+=U.length+1,Me.push(U),Me},je=h.__private__.write=function(U){return J(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},ce=h.__private__.getArrayBuffer=function(U){for(var fe=U.length,$e=new ArrayBuffer(fe),Ze=new Uint8Array($e);fe--;)Ze[fe]=U.charCodeAt(fe);return $e},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ye};var me=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(U){return me=w===y.ADVANCED?U/Xe:U,this};var ge,Ce=h.__private__.getFontSize=h.getFontSize=function(){return w===y.COMPAT?me:me*Xe},Ue=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(U){return Ue=U,this},h.__private__.getR2L=h.getR2L=function(){return Ue};var Te,ue=h.__private__.setZoomMode=function(U){var fe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))ge=U;else if(isNaN(U)){if(fe.indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');ge=U}else ge=parseInt(U,10)};h.__private__.getZoomMode=function(){return ge};var Oe,st=h.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Te=U};h.__private__.getPageMode=function(){return Te};var be=h.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');Oe=U};h.__private__.getLayoutMode=function(){return Oe},h.__private__.setDisplayMode=h.setDisplayMode=function(U,fe,$e){return ue(U),be(fe),st($e),this};var De={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(U){if(Object.keys(De).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return De[U]},h.__private__.getDocumentProperties=function(){return De},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(U){for(var fe in De)De.hasOwnProperty(fe)&&U[fe]&&(De[fe]=U[fe]);return this},h.__private__.setDocumentProperty=function(U,fe){if(Object.keys(De).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return De[U]=fe};var We,Xe,Et,wt,Ve,xt={},Tt={},he=[],Ge={},kt={},gt={},Vt={},_r=null,lr=0,Gt=[],rr=new CI(h),ir=e.hotfixes||[],pr={},Nr={},jr=[],Dt=function U(fe,$e,Ze,ot,bt,Rt){if(!(this instanceof U))return new U(fe,$e,Ze,ot,bt,Rt);isNaN(fe)&&(fe=1),isNaN($e)&&($e=0),isNaN(Ze)&&(Ze=0),isNaN(ot)&&(ot=1),isNaN(bt)&&(bt=0),isNaN(Rt)&&(Rt=0),this._matrix=[fe,$e,Ze,ot,bt,Rt]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(U)},Dt.prototype.multiply=function(U){var fe=U.sx*this.sx+U.shy*this.shx,$e=U.sx*this.shy+U.shy*this.sy,Ze=U.shx*this.sx+U.sy*this.shx,ot=U.shx*this.shy+U.sy*this.sy,bt=U.tx*this.sx+U.ty*this.shx+this.tx,Rt=U.tx*this.shy+U.ty*this.sy+this.ty;return new Dt(fe,$e,Ze,ot,bt,Rt)},Dt.prototype.decompose=function(){var U=this.sx,fe=this.shy,$e=this.shx,Ze=this.sy,ot=this.tx,bt=this.ty,Rt=Math.sqrt(U*U+fe*fe),ur=(U/=Rt)*$e+(fe/=Rt)*Ze;$e-=U*ur,Ze-=fe*ur;var Cr=Math.sqrt($e*$e+Ze*Ze);return ur/=Cr,U*(Ze/=Cr)<fe*($e/=Cr)&&(U=-U,fe=-fe,ur=-ur,Rt=-Rt),{scale:new Dt(Rt,0,0,Cr,0,0),translate:new Dt(1,0,0,1,ot,bt),rotate:new Dt(U,fe,-fe,U,0,0),skew:new Dt(1,0,ur,1,0,0)}},Dt.prototype.toString=function(U){return this.join(" ")},Dt.prototype.inversed=function(){var U=this.sx,fe=this.shy,$e=this.shx,Ze=this.sy,ot=this.tx,bt=this.ty,Rt=1/(U*Ze-fe*$e),ur=Ze*Rt,Cr=-fe*Rt,Vr=-$e*Rt,$r=U*Rt;return new Dt(ur,Cr,Vr,$r,-ur*ot-Vr*bt,-Cr*ot-$r*bt)},Dt.prototype.applyToPoint=function(U){var fe=U.x*this.sx+U.y*this.shx+this.tx,$e=U.x*this.shy+U.y*this.sy+this.ty;return new sl(fe,$e)},Dt.prototype.applyToRectangle=function(U){var fe=this.applyToPoint(U),$e=this.applyToPoint(new sl(U.x+U.w,U.y+U.h));return new jc(fe.x,fe.y,$e.x-fe.x,$e.y-fe.y)},Dt.prototype.clone=function(){var U=this.sx,fe=this.shy,$e=this.shx,Ze=this.sy,ot=this.tx,bt=this.ty;return new Dt(U,fe,$e,Ze,ot,bt)},h.Matrix=Dt;var Sr=h.matrixMult=function(U,fe){return fe.multiply(U)},Gr=new Dt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Gr;var cn=function(U,fe){if(!kt[U]){var $e=(fe instanceof eh?"Sh":"P")+(Object.keys(Ge).length+1).toString(10);fe.id=$e,kt[U]=$e,Ge[$e]=fe,rr.publish("addPattern",fe)}};h.ShadingPattern=eh,h.TilingPattern=fm,h.addShadingPattern=function(U,fe){return _("addShadingPattern()"),cn(U,fe),this},h.beginTilingPattern=function(U){_("beginTilingPattern()"),_0(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},h.endTilingPattern=function(U,fe){_("endTilingPattern()"),fe.stream=Ae[R].join(`
`),cn(U,fe),rr.publish("endTilingPattern",fe),jr.pop().restore()};var qe=h.__private__.newObject=function(){var U=mt();return le(U,!0),U},mt=h.__private__.newObjectDeferred=function(){return H++,ne[H]=function(){return Q},H},le=function(U,fe){return fe=typeof fe=="boolean"&&fe,ne[U]=Q,fe&&J(U+" 0 obj"),U},_e=h.__private__.newAdditionalObject=function(){var U={objId:mt(),content:""};return re.push(U),U},we=mt(),Se=mt(),ae=h.__private__.decodeColorString=function(U){var fe=U.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length===5&&(fe[4]==="k"||fe[4]==="K")&&(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var $e=parseFloat(fe[0]);fe=[$e,$e,$e,"r"]}for(var Ze="#",ot=0;ot<3;ot++)Ze+=("0"+Math.floor(255*parseFloat(fe[ot])).toString(16)).slice(-2);return Ze},pe=h.__private__.encodeColorString=function(U){var fe;typeof U=="string"&&(U={ch1:U});var $e=U.ch1,Ze=U.ch2,ot=U.ch3,bt=U.ch4,Rt=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof $e=="string"&&$e.charAt(0)!=="#"){var ur=new fU($e);if(ur.ok)$e=ur.toHex();else if(!/^\d*\.?\d*$/.test($e))throw new Error('Invalid color "'+$e+'" passed to jsPDF.encodeColorString.')}if(typeof $e=="string"&&/^#[0-9A-Fa-f]{3}$/.test($e)&&($e="#"+$e[1]+$e[1]+$e[2]+$e[2]+$e[3]+$e[3]),typeof $e=="string"&&/^#[0-9A-Fa-f]{6}$/.test($e)){var Cr=parseInt($e.substr(1),16);$e=Cr>>16&255,Ze=Cr>>8&255,ot=255&Cr}if(Ze===void 0||bt===void 0&&$e===Ze&&Ze===ot)if(typeof $e=="string")fe=$e+" "+Rt[0];else switch(U.precision){case 2:fe=I($e/255)+" "+Rt[0];break;case 3:default:fe=A($e/255)+" "+Rt[0]}else if(bt===void 0||Jn(bt)==="object"){if(bt&&!isNaN(bt.a)&&bt.a===0)return fe=["1.","1.","1.",Rt[1]].join(" ");if(typeof $e=="string")fe=[$e,Ze,ot,Rt[1]].join(" ");else switch(U.precision){case 2:fe=[I($e/255),I(Ze/255),I(ot/255),Rt[1]].join(" ");break;default:case 3:fe=[A($e/255),A(Ze/255),A(ot/255),Rt[1]].join(" ")}}else if(typeof $e=="string")fe=[$e,Ze,ot,bt,Rt[2]].join(" ");else switch(U.precision){case 2:fe=[I($e),I(Ze),I(ot),I(bt),Rt[2]].join(" ");break;case 3:default:fe=[A($e),A(Ze),A(ot),A(bt),Rt[2]].join(" ")}return fe},Re=h.__private__.getFilters=function(){return o},Ye=h.__private__.putStream=function(U){var fe=(U=U||{}).data||"",$e=U.filters||Re(),Ze=U.alreadyAppliedFilters||[],ot=U.addLength1||!1,bt=fe.length,Rt=U.objectId,ur=function(Ds){return Ds};if(f!==null&&Rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ur=Fr.encryptor(Rt,0));var Cr={};$e===!0&&($e=["FlateEncode"]);var Vr=U.additionalKeyValues||[],$r=(Cr=Ur.API.processDataByFilters!==void 0?Ur.API.processDataByFilters(fe,$e):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(Ze)?Ze.join(" "):Ze.toString());if(Cr.data.length!==0&&(Vr.push({key:"Length",value:Cr.data.length}),ot===!0&&Vr.push({key:"Length1",value:bt})),$r.length!=0)if($r.split("/").length-1==1)Vr.push({key:"Filter",value:$r});else{Vr.push({key:"Filter",value:"["+$r+"]"});for(var fn=0;fn<Vr.length;fn+=1)if(Vr[fn].key==="DecodeParms"){for(var va=[],ya=0;ya<Cr.reverseChain.split("/").length-1;ya+=1)va.push("null");va.push(Vr[fn].value),Vr[fn].value="["+va.join(" ")+"]"}}J("<<");for(var Qa=0;Qa<Vr.length;Qa++)J("/"+Vr[Qa].key+" "+Vr[Qa].value);J(">>"),Cr.data.length!==0&&(J("stream"),J(ur(Cr.data)),J("endstream"))},Je=h.__private__.putPage=function(U){var fe=U.number,$e=U.data,Ze=U.objId,ot=U.contentsObjId;le(Ze,!0),J("<</Type /Page"),J("/Parent "+U.rootDictionaryObjId+" 0 R"),J("/Resources "+U.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(j(U.mediaBox.bottomLeftX))+" "+parseFloat(j(U.mediaBox.bottomLeftY))+" "+j(U.mediaBox.topRightX)+" "+j(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&J("/CropBox ["+j(U.cropBox.bottomLeftX)+" "+j(U.cropBox.bottomLeftY)+" "+j(U.cropBox.topRightX)+" "+j(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&J("/BleedBox ["+j(U.bleedBox.bottomLeftX)+" "+j(U.bleedBox.bottomLeftY)+" "+j(U.bleedBox.topRightX)+" "+j(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&J("/TrimBox ["+j(U.trimBox.bottomLeftX)+" "+j(U.trimBox.bottomLeftY)+" "+j(U.trimBox.topRightX)+" "+j(U.trimBox.topRightY)+"]"),U.artBox!==null&&J("/ArtBox ["+j(U.artBox.bottomLeftX)+" "+j(U.artBox.bottomLeftY)+" "+j(U.artBox.topRightX)+" "+j(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&J("/UserUnit "+U.userUnit),rr.publish("putPage",{objId:Ze,pageContext:Gt[fe],pageNumber:fe,page:$e}),J("/Contents "+ot+" 0 R"),J(">>"),J("endobj");var bt=$e.join(`
`);return w===y.ADVANCED&&(bt+=`
Q`),le(ot,!0),Ye({data:bt,filters:Re(),objectId:ot}),J("endobj"),Ze},Qe=h.__private__.putPages=function(){var U,fe,$e=[];for(U=1;U<=lr;U++)Gt[U].objId=mt(),Gt[U].contentsObjId=mt();for(U=1;U<=lr;U++)$e.push(Je({number:U,data:Ae[U],objId:Gt[U].objId,contentsObjId:Gt[U].contentsObjId,mediaBox:Gt[U].mediaBox,cropBox:Gt[U].cropBox,bleedBox:Gt[U].bleedBox,trimBox:Gt[U].trimBox,artBox:Gt[U].artBox,userUnit:Gt[U].userUnit,rootDictionaryObjId:we,resourceDictionaryObjId:Se}));le(we,!0),J("<</Type /Pages");var Ze="/Kids [";for(fe=0;fe<lr;fe++)Ze+=$e[fe]+" 0 R ";J(Ze+"]"),J("/Count "+lr),J(">>"),J("endobj"),rr.publish("postPutPages")},Be=function(U){rr.publish("putFont",{font:U,out:J,newObject:qe,putStream:Ye}),U.isAlreadyPutted!==!0&&(U.objectNumber=qe(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Kp(U.postScriptName)),J("/Subtype /Type1"),typeof U.encoding=="string"&&J("/Encoding /"+U.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},ke=function(){for(var U in xt)xt.hasOwnProperty(U)&&(d===!1||d===!0&&p.hasOwnProperty(U))&&Be(xt[U])},He=function(U){U.objectNumber=qe();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[j(U.x),j(U.y),j(U.x+U.width),j(U.y+U.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var $e=U.pages[1].join(`
`);Ye({data:$e,additionalKeyValues:fe,objectId:U.objectNumber}),J("endobj")},at=function(){for(var U in pr)pr.hasOwnProperty(U)&&He(pr[U])},ht=function(U,fe){var $e,Ze=[],ot=1/(fe-1);for($e=0;$e<1;$e+=ot)Ze.push($e);if(Ze.push(1),U[0].offset!=0){var bt={offset:0,color:U[0].color};U.unshift(bt)}if(U[U.length-1].offset!=1){var Rt={offset:1,color:U[U.length-1].color};U.push(Rt)}for(var ur="",Cr=0,Vr=0;Vr<Ze.length;Vr++){for($e=Ze[Vr];$e>U[Cr+1].offset;)Cr++;var $r=U[Cr].offset,fn=($e-$r)/(U[Cr+1].offset-$r),va=U[Cr].color,ya=U[Cr+1].color;ur+=L(Math.round((1-fn)*va[0]+fn*ya[0]).toString(16))+L(Math.round((1-fn)*va[1]+fn*ya[1]).toString(16))+L(Math.round((1-fn)*va[2]+fn*ya[2]).toString(16))}return ur.trim()},jt=function(U,fe){fe||(fe=21);var $e=qe(),Ze=ht(U.colors,fe),ot=[];ot.push({key:"FunctionType",value:"0"}),ot.push({key:"Domain",value:"[0.0 1.0]"}),ot.push({key:"Size",value:"["+fe+"]"}),ot.push({key:"BitsPerSample",value:"8"}),ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ye({data:Ze,additionalKeyValues:ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:$e}),J("endobj"),U.objectNumber=qe(),J("<< /ShadingType "+U.type),J("/ColorSpace /DeviceRGB");var bt="/Coords ["+j(parseFloat(U.coords[0]))+" "+j(parseFloat(U.coords[1]))+" ";U.type===2?bt+=j(parseFloat(U.coords[2]))+" "+j(parseFloat(U.coords[3])):bt+=j(parseFloat(U.coords[2]))+" "+j(parseFloat(U.coords[3]))+" "+j(parseFloat(U.coords[4]))+" "+j(parseFloat(U.coords[5])),J(bt+="]"),U.matrix&&J("/Matrix ["+U.matrix.toString()+"]"),J("/Function "+$e+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Bt=function(U,fe){var $e=mt(),Ze=qe();fe.push({resourcesOid:$e,objectOid:Ze}),U.objectNumber=Ze;var ot=[];ot.push({key:"Type",value:"/Pattern"}),ot.push({key:"PatternType",value:"1"}),ot.push({key:"PaintType",value:"1"}),ot.push({key:"TilingType",value:"1"}),ot.push({key:"BBox",value:"["+U.boundingBox.map(j).join(" ")+"]"}),ot.push({key:"XStep",value:j(U.xStep)}),ot.push({key:"YStep",value:j(U.yStep)}),ot.push({key:"Resources",value:$e+" 0 R"}),U.matrix&&ot.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),Ye({data:U.stream,additionalKeyValues:ot,objectId:U.objectNumber}),J("endobj")},Jt=function(U){var fe;for(fe in Ge)Ge.hasOwnProperty(fe)&&(Ge[fe]instanceof eh?jt(Ge[fe]):Ge[fe]instanceof fm&&Bt(Ge[fe],U))},Tr=function(U){for(var fe in U.objectNumber=qe(),J("<<"),U)switch(fe){case"opacity":J("/ca "+I(U[fe]));break;case"stroke-opacity":J("/CA "+I(U[fe]))}J(">>"),J("endobj")},En=function(){var U;for(U in gt)gt.hasOwnProperty(U)&&Tr(gt[U])},bs=function(){for(var U in J("/XObject <<"),pr)pr.hasOwnProperty(U)&&pr[U].objectNumber>=0&&J("/"+U+" "+pr[U].objectNumber+" 0 R");rr.publish("putXobjectDict"),J(">>")},_n=function(){Fr.oid=qe(),J("<<"),J("/Filter /Standard"),J("/V "+Fr.v),J("/R "+Fr.r),J("/U <"+Fr.toHexString(Fr.U)+">"),J("/O <"+Fr.toHexString(Fr.O)+">"),J("/P "+Fr.P),J(">>"),J("endobj")},Is=function(){for(var U in J("/Font <<"),xt)xt.hasOwnProperty(U)&&(d===!1||d===!0&&p.hasOwnProperty(U))&&J("/"+U+" "+xt[U].objectNumber+" 0 R");J(">>")},la=function(){if(Object.keys(Ge).length>0){for(var U in J("/Shading <<"),Ge)Ge.hasOwnProperty(U)&&Ge[U]instanceof eh&&Ge[U].objectNumber>=0&&J("/"+U+" "+Ge[U].objectNumber+" 0 R");rr.publish("putShadingPatternDict"),J(">>")}},Xa=function(U){if(Object.keys(Ge).length>0){for(var fe in J("/Pattern <<"),Ge)Ge.hasOwnProperty(fe)&&Ge[fe]instanceof h.TilingPattern&&Ge[fe].objectNumber>=0&&Ge[fe].objectNumber<U&&J("/"+fe+" "+Ge[fe].objectNumber+" 0 R");rr.publish("putTilingPatternDict"),J(">>")}},ga=function(){if(Object.keys(gt).length>0){var U;for(U in J("/ExtGState <<"),gt)gt.hasOwnProperty(U)&&gt[U].objectNumber>=0&&J("/"+U+" "+gt[U].objectNumber+" 0 R");rr.publish("putGStateDict"),J(">>")}},un=function(U){le(U.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Is(),la(),Xa(U.objectOid),ga(),bs(),J(">>"),J("endobj")},Co=function(){var U=[];ke(),En(),at(),Jt(U),rr.publish("putResources"),U.forEach(un),un({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),rr.publish("postPutResources")},ea=function(){rr.publish("putAdditionalObjects");for(var U=0;U<re.length;U++){var fe=re[U];le(fe.objId,!0),J(fe.content),J("endobj")}rr.publish("postPutAdditionalObjects")},Ai=function(U){Tt[U.fontName]=Tt[U.fontName]||{},Tt[U.fontName][U.fontStyle]=U.id},yc=function(U,fe,$e,Ze,ot){var bt={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:U,fontName:fe,fontStyle:$e,encoding:Ze,isStandardFont:ot||!1,metadata:{}};return rr.publish("addFont",{font:bt,instance:this}),xt[bt.id]=bt,Ai(bt),bt.id},bc=function(U){for(var fe=0,$e=ye.length;fe<$e;fe++){var Ze=yc.call(this,U[fe][0],U[fe][1],U[fe][2],ye[fe][3],!0);d===!1&&(p[Ze]=!0);var ot=U[fe][0].split("-");Ai({id:Ze,fontName:ot[0],fontStyle:ot[1]||""})}rr.publish("addFonts",{fonts:xt,dictionary:Tt})},Xs=function(U){return U.foo=function(){try{return U.apply(this,arguments)}catch(Ze){var fe=Ze.stack||"";~fe.indexOf(" at ")&&(fe=fe.split(" at ")[1]);var $e="Error in function "+fe.split(`
`)[0].split("<")[0]+": "+Ze.message;if(!zr.console)throw new Error($e);zr.console.error($e,Ze),zr.alert&&alert($e)}},U.foo.bar=U,U.foo},Fe=function(U,fe){var $e,Ze,ot,bt,Rt,ur,Cr,Vr,$r;if(ot=(fe=fe||{}).sourceEncoding||"Unicode",Rt=fe.outputEncoding,(fe.autoencode||Rt)&&xt[We].metadata&&xt[We].metadata[ot]&&xt[We].metadata[ot].encoding&&(bt=xt[We].metadata[ot].encoding,!Rt&&xt[We].encoding&&(Rt=xt[We].encoding),!Rt&&bt.codePages&&(Rt=bt.codePages[0]),typeof Rt=="string"&&(Rt=bt[Rt]),Rt)){for(Cr=!1,ur=[],$e=0,Ze=U.length;$e<Ze;$e++)(Vr=Rt[U.charCodeAt($e)])?ur.push(String.fromCharCode(Vr)):ur.push(U[$e]),ur[$e].charCodeAt(0)>>8&&(Cr=!0);U=ur.join("")}for($e=U.length;Cr===void 0&&$e!==0;)U.charCodeAt($e-1)>>8&&(Cr=!0),$e--;if(!Cr)return U;for(ur=fe.noBOM?[]:[254,255],$e=0,Ze=U.length;$e<Ze;$e++){if(($r=(Vr=U.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+U+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ur.push($r),ur.push(Vr-($r<<8))}return String.fromCharCode.apply(void 0,ur)},vt=h.__private__.pdfEscape=h.pdfEscape=function(U,fe){return Fe(U,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lt=h.__private__.beginPage=function(U){Ae[++lr]=[],Gt[lr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},gr(lr),oe(Ae[R])},qt=function(U,fe){var $e,Ze,ot;switch(r=fe||r,typeof U=="string"&&($e=v(U.toLowerCase()),Array.isArray($e)&&(Ze=$e[0],ot=$e[1])),Array.isArray(U)&&(Ze=U[0]*Xe,ot=U[1]*Xe),isNaN(Ze)&&(Ze=s[0],ot=s[1]),(Ze>14400||ot>14400)&&(ia.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ze=Math.min(14400,Ze),ot=Math.min(14400,ot)),s=[Ze,ot],r.substr(0,1)){case"l":ot>Ze&&(s=[ot,Ze]);break;case"p":Ze>ot&&(s=[ot,Ze])}Lt(s),Ju(Ja),J(Oo),du!==0&&J(du+" J"),S0!==0&&J(S0+" j"),rr.publish("addPage",{pageNumber:lr})},vr=function(U){U>0&&U<=lr&&(Ae.splice(U,1),Gt.splice(U,1),lr--,R>lr&&(R=lr),this.setPage(R))},gr=function(U){U>0&&U<=lr&&(R=U)},Br=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Ae.length-1},Rn=function(U,fe,$e){var Ze,ot=void 0;return $e=$e||{},U=U!==void 0?U:xt[We].fontName,fe=fe!==void 0?fe:xt[We].fontStyle,Ze=U.toLowerCase(),Tt[Ze]!==void 0&&Tt[Ze][fe]!==void 0?ot=Tt[Ze][fe]:Tt[U]!==void 0&&Tt[U][fe]!==void 0?ot=Tt[U][fe]:$e.disableWarning===!1&&ia.warn("Unable to look up font label for font '"+U+"', '"+fe+"'. Refer to getFontList() for available fonts."),ot||$e.noFallback||(ot=Tt.times[fe])==null&&(ot=Tt.times.normal),ot},Vn=h.__private__.putInfo=function(){var U=qe(),fe=function(Ze){return Ze};for(var $e in f!==null&&(fe=Fr.encryptor(U,0)),J("<<"),J("/Producer ("+vt(fe("jsPDF "+Ur.version))+")"),De)De.hasOwnProperty($e)&&De[$e]&&J("/"+$e.substr(0,1).toUpperCase()+$e.substr(1)+" ("+vt(fe(De[$e]))+")");J("/CreationDate ("+vt(fe(B))+")"),J(">>"),J("endobj")},jn=h.__private__.putCatalog=function(U){var fe=(U=U||{}).rootDictionaryObjId||we;switch(qe(),J("<<"),J("/Type /Catalog"),J("/Pages "+fe+" 0 R"),ge||(ge="fullwidth"),ge){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var $e=""+ge;$e.substr($e.length-1)==="%"&&(ge=parseInt(ge)/100),typeof ge=="number"&&J("/OpenAction [3 0 R /XYZ null null "+I(ge)+"]")}switch(Oe||(Oe="continuous"),Oe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Te&&J("/PageMode /"+Te),rr.publish("putCatalog"),J(">>"),J("endobj")},yr=h.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(H+1)),J("/Root "+H+" 0 R"),J("/Info "+(H-1)+" 0 R"),f!==null&&J("/Encrypt "+Fr.oid+" 0 R"),J("/ID [ <"+K+"> <"+K+"> ]"),J(">>")},Ft=h.__private__.putHeader=function(){J("%PDF-"+g),J("%")},Dr=h.__private__.putXRef=function(){var U="0000000000";J("xref"),J("0 "+(H+1)),J("0000000000 65535 f ");for(var fe=1;fe<=H;fe++)typeof ne[fe]=="function"?J((U+ne[fe]()).slice(-10)+" 00000 n "):ne[fe]!==void 0?J((U+ne[fe]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},mr=h.__private__.buildDocument=function(){ze(),oe(se),rr.publish("buildDocument"),Ft(),Qe(),ea(),Co(),f!==null&&_n(),Vn(),jn();var U=Q;return Dr(),yr(),J("startxref"),J(""+U),J("%%EOF"),oe(Ae[R]),se.join(`
`)},hr=h.__private__.getBlob=function(U){return new Blob([ce(U)],{type:"application/pdf"})},nr=h.output=h.__private__.output=Xs(function(U,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",U){case void 0:return mr();case"save":h.save(fe.filename);break;case"arraybuffer":return ce(mr());case"blob":return hr(mr());case"bloburi":case"bloburl":if(zr.URL!==void 0&&typeof zr.URL.createObjectURL=="function")return zr.URL&&zr.URL.createObjectURL(hr(mr()))||void 0;ia.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var $e="",Ze=mr();try{$e=wS(Ze)}catch{$e=wS(unescape(encodeURIComponent(Ze)))}return"data:application/pdf;filename="+fe.filename+";base64,"+$e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(zr)==="[object Window]"){var ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(ot=fe.pdfObjectUrl,bt="");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ot+'"'+bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",ur=zr.open();return ur!==null&&ur.document.write(Rt),ur}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(zr)==="[object Window]"){var Cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',Vr=zr.open();if(Vr!==null){Vr.document.write(Cr);var $r=this;Vr.document.documentElement.querySelector("#pdfViewer").onload=function(){Vr.document.title=fe.filename,Vr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($r.output("bloburl"))}}return Vr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(zr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',va=zr.open();if(va!==null&&(va.document.write(fn),va.document.title=fe.filename),va||typeof safari>"u")return va;break;case"datauri":case"dataurl":return zr.document.location.href=this.output("datauristring",fe);default:return null}}),ca=function(U){return Array.isArray(ir)===!0&&ir.indexOf(U)>-1};switch(n){case"pt":Xe=1;break;case"mm":Xe=72/25.4;break;case"cm":Xe=72/2.54;break;case"in":Xe=72;break;case"px":Xe=ca("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xe=12;break;case"ex":Xe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Xe=n}var Fr=null;V(),Y();var Zt=function(U){return f!==null?Fr.encryptor(U,0):function(fe){return fe}},gn=h.__private__.getPageInfo=h.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[U].objId,pageNumber:U,pageContext:Gt[U]}},xr=h.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in Gt)if(Gt[fe].objId===U)break;return gn(fe)},or=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Gt[R].objId,pageNumber:R,pageContext:Gt[R]}};h.addPage=function(){return qt.apply(this,arguments),this},h.setPage=function(){return gr.apply(this,arguments),oe.call(this,Ae[R]),this},h.insertPage=function(U){return this.addPage(),this.movePage(R,U),this},h.movePage=function(U,fe){var $e,Ze;if(U>fe){$e=Ae[U],Ze=Gt[U];for(var ot=U;ot>fe;ot--)Ae[ot]=Ae[ot-1],Gt[ot]=Gt[ot-1];Ae[fe]=$e,Gt[fe]=Ze,this.setPage(fe)}else if(U<fe){$e=Ae[U],Ze=Gt[U];for(var bt=U;bt<fe;bt++)Ae[bt]=Ae[bt+1],Gt[bt]=Gt[bt+1];Ae[fe]=$e,Gt[fe]=Ze,this.setPage(fe)}return this},h.deletePage=function(){return vr.apply(this,arguments),this},h.__private__.text=h.text=function(U,fe,$e,Ze,ot){var bt,Rt,ur,Cr,Vr,$r,fn,va,ya,Qa=(Ze=Ze||{}).scope||this;if(typeof U=="number"&&typeof fe=="number"&&(typeof $e=="string"||Array.isArray($e))){var Ds=$e;$e=fe,fe=U,U=Ds}if(arguments[3]instanceof Dt?(_("The transform parameter of text() with a Matrix value"),ya=ot):(ur=arguments[4],Cr=arguments[5],Jn(fn=arguments[3])==="object"&&fn!==null||(typeof ur=="string"&&(Cr=ur,ur=null),typeof fn=="string"&&(Cr=fn,fn=null),typeof fn=="number"&&(ur=fn,fn=null),Ze={flags:fn,angle:ur,align:Cr})),isNaN(fe)||isNaN($e)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return Qa;var ws="",Po=!1,Ls=typeof Ze.lineHeightFactor=="number"?Ze.lineHeightFactor:Zr,il=Qa.internal.scaleFactor;function Sc(Un){return Un=Un.split("	").join(Array(Ze.TabLen||9).join(" ")),vt(Un,fn)}function Zd(Un){for(var Gn,hn=Un.concat(),fa=[],ul=hn.length;ul--;)typeof(Gn=hn.shift())=="string"?fa.push(Gn):Array.isArray(Un)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?fa.push(Gn[0]):fa.push([Gn[0],Gn[1],Gn[2]]);return fa}function C0(Un,Gn){var hn;if(typeof Un=="string")hn=Gn(Un)[0];else if(Array.isArray(Un)){for(var fa,ul,T0=Un.concat(),dl=[],of=T0.length;of--;)typeof(fa=T0.shift())=="string"?dl.push(Gn(fa)[0]):Array.isArray(fa)&&typeof fa[0]=="string"&&(ul=Gn(fa[0],fa[1],fa[2]),dl.push([ul[0],ul[1],ul[2]]));hn=dl}return hn}var Qu=!1,ef=!0;if(typeof U=="string")Qu=!0;else if(Array.isArray(U)){var tf=U.concat();Rt=[];for(var rf,Za=tf.length;Za--;)(typeof(rf=tf.shift())!="string"||Array.isArray(rf)&&typeof rf[0]!="string")&&(ef=!1);Qu=ef}if(Qu===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var ao=me/Qa.internal.scaleFactor,ol=ao*(Ls-1);switch(Ze.baseline){case"bottom":$e-=ol;break;case"top":$e+=ao-ol;break;case"hanging":$e+=ao-2*ol;break;case"middle":$e+=ao/2-ol}if(($r=Ze.maxWidth||0)>0&&(typeof U=="string"?U=Qa.splitTextToSize(U,$r):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Un,Gn){return Un.concat(Qa.splitTextToSize(Gn,$r))},[]))),bt={text:U,x:fe,y:$e,options:Ze,mutex:{pdfEscape:vt,activeFontKey:We,fonts:xt,activeFontSize:me}},rr.publish("preProcessText",bt),U=bt.text,ur=(Ze=bt.options).angle,!(ya instanceof Dt)&&ur&&typeof ur=="number"){ur*=Math.PI/180,Ze.rotationDirection===0&&(ur=-ur),w===y.ADVANCED&&(ur=-ur);var Pa=Math.cos(ur),Zu=Math.sin(ur);ya=new Dt(Pa,Zu,-Zu,Pa,0,0)}else ur&&ur instanceof Dt&&(ya=ur);w!==y.ADVANCED||ya||(ya=Gr),(Vr=Ze.charSpace||Fl)!==void 0&&(ws+=j(C(Vr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(va=Ze.horizontalScale)!==void 0&&(ws+=j(100*va)+` Tz
`),Ze.lang;var Kr=-1,Fs=Ze.renderingMode!==void 0?Ze.renderingMode:Ze.stroke,ba=Qa.internal.getCurrentPageInfo().pageContext;switch(Fs){case 0:case!1:case"fill":Kr=0;break;case 1:case!0:case"stroke":Kr=1;break;case 2:case"fillThenStroke":Kr=2;break;case 3:case"invisible":Kr=3;break;case 4:case"fillAndAddForClipping":Kr=4;break;case 5:case"strokeAndAddPathForClipping":Kr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Kr=6;break;case 7:case"addToPathForClipping":Kr=7}var Js=ba.usedRenderingMode!==void 0?ba.usedRenderingMode:-1;Kr!==-1?ws+=Kr+` Tr
`:Js!==-1&&(ws+=`0 Tr
`),Kr!==-1&&(ba.usedRenderingMode=Kr),Cr=Ze.align||"left";var Ln,Ns=me*Ls,Ia=Qa.internal.pageSize.getWidth(),Io=xt[We];Vr=Ze.charSpace||Fl,$r=Ze.maxWidth||0,fn=Object.assign({autoencode:!0,noBOM:!0},Ze.flags);var Ma=[],ds=function(Un){return Qa.getStringUnitWidth(Un,{font:Io,charSpace:Vr,fontSize:me,doKerning:!1})*me/il};if(Object.prototype.toString.call(U)==="[object Array]"){var ta;Rt=Zd(U),Cr!=="left"&&(Ln=Rt.map(ds));var es,Ci=0;if(Cr==="right"){fe-=Ln[0],U=[],Za=Rt.length;for(var Ml=0;Ml<Za;Ml++)Ml===0?(es=To(fe),ta=nl($e)):(es=C(Ci-Ln[Ml]),ta=-Ns),U.push([Rt[Ml],es,ta]),Ci=Ln[Ml]}else if(Cr==="center"){fe-=Ln[0]/2,U=[],Za=Rt.length;for(var Do=0;Do<Za;Do++)Do===0?(es=To(fe),ta=nl($e)):(es=C((Ci-Ln[Do])/2),ta=-Ns),U.push([Rt[Do],es,ta]),Ci=Ln[Do]}else if(Cr==="left"){U=[],Za=Rt.length;for(var nf=0;nf<Za;nf++)U.push(Rt[nf])}else if(Cr==="justify"&&Io.encoding==="Identity-H"){U=[],Za=Rt.length,$r=$r!==0?$r:Ia;for(var ll=0,Ra=0;Ra<Za;Ra++)if(ta=Ra===0?nl($e):-Ns,es=Ra===0?To(fe):ll,Ra<Za-1){var af=C(($r-Ln[Ra])/(Rt[Ra].split(" ").length-1)),Qs=Rt[Ra].split(" ");U.push([Qs[0]+" ",es,ta]),ll=0;for(var Ei=1;Ei<Qs.length;Ei++){var _c=(ds(Qs[Ei-1]+" "+Qs[Ei])-ds(Qs[Ei]))*il+af;Ei==Qs.length-1?U.push([Qs[Ei],_c,0]):U.push([Qs[Ei]+" ",_c,0]),ll-=_c}}else U.push([Rt[Ra],es,ta]);U.push(["",ll,0])}else{if(Cr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Za=Rt.length,$r=$r!==0?$r:Ia,Ra=0;Ra<Za;Ra++)ta=Ra===0?nl($e):-Ns,es=Ra===0?To(fe):0,Ra<Za-1?Ma.push(j(C(($r-Ln[Ra])/(Rt[Ra].split(" ").length-1)))):Ma.push(0),U.push([Rt[Ra],es,ta])}}var sf=typeof Ze.R2L=="boolean"?Ze.R2L:Ue;sf===!0&&(U=C0(U,function(Un,Gn,hn){return[Un.split("").reverse().join(""),Gn,hn]})),bt={text:U,x:fe,y:$e,options:Ze,mutex:{pdfEscape:vt,activeFontKey:We,fonts:xt,activeFontSize:me}},rr.publish("postProcessText",bt),U=bt.text,Po=bt.mutex.isHex||!1;var hu=xt[We].encoding;hu!=="WinAnsiEncoding"&&hu!=="StandardEncoding"||(U=C0(U,function(Un,Gn,hn){return[Sc(Un),Gn,hn]})),Rt=Zd(U),U=[];for(var Lo,Ti,so,Fo=0,cl=1,Mo=Array.isArray(Rt[0])?cl:Fo,Ro="",E0=function(Un,Gn,hn){var fa="";return hn instanceof Dt?(hn=typeof Ze.angle=="number"?Sr(hn,new Dt(1,0,0,1,Un,Gn)):Sr(new Dt(1,0,0,1,Un,Gn),hn),w===y.ADVANCED&&(hn=Sr(new Dt(1,0,0,-1,0,0),hn)),fa=hn.join(" ")+` Tm
`):fa=j(Un)+" "+j(Gn)+` Td
`,fa},xi=0;xi<Rt.length;xi++){switch(Ro="",Mo){case cl:so=(Po?"<":"(")+Rt[xi][0]+(Po?">":")"),Lo=parseFloat(Rt[xi][1]),Ti=parseFloat(Rt[xi][2]);break;case Fo:so=(Po?"<":"(")+Rt[xi]+(Po?">":")"),Lo=To(fe),Ti=nl($e)}Ma!==void 0&&Ma[xi]!==void 0&&(Ro=Ma[xi]+` Tw
`),xi===0?U.push(Ro+E0(Lo,Ti,ya)+so):Mo===Fo?U.push(Ro+so):Mo===cl&&U.push(Ro+E0(Lo,Ti,ya)+so)}U=Mo===Fo?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var js=`BT
/`;return js+=We+" "+me+` Tf
`,js+=j(me*Ls)+` TL
`,js+=cu+`
`,js+=ws,js+=U,J(js+="ET"),p[We]=!0,Qa};var cr=h.__private__.clip=h.clip=function(U){return J(U==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return cr("evenodd")},h.__private__.discardPath=h.discardPath=function(){return J("n"),this};var Dn=h.__private__.isValidStyle=function(U){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(fe=!0),fe};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(U){return Dn(U)&&(u=U),this};var ua=h.__private__.getStyle=h.getStyle=function(U){var fe=u;switch(U){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=U}return fe},Ya=h.close=function(){return J("h"),this};h.stroke=function(){return J("S"),this},h.fill=function(U){return dn("f",U),this},h.fillEvenOdd=function(U){return dn("f*",U),this},h.fillStroke=function(U){return dn("B",U),this},h.fillStrokeEvenOdd=function(U){return dn("B*",U),this};var dn=function(U,fe){Jn(fe)==="object"?Pe(fe,U):J(U)},pi=function(U){U===null||w===y.ADVANCED&&U===void 0||(U=ua(U),J(U))};function no(U,fe,$e,Ze,ot){var bt=new fm(fe||this.boundingBox,$e||this.xStep,Ze||this.yStep,this.gState,ot||this.matrix);bt.stream=this.stream;var Rt=U+"$$"+this.cloneIndex+++"$$";return cn(Rt,bt),bt}var Pe=function(U,fe){var $e=kt[U.key],Ze=Ge[$e];if(Ze instanceof eh)J("q"),J(Ht(fe)),Ze.gState&&h.setGState(Ze.gState),J(U.matrix.toString()+" cm"),J("/"+$e+" sh"),J("Q");else if(Ze instanceof fm){var ot=new Dt(1,0,0,-1,0,kc());U.matrix&&(ot=ot.multiply(U.matrix||Gr),$e=no.call(Ze,U.key,U.boundingBox,U.xStep,U.yStep,ot).id),J("q"),J("/Pattern cs"),J("/"+$e+" scn"),Ze.gState&&h.setGState(Ze.gState),J(fe),J("Q")}},Ht=function(U){switch(U){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},$t=h.moveTo=function(U,fe){return J(j(C(U))+" "+j(M(fe))+" m"),this},Kt=h.lineTo=function(U,fe){return J(j(C(U))+" "+j(M(fe))+" l"),this},dr=h.curveTo=function(U,fe,$e,Ze,ot,bt){return J([j(C(U)),j(M(fe)),j(C($e)),j(M(Ze)),j(C(ot)),j(M(bt)),"c"].join(" ")),this};h.__private__.line=h.line=function(U,fe,$e,Ze,ot){if(isNaN(U)||isNaN(fe)||isNaN($e)||isNaN(Ze)||!Dn(ot))throw new Error("Invalid arguments passed to jsPDF.line");return w===y.COMPAT?this.lines([[$e-U,Ze-fe]],U,fe,[1,1],ot||"S"):this.lines([[$e-U,Ze-fe]],U,fe,[1,1]).stroke()},h.__private__.lines=h.lines=function(U,fe,$e,Ze,ot,bt){var Rt,ur,Cr,Vr,$r,fn,va,ya,Qa,Ds,ws,Po;if(typeof U=="number"&&(Po=$e,$e=fe,fe=U,U=Po),Ze=Ze||[1,1],bt=bt||!1,isNaN(fe)||isNaN($e)||!Array.isArray(U)||!Array.isArray(Ze)||!Dn(ot)||typeof bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($t(fe,$e),Rt=Ze[0],ur=Ze[1],Vr=U.length,Ds=fe,ws=$e,Cr=0;Cr<Vr;Cr++)($r=U[Cr]).length===2?(Ds=$r[0]*Rt+Ds,ws=$r[1]*ur+ws,Kt(Ds,ws)):(fn=$r[0]*Rt+Ds,va=$r[1]*ur+ws,ya=$r[2]*Rt+Ds,Qa=$r[3]*ur+ws,Ds=$r[4]*Rt+Ds,ws=$r[5]*ur+ws,dr(fn,va,ya,Qa,Ds,ws));return bt&&Ya(),pi(ot),this},h.path=function(U){for(var fe=0;fe<U.length;fe++){var $e=U[fe],Ze=$e.c;switch($e.op){case"m":$t(Ze[0],Ze[1]);break;case"l":Kt(Ze[0],Ze[1]);break;case"c":dr.apply(this,Ze);break;case"h":Ya()}}return this},h.__private__.rect=h.rect=function(U,fe,$e,Ze,ot){if(isNaN(U)||isNaN(fe)||isNaN($e)||isNaN(Ze)||!Dn(ot))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y.COMPAT&&(Ze=-Ze),J([j(C(U)),j(M(fe)),j(C($e)),j(C(Ze)),"re"].join(" ")),pi(ot),this},h.__private__.triangle=h.triangle=function(U,fe,$e,Ze,ot,bt,Rt){if(isNaN(U)||isNaN(fe)||isNaN($e)||isNaN(Ze)||isNaN(ot)||isNaN(bt)||!Dn(Rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[$e-U,Ze-fe],[ot-$e,bt-Ze],[U-ot,fe-bt]],U,fe,[1,1],Rt,!0),this},h.__private__.roundedRect=h.roundedRect=function(U,fe,$e,Ze,ot,bt,Rt){if(isNaN(U)||isNaN(fe)||isNaN($e)||isNaN(Ze)||isNaN(ot)||isNaN(bt)||!Dn(Rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ur=4/3*(Math.SQRT2-1);return ot=Math.min(ot,.5*$e),bt=Math.min(bt,.5*Ze),this.lines([[$e-2*ot,0],[ot*ur,0,ot,bt-bt*ur,ot,bt],[0,Ze-2*bt],[0,bt*ur,-ot*ur,bt,-ot,bt],[2*ot-$e,0],[-ot*ur,0,-ot,-bt*ur,-ot,-bt],[0,2*bt-Ze],[0,-bt*ur,ot*ur,-bt,ot,-bt]],U+ot,fe,[1,1],Rt,!0),this},h.__private__.ellipse=h.ellipse=function(U,fe,$e,Ze,ot){if(isNaN(U)||isNaN(fe)||isNaN($e)||isNaN(Ze)||!Dn(ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var bt=4/3*(Math.SQRT2-1)*$e,Rt=4/3*(Math.SQRT2-1)*Ze;return $t(U+$e,fe),dr(U+$e,fe-Rt,U+bt,fe-Ze,U,fe-Ze),dr(U-bt,fe-Ze,U-$e,fe-Rt,U-$e,fe),dr(U-$e,fe+Rt,U-bt,fe+Ze,U,fe+Ze),dr(U+bt,fe+Ze,U+$e,fe+Rt,U+$e,fe),pi(ot),this},h.__private__.circle=h.circle=function(U,fe,$e,Ze){if(isNaN(U)||isNaN(fe)||isNaN($e)||!Dn(Ze))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,fe,$e,$e,Ze)},h.setFont=function(U,fe,$e){return $e&&(fe=S(fe,$e)),We=Rn(U,fe,{disableWarning:!1}),this};var Wr=h.__private__.getFont=h.getFont=function(){return xt[Rn.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var U,fe,$e={};for(U in Tt)if(Tt.hasOwnProperty(U))for(fe in $e[U]=[],Tt[U])Tt[U].hasOwnProperty(fe)&&$e[U].push(fe);return $e},h.addFont=function(U,fe,$e,Ze,ot){var bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&bt.indexOf(arguments[3])!==-1?ot=arguments[3]:arguments[3]&&bt.indexOf(arguments[3])==-1&&($e=S($e,Ze)),ot=ot||"Identity-H",yc.call(this,U,fe,$e,ot)};var Zr,Ja=e.lineWidth||.200025,mi=h.__private__.getLineWidth=h.getLineWidth=function(){return Ja},Ju=h.__private__.setLineWidth=h.setLineWidth=function(U){return Ja=U,J(j(C(U))+" w"),this};h.__private__.setLineDash=Ur.API.setLineDash=Ur.API.setLineDashPattern=function(U,fe){if(U=U||[],fe=fe||0,isNaN(fe)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function($e){return j(C($e))}).join(" "),fe=j(C(fe)),J("["+U+"] "+fe+" d"),this};var Eo=h.__private__.getLineHeight=h.getLineHeight=function(){return me*Zr};h.__private__.getLineHeight=h.getLineHeight=function(){return me*Zr};var Ys=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Zr=U),this},Ll=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Zr};Ys(e.lineHeight);var To=h.__private__.getHorizontalCoordinate=function(U){return C(U)},nl=h.__private__.getVerticalCoordinate=function(U){return w===y.ADVANCED?U:Gt[R].mediaBox.topRightY-Gt[R].mediaBox.bottomLeftY-C(U)},Vx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(U){return j(To(U))},al=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(U){return j(nl(U))},Oo=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return ae(Oo)},h.__private__.setStrokeColor=h.setDrawColor=function(U,fe,$e,Ze){return Oo=pe({ch1:U,ch2:fe,ch3:$e,ch4:Ze,pdfColorType:"draw",precision:2}),J(Oo),this};var wc=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return ae(wc)},h.__private__.setFillColor=h.setFillColor=function(U,fe,$e,Ze){return wc=pe({ch1:U,ch2:fe,ch3:$e,ch4:Ze,pdfColorType:"fill",precision:2}),J(wc),this};var cu=e.textColor||"0 g",uu=h.__private__.getTextColor=h.getTextColor=function(){return ae(cu)};h.__private__.setTextColor=h.setTextColor=function(U,fe,$e,Ze){return cu=pe({ch1:U,ch2:fe,ch3:$e,ch4:Ze,pdfColorType:"text",precision:3}),this};var Fl=e.charSpace,Gx=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Fl||0)};h.__private__.setCharSpace=h.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fl=U,this};var du=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(U){var fe=h.CapJoinStyles[U];if(fe===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return du=fe,J(fe+" J"),this};var S0=0;h.__private__.setLineJoin=h.setLineJoin=function(U){var fe=h.CapJoinStyles[U];if(fe===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return S0=fe,J(fe+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(j(C(U))+" M"),this},h.GState=a5,h.setGState=function(U){(U=typeof U=="string"?gt[Vt[U]]:Nc(null,U)).equals(_r)||(J("/"+U.id+" gs"),_r=U)};var Nc=function(U,fe){if(!U||!Vt[U]){var $e=!1;for(var Ze in gt)if(gt.hasOwnProperty(Ze)&&gt[Ze].equals(fe)){$e=!0;break}if($e)fe=gt[Ze];else{var ot="GS"+(Object.keys(gt).length+1).toString(10);gt[ot]=fe,fe.id=ot}return U&&(Vt[U]=fe.id),rr.publish("addGState",fe),fe}};h.addGState=function(U,fe){return Nc(U,fe),this},h.saveGraphicsState=function(){return J("q"),he.push({key:We,size:me,color:cu}),this},h.restoreGraphicsState=function(){J("Q");var U=he.pop();return We=U.key,me=U.size,cu=U.color,_r=null,this},h.setCurrentTransformationMatrix=function(U){return J(U.toString()+" cm"),this},h.comment=function(U){return J("#"+U),this};var sl=function(U,fe){var $e=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $e},set:function(bt){isNaN(bt)||($e=parseFloat(bt))}});var Ze=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ze},set:function(bt){isNaN(bt)||(Ze=parseFloat(bt))}});var ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ot},set:function(bt){ot=bt.toString()}}),this},jc=function(U,fe,$e,Ze){sl.call(this,U,fe),this.type="rect";var ot=$e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ot},set:function(Rt){isNaN(Rt)||(ot=parseFloat(Rt))}});var bt=Ze||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return bt},set:function(Rt){isNaN(Rt)||(bt=parseFloat(Rt))}}),this},Yd=function(){this.page=lr,this.currentPage=R,this.pages=Ae.slice(0),this.pagesContext=Gt.slice(0),this.x=Et,this.y=wt,this.matrix=Ve,this.width=da(R),this.height=kc(R),this.outputDestination=Me,this.id="",this.objectNumber=-1};Yd.prototype.restore=function(){lr=this.page,R=this.currentPage,Gt=this.pagesContext,Ae=this.pages,Et=this.x,wt=this.y,Ve=this.matrix,A0(R,this.width),Qd(R,this.height),Me=this.outputDestination};var _0=function(U,fe,$e,Ze,ot){jr.push(new Yd),lr=R=0,Ae=[],Et=U,wt=fe,Ve=ot,Lt([$e,Ze])},Jd=function(U){if(Nr[U])jr.pop().restore();else{var fe=new Yd,$e="Xo"+(Object.keys(pr).length+1).toString(10);fe.id=$e,Nr[U]=$e,pr[$e]=fe,rr.publish("addFormObject",fe),jr.pop().restore()}};for(var fu in h.beginFormObject=function(U,fe,$e,Ze,ot){return _0(U,fe,$e,Ze,ot),this},h.endFormObject=function(U){return Jd(U),this},h.doFormObject=function(U,fe){var $e=pr[Nr[U]];return J("q"),J(fe.toString()+" cm"),J("/"+$e.id+" Do"),J("Q"),this},h.getFormObject=function(U){var fe=pr[Nr[U]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},h.save=function(U,fe){return U=U||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(Q0(hr(mr()),U),typeof Q0.unload=="function"&&zr.setTimeout&&setTimeout(Q0.unload,911),this):new Promise(function($e,Ze){try{var ot=Q0(hr(mr()),U);typeof Q0.unload=="function"&&zr.setTimeout&&setTimeout(Q0.unload,911),$e(ot)}catch(bt){Ze(bt.message)}})},Ur.API)Ur.API.hasOwnProperty(fu)&&(fu==="events"&&Ur.API.events.length?function(U,fe){var $e,Ze,ot;for(ot=fe.length-1;ot!==-1;ot--)$e=fe[ot][0],Ze=fe[ot][1],U.subscribe.apply(U,[$e].concat(typeof Ze=="function"?[Ze]:Ze))}(rr,Ur.API.events):h[fu]=Ur.API[fu]);var da=h.getPageWidth=function(U){return(Gt[U=U||R].mediaBox.topRightX-Gt[U].mediaBox.bottomLeftX)/Xe},A0=h.setPageWidth=function(U,fe){Gt[U].mediaBox.topRightX=fe*Xe+Gt[U].mediaBox.bottomLeftX},kc=h.getPageHeight=function(U){return(Gt[U=U||R].mediaBox.topRightY-Gt[U].mediaBox.bottomLeftY)/Xe},Qd=h.setPageHeight=function(U,fe){Gt[U].mediaBox.topRightY=fe*Xe+Gt[U].mediaBox.bottomLeftY};return h.internal={pdfEscape:vt,getStyle:ua,getFont:Wr,getFontSize:Ce,getCharSpace:Gx,getTextColor:uu,getLineHeight:Eo,getLineHeightFactor:Ll,getLineWidth:mi,write:je,getHorizontalCoordinate:To,getVerticalCoordinate:nl,getCoordinateString:Vx,getVerticalCoordinateString:al,collections:{},newObject:qe,newAdditionalObject:_e,newObjectDeferred:mt,newObjectDeferredBegin:le,getFilters:Re,putStream:Ye,events:rr,scaleFactor:Xe,pageSize:{getWidth:function(){return da(R)},setWidth:function(U){A0(R,U)},getHeight:function(){return kc(R)},setHeight:function(U){Qd(R,U)}},encryptionOptions:f,encryption:Fr,getEncryptor:Zt,output:nr,getNumberOfPages:Br,pages:Ae,out:J,f2:I,f3:A,getPageInfo:gn,getPageInfoByObjId:xr,getCurrentPageInfo:or,getPDFVersion:x,Point:sl,Rectangle:jc,Matrix:Dt,hasHotfix:ca},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return da(R)},set:function(U){A0(R,U)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return kc(R)},set:function(U){Qd(R,U)},enumerable:!0,configurable:!0}),bc.call(h,ye),We="F1",qt(s,r),rr.publish("initialized"),h}Gp.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Gp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Gp.prototype.processOwnerPassword=function(e,t){return jS(NS(t).substr(0,5),e)},Gp.prototype.encryptor=function(e,t){var r=NS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return jS(r,n)}},a5.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Jn(e)!==Jn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ur.API={events:[]},Ur.version="2.5.2";var as=Ur.API,TA=1,dp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Yr=function(e){return e.toFixed(2)},gf=function(e){return e.toFixed(5)};as.__acroform__={};var rl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},EI=function(e){return e*TA},ju=function(e){var t=new xU,r=kr.internal.getHeight(e)||0,n=kr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Yr(n)),Number(Yr(r))],t},TAe=as.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},OAe=as.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},PAe=as.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ms=as.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return PAe(e,t-1)},xs=as.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TAe(e,t-1)},gs=as.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return OAe(e,t-1)},IAe=as.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(Yr(c.lowerLeft_X)),Number(Yr(c.lowerLeft_Y)),Number(Yr(c.upperRight_X)),Number(Yr(c.upperRight_Y))]},DAe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=kS(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Yr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ju(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},kS=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(A){return A.split(`
`)}):s.map(function(A){return[A]});var i=r,o=kr.internal.getHeight(e)||0;o=o<0?-o:o;var l=kr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(A,C,F){if(A+1<s.length){var M=C+" "+s[A+1][0];return Ib(M,e,F).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,f,d=Ib("3",e,i).height,p=e.multiline?o-i:(o-d)/2,h=p+=2,g=0,x=0,m=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ib(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",y=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var b=!1;if(s[w].length!==1&&m!==s[w].length-1){if((d+2)*(y+2)+2>o)continue e;v+=s[w][m],b=!0,x=w,w--}else{v=(v+=s[w][m]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var N=parseInt(w),S=c(N,v,i),j=w>=s.length-1;if(S&&!j){v+=" ",m=0;continue}if(S||j){if(j)x=N;else if(e.multiline&&(d+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(d+2)*(y+2)+2>o)continue e;x=N}}for(var _="",E=g;E<=x;E++){var I=s[E];if(e.multiline){if(E===x){_+=I[m]+" ",m=(m+1)%I.length;continue}if(E===g){_+=I[I.length-1]+" ";continue}}_+=I[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,f=Ib(_,e,i).width,e.textAlign){case"right":u=l-f-2;break;case"center":u=(l-f)/2;break;case"left":default:u=2}t+=Yr(u)+" "+Yr(h)+` Td
`,t+="("+dp(_)+`) Tj
`,t+=-Yr(u)+` 0 Td
`,h=-(i+2),f=0,g=b?x:x+1,y++,v=""}break}return n.text=t,n.fontSize=i,n},Ib=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},LAe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},FAe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},MAe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Jn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},RAe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ou.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(LAe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");TA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new gU,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&FAe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=IAe(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=kr.createDefaultAppearanceStream(l),Jn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=DAe(l);c.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var d="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var h=l.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var g=h[o];typeof g=="function"&&(g=g.call(s,l)),d+="/"+o+" "+g+" ",s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g)}}else typeof(g=h)=="function"&&(g=g.call(s,l)),d+="/"+o+" "+g,s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&MAe(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},mU=as.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Jn(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+dp(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},c4=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+dp(n(e))+")"},Lu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lu.prototype.toString=function(){return this.objId+" 0 R"},Lu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Lu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:mU(s,this.objId,this.scope)}):s instanceof Lu?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var xU=function(){Lu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};rl(xU,Lu);var gU=function(){Lu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+dp(r(e))+")"}},set:function(r){e=r}})};rl(gU,Lu);var ou=function e(){Lu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ms(t,3)},set:function(v){v?this.F=xs(t,3):this.F=gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof s5)return;i="FieldObject"+e.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+dp(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/TA:u},set:function(v){u=v}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(v){f=v}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof s5||this instanceof Oh))return c4(d,this.objId,this.scope)},set:function(v){v=v.toString(),d=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof li?p:c4(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof li?v:v.substr(0,1)==="("?Hp(v.substr(1,v.length-2)):Hp(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof li?Hp(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof li?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof li?h:c4(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof li?v:v.substr(0,1)==="("?Hp(v.substr(1,v.length-2)):Hp(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof li?Hp(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof li?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(v){v=!!v,x=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(v){g=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,1)},set:function(v){v?this.Ff=xs(this.Ff,1):this.Ff=gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,2)},set:function(v){v?this.Ff=xs(this.Ff,2):this.Ff=gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,3)},set:function(v){v?this.Ff=xs(this.Ff,3):this.Ff=gs(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(m!==null)return m},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');m=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(m){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:m=2;break;case"center":case 1:m=1;break;case"left":case 0:default:m=0}}})};rl(ou,Lu);var Am=function(){ou.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return mU(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,18)},set:function(r){r?this.Ff=xs(this.Ff,18):this.Ff=gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=xs(this.Ff,19):this.Ff=gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,20)},set:function(r){r?(this.Ff=xs(this.Ff,20),t.sort()):this.Ff=gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,22)},set:function(r){r?this.Ff=xs(this.Ff,22):this.Ff=gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,23)},set:function(r){r?this.Ff=xs(this.Ff,23):this.Ff=gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,27)},set:function(r){r?this.Ff=xs(this.Ff,27):this.Ff=gs(this.Ff,27)}}),this.hasAppearanceStream=!1};rl(Am,ou);var Cm=function(){Am.call(this),this.fontName="helvetica",this.combo=!1};rl(Cm,Am);var Em=function(){Cm.call(this),this.combo=!0};rl(Em,Cm);var n2=function(){Em.call(this),this.edit=!0};rl(n2,Em);var li=function(){ou.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,15)},set:function(r){r?this.Ff=xs(this.Ff,15):this.Ff=gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,16)},set:function(r){r?this.Ff=xs(this.Ff,16):this.Ff=gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,17)},set:function(r){r?this.Ff=xs(this.Ff,17):this.Ff=gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,26)},set:function(r){r?this.Ff=xs(this.Ff,26):this.Ff=gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+dp(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Jn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};rl(li,ou);var a2=function(){li.call(this),this.pushButton=!0};rl(a2,li);var Tm=function(){li.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};rl(Tm,li);var s5=function(){var e,t;ou.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+dp(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Jn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};rl(s5,ou),Tm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Tm.prototype.createOption=function(e){var t=new s5;return t.Parent=this,t.optionName=e,this.Kids.push(t),BAe.call(this.scope,t),t};var s2=function(){li.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kr.CheckBox.createAppearanceStream()};rl(s2,li);var Oh=function(){ou.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,13)},set:function(t){t?this.Ff=xs(this.Ff,13):this.Ff=gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,21)},set:function(t){t?this.Ff=xs(this.Ff,21):this.Ff=gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,23)},set:function(t){t?this.Ff=xs(this.Ff,23):this.Ff=gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,24)},set:function(t){t?this.Ff=xs(this.Ff,24):this.Ff=gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,25)},set:function(t){t?this.Ff=xs(this.Ff,25):this.Ff=gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,26)},set:function(t){t?this.Ff=xs(this.Ff,26):this.Ff=gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};rl(Oh,ou);var i2=function(){Oh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,14)},set:function(e){e?this.Ff=xs(this.Ff,14):this.Ff=gs(this.Ff,14)}}),this.password=!0};rl(i2,Oh);var kr={CheckBox:{createAppearanceStream:function(){return{N:{On:kr.CheckBox.YesNormal},D:{On:kr.CheckBox.YesPushDown,Off:kr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=kS(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Yr(kr.internal.getWidth(e))+" "+Yr(kr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Yr(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=kr.internal.getHeight(e),o=kr.internal.getWidth(e),l=kS(e,e.caption);return s.push("1 g"),s.push("0 0 "+Yr(o)+" "+Yr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Yr(o-1)+" "+Yr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Yr(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Yr(kr.internal.getWidth(e))+" "+Yr(kr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:kr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=kr.RadioButton.Circle.YesNormal,t.D[e]=kr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=kr.internal.getWidth(e)<=kr.internal.getHeight(e)?kr.internal.getWidth(e)/4:kr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=kr.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+gf(kr.internal.getWidth(e)/2)+" "+gf(kr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=kr.internal.getWidth(e)<=kr.internal.getHeight(e)?kr.internal.getWidth(e)/4:kr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*kr.internal.Bezier_C).toFixed(5)),o=Number((n*kr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+gf(kr.internal.getWidth(e)/2)+" "+gf(kr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+gf(kr.internal.getWidth(e)/2)+" "+gf(kr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=kr.internal.getWidth(e)<=kr.internal.getHeight(e)?kr.internal.getWidth(e)/4:kr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*kr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+gf(kr.internal.getWidth(e)/2)+" "+gf(kr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:kr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=kr.RadioButton.Cross.YesNormal,t.D[e]=kr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=kr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Yr(kr.internal.getWidth(e)-2)+" "+Yr(kr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Yr(n.x1.x)+" "+Yr(n.x1.y)+" m"),r.push(Yr(n.x2.x)+" "+Yr(n.x2.y)+" l"),r.push(Yr(n.x4.x)+" "+Yr(n.x4.y)+" m"),r.push(Yr(n.x3.x)+" "+Yr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=kr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Yr(kr.internal.getWidth(e))+" "+Yr(kr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Yr(kr.internal.getWidth(e)-2)+" "+Yr(kr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Yr(r.x1.x)+" "+Yr(r.x1.y)+" m"),n.push(Yr(r.x2.x)+" "+Yr(r.x2.y)+" l"),n.push(Yr(r.x4.x)+" "+Yr(r.x4.y)+" m"),n.push(Yr(r.x3.x)+" "+Yr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Yr(kr.internal.getWidth(e))+" "+Yr(kr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};kr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=kr.internal.getWidth(e),r=kr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},kr.internal.getWidth=function(e){var t=0;return Jn(e)==="object"&&(t=EI(e.Rect[2])),t},kr.internal.getHeight=function(e){var t=0;return Jn(e)==="object"&&(t=EI(e.Rect[3])),t};var BAe=as.addField=function(e){if(RAe(this,e),!(e instanceof ou))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};as.AcroFormChoiceField=Am,as.AcroFormListBox=Cm,as.AcroFormComboBox=Em,as.AcroFormEditBox=n2,as.AcroFormButton=li,as.AcroFormPushButton=a2,as.AcroFormRadioButton=Tm,as.AcroFormCheckBox=s2,as.AcroFormTextField=Oh,as.AcroFormPasswordField=i2,as.AcroFormAppearance=kr,as.AcroForm={ChoiceField:Am,ListBox:Cm,ComboBox:Em,EditBox:n2,Button:li,PushButton:a2,RadioButton:Tm,CheckBox:s2,TextField:Oh,PasswordField:i2,Appearance:kr},Ur.AcroForm={ChoiceField:Am,ListBox:Cm,ComboBox:Em,EditBox:n2,Button:li,PushButton:a2,RadioButton:Tm,CheckBox:s2,TextField:Oh,PasswordField:i2,Appearance:kr};Ur.AcroForm;function vU(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(A,C){var F,M,B,K,G,Y=t;if((C=C||t)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(S(A))for(G in r)for(B=r[G],F=0;F<B.length;F+=1){for(K=!0,M=0;M<B[F].length;M+=1)if(B[F][M]!==void 0&&B[F][M]!==A[M]){K=!1;break}if(K===!0){Y=G;break}}else for(G in r)for(B=r[G],F=0;F<B.length;F+=1){for(K=!0,M=0;M<B[F].length;M+=1)if(B[F][M]!==void 0&&B[F][M]!==A.charCodeAt(M)){K=!1;break}if(K===!0){Y=G;break}}return Y===t&&C!==t&&(Y=C),Y},s=function A(C){for(var F=this.internal.write,M=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:C.width}),K.push({key:"Height",value:C.height}),C.colorSpace===m.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===m.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var G="",Y=0,q=C.transparency.length;Y<q;Y++)G+=C.transparency[Y]+" "+C.transparency[Y]+" ";K.push({key:"Mask",value:"["+G+"]"})}C.sMask!==void 0&&K.push({key:"SMask",value:C.objectId+1+" 0 R"});var X=C.filter!==void 0?["/"+C.filter]:void 0;if(M({data:C.data,additionalKeyValues:K,alreadyAppliedFilters:X,objectId:C.objectId}),F("endobj"),"sMask"in C&&C.sMask!==void 0){var V="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,T={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:V,data:C.sMask};"filter"in C&&(T.filter=C.filter),A.call(this,T)}if(C.colorSpace===m.INDEXED){var R=this.internal.newObject();M({data:_(new Uint8Array(C.palette)),objectId:R}),F("endobj")}},i=function(){var A=this.internal.collections.addImage_images;for(var C in A)s.call(this,A[C])},o=function(){var A,C=this.internal.collections.addImage_images,F=this.internal.write;for(var M in C)F("/I"+(A=C[M]).index,A.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var A=this.internal.collections.addImage_images;return l.call(this),A},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(A){return typeof e["process"+A.toUpperCase()]=="function"},d=function(A){return Jn(A)==="object"&&A.nodeType===1},p=function(A,C){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var F=""+A.getAttribute("src");if(F.indexOf("data:image/")===0)return bv(unescape(F).split("base64,").pop());var M=e.loadFile(F,!0);if(M!==void 0)return M}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var B;switch(C){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;case"JPEG":case"JPG":default:B="image/jpeg"}return bv(A.toDataURL(B,1).split("base64,").pop())}},h=function(A){var C=this.internal.collections.addImage_images;if(C){for(var F in C)if(A===C[F].alias)return C[F]}},g=function(A,C,F){return A||C||(A=-96,C=-96),A<0&&(A=-1*F.width*72/A/this.internal.scaleFactor),C<0&&(C=-1*F.height*72/C/this.internal.scaleFactor),A===0&&(A=C*F.width/F.height),C===0&&(C=A*F.height/F.width),[A,C]},x=function(A,C,F,M,B,K){var G=g.call(this,F,M,B),Y=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,X=c.call(this);if(F=G[0],M=G[1],X[B.index]=B,K){K*=Math.PI/180;var V=Math.cos(K),T=Math.sin(K),R=function(L){return L.toFixed(4)},z=[R(V),R(T),R(-1*T),R(V),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,Y(A),q(C+M),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([Y(F),"0","0",Y(M),"0","0","cm"].join(" "))):this.internal.write([Y(F),"0","0",Y(M),Y(A),q(C+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(A){var C,F,M=0;if(typeof A=="string")for(F=A.length,C=0;C<F;C++)M=(M<<5)-M+A.charCodeAt(C),M|=0;else if(S(A))for(F=A.byteLength/2,C=0;C<F;C++)M=(M<<5)-M+A[C],M|=0;return M},w=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var C=!0;return A.length===0&&(C=!1),A.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(C=!1),C},b=e.__addimage__.extractImageFromDataUrl=function(A){var C=(A=A||"").split("base64,"),F=null;if(C.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(C[0]);Array.isArray(M)&&(F={mimeType:M[1],charset:M[2],data:C[1]})}return F},N=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(A){return N()&&A instanceof ArrayBuffer};var S=e.__addimage__.isArrayBufferView=function(A){return N()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},j=e.__addimage__.binaryStringToUint8Array=function(A){for(var C=A.length,F=new Uint8Array(C),M=0;M<C;M++)F[M]=A.charCodeAt(M);return F},_=e.__addimage__.arrayBufferToBinaryString=function(A){for(var C="",F=S(A)?A:new Uint8Array(A),M=0;M<F.length;M+=8192)C+=String.fromCharCode.apply(null,F.subarray(M,M+8192));return C};e.addImage=function(){var A,C,F,M,B,K,G,Y,q;if(typeof arguments[1]=="number"?(C=t,F=arguments[1],M=arguments[2],B=arguments[3],K=arguments[4],G=arguments[5],Y=arguments[6],q=arguments[7]):(C=arguments[1],F=arguments[2],M=arguments[3],B=arguments[4],K=arguments[5],G=arguments[6],Y=arguments[7],q=arguments[8]),Jn(A=arguments[0])==="object"&&!d(A)&&"imageData"in A){var X=A;A=X.imageData,C=X.format||C||t,F=X.x||F||0,M=X.y||M||0,B=X.w||X.width||B,K=X.h||X.height||K,G=X.alias||G,Y=X.compression||Y,q=X.rotation||X.angle||q}var V=this.internal.getFilters();if(Y===void 0&&V.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(F)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=E.call(this,A,C,G,Y);return x.call(this,F,M,B,K,T,q),this};var E=function(A,C,F,M){var B,K,G;if(typeof A=="string"&&n(A)===t){A=unescape(A);var Y=I(A,!1);(Y!==""||(Y=e.loadFile(A,!0))!==void 0)&&(A=Y)}if(d(A)&&(A=p(A,C)),C=n(A,C),!f(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((G=F)==null||G.length===0)&&(F=function(q){return typeof q=="string"||S(q)?y(q):S(q.data)?y(q.data):null}(A)),(B=h.call(this,F))||(N()&&(A instanceof Uint8Array||C==="RGBA"||(K=A,A=j(A))),B=this["process"+C.toUpperCase()](A,u.call(this),F,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in e.image_compression?q:v.NONE}(M),K)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},I=e.__addimage__.convertBase64ToBinaryString=function(A,C){var F;C=typeof C!="boolean"||C;var M,B="";if(typeof A=="string"){M=(F=b(A))!==null?F.data:A;try{B=bv(M)}catch(K){if(C)throw w(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};e.getImageProperties=function(A){var C,F,M="";if(d(A)&&(A=p(A)),typeof A=="string"&&n(A)===t&&((M=I(A,!1))===""&&(M=e.loadFile(A)||""),A=M),F=n(A),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!N()||A instanceof Uint8Array||(A=j(A)),!(C=this["process"+F.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=F,C}})(Ur.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ur.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,d=0;d<u.length&&!f;d++)switch((n=u[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var h=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(x.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(v(y))+") >>",x.content=i;var w=x.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(x.objId,"0 R",m.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var S=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+s),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(u*f)}else l=c,o=u;return this.text(r,n,s,i),s+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-u,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ur.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&s.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length==4},d=e.__arabicParser__.resolveLigatures=function(x){var m=0,v=r,y="",w=0;for(m=0;m<x.length;m+=1)v[x.charCodeAt(m)]!==void 0?(w++,typeof(v=v[x.charCodeAt(m)])=="number"&&(y+=String.fromCharCode(v),v=r,w=0),m===x.length-1&&(v=r,y+=x.charAt(m-(w-1)),m-=w-1,w=0)):(v=r,y+=x.charAt(m-w),m-=w,w=0);return y};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(x,m,v){return o(x)?i(x)===!1?-1:!u(x)||!o(m)&&!o(v)||!o(v)&&l(m)||l(x)&&!o(m)||l(x)&&c(m)||l(x)&&l(m)?0:f(x)&&o(m)&&!l(m)&&o(v)&&u(v)?3:l(x)||!o(v)?1:2:-1},h=function(x){var m=0,v=0,y=0,w="",b="",N="",S=(x=x||"").split("\\s+"),j=[];for(m=0;m<S.length;m+=1){for(j.push(""),v=0;v<S[m].length;v+=1)w=S[m][v],b=S[m][v-1],N=S[m][v+1],o(w)?(y=p(w,b,N),j[m]+=y!==-1?String.fromCharCode(t[w.charCodeAt(0)][y]):w):j[m]+=w;j[m]=d(j[m])}return j.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,m=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(m)){var y=0;for(v=[],y=0;y<m.length;y+=1)Array.isArray(m[y])?v.push([h(m[y][0]),m[y][1],m[y][2]]):v.push([h(m[y])]);x=v}else x=h(m);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(Ur.API),Ur.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ur.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,g=0,x=0,m=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,b){return w.concat(m.splitTextToSize(b,v))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(x=this.getStringUnitWidth(c[y],{font:d})*f)&&(h=x);return h!==0&&(g=c.length),{w:h/=p,h:Math.max((g*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,f,d,p){if(n.call(this),!f)throw new Error("No data for PDF table.");var h,g,x,m,v=[],y=[],w=[],b={},N={},S=[],j=[],_=(p=p||{}).autoSize||!1,E=p.printHeaders!==!1,I=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,A=p.margins||Object.assign({width:this.getPageWidth()},t),C=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",M=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=M,this.setFontSize(I),d==null)y=v=Object.keys(f[0]),w=v.map(function(){return"left"});else if(Array.isArray(d)&&Jn(d[0])==="object")for(v=d.map(function(X){return X.name}),y=d.map(function(X){return X.prompt||X.name||""}),w=d.map(function(X){return X.align||"left"}),h=0;h<d.length;h+=1)N[d[h].name]=d[h].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(y=v=d,w=v.map(function(){return"left"}));if(_||Array.isArray(d)&&typeof d[0]=="string")for(h=0;h<v.length;h+=1){for(b[m=v[h]]=f.map(function(X){return X[m]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=b[m],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)S.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[m]=Math.max.apply(null,S)+C+C,S=[]}if(E){var B={};for(h=0;h<v.length;h+=1)B[v[h]]={},B[v[h]].text=y[h],B[v[h]].align=w[h];var K=l.call(this,B,N);j=v.map(function(X){return new i(c,u,N[X],K,B[X].text,void 0,B[X].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var G=d.reduce(function(X,V){return X[V.name]=V.align,X},{});for(h=0;h<f.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:f[h]},this);var Y=l.call(this,f[h],N);for(x=0;x<v.length;x+=1){var q=f[h][v[x]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:x,data:q},this),o.call(this,new i(c,u,N[v[x]],Y,q,h+2,G[v[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var g=c[h];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[h]-f-f)},this).map(function(h){return this.getLineHeightFactor()*h.length*d/p+f+f},this).reduce(function(h,g){return Math.max(h,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){f=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,p.push(f)),f.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(g)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(Ur.API);var yU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},bU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],SS=vU(bU),wU=[100,200,300,400,500,600,700,800,900],$Ae=vU(wU);function _S(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return yU[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof SS[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function TI(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var UAe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},OI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function PI(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function zAe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},UAe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=_S(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+PI(i)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var f=SS[c],d=f<=SS.normal?-1:1,p=TI(u,bU,f,d);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p}(i.stretch,o),o=function(c,u){if(u[c])return u[c];for(var f=yU[c],d=0;d<f.length;++d)if(u[f[d]])return u[f[d]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var f=$Ae[c],d=TI(u,wU,f,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+PI(i)+"'.");return o}function II(e){return e.trimLeft()}function qAe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function HAe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Db,DI,LI,u4=["times"];(function(e){var t,r,n,s,i,o,l,c,u,f=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new o,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new o,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new f}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=T;Object.defineProperty(this,"pdf",{get:function(){return R}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(oe){z=!!oe}});var L=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return L},set:function(oe){L=!!oe}});var H=0;Object.defineProperty(this,"posX",{get:function(){return H},set:function(oe){isNaN(oe)||(H=oe)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(oe){isNaN(oe)||(ne=oe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(oe){var J;typeof oe=="number"?J=[oe,oe,oe,oe]:((J=new Array(4))[0]=oe[0],J[1]=oe.length>=2?oe[1]:J[0],J[2]=oe.length>=3?oe[2]:J[0],J[3]=oe.length>=4?oe[3]:J[1]),u.margin=J}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(oe){se=oe}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(oe){Q=oe}});var re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return re},set:function(oe){re=oe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(oe){oe instanceof f&&(u=oe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(oe){u.path=oe}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(oe){Ae=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var J;J=p(oe),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var J=p(oe);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var ee=null;function Me(oe,J){if(ee===null){var je=function(ce){var ye=[];return Object.keys(ce).forEach(function(me){ce[me].forEach(function(ge){var Ce=null;switch(ge){case"bold":Ce={family:me,weight:"bold"};break;case"italic":Ce={family:me,style:"italic"};break;case"bolditalic":Ce={family:me,weight:"bold",style:"italic"};break;case"":case"normal":Ce={family:me}}Ce!==null&&(Ce.ref={name:me,style:ge},ye.push(Ce))})}),ye}(oe.getFontList());ee=function(ce){for(var ye={},me=0;me<ce.length;++me){var ge=_S(ce[me]),Ce=ge.family,Ue=ge.stretch,Te=ge.style,ue=ge.weight;ye[Ce]=ye[Ce]||{},ye[Ce][Ue]=ye[Ce][Ue]||{},ye[Ce][Ue][Te]=ye[Ce][Ue][Te]||{},ye[Ce][Ue][Te][ue]=ge}return ye}(je.concat(J))}return ee}var ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return ze},set:function(oe){ee=null,ze=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var J;if(this.ctx.font=oe,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var je=J[1],ce=(J[2],J[3]),ye=J[4],me=(J[5],J[6]),ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(ge==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:ge==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var Ce=function(De){var We,Xe,Et=[],wt=De.trim();if(wt==="")return u4;if(wt in OI)return[OI[wt]];for(;wt!=="";){switch(Xe=null,We=(wt=II(wt)).charAt(0)){case'"':case"'":Xe=qAe(wt.substring(1),We);break;default:Xe=HAe(wt)}if(Xe===null||(Et.push(Xe[0]),(wt=II(Xe[1]))!==""&&wt.charAt(0)!==","))return u4;wt=wt.replace(/^,/,"")}return Et}(me);if(this.fontFaces){var Ue=zAe(Me(this.pdf,this.fontFaces),Ce.map(function(De){return{family:De,stretch:"normal",weight:ce,style:je}}));this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var Te="";(ce==="bold"||parseInt(ce,10)>=700||je==="bold")&&(Te="bold"),je==="italic"&&(Te+="italic"),Te.length===0&&(Te="normal");for(var ue="",Oe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},st=0;st<Ce.length;st++){if(this.pdf.internal.getFont(Ce[st],Te,{noFallback:!0,disableWarning:!0})!==void 0){ue=Ce[st];break}if(Te==="bolditalic"&&this.pdf.internal.getFont(Ce[st],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ue=Ce[st],Te="bold";else if(this.pdf.internal.getFont(Ce[st],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ue=Ce[st],Te="normal";break}}if(ue===""){for(var be=0;be<Ce.length;be++)if(Oe[Ce[be]]){ue=Oe[Ce[be]];break}}ue=ue===""?"Times":ue,this.pdf.setFont(ue,Te)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,V.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,V.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){b.call(this,"fill",!1)},d.prototype.stroke=function(){b.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,R){if(isNaN(T)||isNaN(R))throw ia.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(T,R));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(T,R)},d.prototype.closePath=function(){var T=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&Jn(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){T=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(T.x,T.y)},d.prototype.lineTo=function(T,R){if(isNaN(T)||isNaN(R))throw ia.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(T,R));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,R,z,L){if(isNaN(z)||isNaN(L)||isNaN(T)||isNaN(R))throw ia.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var H=this.ctx.transform.applyToPoint(new o(z,L)),ne=this.ctx.transform.applyToPoint(new o(T,R));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},d.prototype.bezierCurveTo=function(T,R,z,L,H,ne){if(isNaN(H)||isNaN(ne)||isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L))throw ia.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new o(H,ne)),Q=this.ctx.transform.applyToPoint(new o(T,R)),re=this.ctx.transform.applyToPoint(new o(z,L));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:re.x,y2:re.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},d.prototype.arc=function(T,R,z,L,H,ne){if(isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L)||isNaN(H))throw ia.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new o(T,R));T=se.x,R=se.y;var Q=this.ctx.transform.applyToPoint(new o(0,z)),re=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(Q.x-re.x,2)+Math.pow(Q.y-re.y,2))}Math.abs(H-L)>=2*Math.PI&&(L=0,H=2*Math.PI),this.path.push({type:"arc",x:T,y:R,radius:z,startAngle:L,endAngle:H,counterclockwise:ne})},d.prototype.arcTo=function(T,R,z,L,H){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,R,z,L){if(isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L))throw ia.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,R),this.lineTo(T+z,R),this.lineTo(T+z,R+L),this.lineTo(T,R+L),this.lineTo(T,R),this.lineTo(T+z,R),this.lineTo(T,R)},d.prototype.fillRect=function(T,R,z,L){if(isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L))throw ia.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var H={};this.lineCap!=="butt"&&(H.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(H.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,R,z,L),this.fill(),H.hasOwnProperty("lineCap")&&(this.lineCap=H.lineCap),H.hasOwnProperty("lineJoin")&&(this.lineJoin=H.lineJoin)}},d.prototype.strokeRect=function(T,R,z,L){if(isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L))throw ia.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(T,R,z,L),this.stroke())},d.prototype.clearRect=function(T,R,z,L){if(isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L))throw ia.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,R,z,L))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var L=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=L}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(R),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(T){var R,z,L,H;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))R=0,z=0,L=0,H=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(ne!==null)R=parseInt(ne[1]),z=parseInt(ne[2]),L=parseInt(ne[3]),H=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)R=parseInt(ne[1]),z=parseInt(ne[2]),L=parseInt(ne[3]),H=parseFloat(ne[4]);else{if(H=1,typeof T=="string"&&T.charAt(0)!=="#"){var se=new fU(T);T=se.ok?se.toHex():"#000000"}T.length===4?(R=T.substring(1,2),R+=R,z=T.substring(2,3),z+=z,L=T.substring(3,4),L+=L):(R=T.substring(1,3),z=T.substring(3,5),L=T.substring(5,7)),R=parseInt(R,16),z=parseInt(z,16),L=parseInt(L,16)}}return{r:R,g:z,b:L,a:H,style:T}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,R,z,L){if(isNaN(R)||isNaN(z)||typeof T!="string")throw ia.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(L=isNaN(L)?void 0:L,!h.call(this)){var H=Y(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;C.call(this,{text:T,x:R,y:z,scale:ne,angle:H,align:this.textAlign,maxWidth:L})}},d.prototype.strokeText=function(T,R,z,L){if(isNaN(R)||isNaN(z)||typeof T!="string")throw ia.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){L=isNaN(L)?void 0:L;var H=Y(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;C.call(this,{text:T,x:R,y:z,scale:ne,renderingMode:"stroke",angle:H,align:this.textAlign,maxWidth:L})}},d.prototype.measureText=function(T){if(typeof T!="string")throw ia.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,z=this.pdf.internal.scaleFactor,L=R.internal.getFontSize(),H=R.getStringUnitWidth(T)*L/R.internal.scaleFactor,ne=function(se){var Q=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this};return new ne({width:H*=Math.round(96*z/72*1e4)/1e4})},d.prototype.scale=function(T,R){if(isNaN(T)||isNaN(R))throw ia.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(T,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.rotate=function(T){if(isNaN(T))throw ia.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},d.prototype.translate=function(T,R){if(isNaN(T)||isNaN(R))throw ia.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,T,R);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.transform=function(T,R,z,L,H,ne){if(isNaN(T)||isNaN(R)||isNaN(z)||isNaN(L)||isNaN(H)||isNaN(ne))throw ia.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new c(T,R,z,L,H,ne);this.ctx.transform=this.ctx.transform.multiply(se)},d.prototype.setTransform=function(T,R,z,L,H,ne){T=isNaN(T)?1:T,R=isNaN(R)?0:R,z=isNaN(z)?0:z,L=isNaN(L)?1:L,H=isNaN(H)?0:H,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(T,R,z,L,H,ne)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,R,z,L,H,ne,se,Q,re){var Ae=this.pdf.getImageProperties(T),ee=1,Me=1,ze=1,oe=1;L!==void 0&&Q!==void 0&&(ze=Q/L,oe=re/H,ee=Ae.width/L*Q/L,Me=Ae.height/H*re/H),ne===void 0&&(ne=R,se=z,R=0,z=0),L!==void 0&&Q===void 0&&(Q=L,re=H),L===void 0&&Q===void 0&&(Q=Ae.width,re=Ae.height);for(var J,je=this.ctx.transform.decompose(),ce=Y(je.rotate.shx),ye=new c,me=(ye=(ye=(ye=ye.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new l(ne-R*ze,se-z*oe,L*ee,H*Me)),ge=m.call(this,me),Ce=[],Ue=0;Ue<ge.length;Ue+=1)Ce.indexOf(ge[Ue])===-1&&Ce.push(ge[Ue]);if(w(Ce),this.autoPaging)for(var Te=Ce[0],ue=Ce[Ce.length-1],Oe=Te;Oe<ue+1;Oe++){this.pdf.setPage(Oe);var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],be=Oe===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Oe===1?0:De+(Oe-2)*We;if(this.ctx.clip_path.length!==0){var Et=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(J,this.posX+this.margin[3],-Xe+be+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Et}var wt=JSON.parse(JSON.stringify(me));wt=y([wt],this.posX+this.margin[3],-Xe+be+this.ctx.prevPageLastElemOffset)[0];var Ve=(Oe>Te||Oe<ue)&&x.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,We,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",wt.x,wt.y,wt.w,wt.h,null,null,ce),Ve&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",me.x,me.y,me.w,me.h,null,null,ce)};var m=function(T,R,z){var L=[];R=R||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var H=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":L.push(Math.floor((T.y+H)/z)+1);break;case"arc":L.push(Math.floor((T.y+H-T.radius)/z)+1),L.push(Math.floor((T.y+H+T.radius)/z)+1);break;case"qct":var ne=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);L.push(Math.floor((ne.y+H)/z)+1),L.push(Math.floor((ne.y+ne.h+H)/z)+1);break;case"bct":var se=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);L.push(Math.floor((se.y+H)/z)+1),L.push(Math.floor((se.y+se.h+H)/z)+1);break;case"rect":L.push(Math.floor((T.y+H)/z)+1),L.push(Math.floor((T.y+T.h+H)/z)+1)}for(var Q=0;Q<L.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<L[Q];)v.call(this);return L},v=function(){var T=this.fillStyle,R=this.strokeStyle,z=this.font,L=this.lineCap,H=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=R,this.font=z,this.lineCap=L,this.lineWidth=H,this.lineJoin=ne},y=function(T,R,z){for(var L=0;L<T.length;L++)switch(T[L].type){case"bct":T[L].x2+=R,T[L].y2+=z;case"qct":T[L].x1+=R,T[L].y1+=z;case"mt":case"lt":case"arc":default:T[L].x+=R,T[L].y+=z}return T},w=function(T){return T.sort(function(R,z){return R-z})},b=function(T,R){for(var z,L,H=this.fillStyle,ne=this.strokeStyle,se=this.lineCap,Q=this.lineWidth,re=Math.abs(Q*this.ctx.transform.scaleX),Ae=this.lineJoin,ee=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),ze=[],oe=0;oe<Me.length;oe++)if(Me[oe].x!==void 0)for(var J=m.call(this,Me[oe]),je=0;je<J.length;je+=1)ze.indexOf(J[je])===-1&&ze.push(J[je]);for(var ce=0;ce<ze.length;ce++)for(;this.pdf.internal.getNumberOfPages()<ze[ce];)v.call(this);if(w(ze),this.autoPaging)for(var ye=ze[0],me=ze[ze.length-1],ge=ye;ge<me+1;ge++){this.pdf.setPage(ge),this.fillStyle=H,this.strokeStyle=ne,this.lineCap=se,this.lineWidth=re,this.lineJoin=Ae;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=ge===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=ge===1?0:Te+(ge-2)*ue;if(this.ctx.clip_path.length!==0){var st=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(z,this.posX+this.margin[3],-Oe+Ue+this.ctx.prevPageLastElemOffset),N.call(this,T,!0),this.path=st}if(L=JSON.parse(JSON.stringify(ee)),this.path=y(L,this.posX+this.margin[3],-Oe+Ue+this.ctx.prevPageLastElemOffset),R===!1||ge===0){var be=(ge>ye||ge<me)&&x.call(this);be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,ue,null).clip().discardPath()),N.call(this,T,R),be&&this.pdf.restoreGraphicsState()}this.lineWidth=Q}else this.lineWidth=re,N.call(this,T,R),this.lineWidth=Q;this.path=ee},N=function(T,R){if((T!=="stroke"||R||!g.call(this))&&(T==="stroke"||R||!h.call(this))){for(var z,L,H=[],ne=this.path,se=0;se<ne.length;se++){var Q=ne[se];switch(Q.type){case"begin":H.push({begin:!0});break;case"close":H.push({close:!0});break;case"mt":H.push({start:Q,deltas:[],abs:[]});break;case"lt":var re=H.length;if(ne[se-1]&&!isNaN(ne[se-1].x)&&(z=[Q.x-ne[se-1].x,Q.y-ne[se-1].y],re>0)){for(;re>=0;re--)if(H[re-1].close!==!0&&H[re-1].begin!==!0){H[re-1].deltas.push(z),H[re-1].abs.push(Q);break}}break;case"bct":z=[Q.x1-ne[se-1].x,Q.y1-ne[se-1].y,Q.x2-ne[se-1].x,Q.y2-ne[se-1].y,Q.x-ne[se-1].x,Q.y-ne[se-1].y],H[H.length-1].deltas.push(z);break;case"qct":var Ae=ne[se-1].x+2/3*(Q.x1-ne[se-1].x),ee=ne[se-1].y+2/3*(Q.y1-ne[se-1].y),Me=Q.x+2/3*(Q.x1-Q.x),ze=Q.y+2/3*(Q.y1-Q.y),oe=Q.x,J=Q.y;z=[Ae-ne[se-1].x,ee-ne[se-1].y,Me-ne[se-1].x,ze-ne[se-1].y,oe-ne[se-1].x,J-ne[se-1].y],H[H.length-1].deltas.push(z);break;case"arc":H.push({deltas:[],abs:[],arc:!0}),Array.isArray(H[H.length-1].abs)&&H[H.length-1].abs.push(Q)}}L=R?null:T==="stroke"?"stroke":"fill";for(var je=!1,ce=0;ce<H.length;ce++)if(H[ce].arc)for(var ye=H[ce].abs,me=0;me<ye.length;me++){var ge=ye[me];ge.type==="arc"?_.call(this,ge.x,ge.y,ge.radius,ge.startAngle,ge.endAngle,ge.counterclockwise,void 0,R,!je):F.call(this,ge.x,ge.y),je=!0}else if(H[ce].close===!0)this.pdf.internal.out("h"),je=!1;else if(H[ce].begin!==!0){var Ce=H[ce].start.x,Ue=H[ce].start.y;M.call(this,H[ce].deltas,Ce,Ue),je=!0}L&&E.call(this,L),R&&I.call(this)}},S=function(T){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-z;case"top":return T+R-z;case"hanging":return T+R-2*z;case"middle":return T+R/2-z;case"ideographic":return T;case"alphabetic":default:return T}},j=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(R,z){this.colorStops.push([R,z])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(T,R,z,L,H,ne,se,Q,re){for(var Ae=K.call(this,z,L,H,ne),ee=0;ee<Ae.length;ee++){var Me=Ae[ee];ee===0&&(re?A.call(this,Me.x1+T,Me.y1+R):F.call(this,Me.x1+T,Me.y1+R)),B.call(this,T,R,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}Q?I.call(this):E.call(this,se)},E=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(T,R){this.pdf.internal.out(r(T)+" "+n(R)+" m")},C=function(T){var R;switch(T.align){case"right":case"end":R="right";break;case"center":R="center";break;case"left":case"start":default:R="left"}var z=this.pdf.getTextDimensions(T.text),L=S.call(this,T.y),H=j.call(this,L)-z.h,ne=this.ctx.transform.applyToPoint(new o(T.x,L)),se=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var re,Ae,ee,Me=this.ctx.transform.applyToRectangle(new l(T.x,L,z.w,z.h)),ze=Q.applyToRectangle(new l(T.x,H,z.w,z.h)),oe=m.call(this,ze),J=[],je=0;je<oe.length;je+=1)J.indexOf(oe[je])===-1&&J.push(oe[je]);if(w(J),this.autoPaging)for(var ce=J[0],ye=J[J.length-1],me=ce;me<ye+1;me++){this.pdf.setPage(me);var ge=me===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Te=Ue-this.margin[0],ue=this.pdf.internal.pageSize.width-this.margin[1],Oe=ue-this.margin[3],st=me===1?0:Ce+(me-2)*Te;if(this.ctx.clip_path.length!==0){var be=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(re,this.posX+this.margin[3],-1*st+ge),N.call(this,"fill",!0),this.path=be}var De=y([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-st+ge+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*T.scale),ee=this.lineWidth,this.lineWidth=ee*T.scale);var We=this.autoPaging!=="text";if(We||De.y+De.h<=Ue){if(We||De.y>=ge&&De.x<=ue){var Xe=We?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||ue-De.x)[0],Et=y([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-st+ge+this.ctx.prevPageLastElemOffset)[0],wt=We&&(me>ce||me<ye)&&x.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,Te,null).clip().discardPath()),this.pdf.text(Xe,Et.x,Et.y,{angle:T.angle,align:R,renderingMode:T.renderingMode}),wt&&this.pdf.restoreGraphicsState()}}else De.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-De.y);T.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=ee)}else T.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*T.scale),ee=this.lineWidth,this.lineWidth=ee*T.scale),this.pdf.text(T.text,ne.x+this.posX,ne.y+this.posY,{angle:T.angle,align:R,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=ee)},F=function(T,R,z,L){z=z||0,L=L||0,this.pdf.internal.out(r(T+z)+" "+n(R+L)+" l")},M=function(T,R,z){return this.pdf.lines(T,R,z,null,null)},B=function(T,R,z,L,H,ne,se,Q){this.pdf.internal.out([t(s(z+T)),t(i(L+R)),t(s(H+T)),t(i(ne+R)),t(s(se+T)),t(i(Q+R)),"c"].join(" "))},K=function(T,R,z,L){for(var H=2*Math.PI,ne=Math.PI/2;R>z;)R-=H;var se=Math.abs(z-R);se<H&&L&&(se=H-se);for(var Q=[],re=L?-1:1,Ae=R;se>1e-5;){var ee=Ae+re*Math.min(se,ne);Q.push(G.call(this,T,Ae,ee)),se-=Math.abs(ee-Ae),Ae=ee}return Q},G=function(T,R,z){var L=(z-R)/2,H=T*Math.cos(L),ne=T*Math.sin(L),se=H,Q=-ne,re=se*se+Q*Q,Ae=re+se*H+Q*ne,ee=4/3*(Math.sqrt(2*re*Ae)-Ae)/(se*ne-Q*H),Me=se-ee*Q,ze=Q+ee*se,oe=Me,J=-ze,je=L+R,ce=Math.cos(je),ye=Math.sin(je);return{x1:T*Math.cos(R),y1:T*Math.sin(R),x2:Me*ce-ze*ye,y2:Me*ye+ze*ce,x3:oe*ce-J*ye,y3:oe*ye+J*ce,x4:T*Math.cos(z),y4:T*Math.sin(z)}},Y=function(T){return 180*T/Math.PI},q=function(T,R,z,L,H,ne){var se=T+.5*(z-T),Q=R+.5*(L-R),re=H+.5*(z-H),Ae=ne+.5*(L-ne),ee=Math.min(T,H,se,re),Me=Math.max(T,H,se,re),ze=Math.min(R,ne,Q,Ae),oe=Math.max(R,ne,Q,Ae);return new l(ee,ze,Me-ee,oe-ze)},X=function(T,R,z,L,H,ne,se,Q){var re,Ae,ee,Me,ze,oe,J,je,ce,ye,me,ge,Ce,Ue,Te=z-T,ue=L-R,Oe=H-z,st=ne-L,be=se-H,De=Q-ne;for(Ae=0;Ae<41;Ae++)ce=(J=(ee=T+(re=Ae/40)*Te)+re*((ze=z+re*Oe)-ee))+re*(ze+re*(H+re*be-ze)-J),ye=(je=(Me=R+re*ue)+re*((oe=L+re*st)-Me))+re*(oe+re*(ne+re*De-oe)-je),Ae==0?(me=ce,ge=ye,Ce=ce,Ue=ye):(me=Math.min(me,ce),ge=Math.min(ge,ye),Ce=Math.max(Ce,ce),Ue=Math.max(Ue,ye));return new l(Math.round(me),Math.round(ge),Math.round(Ce-me),Math.round(Ue-ge))},V=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,R,z=(T=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:R}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(Ur.API),function(e){var t=function(i){var o,l,c,u,f,d,p,h,g,x;for(l=[],c=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(d=(f=((f=((f=((f=(f-(x=f%85))/85)-(g=f%85))/85)-(h=f%85))/85)-(p=f%85))/85)%85,l.push(d+33,p+33,h+33,g+33,x+33)):l.push(122);return function(m,v){for(var y=v;y>0;y--)m.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,u,f,d=String,p="length",h=255,g="charCodeAt",x="slice",m="replace";for(i[x](-2),i=i[x](0,-2)[m](/\s/g,"")[m]("z","!!!!!"),c=[],u=0,f=(i+=o="uuuuu"[x](i[p]%5||5))[p];f>u;u+=5)l=52200625*(i[g](u)-33)+614125*(i[g](u+1)-33)+7225*(i[g](u+2)-33)+85*(i[g](u+3)-33)+(i[g](u+4)-33),c.push(h&l>>24,h&l>>16,h&l>>8,h&l);return function(v,y){for(var w=y;w>0;w--)v.pop()}(c,o[p]),d.fromCharCode.apply(d,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=bS(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Ur.API),function(e){e.loadFile=function(t,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,f){var d=new XMLHttpRequest,p=0,h=function(g){var x=g.length,m=[],v=String.fromCharCode;for(p=0;p<x;p+=1)m.push(v(255&g.charCodeAt(p)));return m.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?f(h(this.responseText)):f(void 0)}),d.send(null),u&&d.status===200)return h(d.responseText)}(s,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Ur.API),function(e){function t(){return(zr.html2canvas?Promise.resolve(zr.html2canvas):I2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(zr.DOMPurify?Promise.resolve(zr.DOMPurify):I2(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Jn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,f){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(c(p,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var h=u[p],g=h.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,h.ref.name,h.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),l(this.prop.container,d)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,f).then(function(d){return c.updateProgress(1),d})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(u,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ur.getPageSize=function(o,l,c){if(Jn(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var h,g=0,x=0;if(p.hasOwnProperty(d))g=p[d][1]/f,x=p[d][0]/f;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(h=x,x=g,g=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(h=x,x=g,g=h)}return{width:x,height:g,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(_S):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Ur.API),Ur.API.addJS=function(e){return LI=e,this.internal.events.subscribe("postPutResources",function(){Db=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Db+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),DI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+LI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Db!==void 0&&DI!==void 0&&this.internal.out("/Names <</JavaScript "+Db+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var d=r.internal.newObject();f.push(d);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Ur.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(d){for(var p,h=256*d.charCodeAt(4)+d.charCodeAt(5),g=d.length,x={width:0,height:0,numcomponents:1},m=4;m<g;m+=2){if(m+=h,t.indexOf(d.charCodeAt(m+1))!==-1){p=256*d.charCodeAt(m+5)+d.charCodeAt(m+6),x={width:256*d.charCodeAt(m+7)+d.charCodeAt(m+8),height:p,numcomponents:d.charCodeAt(m+9)};break}h=256*d.charCodeAt(m+2)+d.charCodeAt(m+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:s}}return f}}(Ur.API);var Wp,Lb,FI,MI,RI,WAe=function(){var e,t,r;function n(i){var o,l,c,u,f,d,p,h,g,x,m,v,y,w;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),g=(function(){var b,N;for(N=[],b=0;b<4;++b)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*f/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),i=(d!=null?d.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(y=0;0<=x?y<x:y>x;0<=x?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(m=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,m.slice(0,p)),this.text[h]=String.fromCharCode.apply(String,m.slice(p+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(d,p,h,g){var x,m,v,y,w,b,N,S,j,_,E,I,A,C,F,M,B,K,G,Y,q,X=Math.ceil((u.width-d)/h),V=Math.ceil((u.height-p)/g),T=u.width==X&&u.height==V;for(C=o*X,I=T?l:new Uint8Array(C*V),b=i.length,A=0,m=0;A<V&&c<b;){switch(i[c++]){case 0:for(y=B=0;B<C;y=B+=1)I[m++]=i[c++];break;case 1:for(y=K=0;K<C;y=K+=1)x=i[c++],w=y<o?0:I[m-o],I[m++]=(x+w)%256;break;case 2:for(y=G=0;G<C;y=G+=1)x=i[c++],v=(y-y%o)/o,F=A&&I[(A-1)*C+v*o+y%o],I[m++]=(F+x)%256;break;case 3:for(y=Y=0;Y<C;y=Y+=1)x=i[c++],v=(y-y%o)/o,w=y<o?0:I[m-o],F=A&&I[(A-1)*C+v*o+y%o],I[m++]=(x+Math.floor((w+F)/2))%256;break;case 4:for(y=q=0;q<C;y=q+=1)x=i[c++],v=(y-y%o)/o,w=y<o?0:I[m-o],A===0?F=M=0:(F=I[(A-1)*C+v*o+y%o],M=v&&I[(A-1)*C+(v-1)*o+y%o]),N=w+F-M,S=Math.abs(N-w),_=Math.abs(N-F),E=Math.abs(N-M),j=S<=_&&S<=E?w:_<=E?F:M,I[m++]=(x+j)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!T){var R=((p+A*g)*u.width+d)*o,z=A*C;for(y=0;y<X;y+=1){for(var L=0;L<o;L+=1)l[R++]=I[z++];R+=(h-1)*o}}A++}}return i=jAe(i),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,u,f,d,p,h;for(l=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=d=0,p=l.length;d<p;o=d+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(h=f[i++])!=null?h:255;return u},n.prototype.copyToImageData=function(i,o){var l,c,u,f,d,p,h,g,x,m,v;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=i.data||i).length,d=x||o,f=p=0,c===1)for(;f<g;)h=x?4*o[f/4]:p,m=d[h++],u[f++]=m,u[f++]=m,u[f++]=m,u[f++]=l?d[h++]:255,p=h;else for(;f<g;)h=x?4*o[f/4]:p,u[f++]=d[h++],u[f++]=d[h++],u[f++]=d[h++],u[f++]=l?d[h++]:255,p=h},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(zr)==="[object Window]"){try{t=zr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,u,f,d,p,h;if(this.animation){for(h=[],l=f=0,d=(p=this.animation.frames).length;f<d;l=++f)o=p[l],c=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,h.push(o.image=e(c));return h}},n.prototype.renderFrame=function(i,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,u,f,d,p=this;return l=0,d=this.animation,u=d.numFrames,c=d.frames,f=d.numPlays,(o=function(){var h,g;if(h=l++%u,g=c[h],p.renderFrame(i,h),u>1&&l/u<f)return p.animation._timeout=setTimeout(o,g.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function VAe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,f=[],d=0,p=null,h=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];d=e[t++]|e[t++]<<8,p=e[t++],!(1&x)&&(p=null),h=x>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,b=e[t++],N=b>>6&1,S=1<<(7&b)+1,j=l,_=c,E=!1;b>>7&&(E=!0,j=t,_=S,t+=3*S);var I=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}f.push({x:m,y:v,width:y,height:w,has_local_palette:E,palette_offset:j,palette_size:_,data_offset:I,data_length:t-I,transparent_index:p,interlaced:!!N,delay:d,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return g},this.frameInfo=function(C){if(C<0||C>=f.length)throw new Error("Frame index out of range.");return f[C]},this.decodeAndBlitFrameBGRA=function(C,F){var M=this.frameInfo(C),B=M.width*M.height,K=new Uint8Array(B);BI(e,M.data_offset,K,B);var G=M.palette_offset,Y=M.transparent_index;Y===null&&(Y=256);var q=M.width,X=r-q,V=q,T=4*(M.y*r+M.x),R=4*((M.y+M.height)*r+M.x),z=T,L=4*X;M.interlaced===!0&&(L+=4*r*7);for(var H=8,ne=0,se=K.length;ne<se;++ne){var Q=K[ne];if(V===0&&(V=q,(z+=L)>=R&&(L=4*X+4*r*(H-1),z=T+(q+X)*(H<<1),H>>=1)),Q===Y)z+=4;else{var re=e[G+3*Q],Ae=e[G+3*Q+1],ee=e[G+3*Q+2];F[z++]=ee,F[z++]=Ae,F[z++]=re,F[z++]=255}--V}},this.decodeAndBlitFrameRGBA=function(C,F){var M=this.frameInfo(C),B=M.width*M.height,K=new Uint8Array(B);BI(e,M.data_offset,K,B);var G=M.palette_offset,Y=M.transparent_index;Y===null&&(Y=256);var q=M.width,X=r-q,V=q,T=4*(M.y*r+M.x),R=4*((M.y+M.height)*r+M.x),z=T,L=4*X;M.interlaced===!0&&(L+=4*r*7);for(var H=8,ne=0,se=K.length;ne<se;++ne){var Q=K[ne];if(V===0&&(V=q,(z+=L)>=R&&(L=4*X+4*r*(H-1),z=T+(q+X)*(H<<1),H>>=1)),Q===Y)z+=4;else{var re=e[G+3*Q],Ae=e[G+3*Q+1],ee=e[G+3*Q+2];F[z++]=re,F[z++]=Ae,F[z++]=ee,F[z++]=255}--V}}}function BI(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,u=(1<<c)-1,f=0,d=0,p=0,h=e[t++],g=new Int32Array(4096),x=null;;){for(;f<16&&h!==0;)d|=e[t++]<<f,f+=8,h===1?h=e[t++]:--h;if(f<c)break;var m=d&u;if(d>>=c,f-=c,m!==i){if(m===o)break;for(var v=m<l?m:x,y=0,w=v;w>i;)w=g[w]>>8,++y;var b=w;if(p+y+(v!==m?1:0)>n)return void ia.log("Warning, gif stream longer than expected.");r[p++]=b;var N=p+=y;for(v!==m&&(r[p++]=b),w=v;y--;)w=g[w],r[--N]=255&w,w>>=8;x!==null&&l<4096&&(g[l++]=x<<8|b,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=m}else l=o+1,u=(1<<(c=s+1))-1,x=null}return p!==n&&ia.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function d4(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(64),d=new Array(65535),p=new Array(65535),h=new Array(64),g=new Array(64),x=[],m=0,v=7,y=new Array(64),w=new Array(64),b=new Array(64),N=new Array(256),S=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(T,R){for(var z=0,L=0,H=new Array,ne=1;ne<=16;ne++){for(var se=1;se<=T[ne];se++)H[R[L]]=[],H[R[L]][0]=z,H[R[L]][1]=ne,L++,z++;z*=2}return H}function G(T){for(var R=T[0],z=T[1]-1;z>=0;)R&1<<z&&(m|=1<<v),z--,--v<0&&(m==255?(Y(255),Y(0)):Y(m),v=7,m=0)}function Y(T){x.push(T)}function q(T){Y(T>>8&255),Y(255&T)}function X(T,R,z,L,H){for(var ne,se=H[0],Q=H[240],re=function(ye,me){var ge,Ce,Ue,Te,ue,Oe,st,be,De,We,Xe=0;for(De=0;De<8;++De){ge=ye[Xe],Ce=ye[Xe+1],Ue=ye[Xe+2],Te=ye[Xe+3],ue=ye[Xe+4],Oe=ye[Xe+5],st=ye[Xe+6];var Et=ge+(be=ye[Xe+7]),wt=ge-be,Ve=Ce+st,xt=Ce-st,Tt=Ue+Oe,he=Ue-Oe,Ge=Te+ue,kt=Te-ue,gt=Et+Ge,Vt=Et-Ge,_r=Ve+Tt,lr=Ve-Tt;ye[Xe]=gt+_r,ye[Xe+4]=gt-_r;var Gt=.707106781*(lr+Vt);ye[Xe+2]=Vt+Gt,ye[Xe+6]=Vt-Gt;var rr=.382683433*((gt=kt+he)-(lr=xt+wt)),ir=.5411961*gt+rr,pr=1.306562965*lr+rr,Nr=.707106781*(_r=he+xt),jr=wt+Nr,Dt=wt-Nr;ye[Xe+5]=Dt+ir,ye[Xe+3]=Dt-ir,ye[Xe+1]=jr+pr,ye[Xe+7]=jr-pr,Xe+=8}for(Xe=0,De=0;De<8;++De){ge=ye[Xe],Ce=ye[Xe+8],Ue=ye[Xe+16],Te=ye[Xe+24],ue=ye[Xe+32],Oe=ye[Xe+40],st=ye[Xe+48];var Sr=ge+(be=ye[Xe+56]),Gr=ge-be,cn=Ce+st,qe=Ce-st,mt=Ue+Oe,le=Ue-Oe,_e=Te+ue,we=Te-ue,Se=Sr+_e,ae=Sr-_e,pe=cn+mt,Re=cn-mt;ye[Xe]=Se+pe,ye[Xe+32]=Se-pe;var Ye=.707106781*(Re+ae);ye[Xe+16]=ae+Ye,ye[Xe+48]=ae-Ye;var Je=.382683433*((Se=we+le)-(Re=qe+Gr)),Qe=.5411961*Se+Je,Be=1.306562965*Re+Je,ke=.707106781*(pe=le+qe),He=Gr+ke,at=Gr-ke;ye[Xe+40]=at+Qe,ye[Xe+24]=at-Qe,ye[Xe+8]=He+Be,ye[Xe+56]=He-Be,Xe++}for(De=0;De<64;++De)We=ye[De]*me[De],h[De]=We>0?We+.5|0:We-.5|0;return h}(T,R),Ae=0;Ae<64;++Ae)g[j[Ae]]=re[Ae];var ee=g[0]-z;z=g[0],ee==0?G(L[0]):(G(L[p[ne=32767+ee]]),G(d[ne]));for(var Me=63;Me>0&&g[Me]==0;)Me--;if(Me==0)return G(se),z;for(var ze,oe=1;oe<=Me;){for(var J=oe;g[oe]==0&&oe<=Me;)++oe;var je=oe-J;if(je>=16){ze=je>>4;for(var ce=1;ce<=ze;++ce)G(Q);je&=15}ne=32767+g[oe],G(H[(je<<4)+p[ne]]),G(d[ne]),oe++}return Me!=63&&G(se),z}function V(T){T=Math.min(Math.max(T,1),100),i!=T&&(function(R){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],L=0;L<64;L++){var H=o((z[L]*R+50)/100);H=Math.min(Math.max(H,1),255),l[j[L]]=H}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var Q=o((ne[se]*R+50)/100);Q=Math.min(Math.max(Q,1),255),c[j[se]]=Q}for(var re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,ee=0;ee<8;ee++)for(var Me=0;Me<8;Me++)u[Ae]=1/(l[j[Ae]]*re[ee]*re[Me]*8),f[Ae]=1/(c[j[Ae]]*re[ee]*re[Me]*8),Ae++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),i=T)}this.encode=function(T,R){R&&V(R),x=new Array,m=0,v=7,q(65496),q(65504),q(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),q(1),q(1),Y(0),Y(0),function(){q(65499),q(132),Y(0);for(var Ce=0;Ce<64;Ce++)Y(l[Ce]);Y(1);for(var Ue=0;Ue<64;Ue++)Y(c[Ue])}(),function(Ce,Ue){q(65472),q(17),Y(8),q(Ue),q(Ce),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(T.width,T.height),function(){q(65476),q(418),Y(0);for(var Ce=0;Ce<16;Ce++)Y(_[Ce+1]);for(var Ue=0;Ue<=11;Ue++)Y(E[Ue]);Y(16);for(var Te=0;Te<16;Te++)Y(I[Te+1]);for(var ue=0;ue<=161;ue++)Y(A[ue]);Y(1);for(var Oe=0;Oe<16;Oe++)Y(C[Oe+1]);for(var st=0;st<=11;st++)Y(F[st]);Y(17);for(var be=0;be<16;be++)Y(M[be+1]);for(var De=0;De<=161;De++)Y(B[De])}(),q(65498),q(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var z=0,L=0,H=0;m=0,v=7,this.encode.displayName="_encode_";for(var ne,se,Q,re,Ae,ee,Me,ze,oe,J=T.data,je=T.width,ce=T.height,ye=4*je,me=0;me<ce;){for(ne=0;ne<ye;){for(Ae=ye*me+ne,Me=-1,ze=0,oe=0;oe<64;oe++)ee=Ae+(ze=oe>>3)*ye+(Me=4*(7&oe)),me+ze>=ce&&(ee-=ye*(me+1+ze-ce)),ne+Me>=ye&&(ee-=ne+Me-ye+4),se=J[ee++],Q=J[ee++],re=J[ee++],y[oe]=(S[se]+S[Q+256>>0]+S[re+512>>0]>>16)-128,w[oe]=(S[se+768>>0]+S[Q+1024>>0]+S[re+1280>>0]>>16)-128,b[oe]=(S[se+1280>>0]+S[Q+1536>>0]+S[re+1792>>0]>>16)-128;z=X(y,u,z,t,n),L=X(w,f,L,r,s),H=X(b,f,H,r,s),ne+=32}me+=8}if(v>=0){var ge=[];ge[1]=v+1,ge[0]=(1<<v+1)-1,G(ge)}return q(65497),new Uint8Array(x)},e=e||50,function(){for(var T=String.fromCharCode,R=0;R<256;R++)N[R]=T(R)}(),t=K(_,E),r=K(C,F),n=K(I,A),s=K(M,B),function(){for(var T=1,R=2,z=1;z<=15;z++){for(var L=T;L<R;L++)p[32767+L]=z,d[32767+L]=[],d[32767+L][1]=z,d[32767+L][0]=L;for(var H=-(R-1);H<=-T;H++)p[32767+H]=z,d[32767+H]=[],d[32767+H][1]=z,d[32767+H][0]=R-1+H;T<<=1,R<<=1}}(),function(){for(var T=0;T<256;T++)S[T]=19595*T,S[T+256>>0]=38470*T,S[T+512>>0]=7471*T+32768,S[T+768>>0]=-11059*T,S[T+1024>>0]=-21709*T,S[T+1280>>0]=32768*T+8421375,S[T+1536>>0]=-27439*T,S[T+1792>>0]=-5329*T}(),V(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Fc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $I(e){function t(_){if(!_)throw Error("assert :P")}function r(_,E,I){for(var A=0;4>A;A++)if(_[E+A]!=I.charCodeAt(A))return!0;return!1}function n(_,E,I,A,C){for(var F=0;F<C;F++)_[E+F]=I[A+F]}function s(_,E,I,A){for(var C=0;C<A;C++)_[E+C]=I}function i(_){return new Int32Array(_)}function o(_,E){for(var I=[],A=0;A<_;A++)I.push(new E);return I}function l(_,E){var I=[];return function A(C,F,M){for(var B=M[F],K=0;K<B&&(C.push(M.length>F+1?[]:new E),!(M.length<F+1));K++)A(C[K],F+1,M)}(I,0,_),I}var c=function(){var _=this;function E(k,P){for(var W=1<<P-1>>>0;k&W;)W>>>=1;return W?(k&W-1)+W:k}function I(k,P,W,te,de){t(!(te%W));do k[P+(te-=W)]=de;while(0<te)}function A(k,P,W,te,de){if(t(2328>=de),512>=de)var xe=i(512);else if((xe=i(de))==null)return 0;return function(ve,Ne,Ee,Ie,et,ut){var dt,it,Ot=Ne,yt=1<<Ee,tt=i(16),rt=i(16);for(t(et!=0),t(Ie!=null),t(ve!=null),t(0<Ee),it=0;it<et;++it){if(15<Ie[it])return 0;++tt[Ie[it]]}if(tt[0]==et)return 0;for(rt[1]=0,dt=1;15>dt;++dt){if(tt[dt]>1<<dt)return 0;rt[dt+1]=rt[dt]+tt[dt]}for(it=0;it<et;++it)dt=Ie[it],0<Ie[it]&&(ut[rt[dt]++]=it);if(rt[15]==1)return(Ie=new C).g=0,Ie.value=ut[0],I(ve,Ot,1,yt,Ie),yt;var At,It=-1,Pt=yt-1,ar=0,Xt=1,Or=1,sr=1<<Ee;for(it=0,dt=1,et=2;dt<=Ee;++dt,et<<=1){if(Xt+=Or<<=1,0>(Or-=tt[dt]))return 0;for(;0<tt[dt];--tt[dt])(Ie=new C).g=dt,Ie.value=ut[it++],I(ve,Ot+ar,et,sr,Ie),ar=E(ar,dt)}for(dt=Ee+1,et=2;15>=dt;++dt,et<<=1){if(Xt+=Or<<=1,0>(Or-=tt[dt]))return 0;for(;0<tt[dt];--tt[dt]){if(Ie=new C,(ar&Pt)!=It){for(Ot+=sr,At=1<<(It=dt)-Ee;15>It&&!(0>=(At-=tt[It]));)++It,At<<=1;yt+=sr=1<<(At=It-Ee),ve[Ne+(It=ar&Pt)].g=At+Ee,ve[Ne+It].value=Ot-Ne-It}Ie.g=dt-Ee,Ie.value=ut[it++],I(ve,Ot+(ar>>Ee),et,sr,Ie),ar=E(ar,dt)}}return Xt!=2*rt[15]-1?0:yt}(k,P,W,te,de,xe)}function C(){this.value=this.g=0}function F(){this.value=this.g=0}function M(){this.G=o(5,C),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Za,F)}function B(k,P,W,te){t(k!=null),t(P!=null),t(2147483648>te),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=P,k.pa=W,k.Jd=P,k.Yc=W+te,k.Zc=4<=te?W+te-4+1:W,ne(k)}function K(k,P){for(var W=0;0<P--;)W|=Q(k,128)<<P;return W}function G(k,P){var W=K(k,P);return se(k)?-W:W}function Y(k,P,W,te){var de,xe=0;for(t(k!=null),t(P!=null),t(4294967288>te),k.Sb=te,k.Ra=0,k.u=0,k.h=0,4<te&&(te=4),de=0;de<te;++de)xe+=P[W+de]<<8*de;k.Ra=xe,k.bb=te,k.oa=P,k.pa=W}function q(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<Pa-8>>>0,++k.bb,k.u-=8;z(k)&&(k.h=1,k.u=0)}function X(k,P){if(t(0<=P),!k.h&&P<=ol){var W=R(k)&ao[P];return k.u+=P,q(k),W}return k.h=1,k.u=0}function V(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(k){return k.Ra>>>(k.u&Pa-1)>>>0}function z(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>Pa}function L(k,P){k.u=P,k.h=z(k)}function H(k){k.u>=Zu&&(t(k.u>=Zu),q(k))}function ne(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function se(k){return K(k,1)}function Q(k,P){var W=k.Ca;0>k.b&&ne(k);var te=k.b,de=W*P>>>8,xe=(k.I>>>te>de)+0;for(xe?(W-=de,k.I-=de+1<<te>>>0):W=de+1,te=W,de=0;256<=te;)de+=8,te>>=8;return te=7^de+Kr[te],k.b-=te,k.Ca=(W<<te)-1,xe}function re(k,P,W){k[P+0]=W>>24&255,k[P+1]=W>>16&255,k[P+2]=W>>8&255,k[P+3]=W>>0&255}function Ae(k,P){return k[P+0]<<0|k[P+1]<<8}function ee(k,P){return Ae(k,P)|k[P+2]<<16}function Me(k,P){return Ae(k,P)|Ae(k,P+2)<<16}function ze(k,P){var W=1<<P;return t(k!=null),t(0<P),k.X=i(W),k.X==null?0:(k.Mb=32-P,k.Xa=P,1)}function oe(k,P){t(k!=null),t(P!=null),t(k.Xa==P.Xa),n(P.X,0,k.X,0,1<<P.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function je(k,P,W,te){t(W!=null),t(te!=null);var de=W[0],xe=te[0];return de==0&&(de=(k*xe+P/2)/P),xe==0&&(xe=(P*de+k/2)/k),0>=de||0>=xe?0:(W[0]=de,te[0]=xe,1)}function ce(k,P){return k+(1<<P)-1>>>P}function ye(k,P){return((4278255360&k)+(4278255360&P)>>>0&4278255360)+((16711935&k)+(16711935&P)>>>0&16711935)>>>0}function me(k,P){_[P]=function(W,te,de,xe,ve,Ne,Ee){var Ie;for(Ie=0;Ie<ve;++Ie){var et=_[k](Ne[Ee+Ie-1],de,xe+Ie);Ne[Ee+Ie]=ye(W[te+Ie],et)}}}function ge(){this.ud=this.hd=this.jd=0}function Ce(k,P){return((4278124286&(k^P))>>>1)+(k&P)>>>0}function Ue(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function Te(k,P){return Ue(k+(k-P+.5>>1))}function ue(k,P,W){return Math.abs(P-W)-Math.abs(k-W)}function Oe(k,P,W,te,de,xe,ve){for(te=xe[ve-1],W=0;W<de;++W)xe[ve+W]=te=ye(k[P+W],te)}function st(k,P,W,te,de){var xe;for(xe=0;xe<W;++xe){var ve=k[P+xe],Ne=ve>>8&255,Ee=16711935&(Ee=(Ee=16711935&ve)+((Ne<<16)+Ne));te[de+xe]=(4278255360&ve)+Ee>>>0}}function be(k,P){P.jd=k>>0&255,P.hd=k>>8&255,P.ud=k>>16&255}function De(k,P,W,te,de,xe){var ve;for(ve=0;ve<te;++ve){var Ne=P[W+ve],Ee=Ne>>>8,Ie=Ne,et=255&(et=(et=Ne>>>16)+((k.jd<<24>>24)*(Ee<<24>>24)>>>5));Ie=255&(Ie=(Ie=Ie+((k.hd<<24>>24)*(Ee<<24>>24)>>>5))+((k.ud<<24>>24)*(et<<24>>24)>>>5)),de[xe+ve]=(4278255360&Ne)+(et<<16)+Ie}}function We(k,P,W,te,de){_[P]=function(xe,ve,Ne,Ee,Ie,et,ut,dt,it){for(Ee=ut;Ee<dt;++Ee)for(ut=0;ut<it;++ut)Ie[et++]=de(Ne[te(xe[ve++])])},_[k]=function(xe,ve,Ne,Ee,Ie,et,ut){var dt=8>>xe.b,it=xe.Ea,Ot=xe.K[0],yt=xe.w;if(8>dt)for(xe=(1<<xe.b)-1,yt=(1<<dt)-1;ve<Ne;++ve){var tt,rt=0;for(tt=0;tt<it;++tt)tt&xe||(rt=te(Ee[Ie++])),et[ut++]=de(Ot[rt&yt]),rt>>=dt}else _["VP8LMapColor"+W](Ee,Ie,Ot,yt,et,ut,ve,Ne,it)}}function Xe(k,P,W,te,de){for(W=P+W;P<W;){var xe=k[P++];te[de++]=xe>>16&255,te[de++]=xe>>8&255,te[de++]=xe>>0&255}}function Et(k,P,W,te,de){for(W=P+W;P<W;){var xe=k[P++];te[de++]=xe>>16&255,te[de++]=xe>>8&255,te[de++]=xe>>0&255,te[de++]=xe>>24&255}}function wt(k,P,W,te,de){for(W=P+W;P<W;){var xe=(ve=k[P++])>>16&240|ve>>12&15,ve=ve>>0&240|ve>>28&15;te[de++]=xe,te[de++]=ve}}function Ve(k,P,W,te,de){for(W=P+W;P<W;){var xe=(ve=k[P++])>>16&248|ve>>13&7,ve=ve>>5&224|ve>>3&31;te[de++]=xe,te[de++]=ve}}function xt(k,P,W,te,de){for(W=P+W;P<W;){var xe=k[P++];te[de++]=xe>>0&255,te[de++]=xe>>8&255,te[de++]=xe>>16&255}}function Tt(k,P,W,te,de,xe){if(xe==0)for(W=P+W;P<W;)re(te,((xe=k[P++])[0]>>24|xe[1]>>8&65280|xe[2]<<8&16711680|xe[3]<<24)>>>0),de+=32;else n(te,de,k,P,W)}function he(k,P){_[P][0]=_[k+"0"],_[P][1]=_[k+"1"],_[P][2]=_[k+"2"],_[P][3]=_[k+"3"],_[P][4]=_[k+"4"],_[P][5]=_[k+"5"],_[P][6]=_[k+"6"],_[P][7]=_[k+"7"],_[P][8]=_[k+"8"],_[P][9]=_[k+"9"],_[P][10]=_[k+"10"],_[P][11]=_[k+"11"],_[P][12]=_[k+"12"],_[P][13]=_[k+"13"],_[P][14]=_[k+"0"],_[P][15]=_[k+"0"]}function Ge(k){return k==L0||k==Kx||k==F0||k==Xx}function kt(){this.eb=[],this.size=this.A=this.fb=0}function gt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kt,this.f.kb=new gt,this.sd=null}function _r(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gt(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function rr(k,P){var W=k.T,te=P.ba.f.RGBA,de=te.eb,xe=te.fb+k.ka*te.A,ve=$o[P.ba.S],Ne=k.y,Ee=k.O,Ie=k.f,et=k.N,ut=k.ea,dt=k.W,it=P.cc,Ot=P.dc,yt=P.Mc,tt=P.Nc,rt=k.ka,At=k.ka+k.T,It=k.U,Pt=It+1>>1;for(rt==0?ve(Ne,Ee,null,null,Ie,et,ut,dt,Ie,et,ut,dt,de,xe,null,null,It):(ve(P.ec,P.fc,Ne,Ee,it,Ot,yt,tt,Ie,et,ut,dt,de,xe-te.A,de,xe,It),++W);rt+2<At;rt+=2)it=Ie,Ot=et,yt=ut,tt=dt,et+=k.Rc,dt+=k.Rc,xe+=2*te.A,ve(Ne,(Ee+=2*k.fa)-k.fa,Ne,Ee,it,Ot,yt,tt,Ie,et,ut,dt,de,xe-te.A,de,xe,It);return Ee+=k.fa,k.j+At<k.o?(n(P.ec,P.fc,Ne,Ee,It),n(P.cc,P.dc,Ie,et,Pt),n(P.Mc,P.Nc,ut,dt,Pt),W--):1&At||ve(Ne,Ee,null,null,Ie,et,ut,dt,Ie,et,ut,dt,de,xe+te.A,null,null,It),W}function ir(k,P,W){var te=k.F,de=[k.J];if(te!=null){var xe=k.U,ve=P.ba.S,Ne=ve==fp||ve==F0;P=P.ba.f.RGBA;var Ee=[0],Ie=k.ka;Ee[0]=k.T,k.Kb&&(Ie==0?--Ee[0]:(--Ie,de[0]-=k.width),k.j+k.ka+k.T==k.o&&(Ee[0]=k.o-k.j-Ie));var et=P.eb;Ie=P.fb+Ie*P.A,k=Gn(te,de[0],k.width,xe,Ee,et,Ie+(Ne?0:3),P.A),t(W==Ee),k&&Ge(ve)&&js(et,Ie,Ne,xe,Ee,P.A)}return 0}function pr(k){var P=k.ma,W=P.ba.S,te=11>W,de=W==I0||W==D0||W==fp||W==hp||W==12||Ge(W);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!ef(P.Oa,k,de?11:12))return 0;if(de&&Ge(W)&&Rt(),k.da)alert("todo:use_scaling");else{if(te){if(P.Ib=Gt,k.Kb){if(W=k.U+1>>1,P.memory=i(k.U+2*W),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+k.U,P.Mc=P.cc,P.Nc=P.dc+W,P.Ib=rr,Rt()}}else alert("todo:EmitYUV");de&&(P.Jb=ir,te&&ot())}if(te&&!M0){for(k=0;256>k;++k)Qx[k]=89858*(k-128)+wp>>td,IN[k]=-22014*(k-128)+wp,Ny[k]=-45773*(k-128),jp[k]=113618*(k-128)+wp>>td;for(k=cf;k<Np;++k)P=76283*(k-16)+wp>>td,jy[k-cf]=Ls(P,255),Zx[k-cf]=Ls(P+8>>4,15);M0=1}return 1}function Nr(k){var P=k.ma,W=k.U,te=k.T;return t(!(1&k.ka)),0>=W||0>=te?0:(W=P.Ib(k,P),P.Jb!=null&&P.Jb(k,P,W),P.Dc+=W,1)}function jr(k){k.ma.memory=null}function Dt(k,P,W,te){return X(k,8)!=47?0:(P[0]=X(k,14)+1,W[0]=X(k,14)+1,te[0]=X(k,1),X(k,3)!=0?0:!k.h)}function Sr(k,P){if(4>k)return k+1;var W=k-2>>1;return(2+(1&k)<<W)+X(P,W)+1}function Gr(k,P){return 120<P?P-120:1<=(W=((W=my[P-1])>>4)*k+(8-(15&W)))?W:1;var W}function cn(k,P,W){var te=R(W),de=k[P+=255&te].g-8;return 0<de&&(L(W,W.u+8),te=R(W),P+=k[P].value,P+=te&(1<<de)-1),L(W,W.u+k[P].g),k[P].value}function qe(k,P,W){return W.g+=k.g,W.value+=k.value<<P>>>0,t(8>=W.g),k.g}function mt(k,P,W){var te=k.xc;return t((P=te==0?0:k.vc[k.md*(W>>te)+(P>>te)])<k.Wb),k.Ya[P]}function le(k,P,W,te){var de=k.ab,xe=k.c*P,ve=k.C;P=ve+P;var Ne=W,Ee=te;for(te=k.Ta,W=k.Ua;0<de--;){var Ie=k.gc[de],et=ve,ut=P,dt=Ne,it=Ee,Ot=(Ee=te,Ne=W,Ie.Ea);switch(t(et<ut),t(ut<=Ie.nc),Ie.hc){case 2:Js(dt,it,(ut-et)*Ot,Ee,Ne);break;case 0:var yt=et,tt=ut,rt=Ee,At=Ne,It=(sr=Ie).Ea;yt==0&&(Fs(dt,it,null,null,1,rt,At),Oe(dt,it+1,0,0,It-1,rt,At+1),it+=It,At+=It,++yt);for(var Pt=1<<sr.b,ar=Pt-1,Xt=ce(It,sr.b),Or=sr.K,sr=sr.w+(yt>>sr.b)*Xt;yt<tt;){var nn=Or,kn=sr,pn=1;for(ba(dt,it,rt,At-It,1,rt,At);pn<It;){var en=(pn&~ar)+Pt;en>It&&(en=It),(0,Ma[nn[kn++]>>8&15])(dt,it+ +pn,rt,At+pn-It,en-pn,rt,At+pn),pn=en}it+=It,At+=It,++yt&ar||(sr+=Xt)}ut!=Ie.nc&&n(Ee,Ne-Ot,Ee,Ne+(ut-et-1)*Ot,Ot);break;case 1:for(Ot=dt,tt=it,It=(dt=Ie.Ea)-(At=dt&~(rt=(it=1<<Ie.b)-1)),yt=ce(dt,Ie.b),Pt=Ie.K,Ie=Ie.w+(et>>Ie.b)*yt;et<ut;){for(ar=Pt,Xt=Ie,Or=new ge,sr=tt+At,nn=tt+dt;tt<sr;)be(ar[Xt++],Or),ds(Or,Ot,tt,it,Ee,Ne),tt+=it,Ne+=it;tt<nn&&(be(ar[Xt++],Or),ds(Or,Ot,tt,It,Ee,Ne),tt+=It,Ne+=It),++et&rt||(Ie+=yt)}break;case 3:if(dt==Ee&&it==Ne&&0<Ie.b){for(tt=Ee,dt=Ot=Ne+(ut-et)*Ot-(At=(ut-et)*ce(Ie.Ea,Ie.b)),it=Ee,rt=Ne,yt=[],At=(It=At)-1;0<=At;--At)yt[At]=it[rt+At];for(At=It-1;0<=At;--At)tt[dt+At]=yt[At];Ln(Ie,et,ut,Ee,Ot,Ee,Ne)}else Ln(Ie,et,ut,dt,it,Ee,Ne)}Ne=te,Ee=W}Ee!=W&&n(te,W,Ne,Ee,xe)}function _e(k,P){var W=k.V,te=k.Ba+k.c*k.C,de=P-k.C;if(t(P<=k.l.o),t(16>=de),0<de){var xe=k.l,ve=k.Ta,Ne=k.Ua,Ee=xe.width;if(le(k,de,W,te),de=Ne=[Ne],t((W=k.C)<(te=P)),t(xe.v<xe.va),te>xe.o&&(te=xe.o),W<xe.j){var Ie=xe.j-W;W=xe.j,de[0]+=Ie*Ee}if(W>=te?W=0:(de[0]+=4*xe.v,xe.ka=W-xe.j,xe.U=xe.va-xe.v,xe.T=te-W,W=1),W){if(Ne=Ne[0],11>(W=k.ca).S){var et=W.f.RGBA,ut=(te=W.S,de=xe.U,xe=xe.T,Ie=et.eb,et.A),dt=xe;for(et=et.fb+k.Ma*et.A;0<dt--;){var it=ve,Ot=Ne,yt=de,tt=Ie,rt=et;switch(te){case P0:ta(it,Ot,yt,tt,rt);break;case I0:es(it,Ot,yt,tt,rt);break;case L0:es(it,Ot,yt,tt,rt),js(tt,rt,0,yt,1,0);break;case uy:Do(it,Ot,yt,tt,rt);break;case D0:Tt(it,Ot,yt,tt,rt,1);break;case Kx:Tt(it,Ot,yt,tt,rt,1),js(tt,rt,0,yt,1,0);break;case fp:Tt(it,Ot,yt,tt,rt,0);break;case F0:Tt(it,Ot,yt,tt,rt,0),js(tt,rt,1,yt,1,0);break;case hp:Ci(it,Ot,yt,tt,rt);break;case Xx:Ci(it,Ot,yt,tt,rt),Un(tt,rt,yt,1,0);break;case dy:Ml(it,Ot,yt,tt,rt);break;default:t(0)}Ne+=Ee,et+=ut}k.Ma+=xe}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=W.height)}}k.C=P,t(k.C<=k.i)}function we(k){var P;if(0<k.ua)return 0;for(P=0;P<k.Wb;++P){var W=k.Ya[P].G,te=k.Ya[P].H;if(0<W[1][te[1]+0].g||0<W[2][te[2]+0].g||0<W[3][te[3]+0].g)return 0}return 1}function Se(k,P,W,te,de,xe){if(k.Z!=0){var ve=k.qd,Ne=k.rd;for(t(io[k.Z]!=null);P<W;++P)io[k.Z](ve,Ne,te,de,te,de,xe),ve=te,Ne=de,de+=xe;k.qd=ve,k.rd=Ne}}function ae(k,P){var W=k.l.ma,te=W.Z==0||W.Z==1?k.l.j:k.C;if(te=k.C<te?te:k.C,t(P<=k.l.o),P>te){var de=k.l.width,xe=W.ca,ve=W.tb+de*te,Ne=k.V,Ee=k.Ba+k.c*te,Ie=k.gc;t(k.ab==1),t(Ie[0].hc==3),Ia(Ie[0],te,P,Ne,Ee,xe,ve),Se(W,te,P,xe,ve,de)}k.C=k.Ma=P}function pe(k,P,W,te,de,xe,ve){var Ne=k.$/te,Ee=k.$%te,Ie=k.m,et=k.s,ut=W+k.$,dt=ut;de=W+te*de;var it=W+te*xe,Ot=280+et.ua,yt=k.Pb?Ne:16777216,tt=0<et.ua?et.Wa:null,rt=et.wc,At=ut<it?mt(et,Ee,Ne):null;t(k.C<xe),t(it<=de);var It=!1;e:for(;;){for(;It||ut<it;){var Pt=0;if(Ne>=yt){var ar=ut-W;t((yt=k).Pb),yt.wd=yt.m,yt.xd=ar,0<yt.s.ua&&oe(yt.s.Wa,yt.s.vb),yt=Ne+xy}if(Ee&rt||(At=mt(et,Ee,Ne)),t(At!=null),At.Qb&&(P[ut]=At.qb,It=!0),!It)if(H(Ie),At.jc){Pt=Ie,ar=P;var Xt=ut,Or=At.pd[R(Pt)&Za-1];t(At.jc),256>Or.g?(L(Pt,Pt.u+Or.g),ar[Xt]=Or.value,Pt=0):(L(Pt,Pt.u+Or.g-256),t(256<=Or.value),Pt=Or.value),Pt==0&&(It=!0)}else Pt=cn(At.G[0],At.H[0],Ie);if(Ie.h)break;if(It||256>Pt){if(!It)if(At.nd)P[ut]=(At.qb|Pt<<8)>>>0;else{if(H(Ie),It=cn(At.G[1],At.H[1],Ie),H(Ie),ar=cn(At.G[2],At.H[2],Ie),Xt=cn(At.G[3],At.H[3],Ie),Ie.h)break;P[ut]=(Xt<<24|It<<16|Pt<<8|ar)>>>0}if(It=!1,++ut,++Ee>=te&&(Ee=0,++Ne,ve!=null&&Ne<=xe&&!(Ne%16)&&ve(k,Ne),tt!=null))for(;dt<ut;)Pt=P[dt++],tt.X[(506832829*Pt&4294967295)>>>tt.Mb]=Pt}else if(280>Pt){if(Pt=Sr(Pt-256,Ie),ar=cn(At.G[4],At.H[4],Ie),H(Ie),ar=Gr(te,ar=Sr(ar,Ie)),Ie.h)break;if(ut-W<ar||de-ut<Pt)break e;for(Xt=0;Xt<Pt;++Xt)P[ut+Xt]=P[ut+Xt-ar];for(ut+=Pt,Ee+=Pt;Ee>=te;)Ee-=te,++Ne,ve!=null&&Ne<=xe&&!(Ne%16)&&ve(k,Ne);if(t(ut<=de),Ee&rt&&(At=mt(et,Ee,Ne)),tt!=null)for(;dt<ut;)Pt=P[dt++],tt.X[(506832829*Pt&4294967295)>>>tt.Mb]=Pt}else{if(!(Pt<Ot))break e;for(It=Pt-280,t(tt!=null);dt<ut;)Pt=P[dt++],tt.X[(506832829*Pt&4294967295)>>>tt.Mb]=Pt;Pt=ut,t(!(It>>>(ar=tt).Xa)),P[Pt]=ar.X[It],It=!0}It||t(Ie.h==z(Ie))}if(k.Pb&&Ie.h&&ut<de)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&oe(k.s.vb,k.s.Wa);else{if(Ie.h)break e;ve!=null&&ve(k,Ne>xe?xe:Ne),k.a=0,k.$=ut-W}return 1}return k.a=3,0}function Re(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var P=k.Wa;P!=null&&(P.X=null),k.vb=null,t(k!=null)}function Ye(){var k=new Jd;return k==null?null:(k.a=0,k.xb=vy,he("Predictor","VP8LPredictors"),he("Predictor","VP8LPredictors_C"),he("PredictorAdd","VP8LPredictorsAdd"),he("PredictorAdd","VP8LPredictorsAdd_C"),Js=st,ds=De,ta=Xe,es=Et,Ci=wt,Ml=Ve,Do=xt,_.VP8LMapColor32b=Ns,_.VP8LMapColor8b=Io,k)}function Je(k,P,W,te,de){var xe=1,ve=[k],Ne=[P],Ee=te.m,Ie=te.s,et=null,ut=0;e:for(;;){if(W)for(;xe&&X(Ee,1);){var dt=ve,it=Ne,Ot=te,yt=1,tt=Ot.m,rt=Ot.gc[Ot.ab],At=X(tt,2);if(Ot.Oc&1<<At)xe=0;else{switch(Ot.Oc|=1<<At,rt.hc=At,rt.Ea=dt[0],rt.nc=it[0],rt.K=[null],++Ot.ab,t(4>=Ot.ab),At){case 0:case 1:rt.b=X(tt,3)+2,yt=Je(ce(rt.Ea,rt.b),ce(rt.nc,rt.b),0,Ot,rt.K),rt.K=rt.K[0];break;case 3:var It,Pt=X(tt,8)+1,ar=16<Pt?0:4<Pt?1:2<Pt?2:3;if(dt[0]=ce(rt.Ea,ar),rt.b=ar,It=yt=Je(Pt,1,0,Ot,rt.K)){var Xt,Or=Pt,sr=rt,nn=1<<(8>>sr.b),kn=i(nn);if(kn==null)It=0;else{var pn=sr.K[0],en=sr.w;for(kn[0]=sr.K[0][0],Xt=1;Xt<1*Or;++Xt)kn[Xt]=ye(pn[en+Xt],kn[Xt-1]);for(;Xt<4*nn;++Xt)kn[Xt]=0;sr.K[0]=null,sr.K[0]=kn,It=1}}yt=It;break;case 2:break;default:t(0)}xe=yt}}if(ve=ve[0],Ne=Ne[0],xe&&X(Ee,1)&&!(xe=1<=(ut=X(Ee,4))&&11>=ut)){te.a=3;break e}var zn;if(zn=xe)t:{var bn,Xr,ts,ei=te,$a=ve,Ii=Ne,An=ut,oo=W,lo=ei.m,wa=ei.s,ks=[null],ti=1,Uo=0,Bl=xp[An];r:for(;;){if(oo&&X(lo,1)){var rs=X(lo,3)+2,gi=ce($a,rs),rd=ce(Ii,rs),fl=gi*rd;if(!Je(gi,rd,0,ei,ks))break r;for(ks=ks[0],wa.xc=rs,bn=0;bn<fl;++bn){var Ac=ks[bn]>>8&65535;ks[bn]=Ac,Ac>=ti&&(ti=Ac+1)}}if(lo.h)break r;for(Xr=0;5>Xr;++Xr){var Da=hy[Xr];!Xr&&0<An&&(Da+=1<<An),Uo<Da&&(Uo=Da)}var uf=o(ti*Bl,C),B0=ti,Sy=o(B0,M);if(Sy==null)var $0=null;else t(65536>=B0),$0=Sy;var nd=i(Uo);if($0==null||nd==null||uf==null){ei.a=1;break r}var U0=uf;for(bn=ts=0;bn<ti;++bn){var zo=$0[bn],df=zo.G,ff=zo.H,_y=0,Sp=1,Ay=0;for(Xr=0;5>Xr;++Xr){Da=hy[Xr],df[Xr]=U0,ff[Xr]=ts,!Xr&&0<An&&(Da+=1<<An);a:{var _p,eg=Da,Ap=ei,z0=nd,tg=U0,rg=ts,Cc=0,Di=Ap.m,LN=X(Di,1);if(s(z0,0,0,eg),LN){var Cp=X(Di,1)+1,FN=X(Di,1),Cy=X(Di,FN==0?1:8);z0[Cy]=1,Cp==2&&(z0[Cy=X(Di,8)]=1);var Ep=1}else{var Ey=i(19),Ty=X(Di,4)+4;if(19<Ty){Ap.a=3;var Tp=0;break a}for(_p=0;_p<Ty;++_p)Ey[mp[_p]]=X(Di,3);var ng=void 0,ad=void 0,Op=Ap,MN=Ey,Pp=eg,Oy=z0,ag=0,Ec=Op.m,sg=8,Py=o(128,C);n:for(;A(Py,0,7,MN,19);){if(X(Ec,1)){var RN=2+2*X(Ec,3);if((ng=2+X(Ec,RN))>Pp)break n}else ng=Pp;for(ad=0;ad<Pp&&ng--;){H(Ec);var ig=Py[0+(127&R(Ec))];L(Ec,Ec.u+ig.g);var hl=ig.value;if(16>hl)Oy[ad++]=hl,hl!=0&&(sg=hl);else{var og=hl==16,Li=hl-16,BN=fy[Li],lg=X(Ec,pp[Li])+BN;if(ad+lg>Pp)break n;for(var Ip=og?sg:0;0<lg--;)Oy[ad++]=Ip}}ag=1;break n}ag||(Op.a=3),Ep=ag}(Ep=Ep&&!Di.h)&&(Cc=A(tg,rg,8,z0,eg)),Ep&&Cc!=0?Tp=Cc:(Ap.a=3,Tp=0)}if(Tp==0)break r;if(Sp&&py[Xr]==1&&(Sp=U0[ts].g==0),_y+=U0[ts].g,ts+=Tp,3>=Xr){var hf,Dp=nd[0];for(hf=1;hf<Da;++hf)nd[hf]>Dp&&(Dp=nd[hf]);Ay+=Dp}}if(zo.nd=Sp,zo.Qb=0,Sp&&(zo.qb=(df[3][ff[3]+0].value<<24|df[1][ff[1]+0].value<<16|df[2][ff[2]+0].value)>>>0,_y==0&&256>df[0][ff[0]+0].value&&(zo.Qb=1,zo.qb+=df[0][ff[0]+0].value<<8)),zo.jc=!zo.Qb&&6>Ay,zo.jc){var q0,$l=zo;for(q0=0;q0<Za;++q0){var Tc=q0,Oc=$l.pd[Tc],H0=$l.G[0][$l.H[0]+Tc];256<=H0.value?(Oc.g=H0.g+256,Oc.value=H0.value):(Oc.g=0,Oc.value=0,Tc>>=qe(H0,8,Oc),Tc>>=qe($l.G[1][$l.H[1]+Tc],16,Oc),Tc>>=qe($l.G[2][$l.H[2]+Tc],0,Oc),qe($l.G[3][$l.H[3]+Tc],24,Oc))}}}wa.vc=ks,wa.Wb=ti,wa.Ya=$0,wa.yc=uf,zn=1;break t}zn=0}if(!(xe=zn)){te.a=3;break e}if(0<ut){if(Ie.ua=1<<ut,!ze(Ie.Wa,ut)){te.a=1,xe=0;break e}}else Ie.ua=0;var Lp=te,O=ve,Z=Ne,ie=Lp.s,Le=ie.xc;if(Lp.c=O,Lp.i=Z,ie.md=ce(O,Le),ie.wc=Le==0?-1:(1<<Le)-1,W){te.xb=yp;break e}if((et=i(ve*Ne))==null){te.a=1,xe=0;break e}xe=(xe=pe(te,et,0,ve,Ne,Ne,null))&&!Ee.h;break e}return xe?(de!=null?de[0]=et:(t(et==null),t(W)),te.$=0,W||Re(Ie)):Re(Ie),xe}function Qe(k,P){var W=k.c*k.i,te=W+P+16*P;return t(k.c<=P),k.V=i(te),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+W+P,1)}function Be(k,P){var W=k.C,te=P-W,de=k.V,xe=k.Ba+k.c*W;for(t(P<=k.l.o);0<te;){var ve=16<te?16:te,Ne=k.l.ma,Ee=k.l.width,Ie=Ee*ve,et=Ne.ca,ut=Ne.tb+Ee*W,dt=k.Ta,it=k.Ua;le(k,ve,de,xe),hn(dt,it,et,ut,Ie),Se(Ne,W,W+ve,et,ut,Ee),te-=ve,de+=ve*k.c,W+=ve}t(W==P),k.C=k.Ma=P}function ke(){this.ub=this.yd=this.td=this.Rb=0}function He(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function at(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ht(){this.Yb=function(){var k=[];return function P(W,te,de){for(var xe=de[te],ve=0;ve<xe&&(W.push(de.length>te+1?[]:0),!(de.length<te+1));ve++)P(W[ve],te+1,de)}(k,0,[3,11]),k}()}function jt(){this.jb=i(3),this.Wc=l([4,8],ht),this.Xc=l([4,17],ht)}function Bt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Jt(){this.ld=this.La=this.dd=this.tc=0}function Tr(){this.Na=this.la=0}function En(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bs(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _n(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jt),this.Y=0,this.ya=Array(new bs),this.aa=0,this.l=new Xa}function Is(){this.y=i(16),this.f=i(8),this.ea=i(8)}function la(){this.cb=this.a=0,this.sc="",this.m=new V,this.Od=new ke,this.Kc=new He,this.ed=new Bt,this.Qa=new at,this.Ic=this.$c=this.Aa=0,this.D=new _n,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,V),this.ia=0,this.pb=o(4,En),this.Pa=new jt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Is),this.Hd=0,this.rb=Array(new Tr),this.sb=0,this.wa=Array(new Jt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bs),this.L=this.aa=0,this.gd=l([4,2],Jt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ga(){var k=new la;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,vp||(vp=Ai)),k}function un(k,P,W){return k.a==0&&(k.a=P,k.sc=W,k.cb=0),0}function Co(k,P,W){return 3<=W&&k[P+0]==157&&k[P+1]==1&&k[P+2]==42}function ea(k,P){if(k==null)return 0;if(k.a=0,k.sc="OK",P==null)return un(k,2,"null VP8Io passed to VP8GetHeaders()");var W=P.data,te=P.w,de=P.ha;if(4>de)return un(k,7,"Truncated header.");var xe=W[te+0]|W[te+1]<<8|W[te+2]<<16,ve=k.Od;if(ve.Rb=!(1&xe),ve.td=xe>>1&7,ve.yd=xe>>4&1,ve.ub=xe>>5,3<ve.td)return un(k,3,"Incorrect keyframe parameters.");if(!ve.yd)return un(k,4,"Frame not displayable.");te+=3,de-=3;var Ne=k.Kc;if(ve.Rb){if(7>de)return un(k,7,"cannot parse picture header");if(!Co(W,te,de))return un(k,3,"Bad code word");Ne.c=16383&(W[te+4]<<8|W[te+3]),Ne.Td=W[te+4]>>6,Ne.i=16383&(W[te+6]<<8|W[te+5]),Ne.Ud=W[te+6]>>6,te+=7,de-=7,k.za=Ne.c+15>>4,k.Ub=Ne.i+15>>4,P.width=Ne.c,P.height=Ne.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,s((xe=k.Pa).jb,0,255,xe.jb.length),t((xe=k.Qa)!=null),xe.Cb=0,xe.Bb=0,xe.Fb=1,s(xe.Zb,0,0,xe.Zb.length),s(xe.Lb,0,0,xe.Lb)}if(ve.ub>de)return un(k,7,"bad partition length");B(xe=k.m,W,te,ve.ub),te+=ve.ub,de-=ve.ub,ve.Rb&&(Ne.Ld=se(xe),Ne.Kd=se(xe)),Ne=k.Qa;var Ee,Ie=k.Pa;if(t(xe!=null),t(Ne!=null),Ne.Cb=se(xe),Ne.Cb){if(Ne.Bb=se(xe),se(xe)){for(Ne.Fb=se(xe),Ee=0;4>Ee;++Ee)Ne.Zb[Ee]=se(xe)?G(xe,7):0;for(Ee=0;4>Ee;++Ee)Ne.Lb[Ee]=se(xe)?G(xe,6):0}if(Ne.Bb)for(Ee=0;3>Ee;++Ee)Ie.jb[Ee]=se(xe)?K(xe,8):255}else Ne.Bb=0;if(xe.Ka)return un(k,3,"cannot parse segment header");if((Ne=k.ed).zd=se(xe),Ne.Tb=K(xe,6),Ne.wb=K(xe,3),Ne.Pc=se(xe),Ne.Pc&&se(xe)){for(Ie=0;4>Ie;++Ie)se(xe)&&(Ne.vd[Ie]=G(xe,6));for(Ie=0;4>Ie;++Ie)se(xe)&&(Ne.od[Ie]=G(xe,6))}if(k.L=Ne.Tb==0?0:Ne.zd?1:2,xe.Ka)return un(k,3,"cannot parse filter header");var et=de;if(de=Ee=te,te=Ee+et,Ne=et,k.Xb=(1<<K(k.m,2))-1,et<3*(Ie=k.Xb))W=7;else{for(Ee+=3*Ie,Ne-=3*Ie,et=0;et<Ie;++et){var ut=W[de+0]|W[de+1]<<8|W[de+2]<<16;ut>Ne&&(ut=Ne),B(k.Jc[+et],W,Ee,ut),Ee+=ut,Ne-=ut,de+=3}B(k.Jc[+Ie],W,Ee,Ne),W=Ee<te?0:5}if(W!=0)return un(k,W,"cannot parse partitions");for(W=K(Ee=k.m,7),de=se(Ee)?G(Ee,4):0,te=se(Ee)?G(Ee,4):0,Ne=se(Ee)?G(Ee,4):0,Ie=se(Ee)?G(Ee,4):0,Ee=se(Ee)?G(Ee,4):0,et=k.Qa,ut=0;4>ut;++ut){if(et.Cb){var dt=et.Zb[ut];et.Fb||(dt+=W)}else{if(0<ut){k.pb[ut]=k.pb[0];continue}dt=W}var it=k.pb[ut];it.Sc[0]=lf[Ls(dt+de,127)],it.Sc[1]=gp[Ls(dt+0,127)],it.Eb[0]=2*lf[Ls(dt+te,127)],it.Eb[1]=101581*gp[Ls(dt+Ne,127)]>>16,8>it.Eb[1]&&(it.Eb[1]=8),it.Qc[0]=lf[Ls(dt+Ie,117)],it.Qc[1]=gp[Ls(dt+Ee,127)],it.lc=dt+Ee}if(!ve.Rb)return un(k,4,"Not a key frame.");for(se(xe),ve=k.Pa,W=0;4>W;++W){for(de=0;8>de;++de)for(te=0;3>te;++te)for(Ne=0;11>Ne;++Ne)Ie=Q(xe,TN[W][de][te][Ne])?K(xe,8):xu[W][de][te][Ne],ve.Wc[W][de].Yb[te][Ne]=Ie;for(de=0;17>de;++de)ve.Xc[W][de]=ve.Wc[W][Yx[de]]}return k.kc=se(xe),k.kc&&(k.Bd=K(xe,8)),k.cb=1}function Ai(k,P,W,te,de,xe,ve){var Ne=P[de].Yb[W];for(W=0;16>de;++de){if(!Q(k,Ne[W+0]))return de;for(;!Q(k,Ne[W+1]);)if(Ne=P[++de].Yb[0],W=0,de==16)return 16;var Ee=P[de+1].Yb;if(Q(k,Ne[W+2])){var Ie=k,et=0;if(Q(Ie,(dt=Ne)[(ut=W)+3]))if(Q(Ie,dt[ut+6])){for(Ne=0,ut=2*(et=Q(Ie,dt[ut+8]))+(dt=Q(Ie,dt[ut+9+et])),et=0,dt=gy[ut];dt[Ne];++Ne)et+=et+Q(Ie,dt[Ne]);et+=3+(8<<ut)}else Q(Ie,dt[ut+7])?(et=7+2*Q(Ie,165),et+=Q(Ie,145)):et=5+Q(Ie,159);else et=Q(Ie,dt[ut+4])?3+Q(Ie,dt[ut+5]):2;Ne=Ee[2]}else et=1,Ne=Ee[1];Ee=ve+EN[de],0>(Ie=k).b&&ne(Ie);var ut,dt=Ie.b,it=(ut=Ie.Ca>>1)-(Ie.I>>dt)>>31;--Ie.b,Ie.Ca+=it,Ie.Ca|=1,Ie.I-=(ut+1&it)<<dt,xe[Ee]=((et^it)-it)*te[(0<de)+0]}return 16}function yc(k){var P=k.rb[k.sb-1];P.la=0,P.Na=0,s(k.zc,0,0,k.zc.length),k.ja=0}function bc(k,P){if(k==null)return 0;if(P==null)return un(k,2,"NULL VP8Io parameter in VP8Decode().");if(!k.cb&&!ea(k,P))return 0;if(t(k.cb),P.ac==null||P.ac(P)){P.ob&&(k.L=0);var W=R0[k.L];if(k.L==2?(k.yb=0,k.zb=0):(k.yb=P.v-W>>4,k.zb=P.j-W>>4,0>k.yb&&(k.yb=0),0>k.zb&&(k.zb=0)),k.Va=P.o+15+W>>4,k.Hb=P.va+15+W>>4,k.Hb>k.za&&(k.Hb=k.za),k.Va>k.Ub&&(k.Va=k.Ub),0<k.L){var te=k.ed;for(W=0;4>W;++W){var de;if(k.Qa.Cb){var xe=k.Qa.Lb[W];k.Qa.Fb||(xe+=te.Tb)}else xe=te.Tb;for(de=0;1>=de;++de){var ve=k.gd[W][de],Ne=xe;if(te.Pc&&(Ne+=te.vd[0],de&&(Ne+=te.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Ee=Ne;0<te.wb&&(Ee=4<te.wb?Ee>>2:Ee>>1)>9-te.wb&&(Ee=9-te.wb),1>Ee&&(Ee=1),ve.dd=Ee,ve.tc=2*Ne+Ee,ve.ld=40<=Ne?2:15<=Ne?1:0}else ve.tc=0;ve.La=de}}}W=0}else un(k,6,"Frame setup failed"),W=k.a;if(W=W==0){if(W){k.$c=0,0<k.Aa||(k.Ic=kp);e:{W=k.Ic,te=4*(Ee=k.za);var Ie=32*Ee,et=Ee+1,ut=0<k.L?Ee*(0<k.Aa?2:1):0,dt=(k.Aa==2?2:1)*Ee;if((ve=te+832+(de=3*(16*W+R0[k.L])/2*Ie)+(xe=k.Fa!=null&&0<k.Fa.length?k.Kc.c*k.Kc.i:0))!=ve)W=0;else{if(ve>k.Vb){if(k.Vb=0,k.Ec=i(ve),k.Fc=0,k.Ec==null){W=un(k,1,"no memory during frame initialization.");break e}k.Vb=ve}ve=k.Ec,Ne=k.Fc,k.Ac=ve,k.Bc=Ne,Ne+=te,k.Gd=o(Ie,Is),k.Hd=0,k.rb=o(et+1,Tr),k.sb=1,k.wa=ut?o(ut,Jt):null,k.Y=0,k.D.Nb=0,k.D.wa=k.wa,k.D.Y=k.Y,0<k.Aa&&(k.D.Y+=Ee),t(!0),k.oc=ve,k.pc=Ne,Ne+=832,k.ya=o(dt,bs),k.aa=0,k.D.ya=k.ya,k.D.aa=k.aa,k.Aa==2&&(k.D.aa+=Ee),k.R=16*Ee,k.B=8*Ee,Ee=(Ie=R0[k.L])*k.R,Ie=Ie/2*k.B,k.sa=ve,k.ta=Ne+Ee,k.qa=k.sa,k.ra=k.ta+16*W*k.R+Ie,k.Ha=k.qa,k.Ia=k.ra+8*W*k.B+Ie,k.$c=0,Ne+=de,k.mb=xe?ve:null,k.nb=xe?Ne:null,t(Ne+xe<=k.Fc+k.Vb),yc(k),s(k.Ac,k.Bc,0,te),W=1}}if(W){if(P.ka=0,P.y=k.sa,P.O=k.ta,P.f=k.qa,P.N=k.ra,P.ea=k.Ha,P.Vd=k.Ia,P.fa=k.R,P.Rc=k.B,P.F=null,P.J=0,!of){for(W=-255;255>=W;++W)fa[255+W]=0>W?-W:W;for(W=-1020;1020>=W;++W)ul[1020+W]=-128>W?-128:127<W?127:W;for(W=-112;112>=W;++W)T0[112+W]=-16>W?-16:15<W?15:W;for(W=-255;510>=W;++W)dl[255+W]=0>W?0:255<W?255:W;of=1}nf=Vn,ll=vr,af=gr,Qs=Br,Ei=Rn,Ra=qt,_c=wc,sf=cu,hu=Gx,Lo=du,Ti=uu,so=Fl,Fo=S0,cl=Nc,Mo=Ll,Ro=To,E0=nl,xi=Vx,Bo[0]=Dn,Bo[1]=yr,Bo[2]=or,Bo[3]=cr,Bo[4]=ua,Bo[5]=dn,Bo[6]=Ya,Bo[7]=pi,Bo[8]=Pe,Bo[9]=no,Pi[0]=ca,Pi[1]=Dr,Pi[2]=mr,Pi[3]=hr,Pi[4]=Fr,Pi[5]=Zt,Pi[6]=gn,Rl[0]=dr,Rl[1]=Ft,Rl[2]=Ht,Rl[3]=$t,Rl[4]=Zr,Rl[5]=Wr,Rl[6]=Ja,W=1}else W=0}W&&(W=function(it,Ot){for(it.M=0;it.M<it.Va;++it.M){var yt,tt=it.Jc[it.M&it.Xb],rt=it.m,At=it;for(yt=0;yt<At.za;++yt){var It=rt,Pt=At,ar=Pt.Ac,Xt=Pt.Bc+4*yt,Or=Pt.zc,sr=Pt.ya[Pt.aa+yt];if(Pt.Qa.Bb?sr.$b=Q(It,Pt.Pa.jb[0])?2+Q(It,Pt.Pa.jb[2]):Q(It,Pt.Pa.jb[1]):sr.$b=0,Pt.kc&&(sr.Ad=Q(It,Pt.Bd)),sr.Za=!Q(It,145)+0,sr.Za){var nn=sr.Ob,kn=0;for(Pt=0;4>Pt;++Pt){var pn,en=Or[0+Pt];for(pn=0;4>pn;++pn){en=ed[ar[Xt+pn]][en];for(var zn=mu[Q(It,en[0])];0<zn;)zn=mu[2*zn+Q(It,en[zn])];en=-zn,ar[Xt+pn]=en}n(nn,kn,ar,Xt,4),kn+=4,Or[0+Pt]=en}}else en=Q(It,156)?Q(It,128)?1:3:Q(It,163)?2:0,sr.Ob[0]=en,s(ar,Xt,en,4),s(Or,0,en,4);sr.Dd=Q(It,142)?Q(It,114)?Q(It,183)?1:3:2:0}if(At.m.Ka)return un(it,7,"Premature end-of-partition0 encountered.");for(;it.ja<it.za;++it.ja){if(At=tt,It=(rt=it).rb[rt.sb-1],ar=rt.rb[rt.sb+rt.ja],yt=rt.ya[rt.aa+rt.ja],Xt=rt.kc?yt.Ad:0)It.la=ar.la=0,yt.Za||(It.Na=ar.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var bn,Xr;if(It=ar,ar=At,Xt=rt.Pa.Xc,Or=rt.ya[rt.aa+rt.ja],sr=rt.pb[Or.$b],Pt=Or.ad,nn=0,kn=rt.rb[rt.sb-1],en=pn=0,s(Pt,nn,0,384),Or.Za)var ts=0,ei=Xt[3];else{zn=i(16);var $a=It.Na+kn.Na;if($a=vp(ar,Xt[1],$a,sr.Eb,0,zn,0),It.Na=kn.Na=(0<$a)+0,1<$a)nf(zn,0,Pt,nn);else{var Ii=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)Pt[nn+zn]=Ii}ts=1,ei=Xt[0]}var An=15&It.la,oo=15&kn.la;for(zn=0;4>zn;++zn){var lo=1&oo;for(Ii=Xr=0;4>Ii;++Ii)An=An>>1|(lo=($a=vp(ar,ei,$a=lo+(1&An),sr.Sc,ts,Pt,nn))>ts)<<7,Xr=Xr<<2|(3<$a?3:1<$a?2:Pt[nn+0]!=0),nn+=16;An>>=4,oo=oo>>1|lo<<7,pn=(pn<<8|Xr)>>>0}for(ei=An,ts=oo>>4,bn=0;4>bn;bn+=2){for(Xr=0,An=It.la>>4+bn,oo=kn.la>>4+bn,zn=0;2>zn;++zn){for(lo=1&oo,Ii=0;2>Ii;++Ii)$a=lo+(1&An),An=An>>1|(lo=0<($a=vp(ar,Xt[2],$a,sr.Qc,0,Pt,nn)))<<3,Xr=Xr<<2|(3<$a?3:1<$a?2:Pt[nn+0]!=0),nn+=16;An>>=2,oo=oo>>1|lo<<5}en|=Xr<<4*bn,ei|=An<<4<<bn,ts|=(240&oo)<<bn}It.la=ei,kn.la=ts,Or.Hc=pn,Or.Gc=en,Or.ia=43690&en?0:sr.ia,Xt=!(pn|en)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[yt.$b][yt.Za],rt.wa[rt.Y+rt.ja].La|=!Xt),At.Ka)return un(it,7,"Premature end-of-file encountered.")}if(yc(it),rt=Ot,At=1,yt=(tt=it).D,It=0<tt.L&&tt.M>=tt.zb&&tt.M<=tt.Va,tt.Aa==0)e:{if(yt.M=tt.M,yt.uc=It,C0(tt,yt),At=1,yt=(Xr=tt.D).Nb,It=(en=R0[tt.L])*tt.R,ar=en/2*tt.B,zn=16*yt*tt.R,Ii=8*yt*tt.B,Xt=tt.sa,Or=tt.ta-It+zn,sr=tt.qa,Pt=tt.ra-ar+Ii,nn=tt.Ha,kn=tt.Ia-ar+Ii,oo=(An=Xr.M)==0,pn=An>=tt.Va-1,tt.Aa==2&&C0(tt,Xr),Xr.uc)for(lo=($a=tt).D.M,t($a.D.uc),Xr=$a.yb;Xr<$a.Hb;++Xr){ts=Xr,ei=lo;var wa=(ks=(Da=$a).D).Nb;bn=Da.R;var ks=ks.wa[ks.Y+ts],ti=Da.sa,Uo=Da.ta+16*wa*bn+16*ts,Bl=ks.dd,rs=ks.tc;if(rs!=0)if(t(3<=rs),Da.L==1)0<ts&&Ro(ti,Uo,bn,rs+4),ks.La&&xi(ti,Uo,bn,rs),0<ei&&Mo(ti,Uo,bn,rs+4),ks.La&&E0(ti,Uo,bn,rs);else{var gi=Da.B,rd=Da.qa,fl=Da.ra+8*wa*gi+8*ts,Ac=Da.Ha,Da=Da.Ia+8*wa*gi+8*ts;wa=ks.ld,0<ts&&(sf(ti,Uo,bn,rs+4,Bl,wa),Lo(rd,fl,Ac,Da,gi,rs+4,Bl,wa)),ks.La&&(so(ti,Uo,bn,rs,Bl,wa),cl(rd,fl,Ac,Da,gi,rs,Bl,wa)),0<ei&&(_c(ti,Uo,bn,rs+4,Bl,wa),hu(rd,fl,Ac,Da,gi,rs+4,Bl,wa)),ks.La&&(Ti(ti,Uo,bn,rs,Bl,wa),Fo(rd,fl,Ac,Da,gi,rs,Bl,wa))}}if(tt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Xr=16*An,An=16*(An+1),oo?(rt.y=tt.sa,rt.O=tt.ta+zn,rt.f=tt.qa,rt.N=tt.ra+Ii,rt.ea=tt.Ha,rt.W=tt.Ia+Ii):(Xr-=en,rt.y=Xt,rt.O=Or,rt.f=sr,rt.N=Pt,rt.ea=nn,rt.W=kn),pn||(An-=en),An>rt.o&&(An=rt.o),rt.F=null,rt.J=null,tt.Fa!=null&&0<tt.Fa.length&&Xr<An&&(rt.J=Qd(tt,rt,Xr,An-Xr),rt.F=tt.mb,rt.F==null&&rt.F.length==0)){At=un(tt,3,"Could not decode alpha data.");break e}Xr<rt.j&&(en=rt.j-Xr,Xr=rt.j,t(!(1&en)),rt.O+=tt.R*en,rt.N+=tt.B*(en>>1),rt.W+=tt.B*(en>>1),rt.F!=null&&(rt.J+=rt.width*en)),Xr<An&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Xr-rt.j,rt.U=rt.va-rt.v,rt.T=An-Xr,At=rt.put(rt))}yt+1!=tt.Ic||pn||(n(tt.sa,tt.ta-It,Xt,Or+16*tt.R,It),n(tt.qa,tt.ra-ar,sr,Pt+8*tt.B,ar),n(tt.Ha,tt.Ia-ar,nn,kn+8*tt.B,ar))}if(!At)return un(it,6,"Output aborted.")}return 1}(k,P)),P.bc!=null&&P.bc(P),W&=1}return W?(k.cb=0,W):0}function Xs(k,P,W,te,de){de=k[P+W+32*te]+(de>>3),k[P+W+32*te]=-256&de?0>de?0:255:de}function Fe(k,P,W,te,de,xe){Xs(k,P,0,W,te+de),Xs(k,P,1,W,te+xe),Xs(k,P,2,W,te-xe),Xs(k,P,3,W,te-de)}function vt(k){return(20091*k>>16)+k}function Lt(k,P,W,te){var de,xe=0,ve=i(16);for(de=0;4>de;++de){var Ne=k[P+0]+k[P+8],Ee=k[P+0]-k[P+8],Ie=(35468*k[P+4]>>16)-vt(k[P+12]),et=vt(k[P+4])+(35468*k[P+12]>>16);ve[xe+0]=Ne+et,ve[xe+1]=Ee+Ie,ve[xe+2]=Ee-Ie,ve[xe+3]=Ne-et,xe+=4,P++}for(de=xe=0;4>de;++de)Ne=(k=ve[xe+0]+4)+ve[xe+8],Ee=k-ve[xe+8],Ie=(35468*ve[xe+4]>>16)-vt(ve[xe+12]),Xs(W,te,0,0,Ne+(et=vt(ve[xe+4])+(35468*ve[xe+12]>>16))),Xs(W,te,1,0,Ee+Ie),Xs(W,te,2,0,Ee-Ie),Xs(W,te,3,0,Ne-et),xe++,te+=32}function qt(k,P,W,te){var de=k[P+0]+4,xe=35468*k[P+4]>>16,ve=vt(k[P+4]),Ne=35468*k[P+1]>>16;Fe(W,te,0,de+ve,k=vt(k[P+1]),Ne),Fe(W,te,1,de+xe,k,Ne),Fe(W,te,2,de-xe,k,Ne),Fe(W,te,3,de-ve,k,Ne)}function vr(k,P,W,te,de){Lt(k,P,W,te),de&&Lt(k,P+16,W,te+4)}function gr(k,P,W,te){ll(k,P+0,W,te,1),ll(k,P+32,W,te+128,1)}function Br(k,P,W,te){var de;for(k=k[P+0]+4,de=0;4>de;++de)for(P=0;4>P;++P)Xs(W,te,P,de,k)}function Rn(k,P,W,te){k[P+0]&&Qs(k,P+0,W,te),k[P+16]&&Qs(k,P+16,W,te+4),k[P+32]&&Qs(k,P+32,W,te+128),k[P+48]&&Qs(k,P+48,W,te+128+4)}function Vn(k,P,W,te){var de,xe=i(16);for(de=0;4>de;++de){var ve=k[P+0+de]+k[P+12+de],Ne=k[P+4+de]+k[P+8+de],Ee=k[P+4+de]-k[P+8+de],Ie=k[P+0+de]-k[P+12+de];xe[0+de]=ve+Ne,xe[8+de]=ve-Ne,xe[4+de]=Ie+Ee,xe[12+de]=Ie-Ee}for(de=0;4>de;++de)ve=(k=xe[0+4*de]+3)+xe[3+4*de],Ne=xe[1+4*de]+xe[2+4*de],Ee=xe[1+4*de]-xe[2+4*de],Ie=k-xe[3+4*de],W[te+0]=ve+Ne>>3,W[te+16]=Ie+Ee>>3,W[te+32]=ve-Ne>>3,W[te+48]=Ie-Ee>>3,te+=64}function jn(k,P,W){var te,de=P-32,xe=Oi,ve=255-k[de-1];for(te=0;te<W;++te){var Ne,Ee=xe,Ie=ve+k[P-1];for(Ne=0;Ne<W;++Ne)k[P+Ne]=Ee[Ie+k[de+Ne]];P+=32}}function yr(k,P){jn(k,P,4)}function Ft(k,P){jn(k,P,8)}function Dr(k,P){jn(k,P,16)}function mr(k,P){var W;for(W=0;16>W;++W)n(k,P+32*W,k,P-32,16)}function hr(k,P){var W;for(W=16;0<W;--W)s(k,P,k[P-1],16),P+=32}function nr(k,P,W){var te;for(te=0;16>te;++te)s(P,W+32*te,k,16)}function ca(k,P){var W,te=16;for(W=0;16>W;++W)te+=k[P-1+32*W]+k[P+W-32];nr(te>>5,k,P)}function Fr(k,P){var W,te=8;for(W=0;16>W;++W)te+=k[P-1+32*W];nr(te>>4,k,P)}function Zt(k,P){var W,te=8;for(W=0;16>W;++W)te+=k[P+W-32];nr(te>>4,k,P)}function gn(k,P){nr(128,k,P)}function xr(k,P,W){return k+2*P+W+2>>2}function or(k,P){var W,te=P-32;for(te=new Uint8Array([xr(k[te-1],k[te+0],k[te+1]),xr(k[te+0],k[te+1],k[te+2]),xr(k[te+1],k[te+2],k[te+3]),xr(k[te+2],k[te+3],k[te+4])]),W=0;4>W;++W)n(k,P+32*W,te,0,te.length)}function cr(k,P){var W=k[P-1],te=k[P-1+32],de=k[P-1+64],xe=k[P-1+96];re(k,P+0,16843009*xr(k[P-1-32],W,te)),re(k,P+32,16843009*xr(W,te,de)),re(k,P+64,16843009*xr(te,de,xe)),re(k,P+96,16843009*xr(de,xe,xe))}function Dn(k,P){var W,te=4;for(W=0;4>W;++W)te+=k[P+W-32]+k[P-1+32*W];for(te>>=3,W=0;4>W;++W)s(k,P+32*W,te,4)}function ua(k,P){var W=k[P-1+0],te=k[P-1+32],de=k[P-1+64],xe=k[P-1-32],ve=k[P+0-32],Ne=k[P+1-32],Ee=k[P+2-32],Ie=k[P+3-32];k[P+0+96]=xr(te,de,k[P-1+96]),k[P+1+96]=k[P+0+64]=xr(W,te,de),k[P+2+96]=k[P+1+64]=k[P+0+32]=xr(xe,W,te),k[P+3+96]=k[P+2+64]=k[P+1+32]=k[P+0+0]=xr(ve,xe,W),k[P+3+64]=k[P+2+32]=k[P+1+0]=xr(Ne,ve,xe),k[P+3+32]=k[P+2+0]=xr(Ee,Ne,ve),k[P+3+0]=xr(Ie,Ee,Ne)}function Ya(k,P){var W=k[P+1-32],te=k[P+2-32],de=k[P+3-32],xe=k[P+4-32],ve=k[P+5-32],Ne=k[P+6-32],Ee=k[P+7-32];k[P+0+0]=xr(k[P+0-32],W,te),k[P+1+0]=k[P+0+32]=xr(W,te,de),k[P+2+0]=k[P+1+32]=k[P+0+64]=xr(te,de,xe),k[P+3+0]=k[P+2+32]=k[P+1+64]=k[P+0+96]=xr(de,xe,ve),k[P+3+32]=k[P+2+64]=k[P+1+96]=xr(xe,ve,Ne),k[P+3+64]=k[P+2+96]=xr(ve,Ne,Ee),k[P+3+96]=xr(Ne,Ee,Ee)}function dn(k,P){var W=k[P-1+0],te=k[P-1+32],de=k[P-1+64],xe=k[P-1-32],ve=k[P+0-32],Ne=k[P+1-32],Ee=k[P+2-32],Ie=k[P+3-32];k[P+0+0]=k[P+1+64]=xe+ve+1>>1,k[P+1+0]=k[P+2+64]=ve+Ne+1>>1,k[P+2+0]=k[P+3+64]=Ne+Ee+1>>1,k[P+3+0]=Ee+Ie+1>>1,k[P+0+96]=xr(de,te,W),k[P+0+64]=xr(te,W,xe),k[P+0+32]=k[P+1+96]=xr(W,xe,ve),k[P+1+32]=k[P+2+96]=xr(xe,ve,Ne),k[P+2+32]=k[P+3+96]=xr(ve,Ne,Ee),k[P+3+32]=xr(Ne,Ee,Ie)}function pi(k,P){var W=k[P+0-32],te=k[P+1-32],de=k[P+2-32],xe=k[P+3-32],ve=k[P+4-32],Ne=k[P+5-32],Ee=k[P+6-32],Ie=k[P+7-32];k[P+0+0]=W+te+1>>1,k[P+1+0]=k[P+0+64]=te+de+1>>1,k[P+2+0]=k[P+1+64]=de+xe+1>>1,k[P+3+0]=k[P+2+64]=xe+ve+1>>1,k[P+0+32]=xr(W,te,de),k[P+1+32]=k[P+0+96]=xr(te,de,xe),k[P+2+32]=k[P+1+96]=xr(de,xe,ve),k[P+3+32]=k[P+2+96]=xr(xe,ve,Ne),k[P+3+64]=xr(ve,Ne,Ee),k[P+3+96]=xr(Ne,Ee,Ie)}function no(k,P){var W=k[P-1+0],te=k[P-1+32],de=k[P-1+64],xe=k[P-1+96];k[P+0+0]=W+te+1>>1,k[P+2+0]=k[P+0+32]=te+de+1>>1,k[P+2+32]=k[P+0+64]=de+xe+1>>1,k[P+1+0]=xr(W,te,de),k[P+3+0]=k[P+1+32]=xr(te,de,xe),k[P+3+32]=k[P+1+64]=xr(de,xe,xe),k[P+3+64]=k[P+2+64]=k[P+0+96]=k[P+1+96]=k[P+2+96]=k[P+3+96]=xe}function Pe(k,P){var W=k[P-1+0],te=k[P-1+32],de=k[P-1+64],xe=k[P-1+96],ve=k[P-1-32],Ne=k[P+0-32],Ee=k[P+1-32],Ie=k[P+2-32];k[P+0+0]=k[P+2+32]=W+ve+1>>1,k[P+0+32]=k[P+2+64]=te+W+1>>1,k[P+0+64]=k[P+2+96]=de+te+1>>1,k[P+0+96]=xe+de+1>>1,k[P+3+0]=xr(Ne,Ee,Ie),k[P+2+0]=xr(ve,Ne,Ee),k[P+1+0]=k[P+3+32]=xr(W,ve,Ne),k[P+1+32]=k[P+3+64]=xr(te,W,ve),k[P+1+64]=k[P+3+96]=xr(de,te,W),k[P+1+96]=xr(xe,de,te)}function Ht(k,P){var W;for(W=0;8>W;++W)n(k,P+32*W,k,P-32,8)}function $t(k,P){var W;for(W=0;8>W;++W)s(k,P,k[P-1],8),P+=32}function Kt(k,P,W){var te;for(te=0;8>te;++te)s(P,W+32*te,k,8)}function dr(k,P){var W,te=8;for(W=0;8>W;++W)te+=k[P+W-32]+k[P-1+32*W];Kt(te>>4,k,P)}function Wr(k,P){var W,te=4;for(W=0;8>W;++W)te+=k[P+W-32];Kt(te>>3,k,P)}function Zr(k,P){var W,te=4;for(W=0;8>W;++W)te+=k[P-1+32*W];Kt(te>>3,k,P)}function Ja(k,P){Kt(128,k,P)}function mi(k,P,W){var te=k[P-W],de=k[P+0],xe=3*(de-te)+O0[1020+k[P-2*W]-k[P+W]],ve=pu[112+(xe+4>>3)];k[P-W]=Oi[255+te+pu[112+(xe+3>>3)]],k[P+0]=Oi[255+de-ve]}function Ju(k,P,W,te){var de=k[P+0],xe=k[P+W];return Zs[255+k[P-2*W]-k[P-W]]>te||Zs[255+xe-de]>te}function Eo(k,P,W,te){return 4*Zs[255+k[P-W]-k[P+0]]+Zs[255+k[P-2*W]-k[P+W]]<=te}function Ys(k,P,W,te,de){var xe=k[P-3*W],ve=k[P-2*W],Ne=k[P-W],Ee=k[P+0],Ie=k[P+W],et=k[P+2*W],ut=k[P+3*W];return 4*Zs[255+Ne-Ee]+Zs[255+ve-Ie]>te?0:Zs[255+k[P-4*W]-xe]<=de&&Zs[255+xe-ve]<=de&&Zs[255+ve-Ne]<=de&&Zs[255+ut-et]<=de&&Zs[255+et-Ie]<=de&&Zs[255+Ie-Ee]<=de}function Ll(k,P,W,te){var de=2*te+1;for(te=0;16>te;++te)Eo(k,P+te,W,de)&&mi(k,P+te,W)}function To(k,P,W,te){var de=2*te+1;for(te=0;16>te;++te)Eo(k,P+te*W,1,de)&&mi(k,P+te*W,1)}function nl(k,P,W,te){var de;for(de=3;0<de;--de)Ll(k,P+=4*W,W,te)}function Vx(k,P,W,te){var de;for(de=3;0<de;--de)To(k,P+=4,W,te)}function al(k,P,W,te,de,xe,ve,Ne){for(xe=2*xe+1;0<de--;){if(Ys(k,P,W,xe,ve))if(Ju(k,P,W,Ne))mi(k,P,W);else{var Ee=k,Ie=P,et=W,ut=Ee[Ie-2*et],dt=Ee[Ie-et],it=Ee[Ie+0],Ot=Ee[Ie+et],yt=Ee[Ie+2*et],tt=27*(At=O0[1020+3*(it-dt)+O0[1020+ut-Ot]])+63>>7,rt=18*At+63>>7,At=9*At+63>>7;Ee[Ie-3*et]=Oi[255+Ee[Ie-3*et]+At],Ee[Ie-2*et]=Oi[255+ut+rt],Ee[Ie-et]=Oi[255+dt+tt],Ee[Ie+0]=Oi[255+it-tt],Ee[Ie+et]=Oi[255+Ot-rt],Ee[Ie+2*et]=Oi[255+yt-At]}P+=te}}function Oo(k,P,W,te,de,xe,ve,Ne){for(xe=2*xe+1;0<de--;){if(Ys(k,P,W,xe,ve))if(Ju(k,P,W,Ne))mi(k,P,W);else{var Ee=k,Ie=P,et=W,ut=Ee[Ie-et],dt=Ee[Ie+0],it=Ee[Ie+et],Ot=pu[112+((yt=3*(dt-ut))+4>>3)],yt=pu[112+(yt+3>>3)],tt=Ot+1>>1;Ee[Ie-2*et]=Oi[255+Ee[Ie-2*et]+tt],Ee[Ie-et]=Oi[255+ut+yt],Ee[Ie+0]=Oi[255+dt-Ot],Ee[Ie+et]=Oi[255+it-tt]}P+=te}}function wc(k,P,W,te,de,xe){al(k,P,W,1,16,te,de,xe)}function cu(k,P,W,te,de,xe){al(k,P,1,W,16,te,de,xe)}function uu(k,P,W,te,de,xe){var ve;for(ve=3;0<ve;--ve)Oo(k,P+=4*W,W,1,16,te,de,xe)}function Fl(k,P,W,te,de,xe){var ve;for(ve=3;0<ve;--ve)Oo(k,P+=4,1,W,16,te,de,xe)}function Gx(k,P,W,te,de,xe,ve,Ne){al(k,P,de,1,8,xe,ve,Ne),al(W,te,de,1,8,xe,ve,Ne)}function du(k,P,W,te,de,xe,ve,Ne){al(k,P,1,de,8,xe,ve,Ne),al(W,te,1,de,8,xe,ve,Ne)}function S0(k,P,W,te,de,xe,ve,Ne){Oo(k,P+4*de,de,1,8,xe,ve,Ne),Oo(W,te+4*de,de,1,8,xe,ve,Ne)}function Nc(k,P,W,te,de,xe,ve,Ne){Oo(k,P+4,1,de,8,xe,ve,Ne),Oo(W,te+4,1,de,8,xe,ve,Ne)}function sl(){this.ba=new Vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Yd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function _0(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new C}function Jd(){this.xb=this.a=0,this.l=new Xa,this.ca=new Vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new _0,this.ab=0,this.gc=o(4,Yd),this.Oc=0}function fu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function da(k,P,W,te,de,xe,ve){for(k=k==null?0:k[P+0],P=0;P<ve;++P)de[xe+P]=k+W[te+P]&255,k=de[xe+P]}function A0(k,P,W,te,de,xe,ve){var Ne;if(k==null)da(null,null,W,te,de,xe,ve);else for(Ne=0;Ne<ve;++Ne)de[xe+Ne]=k[P+Ne]+W[te+Ne]&255}function kc(k,P,W,te,de,xe,ve){if(k==null)da(null,null,W,te,de,xe,ve);else{var Ne,Ee=k[P+0],Ie=Ee,et=Ee;for(Ne=0;Ne<ve;++Ne)Ie=et+(Ee=k[P+Ne])-Ie,et=W[te+Ne]+(-256&Ie?0>Ie?0:255:Ie)&255,Ie=Ee,de[xe+Ne]=et}}function Qd(k,P,W,te){var de=P.width,xe=P.o;if(t(k!=null&&P!=null),0>W||0>=te||W+te>xe)return null;if(!k.Cc){if(k.ga==null){var ve;if(k.ga=new fu,(ve=k.ga==null)||(ve=P.width*P.o,t(k.Gb.length==0),k.Gb=i(ve),k.Uc=0,k.Gb==null?ve=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,ve=1),ve=!ve),!ve){ve=k.ga;var Ne=k.Fa,Ee=k.P,Ie=k.qc,et=k.mb,ut=k.nb,dt=Ee+1,it=Ie-1,Ot=ve.l;if(t(Ne!=null&&et!=null&&P!=null),io[0]=null,io[1]=da,io[2]=A0,io[3]=kc,ve.ca=et,ve.tb=ut,ve.c=P.width,ve.i=P.height,t(0<ve.c&&0<ve.i),1>=Ie)P=0;else if(ve.$a=Ne[Ee+0]>>0&3,ve.Z=Ne[Ee+0]>>2&3,ve.Lc=Ne[Ee+0]>>4&3,Ee=Ne[Ee+0]>>6&3,0>ve.$a||1<ve.$a||4<=ve.Z||1<ve.Lc||Ee)P=0;else if(Ot.put=Nr,Ot.ac=pr,Ot.bc=jr,Ot.ma=ve,Ot.width=P.width,Ot.height=P.height,Ot.Da=P.Da,Ot.v=P.v,Ot.va=P.va,Ot.j=P.j,Ot.o=P.o,ve.$a)e:{t(ve.$a==1),P=Ye();t:for(;;){if(P==null){P=0;break e}if(t(ve!=null),ve.mc=P,P.c=ve.c,P.i=ve.i,P.l=ve.l,P.l.ma=ve,P.l.width=ve.c,P.l.height=ve.i,P.a=0,Y(P.m,Ne,dt,it),!Je(ve.c,ve.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&we(P.s)?(ve.ic=1,Ne=P.c*P.i,P.Ta=null,P.Ua=0,P.V=i(Ne),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(ve.ic=0,P=Qe(P,ve.c)),!P))break t;P=1;break e}ve.mc=null,P=0}else P=it>=ve.c*ve.i;ve=!P}if(ve)return null;k.ga.Lc!=1?k.Ga=0:te=xe-W}t(k.ga!=null),t(W+te<=xe);e:{if(P=(Ne=k.ga).c,xe=Ne.l.o,Ne.$a==0){if(dt=k.rc,it=k.Vc,Ot=k.Fa,Ee=k.P+1+W*P,Ie=k.mb,et=k.nb+W*P,t(Ee<=k.P+k.qc),Ne.Z!=0)for(t(io[Ne.Z]!=null),ve=0;ve<te;++ve)io[Ne.Z](dt,it,Ot,Ee,Ie,et,P),dt=Ie,it=et,et+=P,Ee+=P;else for(ve=0;ve<te;++ve)n(Ie,et,Ot,Ee,P),dt=Ie,it=et,et+=P,Ee+=P;k.rc=dt,k.Vc=it}else{if(t(Ne.mc!=null),P=W+te,t((ve=Ne.mc)!=null),t(P<=ve.i),ve.C>=P)P=1;else if(Ne.ic||ot(),Ne.ic){Ne=ve.V,dt=ve.Ba,it=ve.c;var yt=ve.i,tt=(Ot=1,Ee=ve.$/it,Ie=ve.$%it,et=ve.m,ut=ve.s,ve.$),rt=it*yt,At=it*P,It=ut.wc,Pt=tt<At?mt(ut,Ie,Ee):null;t(tt<=rt),t(P<=yt),t(we(ut));t:for(;;){for(;!et.h&&tt<At;){if(Ie&It||(Pt=mt(ut,Ie,Ee)),t(Pt!=null),H(et),256>(yt=cn(Pt.G[0],Pt.H[0],et)))Ne[dt+tt]=yt,++tt,++Ie>=it&&(Ie=0,++Ee<=P&&!(Ee%16)&&ae(ve,Ee));else{if(!(280>yt)){Ot=0;break t}yt=Sr(yt-256,et);var ar,Xt=cn(Pt.G[4],Pt.H[4],et);if(H(et),!(tt>=(Xt=Gr(it,Xt=Sr(Xt,et)))&&rt-tt>=yt)){Ot=0;break t}for(ar=0;ar<yt;++ar)Ne[dt+tt+ar]=Ne[dt+tt+ar-Xt];for(tt+=yt,Ie+=yt;Ie>=it;)Ie-=it,++Ee<=P&&!(Ee%16)&&ae(ve,Ee);tt<At&&Ie&It&&(Pt=mt(ut,Ie,Ee))}t(et.h==z(et))}ae(ve,Ee>P?P:Ee);break t}!Ot||et.h&&tt<rt?(Ot=0,ve.a=et.h?5:3):ve.$=tt,P=Ot}else P=pe(ve,ve.V,ve.Ba,ve.c,ve.i,P,Be);if(!P){te=0;break e}}W+te>=xe&&(k.Cc=1),te=1}if(!te)return null;if(k.Cc&&((te=k.ga)!=null&&(te.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+W*de}function U(k,P,W,te,de,xe){for(;0<de--;){var ve,Ne=k,Ee=P+(W?1:0),Ie=k,et=P+(W?0:3);for(ve=0;ve<te;++ve){var ut=Ie[et+4*ve];ut!=255&&(ut*=32897,Ne[Ee+4*ve+0]=Ne[Ee+4*ve+0]*ut>>23,Ne[Ee+4*ve+1]=Ne[Ee+4*ve+1]*ut>>23,Ne[Ee+4*ve+2]=Ne[Ee+4*ve+2]*ut>>23)}P+=xe}}function fe(k,P,W,te,de){for(;0<te--;){var xe;for(xe=0;xe<W;++xe){var ve=k[P+2*xe+0],Ne=15&(Ie=k[P+2*xe+1]),Ee=4369*Ne,Ie=(240&Ie|Ie>>4)*Ee>>16;k[P+2*xe+0]=(240&ve|ve>>4)*Ee>>16&240|(15&ve|ve<<4)*Ee>>16>>4&15,k[P+2*xe+1]=240&Ie|Ne}P+=de}}function $e(k,P,W,te,de,xe,ve,Ne){var Ee,Ie,et=255;for(Ie=0;Ie<de;++Ie){for(Ee=0;Ee<te;++Ee){var ut=k[P+Ee];xe[ve+4*Ee]=ut,et&=ut}P+=W,ve+=Ne}return et!=255}function Ze(k,P,W,te,de){var xe;for(xe=0;xe<de;++xe)W[te+xe]=k[P+xe]>>8}function ot(){js=U,Un=fe,Gn=$e,hn=Ze}function bt(k,P,W){_[k]=function(te,de,xe,ve,Ne,Ee,Ie,et,ut,dt,it,Ot,yt,tt,rt,At,It){var Pt,ar=It-1>>1,Xt=Ne[Ee+0]|Ie[et+0]<<16,Or=ut[dt+0]|it[Ot+0]<<16;t(te!=null);var sr=3*Xt+Or+131074>>2;for(P(te[de+0],255&sr,sr>>16,yt,tt),xe!=null&&(sr=3*Or+Xt+131074>>2,P(xe[ve+0],255&sr,sr>>16,rt,At)),Pt=1;Pt<=ar;++Pt){var nn=Ne[Ee+Pt]|Ie[et+Pt]<<16,kn=ut[dt+Pt]|it[Ot+Pt]<<16,pn=Xt+nn+Or+kn+524296,en=pn+2*(nn+Or)>>3;sr=en+Xt>>1,Xt=(pn=pn+2*(Xt+kn)>>3)+nn>>1,P(te[de+2*Pt-1],255&sr,sr>>16,yt,tt+(2*Pt-1)*W),P(te[de+2*Pt-0],255&Xt,Xt>>16,yt,tt+(2*Pt-0)*W),xe!=null&&(sr=pn+Or>>1,Xt=en+kn>>1,P(xe[ve+2*Pt-1],255&sr,sr>>16,rt,At+(2*Pt-1)*W),P(xe[ve+2*Pt+0],255&Xt,Xt>>16,rt,At+(2*Pt+0)*W)),Xt=nn,Or=kn}1&It||(sr=3*Xt+Or+131074>>2,P(te[de+It-1],255&sr,sr>>16,yt,tt+(It-1)*W),xe!=null&&(sr=3*Or+Xt+131074>>2,P(xe[ve+It-1],255&sr,sr>>16,rt,At+(It-1)*W)))}}function Rt(){$o[P0]=ON,$o[I0]=yy,$o[uy]=bp,$o[D0]=gu,$o[fp]=Jx,$o[hp]=by,$o[dy]=wy,$o[L0]=yy,$o[Kx]=gu,$o[F0]=Jx,$o[Xx]=by}function ur(k){return k&-16384?0>k?0:255:k>>PN}function Cr(k,P){return ur((19077*k>>8)+(26149*P>>8)-14234)}function Vr(k,P,W){return ur((19077*k>>8)-(6419*P>>8)-(13320*W>>8)+8708)}function $r(k,P){return ur((19077*k>>8)+(33050*P>>8)-17685)}function fn(k,P,W,te,de){te[de+0]=Cr(k,W),te[de+1]=Vr(k,P,W),te[de+2]=$r(k,P)}function va(k,P,W,te,de){te[de+0]=$r(k,P),te[de+1]=Vr(k,P,W),te[de+2]=Cr(k,W)}function ya(k,P,W,te,de){var xe=Vr(k,P,W);P=xe<<3&224|$r(k,P)>>3,te[de+0]=248&Cr(k,W)|xe>>5,te[de+1]=P}function Qa(k,P,W,te,de){var xe=240&$r(k,P)|15;te[de+0]=240&Cr(k,W)|Vr(k,P,W)>>4,te[de+1]=xe}function Ds(k,P,W,te,de){te[de+0]=255,fn(k,P,W,te,de+1)}function ws(k,P,W,te,de){va(k,P,W,te,de),te[de+3]=255}function Po(k,P,W,te,de){fn(k,P,W,te,de),te[de+3]=255}function Ls(k,P){return 0>k?0:k>P?P:k}function il(k,P,W){_[k]=function(te,de,xe,ve,Ne,Ee,Ie,et,ut){for(var dt=et+(-2&ut)*W;et!=dt;)P(te[de+0],xe[ve+0],Ne[Ee+0],Ie,et),P(te[de+1],xe[ve+0],Ne[Ee+0],Ie,et+W),de+=2,++ve,++Ee,et+=2*W;1&ut&&P(te[de+0],xe[ve+0],Ne[Ee+0],Ie,et)}}function Sc(k,P,W){return W==0?k==0?P==0?6:5:P==0?4:0:W}function Zd(k,P,W,te,de){switch(k>>>30){case 3:ll(P,W,te,de,0);break;case 2:Ra(P,W,te,de);break;case 1:Qs(P,W,te,de)}}function C0(k,P){var W,te,de=P.M,xe=P.Nb,ve=k.oc,Ne=k.pc+40,Ee=k.oc,Ie=k.pc+584,et=k.oc,ut=k.pc+600;for(W=0;16>W;++W)ve[Ne+32*W-1]=129;for(W=0;8>W;++W)Ee[Ie+32*W-1]=129,et[ut+32*W-1]=129;for(0<de?ve[Ne-1-32]=Ee[Ie-1-32]=et[ut-1-32]=129:(s(ve,Ne-32-1,127,21),s(Ee,Ie-32-1,127,9),s(et,ut-32-1,127,9)),te=0;te<k.za;++te){var dt=P.ya[P.aa+te];if(0<te){for(W=-1;16>W;++W)n(ve,Ne+32*W-4,ve,Ne+32*W+12,4);for(W=-1;8>W;++W)n(Ee,Ie+32*W-4,Ee,Ie+32*W+4,4),n(et,ut+32*W-4,et,ut+32*W+4,4)}var it=k.Gd,Ot=k.Hd+te,yt=dt.ad,tt=dt.Hc;if(0<de&&(n(ve,Ne-32,it[Ot].y,0,16),n(Ee,Ie-32,it[Ot].f,0,8),n(et,ut-32,it[Ot].ea,0,8)),dt.Za){var rt=ve,At=Ne-32+16;for(0<de&&(te>=k.za-1?s(rt,At,it[Ot].y[15],4):n(rt,At,it[Ot+1].y,0,4)),W=0;4>W;W++)rt[At+128+W]=rt[At+256+W]=rt[At+384+W]=rt[At+0+W];for(W=0;16>W;++W,tt<<=2)rt=ve,At=Ne+ky[W],Bo[dt.Ob[W]](rt,At),Zd(tt,yt,16*+W,rt,At)}else if(rt=Sc(te,de,dt.Ob[0]),Pi[rt](ve,Ne),tt!=0)for(W=0;16>W;++W,tt<<=2)Zd(tt,yt,16*+W,ve,Ne+ky[W]);for(W=dt.Gc,rt=Sc(te,de,dt.Dd),Rl[rt](Ee,Ie),Rl[rt](et,ut),tt=yt,rt=Ee,At=Ie,255&(dt=W>>0)&&(170&dt?af(tt,256,rt,At):Ei(tt,256,rt,At)),dt=et,tt=ut,255&(W>>=8)&&(170&W?af(yt,320,dt,tt):Ei(yt,320,dt,tt)),de<k.Ub-1&&(n(it[Ot].y,0,ve,Ne+480,16),n(it[Ot].f,0,Ee,Ie+224,8),n(it[Ot].ea,0,et,ut+224,8)),W=8*xe*k.B,it=k.sa,Ot=k.ta+16*te+16*xe*k.R,yt=k.qa,dt=k.ra+8*te+W,tt=k.Ha,rt=k.Ia+8*te+W,W=0;16>W;++W)n(it,Ot+W*k.R,ve,Ne+32*W,16);for(W=0;8>W;++W)n(yt,dt+W*k.B,Ee,Ie+32*W,8),n(tt,rt+W*k.B,et,ut+32*W,8)}}function Qu(k,P,W,te,de,xe,ve,Ne,Ee){var Ie=[0],et=[0],ut=0,dt=Ee!=null?Ee.kd:0,it=Ee??new jc;if(k==null||12>W)return 7;it.data=k,it.w=P,it.ha=W,P=[P],W=[W],it.gb=[it.gb];e:{var Ot=P,yt=W,tt=it.gb;if(t(k!=null),t(yt!=null),t(tt!=null),tt[0]=0,12<=yt[0]&&!r(k,Ot[0],"RIFF")){if(r(k,Ot[0]+8,"WEBP")){tt=3;break e}var rt=Me(k,Ot[0]+4);if(12>rt||4294967286<rt){tt=3;break e}if(dt&&rt>yt[0]-8){tt=7;break e}tt[0]=rt,Ot[0]+=12,yt[0]-=12}tt=0}if(tt!=0)return tt;for(rt=0<it.gb[0],W=W[0];;){e:{var At=k;yt=P,tt=W;var It=Ie,Pt=et,ar=Ot=[0];if((sr=ut=[ut])[0]=0,8>tt[0])tt=7;else{if(!r(At,yt[0],"VP8X")){if(Me(At,yt[0]+4)!=10){tt=3;break e}if(18>tt[0]){tt=7;break e}var Xt=Me(At,yt[0]+8),Or=1+ee(At,yt[0]+12);if(2147483648<=Or*(At=1+ee(At,yt[0]+15))){tt=3;break e}ar!=null&&(ar[0]=Xt),It!=null&&(It[0]=Or),Pt!=null&&(Pt[0]=At),yt[0]+=18,tt[0]-=18,sr[0]=1}tt=0}}if(ut=ut[0],Ot=Ot[0],tt!=0)return tt;if(yt=!!(2&Ot),!rt&&ut)return 3;if(xe!=null&&(xe[0]=!!(16&Ot)),ve!=null&&(ve[0]=yt),Ne!=null&&(Ne[0]=0),ve=Ie[0],Ot=et[0],ut&&yt&&Ee==null){tt=0;break}if(4>W){tt=7;break}if(rt&&ut||!rt&&!ut&&!r(k,P[0],"ALPH")){W=[W],it.na=[it.na],it.P=[it.P],it.Sa=[it.Sa];e:{Xt=k,tt=P,rt=W;var sr=it.gb;It=it.na,Pt=it.P,ar=it.Sa,Or=22,t(Xt!=null),t(rt!=null),At=tt[0];var nn=rt[0];for(t(It!=null),t(ar!=null),It[0]=null,Pt[0]=null,ar[0]=0;;){if(tt[0]=At,rt[0]=nn,8>nn){tt=7;break e}var kn=Me(Xt,At+4);if(4294967286<kn){tt=3;break e}var pn=8+kn+1&-2;if(Or+=pn,0<sr&&Or>sr){tt=3;break e}if(!r(Xt,At,"VP8 ")||!r(Xt,At,"VP8L")){tt=0;break e}if(nn[0]<pn){tt=7;break e}r(Xt,At,"ALPH")||(It[0]=Xt,Pt[0]=At+8,ar[0]=kn),At+=pn,nn-=pn}}if(W=W[0],it.na=it.na[0],it.P=it.P[0],it.Sa=it.Sa[0],tt!=0)break}W=[W],it.Ja=[it.Ja],it.xa=[it.xa];e:if(sr=k,tt=P,rt=W,It=it.gb[0],Pt=it.Ja,ar=it.xa,Xt=tt[0],At=!r(sr,Xt,"VP8 "),Or=!r(sr,Xt,"VP8L"),t(sr!=null),t(rt!=null),t(Pt!=null),t(ar!=null),8>rt[0])tt=7;else{if(At||Or){if(sr=Me(sr,Xt+4),12<=It&&sr>It-12){tt=3;break e}if(dt&&sr>rt[0]-8){tt=7;break e}Pt[0]=sr,tt[0]+=8,rt[0]-=8,ar[0]=Or}else ar[0]=5<=rt[0]&&sr[Xt+0]==47&&!(sr[Xt+4]>>5),Pt[0]=rt[0];tt=0}if(W=W[0],it.Ja=it.Ja[0],it.xa=it.xa[0],P=P[0],tt!=0)break;if(4294967286<it.Ja)return 3;if(Ne==null||yt||(Ne[0]=it.xa?2:1),ve=[ve],Ot=[Ot],it.xa){if(5>W){tt=7;break}Ne=ve,dt=Ot,yt=xe,k==null||5>W?k=0:5<=W&&k[P+0]==47&&!(k[P+4]>>5)?(rt=[0],sr=[0],It=[0],Y(Pt=new T,k,P,W),Dt(Pt,rt,sr,It)?(Ne!=null&&(Ne[0]=rt[0]),dt!=null&&(dt[0]=sr[0]),yt!=null&&(yt[0]=It[0]),k=1):k=0):k=0}else{if(10>W){tt=7;break}Ne=Ot,k==null||10>W||!Co(k,P+3,W-3)?k=0:(dt=k[P+0]|k[P+1]<<8|k[P+2]<<16,yt=16383&(k[P+7]<<8|k[P+6]),k=16383&(k[P+9]<<8|k[P+8]),1&dt||3<(dt>>1&7)||!(dt>>4&1)||dt>>5>=it.Ja||!yt||!k?k=0:(ve&&(ve[0]=yt),Ne&&(Ne[0]=k),k=1))}if(!k||(ve=ve[0],Ot=Ot[0],ut&&(Ie[0]!=ve||et[0]!=Ot)))return 3;Ee!=null&&(Ee[0]=it,Ee.offset=P-Ee.w,t(4294967286>P-Ee.w),t(Ee.offset==Ee.ha-W));break}return tt==0||tt==7&&ut&&Ee==null?(xe!=null&&(xe[0]|=it.na!=null&&0<it.na.length),te!=null&&(te[0]=ve),de!=null&&(de[0]=Ot),0):tt}function ef(k,P,W){var te=P.width,de=P.height,xe=0,ve=0,Ne=te,Ee=de;if(P.Da=k!=null&&0<k.Da,P.Da&&(Ne=k.cd,Ee=k.bd,xe=k.v,ve=k.j,11>W||(xe&=-2,ve&=-2),0>xe||0>ve||0>=Ne||0>=Ee||xe+Ne>te||ve+Ee>de))return 0;if(P.v=xe,P.j=ve,P.va=xe+Ne,P.o=ve+Ee,P.U=Ne,P.T=Ee,P.da=k!=null&&0<k.da,P.da){if(!je(Ne,Ee,W=[k.ib],xe=[k.hb]))return 0;P.ib=W[0],P.hb=xe[0]}return P.ob=k!=null&&k.ob,P.Kb=k==null||!k.Sd,P.da&&(P.ob=P.ib<3*te/4&&P.hb<3*de/4,P.Kb=0),1}function tf(k){if(k==null)return 2;if(11>k.S){var P=k.f.RGBA;P.fb+=(k.height-1)*P.A,P.A=-P.A}else P=k.f.kb,k=k.height,P.O+=(k-1)*P.fa,P.fa=-P.fa,P.N+=(k-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(k-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(k-1)*P.lb,P.lb=-P.lb);return 0}function rf(k,P,W,te){if(te==null||0>=k||0>=P)return 2;if(W!=null){if(W.Da){var de=W.cd,xe=W.bd,ve=-2&W.v,Ne=-2&W.j;if(0>ve||0>Ne||0>=de||0>=xe||ve+de>k||Ne+xe>P)return 2;k=de,P=xe}if(W.da){if(!je(k,P,de=[W.ib],xe=[W.hb]))return 2;k=de[0],P=xe[0]}}te.width=k,te.height=P;e:{var Ee=te.width,Ie=te.height;if(k=te.S,0>=Ee||0>=Ie||!(k>=P0&&13>k))k=2;else{if(0>=te.Rd&&te.sd==null){ve=xe=de=P=0;var et=(Ne=Ee*Ba[k])*Ie;if(11>k||(xe=(Ie+1)/2*(P=(Ee+1)/2),k==12&&(ve=(de=Ee)*Ie)),(Ie=i(et+2*xe+ve))==null){k=1;break e}te.sd=Ie,11>k?((Ee=te.f.RGBA).eb=Ie,Ee.fb=0,Ee.A=Ne,Ee.size=et):((Ee=te.f.kb).y=Ie,Ee.O=0,Ee.fa=Ne,Ee.Fd=et,Ee.f=Ie,Ee.N=0+et,Ee.Ab=P,Ee.Cd=xe,Ee.ea=Ie,Ee.W=0+et+xe,Ee.Db=P,Ee.Ed=xe,k==12&&(Ee.F=Ie,Ee.J=0+et+2*xe),Ee.Tc=ve,Ee.lb=de)}if(P=1,de=te.S,xe=te.width,ve=te.height,de>=P0&&13>de)if(11>de)k=te.f.RGBA,P&=(Ne=Math.abs(k.A))*(ve-1)+xe<=k.size,P&=Ne>=xe*Ba[de],P&=k.eb!=null;else{k=te.f.kb,Ne=(xe+1)/2,et=(ve+1)/2,Ee=Math.abs(k.fa),Ie=Math.abs(k.Ab);var ut=Math.abs(k.Db),dt=Math.abs(k.lb),it=dt*(ve-1)+xe;P&=Ee*(ve-1)+xe<=k.Fd,P&=Ie*(et-1)+Ne<=k.Cd,P=(P&=ut*(et-1)+Ne<=k.Ed)&Ee>=xe&Ie>=Ne&ut>=Ne,P&=k.y!=null,P&=k.f!=null,P&=k.ea!=null,de==12&&(P&=dt>=xe,P&=it<=k.Tc,P&=k.F!=null)}else P=0;k=P?0:2}}return k!=0||W!=null&&W.fd&&(k=tf(te)),k}var Za=64,ao=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ol=24,Pa=32,Zu=8,Kr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];me("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(k){return k},_.Predictor2=function(k,P,W){return P[W+0]},_.Predictor3=function(k,P,W){return P[W+1]},_.Predictor4=function(k,P,W){return P[W-1]},_.Predictor5=function(k,P,W){return Ce(Ce(k,P[W+1]),P[W+0])},_.Predictor6=function(k,P,W){return Ce(k,P[W-1])},_.Predictor7=function(k,P,W){return Ce(k,P[W+0])},_.Predictor8=function(k,P,W){return Ce(P[W-1],P[W+0])},_.Predictor9=function(k,P,W){return Ce(P[W+0],P[W+1])},_.Predictor10=function(k,P,W){return Ce(Ce(k,P[W-1]),Ce(P[W+0],P[W+1]))},_.Predictor11=function(k,P,W){var te=P[W+0];return 0>=ue(te>>24&255,k>>24&255,(P=P[W-1])>>24&255)+ue(te>>16&255,k>>16&255,P>>16&255)+ue(te>>8&255,k>>8&255,P>>8&255)+ue(255&te,255&k,255&P)?te:k},_.Predictor12=function(k,P,W){var te=P[W+0];return(Ue((k>>24&255)+(te>>24&255)-((P=P[W-1])>>24&255))<<24|Ue((k>>16&255)+(te>>16&255)-(P>>16&255))<<16|Ue((k>>8&255)+(te>>8&255)-(P>>8&255))<<8|Ue((255&k)+(255&te)-(255&P)))>>>0},_.Predictor13=function(k,P,W){var te=P[W-1];return(Te((k=Ce(k,P[W+0]))>>24&255,te>>24&255)<<24|Te(k>>16&255,te>>16&255)<<16|Te(k>>8&255,te>>8&255)<<8|Te(k>>0&255,te>>0&255))>>>0};var Fs=_.PredictorAdd0;_.PredictorAdd1=Oe,me("Predictor2","PredictorAdd2"),me("Predictor3","PredictorAdd3"),me("Predictor4","PredictorAdd4"),me("Predictor5","PredictorAdd5"),me("Predictor6","PredictorAdd6"),me("Predictor7","PredictorAdd7"),me("Predictor8","PredictorAdd8"),me("Predictor9","PredictorAdd9"),me("Predictor10","PredictorAdd10"),me("Predictor11","PredictorAdd11"),me("Predictor12","PredictorAdd12"),me("Predictor13","PredictorAdd13");var ba=_.PredictorAdd2;We("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),We("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var Js,Ln=_.ColorIndexInverseTransform,Ns=_.MapARGB,Ia=_.VP8LColorIndexInverseTransformAlpha,Io=_.MapAlpha,Ma=_.VP8LPredictorsAdd=[];Ma.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var ds,ta,es,Ci,Ml,Do,nf,ll,Ra,af,Qs,Ei,_c,sf,hu,Lo,Ti,so,Fo,cl,Mo,Ro,E0,xi,js,Un,Gn,hn,fa=i(511),ul=i(2041),T0=i(225),dl=i(767),of=0,O0=ul,pu=T0,Oi=dl,Zs=fa,P0=0,I0=1,uy=2,D0=3,fp=4,hp=5,dy=6,L0=7,Kx=8,F0=9,Xx=10,pp=[2,3,7],fy=[3,3,11],hy=[280,256,256,256,40],py=[0,1,1,1,0],mp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],my=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],xy=8,lf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vp=null,gy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],EN=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],xu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ed=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],TN=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Pi=[],Bo=[],Rl=[],yp=1,vy=2,io=[],$o=[];bt("UpsampleRgbLinePair",fn,3),bt("UpsampleBgrLinePair",va,3),bt("UpsampleRgbaLinePair",Po,4),bt("UpsampleBgraLinePair",ws,4),bt("UpsampleArgbLinePair",Ds,4),bt("UpsampleRgba4444LinePair",Qa,2),bt("UpsampleRgb565LinePair",ya,2);var ON=_.UpsampleRgbLinePair,bp=_.UpsampleBgrLinePair,yy=_.UpsampleRgbaLinePair,gu=_.UpsampleBgraLinePair,Jx=_.UpsampleArgbLinePair,by=_.UpsampleRgba4444LinePair,wy=_.UpsampleRgb565LinePair,td=16,wp=1<<td-1,cf=-227,Np=482,PN=6,M0=0,Qx=i(256),jp=i(256),Ny=i(256),IN=i(256),jy=i(Np-cf),Zx=i(Np-cf);il("YuvToRgbRow",fn,3),il("YuvToBgrRow",va,3),il("YuvToRgbaRow",Po,4),il("YuvToBgraRow",ws,4),il("YuvToArgbRow",Ds,4),il("YuvToRgba4444Row",Qa,2),il("YuvToRgb565Row",ya,2);var ky=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],R0=[0,2,8],DN=[8,7,6,4,4,2,2,2,1,1,1,1],kp=1;this.WebPDecodeRGBA=function(k,P,W,te,de){var xe=I0,ve=new sl,Ne=new Vt;ve.ba=Ne,Ne.S=xe,Ne.width=[Ne.width],Ne.height=[Ne.height];var Ee=Ne.width,Ie=Ne.height,et=new _r;if(et==null||k==null)var ut=2;else t(et!=null),ut=Qu(k,P,W,et.width,et.height,et.Pd,et.Qd,et.format,null);if(ut!=0?Ee=0:(Ee!=null&&(Ee[0]=et.width[0]),Ie!=null&&(Ie[0]=et.height[0]),Ee=1),Ee){Ne.width=Ne.width[0],Ne.height=Ne.height[0],te!=null&&(te[0]=Ne.width),de!=null&&(de[0]=Ne.height);e:{if(te=new Xa,(de=new jc).data=k,de.w=P,de.ha=W,de.kd=1,P=[0],t(de!=null),((k=Qu(de.data,de.w,de.ha,null,null,null,P,null,de))==0||k==7)&&P[0]&&(k=4),(P=k)==0){if(t(ve!=null),te.data=de.data,te.w=de.w+de.offset,te.ha=de.ha-de.offset,te.put=Nr,te.ac=pr,te.bc=jr,te.ma=ve,de.xa){if((k=Ye())==null){ve=1;break e}if(function(dt,it){var Ot=[0],yt=[0],tt=[0];t:for(;;){if(dt==null)return 0;if(it==null)return dt.a=2,0;if(dt.l=it,dt.a=0,Y(dt.m,it.data,it.w,it.ha),!Dt(dt.m,Ot,yt,tt)){dt.a=3;break t}if(dt.xb=vy,it.width=Ot[0],it.height=yt[0],!Je(Ot[0],yt[0],1,dt,null))break t;return 1}return t(dt.a!=0),0}(k,te)){if(te=(P=rf(te.width,te.height,ve.Oa,ve.ba))==0){t:{te=k;r:for(;;){if(te==null){te=0;break t}if(t(te.s.yc!=null),t(te.s.Ya!=null),t(0<te.s.Wb),t((W=te.l)!=null),t((de=W.ma)!=null),te.xb!=0){if(te.ca=de.ba,te.tb=de.tb,t(te.ca!=null),!ef(de.Oa,W,D0)){te.a=2;break r}if(!Qe(te,W.width)||W.da)break r;if((W.da||Ge(te.ca.S))&&ot(),11>te.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),te.ca.f.kb.F!=null&&ot()),te.Pb&&0<te.s.ua&&te.s.vb.X==null&&!ze(te.s.vb,te.s.Wa.Xa)){te.a=1;break r}te.xb=0}if(!pe(te,te.V,te.Ba,te.c,te.i,W.o,_e))break r;de.Dc=te.Ma,te=1;break t}t(te.a!=0),te=0}te=!te}te&&(P=k.a)}else P=k.a}else{if((k=new ga)==null){ve=1;break e}if(k.Fa=de.na,k.P=de.P,k.qc=de.Sa,ea(k,te)){if((P=rf(te.width,te.height,ve.Oa,ve.ba))==0){if(k.Aa=0,W=ve.Oa,t((de=k)!=null),W!=null){if(0<(Ee=0>(Ee=W.Md)?0:100<Ee?255:255*Ee/100)){for(Ie=et=0;4>Ie;++Ie)12>(ut=de.pb[Ie]).lc&&(ut.ia=Ee*DN[0>ut.lc?0:ut.lc]>>3),et|=ut.ia;et&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=W.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}bc(k,te)||(P=k.a)}}else P=k.a}P==0&&ve.Oa!=null&&ve.Oa.fd&&(P=tf(ve.ba))}ve=P}xe=ve!=0?null:11>xe?Ne.f.RGBA.eb:Ne.f.kb.y}else xe=null;return xe};var Ba=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,E){for(var I="",A=0;A<4;A++)I+=String.fromCharCode(_[E++]);return I}function f(_,E){return(_[E+0]<<0|_[E+1]<<8|_[E+2]<<16)>>>0}function d(_,E){return(_[E+0]<<0|_[E+1]<<8|_[E+2]<<16|_[E+3]<<24)>>>0}new c;var p=[0],h=[0],g=[],x=new c,m=e,v=function(_,E){var I={},A=0,C=!1,F=0,M=0;if(I.frames=[],!function(R,z,L,H){for(var ne=0;ne<H;ne++)if(R[z+ne]!=L.charCodeAt(ne))return!0;return!1}(_,E,"RIFF",4)){var B,K;for(d(_,E+=4),E+=8;E<_.length;){var G=u(_,E),Y=d(_,E+=4);E+=4;var q=Y+(1&Y);switch(G){case"VP8 ":case"VP8L":I.frames[A]===void 0&&(I.frames[A]={}),(T=I.frames[A]).src_off=C?M:E-8,T.src_size=F+Y+8,A++,C&&(C=!1,F=0,M=0);break;case"VP8X":(T=I.header={}).feature_flags=_[E];var X=E+4;T.canvas_width=1+f(_,X),X+=3,T.canvas_height=1+f(_,X),X+=3;break;case"ALPH":C=!0,F=q+8,M=E-8;break;case"ANIM":(T=I.header).bgcolor=d(_,E),X=E+4,T.loop_count=(B=_)[(K=X)+0]<<0|B[K+1]<<8,X+=2;break;case"ANMF":var V,T;(T=I.frames[A]={}).offset_x=2*f(_,E),E+=3,T.offset_y=2*f(_,E),E+=3,T.width=1+f(_,E),E+=3,T.height=1+f(_,E),E+=3,T.duration=f(_,E),E+=3,V=_[E++],T.dispose=1&V,T.blend=V>>1&1}G!="ANMF"&&(E+=q)}return I}}(m,0);v.response=m,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,w=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,p=[y.canvas_height],h=[y.canvas_width];for(var b=0;b<w.length&&w[b].blend!=0;b++);}var N=w[0],S=x.WebPDecodeRGBA(m,N.src_off,N.src_size,h,p);N.rgba=S,N.imgwidth=h[0],N.imgheight=p[0];for(var j=0;j<h[0]*p[0]*4;j++)g[j]=S[j];return this.width=h,this.height=p,this.data=g,this}(function(e){var t=function(){return typeof bS=="function"},r=function(p,h,g,x){var m=4,v=o;switch(x){case e.image_compression.FAST:m=1,v=i;break;case e.image_compression.MEDIUM:m=6,v=l;break;case e.image_compression.SLOW:m=9,v=c}p=n(p,h,g,v);var y=bS(p,{level:m});return e.__addimage__.arrayBufferToBinaryString(y)},n=function(p,h,g,x){for(var m,v,y,w=p.length/h,b=new Uint8Array(p.length+w),N=f(),S=0;S<w;S+=1){if(y=S*h,m=p.subarray(y,y+h),x)b.set(x(m,g,v),y+S);else{for(var j,_=N.length,E=[];j<_;j+=1)E[j]=N[j](m,g,v);var I=d(E.concat());b.set(E[I],y+S)}v=m}return b},s=function(p){var h=Array.apply([],p);return h.unshift(0),h},i=function(p,h){var g,x=[],m=p.length;x[0]=1;for(var v=0;v<m;v+=1)g=p[v-h]||0,x[v+1]=p[v]-g+256&255;return x},o=function(p,h,g){var x,m=[],v=p.length;m[0]=2;for(var y=0;y<v;y+=1)x=g&&g[y]||0,m[y+1]=p[y]-x+256&255;return m},l=function(p,h,g){var x,m,v=[],y=p.length;v[0]=3;for(var w=0;w<y;w+=1)x=p[w-h]||0,m=g&&g[w]||0,v[w+1]=p[w]+256-(x+m>>>1)&255;return v},c=function(p,h,g){var x,m,v,y,w=[],b=p.length;w[0]=4;for(var N=0;N<b;N+=1)x=p[N-h]||0,m=g&&g[N]||0,v=g&&g[N-h]||0,y=u(x,m,v),w[N+1]=p[N]-y+256&255;return w},u=function(p,h,g){if(p===h&&h===g)return p;var x=Math.abs(h-g),m=Math.abs(p-g),v=Math.abs(p+h-g-g);return x<=m&&x<=v?p:m<=v?h:g},f=function(){return[s,i,o,l,c]},d=function(p){var h=p.map(function(g){return g.reduce(function(x,m){return x+Math.abs(m)},0)});return h.indexOf(Math.min.apply(null,h))};e.processPNG=function(p,h,g,x){var m,v,y,w,b,N,S,j,_,E,I,A,C,F,M,B=this.decode.FLATE_DECODE,K="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(y=new WAe(p)).imgData,v=y.bits,m=y.colorSpace,b=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){_=(j=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,I=new Uint8Array(_*y.colors),E=new Uint8Array(_);var G,Y=y.pixelBitlength-y.bits;for(F=0,M=0;F<_;F++){for(C=j[F],G=0;G<Y;)I[M++]=C>>>G&255,G+=y.bits;E[F]=C>>>G&255}}if(y.bits===16){_=(j=new Uint32Array(y.decodePixels().buffer)).length,I=new Uint8Array(_*(32/y.pixelBitlength)*y.colors),E=new Uint8Array(_*(32/y.pixelBitlength)),A=y.colors>1,F=0,M=0;for(var q=0;F<_;)C=j[F++],I[M++]=C>>>0&255,A&&(I[M++]=C>>>16&255,C=j[F++],I[M++]=C>>>0&255),E[q++]=C>>>16&255;v=8}x!==e.image_compression.NONE&&t()?(p=r(I,y.width*y.colors,y.colors,x),S=r(E,y.width,1,x)):(p=I,S=E,B=void 0)}if(y.colorType===3&&(m=this.color_spaces.INDEXED,N=y.palette,y.transparency.indexed)){var X=y.transparency.indexed,V=0;for(F=0,_=X.length;F<_;++F)V+=X[F];if((V/=255)===_-1&&X.indexOf(0)!==-1)w=[X.indexOf(0)];else if(V!==_){for(j=y.decodePixels(),E=new Uint8Array(j.length),F=0,_=j.length;F<_;F++)E[F]=X[j[F]];S=r(E,y.width,1)}}var T=function(R){var z;switch(R){case e.image_compression.FAST:z=11;break;case e.image_compression.MEDIUM:z=13;break;case e.image_compression.SLOW:z=14;break;default:z=12}return z}(x);return B===this.decode.FLATE_DECODE&&(K="/Predictor "+T+" "),K+="/Colors "+b+" /BitsPerComponent "+v+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(S&&this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),{alias:g,data:p,index:h,filter:B,decodeParameters:K,transparency:w,palette:N,sMask:S,predictor:T,width:y.width,height:y.height,bitsPerComponent:v,colorSpace:m}}}})(Ur.API),function(e){e.processGIF89A=function(t,r,n,s){var i=new VAe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},f=new d4(100).encode(u,100);return e.processJPEG.call(this,f,r,n,s)},e.processGIF87A=e.processGIF89A}(Ur.API),Fc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ia.log("bit decode error:"+r)}},Fc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Fc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*s+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Fc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Fc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=u}this.pos+=e}},Fc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},Fc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Fc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},Fc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var i=new Fc(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new d4(100).encode(c,100);return e.processJPEG.call(this,u,r,n,s)}}(Ur.API),$I.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var i=new $I(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new d4(100).encode(c,100);return e.processJPEG.call(this,u,r,n,s)}}(Ur.API),Ur.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,u=0;u<s;u+=4){var f=n[u],d=n[u+1],p=n[u+2],h=n[u+3];i[l++]=f,i[l++]=d,i[l++]=p,o[c++]=h}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ur.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wp=Ur.API,Lb=Wp.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=u.fof?u.fof:1,d=t.doKerning!==!1,p=0,h=e.length,g=0,x=l[0]||c,m=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?m.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(p=d&&Jn(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/f:0,m.push((l[n]||x)/c+p)),g=n;return m},FI=Wp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Wp.processArabic&&(e=Wp.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:Lb.apply(this,arguments).reduce(function(i,o){return i+o},0)},MI=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},RI=function(e,t,r){r||(r={});var n,s,i,o,l,c,u,f=[],d=[f],p=r.textIndent||0,h=0,g=0,x=e.split(" "),m=Lb.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),y=[];x.map(function(b){(b=b.split(/\s*\n/)).length>1?y=y.concat(b.map(function(N,S){return(S&&N.length?`
`:"")+N})):y.push(b[0])}),x=y,c=FI.apply(this,[v,r])}for(i=0,o=x.length;i<o;i++){var w=0;if(n=x[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),p+h+(g=(s=Lb.apply(this,[n,r])).reduce(function(b,N){return b+N},0))>t||w){if(g>t){for(l=MI.apply(this,[n,s,t-(p+h),t]),f.push(l.shift()),f=[l.pop()];l.length;)d.push([l.shift()]);g=s.slice(n.length-(f[0]?f[0].length:0)).reduce(function(b,N){return b+N},0)}else f=[n];d.push(f),p=g+c,h=m}else f.push(n),p+=h+g,h=m}return u=c?function(b,N){return(N?v:"")+b.join(" ")}:function(b){return b.join(" ")},d.map(u)},Wp.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(RI.apply(this,[n[l],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},o=e.__fontmetrics__.compress=function(d){var p,h,g,x,m=["{"];for(var v in d){if(p=d[v],isNaN(parseInt(v,10))?h="'"+v+"'":(v=parseInt(v,10),h=(h=i(v).slice(2)).slice(0,-1)+n[h.slice(-1)]),typeof p=="number")p<0?(g=i(p).slice(3),x="-"):(g=i(p).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(Jn(p)!=="object")throw new Error("Don't know what to do with value type "+Jn(p)+".");g=o(p)}m.push(h+g)}return m.push("}"),m.join("")},l=e.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,h,g,x,m={},v=1,y=m,w=[],b="",N="",S=d.length-1,j=1;j<S;j+=1)(x=d[j])=="'"?p?(g=p.join(""),p=void 0):p=[]:p?p.push(x):x=="{"?(w.push([y,g]),y={},g=void 0):x=="}"?((h=w.pop())[0][h[1]]=y,g=void 0,y=h[0]):x=="-"?v=-1:g===void 0?r.hasOwnProperty(x)?(b+=r[x],g=parseInt(b,16)*v,v=1,b=""):b+=x:r.hasOwnProperty(x)?(N+=r[x],y[g]=parseInt(N,16)*v,v=1,g=void 0,N=""):N+=x;return m},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(d){var p=d.font,h=f.Unicode[p.postScriptName];h&&(p.metadata.Unicode={},p.metadata.Unicode.widths=h.widths,p.metadata.Unicode.kerning=h.kerning);var g=u.Unicode[p.postScriptName];g&&(p.metadata.Unicode.encoding=g,p.encoding=g.codePages[0])}])}(Ur.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(bv(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(Ur),function(e){function t(){return(zr.canvg?Promise.resolve(zr.canvg):I2(()=>import("./index.es-DUaYUjr8.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ur.API.addSvgAsImage=function(r,n,s,i,o,l,c,u){if(isNaN(n)||isNaN(s))throw ia.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw ia.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return t().then(function(g){return g.fromString(d,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(p)}).then(function(){h.addImage(f.toDataURL("image/jpeg",1),n,s,i,o,c,u)})}}(),Ur.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},Ur.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,f=0,d=0;function p(g,x){var m,v=!1;for(m=0;m<g.length;m+=1)g[m]===x&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(d=0;d<h;d+=1)r[l[d]].value=r[l[d]].defaultValue,r[l[d]].explicitSet=!1}if(Jn(e)==="object"){for(s in e)if(i=e[s],p(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ur.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],d=0,p=i.length;d<p;++d){if(l=o.metadata.characterToGlyph(i.charCodeAt(d)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(d),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(u[4-l.length],l)}return f.join("")},n=function(i){var o,l,c,u,f,d,p;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,p=(l=Object.keys(i).sort(function(h,g){return h-g})).length;d<p;d++)o=l[d],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var d=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",g=0;g<p.length;g++)h+=String.fromCharCode(p[g]);var x=u();f({data:h,addLength1:!0,objectId:x}),c("endobj");var m=u();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:m}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Kp(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Kp(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+m+" 0 R"),c("/BaseFont /"+Kp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var d=l.metadata.rawData,p="",h=0;h<d.length;h++)p+=String.fromCharCode(d[h]);var g=u();f({data:p,addLength1:!0,objectId:g}),c("endobj");var x=u();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var m=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Kp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Kp(l.fontName)+"/FontDescriptor "+m+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,u=i.y,f=i.options||{},d=i.mutex||{},p=d.pdfEscape,h=d.activeFontKey,g=d.fonts,x=h,m="",v=0,y="",w=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:f,mutex:d};for(y=l,x=h,Array.isArray(l)&&(y=l[0]),v=0;v<y.length;v+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?m+=y[v]:m+="";var b="";return parseInt(x.slice(1))<14||w==="WinAnsiEncoding"?b=p(m,x).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(b=r(m,g[x])),d.isHex=!0,{text:b,x:c,y:u,options:f,mutex:d}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([s(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(s(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(Ur),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ur.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,u,f,d=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,w=0;this.__bidiEngine__={};var b=function(A){var C=A.charCodeAt(),F=C>>8,M=x[F];return M!==void 0?d[256*M+(255&C)]:F===252||F===253?"AL":v.test(F)?"L":F===8?"R":"N"},N=function(A){for(var C,F=0;F<A.length;F++){if((C=b(A.charAt(F)))==="L")return!1;if(C==="R")return!0}return!1},S=function(A,C,F,M){var B,K,G,Y,q=C[M];switch(q){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(q="AN");break;case"AL":y=!0,q="R";break;case"WS":q="N";break;case"CS":M<1||M+1>=C.length||(B=F[M-1])!=="EN"&&B!=="AN"||(K=C[M+1])!=="EN"&&K!=="AN"?q="N":y&&(K="AN"),q=K===B?K:"N";break;case"ES":q=(B=M>0?F[M-1]:"B")==="EN"&&M+1<C.length&&C[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&F[M-1]==="EN"){q="EN";break}if(y){q="N";break}for(G=M+1,Y=C.length;G<Y&&C[G]==="ET";)G++;q=G<Y&&C[G]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Y=C.length,G=M+1;G<Y&&C[G]==="NSM";)G++;if(G<Y){var X=A[M],V=X>=1425&&X<=2303||X===64286;if(B=C[G],V&&(B==="R"||B==="AL")){q="R";break}}}q=M<1||(B=C[M-1])==="B"?"N":F[M-1];break;case"B":y=!1,s=!0,q=w;break;case"S":i=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":q="N"}return q},j=function(A,C,F){var M=A.split("");return F&&_(M,F,{hiLevel:w}),M.reverse(),C&&C.reverse(),M.join("")},_=function(A,C,F){var M,B,K,G,Y,q=-1,X=A.length,V=0,T=[],R=w?h:p,z=[];for(y=!1,s=!1,i=!1,B=0;B<X;B++)z[B]=b(A[B]);for(K=0;K<X;K++){if(Y=V,T[K]=S(A,z,T,K),M=240&(V=R[Y][g[T[K]]]),V&=15,C[K]=G=R[V][5],M>0)if(M===16){for(B=q;B<K;B++)C[B]=1;q=-1}else q=-1;if(R[V][6])q===-1&&(q=K);else if(q>-1){for(B=q;B<K;B++)C[B]=G;q=-1}z[K]==="B"&&(C[K]=0),F.hiLevel|=G}i&&function(L,H,ne){for(var se=0;se<ne;se++)if(L[se]==="S"){H[se]=w;for(var Q=se-1;Q>=0&&L[Q]==="WS";Q--)H[Q]=w}}(z,C,X)},E=function(A,C,F,M,B){if(!(B.hiLevel<A)){if(A===1&&w===1&&!s)return C.reverse(),void(F&&F.reverse());for(var K,G,Y,q,X=C.length,V=0;V<X;){if(M[V]>=A){for(Y=V+1;Y<X&&M[Y]>=A;)Y++;for(q=V,G=Y-1;q<G;q++,G--)K=C[q],C[q]=C[G],C[G]=K,F&&(K=F[q],F[q]=F[G],F[G]=K);V=Y}V++}}},I=function(A,C,F){var M=A.split(""),B={hiLevel:w};return F||(F=[]),_(M,F,B),function(K,G,Y){if(Y.hiLevel!==0&&f)for(var q,X=0;X<K.length;X++)G[X]===1&&(q=m.indexOf(K[X]))>=0&&(K[X]=m[q+1])}(M,F,B),E(2,M,C,F,B),E(1,M,C,F,B),M.join("")};return this.__bidiEngine__.doBidiReorder=function(A,C,F){if(function(B,K){if(K)for(var G=0;G<B.length;G++)K[G]=G;l===void 0&&(l=N(B)),u===void 0&&(u=N(B))}(A,C),o||!c||u)if(o&&c&&l^u)w=l?1:0,A=j(A,C,F);else if(!o&&c&&u)w=l?1:0,A=I(A,C,F),A=j(A,C);else if(!o||l||c||u){if(o&&!c&&l^u)A=j(A,C),l?(w=0,A=I(A,C,F)):(w=1,A=I(A,C,F),A=j(A,C));else if(o&&l&&!c&&u)w=1,A=I(A,C,F),A=j(A,C);else if(!o&&!c&&l^u){var M=f;l?(w=1,A=I(A,C,F),w=0,f=!1,A=I(A,C,F),f=M):(w=0,A=I(A,C,F),A=j(A,C),w=1,f=!1,A=I(A,C,F),f=M,A=j(A,C))}}else w=0,A=I(A,C,F);else w=l?1:0,A=I(A,C,F);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,c=A.isOutputVisual,l=A.isInputRtl,u=A.isOutputRtl,f=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text,i=(n.x,n.y,n.options||{}),o=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Ur),Ur.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new f0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new oCe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new GAe(this.contents),this.head=new XAe(this),this.name=new eCe(this),this.cmap=new NU(this),this.toUnicode={},this.hhea=new YAe(this),this.maxp=new tCe(this),this.hmtx=new rCe(this),this.post=new QAe(this),this.os2=new JAe(this),this.loca=new iCe(this),this.glyf=new nCe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var lu,f0=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),GAe=function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,u,f,d,p,h,g,x;for(x in h=Object.keys(r).length,c=Math.log(2),d=16*Math.floor(Math.log(h)/c),o=Math.floor(d/c),f=16*h-d,(s=new f0).writeInt(this.scalarType),s.writeShort(h),s.writeShort(d),s.writeShort(o),s.writeShort(f),i=16*h,u=s.pos+i,l=null,g=[],r)for(p=r[x],s.writeString(x),s.writeInt(e(p)),s.writeInt(u),s.writeInt(p.length),g=g.concat(p),x==="head"&&(l=u),u+=p.length;u%4;)g.push(0),u++;return s.write(g),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=jU.call(r);r.length%4;)r.push(0);for(i=new f0(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t}(),KAe={}.hasOwnProperty,Yu=function(e,t){for(var r in t)KAe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};lu=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var XAe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new f0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),UI=function(){function e(t,r){var n,s,i,o,l,c,u,f,d,p,h,g,x,m,v,y,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,i=function(){var b,N;for(N=[],c=b=0;0<=p?b<p:b>p;c=0<=p?++b:--b)N.push(t.readUInt16());return N}(),t.pos+=2,x=function(){var b,N;for(N=[],c=b=0;0<=p?b<p:b>p;c=0<=p?++b:--b)N.push(t.readUInt16());return N}(),u=function(){var b,N;for(N=[],c=b=0;0<=p?b<p:b>p;c=0<=p?++b:--b)N.push(t.readUInt16());return N}(),f=function(){var b,N;for(N=[],c=b=0;0<=p?b<p:b>p;c=0<=p?++b:--b)N.push(t.readUInt16());return N}(),s=(this.length-t.pos+this.offset)/2,l=function(){var b,N;for(N=[],c=b=0;0<=s?b<s:b>s;c=0<=s?++b:--b)N.push(t.readUInt16());return N}(),c=v=0,w=i.length;v<w;c=++v)for(m=i[c],n=y=g=x[c];g<=m?y<=m:y>=m;n=g<=m?++y:--y)f[c]===0?o=n+u[c]:(o=l[f[c]/2+(n-g)-(p-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=d}return e.encode=function(t,r){var n,s,i,o,l,c,u,f,d,p,h,g,x,m,v,y,w,b,N,S,j,_,E,I,A,C,F,M,B,K,G,Y,q,X,V,T,R,z,L,H,ne,se,Q,re,Ae,ee;switch(M=new f0,o=Object.keys(t).sort(function(Me,ze){return Me-ze}),r){case"macroman":for(x=0,m=function(){var Me=[];for(g=0;g<256;++g)Me.push(0);return Me}(),y={0:0},i={},B=0,q=o.length;B<q;B++)y[Q=t[s=o[B]]]==null&&(y[Q]=++x),i[s]={old:t[s],new:y[t[s]]},m[s]=y[t[s]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(m),{charMap:i,subtable:M.data,maxGlyphID:x+1};case"unicode":for(C=[],d=[],w=0,y={},n={},v=u=null,K=0,X=o.length;K<X;K++)y[N=t[s=o[K]]]==null&&(y[N]=++w),n[s]={old:N,new:y[N]},l=y[N]-s,v!=null&&l===u||(v&&d.push(v),C.push(s),u=l),v=s;for(v&&d.push(v),d.push(65535),C.push(65535),I=2*(E=C.length),_=2*Math.pow(Math.log(E)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,j=2*E-_,c=[],S=[],h=[],g=G=0,V=C.length;G<V;g=++G){if(A=C[g],f=d[g],A===65535){c.push(0),S.push(0);break}if(A-(F=n[A].new)>=32768)for(c.push(0),S.push(2*(h.length+E-g)),s=Y=A;A<=f?Y<=f:Y>=f;s=A<=f?++Y:--Y)h.push(n[s].new);else c.push(F-A),S.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*E+2*h.length),M.writeUInt16(0),M.writeUInt16(I),M.writeUInt16(_),M.writeUInt16(p),M.writeUInt16(j),ne=0,T=d.length;ne<T;ne++)s=d[ne],M.writeUInt16(s);for(M.writeUInt16(0),se=0,R=C.length;se<R;se++)s=C[se],M.writeUInt16(s);for(re=0,z=c.length;re<z;re++)l=c[re],M.writeUInt16(l);for(Ae=0,L=S.length;Ae<L;Ae++)b=S[Ae],M.writeUInt16(b);for(ee=0,H=h.length;ee<H;ee++)x=h[ee],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:w+1}}},e}(),NU=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new UI(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=UI.encode(r,n),(i=new f0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),YAe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),JAe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),QAe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),ZAe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},eCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,u,f,d,p,h;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=d=0,p=s.length;d<p;o=++d)i=s[o],r.pos=i.offset,f=r.readString(i.length),l=new ZAe(f,i),u[h=i.nameID]==null&&(u[h]=[]),u[i.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),tCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),rCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,d;for(d=[],n=f=0;0<=i?f<i:f>i;n=0<=i?++f:--f)d.push(r.readInt16());return d}(),this.widths=(function(){var f,d,p,h;for(h=[],f=0,d=(p=this.metrics).length;f<d;f++)o=p[f],h.push(o.advance);return h}).call(this),s=this.widths[this.widths.length-1],u=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)u.push(this.widths.push(s));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),jU=[].slice,nCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,u,f,d,p;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new f0(n.read(i))).readShort(),f=c.readShort(),p=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[r]=l===-1?new sCe(c,f,p,u,d):new aCe(c,l,f,p,u,d),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),aCe=function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),sCe=function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new f0(jU.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),iCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yu(t,lu),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(i+=u)}for(var f=new Array(4*s.length),d=0;d<s.length;++d)f[4*d+3]=255&s[d],f[4*d+2]=(65280&s[d])>>8,f[4*d+1]=(16711680&s[d])>>16,f[4*d]=(4278190080&s[d])>>24;return f},t}(),oCe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,u,f,d,p,h,g,x,m,v;for(s in n=NU.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},v=n.charMap)h[(c=v[s]).old]=c.new;for(g in p=n.maxGlyphID,o)g in h||(h[g]=p++);return f=function(y){var w,b;for(w in b={},y)b[y[w]]=w;return b}(h),d=Object.keys(f).sort(function(y,w){return y-w}),x=function(){var y,w,b;for(b=[],y=0,w=d.length;y<w;y++)l=d[y],b.push(f[l]);return b}(),i=this.font.glyf.encode(o,x,h),u=this.font.loca.encode(i.offsets,x),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();Ur.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const lCe=({onCreateInvoice:e,currentUser:t})=>{var ze,oe,J,je;const{showSuccess:r,showError:n,showInfo:s}=Wn(),[i,o]=D.useState([]),[l,c]=D.useState([]),[u,f]=D.useState(null),[d,p]=D.useState(!0),[h,g]=D.useState(!1),[x,m]=D.useState(!1),[v,y]=D.useState([]),[w,b]=D.useState(!1),[N,S]=D.useState(!1),[j,_]=D.useState(!1),[E,I]=D.useState(!1),[A,C]=D.useState([]),[F,M]=D.useState(null),[B,K]=D.useState({description:"",quantity:1,rate:0}),[G,Y]=D.useState(!1),[q,X]=D.useState(!1),[V,T]=D.useState(Es),R=D.useCallback(async()=>{p(!0);try{const ce=(t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,ye=await bR(ce),me=(ye==null?void 0:ye.data)||ye||[];o(Array.isArray(me)?me:[]);try{const ge=await iu();c((ge==null?void 0:ge.data)||ge||[])}catch{c([])}}catch(ce){n(ce.message||"Failed to load invoices")}finally{p(!1)}},[t,n]);D.useEffect(()=>{R()},[R]),D.useEffect(()=>{const ce=()=>R();return window.addEventListener("refresh-invoices",ce),()=>window.removeEventListener("refresh-invoices",ce)},[R]);const z=ce=>l.find(ye=>ye.id===ce),L=ce=>{switch(ce){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},H={totalOutstanding:i.filter(ce=>ce.status!=="Paid").reduce((ce,ye)=>ce+(ye.amount||0),0),awaitingPayment:i.filter(ce=>ce.status!=="Paid").reduce((ce,ye)=>ce+(ye.amount||0),0),paidThisMonth:i.filter(ce=>ce.status==="Paid").reduce((ce,ye)=>ce+(ye.amount||0),0)},ne=()=>{v.length===i.length?y([]):y(i.map(ce=>ce.id))},se=async()=>{const ce=[...v];if(ce.length!==0){b(!0),s(`Processing payment status for ${ce.length} items...`);try{await Promise.all(ce.map(ye=>gb(ye,{status:"Paid"}))),o(ye=>ye.map(me=>ce.includes(me.id)?{...me,status:"Paid"}:me)),r(`Successfully marked ${ce.length} invoices as paid`),y([]),R()}catch{n("Bulk update failed. Some items may not have been updated.")}finally{b(!1)}}},Q=async()=>{[...v].length!==0&&_(!0)},re=async()=>{const ce=[...v];if(ce.length!==0){b(!0),_(!1),s(`Executing batch deletion for ${ce.length} registry entries...`);try{await Promise.all(ce.map(ye=>zP(ye))),o(ye=>ye.filter(me=>!ce.includes(me.id))),r(`Successfully removed ${ce.length} invoices from registry`),y([]),R()}catch{n("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{b(!1)}}};D.useEffect(()=>{if(u){const ce=u.lineItems||u.items||[];C(ce),I(!1),M(null),K({description:"",quantity:1,rate:0}),T(u.currency||Es),X(!1)}},[u]);const Ae=async()=>{if(u){g(!0);try{await gb(u.id,{items:A,lineItems:A}),o(ce=>ce.map(ye=>ye.id===u.id?{...ye,items:A,lineItems:A}:ye)),f({...u,items:A,lineItems:A}),I(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(ce){console.error("Failed to save breakdown:",ce),n(ce.message||"Failed to save breakdown")}finally{g(!1)}}},ee=async()=>{if(u){g(!0);try{await gb(u.id,{status:"Paid"}),o(ce=>ce.map(ye=>ye.id===u.id?{...ye,status:"Paid"}:ye)),f({...u,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(ce){console.error("Failed to update invoice:",ce),n(ce.message||"Failed to update invoice")}finally{g(!1)}}},Me=async()=>{if(u){m(!0);try{await zP(u.id),o(ce=>ce.filter(ye=>ye.id!==u.id)),f(null),S(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(ce){console.error("Failed to delete invoice:",ce),n(ce.message||"Failed to delete invoice")}finally{m(!1)}}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(Qr,{className:"w-4 h-4"})," Create Invoice"]})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${H.totalOutstanding.toLocaleString()}`,icon:a.jsx(Md,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${H.awaitingPayment.toLocaleString()}`,icon:a.jsx(Ha,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${H.paidThisMonth.toLocaleString()}`,icon:a.jsx(tn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((ce,ye)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl ${ce.bg} ${ce.color} flex items-center justify-center`,children:nt.cloneElement(ce.icon,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ce.label}),a.jsx("h3",{className:"text-xl font-black text-slate-900",children:ce.value})]})]},ye))}),a.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[a.jsx("th",{className:"px-6 py-4 w-10",children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&v.length===i.length,onChange:ne})}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-right"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-50",children:d?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center",children:a.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(ce=>{var me,ge,Ce;const ye=v.includes(ce.id);return a.jsxs("tr",{onClick:()=>f(ce),className:`group transition-colors cursor-pointer ${ye?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[a.jsx("td",{className:"px-6 py-4",onClick:Ue=>Ue.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ye,onChange:()=>y(Ue=>ye?Ue.filter(Te=>Te!==ce.id):[...Ue,ce.id])})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:ce.number}),a.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",ce.id.substring(0,8)]})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{src:(me=z(ce.companyId))==null?void 0:me.logo,fallbackText:(ge=z(ce.companyId))==null?void 0:ge.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:((Ce=z(ce.companyId))==null?void 0:Ce.name)||"Unknown Partner"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm font-bold text-slate-900",children:bd(ce.amount,ce.currency)})}),a.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:ce.dueDate}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${L(ce.status)}`,children:ce.status})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx(Ea,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},ce.id)})})]})})}),v.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:v.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:ce=>{ce.stopPropagation(),se()},disabled:w,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[w?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(tn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),a.jsxs("button",{onClick:ce=>{ce.stopPropagation(),Q()},disabled:w,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[w?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ar,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>y([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]})}),u&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>f(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:a.jsx(pa,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:u.number}),a.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${L(u.status)}`,children:u.status})]}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[a.jsx(ls,{src:(ze=z(u.companyId))==null?void 0:ze.logo,fallbackText:((oe=z(u.companyId))==null?void 0:oe.name)||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((J=z(u.companyId))==null?void 0:J.name)||"Unknown Company"}),a.jsx("p",{className:"text-xs text-slate-500",children:((je=z(u.companyId))==null?void 0:je.website)||""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),q?a.jsx("button",{onClick:async()=>{g(!0);try{await gb(u.id,{currency:V}),o(ce=>ce.map(ye=>ye.id===u.id?{...ye,currency:V}:ye)),f({...u,currency:V}),X(!1),r("Currency updated successfully!")}catch(ce){n(ce.message||"Failed to update currency")}finally{g(!1)}},disabled:h,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:a.jsx(Vs,{className:"w-3 h-3"})}):a.jsx("button",{onClick:()=>X(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:a.jsx(Cl,{className:"w-3 h-3"})})]}),q?a.jsx("select",{value:V,onChange:ce=>T(ce.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:yx.map(ce=>a.jsxs("option",{value:ce.code,children:[ce.code," (",ce.symbol,")"]},ce.code))}):a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:bd(u.amount,u.currency)})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:u.dueDate})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),a.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:u.description||"No additional strategic description provided for this statement."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),E?a.jsxs("button",{onClick:Ae,disabled:h,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[a.jsx(Vs,{className:"w-3 h-3"})," ",h?"Saving...":"Save"]}):a.jsxs("button",{onClick:()=>I(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[a.jsx(Cl,{className:"w-3 h-3"})," Edit"]})]}),a.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[A.map(ce=>a.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:ce.description}),a.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",ce.quantity," @ ",pd(u.currency),ce.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:bd(ce.amount,u.currency)})]},ce.id)),A.length===0&&a.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[u.status!=="Paid"&&a.jsxs("button",{onClick:ee,disabled:h,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[h?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(tn,{className:"w-4 h-4"})," Confirm Receipt"]}),a.jsx("button",{onClick:()=>S(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:a.jsx(Ar,{className:"w-5 h-5"})})]})]})]}),N&&u&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>S(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(Ar,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),a.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>S(!1),disabled:x,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:Me,disabled:x,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),j&&v.length>0&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>_(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(Ar,{className:"w-8 h-8"})}),a.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",v.length," Invoice",v.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",v.length," invoice",v.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>_(!1),disabled:w,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:re,disabled:w,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${v.length} Invoice${v.length>1?"s":""}`})]})]})})]})]})},cCe=()=>a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),a.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(lc,{className:"w-4 h-4"})," Invite Member"]})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),a.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),a.jsx("div",{className:"divide-y divide-slate-100",children:t2.map(e=>a.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ls,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&a.jsx(k5,{className:"w-4 h-4 text-indigo-600"})]}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[a.jsx(xa,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),a.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:a.jsx(OF,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),uCe=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:n=1,circularCrop:s=!0})=>{const[i,o]=D.useState({x:0,y:0}),[l,c]=D.useState(.5),[u,f]=D.useState(!1),[d,p]=D.useState({x:0,y:0}),[h,g]=D.useState(!1),[x,m]=D.useState(!1),v=D.useRef(null),y=D.useRef(null),w=D.useRef(300),b=D.useCallback(()=>{if(!y.current||!v.current)return null;const I=y.current.getBoundingClientRect(),A=w.current,C=I.width/2,F=I.height/2,M=v.current.getBoundingClientRect(),B=M.left-I.left,K=M.top-I.top,G=(C-A/2-B-i.x)/l,Y=(F-A/2-K-i.y)/l,q=A/l;return{x:Math.max(0,G*(v.current.naturalWidth/v.current.width)),y:Math.max(0,Y*(v.current.naturalHeight/v.current.height)),width:Math.min(v.current.naturalWidth,q*(v.current.naturalWidth/v.current.width)),height:Math.min(v.current.naturalHeight,q*(v.current.naturalHeight/v.current.height))}},[i,l]),N=D.useCallback(async()=>{if(v.current){g(!0);try{const E=b();if(!E)throw new Error("Failed to calculate crop area");const I=v.current,A=document.createElement("canvas"),C=A.getContext("2d");if(!C)throw new Error("Failed to create canvas context");const F=Math.min(E.width,E.height);A.width=F,A.height=F,s&&(C.beginPath(),C.arc(F/2,F/2,F/2,0,2*Math.PI),C.clip()),C.drawImage(I,E.x,E.y,E.width,E.height,0,0,F,F);const M=A.toDataURL("image/jpeg",.9);t(M)}catch(E){console.error("Error cropping image:",E)}finally{g(!1)}}},[b,s,t]),S=D.useCallback(E=>{E.preventDefault(),f(!0),p({x:E.clientX-i.x,y:E.clientY-i.y})},[i]),j=D.useCallback(E=>{if(!u||!y.current||!v.current)return;const I=y.current,A=v.current,C=I.getBoundingClientRect(),F=A.getBoundingClientRect(),M=E.clientX-d.x,B=E.clientY-d.y,K=F.width*l,G=F.height*l,Y=Math.max(0,(K-C.width)/2),q=Math.max(0,(G-C.height)/2);l<=1?o({x:M,y:B}):o({x:Math.max(-Y,Math.min(Y,M)),y:Math.max(-q,Math.min(q,B))})},[u,d,l]),_=D.useCallback(()=>{f(!1)},[]);return D.useEffect(()=>{if(u)return document.addEventListener("mousemove",j),document.addEventListener("mouseup",_),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",_)}},[u,j,_]),D.useEffect(()=>{if(y.current){const I=y.current.getBoundingClientRect();w.current=Math.min(I.width*.8,I.height*.8,300)}},[]),a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),a.jsx("button",{onClick:r,disabled:h,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{ref:y,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:u?"grabbing":"grab"},children:[a.jsx("img",{ref:v,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(m(!0),y.current&&v.current){const I=y.current.getBoundingClientRect();w.current=Math.min(I.width*.8,I.height*.8,300)}},draggable:!1}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:S,style:{pointerEvents:h?"none":"auto",cursor:u?"grabbing":"grab"},children:[a.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${w.current}px`,height:`${w.current}px`,aspectRatio:n.toString()}}),a.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${w.current/2}px at 50% 50%)`:`inset(calc(50% - ${w.current/2}px))`}})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),a.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:E=>{const I=parseFloat(E.target.value);c(I),I<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:h}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[a.jsx("span",{children:"30%"}),a.jsx("span",{children:"300%"})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:r,disabled:h,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:N,disabled:h||!x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wu,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},dCe=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=D.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=D.useState(null),[l,c]=D.useState(!1),[u,f]=D.useState(!1),[d,p]=D.useState(!1),[h,g]=D.useState(!1),[x,m]=D.useState(!1),[v,y]=D.useState(!1);D.useEffect(()=>{w(),b()},[]);const w=async()=>{c(!0);try{const E=await ove("default");E.success&&E.data&&s(E.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},b=async()=>{p(!0);try{const E=await cve("default");E.success&&E.data&&o(E.data)}catch(E){console.error("Failed to load retention stats:",E)}finally{p(!1)}},N=async()=>{f(!0);try{const E=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await lve("default",{...n,updatedBy:E})).success&&(t("Retention policy updated successfully"),await b())}catch(E){r(E.message||"Failed to update retention policy")}finally{f(!1)}},S=async()=>{g(!0);try{const E=await uve("default",50);E.success&&(t(`Archive completed: ${E.data.archived} emails archived`),await b())}catch(E){r(E.message||"Failed to trigger archive")}finally{g(!1)}},j=async()=>{m(!0);try{const E=await dve("default",50);E.success&&(t(`Cleanup completed: ${E.data.deleted} emails deleted`),await b())}catch(E){r(E.message||"Failed to trigger cleanup")}finally{m(!1)}},_=async()=>{y(!0);try{const E=await fve("default",{format:"csv"});if(typeof E=="string"){const I=new Blob([E],{type:"text/csv"}),A=window.URL.createObjectURL(I),C=document.createElement("a");C.href=A,C.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(A),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(E){r(E.message||"Failed to export archived emails")}finally{y(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(TF,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?a.jsx("div",{className:"p-8 text-center",children:a.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),a.jsx("input",{type:"number",min:"1",max:"20",value:n.retentionYears,onChange:E=>s({...n,retentionYears:parseInt(E.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),a.jsx("input",{type:"number",min:"0",max:n.retentionYears,value:n.coldStorageYears,onChange:E=>s({...n,coldStorageYears:parseInt(E.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),a.jsx("button",{onClick:()=>s({...n,archiveEnabled:!n.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),a.jsx("button",{onClick:()=>s({...n,autoCleanupEnabled:!n.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsx("button",{onClick:N,disabled:u,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:u?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Ou,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),d?a.jsx("div",{className:"p-8 text-center",children:a.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Uu,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:S,disabled:h,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[h?a.jsx(pt,{className:"w-5 h-5 animate-spin text-indigo-600"}):a.jsx(Ou,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),a.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),a.jsxs("button",{onClick:j,disabled:x,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[x?a.jsx(pt,{className:"w-5 h-5 animate-spin text-red-600"}):a.jsx(BH,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),a.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),a.jsxs("button",{onClick:_,disabled:v,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?a.jsx(pt,{className:"w-5 h-5 animate-spin text-green-600"}):a.jsx(Nh,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),a.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},fCe=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=D.useState([]),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[u,f]=D.useState(null),[d,p]=D.useState({name:"",content:"",isDefault:!1}),[h,g]=D.useState(!1),[x,m]=D.useState(null),[v,y]=D.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});D.useEffect(()=>{w(),b()},[]);const w=async()=>{o(!0);try{const E=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!E)return;const I=await TR(E);s(I.data||[])}catch(E){console.error("Failed to load signatures:",E)}finally{o(!1)}},b=()=>{try{const E=localStorage.getItem("user_display_preferences");E&&y(JSON.parse(E))}catch(E){console.error("Failed to load display preferences:",E)}},N=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(v)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},S=async()=>{if(!d.name||!d.content){r("Name and content are required");return}g(!0);try{const E=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!E){r("Please log in to save signature");return}u?(await s1e(u.id,{userId:E,...d}),t("Signature updated successfully")):(await a1e({userId:E,...d}),t("Signature created successfully")),c(!1),f(null),p({name:"",content:"",isDefault:!1}),await w()}catch(E){r(E.message||"Failed to save signature")}finally{g(!1)}},j=async E=>{if(confirm("Are you sure you want to delete this signature?")){m(E);try{const I=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;await i1e(E,I),t("Signature deleted successfully"),await w()}catch(I){r(I.message||"Failed to delete signature")}finally{m(null)}}},_=E=>{E?(f(E),p({name:E.name||"",content:E.content||"",isDefault:E.isDefault||!1})):(f(null),p({name:"",content:"",isDefault:!1})),c(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(pa,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),a.jsxs("button",{onClick:()=>_(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add Signature"]})]}),i?a.jsx("div",{className:"p-8 text-center",children:a.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(pa,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),a.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):a.jsx("div",{className:"space-y-3",children:n.map(E=>a.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-bold text-slate-900",children:E.name}),E.isDefault&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),a.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:E.content}})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>_(E),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:a.jsx(Cl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>j(E.id),disabled:x===E.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:x===E.id?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4"})})]})]})},E.id))})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(pk,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(E=>a.jsx("button",{onClick:()=>y({...v,layout:E}),className:`p-4 rounded-xl border-2 transition-all ${v.layout===E?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:E})},E))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(E=>a.jsx("button",{onClick:()=>y({...v,density:E}),className:`p-4 rounded-xl border-2 transition-all ${v.density===E?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:E})},E))})]}),a.jsxs("button",{onClick:N,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx($u,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),a.jsxs("select",{value:v.emailFormat,onChange:E=>y({...v,emailFormat:E.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),a.jsx("option",{value:"plain",children:"Plain Text"}),a.jsx("option",{value:"rich",children:"Rich Text"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),a.jsx("button",{onClick:()=>y({...v,showPreview:!v.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${v.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${v.showPreview?"translate-x-6":"translate-x-0"}`})})]}),v.showPreview&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),a.jsx("input",{type:"number",min:"1",max:"10",value:v.previewLines,onChange:E=>y({...v,previewLines:parseInt(E.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("button",{onClick:N,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:u?"Edit Signature":"Create Signature"}),a.jsx("button",{onClick:()=>{c(!1),f(null),p({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),a.jsx("input",{type:"text",value:d.name,onChange:E=>p({...d,name:E.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),a.jsx("textarea",{value:d.content,onChange:E=>p({...d,content:E.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),a.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),a.jsx("button",{onClick:()=>p({...d,isDefault:!d.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${d.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${d.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>{c(!1),f(null),p({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:h||!d.name||!d.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),u?"Update":"Create"," Signature"]})})]})]})})]})},hCe=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:n}=Wn(),[s,i]=D.useState("profile"),[o,l]=D.useState(eb),[c,u]=D.useState(!1),[f,d]=D.useState([]),[p,h]=D.useState(""),[g,x]=D.useState(!1),[m,v]=D.useState(!1),[y,w]=D.useState(!1),[b,N]=D.useState(null),[S,j]=D.useState(!1),[_,E]=D.useState(!1),[I,A]=D.useState([]),[C,F]=D.useState(!1),[M,B]=D.useState(""),[K,G]=D.useState(!1),[Y,q]=D.useState(null),[X,V]=D.useState(null),[T,R]=D.useState(null),[z,L]=D.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:yg(),language:"English"}),[H,ne]=D.useState(!1),[se,Q]=D.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[re,Ae]=D.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:yg(),language:"English"}),[ee,Me]=D.useState(!1),[ze,oe]=D.useState(null),[J,je]=D.useState(""),[ce,ye]=D.useState(!1),[me,ge]=D.useState(!1),[Ce,Ue]=D.useState(""),Te=D.useRef(null),ue=(Ve,xt)=>{l(Tt=>Tt.map(he=>he.id===Ve?{...he,[xt]:!he[xt]}:he))};D.useEffect(()=>{s==="connections"&&(async()=>{const xt=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(xt)try{const Tt=await D6(xt);w(Tt.connected||!1),N(Tt.userEmail||null)}catch{w(!1)}})()},[s,e]);const Oe=async()=>{F(!0);try{const Ve=await su(M||void 0);A(Ve.data||[])}catch{A([])}finally{F(!1)}};D.useEffect(()=>{s==="users"&&Oe()},[s,M]),D.useEffect(()=>{(async()=>{if(s==="notifications")try{const xt=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!xt)return;const he=(await Yge(xt)).data||[];if(he.length>0){const Ge=eb.map(kt=>he.find(Vt=>Vt.id===kt.id)||kt);l(Ge)}else l(eb)}catch(xt){console.error("[SETTINGS] Failed to load notification preferences:",xt),l(eb)}})()},[s,e]);const st=async()=>{j(!0);try{const Ve=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,xt=await CR(Ve);xt.authUrl&&(window.location.href=xt.authUrl)}catch{n("Failed to connect Google Calendar"),j(!1)}},be=async()=>{E(!0);try{const Ve=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;await Rve(Ve),w(!1),N(null),r("Google account disconnected successfully")}catch{n("Failed to disconnect Google account")}finally{E(!1)}};D.useEffect(()=>{(async()=>{let xt=e||JSON.parse(localStorage.getItem("user_data")||"null");if(xt){const Tt=yg();Ae({name:xt.name||"",email:xt.email||"",avatar:xt.avatar||"",phone:xt.phone||"",jobTitle:xt.jobTitle||"",department:xt.department||"",bio:xt.bio||"",timezone:xt.timezone||Tt,language:xt.language||"English"}),je(xt.avatar||"")}})()},[e]);const De=(Ve,xt=400,Tt=400,he=.8)=>new Promise((Ge,kt)=>{if(Ve.size>5242880){kt(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const Vt=new FileReader;Vt.onload=_r=>{var Gt;const lr=new Image;lr.onload=()=>{let rr=lr.width,ir=lr.height;rr>ir?rr>xt&&(ir=ir*xt/rr,rr=xt):ir>Tt&&(rr=rr*Tt/ir,ir=Tt);const pr=document.createElement("canvas");pr.width=rr,pr.height=ir;const Nr=pr.getContext("2d");if(!Nr){kt(new Error("Failed to create canvas context"));return}Nr.drawImage(lr,0,0,rr,ir);const jr=pr.toDataURL("image/jpeg",he);if(jr.length>9e5)if(he>.5){De(Ve,xt,Tt,he-.1).then(Ge).catch(kt);return}else{kt(new Error("Image is too large even after compression. Please use a smaller image."));return}Ge(jr)},lr.onerror=()=>kt(new Error("Failed to load image")),lr.src=(Gt=_r.target)==null?void 0:Gt.result},Vt.onerror=()=>kt(new Error("Failed to read file")),Vt.readAsDataURL(Ve)}),We=async Ve=>{var Tt;const xt=(Tt=Ve.target.files)==null?void 0:Tt[0];if(xt){if(!xt.type.startsWith("image/")){n("Please select a valid image file.");return}oe(null);try{const he=new FileReader;he.onload=Ge=>{var gt;const kt=(gt=Ge.target)==null?void 0:gt.result;Ue(kt),ge(!0)},he.onerror=()=>{n("Failed to read image file.")},he.readAsDataURL(xt)}catch(he){const Ge=he.message||"Failed to load image. Please try a different image.";n(Ge),oe(Ge),Te.current&&(Te.current.value="")}}},Xe=async Ve=>{ge(!1),ye(!0);try{const Tt=await(await fetch(Ve)).blob(),he=new File([Tt],"cropped-image.jpg",{type:"image/jpeg"}),Ge=await De(he,400,400,.8);je(Ge),Ae(kt=>({...kt,avatar:Ge})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch(xt){const Tt=xt.message||"Failed to process cropped image.";n(Tt),oe(Tt)}finally{ye(!1),Te.current&&(Te.current.value="")}},Et=()=>{ge(!1),Ue(""),Te.current&&(Te.current.value="")},wt=async()=>{if(!re.name.trim()){oe("Full name is required.");return}Me(!0);try{const Ve=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,xt=await Bge(Ve,re),Tt=xt.data||xt;localStorage.setItem("user_data",JSON.stringify(Tt)),t(Tt),r("Profile updated successfully!"),oe(null)}catch{n("Failed to update profile.")}finally{Me(!1)}};return a.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&a.jsxs("button",{onClick:wt,disabled:ee,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[ee?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Vs,{className:"w-4 h-4"}),"Save Changes"]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:a.jsx(vo,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:a.jsx(j5,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:a.jsx(DF,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:a.jsx(hk,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:a.jsx(Zf,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:a.jsx(TF,{className:"w-4 h-4"})}].map(Ve=>a.jsxs("button",{onClick:()=>i(Ve.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===Ve.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[Ve.icon,Ve.label]},Ve.id))}),a.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[ze&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:ze}),a.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(ls,{src:J,alt:re.name||"User",fallbackText:re.name||re.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),ce&&a.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:a.jsx(pt,{className:"w-6 h-6 text-white animate-spin"})}),a.jsx("button",{onClick:()=>{var Ve;return(Ve=Te.current)==null?void 0:Ve.click()},disabled:ce,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:a.jsx(nu,{className:"w-6 h-6"})}),a.jsx("input",{ref:Te,type:"file",accept:"image/*",onChange:We,className:"hidden",disabled:ce})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900",children:re.name||"Set Name"}),a.jsxs("p",{className:"text-slate-500 text-sm",children:[re.jobTitle||"No Title","  ",re.department||"No Dept"]}),a.jsx("p",{className:"text-slate-400 text-xs mt-1",children:re.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:re.name,onChange:Ve=>Ae({...re,name:Ve.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:re.jobTitle,onChange:Ve=>Ae({...re,jobTitle:Ve.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:re.department,onChange:Ve=>Ae({...re,department:Ve.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:re.phone,onChange:Ve=>Ae({...re,phone:Ve.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),a.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:re.bio,onChange:Ve=>Ae({...re,bio:Ve.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(WC,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:re.timezone,onChange:Ve=>Ae({...re,timezone:Ve.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:iv.map(Ve=>a.jsx("option",{value:Ve.value,children:Ve.label},Ve.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),a.jsx("select",{value:re.language,onChange:Ve=>Ae({...re,language:Ve.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:KC.map(Ve=>a.jsx("option",{value:Ve.value,children:Ve.label},Ve.value))})]})]})]}),s==="notifications"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),a.jsx("div",{className:"space-y-4",children:o.map(Ve=>a.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:Ve.label}),a.jsx("p",{className:"text-xs text-slate-500",children:Ve.description})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),a.jsx("button",{onClick:()=>ue(Ve.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${Ve.inApp?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${Ve.inApp?"translate-x-5":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),a.jsx("button",{onClick:()=>ue(Ve.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${Ve.email?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${Ve.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},Ve.id))}),a.jsx("div",{className:"pt-4 border-t border-slate-100",children:a.jsxs("button",{onClick:async()=>{try{const Ve=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ve){n("Please log in to save preferences.");return}await Jge(Ve,o),r("Notification preferences saved successfully!")}catch(Ve){console.error("[SETTINGS] Failed to save notification preferences:",Ve),n(Ve.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[a.jsx(Vs,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:a.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),a.jsx("div",{className:"p-6",children:y?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tn,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),b&&a.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:b})]})]}),a.jsx("button",{onClick:be,disabled:_,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:_?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx($n,{className:"w-4 h-4 text-blue-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:a.jsx(xa,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Bv,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsx("li",{children:" View and manage calendar events"}),a.jsx("li",{children:" Create, view, and manage files in Google Drive"}),a.jsx("li",{children:" Create and edit documents in Google Docs"}),a.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:a.jsx(hk,{className:"w-8 h-8 text-slate-400"})}),a.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),a.jsx("button",{onClick:st,disabled:S,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:S?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx($n,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(xa,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),a.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Bv,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),a.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[a.jsx("li",{children:" Your data is encrypted and securely stored"}),a.jsx("li",{children:" We only request the minimum permissions needed"}),a.jsx("li",{children:" You can disconnect at any time"}),a.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),a.jsxs("button",{onClick:()=>{q(null),L({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:yg(),language:"English"}),G(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[a.jsx(lc,{className:"w-4 h-4"})," Add User"]})]}),a.jsx("div",{className:"p-4 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:M,onChange:Ve=>B(Ve.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:C?a.jsx("div",{className:"p-8 text-center",children:a.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):I.map(Ve=>a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ls,{src:Ve.avatar,alt:Ve.name||"",fallbackText:Ve.name||Ve.email||"U",className:"w-10 h-10 border",isAvatar:!0}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900 text-sm",children:Ve.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[Ve.email,"  ",a.jsx("span",{className:"font-bold text-indigo-600",children:Ve.role})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{q(Ve),L({email:Ve.email,name:Ve.name,role:Ve.role||"User",jobTitle:Ve.jobTitle||"",department:Ve.department||"",phone:Ve.phone||"",bio:Ve.bio||"",timezone:Ve.timezone||yg(),language:Ve.language||"English"}),G(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:a.jsx(Cl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(Ve),className:"p-2 text-slate-400 hover:text-red-600",children:a.jsx(Ar,{className:"w-4 h-4"})})]})]},Ve.id))})]}),s==="preferences"&&a.jsx(fCe,{currentUser:e,showSuccess:r,showError:n}),s==="workspace"&&a.jsx(dCe,{currentUser:e,showSuccess:r,showError:n})]})]}),K&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:Y?"Edit User":"Add New User"}),a.jsx("button",{onClick:()=>G(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:z.name,onChange:Ve=>L({...z,name:Ve.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),a.jsx("input",{type:"email",value:z.email,onChange:Ve=>L({...z,email:Ve.target.value}),placeholder:"Email Address",disabled:!!Y,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),a.jsxs("select",{value:z.role,onChange:Ve=>L({...z,role:Ve.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),a.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),a.jsx("option",{value:"Admin",children:"Admin - Full access"}),a.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[z.role==="Viewer"&&"Read-only access to shared inbox",z.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",z.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",z.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:z.jobTitle,onChange:Ve=>L({...z,jobTitle:Ve.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:z.department,onChange:Ve=>L({...z,department:Ve.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:z.phone,onChange:Ve=>L({...z,phone:Ve.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:z.bio,onChange:Ve=>L({...z,bio:Ve.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(WC,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:z.timezone,onChange:Ve=>L({...z,timezone:Ve.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:iv.map(Ve=>a.jsx("option",{value:Ve.value,children:Ve.label},Ve.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),a.jsx("select",{value:z.language,onChange:Ve=>L({...z,language:Ve.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:KC.map(Ve=>a.jsx("option",{value:Ve.value,children:Ve.label},Ve.value))})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{ne(!0);try{Y?await Lge(Y.id,z):await Dge(z),G(!1),Oe(),r(Y?"User updated successfully!":"User created successfully!")}catch(Ve){n(Ve.message||"Failed to save user")}finally{ne(!1)}},disabled:H||!z.name||!z.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:H?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),Y?"Updating...":"Creating..."]}):Y?"Update":"Invite"})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:T.name}),a.jsx("p",{className:"text-xs text-slate-500",children:T.email}),T.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:T.role})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>R(null),disabled:X===T.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:async()=>{V(T.id);try{await Rge(T.id),await Oe(),R(null),r("User deleted successfully")}catch(Ve){n(Ve.message||"Failed to delete user")}finally{V(null)}},disabled:X===T.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:X===T.id?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),me&&Ce&&a.jsx(uCe,{imageSrc:Ce,onCrop:Xe,onCancel:Et,aspectRatio:1,circularCrop:!0})]})},pCe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Wn(),n=(e==null?void 0:e.role)==="Admin",[s,i]=D.useState("companies"),[o,l]=D.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,u]=D.useState({groups:[],totalDuplicates:0}),[f,d]=D.useState({groups:[],totalDuplicates:0}),[p,h]=D.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[g,x]=D.useState({mismatches:[],count:0}),[m,v]=D.useState(null),[y,w]=D.useState(!1),[b,N]=D.useState({}),S=D.useCallback(async()=>{l(G=>({...G,companies:!0}));try{const G=await Ive(),Y=(G==null?void 0:G.data)??G;u({groups:Y.groups||[],totalDuplicates:Y.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),u({groups:[],totalDuplicates:0})}finally{l(G=>({...G,companies:!1}))}},[r]),j=D.useCallback(async()=>{l(G=>({...G,contacts:!0}));try{const G=await Dve(),Y=(G==null?void 0:G.data)??G;d({groups:Y.groups||[],totalDuplicates:Y.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),d({groups:[],totalDuplicates:0})}finally{l(G=>({...G,contacts:!1}))}},[r]),_=D.useCallback(async()=>{l(G=>({...G,incomplete:!0}));try{const G=await Lve(),Y=(G==null?void 0:G.data)??G;h({companies:Y.companies||[],contacts:Y.contacts||[],deals:Y.deals||[],projects:Y.projects||[],invoices:Y.invoices||[]})}catch{r("Failed to load incomplete records"),h({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(G=>({...G,incomplete:!1}))}},[r]),E=D.useCallback(async()=>{l(G=>({...G,mismatches:!0}));try{const G=await Fve(),Y=(G==null?void 0:G.data)??G;x({mismatches:Y.mismatches||[],count:Y.count??0})}catch{r("Failed to load domain mismatches"),x({mismatches:[],count:0})}finally{l(G=>({...G,mismatches:!1}))}},[r]);D.useEffect(()=>{n&&(s==="companies"?S():s==="contacts"?j():s==="incomplete"?_():s==="mismatches"&&E())},[n,s,S,j,_,E]);const I=()=>{s==="companies"?S():s==="contacts"?j():s==="incomplete"?_():E()},A=(G,Y,q,X,V,T)=>{v({open:!0,type:G,primaryId:Y,secondaryId:q,primaryName:X,secondaryName:V,groupKey:T})},C=()=>{y||v(null)},F=async()=>{if(m){w(!0);try{m.type==="company"?(await Ove(m.primaryId,m.secondaryId),t("Companies merged successfully"),S()):(await Pve(m.primaryId,m.secondaryId),t("Contacts merged successfully"),j()),v(null)}catch(G){r((G==null?void 0:G.message)||"Merge failed")}finally{w(!1)}}},M=G=>{N(Y=>({...Y,[G]:!Y[G]}))};if(!n)return a.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[a.jsx(FH,{className:"w-12 h-12 text-amber-600 mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const B=[{id:"companies",label:"Duplicate Companies",icon:a.jsx(Ru,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:a.jsx(vo,{className:"w-4 h-4"}),count:f.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:a.jsx(yH,{className:"w-4 h-4"}),count:p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:a.jsx(jh,{className:"w-4 h-4"}),count:g.count}],K=o[s];return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),a.jsxs("button",{onClick:I,disabled:K,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[K?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Uu,{className:"w-4 h-4"}),"Refresh"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:B.map(G=>a.jsxs("button",{onClick:()=>i(G.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===G.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[G.icon,G.label,G.count!=null&&G.count>0&&a.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===G.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:G.count})]},G.id))}),a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[K&&a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!K&&s==="companies"&&a.jsx("div",{className:"p-6",children:c.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):a.jsx("ul",{className:"space-y-4",children:c.groups.map(G=>{const Y=`company-${G.domain}`,q=b[Y]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>M(Y),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:G.domain}),a.jsxs("span",{className:"text-sm text-slate-500",children:[G.count," companies"]}),q?a.jsx(fo,{className:"w-5 h-5"}):a.jsx(Ea,{className:"w-5 h-5"})]}),q&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:G.companies.map((X,V)=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:X.name||""}),X.industry&&a.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",X.industry,")"]})]}),G.companies.length>=2&&a.jsx("div",{className:"flex gap-2",children:G.companies.filter(T=>T.id!==X.id).map(T=>a.jsxs("button",{onClick:()=>A("company",X.id,T.id,X.name||X.id,T.name||T.id,Y),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(e2,{className:"w-3.5 h-3.5"})," Merge into ",X.name||"this"]},T.id))})]},X.id))})]},Y)})})}),!K&&s==="contacts"&&a.jsx("div",{className:"p-6",children:f.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):a.jsx("ul",{className:"space-y-4",children:f.groups.map(G=>{const Y=`contact-${G.email}`,q=b[Y]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>M(Y),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:G.email}),a.jsxs("span",{className:"text-sm text-slate-500",children:[G.count," contacts"]}),q?a.jsx(fo,{className:"w-5 h-5"}):a.jsx(Ea,{className:"w-5 h-5"})]}),q&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:G.contacts.map(X=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:X.name||""}),a.jsx("span",{className:"text-slate-500 text-sm ml-2",children:X.email})]}),G.contacts.filter(V=>V.id!==X.id).map(V=>a.jsxs("button",{onClick:()=>A("contact",X.id,V.id,X.name||X.id,V.name||V.id,Y),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(e2,{className:"w-3.5 h-3.5"})," Merge into ",X.name||"this"]},V.id))]},X.id))})]},Y)})})}),!K&&s==="incomplete"&&a.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:p.companies,recordLabel:G=>G.name||G.id},{key:"contacts",label:"Contacts",items:p.contacts,recordLabel:G=>G.name||G.email||G.id},{key:"deals",label:"Deals",items:p.deals,recordLabel:G=>G.name||G.title||G.id},{key:"projects",label:"Projects",items:p.projects,recordLabel:G=>G.name||G.title||G.id},{key:"invoices",label:"Invoices",items:p.invoices,recordLabel:G=>G.id}].map(({key:G,label:Y,items:q,recordLabel:X})=>q.length===0?null:a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:Y}),a.jsx("ul",{className:"space-y-2",children:q.map(V=>a.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(Cn,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-slate-900",children:X(V.record)}),a.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:V.errors.map((T,R)=>a.jsx("li",{children:T},R))})]})]},V.record.id))})]},G)),p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length===0&&a.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!K&&s==="mismatches"&&a.jsx("div",{className:"p-6",children:g.mismatches.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):a.jsx("ul",{className:"space-y-3",children:g.mismatches.map((G,Y)=>{var q,X,V;return a.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(Cn,{className:"w-5 h-5 text-amber-600 shrink-0"}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("p",{className:"font-medium text-slate-900",children:[(q=G.contact)==null?void 0:q.name," (",(X=G.contact)==null?void 0:X.email,")"]}),a.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",a.jsx("strong",{children:G.contactDomain}),"  Company domain: ",a.jsx("strong",{children:G.companyDomain})," (",(V=G.company)==null?void 0:V.name,")"]})]})]},Y)})})})]}),m&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:C}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),a.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:y,children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",a.jsx("strong",{children:m.secondaryName})," into ",a.jsx("strong",{children:m.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:C,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:y,children:"Cancel"}),a.jsxs("button",{onClick:F,disabled:y,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[y?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsx(e2,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},mCe=({currentUser:e,onNavigate:t,onNewEvent:r})=>{var le,_e,we,Se;const{showError:n,showSuccess:s}=Wn(),[i,o]=D.useState(new Date),[l,c]=D.useState("daily"),[u,f]=D.useState([]),[d,p]=D.useState([]),[h,g]=D.useState([]),[x,m]=D.useState([]),[v,y]=D.useState([]),[w,b]=D.useState(!1),[N,S]=D.useState(!1),[j,_]=D.useState(null),[E,I]=D.useState(!1),[A,C]=D.useState(!1),[F,M]=D.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[B,K]=D.useState([]),[G,Y]=D.useState(!1),[q,X]=D.useState(""),[V,T]=D.useState(""),[R,z]=D.useState(null),[L,H]=D.useState(!1),[ne,se]=D.useState(null),[Q,re]=D.useState(null),[Ae,ee]=D.useState(!1),[Me,ze]=D.useState(""),[oe,J]=D.useState(0),[je,ce]=D.useState([]),[ye,me]=D.useState(!1),[ge,Ce]=D.useState(null),[Ue,Te]=D.useState(!0),[ue,Oe]=D.useState(!0),st=D.useRef(null),be=D.useRef(null),De=Array.from({length:24},(ae,pe)=>pe),We=D.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),Xe=D.useMemo(()=>{const ae=i.getFullYear(),pe=String(i.getMonth()+1).padStart(2,"0"),Re=String(i.getDate()).padStart(2,"0");return`${ae}-${pe}-${Re}`},[i]);D.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const pe=await D6(e.id);b(pe.connected||!1)}catch{b(!1)}})()},[e]);const Et=ae=>ae.filter(pe=>{if(pe.recurringEventId){const Re=(pe.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(Qe=>Re.includes(Qe)))return!1}return!0});D.useEffect(()=>{(async()=>{S(!0);const pe=new Date(i),Re=new Date(i);if(l==="monthly")pe.setDate(1),pe.setHours(0,0,0,0),Re.setMonth(Re.getMonth()+1),Re.setDate(0),Re.setHours(23,59,59,999);else if(l==="weekly"){const He=new Date(i),at=He.getDay(),ht=He.getDate()-at+(at===0?-6:1),jt=new Date(He.setDate(ht));pe.setTime(jt.getTime()),pe.setHours(0,0,0,0);const Bt=new Date(jt);Bt.setDate(jt.getDate()+6),Re.setTime(Bt.getTime()),Re.setHours(23,59,59,999)}else pe.setHours(0,0,0,0),Re.setHours(23,59,59,999);const Ye=He=>{const at=He.getFullYear(),ht=String(He.getMonth()+1).padStart(2,"0"),jt=String(He.getDate()).padStart(2,"0");return`${at}-${ht}-${jt}`},Je=Ye(pe),Qe=Ye(Re),Be=[];if(w&&(e!=null&&e.id))try{const at=(await Mve(Je,Qe,e.id)).data||[],ht=Et(at);Be.push(...ht)}catch(He){console.warn("[Schedule] Failed to fetch Google Calendar events:",He.message)}if(e!=null&&e.id)try{const He=await z3(e.id,void 0,Je,Qe);if(He.success&&He.data){const at=He.data.map(ht=>({id:ht.id,title:ht.title,description:ht.description||"",start:ht.start,end:ht.end,type:ht.type||"meeting",location:ht.location||"",participants:ht.participants||[],color:ht.color||"#4f46e5",isAllDay:ht.isAllDay||!1,source:"firestore",googleEventId:ht.googleEventId||null,htmlLink:ht.htmlLink||null,relatedEntity:ht.relatedEntity||null}));Be.push(...at)}}catch(He){console.warn("[Schedule] Failed to fetch Firestore calendar events:",He.message)}const ke=new Map;Be.forEach(He=>{const at=He.googleEventId||He.id;ke.has(at)||ke.set(at,He)}),f(Array.from(ke.values()));try{const He=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!He){g([]),p([]);return}const at=await pN(He),jt=(Array.isArray((at==null?void 0:at.data)||at)?(at==null?void 0:at.data)||at:[]).filter(Jt=>{const Tr=Jt.dueDate&&Jt.dueDate!==null&&Jt.dueDate!==void 0&&String(Jt.dueDate).trim()!==""&&String(Jt.dueDate).trim().toLowerCase()!=="ongoing";return!Jt.archived&&Tr});g(jt);const Bt=jt.filter(Jt=>Jt.dueDate===Xe);p(Bt)}catch{g([]),p([])}try{const[He,at,ht]=await Promise.all([$x(e==null?void 0:e.id),su(),Bw()]);m(Array.isArray((He==null?void 0:He.data)||He)?(He==null?void 0:He.data)||He:[]),y(Array.isArray((at==null?void 0:at.data)||at)?(at==null?void 0:at.data)||at:[]),K(Array.isArray(ht==null?void 0:ht.data)?ht.data:[])}catch{m([]),y([]),K([])}S(!1)})()},[Xe,w,e,l,i]);const wt=()=>{const ae=new Date(i);l==="daily"?ae.setDate(ae.getDate()-1):l==="weekly"?ae.setDate(ae.getDate()-7):ae.setMonth(ae.getMonth()-1),o(ae)},Ve=()=>{const ae=new Date(i);l==="daily"?ae.setDate(ae.getDate()+1):l==="weekly"?ae.setDate(ae.getDate()+7):ae.setMonth(ae.getMonth()+1),o(ae)},xt=()=>{const ae=new Date;return i.toDateString()===ae.toDateString()},Tt=ae=>{let pe=new Date(ae.start),Re=new Date(ae.end);const Ye=new Date(i);Ye.setHours(0,0,0,0);const Je=(pe.getTime()-Ye.getTime())/(1e3*60),Qe=(Re.getTime()-pe.getTime())/(1e3*60),Be=Je*(80/60)+20,ke=Qe*(80/60);return{top:Be,height:Math.max(ke,50)}},he=ae=>{try{return new Date(ae).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ae}},Ge=ae=>{switch(ae){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},kt=ae=>{const pe=new Date(ae),Re=pe.getDay(),Ye=pe.getDate()-Re+(Re===0?-6:1);return new Date(pe.setDate(Ye))},gt=ae=>{const pe=kt(ae);return Array.from({length:7},(Re,Ye)=>{const Je=new Date(pe);return Je.setDate(pe.getDate()+Ye),Je})},Vt=ae=>{const pe=ae.getFullYear(),Re=ae.getMonth(),Ye=new Date(pe,Re,1),Je=new Date(pe,Re+1,0),Qe=new Date(Ye);Qe.setDate(Qe.getDate()-Qe.getDay());const Be=[],ke=new Date(Qe);for(;(ke<=Je||Be.length<42)&&(Be.push(new Date(ke)),ke.setDate(ke.getDate()+1),!(Be.length>=42)););return Be},_r=ae=>{const pe=ae.getFullYear(),Re=String(ae.getMonth()+1).padStart(2,"0"),Ye=String(ae.getDate()).padStart(2,"0");return`${pe}-${Re}-${Ye}`},lr=ae=>h.filter(pe=>pe.dueDate===ae),Gt=ae=>{_r(ae);const pe=new Date(ae);pe.setHours(0,0,0,0);const Re=new Date(ae);return Re.setHours(23,59,59,999),u.filter(Ye=>{const Je=new Date(Ye.start),Qe=Ye.end?new Date(Ye.end):Je;return Je<=Re&&Qe>=pe})},rr=ae=>{if(!ae||!/^\d{4}-\d{2}-\d{2}$/.test(ae))return ae;const[pe,Re,Ye]=ae.split("-").map(Number);return new Date(pe,Re-1,Ye).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};D.useEffect(()=>{j&&!E&&M({title:j.title,category:j.category||"",description:j.description||"",dueDate:j.dueDate||"",priority:j.priority||"Medium",status:j.status||"Todo",assigneeId:j.assigneeId,projectId:j.projectId||""})},[j,E]),D.useEffect(()=>{if(!E){Y(!1);return}j!=null&&j.category&&!B.includes(j.category)?Y(!0):F.category&&B.includes(F.category)?Y(!1):F.category&&!B.includes(F.category)&&Y(!0)},[E,F.category,B]),D.useEffect(()=>{if(!j)return;let ae=!1;return(async()=>{try{const pe=await Bw(),Re=Array.isArray(pe==null?void 0:pe.data)?pe.data:[];ae||K(Re)}catch{ae||K([])}})(),()=>{ae=!0}},[j==null?void 0:j.id]);const ir=()=>{_(null),I(!1),X(""),T(""),z(null),ee(!1),me(!1),be.current&&(be.current.value="")},pr=async()=>{if(j){if(!F.title.trim()){n("Task title is required");return}if(!F.assigneeId){n("Assignee is required");return}C(!0);try{await $w(j.id,{title:F.title.trim(),category:F.category.trim()||void 0,description:F.description.trim()||"",dueDate:F.dueDate||null,priority:F.priority,status:F.status,assigneeId:F.assigneeId,projectId:F.projectId||null}),g(ae=>ae.map(pe=>pe.id===j.id?{...pe,title:F.title.trim(),category:F.category.trim()||void 0,description:F.description.trim()||"",dueDate:F.dueDate||"",priority:F.priority,status:F.status,assigneeId:F.assigneeId,projectId:F.projectId||void 0}:pe)),_({...j,title:F.title.trim(),category:F.category.trim()||void 0,description:F.description.trim()||"",dueDate:F.dueDate||"",priority:F.priority,status:F.status,assigneeId:F.assigneeId,projectId:F.projectId||void 0,updatedAt:new Date().toISOString()}),I(!1),s("Task updated successfully")}catch(ae){n(ae.message||"Failed to update task")}finally{C(!1)}}},Nr=(ae,pe=1200,Re=1200,Ye=.8)=>new Promise((Je,Qe)=>{const Be=new FileReader;Be.onload=ke=>{var at;const He=new Image;He.onload=()=>{let ht=He.width,jt=He.height;ht>jt?ht>pe&&(jt=jt*pe/ht,ht=pe):jt>Re&&(ht=ht*Re/jt,jt=Re);const Bt=document.createElement("canvas");Bt.width=ht,Bt.height=jt;const Jt=Bt.getContext("2d");Jt?(Jt.drawImage(He,0,0,ht,jt),Je(Bt.toDataURL("image/jpeg",Ye))):Qe(new Error("Canvas context not available"))},He.onerror=()=>Qe(new Error("Failed to load image")),He.src=(at=ke.target)==null?void 0:at.result},Be.onerror=()=>Qe(new Error("Failed to read file")),Be.readAsDataURL(ae)}),jr=async ae=>{var Re;const pe=(Re=ae.target.files)==null?void 0:Re[0];if(pe){if(!pe.type.startsWith("image/")){n("Please select an image file");return}if(pe.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const Ye=await Nr(pe,1200,1200,.8);T(Ye),z(pe)}catch(Ye){n(Ye.message||"Failed to process image")}}},Dt=ae=>{const pe=ae.target.value,Re=ae.target.selectionStart;X(pe),J(Re);const Ye=pe.substring(0,Re),Je=Ye.lastIndexOf("@");if(Je!==-1){const Qe=Ye.substring(Je+1),Be=Je>0?Ye[Je-1]:" ";if((Be===" "||Be===`
`||Je===0)&&!Qe.includes(" ")&&!Qe.includes(`
`)){ze(Qe);const ke=v.filter(He=>He.name.toLowerCase().includes(Qe.toLowerCase())||He.email.toLowerCase().includes(Qe.toLowerCase()));ce(ke.slice(0,5)),ee(!0);return}}ee(!1)},Sr=ae=>{const Re=q.substring(0,oe).lastIndexOf("@"),Ye=q.substring(oe),Qe=`${q.substring(0,Re)}@${ae.name} ${Ye}`;if(X(Qe),ee(!1),st.current){st.current.focus();const Be=Re+ae.name.length+2;st.current.setSelectionRange(Be,Be)}},Gr=ae=>{const pe=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Re=[];let Ye;for(;(Ye=pe.exec(ae))!==null;){const Je=Ye[1].trim(),Qe=v.find(Be=>Be.name.toLowerCase()===Je.toLowerCase());Qe&&Qe.id!==((e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Re.push(Qe.id)}return[...new Set(Re)]},cn=ae=>{const pe=[],Re=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let Ye=0,Je,Qe=0;for(;(Je=Re.exec(ae))!==null;){Je.index>Ye&&pe.push(ae.substring(Ye,Je.index));const Be=Je[1].trim();v.find(He=>He.name.toLowerCase()===Be.toLowerCase())?pe.push(a.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Be]},Qe++)):pe.push(`@${Be}`),Ye=Re.lastIndex}return Ye<ae.length&&pe.push(ae.substring(Ye)),pe.length>0?pe:ae},qe=async()=>{if(j){if(!q.trim()&&!R){n("Please add a note or attach an image");return}H(!0);try{const ae=JSON.parse(localStorage.getItem("user_data")||"{}"),pe={id:`note_${Date.now()}`,userId:ae.id,userName:ae.name||"Unknown User",text:q.trim(),createdAt:new Date().toISOString()};V&&R&&(pe.imageUrl=V,pe.imageName=R.name,pe.imageMimeType=R.type);const Re=[...j.notes||[],pe];await $w(j.id,{notes:Re});const Ye=Gr(q);if(Ye.length>0)for(const Je of Ye)try{await vx({userId:Je,notificationType:"task-mention",title:"You were mentioned in a task",message:`${ae.name||"Someone"} mentioned you in task: "${j.title}"`,link:`/?tab=tasks&task=${j.id}`})}catch(Qe){console.error("Failed to send mention notification:",Qe)}_({...j,notes:Re}),g(Je=>Je.map(Qe=>Qe.id===j.id?{...Qe,notes:Re}:Qe)),X(""),T(""),z(null),be.current&&(be.current.value=""),s("Note added successfully")}catch(ae){n(ae.message||"Failed to add note")}finally{H(!1)}}},mt=()=>{if(l==="daily")return a.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[De.map(ae=>{const pe=ae*80+20;return a.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${pe}px`},children:[a.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:ae===0?"12 AM":ae===12?"12 PM":ae>12?`${ae-12} PM`:`${ae} AM`}),a.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),a.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},ae)}),Ue&&u.map(ae=>{const pe=Tt(ae);return a.jsxs("div",{className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100",style:{top:`${pe.top}px`,height:`${pe.height}px`},children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/20 group-hover:w-2 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:ae.title}),a.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:a.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[a.jsx(Ha,{className:"w-3 h-3 text-indigo-400"})," ",he(ae.start)," - ",he(ae.end)]})})]}),ae.htmlLink&&a.jsx("a",{href:ae.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95",children:a.jsx(zs,{className:"w-3.5 h-3.5"})})]})]},ae.id)}),!N&&(Ue&&u.length===0||!Ue&&(!ue||d.length===0))&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[a.jsx($n,{className:"w-16 h-16 text-slate-200 mb-4"}),a.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(l==="weekly"){const ae=gt(i),pe=new Date;return pe.setHours(0,0,0,0),a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((Re,Ye)=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Re})},Re))}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:ae.map((Re,Ye)=>{const Je=_r(Re),Qe=ue?lr(Je):[],Be=Ue?Gt(Re):[];let ke=[],He=[];ue&&Ue?Qe.length>0&&Be.length>0?(ke=Qe.slice(0,1),He=Be.slice(0,1)):Qe.length>0?ke=Qe.slice(0,2):Be.length>0&&(He=Be.slice(0,2)):ue?ke=Qe.slice(0,2):Ue&&(He=Be.slice(0,2));const at=[...Qe,...Be],ht=Re.toDateString()===pe.toDateString(),jt=Re.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(Re)),c("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${ht?"bg-indigo-50 border-indigo-300":jt?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-xs font-black mb-2 ${ht?"text-indigo-600":jt?"text-slate-900":"text-slate-400"}`,children:Re.getDate()}),a.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[ue&&ke.map(Bt=>a.jsx("div",{onClick:Jt=>{Jt.stopPropagation(),_(Bt)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${Bt.priority==="High"?"bg-red-100 text-red-700":Bt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:Bt.title,children:Bt.title},Bt.id)),Ue&&He.map(Bt=>a.jsx("div",{onClick:Jt=>{Jt.stopPropagation(),Bt.htmlLink&&window.open(Bt.htmlLink,"_blank")},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:Bt.title,children:Bt.title},Bt.id)),ke.length+He.length<at.length&&a.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",at.length-(ke.length+He.length)," more"]})]})]},Ye)})})]})}if(l==="monthly"){const ae=Vt(i),pe=new Date;pe.setHours(0,0,0,0);const Re=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Re.map(Ye=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:Ye})},Ye))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:ae.map((Ye,Je)=>{const Qe=_r(Ye),Be=ue?lr(Qe):[],ke=Ue?Gt(Ye):[];let He=[],at=[];ue&&Ue?Be.length>0&&ke.length>0?(He=Be.slice(0,1),at=ke.slice(0,1)):Be.length>0?He=Be.slice(0,1):ke.length>0&&(at=ke.slice(0,1)):ue?He=Be.slice(0,1):Ue&&(at=ke.slice(0,1));const ht=[...Be,...ke],jt=Ye.toDateString()===pe.toDateString(),Bt=Ye.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(Ye)),c("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${jt?"bg-indigo-50 border-indigo-300":Bt?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-[10px] font-black mb-1 ${jt?"text-indigo-600":Bt?"text-slate-900":"text-slate-400"}`,children:Ye.getDate()}),a.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[ue&&He.map(Jt=>a.jsx("div",{onClick:Tr=>{Tr.stopPropagation(),_(Jt)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${Jt.priority==="High"?"bg-red-100 text-red-700":Jt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:Jt.title,children:Jt.title},Jt.id)),Ue&&at.map(Jt=>a.jsx("div",{onClick:Tr=>{Tr.stopPropagation(),Jt.htmlLink&&window.open(Jt.htmlLink,"_blank")},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:Jt.title,children:Jt.title},Jt.id)),He.length+at.length<ht.length&&a.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",ht.length-(He.length+at.length)]})]})]},Je)})})]})}};return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l==="monthly"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const ae=new Date(i);ae.setMonth(ae.getMonth()-1),o(ae)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:a.jsx(dk,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>{const ae=new Date(i);ae.setMonth(ae.getMonth()+1),o(ae)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:a.jsx(Ea,{className:"w-4 h-4"})})]}):l==="weekly"?a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const ae=gt(i),pe=ae[0],Re=ae[6];return`${pe.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Re.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[a.jsx(Ha,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:We})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:Ue,onChange:ae=>Te(ae.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${Ue?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Ue&&a.jsx(Wu,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:ue,onChange:ae=>Oe(ae.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${ue?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:ue&&a.jsx(Wu,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(ae=>a.jsx("button",{onClick:()=>c(ae),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${l===ae?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:ae},ae))}),a.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:wt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(dk,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>o(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${xt()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),a.jsx("button",{onClick:Ve,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(Ea,{className:"w-5 h-5"})})]}),a.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"New Entry"]})]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[a.jsx(Ha,{className:"w-3 h-3 text-slate-500"}),a.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:We})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[N&&a.jsx(pt,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${w?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:w?"Google Workspace Connected":"Google Disconnected"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[l==="daily"&&ue&&d.length>0&&a.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(tn,{className:"w-3 h-3"})," Today's Deliverables"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:d.map(ae=>a.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:ae.status==="Done"?a.jsx(tn,{className:"w-4 h-4 text-emerald-500"}):a.jsx(Bu,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-xs font-bold truncate ${ae.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:ae.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${Ge(ae.priority)}`,children:ae.priority})})]})]},ae.id))})]}),mt()]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx(oi,{className:"w-8 h-8 text-indigo-400 mb-6"}),a.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),a.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),a.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),a.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:a.jsx(s0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),j&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:ir}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:ir,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(Yt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(tn,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[E?a.jsx("input",{type:"text",value:F.title,onChange:ae=>M(pe=>({...pe,title:ae.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:j.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${j.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":j.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":j.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:j.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",j.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{I(!1),M({title:j.title,category:j.category||"",description:j.description||"",dueDate:j.dueDate||"",priority:j.priority||"Medium",status:j.status||"Todo",assigneeId:j.assigneeId,projectId:j.projectId||""})},disabled:A,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:pr,disabled:A||!F.title.trim()||!F.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:A?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),E?a.jsxs("select",{value:F.assigneeId,onChange:ae=>M(pe=>({...pe,assigneeId:ae.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),v.map(ae=>a.jsx("option",{value:ae.id,children:ae.name},ae.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:((_e=(le=v.find(ae=>ae.id===j.assigneeId))==null?void 0:le.name)==null?void 0:_e.charAt(0))||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((we=v.find(ae=>ae.id===j.assigneeId))==null?void 0:we.name)||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),E?a.jsxs("select",{value:F.projectId,onChange:ae=>M(pe=>({...pe,projectId:ae.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),x.filter(ae=>!ae.archived).map(ae=>a.jsx("option",{value:ae.id,children:ae.title},ae.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:j.projectId?((Se=x.find(ae=>ae.id===j.projectId))==null?void 0:Se.title)||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(pa,{className:"w-4 h-4 text-indigo-500"})," Description"]}),E?a.jsx("textarea",{rows:6,value:F.description,onChange:ae=>M(pe=>({...pe,description:ae.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-indigo-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:j.description||"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3.5 h-3.5"})," Task Category"]}),E?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:G?"__new__":F.category||"",onChange:ae=>{const pe=ae.target.value;pe==="__new__"?(Y(!0),M(Re=>({...Re,category:""}))):(Y(!1),M(Re=>({...Re,category:pe})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),B.map(ae=>a.jsx("option",{value:ae,children:ae},ae)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),G&&a.jsx("input",{type:"text",value:F.category,onChange:ae=>M(pe=>({...pe,category:ae.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:j.category?a.jsxs(a.Fragment,{children:[a.jsx(za,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:j.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),E?a.jsx("input",{type:"date",value:F.dueDate,onChange:ae=>M(pe=>({...pe,dueDate:ae.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:j.dueDate?rr(j.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),E?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(ae=>a.jsx("button",{onClick:()=>M(pe=>({...pe,priority:ae})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${F.priority===ae?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:ae},ae))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${j.priority==="High"?"bg-red-50 text-red-600":j.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:j.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),E?a.jsxs("select",{value:F.status,onChange:ae=>M(pe=>({...pe,status:ae.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[j.status==="Done"?a.jsx(tn,{className:"w-5 h-5 text-emerald-500"}):j.status==="In Progress"?a.jsx(Ha,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(Bu,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:j.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",j.notes&&j.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:j.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:st,rows:3,value:q,onChange:Dt,onBlur:()=>{setTimeout(()=>ee(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),Ae&&je.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Mh,{className:"w-3 h-3"}),"Mention User"]}),je.map(ae=>a.jsxs("button",{onClick:()=>Sr(ae),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ae.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ae.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:ae.email})]})]},ae.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:V?a.jsx(go,{className:"w-4 h-4"}):a.jsx(nu,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:V?(R==null?void 0:R.name)||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:be,type:"file",accept:"image/*",onChange:jr,className:"hidden"})]}),a.jsx("button",{onClick:qe,disabled:L||!q.trim()&&!R,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:L?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-4 h-4"}),"Send"]})})]}),V&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:V,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{T(""),z(null),be.current&&(be.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(Yt,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:j.notes&&j.notes.length>0?[...j.notes].reverse().map(ae=>{var Re;const pe=(e==null?void 0:e.role)==="Admin"||ae.userId===(e==null?void 0:e.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((Re=ae.userName)==null?void 0:Re.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ae.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ae.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),pe&&a.jsx("button",{onClick:()=>re(ae.id),disabled:ne===ae.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:ne===ae.id?a.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ae.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:cn(ae.text)}),ae.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:ae.imageUrl,alt:ae.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Ye=window.open();Ye&&Ye.document.write(`<img src="${ae.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},ae.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ui,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>me(!ye),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(kd,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(Ea,{className:`w-4 h-4 text-slate-400 transition-transform ${ye?"rotate-90":""}`})]}),ye&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:j.createdAt?new Date(j.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),j.updatedAt&&j.updatedAt!==j.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(j.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),j.notes&&j.notes.map((ae,pe)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[ae.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ae.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},ae.id)),(!j.notes||j.notes.length===0)&&(!j.updatedAt||j.updatedAt===j.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[a.jsx("button",{onClick:()=>{Ce(j),ir()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ar,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:ir,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(tn,{className:"w-5 h-5"})," Close"]})]})]})]}),ge&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ge.title})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ce(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(ge)try{await yR(ge.id),g(ae=>ae.filter(pe=>pe.id!==ge.id)),p(ae=>ae.filter(pe=>pe.id!==ge.id)),Ce(null),_(null),s("Task deleted successfully")}catch(ae){n(ae.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},xCe=()=>{const{showSuccess:e}=Wn(),[t,r]=D.useState(null),[n,s]=D.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:a.jsx(xa,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:a.jsx(EF,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:a.jsx(jh,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[a.jsx(k5,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=n.includes(l.id),u=t===l.id;return a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&a.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),a.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),a.jsxs("div",{className:"flex justify-between items-start mb-8",children:[a.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?a.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):a.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),a.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[a.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:u||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:u?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):c?a.jsxs(a.Fragment,{children:["Connected ",a.jsx(tn,{className:"w-4 h-4"})]}):l.isComingSoon?a.jsx(a.Fragment,{children:"Development in Progress"}):a.jsxs(a.Fragment,{children:["Connect ",l.name," ",a.jsx(wi,{className:"w-4 h-4"})]})}),a.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",a.jsx(zs,{className:"w-3 h-3"})]})]})]},l.id)})}),a.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:a.jsx(F2,{className:"w-6 h-6 text-indigo-400"})}),a.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",a.jsx("br",{}),a.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),a.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),a.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),a.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:a.jsx(F2,{className:"w-full h-full text-indigo-600"})})]})]})};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:kU,setPrototypeOf:zI,isFrozen:gCe,getPrototypeOf:vCe,getOwnPropertyDescriptor:yCe}=Object;let{freeze:jo,seal:mc,create:AS}=Object,{apply:CS,construct:ES}=typeof Reflect<"u"&&Reflect;jo||(jo=function(t){return t});mc||(mc=function(t){return t});CS||(CS=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return t.apply(r,s)});ES||(ES=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new t(...n)});const Fb=ko(Array.prototype.forEach),bCe=ko(Array.prototype.lastIndexOf),qI=ko(Array.prototype.pop),Ig=ko(Array.prototype.push),wCe=ko(Array.prototype.splice),o2=ko(String.prototype.toLowerCase),f4=ko(String.prototype.toString),h4=ko(String.prototype.match),Dg=ko(String.prototype.replace),NCe=ko(String.prototype.indexOf),jCe=ko(String.prototype.trim),Mc=ko(Object.prototype.hasOwnProperty),co=ko(RegExp.prototype.test),Lg=kCe(TypeError);function ko(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return CS(e,t,n)}}function kCe(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ES(e,r)}}function mn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o2;zI&&zI(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const i=r(s);i!==s&&(gCe(t)||(t[n]=i),s=i)}e[s]=!0}return e}function SCe(e){for(let t=0;t<e.length;t++)Mc(e,t)||(e[t]=null);return e}function ku(e){const t=AS(null);for(const[r,n]of kU(e))Mc(e,r)&&(Array.isArray(n)?t[r]=SCe(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=ku(n):t[r]=n);return t}function Fg(e,t){for(;e!==null;){const n=yCe(e,t);if(n){if(n.get)return ko(n.get);if(typeof n.value=="function")return ko(n.value)}e=vCe(e)}function r(){return null}return r}const HI=jo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),p4=jo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),m4=jo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_Ce=jo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),x4=jo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ACe=jo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),WI=jo(["#text"]),VI=jo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),g4=jo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GI=jo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Mb=jo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CCe=mc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ECe=mc(/<%[\w\W]*|[\w\W]*%>/gm),TCe=mc(/\$\{[\w\W]*/gm),OCe=mc(/^data-[\-\w.\u00B7-\uFFFF]+$/),PCe=mc(/^aria-[\-\w]+$/),SU=mc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ICe=mc(/^(?:\w+script|data):/i),DCe=mc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_U=mc(/^html$/i),LCe=mc(/^[a-z][.\w]*(-[.\w]+)+$/i);var KI=Object.freeze({__proto__:null,ARIA_ATTR:PCe,ATTR_WHITESPACE:DCe,CUSTOM_ELEMENT:LCe,DATA_ATTR:OCe,DOCTYPE_NAME:_U,ERB_EXPR:ECe,IS_ALLOWED_URI:SU,IS_SCRIPT_OR_DATA:ICe,MUSTACHE_EXPR:CCe,TMPLIT_EXPR:TCe});const Mg={element:1,text:3,progressingInstruction:7,comment:8,document:9},FCe=function(){return typeof window>"u"?null:window},MCe=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},XI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function AU(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FCe();const t=Be=>AU(Be);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Mg.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:h}=e,g=c.prototype,x=Fg(g,"cloneNode"),m=Fg(g,"remove"),v=Fg(g,"nextSibling"),y=Fg(g,"childNodes"),w=Fg(g,"parentNode");if(typeof o=="function"){const Be=r.createElement("template");Be.content&&Be.content.ownerDocument&&(r=Be.content.ownerDocument)}let b,N="";const{implementation:S,createNodeIterator:j,createDocumentFragment:_,getElementsByTagName:E}=r,{importNode:I}=n;let A=XI();t.isSupported=typeof kU=="function"&&typeof w=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:C,ERB_EXPR:F,TMPLIT_EXPR:M,DATA_ATTR:B,ARIA_ATTR:K,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:Y,CUSTOM_ELEMENT:q}=KI;let{IS_ALLOWED_URI:X}=KI,V=null;const T=mn({},[...HI,...p4,...m4,...x4,...WI]);let R=null;const z=mn({},[...VI,...g4,...GI,...Mb]);let L=Object.seal(AS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,ne=null;const se=Object.seal(AS(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Q=!0,re=!0,Ae=!1,ee=!0,Me=!1,ze=!0,oe=!1,J=!1,je=!1,ce=!1,ye=!1,me=!1,ge=!0,Ce=!1;const Ue="user-content-";let Te=!0,ue=!1,Oe={},st=null;const be=mn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let De=null;const We=mn({},["audio","video","img","source","image","track"]);let Xe=null;const Et=mn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wt="http://www.w3.org/1998/Math/MathML",Ve="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let Tt=xt,he=!1,Ge=null;const kt=mn({},[wt,Ve,xt],f4);let gt=mn({},["mi","mo","mn","ms","mtext"]),Vt=mn({},["annotation-xml"]);const _r=mn({},["title","style","font","a","script"]);let lr=null;const Gt=["application/xhtml+xml","text/html"],rr="text/html";let ir=null,pr=null;const Nr=r.createElement("form"),jr=function(ke){return ke instanceof RegExp||ke instanceof Function},Dt=function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(pr&&pr===ke)){if((!ke||typeof ke!="object")&&(ke={}),ke=ku(ke),lr=Gt.indexOf(ke.PARSER_MEDIA_TYPE)===-1?rr:ke.PARSER_MEDIA_TYPE,ir=lr==="application/xhtml+xml"?f4:o2,V=Mc(ke,"ALLOWED_TAGS")?mn({},ke.ALLOWED_TAGS,ir):T,R=Mc(ke,"ALLOWED_ATTR")?mn({},ke.ALLOWED_ATTR,ir):z,Ge=Mc(ke,"ALLOWED_NAMESPACES")?mn({},ke.ALLOWED_NAMESPACES,f4):kt,Xe=Mc(ke,"ADD_URI_SAFE_ATTR")?mn(ku(Et),ke.ADD_URI_SAFE_ATTR,ir):Et,De=Mc(ke,"ADD_DATA_URI_TAGS")?mn(ku(We),ke.ADD_DATA_URI_TAGS,ir):We,st=Mc(ke,"FORBID_CONTENTS")?mn({},ke.FORBID_CONTENTS,ir):be,H=Mc(ke,"FORBID_TAGS")?mn({},ke.FORBID_TAGS,ir):ku({}),ne=Mc(ke,"FORBID_ATTR")?mn({},ke.FORBID_ATTR,ir):ku({}),Oe=Mc(ke,"USE_PROFILES")?ke.USE_PROFILES:!1,Q=ke.ALLOW_ARIA_ATTR!==!1,re=ke.ALLOW_DATA_ATTR!==!1,Ae=ke.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=ke.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Me=ke.SAFE_FOR_TEMPLATES||!1,ze=ke.SAFE_FOR_XML!==!1,oe=ke.WHOLE_DOCUMENT||!1,ce=ke.RETURN_DOM||!1,ye=ke.RETURN_DOM_FRAGMENT||!1,me=ke.RETURN_TRUSTED_TYPE||!1,je=ke.FORCE_BODY||!1,ge=ke.SANITIZE_DOM!==!1,Ce=ke.SANITIZE_NAMED_PROPS||!1,Te=ke.KEEP_CONTENT!==!1,ue=ke.IN_PLACE||!1,X=ke.ALLOWED_URI_REGEXP||SU,Tt=ke.NAMESPACE||xt,gt=ke.MATHML_TEXT_INTEGRATION_POINTS||gt,Vt=ke.HTML_INTEGRATION_POINTS||Vt,L=ke.CUSTOM_ELEMENT_HANDLING||{},ke.CUSTOM_ELEMENT_HANDLING&&jr(ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&jr(ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&typeof ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(L.allowCustomizedBuiltInElements=ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me&&(re=!1),ye&&(ce=!0),Oe&&(V=mn({},WI),R=[],Oe.html===!0&&(mn(V,HI),mn(R,VI)),Oe.svg===!0&&(mn(V,p4),mn(R,g4),mn(R,Mb)),Oe.svgFilters===!0&&(mn(V,m4),mn(R,g4),mn(R,Mb)),Oe.mathMl===!0&&(mn(V,x4),mn(R,GI),mn(R,Mb))),ke.ADD_TAGS&&(typeof ke.ADD_TAGS=="function"?se.tagCheck=ke.ADD_TAGS:(V===T&&(V=ku(V)),mn(V,ke.ADD_TAGS,ir))),ke.ADD_ATTR&&(typeof ke.ADD_ATTR=="function"?se.attributeCheck=ke.ADD_ATTR:(R===z&&(R=ku(R)),mn(R,ke.ADD_ATTR,ir))),ke.ADD_URI_SAFE_ATTR&&mn(Xe,ke.ADD_URI_SAFE_ATTR,ir),ke.FORBID_CONTENTS&&(st===be&&(st=ku(st)),mn(st,ke.FORBID_CONTENTS,ir)),ke.ADD_FORBID_CONTENTS&&(st===be&&(st=ku(st)),mn(st,ke.ADD_FORBID_CONTENTS,ir)),Te&&(V["#text"]=!0),oe&&mn(V,["html","head","body"]),V.table&&(mn(V,["tbody"]),delete H.tbody),ke.TRUSTED_TYPES_POLICY){if(typeof ke.TRUSTED_TYPES_POLICY.createHTML!="function")throw Lg('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ke.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Lg('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=ke.TRUSTED_TYPES_POLICY,N=b.createHTML("")}else b===void 0&&(b=MCe(h,s)),b!==null&&typeof N=="string"&&(N=b.createHTML(""));jo&&jo(ke),pr=ke}},Sr=mn({},[...p4,...m4,..._Ce]),Gr=mn({},[...x4,...ACe]),cn=function(ke){let He=w(ke);(!He||!He.tagName)&&(He={namespaceURI:Tt,tagName:"template"});const at=o2(ke.tagName),ht=o2(He.tagName);return Ge[ke.namespaceURI]?ke.namespaceURI===Ve?He.namespaceURI===xt?at==="svg":He.namespaceURI===wt?at==="svg"&&(ht==="annotation-xml"||gt[ht]):!!Sr[at]:ke.namespaceURI===wt?He.namespaceURI===xt?at==="math":He.namespaceURI===Ve?at==="math"&&Vt[ht]:!!Gr[at]:ke.namespaceURI===xt?He.namespaceURI===Ve&&!Vt[ht]||He.namespaceURI===wt&&!gt[ht]?!1:!Gr[at]&&(_r[at]||!Sr[at]):!!(lr==="application/xhtml+xml"&&Ge[ke.namespaceURI]):!1},qe=function(ke){Ig(t.removed,{element:ke});try{w(ke).removeChild(ke)}catch{m(ke)}},mt=function(ke,He){try{Ig(t.removed,{attribute:He.getAttributeNode(ke),from:He})}catch{Ig(t.removed,{attribute:null,from:He})}if(He.removeAttribute(ke),ke==="is")if(ce||ye)try{qe(He)}catch{}else try{He.setAttribute(ke,"")}catch{}},le=function(ke){let He=null,at=null;if(je)ke="<remove></remove>"+ke;else{const Bt=h4(ke,/^[\r\n\t ]+/);at=Bt&&Bt[0]}lr==="application/xhtml+xml"&&Tt===xt&&(ke='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ke+"</body></html>");const ht=b?b.createHTML(ke):ke;if(Tt===xt)try{He=new p().parseFromString(ht,lr)}catch{}if(!He||!He.documentElement){He=S.createDocument(Tt,"template",null);try{He.documentElement.innerHTML=he?N:ht}catch{}}const jt=He.body||He.documentElement;return ke&&at&&jt.insertBefore(r.createTextNode(at),jt.childNodes[0]||null),Tt===xt?E.call(He,oe?"html":"body")[0]:oe?He.documentElement:jt},_e=function(ke){return j.call(ke.ownerDocument||ke,ke,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},we=function(ke){return ke instanceof d&&(typeof ke.nodeName!="string"||typeof ke.textContent!="string"||typeof ke.removeChild!="function"||!(ke.attributes instanceof f)||typeof ke.removeAttribute!="function"||typeof ke.setAttribute!="function"||typeof ke.namespaceURI!="string"||typeof ke.insertBefore!="function"||typeof ke.hasChildNodes!="function")},Se=function(ke){return typeof l=="function"&&ke instanceof l};function ae(Be,ke,He){Fb(Be,at=>{at.call(t,ke,He,pr)})}const pe=function(ke){let He=null;if(ae(A.beforeSanitizeElements,ke,null),we(ke))return qe(ke),!0;const at=ir(ke.nodeName);if(ae(A.uponSanitizeElement,ke,{tagName:at,allowedTags:V}),ze&&ke.hasChildNodes()&&!Se(ke.firstElementChild)&&co(/<[/\w!]/g,ke.innerHTML)&&co(/<[/\w!]/g,ke.textContent)||ke.nodeType===Mg.progressingInstruction||ze&&ke.nodeType===Mg.comment&&co(/<[/\w]/g,ke.data))return qe(ke),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(at))&&(!V[at]||H[at])){if(!H[at]&&Ye(at)&&(L.tagNameCheck instanceof RegExp&&co(L.tagNameCheck,at)||L.tagNameCheck instanceof Function&&L.tagNameCheck(at)))return!1;if(Te&&!st[at]){const ht=w(ke)||ke.parentNode,jt=y(ke)||ke.childNodes;if(jt&&ht){const Bt=jt.length;for(let Jt=Bt-1;Jt>=0;--Jt){const Tr=x(jt[Jt],!0);Tr.__removalCount=(ke.__removalCount||0)+1,ht.insertBefore(Tr,v(ke))}}}return qe(ke),!0}return ke instanceof c&&!cn(ke)||(at==="noscript"||at==="noembed"||at==="noframes")&&co(/<\/no(script|embed|frames)/i,ke.innerHTML)?(qe(ke),!0):(Me&&ke.nodeType===Mg.text&&(He=ke.textContent,Fb([C,F,M],ht=>{He=Dg(He,ht," ")}),ke.textContent!==He&&(Ig(t.removed,{element:ke.cloneNode()}),ke.textContent=He)),ae(A.afterSanitizeElements,ke,null),!1)},Re=function(ke,He,at){if(ge&&(He==="id"||He==="name")&&(at in r||at in Nr))return!1;if(!(re&&!ne[He]&&co(B,He))){if(!(Q&&co(K,He))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(He,ke))){if(!R[He]||ne[He]){if(!(Ye(ke)&&(L.tagNameCheck instanceof RegExp&&co(L.tagNameCheck,ke)||L.tagNameCheck instanceof Function&&L.tagNameCheck(ke))&&(L.attributeNameCheck instanceof RegExp&&co(L.attributeNameCheck,He)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(He,ke))||He==="is"&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&co(L.tagNameCheck,at)||L.tagNameCheck instanceof Function&&L.tagNameCheck(at))))return!1}else if(!Xe[He]){if(!co(X,Dg(at,Y,""))){if(!((He==="src"||He==="xlink:href"||He==="href")&&ke!=="script"&&NCe(at,"data:")===0&&De[ke])){if(!(Ae&&!co(G,Dg(at,Y,"")))){if(at)return!1}}}}}}}return!0},Ye=function(ke){return ke!=="annotation-xml"&&h4(ke,q)},Je=function(ke){ae(A.beforeSanitizeAttributes,ke,null);const{attributes:He}=ke;if(!He||we(ke))return;const at={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let ht=He.length;for(;ht--;){const jt=He[ht],{name:Bt,namespaceURI:Jt,value:Tr}=jt,En=ir(Bt),bs=Tr;let _n=Bt==="value"?bs:jCe(bs);if(at.attrName=En,at.attrValue=_n,at.keepAttr=!0,at.forceKeepAttr=void 0,ae(A.uponSanitizeAttribute,ke,at),_n=at.attrValue,Ce&&(En==="id"||En==="name")&&(mt(Bt,ke),_n=Ue+_n),ze&&co(/((--!?|])>)|<\/(style|title|textarea)/i,_n)){mt(Bt,ke);continue}if(En==="attributename"&&h4(_n,"href")){mt(Bt,ke);continue}if(at.forceKeepAttr)continue;if(!at.keepAttr){mt(Bt,ke);continue}if(!ee&&co(/\/>/i,_n)){mt(Bt,ke);continue}Me&&Fb([C,F,M],la=>{_n=Dg(_n,la," ")});const Is=ir(ke.nodeName);if(!Re(Is,En,_n)){mt(Bt,ke);continue}if(b&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Jt)switch(h.getAttributeType(Is,En)){case"TrustedHTML":{_n=b.createHTML(_n);break}case"TrustedScriptURL":{_n=b.createScriptURL(_n);break}}if(_n!==bs)try{Jt?ke.setAttributeNS(Jt,Bt,_n):ke.setAttribute(Bt,_n),we(ke)?qe(ke):qI(t.removed)}catch{mt(Bt,ke)}}ae(A.afterSanitizeAttributes,ke,null)},Qe=function Be(ke){let He=null;const at=_e(ke);for(ae(A.beforeSanitizeShadowDOM,ke,null);He=at.nextNode();)ae(A.uponSanitizeShadowNode,He,null),pe(He),Je(He),He.content instanceof i&&Be(He.content);ae(A.afterSanitizeShadowDOM,ke,null)};return t.sanitize=function(Be){let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He=null,at=null,ht=null,jt=null;if(he=!Be,he&&(Be="<!-->"),typeof Be!="string"&&!Se(Be))if(typeof Be.toString=="function"){if(Be=Be.toString(),typeof Be!="string")throw Lg("dirty is not a string, aborting")}else throw Lg("toString is not a function");if(!t.isSupported)return Be;if(J||Dt(ke),t.removed=[],typeof Be=="string"&&(ue=!1),ue){if(Be.nodeName){const Tr=ir(Be.nodeName);if(!V[Tr]||H[Tr])throw Lg("root node is forbidden and cannot be sanitized in-place")}}else if(Be instanceof l)He=le("<!---->"),at=He.ownerDocument.importNode(Be,!0),at.nodeType===Mg.element&&at.nodeName==="BODY"||at.nodeName==="HTML"?He=at:He.appendChild(at);else{if(!ce&&!Me&&!oe&&Be.indexOf("<")===-1)return b&&me?b.createHTML(Be):Be;if(He=le(Be),!He)return ce?null:me?N:""}He&&je&&qe(He.firstChild);const Bt=_e(ue?Be:He);for(;ht=Bt.nextNode();)pe(ht),Je(ht),ht.content instanceof i&&Qe(ht.content);if(ue)return Be;if(ce){if(ye)for(jt=_.call(He.ownerDocument);He.firstChild;)jt.appendChild(He.firstChild);else jt=He;return(R.shadowroot||R.shadowrootmode)&&(jt=I.call(n,jt,!0)),jt}let Jt=oe?He.outerHTML:He.innerHTML;return oe&&V["!doctype"]&&He.ownerDocument&&He.ownerDocument.doctype&&He.ownerDocument.doctype.name&&co(_U,He.ownerDocument.doctype.name)&&(Jt="<!DOCTYPE "+He.ownerDocument.doctype.name+`>
`+Jt),Me&&Fb([C,F,M],Tr=>{Jt=Dg(Jt,Tr," ")}),b&&me?b.createHTML(Jt):Jt},t.setConfig=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Dt(Be),J=!0},t.clearConfig=function(){pr=null,J=!1},t.isValidAttribute=function(Be,ke,He){pr||Dt({});const at=ir(Be),ht=ir(ke);return Re(at,ht,He)},t.addHook=function(Be,ke){typeof ke=="function"&&Ig(A[Be],ke)},t.removeHook=function(Be,ke){if(ke!==void 0){const He=bCe(A[Be],ke);return He===-1?void 0:wCe(A[Be],He,1)[0]}return qI(A[Be])},t.removeHooks=function(Be){A[Be]=[]},t.removeAllHooks=function(){A=XI()},t}var YI=AU(),CU={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(n,s){e.exports=s()})(typeof self<"u"?self:kl,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)}([function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),u=s(46),f=s(47),d=s(48),p=s(49),h=s(12),g=s(32),x=s(33),m=s(31),v=s(1),y={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:d.default,Scroll:c.default,Block:f.default,Inline:u.default,Text:p.default,Attributor:{Attribute:h.default,Class:g.default,Style:x.default,Store:m.default}};n.default=y},function(r,n,s){var i=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var w in y)y.hasOwnProperty(w)&&(v[w]=y[w])};return function(v,y){m(v,y);function w(){this.constructor=v}v.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(m){i(v,m);function v(y){var w=this;return y="[Parchment] "+y,w=m.call(this,y)||this,w.message=y,w.name=w.constructor.name,w}return v}(Error);n.ParchmentError=o;var l={},c={},u={},f={};n.DATA_KEY="__blot";var d;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function p(m,v){var y=g(m);if(y==null)throw new o("Unable to create "+m+" blot");var w=y,b=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:w.create(v);return new w(b,v)}n.create=p;function h(m,v){return v===void 0&&(v=!1),m==null?null:m[n.DATA_KEY]!=null?m[n.DATA_KEY].blot:v?h(m.parentNode,v):null}n.find=h;function g(m,v){v===void 0&&(v=d.ANY);var y;if(typeof m=="string")y=f[m]||l[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)y=f.text;else if(typeof m=="number")m&d.LEVEL&d.BLOCK?y=f.block:m&d.LEVEL&d.INLINE&&(y=f.inline);else if(m instanceof HTMLElement){var w=(m.getAttribute("class")||"").split(/\s+/);for(var b in w)if(y=c[w[b]],y)break;y=y||u[m.tagName]}return y==null?null:v&d.LEVEL&y.scope&&v&d.TYPE&y.scope?y:null}n.query=g;function x(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];if(m.length>1)return m.map(function(b){return x(b)});var y=m[0];if(typeof y.blotName!="string"&&typeof y.attrName!="string")throw new o("Invalid definition");if(y.blotName==="abstract")throw new o("Cannot register abstract class");if(f[y.blotName||y.attrName]=y,typeof y.keyName=="string")l[y.keyName]=y;else if(y.className!=null&&(c[y.className]=y),y.tagName!=null){Array.isArray(y.tagName)?y.tagName=y.tagName.map(function(b){return b.toUpperCase()}):y.tagName=y.tagName.toUpperCase();var w=Array.isArray(y.tagName)?y.tagName:[y.tagName];w.forEach(function(b){(u[b]==null||y.className==null)&&(u[b]=y)})}return y}n.register=x},function(r,n,s){var i=s(51),o=s(11),l=s(3),c=s(20),u="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,p){var h={};return d.length===0?this:(h.insert=d,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(h.attributes=p),this.push(h))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,p){if(d<=0)return this;var h={retain:d};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(h.attributes=p),this.push(h)},f.prototype.push=function(d){var p=this.ops.length,h=this.ops[p-1];if(d=l(!0,{},d),typeof h=="object"){if(typeof d.delete=="number"&&typeof h.delete=="number")return this.ops[p-1]={delete:h.delete+d.delete},this;if(typeof h.delete=="number"&&d.insert!=null&&(p-=1,h=this.ops[p-1],typeof h!="object"))return this.ops.unshift(d),this;if(o(d.attributes,h.attributes)){if(typeof d.insert=="string"&&typeof h.insert=="string")return this.ops[p-1]={insert:h.insert+d.insert},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof h.retain=="number")return this.ops[p-1]={retain:h.retain+d.retain},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this}}return p===this.ops.length?this.ops.push(d):this.ops.splice(p,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var p=[],h=[];return this.forEach(function(g){var x=d(g)?p:h;x.push(g)}),[p,h]},f.prototype.reduce=function(d,p){return this.ops.reduce(d,p)},f.prototype.changeLength=function(){return this.reduce(function(d,p){return p.insert?d+c.length(p):p.delete?d-p.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,p){return d+c.length(p)},0)},f.prototype.slice=function(d,p){d=d||0,typeof p!="number"&&(p=1/0);for(var h=[],g=c.iterator(this.ops),x=0;x<p&&g.hasNext();){var m;x<d?m=g.next(d-x):(m=g.next(p-x),h.push(m)),x+=c.length(m)}return new f(h)},f.prototype.compose=function(d){var p=c.iterator(this.ops),h=c.iterator(d.ops),g=[],x=h.peek();if(x!=null&&typeof x.retain=="number"&&x.attributes==null){for(var m=x.retain;p.peekType()==="insert"&&p.peekLength()<=m;)m-=p.peekLength(),g.push(p.next());x.retain-m>0&&h.next(x.retain-m)}for(var v=new f(g);p.hasNext()||h.hasNext();)if(h.peekType()==="insert")v.push(h.next());else if(p.peekType()==="delete")v.push(p.next());else{var y=Math.min(p.peekLength(),h.peekLength()),w=p.next(y),b=h.next(y);if(typeof b.retain=="number"){var N={};typeof w.retain=="number"?N.retain=y:N.insert=w.insert;var S=c.attributes.compose(w.attributes,b.attributes,typeof w.retain=="number");if(S&&(N.attributes=S),v.push(N),!h.hasNext()&&o(v.ops[v.ops.length-1],N)){var j=new f(p.rest());return v.concat(j).chop()}}else typeof b.delete=="number"&&typeof w.retain=="number"&&v.push(b)}return v.chop()},f.prototype.concat=function(d){var p=new f(this.ops.slice());return d.ops.length>0&&(p.push(d.ops[0]),p.ops=p.ops.concat(d.ops.slice(1))),p},f.prototype.diff=function(d,p){if(this.ops===d.ops)return new f;var h=[this,d].map(function(y){return y.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:u;var b=y===d?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),g=new f,x=i(h[0],h[1],p),m=c.iterator(this.ops),v=c.iterator(d.ops);return x.forEach(function(y){for(var w=y[1].length;w>0;){var b=0;switch(y[0]){case i.INSERT:b=Math.min(v.peekLength(),w),g.push(v.next(b));break;case i.DELETE:b=Math.min(w,m.peekLength()),m.next(b),g.delete(b);break;case i.EQUAL:b=Math.min(m.peekLength(),v.peekLength(),w);var N=m.next(b),S=v.next(b);o(N.insert,S.insert)?g.retain(b,c.attributes.diff(N.attributes,S.attributes)):g.push(S).delete(b);break}w-=b}}),g.chop()},f.prototype.eachLine=function(d,p){p=p||`
`;for(var h=c.iterator(this.ops),g=new f,x=0;h.hasNext();){if(h.peekType()!=="insert")return;var m=h.peek(),v=c.length(m)-h.peekLength(),y=typeof m.insert=="string"?m.insert.indexOf(p,v)-v:-1;if(y<0)g.push(h.next());else if(y>0)g.push(h.next(y));else{if(d(g,h.next(1).attributes||{},x)===!1)return;x+=1,g=new f}}g.length()>0&&d(g,{},x)},f.prototype.transform=function(d,p){if(p=!!p,typeof d=="number")return this.transformPosition(d,p);for(var h=c.iterator(this.ops),g=c.iterator(d.ops),x=new f;h.hasNext()||g.hasNext();)if(h.peekType()==="insert"&&(p||g.peekType()!=="insert"))x.retain(c.length(h.next()));else if(g.peekType()==="insert")x.push(g.next());else{var m=Math.min(h.peekLength(),g.peekLength()),v=h.next(m),y=g.next(m);if(v.delete)continue;y.delete?x.push(y):x.retain(m,c.attributes.transform(v.attributes,y.attributes,p))}return x.chop()},f.prototype.transformPosition=function(d,p){p=!!p;for(var h=c.iterator(this.ops),g=0;h.hasNext()&&g<=d;){var x=h.peekLength(),m=h.peekType();if(h.next(),m==="delete"){d-=Math.min(x,d-g);continue}else m==="insert"&&(g<d||!p)&&(d+=x);g+=x}return d},r.exports=f},function(r,n){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(h){return typeof Array.isArray=="function"?Array.isArray(h):i.call(h)==="[object Array]"},u=function(h){if(!h||i.call(h)!=="[object Object]")return!1;var g=s.call(h,"constructor"),x=h.constructor&&h.constructor.prototype&&s.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!g&&!x)return!1;var m;for(m in h);return typeof m>"u"||s.call(h,m)},f=function(h,g){o&&g.name==="__proto__"?o(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},d=function(h,g){if(g==="__proto__")if(s.call(h,g)){if(l)return l(h,g).value}else return;return h[g]};r.exports=function p(){var h,g,x,m,v,y,w=arguments[0],b=1,N=arguments.length,S=!1;for(typeof w=="boolean"&&(S=w,w=arguments[1]||{},b=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});b<N;++b)if(h=arguments[b],h!=null)for(g in h)x=d(w,g),m=d(h,g),w!==m&&(S&&m&&(u(m)||(v=c(m)))?(v?(v=!1,y=x&&c(x)?x:[]):y=x&&u(x)?x:{},f(w,{name:g,newValue:p(S,y,m)})):typeof m<"u"&&f(w,{name:g,newValue:m}));return w}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var i=function(){function A(C,F){for(var M=0;M<F.length;M++){var B=F[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(C,B.key,B)}}return function(C,F,M){return F&&A(C.prototype,F),M&&A(C,M),C}}(),o=function A(C,F,M){C===null&&(C=Function.prototype);var B=Object.getOwnPropertyDescriptor(C,F);if(B===void 0){var K=Object.getPrototypeOf(C);return K===null?void 0:A(K,F,M)}else{if("value"in B)return B.value;var G=B.get;return G===void 0?void 0:G.call(M)}},l=s(3),c=w(l),u=s(2),f=w(u),d=s(0),p=w(d),h=s(16),g=w(h),x=s(6),m=w(x),v=s(7),y=w(v);function w(A){return A&&A.__esModule?A:{default:A}}function b(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function N(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function S(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var j=1,_=function(A){S(C,A);function C(){return b(this,C),N(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return i(C,[{key:"attach",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,B){var K=p.default.query(M,p.default.Scope.BLOCK_ATTRIBUTE);K!=null&&this.attributes.attribute(K,B)}},{key:"formatAt",value:function(M,B,K,G){this.format(K,G)}},{key:"insertAt",value:function(M,B,K){if(typeof B=="string"&&B.endsWith(`
`)){var G=p.default.create(E.blotName);this.parent.insertBefore(G,M===0?this:this.next),G.insertAt(0,B.slice(0,-1))}else o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,M,B,K)}}]),C}(p.default.Embed);_.scope=p.default.Scope.BLOCK_BLOT;var E=function(A){S(C,A);function C(F){b(this,C);var M=N(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,F));return M.cache={},M}return i(C,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(M,B){return B.length()===0?M:M.insert(B.value(),I(B))},new f.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(M,B){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,M,B),this.cache={}}},{key:"formatAt",value:function(M,B,K,G){B<=0||(p.default.query(K,p.default.Scope.BLOCK)?M+B===this.length()&&this.format(K,G):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,M,Math.min(B,this.length()-M-1),K,G),this.cache={})}},{key:"insertAt",value:function(M,B,K){if(K!=null)return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,M,B,K);if(B.length!==0){var G=B.split(`
`),Y=G.shift();Y.length>0&&(M<this.length()-1||this.children.tail==null?o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),Y):this.children.tail.insertAt(this.children.tail.length(),Y),this.cache={});var q=this;G.reduce(function(X,V){return q=q.split(X,!0),q.insertAt(0,V),V.length},M+Y.length)}}},{key:"insertBefore",value:function(M,B){var K=this.children.head;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,M,B),K instanceof g.default&&K.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"length",this).call(this)+j),this.cache.length}},{key:"moveChildren",value:function(M,B){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"moveChildren",this).call(this,M,B),this.cache={}}},{key:"optimize",value:function(M){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(M===0||M>=this.length()-j)){var K=this.clone();return M===0?(this.parent.insertBefore(K,this),this):(this.parent.insertBefore(K,this.next),K)}else{var G=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"split",this).call(this,M,B);return this.cache={},G}}}]),C}(p.default.Block);E.blotName="block",E.tagName="P",E.defaultChild="break",E.allowedChildren=[m.default,p.default.Embed,y.default];function I(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A==null||(typeof A.formats=="function"&&(C=(0,c.default)(C,A.formats())),A.parent==null||A.parent.blotName=="scroll"||A.parent.statics.scope!==A.statics.scope)?C:I(A.parent,C)}n.bubbleFormats=I,n.BlockEmbed=_,n.default=E},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},o=function(){function q(X,V){var T=[],R=!0,z=!1,L=void 0;try{for(var H=X[Symbol.iterator](),ne;!(R=(ne=H.next()).done)&&(T.push(ne.value),!(V&&T.length===V));R=!0);}catch(se){z=!0,L=se}finally{try{!R&&H.return&&H.return()}finally{if(z)throw L}}return T}return function(X,V){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return q(X,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(X,V){for(var T=0;T<V.length;T++){var R=V[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(X,R.key,R)}}return function(X,V,T){return V&&q(X.prototype,V),T&&q(X,T),X}}();s(50);var c=s(2),u=I(c),f=s(14),d=I(f),p=s(8),h=I(p),g=s(9),x=I(g),m=s(0),v=I(m),y=s(15),w=I(y),b=s(3),N=I(b),S=s(10),j=I(S),_=s(34),E=I(_);function I(q){return q&&q.__esModule?q:{default:q}}function A(q,X,V){return X in q?Object.defineProperty(q,X,{value:V,enumerable:!0,configurable:!0,writable:!0}):q[X]=V,q}function C(q,X){if(!(q instanceof X))throw new TypeError("Cannot call a class as a function")}var F=(0,j.default)("quill"),M=function(){l(q,null,[{key:"debug",value:function(V){V===!0&&(V="log"),j.default.level(V)}},{key:"find",value:function(V){return V.__quill||v.default.find(V)}},{key:"import",value:function(V){return this.imports[V]==null&&F.error("Cannot import "+V+". Are you sure it was registered?"),this.imports[V]}},{key:"register",value:function(V,T){var R=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof V!="string"){var L=V.attrName||V.blotName;typeof L=="string"?this.register("formats/"+L,V,T):Object.keys(V).forEach(function(H){R.register(H,V[H],T)})}else this.imports[V]!=null&&!z&&F.warn("Overwriting "+V+" with",T),this.imports[V]=T,(V.startsWith("blots/")||V.startsWith("formats/"))&&T.blotName!=="abstract"?v.default.register(T):V.startsWith("modules")&&typeof T.register=="function"&&T.register()}}]);function q(X){var V=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(this,q),this.options=B(X,T),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",X);this.options.debug&&q.debug(this.options.debug);var R=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new h.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(h.default.events.EDITOR_CHANGE,function(L){L===h.default.events.TEXT_CHANGE&&V.root.classList.toggle("ql-blank",V.editor.isBlank())}),this.emitter.on(h.default.events.SCROLL_UPDATE,function(L,H){var ne=V.selection.lastRange,se=ne&&ne.length===0?ne.index:void 0;K.call(V,function(){return V.editor.update(null,H,se)},L)});var z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+R+"<p><br></p></div>");this.setContents(z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(q,[{key:"addContainer",value:function(V){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof V=="string"){var R=V;V=document.createElement("div"),V.classList.add(R)}return this.container.insertBefore(V,T),V}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(V,T,R){var z=this,L=G(V,T,R),H=o(L,4);return V=H[0],T=H[1],R=H[3],K.call(this,function(){return z.editor.deleteText(V,T)},R,V,-1*T)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(V),this.container.classList.toggle("ql-disabled",!V)}},{key:"focus",value:function(){var V=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=V,this.scrollIntoView()}},{key:"format",value:function(V,T){var R=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.default.sources.API;return K.call(this,function(){var L=R.getSelection(!0),H=new u.default;if(L==null)return H;if(v.default.query(V,v.default.Scope.BLOCK))H=R.editor.formatLine(L.index,L.length,A({},V,T));else{if(L.length===0)return R.selection.format(V,T),H;H=R.editor.formatText(L.index,L.length,A({},V,T))}return R.setSelection(L,h.default.sources.SILENT),H},z)}},{key:"formatLine",value:function(V,T,R,z,L){var H=this,ne=void 0,se=G(V,T,R,z,L),Q=o(se,4);return V=Q[0],T=Q[1],ne=Q[2],L=Q[3],K.call(this,function(){return H.editor.formatLine(V,T,ne)},L,V,0)}},{key:"formatText",value:function(V,T,R,z,L){var H=this,ne=void 0,se=G(V,T,R,z,L),Q=o(se,4);return V=Q[0],T=Q[1],ne=Q[2],L=Q[3],K.call(this,function(){return H.editor.formatText(V,T,ne)},L,V,0)}},{key:"getBounds",value:function(V){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=void 0;typeof V=="number"?R=this.selection.getBounds(V,T):R=this.selection.getBounds(V.index,V.length);var z=this.container.getBoundingClientRect();return{bottom:R.bottom-z.top,height:R.height,left:R.left-z.left,right:R.right-z.left,top:R.top-z.top,width:R.width}}},{key:"getContents",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,R=G(V,T),z=o(R,2);return V=z[0],T=z[1],this.editor.getContents(V,T)}},{key:"getFormat",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof V=="number"?this.editor.getFormat(V,T):this.editor.getFormat(V.index,V.length)}},{key:"getIndex",value:function(V){return V.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(V){return this.scroll.leaf(V)}},{key:"getLine",value:function(V){return this.scroll.line(V)}},{key:"getLines",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof V!="number"?this.scroll.lines(V.index,V.length):this.scroll.lines(V,T)}},{key:"getModule",value:function(V){return this.theme.modules[V]}},{key:"getSelection",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return V&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,R=G(V,T),z=o(R,2);return V=z[0],T=z[1],this.editor.getText(V,T)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(V,T,R){var z=this,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:q.sources.API;return K.call(this,function(){return z.editor.insertEmbed(V,T,R)},L,V)}},{key:"insertText",value:function(V,T,R,z,L){var H=this,ne=void 0,se=G(V,0,R,z,L),Q=o(se,4);return V=Q[0],ne=Q[2],L=Q[3],K.call(this,function(){return H.editor.insertText(V,T,ne)},L,V,T.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(V,T,R){this.clipboard.dangerouslyPasteHTML(V,T,R)}},{key:"removeFormat",value:function(V,T,R){var z=this,L=G(V,T,R),H=o(L,4);return V=H[0],T=H[1],R=H[3],K.call(this,function(){return z.editor.removeFormat(V,T)},R,V)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(V){var T=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return K.call(this,function(){V=new u.default(V);var z=T.getLength(),L=T.editor.deleteText(0,z),H=T.editor.applyDelta(V),ne=H.ops[H.ops.length-1];ne!=null&&typeof ne.insert=="string"&&ne.insert[ne.insert.length-1]===`
`&&(T.editor.deleteText(T.getLength()-1,1),H.delete(1));var se=L.compose(H);return se},R)}},{key:"setSelection",value:function(V,T,R){if(V==null)this.selection.setRange(null,T||q.sources.API);else{var z=G(V,T,R),L=o(z,4);V=L[0],T=L[1],R=L[3],this.selection.setRange(new y.Range(V,T),R),R!==h.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(V){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API,R=new u.default().insert(V);return this.setContents(R,T)}},{key:"update",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.default.sources.USER,T=this.scroll.update(V);return this.selection.update(V),T}},{key:"updateContents",value:function(V){var T=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return K.call(this,function(){return V=new u.default(V),T.editor.applyDelta(V,R)},R,!0)}}]),q}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=h.default.events,M.sources=h.default.sources,M.version="1.3.7",M.imports={delta:u.default,parchment:v.default,"core/module":x.default,"core/theme":E.default};function B(q,X){if(X=(0,N.default)(!0,{container:q,modules:{clipboard:!0,keyboard:!0,history:!0}},X),!X.theme||X.theme===M.DEFAULTS.theme)X.theme=E.default;else if(X.theme=M.import("themes/"+X.theme),X.theme==null)throw new Error("Invalid theme "+X.theme+". Did you register it?");var V=(0,N.default)(!0,{},X.theme.DEFAULTS);[V,X].forEach(function(z){z.modules=z.modules||{},Object.keys(z.modules).forEach(function(L){z.modules[L]===!0&&(z.modules[L]={})})});var T=Object.keys(V.modules).concat(Object.keys(X.modules)),R=T.reduce(function(z,L){var H=M.import("modules/"+L);return H==null?F.error("Cannot load "+L+" module. Are you sure you registered it?"):z[L]=H.DEFAULTS||{},z},{});return X.modules!=null&&X.modules.toolbar&&X.modules.toolbar.constructor!==Object&&(X.modules.toolbar={container:X.modules.toolbar}),X=(0,N.default)(!0,{},M.DEFAULTS,{modules:R},V,X),["bounds","container","scrollingContainer"].forEach(function(z){typeof X[z]=="string"&&(X[z]=document.querySelector(X[z]))}),X.modules=Object.keys(X.modules).reduce(function(z,L){return X.modules[L]&&(z[L]=X.modules[L]),z},{}),X}function K(q,X,V,T){if(this.options.strict&&!this.isEnabled()&&X===h.default.sources.USER)return new u.default;var R=V==null?null:this.getSelection(),z=this.editor.delta,L=q();if(R!=null&&(V===!0&&(V=R.index),T==null?R=Y(R,L,X):T!==0&&(R=Y(R,V,T,X)),this.setSelection(R,h.default.sources.SILENT)),L.length()>0){var H,ne=[h.default.events.TEXT_CHANGE,L,z,X];if((H=this.emitter).emit.apply(H,[h.default.events.EDITOR_CHANGE].concat(ne)),X!==h.default.sources.SILENT){var se;(se=this.emitter).emit.apply(se,ne)}}return L}function G(q,X,V,T,R){var z={};return typeof q.index=="number"&&typeof q.length=="number"?typeof X!="number"?(R=T,T=V,V=X,X=q.length,q=q.index):(X=q.length,q=q.index):typeof X!="number"&&(R=T,T=V,V=X,X=0),(typeof V>"u"?"undefined":i(V))==="object"?(z=V,R=T):typeof V=="string"&&(T!=null?z[V]=T:R=V),R=R||h.default.sources.API,[q,X,z,R]}function Y(q,X,V,T){if(q==null)return null;var R=void 0,z=void 0;if(X instanceof u.default){var L=[q.index,q.index+q.length].map(function(Q){return X.transformPosition(Q,T!==h.default.sources.USER)}),H=o(L,2);R=H[0],z=H[1]}else{var ne=[q.index,q.index+q.length].map(function(Q){return Q<X||Q===X&&T===h.default.sources.USER?Q:V>=0?Q+V:Math.max(X,Q+V)}),se=o(ne,2);R=se[0],z=se[1]}return new y.Range(R,z-R)}n.expandConfig=B,n.overload=G,n.default=M},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&m(v.prototype,y),w&&m(v,w),v}}(),o=function m(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:m(N,y,w)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(w)}},l=s(7),c=d(l),u=s(0),f=d(u);function d(m){return m&&m.__esModule?m:{default:m}}function p(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function h(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function g(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var x=function(m){g(v,m);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"formatAt",value:function(w,b,N,S){if(v.compare(this.statics.blotName,N)<0&&f.default.query(N,f.default.Scope.BLOT)){var j=this.isolate(w,b);S&&j.wrap(N,S)}else o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,w,b,N,S)}},{key:"optimize",value:function(w){if(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,w),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(w,b){var N=v.order.indexOf(w),S=v.order.indexOf(b);return N>=0||S>=0?N-S:w===b?0:w<b?-1:1}}]),v}(f.default.Inline);x.allowedChildren=[x,f.default.Embed,c.default],x.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function u(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var d=function(p){f(h,p);function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default.Text);n.default=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function y(w,b){for(var N=0;N<b.length;N++){var S=b[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,b,N){return b&&y(w.prototype,b),N&&y(w,N),w}}(),o=function y(w,b,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,b);if(S===void 0){var j=Object.getPrototypeOf(w);return j===null?void 0:y(j,b,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=s(54),c=d(l),u=s(10),f=d(u);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function h(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function g(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var x=(0,f.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(y){document.addEventListener(y,function(){for(var w=arguments.length,b=Array(w),N=0;N<w;N++)b[N]=arguments[N];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var j;(j=S.__quill.emitter).handleDOM.apply(j,b)}})})});var v=function(y){g(w,y);function w(){p(this,w);var b=h(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return b.listeners={},b.on("error",x.error),b}return i(w,[{key:"emit",value:function(){x.log.apply(x,arguments),o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(N){for(var S=arguments.length,j=Array(S>1?S-1:0),_=1;_<S;_++)j[_-1]=arguments[_];(this.listeners[N.type]||[]).forEach(function(E){var I=E.node,A=E.handler;(N.target===I||I.contains(N.target))&&A.apply(void 0,[N].concat(j))})}},{key:"listenDOM",value:function(N,S,j){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push({node:S,handler:j})}}]),w}(c.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},n.default=v},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=u};o.DEFAULTS={},n.default=o},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(u){if(i.indexOf(u)<=i.indexOf(o)){for(var f,d=arguments.length,p=Array(d>1?d-1:0),h=1;h<d;h++)p[h-1]=arguments[h];(f=console)[u].apply(f,p)}}function c(u){return i.reduce(function(f,d){return f[d]=l.bind(console,d,u),f},{})}l.level=c.level=function(u){o=u},n.default=c},function(r,n,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(p,h,g){return g||(g={}),p===h?!0:p instanceof Date&&h instanceof Date?p.getTime()===h.getTime():!p||!h||typeof p!="object"&&typeof h!="object"?g.strict?p===h:p==h:d(p,h,g)};function u(p){return p==null}function f(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function d(p,h,g){var x,m;if(u(p)||u(h)||p.prototype!==h.prototype)return!1;if(l(p))return l(h)?(p=i.call(p),h=i.call(h),c(p,h,g)):!1;if(f(p)){if(!f(h)||p.length!==h.length)return!1;for(x=0;x<p.length;x++)if(p[x]!==h[x])return!1;return!0}try{var v=o(p),y=o(h)}catch{return!1}if(v.length!=y.length)return!1;for(v.sort(),y.sort(),x=v.length-1;x>=0;x--)if(v[x]!=y[x])return!1;for(x=v.length-1;x>=0;x--)if(m=v[x],!c(p[m],h[m],g))return!1;return typeof p==typeof h}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=function(){function l(c,u,f){f===void 0&&(f={}),this.attrName=c,this.keyName=u;var d=i.Scope.TYPE&i.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&i.Scope.LEVEL|d:this.scope=i.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(u){return u.name})},l.prototype.add=function(c,u){return this.canAdd(c,u)?(c.setAttribute(this.keyName,u),!0):!1},l.prototype.canAdd=function(c,u){var f=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var u=c.getAttribute(this.keyName);return this.canAdd(c,u)&&u?u:""},l}();n.default=o},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var i=function(){function _(E,I){var A=[],C=!0,F=!1,M=void 0;try{for(var B=E[Symbol.iterator](),K;!(C=(K=B.next()).done)&&(A.push(K.value),!(I&&A.length===I));C=!0);}catch(G){F=!0,M=G}finally{try{!C&&B.return&&B.return()}finally{if(F)throw M}}return A}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function _(E,I){for(var A=0;A<I.length;A++){var C=I[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,I,A){return I&&_(E.prototype,I),A&&_(E,A),E}}(),l=function _(E,I,A){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,I);if(C===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:_(F,I,A)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(A)}},c=s(2),u=y(c),f=s(0),d=y(f),p=s(4),h=y(p),g=s(6),x=y(g),m=s(7),v=y(m);function y(_){return _&&_.__esModule?_:{default:_}}function w(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function b(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function N(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var S=function(_){N(E,_);function E(){return w(this,E),b(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return E}(x.default);S.blotName="code",S.tagName="CODE";var j=function(_){N(E,_);function E(){return w(this,E),b(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"delta",value:function(){var A=this,C=this.domNode.textContent;return C.endsWith(`
`)&&(C=C.slice(0,-1)),C.split(`
`).reduce(function(F,M){return F.insert(M).insert(`
`,A.formats())},new u.default)}},{key:"format",value:function(A,C){if(!(A===this.statics.blotName&&C)){var F=this.descendant(v.default,this.length()-1),M=i(F,1),B=M[0];B!=null&&B.deleteAt(B.length()-1,1),l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,A,C)}}},{key:"formatAt",value:function(A,C,F,M){if(C!==0&&!(d.default.query(F,d.default.Scope.BLOCK)==null||F===this.statics.blotName&&M===this.statics.formats(this.domNode))){var B=this.newlineIndex(A);if(!(B<0||B>=A+C)){var K=this.newlineIndex(A,!0)+1,G=B-K+1,Y=this.isolate(K,G),q=Y.next;Y.format(F,M),q instanceof E&&q.formatAt(0,A-K+C-G,F,M)}}}},{key:"insertAt",value:function(A,C,F){if(F==null){var M=this.descendant(v.default,A),B=i(M,2),K=B[0],G=B[1];K.insertAt(G,C)}}},{key:"length",value:function(){var A=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?A:A+1}},{key:"newlineIndex",value:function(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C)return this.domNode.textContent.slice(0,A).lastIndexOf(`
`);var F=this.domNode.textContent.slice(A).indexOf(`
`);return F>-1?A+F:-1}},{key:"optimize",value:function(A){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,A);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===C.statics.formats(C.domNode)&&(C.optimize(A),C.moveChildren(this),C.remove())}},{key:"replace",value:function(A){l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,A),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(C){var F=d.default.find(C);F==null?C.parentNode.removeChild(C):F instanceof d.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(A){var C=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,A);return C.setAttribute("spellcheck",!1),C}},{key:"formats",value:function(){return!0}}]),E}(h.default);j.blotName="code-block",j.tagName="PRE",j.TAB="  ",n.Code=S,n.default=j},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},o=function(){function q(X,V){var T=[],R=!0,z=!1,L=void 0;try{for(var H=X[Symbol.iterator](),ne;!(R=(ne=H.next()).done)&&(T.push(ne.value),!(V&&T.length===V));R=!0);}catch(se){z=!0,L=se}finally{try{!R&&H.return&&H.return()}finally{if(z)throw L}}return T}return function(X,V){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return q(X,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(X,V){for(var T=0;T<V.length;T++){var R=V[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(X,R.key,R)}}return function(X,V,T){return V&&q(X.prototype,V),T&&q(X,T),X}}(),c=s(2),u=C(c),f=s(20),d=C(f),p=s(0),h=C(p),g=s(13),x=C(g),m=s(24),v=C(m),y=s(4),w=C(y),b=s(16),N=C(b),S=s(21),j=C(S),_=s(11),E=C(_),I=s(3),A=C(I);function C(q){return q&&q.__esModule?q:{default:q}}function F(q,X,V){return X in q?Object.defineProperty(q,X,{value:V,enumerable:!0,configurable:!0,writable:!0}):q[X]=V,q}function M(q,X){if(!(q instanceof X))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,K=function(){function q(X){M(this,q),this.scroll=X,this.delta=this.getDelta()}return l(q,[{key:"applyDelta",value:function(V){var T=this,R=!1;this.scroll.update();var z=this.scroll.length();return this.scroll.batchStart(),V=Y(V),V.reduce(function(L,H){var ne=H.retain||H.delete||H.insert.length||1,se=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var Q=H.insert;Q.endsWith(`
`)&&R&&(R=!1,Q=Q.slice(0,-1)),L>=z&&!Q.endsWith(`
`)&&(R=!0),T.scroll.insertAt(L,Q);var re=T.scroll.line(L),Ae=o(re,2),ee=Ae[0],Me=Ae[1],ze=(0,A.default)({},(0,y.bubbleFormats)(ee));if(ee instanceof w.default){var oe=ee.descendant(h.default.Leaf,Me),J=o(oe,1),je=J[0];ze=(0,A.default)(ze,(0,y.bubbleFormats)(je))}se=d.default.attributes.diff(ze,se)||{}}else if(i(H.insert)==="object"){var ce=Object.keys(H.insert)[0];if(ce==null)return L;T.scroll.insertAt(L,ce,H.insert[ce])}z+=ne}return Object.keys(se).forEach(function(ye){T.scroll.formatAt(L,ne,ye,se[ye])}),L+ne},0),V.reduce(function(L,H){return typeof H.delete=="number"?(T.scroll.deleteAt(L,H.delete),L):L+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(V)}},{key:"deleteText",value:function(V,T){return this.scroll.deleteAt(V,T),this.update(new u.default().retain(V).delete(T))}},{key:"formatLine",value:function(V,T){var R=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(z).forEach(function(L){if(!(R.scroll.whitelist!=null&&!R.scroll.whitelist[L])){var H=R.scroll.lines(V,Math.max(T,1)),ne=T;H.forEach(function(se){var Q=se.length();if(!(se instanceof x.default))se.format(L,z[L]);else{var re=V-se.offset(R.scroll),Ae=se.newlineIndex(re+ne)-re+1;se.formatAt(re,Ae,L,z[L])}ne-=Q})}}),this.scroll.optimize(),this.update(new u.default().retain(V).retain(T,(0,j.default)(z)))}},{key:"formatText",value:function(V,T){var R=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(z).forEach(function(L){R.scroll.formatAt(V,T,L,z[L])}),this.update(new u.default().retain(V).retain(T,(0,j.default)(z)))}},{key:"getContents",value:function(V,T){return this.delta.slice(V,V+T)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(V,T){return V.concat(T.delta())},new u.default)}},{key:"getFormat",value:function(V){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=[],z=[];T===0?this.scroll.path(V).forEach(function(H){var ne=o(H,1),se=ne[0];se instanceof w.default?R.push(se):se instanceof h.default.Leaf&&z.push(se)}):(R=this.scroll.lines(V,T),z=this.scroll.descendants(h.default.Leaf,V,T));var L=[R,z].map(function(H){if(H.length===0)return{};for(var ne=(0,y.bubbleFormats)(H.shift());Object.keys(ne).length>0;){var se=H.shift();if(se==null)return ne;ne=G((0,y.bubbleFormats)(se),ne)}return ne});return A.default.apply(A.default,L)}},{key:"getText",value:function(V,T){return this.getContents(V,T).filter(function(R){return typeof R.insert=="string"}).map(function(R){return R.insert}).join("")}},{key:"insertEmbed",value:function(V,T,R){return this.scroll.insertAt(V,T,R),this.update(new u.default().retain(V).insert(F({},T,R)))}},{key:"insertText",value:function(V,T){var R=this,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T=T.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(V,T),Object.keys(z).forEach(function(L){R.scroll.formatAt(V,T.length,L,z[L])}),this.update(new u.default().retain(V).insert(T,(0,j.default)(z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var V=this.scroll.children.head;return V.statics.blotName!==w.default.blotName||V.children.length>1?!1:V.children.head instanceof N.default}},{key:"removeFormat",value:function(V,T){var R=this.getText(V,T),z=this.scroll.line(V+T),L=o(z,2),H=L[0],ne=L[1],se=0,Q=new u.default;H!=null&&(H instanceof x.default?se=H.newlineIndex(ne)-ne+1:se=H.length()-ne,Q=H.delta().slice(ne,ne+se-1).insert(`
`));var re=this.getContents(V,T+se),Ae=re.diff(new u.default().insert(R).concat(Q)),ee=new u.default().retain(V).concat(Ae);return this.applyDelta(ee)}},{key:"update",value:function(V){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,z=this.delta;if(T.length===1&&T[0].type==="characterData"&&T[0].target.data.match(B)&&h.default.find(T[0].target)){var L=h.default.find(T[0].target),H=(0,y.bubbleFormats)(L),ne=L.offset(this.scroll),se=T[0].oldValue.replace(v.default.CONTENTS,""),Q=new u.default().insert(se),re=new u.default().insert(L.value()),Ae=new u.default().retain(ne).concat(Q.diff(re,R));V=Ae.reduce(function(ee,Me){return Me.insert?ee.insert(Me.insert,H):ee.push(Me)},new u.default),this.delta=z.compose(V)}else this.delta=this.getDelta(),(!V||!(0,E.default)(z.compose(V),this.delta))&&(V=z.diff(this.delta,R));return V}}]),q}();function G(q,X){return Object.keys(X).reduce(function(V,T){return q[T]==null||(X[T]===q[T]?V[T]=X[T]:Array.isArray(X[T])?X[T].indexOf(q[T])<0&&(V[T]=X[T].concat([q[T]])):V[T]=[X[T],q[T]]),V},{})}function Y(q){return q.reduce(function(X,V){if(V.insert===1){var T=(0,j.default)(V.attributes);return delete T.image,X.insert({image:V.attributes.image},T)}if(V.attributes!=null&&(V.attributes.list===!0||V.attributes.bullet===!0)&&(V=(0,j.default)(V),V.attributes.list?V.attributes.list="ordered":(V.attributes.list="bullet",delete V.attributes.bullet)),typeof V.insert=="string"){var R=V.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return X.insert(R,V.attributes)}return X.push(V)},new u.default)}n.default=K},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=function(){function _(E,I){var A=[],C=!0,F=!1,M=void 0;try{for(var B=E[Symbol.iterator](),K;!(C=(K=B.next()).done)&&(A.push(K.value),!(I&&A.length===I));C=!0);}catch(G){F=!0,M=G}finally{try{!C&&B.return&&B.return()}finally{if(F)throw M}}return A}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function _(E,I){for(var A=0;A<I.length;A++){var C=I[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,I,A){return I&&_(E.prototype,I),A&&_(E,A),E}}(),l=s(0),c=v(l),u=s(21),f=v(u),d=s(11),p=v(d),h=s(8),g=v(h),x=s(10),m=v(x);function v(_){return _&&_.__esModule?_:{default:_}}function y(_){if(Array.isArray(_)){for(var E=0,I=Array(_.length);E<_.length;E++)I[E]=_[E];return I}else return Array.from(_)}function w(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}var b=(0,m.default)("quill:selection"),N=function _(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,_),this.index=E,this.length=I},S=function(){function _(E,I){var A=this;w(this,_),this.emitter=I,this.scroll=E,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new N(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){A.mouseDown||setTimeout(A.update.bind(A,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(C,F){C===g.default.events.TEXT_CHANGE&&F.length()>0&&A.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(A.hasFocus()){var C=A.getNativeRange();C!=null&&C.start.node!==A.cursor.textNode&&A.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{A.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(C,F){if(F.range){var M=F.range,B=M.startNode,K=M.startOffset,G=M.endNode,Y=M.endOffset;A.setNativeRange(B,K,G,Y)}}),this.update(g.default.sources.SILENT)}return o(_,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var A=I.cursor.restore();if(!A)return;setTimeout(function(){I.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,A){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var C=this.getNativeRange();if(!(C==null||!C.native.collapsed||c.default.query(I,c.default.Scope.BLOCK))){if(C.start.node!==this.cursor.textNode){var F=c.default.find(C.start.node,!1);if(F==null)return;if(F instanceof c.default.Leaf){var M=F.split(C.start.offset);F.parent.insertBefore(this.cursor,M)}else F.insertBefore(this.cursor,C.start.node);this.cursor.attach()}this.cursor.format(I,A),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=this.scroll.length();I=Math.min(I,C-1),A=Math.min(I+A,C-1)-I;var F=void 0,M=this.scroll.leaf(I),B=i(M,2),K=B[0],G=B[1];if(K==null)return null;var Y=K.position(G,!0),q=i(Y,2);F=q[0],G=q[1];var X=document.createRange();if(A>0){X.setStart(F,G);var V=this.scroll.leaf(I+A),T=i(V,2);if(K=T[0],G=T[1],K==null)return null;var R=K.position(G,!0),z=i(R,2);return F=z[0],G=z[1],X.setEnd(F,G),X.getBoundingClientRect()}else{var L="left",H=void 0;return F instanceof Text?(G<F.data.length?(X.setStart(F,G),X.setEnd(F,G+1)):(X.setStart(F,G-1),X.setEnd(F,G),L="right"),H=X.getBoundingClientRect()):(H=K.domNode.getBoundingClientRect(),G>0&&(L="right")),{bottom:H.top+H.height,height:H.height,left:H[L],right:H[L],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var A=I.getRangeAt(0);if(A==null)return null;var C=this.normalizeNative(A);return b.info("getNativeRange",C),C}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var A=this.normalizedToRange(I);return[A,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var A=this,C=[[I.start.node,I.start.offset]];I.native.collapsed||C.push([I.end.node,I.end.offset]);var F=C.map(function(K){var G=i(K,2),Y=G[0],q=G[1],X=c.default.find(Y,!0),V=X.offset(A.scroll);return q===0?V:X instanceof c.default.Container?V+X.length():V+X.index(Y,q)}),M=Math.min(Math.max.apply(Math,y(F)),this.scroll.length()-1),B=Math.min.apply(Math,[M].concat(y(F)));return new N(B,M-B)}},{key:"normalizeNative",value:function(I){if(!j(this.root,I.startContainer)||!I.collapsed&&!j(this.root,I.endContainer))return null;var A={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[A.start,A.end].forEach(function(C){for(var F=C.node,M=C.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>M)F=F.childNodes[M],M=0;else if(F.childNodes.length===M)F=F.lastChild,M=F instanceof Text?F.data.length:F.childNodes.length+1;else break;C.node=F,C.offset=M}),A}},{key:"rangeToNative",value:function(I){var A=this,C=I.collapsed?[I.index]:[I.index,I.index+I.length],F=[],M=this.scroll.length();return C.forEach(function(B,K){B=Math.min(M-1,B);var G=void 0,Y=A.scroll.leaf(B),q=i(Y,2),X=q[0],V=q[1],T=X.position(V,K!==0),R=i(T,2);G=R[0],V=R[1],F.push(G,V)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(I){var A=this.lastRange;if(A!=null){var C=this.getBounds(A.index,A.length);if(C!=null){var F=this.scroll.length()-1,M=this.scroll.line(Math.min(A.index,F)),B=i(M,1),K=B[0],G=K;if(A.length>0){var Y=this.scroll.line(Math.min(A.index+A.length,F)),q=i(Y,1);G=q[0]}if(!(K==null||G==null)){var X=I.getBoundingClientRect();C.top<X.top?I.scrollTop-=X.top-C.top:C.bottom>X.bottom&&(I.scrollTop+=C.bottom-X.bottom)}}}}},{key:"setNativeRange",value:function(I,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",I,A,C,F),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||C.parentNode==null))){var B=document.getSelection();if(B!=null)if(I!=null){this.hasFocus()||this.root.focus();var K=(this.getNativeRange()||{}).native;if(K==null||M||I!==K.startContainer||A!==K.startOffset||C!==K.endContainer||F!==K.endOffset){I.tagName=="BR"&&(A=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),C.tagName=="BR"&&(F=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode);var G=document.createRange();G.setStart(I,A),G.setEnd(C,F),B.removeAllRanges(),B.addRange(G)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof A=="string"&&(C=A,A=!1),b.info("setRange",I),I!=null){var F=this.rangeToNative(I);this.setNativeRange.apply(this,y(F).concat([A]))}else this.setNativeRange(null);this.update(C)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,A=this.lastRange,C=this.getRange(),F=i(C,2),M=F[0],B=F[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(A,this.lastRange)){var K;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var G=[g.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(A),I];if((K=this.emitter).emit.apply(K,[g.default.events.EDITOR_CHANGE].concat(G)),I!==g.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,G)}}}}]),_}();function j(_,E){try{E.parentNode}catch{return!1}return E instanceof Text&&(E=E.parentNode),_.contains(E)}n.Range=N,n.default=S},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(x,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}return function(x,m,v){return m&&g(x.prototype,m),v&&g(x,v),x}}(),o=function g(x,m,v){x===null&&(x=Function.prototype);var y=Object.getOwnPropertyDescriptor(x,m);if(y===void 0){var w=Object.getPrototypeOf(x);return w===null?void 0:g(w,m,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},l=s(0),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(){return f(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"insertInto",value:function(v,y){v.children.length===0?o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertInto",this).call(this,v,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),x}(c.default.Embed);h.blotName="break",h.tagName="BR",n.default=h},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)h.hasOwnProperty(g)&&(p[g]=h[g])};return function(p,h){d(p,h);function g(){this.constructor=p}p.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),u=function(d){i(p,d);function p(h){var g=d.call(this,h)||this;return g.build(),g}return p.prototype.appendChild=function(h){this.insertBefore(h)},p.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(h){h.attach()})},p.prototype.build=function(){var h=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var x=f(g);h.insertBefore(x,h.children.head||void 0)}catch(m){if(m instanceof c.ParchmentError)return;throw m}})},p.prototype.deleteAt=function(h,g){if(h===0&&g===this.length())return this.remove();this.children.forEachAt(h,g,function(x,m,v){x.deleteAt(m,v)})},p.prototype.descendant=function(h,g){var x=this.children.find(g),m=x[0],v=x[1];return h.blotName==null&&h(m)||h.blotName!=null&&m instanceof h?[m,v]:m instanceof p?m.descendant(h,v):[null,-1]},p.prototype.descendants=function(h,g,x){g===void 0&&(g=0),x===void 0&&(x=Number.MAX_VALUE);var m=[],v=x;return this.children.forEachAt(g,x,function(y,w,b){(h.blotName==null&&h(y)||h.blotName!=null&&y instanceof h)&&m.push(y),y instanceof p&&(m=m.concat(y.descendants(h,w,v))),v-=b}),m},p.prototype.detach=function(){this.children.forEach(function(h){h.detach()}),d.prototype.detach.call(this)},p.prototype.formatAt=function(h,g,x,m){this.children.forEachAt(h,g,function(v,y,w){v.formatAt(y,w,x,m)})},p.prototype.insertAt=function(h,g,x){var m=this.children.find(h),v=m[0],y=m[1];if(v)v.insertAt(y,g,x);else{var w=x==null?c.create("text",g):c.create(g,x);this.appendChild(w)}},p.prototype.insertBefore=function(h,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(x){return h instanceof x}))throw new c.ParchmentError("Cannot insert "+h.statics.blotName+" into "+this.statics.blotName);h.insertInto(this,g)},p.prototype.length=function(){return this.children.reduce(function(h,g){return h+g.length()},0)},p.prototype.moveChildren=function(h,g){this.children.forEach(function(x){h.insertBefore(x,g)})},p.prototype.optimize=function(h){if(d.prototype.optimize.call(this,h),this.children.length===0)if(this.statics.defaultChild!=null){var g=c.create(this.statics.defaultChild);this.appendChild(g),g.optimize(h)}else this.remove()},p.prototype.path=function(h,g){g===void 0&&(g=!1);var x=this.children.find(h,g),m=x[0],v=x[1],y=[[this,h]];return m instanceof p?y.concat(m.path(v,g)):(m!=null&&y.push([m,v]),y)},p.prototype.removeChild=function(h){this.children.remove(h)},p.prototype.replace=function(h){h instanceof p&&h.moveChildren(this),d.prototype.replace.call(this,h)},p.prototype.split=function(h,g){if(g===void 0&&(g=!1),!g){if(h===0)return this;if(h===this.length())return this.next}var x=this.clone();return this.parent.insertBefore(x,this.next),this.children.forEachAt(h,this.length(),function(m,v,y){m=m.split(v,g),x.appendChild(m)}),x},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(h,g){var x=this,m=[],v=[];h.forEach(function(y){y.target===x.domNode&&y.type==="childList"&&(m.push.apply(m,y.addedNodes),v.push.apply(v,y.removedNodes))}),v.forEach(function(y){if(!(y.parentNode!=null&&y.tagName!=="IFRAME"&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=c.find(y);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===x.domNode)&&w.detach()}}),m.filter(function(y){return y.parentNode==x.domNode}).sort(function(y,w){return y===w?0:y.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var w=null;y.nextSibling!=null&&(w=c.find(y.nextSibling));var b=f(y);(b.next!=w||b.next==null)&&(b.parent!=null&&b.parent.removeChild(x),x.insertBefore(b,w||void 0))})},p}(l.default);function f(d){var p=c.find(d);if(p==null)try{p=c.create(d)}catch{p=c.create(c.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(g){p.domNode.appendChild(g)}),d.parentNode&&d.parentNode.replaceChild(p.domNode,d),p.attach()}return p}n.default=u},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)h.hasOwnProperty(g)&&(p[g]=h[g])};return function(p,h){d(p,h);function g(){this.constructor=p}p.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),u=s(1),f=function(d){i(p,d);function p(h){var g=d.call(this,h)||this;return g.attributes=new l.default(g.domNode),g}return p.formats=function(h){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return h.tagName.toLowerCase()},p.prototype.format=function(h,g){var x=u.query(h);x instanceof o.default?this.attributes.attribute(x,g):g&&x!=null&&(h!==this.statics.blotName||this.formats()[h]!==g)&&this.replaceWith(h,g)},p.prototype.formats=function(){var h=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(h[this.statics.blotName]=g),h},p.prototype.replaceWith=function(h,g){var x=d.prototype.replaceWith.call(this,h,g);return this.attributes.copy(x),x},p.prototype.update=function(h,g){var x=this;d.prototype.update.call(this,h,g),h.some(function(m){return m.target===x.domNode&&m.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(h,g){var x=d.prototype.wrap.call(this,h,g);return x instanceof p&&x.statics.scope===this.statics.scope&&this.attributes.move(x),x},p}(c.default);n.default=f},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(30),l=s(1),c=function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,p){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},f.prototype.position=function(d,p){var h=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(h+=1),[this.parent.domNode,h]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=l.Scope.INLINE_BLOT,f}(o.default);n.default=c},function(r,n,s){var i=s(11),o=s(3),l={attributes:{compose:function(u,f,d){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var p=o(!0,{},f);d||(p=Object.keys(p).reduce(function(g,x){return p[x]!=null&&(g[x]=p[x]),g},{}));for(var h in u)u[h]!==void 0&&f[h]===void 0&&(p[h]=u[h]);return Object.keys(p).length>0?p:void 0},diff:function(u,f){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var d=Object.keys(u).concat(Object.keys(f)).reduce(function(p,h){return i(u[h],f[h])||(p[h]=f[h]===void 0?null:f[h]),p},{});return Object.keys(d).length>0?d:void 0},transform:function(u,f,d){if(typeof u!="object")return f;if(typeof f=="object"){if(!d)return f;var p=Object.keys(f).reduce(function(h,g){return u[g]===void 0&&(h[g]=f[g]),h},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(u){return new c(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function c(u){this.ops=u,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(u){u||(u=1/0);var f=this.ops[this.index];if(f){var d=this.offset,p=l.length(f);if(u>=p-d?(u=p-d,this.index+=1,this.offset=0):this.offset+=u,typeof f.delete=="number")return{delete:u};var h={};return f.attributes&&(h.attributes=f.attributes),typeof f.retain=="number"?h.retain=u:typeof f.insert=="string"?h.insert=f.insert.substr(d,u):h.insert=f.insert,h}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,f=this.index,d=this.next(),p=this.ops.slice(this.index);return this.offset=u,this.index=f,[d].concat(p)}else return[]},r.exports=l},function(r,n){var s=function(){function i(x,m){return m!=null&&x instanceof m}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function u(x,m,v,y,w){typeof m=="object"&&(v=m.depth,y=m.prototype,w=m.includeNonEnumerable,m=m.circular);var b=[],N=[],S=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof v>"u"&&(v=1/0);function j(_,E){if(_===null)return null;if(E===0)return _;var I,A;if(typeof _!="object")return _;if(i(_,o))I=new o;else if(i(_,l))I=new l;else if(i(_,c))I=new c(function(X,V){_.then(function(T){X(j(T,E-1))},function(T){V(j(T,E-1))})});else if(u.__isArray(_))I=[];else if(u.__isRegExp(_))I=new RegExp(_.source,g(_)),_.lastIndex&&(I.lastIndex=_.lastIndex);else if(u.__isDate(_))I=new Date(_.getTime());else{if(S&&Buffer.isBuffer(_))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(_.length):I=new Buffer(_.length),_.copy(I),I;i(_,Error)?I=Object.create(_):typeof y>"u"?(A=Object.getPrototypeOf(_),I=Object.create(A)):(I=Object.create(y),A=y)}if(m){var C=b.indexOf(_);if(C!=-1)return N[C];b.push(_),N.push(I)}i(_,o)&&_.forEach(function(X,V){var T=j(V,E-1),R=j(X,E-1);I.set(T,R)}),i(_,l)&&_.forEach(function(X){var V=j(X,E-1);I.add(V)});for(var F in _){var M;A&&(M=Object.getOwnPropertyDescriptor(A,F)),!(M&&M.set==null)&&(I[F]=j(_[F],E-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(_),F=0;F<B.length;F++){var K=B[F],G=Object.getOwnPropertyDescriptor(_,K);G&&!G.enumerable&&!w||(I[K]=j(_[K],E-1),G.enumerable||Object.defineProperty(I,K,{enumerable:!1}))}if(w)for(var Y=Object.getOwnPropertyNames(_),F=0;F<Y.length;F++){var q=Y[F],G=Object.getOwnPropertyDescriptor(_,q);G&&G.enumerable||(I[q]=j(_[q],E-1),Object.defineProperty(I,q,{enumerable:!1}))}return I}return j(x,v)}u.clonePrototype=function(m){if(m===null)return null;var v=function(){};return v.prototype=m,new v};function f(x){return Object.prototype.toString.call(x)}u.__objToStr=f;function d(x){return typeof x=="object"&&f(x)==="[object Date]"}u.__isDate=d;function p(x){return typeof x=="object"&&f(x)==="[object Array]"}u.__isArray=p;function h(x){return typeof x=="object"&&f(x)==="[object RegExp]"}u.__isRegExp=h;function g(x){var m="";return x.global&&(m+="g"),x.ignoreCase&&(m+="i"),x.multiline&&(m+="m"),m}return u.__getRegExpFlags=g,u}();typeof r=="object"&&r.exports&&(r.exports=s)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function I(A,C){var F=[],M=!0,B=!1,K=void 0;try{for(var G=A[Symbol.iterator](),Y;!(M=(Y=G.next()).done)&&(F.push(Y.value),!(C&&F.length===C));M=!0);}catch(q){B=!0,K=q}finally{try{!M&&G.return&&G.return()}finally{if(B)throw K}}return F}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return I(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function I(A,C){for(var F=0;F<C.length;F++){var M=C[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(A,M.key,M)}}return function(A,C,F){return C&&I(A.prototype,C),F&&I(A,F),A}}(),l=function I(A,C,F){A===null&&(A=Function.prototype);var M=Object.getOwnPropertyDescriptor(A,C);if(M===void 0){var B=Object.getPrototypeOf(A);return B===null?void 0:I(B,C,F)}else{if("value"in M)return M.value;var K=M.get;return K===void 0?void 0:K.call(F)}},c=s(0),u=b(c),f=s(8),d=b(f),p=s(4),h=b(p),g=s(16),x=b(g),m=s(13),v=b(m),y=s(25),w=b(y);function b(I){return I&&I.__esModule?I:{default:I}}function N(I,A){if(!(I instanceof A))throw new TypeError("Cannot call a class as a function")}function S(I,A){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:I}function j(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);I.prototype=Object.create(A&&A.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(I,A):I.__proto__=A)}function _(I){return I instanceof h.default||I instanceof p.BlockEmbed}var E=function(I){j(A,I);function A(C,F){N(this,A);var M=S(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C));return M.emitter=F.emitter,Array.isArray(F.whitelist)&&(M.whitelist=F.whitelist.reduce(function(B,K){return B[K]=!0,B},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return o(A,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,M){var B=this.line(F),K=i(B,2),G=K[0],Y=K[1],q=this.line(F+M),X=i(q,1),V=X[0];if(l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,F,M),V!=null&&G!==V&&Y>0){if(G instanceof p.BlockEmbed||V instanceof p.BlockEmbed){this.optimize();return}if(G instanceof v.default){var T=G.newlineIndex(G.length(),!0);if(T>-1&&(G=G.split(T+1),G===V)){this.optimize();return}}else if(V instanceof v.default){var R=V.newlineIndex(0);R>-1&&V.split(R+1)}var z=V.children.head instanceof x.default?null:V.children.head;G.moveChildren(V,z),G.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,M,B,K){this.whitelist!=null&&!this.whitelist[B]||(l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,F,M,B,K),this.optimize())}},{key:"insertAt",value:function(F,M,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[M])){if(F>=this.length())if(B==null||u.default.query(M,u.default.Scope.BLOCK)==null){var K=u.default.create(this.statics.defaultChild);this.appendChild(K),B==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),K.insertAt(0,M,B)}else{var G=u.default.create(M,B);this.appendChild(G)}else l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,F,M,B);this.optimize()}}},{key:"insertBefore",value:function(F,M){if(F.statics.scope===u.default.Scope.INLINE_BLOT){var B=u.default.create(this.statics.defaultChild);B.appendChild(F),F=B}l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,F,M)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(_,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function K(G,Y,q){var X=[],V=q;return G.children.forEachAt(Y,q,function(T,R,z){_(T)?X.push(T):T instanceof u.default.Container&&(X=X.concat(K(T,R,V))),V-=z}),X};return B(this,F,M)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,F,M),F.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,F,M))}},{key:"path",value:function(F){return l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var M=d.default.sources.USER;typeof F=="string"&&(M=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,M,F),l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,M,F)}}}]),A}(u.default.Scroll);E.blotName="scroll",E.className="ql-editor",E.tagName="DIV",E.defaultChild="block",E.allowedChildren=[h.default,p.BlockEmbed,w.default],n.default=E},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},o=function(){function H(ne,se){var Q=[],re=!0,Ae=!1,ee=void 0;try{for(var Me=ne[Symbol.iterator](),ze;!(re=(ze=Me.next()).done)&&(Q.push(ze.value),!(se&&Q.length===se));re=!0);}catch(oe){Ae=!0,ee=oe}finally{try{!re&&Me.return&&Me.return()}finally{if(Ae)throw ee}}return Q}return function(ne,se){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return H(ne,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function H(ne,se){for(var Q=0;Q<se.length;Q++){var re=se[Q];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ne,re.key,re)}}return function(ne,se,Q){return se&&H(ne.prototype,se),Q&&H(ne,Q),ne}}(),c=s(21),u=I(c),f=s(11),d=I(f),p=s(3),h=I(p),g=s(2),x=I(g),m=s(20),v=I(m),y=s(0),w=I(y),b=s(5),N=I(b),S=s(10),j=I(S),_=s(9),E=I(_);function I(H){return H&&H.__esModule?H:{default:H}}function A(H,ne,se){return ne in H?Object.defineProperty(H,ne,{value:se,enumerable:!0,configurable:!0,writable:!0}):H[ne]=se,H}function C(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}function F(H,ne){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:H}function M(H,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);H.prototype=Object.create(ne&&ne.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(H,ne):H.__proto__=ne)}var B=(0,j.default)("quill:keyboard"),K=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",G=function(H){M(ne,H),l(ne,null,[{key:"match",value:function(Q,re){return re=L(re),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Ae){return!!re[Ae]!==Q[Ae]&&re[Ae]!==null})?!1:re.key===(Q.which||Q.keyCode)}}]);function ne(se,Q){C(this,ne);var re=F(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this,se,Q));return re.bindings={},Object.keys(re.options.bindings).forEach(function(Ae){Ae==="list autofill"&&se.scroll.whitelist!=null&&!se.scroll.whitelist.list||re.options.bindings[Ae]&&re.addBinding(re.options.bindings[Ae])}),re.addBinding({key:ne.keys.ENTER,shiftKey:null},T),re.addBinding({key:ne.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(re.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0},q),re.addBinding({key:ne.keys.DELETE},{collapsed:!0},X)):(re.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},q),re.addBinding({key:ne.keys.DELETE},{collapsed:!0,suffix:/^.?$/},X)),re.addBinding({key:ne.keys.BACKSPACE},{collapsed:!1},V),re.addBinding({key:ne.keys.DELETE},{collapsed:!1},V),re.addBinding({key:ne.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},q),re.listen(),re}return l(ne,[{key:"addBinding",value:function(Q){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ee=L(Q);if(ee==null||ee.key==null)return B.warn("Attempted to add invalid keyboard binding",ee);typeof re=="function"&&(re={handler:re}),typeof Ae=="function"&&(Ae={handler:Ae}),ee=(0,h.default)(ee,re,Ae),this.bindings[ee.key]=this.bindings[ee.key]||[],this.bindings[ee.key].push(ee)}},{key:"listen",value:function(){var Q=this;this.quill.root.addEventListener("keydown",function(re){if(!re.defaultPrevented){var Ae=re.which||re.keyCode,ee=(Q.bindings[Ae]||[]).filter(function(We){return ne.match(re,We)});if(ee.length!==0){var Me=Q.quill.getSelection();if(!(Me==null||!Q.quill.hasFocus())){var ze=Q.quill.getLine(Me.index),oe=o(ze,2),J=oe[0],je=oe[1],ce=Q.quill.getLeaf(Me.index),ye=o(ce,2),me=ye[0],ge=ye[1],Ce=Me.length===0?[me,ge]:Q.quill.getLeaf(Me.index+Me.length),Ue=o(Ce,2),Te=Ue[0],ue=Ue[1],Oe=me instanceof w.default.Text?me.value().slice(0,ge):"",st=Te instanceof w.default.Text?Te.value().slice(ue):"",be={collapsed:Me.length===0,empty:Me.length===0&&J.length()<=1,format:Q.quill.getFormat(Me),offset:je,prefix:Oe,suffix:st},De=ee.some(function(We){if(We.collapsed!=null&&We.collapsed!==be.collapsed||We.empty!=null&&We.empty!==be.empty||We.offset!=null&&We.offset!==be.offset)return!1;if(Array.isArray(We.format)){if(We.format.every(function(Xe){return be.format[Xe]==null}))return!1}else if(i(We.format)==="object"&&!Object.keys(We.format).every(function(Xe){return We.format[Xe]===!0?be.format[Xe]!=null:We.format[Xe]===!1?be.format[Xe]==null:(0,d.default)(We.format[Xe],be.format[Xe])}))return!1;return We.prefix!=null&&!We.prefix.test(be.prefix)||We.suffix!=null&&!We.suffix.test(be.suffix)?!1:We.handler.call(Q,Me,be)!==!0});De&&re.preventDefault()}}}})}}]),ne}(E.default);G.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},G.DEFAULTS={bindings:{bold:z("bold"),italic:z("italic"),underline:z("underline"),indent:{key:G.keys.TAB,format:["blockquote","indent","list"],handler:function(ne,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","+1",N.default.sources.USER)}},outdent:{key:G.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ne,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","-1",N.default.sources.USER)}},"outdent backspace":{key:G.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ne,se){se.format.indent!=null?this.quill.format("indent","-1",N.default.sources.USER):se.format.list!=null&&this.quill.format("list",!1,N.default.sources.USER)}},"indent code-block":R(!0),"outdent code-block":R(!1),"remove tab":{key:G.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ne){this.quill.deleteText(ne.index-1,1,N.default.sources.USER)}},tab:{key:G.keys.TAB,handler:function(ne){this.quill.history.cutoff();var se=new x.default().retain(ne.index).delete(ne.length).insert("	");this.quill.updateContents(se,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index+1,N.default.sources.SILENT)}},"list empty enter":{key:G.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ne,se){this.quill.format("list",!1,N.default.sources.USER),se.format.indent&&this.quill.format("indent",!1,N.default.sources.USER)}},"checklist enter":{key:G.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ne){var se=this.quill.getLine(ne.index),Q=o(se,2),re=Q[0],Ae=Q[1],ee=(0,h.default)({},re.formats(),{list:"checked"}),Me=new x.default().retain(ne.index).insert(`
`,ee).retain(re.length()-Ae-1).retain(1,{list:"unchecked"});this.quill.updateContents(Me,N.default.sources.USER),this.quill.setSelection(ne.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:G.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ne,se){var Q=this.quill.getLine(ne.index),re=o(Q,2),Ae=re[0],ee=re[1],Me=new x.default().retain(ne.index).insert(`
`,se.format).retain(Ae.length()-ee-1).retain(1,{header:null});this.quill.updateContents(Me,N.default.sources.USER),this.quill.setSelection(ne.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ne,se){var Q=se.prefix.length,re=this.quill.getLine(ne.index),Ae=o(re,2),ee=Ae[0],Me=Ae[1];if(Me>Q)return!0;var ze=void 0;switch(se.prefix.trim()){case"[]":case"[ ]":ze="unchecked";break;case"[x]":ze="checked";break;case"-":case"*":ze="bullet";break;default:ze="ordered"}this.quill.insertText(ne.index," ",N.default.sources.USER),this.quill.history.cutoff();var oe=new x.default().retain(ne.index-Me).delete(Q+1).retain(ee.length()-2-Me).retain(1,{list:ze});this.quill.updateContents(oe,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index-Q,N.default.sources.SILENT)}},"code exit":{key:G.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ne){var se=this.quill.getLine(ne.index),Q=o(se,2),re=Q[0],Ae=Q[1],ee=new x.default().retain(ne.index+re.length()-Ae-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ee,N.default.sources.USER)}},"embed left":Y(G.keys.LEFT,!1),"embed left shift":Y(G.keys.LEFT,!0),"embed right":Y(G.keys.RIGHT,!1),"embed right shift":Y(G.keys.RIGHT,!0)}};function Y(H,ne){var se,Q=H===G.keys.LEFT?"prefix":"suffix";return se={key:H,shiftKey:ne,altKey:null},A(se,Q,/^$/),A(se,"handler",function(Ae){var ee=Ae.index;H===G.keys.RIGHT&&(ee+=Ae.length+1);var Me=this.quill.getLeaf(ee),ze=o(Me,1),oe=ze[0];return oe instanceof w.default.Embed?(H===G.keys.LEFT?ne?this.quill.setSelection(Ae.index-1,Ae.length+1,N.default.sources.USER):this.quill.setSelection(Ae.index-1,N.default.sources.USER):ne?this.quill.setSelection(Ae.index,Ae.length+1,N.default.sources.USER):this.quill.setSelection(Ae.index+Ae.length+1,N.default.sources.USER),!1):!0}),se}function q(H,ne){if(!(H.index===0||this.quill.getLength()<=1)){var se=this.quill.getLine(H.index),Q=o(se,1),re=Q[0],Ae={};if(ne.offset===0){var ee=this.quill.getLine(H.index-1),Me=o(ee,1),ze=Me[0];if(ze!=null&&ze.length()>1){var oe=re.formats(),J=this.quill.getFormat(H.index-1,1);Ae=v.default.attributes.diff(oe,J)||{}}}var je=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ne.prefix)?2:1;this.quill.deleteText(H.index-je,je,N.default.sources.USER),Object.keys(Ae).length>0&&this.quill.formatLine(H.index-je,je,Ae,N.default.sources.USER),this.quill.focus()}}function X(H,ne){var se=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ne.suffix)?2:1;if(!(H.index>=this.quill.getLength()-se)){var Q={},re=0,Ae=this.quill.getLine(H.index),ee=o(Ae,1),Me=ee[0];if(ne.offset>=Me.length()-1){var ze=this.quill.getLine(H.index+1),oe=o(ze,1),J=oe[0];if(J){var je=Me.formats(),ce=this.quill.getFormat(H.index,1);Q=v.default.attributes.diff(je,ce)||{},re=J.length()}}this.quill.deleteText(H.index,se,N.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(H.index+re-1,se,Q,N.default.sources.USER)}}function V(H){var ne=this.quill.getLines(H),se={};if(ne.length>1){var Q=ne[0].formats(),re=ne[ne.length-1].formats();se=v.default.attributes.diff(re,Q)||{}}this.quill.deleteText(H,N.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(H.index,1,se,N.default.sources.USER),this.quill.setSelection(H.index,N.default.sources.SILENT),this.quill.focus()}function T(H,ne){var se=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var Q=Object.keys(ne.format).reduce(function(re,Ae){return w.default.query(Ae,w.default.Scope.BLOCK)&&!Array.isArray(ne.format[Ae])&&(re[Ae]=ne.format[Ae]),re},{});this.quill.insertText(H.index,`
`,Q,N.default.sources.USER),this.quill.setSelection(H.index+1,N.default.sources.SILENT),this.quill.focus(),Object.keys(ne.format).forEach(function(re){Q[re]==null&&(Array.isArray(ne.format[re])||re!=="link"&&se.quill.format(re,ne.format[re],N.default.sources.USER))})}function R(H){return{key:G.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(se){var Q=w.default.query("code-block"),re=se.index,Ae=se.length,ee=this.quill.scroll.descendant(Q,re),Me=o(ee,2),ze=Me[0],oe=Me[1];if(ze!=null){var J=this.quill.getIndex(ze),je=ze.newlineIndex(oe,!0)+1,ce=ze.newlineIndex(J+oe+Ae),ye=ze.domNode.textContent.slice(je,ce).split(`
`);oe=0,ye.forEach(function(me,ge){H?(ze.insertAt(je+oe,Q.TAB),oe+=Q.TAB.length,ge===0?re+=Q.TAB.length:Ae+=Q.TAB.length):me.startsWith(Q.TAB)&&(ze.deleteAt(je+oe,Q.TAB.length),oe-=Q.TAB.length,ge===0?re-=Q.TAB.length:Ae-=Q.TAB.length),oe+=me.length+1}),this.quill.update(N.default.sources.USER),this.quill.setSelection(re,Ae,N.default.sources.SILENT)}}}}function z(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(se,Q){this.quill.format(H,!Q.format[H],N.default.sources.USER)}}}function L(H){if(typeof H=="string"||typeof H=="number")return L({key:H});if((typeof H>"u"?"undefined":i(H))==="object"&&(H=(0,u.default)(H,!1)),typeof H.key=="string")if(G.keys[H.key.toUpperCase()]!=null)H.key=G.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[K]=H.shortKey,delete H.shortKey),H}n.default=G,n.SHORTKEY=K},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function v(y,w){var b=[],N=!0,S=!1,j=void 0;try{for(var _=y[Symbol.iterator](),E;!(N=(E=_.next()).done)&&(b.push(E.value),!(w&&b.length===w));N=!0);}catch(I){S=!0,j=I}finally{try{!N&&_.return&&_.return()}finally{if(S)throw j}}return b}return function(y,w){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return v(y,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function v(y,w,b){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,w,b)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(b)}},l=function(){function v(y,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,b){return w&&v(y.prototype,w),b&&v(y,b),y}}(),c=s(0),u=p(c),f=s(7),d=p(f);function p(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function g(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function x(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var m=function(v){x(y,v),l(y,null,[{key:"value",value:function(){}}]);function y(w,b){h(this,y);var N=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,w));return N.selection=b,N.textNode=document.createTextNode(y.CONTENTS),N.domNode.appendChild(N.textNode),N._length=0,N}return l(y,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,N){if(this._length!==0)return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,N);for(var S=this,j=0;S!=null&&S.statics.scope!==u.default.Scope.BLOCK_BLOT;)j+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=y.CONTENTS.length,S.optimize(),S.formatAt(j,y.CONTENTS.length,b,N),this._length=0)}},{key:"index",value:function(b,N){return b===this.textNode?0:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,b,N)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,N=this.selection.getNativeRange(),S=void 0,j=void 0,_=void 0;if(N!=null&&N.start.node===b&&N.end.node===b){var E=[b,N.start.offset,N.end.offset];S=E[0],j=E[1],_=E[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var I=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof d.default?(S=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=y.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),j!=null){var A=[j,_].map(function(F){return Math.max(0,Math.min(S.data.length,F-1))}),C=i(A,2);return j=C[0],_=C[1],{startNode:S,startOffset:j,endNode:S,endOffset:_}}}}},{key:"update",value:function(b,N){var S=this;if(b.some(function(_){return _.type==="characterData"&&_.target===S.textNode})){var j=this.restore();j&&(N.range=j)}}},{key:"value",value:function(){return""}}]),y}(u.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",n.default=m},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=u(i),l=s(4),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(){return f(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(o.default.Container);h.allowedChildren=[c.default,l.BlockEmbed,h],n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var i=function(){function m(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&m(v.prototype,y),w&&m(v,w),v}}(),o=function m(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:m(N,y,w)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function f(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function d(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function p(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var h=function(m){p(v,m);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"value",value:function(w){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,w);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(N){return("00"+parseInt(N).toString(16)).slice(-2)}).join("")):b}}]),v}(c.default.Attributor.Style),g=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),x=new h("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=h,n.ColorClass=g,n.ColorStyle=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var i=function(){function x(m,v){for(var y=0;y<v.length;y++){var w=v[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,v,y){return v&&x(m.prototype,v),y&&x(m,y),m}}(),o=function x(m,v,y){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,v);if(w===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:x(b,v,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(6),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function d(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function p(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}var h=function(x){p(m,x);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return i(m,[{key:"format",value:function(y,w){if(y!==this.statics.blotName||!w)return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,y,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(y){var w=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,y);return y=this.sanitize(y),w.setAttribute("href",y),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return g(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),m}(c.default);h.blotName="link",h.tagName="A",h.SANITIZED_URL="about:blank",h.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(x,m){var v=document.createElement("a");v.href=x;var y=v.href.slice(0,v.href.indexOf(":"));return m.indexOf(y)>-1}n.default=h,n.sanitize=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},o=function(){function m(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&m(v.prototype,y),w&&m(v,w),v}}(),l=s(23),c=d(l),u=s(107),f=d(u);function d(m){return m&&m.__esModule?m:{default:m}}function p(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}var h=0;function g(m,v){m.setAttribute(v,m.getAttribute(v)!=="true")}var x=function(){function m(v){var y=this;p(this,m),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){y.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case c.default.keys.ENTER:y.togglePicker();break;case c.default.keys.ESCAPE:y.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(y){var w=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),y.hasAttribute("value")&&b.setAttribute("data-value",y.getAttribute("value")),y.textContent&&b.setAttribute("data-label",y.textContent),b.addEventListener("click",function(){w.selectItem(b,!0)}),b.addEventListener("keydown",function(N){switch(N.keyCode){case c.default.keys.ENTER:w.selectItem(b,!0),N.preventDefault();break;case c.default.keys.ESCAPE:w.escape(),N.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var y=document.createElement("span");return y.classList.add("ql-picker-label"),y.innerHTML=f.default,y.tabIndex="0",y.setAttribute("role","button"),y.setAttribute("aria-expanded","false"),this.container.appendChild(y),y}},{key:"buildOptions",value:function(){var y=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+h,h+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(b){var N=y.buildItem(b);w.appendChild(N),b.selected===!0&&y.selectItem(N)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var y=this;[].slice.call(this.select.attributes).forEach(function(w){y.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var y=this;this.close(),setTimeout(function(){return y.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(y!==b&&(b!=null&&b.classList.remove("ql-selected"),y!=null&&(y.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(y.parentNode.children,y),y.hasAttribute("data-value")?this.label.setAttribute("data-value",y.getAttribute("data-value")):this.label.removeAttribute("data-value"),y.hasAttribute("data-label")?this.label.setAttribute("data-label",y.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var N=document.createEvent("Event");N.initEvent("change",!0,!0),this.select.dispatchEvent(N)}this.close()}}},{key:"update",value:function(){var y=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];y=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var b=y!=null&&y!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),m}();n.default=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=B(i),l=s(5),c=B(l),u=s(4),f=B(u),d=s(16),p=B(d),h=s(25),g=B(h),x=s(24),m=B(x),v=s(35),y=B(v),w=s(6),b=B(w),N=s(22),S=B(N),j=s(7),_=B(j),E=s(55),I=B(E),A=s(42),C=B(A),F=s(23),M=B(F);function B(K){return K&&K.__esModule?K:{default:K}}c.default.register({"blots/block":f.default,"blots/block/embed":u.BlockEmbed,"blots/break":p.default,"blots/container":g.default,"blots/cursor":m.default,"blots/embed":y.default,"blots/inline":b.default,"blots/scroll":S.default,"blots/text":_.default,"modules/clipboard":I.default,"modules/history":C.default,"modules/keyboard":M.default}),o.default.register(f.default,p.default,m.default,b.default,S.default,_.default),n.default=c.default},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?u=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?u=document.createElement(c):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,u){var f=this.isolate(c,u);f.remove()},l.prototype.formatAt=function(c,u,f,d){var p=this.isolate(c,u);if(i.query(f,i.Scope.BLOT)!=null&&d)p.wrap(f,d);else if(i.query(f,i.Scope.ATTRIBUTE)!=null){var h=i.create(this.statics.scope);p.wrap(h),h.format(f,d)}},l.prototype.insertAt=function(c,u,f){var d=f==null?i.create("text",u):i.create(u,f),p=this.split(c);this.parent.insertBefore(d,p)},l.prototype.insertInto=function(c,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var f=null;c.children.insertBefore(this,u),u!=null&&(f=u.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=f)&&c.domNode.insertBefore(this.domNode,f),this.parent=c,this.attach()},l.prototype.isolate=function(c,u){var f=this.split(c);return f.split(u),f},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,u){var f=typeof c=="string"?i.create(c,u):c;return f.replace(this),f},l.prototype.split=function(c,u){return c===0?this:this.next},l.prototype.update=function(c,u){},l.prototype.wrap=function(c,u){var f=typeof c=="string"?i.create(c,u):c;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();n.default=o},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),u=function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,p){p?d.add(this.domNode,p)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var p=i.default.keys(this.domNode),h=o.default.keys(this.domNode),g=l.default.keys(this.domNode);p.concat(h).concat(g).forEach(function(x){var m=c.query(x,c.Scope.ATTRIBUTE);m instanceof i.default&&(d.attributes[m.attrName]=m)})},f.prototype.copy=function(d){var p=this;Object.keys(this.attributes).forEach(function(h){var g=p.attributes[h].value(p.domNode);d.format(h,g)})},f.prototype.move=function(d){var p=this;this.copy(d),Object.keys(this.attributes).forEach(function(h){p.attributes[h].remove(p.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(p,h){return p[h]=d.attributes[h].value(d.domNode),p},{})},f}();n.default=u},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(u,f){var d=u.getAttribute("class")||"";return d.split(/\s+/).filter(function(p){return p.indexOf(f+"-")===0})}var c=function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,p){return this.canAdd(d,p)?(this.remove(d),d.classList.add(this.keyName+"-"+p),!0):!1},f.prototype.remove=function(d){var p=l(d,this.keyName);p.forEach(function(h){d.classList.remove(h)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var p=l(d,this.keyName)[0]||"",h=p.slice(this.keyName.length+1);return this.canAdd(d,h)?h:""},f}(o.default);n.default=c},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(u){var f=u.split("-"),d=f.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return f[0]+d}var c=function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(p){var h=p.split(":");return h[0].trim()})},f.prototype.add=function(d,p){return this.canAdd(d,p)?(d.style[l(this.keyName)]=p,!0):!1},f.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var p=d.style[l(this.keyName)];return this.canAdd(d,p)?p:""},f}(o.default);n.default=c},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function c(u,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}}();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(u,f){o(this,c),this.quill=u,this.options=f,this.modules={}}return i(c,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),c}();l.DEFAULTS={modules:{}},l.themes={default:l},n.default=l},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function v(y,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,b){return w&&v(y.prototype,w),b&&v(y,b),y}}(),o=function v(y,w,b){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,w,b)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(b)}},l=s(0),c=d(l),u=s(7),f=d(u);function d(v){return v&&v.__esModule?v:{default:v}}function p(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function h(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function g(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var x="\uFEFF",m=function(v){g(y,v);function y(w){p(this,y);var b=h(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,w));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(N){b.contentNode.appendChild(N)}),b.leftGuard=document.createTextNode(x),b.rightGuard=document.createTextNode(x),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return i(y,[{key:"index",value:function(b,N){return b===this.leftGuard?0:b===this.rightGuard?1:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,b,N)}},{key:"restore",value:function(b){var N=void 0,S=void 0,j=b.data.split(x).join("");if(b===this.leftGuard)if(this.prev instanceof f.default){var _=this.prev.length();this.prev.insertAt(_,j),N={startNode:this.prev.domNode,startOffset:_+j.length}}else S=document.createTextNode(j),this.parent.insertBefore(c.default.create(S),this),N={startNode:S,startOffset:j.length};else b===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,j),N={startNode:this.next.domNode,startOffset:j.length}):(S=document.createTextNode(j),this.parent.insertBefore(c.default.create(S),this.next),N={startNode:S,startOffset:j.length}));return b.data=x,N}},{key:"update",value:function(b,N){var S=this;b.forEach(function(j){if(j.type==="characterData"&&(j.target===S.leftGuard||j.target===S.rightGuard)){var _=S.restore(j.target);_&&(N.range=_)}})}}]),y}(c.default.Embed);n.default=m},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",c),f=new o.default.Attributor.Class("align","ql-align",c),d=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=u,n.AlignClass=f,n.AlignStyle=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(d){return d&&d.__esModule?d:{default:d}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=f},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",c),f=new o.default.Attributor.Class("direction","ql-direction",c),d=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=u,n.DirectionClass=f,n.DirectionStyle=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var i=function(){function v(y,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,b){return w&&v(y.prototype,w),b&&v(y,b),y}}(),o=function v(y,w,b){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,w,b)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(b)}},l=s(0),c=u(l);function u(v){return v&&v.__esModule?v:{default:v}}function f(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function d(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function p(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var h={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new c.default.Attributor.Class("font","ql-font",h),x=function(v){p(y,v);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(b){return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),y}(c.default.Attributor.Style),m=new x("font","font-family",h);n.FontStyle=m,n.FontClass=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var i=s(0),o=l(i);function l(f){return f&&f.__esModule?f:{default:f}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=u},function(r,n,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var i=function(){function w(b,N){for(var S=0;S<N.length;S++){var j=N[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,N,S){return N&&w(b.prototype,N),S&&w(b,S),b}}(),o=s(0),l=p(o),c=s(5),u=p(c),f=s(9),d=p(f);function p(w){return w&&w.__esModule?w:{default:w}}function h(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function g(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function x(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var m=function(w){x(b,w);function b(N,S){h(this,b);var j=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,N,S));return j.lastRecorded=0,j.ignoreChange=!1,j.clear(),j.quill.on(u.default.events.EDITOR_CHANGE,function(_,E,I,A){_!==u.default.events.TEXT_CHANGE||j.ignoreChange||(!j.options.userOnly||A===u.default.sources.USER?j.record(E,I):j.transform(E))}),j.quill.keyboard.addBinding({key:"Z",shortKey:!0},j.undo.bind(j)),j.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},j.redo.bind(j)),/Win/i.test(navigator.platform)&&j.quill.keyboard.addBinding({key:"Y",shortKey:!0},j.redo.bind(j)),j}return i(b,[{key:"change",value:function(S,j){if(this.stack[S].length!==0){var _=this.stack[S].pop();this.stack[j].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[S],u.default.sources.USER),this.ignoreChange=!1;var E=y(_[S]);this.quill.setSelection(E)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,j){if(S.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(j),E=Date.now();if(this.lastRecorded+this.options.delay>E&&this.stack.undo.length>0){var I=this.stack.undo.pop();_=_.compose(I.undo),S=I.redo.compose(S)}else this.lastRecorded=E;this.stack.undo.push({redo:S,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(j){j.undo=S.transform(j.undo,!0),j.redo=S.transform(j.redo,!0)}),this.stack.redo.forEach(function(j){j.undo=S.transform(j.undo,!0),j.redo=S.transform(j.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(d.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(w){var b=w.ops[w.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(N){return l.default.query(N,l.default.Scope.BLOCK)!=null}):!1}function y(w){var b=w.reduce(function(S,j){return S+=j.delete||0,S},0),N=w.length()-b;return v(w)&&(N-=1),N}n.default=m,n.getLastChangeIndex=y},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var i=function(){function T(R,z){for(var L=0;L<z.length;L++){var H=z[L];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}}return function(R,z,L){return z&&T(R.prototype,z),L&&T(R,L),R}}(),o=function T(R,z,L){R===null&&(R=Function.prototype);var H=Object.getOwnPropertyDescriptor(R,z);if(H===void 0){var ne=Object.getPrototypeOf(R);return ne===null?void 0:T(ne,z,L)}else{if("value"in H)return H.value;var se=H.get;return se===void 0?void 0:se.call(L)}},l=s(3),c=E(l),u=s(2),f=E(u),d=s(8),p=E(d),h=s(23),g=E(h),x=s(34),m=E(x),v=s(59),y=E(v),w=s(60),b=E(w),N=s(28),S=E(N),j=s(61),_=E(j);function E(T){return T&&T.__esModule?T:{default:T}}function I(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")}function A(T,R){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:T}function C(T,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);T.prototype=Object.create(R&&R.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(T,R):T.__proto__=R)}var F=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],K=["1","2","3",!1],G=["small",!1,"large","huge"],Y=function(T){C(R,T);function R(z,L){I(this,R);var H=A(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,z,L)),ne=function se(Q){if(!document.body.contains(z.root))return document.body.removeEventListener("click",se);H.tooltip!=null&&!H.tooltip.root.contains(Q.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(re){re.container.contains(Q.target)||re.close()})};return z.emitter.listenDOM("click",document.body,ne),H}return i(R,[{key:"addModule",value:function(L){var H=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"addModule",this).call(this,L);return L==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(L,H){L.forEach(function(ne){var se=ne.getAttribute("class")||"";se.split(/\s+/).forEach(function(Q){if(Q.startsWith("ql-")&&(Q=Q.slice(3),H[Q]!=null))if(Q==="direction")ne.innerHTML=H[Q][""]+H[Q].rtl;else if(typeof H[Q]=="string")ne.innerHTML=H[Q];else{var re=ne.value||"";re!=null&&H[Q][re]&&(ne.innerHTML=H[Q][re])}})})}},{key:"buildPickers",value:function(L,H){var ne=this;this.pickers=L.map(function(Q){if(Q.classList.contains("ql-align"))return Q.querySelector("option")==null&&V(Q,F),new b.default(Q,H.align);if(Q.classList.contains("ql-background")||Q.classList.contains("ql-color")){var re=Q.classList.contains("ql-background")?"background":"color";return Q.querySelector("option")==null&&V(Q,M,re==="background"?"#ffffff":"#000000"),new y.default(Q,H[re])}else return Q.querySelector("option")==null&&(Q.classList.contains("ql-font")?V(Q,B):Q.classList.contains("ql-header")?V(Q,K):Q.classList.contains("ql-size")&&V(Q,G)),new S.default(Q)});var se=function(){ne.pickers.forEach(function(re){re.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,se)}}]),R}(m.default);Y.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var R=this,z=this.container.querySelector("input.ql-image[type=file]");z==null&&(z=document.createElement("input"),z.setAttribute("type","file"),z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),z.classList.add("ql-image"),z.addEventListener("change",function(){if(z.files!=null&&z.files[0]!=null){var L=new FileReader;L.onload=function(H){var ne=R.quill.getSelection(!0);R.quill.updateContents(new f.default().retain(ne.index).delete(ne.length).insert({image:H.target.result}),p.default.sources.USER),R.quill.setSelection(ne.index+1,p.default.sources.SILENT),z.value=""},L.readAsDataURL(z.files[0])}}),this.container.appendChild(z)),z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var q=function(T){C(R,T);function R(z,L){I(this,R);var H=A(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,z,L));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return i(R,[{key:"listen",value:function(){var L=this;this.textbox.addEventListener("keydown",function(H){g.default.match(H,"enter")?(L.save(),H.preventDefault()):g.default.match(H,"escape")&&(L.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:L!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+L)||""),this.root.setAttribute("data-mode",L)}},{key:"restoreFocus",value:function(){var L=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=L}},{key:"save",value:function(){var L=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",L,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",L,p.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":L=X(L);case"formula":{if(!L)break;var ne=this.quill.getSelection(!0);if(ne!=null){var se=ne.index+ne.length;this.quill.insertEmbed(se,this.root.getAttribute("data-mode"),L,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(se+1," ",p.default.sources.USER),this.quill.setSelection(se+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),R}(_.default);function X(T){var R=T.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||T.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return R?(R[1]||"https")+"://www.youtube.com/embed/"+R[2]+"?showinfo=0":(R=T.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(R[1]||"https")+"://player.vimeo.com/video/"+R[2]+"/":T}function V(T,R){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R.forEach(function(L){var H=document.createElement("option");L===z?H.setAttribute("selected","selected"):H.setAttribute("value",L),T.appendChild(H)})}n.BaseTooltip=q,n.default=Y},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,u=this.iterator();c=u();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,u=this.head;u!=null;){if(u===l)return c;c+=u.length(),u=u.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var u,f=this.iterator();u=f();){var d=u.length();if(l<d||c&&l===d&&(u.next==null||u.next.length()!==0))return[u,l];l-=d}return[null,0]},o.prototype.forEach=function(l){for(var c,u=this.iterator();c=u();)l(c)},o.prototype.forEachAt=function(l,c,u){if(!(c<=0))for(var f=this.find(l),d=f[0],p=f[1],h,g=l-p,x=this.iterator(d);(h=x())&&g<l+c;){var m=h.length();l>g?u(h,l-g,Math.min(c,g+m-l)):u(h,0,Math.min(m,l+c-g)),g+=m}},o.prototype.map=function(l){return this.reduce(function(c,u){return c.push(l(u)),c},[])},o.prototype.reduce=function(l,c){for(var u,f=this.iterator();u=f();)c=l(c,u);return c},o}();n.default=i},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)h.hasOwnProperty(g)&&(p[g]=h[g])};return function(p,h){d(p,h);function g(){this.constructor=p}p.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,f=function(d){i(p,d);function p(h){var g=d.call(this,h)||this;return g.scroll=g,g.observer=new MutationObserver(function(x){g.update(x)}),g.observer.observe(g.domNode,c),g.attach(),g}return p.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(h,g){this.update(),h===0&&g===this.length()?this.children.forEach(function(x){x.remove()}):d.prototype.deleteAt.call(this,h,g)},p.prototype.formatAt=function(h,g,x,m){this.update(),d.prototype.formatAt.call(this,h,g,x,m)},p.prototype.insertAt=function(h,g,x){this.update(),d.prototype.insertAt.call(this,h,g,x)},p.prototype.optimize=function(h,g){var x=this;h===void 0&&(h=[]),g===void 0&&(g={}),d.prototype.optimize.call(this,g);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)h.push(m.pop());for(var v=function(N,S){S===void 0&&(S=!0),!(N==null||N===x)&&N.domNode.parentNode!=null&&(N.domNode[l.DATA_KEY].mutations==null&&(N.domNode[l.DATA_KEY].mutations=[]),S&&v(N.parent))},y=function(N){N.domNode[l.DATA_KEY]==null||N.domNode[l.DATA_KEY].mutations==null||(N instanceof o.default&&N.children.forEach(y),N.optimize(g))},w=h,b=0;w.length>0;b+=1){if(b>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(N){var S=l.find(N.target,!0);S!=null&&(S.domNode===N.target&&(N.type==="childList"?(v(l.find(N.previousSibling,!1)),[].forEach.call(N.addedNodes,function(j){var _=l.find(j,!1);v(_,!1),_ instanceof o.default&&_.children.forEach(function(E){v(E,!1)})})):N.type==="attributes"&&v(S.prev)),v(S))}),this.children.forEach(y),w=[].slice.call(this.observer.takeRecords()),m=w.slice();m.length>0;)h.push(m.pop())}},p.prototype.update=function(h,g){var x=this;g===void 0&&(g={}),h=h||this.observer.takeRecords(),h.map(function(m){var v=l.find(m.target,!0);return v==null?null:v.domNode[l.DATA_KEY].mutations==null?(v.domNode[l.DATA_KEY].mutations=[m],v):(v.domNode[l.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===x||m.domNode[l.DATA_KEY]==null||m.update(m.domNode[l.DATA_KEY].mutations||[],g)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,g),this.optimize(h,g)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p}(o.default);n.default=f},function(r,n,s){var i=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var h in p)p.hasOwnProperty(h)&&(d[h]=p[h])};return function(d,p){f(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1);function c(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var p in f)if(f[p]!==d[p])return!1;return!0}var u=function(f){i(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(p){if(p.tagName!==d.tagName)return f.formats.call(this,p)},d.prototype.format=function(p,h){var g=this;p===this.statics.blotName&&!h?(this.children.forEach(function(x){x instanceof o.default||(x=x.wrap(d.blotName,!0)),g.attributes.copy(x)}),this.unwrap()):f.prototype.format.call(this,p,h)},d.prototype.formatAt=function(p,h,g,x){if(this.formats()[g]!=null||l.query(g,l.Scope.ATTRIBUTE)){var m=this.isolate(p,h);m.format(g,x)}else f.prototype.formatAt.call(this,p,h,g,x)},d.prototype.optimize=function(p){f.prototype.optimize.call(this,p);var h=this.formats();if(Object.keys(h).length===0)return this.unwrap();var g=this.next;g instanceof d&&g.prev===this&&c(h,g.formats())&&(g.moveChildren(this),g.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d}(o.default);n.default=u},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1),c=function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(d){var p=l.query(f.blotName).tagName;if(d.tagName!==p)return u.formats.call(this,d)},f.prototype.format=function(d,p){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!p?this.replaceWith(f.blotName):u.prototype.format.call(this,d,p))},f.prototype.formatAt=function(d,p,h,g){l.query(h,l.Scope.BLOCK)!=null?this.format(h,g):u.prototype.formatAt.call(this,d,p,h,g)},f.prototype.insertAt=function(d,p,h){if(h==null||l.query(p,l.Scope.INLINE)!=null)u.prototype.insertAt.call(this,d,p,h);else{var g=this.split(d),x=l.create(p,h);g.parent.insertBefore(x,g)}},f.prototype.update=function(d,p){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,d,p)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(o.default);n.default=c},function(r,n,s){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)f.hasOwnProperty(d)&&(u[d]=f[d])};return function(u,f){c(u,f);function d(){this.constructor=u}u.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(f){},u.prototype.format=function(f,d){c.prototype.formatAt.call(this,0,this.length(),f,d)},u.prototype.formatAt=function(f,d,p,h){f===0&&d===this.length()?this.format(p,h):c.prototype.formatAt.call(this,f,d,p,h)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);n.default=l},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=s(1),c=function(u){i(f,u);function f(d){var p=u.call(this,d)||this;return p.text=p.statics.value(p.domNode),p}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var p=d.data;return p.normalize&&(p=p.normalize()),p},f.prototype.deleteAt=function(d,p){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+p)},f.prototype.index=function(d,p){return this.domNode===d?p:-1},f.prototype.insertAt=function(d,p,h){h==null?(this.text=this.text.slice(0,d)+p+this.text.slice(d),this.domNode.data=this.text):u.prototype.insertAt.call(this,d,p,h)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){u.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,p){return[this.domNode,d]},f.prototype.split=function(d,p){if(p===void 0&&(p=!1),!p){if(d===0)return this;if(d===this.length())return this.next}var h=l.create(this.domNode.splitText(d));return this.parent.insertBefore(h,this.next),this.text=this.statics.value(this.domNode),h},f.prototype.update=function(d,p){var h=this;d.some(function(g){return g.type==="characterData"&&g.target===h.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(o.default);n.default=c},function(r,n,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var u=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>u.length)&&(c=u.length),c-=l.length;var f=u.indexOf(l,c);return f!==-1&&f===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),f=u.length>>>0,d=arguments[1],p,h=0;h<f;h++)if(p=u[h],c.call(d,p,h,u))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var s=-1,i=1,o=0;function l(b,N,S){if(b==N)return b?[[o,b]]:[];(S<0||b.length<S)&&(S=null);var j=d(b,N),_=b.substring(0,j);b=b.substring(j),N=N.substring(j),j=p(b,N);var E=b.substring(b.length-j);b=b.substring(0,b.length-j),N=N.substring(0,N.length-j);var I=c(b,N);return _&&I.unshift([o,_]),E&&I.push([o,E]),g(I),S!=null&&(I=v(I,S)),I=y(I),I}function c(b,N){var S;if(!b)return[[i,N]];if(!N)return[[s,b]];var j=b.length>N.length?b:N,_=b.length>N.length?N:b,E=j.indexOf(_);if(E!=-1)return S=[[i,j.substring(0,E)],[o,_],[i,j.substring(E+_.length)]],b.length>N.length&&(S[0][0]=S[2][0]=s),S;if(_.length==1)return[[s,b],[i,N]];var I=h(b,N);if(I){var A=I[0],C=I[1],F=I[2],M=I[3],B=I[4],K=l(A,F),G=l(C,M);return K.concat([[o,B]],G)}return u(b,N)}function u(b,N){for(var S=b.length,j=N.length,_=Math.ceil((S+j)/2),E=_,I=2*_,A=new Array(I),C=new Array(I),F=0;F<I;F++)A[F]=-1,C[F]=-1;A[E+1]=0,C[E+1]=0;for(var M=S-j,B=M%2!=0,K=0,G=0,Y=0,q=0,X=0;X<_;X++){for(var V=-X+K;V<=X-G;V+=2){var T=E+V,R;V==-X||V!=X&&A[T-1]<A[T+1]?R=A[T+1]:R=A[T-1]+1;for(var z=R-V;R<S&&z<j&&b.charAt(R)==N.charAt(z);)R++,z++;if(A[T]=R,R>S)G+=2;else if(z>j)K+=2;else if(B){var L=E+M-V;if(L>=0&&L<I&&C[L]!=-1){var H=S-C[L];if(R>=H)return f(b,N,R,z)}}}for(var ne=-X+Y;ne<=X-q;ne+=2){var L=E+ne,H;ne==-X||ne!=X&&C[L-1]<C[L+1]?H=C[L+1]:H=C[L-1]+1;for(var se=H-ne;H<S&&se<j&&b.charAt(S-H-1)==N.charAt(j-se-1);)H++,se++;if(C[L]=H,H>S)q+=2;else if(se>j)Y+=2;else if(!B){var T=E+M-ne;if(T>=0&&T<I&&A[T]!=-1){var R=A[T],z=E+R-T;if(H=S-H,R>=H)return f(b,N,R,z)}}}}return[[s,b],[i,N]]}function f(b,N,S,j){var _=b.substring(0,S),E=N.substring(0,j),I=b.substring(S),A=N.substring(j),C=l(_,E),F=l(I,A);return C.concat(F)}function d(b,N){if(!b||!N||b.charAt(0)!=N.charAt(0))return 0;for(var S=0,j=Math.min(b.length,N.length),_=j,E=0;S<_;)b.substring(E,_)==N.substring(E,_)?(S=_,E=S):j=_,_=Math.floor((j-S)/2+S);return _}function p(b,N){if(!b||!N||b.charAt(b.length-1)!=N.charAt(N.length-1))return 0;for(var S=0,j=Math.min(b.length,N.length),_=j,E=0;S<_;)b.substring(b.length-_,b.length-E)==N.substring(N.length-_,N.length-E)?(S=_,E=S):j=_,_=Math.floor((j-S)/2+S);return _}function h(b,N){var S=b.length>N.length?b:N,j=b.length>N.length?N:b;if(S.length<4||j.length*2<S.length)return null;function _(G,Y,q){for(var X=G.substring(q,q+Math.floor(G.length/4)),V=-1,T="",R,z,L,H;(V=Y.indexOf(X,V+1))!=-1;){var ne=d(G.substring(q),Y.substring(V)),se=p(G.substring(0,q),Y.substring(0,V));T.length<se+ne&&(T=Y.substring(V-se,V)+Y.substring(V,V+ne),R=G.substring(0,q-se),z=G.substring(q+ne),L=Y.substring(0,V-se),H=Y.substring(V+ne))}return T.length*2>=G.length?[R,z,L,H,T]:null}var E=_(S,j,Math.ceil(S.length/4)),I=_(S,j,Math.ceil(S.length/2)),A;if(!E&&!I)return null;I?E?A=E[4].length>I[4].length?E:I:A=I:A=E;var C,F,M,B;b.length>N.length?(C=A[0],F=A[1],M=A[2],B=A[3]):(M=A[0],B=A[1],C=A[2],F=A[3]);var K=A[4];return[C,F,M,B,K]}function g(b){b.push([o,""]);for(var N=0,S=0,j=0,_="",E="",I;N<b.length;)switch(b[N][0]){case i:j++,E+=b[N][1],N++;break;case s:S++,_+=b[N][1],N++;break;case o:S+j>1?(S!==0&&j!==0&&(I=d(E,_),I!==0&&(N-S-j>0&&b[N-S-j-1][0]==o?b[N-S-j-1][1]+=E.substring(0,I):(b.splice(0,0,[o,E.substring(0,I)]),N++),E=E.substring(I),_=_.substring(I)),I=p(E,_),I!==0&&(b[N][1]=E.substring(E.length-I)+b[N][1],E=E.substring(0,E.length-I),_=_.substring(0,_.length-I))),S===0?b.splice(N-j,S+j,[i,E]):j===0?b.splice(N-S,S+j,[s,_]):b.splice(N-S-j,S+j,[s,_],[i,E]),N=N-S-j+(S?1:0)+(j?1:0)+1):N!==0&&b[N-1][0]==o?(b[N-1][1]+=b[N][1],b.splice(N,1)):N++,j=0,S=0,_="",E="";break}b[b.length-1][1]===""&&b.pop();var A=!1;for(N=1;N<b.length-1;)b[N-1][0]==o&&b[N+1][0]==o&&(b[N][1].substring(b[N][1].length-b[N-1][1].length)==b[N-1][1]?(b[N][1]=b[N-1][1]+b[N][1].substring(0,b[N][1].length-b[N-1][1].length),b[N+1][1]=b[N-1][1]+b[N+1][1],b.splice(N-1,1),A=!0):b[N][1].substring(0,b[N+1][1].length)==b[N+1][1]&&(b[N-1][1]+=b[N+1][1],b[N][1]=b[N][1].substring(b[N+1][1].length)+b[N+1][1],b.splice(N+1,1),A=!0)),N++;A&&g(b)}var x=l;x.INSERT=i,x.DELETE=s,x.EQUAL=o,r.exports=x;function m(b,N){if(N===0)return[o,b];for(var S=0,j=0;j<b.length;j++){var _=b[j];if(_[0]===s||_[0]===o){var E=S+_[1].length;if(N===E)return[j+1,b];if(N<E){b=b.slice();var I=N-S,A=[_[0],_[1].slice(0,I)],C=[_[0],_[1].slice(I)];return b.splice(j,1,A,C),[j+1,b]}else S=E}}throw new Error("cursor_pos is out of bounds!")}function v(b,N){var S=m(b,N),j=S[1],_=S[0],E=j[_],I=j[_+1];if(E==null)return b;if(E[0]!==o)return b;if(I!=null&&E[1]+I[1]===I[1]+E[1])return j.splice(_,2,I,E),w(j,_,2);if(I!=null&&I[1].indexOf(E[1])===0){j.splice(_,2,[I[0],E[1]],[0,E[1]]);var A=I[1].slice(E[1].length);return A.length>0&&j.splice(_+2,0,[I[0],A]),w(j,_,3)}else return b}function y(b){for(var N=!1,S=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},j=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},_=2;_<b.length;_+=1)b[_-2][0]===o&&j(b[_-2][1])&&b[_-1][0]===s&&S(b[_-1][1])&&b[_][0]===i&&S(b[_][1])&&(N=!0,b[_-1][1]=b[_-2][1].slice(-1)+b[_-1][1],b[_][1]=b[_-2][1].slice(-1)+b[_][1],b[_-2][1]=b[_-2][1].slice(0,-1));if(!N)return b;for(var E=[],_=0;_<b.length;_+=1)b[_][1].length>0&&E.push(b[_]);return E}function w(b,N,S){for(var j=N+S-1;j>=0&&j>=N-1;j--)if(j+1<b.length){var _=b[j],E=b[j+1];_[0]===E[1]&&b.splice(j,2,[_[0],_[1]+E[1]])}return b}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:s,n.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}},function(r,n){var s=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=s?i:o,n.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}n.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(r,n){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(u,f,d){this.fn=u,this.context=f,this.once=d||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)s.call(d,p)&&f.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},c.prototype.listeners=function(f,d){var p=i?i+f:f,h=this._events[p];if(d)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var g=0,x=h.length,m=new Array(x);g<x;g++)m[g]=h[g].fn;return m},c.prototype.emit=function(f,d,p,h,g,x){var m=i?i+f:f;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,p),!0;case 4:return v.fn.call(v.context,d,p,h),!0;case 5:return v.fn.call(v.context,d,p,h,g),!0;case 6:return v.fn.call(v.context,d,p,h,g,x),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var N=v.length,S;for(b=0;b<N;b++)switch(v[b].once&&this.removeListener(f,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,p);break;case 4:v[b].fn.call(v[b].context,d,p,h);break;default:if(!w)for(S=1,w=new Array(y-1);S<y;S++)w[S-1]=arguments[S];v[b].fn.apply(v[b].context,w)}}return!0},c.prototype.on=function(f,d,p){var h=new l(d,p||this),g=i?i+f:f;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],h]:this._events[g].push(h):(this._events[g]=h,this._eventsCount++),this},c.prototype.once=function(f,d,p){var h=new l(d,p||this,!0),g=i?i+f:f;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],h]:this._events[g].push(h):(this._events[g]=h,this._eventsCount++),this},c.prototype.removeListener=function(f,d,p,h){var g=i?i+f:f;if(!this._events[g])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[g],this;var x=this._events[g];if(x.fn)x.fn===d&&(!h||x.once)&&(!p||x.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[g]);else{for(var m=0,v=[],y=x.length;m<y;m++)(x[m].fn!==d||h&&!x[m].once||p&&x[m].context!==p)&&v.push(x[m]);v.length?this._events[g]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new o:delete this._events[g]}return this},c.prototype.removeAllListeners=function(f){var d;return f?(d=i?i+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},o=function(){function ce(ye,me){var ge=[],Ce=!0,Ue=!1,Te=void 0;try{for(var ue=ye[Symbol.iterator](),Oe;!(Ce=(Oe=ue.next()).done)&&(ge.push(Oe.value),!(me&&ge.length===me));Ce=!0);}catch(st){Ue=!0,Te=st}finally{try{!Ce&&ue.return&&ue.return()}finally{if(Ue)throw Te}}return ge}return function(ye,me){if(Array.isArray(ye))return ye;if(Symbol.iterator in Object(ye))return ce(ye,me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function ce(ye,me){for(var ge=0;ge<me.length;ge++){var Ce=me[ge];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(ye,Ce.key,Ce)}}return function(ye,me,ge){return me&&ce(ye.prototype,me),ge&&ce(ye,ge),ye}}(),c=s(3),u=C(c),f=s(2),d=C(f),p=s(0),h=C(p),g=s(5),x=C(g),m=s(10),v=C(m),y=s(9),w=C(y),b=s(36),N=s(37),S=s(13),j=C(S),_=s(26),E=s(38),I=s(39),A=s(40);function C(ce){return ce&&ce.__esModule?ce:{default:ce}}function F(ce,ye,me){return ye in ce?Object.defineProperty(ce,ye,{value:me,enumerable:!0,configurable:!0,writable:!0}):ce[ye]=me,ce}function M(ce,ye){if(!(ce instanceof ye))throw new TypeError("Cannot call a class as a function")}function B(ce,ye){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye&&(typeof ye=="object"||typeof ye=="function")?ye:ce}function K(ce,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ye);ce.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),ye&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,ye):ce.__proto__=ye)}var G=(0,v.default)("quill:clipboard"),Y="__ql-matcher",q=[[Node.TEXT_NODE,je],[Node.TEXT_NODE,ze],["br",Ae],[Node.ELEMENT_NODE,ze],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,J],["li",Me],["b",se.bind(se,"bold")],["i",se.bind(se,"italic")],["style",ee]],X=[b.AlignAttribute,E.DirectionAttribute].reduce(function(ce,ye){return ce[ye.keyName]=ye,ce},{}),V=[b.AlignStyle,N.BackgroundStyle,_.ColorStyle,E.DirectionStyle,I.FontStyle,A.SizeStyle].reduce(function(ce,ye){return ce[ye.keyName]=ye,ce},{}),T=function(ce){K(ye,ce);function ye(me,ge){M(this,ye);var Ce=B(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this,me,ge));return Ce.quill.root.addEventListener("paste",Ce.onPaste.bind(Ce)),Ce.container=Ce.quill.addContainer("ql-clipboard"),Ce.container.setAttribute("contenteditable",!0),Ce.container.setAttribute("tabindex",-1),Ce.matchers=[],q.concat(Ce.options.matchers).forEach(function(Ue){var Te=o(Ue,2),ue=Te[0],Oe=Te[1];!ge.matchVisual&&Oe===oe||Ce.addMatcher(ue,Oe)}),Ce}return l(ye,[{key:"addMatcher",value:function(ge,Ce){this.matchers.push([ge,Ce])}},{key:"convert",value:function(ge){if(typeof ge=="string")return this.container.innerHTML=ge.replace(/\>\r?\n +\</g,"><"),this.convert();var Ce=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ce[j.default.blotName]){var Ue=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ue,F({},j.default.blotName,Ce[j.default.blotName]))}var Te=this.prepareMatching(),ue=o(Te,2),Oe=ue[0],st=ue[1],be=ne(this.container,Oe,st);return L(be,`
`)&&be.ops[be.ops.length-1].attributes==null&&(be=be.compose(new d.default().retain(be.length()-1).delete(1))),G.log("convert",this.container.innerHTML,be),this.container.innerHTML="",be}},{key:"dangerouslyPasteHTML",value:function(ge,Ce){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof ge=="string")this.quill.setContents(this.convert(ge),Ce),this.quill.setSelection(0,x.default.sources.SILENT);else{var Te=this.convert(Ce);this.quill.updateContents(new d.default().retain(ge).concat(Te),Ue),this.quill.setSelection(ge+Te.length(),x.default.sources.SILENT)}}},{key:"onPaste",value:function(ge){var Ce=this;if(!(ge.defaultPrevented||!this.quill.isEnabled())){var Ue=this.quill.getSelection(),Te=new d.default().retain(Ue.index),ue=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(x.default.sources.SILENT),setTimeout(function(){Te=Te.concat(Ce.convert()).delete(Ue.length),Ce.quill.updateContents(Te,x.default.sources.USER),Ce.quill.setSelection(Te.length()-Ue.length,x.default.sources.SILENT),Ce.quill.scrollingContainer.scrollTop=ue,Ce.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ge=this,Ce=[],Ue=[];return this.matchers.forEach(function(Te){var ue=o(Te,2),Oe=ue[0],st=ue[1];switch(Oe){case Node.TEXT_NODE:Ue.push(st);break;case Node.ELEMENT_NODE:Ce.push(st);break;default:[].forEach.call(ge.container.querySelectorAll(Oe),function(be){be[Y]=be[Y]||[],be[Y].push(st)});break}}),[Ce,Ue]}}]),ye}(w.default);T.DEFAULTS={matchers:[],matchVisual:!0};function R(ce,ye,me){return(typeof ye>"u"?"undefined":i(ye))==="object"?Object.keys(ye).reduce(function(ge,Ce){return R(ge,Ce,ye[Ce])},ce):ce.reduce(function(ge,Ce){return Ce.attributes&&Ce.attributes[ye]?ge.push(Ce):ge.insert(Ce.insert,(0,u.default)({},F({},ye,me),Ce.attributes))},new d.default)}function z(ce){if(ce.nodeType!==Node.ELEMENT_NODE)return{};var ye="__ql-computed-style";return ce[ye]||(ce[ye]=window.getComputedStyle(ce))}function L(ce,ye){for(var me="",ge=ce.ops.length-1;ge>=0&&me.length<ye.length;--ge){var Ce=ce.ops[ge];if(typeof Ce.insert!="string")break;me=Ce.insert+me}return me.slice(-1*ye.length)===ye}function H(ce){if(ce.childNodes.length===0)return!1;var ye=z(ce);return["block","list-item"].indexOf(ye.display)>-1}function ne(ce,ye,me){return ce.nodeType===ce.TEXT_NODE?me.reduce(function(ge,Ce){return Ce(ce,ge)},new d.default):ce.nodeType===ce.ELEMENT_NODE?[].reduce.call(ce.childNodes||[],function(ge,Ce){var Ue=ne(Ce,ye,me);return Ce.nodeType===ce.ELEMENT_NODE&&(Ue=ye.reduce(function(Te,ue){return ue(Ce,Te)},Ue),Ue=(Ce[Y]||[]).reduce(function(Te,ue){return ue(Ce,Te)},Ue)),ge.concat(Ue)},new d.default):new d.default}function se(ce,ye,me){return R(me,ce,!0)}function Q(ce,ye){var me=h.default.Attributor.Attribute.keys(ce),ge=h.default.Attributor.Class.keys(ce),Ce=h.default.Attributor.Style.keys(ce),Ue={};return me.concat(ge).concat(Ce).forEach(function(Te){var ue=h.default.query(Te,h.default.Scope.ATTRIBUTE);ue!=null&&(Ue[ue.attrName]=ue.value(ce),Ue[ue.attrName])||(ue=X[Te],ue!=null&&(ue.attrName===Te||ue.keyName===Te)&&(Ue[ue.attrName]=ue.value(ce)||void 0),ue=V[Te],ue!=null&&(ue.attrName===Te||ue.keyName===Te)&&(ue=V[Te],Ue[ue.attrName]=ue.value(ce)||void 0))}),Object.keys(Ue).length>0&&(ye=R(ye,Ue)),ye}function re(ce,ye){var me=h.default.query(ce);if(me==null)return ye;if(me.prototype instanceof h.default.Embed){var ge={},Ce=me.value(ce);Ce!=null&&(ge[me.blotName]=Ce,ye=new d.default().insert(ge,me.formats(ce)))}else typeof me.formats=="function"&&(ye=R(ye,me.blotName,me.formats(ce)));return ye}function Ae(ce,ye){return L(ye,`
`)||ye.insert(`
`),ye}function ee(){return new d.default}function Me(ce,ye){var me=h.default.query(ce);if(me==null||me.blotName!=="list-item"||!L(ye,`
`))return ye;for(var ge=-1,Ce=ce.parentNode;!Ce.classList.contains("ql-clipboard");)(h.default.query(Ce)||{}).blotName==="list"&&(ge+=1),Ce=Ce.parentNode;return ge<=0?ye:ye.compose(new d.default().retain(ye.length()-1).retain(1,{indent:ge}))}function ze(ce,ye){return L(ye,`
`)||(H(ce)||ye.length()>0&&ce.nextSibling&&H(ce.nextSibling))&&ye.insert(`
`),ye}function oe(ce,ye){if(H(ce)&&ce.nextElementSibling!=null&&!L(ye,`

`)){var me=ce.offsetHeight+parseFloat(z(ce).marginTop)+parseFloat(z(ce).marginBottom);ce.nextElementSibling.offsetTop>ce.offsetTop+me*1.5&&ye.insert(`
`)}return ye}function J(ce,ye){var me={},ge=ce.style||{};return ge.fontStyle&&z(ce).fontStyle==="italic"&&(me.italic=!0),ge.fontWeight&&(z(ce).fontWeight.startsWith("bold")||parseInt(z(ce).fontWeight)>=700)&&(me.bold=!0),Object.keys(me).length>0&&(ye=R(ye,me)),parseFloat(ge.textIndent||0)>0&&(ye=new d.default().insert("	").concat(ye)),ye}function je(ce,ye){var me=ce.data;if(ce.parentNode.tagName==="O:P")return ye.insert(me.trim());if(me.trim().length===0&&ce.parentNode.classList.contains("ql-clipboard"))return ye;if(!z(ce.parentNode).whiteSpace.startsWith("pre")){var ge=function(Ue,Te){return Te=Te.replace(/[^\u00a0]/g,""),Te.length<1&&Ue?" ":Te};me=me.replace(/\r\n/g," ").replace(/\n/g," "),me=me.replace(/\s\s+/g,ge.bind(ge,!0)),(ce.previousSibling==null&&H(ce.parentNode)||ce.previousSibling!=null&&H(ce.previousSibling))&&(me=me.replace(/^\s+/,ge.bind(ge,!1))),(ce.nextSibling==null&&H(ce.parentNode)||ce.nextSibling!=null&&H(ce.nextSibling))&&(me=me.replace(/\s+$/,ge.bind(ge,!1)))}return ye.insert(me)}n.default=T,n.matchAttributor=Q,n.matchBlot=re,n.matchNewline=ze,n.matchSpacing=oe,n.matchText=je},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(x,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}return function(x,m,v){return m&&g(x.prototype,m),v&&g(x,v),x}}(),o=function g(x,m,v){x===null&&(x=Function.prototype);var y=Object.getOwnPropertyDescriptor(x,m);if(y===void 0){var w=Object.getPrototypeOf(x);return w===null?void 0:g(w,m,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},l=s(6),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(){return f(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"optimize",value:function(v){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),x}(c.default);h.blotName="bold",h.tagName=["STRONG","B"],n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var i=function(){function A(C,F){var M=[],B=!0,K=!1,G=void 0;try{for(var Y=C[Symbol.iterator](),q;!(B=(q=Y.next()).done)&&(M.push(q.value),!(F&&M.length===F));B=!0);}catch(X){K=!0,G=X}finally{try{!B&&Y.return&&Y.return()}finally{if(K)throw G}}return M}return function(C,F){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return A(C,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(C,F){for(var M=0;M<F.length;M++){var B=F[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(C,B.key,B)}}return function(C,F,M){return F&&A(C.prototype,F),M&&A(C,M),C}}(),l=s(2),c=v(l),u=s(0),f=v(u),d=s(5),p=v(d),h=s(10),g=v(h),x=s(9),m=v(x);function v(A){return A&&A.__esModule?A:{default:A}}function y(A,C,F){return C in A?Object.defineProperty(A,C,{value:F,enumerable:!0,configurable:!0,writable:!0}):A[C]=F,A}function w(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function b(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function N(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var S=(0,g.default)("quill:toolbar"),j=function(A){N(C,A);function C(F,M){w(this,C);var B=b(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,F,M));if(Array.isArray(B.options.container)){var K=document.createElement("div");E(K,B.options.container),F.container.parentNode.insertBefore(K,F.container),B.container=K}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var G;return G=S.error("Container required for toolbar",B.options),b(B,G)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(Y){B.addHandler(Y,B.options.handlers[Y])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(Y){B.attach(Y)}),B.quill.on(p.default.events.EDITOR_CHANGE,function(Y,q){Y===p.default.events.SELECTION_CHANGE&&B.update(q)}),B.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var Y=B.quill.selection.getRange(),q=i(Y,1),X=q[0];B.update(X)}),B}return o(C,[{key:"addHandler",value:function(M,B){this.handlers[M]=B}},{key:"attach",value:function(M){var B=this,K=[].find.call(M.classList,function(Y){return Y.indexOf("ql-")===0});if(K){if(K=K.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[K]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[K]==null){S.warn("ignoring attaching to disabled format",K,M);return}if(f.default.query(K)==null){S.warn("ignoring attaching to nonexistent format",K,M);return}}var G=M.tagName==="SELECT"?"change":"click";M.addEventListener(G,function(Y){var q=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var X=M.options[M.selectedIndex];X.hasAttribute("selected")?q=!1:q=X.value||!1}else M.classList.contains("ql-active")?q=!1:q=M.value||!M.hasAttribute("value"),Y.preventDefault();B.quill.focus();var V=B.quill.selection.getRange(),T=i(V,1),R=T[0];if(B.handlers[K]!=null)B.handlers[K].call(B,q);else if(f.default.query(K).prototype instanceof f.default.Embed){if(q=prompt("Enter "+K),!q)return;B.quill.updateContents(new c.default().retain(R.index).delete(R.length).insert(y({},K,q)),p.default.sources.USER)}else B.quill.format(K,q,p.default.sources.USER);B.update(R)}),this.controls.push([K,M])}}},{key:"update",value:function(M){var B=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(K){var G=i(K,2),Y=G[0],q=G[1];if(q.tagName==="SELECT"){var X=void 0;if(M==null)X=null;else if(B[Y]==null)X=q.querySelector("option[selected]");else if(!Array.isArray(B[Y])){var V=B[Y];typeof V=="string"&&(V=V.replace(/\"/g,'\\"')),X=q.querySelector('option[value="'+V+'"]')}X==null?(q.value="",q.selectedIndex=-1):X.selected=!0}else if(M==null)q.classList.remove("ql-active");else if(q.hasAttribute("value")){var T=B[Y]===q.getAttribute("value")||B[Y]!=null&&B[Y].toString()===q.getAttribute("value")||B[Y]==null&&!q.getAttribute("value");q.classList.toggle("ql-active",T)}else q.classList.toggle("ql-active",B[Y]!=null)})}}]),C}(m.default);j.DEFAULTS={};function _(A,C,F){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+C),F!=null&&(M.value=F),A.appendChild(M)}function E(A,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(F){var M=document.createElement("span");M.classList.add("ql-formats"),F.forEach(function(B){if(typeof B=="string")_(M,B);else{var K=Object.keys(B)[0],G=B[K];Array.isArray(G)?I(M,K,G):_(M,K,G)}}),A.appendChild(M)})}function I(A,C,F){var M=document.createElement("select");M.classList.add("ql-"+C),F.forEach(function(B){var K=document.createElement("option");B!==!1?K.setAttribute("value",B):K.setAttribute("selected","selected"),M.appendChild(K)}),A.appendChild(M)}j.DEFAULTS={container:null,handlers:{clean:function(){var C=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(B){f.default.query(B,f.default.Scope.INLINE)!=null&&C.quill.format(B,!1)})}else this.quill.removeFormat(F,p.default.sources.USER)},direction:function(C){var F=this.quill.getFormat().align;C==="rtl"&&F==null?this.quill.format("align","right",p.default.sources.USER):!C&&F==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",C,p.default.sources.USER)},indent:function(C){var F=this.quill.getSelection(),M=this.quill.getFormat(F),B=parseInt(M.indent||0);if(C==="+1"||C==="-1"){var K=C==="+1"?1:-1;M.direction==="rtl"&&(K*=-1),this.quill.format("indent",B+K,p.default.sources.USER)}},link:function(C){C===!0&&(C=prompt("Enter link URL:")),this.quill.format("link",C,p.default.sources.USER)},list:function(C){var F=this.quill.getSelection(),M=this.quill.getFormat(F);C==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",C,p.default.sources.USER)}}},n.default=j,n.addControls=E},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(x,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}return function(x,m,v){return m&&g(x.prototype,m),v&&g(x,v),x}}(),o=function g(x,m,v){x===null&&(x=Function.prototype);var y=Object.getOwnPropertyDescriptor(x,m);if(y===void 0){var w=Object.getPrototypeOf(x);return w===null?void 0:g(w,m,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},l=s(28),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(m,v){f(this,x);var y=d(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,m));return y.label.innerHTML=v,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),y}return i(x,[{key:"buildItem",value:function(v){var y=o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"buildItem",this).call(this,v);return y.style.backgroundColor=v.getAttribute("value")||"",y}},{key:"selectItem",value:function(v,y){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,v,y);var w=this.label.querySelector(".ql-color-label"),b=v&&v.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=b:w.style.fill=b)}}]),x}(c.default);n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(x,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}return function(x,m,v){return m&&g(x.prototype,m),v&&g(x,v),x}}(),o=function g(x,m,v){x===null&&(x=Function.prototype);var y=Object.getOwnPropertyDescriptor(x,m);if(y===void 0){var w=Object.getPrototypeOf(x);return w===null?void 0:g(w,m,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},l=s(28),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(m,v){f(this,x);var y=d(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,m));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=v[w.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return i(x,[{key:"selectItem",value:function(v,y){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,v,y),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),x}(c.default);n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function c(u,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}}();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(u,f){var d=this;o(this,c),this.quill=u,this.boundsContainer=f||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,p=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var h=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),x=0;if(g.right>h.right&&(x=h.right-g.right,this.root.style.left=d+x+"px"),g.left<h.left&&(x=h.left-g.left,this.root.style.left=d+x+"px"),g.bottom>h.bottom){var m=g.bottom-g.top,v=f.bottom-f.top+m;this.root.style.top=p-v+"px",this.root.classList.add("ql-flip")}return x}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=l},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function I(A,C){var F=[],M=!0,B=!1,K=void 0;try{for(var G=A[Symbol.iterator](),Y;!(M=(Y=G.next()).done)&&(F.push(Y.value),!(C&&F.length===C));M=!0);}catch(q){B=!0,K=q}finally{try{!M&&G.return&&G.return()}finally{if(B)throw K}}return F}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return I(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function I(A,C,F){A===null&&(A=Function.prototype);var M=Object.getOwnPropertyDescriptor(A,C);if(M===void 0){var B=Object.getPrototypeOf(A);return B===null?void 0:I(B,C,F)}else{if("value"in M)return M.value;var K=M.get;return K===void 0?void 0:K.call(F)}},l=function(){function I(A,C){for(var F=0;F<C.length;F++){var M=C[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(A,M.key,M)}}return function(A,C,F){return C&&I(A.prototype,C),F&&I(A,F),A}}(),c=s(3),u=w(c),f=s(8),d=w(f),p=s(43),h=w(p),g=s(27),x=w(g),m=s(15),v=s(41),y=w(v);function w(I){return I&&I.__esModule?I:{default:I}}function b(I,A){if(!(I instanceof A))throw new TypeError("Cannot call a class as a function")}function N(I,A){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:I}function S(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);I.prototype=Object.create(A&&A.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(I,A):I.__proto__=A)}var j=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=function(I){S(A,I);function A(C,F){b(this,A),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=j);var M=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,F));return M.quill.container.classList.add("ql-snow"),M}return l(A,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),y.default),this.tooltip=new E(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,B){F.handlers.link.call(F,!B.format.link)})}}]),A}(h.default);_.DEFAULTS=(0,u.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){if(A){var C=this.quill.getSelection();if(C==null||C.length==0)return;var F=this.quill.getText(C);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var M=this.quill.theme.tooltip;M.edit("link",F)}else this.quill.format("link",!1)}}}}});var E=function(I){S(A,I);function A(C,F){b(this,A);var M=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,F));return M.preview=M.root.querySelector("a.ql-preview"),M}return l(A,[{key:"listen",value:function(){var F=this;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(F.linkRange!=null){var B=F.linkRange;F.restoreFocus(),F.quill.formatText(B,"link",!1,d.default.sources.USER),delete F.linkRange}M.preventDefault(),F.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(M,B,K){if(M!=null){if(M.length===0&&K===d.default.sources.USER){var G=F.quill.scroll.descendant(x.default,M.index),Y=i(G,2),q=Y[0],X=Y[1];if(q!=null){F.linkRange=new m.Range(M.index-X,q.length());var V=x.default.formats(q.domNode);F.preview.textContent=V,F.preview.setAttribute("href",V),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),A}(p.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=_},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(29),o=Ce(i),l=s(36),c=s(38),u=s(64),f=s(65),d=Ce(f),p=s(66),h=Ce(p),g=s(67),x=Ce(g),m=s(37),v=s(26),y=s(39),w=s(40),b=s(56),N=Ce(b),S=s(68),j=Ce(S),_=s(27),E=Ce(_),I=s(69),A=Ce(I),C=s(70),F=Ce(C),M=s(71),B=Ce(M),K=s(72),G=Ce(K),Y=s(73),q=Ce(Y),X=s(13),V=Ce(X),T=s(74),R=Ce(T),z=s(75),L=Ce(z),H=s(57),ne=Ce(H),se=s(41),Q=Ce(se),re=s(28),Ae=Ce(re),ee=s(59),Me=Ce(ee),ze=s(60),oe=Ce(ze),J=s(61),je=Ce(J),ce=s(108),ye=Ce(ce),me=s(62),ge=Ce(me);function Ce(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":w.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":u.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":y.FontClass,"formats/size":w.SizeClass,"formats/blockquote":d.default,"formats/code-block":V.default,"formats/header":h.default,"formats/list":x.default,"formats/bold":N.default,"formats/code":X.Code,"formats/italic":j.default,"formats/link":E.default,"formats/script":A.default,"formats/strike":F.default,"formats/underline":B.default,"formats/image":G.default,"formats/video":q.default,"formats/list/item":g.ListItem,"modules/formula":R.default,"modules/syntax":L.default,"modules/toolbar":ne.default,"themes/bubble":ye.default,"themes/snow":ge.default,"ui/icons":Q.default,"ui/picker":Ae.default,"ui/icon-picker":oe.default,"ui/color-picker":Me.default,"ui/tooltip":je.default},!0),n.default=o.default},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var i=function(){function x(m,v){for(var y=0;y<v.length;y++){var w=v[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,v,y){return v&&x(m.prototype,v),y&&x(m,y),m}}(),o=function x(m,v,y){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,v);if(w===void 0){var b=Object.getPrototypeOf(m);return b===null?void 0:x(b,v,y)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(y)}},l=s(0),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function d(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function p(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}var h=function(x){p(m,x);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return i(m,[{key:"add",value:function(y,w){if(w==="+1"||w==="-1"){var b=this.value(y)||0;w=w==="+1"?b+1:b-1}return w===0?(this.remove(y),!0):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,y,w)}},{key:"canAdd",value:function(y,w){return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,y,w)||o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,y,parseInt(w))}},{key:"value",value:function(y){return parseInt(o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,y))||void 0}}]),m}(c.default.Attributor.Class),g=new h("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(4),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function u(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var d=function(p){f(h,p);function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function h(g,x){for(var m=0;m<x.length;m++){var v=x[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,x,m){return x&&h(g.prototype,x),m&&h(g,m),g}}(),o=s(4),l=c(o);function c(h){return h&&h.__esModule?h:{default:h}}function u(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function f(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function d(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var p=function(h){d(g,h);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),g}(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var i=function(){function b(N,S){for(var j=0;j<S.length;j++){var _=S[j];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,S,j){return S&&b(N.prototype,S),j&&b(N,j),N}}(),o=function b(N,S,j){N===null&&(N=Function.prototype);var _=Object.getOwnPropertyDescriptor(N,S);if(_===void 0){var E=Object.getPrototypeOf(N);return E===null?void 0:b(E,S,j)}else{if("value"in _)return _.value;var I=_.get;return I===void 0?void 0:I.call(j)}},l=s(0),c=h(l),u=s(4),f=h(u),d=s(25),p=h(d);function h(b){return b&&b.__esModule?b:{default:b}}function g(b,N,S){return N in b?Object.defineProperty(b,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):b[N]=S,b}function x(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function m(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function v(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var y=function(b){v(N,b);function N(){return x(this,N),m(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,[{key:"format",value:function(j,_){j===w.blotName&&!_?this.replaceWith(c.default.create(this.statics.scope)):o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,j,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(j,_){return this.parent.isolate(this.offset(this.parent),this.length()),j===this.parent.statics.blotName?(this.parent.replaceWith(j,_),this):(this.parent.unwrap(),o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,j,_))}}],[{key:"formats",value:function(j){return j.tagName===this.tagName?void 0:o(N.__proto__||Object.getPrototypeOf(N),"formats",this).call(this,j)}}]),N}(f.default);y.blotName="list-item",y.tagName="LI";var w=function(b){v(N,b),i(N,null,[{key:"create",value:function(j){var _=j==="ordered"?"OL":"UL",E=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,_);return(j==="checked"||j==="unchecked")&&E.setAttribute("data-checked",j==="checked"),E}},{key:"formats",value:function(j){if(j.tagName==="OL")return"ordered";if(j.tagName==="UL")return j.hasAttribute("data-checked")?j.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function N(S){x(this,N);var j=m(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S)),_=function(I){if(I.target.parentNode===S){var A=j.statics.formats(S),C=c.default.find(I.target);A==="checked"?C.format("list","unchecked"):A==="unchecked"&&C.format("list","checked")}};return S.addEventListener("touchstart",_),S.addEventListener("mousedown",_),j}return i(N,[{key:"format",value:function(j,_){this.children.length>0&&this.children.tail.format(j,_)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(j,_){if(j instanceof y)o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,j,_);else{var E=_==null?this.length():_.offset(this),I=this.split(E);I.parent.insertBefore(j,I)}}},{key:"optimize",value:function(j){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,j);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(j){if(j.statics.blotName!==this.statics.blotName){var _=c.default.create(this.statics.defaultChild);j.moveChildren(_),this.appendChild(_)}o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,j)}}]),N}(p.default);w.blotName="list",w.scope=c.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[y],n.ListItem=y,n.default=w},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(56),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function u(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var d=function(p){f(h,p);function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(x,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}return function(x,m,v){return m&&g(x.prototype,m),v&&g(x,v),x}}(),o=function g(x,m,v){x===null&&(x=Function.prototype);var y=Object.getOwnPropertyDescriptor(x,m);if(y===void 0){var w=Object.getPrototypeOf(x);return w===null?void 0:g(w,m,v)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(v)}},l=s(6),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(){return f(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),x}(c.default);h.blotName="script",h.tagName=["SUB","SUP"],n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function u(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var d=function(p){f(h,p);function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);d.blotName="strike",d.tagName="S",n.default=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function u(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var d=function(p){f(h,p);function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);d.blotName="underline",d.tagName="U",n.default=d},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&m(v.prototype,y),w&&m(v,w),v}}(),o=function m(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:m(N,y,w)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=f(l),u=s(27);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function p(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function h(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var g=["alt","height","width"],x=function(m){h(v,m);function v(){return d(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(w,b){g.indexOf(w)>-1?b?this.domNode.setAttribute(w,b):this.domNode.removeAttribute(w):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,w,b)}}],[{key:"create",value:function(w){var b=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w);return typeof w=="string"&&b.setAttribute("src",this.sanitize(w)),b}},{key:"formats",value:function(w){return g.reduce(function(b,N){return w.hasAttribute(N)&&(b[N]=w.getAttribute(N)),b},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,u.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),v}(c.default.Embed);x.blotName="image",x.tagName="IMG",n.default=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&m(v.prototype,y),w&&m(v,w),v}}(),o=function m(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:m(N,y,w)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(w)}},l=s(4),c=s(27),u=f(c);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function p(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function h(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var g=["height","width"],x=function(m){h(v,m);function v(){return d(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(w,b){g.indexOf(w)>-1?b?this.domNode.setAttribute(w,b):this.domNode.removeAttribute(w):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,w,b)}}],[{key:"create",value:function(w){var b=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(w)),b}},{key:"formats",value:function(w){return g.reduce(function(b,N){return w.hasAttribute(N)&&(b[N]=w.getAttribute(N)),b},{})}},{key:"sanitize",value:function(w){return u.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),v}(l.BlockEmbed);x.blotName="video",x.className="ql-video",x.tagName="IFRAME",n.default=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var i=function(){function w(b,N){for(var S=0;S<N.length;S++){var j=N[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,N,S){return N&&w(b.prototype,N),S&&w(b,S),b}}(),o=function w(b,N,S){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,N);if(j===void 0){var _=Object.getPrototypeOf(b);return _===null?void 0:w(_,N,S)}else{if("value"in j)return j.value;var E=j.get;return E===void 0?void 0:E.call(S)}},l=s(35),c=h(l),u=s(5),f=h(u),d=s(9),p=h(d);function h(w){return w&&w.__esModule?w:{default:w}}function g(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function x(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function m(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var v=function(w){m(b,w);function b(){return g(this,b),x(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"create",value:function(S){var j=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,j,{throwOnError:!1,errorColor:"#f00"}),j.setAttribute("data-value",S)),j}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),b}(c.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var y=function(w){m(b,w),i(b,null,[{key:"register",value:function(){f.default.register(v,!0)}}]);function b(){g(this,b);var N=x(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return N}return b}(p.default);n.FormulaBlot=v,n.default=y},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var i=function(){function S(j,_){for(var E=0;E<_.length;E++){var I=_[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(j,I.key,I)}}return function(j,_,E){return _&&S(j.prototype,_),E&&S(j,E),j}}(),o=function S(j,_,E){j===null&&(j=Function.prototype);var I=Object.getOwnPropertyDescriptor(j,_);if(I===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:S(A,_,E)}else{if("value"in I)return I.value;var C=I.get;return C===void 0?void 0:C.call(E)}},l=s(0),c=x(l),u=s(5),f=x(u),d=s(9),p=x(d),h=s(13),g=x(h);function x(S){return S&&S.__esModule?S:{default:S}}function m(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function v(S,j){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:S}function y(S,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);S.prototype=Object.create(j&&j.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(S,j):S.__proto__=j)}var w=function(S){y(j,S);function j(){return m(this,j),v(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"replaceWith",value:function(E){this.domNode.textContent=this.domNode.textContent,this.attach(),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"replaceWith",this).call(this,E)}},{key:"highlight",value:function(E){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=E(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),j}(g.default);w.className="ql-syntax";var b=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),N=function(S){y(j,S),i(j,null,[{key:"register",value:function(){f.default.register(b,!0),f.default.register(w,!0)}}]);function j(_,E){m(this,j);var I=v(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,_,E));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var A=null;return I.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(A),A=setTimeout(function(){I.highlight(),A=null},I.options.interval)}),I.highlight(),I}return i(j,[{key:"highlight",value:function(){var E=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(A){A.highlight(E.options.highlight)}),this.quill.update(f.default.sources.SILENT),I!=null&&this.quill.setSelection(I,f.default.sources.SILENT)}}}]),j}(p.default);N.DEFAULTS={highlight:function(){return window.hljs==null?null:function(S){var j=window.hljs.highlightAuto(S);return j.value}}(),interval:1e3},n.CodeBlock=w,n.CodeToken=b,n.default=N},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var i=function j(_,E,I){_===null&&(_=Function.prototype);var A=Object.getOwnPropertyDescriptor(_,E);if(A===void 0){var C=Object.getPrototypeOf(_);return C===null?void 0:j(C,E,I)}else{if("value"in A)return A.value;var F=A.get;return F===void 0?void 0:F.call(I)}},o=function(){function j(_,E){for(var I=0;I<E.length;I++){var A=E[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,E,I){return E&&j(_.prototype,E),I&&j(_,I),_}}(),l=s(3),c=m(l),u=s(8),f=m(u),d=s(43),p=m(d),h=s(15),g=s(41),x=m(g);function m(j){return j&&j.__esModule?j:{default:j}}function v(j,_){if(!(j instanceof _))throw new TypeError("Cannot call a class as a function")}function y(j,_){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:j}function w(j,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);j.prototype=Object.create(_&&_.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(j,_):j.__proto__=_)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],N=function(j){w(_,j);function _(E,I){v(this,_),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=b);var A=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E,I));return A.quill.container.classList.add("ql-bubble"),A}return o(_,[{key:"extendToolbar",value:function(I){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),x.default)}}]),_}(p.default);N.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(j){w(_,j);function _(E,I){v(this,_);var A=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E,I));return A.quill.on(f.default.events.EDITOR_CHANGE,function(C,F,M,B){if(C===f.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&B===f.default.sources.USER){A.show(),A.root.style.left="0px",A.root.style.width="",A.root.style.width=A.root.offsetWidth+"px";var K=A.quill.getLines(F.index,F.length);if(K.length===1)A.position(A.quill.getBounds(F));else{var G=K[K.length-1],Y=A.quill.getIndex(G),q=Math.min(G.length()-1,F.index+F.length-Y),X=A.quill.getBounds(new h.Range(Y,q));A.position(X)}}else document.activeElement!==A.textbox&&A.quill.hasFocus()&&A.hide()}),A}return o(_,[{key:"listen",value:function(){var I=this;i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var A=I.quill.getSelection();A!=null&&I.position(I.quill.getBounds(A))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var A=i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,I),C=this.root.querySelector(".ql-tooltip-arrow");if(C.style.marginLeft="",A===0)return A;C.style.marginLeft=-1*A-C.offsetWidth/2+"px"}}]),_}(d.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=S,n.default=N},function(r,n,s){r.exports=s(63)}]).default})})(CU);var RCe=CU.exports,BCe=kl&&kl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)s.hasOwnProperty(i)&&(n[i]=s[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i5=kl&&kl.__assign||function(){return i5=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i5.apply(this,arguments)},$Ce=kl&&kl.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n},CN=kl&&kl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bu=CN(D),UCe=CN(SF),Rg=CN(LM),JI=CN(RCe),zCe=function(e){BCe(t,e);function t(r){var n=e.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(i,o,l,c){var u,f,d,p;i==="text-change"?(f=(u=n).onEditorChangeText)===null||f===void 0||f.call(u,n.editor.root.innerHTML,o,c,n.unprivilegedEditor):i==="selection-change"&&((p=(d=n).onEditorChangeSelection)===null||p===void 0||p.call(d,o,c,n.unprivilegedEditor))};var s=n.isControlled()?r.value:r.defaultValue;return n.value=s??"",n}return t.prototype.validateProps=function(r){var n;if(bu.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(bu.default.Children.count(r.children)){var s=bu.default.Children.only(r.children);if(((n=s)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(r,n){var s=this,i;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),l=(i=r.value,i??"");this.isEqualValue(l,o)||this.setEditorContents(this.editor,l)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),$Ce(this.cleanProps,this.dirtyProps).some(function(c){return!Rg.default(r[c],s.props[c])})},t.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(s){return!Rg.default(r[s],n.props[s])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(r,n){var s=this;if(this.editor&&this.shouldComponentRegenerate(r)){var i=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var l=this.regenerationSnapshot,i=l.delta,c=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(i),QI(function(){return s.setEditorSelection(u,c)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(r,n){var s=new JI.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s},t.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(r){return r&&r.ops},t.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Rg.default(r.ops,n.ops):Rg.default(r,n)},t.prototype.setEditorContents=function(r,n){var s=this;this.value=n;var i=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),QI(function(){return s.setEditorSelection(r,i)})},t.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var s=r.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),r.setSelection(n)}},t.prototype.setEditorTabIndex=function(r,n){var s,i;!((i=(s=r)===null||s===void 0?void 0:s.scroll)===null||i===void 0)&&i.domNode&&(r.scroll.domNode.tabIndex=n)},t.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},t.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=UCe.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},t.prototype.renderEditingArea=function(){var r=this,n=this.props,s=n.children,i=n.preserveWhitespace,o=this.state.generation,l={key:o,ref:function(c){r.editingArea=c}};return bu.default.Children.count(s)?bu.default.cloneElement(bu.default.Children.only(s),l):i?bu.default.createElement("pre",i5({},l)):bu.default.createElement("div",i5({},l))},t.prototype.render=function(){var r;return bu.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(r,n,s,i){var o,l;if(this.editor){var c=this.isDelta(this.value)?i.getContents():i.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=c,(l=(o=this.props).onChange)===null||l===void 0||l.call(o,r,n,s,i))}},t.prototype.onEditorChangeSelection=function(r,n,s){var i,o,l,c,u,f;if(this.editor){var d=this.getEditorSelection(),p=!d&&r,h=d&&!r;Rg.default(r,d)||(this.selection=r,(o=(i=this.props).onChangeSelection)===null||o===void 0||o.call(i,r,n,s),p?(c=(l=this.props).onFocus)===null||c===void 0||c.call(l,r,n,s):h&&((f=(u=this.props).onBlur)===null||f===void 0||f.call(u,d,n,s)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=JI.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(bu.default.Component);function QI(e){Promise.resolve().then(e)}var qCe=zCe;const HCe=sa(qCe);function WCe(e){if(e==null||Object.keys(e).length===0)return"";const t=Object.keys(e).sort().reduce((r,n)=>(r[n]=e[n],r),{});return JSON.stringify(t)}const ja={all:["shared-inbox"],emails:()=>[...ja.all,"emails"],emailsList:(e,t)=>[...ja.emails(),e,WCe(t)],senders:(e,t)=>[...ja.all,"senders",e,t]},VCe=(e,t,r)=>{const n=(t==null?void 0:t.limit)||50;return Tye({queryKey:ja.emailsList(e||"",t),queryFn:async({pageParam:s})=>{if(!e)return{data:[],hasMore:!1,total:0,nextCursor:void 0};const i={...t,limit:n};typeof s=="string"?i.cursor=s:s!=null&&s!==void 0?i.page=Number(s):i.page=0;const o=await ER(e,i),l=(o==null?void 0:o.data)??o??[],c=Array.isArray(l)?l:[],u=o==null?void 0:o.hasMore,f=typeof u=="boolean"?u:c.length>=n;return{data:c,hasMore:f,total:(o==null?void 0:o.total)??c.length,nextCursor:o==null?void 0:o.nextCursor}},getNextPageParam:(s,i)=>{if(s.hasMore)return s.nextCursor?s.nextCursor:i.length},initialPageParam:void 0,enabled:!!e&&(r==null?void 0:r.enabled)!==!1,staleTime:r==null?void 0:r.staleTime,refetchInterval:r==null?void 0:r.refetchInterval,refetchOnWindowFocus:!1,refetchOnMount:!1,placeholderData:s=>s})},GCe=(e,t)=>Dl({queryKey:ja.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await Wve(e,t);return(r==null?void 0:r.data)??r??[]},enabled:!!e,staleTime:5*60*1e3}),KCe=()=>{const e=Ps();return Ao({mutationFn:async({userId:t,accountEmail:r,scopeHours:n,scopeDays:s})=>await Bve(t,r,n,s),onSuccess:()=>{e.invalidateQueries({queryKey:ja.emails()})}})},XCe=({isOpen:e,onClose:t,userId:r,emailId:n,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:u,showError:f}=Wn(),[d,p]=D.useState(!1),[h,g]=D.useState(!1),[x,m]=D.useState([]),[v,y]=D.useState(!1),[w,b]=D.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});D.useEffect(()=>{var A;if(!e)return;const j=new Date;j.setDate(j.getDate()+1),j.setHours(10,0,0,0);const _=new Date(j);_.setHours(11,0,0,0);let E=j.toISOString().substring(0,16),I=_.toISOString().substring(0,16);if(l!=null&&l.date||l!=null&&l.time)try{const C=l.date||"tomorrow",F=l.time||"10:00 AM";let M=new Date;if(C.toLowerCase().includes("tomorrow"))M.setDate(M.getDate()+1);else if(!C.toLowerCase().includes("today")){const K=C.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(K){const[,G,Y,q]=K;M=new Date(parseInt(q)<100?2e3+parseInt(q):parseInt(q),parseInt(G)-1,parseInt(Y))}}const B=F.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(B){let K=parseInt(B[1]);const G=B[2]?parseInt(B[2]):0,Y=(A=B[3])==null?void 0:A.toLowerCase();Y==="pm"&&K!==12&&(K+=12),Y==="am"&&K===12&&(K=0),M.setHours(K,G,0,0),E=M.toISOString().substring(0,16);const q=new Date(M);q.setHours(q.getHours()+1),I=q.toISOString().substring(0,16)}}catch(C){console.warn("Failed to parse extracted date/time:",C)}b({title:(l==null?void 0:l.title)||s||"Meeting",description:(l==null?void 0:l.description)||(i==null?void 0:i.substring(0,500))||"",start:E,end:I,location:(l==null?void 0:l.location)||"",participants:(l==null?void 0:l.participants)||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const N=async()=>{if(!w.start||!w.end||w.participants.length===0){f("Please set date/time and add participants to check availability");return}g(!0);try{const j=new Date(w.start).toISOString().split("T")[0],_=new Date(w.end).toISOString().split("T")[0],E=await L1e(r,w.participants,j,_);E.success&&E.data&&(m(E.data),y(!0))}catch(j){f(j.message||"Failed to check availability")}finally{g(!1)}},S=async j=>{if(j.preventDefault(),!w.title||!w.start||!w.end){f("Please fill in all required fields");return}if(!n){f("Email ID is required to create meeting");return}p(!0);try{(await D1e({userId:r,emailId:n,title:w.title,description:w.description,start:new Date(w.start).toISOString(),end:new Date(w.end).toISOString(),location:w.location,participants:w.participants,createInGoogleCalendar:w.createInGoogleCalendar})).success&&(u("Meeting created successfully!"),c==null||c(),t())}catch(_){f(_.message||"Failed to create meeting")}finally{p(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx($n,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&a.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Cn,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),a.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&a.jsxs("p",{children:["Date: ",l.date]}),l.time&&a.jsxs("p",{children:["Time: ",l.time]}),l.location&&a.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),a.jsxs("form",{onSubmit:S,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:w.title,onChange:j=>b({...w,title:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Ha,{className:"w-3 h-3"})," Start Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:w.start,onChange:j=>b({...w,start:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Ha,{className:"w-3 h-3"})," End Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:w.end,onChange:j=>b({...w,end:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(IF,{className:"w-3 h-3"})," Location"]}),a.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:w.location,onChange:j=>b({...w,location:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Zf,{className:"w-3 h-3"})," Participants"]}),w.participants.length>0&&a.jsx("button",{type:"button",onClick:N,disabled:h||!w.start||!w.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Checking...":"Check Availability"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[w.participants.map((j,_)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[j,a.jsx("button",{type:"button",onClick:()=>b({...w,participants:w.participants.filter((E,I)=>I!==_)}),className:"hover:text-indigo-900",children:a.jsx(Yt,{className:"w-3 h-3"})})]},_)),a.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:j=>{if(j.key==="Enter"&&j.currentTarget.value.trim()){j.preventDefault();const _=j.currentTarget.value.trim();w.participants.includes(_)||b({...w,participants:[...w.participants,_]}),j.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),v&&x.length>0&&a.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),x.map((j,_)=>a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-medium",children:j.userId}),j.busySlots&&j.busySlots.length>0?a.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",j.busySlots.length," conflict(s)"]}):a.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},_))]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:w.description,onChange:j=>b({...w,description:j.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:w.createInGoogleCalendar,onChange:j=>b({...w,createInGoogleCalendar:j.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),a.jsx("button",{type:"button",onClick:S,disabled:d||!w.title||!w.start||!w.end||!n,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wu,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},YCe={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},EU=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Gl=(e,t)=>{const r=EU(e);return(YCe[t]||[]).includes(r)},JCe=e=>EU(e)==="Admin",l2=nt.forwardRef((e,t)=>a.jsx(HCe,{...e,ref:t}));l2.displayName="QuillEditor";function ZI({content:e,highlightTerm:t}){const r=D.useRef(null),n=e||"No content",s=/<[a-z][\s\S]*>/i.test(n);if(D.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(u=>{u.forEach(f=>{if(f.isIntersecting){const d=f.target,p=d.getAttribute("data-src");p&&(d.src=p,d.removeAttribute("data-src"),d.loading="lazy",c.unobserve(d))}})},{rootMargin:"50px"});return l.forEach(u=>c.observe(u)),()=>{l.forEach(u=>c.unobserve(u))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),f=(s?n.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():n).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),d=YI.sanitize(f,{ALLOWED_TAGS:["mark","br"]});return a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:d}})}const i=s?YI.sanitize(n,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,u,f)=>`<img${c}data-src="${u}" loading="lazy"${f}>`)),a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:n}})}const QCe=90*1e3;let eD=0;const TU=({currentUser:e})=>{var Dp,q0,$l,Tc,Oc,H0,Lp;const{showSuccess:t,showError:r}=Wn(),n=Ps(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s==null?void 0:s.id,o=(s==null?void 0:s.role)||"Viewer",l=Gl(o,"shared-inbox:add-note"),c=Gl(o,"shared-inbox:assign-email"),u=Gl(o,"shared-inbox:send-email"),f=Gl(o,"shared-inbox:reply-email"),d=Gl(o,"shared-inbox:forward-email"),p=Gl(o,"shared-inbox:star-email"),h=Gl(o,"shared-inbox:archive-email"),g=Gl(o,"shared-inbox:delete-email"),x=Gl(o,"shared-inbox:update-metadata");Gl(o,"shared-inbox:manage-accounts");const m=Gl(o,"shared-inbox:sync-emails"),v=(O,Z="An error occurred")=>O?typeof O=="string"?O:typeof O=="object"?typeof O.message=="string"&&O.message?O.message:O.error&&typeof O.error=="object"&&typeof O.error.message=="string"&&O.error.message?O.error.message:Z:Z:Z,y=O=>!O||typeof O!="string"?"":O.replace(/\n/g,"<br/>"),w=async(O,Z)=>{try{return await O()}catch(ie){const Le=v(ie,"An error occurred");return Z&&Z(Le),null}},[b,N]=D.useState(null),[S,j]=D.useState(!1),[_,E]=D.useState(!1),[I,A]=D.useState(!1),C=D.useRef(!1),F=D.useRef(null),M=D.useRef(null),[B,K]=D.useState(""),[G,Y]=D.useState(null),[q,X]=D.useState(""),[V,T]=D.useState(""),[R,z]=D.useState("contains"),[L,H]=D.useState(void 0),[ne,se]=D.useState(""),[Q,re]=D.useState(""),[Ae,ee]=D.useState(void 0),[Me,ze]=D.useState(void 0),[oe,J]=D.useState(""),[je,ce]=D.useState(!1),[ye,me]=D.useState(!1),{data:ge=[]}=GCe(i,je?150:void 0),[Ce,Ue]=D.useState([]),[Te,ue]=D.useState(!1),[Oe,st]=D.useState(""),[be,De]=D.useState(!1),[We,Xe]=D.useState([]),[Et,wt]=D.useState([]),[Ve,xt]=D.useState(!1),[Tt,he]=D.useState(""),[Ge,kt]=D.useState(null),[gt,Vt]=D.useState(null),[_r,lr]=D.useState(null),[Gt,rr]=D.useState("list"),[ir,pr]=D.useState(new Set),[Nr,jr]=D.useState(new Set),[Dt,Sr]=D.useState({}),[Gr,cn]=D.useState(""),[qe,mt]=D.useState(""),[le,_e]=D.useState(null),[we,Se]=D.useState(!1),[ae,pe]=D.useState(null),[Re,Ye]=D.useState(null),[Je,Qe]=D.useState([]),[Be,ke]=D.useState(null),[He,at]=D.useState(!1),ht=D.useRef(null),jt=D.useRef(null),[Bt,Jt]=D.useState(!1),[Tr,En]=D.useState([]),[bs,_n]=D.useState(null),[Is,la]=D.useState(!1),[Xa,ga]=D.useState(""),[un,Co]=D.useState([]),[ea,Ai]=D.useState(!1),[yc,bc]=D.useState(""),[Xs,Fe]=D.useState(0),[vt,Lt]=D.useState([]),[qt,vr]=D.useState(null),[gr,Br]=D.useState([]),[Rn,Vn]=D.useState(!1),[jn,yr]=D.useState(""),Ft=D.useRef(null),[Dr,mr]=D.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[hr,nr]=D.useState(null),[ca,Fr]=D.useState({}),[Zt,gn]=D.useState([]),[xr,or]=D.useState(!1),[cr,Dn]=D.useState(null),[ua,Ya]=D.useState(!1),[dn,pi]=D.useState(null),[no,Pe]=D.useState([]),[Ht,$t]=D.useState(null),[Kt,dr]=D.useState(!1),[Wr,Zr]=D.useState([]),[Ja,mi]=D.useState(""),[Ju,Eo]=D.useState(!1),Ys=D.useRef(null),Ll=D.useRef(null),To=D.useRef(!1),[nl,Vx]=D.useState("domain"),[al,Oo]=D.useState(""),[wc,cu]=D.useState(""),[uu,Fl]=D.useState([]),[Gx,du]=D.useState(!1),[S0,Nc]=D.useState(!1),[sl,jc]=D.useState(""),[Yd,_0]=D.useState(!1),[Jd,fu]=D.useState(""),[da,A0]=D.useState(null),[kc,Qd]=D.useState(!1),[U,fe]=D.useState([]),[$e,Ze]=D.useState(!1),[ot,bt]=D.useState(!1),[Rt,ur]=D.useState(!1),[Cr,Vr]=D.useState(null),[$r,fn]=D.useState(null),[va,ya]=D.useState(null),[Qa,Ds]=D.useState(null),[ws,Po]=D.useState(null),[Ls,il]=D.useState([]),[Sc,Zd]=D.useState(""),[C0,Qu]=D.useState(!1),[ef,tf]=D.useState(!1),[rf,Za]=D.useState(!1),[ao,ol]=D.useState(!1),[Pa,Zu]=D.useState("compose"),[Kr,Fs]=D.useState([]),[ba,Js]=D.useState([]),[Ln,Ns]=D.useState([]),[Ia,Io]=D.useState(""),[Ma,ds]=D.useState(""),[ta,es]=D.useState(""),[Ci,Ml]=D.useState(""),[Do,nf]=D.useState([]),[ll,Ra]=D.useState([]),[af,Qs]=D.useState(!1),[Ei,_c]=D.useState(!1),[sf,hu]=D.useState(!1),[Lo,Ti]=D.useState(""),[so,Fo]=D.useState(""),[cl,Mo]=D.useState(""),[Ro,E0]=D.useState([]),[xi,js]=D.useState(!1),[Un,Gn]=D.useState(0),[hn,fa]=D.useState([]),ul=D.useRef(null),[T0,dl]=D.useState(!1),[of,O0]=D.useState([]),[pu,Oi]=D.useState(!1),[Zs,P0]=D.useState(""),[I0,uy]=D.useState(null),[D0,fp]=D.useState([]),[hp,dy]=D.useState([]),[L0,Kx]=D.useState([]),[F0,Xx]=D.useState([]),[pp,fy]=D.useState({contacts:[],companies:[]}),[hy,py]=D.useState(!1),[mp,my]=D.useState([]),[xp,xy]=D.useState([]),[lf,gp]=D.useState([]),[vp,gy]=D.useState(!1),[EN,mu]=D.useState(!1),[xu,ed]=D.useState(null),[TN,Yx]=D.useState(!1),[Pi,Bo]=D.useState(!1),[Rl,yp]=D.useState(null),[vy,io]=D.useState(!1),[$o,ON]=D.useState(null),[bp,yy]=D.useState(!1),[gu,Jx]=D.useState(null),[by,wy]=D.useState(!1),[td,wp]=D.useState({}),[cf,Np]=D.useState(!1),[PN,M0]=D.useState(!1),[Qx,jp]=D.useState(""),[Ny,IN]=D.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[jy,Zx]=D.useState([]),[ky,R0]=D.useState(!1),[DN,kp]=D.useState(!1),[Ba,k]=D.useState(new Set),[P,W]=D.useState(!1),[te,de]=D.useState(!1),[xe,ve]=D.useState("date"),[Ne,Ee]=D.useState("desc"),[Ie,et]=D.useState(!1),[ut,dt]=D.useState(null),it=D.useRef(null),Ot=D.useRef(null),yt=D.useRef(null),tt=D.useRef(null),rt=D.useCallback(O=>{const Z={searchText:""};if(!O||typeof O!="string")return Z;const ie=[];let Le="",ft=!1;for(let ct=0;ct<O.length;ct++){const Ut=O[ct];if(Ut==='"'){ft=!ft;continue}if(!ft&&(Ut===" "||Ut==="	")){Le&&(ie.push(Le),Le="");continue}Le+=Ut}Le&&ie.push(Le);const Ct=[];for(const ct of ie){const Ut=ct.match(/^from:(.+)$/i);if(Ut){Z.from=Ut[1].trim();continue}const zt=ct.match(/^subject:(.+)$/i);if(zt){Z.subject=zt[1].trim();continue}if(/^has:attachment$/i.test(ct)){Z.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(ct)||/^-has:attachment$/i.test(ct)){Z.hasAttachment=!1;continue}if(/^is:read$/i.test(ct)){Z.isRead=!0;continue}if(/^is:unread$/i.test(ct)){Z.isRead=!1;continue}if(/^is:starred$/i.test(ct)){Z.isStarred=!0;continue}if(/^is:unstarred$/i.test(ct)){Z.isStarred=!1;continue}Ct.push(ct)}return Z.searchText=Ct.join(" ").trim(),Z},[]),At=D.useMemo(()=>{const O=rt(B),Z={};O.searchText&&(Z.search=O.searchText),oe&&(Z.status=oe);const ie=O.from??q;ie&&(Z.from=ie);const Le=O.subject??V;Le&&(Z.subject=Le,Z.subjectOperator=R);const ft=O.hasAttachment!==void 0?O.hasAttachment:L;ft!==void 0&&(Z.hasAttachment=ft),ne&&(Z.dateFrom=ne),Q&&(Z.dateTo=Q),cr&&(Z.labelId=cr);const Ct=O.isRead!==void 0?O.isRead:Ae;Ct!==void 0&&(Z.isRead=Ct);const ct=O.isStarred!==void 0?O.isStarred:Me;return ct!==void 0&&(Z.isStarred=ct),Z},[B,oe,q,V,R,L,ne,Q,cr,Ae,Me,rt]),{data:It,isLoading:Pt,isFetchingNextPage:ar,hasNextPage:Xt,fetchNextPage:Or,error:sr,refetch:nn}=VCe(i,Object.keys(At).length>0?At:void 0,{staleTime:60*1e3,refetchInterval:2*60*1e3}),kn=D.useMemo(()=>It!=null&&It.pages?It.pages.flatMap(ie=>ie.data||[]).filter((ie,Le,ft)=>ie.id&&Le===ft.findIndex(Ct=>Ct.id===ie.id)):[],[It]);((Dp=It==null?void 0:It.pages[0])==null?void 0:Dp.total)??kn.length;const pn=KCe(),en=D.useCallback(()=>{To.current||ar||!Xt||!i||(To.current=!0,Or())},[ar,Xt,Or,i]);D.useEffect(()=>{ar||(To.current=!1)},[ar]),D.useEffect(()=>{if(sr){const O=(sr==null?void 0:sr.message)||"Failed to load inbox";lr(O),(O.toLowerCase().includes("google")||O.toLowerCase().includes("connected"))&&Y(!1)}else lr(null)},[sr]),D.useEffect(()=>{const O=Ys.current,Z=Ll.current;if(!O||!Z||!Xt||ar)return;let ie=null,Le=null,ft=null;const Ct=400;try{ie=new IntersectionObserver(ct=>{ct[0].isIntersecting&&Xt&&!ar&&en()},{threshold:.1,rootMargin:"300px",root:Z}),ie.observe(O)}catch(ct){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",ct)}return Le=()=>{ar||!Xt||ft==null&&(ft=setTimeout(()=>{ft=null;const ct=Z,Ut=O;if(!ct||!Ut||ar||!Xt)return;const zt=ct.getBoundingClientRect(),Ir=Ut.getBoundingClientRect(),Lr=zt.bottom-Ir.top;Lr<500&&Lr>-100&&en()},Ct))},Z.addEventListener("scroll",Le,{passive:!0}),()=>{ft!=null&&clearTimeout(ft),ie&&ie.disconnect(),Le&&Z&&Z.removeEventListener("scroll",Le)}},[Xt,ar,en,Gt,kn.length]);const zn=D.useCallback(async()=>{var O;if(i)try{const Z=await D6(i),ie=(Z==null?void 0:Z.connected)===!0||((O=Z==null?void 0:Z.data)==null?void 0:O.connected)===!0;Y(ie)}catch{Y(!1)}},[i]),bn=D.useCallback(async()=>{if(i){Qu(!0);try{const O=await d1e(i),Z=(O==null?void 0:O.data)??O??[],ie=Array.isArray(Z)?Z:[];il(ie.filter(Le=>Le.domain&&String(Le.domain).trim()||!1))}catch(O){console.error("[INBOX] Failed to load excluded domains:",O),r(v(O,"Failed to load excluded domains")),il([])}finally{Qu(!1)}}},[i,r]),Xr=D.useCallback(async()=>{if(!(!i||!Sc.trim())){tf(!0);try{await f1e(i,Sc.trim()),Zd(""),await bn(),t("Domain added to exclusion list"),nn()}catch(O){console.error("[INBOX] Failed to add excluded domain:",O),r(v(O,"Failed to add excluded domain"))}finally{tf(!1)}}},[i,Sc,bn,nn,t,r]),ts=D.useCallback(async O=>{if(i)try{await h1e(i,O),await bn(),t("Domain removed from exclusion list"),nn()}catch(Z){console.error("[INBOX] Failed to remove excluded domain:",Z),r(v(Z,"Failed to remove excluded domain"))}},[i,bn,nn,t,r]),ei=D.useCallback(async()=>{if(i)try{const O=await $ve(i),Z=(O==null?void 0:O.data)??O??[],ie=Array.isArray(Z)?Z.filter((Le,ft,Ct)=>{const ct=(Le.email||"").toLowerCase();return Ct.findIndex(Ut=>(Ut.email||"").toLowerCase()===ct&&Ut.userId===Le.userId)===ft}):[];Xe(ie),Y(ie.length>0),ie.length>0&&!ta&&es(ie[0].email)}catch(O){console.error("[INBOX] Failed to load connected accounts:",O),Xe([]),Y(!1)}},[i]),$a=async()=>{var O;if(i)try{const Z=await CR(i),ie=(Z==null?void 0:Z.authUrl)||((O=Z==null?void 0:Z.data)==null?void 0:O.authUrl);ie?window.location.href=ie:r("Failed to get authorization URL")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to connect account")}},Ii=async O=>{if(i){kt(O);try{await Uve(i,O),t(`Disconnected ${O}`),await ei(),await nn()}catch(Z){r((Z==null?void 0:Z.message)||"Failed to disconnect account")}finally{kt(null)}}},An=D.useCallback(async()=>{if(i)try{const O=await zve(i),Z=(O==null?void 0:O.data)??O??[];wt(Array.isArray(Z)?Z:[])}catch(O){console.error("[INBOX] Failed to load filtered accounts:",O),wt([])}},[i]),oo=async O=>{if(i){Vt(O);try{await qve(i,O),await An(),await n.invalidateQueries({queryKey:ja.emails()}),t(`Emails from ${O} will be hidden`)}catch(Z){r((Z==null?void 0:Z.message)||"Failed to filter account")}finally{Vt(null)}}},lo=async(O,Z)=>{if(i){Vt(Z);try{await Hve(i,O),await An(),await n.invalidateQueries({queryKey:ja.emails()}),t(`Emails from ${Z} will now be visible`)}catch(ie){r((ie==null?void 0:ie.message)||"Failed to unfilter account")}finally{Vt(null)}}};D.useEffect(()=>{if(!i){Y(!1);return}zn(),ei(),bn(),An()},[i,zn,ei,bn,An]),D.useEffect(()=>{We.length>0&&!ta&&es(We[0].email)},[We]),D.useEffect(()=>{try{const O=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(O){const Z=JSON.parse(O);Array.isArray(Z)&&Ue(Z)}}catch{}},[]),D.useEffect(()=>{if(Ce.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(Ce))}catch{}},[Ce]),D.useEffect(()=>{i&&(async()=>{try{const Z=await su(),ie=(Z==null?void 0:Z.data)??Z??[];Co(Array.isArray(ie)?ie:[])}catch(Z){const ie=(Z==null?void 0:Z.message)||"Failed to load users";console.error("Failed to load users:",ie)}})()},[i]),D.useEffect(()=>{const O=Z=>{Ft.current&&!Ft.current.contains(Z.target)&&Vn(!1)};if(Rn)return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[Rn]),D.useEffect(()=>{i&&(async()=>{try{const Z=await qh(),ie=(Z==null?void 0:Z.data)??Z??[];Ra(Array.isArray(ie)?ie:[])}catch(Z){console.error("Failed to load contacts:",Z==null?void 0:Z.message)}})()},[i]);const wa=D.useCallback(async(O=!1)=>{if(i&&!(xr&&!O))try{or(!0);const Z=await k1e(i),ie=(Z==null?void 0:Z.labels)??(Z==null?void 0:Z.data);gn(Array.isArray(ie)?ie:[])}catch(Z){console.error("Error fetching labels:",Z),gn([])}finally{or(!1)}},[i]);D.useEffect(()=>{i&&G&&wa()},[i,G,wa]),D.useEffect(()=>{ua&&dn&&i&&wa(!0)},[ua,dn,i,wa]),D.useEffect(()=>{i&&ao&&(async()=>{if(i)try{const Z=await TR(i),ie=(Z==null?void 0:Z.data)??Z??[];nf(Array.isArray(ie)?ie:[]);const Le=ie.find(ft=>ft.isDefault);Le&&Ml(Le.content||"")}catch(Z){console.error("Failed to load signatures:",Z==null?void 0:Z.message)}})()},[i,ao]);const ks=async()=>{if(i){j(!0),lr(null);try{await pn.mutateAsync({userId:i,scopeDays:"all"}),t("Syncing all emails from connected accounts")}catch(O){const Z=(O==null?void 0:O.message)||"Sync failed";r(Z),lr(Z)}finally{j(!1)}}},ti=D.useRef(pn),Uo=D.useRef(n);D.useEffect(()=>{ti.current=pn,Uo.current=n},[pn,n]),D.useEffect(()=>{if(!i||!m){F.current&&(clearTimeout(F.current),F.current=null),M.current&&(clearInterval(M.current),M.current=null);return}F.current&&(clearTimeout(F.current),F.current=null),M.current&&(clearInterval(M.current),M.current=null);const O=()=>{const Z=Date.now();Z-eD<QCe||C.current||(eD=Z,C.current=!0,E(!0),ti.current.mutate({userId:i,scopeDays:"all"},{onSuccess:()=>{C.current=!1,E(!1)},onError:ie=>{console.log("[INBOX] Background sync failed:",(ie==null?void 0:ie.message)||"Unknown error"),C.current=!1,E(!1)}}))};return F.current=setTimeout(()=>{O(),F.current=null},30*1e3),M.current=setInterval(()=>{O()},25*60*1e3),()=>{F.current&&(clearTimeout(F.current),F.current=null),M.current&&(clearInterval(M.current),M.current=null),C.current=!1}},[i,m]);const Bl=async O=>{if(i){py(!0);try{const Z=await y1e(O);fy((Z==null?void 0:Z.data)||{contacts:[],companies:[]})}catch(Z){console.error("Failed to load suggested links:",Z),fy({contacts:[],companies:[]})}finally{py(!1)}}},rs=async O=>{if(i){gy(!0);try{const[Z,ie,Le]=await Promise.all([w1e(O).catch(()=>({success:!0,data:[]})),N1e(O).catch(()=>({success:!0,data:[]})),j1e(O).catch(()=>({success:!0,data:[]}))]);my((Z==null?void 0:Z.data)||[]),xy((ie==null?void 0:ie.data)||[]),gp((Le==null?void 0:Le.data)||[])}catch(Z){console.error("Failed to load related items:",Z),my([]),xy([]),gp([])}finally{gy(!1)}}};D.useEffect(()=>{(async()=>{if(i)try{const[Z,ie,Le,ft]=await Promise.all([iu().catch(()=>({data:[]})),hN(i).catch(()=>({data:[]})),$x(i).catch(()=>({data:[]})),AR({userId:i}).catch(()=>({data:[]}))]);fp((Z==null?void 0:Z.data)||[]),dy((ie==null?void 0:ie.data)||[]),Kx((Le==null?void 0:Le.data)||[]),Xx((ft==null?void 0:ft.data)||[])}catch(Z){console.error("Failed to load CRM data:",Z)}})()},[i]);const gi=async(O,Z)=>{if(!(!(b!=null&&b.id)||!i)){Bo(!0);try{const ie=b.id;let Le;switch(O){case"contact":await p1e({emailId:ie,contactId:Z,userId:i}),Le="contactId";break;case"company":await m1e({emailId:ie,companyId:Z,userId:i}),Le="companyId";break;case"deal":await x1e({emailId:ie,dealId:Z,userId:i}),Le="dealId";break;case"project":await g1e({emailId:ie,projectId:Z,userId:i}),Le="projectId";break;case"contract":await v1e({emailId:ie,contractId:Z,userId:i}),Le="contractId";break;default:throw new Error(`Unknown link type: ${O}`)}t(`Email linked to ${O} successfully`),N(ft=>ft?{...ft,linkedRecords:{...ft.linkedRecords||{},[Le]:Z}}:null),rs(ie),mu(!1),ed(null)}catch(ie){r((ie==null?void 0:ie.message)||`Failed to link email to ${O}`)}finally{Bo(!1)}}},rd=async O=>{if(!(!(b!=null&&b.id)||!i))try{const Z=await b1e({emailId:b.id,userId:i,title:O.title||b.subject||"Task from Email",description:O.description||b.body||"",dueDate:O.dueDate,priority:O.priority||"Medium",projectId:O.projectId,assigneeId:O.assigneeId});t("Task created successfully"),Yx(!1),rs(b.id)}catch(Z){r((Z==null?void 0:Z.message)||"Failed to create task")}},fl=async O=>{if(!i)return;N(null),Pe([]),$t(null),Ye(null),Qe([]),ke(null),A(!0);const Z=!O.isRead;Z&&n.setQueriesData({queryKey:ja.emails()},ie=>{if(!(ie!=null&&ie.pages))return ie;const Le=ie.pages.map(ft=>{const Ct=ft.data.map(ct=>ct.id===O.id?{...ct,isRead:!0}:ct);return{...ft,data:Ct}});return{...ie,pages:Le}});try{const ie=await Vve(O.id,i),Le=(ie==null?void 0:ie.data)??ie??{},ft={...O,...Le,body:Le.body??O.lastMessage,gmailThreadId:Le.gmailThreadId??O.gmailThreadId,isRead:!0};N(ft),Z&&Ac(O.id,!0,!0).catch(Ct=>{console.error("[INBOX] Failed to mark email as read:",Ct==null?void 0:Ct.message),n.setQueryData(ja.emailsList(i||"",At),ct=>ct!=null&&ct.pages?{...ct,pages:ct.pages.map(Ut=>({...Ut,data:Ut.data.map(zt=>zt.id===O.id?{...zt,isRead:!1}:zt)}))}:ct)}),O.id&&(Bl(O.id),rs(O.id));try{const Ct=await Xve(O.id),ct=(Ct==null?void 0:Ct.data)??Ct??[];Sr(Ut=>({...Ut,[O.id]:ct.map(zt=>({id:zt.id,userId:zt.userId,userName:zt.userName,message:zt.message,timestamp:zt.createdAt,imageUrl:zt.imageUrl,imageName:zt.imageName,markedFor:zt.markedFor||[]}))}))}catch(Ct){const ct=(Ct==null?void 0:Ct.message)||"Failed to load notes";console.error("Failed to load notes:",ct),Sr(Ut=>({...Ut,[O.id]:[]}))}if(i)try{Ze(!0);const Ct=await z3(i,O.id);Ct.success&&Ct.data?fe(Ct.data):fe([])}catch(Ct){console.error("Failed to load calendar events:",Ct.message),fe([])}finally{Ze(!1)}}catch(ie){r((ie==null?void 0:ie.message)||"Could not load email")}finally{A(!1)}},Ac=async(O,Z,ie=!1)=>{if(i)try{await XP(O,Z,i),n.setQueriesData({queryKey:ja.emails()},Le=>{if(!(Le!=null&&Le.pages))return Le;const ft=Le.pages.map(Ct=>({...Ct,data:Ct.data.map(ct=>ct.id===O?{...ct,isRead:Z,syncStatus:{...ct.syncStatus||{},readStatus:"pending"}}:ct)}));return{...Le,pages:ft}}),(b==null?void 0:b.id)===O&&N(Le=>Le?{...Le,isRead:Z,syncStatus:{...Le.syncStatus||{},readStatus:"pending"}}:null),ie||t(Z?"Marked as read":"Marked as unread")}catch(Le){ie?console.error("[INBOX] Failed to mark email as read:",Le==null?void 0:Le.message):(r((Le==null?void 0:Le.message)||"Update failed"),nn())}},Da=async(O,Z)=>{try{await Gve(O,Z),n.setQueryData(ja.emailsList(i||"",At),ie=>ie!=null&&ie.pages?{...ie,pages:ie.pages.map(Le=>({...Le,data:Le.data.map(ft=>ft.id===O?{...ft,isStarred:Z,syncStatus:{...ft.syncStatus||{},starredStatus:"pending"}}:ft)}))}:ie),(b==null?void 0:b.id)===O&&N(ie=>ie?{...ie,isStarred:Z,syncStatus:{...ie.syncStatus||{},starredStatus:"pending"}}:null),n.invalidateQueries({queryKey:ja.emails()}),t(Z?"Starred":"Unstarred")}catch(ie){r((ie==null?void 0:ie.message)||"Update failed"),nn()}},uf=O=>{if(!O)return null;switch(O){case"synced":return a.jsx(tn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return a.jsx(Ha,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return a.jsx(Cn,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},B0=async(O,Z=[],ie=[],Le=!1,ft)=>{try{if(await _1e(O,{addLabelIds:Z,removeLabelIds:ie,trackAccuracy:Le,suggestionId:ft}),n.invalidateQueries({queryKey:ja.emails()}),(b==null?void 0:b.id)===O){const ct=[...b.labels||[]];Z.forEach(Ut=>{ct.includes(Ut)||ct.push(Ut)}),ie.forEach(Ut=>{const zt=ct.indexOf(Ut);zt>-1&&ct.splice(zt,1)}),N({...b,labels:ct,syncStatus:{...b.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(Ct){r((Ct==null?void 0:Ct.message)||"Failed to update labels")}},Sy=async(O,Z)=>{try{await A1e(O,Z),await B0(O,[],[Z])}catch(ie){r((ie==null?void 0:ie.message)||"Failed to remove label")}},$0=async(O,Z)=>{if(i){_0(!0);try{await S1e({userId:i,accountEmail:Z,labelName:O,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await wa(),jc(""),Nc(!1)}catch(ie){r((ie==null?void 0:ie.message)||"Failed to create label")}finally{_0(!1)}}},nd=async(O,Z)=>{if(i)try{await yb(O,{userId:i,...Z}),n.invalidateQueries({queryKey:ja.emails()}),(b==null?void 0:b.id)===O&&N(ie=>ie?{...ie,...Z}:null),t("Email updated")}catch(ie){r((ie==null?void 0:ie.message)||"Update failed")}},U0=()=>{W(!P),k(new Set)},zo=O=>{k(Z=>{const ie=new Set(Z);return ie.has(O)?ie.delete(O):ie.add(O),ie})},df=()=>{Ba.size===Li.length?k(new Set):k(new Set(Li.map(O=>O.id)))},ff=async()=>{if(!(!i||Ba.size===0)){de(!0);try{await Promise.all(Array.from(Ba).map(O=>XP(O,!0,i))),n.invalidateQueries({queryKey:ja.emails()}),t(`${Ba.size} email(s) marked as read`),k(new Set)}catch(O){r((O==null?void 0:O.message)||"Failed to mark emails as read")}finally{de(!1)}}},_y=async O=>{if(i)try{await YP(O,i),n.invalidateQueries({queryKey:ja.emails()}),(b==null?void 0:b.id)===O&&N(Z=>Z?{...Z,threadStatus:"archived"}:null),t("Email archived")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to archive email")}},Sp=async O=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await JP(O,i),n.invalidateQueries({queryKey:ja.emails()}),(b==null?void 0:b.id)===O&&N(null),t("Email deleted")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to delete email")}},Ay=async O=>{if(i)try{await o1e(O,i),n.invalidateQueries({queryKey:ja.emails()}),(b==null?void 0:b.id)===O&&N(Z=>Z?{...Z,threadStatus:"active"}:null),t("Email restored")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to restore email")}},_p=async O=>{if(i)try{await yb(O,{userId:i,threadStatus:"resolved"}),n.invalidateQueries({queryKey:ja.emails()}),(b==null?void 0:b.id)===O&&N(Z=>Z?{...Z,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to resolve conversation")}},eg=async()=>{if(!(!i||Ba.size===0)){de(!0);try{await Promise.all(Array.from(Ba).map(O=>YP(O,i))),n.invalidateQueries({queryKey:ja.emails()}),t(`${Ba.size} email(s) archived`),k(new Set)}catch(O){r((O==null?void 0:O.message)||"Failed to archive emails")}finally{de(!1)}}},Ap=async()=>{if(!(!i||Ba.size===0)&&confirm(`Are you sure you want to delete ${Ba.size} email(s)? This action cannot be undone.`)){de(!0);try{await Promise.all(Array.from(Ba).map(Z=>JP(Z,i)));const O=Array.from(Ba);n.invalidateQueries({queryKey:ja.emails()}),b&&Ba.has(b.id)&&N(null),t(`${O.length} email(s) deleted`),k(new Set)}catch(O){r((O==null?void 0:O.message)||"Failed to delete emails")}finally{de(!1)}}},z0=async(O,Z,ie,Le)=>{if(!i)return;const ft=`${O}-${Z}-view`;Fr(Ct=>({...Ct,[ft]:!0}));try{const Ct=await QP(O,Z,i),ct=window.URL.createObjectURL(Ct);nr({isOpen:!0,emailId:O,attachmentId:Z,filename:ie,mimeType:Le,url:ct})}catch(Ct){r((Ct==null?void 0:Ct.message)||"Failed to load attachment")}finally{Fr(Ct=>({...Ct,[ft]:!1}))}},tg=async(O,Z,ie)=>{if(!i)return;const Le=`${O}-${Z}-download`;Fr(ft=>({...ft,[Le]:!0}));try{const ft=await QP(O,Z,i),Ct=window.URL.createObjectURL(ft),ct=document.createElement("a");ct.href=Ct,ct.download=ie,document.body.appendChild(ct),ct.click(),window.URL.revokeObjectURL(Ct),document.body.removeChild(ct),t("Attachment downloaded")}catch(ft){r((ft==null?void 0:ft.message)||"Failed to download attachment")}finally{Fr(ft=>({...ft,[Le]:!1}))}},rg=O=>{if(O===0)return"0 Bytes";const Z=1024,ie=["Bytes","KB","MB","GB"],Le=Math.floor(Math.log(O)/Math.log(Z));return Math.round(O/Math.pow(Z,Le)*100)/100+" "+ie[Le]},Cc=O=>O.startsWith("image/"),Di=O=>O==="application/pdf",LN=O=>{const Z=O.target.files;if(!Z||Z.length===0)return;const ie=25*1024*1024,Le=[];Array.from(Z).forEach(ft=>{if(ft.size>ie){r(`File "${ft.name}" is too large. Maximum size is 25MB.`);return}const Ct=`${Date.now()}-${Math.random()}`;let ct;ft.type.startsWith("image/")&&(ct=URL.createObjectURL(ft)),Le.push({file:ft,preview:ct,id:Ct})}),fa([...hn,...Le]),ul.current&&(ul.current.value="")},Cp=async(O,Z)=>{if(i){Oi(!0);try{const ie=await F1e(i,ta||void 0,void 0,O||Zs,Z),Le=(ie==null?void 0:ie.data)||ie||{};O0(Z?ft=>[...ft,...Le.files||[]]:Le.files||[]),uy(Le.nextPageToken||null)}catch(ie){const Le=(ie==null?void 0:ie.message)||"Failed to load Drive files";Le.includes("not connected")||(ie==null?void 0:ie.code)==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${ta||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Le),Z||O0([])}finally{Oi(!1)}}},FN=async O=>{if(!(!i||!ao))try{const Z=Pa!=="compose"&&(b!=null&&b.id)?b.id:`draft_${Date.now()}`;if(Pa==="compose"){const ie={id:`drive_${O.id}`,file:new pl([],O.name,{type:O.mimeType}),isDriveFile:!0,driveFileId:O.id,driveWebViewLink:O.webViewLink,driveIconLink:O.iconLink,preview:O.thumbnailLink||O.iconLink};fa([...hn,ie]),dl(!1),t("Drive file added")}else await e8({userId:i,emailId:b.id,fileId:O.id,fileName:O.name,fileMimeType:O.mimeType,webViewLink:O.webViewLink,webContentLink:O.webContentLink,iconLink:O.iconLink}),dl(!1),t("Drive file attached"),b&&fl(b)}catch(Z){r((Z==null?void 0:Z.message)||"Failed to attach Drive file")}},Cy=O=>{const Z=hn.find(ie=>ie.id===O);Z!=null&&Z.preview&&URL.revokeObjectURL(Z.preview),wp(ie=>{const Le={...ie};return delete Le[O],Le}),fa(hn.filter(ie=>ie.id!==O))},Ep=async()=>{var O;if(!i||!ta||!Ia||!Ma){r("Please fill in subject and message to save draft");return}Np(!0);try{await l1e({userId:i,accountEmail:ta||((O=We[0])==null?void 0:O.email),to:Kr.length>0?Kr:void 0,cc:ba.length>0?ba:void 0,bcc:Ln.length>0?Ln:void 0,subject:Ia,body:Ma}),t("Draft saved to Gmail")}catch(Z){const ie=v(Z,"Failed to save draft");r(ie)}finally{Np(!1)}},Ey=async()=>{var O;if(!(!i||!ta)){R0(!0);try{const Z=await c1e(i,ta||((O=We[0])==null?void 0:O.email)),ie=(Z==null?void 0:Z.data)||Z||[];Zx(Array.isArray(ie)?ie:[])}catch(Z){const ie=v(Z,"Failed to load drafts");r(ie),Zx([])}finally{R0(!1)}}};D.useEffect(()=>()=>{hn.forEach(O=>{O.preview&&URL.revokeObjectURL(O.preview)})},[hn]),D.useEffect(()=>{!ao&&hn.length>0&&(hn.forEach(O=>{O.preview&&URL.revokeObjectURL(O.preview)}),fa([]))},[ao,hn]);const Ty=(O,Z=1200,ie=1200,Le=.8)=>new Promise((ft,Ct)=>{const ct=new FileReader;ct.onload=Ut=>{var Ir;const zt=new Image;zt.onload=()=>{let Lr=zt.width,Jr=zt.height;Lr>Jr?Lr>Z&&(Jr=Jr*Z/Lr,Lr=Z):Jr>ie&&(Lr=Lr*ie/Jr,Jr=ie);const wn=document.createElement("canvas");wn.width=Lr,wn.height=Jr;const Bn=wn.getContext("2d");Bn?(Bn.drawImage(zt,0,0,Lr,Jr),ft(wn.toDataURL("image/jpeg",Le))):Ct(new Error("Canvas context not available"))},zt.onerror=Ct,zt.src=(Ir=Ut.target)==null?void 0:Ir.result},ct.onerror=Ct,ct.readAsDataURL(O)}),Tp=async O=>{var ie;const Z=(ie=O.target.files)==null?void 0:ie[0];if(Z){if(!Z.type.startsWith("image/")){r("Please select an image file");return}if(Z.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const Le=await Ty(Z,1200,1200,.8);mt(Le),_e(Z)}catch(Le){r(Le.message||"Failed to process image")}}},ng=O=>{const Z=document.createElement("div");Z.innerHTML=O;const ie=Z.textContent||Z.innerText||"",Le=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,ft=[];let Ct;for(;(Ct=Le.exec(ie))!==null;){const ct=Ct[1].trim(),Ut=un.find(zt=>zt.name.toLowerCase()===ct.toLowerCase());Ut&&Ut.id!==i&&ft.push(Ut.id)}return[...new Set(ft)]},ad=D.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),Op=["header","bold","italic","underline","strike","list","bullet","link"],MN=D.useCallback((O,Z,ie,Le)=>{if(cn(O),Ot.current=Le,ie==="user"){const ft=Le.getSelection(!0);if(ft){const ct=Le.getText().substring(0,ft.index),Ut=ct.lastIndexOf("@");if(Ut!==-1){const zt=ct.substring(Ut+1),Ir=Ut>0?ct[Ut-1]:" ";if(Ir===" "||Ir===`
`||Ut===0)if(!zt.includes(" ")&&!zt.includes(`
`)&&zt.length<50){vr(Ut),bc(zt);const Lr=un.filter(Jr=>{var wn,Bn;return((wn=Jr.name)==null?void 0:wn.toLowerCase().includes(zt.toLowerCase()))||((Bn=Jr.email)==null?void 0:Bn.toLowerCase().includes(zt.toLowerCase()))});Lt(Lr),Ai(Lr.length>0)}else Ai(!1),vr(null);else Ai(!1),vr(null)}else Ai(!1),vr(null)}}},[un]),Pp=D.useCallback(O=>{const Z=Ot.current;if(!Z){console.error("[INBOX] Quill editor not available");return}Z.focus();const ie=Z.getText();let Le=qt;if((Le===null||Le<0)&&(Le=ie.lastIndexOf("@")),Le===-1){console.error("[INBOX] Could not find @ symbol for mention"),Ai(!1),vr(null);return}const ft=ie.substring(Le+1),Ct=ft.indexOf(" "),ct=ft.indexOf(`
`);let Ut=ft.length;Ct!==-1&&(Ut=Math.min(Ut,Ct)),ct!==-1&&(Ut=Math.min(Ut,ct));const zt=Le,Ir=Le+1+Ut,Lr=Ir-zt;console.log("[INBOX] Inserting mention:",{atIndex:Le,deleteStartIndex:zt,deleteEndIndex:Ir,deleteLength:Lr,textAfterAt:ft.substring(0,Ut),mentionText:`@${O.name} `}),Z.setSelection(zt,Lr,"api"),Z.deleteText(zt,Lr,"api");const Jr=`@${O.name} `;Z.insertText(zt,Jr,"api"),Z.formatText(zt,Jr.length-1,{bold:!0,color:"#4338ca"},"api");const wn=zt+Jr.length;Z.setSelection(wn,0,"api");const Bn=Z.root.innerHTML;cn(Bn),Ai(!1),vr(null)},[qt]),Oy=async()=>{if(!b||!Gr.trim()&&!le||!i||!s){!Gr.trim()&&!le&&r("Please enter a note or upload an image");return}Se(!0);try{const O=b.id,Z=s.name||s.email||"You",ie=document.createElement("div");ie.innerHTML=Gr;const ft=(ie.textContent||ie.innerText||"").trim()?Gr.trim():"",Ct={emailId:O,userId:i,userName:Z,message:ft};if(gr.length>0&&(Ct.markedFor=gr),qe&&qe.trim()){if(qe.length>75e4){r("Image is too large. Please use a smaller image."),Se(!1);return}Ct.imageUrl=qe,le!=null&&le.name&&(Ct.imageName=le.name)}const ct=await Kve(Ct),Ut=(ct==null?void 0:ct.data)||{};if(!Ut.id&&!Ut.emailId)throw console.error("[INBOX] Invalid note response:",ct),new Error("Invalid response from server. Note was not created.");const zt={id:Ut.id||`thread-${Date.now()}`,userId:i,userName:Z,message:ft,timestamp:Ut.createdAt||new Date().toISOString(),imageUrl:qe||void 0,imageName:(le==null?void 0:le.name)||void 0,markedFor:Ut.markedFor||[]};Sr(Jr=>({...Jr,[O]:[zt,...Jr[O]||[]]}));const Ir=ng(ft);if(Ir.length>0)for(const Jr of Ir)try{await vx({userId:Jr,type:"mention",title:"You were mentioned in an email note",message:`${Z} mentioned you in a note on email: "${b.subject||"Untitled"}"`,link:`/?tab=inbox&email=${O}`,read:!1})}catch(wn){const Bn=(wn==null?void 0:wn.message)||"Failed to send notification";console.error("Failed to send notification:",Bn)}cn(""),mt(""),_e(null),Br([]),yt.current&&(yt.current.value=""),Ot.current&&Ot.current.setText("");const Lr=(ct==null?void 0:ct.message)||(Ir.length>0?`Note added and ${Ir.length} user(s) notified`:"Internal note added");t(Lr)}catch(O){const Z=v(O,"Failed to add note");console.error("[INBOX] Error adding note:",Z),r(Z)}finally{Se(!1)}},ag=async(O,Z)=>{if(!(!i||!s)){pe(Z);try{await Yve(Z,i),Sr(ie=>({...ie,[O]:(ie[O]||[]).filter(Le=>Le.id!==Z)})),t("Note deleted")}catch(ie){const Le=v(ie,"Failed to delete note");r(Le)}finally{pe(null)}}},Ec=async O=>{if(!(!b||!i)){at(!0),Qe([]),ke(null),Ye(null);try{const Z=await Jve(b.id,i,O),ie=(Z==null?void 0:Z.data)??Z??{};if(ie.variations&&Array.isArray(ie.variations)&&ie.variations.length>0)Qe(ie.variations),ke(0),Ye(y(ie.variations[0].draft)),t(`Generated ${ie.variations.length} draft variations`);else{let Le=ie.draft;(!Le||typeof Le!="string")&&(Le=`Hi ${b.sender||"there"},

Thank you for your email regarding "${b.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${(s==null?void 0:s.name)||"Team"}`),Ye(y(Le)),Qe([{style:"default",description:"AI-generated draft",draft:Le,confidence:75}]),ke(0),t("AI draft generated")}}catch(Z){const ie=v(Z,"Failed to generate draft");at(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",ie),r(ie)},0)}finally{at(!1)}}},sg=async()=>{if(!i||!Ia||Kr.length===0){r("Please enter a subject and recipient to generate AI draft");return}wy(!0),Jx(null);try{const Z=`Hi ${Kr[0].split("@")[0]},

${Ia?`Regarding: ${Ia}`:""}

[Your message here]

Best regards,
${(s==null?void 0:s.name)||"Team"}`;await new Promise(ie=>setTimeout(ie,1e3)),Jx(y(Z)),t("AI draft generated")}catch(O){const Z=v(O,"Failed to generate draft");r(Z)}finally{wy(!1)}},Py=()=>{if(!Re)return;let O="";try{if(jt.current&&typeof jt.current.getText=="function")O=jt.current.getText();else{const Z=document.createElement("div");Z.innerHTML=Re,O=Z.textContent||Z.innerText||""}}catch(Z){const ie=document.createElement("div");ie.innerHTML=Re||"",O=ie.textContent||ie.innerText||"";const Le=(Z==null?void 0:Z.message)||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Le)}navigator.clipboard.writeText(O).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(Z=>{try{const ie=document.createElement("textarea");ie.value=O,document.body.appendChild(ie),ie.select(),document.execCommand("copy"),document.body.removeChild(ie),t("Draft copied to clipboard!")}catch(ie){const Le=(ie==null?void 0:ie.message)||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Le),r("Failed to copy draft. Please select and copy manually.")}})},RN=()=>{!Re||!i||!b||(ga(""),la(!0))},ig=async()=>{if(!Xa||!Xa.trim()||!Re||!i||!b){r("Please enter a template name");return}try{const O=typeof Re=="string"?Re:String(Re||"");await Qve({name:Xa.trim(),content:O,userId:i,category:"email-response"}),t("Template saved successfully!"),la(!1),ga(""),hl()}catch(O){const Z=v(O,"Failed to save template");console.error("[INBOX] Error saving template:",Z),r(Z)}},hl=async()=>{if(i)try{const O=await Zve(i),Z=(O==null?void 0:O.data)??O??[];En(Array.isArray(Z)?Z:[])}catch(O){const Z=(O==null?void 0:O.message)||"Failed to load templates";console.error("Failed to load templates:",Z)}};D.useEffect(()=>{i&&hl()},[i]),D.useEffect(()=>{i&&ao&&hl()},[i,ao]);const og=(O,Z=100)=>{if(!O)return"";let ie=O.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(ie=ie.replace(/https?:\/\/[^\s]+/g,"").trim(),ie=ie.replace(/\s+/g," ").trim(),ie.length<=Z)return ie;const Le=ie.substring(0,Z),ft=Le.lastIndexOf(" ");return ft>Z*.7?Le.substring(0,ft)+"...":Le+"..."},Li=D.useMemo(()=>{let Z=[...kn.filter((ie,Le,ft)=>ie.id&&Le===ft.findIndex(Ct=>Ct.id===ie.id))];return oe==="archived"?Z=Z.filter(ie=>ie.threadStatus==="archived"):oe&&oe!=="archived"?Z=Z.filter(ie=>ie.status===oe):oe||(Z=Z.filter(ie=>ie.threadStatus!=="archived")),cr&&(Z=Z.filter(ie=>(ie.labels||[]).includes(cr))),Ie&&i&&(Z=Z.filter(ie=>ie.owner===i)),ut&&(Z=Z.filter(ie=>ie.owner===ut)),Z.sort((ie,Le)=>{let ft=0;switch(xe){case"date":const Ct=parseInt(ie.internalDate||"0")||0;ft=(parseInt(Le.internalDate||"0")||0)-Ct;break;case"sender":const Ut=(ie.sender||ie.email||"").toLowerCase(),zt=(Le.sender||Le.email||"").toLowerCase();ft=Ut.localeCompare(zt);break;case"subject":const Ir=(ie.subject||"").toLowerCase(),Lr=(Le.subject||"").toLowerCase();ft=Ir.localeCompare(Lr);break;case"unread":if(ie.isRead===Le.isRead){const Jr=parseInt(ie.internalDate||"0")||0;ft=(parseInt(Le.internalDate||"0")||0)-Jr}else ft=ie.isRead?1:-1;break}return Ne==="asc"?-ft:ft}),Z},[kn,cr,Ie,ut,i,xe,Ne]);D.useEffect(()=>{b!=null&&b.id&&(Li.some(Z=>Z.id===b.id)||(N(null),Pe([]),$t(null),Ye(null),Qe([]),ke(null),fe([]),Sr(Z=>{const ie={...Z};return delete ie[b.id],ie})))},[Li,b==null?void 0:b.id]);const BN=Li.filter(O=>!O.isRead).length,lg=D.useMemo(()=>{if(Gt==="list")return null;const O=new Map;Li.forEach(ie=>{const Le=ie.gmailThreadId||ie.id;O.has(Le)||O.set(Le,[]),O.get(Le).push(ie)});const Z=Array.from(O.entries()).map(([ie,Le])=>{const ft=[...Le].sort((Ct,ct)=>{const Ut=parseInt(Ct.internalDate||"0")||0;return(parseInt(ct.internalDate||"0")||0)-Ut});return{threadId:ie,emails:ft,latestEmail:ft[0],unreadCount:ft.filter(Ct=>!Ct.isRead).length}});return Z.sort((ie,Le)=>{let ft=0;const Ct=ie.latestEmail,ct=Le.latestEmail;switch(xe){case"date":const Ut=parseInt(Ct.internalDate||"0")||0;ft=(parseInt(ct.internalDate||"0")||0)-Ut;break;case"sender":const Ir=(Ct.sender||Ct.email||"").toLowerCase(),Lr=(ct.sender||ct.email||"").toLowerCase();ft=Ir.localeCompare(Lr);break;case"subject":const Jr=(Ct.subject||"").toLowerCase(),wn=(ct.subject||"").toLowerCase();ft=Jr.localeCompare(wn);break;case"unread":if(ie.unreadCount>0&&Le.unreadCount===0)ft=-1;else if(ie.unreadCount===0&&Le.unreadCount>0)ft=1;else if(ie.unreadCount===Le.unreadCount){const Bn=parseInt(Ct.internalDate||"0")||0;ft=(parseInt(ct.internalDate||"0")||0)-Bn}else ft=Le.unreadCount-ie.unreadCount;break}return Ne==="asc"?-ft:ft}),Z},[Li,Gt,xe,Ne]),Ip=O=>{pr(Z=>{const ie=new Set(Z);return ie.has(O)?ie.delete(O):ie.add(O),ie})},hf=O=>{jr(Z=>{const ie=new Set(Z);return ie.has(O)?ie.delete(O):ie.add(O),ie})};return i?a.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0 relative",children:[_&&a.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-xs font-medium rounded-full shadow-lg border border-indigo-500/30 animate-in fade-in duration-200",title:"Auto-syncing emails from connected accounts",role:"status","aria-live":"polite",children:[a.jsx(pt,{className:"w-4 h-4 animate-spin flex-shrink-0"}),a.jsx("span",{children:"Auto-syncing"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),cr&&a.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",((q0=Zt.find(O=>O.id===cr))==null?void 0:q0.name)||cr]})]}),a.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",BN," unread",cr&&`  ${Li.length} email${Li.length!==1?"s":""} with label`]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Zt.length>0&&a.jsx("div",{className:"relative",children:a.jsxs("select",{value:cr||"",onChange:O=>{const Z=O.target.value||null;Dn(Z);const ie=document.querySelector(".overflow-y-auto");ie&&(ie.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[a.jsx("option",{value:"",children:"All Labels"}),Zt.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})}),a.jsxs("button",{onClick:()=>rr(Gt==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Gt==="threads"?"Switch to list view":"Switch to threaded view",children:[a.jsx(ui,{className:"w-4 h-4"}),Gt==="threads"?"Threads":"List"]}),m&&a.jsxs("button",{onClick:ks,disabled:S,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[S?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Uu,{className:"w-4 h-4"}),S?"Syncing":"Sync from Gmail"]}),We.length>0&&a.jsxs("button",{onClick:()=>xt(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${We.length} connected account${We.length!==1?"s":""}`,children:[a.jsx(tn,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),a.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:We.length})]})]})]}),G===!1&&We.length===0&&a.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),a.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),a.jsxs("button",{onClick:$a,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),a.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:B,onChange:O=>K(O.target.value),onKeyDown:O=>O.key==="Enter"&&nn(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),a.jsxs("button",{type:"button",onClick:()=>ce(O=>!O),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${je?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[a.jsx(Rv,{className:"w-4 h-4"}),"Filters",(q||V||L!==void 0||ne||Q||Ae!==void 0||Me!==void 0||oe||cr)&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),je&&a.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[a.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),a.jsx("input",{type:"text",placeholder:"email or name",value:q,onChange:O=>{X(O.target.value),me(!0)},onFocus:()=>me(!0),onBlur:()=>setTimeout(()=>me(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),ye&&ge.length>0&&a.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:ge.filter(O=>!q||[O.email,O.name].some(Z=>Z==null?void 0:Z.toLowerCase().includes(q.toLowerCase()))).slice(0,20).map(O=>a.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:Z=>{Z.preventDefault(),X(O.email||O.name),me(!1)},children:[a.jsx("span",{className:"font-medium text-slate-800",children:O.name||O.email}),O.email!==O.name&&a.jsx("span",{className:"text-xs text-slate-500",children:O.email})]},O.email))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:Ae===void 0?"":String(Ae),onChange:O=>ee(O.target.value===""?void 0:O.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"false",children:"Unread"}),a.jsx("option",{value:"true",children:"Read"})]}),a.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:ne,onChange:O=>se(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx($n,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:Q,onChange:O=>re(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx($n,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"",value:V,onChange:O=>T(O.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),a.jsxs("div",{className:"relative w-32",children:[a.jsxs("select",{value:R,onChange:O=>z(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[a.jsx("option",{value:"contains",children:"contains"}),a.jsx("option",{value:"equals",children:"equals"}),a.jsx("option",{value:"starts",children:"starts with"}),a.jsx("option",{value:"ends",children:"ends with"})]}),a.jsx(fo,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:L===void 0?"":String(L),onChange:O=>H(O.target.value===""?void 0:O.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Has attachment"}),a.jsx("option",{value:"false",children:"No attachment"})]}),a.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:oe,onChange:O=>J(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"assigned",children:"Assigned to me"})]}),a.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:Me===void 0?"":String(Me),onChange:O=>ze(O.target.value===""?void 0:O.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Starred"}),a.jsx("option",{value:"false",children:"Not starred"})]}),a.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),Zt.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:cr||"",onChange:O=>Dn(O.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"All labels"}),Zt.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),a.jsxs("div",{className:"space-y-2.5",children:[a.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:Ie,onChange:O=>{et(O.target.checked),O.target.checked&&dt(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),a.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ut||"",onChange:O=>{const Z=O.target.value||null;dt(Z),Z&&et(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any team member"}),un.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx(fo,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>n.invalidateQueries({queryKey:ja.emails()}),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),a.jsx("button",{type:"button",onClick:()=>{X(""),T(""),z("contains"),H(void 0),se(""),re(""),ee(void 0),ze(void 0),J(""),Dn(null),et(!1),dt(null),K(""),setTimeout(()=>n.invalidateQueries({queryKey:ja.emails()}),0)},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),a.jsxs("button",{type:"button",onClick:()=>ue(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(qC,{className:"w-4 h-4"}),"Save search"]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>De(O=>!O),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(qC,{className:"w-4 h-4"}),"Saved (",Ce.length,")"]}),be&&a.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ce.length===0?a.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):Ce.map(O=>a.jsxs("div",{className:"flex items-center group",children:[a.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{K(O.filters.search??""),X(O.filters.from??""),T(O.filters.subject??""),z(O.filters.subjectOperator??"contains"),H(O.filters.hasAttachment),se(O.filters.dateFrom??""),re(O.filters.dateTo??""),ee(O.filters.isRead),ze(O.filters.isStarred),J(O.filters.status??""),Dn(O.filters.labelId??null),De(!1),setTimeout(()=>n.invalidateQueries({queryKey:ja.emails()}),0)},children:O.name}),a.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{Ue(Z=>Z.filter(ie=>ie.id!==O.id)),De(!1)},title:"Delete saved search",children:""})]},O.id))})]}),a.jsxs("button",{type:"button",onClick:()=>{Eo(!0),i&&ZP(i).then(O=>{const Z=(O==null?void 0:O.data)??O??[];Zr(Array.isArray(Z)?Z:[])}).catch(()=>Zr([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[a.jsx(Rv,{className:"w-4 h-4"}),"Categorization rules"]}),a.jsx("button",{type:"button",onClick:()=>{du(!0),i&&P1e(i).then(O=>{const Z=(O==null?void 0:O.data)??O??[];Fl(Array.isArray(Z)?Z:[])}).catch(()=>Fl([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),a.jsxs("button",{type:"button",onClick:()=>{Za(!0),Ls.length===0&&bn()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[a.jsx(Jy,{className:"w-4 h-4"}),"Excluded Domains ",Ls.length>0&&`(${Ls.length})`]})]})]}),(B||q||V||L!==void 0||ne||Q||Ae!==void 0||Me!==void 0||oe||cr)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),B&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',B.length>20?B.slice(0,20)+"":B,'"',a.jsx("button",{type:"button",onClick:()=>K(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),cr&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",(($l=Zt.find(O=>O.id===cr))==null?void 0:$l.name)||cr,a.jsx("button",{type:"button",onClick:()=>Dn(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),q&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",q,a.jsx("button",{type:"button",onClick:()=>X(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),V&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",a.jsx("button",{type:"button",onClick:()=>T(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),L!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[L?"Has attachment":"No attachment",a.jsx("button",{type:"button",onClick:()=>H(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),oe&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",oe,a.jsx("button",{type:"button",onClick:()=>J(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Ae!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Ae?"Read":"Unread",a.jsx("button",{type:"button",onClick:()=>ee(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Me!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Me?"Starred":"Not starred",a.jsx("button",{type:"button",onClick:()=>ze(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(ne||Q)&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",ne&&Q?`${ne}  ${Q}`:ne||Q,a.jsx("button",{type:"button",onClick:()=>{se(""),re("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{J(oe==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${oe==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[a.jsx(Qy,{className:"w-4 h-4 inline mr-1.5"}),oe==="archived"?"Show Active":"Show Archived"]}),oe==="archived"&&a.jsxs("span",{className:"text-sm text-slate-500",children:[Li.length," archived email(s)"]})]}),(P||Ba.size>0)&&a.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:df,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:Ba.size===Li.length?"Deselect all":"Select all"}),a.jsxs("span",{className:"text-sm text-indigo-600",children:[Ba.size," selected"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:ff,disabled:te||Ba.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),a.jsx("button",{type:"button",onClick:eg,disabled:te||Ba.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),a.jsx("button",{type:"button",onClick:Ap,disabled:te||Ba.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),a.jsx("button",{type:"button",onClick:U0,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[a.jsx("div",{className:"flex items-center gap-2",children:!P&&a.jsxs("button",{type:"button",onClick:U0,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[a.jsx(wo,{className:"w-4 h-4"}),"Select"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),a.jsxs("select",{value:xe,onChange:O=>ve(O.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"sender",children:"Sender"}),a.jsx("option",{value:"subject",children:"Subject"}),a.jsx("option",{value:"unread",children:"Unread"})]}),a.jsx("button",{type:"button",onClick:()=>Ee(Ne==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:Ne==="asc"?"Ascending":"Descending",children:Ne==="asc"?a.jsx(dH,{className:"w-4 h-4"}):a.jsx(fo,{className:"w-4 h-4"})})]})]}),Te&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{ue(!1),st("")},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:O=>O.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),a.jsx("input",{type:"text",placeholder:"Search name",value:Oe,onChange:O=>st(O.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>{ue(!1),st("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>{const O=Oe.trim()||"Saved search",Z={search:B||void 0,status:oe||void 0,from:q||void 0,subject:V||void 0,subjectOperator:R,hasAttachment:L,dateFrom:ne||void 0,dateTo:Q||void 0,labelId:cr||void 0,isRead:Ae,isStarred:Me},ie={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:O,filters:Z};Ue(Le=>[...Le,ie]),ue(!1),st("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),Ju&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Eo(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),a.jsx("button",{type:"button",onClick:async()=>{if(i){Qd(!0);try{const O=await E1e(i,30),Z=O==null?void 0:O.data;A0(Z)}catch(O){console.error("Failed to load accuracy stats:",O)}finally{Qd(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:kc,children:kc?"Loading...":"View accuracy stats"})]}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),da&&a.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",da.periodDays," days)"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),a.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[da.summary.accuracyRate,"%"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[da.summary.accepted," accepted / ",da.summary.accepted+da.summary.rejected+da.summary.changed," resolved"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),a.jsx("p",{className:"text-lg font-semibold text-slate-700",children:da.summary.total}),a.jsxs("p",{className:"text-xs text-slate-400",children:[da.summary.pending," pending"]})]})]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[da.bySource.domain.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[da.bySource.domain.accepted,"/",da.bySource.domain.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[da.bySource.keyword.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[da.bySource.keyword.accepted,"/",da.bySource.keyword.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[da.bySource.ai.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[da.bySource.ai.accepted,"/",da.bySource.ai.total]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[a.jsxs("select",{value:nl,onChange:O=>Vx(O.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"domain",children:"Sender domain"}),a.jsx("option",{value:"keyword",children:"Keyword"})]}),a.jsx("input",{type:"text",placeholder:nl==="domain"?"e.g. company.com":"e.g. invoice",value:al,onChange:O=>Oo(O.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),a.jsxs("select",{value:wc,onChange:O=>cu(O.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Select label"}),Zt.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx("button",{type:"button",disabled:!al.trim()||!wc||!i,onClick:async()=>{var O;if(!(!i||!al.trim()||!wc))try{await T1e({userId:i,type:nl,value:al.trim(),labelId:wc,labelName:(O=Zt.find(Le=>Le.id===wc))==null?void 0:O.name});const Z=await ZP(i),ie=(Z==null?void 0:Z.data)??Z??[];Zr(Array.isArray(ie)?ie:[]),Oo(""),cu(""),t("Rule added")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:Wr.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):Wr.map(O=>a.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[a.jsxs("span",{className:"text-slate-700",children:[a.jsx("span",{className:"font-medium",children:O.type==="domain"?"Domain":"Keyword"}),a.jsxs("span",{className:"text-slate-500",children:[' "',O.value,'"  ']}),a.jsx("span",{className:"text-indigo-600",children:O.labelName||O.labelId})]}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await O1e(O.id,i),Zr(Z=>Z.filter(ie=>ie.id!==O.id)),t("Rule removed")}catch(Z){r((Z==null?void 0:Z.message)||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:a.jsx(Yt,{className:"w-4 h-4"})})]},O.id))}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>Eo(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),rf&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>Za(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:a.jsx(Jy,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),a.jsx("button",{type:"button",onClick:()=>Za(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from domains listed below will not sync or appear in your shared inbox. To see emails from a domain again, remove it from this list."})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:Sc,onChange:O=>Zd(O.target.value),onKeyDown:O=>{O.key==="Enter"&&Sc.trim()&&Xr()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),a.jsx("button",{type:"button",onClick:Xr,disabled:!Sc.trim()||ef,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:ef?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add"]})})]}),C0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(pt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):Ls.length===0?a.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[a.jsx(Jy,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):a.jsx("div",{className:"space-y-2",children:Ls.filter(O=>O.domain&&String(O.domain).trim()).map(O=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Jy,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:O.domain})]}),a.jsx("button",{type:"button",onClick:()=>ts(O.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:a.jsx(Ar,{className:"w-4 h-4"})})]},O.id))})]}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>Za(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),Gx&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>du(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:O=>O.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:uu.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):uu.map((O,Z)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[a.jsx("span",{className:"flex-1 text-slate-700 truncate",children:O.labelName||O.labelId}),a.jsx("input",{type:"text",placeholder:"View name",value:O.viewName??"",onChange:ie=>{const Le=[...uu];Le[Z]={...Le[Z],viewName:ie.target.value},Fl(Le)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),a.jsx("button",{type:"button",onClick:()=>Fl(ie=>ie.filter((Le,ft)=>ft!==Z)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:a.jsx(Yt,{className:"w-4 h-4"})})]},O.labelId||Z))}),a.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:a.jsxs("select",{value:"",onChange:O=>{const Z=O.target.value;if(!Z||uu.some(Le=>Le.labelId===Z))return;const ie=Zt.find(Le=>Le.id===Z);Fl(Le=>[...Le,{labelId:Z,labelName:ie==null?void 0:ie.name,viewName:(ie==null?void 0:ie.name)??"",sortOrder:Le.length}]),O.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Add label to mapping"}),Zt.filter(O=>!uu.some(Z=>Z.labelId===O.id)).map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>du(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await I1e({userId:i,mappings:uu}),t("Folder mapping saved"),du(!1)}catch(O){r((O==null?void 0:O.message)||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),_r&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:_r}),a.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[a.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${b?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:Pt?a.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((O,Z)=>a.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),a.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},Z))}):Li.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(xa,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium",children:cr?"No emails with this label":"No emails yet"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:cr?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync from Gmail" to pull in your inbox (including older mail).'}),(ne||Q)&&!cr&&a.jsx("p",{className:"text-slate-500 text-xs mt-2 max-w-sm",children:"To see emails older than your date range, run Sync from Gmail first so full history is available."}),cr&&a.jsx("button",{onClick:()=>Dn(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!cr&&a.jsx("button",{onClick:ks,disabled:S,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:S?"Syncing":"Sync from Gmail"})]}):Gt==="threads"&&lg?a.jsxs("ul",{ref:Ll,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[lg.map(O=>{var ft,Ct;const Z=ir.has(O.threadId),ie=O.latestEmail,Le=O.emails.length>1;return a.jsxs("li",{children:[a.jsxs("div",{role:P?void 0:"button",tabIndex:P?void 0:0,onKeyDown:ct=>{!P&&(ct.key==="Enter"||ct.key===" ")&&(ct.preventDefault(),Le?Ip(O.threadId):fl(ie))},onClick:()=>!P&&(Le?Ip(O.threadId):fl(ie)),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${(b==null?void 0:b.id)===ie.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[P&&a.jsx("input",{type:"checkbox",checked:Ba.has(ie.id),onChange:()=>zo(ie.id),onClick:ct=>ct.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(ls,{src:void 0,alt:ie.sender||ie.email||"",fallbackText:ie.sender||ie.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Le&&a.jsx("div",{role:"button",tabIndex:0,onClick:ct=>{ct.stopPropagation(),Ip(O.threadId)},onKeyDown:ct=>{(ct.key==="Enter"||ct.key===" ")&&(ct.preventDefault(),ct.stopPropagation(),Ip(O.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:Z?a.jsx(fo,{className:"w-4 h-4 text-slate-500"}):a.jsx(Ea,{className:"w-4 h-4 text-slate-500"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${O.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:ie.subject||"(No subject)"}),ie.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Sd,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),((ft=ie.syncStatus)==null?void 0:ft.starredStatus)&&uf(ie.syncStatus.starredStatus)]}),ie.attachments&&ie.attachments.length>0&&a.jsx(Mp,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${ie.attachments.length} attachment(s)`}),ie.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ie.priority==="high"?"bg-red-100 text-red-700":ie.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:ie.priority==="high"?"High":ie.priority==="low"?"Low":"Medium"}),ie.threadStatus&&ie.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ie.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":ie.threadStatus==="pending"?"bg-amber-100 text-amber-700":ie.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:ie.threadStatus.charAt(0).toUpperCase()+ie.threadStatus.slice(1)}),ie.owner&&un.find(ct=>ct.id===ie.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:((Ct=un.find(ct=>ct.id===ie.owner))==null?void 0:Ct.name)||"Assigned"}),Le&&a.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:O.emails.length})]}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[ie.sender||ie.email,Le&&`  ${O.emails.length} messages`]}),(()=>{const ct=new Set;O.emails.forEach(zt=>{zt.participants&&Array.isArray(zt.participants)&&zt.participants.forEach(Ir=>ct.add(Ir.toLowerCase())),zt.to&&Array.isArray(zt.to)&&zt.to.forEach(Ir=>ct.add(Ir.toLowerCase())),zt.cc&&Array.isArray(zt.cc)&&zt.cc.forEach(Ir=>ct.add(Ir.toLowerCase()))});const Ut=Array.from(ct).slice(0,5);return Ut.length>0?a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[a.jsx("span",{className:"text-slate-500",children:"To: "}),Ut.map((zt,Ir)=>a.jsxs("span",{children:[zt.split("@")[0],Ir<Ut.length-1&&", "]},zt)),ct.size>5&&` +${ct.size-5} more`]}):null})(),(ie.accountEmail||ie.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[ie.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",ie.accountOwnerName]}),ie.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:ie.accountEmail})]}),ie.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:og(ie.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:ie.timestamp}),O.unreadCount>0&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!P&&a.jsx(Ea,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),Z&&Le&&a.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:O.emails.map((ct,Ut)=>{var Ir,Lr,Jr,wn,Bn,ra,ri,Ul,zl,fs;const zt=Nr.has(ct.id);return a.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[a.jsxs("button",{type:"button",onClick:()=>hf(ct.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${(b==null?void 0:b.id)===ct.id?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:Ms=>{Ms.stopPropagation(),hf(ct.id)},children:zt?a.jsx(fo,{className:"w-3 h-3 text-slate-500"}):a.jsx(Ea,{className:"w-3 h-3 text-slate-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`text-xs font-medium ${ct.isRead?"text-slate-600":"text-slate-900"}`,children:ct.sender||ct.email}),!ct.isRead&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(((Ir=ct.to)==null?void 0:Ir.length)>0||((Lr=ct.cc)==null?void 0:Lr.length)>0)&&a.jsxs("span",{className:"text-xs text-slate-400",children:[((Jr=ct.to)==null?void 0:Jr.length)>0&&`To: ${ct.to.slice(0,2).map(Ms=>Ms.split("@")[0]).join(", ")}${ct.to.length>2?"...":""}`,((wn=ct.cc)==null?void 0:wn.length)>0&&` CC: ${ct.cc.slice(0,2).map(Ms=>Ms.split("@")[0]).join(", ")}${ct.cc.length>2?"...":""}`]})]}),ct.lastMessage&&!zt&&a.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:og(ct.lastMessage,100)})]}),a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:ct.timestamp})]}),zt&&a.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[a.jsx("span",{className:"font-medium",children:ct.sender||ct.email}),a.jsx("span",{className:"text-slate-400",children:""}),a.jsx("span",{children:ct.timestamp})]}),a.jsx("button",{type:"button",onClick:()=>fl(ct),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),a.jsx("div",{className:"text-xs text-slate-700 mt-2",children:a.jsx(ZI,{content:ct.lastMessage||"No content"})}),(((Bn=ct.to)==null?void 0:Bn.length)>0||((ra=ct.cc)==null?void 0:ra.length)>0||((ri=ct.bcc)==null?void 0:ri.length)>0)&&a.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[((Ul=ct.to)==null?void 0:Ul.length)>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"To:"})," ",ct.to.join(", ")]}),((zl=ct.cc)==null?void 0:zl.length)>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"CC:"})," ",ct.cc.join(", ")]}),((fs=ct.bcc)==null?void 0:fs.length)>0&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"BCC:"})," ",ct.bcc.join(", ")]})]})]})]},ct.id)})})]},O.threadId)}),Xt&&a.jsx("li",{className:"px-4 py-4 pb-6",ref:Ys,children:ar?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(pt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("button",{type:"button",onClick:en,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`threads-${cr||"all"}`):a.jsxs("ul",{ref:Ll,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[Li.map(O=>{var Z,ie;return a.jsx("li",{children:a.jsxs("div",{role:P?void 0:"button",tabIndex:P?void 0:0,onKeyDown:Le=>{!P&&(Le.key==="Enter"||Le.key===" ")&&(Le.preventDefault(),fl(O))},onClick:()=>!P&&fl(O),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${(b==null?void 0:b.id)===O.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[P&&a.jsx("input",{type:"checkbox",checked:Ba.has(O.id),onChange:()=>zo(O.id),onClick:Le=>Le.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(ls,{src:void 0,alt:O.sender||O.email||"",fallbackText:O.sender||O.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${O.isRead?"text-slate-600":"text-slate-900"}`,children:O.subject||"(No subject)"}),O.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Sd,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),((Z=O.syncStatus)==null?void 0:Z.starredStatus)&&uf(O.syncStatus.starredStatus)]}),O.attachments&&O.attachments.length>0&&a.jsx(Mp,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${O.attachments.length} attachment(s)`}),O.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${O.priority==="high"?"bg-red-100 text-red-700":O.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:O.priority==="high"?"High":O.priority==="low"?"Low":"Medium"}),O.threadStatus&&O.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${O.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":O.threadStatus==="pending"?"bg-amber-100 text-amber-700":O.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:O.threadStatus.charAt(0).toUpperCase()+O.threadStatus.slice(1)}),O.owner&&un.find(Le=>Le.id===O.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:((ie=un.find(Le=>Le.id===O.owner))==null?void 0:ie.name)||"Assigned"}),O.labels&&O.labels.length>0&&a.jsxs(a.Fragment,{children:[O.labels.slice(0,3).map(Le=>{const ft=Zt.find(Ct=>Ct.id===Le);return ft?a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:ft.name,children:ft.name},Le):null}),O.labels.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",O.labels.length-3]})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:O.sender||O.email}),(O.accountEmail||O.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[O.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",O.accountOwnerName]}),O.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:O.accountEmail})]}),O.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:og(O.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:O.timestamp}),!O.isRead&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!P&&a.jsx(Ea,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},O.id)}),Xt&&a.jsx("li",{ref:Ys,className:"px-4 py-4 pb-6",children:ar?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(pt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("button",{type:"button",onClick:en,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`list-${cr||"all"}`)}),a.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:I?a.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:a.jsx(pt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):b?a.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[a.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:b.subject||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"break-words",children:b.sender||b.email}),a.jsx("span",{children:""}),a.jsx("span",{children:b.timestamp}),b.senderClassification&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${b.senderClassification==="internal"?"bg-slate-100 text-slate-700":b.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:b.senderClassification==="internal"?"Internal":b.senderClassification==="system"?"System":"Customer"})]}),(b.accountEmail||b.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[b.accountOwnerName&&a.jsxs("span",{children:["Synced via ",a.jsx("span",{className:"font-medium text-slate-600",children:b.accountOwnerName})]}),b.accountEmail&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:b.accountEmail})]})]})}),b.linkedRecords&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[b.linkedRecords.contactId&&(()=>{const O=ll.find(Z=>{var ie;return Z.id===((ie=b.linkedRecords)==null?void 0:ie.contactId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[a.jsx(vo,{className:"w-3 h-3"}),O.name]}):null})(),b.linkedRecords.companyId&&(()=>{const O=D0.find(Z=>{var ie;return Z.id===((ie=b.linkedRecords)==null?void 0:ie.companyId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[a.jsx(Ru,{className:"w-3 h-3"}),O.name]}):null})(),b.linkedRecords.dealId&&(()=>{const O=hp.find(Z=>{var ie;return Z.id===((ie=b.linkedRecords)==null?void 0:ie.dealId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[a.jsx(oc,{className:"w-3 h-3"}),O.title||O.name]}):null})(),b.linkedRecords.projectId&&(()=>{const O=L0.find(Z=>{var ie;return Z.id===((ie=b.linkedRecords)==null?void 0:ie.projectId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[a.jsx(Qf,{className:"w-3 h-3"}),O.title||O.name]}):null})(),b.linkedRecords.contractId&&(()=>{const O=F0.find(Z=>{var ie;return Z.id===((ie=b.linkedRecords)==null?void 0:ie.contractId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[a.jsx(pa,{className:"w-3 h-3"}),O.title]}):null})()]}),hy?a.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[a.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(pp.contacts.length>0||pp.companies.length>0)&&a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),pp.contacts.map(O=>a.jsxs("button",{onClick:()=>gi("contact",O.id),disabled:Pi,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[a.jsx(vo,{className:"w-3 h-3"}),O.name,a.jsx(Qr,{className:"w-3 h-3"})]},O.id)),pp.companies.map(O=>a.jsxs("button",{onClick:()=>gi("company",O.id),disabled:Pi,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[a.jsx(Ru,{className:"w-3 h-3"}),O.name,a.jsx(Qr,{className:"w-3 h-3"})]},O.id))]}),a.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",onClick:()=>{ed("contact"),mu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(_f,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),a.jsxs("button",{type:"button",onClick:()=>{ed("company"),mu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(_f,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),a.jsxs("button",{type:"button",onClick:()=>{ed("deal"),mu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(_f,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),a.jsxs("button",{type:"button",onClick:()=>{ed("project"),mu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(_f,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),a.jsxs("button",{type:"button",onClick:()=>{ed("contract"),mu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(_f,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),a.jsxs("button",{type:"button",onClick:()=>Yx(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(wo,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),b.labels&&b.labels.length>0&&a.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:b.labels.map(O=>{const Z=Zt.find(ie=>ie.id===O);return Z?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[200px]",children:Z.name}),a.jsx("button",{type:"button",onClick:()=>Sy(b.id,O),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:a.jsx(Yt,{className:"w-3 h-3"})})]},O):null})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",disabled:Kt||!i,onClick:async()=>{var O;if(!(!(b!=null&&b.id)||!i)){dr(!0),Pe([]);try{const Z=await C1e({emailId:b.id,userId:i,useAi:!0,availableLabels:Zt.map(Le=>({id:Le.id,name:Le.name}))}),ie=Z==null?void 0:Z.data;(O=ie==null?void 0:ie.suggestedLabels)!=null&&O.length&&(Pe(ie.suggestedLabels),$t(ie.suggestionId||null))}catch{Pe([])}finally{dr(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[Kt?a.jsx(pt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):a.jsx(oi,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),no.length>0&&a.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),no.map((O,Z)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:O.labelName}),a.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",O.source,")"]}),O.labelId&&a.jsx("button",{type:"button",onClick:()=>{B0(b.id,[O.labelId],[],!0,Ht||void 0),Pe(ie=>ie.filter((Le,ft)=>ft!==Z))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:a.jsx(Qr,{className:"w-3 h-3"})})]},O.labelId||Z))]}),a.jsx("div",{className:"mt-1",children:a.jsxs("button",{type:"button",onClick:()=>{pi(b.id),Ya(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[a.jsx(Qr,{className:"w-3 h-3"}),b.labels&&b.labels.length>0?"Manage Labels":"Add Labels"]})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(b.customTags||[]).map((O,Z)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[O,a.jsx("button",{type:"button",onClick:()=>{const ie=(b.customTags||[]).filter((Le,ft)=>ft!==Z);yb(b.id,{userId:i,customTags:ie}).then(()=>{N(Le=>Le?{...Le,customTags:ie}:null)}).catch(()=>{})},className:"hover:text-red-600",children:a.jsx(Yt,{className:"w-3 h-3"})})]},Z)),a.jsx("input",{type:"text",placeholder:"Add tag",value:Ja,onChange:O=>mi(O.target.value),onKeyDown:O=>{if(O.key==="Enter"&&Ja.trim()){const ie=[...b.customTags||[],Ja.trim()];yb(b.id,{userId:i,customTags:ie}).then(()=>{N(Le=>Le?{...Le,customTags:ie}:null),mi("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[x&&a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("select",{value:b.priority||"medium",onChange:O=>nd(b.id,{priority:O.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"})]}),a.jsxs("select",{value:b.threadStatus||"active",onChange:O=>nd(b.id,{threadStatus:O.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"archived",children:"Archived"})]}),c&&a.jsxs("select",{value:b.owner||"",onChange:O=>nd(b.id,{owner:O.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[a.jsx("option",{value:"",children:"Unassigned"}),un.map(O=>a.jsx("option",{value:O.id,children:O.name||O.email},O.id))]})]}),p&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Da(b.id,!b.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:b.isStarred?"Unstar":"Star",children:b.isStarred?a.jsx(Sd,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):a.jsx(RH,{className:"w-4 h-4"})}),((Tc=b.syncStatus)==null?void 0:Tc.starredStatus)&&a.jsx("div",{className:"flex-shrink-0",children:uf(b.syncStatus.starredStatus)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Ac(b.id,!b.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:b.isRead?"Mark unread":"Mark read"}),((Oc=b.syncStatus)==null?void 0:Oc.readStatus)&&a.jsx("div",{className:"flex-shrink-0",children:uf(b.syncStatus.readStatus)})]}),h&&a.jsx(a.Fragment,{children:b.threadStatus==="archived"?a.jsxs("button",{type:"button",onClick:()=>Ay(b.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[a.jsx(Qy,{className:"w-3 h-3"}),"Restore"]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>_y(b.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[a.jsx(Qy,{className:"w-3 h-3"}),"Archive"]}),b.threadStatus!=="resolved"&&x&&a.jsxs("button",{type:"button",onClick:()=>_p(b.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[a.jsx(tn,{className:"w-3 h-3"}),"Resolve"]})]})}),g&&a.jsxs("button",{type:"button",onClick:()=>Sp(b.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[a.jsx(Ar,{className:"w-3 h-3"}),"Delete"]}),f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>{var O,Z;Zu("reply"),Fs([b.email]),Js([]),Ns([]),Io((O=b.subject)!=null&&O.startsWith("Re:")?b.subject:`Re: ${b.subject||""}`),ds(""),es(b.accountEmail||((Z=We[0])==null?void 0:Z.email)||""),_c(!1),hu(!1),ol(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(Go,{className:"w-3 h-3"}),"Reply"]}),a.jsx("button",{type:"button",onClick:()=>{var ie,Le;Zu("replyAll");const O=(b.accountEmail||"").toLowerCase(),Z=[b.email,...b.to||[],...b.cc||[]].filter((ft,Ct,ct)=>{const Ut=ft.toLowerCase();return ct.findIndex(zt=>zt.toLowerCase()===Ut)===Ct&&Ut!==O});Fs([b.email]),Js(Z.filter(ft=>ft.toLowerCase()!==b.email.toLowerCase())),Ns([]),Io((ie=b.subject)!=null&&ie.startsWith("Re:")?b.subject:`Re: ${b.subject||""}`),ds(""),es(b.accountEmail||((Le=We[0])==null?void 0:Le.email)||""),_c(!0),hu(!1),ol(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),d&&a.jsx("button",{type:"button",onClick:()=>{var Z,ie,Le,ft;Zu("forward"),Fs([]),Js([]),Ns([]),Io((Z=b.subject)!=null&&Z.startsWith("Fwd:")||(ie=b.subject)!=null&&ie.startsWith("Fw:")?b.subject:`Fwd: ${b.subject||""}`);const O=b.body||b.lastMessage||"";ds(`

--- Forwarded message ---
From: ${b.sender||b.email}
Date: ${b.timestamp}
Subject: ${b.subject}
To: ${((Le=b.to)==null?void 0:Le.join(", "))||b.email}

${O}`),es(b.accountEmail||((ft=We[0])==null?void 0:ft.email)||""),_c(!1),hu(!1),ol(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),a.jsxs("button",{type:"button",onClick:()=>{if(!i||!b.id)return;const O=(b.body||b.lastMessage||"").replace(/<[^>]+>/g," "),Z=`${b.subject||""} ${O}`.toLowerCase(),ie=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Le;for(const Jr of ie){const wn=Z.match(Jr);if(wn){Le=wn[0];break}}const ft=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Ct;for(const Jr of ft){const wn=Z.match(Jr);if(wn){Ct=wn[0];break}}const ct=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Ut;for(const Jr of ct){const wn=Z.match(Jr);if(wn!=null&&wn[1]){Ut=wn[1].trim();break}}const zt=Array.isArray(b.to)?b.to:b.to?[b.to]:[],Ir=b.sender||b.from||b.email,Lr=[...new Set([...zt,Ir].filter(Boolean))];fn(b.id),ya(b.subject||null),Ds(b.body||b.lastMessage||null),Po(Lr.length?Lr:null),Vr({title:b.subject||"Meeting",date:Le,time:Ct,location:Ut,participants:Lr,description:(b.body||b.lastMessage||"").substring(0,500)}),ur(!0)},disabled:!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Open schedule meeting modal to review and confirm",children:[a.jsx($n,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),a.jsx("div",{className:"prose prose-slate max-w-none break-words",children:a.jsx(ZI,{content:b.body||b.lastMessage||"No content",highlightTerm:rt(B).searchText||void 0})})]}),(mp.length>0||xp.length>0||lf.length>0)&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),a.jsxs("div",{className:"space-y-3",children:[mp.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(wo,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",mp.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:mp.map(O=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:O.title}),O.status&&a.jsx("span",{className:"text-xs text-slate-500",children:O.status})]},O.id))})]}),xp.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Qf,{className:"w-4 h-4 text-amber-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",xp.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:xp.map(O=>a.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900",children:O.title||O.name}),O.status&&a.jsx("span",{className:"text-xs text-amber-600",children:O.status})]},O.id))})]}),lf.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(pa,{className:"w-4 h-4 text-red-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",lf.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:lf.map(O=>a.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:O.title}),O.status&&a.jsx("span",{className:"text-xs text-red-600",children:O.status})]},O.id))})]})]})]}),U.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx($n,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",U.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:U.map(O=>a.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:O.title}),a.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ha,{className:"w-3 h-3"}),a.jsxs("span",{children:[new Date(O.start).toLocaleString()," - ",new Date(O.end).toLocaleString()]})]}),O.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(IF,{className:"w-3 h-3"}),a.jsx("span",{children:O.location})]}),O.participants&&O.participants.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(vo,{className:"w-3 h-3"}),a.jsx("span",{children:O.participants.join(", ")})]})]})]}),O.htmlLink&&a.jsx("a",{href:O.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:a.jsx(zs,{className:"w-4 h-4"})})]})},O.id))})]}),b.attachments&&b.attachments.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Mp,{className:"w-4 h-4 text-slate-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",b.attachments.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:b.attachments.map((O,Z)=>{const ie=O.isDriveFile||O.driveFileId;return a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${ie?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[ie&&O.iconUrl?a.jsx("img",{src:O.iconUrl,alt:O.filename,className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${Cc(O.mimeType)?"bg-blue-50 text-blue-600":Di(O.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Cc(O.mimeType)?a.jsx(go,{className:"w-4 h-4"}):Di(O.mimeType)?a.jsx(pl,{className:"w-4 h-4"}):a.jsx(Mp,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.filename}),ie&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:ie?"Google Drive file":`${rg(O.size)}  ${O.mimeType}`})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[ie&&O.previewUrl&&a.jsx("a",{href:O.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(zs,{className:"w-4 h-4"})}),!ie&&(Cc(O.mimeType)||Di(O.mimeType))&&a.jsx("button",{onClick:()=>z0(b.id,O.attachmentId,O.filename,O.mimeType),disabled:ca[`${b.id}-${O.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:ca[`${b.id}-${O.attachmentId}-view`]?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx($u,{className:"w-4 h-4"})}),!ie&&a.jsx("button",{onClick:()=>tg(b.id,O.attachmentId,O.filename),disabled:ca[`${b.id}-${O.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:ca[`${b.id}-${O.attachmentId}-download`]?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Nh,{className:"w-4 h-4"})}),ie&&O.downloadUrl&&a.jsx("a",{href:O.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:a.jsx(Nh,{className:"w-4 h-4"})})]})]},O.attachmentId||Z)})})]}),b.attachments&&b.attachments.some(O=>{var Z,ie,Le,ft;return(O.isDriveFile||O.driveFileId)&&O.previewUrl&&(((Z=O.mimeType)==null?void 0:Z.includes("google-apps"))||((ie=O.mimeType)==null?void 0:ie.includes("document"))||((Le=O.mimeType)==null?void 0:Le.includes("spreadsheet"))||((ft=O.mimeType)==null?void 0:ft.includes("presentation")))})&&a.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(pl,{className:"w-4 h-4 text-blue-500"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),a.jsx("div",{className:"space-y-4",children:b.attachments.filter(O=>{var Z,ie,Le,ft;return(O.isDriveFile||O.driveFileId)&&O.previewUrl&&(((Z=O.mimeType)==null?void 0:Z.includes("google-apps"))||((ie=O.mimeType)==null?void 0:ie.includes("document"))||((Le=O.mimeType)==null?void 0:Le.includes("spreadsheet"))||((ft=O.mimeType)==null?void 0:ft.includes("presentation")))}).map((O,Z)=>{var Le;const ie=((Le=O.previewUrl)==null?void 0:Le.replace("/edit","/preview"))||O.previewUrl;return a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[O.iconUrl&&a.jsx("img",{src:O.iconUrl,alt:O.filename,className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:O.filename}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),O.previewUrl&&a.jsx("a",{href:O.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:a.jsx(zs,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:a.jsx("iframe",{src:ie,className:"absolute top-0 left-0 w-full h-full border-0",title:O.filename,allow:"fullscreen"})})]},O.attachmentId||Z)})})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(oi,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Je.length>0&&a.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),w(()=>Ec(),Z=>{})},disabled:He,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:He?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Uu,{className:"w-3 h-3"}),"Regenerate"]})}),!Re&&a.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),w(()=>Ec(),Z=>{})},disabled:He,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:He?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(oi,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),Je.length>1&&a.jsxs("div",{className:"mb-3 space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Je.map((O,Z)=>a.jsxs("button",{type:"button",onClick:()=>{ke(Z),Ye(y(O.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${Be===Z?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:O.style}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[O.confidence,"%"]})]}),a.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:O.description}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full ${O.confidence>=80?"bg-green-500":O.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${O.confidence}%`}})})]},Z))})]}),Re?a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[Je.length>1&&Be!==null&&a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[Je[Be].style," Variation"]}),a.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",Je[Be].description,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Je[Be].confidence,"%"]})]})]}),a.jsx("div",{className:"quill-wrapper",children:a.jsx(l2,{ref:O=>{ht.current=O,O&&(jt.current=O.getEditor())},theme:"snow",value:Re,onChange:O=>Ye(O),modules:ad,formats:Op,placeholder:"Edit your draft..."})}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{type:"button",onClick:Py,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(Go,{className:"w-3 h-3"}),"Copy to Clipboard"]}),a.jsxs("button",{type:"button",onClick:RN,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[a.jsx(Qr,{className:"w-3 h-3"}),"Save as Template"]}),a.jsx("button",{type:"button",onClick:()=>{Jt(!0),hl()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),a.jsx("button",{type:"button",onClick:()=>{Ye(null),Qe([]),ke(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),a.jsx("button",{type:"button",onClick:()=>{Jt(!0),hl()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",(b==null?void 0:b.id)&&Dt[b.id]&&Dt[b.id].length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:Dt[b.id].length})]}),l&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",style:{position:"relative"},children:[a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),a.jsx(l2,{ref:O=>{it.current=O,O&&(Ot.current=O.getEditor())},theme:"snow",value:Gr,onChange:MN,onBlur:()=>{setTimeout(()=>{ea||vr(null)},200)},modules:ad,formats:Op,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),ea&&vt.length>0&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:O=>{O.preventDefault()},children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Mh,{className:"w-3 h-3"}),"Mention User"]}),vt.map(O=>{var Z;return a.jsxs("button",{type:"button",onMouseDown:ie=>{ie.preventDefault(),ie.stopPropagation(),Pp(O)},onClick:ie=>{ie.preventDefault(),ie.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:((Z=O.name)==null?void 0:Z.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:O.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:O.email||""})]})]},O.id)})]})})]}),a.jsxs("div",{className:"relative",ref:Ft,children:[a.jsxs("button",{type:"button",onClick:()=>Vn(!Rn),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${gr.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lc,{className:`w-4 h-4 ${gr.length>0?"text-indigo-600":"text-slate-400"}`}),a.jsx("span",{className:`font-medium ${gr.length>0?"text-indigo-900":"text-slate-600"}`,children:gr.length>0?`Marked for ${gr.length} team member${gr.length>1?"s":""}`:"Mark for team member"})]}),gr.length>0&&a.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),Br([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:a.jsx(Yt,{className:"w-3 h-3 text-indigo-600"})})]}),Rn&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[a.jsx(lc,{className:"w-3 h-3"}),"Select Team Members"]}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:jn,onChange:O=>yr(O.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),un.filter(O=>{var Z,ie;return O.id!==i&&(jn===""||((Z=O.name)==null?void 0:Z.toLowerCase().includes(jn.toLowerCase()))||((ie=O.email)==null?void 0:ie.toLowerCase().includes(jn.toLowerCase())))}).map(O=>{var ie;const Z=gr.includes(O.id);return a.jsxs("button",{type:"button",onClick:()=>{Br(Z?Le=>Le.filter(ft=>ft!==O.id):Le=>[...Le,O.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${Z?"bg-indigo-50":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${Z?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:((ie=O.name)==null?void 0:ie.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:O.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:O.email||""})]}),Z&&a.jsx(tn,{className:"w-4 h-4 text-indigo-600"})]},O.id)})]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:qe?a.jsx(go,{className:"w-4 h-4"}):a.jsx(nu,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:qe?(le==null?void 0:le.name)||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:yt,type:"file",accept:"image/*",onChange:Tp,className:"hidden"})]}),a.jsx("button",{onClick:Oy,disabled:we||!Gr.trim()&&!le,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:we?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-4 h-4"}),"Send"]})})]}),qe&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:qe,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{mt(""),_e(null),yt.current&&(yt.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(Yt,{className:"w-4 h-4"})})]})]}),!l&&a.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:a.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:Dt[b==null?void 0:b.id]&&((H0=Dt[b.id])==null?void 0:H0.length)>0?Dt[b.id].map(O=>{var ie;const Z=Gl(o,"shared-inbox:delete-note")&&(JCe(o)||O.userId===i);return a.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(O.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((ie=O.userName)==null?void 0:ie.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:O.userName}),(O.markedFor||[]).length>0&&a.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[a.jsx(lc,{className:"w-2.5 h-2.5"}),"Marked"]})]}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(O.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(O.markedFor||[]).length>0&&a.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",un.filter(Le=>(O.markedFor||[]).includes(Le.id)).map(Le=>Le.name).join(", ")||"Unknown"]})]})]}),Z&&a.jsx("button",{onClick:()=>(b==null?void 0:b.id)&&ag(b.id,O.id),disabled:ae===O.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:ae===O.id?a.jsx(pt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ar,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),O.message&&a.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:O.message}}),O.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsxs("button",{type:"button",onClick:()=>mr({isOpen:!0,imageUrl:O.imageUrl,imageName:O.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[a.jsx(go,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),a.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:O.imageName||"View Attachment"})]})})]},O.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ui,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(xa,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Dr.isOpen&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>mr({isOpen:!1,imageUrl:"",imageName:void 0}),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>mr({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(Yt,{className:"w-6 h-6"})}),a.jsx("img",{src:Dr.imageUrl,alt:Dr.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:O=>O.stopPropagation()}),Dr.imageName&&a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:a.jsx("p",{className:"text-sm font-medium text-slate-900",children:Dr.imageName})})]})}),Is&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{la(!1),ga("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(oi,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),a.jsx("button",{onClick:()=>{la(!1),ga("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:Xa,onChange:O=>ga(O.target.value),onKeyDown:O=>{O.key==="Enter"&&(O.preventDefault(),ig())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[a.jsx("button",{onClick:()=>{la(!1),ga("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:ig,disabled:!Xa||!Xa.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),Bt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Jt(!1),children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(oi,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),a.jsx("button",{onClick:()=>Jt(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Tr.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(oi,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):a.jsx("div",{className:"space-y-3",children:Tr.map(O=>{var Z;return a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:ie=>{ie.preventDefault(),ie.stopPropagation(),b&&O.content&&(Ye(O.content),Jt(!1),t("Template loaded"))},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:O.name}),a.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[(Z=O.content)==null?void 0:Z.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(O.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:ie=>{ie.preventDefault(),ie.stopPropagation(),b&&O.content&&(Ye(O.content),Jt(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),a.jsx("button",{onClick:async ie=>{ie.preventDefault(),ie.stopPropagation(),yp(O.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:a.jsx(Ar,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},O.id)})})})]})}),Rl&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>yp(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(Cn,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>yp(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{const O=Rl;yp(null);try{await e1e(O,i),t("Template deleted"),hl()}catch(Z){const ie=(Z==null?void 0:Z.message)||"Failed to delete template";console.error("[INBOX] Error deleting template:",ie),r(ie)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),T0&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>dl(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(pl,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),a.jsx("button",{onClick:()=>dl(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:Zs,onChange:O=>P0(O.target.value),onKeyDown:O=>{O.key==="Enter"&&Cp(Zs)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),a.jsx("button",{onClick:()=>Cp(Zs),disabled:pu,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:pu?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),pu&&of.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):of.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(pl,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):a.jsx("div",{className:"space-y-2",children:of.map(O=>a.jsxs("button",{onClick:()=>FN(O),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[O.iconLink?a.jsx("img",{src:O.iconLink,alt:O.name,className:"w-8 h-8"}):a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(pl,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[O.size?rg(O.size):"Drive file","  ",O.mimeType||"Unknown type"]})]}),a.jsx("button",{onClick:Z=>{Z.stopPropagation(),O.webViewLink&&window.open(O.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:a.jsx(zs,{className:"w-4 h-4 text-slate-400"})})]},O.id))}),I0&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsx("button",{onClick:()=>Cp(Zs,I0),disabled:pu,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:pu?"Loading...":"Load More"})})]})]})})]}),vy&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>io(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:a.jsx(Cn,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>io(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{io(!1),ol(!1),Fs([]),Js([]),Ns([]),Io(""),ds(""),Ti(""),Fo(""),Mo("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),ao&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{io(!0)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Pa==="compose"?"Compose Email":Pa==="reply"?"Reply":Pa==="replyAll"?"Reply All":"Forward"}),a.jsx("button",{onClick:()=>{io(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[We.length>1&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),a.jsx("select",{value:ta,onChange:O=>es(O.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:We.filter((O,Z,ie)=>ie.findIndex(Le=>Le.email===O.email&&Le.userId===O.userId)===Z).map((O,Z)=>a.jsxs("option",{value:O.email,children:[O.email," ",O.isCurrentUser?"(You)":`(${O.ownerName})`]},`${O.email}-${O.userId}-${Z}`))})]}),We.length===0&&a.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No Gmail accounts connected. Please connect a Gmail account to send emails."}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[Kr.map((O,Z)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[O,a.jsx("button",{type:"button",onClick:()=>Fs(Kr.filter((ie,Le)=>Le!==Z)),className:"hover:text-indigo-900",children:a.jsx(Yt,{className:"w-3 h-3"})})]},Z)),a.jsx("input",{type:"text",value:Lo,onChange:O=>{const Z=O.target.value;if(Ti(Z),Z.length>0){const ie=ll.filter(Le=>{var ft,Ct;return((ft=Le.email)==null?void 0:ft.toLowerCase().includes(Z.toLowerCase()))||((Ct=Le.name)==null?void 0:Ct.toLowerCase().includes(Z.toLowerCase()))}).slice(0,5);E0(ie),js(!0)}else js(!1)},onKeyDown:O=>{if(O.key==="Enter"&&Lo.trim()){O.preventDefault();const Z=Lo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)&&!Kr.includes(Z)&&(Fs([...Kr,Z]),Ti(""),js(!1))}else if(O.key==="Backspace"&&Lo===""&&Kr.length>0)Fs(Kr.slice(0,-1));else if(O.key==="ArrowDown"&&xi)O.preventDefault(),Gn(Z=>Math.min(Z+1,Ro.length-1));else if(O.key==="ArrowUp"&&xi)O.preventDefault(),Gn(Z=>Math.max(Z-1,0));else if(O.key==="Enter"&&xi&&Ro[Un]){O.preventDefault();const Z=Ro[Un];Z.email&&!Kr.includes(Z.email)&&(Fs([...Kr,Z.email]),Ti(""),js(!1))}else if(O.key===","||O.key===";"){O.preventDefault();const Z=Lo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)&&!Kr.includes(Z)&&(Fs([...Kr,Z]),Ti(""),js(!1))}},onBlur:()=>{const O=Lo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)&&!Kr.includes(O)&&(Fs([...Kr,O]),Ti(""),js(!1))},placeholder:Kr.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),xi&&Ro.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Ro.map((O,Z)=>a.jsxs("button",{type:"button",onClick:()=>{O.email&&!Kr.includes(O.email)&&(Fs([...Kr,O.email]),Ti(""),js(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${Z===Un?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"font-medium text-slate-900",children:O.name}),a.jsx("div",{className:"text-xs text-slate-500",children:O.email})]},O.id))})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),a.jsxs("button",{type:"button",onClick:()=>_c(!Ei),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Ei?"Hide":"Show"," Cc"]})]}),Ei&&a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[ba.map((O,Z)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[O,a.jsx("button",{type:"button",onClick:()=>Js(ba.filter((ie,Le)=>Le!==Z)),className:"hover:text-slate-900",children:a.jsx(Yt,{className:"w-3 h-3"})})]},Z)),a.jsx("input",{type:"text",value:so,onChange:O=>{Fo(O.target.value)},onKeyDown:O=>{if(O.key==="Enter"&&so.trim()){O.preventDefault();const Z=so.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)&&!ba.includes(Z)&&(Js([...ba,Z]),Fo(""))}else if(O.key==="Backspace"&&so===""&&ba.length>0)Js(ba.slice(0,-1));else if(O.key===","||O.key===";"){O.preventDefault();const Z=so.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)&&!ba.includes(Z)&&(Js([...ba,Z]),Fo(""))}},onBlur:()=>{const O=so.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)&&!ba.includes(O)&&(Js([...ba,O]),Fo(""))},placeholder:ba.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),a.jsxs("button",{type:"button",onClick:()=>hu(!sf),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[sf?"Hide":"Show"," Bcc"]})]}),sf&&a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[Ln.map((O,Z)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[O,a.jsx("button",{type:"button",onClick:()=>Ns(Ln.filter((ie,Le)=>Le!==Z)),className:"hover:text-slate-900",children:a.jsx(Yt,{className:"w-3 h-3"})})]},Z)),a.jsx("input",{type:"text",value:cl,onChange:O=>{Mo(O.target.value)},onKeyDown:O=>{if(O.key==="Enter"&&cl.trim()){O.preventDefault();const Z=cl.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)&&!Ln.includes(Z)&&(Ns([...Ln,Z]),Mo(""))}else if(O.key==="Backspace"&&cl===""&&Ln.length>0)Ns(Ln.slice(0,-1));else if(O.key===","||O.key===";"){O.preventDefault();const Z=cl.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)&&!Ln.includes(Z)&&(Ns([...Ln,Z]),Mo(""))}},onBlur:()=>{const O=cl.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)&&!Ln.includes(O)&&(Ns([...Ln,O]),Mo(""))},placeholder:Ln.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Ia,onChange:O=>Io(O.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),Tr.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:$o||"",onChange:O=>{const Z=O.target.value||null;if(ON(Z),Z){const ie=Tr.find(Le=>Le.id===Z);ie!=null&&ie.content&&(ds(ie.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No template"}),Tr.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx("button",{type:"button",onClick:()=>Jt(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:a.jsx(oi,{className:"w-4 h-4"})})]})]}),Pa==="compose"&&a.jsxs("div",{children:[a.jsxs("button",{type:"button",onClick:()=>{yy(!bp),!bp&&!gu&&Ia&&Kr.length>0&&sg()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[a.jsx(oi,{className:"w-4 h-4"}),bp?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),bp&&a.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:by?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):gu?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),a.jsx("button",{type:"button",onClick:sg,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),a.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:gu}})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{ds(gu||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),a.jsx("button",{type:"button",onClick:()=>{const O=(gu==null?void 0:gu.replace(/<[^>]+>/g,""))||"";navigator.clipboard.writeText(O),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):a.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Do.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),a.jsxs("select",{value:((Lp=Do.find(O=>O.content===Ci))==null?void 0:Lp.id)||"",onChange:O=>{const Z=Do.find(ie=>ie.id===O.target.value);Ml((Z==null?void 0:Z.content)||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No signature"}),Do.map(O=>a.jsxs("option",{value:O.id,children:[O.name," ",O.isDefault?"(Default)":""]},O.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),a.jsx(l2,{ref:O=>{tt.current=O},theme:"snow",value:Ma,onChange:O=>{ds(O)},modules:ad,formats:Op,placeholder:"Compose your message..."})]}),Ci&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:Ci}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:a.jsx(Mp,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),a.jsx("input",{ref:ul,type:"file",multiple:!0,onChange:LN,className:"hidden"})]}),a.jsxs("button",{type:"button",onClick:()=>{dl(!0),P0(""),Cp()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(pl,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),hn.length>0&&a.jsx("div",{className:"mt-3 space-y-2",children:hn.map(O=>a.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${O.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[O.isDriveFile&&O.driveIconLink?a.jsx("img",{src:O.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${Cc(O.file.type)?"bg-blue-50 text-blue-600":Di(O.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Cc(O.file.type)?a.jsx(go,{className:"w-4 h-4"}):Di(O.file.type)?a.jsx(pl,{className:"w-4 h-4"}):a.jsx(Mp,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.file.name}),O.isDriveFile&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:O.isDriveFile?"Google Drive file":`${rg(O.file.size)}  ${O.file.type}`}),td[O.id]!==void 0&&td[O.id]<100&&a.jsxs("div",{className:"flex-1 max-w-[100px]",children:[a.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${td[O.id]}%`}})}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[td[O.id],"%"]})]})]})]}),O.isDriveFile&&O.driveWebViewLink&&a.jsx("a",{href:O.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(zs,{className:"w-4 h-4"})}),O.preview&&!O.isDriveFile&&a.jsx("button",{type:"button",onClick:()=>{nr({isOpen:!0,emailId:"",attachmentId:O.id,filename:O.file.name,mimeType:O.file.type,url:O.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:a.jsx($u,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>Cy(O.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:a.jsx(Yt,{className:"w-4 h-4"})})]},O.id))})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{io(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),Pa==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{kp(!0),await Ey()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[a.jsx(pl,{className:"w-4 h-4"}),"Load Drafts"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Ep,disabled:cf||!Ia||!Ma,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:cf?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(pl,{className:"w-4 h-4"}),"Save Draft"]})}),Pa==="compose"&&a.jsxs("button",{type:"button",onClick:()=>{if(!Kr.length||!Ia||!Ma){r("Please fill in all required fields (To, Subject, Message)");return}M0(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[a.jsx(Ha,{className:"w-4 h-4"}),"Schedule"]}),Pa==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{if(!i||Kr.length===0||!Ia||!Ma){r("Please fill in all required fields (To, Subject, Message)");return}const O=Ma.replace(/<[^>]+>/g," ").toLowerCase(),Z=`${Ia} ${O}`,ie=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Le;for(const zt of ie){const Ir=Z.match(zt);if(Ir){Le=Ir[0];break}}const ft=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Ct;for(const zt of ft){const Ir=Z.match(zt);if(Ir){Ct=Ir[0];break}}const ct=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Ut;for(const zt of ct){const Ir=Z.match(zt);if(Ir&&Ir[1]){Ut=Ir[1].trim();break}}Vr({title:Ia,date:Le,time:Ct,location:Ut,participants:Kr,description:Ma.substring(0,500)}),fn(null),ur(!0)},disabled:ot||!i||Kr.length===0||!Ia,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[ot?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx($n,{className:"w-4 h-4"}),"Schedule Meeting"]}),u?a.jsx("button",{type:"button",onClick:async()=>{var O,Z,ie,Le;if(!i||Kr.length===0||!Ia||!Ma){r("Please fill in all required fields (To, Subject, Message)");return}Qs(!0);try{let ft=Ma;Ci&&(ft+=`<br><br>${Ci}`);const Ct=await Promise.all(hn.filter(Ut=>!Ut.isDriveFile).map(async Ut=>new Promise((zt,Ir)=>{const Lr=new FileReader;Lr.onload=()=>{const Jr=Lr.result.split(",")[1];zt({filename:Ut.file.name,content:Jr,type:Ut.file.type})},Lr.onerror=Ir,Lr.readAsDataURL(Ut.file)}))),ct=hn.filter(Ut=>Ut.isDriveFile&&Ut.driveWebViewLink);if(ct.length>0&&Pa==="compose"){let Ut='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';ct.forEach(zt=>{Ut+=`<li style="margin-bottom: 4px;"><a href="${zt.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${zt.file.name}</a></li>`}),Ut+="</ul></div>",ft+=Ut}if(Pa==="reply"||Pa==="replyAll")await r1e({emailId:(b==null?void 0:b.id)||"",userId:i,accountEmail:ta||((O=We[0])==null?void 0:O.email),body:ft,replyAll:Pa==="replyAll",attachments:Ct.length>0?Ct:void 0}),t("Reply sent successfully");else if(Pa==="forward")await n1e({emailId:(b==null?void 0:b.id)||"",userId:i,accountEmail:ta||((Z=We[0])==null?void 0:Z.email),to:Kr,cc:ba.length>0?ba:void 0,bcc:Ln.length>0?Ln:void 0,body:ft,attachments:Ct.length>0?Ct:void 0}),t("Email forwarded successfully");else{const Ut=await t1e({userId:i,accountEmail:ta||((ie=We[0])==null?void 0:ie.email),to:Kr,cc:ba.length>0?ba:void 0,bcc:Ln.length>0?Ln:void 0,subject:Ia,body:ft,attachments:Ct.length>0?Ct:void 0}),zt=(Le=Ut==null?void 0:Ut.data)==null?void 0:Le.id;if(zt){const Ir=hn.filter(Lr=>Lr.isDriveFile&&Lr.driveFileId);for(const Lr of Ir)try{await e8({userId:i,emailId:zt,fileId:Lr.driveFileId,fileName:Lr.file.name,fileMimeType:Lr.file.type,webViewLink:Lr.driveWebViewLink,webContentLink:void 0,iconLink:Lr.driveIconLink})}catch(Jr){console.error("Failed to attach Drive file:",Jr)}}t("Email sent successfully")}hn.forEach(Ut=>{Ut.preview&&URL.revokeObjectURL(Ut.preview)}),ol(!1),Fs([]),Js([]),Ns([]),Io(""),ds(""),fa([]),Ti(""),Fo(""),Mo(""),dl(!1),await nn()}catch(ft){const Ct=v(ft,"Failed to send email");r(Ct)}finally{Qs(!1)}},disabled:af||Kr.length===0||!Ia||!Ma||We.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:af?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-4 h-4"}),Pa==="reply"||Pa==="replyAll"?"Send Reply":Pa==="forward"?"Forward":"Send"]})}):a.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[a.jsx(Go,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),(hr==null?void 0:hr.isOpen)&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[(Cc(hr.mimeType)||Di(hr.mimeType))&&a.jsx(go,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:hr.filename})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{hr.url&&window.URL.revokeObjectURL(hr.url),nr(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:a.jsx(Yt,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>{b&&hr.url&&tg(hr.emailId,hr.attachmentId,hr.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[a.jsx(Nh,{className:"w-4 h-4"}),"Download"]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:hr.url?Cc(hr.mimeType)?a.jsx("img",{src:hr.url,alt:hr.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):Di(hr.mimeType)?a.jsx("iframe",{src:hr.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:hr.filename}):a.jsxs("div",{className:"text-center text-slate-500",children:[a.jsx(pl,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),a.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),a.jsx("button",{onClick:()=>{b&&tg(hr.emailId,hr.attachmentId,hr.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),ua&&dn&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Ya(!1),pi(null)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),a.jsx("button",{onClick:()=>{Ya(!1),pi(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[We.length>0&&a.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:a.jsxs("button",{onClick:()=>Nc(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Create New Label"]})}),xr?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[a.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):Zt.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>wa(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(Uu,{className:"w-4 h-4"}),"Retry"]}),We.length>0&&a.jsxs("button",{onClick:()=>Nc(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):a.jsx("div",{className:"space-y-2",children:Zt.map(O=>{var Le;const Z=kn.find(ft=>ft.id===dn),ie=((Le=Z==null?void 0:Z.labels)==null?void 0:Le.includes(O.id))||!1;return a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:ie,onChange:ft=>{dn&&(ft.target.checked?B0(dn,[O.id],[]):B0(dn,[],[O.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:O.name}),O.type==="system"&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},O.id)})})]})]})}),S0&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Nc(!1),jc("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),a.jsx("button",{onClick:()=>{Nc(!1),jc(""),fu("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),a.jsx("input",{type:"text",value:sl,onChange:O=>jc(O.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:O=>{if(O.key==="Enter"&&sl.trim()&&(Jd||We.length>0)){const Z=Jd||We[0].email;$0(sl.trim(),Z)}},autoFocus:!0})]}),We.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),a.jsx("select",{value:Jd||We[0].email,onChange:O=>fu(O.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:We.map(O=>a.jsx("option",{value:O.email,children:O.email},O.email))})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{Nc(!1),jc(""),fu("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(sl.trim()&&We.length>0){const O=Jd||We[0].email;$0(sl.trim(),O)}},disabled:!sl.trim()||Yd||We.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Yd?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Rt&&i&&a.jsx(XCe,{isOpen:Rt,onClose:()=>{ur(!1),Vr(null),fn(null),ya(null),Ds(null),Po(null)},userId:i,emailId:$r||void 0,emailSubject:va??Ia,emailBody:Qa??Ma,participants:ws??Kr,extractedDetails:Cr||void 0,onCreateSuccess:()=>{$r&&(b==null?void 0:b.id)===$r&&z3(i,$r).then(O=>{O.success&&O.data&&fe(O.data)}).catch(()=>{})}}),EN&&xu&&b&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",xu.charAt(0).toUpperCase()+xu.slice(1)]}),a.jsx("button",{onClick:()=>{mu(!1),ed(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[xu==="contact"&&a.jsx("div",{className:"space-y-2",children:ll.map(O=>a.jsxs("button",{onClick:()=>gi("contact",O.id),disabled:Pi,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.name}),a.jsx("p",{className:"text-xs text-slate-500",children:O.email})]},O.id))}),xu==="company"&&a.jsx("div",{className:"space-y-2",children:D0.map(O=>a.jsxs("button",{onClick:()=>gi("company",O.id),disabled:Pi,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.name}),O.industry&&a.jsx("p",{className:"text-xs text-slate-500",children:O.industry})]},O.id))}),xu==="deal"&&a.jsx("div",{className:"space-y-2",children:hp.map(O=>a.jsxs("button",{onClick:()=>gi("deal",O.id),disabled:Pi,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.title||O.name}),O.stage&&a.jsx("p",{className:"text-xs text-slate-500",children:O.stage})]},O.id))}),xu==="project"&&a.jsx("div",{className:"space-y-2",children:L0.map(O=>a.jsxs("button",{onClick:()=>gi("project",O.id),disabled:Pi,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.title||O.name}),O.status&&a.jsx("p",{className:"text-xs text-slate-500",children:O.status})]},O.id))}),xu==="contract"&&a.jsx("div",{className:"space-y-2",children:F0.map(O=>a.jsxs("button",{onClick:()=>gi("contract",O.id),disabled:Pi,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.title}),O.status&&a.jsx("p",{className:"text-xs text-slate-500",children:O.status})]},O.id))})]})]})}),TN&&b&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),a.jsx("button",{onClick:()=>Yx(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",defaultValue:b.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[a.jsx("option",{value:"",children:"None"}),L0.map(O=>a.jsx("option",{value:O.id,children:O.title||O.name},O.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[a.jsx("option",{value:"",children:"Unassigned"}),un.map(O=>a.jsx("option",{value:O.id,children:O.name||O.email},O.id))]})]}),a.jsx("button",{onClick:()=>{const O=document.getElementById("task-title"),Z=document.getElementById("task-priority"),ie=document.getElementById("task-project"),Le=document.getElementById("task-assignee");rd({title:O==null?void 0:O.value,priority:Z==null?void 0:Z.value,projectId:(ie==null?void 0:ie.value)||void 0,assigneeId:(Le==null?void 0:Le.value)||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),PN&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Ha,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),a.jsx("button",{onClick:()=>{M0(!1),jp("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",value:Qx,onChange:O=>jp(O.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),a.jsxs("select",{value:Ny,onChange:O=>IN(O.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),a.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),a.jsx("option",{value:"UTC",children:"UTC"}),a.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[a.jsx("button",{onClick:()=>{M0(!1),jp("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{var O;if(!Qx){r("Please select a date and time");return}if(!i||Kr.length===0||!Ia||!Ma){r("Please fill in all required fields");return}try{const Z=await Promise.all(hn.filter(Le=>!Le.isDriveFile).map(async Le=>new Promise((ft,Ct)=>{const ct=new FileReader;ct.onload=()=>{const Ut=ct.result.split(",")[1];ft({filename:Le.file.name,content:Ut,type:Le.file.type})},ct.onerror=Ct,ct.readAsDataURL(Le.file)})));let ie=Ma;Ci&&(ie+=`<br><br>${Ci}`),await u1e({userId:i,accountEmail:ta||((O=We[0])==null?void 0:O.email),to:Kr,cc:ba.length>0?ba:void 0,bcc:Ln.length>0?Ln:void 0,subject:Ia,body:ie,scheduledDateTime:Qx,timezone:Ny,attachments:Z.length>0?Z:void 0}),t("Email scheduled successfully"),M0(!1),ol(!1),Fs([]),Js([]),Ns([]),Io(""),ds(""),fa([]),jp("")}catch(Z){const ie=v(Z,"Failed to schedule email");r(ie)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),DN&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(pl,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),a.jsx("button",{onClick:()=>{kp(!1),Zx([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:ky?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(pt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):jy.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(pl,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):a.jsx("div",{className:"space-y-3",children:jy.map(O=>{var Z,ie,Le,ft,Ct,ct,Ut;return a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{var zt,Ir,Lr,Jr,wn;if((zt=O.payload)!=null&&zt.headers){const Bn=O.payload.headers,ra=Bn.find(fs=>fs.name==="To"),ri=Bn.find(fs=>fs.name==="Cc"),Ul=Bn.find(fs=>fs.name==="Bcc"),zl=Bn.find(fs=>fs.name==="Subject");ra!=null&&ra.value&&Fs(ra.value.split(",").map(fs=>fs.trim())),ri!=null&&ri.value&&Js(ri.value.split(",").map(fs=>fs.trim())),Ul!=null&&Ul.value&&Ns(Ul.value.split(",").map(fs=>fs.trim())),zl!=null&&zl.value&&Io(zl.value)}if((Lr=(Ir=O.payload)==null?void 0:Ir.body)!=null&&Lr.data)try{const Bn=atob(O.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));ds(Bn)}catch(Bn){console.error("Failed to decode draft body:",Bn),r("Failed to decode draft body")}else if((Jr=O.payload)!=null&&Jr.parts){const Bn=O.payload.parts.find(ra=>ra.mimeType==="text/html");if((wn=Bn==null?void 0:Bn.body)!=null&&wn.data)try{const ra=atob(Bn.body.data.replace(/-/g,"+").replace(/_/g,"/"));ds(ra)}catch(ra){console.error("Failed to decode draft body:",ra),r("Failed to decode draft body")}}kp(!1),t("Draft loaded")},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:((Le=(ie=(Z=O.payload)==null?void 0:Z.headers)==null?void 0:ie.find(zt=>zt.name==="Subject"))==null?void 0:Le.value)||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",((ct=(Ct=(ft=O.payload)==null?void 0:ft.headers)==null?void 0:Ct.find(zt=>zt.name==="To"))==null?void 0:ct.value)||"No recipients"]}),a.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",(Ut=O.message)!=null&&Ut.internalDate?new Date(parseInt(O.message.internalDate)).toLocaleString():"Unknown date"]})]}),a.jsx("button",{onClick:zt=>{var Ir,Lr,Jr,wn,Bn;if(zt.stopPropagation(),(Ir=O.payload)!=null&&Ir.headers){const ra=O.payload.headers,ri=ra.find(Ms=>Ms.name==="To"),Ul=ra.find(Ms=>Ms.name==="Cc"),zl=ra.find(Ms=>Ms.name==="Bcc"),fs=ra.find(Ms=>Ms.name==="Subject");ri!=null&&ri.value&&Fs(ri.value.split(",").map(Ms=>Ms.trim())),Ul!=null&&Ul.value&&Js(Ul.value.split(",").map(Ms=>Ms.trim())),zl!=null&&zl.value&&Ns(zl.value.split(",").map(Ms=>Ms.trim())),fs!=null&&fs.value&&Io(fs.value)}if((Jr=(Lr=O.payload)==null?void 0:Lr.body)!=null&&Jr.data)try{const ra=atob(O.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));ds(ra)}catch(ra){console.error("Failed to decode draft body:",ra),r("Failed to decode draft body")}else if((wn=O.payload)!=null&&wn.parts){const ra=O.payload.parts.find(ri=>ri.mimeType==="text/html");if((Bn=ra==null?void 0:ra.body)!=null&&Bn.data)try{const ri=atob(ra.body.data.replace(/-/g,"+").replace(/_/g,"/"));ds(ri)}catch(ri){console.error("Failed to decode draft body:",ri),r("Failed to decode draft body")}}kp(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},O.id)})})})]})}),Ve&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{xt(!1),he("")},children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:a.jsx(tn,{className:"w-5 h-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[We.length," account",We.length!==1?"s":""," connected"]})]})]}),a.jsx("button",{onClick:()=>{xt(!1),he("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:Tt,onChange:O=>he(O.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const O=new Set(Et.map(ie=>ie.accountEmail.toLowerCase())),Z=We.filter((ie,Le,ft)=>ft.findIndex(Ct=>Ct.email===ie.email&&Ct.userId===ie.userId)===Le).filter(ie=>{if(!Tt.trim())return!0;const Le=Tt.toLowerCase();return ie.email.toLowerCase().includes(Le)||ie.ownerName.toLowerCase().includes(Le)});return Z.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[a.jsx(Zf,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium text-sm",children:Tt?"No accounts found matching your search":"No accounts connected"}),Tt&&a.jsx("button",{onClick:()=>he(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):a.jsx("div",{className:"space-y-2",children:Z.map((ie,Le)=>{const ft=O.has(ie.email.toLowerCase()),Ct=Et.find(ct=>ct.accountEmail.toLowerCase()===ie.email.toLowerCase());return a.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${ie.isCurrentUser?"border-indigo-300 bg-indigo-50/30":ft?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${ft?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:ie.email.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:ie.email}),ie.isCurrentUser&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),ft&&a.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:ie.ownerName==="Unknown User"?a.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(ie.connectedAt).toLocaleDateString()]}):a.jsxs(a.Fragment,{children:[ie.ownerName,"  Connected ",new Date(ie.connectedAt).toLocaleDateString(),!ie.hasToken&&ie.ownerName!=="Unknown User"&&a.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),a.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[ft?a.jsx("button",{onClick:()=>Ct&&lo(Ct.id,ie.email),disabled:gt===ie.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:gt===ie.email?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Unfiltering..."})]}):a.jsxs(a.Fragment,{children:[a.jsx($u,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Show"})]})}):a.jsx("button",{onClick:()=>oo(ie.email),disabled:gt===ie.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:gt===ie.email?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Hiding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(pH,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Hide"})]})}),ie.isCurrentUser&&ie.hasToken!==!1&&a.jsx("button",{onClick:()=>Ii(ie.email),disabled:Ge===ie.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:Ge===ie.email?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Disconnecting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(PF,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Remove"})]})}),ie.isCurrentUser&&ie.hasToken===!1&&a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${ie.email}-${ie.userId}-${Le}`)})})})()}),a.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:a.jsxs("button",{onClick:()=>{xt(!1),$a()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[a.jsx(Qy,{className:"w-14 h-14 text-slate-300 mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},ZCe=()=>{const{showSuccess:e,showError:t}=Wn(),[r,n]=D.useState([]),[s,i]=D.useState(!0),[o,l]=D.useState(!1),[c,u]=D.useState({name:"",trigger:"",action:"",description:""}),[f,d]=D.useState(!1),[p,h]=D.useState(null),[g,x]=D.useState(null),[m,v]=D.useState(null),[y,w]=D.useState(null);D.useEffect(()=>{(async()=>{i(!0);try{const E=JSON.parse(localStorage.getItem("user_data")||"{}").id,I=await qP(E),A=(I==null?void 0:I.data)||I||[];n(Array.isArray(A)?A:[])}catch(E){console.error("[AUTOMATIONS] Failed to fetch automations:",E),t(E.message||"Failed to load automations"),n([])}finally{i(!1)}})()},[]),D.useEffect(()=>{const _=async()=>{const E=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const I=await qP(E),A=(I==null?void 0:I.data)||I||[];n(Array.isArray(A)?A:[])}catch(I){console.error("Failed to refresh automations:",I)}};return window.addEventListener("refresh-automations",_),()=>window.removeEventListener("refresh-automations",_)},[]);const b=async _=>{h(_);try{await Kge(_);const E=r.find(I=>I.id===_);n(I=>I.map(A=>A.id===_?{...A,active:!A.active}:A)),e(`Automation "${E==null?void 0:E.name}" ${E!=null&&E.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(E){console.error("Failed to toggle automation:",E),t(E.message||"Failed to toggle automation")}finally{h(null)}},N=_=>{w(_),v(_.id)},S=async()=>{if(y){x(y.id);try{await Xge(y.id),n(_=>_.filter(E=>E.id!==y.id)),v(null),w(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(_){console.error("Failed to delete automation:",_),t(_.message||"Failed to delete automation")}finally{x(null)}}},j=async _=>{_.preventDefault(),d(!0);try{const E=JSON.parse(localStorage.getItem("user_data")||"{}").id;await Gge({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:E||void 0}),d(!1),l(!1),u({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(E){console.error("Failed to create automation:",E),t(E.message||"Failed to create automation"),d(!1)}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(Qr,{className:"w-4 h-4"})," Create Recipe"]})]}),s?a.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[a.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(M2,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(_=>a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{onClick:()=>b(_.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${_.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:a.jsx(M2,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:_.name}),_.active&&a.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[a.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),a.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:_.description})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),a.jsx("p",{className:"text-xs font-bold text-slate-700",children:_.trigger})]}),a.jsx(wi,{className:"w-4 h-4 text-slate-300"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),a.jsx("p",{className:"text-xs font-bold text-indigo-600",children:_.action})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>b(_.id),disabled:p===_.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${_.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:_.active?"Pause Automation":"Activate Automation",children:p===_.id?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):_.active?a.jsx(PH,{className:"w-5 h-5 fill-indigo-600"}):a.jsx(IH,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>N(_),disabled:g===_.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:g===_.id?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsx(Ar,{className:"w-5 h-5"})})]})]})]},_.id)),a.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:a.jsx(oi,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),a.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),a.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),a.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",a.jsx(wi,{className:"w-4 h-4"})]})]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:j,className:"p-6 space-y-4 text-left",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),a.jsx("input",{required:!0,type:"text",value:c.name,onChange:_=>u({...c,name:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),a.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:_=>u({...c,trigger:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),a.jsx("input",{required:!0,type:"text",value:c.action,onChange:_=>u({...c,action:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),a.jsx("textarea",{required:!0,value:c.description,onChange:_=>u({...c,description:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:f,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[f?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Wu,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),m&&y&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>v(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(i0,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:()=>v(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",a.jsxs("span",{className:"font-bold text-slate-900",children:['"',y.name,'"']}),"?"]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),a.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>v(null),disabled:g===y.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:g===y.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g===y.id?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},eEe=({currentUser:e,onNavigate:t})=>{var ge,Ce,Ue,Te;const{showSuccess:r,showError:n}=Wn(),[s,i]=D.useState("registry"),[o,l]=D.useState([]),[c,u]=D.useState([]),[f,d]=D.useState(!0),[p,h]=D.useState("all"),[g,x]=D.useState("open"),[m,v]=D.useState(null),[y,w]=D.useState(!1),[b,N]=D.useState(!1),[S,j]=D.useState({type:"feature",title:"",description:""}),[_,E]=D.useState({type:null,item:null}),[I,A]=D.useState(null),[C,F]=D.useState(!1),[M,B]=D.useState([]),[K,G]=D.useState(!1),[Y,q]=D.useState(!1),[X,V]=D.useState(null),[T,R]=D.useState(!1),[z,L]=D.useState(""),[H,ne]=D.useState(null),se=(e==null?void 0:e.role)==="Admin",Q=async()=>{if(s==="registry"){d(!0);try{const[ue,Oe]=await Promise.all([hve(),su()]),st=(ue.data||[]).map(be=>{const De=be.url||null;let We=[];return Array.isArray(be.attachments)&&be.attachments.length>0&&(We=be.attachments.filter(Xe=>Xe&&(Xe.source==="file"||Xe.data)).map(Xe=>({type:Xe.type||"image",data:Xe.data||"",filename:Xe.filename||"attachment",mimeType:Xe.mimeType||"image/jpeg",source:"file"}))),{...be,url:De,attachments:We}});l(st),u(Oe.data||[])}catch{n("Failed to synchronize roadmap registry.")}finally{d(!1)}}};D.useEffect(()=>{Q();const ue=()=>Q();return window.addEventListener("refresh-roadmap",ue),()=>window.removeEventListener("refresh-roadmap",ue)},[s]),D.useEffect(()=>{const ue=Oe=>{Oe.key==="Escape"&&H&&ne(null)};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[H]),D.useEffect(()=>{L(m&&m.description||"")},[m]);const re=async()=>{if(!(!m||!se)){R(!0);try{await zj(m.id,{description:z.trim()}),l(ue=>ue.map(Oe=>Oe.id===m.id?{...Oe,description:z.trim()}:Oe)),v(ue=>ue&&{...ue,description:z.trim()}),r("Context updated")}catch{n("Failed to update context")}finally{R(!1)}}},Ae=async(ue,Oe)=>{if(se)try{await zj(ue,{status:Oe}),l(st=>st.map(be=>be.id===ue?{...be,status:Oe}:be)),(m==null?void 0:m.id)===ue&&v({...m,status:Oe}),r(`Status updated to ${Oe}`)}catch{n("Update failed.")}},ee=async ue=>{if(se){F(!0);try{await VP(ue),l(Oe=>Oe.filter(st=>st.id!==ue)),(m==null?void 0:m.id)===ue&&v(null),A(null),r("Entry purged from registry.")}catch{n("Purge failed.")}finally{F(!1)}}},Me=()=>{M.length===me.length?B([]):B(me.map(ue=>ue.id))},ze=async()=>{if(!se){n("Only admins can delete entries");return}if(M.length===0){n("No items selected");return}G(!0);try{const ue=[...M],Oe=ue.map(st=>VP(st));await Promise.all(Oe),l(st=>st.filter(be=>!ue.includes(be.id))),m&&ue.includes(m.id)&&v(null),B([]),q(!1),r(`Successfully deleted ${ue.length} entr${ue.length>1?"ies":"y"}`)}catch(ue){console.error("Bulk delete error:",ue),n(ue.message||"Failed to delete entries. Please try again.")}finally{G(!1)}},oe=async ue=>{if(ue.preventDefault(),!S.title||!S.description){n("Title and description are required");return}N(!0);try{const Oe={...S,userId:(e==null?void 0:e.id)||"anonymous",status:"planned"};await kR(Oe),r("Entry added to Strategic Pipeline"),w(!1),j({type:"feature",title:"",description:""}),Q()}catch(Oe){console.error("[FEEDBACK] Creation failed:",Oe),n(`Failed to add entry: ${Oe.message||"Unknown error"}`)}finally{N(!1)}},J=async()=>{if(!_.item||!_.type)return;let ue,Oe;switch(_.type){case"done":ue="done",Oe="Entry marked as done";break;case"archive":ue="canceled",Oe="Entry archived";break;case"in-execution":ue="in-progress",Oe="Entry marked as in execution";break;default:return}try{await zj(_.item.id,{status:ue}),l(st=>st.map(be=>be.id===_.item.id?{...be,status:ue}:be)),(m==null?void 0:m.id)===_.item.id&&v({...m,status:ue}),r(Oe),E({type:null,item:null})}catch{n("Failed to update entry status")}},je=(ue,Oe="w-4 h-4")=>{switch(ue){case"done":return a.jsx(tn,{className:`${Oe} text-emerald-500`});case"in-progress":return a.jsx(Ha,{className:`${Oe} text-blue-500 animate-pulse`});case"postponed":return a.jsx(hH,{className:`${Oe} text-amber-500`});case"canceled":return a.jsx(CF,{className:`${Oe} text-slate-400`});default:return a.jsx(Zb,{className:`${Oe} text-indigo-400`})}},ce=ue=>{switch(ue){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},ye=(ue,Oe="w-4 h-4")=>{switch(ue){case"bug":return a.jsx(Jb,{className:Oe});case"feature":return a.jsx(oi,{className:Oe});case"idea":return a.jsx(fk,{className:Oe})}},me=o.filter(ue=>(g==="open"?ue.status!=="done"&&ue.status!=="canceled":ue.status==="done"||ue.status==="canceled")?p==="all"?!0:ue.type===p:!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),a.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[a.jsx(Zb,{className:"w-4 h-4 text-indigo-500"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:()=>{x("open"),B([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${g==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),a.jsx("button",{onClick:()=>{x("completed"),B([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${g==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(ue=>a.jsx("button",{onClick:()=>{h(ue),B([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${p===ue?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:ue},ue)),a.jsxs("button",{onClick:()=>{const Oe=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";j({type:Oe,title:"",description:""}),w(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Qr,{className:"w-3 h-3"})," New Entry"]})]})]}),f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[a.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):me.length===0?a.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[a.jsx(D2,{className:"w-16 h-16 text-slate-100"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),a.jsxs("button",{onClick:()=>{const Oe=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";j({type:Oe,title:"",description:""}),w(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[a.jsx(Qr,{className:"w-4 h-4"})," Add Entry"]})]})]}):a.jsxs(a.Fragment,{children:[me.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:me.length>0&&M.length===me.length,onChange:ue=>{ue.stopPropagation(),Me()}}),a.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:ue=>{ue.stopPropagation(),Me()},children:"Select All Entries"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:me.map(ue=>{var be;const Oe=c.find(De=>De.id===ue.userId),st=M.includes(ue.id);return a.jsxs("div",{onClick:()=>{v(ue),V(null)},className:`bg-white rounded-[32px] border ${st?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${ce(ue.type)} flex items-center gap-1.5`,children:[ye(ue.type,"w-2.5 h-2.5"),ue.type]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[je(ue.status,"w-2.5 h-2.5"),ue.status]}),a.jsxs("div",{className:"flex items-center gap-1.5",onClick:De=>De.stopPropagation(),children:[a.jsx("div",{className:`${st?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:a.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${st?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:st,onChange:De=>{De.stopPropagation(),B(We=>We.includes(ue.id)?We.filter(Xe=>Xe!==ue.id):[...We,ue.id])},onClick:De=>{De.stopPropagation()}})})}),(ue.status==="planned"||ue.status==="in-progress"||ue.status==="postponed")&&a.jsxs(a.Fragment,{children:[ue.status!=="in-progress"&&a.jsx("button",{onClick:De=>{De.stopPropagation(),E({type:"in-execution",item:ue})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:a.jsx(Ha,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:De=>{De.stopPropagation(),E({type:"done",item:ue})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:a.jsx(tn,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:De=>{De.stopPropagation(),E({type:"archive",item:ue})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:a.jsx(Ou,{className:"w-3.5 h-3.5"})})]}),se&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:De=>{De.stopPropagation(),V(X===ue.id?null:ue.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${X===ue.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:a.jsx(OF,{className:"w-3.5 h-3.5"})}),X===ue.id&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-[55]",onClick:De=>{De.stopPropagation(),V(null)}}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),a.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(De=>a.jsxs("button",{onClick:We=>{We.stopPropagation(),Ae(ue.id,De),V(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${ue.status===De?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",De]},De)),a.jsx("button",{onClick:De=>{De.stopPropagation(),A(ue),V(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:ue.title}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',ue.description,'"']}),ue.url&&a.jsx("div",{className:"mb-6",children:a.jsxs("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",onClick:De=>De.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[ue.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(go,{className:"w-3 h-3"}):a.jsx(om,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[120px]",children:ue.url.length>30?`${ue.url.substring(0,30)}...`:ue.url}),a.jsx(zs,{className:"w-3 h-3"})]})}),ue.attachments&&Array.isArray(ue.attachments)&&ue.attachments.length>0&&a.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:ue.attachments.map((De,We)=>De.type==="image"&&De.data?a.jsxs("button",{type:"button",onClick:Xe=>{Xe.stopPropagation(),ne({src:De.data,alt:De.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:De.filename||"Screenshot"})]},We):De.type==="video"&&De.data?a.jsxs("a",{href:De.data,target:"_blank",rel:"noopener noreferrer",onClick:Xe=>Xe.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(om,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:De.filename||"Video"}),a.jsx(zs,{className:"w-3 h-3"})]},We):null)}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:((be=Oe==null?void 0:Oe.name)==null?void 0:be.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:(Oe==null?void 0:Oe.name)||"Observer"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ue.createdAt).toLocaleDateString()})]})]}),a.jsx(Ea,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},ue.id)})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:a.jsx(Zb,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(ue=>ue.type==="bug").length,icon:a.jsx(Jb,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(ue=>ue.status==="done").length,icon:a.jsx(oi,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(ue=>ue.status==="in-progress").length,icon:a.jsx(Ha,{className:"w-4 h-4 text-blue-500"})}].map((ue,Oe)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:ue.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ue.label}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:ue.value})]})]},Oe))})]}),s==="registry"&&a.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[a.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(oi,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),a.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",a.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(xa,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),a.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:a.jsx(M2,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),a.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:a.jsx(EF,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(kh,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:a.jsx(Jc,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:a.jsx(AF,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:a.jsx(vH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:a.jsx(uH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:a.jsx(wH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:a.jsx(OH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(CH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(wi,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(TU,{currentUser:e})}),s==="automation"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(ZCe,{})}),H&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ne(null),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>ne(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(Yt,{className:"w-6 h-6"})}),a.jsx("img",{src:H.src,alt:H.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:ue=>ue.stopPropagation()})]})}),y&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Qr,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),a.jsx("button",{onClick:()=>{w(!1),j({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(Yt,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:oe,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(Jb,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:a.jsx(oi,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:a.jsx(fk,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(ue=>a.jsxs("button",{type:"button",onClick:()=>j({...S,type:ue.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${S.type===ue.id?`${ue.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[ue.icon," ",ue.label]},ue.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:S.title,onChange:ue=>j({...S,title:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),a.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:S.description,onChange:ue=>j({...S,description:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{w(!1),j({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b||!S.title||!S.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:b?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Go,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),m&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>v(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:()=>v(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(Yt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${m.type==="bug"?"bg-red-500 shadow-red-100":m.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:ye(m.type,"w-8 h-8")}),a.jsxs("div",{children:[a.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${ce(m.type)}`,children:m.type}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:m.title})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[je(m.status,"w-5 h-5"),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:m.status.replace("-"," ")})]})]}),a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[a.jsx($n,{className:"w-5 h-5 text-indigo-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(m.createdAt).toLocaleDateString()})]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ui,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),se&&a.jsx("button",{type:"button",onClick:re,disabled:T||z.trim()===(m.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:T?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-3 h-3 animate-spin"})," Saving"]}):a.jsxs(a.Fragment,{children:[a.jsx(tn,{className:"w-3 h-3"})," Save Context"]})})]}),se?a.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[a.jsx("textarea",{rows:4,value:z,onChange:ue=>L(ue.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),a.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[a.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',m.description,'"']}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),m.url&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(_f,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:a.jsxs("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[m.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(go,{className:"w-4 h-4"}):a.jsx(om,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[200px]",children:m.url.length>40?`${m.url.substring(0,40)}...`:m.url}),a.jsx(zs,{className:"w-4 h-4"})]})})]}),m.attachments&&m.attachments.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(go,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:m.attachments.map((ue,Oe)=>ue.type==="image"&&ue.data?a.jsxs("button",{type:"button",onClick:()=>ne({src:ue.data,alt:ue.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(go,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Screenshot"})]},Oe):ue.type==="video"&&ue.data?a.jsxs("a",{href:ue.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(om,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Video"}),a.jsx(zs,{className:"w-4 h-4"})]},Oe):null)})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vo,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[a.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:((Ce=(ge=c.find(ue=>ue.id===m.userId))==null?void 0:ge.name)==null?void 0:Ce.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-black text-slate-900",children:((Ue=c.find(ue=>ue.id===m.userId))==null?void 0:Ue.name)||"Impact Member"}),a.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[((Te=c.find(ue=>ue.id===m.userId))==null?void 0:Te.role)||"Stakeholder","  Enterprise Contributor"]})]})]})]}),se&&a.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(kd,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(ue=>a.jsxs("button",{onClick:()=>Ae(m.id,ue),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${m.status===ue?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[je(ue,"w-3 h-3"),ue.replace("-"," ")]},ue))})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>A(m),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ar,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>v(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(tn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),_.type&&_.item&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${_.type==="done"?"bg-emerald-50 text-emerald-600":_.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:_.type==="done"?a.jsx(tn,{className:"w-6 h-6"}):_.type==="in-execution"?a.jsx(Ha,{className:"w-6 h-6"}):a.jsx(Ou,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:_.type==="done"?"Mark as Done?":_.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:_.type==="done"?"This will move the entry to Archive & Done":_.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:_.item.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:_.item.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>E({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:J,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${_.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":_.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:_.type==="done"?"Mark Done":_.type==="in-execution"?"Start Execution":"Archive"})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:I.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:I.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>A(null),disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>ee(I.id),disabled:C,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),M.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:M.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:ue=>{if(ue.preventDefault(),ue.stopPropagation(),!se){n("Only admins can delete entries");return}if(M.length===0){n("No items selected");return}q(!0)},disabled:K,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[K?a.jsx(pt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ar,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>B([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5"})})]})]})}),Y&&M.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",M.length," Entr",M.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ue=>M.includes(ue.id)).slice(0,5).map(ue=>a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[ye(ue.type,"w-4 h-4"),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title}),a.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:ue.type})]})]},ue.id)),M.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",M.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>q(!1),disabled:K,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),ze()},disabled:K,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:K?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${M.length} Entr${M.length>1?"ies":"y"}`})]})]})})]})},tEe=({currentUser:e})=>{var be,De,We,Xe,Et,wt,Ve,xt,Tt;const{showSuccess:t,showError:r}=Wn(),[n,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[u,f]=D.useState(null),[d,p]=D.useState(!0),[h,g]=D.useState(!1),[x,m]=D.useState([]),[v,y]=D.useState(!1),[w,b]=D.useState("select"),[N,S]=D.useState(""),[j,_]=D.useState(!1),[E,I]=D.useState(!1),[A,C]=D.useState([]),[F,M]=D.useState(!1),[B,K]=D.useState(!1),[G,Y]=D.useState(!1),[q,X]=D.useState(!1),[V,T]=D.useState(!1),[R,z]=D.useState(!1),[L,H]=D.useState(""),[ne,se]=D.useState(!1),Q=D.useRef(null),[re,Ae]=D.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),ee=D.useCallback(async()=>{try{const he=await SR(),Ge=(he==null?void 0:he.data)||he||[];c(Array.isArray(Ge)?Ge:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),Me=D.useCallback(async()=>{p(!0);try{const he=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!he){s([]),p(!1);return}const Ge={userId:he};x.length===1&&(Ge.companyId=x[0]);const kt=await pve(Ge);let gt=(kt==null?void 0:kt.data)||kt||[];gt=Array.isArray(gt)?gt:[],x.length>1&&(gt=gt.filter(Vt=>x.includes(Vt.companyId))),s(gt);try{const Vt=await iu();o((Vt==null?void 0:Vt.data)||Vt||[])}catch(Vt){console.error("[Expenses] Failed to fetch companies:",Vt),o([])}}catch(he){console.error("[Expenses] Error fetching expenses:",he),r(he.message||"Failed to load expenses"),s([])}finally{p(!1)}},[e,x,r]);D.useEffect(()=>{ee()},[ee]),D.useEffect(()=>{Me()},[Me]),D.useEffect(()=>{const he=()=>Me();return window.addEventListener("refresh-expenses",he),()=>window.removeEventListener("refresh-expenses",he)},[Me]);const ze=he=>i.find(Ge=>Ge.id===he),oe=he=>{switch(he){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},J=n,je={totalExpenses:J.reduce((he,Ge)=>he+(Ge.amount||0),0),pendingCount:J.filter(he=>he.status==="Pending"||!he.status).length,approvedCount:J.filter(he=>he.status==="Approved").length,thisMonth:J.filter(he=>{const Ge=new Date(he.date),kt=new Date;return Ge.getMonth()===kt.getMonth()&&Ge.getFullYear()===kt.getFullYear()}).reduce((he,Ge)=>he+(Ge.amount||0),0)},ce=()=>{A.length===J.length&&J.length>0?C([]):C(J.map(he=>he.id))},ye=(he,Ge=1920,kt=1080,gt=.8)=>new Promise((Vt,_r)=>{const lr=new FileReader;lr.onload=Gt=>{var ir;const rr=new Image;rr.onload=()=>{let pr=rr.width,Nr=rr.height;pr>Nr?pr>Ge&&(Nr=Nr*Ge/pr,pr=Ge):Nr>kt&&(pr=pr*kt/Nr,Nr=kt);const jr=document.createElement("canvas");jr.width=pr,jr.height=Nr;const Dt=jr.getContext("2d");if(!Dt){_r(new Error("Failed to create canvas context"));return}Dt.drawImage(rr,0,0,pr,Nr);const Sr=jr.toDataURL("image/jpeg",gt);Vt(Sr)},rr.onerror=()=>_r(new Error("Failed to load image")),rr.src=(ir=Gt.target)==null?void 0:ir.result},lr.onerror=()=>_r(new Error("Failed to read file")),lr.readAsDataURL(he)}),me=async he=>{var kt;const Ge=(kt=he.target.files)==null?void 0:kt[0];if(Ge){if(!Ge.type.startsWith("image/")&&!Ge.type.includes("pdf")){r("Please select an image or PDF file");return}if(Ge.size>10*1024*1024){r("File size must be less than 10MB");return}z(!0);try{if(Ge.type.startsWith("image/")){const gt=await ye(Ge,1920,1080,.8);H(gt),Ae(Vt=>({...Vt,receiptFile:Ge}))}else{const gt=new FileReader;gt.onload=()=>{H(gt.result),Ae(Vt=>({...Vt,receiptFile:Ge}))},gt.readAsDataURL(Ge)}}catch(gt){r(gt.message||"Failed to process receipt")}finally{z(!1)}}},ge=async he=>{if(he.preventDefault(),!re.companyId||!re.title||!re.amount||!re.category||!re.date){r("Please fill in all required fields");return}T(!0);try{const Ge=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;let kt="",gt="",Vt="";re.receiptFile&&(re.receiptFile.type.startsWith("image/"),kt=L,gt=re.receiptFile.name,Vt=re.receiptFile.type),await mve({companyId:re.companyId,title:re.title,amount:parseFloat(re.amount),category:re.category,date:new Date(re.date).toISOString(),description:re.description,status:re.status,receiptUrl:kt||void 0,receiptFilename:gt||void 0,receiptMimeType:Vt||void 0,userId:Ge}),t("Expense added successfully"),X(!1),Ae({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),H(""),Q.current&&(Q.current.value=""),Me(),window.dispatchEvent(new Event("refresh-expenses"))}catch(Ge){r(Ge.message||"Failed to add expense")}finally{T(!1)}},Ce=async()=>{var he,Ge;if(N.trim()){_(!0);try{const kt=await _R({name:N.trim()});if(kt!=null&&kt.data){const gt=kt.data;c(Vt=>[...Vt,gt]),Ae(Vt=>({...Vt,category:gt.name})),S(""),y(!1),t("Category added successfully")}}catch(kt){(he=kt.message)!=null&&he.includes("already exists")||(Ge=kt.message)!=null&&Ge.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(kt.message||"Failed to add category")}finally{_(!1)}}},Ue=async(he,Ge)=>{se(!0);try{await xve(he,{status:Ge}),s(kt=>kt.map(gt=>gt.id===he?{...gt,status:Ge}:gt)),u&&u.id===he&&f({...u,status:Ge}),t(`Expense status updated to ${Ge}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(kt){r(kt.message||"Failed to update expense status")}finally{se(!1)}},Te=async()=>{if(u){g(!0);try{await GP(u.id),s(he=>he.filter(Ge=>Ge.id!==u.id)),f(null),Y(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(he){r(he.message||"Failed to delete expense")}finally{g(!1)}}},ue=async()=>{const he=[...A];if(he.length!==0){M(!0),K(!1);try{await Promise.all(he.map(Ge=>GP(Ge))),s(Ge=>Ge.filter(kt=>!he.includes(kt.id))),C([]),t(`Successfully deleted ${he.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{M(!1)}}},Oe=he=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(he),st=he=>new Date(he).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return d?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(pt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{b("manage"),y(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[a.jsx(za,{className:"w-4 h-4"}),"Manage Categories"]}),a.jsxs("button",{onClick:()=>X(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[a.jsx(Qr,{className:"w-5 h-5"}),"Add Expense"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:Oe(je.totalExpenses),icon:a.jsx(Md,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:je.pendingCount.toString(),icon:a.jsx(Ha,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:je.approvedCount.toString(),icon:a.jsx(wo,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:Oe(je.thisMonth),icon:a.jsx($n,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((he,Ge)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("div",{className:`p-2 rounded-lg ${he.color}`,children:he.icon})}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:he.label}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:he.value})]},Ge))}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rv,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),a.jsxs("button",{onClick:()=>I(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[a.jsx("span",{children:x.length===0?"All Companies":x.length===1?((be=i.find(he=>he.id===x[0]))==null?void 0:be.name)||"1 Selected":`${x.length} Companies Selected`}),x.length>0&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:x.length})]}),a.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",J.length," expense(s)"]})]}),A.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-sm font-black",children:A.length})}),a.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),a.jsx("div",{className:"w-px h-6 bg-white/20"}),a.jsx("button",{onClick:()=>K(!0),disabled:F,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:F?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"DELETE"]})}),a.jsx("button",{onClick:()=>C([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:a.jsx(Yt,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`lg:col-span-2 space-y-4 ${u?"lg:pr-6":""}`,children:[J.length>0&&a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A.length===J.length&&J.length>0,onChange:ce,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),J.length===0?a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[a.jsx(gk,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),a.jsxs("button",{onClick:()=>X(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[a.jsx(Qr,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):J.map(he=>{const Ge=ze(he.companyId),kt=A.includes(he.id);return a.jsxs("div",{onClick:()=>f(he),className:`bg-white rounded-2xl border ${kt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${(u==null?void 0:u.id)===he.id?"ring-2 ring-indigo-500":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:kt,onChange:gt=>{gt.stopPropagation(),C(Vt=>kt?Vt.filter(_r=>_r!==he.id):[...Vt,he.id])},onClick:gt=>gt.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),a.jsx(ls,{src:Ge==null?void 0:Ge.logo,fallbackText:Ge==null?void 0:Ge.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:he.title}),a.jsx("p",{className:"text-sm text-slate-500 truncate",children:(Ge==null?void 0:Ge.name)||"Unknown Company"})]})]}),a.jsxs("div",{className:"text-right shrink-0 ml-4",children:[a.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:Oe(he.amount)}),a.jsxs("select",{value:he.status||"Pending",onChange:gt=>{gt.stopPropagation(),Ue(he.id,gt.target.value)},onClick:gt=>gt.stopPropagation(),disabled:ne,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${oe(he.status||"Pending")} ${ne?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(za,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:he.category})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx($n,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:st(he.date)})]}),he.receiptUrl&&a.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[a.jsx(pa,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),he.description&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:he.description}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:gt=>{gt.stopPropagation(),f(he)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",a.jsx(Ea,{className:"w-3 h-3"})]}),a.jsx("button",{onClick:gt=>{gt.stopPropagation(),f(he),Y(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ar,{className:"w-4 h-4"})})]})]},he.id)})]}),u&&a.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),a.jsx("p",{className:"text-lg font-black text-slate-900",children:u.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{src:(De=ze(u.companyId))==null?void 0:De.logo,fallbackText:(We=ze(u.companyId))==null?void 0:We.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((Xe=ze(u.companyId))==null?void 0:Xe.name)||"Unknown"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),a.jsx("p",{className:"text-2xl font-black text-indigo-600",children:Oe(u.amount)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),a.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:u.category})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsxs("select",{value:u.status||"Pending",onChange:he=>{const Ge=he.target.value;Ue(u.id,Ge)},disabled:ne,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${oe(u.status||"Pending")} ${ne?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]}),ne&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(pt,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:st(u.date)})]}),u.description&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:u.description})]}),u.receiptUrl&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),a.jsx("div",{className:"space-y-2",children:(Et=u.receiptMimeType)!=null&&Et.startsWith("image/")?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:u.receiptUrl,alt:u.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const he=window.open();he&&he.document.write(`<img src="${u.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsx($u,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):a.jsxs("a",{href:u.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[a.jsx(pa,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:u.receiptFilename||"Receipt"}),a.jsx(Nh,{className:"w-4 h-4 text-slate-400"})]})})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsx("button",{onClick:()=>{f(u),Y(!0)},disabled:h,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),q&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(gk,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),a.jsx("button",{onClick:()=>{X(!1),Ae({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",receiptFile:null}),H(""),Q.current&&(Q.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(Yt,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:ge,className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),a.jsxs("select",{required:!0,value:re.companyId,onChange:he=>Ae({...re,companyId:he.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"",children:"Select Company"}),i.map(he=>a.jsx("option",{value:he.id,children:he.name},he.id))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:re.title,onChange:he=>Ae({...re,title:he.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),a.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:re.amount,onChange:he=>Ae({...re,amount:he.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),a.jsxs("button",{type:"button",onClick:()=>{b("select"),y(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${re.category?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:re.category||"Select Category"}),a.jsx(Ea,{className:"w-4 h-4 text-slate-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),a.jsx("input",{required:!0,type:"date",value:re.date,onChange:he=>Ae({...re,date:he.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),a.jsxs("select",{value:re.status,onChange:he=>Ae({...re,status:he.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{rows:3,placeholder:"Additional details...",value:re.description,onChange:he=>Ae({...re,description:he.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),a.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:R?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):L?a.jsx(go,{className:"w-5 h-5"}):a.jsx(nu,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:L?((wt=re.receiptFile)==null?void 0:wt.name)||"Receipt uploaded":"Upload Receipt"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),a.jsx("input",{ref:Q,type:"file",accept:"image/*,.pdf",onChange:me,disabled:R,className:"hidden"})]}),L&&((Ve=re.receiptFile)==null?void 0:Ve.type.startsWith("image/"))&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:L,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),L&&((xt=re.receiptFile)==null?void 0:xt.type.includes("pdf"))&&a.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[a.jsx(pa,{className:"w-8 h-8 text-red-600 shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-red-900",children:re.receiptFile.name}),a.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),a.jsx("button",{type:"button",onClick:()=>{H(""),Ae(he=>({...he,receiptFile:null})),Q.current&&(Q.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:a.jsx(Yt,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{X(!1),Ae({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",receiptFile:null}),H(""),Q.current&&(Q.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:V||R,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:V?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),G&&u&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:u.title}),a.jsxs("p",{className:"text-xs text-slate-500",children:[Oe(u.amount),"  ",((Tt=ze(u.companyId))==null?void 0:Tt.name)||"Unknown"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{Y(!1),f(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:Te,disabled:h,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:w==="manage"?"Manage Categories":"Select Category"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:w==="manage"?"View and add expense categories":"Choose an expense category"})]}),a.jsx("button",{onClick:()=>{y(!1),S("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(za,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):w==="manage"?l.map(he=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(za,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:he.name})]}),a.jsx(tn,{className:"w-5 h-5 text-emerald-600"})]},he.id)):l.map(he=>a.jsxs("button",{type:"button",onClick:()=>{Ae({...re,category:he.name}),y(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${re.category===he.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:he.name}),re.category===he.name?a.jsx(tn,{className:"w-5 h-5 text-indigo-600"}):a.jsx(Bu,{className:"w-5 h-5 text-slate-300"})]},he.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:N,onChange:he=>S(he.target.value),onKeyDown:he=>{he.key==="Enter"&&N.trim()&&!j&&(he.preventDefault(),Ce())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ce,disabled:!N.trim()||j,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),E&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),a.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:x.length===0,onChange:()=>{m([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(he=>a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:x.includes(he.id),onChange:Ge=>{Ge.target.checked?m(kt=>[...kt,he.id]):m(kt=>kt.filter(gt=>gt!==he.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx(ls,{src:he.logo,fallbackText:he.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:he.name})]},he.id))]})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>{m([])},disabled:x.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(Yt,{className:"w-4 h-4"}),"Clear All"]}),a.jsxs("button",{onClick:()=>{I(!1),Me()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",x.length===0?"All":x.length,")"]})]})]})}),B&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-8 border-b border-slate-100",children:a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ar,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",A.length," Expense(s)?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>K(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:ue,disabled:F,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:F?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},rEe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Wn(),[n,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[u,f]=D.useState(new Date().getFullYear()),[d,p]=D.useState(""),[h,g]=D.useState(null),[x,m]=D.useState(!0),[v,y]=D.useState(!1),[w,b]=D.useState("yearly"),[N,S]=D.useState(!1),[j,_]=D.useState(!1),[E,I]=D.useState(null),[A,C]=D.useState(!1),[F,M]=D.useState(!1),[B,K]=D.useState(null),[G,Y]=D.useState(!1),[q,X]=D.useState(""),[V,T]=D.useState(!1),[R,z]=D.useState({year:new Date().getFullYear(),department:"",categories:[]}),L=(e==null?void 0:e.role)==="Admin",H=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,ne=Array.from({length:5},(me,ge)=>new Date().getFullYear()-2+ge),se=D.useCallback(async()=>{try{const me=await Nve(),ge=(me==null?void 0:me.data)||[];o(Array.isArray(ge)?ge:[])}catch(me){console.error("[BUDGET] Error fetching departments:",me)}},[]),Q=D.useCallback(async()=>{try{const me=await SR(),ge=(me==null?void 0:me.data)||[];c(Array.isArray(ge)?ge:[])}catch(me){console.error("[BUDGET] Error fetching categories:",me)}},[]),re=D.useCallback(async()=>{m(!0);try{const me={year:u};d&&(me.department=d),console.log("[Budget] Fetching budgets with params:",me);const ge=await gve(me),Ce=(ge==null?void 0:ge.data)||[];console.log("[Budget] Received budgets:",Ce),s(Array.isArray(Ce)?Ce:[])}catch(me){console.error("[Budget] Error fetching budgets:",me),r(me.message||"Failed to load budgets")}finally{m(!1)}},[u,d,r]),Ae=D.useCallback(async()=>{y(!0);try{const me={year:u};d&&(me.department=d),console.log("[Budget] Fetching tracking with params:",me);const ge=await wve(me);console.log("[Budget] Received tracking:",ge==null?void 0:ge.data),g((ge==null?void 0:ge.data)||null)}catch(me){console.error("[Budget] Error fetching tracking:",me),g(null)}finally{y(!1)}},[u,d]);D.useEffect(()=>{se(),Q()},[se,Q]),D.useEffect(()=>{re(),Ae()},[re,Ae]);const ee=()=>{z({year:u,department:d,categories:l.map(me=>({categoryId:me.id,categoryName:me.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},Me=async()=>{var me,ge;if(q.trim()){T(!0);try{const Ce=await _R({name:q.trim()});if(Ce!=null&&Ce.data){const Ue=Ce.data;c(Te=>[...Te,Ue]),X(""),t("Category added successfully"),Q()}}catch(Ce){(me=Ce.message)!=null&&me.includes("already exists")||(ge=Ce.message)!=null&&ge.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(Ce.message||"Failed to add category")}finally{T(!1)}}},ze=async()=>{if(!H){r("User not found");return}if(R.categories.length===0){r("Please add at least one category");return}if(R.categories.reduce((ge,Ce)=>ge+Ce.yearlyBudget,0)===0){r("Total budget cannot be zero");return}C(!0);try{await vve({year:R.year,department:R.department||null,categories:R.categories,createdBy:H}),t("Budget created successfully"),S(!1),re(),Ae()}catch(ge){r(ge.message||"Failed to create budget")}finally{C(!1)}},oe=async()=>{if(!(!E||!H)){C(!0);try{await yve(E.id,{categories:R.categories,updatedBy:H}),t("Budget updated successfully"),_(!1),I(null),re(),Ae()}catch(me){r(me.message||"Failed to update budget")}finally{C(!1)}}},J=async me=>{M(!0);try{await bve(me.id),t("Budget deleted successfully"),K(null),re(),Ae()}catch(ge){r(ge.message||"Failed to delete budget")}finally{M(!1)}},je=me=>me>=1e6?`$${(me/1e6).toFixed(1)}M`:me>=1e3?`$${(me/1e3).toFixed(1)}k`:`$${me.toLocaleString()}`,ce=me=>me>=100?"text-red-600":me>=80?"text-amber-600":"text-emerald-600",ye=me=>me>=100?"bg-red-500":me>=80?"bg-amber-500":"bg-emerald-500";return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),L&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(za,{className:"w-4 h-4"})," Manage Categories"]}),a.jsxs("button",{onClick:()=>{ee(),S(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(Qr,{className:"w-4 h-4"})," Create Budget"]})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),a.jsx("select",{value:u,onChange:me=>f(parseInt(me.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:ne.map(me=>a.jsx("option",{value:me,children:me},me))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:d,onChange:me=>p(me.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(me=>a.jsx("option",{value:me,children:me},me))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),a.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(me=>a.jsx("button",{onClick:()=>b(me),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${w===me?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:me},me))})]})]})}),!x&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:h&&h.hasBudget!==!1?"Current Budget":"Available Budgets"}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[n.length," budget",n.length!==1?"s":""," for selected filters"]})]}),h&&h.hasBudget!==!1&&L&&a.jsxs("button",{onClick:()=>{const me=n[0];I(me),z({year:me.year,department:me.department||"",categories:me.categories.map(ge=>({...ge,q1Budget:ge.q1Budget||0,q2Budget:ge.q2Budget||0,q3Budget:ge.q3Budget||0,q4Budget:ge.q4Budget||0}))}),_(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"})," Edit Budget"]})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:n.map(me=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[me.year," ",me.department&&`- ${me.department}`]}),!me.department&&a.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),a.jsx("p",{className:"text-lg font-black text-indigo-600",children:je(me.totalBudget)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),a.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[me.categories.length," configured"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:me.createdAt?new Date(me.createdAt).toLocaleDateString():"N/A"})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[a.jsx(Ea,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:me.categories.map(ge=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ge.categoryName}),a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",a.jsx("span",{className:"font-black",children:je(ge.yearlyBudget)})]})]},ge.categoryId))})]})})]}),L&&!(h&&h.hasBudget!==!1)&&a.jsxs("button",{onClick:()=>{I(me),z({year:me.year,department:me.department||"",categories:me.categories.map(ge=>({...ge,q1Budget:ge.q1Budget||0,q2Budget:ge.q2Budget||0,q3Budget:ge.q3Budget||0,q4Budget:ge.q4Budget||0}))}),_(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"})," View/Edit"]})]})},me.id))})]}),h&&h.hasBudget!==!1&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:a.jsx(Md,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:je(h.totalBudget)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:a.jsx(Jc,{className:"w-5 h-5 text-blue-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:je(h.totalSpent)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${h.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:h.totalRemaining>=0?a.jsx(tn,{className:"w-5 h-5 text-emerald-600"}):a.jsx(Cn,{className:"w-5 h-5 text-red-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),a.jsx("h3",{className:`text-2xl font-black ${h.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:je(Math.abs(h.totalRemaining))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:a.jsx(sv,{className:"w-5 h-5 text-purple-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),a.jsxs("h3",{className:`text-2xl font-black ${ce(h.totalPercentUsed)}`,children:[h.totalPercentUsed.toFixed(1),"%"]})]})]}),h&&h.isOverBudget&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[a.jsx(i0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),a.jsxs("p",{className:"text-sm text-red-700",children:["You are ",a.jsx("span",{className:"font-black",children:je(h.overBudgetAmount)})," over budget (",h.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!x&&(!h||h.hasBudget===!1)&&a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(AF,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:L?`No budget has been set for ${u}${d?` - ${d}`:""}. Create one to start tracking.`:`No budget available for ${u}${d?` - ${d}`:""}.`}),L&&a.jsxs("button",{onClick:()=>{ee(),S(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx(Qr,{className:"w-4 h-4"})," Create Budget"]})]}),h&&h.hasBudget!==!1&&h.categories&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),a.jsx("div",{className:"divide-y divide-slate-100",children:h.categories.map(me=>a.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:me.categoryName}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",a.jsx("span",{className:"font-black text-slate-900",children:je(me.yearlyBudget)})]}),a.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",a.jsx("span",{className:"font-black text-slate-900",children:je(me.yearlySpent)})]}),a.jsxs("span",{className:`font-black ${ce(me.yearlyPercentUsed)}`,children:[me.yearlyPercentUsed.toFixed(1),"%"]})]})]}),me.isOverBudget&&a.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",je(me.overBudgetAmount)]})]}),a.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[a.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${ye(me.yearlyPercentUsed)}`,style:{width:`${Math.min(me.yearlyPercentUsed,100)}%`}}),me.yearlyPercentUsed>100&&a.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),w==="quarterly"&&a.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((ge,Ce)=>{const Ue=me.quarters[ge];return a.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[a.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Ce+1]}),a.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[a.jsx("span",{className:"font-black text-slate-900",children:je(Ue.spent)})," "," / ",je(Ue.budget)]}),a.jsxs("p",{className:`text-xs font-black mt-1 ${ce(Ue.percentUsed)}`,children:[Ue.percentUsed.toFixed(0),"%"]})]},ge)})})]},me.categoryId))})]}),N&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>S(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Md,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",R.year]})]})]}),a.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{value:R.year,onChange:me=>z(ge=>({...ge,year:parseInt(me.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:ne.map(me=>a.jsx("option",{value:me,children:me},me))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:R.department,onChange:me=>z(ge=>({...ge,department:me.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(me=>a.jsx("option",{value:me,children:me},me))]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(za,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),a.jsx("div",{className:"space-y-4",children:R.categories.map((me,ge)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:me.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:me.yearlyBudget||"",onChange:Ce=>{const Ue=[...R.categories];Ue[ge].yearlyBudget=parseFloat(Ce.target.value)||0,z(Te=>({...Te,categories:Ue}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ce,Ue)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ue+1]}),a.jsx("input",{type:"number",value:me[Ce]||"",onChange:Te=>{const ue=[...R.categories];ue[ge][Ce]=parseFloat(Te.target.value)||0,z(Oe=>({...Oe,categories:ue}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ce))]})]},me.categoryId))}),a.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:je(R.categories.reduce((me,ge)=>me+ge.yearlyBudget,0))})]})})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>S(!1),disabled:A,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:ze,disabled:A,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),j&&E&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{_(!1),I(null)}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Cl,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",E.year,E.department&&` - ${E.department}`]})]})]}),a.jsx("button",{onClick:()=>{_(!1),I(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-4",children:[R.categories.map((me,ge)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:me.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:me.yearlyBudget||"",onChange:Ce=>{const Ue=[...R.categories];Ue[ge].yearlyBudget=parseFloat(Ce.target.value)||0,z(Te=>({...Te,categories:Ue}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ce,Ue)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ue+1]}),a.jsx("input",{type:"number",value:me[Ce]||"",onChange:Te=>{const ue=[...R.categories];ue[ge][Ce]=parseFloat(Te.target.value)||0,z(Oe=>({...Oe,categories:ue}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ce))]})]},me.categoryId)),a.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:je(R.categories.reduce((me,ge)=>me+ge.yearlyBudget,0))})]})})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsxs("button",{onClick:()=>K(E),disabled:A,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Ar,{className:"w-4 h-4"})," Delete"]}),a.jsx("button",{onClick:()=>{_(!1),I(null)},disabled:A,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:oe,disabled:A,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),B&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>K(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(i0,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",B.year,B.department&&` - ${B.department}`,"? This action cannot be undone."]})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>K(null),disabled:F,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:()=>J(B),disabled:F,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:F?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),G&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),a.jsx("button",{onClick:()=>{Y(!1),X("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(za,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(me=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(za,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:me.name})]}),a.jsx(tn,{className:"w-5 h-5 text-emerald-600"})]},me.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:q,onChange:me=>X(me.target.value),onKeyDown:me=>{me.key==="Enter"&&q.trim()&&!V&&(me.preventDefault(),Me())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Me,disabled:!q.trim()||V,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:V?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},tD=["Draft","Pending Signature","Signed","Expired","Terminated"],nEe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Wn(),[n,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[u,f]=D.useState([]),[d,p]=D.useState(null),[h,g]=D.useState(!0),[x,m]=D.useState(!1),[v,y]=D.useState(!1),[w,b]=D.useState(""),[N,S]=D.useState(""),[j,_]=D.useState(""),[E,I]=D.useState(!1),[A,C]=D.useState(!1),[F,M]=D.useState(!1),[B,K]=D.useState(!1),G=D.useRef(null),[Y,q]=D.useState(!1),[X,V]=D.useState(!1),[T,R]=D.useState(!1),[z,L]=D.useState(!1),[H,ne]=D.useState(!1),[se,Q]=D.useState(""),[re,Ae]=D.useState(!1),[ee,Me]=D.useState([]),[ze,oe]=D.useState(!1),[J,je]=D.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),ce=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,ye=D.useCallback(async()=>{g(!0);try{if(!ce){s([]),g(!1);return}const[he,Ge,kt,gt]=await Promise.all([AR({userId:ce}),iu(),qh(),Ave()]);s((he==null?void 0:he.data)||[]),o((Ge==null?void 0:Ge.data)||[]),c((kt==null?void 0:kt.data)||[]),f((gt==null?void 0:gt.data)||[])}catch(he){r(he.message||"Failed to load contracts")}finally{g(!1)}},[ce,r]);D.useEffect(()=>{ye()},[ye]);const me=async()=>{if(d){oe(!0);try{const he=await L6("contract",d.id);Me((he==null?void 0:he.data)||[])}catch(he){console.error("[CONTRACTS] Failed to fetch contract activities:",he),Me([])}finally{oe(!1)}}};D.useEffect(()=>{d?me():Me([])},[d==null?void 0:d.id]),D.useEffect(()=>{(async()=>{if(ce)try{await KP({userId:ce}),R(!0)}catch{R(!1)}})()},[ce]);const ge=async()=>{var he,Ge,kt,gt,Vt,_r,lr,Gt;if(!ce){r("User not authenticated");return}L(!0);try{let rr;try{rr=await KP({userId:ce})}catch(Dt){throw(he=Dt.message)!=null&&he.includes("Failed to fetch")||(Ge=Dt.message)!=null&&Ge.includes("ERR_CONNECTION_REFUSED")||(kt=Dt.message)!=null&&kt.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):Dt}const{accessToken:ir,apiKey:pr}=(rr==null?void 0:rr.data)||{};if(!ir)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",ir?"Present":"Missing"),console.log("Google Picker - API Key:",pr?`Present (${pr.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",rr==null?void 0:rr.data),await new Promise((Dt,Sr)=>{let Gr=0;const cn=50,qe=setInterval(()=>{Gr++,window.google&&window.google.picker?(clearInterval(qe),Dt()):Gr>=cn&&(clearInterval(qe),Sr(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Nr=window.google.picker;new Nr.PickerBuilder().setOAuthToken(ir).setCallback(Dt=>{L(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(Dt,null,2)),console.log("Google Picker Response Action:",Dt[Nr.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:Nr.Action.PICKED,CANCEL:Nr.Action.CANCEL}),Dt[Nr.Response.ACTION]===Nr.Action.PICKED){const Sr=Dt[Nr.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",Sr),console.log("Google Picker - Number of documents:",Sr==null?void 0:Sr.length),Sr&&Sr.length>0){const Gr=Sr[0];console.log("Google Picker - Selected file data:",JSON.stringify(Gr,null,2)),console.log("Google Picker - File ID:",Gr.id),console.log("Google Picker - File Name:",Gr.name),console.log("Google Picker - File MIME Type:",Gr.mimeType),console.log("Google Picker - File URL:",Gr.url),console.log("Google Picker - File Service ID:",Gr.serviceId),Ce(Gr)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(Dt[Nr.Response.ACTION]!==Nr.Action.CANCEL){const Sr=Dt[Nr.Response.ERROR];Sr&&(console.error("Google Picker Error:",Sr),console.error("Error details:",JSON.stringify(Dt,null,2)),Sr===Nr.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):Sr===Nr.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):Sr===Nr.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${Sr}. Check browser console for details.`))}}catch(Sr){console.error("Error handling picker callback:",Sr),r("Failed to process selected file")}}).addView(Nr.ViewId.DOCS).enableFeature(Nr.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(rr){L(!1),console.error("Google Drive Picker Error:",rr),(gt=rr.message)!=null&&gt.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):(Vt=rr.message)!=null&&Vt.includes("not connected")||(_r=rr.message)!=null&&_r.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):(lr=rr.message)!=null&&lr.includes("Failed to fetch")||(Gt=rr.message)!=null&&Gt.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(rr.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Ce=async he=>{if(ce){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(he,null,2)),console.log("File data from Google Picker:",{id:he.id,name:he.name,url:he.url,iconUrl:he.iconUrl,mimeType:he.mimeType,serviceId:he.serviceId,type:he.type,sizeBytes:he.sizeBytes});try{const Ge=he.url||he.embedUrl||"",kt=he.iconUrl||"",gt=he.sizeBytes?parseInt(he.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:he.id,publicUrl:Ge,iconUrl:kt,fileName:he.name,fileMimeType:he.mimeType}),je(Vt=>({...Vt,isGoogleDriveLinked:!0,googleDriveFileId:he.id,googleDriveWebViewLink:Ge,googleDriveDownloadLink:Ge,googleDriveIconUrl:kt,fileName:he.name||"Untitled",fileMimeType:he.mimeType||"",fileSize:gt,fileUrl:Ge,file:null})),t("File attached from Google Drive")}catch(Ge){console.error("Error handling Google Drive file selection:",Ge),r(Ge.message||"Failed to attach file from Google Drive")}}},Ue=async()=>{var he,Ge;if(se.trim()){Ae(!0);try{const kt=await Cve({name:se.trim()});if(kt!=null&&kt.data){const gt=kt.data;f(Vt=>[...Vt,gt]),Q(""),t("Document type added successfully")}}catch(kt){(he=kt.message)!=null&&he.includes("already exists")||(Ge=kt.message)!=null&&Ge.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(kt.message||"Failed to add document type")}finally{Ae(!1)}}},Te=he=>{var gt;const Ge=(gt=he.target.files)==null?void 0:gt[0];if(!Ge)return;if(Ge.size>10*1024*1024){r("File size must be less than 10MB");return}K(!0);const kt=new FileReader;kt.onload=()=>{const Vt=kt.result;je(_r=>({..._r,file:Ge,fileUrl:Vt,fileName:Ge.name,fileMimeType:Ge.type,fileSize:Ge.size})),K(!1)},kt.onerror=()=>{r("Failed to read file"),K(!1)},kt.readAsDataURL(Ge)},ue=async()=>{if(!J.fileUrl||!ce){r("Please select a file first");return}q(!0);try{const he=await Eve({fileName:J.fileName,fileContent:J.fileUrl,fileMimeType:J.fileMimeType,userId:ce});je(Ge=>({...Ge,isGoogleDriveLinked:!0,googleDriveFileId:he.data.id,googleDriveWebViewLink:he.data.webViewLink,googleDriveDownloadLink:he.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(he){r(he.message||"Failed to upload to Google Drive")}finally{q(!1)}},Oe=async(he,Ge)=>{V(!0);try{const kt=await Tve({contractId:he,userId:ce,title:Ge});t("Signature document created in Google Docs"),ye(),window.open(kt.data.documentLink,"_blank")}catch(kt){r(kt.message||"Failed to create signature document")}finally{V(!1)}},st=async()=>{if(!J.title||!J.documentType||!J.contractParty){r("Please fill in all required fields");return}M(!0);try{await jve({title:J.title,documentType:J.documentType,contractParty:J.contractParty,companyId:J.companyId||null,contactId:J.contactId||null,expirationDate:J.expirationDate||null,renewalDate:J.renewalDate||null,signedDate:J.signedDate||null,status:J.status,description:J.description||null,tags:J.tags,requiresSignature:J.requiresSignature,signatureStatus:J.requiresSignature?"Pending":"Not Required",fileUrl:J.fileUrl||null,fileName:J.fileName||null,fileMimeType:J.fileMimeType||null,fileSize:J.fileSize||null,isGoogleDriveLinked:J.isGoogleDriveLinked,googleDriveFileId:J.googleDriveFileId||null,googleDriveWebViewLink:J.googleDriveWebViewLink||null,googleDriveDownloadLink:J.googleDriveDownloadLink||null,googleDriveIconUrl:J.googleDriveIconUrl||null,userId:ce}),t("Contract created successfully"),I(!1),Xe(),ye()}catch(he){r(he.message||"Failed to create contract")}finally{M(!1)}},be=async()=>{if(d){M(!0);try{await kve(d.id,{title:J.title,documentType:J.documentType,contractParty:J.contractParty,companyId:J.companyId||null,contactId:J.contactId||null,expirationDate:J.expirationDate||null,renewalDate:J.renewalDate||null,signedDate:J.signedDate||null,status:J.status,description:J.description||null,tags:J.tags,requiresSignature:J.requiresSignature,fileUrl:J.fileUrl||null,fileName:J.fileName||null,fileMimeType:J.fileMimeType||null,fileSize:J.fileSize||null,isGoogleDriveLinked:J.isGoogleDriveLinked,googleDriveFileId:J.googleDriveFileId||null,googleDriveWebViewLink:J.googleDriveWebViewLink||null,googleDriveDownloadLink:J.googleDriveDownloadLink||null,googleDriveIconUrl:J.googleDriveIconUrl||null}),t("Contract updated successfully"),C(!1),p(null),Xe(),ye()}catch(he){r(he.message||"Failed to update contract")}finally{M(!1)}}},De=async()=>{if(d){m(!0);try{await Sve(d.id),t("Contract deleted successfully"),y(!1),p(null),ye()}catch(he){r(he.message||"Failed to delete contract")}finally{m(!1)}}},We=async he=>{try{await _ve(he.id,{signedBy:ce,signedDate:new Date().toISOString()}),t("Contract marked as signed"),ye()}catch(Ge){r(Ge.message||"Failed to mark contract as signed")}},Xe=()=>{je({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),G.current&&(G.current.value="")},Et=he=>{p(he),je({title:he.title,documentType:he.documentType,contractParty:he.contractParty,companyId:he.companyId||"",contactId:he.contactId||"",expirationDate:he.expirationDate||"",renewalDate:he.renewalDate||"",signedDate:he.signedDate||"",status:he.status,description:he.description||"",tags:he.tags||[],requiresSignature:he.requiresSignature,file:null,fileUrl:he.fileUrl||"",fileName:he.fileName||"",fileMimeType:he.fileMimeType||"",fileSize:he.fileSize||0,isGoogleDriveLinked:he.isGoogleDriveLinked,googleDriveFileId:he.googleDriveFileId||"",googleDriveWebViewLink:he.googleDriveWebViewLink||"",googleDriveDownloadLink:he.googleDriveDownloadLink||"",googleDriveIconUrl:he.googleDriveIconUrl||""}),C(!0)},wt=he=>{switch(he){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},Ve=he=>{switch(he){case"Signed":return a.jsx(tn,{className:"w-4 h-4"});case"Pending Signature":return a.jsx(Ha,{className:"w-4 h-4"});case"Draft":return a.jsx(pa,{className:"w-4 h-4"});case"Expired":return a.jsx(Cn,{className:"w-4 h-4"});case"Terminated":return a.jsx(Yt,{className:"w-4 h-4"});default:return a.jsx(pa,{className:"w-4 h-4"})}},xt=n.filter(he=>{const Ge=he.title.toLowerCase().includes(w.toLowerCase())||he.contractParty.toLowerCase().includes(w.toLowerCase())||he.documentType.toLowerCase().includes(w.toLowerCase()),kt=!N||he.status===N,gt=!j||he.documentType===j;return Ge&&kt&&gt}),Tt={total:n.length,signed:n.filter(he=>he.status==="Signed").length,pending:n.filter(he=>he.status==="Pending Signature").length,expired:n.filter(he=>he.status==="Expired").length};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>ne(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(za,{className:"w-4 h-4"})," Manage Document Types"]}),a.jsxs("button",{onClick:()=>{Xe(),I(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(Qr,{className:"w-4 h-4"})," Add Contract"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(pa,{className:"w-5 h-5 text-indigo-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Tt.total})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(tn,{className:"w-5 h-5 text-emerald-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),a.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:Tt.signed})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ha,{className:"w-5 h-5 text-amber-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),a.jsx("h3",{className:"text-2xl font-black text-amber-600",children:Tt.pending})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Cn,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),a.jsx("h3",{className:"text-2xl font-black text-red-600",children:Tt.expired})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:w,onChange:he=>b(he.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("select",{value:N,onChange:he=>S(he.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),tD.map(he=>a.jsx("option",{value:he,children:he},he))]}),a.jsxs("select",{value:j,onChange:he=>_(he.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Types"}),u.map(he=>a.jsx("option",{value:he.name,children:he.name},he.id))]})]})}),h?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(pt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):xt.length===0?a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(pa,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:w||N||j?"Try adjusting your filters":"Create your first contract to get started"}),!w&&!N&&!j&&a.jsxs("button",{onClick:()=>{Xe(),I(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx(Qr,{className:"w-4 h-4"})," Add Contract"]})]}):a.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:xt.map(he=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p(he),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-base font-black text-slate-900",children:he.title}),a.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${wt(he.status)} flex items-center gap-1`,children:[Ve(he.status),he.status]}),he.isGoogleDriveLinked&&a.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[he.googleDriveIconUrl?a.jsx("img",{src:he.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:Ge=>{Ge.target.style.display="none"}}):a.jsx(gg,{className:"w-3 h-3"}),"Drive"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(za,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:he.documentType})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(vo,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:he.contractParty})]}),he.expirationDate&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx($n,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(he.expirationDate).toLocaleDateString()]})]}),he.requiresSignature&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[a.jsx(Qb,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:he.signatureStatus})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[he.googleDriveWebViewLink&&a.jsx("a",{href:he.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:Ge=>Ge.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:a.jsx(zs,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),Et(he)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(Cl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),p(he),y(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(Ar,{className:"w-4 h-4"})})]})]})},he.id))})}),(E||A)&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{I(!1),C(!1),Xe()}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(pa,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:E?"Add Contract":"Edit Contract"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:E?"Create a new contract with metadata and documents":"Update contract details"})]})]}),a.jsx("button",{onClick:()=>{I(!1),C(!1),Xe()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:J.title,onChange:he=>je(Ge=>({...Ge,title:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:J.documentType,onChange:he=>je(Ge=>({...Ge,documentType:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"Select type"}),u.map(he=>a.jsx("option",{value:he.name,children:he.name},he.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:J.contractParty,onChange:he=>je(Ge=>({...Ge,contractParty:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),a.jsxs("select",{value:J.companyId,onChange:he=>je(Ge=>({...Ge,companyId:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),i.map(he=>a.jsx("option",{value:he.id,children:he.name},he.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),a.jsxs("select",{value:J.contactId,onChange:he=>je(Ge=>({...Ge,contactId:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),l.map(he=>a.jsx("option",{value:he.id,children:he.name},he.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),a.jsx("input",{type:"date",value:J.expirationDate,onChange:he=>je(Ge=>({...Ge,expirationDate:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),a.jsx("input",{type:"date",value:J.renewalDate,onChange:he=>je(Ge=>({...Ge,renewalDate:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),a.jsx("input",{type:"date",value:J.signedDate,onChange:he=>je(Ge=>({...Ge,signedDate:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsx("select",{value:J.status,onChange:he=>je(Ge=>({...Ge,status:he.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:tD.map(he=>a.jsx("option",{value:he,children:he},he))})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:J.requiresSignature,onChange:he=>je(Ge=>({...Ge,requiresSignature:he.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("textarea",{value:J.description,onChange:he=>je(Ge=>({...Ge,description:he.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(E||A)&&a.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(nu,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),a.jsx("input",{ref:G,type:"file",onChange:Te,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!J.fileUrl&&!J.isGoogleDriveLinked?a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>{var he;return(he=G.current)==null?void 0:he.click()},disabled:B,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:B?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),"Choose File"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-px bg-slate-200"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),a.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),a.jsx("button",{onClick:ge,disabled:!T||z,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:z?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gg,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[J.isGoogleDriveLinked&&J.googleDriveIconUrl?a.jsx("img",{src:J.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:he=>{var kt;he.target.style.display="none";const Ge=document.createElement("div");Ge.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',(kt=he.target.parentNode)==null||kt.appendChild(Ge)}}):J.isGoogleDriveLinked?a.jsx(gg,{className:"w-5 h-5 text-blue-600"}):a.jsx(mH,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:J.fileName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[J.fileSize>0&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(J.fileSize/1024).toFixed(1)," KB"]}),J.isGoogleDriveLinked&&a.jsxs(a.Fragment,{children:[J.fileSize>0&&a.jsx("span",{className:"text-slate-300",children:""}),a.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),a.jsx("button",{onClick:()=>{je(he=>({...he,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),G.current&&(G.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(Yt,{className:"w-4 h-4"})})]}),!J.isGoogleDriveLinked&&J.fileUrl&&a.jsx("button",{onClick:ue,disabled:Y,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:Y?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gg,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),J.isGoogleDriveLinked&&J.googleDriveWebViewLink&&a.jsxs("a",{href:J.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[J.googleDriveIconUrl?a.jsx("img",{src:J.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:he=>{he.target.style.display="none"}}):a.jsx(zs,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>{I(!1),C(!1),Xe()},disabled:F,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:E?st:be,disabled:F,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:F?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),E?"Creating...":"Updating..."]}):a.jsx(a.Fragment,{children:E?"Create Contract":"Update Contract"})})]})]})})]}),d&&!A&&!v&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:d.title}),a.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${wt(d.status)} flex items-center gap-1`,children:[Ve(d.status),d.status]})]}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[d.documentType," - ",d.contractParty]})]}),a.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(Yt,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.expirationDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.expirationDate).toLocaleDateString()})]}),d.renewalDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.renewalDate).toLocaleDateString()})]}),d.signedDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.signedDate).toLocaleDateString()})]})]}),d.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),(d.fileUrl||d.isGoogleDriveLinked)&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),a.jsxs("div",{className:"space-y-2",children:[d.fileName&&a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.isGoogleDriveLinked&&d.googleDriveIconUrl?a.jsx("img",{src:d.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:he=>{he.target.style.display="none"}}):a.jsx(pa,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.fileName}),d.fileSize&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(d.fileSize/1024).toFixed(1)," KB"]})]})]}),d.fileUrl&&a.jsx("a",{href:d.fileUrl,download:d.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(Nh,{className:"w-4 h-4"})})]}),d.isGoogleDriveLinked&&d.googleDriveWebViewLink&&a.jsx("a",{href:d.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(gg,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),a.jsx(zs,{className:"w-4 h-4 text-blue-600"})]})})]})]}),d.requiresSignature&&a.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Qb,{className:"w-5 h-5 text-amber-600"}),a.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),a.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",a.jsx("span",{className:"font-black",children:d.signatureStatus})]}),d.googleDocsSignatureLink?a.jsx("a",{href:d.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):a.jsx("button",{onClick:()=>Oe(d.id,d.title),disabled:X,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:X?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qb,{className:"w-4 h-4"}),"Create Signature Document"]})}),d.status!=="Signed"&&a.jsxs("button",{onClick:()=>We(d),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[a.jsx(tn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(kd,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),ze?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(pt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):ee.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(xa,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:ee.map((he,Ge)=>{const kt=new Date(he.createdAt),Vt=new Date().getTime()-kt.getTime(),_r=Math.floor(Vt/(1e3*60*60*24));let lr="";_r===0?lr="Today":_r===1?lr="Yesterday":_r<7?lr=`${_r} days ago`:_r<30?lr=`${Math.floor(_r/7)} week${Math.floor(_r/7)>1?"s":""} ago`:lr=`${Math.floor(_r/30)} month${Math.floor(_r/30)>1?"s":""} ago`;const Gt=he.activityType==="email_linked",rr=Gt?"border-indigo-600":"border-slate-200",ir=Gt?"bg-indigo-600":"bg-slate-300",pr=Gt?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${rr} shadow-xl flex items-center justify-center`,children:Gt?a.jsx(xa,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${ir}`})}),a.jsxs("p",{className:`text-[10px] font-black ${pr} uppercase mb-1 tracking-widest`,children:[Gt?"Email Linked":he.activityType||"Activity","  ",lr]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:he.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:he.description||he.title}),he.emailId&&a.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${he.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(zs,{className:"w-3 h-3"})," View Email"]})]},he.id||Ge)})})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),a.jsxs("button",{onClick:()=>{Et(d)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Cl,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),v&&d&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>y(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(Cn,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-black",children:d.title}),"?"]}),a.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>y(!1),disabled:x,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:De,disabled:x,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),H&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),a.jsx("button",{onClick:()=>{ne(!1),Q("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(pa,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):u.map(he=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(pa,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:he.name})]}),a.jsx(tn,{className:"w-5 h-5 text-emerald-600"})]},he.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New document type...",value:se,onChange:he=>Q(he.target.value),onKeyDown:he=>{he.key==="Enter"&&se.trim()&&!re&&(he.preventDefault(),Ue())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ue,disabled:!se.trim()||re,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:re?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},aEe=({onLogin:e})=>{const[t,r]=D.useState("initial"),[n,s]=D.useState(""),[i,o]=D.useState(["","","","","",""]),[l,c]=D.useState(!1),[u,f]=D.useState(null),d=D.useRef([]),p=async()=>{if(!n||!n.includes("@")){f("Please enter a valid email address");return}c(!0),f(null);try{const y=await RP({email:n});if((y==null?void 0:y.status)===404)throw new Error(y.message);f(null),o(["","","","","",""]),r("verify")}catch(y){console.error("[AUTH UI] Error caught:",y),y.message&&(y.message.includes("Account not found")||y.status===404)?f("Account not found - contact your Administrator"):f(y.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},h=async()=>{var w,b,N;const y=i.join("");if(y.length===6){if(!/^\d{6}$/.test(y)){f("OTP must contain only numbers");return}c(!0),f(null);try{const S=await Pge({email:n,verificationCode:y});if(S.token&&S.user)e(S);else throw new Error("Invalid response from server.")}catch(S){console.error("[AUTH] Verification error:",S),(w=S.message)!=null&&w.includes("User not registered")||(b=S.message)!=null&&b.includes("USER_NOT_REGISTERED")||(N=S.message)!=null&&N.includes("Account not found")?f("Account not found - contact your Administrator"):f(S.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>{var j;return(j=d.current[0])==null?void 0:j.focus()},100)}finally{c(!1)}}},g=(y,w)=>{var N;if(w&&!/^\d$/.test(w))return;const b=[...i];b[y]=w,o(b),u&&f(null),w&&y<5&&((N=d.current[y+1])==null||N.focus()),w&&y===5&&b.every(S=>S!=="")&&setTimeout(()=>h(),100)},x=(y,w)=>{var b,N,S;if(w.key==="Backspace"||w.key==="Delete"){w.preventDefault();const j=[...i];i[y]?j[y]="":y>0&&(j[y-1]="",(b=d.current[y-1])==null||b.focus()),o(j),u&&f(null)}else w.key==="Enter"?(w.preventDefault(),h()):w.key==="ArrowLeft"&&y>0?(w.preventDefault(),(N=d.current[y-1])==null||N.focus()):w.key==="ArrowRight"&&y<5&&(w.preventDefault(),(S=d.current[y+1])==null||S.focus())},m=y=>{var S;y.preventDefault();const w=y.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),b=[...i];for(let j=0;j<6;j++)b[j]=w[j]||"";o(b),u&&f(null);const N=b.findIndex(j=>j==="");(S=d.current[N===-1?5:N])==null||S.focus(),w.length===6&&setTimeout(()=>h(),100)};D.useEffect(()=>{t==="verify"?setTimeout(()=>{var y;return(y=d.current[0])==null?void 0:y.focus()},100):o(["","","","","",""])},[t]);const v=y=>{y.preventDefault(),t==="initial"?p():h()};return a.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[a.jsx("div",{className:"mb-6 text-center",children:a.jsx("a",{href:"/privacy-policy",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),a.jsxs("div",{className:"flex flex-col items-center mb-10",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),a.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),a.jsxs("form",{onSubmit:v,className:"space-y-5",children:[u&&a.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(Cn,{className:"w-4 h-4 shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[u,u.includes("Administrator")&&a.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(xa,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),a.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:n,onChange:y=>s(y.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),a.jsx("p",{className:"text-sm font-semibold text-white",children:n})]}),a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),a.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((y,w)=>a.jsx("input",{ref:b=>{d.current[w]=b},type:"text",inputMode:"numeric",maxLength:1,value:y,onChange:b=>g(w,b.target.value),onKeyDown:b=>x(w,b),onPaste:w===0?m:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},w))}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[a.jsx("button",{type:"button",onClick:async()=>{f(null),o(["","","","","",""]),c(!0);try{await RP({email:n}),f(null),setTimeout(()=>{var y;return(y=d.current[0])==null?void 0:y.focus()},100)}catch(y){f(y.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),a.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),f(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),a.jsx("button",{disabled:l||t==="verify"&&i.some(y=>y===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",a.jsx(wi,{className:"w-4 h-4"})]})})]}),a.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx(Ru,{className:"w-5 h-5 text-slate-700"}),a.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[a.jsx("p",{children:"Access restricted to authorized personnel."}),a.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[a.jsx("a",{href:"/help",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),a.jsx("span",{className:"text-slate-600",children:""}),a.jsx("a",{href:"/privacy-policy",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},sEe=({children:e,onUserLoaded:t})=>{const[r,n]=D.useState(!0),[s,i]=D.useState(!1);return D.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),n(!1);return}if(c)try{const u=JSON.parse(c);t(u),i(!0),n(!1),BP().then(f=>{const d=f.data||f,p=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(d)!==JSON.stringify(p)&&(localStorage.setItem("user_data",JSON.stringify(d)),t(d))}).catch(f=>{console.warn("Session expired:",f),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const u=await BP(),f=u.data||u;localStorage.setItem("user_data",JSON.stringify(f)),t(f),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{n(!1)}})()},[t]),r?a.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[a.jsx(pt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),a.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?a.jsx(a.Fragment,{children:e}):a.jsx(aEe,{onLogin:o=>{var c,u;localStorage.setItem("auth_token",o.token||((c=o.data)==null?void 0:c.token));const l=o.user||((u=o.data)==null?void 0:u.user)||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},iEe=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:n,isRefreshing:s=!1,onClose:i,onViewAll:o,onNavigate:l})=>{const c=(f,d)=>{if(f==="note-marked"||d!=null&&d.toLowerCase().includes("marked"))return a.jsx(lc,{className:"w-4 h-4 text-indigo-500"});if(d!=null&&d.toLowerCase().includes("pipeline"))return a.jsx(Jc,{className:"w-4 h-4 text-purple-500"});switch(f){case"lead":return a.jsx(lc,{className:"w-4 h-4 text-blue-500"});case"deal":return a.jsx(ui,{className:"w-4 h-4 text-indigo-500"});case"task":return a.jsx(wo,{className:"w-4 h-4 text-emerald-500"});case"payment":return a.jsx(i0,{className:"w-4 h-4 text-red-500"});case"email-routing":return a.jsx(Go,{className:"w-4 h-4 text-amber-500"});case"email-assigned":return a.jsx(xa,{className:"w-4 h-4 text-blue-500"});case"email-mention":return a.jsx(Mh,{className:"w-4 h-4 text-violet-500"});case"new-email":return a.jsx(xa,{className:"w-4 h-4 text-slate-600"});default:return a.jsx(Bv,{className:"w-4 h-4 text-slate-400"})}},u=(f,d)=>{if(f==="note-marked"||d!=null&&d.toLowerCase().includes("marked"))return"bg-indigo-50";if(d!=null&&d.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(f){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}};return a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(j5,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[n&&a.jsx("button",{onClick:n,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:a.jsx(Uu,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),a.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?a.jsx("div",{className:"divide-y divide-slate-50",children:e.map(f=>a.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${f.read?"":"bg-indigo-50/10"}`,onClick:()=>{if(t(f.id),f.link)if(f.link.startsWith("/?tab=")&&l){const p=new URL(f.link,window.location.origin).searchParams.get("tab");p?(l(p),localStorage.setItem("activeTab",p),window.history.replaceState(null,"",f.link),i()):window.location.href=f.link}else f.link.startsWith("/"),window.location.href=f.link},children:[a.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${u(f.type,f.title)}`,children:c(f.type,f.title)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${f.read?"text-slate-600":"text-slate-900"}`,children:f.title}),a.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:f.timestamp})]}),a.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${f.read?"text-slate-400":"text-slate-500"}`,children:f.message})]}),!f.read&&a.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},f.id))}):a.jsxs("div",{className:"p-12 text-center text-slate-400",children:[a.jsx(Wu,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),a.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),a.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),a.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:a.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Rb=20,oEe=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:n}=Wn(),[s,i]=D.useState([]),[o,l]=D.useState(!0),[c,u]=D.useState(!1),[f,d]=D.useState(1),[p,h]=D.useState(1),[g,x]=D.useState(0),[m,v]=D.useState(!1),y=D.useCallback(async(M=!1)=>{try{const B=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!(B!=null&&B.id))return;M?u(!0):l(!0);const K=await wR(B.id,500),G=(K==null?void 0:K.data)||K||[],Y=(Array.isArray(G)?G:[]).map(q=>{let X="Just now";if(q.createdAt){const V=new Date(q.createdAt),R=new Date().getTime()-V.getTime(),z=Math.floor(R/6e4),L=Math.floor(R/36e5),H=Math.floor(R/864e5);z<1?X="Just now":z<60?X=`${z}m ago`:L<24?X=`${L}h ago`:H<7?X=`${H}d ago`:X=V.toLocaleDateString()}return{id:q.id,userId:q.userId,type:q.type||"system",title:q.title,message:q.message,timestamp:X,read:!!q.read,link:q.link||void 0}});i(Y),x(Y.length),h(Math.ceil(Y.length/Rb))}catch(B){console.error("[NOTIFICATIONS] Failed to load notifications",B),n(B.message||"Failed to load notifications")}finally{l(!1),u(!1)}},[e,n]);D.useEffect(()=>{y(!1)},[y]),D.useEffect(()=>{d(1)},[m]),D.useEffect(()=>{const M=()=>{y(!0)};return window.addEventListener("refresh-notifications",M),()=>{window.removeEventListener("refresh-notifications",M)}},[y]);const w=async M=>{try{const B=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!(B!=null&&B.id))return;await NR(M,B.id),i(K=>K.map(G=>G.id===M?{...G,read:!0}:G)),window.dispatchEvent(new Event("refresh-notifications"))}catch(B){console.error("[NOTIFICATIONS] Failed to mark as read",B),n(B.message||"Failed to mark notification as read")}},b=async()=>{try{const M=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!(M!=null&&M.id))return;await jR(M.id),i(B=>B.map(K=>({...K,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(M){console.error("[NOTIFICATIONS] Failed to mark all as read",M),n(M.message||"Failed to mark all notifications as read")}},N=(M,B)=>{if(M==="note-marked"||B!=null&&B.toLowerCase().includes("marked"))return a.jsx(lc,{className:"w-5 h-5 text-indigo-500"});if(B!=null&&B.toLowerCase().includes("pipeline"))return a.jsx(Jc,{className:"w-5 h-5 text-purple-500"});switch(M){case"lead":return a.jsx(lc,{className:"w-5 h-5 text-blue-500"});case"deal":return a.jsx(ui,{className:"w-5 h-5 text-indigo-500"});case"task":return a.jsx(wo,{className:"w-5 h-5 text-emerald-500"});case"payment":return a.jsx(i0,{className:"w-5 h-5 text-red-500"});case"email-routing":return a.jsx(Go,{className:"w-5 h-5 text-amber-500"});case"email-assigned":return a.jsx(xa,{className:"w-5 h-5 text-blue-500"});case"email-mention":return a.jsx(Mh,{className:"w-5 h-5 text-violet-500"});case"new-email":return a.jsx(xa,{className:"w-5 h-5 text-slate-600"});default:return a.jsx(Bv,{className:"w-5 h-5 text-slate-400"})}},S=(M,B)=>{if(M==="note-marked"||B!=null&&B.toLowerCase().includes("marked"))return"bg-indigo-50";if(B!=null&&B.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(M){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}},j=M=>{if(w(M.id),M.link)if(M.link.startsWith("/?tab=")){const K=new URL(M.link,window.location.origin).searchParams.get("tab");K&&t?t(K):window.location.href=M.link}else M.link.startsWith("/"),window.location.href=M.link},_=m?s.filter(M=>{var B;return M.type==="note-marked"||((B=M.title)==null?void 0:B.toLowerCase().includes("marked"))}):s,E=(f-1)*Rb,I=E+Rb,A=_.slice(E,I),C=_.filter(M=>!M.read).length,F=Math.ceil(_.length/Rb);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[a.jsx(j5,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:C>0?`${C} unread notification${C!==1?"s":""}`:"All caught up!"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>v(!m),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${m?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[a.jsx(lc,{className:"w-4 h-4"}),m?"Show All":"Marked Notes"]}),a.jsxs("button",{onClick:()=>y(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[a.jsx(Uu,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),C>0&&a.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(Uu,{className:"w-8 h-8 animate-spin text-indigo-600"})}):_.length===0?a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[a.jsx(Wu,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:m?"No marked notes":"All caught up!"}),a.jsx("p",{className:"text-sm text-slate-500",children:m?"No notes have been marked for you yet.":"No notifications at this time."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:A.map(M=>a.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${M.read?"":"bg-indigo-50/30"}`,onClick:()=>j(M),children:[a.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${S(M.type,M.title)}`,children:N(M.type,M.title)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[a.jsx("p",{className:`text-sm font-semibold ${M.read?"text-slate-600":"text-slate-900 font-bold"}`,children:M.title}),a.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 font-medium",children:M.timestamp}),!M.read&&a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),a.jsx("p",{className:`text-sm ${M.read?"text-slate-400":"text-slate-600"}`,children:M.message})]})]},M.id))})}),F>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",a.jsx("span",{className:"font-semibold",children:E+1})," to"," ",a.jsx("span",{className:"font-semibold",children:Math.min(I,_.length)})," of"," ",a.jsx("span",{className:"font-semibold",children:_.length})," notifications"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(M=>Math.max(1,M-1)),disabled:f===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(dk,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:F},(M,B)=>B+1).map(M=>M===1||M===p||M>=f-1&&M<=f+1?a.jsx("button",{onClick:()=>d(M),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${f===M?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:M},M):M===f-2||M===f+2?a.jsx("span",{className:"px-2 text-slate-400",children:"..."},M):null)}),a.jsx("button",{onClick:()=>d(M=>Math.min(F,M+1)),disabled:f===F,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Ea,{className:"w-5 h-5"})})]})]})]})]})},vf=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const n=r[1].toLowerCase().trim();return n.includes(".")?n:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const n=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return n.includes(".")?n:null}catch{const n=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return n&&n.includes(".")?n:null}},lEe=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(r===n)return 1;const s=r.length,i=n.length;if(s===0||i===0)return 0;const o=[];for(let u=0;u<=s;u++)o[u]=[u];for(let u=0;u<=i;u++)o[0][u]=u;for(let u=1;u<=s;u++)for(let f=1;f<=i;f++){const d=r[u-1]===n[f-1]?0:1;o[u][f]=Math.min(o[u-1][f]+1,o[u][f-1]+1,o[u-1][f-1]+d)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},cEe=(e,t)=>{const r=[];if(!e.email)return r;const n=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===n&&r.push({record:s,matchType:"exact",confidence:1})}),r},uEe=(e,t,r=.8)=>{const n=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=lEe(e.name||"",s.name||"");i>=r&&n.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),n},dEe=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],fEe=({type:e,stage:t,lockedType:r,onClose:n,onSuccess:s})=>{const[i,o]=D.useState(e),[l,c]=D.useState("form"),[u,f]=D.useState(!1),[d,p]=D.useState(null),[h,g]=D.useState({}),[x,m]=D.useState([]),[v,y]=D.useState([]),[w,b]=D.useState([]),[N,S]=D.useState([]),[j,_]=D.useState([]),[E,I]=D.useState(!1),[A,C]=D.useState(!1),[F,M]=D.useState(""),B=D.useRef(null),[K,G]=D.useState(null),[Y,q]=D.useState(!1),[X,V]=D.useState(""),[T,R]=D.useState(null),z=D.useRef(null),[L,H]=D.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:Es,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});D.useEffect(()=>{const oe={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(oe.lineItems=[{description:"",quantity:1,rate:0,amount:0}],oe.currency=Es):(oe.lineItems=[],e!=="deal"&&(oe.currency=Es)),H(J=>({...J,...oe})),p(null),g({}),c("form"),I(!1),V(""),R(null),z.current&&(z.current.value="")},[e,t]),D.useEffect(()=>{(async()=>{try{const J=JSON.parse(localStorage.getItem("user_data")||"{}"),je=J==null?void 0:J.id,[ce,ye,me,ge]=await Promise.all([su(),iu(),qh(),$x(je)]);b(ce.data||[]),m(ye.data||[]),y(me.data||[]);const Ce=Array.isArray(ge)?ge:(ge==null?void 0:ge.data)||[];if(S(Ce.filter(Ue=>!Ue.archived)),i==="task")try{const Ue=await Bw(),Te=Array.isArray(Ue==null?void 0:Ue.data)?Ue.data:[];_(Te)}catch{_([])}else _([]);je&&H(Ue=>({...Ue,ownerId:Ue.ownerId||je,assigneeId:Ue.assigneeId||je}))}catch(J){console.error("[QUICK-CREATE] Data fetch failed:",J)}})()},[i]),D.useEffect(()=>{const oe=J=>{B.current&&!B.current.contains(J.target)&&(C(!1),M(""))};if(A)return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[A]);const ne=dEe.filter(oe=>oe.toLowerCase().includes(F.toLowerCase())),se=(oe,J=1200,je=1200,ce=.8)=>new Promise((ye,me)=>{const ge=new FileReader;ge.onload=Ce=>{var Te;const Ue=new Image;Ue.onload=()=>{let ue=Ue.width,Oe=Ue.height;ue>Oe?ue>J&&(Oe=Oe*J/ue,ue=J):Oe>je&&(ue=ue*je/Oe,Oe=je);const st=document.createElement("canvas");st.width=ue,st.height=Oe;const be=st.getContext("2d");be?(be.drawImage(Ue,0,0,ue,Oe),ye(st.toDataURL("image/jpeg",ce))):me(new Error("Canvas context not available"))},Ue.onerror=()=>me(new Error("Failed to load image")),Ue.src=(Te=Ce.target)==null?void 0:Te.result},ge.onerror=()=>me(new Error("Failed to read file")),ge.readAsDataURL(oe)}),Q=async oe=>{var je;const J=(je=oe.target.files)==null?void 0:je[0];if(J){if(!J.type.startsWith("image/")){p("Please select an image file");return}if(J.size>10*1024*1024){p("Image size must be less than 10MB");return}try{const ce=await se(J,1200,1200,.8);V(ce),R(J),p(null)}catch(ce){p(ce.message||"Failed to process image")}}},re=()=>{V(""),R(null),z.current&&(z.current.value=""),n()},Ae=()=>{var J,je,ce,ye,me,ge,Ce,Ue,Te,ue,Oe,st;const oe={};if(i==="contact")(J=L.name)!=null&&J.trim()||(oe.name="Full Name is required"),(je=L.email)!=null&&je.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.email)||(oe.email="Please enter a valid email address"):oe.email="Email Address is required";else if(i==="company"){(ce=L.name)!=null&&ce.trim()||(oe.name="Company Name is required"),(!L.region||L.region.trim()==="")&&(oe.region="Region is required"),(ye=L.ownerId)!=null&&ye.trim()||(oe.ownerId="Assignee / Lead is required");let be=L.domain;!be&&L.website&&(be=vf(L.website)||""),!be&&L.email&&(be=vf(L.email)||""),(!be||be.trim()==="")&&(oe.domain="Domain is required (can be auto-populated from website or email)",oe.website="Add website or email to auto-populate domain")}else if(i==="deal")(me=L.title)!=null&&me.trim()||(oe.title="Deal Name is required"),(ge=L.companyId)!=null&&ge.trim()||(oe.companyId="Organization is required"),(!L.value||parseFloat(L.value)<=0)&&(oe.value="Amount is required and must be greater than $0"),(Ce=L.stage)!=null&&Ce.trim()||(oe.stage="Stage is required"),L.ownerId||(oe.ownerId="Assignee / Lead is required");else if(i==="project"){if((Ue=L.title)!=null&&Ue.trim()||(oe.title="Project Name is required"),(Te=L.engagement)!=null&&Te.trim()||(oe.engagement="Engagement is required"),(ue=L.startDate)!=null&&ue.trim()||(oe.startDate="Start Date is required"),(Oe=L.endDate)!=null&&Oe.trim()||(oe.endDate="End Date is required"),L.startDate&&L.endDate){const be=new Date(L.startDate),De=new Date(L.endDate);!isNaN(be.getTime())&&!isNaN(De.getTime())&&be>=De&&(oe.endDate="End Date must be after Start Date")}L.ownerId||(oe.ownerId="Assignee / Lead is required")}else i==="task"?((st=L.title)!=null&&st.trim()||(oe.title="Task Title is required"),L.assigneeId||(oe.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(L.companyId||(oe.companyId="Client (Organization) is required"),(!L.expectedCloseDate||L.expectedCloseDate.trim()==="")&&(oe.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!L.lineItems||L.lineItems.length===0?oe.lineItems="At least one line item is required":(L.lineItems.forEach((De,We)=>{(!De.description||!De.description.trim())&&(oe[`lineItem_${We}_description`]=`Line item ${We+1}: Description is required`),(!De.quantity||De.quantity<=0)&&(oe[`lineItem_${We}_quantity`]=`Line item ${We+1}: Quantity must be greater than 0`),(!De.rate||De.rate<=0)&&(oe[`lineItem_${We}_rate`]=`Line item ${We+1}: Rate must be greater than 0`)}),L.lineItems.reduce((De,We)=>{const Xe=We.amount||We.rate*We.quantity||0;return De+Xe},0)<=0&&(oe.lineItems="Total amount must be greater than $0")));return g(oe),Object.keys(oe).length===0},ee=async oe=>{var je,ce,ye,me,ge,Ce,Ue,Te,ue,Oe,st,be,De,We;if(oe.preventDefault(),u)return;if(p(null),!Ae()){f(!1);return}f(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,L);try{const Xe=JSON.parse(localStorage.getItem("user_data")||"null"),Et=Xe==null?void 0:Xe.id;if(i==="contact"){const wt={name:L.name,email:L.email},Ve=cEe(wt,v),xt=uEe(wt,v,.8);if(Ve.length>0||xt.length>0){const Tt=new Map,he=new Set;Ve.forEach(kt=>{var _r;const gt=kt.record,Vt=gt.id||((_r=gt.email)==null?void 0:_r.toLowerCase().trim())||"";Vt&&!Tt.has(Vt)&&(Tt.set(Vt,{...gt,matchType:"exact",matchReason:"email"}),gt.email&&he.add(gt.email.toLowerCase().trim()))}),xt.forEach(kt=>{var lr,Gt;const gt=kt.record,Vt=gt.id||((lr=gt.email)==null?void 0:lr.toLowerCase().trim())||"",_r=(Gt=gt.email)==null?void 0:Gt.toLowerCase().trim();Vt&&!Tt.has(Vt)&&(!_r||!he.has(_r))&&(Tt.set(Vt,{...gt,matchType:"fuzzy",matchReason:"name",similarity:kt.similarity}),_r&&he.add(_r))});const Ge=Array.from(Tt.values());G({open:!0,duplicates:Ge,newContact:{name:L.name,email:L.email,companyId:L.companyId||void 0,role:L.role,phone:L.phone,linkedin:L.linkedin||void 0}}),f(!1);return}await $P({name:L.name,companyId:L.companyId||void 0,role:L.role,email:L.email,phone:L.phone,linkedin:L.linkedin||void 0})}else if(i==="company"){let wt=L.domain;!wt&&L.website&&(wt=vf(L.website)||void 0),!wt&&L.email&&(wt=vf(L.email)||void 0);const Ve={name:(je=L.name)==null?void 0:je.trim(),industry:(ce=L.industry)==null?void 0:ce.trim(),region:((ye=L.region)==null?void 0:ye.trim())||"",website:((me=L.website)==null?void 0:me.trim())||void 0,email:((ge=L.email)==null?void 0:ge.trim())||void 0,domain:wt||"",linkedin:((Ce=L.linkedin)==null?void 0:Ce.trim())||void 0,ownerId:L.ownerId||Et};if(!Ve.region){g({region:"Region is required"}),f(!1);return}if(!Ve.domain){g({domain:"Domain is required (can be auto-populated from website or email)"}),f(!1);return}await $ge(Ve)}else if(i==="deal"){if(!L.companyId||L.companyId.trim()===""){g({companyId:"Organization is required"}),f(!1);return}if(!L.value||parseFloat(L.value)<=0){g({value:"Amount is required and must be greater than $0"}),f(!1);return}if(!L.stage||L.stage.trim()===""){g({stage:"Stage is required"}),f(!1);return}await Uge({title:L.title,companyId:L.companyId.trim(),value:parseFloat(L.value),currency:L.currency||Es,stage:L.stage,pipelineType:"sales",ownerId:L.ownerId,expectedCloseDate:L.expectedCloseDate||void 0,description:L.description||void 0})}else if(i==="project"){const wt={};if((Ue=L.title)!=null&&Ue.trim()||(wt.title="Project Name is required"),(Te=L.engagement)!=null&&Te.trim()||(wt.engagement="Engagement is required"),(ue=L.startDate)!=null&&ue.trim()||(wt.startDate="Start Date is required"),(Oe=L.endDate)!=null&&Oe.trim()||(wt.endDate="End Date is required"),(st=L.ownerId)!=null&&st.trim()||(wt.ownerId="Assignee / Lead is required"),L.startDate&&L.endDate){const xt=new Date(L.startDate),Tt=new Date(L.endDate);!isNaN(xt.getTime())&&!isNaN(Tt.getTime())&&xt>=Tt&&(wt.endDate="End Date must be after Start Date")}if(Object.keys(wt).length>0){g(wt),f(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:L.title,engagement:L.engagement,startDate:L.startDate,endDate:L.endDate,ownerId:L.ownerId});const Ve={title:L.title.trim(),engagement:L.engagement.trim(),startDate:L.startDate,endDate:L.endDate,companyId:L.companyId&&L.companyId.trim()!==""?L.companyId:void 0,status:L.status,ownerId:L.ownerId,projectManager:L.ownerId,progress:0,description:L.description||void 0};X&&T&&(Ve.noteImage=X,Ve.noteImageName=T.name,Ve.noteImageMimeType=T.type),console.debug("[QUICK-CREATE] Project payload:",Ve),await qge(Ve)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:L.title,assigneeId:L.assigneeId});const wt={title:L.title,projectId:L.projectId||void 0,description:L.description||void 0,dueDate:L.expectedCloseDate||void 0,priority:L.priority,status:"Todo",assigneeId:L.assigneeId,category:L.category&&L.category.trim()?L.category.trim():void 0};if(X||L.description){const Ve=JSON.parse(localStorage.getItem("user_data")||"{}"),xt={id:`note_${Date.now()}`,userId:Et||Ve.id,userName:Ve.name||"Unknown User",text:L.description||"",createdAt:new Date().toISOString()};X&&T&&(xt.imageUrl=X,xt.imageName=T.name,xt.imageMimeType=T.type),wt.notes=[xt]}await vR(wt),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const wt={};if((be=L.companyId)!=null&&be.trim()||(wt.companyId="Client (Organization) is required"),(De=L.expectedCloseDate)!=null&&De.trim()||(wt.expectedCloseDate="Due Date is required"),(!L.lineItems||L.lineItems.length===0)&&(wt.lineItems="At least one line item is required"),L.lineItems&&L.lineItems.length>0&&L.lineItems.forEach((Tt,he)=>{(!Tt.description||!Tt.description.trim())&&(wt[`lineItem_${he}_description`]=`Line item ${he+1}: Description is required`),(!Tt.quantity||Tt.quantity<=0)&&(wt[`lineItem_${he}_quantity`]=`Line item ${he+1}: Quantity must be greater than 0`),(!Tt.rate||Tt.rate<=0)&&(wt[`lineItem_${he}_rate`]=`Line item ${he+1}: Rate must be greater than 0`)}),Object.keys(wt).length>0){g(wt),f(!1);return}const Ve=L.lineItems.map(Tt=>({description:Tt.description.trim(),quantity:Tt.quantity,rate:Tt.rate,amount:Tt.amount||Tt.rate*Tt.quantity})),xt=Ve.reduce((Tt,he)=>Tt+(he.amount||0),0);if(xt<=0){g({lineItems:"At least one line item with a valid amount is required"}),f(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:L.companyId,amount:xt,dueDate:L.expectedCloseDate,lineItemsCount:Ve.length,lineItems:Ve,name:L.name,description:L.description}),await Wge({companyId:L.companyId,amount:xt,currency:L.currency||Es,dueDate:L.expectedCloseDate,description:L.name||L.description||"",lineItems:Ve,items:Ve,status:"Draft",userId:Et||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),V(""),R(null),z.current&&(z.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{n()},1500)}catch(Xe){if(console.error("[QUICK-CREATE] Deployment failed:",Xe),console.error("[QUICK-CREATE] Error details:",{message:Xe.message,code:Xe.code,status:Xe.status,details:Xe.details,type:i}),Xe.code==="DUPLICATE_DETECTED"&&Xe.duplicates&&i==="contact"){const Et=new Map;Xe.duplicates.forEach(Ve=>{if(Ve.id)if(!Et.has(Ve.id))Et.set(Ve.id,Ve);else{const xt=Et.get(Ve.id);Ve.matchType==="exact"&&xt.matchType!=="exact"&&Et.set(Ve.id,Ve)}});const wt=Array.from(Et.values());G({open:!0,duplicates:wt,newContact:{name:L.name,email:L.email,companyId:L.companyId||void 0,role:L.role,phone:L.phone,linkedin:L.linkedin||void 0}}),f(!1);return}if(Xe.code==="VALIDATION_ERROR"||Xe.details&&Xe.details.errors){const Et={};(((We=Xe.details)==null?void 0:We.errors)||(Xe.message?[Xe.message]:[])).forEach(Ve=>{const xt=Ve.toLowerCase();if(xt.includes("name")||xt.includes("title"))Et.title=Ve;else if(xt.includes("industry"))Et.industry=Ve;else if(xt.includes("region"))Et.region=Ve;else if(xt.includes("domain"))Et.domain=Ve;else if(xt.includes("email"))Et.email=Ve;else if(xt.includes("engagement"))Et.engagement=Ve;else if(xt.includes("start date")||xt.includes("startdate"))Et.startDate=Ve;else if(xt.includes("end date")||xt.includes("enddate"))Et.endDate=Ve;else if(xt.includes("project manager")||xt.includes("manager"))Et.ownerId=Ve;else if(xt.includes("assignee")||xt.includes("lead")||xt.includes("owner"))Et.ownerId=Ve;else if(xt.includes("client")||xt.includes("company"))Et.companyId=Ve;else if(xt.includes("due date")||xt.includes("duedate"))Et.expectedCloseDate=Ve;else if(xt.includes("line item")){const Tt=xt.match(/line item (\d+):\s*(.+)/);if(Tt){const he=parseInt(Tt[1])-1,Ge=Tt[2];Ge.includes("description")?Et[`lineItem_${he}_description`]=Ve:Ge.includes("quantity")?Et[`lineItem_${he}_quantity`]=Ve:(Ge.includes("rate")||Ge.includes("amount"))&&(Et[`lineItem_${he}_rate`]=Ve)}else Et.lineItems=Ve}else xt.includes("amount")&&!xt.includes("line item")&&(Et.lineItems=Ve)}),Object.keys(Et).length>0?(g(Et),p("Please correct the validation errors below")):p(Xe.message||"Validation failed. Please check all required fields.")}else p(Xe.message||"Operational error. Verify mandatory fields and team authorization.");f(!1)}},Me=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},ze=()=>a.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?a.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[a.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:a.jsx(tn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):a.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&a.jsx(Ru,{className:"w-6 h-6"}),i==="project"&&a.jsx(Qf,{className:"w-6 h-6"}),i==="task"&&a.jsx(wo,{className:"w-6 h-6"}),i==="invoice"&&a.jsx(pa,{className:"w-6 h-6"}),i==="contact"&&a.jsx(vo,{className:"w-6 h-6"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:Me()}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"Workspace Update"})]})]}),a.jsx("button",{onClick:re,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(Yt,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:ee,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&a.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(oe=>a.jsx("button",{type:"button",onClick:()=>o(oe),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===oe?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:oe},oe))}),d&&Object.keys(h).length===0&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(Cn,{className:"w-5 h-5 shrink-0"}),a.jsx("span",{children:d})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",a.jsx(ze,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?L.title:L.name,onChange:oe=>{const J=i==="deal"||i==="project"||i==="task"?"title":"name";H(je=>({...je,[J]:oe.target.value})),h[J]&&g(je=>{const ce={...je};return delete ce[J],ce})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.title||h.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(h.title||h.name)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.title||h.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&a.jsx(ze,{})]}),a.jsxs("select",{required:i==="deal"||i==="invoice",value:L.companyId,onChange:oe=>{H(J=>({...J,companyId:oe.target.value})),h.companyId&&g(J=>{const je={...J};return delete je.companyId,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${h.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${h.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),x.map(oe=>a.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),h.companyId&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.companyId]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",a.jsx(ze,{})]}),a.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:L.email,onChange:oe=>{H(J=>({...J,email:oe.target.value})),h.email&&g(J=>{const je={...J};return delete je.email,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.email]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),a.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:L.role,onChange:oe=>H(J=>({...J,role:oe.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),a.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:L.phone,onChange:oe=>H(J=>({...J,phone:oe.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),a.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:L.industry,onChange:oe=>{H(J=>({...J,industry:oe.target.value})),h.industry&&g(J=>{const je={...J};return delete je.industry,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.industry&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.industry]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2 relative",ref:B,children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",a.jsx(ze,{})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>{C(!A),A||M("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${h.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${L.region?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:L.region||"Select Region"}),a.jsx(fo,{className:`w-4 h-4 text-slate-400 transition-transform ${A?"rotate-180":""}`})]}),A&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search regions...",value:F,onChange:oe=>M(oe.target.value),onClick:oe=>oe.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:ne.length>0?ne.map(oe=>a.jsx("button",{type:"button",onClick:()=>{const J=oe.trim();H(je=>({...je,region:J})),C(!1),M(""),g(je=>{const ce={...je};return delete ce.region,ce}),p(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${L.region===oe?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:oe},oe)):a.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),h.region&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.region]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),a.jsx("input",{type:"url",placeholder:"https://www.example.com",value:L.website,onChange:oe=>{const J=oe.target.value;H(je=>{const ce={...je,website:J},ye=J?vf(J):null,me=je.email?vf(je.email):null;return ce.domain=ye||me||"",ce}),(h.domain||h.website)&&g(je=>{const ce={...je};return delete ce.domain,delete ce.website,ce})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.website&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.website]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),a.jsx("input",{type:"email",placeholder:"contact@company.com",value:L.email,onChange:oe=>{const J=oe.target.value;H(je=>{const ce={...je,email:J},ye=je.website?vf(je.website):null,me=J?vf(J):null;return ce.domain=ye||me||"",ce}),(h.email||h.domain)&&g(je=>{const ce={...je};return delete ce.email,delete ce.domain,ce})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.email]})]}),i==="company"&&L.domain&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",a.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),a.jsx("input",{type:"text",value:L.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${h.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),h.domain&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.domain]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),a.jsxs("select",{value:L.projectId||"",onChange:oe=>{const J=oe.target.value;H(je=>({...je,projectId:J===""?"":J}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),N.map(oe=>a.jsx("option",{value:oe.id,children:oe.title},oe.id))]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3.5 h-3.5"})," Task Category"]}),a.jsxs("select",{value:E?"__new__":L.category||"",onChange:oe=>{const J=oe.target.value;J==="__new__"?(I(!0),H(je=>({...je,category:""}))):(I(!1),H(je=>({...je,category:J})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),j.map(oe=>a.jsx("option",{value:oe,children:oe},oe)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),E&&a.jsx("div",{className:"pt-1",children:a.jsx("input",{type:"text",value:L.category,onChange:oe=>H(J=>({...J,category:oe.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Assignee / Lead ",a.jsx(ze,{})]}),a.jsxs("select",{required:!0,value:i==="task"?L.assigneeId:L.ownerId,onChange:oe=>{const J=i==="task"?"assigneeId":"ownerId";H(je=>({...je,[J]:oe.target.value})),h[J]&&g(je=>{const ce={...je};return delete ce[J],ce})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${h.ownerId||h.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[a.jsx("option",{value:"",children:"Select Resource Personnel"}),w.map(oe=>a.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),(h.ownerId||h.assigneeId)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.ownerId||h.assigneeId]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",a.jsx(ze,{})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"relative w-32",children:a.jsx("select",{value:L.currency||Es,onChange:oe=>{H(J=>({...J,currency:oe.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:yx.map(oe=>a.jsxs("option",{value:oe.code,children:[oe.code," (",oe.symbol,")"]},oe.code))})}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:pd(L.currency)}),a.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:L.value,onChange:oe=>{H(J=>({...J,value:oe.target.value})),h.value&&g(J=>{const je={...J};return delete je.value,je})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${h.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),h.value&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.value]})]}),i==="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),a.jsx("div",{className:"relative w-full",children:a.jsx("select",{value:L.currency||Es,onChange:oe=>{H(J=>({...J,currency:oe.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:yx.map(oe=>a.jsxs("option",{value:oe.code,children:[oe.code," (",oe.symbol,")"]},oe.code))})})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",a.jsx(ze,{})]}),a.jsxs("div",{className:"space-y-3",children:[L.lineItems.map((oe,J)=>a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",J+1]}),L.lineItems.length>1&&a.jsx("button",{type:"button",onClick:()=>{const je=L.lineItems.filter((ce,ye)=>ye!==J);H(ce=>({...ce,lineItems:je})),g(ce=>{const ye={...ce};return delete ye[`lineItem_${J}_description`],delete ye[`lineItem_${J}_quantity`],delete ye[`lineItem_${J}_rate`],ye})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Item description",value:oe.description,onChange:je=>{const ce=[...L.lineItems];ce[J]={...ce[J],description:je.target.value},H(ye=>({...ye,lineItems:ce})),h[`lineItem_${J}_description`]&&g(ye=>{const me={...ye};return delete me[`lineItem_${J}_description`],me})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${h[`lineItem_${J}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),h[`lineItem_${J}_description`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:h[`lineItem_${J}_description`]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:oe.quantity||"",onChange:je=>{const ce=parseFloat(je.target.value)||0,ye=oe.rate||0,me=[...L.lineItems];me[J]={...me[J],quantity:ce,amount:ce*ye},H(ge=>({...ge,lineItems:me})),h[`lineItem_${J}_quantity`]&&g(ge=>{const Ce={...ge};return delete Ce[`lineItem_${J}_quantity`],Ce})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${h[`lineItem_${J}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),h[`lineItem_${J}_quantity`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:h[`lineItem_${J}_quantity`]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",pd(L.currency),") ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:oe.rate||"",onChange:je=>{const ce=parseFloat(je.target.value)||0,ye=oe.quantity||0,me=[...L.lineItems];me[J]={...me[J],rate:ce,amount:ye*ce},H(ge=>({...ge,lineItems:me})),h[`lineItem_${J}_rate`]&&g(ge=>{const Ce={...ge};return delete Ce[`lineItem_${J}_rate`],Ce})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${h[`lineItem_${J}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),h[`lineItem_${J}_rate`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:h[`lineItem_${J}_rate`]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),a.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[pd(L.currency),((oe.quantity||0)*(oe.rate||0)).toFixed(2)]})})]})]},J)),a.jsxs("button",{type:"button",onClick:()=>{H(oe=>({...oe,lineItems:[...oe.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),h.lineItems&&g(oe=>{const J={...oe};return delete J.lineItems,J})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Add Line Item"]}),h.lineItems&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.lineItems]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",pd(L.currency),")"]}),a.jsxs("div",{className:"relative",children:[a.jsx(Md,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[pd(L.currency),L.lineItems.reduce((oe,J)=>{const je=J.amount||J.rate*J.quantity||0;return oe+je},0).toFixed(2)]})]})]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",a.jsx(ze,{})]}),a.jsxs("select",{required:!0,value:L.stage,onChange:oe=>{H(J=>({...J,stage:oe.target.value})),h.stage&&g(J=>{const je={...J};return delete je.stage,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${h.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${h.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:"Select Stage"}),a.jsx("option",{value:"Discovery",children:"Discovery"}),a.jsx("option",{value:"Proposal",children:"Proposal"}),a.jsx("option",{value:"Negotiation",children:"Negotiation"}),a.jsx("option",{value:"Won",children:"Won"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),h.stage&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.stage]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",a.jsx(ze,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:L.engagement,onChange:oe=>{H(J=>({...J,engagement:oe.target.value})),h.engagement&&g(J=>{const je={...J};return delete je.engagement,je})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.engagement&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.engagement]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",a.jsx(ze,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx($n,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:L.startDate,onChange:oe=>{if(H(J=>({...J,startDate:oe.target.value})),h.startDate&&g(J=>{const je={...J};return delete je.startDate,je}),oe.target.value&&L.endDate){const J=new Date(oe.target.value),je=new Date(L.endDate);!isNaN(J.getTime())&&!isNaN(je.getTime())&&J>=je?g(ce=>({...ce,endDate:"End Date must be after Start Date"})):h.endDate==="End Date must be after Start Date"&&g(ce=>{const ye={...ce};return delete ye.endDate,ye})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${h.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),h.startDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.startDate]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",a.jsx(ze,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx($n,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:L.endDate,onChange:oe=>{if(H(J=>({...J,endDate:oe.target.value})),h.endDate&&g(J=>{const je={...J};return delete je.endDate,je}),L.startDate&&oe.target.value){const J=new Date(L.startDate),je=new Date(oe.target.value);!isNaN(J.getTime())&&!isNaN(je.getTime())&&J>=je&&g(ce=>({...ce,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${h.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),h.endDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.endDate]})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",a.jsx(ze,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx($n,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:L.expectedCloseDate,onChange:oe=>{H(J=>({...J,expectedCloseDate:oe.target.value})),h.expectedCloseDate&&g(J=>{const je={...J};return delete je.expectedCloseDate,je})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${h.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),h.expectedCloseDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),h.expectedCloseDate]})]}),i!=="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"Due Date"}),a.jsxs("div",{className:"relative",children:[a.jsx($n,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"date",value:L.expectedCloseDate,onChange:oe=>H(J=>({...J,expectedCloseDate:oe.target.value})),className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold"})]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Priority"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(oe=>a.jsx("button",{type:"button",onClick:()=>H({...L,priority:oe}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${L.priority===oe?"bg-white text-indigo-600 shadow-md":"text-slate-400"}`,children:oe},oe))})]}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Add Context or Notes...",value:L.description,onChange:oe=>H(J=>({...J,description:oe.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),a.jsxs("label",{className:"cursor-pointer group block",children:[a.jsxs("div",{className:"flex items-center gap-3 px-5 py-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:X?a.jsx(go,{className:"w-5 h-5"}):a.jsx(nu,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:X?(T==null?void 0:T.name)||"Image attached":"Attach Image to Note"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),a.jsx("input",{ref:z,type:"file",accept:"image/*",onChange:Q,className:"hidden"})]}),X&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:X,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),a.jsx("button",{type:"button",onClick:()=>{V(""),R(null),z.current&&(z.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:a.jsx(Yt,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:re,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),a.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[u?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsx(Vs,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),K&&K.open&&a.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!Y&&G(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:K.duplicates.some(oe=>oe.matchType==="exact"||oe.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),a.jsx("button",{onClick:()=>!Y&&G(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:Y,children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),a.jsx("p",{className:"font-semibold text-slate-900",children:K.newContact.name||""}),K.newContact.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:K.newContact.email}),K.newContact.phone&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",K.newContact.phone]}),K.newContact.role&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",K.newContact.role]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",K.duplicates.length>1?"s":""]}),a.jsx("div",{className:"space-y-3",children:K.duplicates.map((oe,J)=>a.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-900",children:oe.name||""}),oe.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:oe.email}),a.jsxs("div",{className:"mt-2 space-y-1",children:[oe.role?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",oe.role]}):K.newContact.role&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",K.newContact.role," (will be added)"]}),oe.phone?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",oe.phone]}):K.newContact.phone&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",K.newContact.phone," (will be added)"]}),!oe.companyId&&K.newContact.companyId&&a.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),oe.matchType==="fuzzy"&&oe.similarity&&a.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(oe.similarity*100),"% name similarity"]}),oe.matchType==="exact"&&a.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),a.jsxs("button",{onClick:async()=>{if(!Y){q(!0);try{const je={};K.newContact.name&&(!oe.name||oe.name.trim()===""||K.newContact.name.trim()!==oe.name.trim())&&(je.name=K.newContact.name),K.newContact.email&&(!oe.email||oe.email.trim()==="")&&(je.email=K.newContact.email),K.newContact.phone&&(!oe.phone||oe.phone.trim()==="")&&(je.phone=K.newContact.phone),K.newContact.role&&(!oe.role||oe.role.trim()==="")&&(je.role=K.newContact.role),K.newContact.companyId&&(!oe.companyId||oe.companyId.trim()==="")&&(je.companyId=K.newContact.companyId),K.newContact.linkedin&&(!oe.linkedin||oe.linkedin.trim()==="")&&(je.linkedin=K.newContact.linkedin),Object.keys(je).length>0&&await pR(oe.id,je),G(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(je){console.error("[MERGE] Failed:",je),p(je.message||"Merge failed"),q(!1)}}},disabled:Y,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[Y?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(e2,{className:"w-4 h-4"}),"Merge"]})]})},oe.id||J))})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>G(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:Y,children:"Cancel"}),a.jsxs("button",{onClick:async()=>{if(!Y){q(!0);try{await $P(K.newContact),G(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(oe){console.error("[CREATE] Failed:",oe),p(oe.message||"Failed to create contact"),q(!1),G(null)}}},disabled:Y,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[Y?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsx(Qr,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},hEe=({event:e,selectedDate:t,onClose:r,onSuccess:n})=>{const{showSuccess:s,showError:i}=Wn(),[o,l]=D.useState(!1),[c,u]=D.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});D.useEffect(()=>{if(e)u({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const d=new Date(t);d.setHours(9,0,0,0);const p=new Date(t);p.setHours(10,0,0,0),u(h=>({...h,start:d.toISOString().substring(0,16),end:p.toISOString().substring(0,16)}))}},[e,t]);const f=async d=>{d.preventDefault(),l(!0);try{e?(await R1e(e.id,c),s("Event updated successfully")):(await M1e({...c,source:"local"}),s("Event created successfully")),n(),r()}catch(p){i(p.message||"Failed to save event")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx($n,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:d=>u({...c,title:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Ha,{className:"w-3 h-3"})," Start"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:d=>u({...c,start:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Ha,{className:"w-3 h-3"})," End"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:d=>u({...c,end:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3 h-3"})," Event Type"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(d=>a.jsx("button",{type:"button",onClick:()=>u({...c,type:d}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===d?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:d},d))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(lH,{className:"w-3 h-3"})," Description"]}),a.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:d=>u({...c,description:d.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Wu,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},pEe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Wn(),[n,s]=D.useState(!1),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[u,f]=D.useState(!1);D.useEffect(()=>{const B=setTimeout(()=>f(!0),500);return()=>clearTimeout(B)},[]);const[d,p]=D.useState({type:"bug",title:"",description:""}),[h,g]=D.useState([]),[x,m]=D.useState(!1),[v,y]=D.useState("upload"),[w,b]=D.useState(""),[N,S]=D.useState(!1),j=D.useRef(null),_=D.useRef(h);D.useEffect(()=>{_.current=h},[h]),D.useEffect(()=>()=>{_.current.forEach(B=>{B.source==="file"&&B.type==="video"&&B.preview.startsWith("blob:")&&URL.revokeObjectURL(B.preview)})},[]);const E=(B,K=1920,G=1080,Y=.8)=>new Promise((q,X)=>{const V=new FileReader;V.onload=T=>{var z;const R=new Image;R.onload=()=>{let L=R.width,H=R.height;L>H?L>K&&(H=H*K/L,L=K):H>G&&(L=L*G/H,H=G);const ne=document.createElement("canvas");ne.width=L,ne.height=H;const se=ne.getContext("2d");if(!se){X(new Error("Failed to create canvas context"));return}se.drawImage(R,0,0,L,H);const Q=ne.toDataURL("image/jpeg",Y);q(Q)},R.onerror=()=>X(new Error("Failed to load image")),R.src=(z=T.target)==null?void 0:z.result},V.onerror=()=>X(new Error("Failed to read file")),V.readAsDataURL(B)}),I=async B=>{const K=B.target.files;if(!(!K||K.length===0)){m(!0);try{const G=[];for(let Y=0;Y<K.length;Y++){const q=K[Y];if(!q.type.startsWith("image/")&&!q.type.startsWith("video/")){r("Please select only image or video files");continue}if(q.size>10*1024*1024){r(`File "${q.name}" is too large. Maximum size is 10MB`);continue}const X=q.type.startsWith("image/");let V="";X?V=await E(q,1920,1080,.8):V=URL.createObjectURL(q),G.push({file:q,preview:V,type:X?"image":"video",source:"file"})}g(Y=>[...Y,...G]),j.current&&(j.current.value="")}catch(G){r(G.message||"Failed to process file")}finally{m(!1)}}},A=B=>new Promise(K=>{const G=new Image,Y=document.createElement("video"),q=[".jpg",".jpeg",".png",".gif",".webp",".svg"],X=[".mp4",".mov",".avi",".webm",".mkv"],V=B.toLowerCase(),T=q.some(z=>V.includes(z))||V.includes("image")||V.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),R=X.some(z=>V.includes(z))||V.includes("video")||V.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!T&&!R?(G.onload=()=>K(!0),G.onerror=()=>{Y.onloadedmetadata=()=>K(!0),Y.onerror=()=>K(!1),Y.src=B},G.src=B):K(!0)}),C=async()=>{if(!w.trim()){r("Please enter a valid URL");return}try{new URL(w.trim())}catch{r("Please enter a valid URL");return}S(!0);try{if(!await A(w.trim())){r("URL does not appear to be a valid image or video");return}const K=w.toLowerCase(),G=K.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||K.includes("image")||!K.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!K.includes("video"),Y={url:w.trim(),preview:w.trim(),type:G?"image":"video",source:"url"};g(q=>[...q,Y]),b(""),t("URL added successfully")}catch(B){r(B.message||"Failed to validate URL")}finally{S(!1)}},F=B=>{const K=h[B];K.source==="file"&&K.type==="video"&&K.preview.startsWith("blob:")&&URL.revokeObjectURL(K.preview),g(G=>G.filter((Y,q)=>q!==B))},M=async B=>{if(B.preventDefault(),!(!d.title||!d.description)){o(!0);try{const K=h.filter(V=>V.source==="url"),G=h.filter(V=>V.source==="file"),Y=K.length>0?K[0].url:"",q=await Promise.all(G.map(async V=>V.type==="image"?{type:"image",data:V.preview,filename:V.file.name,mimeType:V.file.type,source:"file"}:new Promise((T,R)=>{const z=new FileReader;z.onload=()=>{T({type:"video",data:z.result,filename:V.file.name,mimeType:V.file.type,source:"file"})},z.onerror=R,z.readAsDataURL(V.file)}))),X={...d,userId:(e==null?void 0:e.id)||"anonymous",status:"planned",url:Y||void 0,attachments:q.length>0?q:[]};await kR(X),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),p({type:"bug",title:"",description:""}),h.forEach(V=>{V.type==="video"&&V.preview.startsWith("blob:")&&URL.revokeObjectURL(V.preview)}),g([])},2e3)}catch(K){console.error("[FEEDBACK] Submission failed:",K),r(`Submission error: ${K.message||"Registry error"}`)}finally{o(!1)}}};return a.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[a.jsx("button",{onClick:()=>s(!n),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${u?"transition-all duration-300":""} ${n?"translate-x-full":""}`,children:a.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),a.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${u?"transition-all duration-500 ease-out":""} ${n?"translate-x-0":"translate-x-full"}`,style:u?void 0:{transform:n?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?a.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:a.jsx(tn,{className:"w-10 h-10"})}),a.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):a.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[a.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:a.jsx(ui,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),a.jsx("button",{onClick:()=>{s(!1),h.forEach(B=>{B.source==="file"&&B.type==="video"&&B.preview.startsWith("blob:")&&URL.revokeObjectURL(B.preview)}),g([]),b("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:a.jsx(Yt,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:M,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(Jb,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:a.jsx(oi,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:a.jsx(fk,{className:"w-3 h-3"}),label:"Idea"}].map(B=>a.jsxs("button",{type:"button",onClick:()=>p({...d,type:B.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${d.type===B.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[B.icon," ",B.label]},B.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:d.title,onChange:B=>p({...d,title:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),a.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:d.description,onChange:B=>p({...d,description:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),a.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[a.jsxs("button",{type:"button",onClick:()=>y("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${v==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(nu,{className:"w-3 h-3"}),"Upload"]}),a.jsxs("button",{type:"button",onClick:()=>y("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${v==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(_f,{className:"w-3 h-3"}),"URL"]})]}),v==="upload"&&a.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:x?a.jsx(pt,{className:"w-5 h-5 animate-spin"}):a.jsx(nu,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),a.jsx("input",{ref:j,type:"file",accept:"image/*,video/*",multiple:!0,onChange:I,disabled:x,className:"hidden"})]}),v==="url"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:w,onChange:B=>b(B.target.value),onKeyDown:B=>{B.key==="Enter"&&!N&&w.trim()&&(B.preventDefault(),C())},disabled:N,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),a.jsx("button",{type:"button",onClick:C,disabled:N||!w.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:N?a.jsxs(a.Fragment,{children:[a.jsx(pt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(_f,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),h.length>0&&a.jsx("div",{className:"space-y-2",children:h.map((B,K)=>a.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:B.type==="image"?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:B.preview,alt:`Attachment ${K+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:G=>{G.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(go,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:B.source==="file"?B.file.name:"Image URL"}),B.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:B.source==="file"?`${(B.file.size/1024).toFixed(1)} KB`:B.url})]}),a.jsx("button",{type:"button",onClick:()=>F(K),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ar,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(om,{className:"w-6 h-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(om,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:B.source==="file"?B.file.name:"Video URL"}),B.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:B.source==="file"?`${(B.file.size/(1024*1024)).toFixed(2)} MB`:B.url})]}),a.jsx("button",{type:"button",onClick:()=>F(K),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ar,{className:"w-4 h-4"})})]})},K))})]}),a.jsxs("button",{type:"submit",disabled:i||x||N,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?a.jsx(pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Go,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},mEe=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(S_,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(fH,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Enter your professional email address in the login portal"}),a.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),a.jsx("li",{children:"Enter the 6-digit code sent to your email"}),a.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Check your spam or junk folder"}),a.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),a.jsx("li",{children:'Click "Request New Code" on the verification screen'}),a.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),a.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),a.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),a.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),a.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(xa,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's IT administrator"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),xEe=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(S_,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(Bv,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),a.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsx("div",{children:a.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(pa,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),a.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),a.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),a.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),a.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(SH,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"To authenticate your access and maintain your account"}),a.jsx("li",{children:"To personalize your experience and provide relevant features"}),a.jsx("li",{children:"To provide customer support and respond to your inquiries"}),a.jsx("li",{children:"To improve our services, features, and user experience"}),a.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),a.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),a.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),a.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),a.jsx("li",{children:"Access controls and role-based permissions"}),a.jsx("li",{children:"Regular security audits and monitoring"}),a.jsx("li",{children:"Restricted access to authorized personnel only"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),a.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Authentication and session management"}),a.jsx("li",{children:"Remembering your preferences"}),a.jsx("li",{children:"Security and fraud prevention"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),a.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),a.jsx("li",{children:"When required by law or to protect our rights and safety"}),a.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),a.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),a.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),a.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),a.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),a.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(xa,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),gEe=new vye({defaultOptions:{queries:{staleTime:30*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),vEe=({children:e})=>a.jsx(yye,{client:gEe,children:e}),yEe=()=>{const[e,t]=D.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,n]=D.useState(!1),[s,i]=D.useState(null),[o,l]=D.useState(!1),[c,u]=D.useState(!1),[f,d]=D.useState(""),[p,h]=D.useState(!1),[g,x]=D.useState({isOpen:!1,type:"deal"}),[m,v]=D.useState({isOpen:!1,event:null}),[y,w]=D.useState([]),[b,N]=D.useState(!1),[S,j]=D.useState(!1),_=y.filter(se=>!se.read).length,E=D.useRef(null),I=D.useCallback(async(se=!1)=>{try{const Q=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!(Q!=null&&Q.id))return;se&&j(!0);const re=await wR(Q.id,20),Ae=(re==null?void 0:re.data)||re||[],ee=(Array.isArray(Ae)?Ae:[]).map(Me=>{let ze="Just now";if(Me.createdAt){const oe=new Date(Me.createdAt),je=new Date().getTime()-oe.getTime(),ce=Math.floor(je/6e4),ye=Math.floor(je/36e5),me=Math.floor(je/864e5);ce<1?ze="Just now":ce<60?ze=`${ce}m ago`:ye<24?ze=`${ye}h ago`:me<7?ze=`${me}d ago`:ze=oe.toLocaleDateString()}return{id:Me.id,userId:Me.userId,type:Me.type||"system",title:Me.title,message:Me.message,timestamp:ze,read:!!Me.read,link:Me.link||void 0}});w(ee)}catch(Q){console.error("[NOTIFICATIONS] Failed to load notifications",Q)}finally{se&&j(!1)}},[s]),A=D.useRef(null),C=D.useRef(!1);D.useEffect(()=>{const se=s||JSON.parse(localStorage.getItem("user_data")||"null");if(se!=null&&se.id)return A.current=null,C.current=!1,I2(async()=>{const{getNotificationWebSocket:Q,disconnectNotificationWebSocket:re}=await import("./notificationWebSocket-B_DBVtkI.js");return{getNotificationWebSocket:Q,disconnectNotificationWebSocket:re}},[]).then(({getNotificationWebSocket:Q,disconnectNotificationWebSocket:re})=>{if(C.current){re();return}const Ae=Q(se.id);"Notification"in window&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(Me=>{console.log("[NOTIFICATIONS] Browser notification permission:",Me)});const ee=Me=>{const ze={id:Me.id,userId:Me.userId,type:Me.type||"system",title:Me.title||"Notification",message:Me.message||"",timestamp:"Just now",read:!1,link:Me.link};if(w(oe=>oe.find(je=>je.id===Me.id)?oe:[ze,...oe].slice(0,100)),window.dispatchEvent(new Event("refresh-notifications")),"Notification"in window&&window.Notification.permission==="granted")try{const oe=new window.Notification(Me.title||"Notification",{body:Me.message||"",icon:"/favicon.ico",tag:Me.id,requireInteraction:!1});oe.onclick=()=>{window.focus(),Me.link&&(window.location.href=Me.link),oe.close()},setTimeout(()=>oe.close(),5e3)}catch(oe){console.error("[NOTIFICATIONS] Error showing browser notification:",oe)}};Ae.on("notification",ee),Ae.connect().catch(Me=>{console.error("[NOTIFICATIONS] WebSocket connection failed:",Me)}),A.current=()=>{Ae.off("notification",ee),re()}}),()=>{var Q;C.current=!0,(Q=A.current)==null||Q.call(A),A.current=null}},[s]),D.useEffect(()=>{I();const se=setInterval(()=>{I(!1)},3e4),Q=()=>{I(!0)};return window.addEventListener("refresh-notifications",Q),()=>{clearInterval(se),window.removeEventListener("refresh-notifications",Q)}},[I]),D.useEffect(()=>{b&&I(!0)},[b,I]),D.useEffect(()=>{const se=()=>{const Q=window.innerWidth<1024;l(Q),n(!Q)};return se(),window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]);const[F,M]=D.useState(null);D.useEffect(()=>{const se=new URLSearchParams(window.location.search),Q=se.get("tab"),re=se.get("company");if(Q&&["dashboard","schedule","crm","pipeline","projects","tasks","invoices","roadmap","users","settings","integrations","satisfaction"].includes(Q)){t(Q),localStorage.setItem("activeTab",Q),Q==="satisfaction"&&re&&M(re),se.delete("tab"),se.delete("company");const ee=se.toString()?`${window.location.pathname}?${se.toString()}`:window.location.pathname;window.history.replaceState({},"",ee)}},[]),D.useEffect(()=>{const se=Q=>{E.current&&!E.current.contains(Q.target)&&N(!1)};return document.addEventListener("mousedown",se),()=>document.removeEventListener("mousedown",se)},[]);const B=async()=>{await Ige(),window.location.reload()},K=async se=>{var re;const Q=(s==null?void 0:s.id)||((re=JSON.parse(localStorage.getItem("user_data")||"null"))==null?void 0:re.id);if(Q){w(Ae=>Ae.map(ee=>ee.id===se?{...ee,read:!0}:ee));try{await NR(se,Q)}catch{}}},G=async()=>{var Q;const se=(s==null?void 0:s.id)||((Q=JSON.parse(localStorage.getItem("user_data")||"null"))==null?void 0:Q.id);if(se){w(re=>re.map(Ae=>({...Ae,read:!0})));try{await jR(se)}catch{}}},Y=(se,Q)=>{x({isOpen:!0,type:se,stage:Q||void 0})},q=(se,Q)=>{v({isOpen:!0,event:null,selectedDate:Q})},X=()=>{v({isOpen:!1,event:null})},V=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},T=typeof window<"u"?window.location.pathname:"",[R,z]=D.useState(()=>T==="/privacy-policy"||T==="/privacy"?"privacy":T==="/help"?"help":T.startsWith("/survey/")?"survey":null),L=T.startsWith("/survey/")?T.replace("/survey/",""):null;if(D.useEffect(()=>{const se=window.location.pathname;se==="/privacy-policy"||se==="/privacy"?z("privacy"):se==="/help"?z("help"):se.startsWith("/survey/")?z("survey"):z(null)},[]),D.useEffect(()=>{const se=()=>{const Q=window.location.pathname;Q==="/privacy-policy"||Q==="/privacy"?z("privacy"):Q==="/help"?z("help"):Q.startsWith("/survey/")?z("survey"):z(null)};return window.addEventListener("popstate",se),()=>window.removeEventListener("popstate",se)},[]),R==="privacy")return a.jsx(xEe,{onBack:()=>{window.history.pushState({},"","/"),z(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(R==="help")return a.jsx(mEe,{onBack:()=>{window.history.pushState({},"","/"),z(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(R==="survey"&&L)return a.jsx(rbe,{surveyId:L});const H=()=>{switch(e){case"dashboard":return a.jsx(r8,{onNavigate:t});case"schedule":return a.jsx(mCe,{currentUser:s,onNavigate:t,onNewEvent:()=>q()});case"crm":return a.jsx(zye,{onNavigate:t,onAddCompany:()=>Y("company"),onAddContact:()=>Y("contact"),externalSearchQuery:f});case"pipeline":return a.jsx(qye,{onNavigate:t,onNewDeal:se=>Y("deal",se),currentUser:s});case"projects":return a.jsx(Zye,{onNavigate:t,onCreateProject:()=>Y("project"),currentUser:s});case"satisfaction":return a.jsx(ebe,{onNavigate:t,companyIdFromUrl:F,onClearCompanyIdFromUrl:()=>M(null)});case"tasks":return a.jsx(uAe,{onCreateTask:()=>Y("task"),currentUser:s});case"invoices":return a.jsx(lCe,{onCreateInvoice:()=>Y("invoice"),currentUser:s});case"expenses":return a.jsx(tEe,{currentUser:s});case"budget":return a.jsx(rEe,{currentUser:s});case"contracts":return a.jsx(nEe,{currentUser:s});case"inbox":return a.jsx(TU,{currentUser:s});case"roadmap":return a.jsx(eEe,{currentUser:s,onNavigate:t});case"users":return a.jsx(cCe,{});case"settings":return a.jsx(hCe,{currentUser:s,onUserUpdate:i});case"data-hygiene":return a.jsx(pCe,{currentUser:s});case"integrations":return a.jsx(xCe,{});case"notifications":return a.jsx(oEe,{currentUser:s,onNavigate:t});default:return a.jsx(r8,{onNavigate:t})}},ne=se=>{t(se),localStorage.setItem("activeTab",se),d(""),o&&n(!1)};return D.useEffect(()=>{const se=setTimeout(()=>u(!0),400);return()=>clearTimeout(se)},[]),a.jsx(vEe,{children:a.jsx(W1e,{children:a.jsx(sEe,{onUserLoaded:i,children:a.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&a.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>n(!1)}),a.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[a.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:a.jsx(Yt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2",children:zH.map(se=>a.jsxs("button",{onClick:()=>ne(se.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===se.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[a.jsx("div",{className:"shrink-0",children:se.icon}),r&&a.jsx("span",{className:"font-medium whitespace-nowrap",children:se.label})]},se.id))}),a.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0",children:[a.jsxs("button",{onClick:()=>ne("settings"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="settings"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(DF,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Settings"})]}),(s==null?void 0:s.role)==="Admin"&&a.jsxs("button",{onClick:()=>ne("data-hygiene"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="data-hygiene"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(k5,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Data Hygiene"})]}),a.jsxs("button",{onClick:()=>h(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[a.jsx(PF,{className:"w-5 h-5 shrink-0"}),r&&a.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),a.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[a.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[a.jsx("button",{onClick:()=>n(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(AH,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{className:"relative group hidden sm:block",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),a.jsx("input",{type:"text",placeholder:"Search Current View...",value:f,onChange:se=>d(se.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsxs("div",{className:"relative",ref:E,children:[a.jsxs("button",{onClick:()=>N(!b),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${b?"bg-slate-100":""}`,children:[a.jsx(j5,{className:`w-5 h-5 transition-colors ${_>0?"text-indigo-600":"text-slate-600"} ${S?"animate-pulse":""}`}),_>0&&a.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:a.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${S?"animate-pulse":""}`,children:_})})]}),b&&a.jsx(iEe,{notifications:y,onMarkAsRead:K,onMarkAllAsRead:G,onRefresh:()=>I(!0),isRefreshing:S,onClose:()=>N(!1),onNavigate:t,onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),a.jsxs("button",{onClick:()=>Y("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[a.jsx(Qr,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),a.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:a.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:H()})}),a.jsx(pEe,{currentUser:s})]}),g.isOpen&&a.jsx(fEe,{type:g.type,stage:g.stage,onClose:()=>x(se=>({...se,isOpen:!1})),onSuccess:()=>{(g.type==="contact"||g.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),g.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),g.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),g.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):g.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),m.isOpen&&a.jsx(hEe,{event:m.event,selectedDate:m.selectedDate,onClose:X,onSuccess:V}),p&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>h(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),a.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(Yt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{onClick:B,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function bEe(){const[e,t]=D.useState("loading"),[r,n]=D.useState(!1);D.useEffect(()=>{const c=Date.now();let u=!1;const f=()=>{if(u)return;const h=Date.now()-c,g=Math.max(0,850-h);setTimeout(()=>{u||t("fading")},g)},d=()=>{var g;if(u)return;(((g=document.fonts)==null?void 0:g.ready)??Promise.resolve()).then(()=>{u||setTimeout(f,1100)}).catch(()=>setTimeout(f,1100))};if(document.readyState==="complete")return d(),()=>{u=!0};window.addEventListener("load",d);const p=setTimeout(()=>{u||t("fading")},4500);return()=>{u=!0,window.removeEventListener("load",d),clearTimeout(p)}},[]),D.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),D.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>n(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return a.jsxs(a.Fragment,{children:[(e==="fading"||e==="done")&&a.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:a.jsx(yEe,{})}),s&&a.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[a.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),a.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const OU=document.getElementById("root");if(!OU)throw new Error("Could not find root element to mount to");const wEe=v4.createRoot(OU);wEe.render(a.jsx(nt.StrictMode,{children:a.jsx(bEe,{})}));export{Jn as _,kl as c,sa as g};
